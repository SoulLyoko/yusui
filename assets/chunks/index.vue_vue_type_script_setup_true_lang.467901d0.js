var PT=Object.defineProperty;var NT=(e,i,o)=>i in e?PT(e,i,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[i]=o;var yi=(e,i,o)=>(NT(e,typeof i!="symbol"?i+"":i,o),o);import{c as jT,v as Xi,I as MT,u as RT}from"../flow-design_demo.md.dd48f6fb.js";import{q as Lp,R as kT,e as _f,ak as cm}from"../composables_use-crud_index.md.78467a23.js";import{r as DT}from"../app.6021b25a.js";import{i as lm,u as CT}from"./uniqueId.3d52e0a8.js";import{n as Bg,w as o_,h as WE,r as IT,e as LT,H as _a,j as Pc,D as Ef,E as Cc,l as Gg,J as xf,p as FT,u as ri,i as wf,C as BT,f as GT,k as UT,aG as zT}from"./framework.19abbf41.js";import{u as HT}from"./theme.df9598b1.js";const i_={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function a_(e,i){return e.map(o=>{const s=i.find(m=>m.buttonKey===o.buttonKey),{name:n,buttonKey:c,display:f,approval:h}=o;return{name:n,buttonKey:c,display:f,approval:h,...s}})}function Ug(e,i){return e.map(o=>{var S,N;const s=i.find(j=>j.prop===o.prop),{label:n,prop:c,display:f=!0,disabled:h=!1,detail:v=!1,readonly:m=!1,rules:g}=o,w=(g==null?void 0:g.some(j=>j.required))??!1,x={label:n,prop:c,display:f,disabled:h,detail:v,readonly:m,required:w,...s};return o.type==="dynamic"&&((N=(S=o.children)==null?void 0:S.column)!=null&&N.length)&&(x.children=Ug(o.children.column,(s==null?void 0:s.children)??[])),x})}function XT({lf:e,graphData:i,elementData:o,formData:s,formLoading:n,formOption:c,formOptions:f,editorVisible:h,dataOptions:v,formRef:m,formDefaults:g}){var S,N,j,R,D,V,ce,Ee,fe;async function w({data:W,isForce:ae}={data:{},isForce:!1}){var F,$,K,I,pe,De,Q;const Y=(F=e.value)==null?void 0:F.graphModel.nodes.find(se=>se.type==="process");!W&&(Y!=null&&Y.id)&&(W=($=e.value)==null?void 0:$.getNodeDataById(Y.id)),!((W==null?void 0:W.id)===((K=o.value)==null?void 0:K.id)&&(W==null?void 0:W.type)===((I=o.value)==null?void 0:I.type)&&!ae)&&(W.type!=="process"&&((pe=e.value)==null||pe.selectElementById(W.id)),n.value=!0,await Bg(),o.value=W,c.value={menuBtn:!1,span:24,labelPosition:"left",group:((De=f.value)==null?void 0:De[W.type])??jT},s.value={...W.properties,id:W.id,name:((Q=W.text)==null?void 0:Q.value)||""},n.value=!1,await Bg(),x())}async function x(){var I,pe,De,Q,se,he,be;const{formPropertyList:W,buttonList:ae,fieldsDic:Y,flowButtonDisplayDic:F,flowButtonApprovalDic:$}=v.value??{},K=ee=>{var ve,Fe;return(Fe=(ve=c.value)==null?void 0:ve.group)==null?void 0:Fe.some(Ze=>{var ht;return(ht=Ze.column)==null?void 0:ht.some(Ft=>Ft.prop===ee)})};K("button")&&(s.value.button=a_(ae||[],((I=s.value)==null?void 0:I.button)||[]),(Q=(De=(pe=g.value)==null?void 0:pe.button.children)==null?void 0:De.column)==null||Q.forEach(ee=>{ee.prop==="display"&&(ee.dicData=F),ee.prop==="approval"&&(ee.dicData=$)})),K("formProperty")&&(s.value.formProperty=Ug(W||[],((se=s.value)==null?void 0:se.formProperty)||[])),K("priority")&&((he=m.value)==null||he.updateDic("priority",Y)),K("formTitle")&&((be=m.value)==null||be.updateDic("formTitle",Y))}(S=e.value)==null||S.on("element:click",w),(N=e.value)==null||N.on("blank:click",w),(j=e.value)==null||j.on("node:add",w),(R=e.value)==null||R.on("node:dnd-add",w),(D=e.value)==null||D.on("node:delete",()=>w()),(V=e.value)==null||V.on("history:change",()=>{var W;i.value=(W=e.value)==null?void 0:W.getGraphData()}),(ce=e.value)==null||ce.on("custom:edit-click",()=>{h.value=!0}),(Ee=e.value)==null||Ee.on("custom:reset-form-property",()=>{var W,ae;(ae=(W=i.value)==null?void 0:W.flowElementList)==null||ae.forEach(Y=>{var F,$;(F=Y.properties)!=null&&F.formProperty&&(Y.properties.formProperty=Ug((($=v.value)==null?void 0:$.formPropertyList)||[],[]))}),i.value={...i.value}}),(fe=e.value)==null||fe.on("custom:reset-button",()=>{var W,ae;(ae=(W=i.value)==null?void 0:W.flowElementList)==null||ae.forEach(Y=>{var F,$;(F=Y.properties)!=null&&F.button&&(Y.properties.button=a_((($=v.value)==null?void 0:$.buttonList)||[],[]))}),i.value={...i.value}})}var zg={exports:{}};(function(e,i){(function(o,s){e.exports=s()})(window,function(){return function(o){var s={};function n(c){if(s[c])return s[c].exports;var f=s[c]={i:c,l:!1,exports:{}};return o[c].call(f.exports,f,f.exports,n),f.l=!0,f.exports}return n.m=o,n.c=s,n.d=function(c,f,h){n.o(c,f)||Object.defineProperty(c,f,{enumerable:!0,get:h})},n.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},n.t=function(c,f){if(1&f&&(c=n(c)),8&f||4&f&&typeof c=="object"&&c&&c.__esModule)return c;var h=Object.create(null);if(n.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:c}),2&f&&typeof c!="string")for(var v in c)n.d(h,v,function(m){return c[m]}.bind(null,v));return h},n.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return n.d(f,"a",f),f},n.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},n.p="",n(n.s=215)}([function(o,s,n){n.d(s,"a",function(){return fe}),n.d(s,"b",function(){return Ee}),n.d(s,"c",function(){return xt}),n.d(s,"d",function(){return tr}),n.d(s,"e",function(){return D}),n.d(s,"f",function(){return ce}),n.d(s,"g",function(){return D}),n.d(s,"h",function(){return bt}),n.d(s,"i",function(){return f}),n.d(s,"j",function(){return Ft}),n.d(s,"k",function(){return I});var c,f,h,v,m,g,w,x={},S=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function j(we,ne){for(var me in ne)we[me]=ne[me];return we}function R(we){var ne=we.parentNode;ne&&ne.removeChild(we)}function D(we,ne,me){var qe,gt,et,kt={};for(et in ne)et=="key"?qe=ne[et]:et=="ref"?gt=ne[et]:kt[et]=ne[et];if(arguments.length>2&&(kt.children=arguments.length>3?c.call(arguments,2):me),typeof we=="function"&&we.defaultProps!=null)for(et in we.defaultProps)kt[et]===void 0&&(kt[et]=we.defaultProps[et]);return V(we,kt,qe,gt,null)}function V(we,ne,me,qe,gt){var et={type:we,props:ne,key:me,ref:qe,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:gt??++h};return gt==null&&f.vnode!=null&&f.vnode(et),et}function ce(){return{current:null}}function Ee(we){return we.children}function fe(we,ne){this.props=we,this.context=ne}function W(we,ne){if(ne==null)return we.__?W(we.__,we.__.__k.indexOf(we)+1):null;for(var me;ne<we.__k.length;ne++)if((me=we.__k[ne])!=null&&me.__e!=null)return me.__e;return typeof we.type=="function"?W(we):null}function ae(we){var ne,me;if((we=we.__)!=null&&we.__c!=null){for(we.__e=we.__c.base=null,ne=0;ne<we.__k.length;ne++)if((me=we.__k[ne])!=null&&me.__e!=null){we.__e=we.__c.base=me.__e;break}return ae(we)}}function Y(we){(!we.__d&&(we.__d=!0)&&v.push(we)&&!F.__r++||g!==f.debounceRendering)&&((g=f.debounceRendering)||m)(F)}function F(){for(var we;F.__r=v.length;)we=v.sort(function(ne,me){return ne.__v.__b-me.__v.__b}),v=[],we.some(function(ne){var me,qe,gt,et,kt,zt;ne.__d&&(kt=(et=(me=ne).__v).__e,(zt=me.__P)&&(qe=[],(gt=j({},et)).__v=et.__v+1,be(zt,et,gt,me.__n,zt.ownerSVGElement!==void 0,et.__h!=null?[kt]:null,qe,kt??W(et),et.__h),ee(qe,et),et.__e!=kt&&ae(et)))})}function $(we,ne,me,qe,gt,et,kt,zt,Zt,Gt){var ze,Yt,xe,Ht,yr,G,pr,Dr=qe&&qe.__k||S,$r=Dr.length;for(me.__k=[],ze=0;ze<ne.length;ze++)if((Ht=me.__k[ze]=(Ht=ne[ze])==null||typeof Ht=="boolean"?null:typeof Ht=="string"||typeof Ht=="number"||typeof Ht=="bigint"?V(null,Ht,null,null,Ht):Array.isArray(Ht)?V(Ee,{children:Ht},null,null,null):Ht.__b>0?V(Ht.type,Ht.props,Ht.key,null,Ht.__v):Ht)!=null){if(Ht.__=me,Ht.__b=me.__b+1,(xe=Dr[ze])===null||xe&&Ht.key==xe.key&&Ht.type===xe.type)Dr[ze]=void 0;else for(Yt=0;Yt<$r;Yt++){if((xe=Dr[Yt])&&Ht.key==xe.key&&Ht.type===xe.type){Dr[Yt]=void 0;break}xe=null}be(we,Ht,xe=xe||x,gt,et,kt,zt,Zt,Gt),yr=Ht.__e,(Yt=Ht.ref)&&xe.ref!=Yt&&(pr||(pr=[]),xe.ref&&pr.push(xe.ref,null,Ht),pr.push(Yt,Ht.__c||yr,Ht)),yr!=null?(G==null&&(G=yr),typeof Ht.type=="function"&&Ht.__k===xe.__k?Ht.__d=Zt=K(Ht,Zt,we):Zt=pe(we,Ht,xe,Dr,yr,Zt),typeof me.type=="function"&&(me.__d=Zt)):Zt&&xe.__e==Zt&&Zt.parentNode!=we&&(Zt=W(xe))}for(me.__e=G,ze=$r;ze--;)Dr[ze]!=null&&(typeof me.type=="function"&&Dr[ze].__e!=null&&Dr[ze].__e==me.__d&&(me.__d=W(qe,ze+1)),Ze(Dr[ze],Dr[ze]));if(pr)for(ze=0;ze<pr.length;ze++)Fe(pr[ze],pr[++ze],pr[++ze])}function K(we,ne,me){for(var qe,gt=we.__k,et=0;gt&&et<gt.length;et++)(qe=gt[et])&&(qe.__=we,ne=typeof qe.type=="function"?K(qe,ne,me):pe(me,qe,qe,gt,qe.__e,ne));return ne}function I(we,ne){return ne=ne||[],we==null||typeof we=="boolean"||(Array.isArray(we)?we.some(function(me){I(me,ne)}):ne.push(we)),ne}function pe(we,ne,me,qe,gt,et){var kt,zt,Zt;if(ne.__d!==void 0)kt=ne.__d,ne.__d=void 0;else if(me==null||gt!=et||gt.parentNode==null)e:if(et==null||et.parentNode!==we)we.appendChild(gt),kt=null;else{for(zt=et,Zt=0;(zt=zt.nextSibling)&&Zt<qe.length;Zt+=2)if(zt==gt)break e;we.insertBefore(gt,et),kt=et}return kt!==void 0?kt:gt.nextSibling}function De(we,ne,me){ne[0]==="-"?we.setProperty(ne,me):we[ne]=me==null?"":typeof me!="number"||N.test(ne)?me:me+"px"}function Q(we,ne,me,qe,gt){var et;e:if(ne==="style")if(typeof me=="string")we.style.cssText=me;else{if(typeof qe=="string"&&(we.style.cssText=qe=""),qe)for(ne in qe)me&&ne in me||De(we.style,ne,"");if(me)for(ne in me)qe&&me[ne]===qe[ne]||De(we.style,ne,me[ne])}else if(ne[0]==="o"&&ne[1]==="n")et=ne!==(ne=ne.replace(/Capture$/,"")),ne=ne.toLowerCase()in we?ne.toLowerCase().slice(2):ne.slice(2),we.l||(we.l={}),we.l[ne+et]=me,me?qe||we.addEventListener(ne,et?he:se,et):we.removeEventListener(ne,et?he:se,et);else if(ne!=="dangerouslySetInnerHTML"){if(gt)ne=ne.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(ne!=="href"&&ne!=="list"&&ne!=="form"&&ne!=="tabIndex"&&ne!=="download"&&ne in we)try{we[ne]=me??"";break e}catch{}typeof me=="function"||(me!=null&&(me!==!1||ne[0]==="a"&&ne[1]==="r")?we.setAttribute(ne,me):we.removeAttribute(ne))}}function se(we){this.l[we.type+!1](f.event?f.event(we):we)}function he(we){this.l[we.type+!0](f.event?f.event(we):we)}function be(we,ne,me,qe,gt,et,kt,zt,Zt){var Gt,ze,Yt,xe,Ht,yr,G,pr,Dr,$r,Zr,sr=ne.type;if(ne.constructor!==void 0)return null;me.__h!=null&&(Zt=me.__h,zt=ne.__e=me.__e,ne.__h=null,et=[zt]),(Gt=f.__b)&&Gt(ne);try{e:if(typeof sr=="function"){if(pr=ne.props,Dr=(Gt=sr.contextType)&&qe[Gt.__c],$r=Gt?Dr?Dr.props.value:Gt.__:qe,me.__c?G=(ze=ne.__c=me.__c).__=ze.__E:("prototype"in sr&&sr.prototype.render?ne.__c=ze=new sr(pr,$r):(ne.__c=ze=new fe(pr,$r),ze.constructor=sr,ze.render=ht),Dr&&Dr.sub(ze),ze.props=pr,ze.state||(ze.state={}),ze.context=$r,ze.__n=qe,Yt=ze.__d=!0,ze.__h=[]),ze.__s==null&&(ze.__s=ze.state),sr.getDerivedStateFromProps!=null&&(ze.__s==ze.state&&(ze.__s=j({},ze.__s)),j(ze.__s,sr.getDerivedStateFromProps(pr,ze.__s))),xe=ze.props,Ht=ze.state,Yt)sr.getDerivedStateFromProps==null&&ze.componentWillMount!=null&&ze.componentWillMount(),ze.componentDidMount!=null&&ze.__h.push(ze.componentDidMount);else{if(sr.getDerivedStateFromProps==null&&pr!==xe&&ze.componentWillReceiveProps!=null&&ze.componentWillReceiveProps(pr,$r),!ze.__e&&ze.shouldComponentUpdate!=null&&ze.shouldComponentUpdate(pr,ze.__s,$r)===!1||ne.__v===me.__v){ze.props=pr,ze.state=ze.__s,ne.__v!==me.__v&&(ze.__d=!1),ze.__v=ne,ne.__e=me.__e,ne.__k=me.__k,ne.__k.forEach(function(un){un&&(un.__=ne)}),ze.__h.length&&kt.push(ze);break e}ze.componentWillUpdate!=null&&ze.componentWillUpdate(pr,ze.__s,$r),ze.componentDidUpdate!=null&&ze.__h.push(function(){ze.componentDidUpdate(xe,Ht,yr)})}ze.context=$r,ze.props=pr,ze.state=ze.__s,(Gt=f.__r)&&Gt(ne),ze.__d=!1,ze.__v=ne,ze.__P=we,Gt=ze.render(ze.props,ze.state,ze.context),ze.state=ze.__s,ze.getChildContext!=null&&(qe=j(j({},qe),ze.getChildContext())),Yt||ze.getSnapshotBeforeUpdate==null||(yr=ze.getSnapshotBeforeUpdate(xe,Ht)),Zr=Gt!=null&&Gt.type===Ee&&Gt.key==null?Gt.props.children:Gt,$(we,Array.isArray(Zr)?Zr:[Zr],ne,me,qe,gt,et,kt,zt,Zt),ze.base=ne.__e,ne.__h=null,ze.__h.length&&kt.push(ze),G&&(ze.__E=ze.__=null),ze.__e=!1}else et==null&&ne.__v===me.__v?(ne.__k=me.__k,ne.__e=me.__e):ne.__e=ve(me.__e,ne,me,qe,gt,et,kt,Zt);(Gt=f.diffed)&&Gt(ne)}catch(un){ne.__v=null,(Zt||et!=null)&&(ne.__e=zt,ne.__h=!!Zt,et[et.indexOf(zt)]=null),f.__e(un,ne,me)}}function ee(we,ne){f.__c&&f.__c(ne,we),we.some(function(me){try{we=me.__h,me.__h=[],we.some(function(qe){qe.call(me)})}catch(qe){f.__e(qe,me.__v)}})}function ve(we,ne,me,qe,gt,et,kt,zt){var Zt,Gt,ze,Yt=me.props,xe=ne.props,Ht=ne.type,yr=0;if(Ht==="svg"&&(gt=!0),et!=null){for(;yr<et.length;yr++)if((Zt=et[yr])&&"setAttribute"in Zt==!!Ht&&(Ht?Zt.localName===Ht:Zt.nodeType===3)){we=Zt,et[yr]=null;break}}if(we==null){if(Ht===null)return document.createTextNode(xe);we=gt?document.createElementNS("http://www.w3.org/2000/svg",Ht):document.createElement(Ht,xe.is&&xe),et=null,zt=!1}if(Ht===null)Yt===xe||zt&&we.data===xe||(we.data=xe);else{if(et=et&&c.call(we.childNodes),Gt=(Yt=me.props||x).dangerouslySetInnerHTML,ze=xe.dangerouslySetInnerHTML,!zt){if(et!=null)for(Yt={},yr=0;yr<we.attributes.length;yr++)Yt[we.attributes[yr].name]=we.attributes[yr].value;(ze||Gt)&&(ze&&(Gt&&ze.__html==Gt.__html||ze.__html===we.innerHTML)||(we.innerHTML=ze&&ze.__html||""))}if(function(G,pr,Dr,$r,Zr){var sr;for(sr in Dr)sr==="children"||sr==="key"||sr in pr||Q(G,sr,null,Dr[sr],$r);for(sr in pr)Zr&&typeof pr[sr]!="function"||sr==="children"||sr==="key"||sr==="value"||sr==="checked"||Dr[sr]===pr[sr]||Q(G,sr,pr[sr],Dr[sr],$r)}(we,xe,Yt,gt,zt),ze)ne.__k=[];else if(yr=ne.props.children,$(we,Array.isArray(yr)?yr:[yr],ne,me,qe,gt&&Ht!=="foreignObject",et,kt,et?et[0]:me.__k&&W(me,0),zt),et!=null)for(yr=et.length;yr--;)et[yr]!=null&&R(et[yr]);zt||("value"in xe&&(yr=xe.value)!==void 0&&(yr!==Yt.value||yr!==we.value||Ht==="progress"&&!yr)&&Q(we,"value",yr,Yt.value,!1),"checked"in xe&&(yr=xe.checked)!==void 0&&yr!==we.checked&&Q(we,"checked",yr,Yt.checked,!1))}return we}function Fe(we,ne,me){try{typeof we=="function"?we(ne):we.current=ne}catch(qe){f.__e(qe,me)}}function Ze(we,ne,me){var qe,gt;if(f.unmount&&f.unmount(we),(qe=we.ref)&&(qe.current&&qe.current!==we.__e||Fe(qe,null,ne)),(qe=we.__c)!=null){if(qe.componentWillUnmount)try{qe.componentWillUnmount()}catch(et){f.__e(et,ne)}qe.base=qe.__P=null}if(qe=we.__k)for(gt=0;gt<qe.length;gt++)qe[gt]&&Ze(qe[gt],ne,typeof we.type!="function");me||we.__e==null||R(we.__e),we.__e=we.__d=void 0}function ht(we,ne,me){return this.constructor(we,me)}function Ft(we,ne,me){var qe,gt,et;f.__&&f.__(we,ne),gt=(qe=typeof me=="function")?null:me&&me.__k||ne.__k,et=[],be(ne,we=(!qe&&me||ne).__k=D(Ee,null,[we]),gt||x,x,ne.ownerSVGElement!==void 0,!qe&&me?[me]:gt?null:ne.firstChild?c.call(ne.childNodes):null,et,!qe&&me?me:gt?gt.__e:ne.firstChild,qe),ee(et,we)}function bt(we,ne){Ft(we,ne,bt)}function xt(we,ne,me){var qe,gt,et,kt=j({},we.props);for(et in ne)et=="key"?qe=ne[et]:et=="ref"?gt=ne[et]:kt[et]=ne[et];return arguments.length>2&&(kt.children=arguments.length>3?c.call(arguments,2):me),V(we.type,kt,qe||we.key,gt||we.ref,null)}function tr(we,ne){var me={__c:ne="__cC"+w++,__:we,Consumer:function(qe,gt){return qe.children(gt)},Provider:function(qe){var gt,et;return this.getChildContext||(gt=[],(et={})[ne]=this,this.getChildContext=function(){return et},this.shouldComponentUpdate=function(kt){this.props.value!==kt.value&&gt.some(Y)},this.sub=function(kt){gt.push(kt);var zt=kt.componentWillUnmount;kt.componentWillUnmount=function(){gt.splice(gt.indexOf(kt),1),zt&&zt.call(kt)}}),qe.children}};return me.Provider.__=me.Consumer.contextType=me}c=S.slice,f={__e:function(we,ne){for(var me,qe,gt;ne=ne.__;)if((me=ne.__c)&&!me.__)try{if((qe=me.constructor)&&qe.getDerivedStateFromError!=null&&(me.setState(qe.getDerivedStateFromError(we)),gt=me.__d),me.componentDidCatch!=null&&(me.componentDidCatch(we),gt=me.__d),gt)return me.__E=me}catch(et){we=et}throw we}},h=0,fe.prototype.setState=function(we,ne){var me;me=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=j({},this.state),typeof we=="function"&&(we=we(j({},me),this.props)),we&&j(me,we),we!=null&&this.__v&&(ne&&this.__h.push(ne),Y(this))},fe.prototype.forceUpdate=function(we){this.__v&&(this.__e=!0,we&&this.__h.push(we),Y(this))},fe.prototype.render=Ee,v=[],m=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,F.__r=0,w=0},function(o,s,n){(function(c,f){n.d(s,"a",function(){return Y}),n.d(s,"b",function(){return xu}),n.d(s,"c",function(){return Co}),n.d(s,"d",function(){return dr}),n.d(s,"e",function(){return wt}),n.d(s,"f",function(){return Nt}),n.d(s,"g",function(){return or}),n.d(s,"h",function(){return io}),n.d(s,"i",function(){return Zr}),n.d(s,"j",function(){return Xt}),n.d(s,"k",function(){return Ho}),n.d(s,"l",function(){return gu}),n.d(s,"m",function(){return G}),n.d(s,"n",function(){return wi}),n.d(s,"o",function(){return K}),n.d(s,"p",function(){return Ts}),n.d(s,"q",function(){return po}),n.d(s,"r",function(){return Ta}),n.d(s,"s",function(){return oo}),n.d(s,"t",function(){return Yi}),n.d(s,"u",function(){return Sa}),n.d(s,"v",function(){return Qc}),n.d(s,"w",function(){return Ss}),n.d(s,"x",function(){return An}),n.d(s,"y",function(){return Po}),n.d(s,"z",function(){return _n}),n.d(s,"A",function(){return Nn}),n.d(s,"B",function(){return ho}),n.d(s,"C",function(){return Gt}),n.d(s,"D",function(){return wu}),n.d(s,"E",function(){return Ei}),n.d(s,"F",function(){return _i}),n.d(s,"G",function(){return Zc}),n.d(s,"H",function(){return bs}),n.d(s,"I",function(){return tl}),n.d(s,"J",function(){return vo}),n.d(s,"K",function(){return Ne}),n.d(s,"L",function(){return Gn}),n.d(s,"M",function(){return As});var h=[];Object.freeze(h);var v={};function m(){return++qt.mobxGuid}function g(_){throw w(!1,_),"X"}function w(_,E){if(!_)throw new Error("[mobx] "+(E||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(v);function x(_){var E=!1;return function(){if(!E)return E=!0,_.apply(this,arguments)}}var S=function(){};function N(_){return _!==null&&typeof _=="object"}function j(_){if(_===null||typeof _!="object")return!1;var E=Object.getPrototypeOf(_);return E===Object.prototype||E===null}function R(_,E,P){Object.defineProperty(_,E,{enumerable:!1,writable:!0,configurable:!0,value:P})}function D(_,E){var P="isMobX"+_;return E.prototype[P]=!0,function(L){return N(L)&&L[P]===!0}}function V(_){return _ instanceof Map}function ce(_){return _ instanceof Set}function Ee(_){var E=new Set;for(var P in _)E.add(P);return Object.getOwnPropertySymbols(_).forEach(function(L){Object.getOwnPropertyDescriptor(_,L).enumerable&&E.add(L)}),Array.from(E)}function fe(_){return _&&_.toString?_.toString():new String(_).toString()}function W(_){return _===null?null:typeof _=="object"?""+_:_}var ae=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(_){return Object.getOwnPropertyNames(_).concat(Object.getOwnPropertySymbols(_))}:Object.getOwnPropertyNames,Y=Symbol("mobx administration"),F=function(){function _(E){E===void 0&&(E="Atom@"+m()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Yt.NOT_TRACKING}return _.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.reportObserved=function(){return gs(this)},_.prototype.reportChanged=function(){lo(),function(E){E.lowestObserverState!==Yt.STALE&&(E.lowestObserverState=Yt.STALE,E.observers.forEach(function(P){P.dependenciesState===Yt.UP_TO_DATE&&(P.isTracing!==xe.NONE&&zo(P,E),P.onBecomeStale()),P.dependenciesState=Yt.STALE}))}(this),fo()},_.prototype.toString=function(){return this.name},_}(),$=D("Atom",F);function K(_,E,P){E===void 0&&(E=S),P===void 0&&(P=S);var L,Z=new F(_);return E!==S&&ws("onBecomeObserved",Z,E,L),P!==S&&Ei(Z,P),Z}var I={identity:function(_,E){return _===E},structural:function(_,E){return Tu(_,E)},default:function(_,E){return Object.is(_,E)},shallow:function(_,E){return Tu(_,E,1)}},pe=function(_,E){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,L){P.__proto__=L}||function(P,L){for(var Z in L)L.hasOwnProperty(Z)&&(P[Z]=L[Z])},pe(_,E)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var De=function(){return De=Object.assign||function(_){for(var E,P=1,L=arguments.length;P<L;P++)for(var Z in E=arguments[P])Object.prototype.hasOwnProperty.call(E,Z)&&(_[Z]=E[Z]);return _},De.apply(this,arguments)};function Q(_){var E=typeof Symbol=="function"&&_[Symbol.iterator],P=0;return E?E.call(_):{next:function(){return _&&P>=_.length&&(_=void 0),{value:_&&_[P++],done:!_}}}}function se(_,E){var P=typeof Symbol=="function"&&_[Symbol.iterator];if(!P)return _;var L,Z,Ae=P.call(_),Xe=[];try{for(;(E===void 0||E-- >0)&&!(L=Ae.next()).done;)Xe.push(L.value)}catch(mt){Z={error:mt}}finally{try{L&&!L.done&&(P=Ae.return)&&P.call(Ae)}finally{if(Z)throw Z.error}}return Xe}function he(){for(var _=[],E=0;E<arguments.length;E++)_=_.concat(se(arguments[E]));return _}var be=Symbol("mobx did run lazy initializers"),ee=Symbol("mobx pending decorators"),ve={},Fe={};function Ze(_,E){var P=E?ve:Fe;return P[_]||(P[_]={configurable:!0,enumerable:E,get:function(){return ht(this),this[_]},set:function(L){ht(this),this[_]=L}})}function ht(_){var E,P;if(_[be]!==!0){var L=_[ee];if(L){R(_,be,!0);var Z=he(Object.getOwnPropertySymbols(L),Object.keys(L));try{for(var Ae=Q(Z),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=L[Xe.value];mt.propertyCreator(_,mt.prop,mt.descriptor,mt.decoratorTarget,mt.decoratorArguments)}}catch(Vt){E={error:Vt}}finally{try{Xe&&!Xe.done&&(P=Ae.return)&&P.call(Ae)}finally{if(E)throw E.error}}}}}function Ft(_,E){return function(){var P,L=function(Z,Ae,Xe,mt){if(mt===!0)return E(Z,Ae,Xe,Z,P),null;if(!Object.prototype.hasOwnProperty.call(Z,ee)){var Vt=Z[ee];R(Z,ee,De({},Vt))}return Z[ee][Ae]={prop:Ae,propertyCreator:E,descriptor:Xe,decoratorTarget:Z,decoratorArguments:P},Ze(Ae,_)};return bt(arguments)?(P=h,L.apply(null,arguments)):(P=Array.prototype.slice.call(arguments),L)}}function bt(_){return(_.length===2||_.length===3)&&(typeof _[1]=="string"||typeof _[1]=="symbol")||_.length===4&&_[3]===!0}function xt(_,E,P){return An(_)?_:Array.isArray(_)?Gt.array(_,{name:P}):j(_)?Gt.object(_,void 0,{name:P}):V(_)?Gt.map(_,{name:P}):ce(_)?Gt.set(_,{name:P}):_}function tr(_){return _}function we(_){w(_);var E=Ft(!0,function(L,Z,Ae,Xe,mt){var Vt=Ae?Ae.initializer?Ae.initializer.call(L):Ae.value:void 0;Zi(L).addObservableProp(Z,Vt,_)}),P=(c!==void 0&&c.env,E);return P.enhancer=_,P}var ne={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function me(_){return _==null?ne:typeof _=="string"?{name:_,deep:!0,proxy:!0}:_}Object.freeze(ne);var qe=we(xt),gt=we(function(_,E,P){return _==null||Nn(_)||Po(_)||_n(_)||Pn(_)?_:Array.isArray(_)?Gt.array(_,{name:P,deep:!1}):j(_)?Gt.object(_,void 0,{name:P,deep:!1}):V(_)?Gt.map(_,{name:P,deep:!1}):ce(_)?Gt.set(_,{name:P,deep:!1}):g(!1)}),et=we(tr),kt=we(function(_,E,P){return Tu(_,E)?E:_});function zt(_){return _.defaultDecorator?_.defaultDecorator.enhancer:_.deep===!1?tr:xt}var Zt={box:function(_,E){arguments.length>2&&ze("box");var P=me(E);return new Cr(_,zt(P),P.name,!0,P.equals)},array:function(_,E){arguments.length>2&&ze("array");var P=me(E);return Ki(_,zt(P),P.name)},map:function(_,E){arguments.length>2&&ze("map");var P=me(E);return new xu(_,zt(P),P.name)},set:function(_,E){arguments.length>2&&ze("set");var P=me(E);return new Na(_,zt(P),P.name)},object:function(_,E,P){typeof arguments[1]=="string"&&ze("object");var L=me(P);if(L.proxy===!1)return po({},_,E,L);var Z=mu(L),Ae=po({},void 0,void 0,L),Xe=nl(Ae);return Os(Xe,_,E,Z),Xe},ref:et,shallow:gt,deep:qe,struct:kt},Gt=function(_,E,P){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return qe.apply(null,arguments);if(An(_))return _;var L=j(_)?Gt.object(_,E,P):Array.isArray(_)?Gt.array(_,E):V(_)?Gt.map(_,E):ce(_)?Gt.set(_,E):_;if(L!==_)return L;g(!1)};function ze(_){g("Expected one or two arguments to observable."+_+". Did you accidentally try to use observable."+_+" as decorator?")}Object.keys(Zt).forEach(function(_){return Gt[_]=Zt[_]});var Yt,xe,Ht=Ft(!1,function(_,E,P,L,Z){var Ae=P.get,Xe=P.set,mt=Z[0]||{};Zi(_).addComputedProp(_,E,De({get:Ae,set:Xe,context:_},mt))}),yr=Ht({equals:I.structural}),G=function(_,E,P){if(typeof E=="string"||_!==null&&typeof _=="object"&&arguments.length===1)return Ht.apply(null,arguments);var L=typeof E=="object"?E:{};return L.get=_,L.set=typeof E=="function"?E:L.set,L.name=L.name||_.name||"",new Go(L)};G.struct=yr,function(_){_[_.NOT_TRACKING=-1]="NOT_TRACKING",_[_.UP_TO_DATE=0]="UP_TO_DATE",_[_.POSSIBLY_STALE=1]="POSSIBLY_STALE",_[_.STALE=2]="STALE"}(Yt||(Yt={})),function(_){_[_.NONE=0]="NONE",_[_.LOG=1]="LOG",_[_.BREAK=2]="BREAK"}(xe||(xe={}));var pr=function(_){this.cause=_};function Dr(_){return _ instanceof pr}function $r(_){switch(_.dependenciesState){case Yt.UP_TO_DATE:return!1;case Yt.NOT_TRACKING:case Yt.STALE:return!0;case Yt.POSSIBLY_STALE:for(var E=Nt(!0),P=de(),L=_.observing,Z=L.length,Ae=0;Ae<Z;Ae++){var Xe=L[Ae];if(Uo(Xe)){if(qt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return Be(P),wt(E),!0}if(_.dependenciesState===Yt.STALE)return Be(P),wt(E),!0}}return Kt(_),Be(P),wt(E),!1}}function Zr(){return qt.trackingDerivation!==null}function sr(_){var E=_.observers.size>0;qt.computationDepth>0&&E&&g(!1),qt.allowStateChanges||!E&&qt.enforceActions!=="strict"||g(!1)}function un(_,E,P){var L=Nt(!0);Kt(_),_.newObserving=new Array(_.observing.length+100),_.unboundDepsCount=0,_.runId=++qt.runId;var Z,Ae=qt.trackingDerivation;if(qt.trackingDerivation=_,qt.disableErrorBoundaries===!0)Z=E.call(P);else try{Z=E.call(P)}catch(Xe){Z=new pr(Xe)}return qt.trackingDerivation=Ae,function(Xe){for(var mt=Xe.observing,Vt=Xe.observing=Xe.newObserving,Ar=Yt.UP_TO_DATE,cr=0,Gr=Xe.unboundDepsCount,wr=0;wr<Gr;wr++)(Ur=Vt[wr]).diffValue===0&&(Ur.diffValue=1,cr!==wr&&(Vt[cr]=Ur),cr++),Ur.dependenciesState>Ar&&(Ar=Ur.dependenciesState);for(Vt.length=cr,Xe.newObserving=null,Gr=mt.length;Gr--;)(Ur=mt[Gr]).diffValue===0&&tn(Ur,Xe),Ur.diffValue=0;for(;cr--;){var Ur;(Ur=Vt[cr]).diffValue===1&&(Ur.diffValue=0,vs(Ur,Xe))}Ar!==Yt.UP_TO_DATE&&(Xe.dependenciesState=Ar,Xe.onBecomeStale())}(_),wt(L),Z}function te(_){var E=_.observing;_.observing=[];for(var P=E.length;P--;)tn(E[P],_);_.dependenciesState=Yt.NOT_TRACKING}function Ne(_){var E=de();try{return _()}finally{Be(E)}}function de(){var _=qt.trackingDerivation;return qt.trackingDerivation=null,_}function Be(_){qt.trackingDerivation=_}function Nt(_){var E=qt.allowStateReads;return qt.allowStateReads=_,E}function wt(_){qt.allowStateReads=_}function Kt(_){if(_.dependenciesState!==Yt.UP_TO_DATE){_.dependenciesState=Yt.UP_TO_DATE;for(var E=_.observing,P=E.length;P--;)E[P].lowestObserverState=Yt.UP_TO_DATE}}var Tr=0,wn=1,In=Object.getOwnPropertyDescriptor(function(){},"name");In&&In.configurable;function dn(_,E,P){var L=function(){return bn(_,E,P||this,arguments)};return L.isMobxAction=!0,L}function bn(_,E,P,L){var Z=Xt();try{return E.apply(P,L)}catch(Ae){throw Z.error=Ae,Ae}finally{or(Z)}}function Xt(_,E,P){var L=0,Z=de();lo();var Ae={prevDerivation:Z,prevAllowStateChanges:gr(!0),prevAllowStateReads:Nt(!0),notifySpy:!1,startTime:L,actionId:wn++,parentActionId:Tr};return Tr=Ae.actionId,Ae}function or(_){Tr!==_.actionId&&g("invalid action stack. did you forget to finish an action?"),Tr=_.parentActionId,_.error!==void 0&&(qt.suppressReactionErrors=!0),Xr(_.prevAllowStateChanges),wt(_.prevAllowStateReads),fo(),Be(_.prevDerivation),_.notifySpy,qt.suppressReactionErrors=!1}function dr(_,E){var P,L=gr(_);try{P=E()}finally{Xr(L)}return P}function gr(_){var E=qt.allowStateChanges;return qt.allowStateChanges=_,E}function Xr(_){qt.allowStateChanges=_}var Cr=function(_){function E(P,L,Z,Ae,Xe){Z===void 0&&(Z="ObservableValue@"+m()),Xe===void 0&&(Xe=I.default);var mt=_.call(this,Z)||this;return mt.enhancer=L,mt.name=Z,mt.equals=Xe,mt.hasUnreportedChange=!1,mt.value=L(P,void 0,Z),mt}return function(P,L){function Z(){this.constructor=P}pe(P,L),P.prototype=L===null?Object.create(L):(Z.prototype=L.prototype,new Z)}(E,_),E.prototype.dehanceValue=function(P){return this.dehancer!==void 0?this.dehancer(P):P},E.prototype.set=function(P){this.value,(P=this.prepareNewValue(P))!==qt.UNCHANGED&&this.setNewValue(P)},E.prototype.prepareNewValue=function(P){if(sr(this),$n(this)){var L=Rr(this,{object:this,type:"update",newValue:P});if(!L)return qt.UNCHANGED;P=L.newValue}return P=this.enhancer(P,this.value,this.name),this.equals(this.value,P)?qt.UNCHANGED:P},E.prototype.setNewValue=function(P){var L=this.value;this.value=P,this.reportChanged(),no(this)&&Ln(this,{type:"update",object:this,newValue:P,oldValue:L})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(P){return Ao(this,P)},E.prototype.observe=function(P,L){return L&&P({object:this,type:"update",newValue:this.value,oldValue:void 0}),Vo(this,P)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return W(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(F),ii=D("ObservableValue",Cr),Go=function(){function _(E){this.dependenciesState=Yt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Yt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+m(),this.value=new pr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=xe.NONE,w(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+m(),E.set&&(this.setter=dn(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?I.structural:I.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return _.prototype.onBecomeStale=function(){(function(E){E.lowestObserverState===Yt.UP_TO_DATE&&(E.lowestObserverState=Yt.POSSIBLY_STALE,E.observers.forEach(function(P){P.dependenciesState===Yt.UP_TO_DATE&&(P.dependenciesState=Yt.POSSIBLY_STALE,P.isTracing!==xe.NONE&&zo(P,E),P.onBecomeStale())}))})(this)},_.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},_.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},_.prototype.get=function(){this.isComputing&&g("Cycle detected in computation "+this.name+": "+this.derivation),qt.inBatch!==0||this.observers.size!==0||this.keepAlive?(gs(this),$r(this)&&this.trackAndCompute()&&function(P){P.lowestObserverState!==Yt.STALE&&(P.lowestObserverState=Yt.STALE,P.observers.forEach(function(L){L.dependenciesState===Yt.POSSIBLY_STALE?L.dependenciesState=Yt.STALE:L.dependenciesState===Yt.UP_TO_DATE&&(P.lowestObserverState=Yt.UP_TO_DATE)}))}(this)):$r(this)&&(this.warnAboutUntrackedRead(),lo(),this.value=this.computeValue(!1),fo());var E=this.value;if(Dr(E))throw E.cause;return E},_.prototype.peek=function(){var E=this.computeValue(!1);if(Dr(E))throw E.cause;return E},_.prototype.set=function(E){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else w(!1,!1)},_.prototype.trackAndCompute=function(){var E=this.value,P=this.dependenciesState===Yt.NOT_TRACKING,L=this.computeValue(!0),Z=P||Dr(E)||Dr(L)||!this.equals(E,L);return Z&&(this.value=L),Z},_.prototype.computeValue=function(E){var P;if(this.isComputing=!0,qt.computationDepth++,E)P=un(this,this.derivation,this.scope);else if(qt.disableErrorBoundaries===!0)P=this.derivation.call(this.scope);else try{P=this.derivation.call(this.scope)}catch(L){P=new pr(L)}return qt.computationDepth--,this.isComputing=!1,P},_.prototype.suspend=function(){this.keepAlive||(te(this),this.value=void 0)},_.prototype.observe=function(E,P){var L=this,Z=!0,Ae=void 0;return gu(function(){var Xe=L.get();if(!Z||P){var mt=de();E({type:"update",object:L,newValue:Xe,oldValue:Ae}),Be(mt)}Z=!1,Ae=Xe})},_.prototype.warnAboutUntrackedRead=function(){},_.prototype.toJSON=function(){return this.get()},_.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},_.prototype.valueOf=function(){return W(this.get())},_.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},_}(),Uo=D("ComputedValue",Go),Wi=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Yc={};function hu(){return typeof window<"u"?window:f!==void 0?f:typeof self<"u"?self:Yc}var So=!0,hs=!1,qt=function(){var _=hu();return _.__mobxInstanceCount>0&&!_.__mobxGlobals&&(So=!1),_.__mobxGlobals&&_.__mobxGlobals.version!==new Wi().version&&(So=!1),So?_.__mobxGlobals?(_.__mobxInstanceCount+=1,_.__mobxGlobals.UNCHANGED||(_.__mobxGlobals.UNCHANGED={}),_.__mobxGlobals):(_.__mobxInstanceCount=1,_.__mobxGlobals=new Wi):(setTimeout(function(){hs||g("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Wi)}();function vs(_,E){_.observers.add(E),_.lowestObserverState>E.dependenciesState&&(_.lowestObserverState=E.dependenciesState)}function tn(_,E){_.observers.delete(E),_.observers.size===0&&ys(_)}function ys(_){_.isPendingUnobservation===!1&&(_.isPendingUnobservation=!0,qt.pendingUnobservations.push(_))}function lo(){qt.inBatch++}function fo(){if(--qt.inBatch==0){ms();for(var _=qt.pendingUnobservations,E=0;E<_.length;E++){var P=_[E];P.isPendingUnobservation=!1,P.observers.size===0&&(P.isBeingObserved&&(P.isBeingObserved=!1,P.onBecomeUnobserved()),P instanceof Go&&P.suspend())}qt.pendingUnobservations=[]}}function gs(_){var E=qt.trackingDerivation;return E!==null?(E.runId!==_.lastAccessedBy&&(_.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=_,_.isBeingObserved||(_.isBeingObserved=!0,_.onBecomeObserved())),!0):(_.observers.size===0&&qt.inBatch>0&&ys(_),!1)}function zo(_,E){if(_.isTracing===xe.BREAK){var P=[];bi(Yi(_),P,1),new Function(`debugger;
/*
Tracing '`+_.name+`'

You are entering this break point because derivation '`+_.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(_ instanceof Go?_.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+P.join(`
`)+`
*/
    `)()}}function bi(_,E,P){E.length>=1e3?E.push("(and many more)"):(E.push(""+new Array(P).join("	")+_.name),_.dependencies&&_.dependencies.forEach(function(L){return bi(L,E,P+1)}))}var Co=function(){function _(E,P,L,Z){E===void 0&&(E="Reaction@"+m()),Z===void 0&&(Z=!1),this.name=E,this.onInvalidate=P,this.errorHandler=L,this.requiresObservable=Z,this.observing=[],this.newObserving=[],this.dependenciesState=Yt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+m(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=xe.NONE}return _.prototype.onBecomeStale=function(){this.schedule()},_.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,qt.pendingReactions.push(this),ms())},_.prototype.isScheduled=function(){return this._isScheduled},_.prototype.runReaction=function(){if(!this.isDisposed){if(lo(),this._isScheduled=!1,$r(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(E){this.reportExceptionInDerivation(E)}}fo()}},_.prototype.track=function(E){if(!this.isDisposed){lo(),this._isRunning=!0;var P=un(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&te(this),Dr(P)&&this.reportExceptionInDerivation(P.cause),fo()}},_.prototype.reportExceptionInDerivation=function(E){var P=this;if(this.errorHandler)this.errorHandler(E,this);else{if(qt.disableErrorBoundaries)throw E;qt.suppressReactionErrors,qt.globalReactionErrorHandlers.forEach(function(L){return L(E,P)})}},_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(lo(),te(this),fo()))},_.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[Y]=this,E},_.prototype.toString=function(){return"Reaction["+this.name+"]"},_.prototype.trace=function(E){E===void 0&&(E=!1),function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];var Z=!1;typeof P[P.length-1]=="boolean"&&(Z=P.pop());var Ae=To(P);if(!Ae)return g(!1);Ae.isTracing,xe.NONE,Ae.isTracing=Z?xe.BREAK:xe.LOG}(this,E)},_}(),vu=function(_){return _()};function ms(){qt.inBatch>0||qt.isRunningReactions||vu($c)}function $c(){qt.isRunningReactions=!0;for(var _=qt.pendingReactions,E=0;_.length>0;){++E==100&&_.splice(0);for(var P=_.splice(0),L=0,Z=P.length;L<Z;L++)P[L].runReaction()}qt.isRunningReactions=!1}var xa=D("Reaction",Co);function Kc(_){var E=vu;vu=function(P){return _(function(){return E(P)})}}function bs(_){return function(){}}function qc(){g(!1)}function ai(_){return function(E,P,L){if(L){if(L.value)return{value:dn(_,L.value),enumerable:!1,configurable:!0,writable:!0};var Z=L.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return dn(_,Z.call(this))}}}return _s(_).apply(this,arguments)}}function _s(_){return function(E,P,L){Object.defineProperty(E,P,{configurable:!0,enumerable:!1,get:function(){},set:function(Z){R(this,P,Ho(_,Z))}})}}var Ho=function(_,E,P,L){return arguments.length===1&&typeof _=="function"?dn(_.name||"<unnamed action>",_):arguments.length===2&&typeof E=="function"?dn(_,E):arguments.length===1&&typeof _=="string"?ai(_):L!==!0?ai(E).apply(null,arguments):void R(_,E,dn(_.name||E,P.value,this))};function Zc(_,E){return bn(typeof _=="string"?_:_.name||"<unnamed action>",typeof _=="function"?_:E,this,void 0)}function Sa(_){return typeof _=="function"&&_.isMobxAction===!0}function yu(_,E,P){R(_,E,dn(E,P.bind(_)))}function gu(_,E){E===void 0&&(E=v);var P,L=E&&E.name||_.name||"Autorun@"+m();if(!E.scheduler&&!E.delay)P=new Co(L,function(){this.track(Xe)},E.onError,E.requiresObservable);else{var Z=Es(E),Ae=!1;P=new Co(L,function(){Ae||(Ae=!0,Z(function(){Ae=!1,P.isDisposed||P.track(Xe)}))},E.onError,E.requiresObservable)}function Xe(){_(P)}return P.schedule(),P.getDisposer()}Ho.bound=function(_,E,P,L){return L===!0?(yu(_,E,P.value),null):P?{configurable:!0,enumerable:!1,get:function(){return yu(this,E,P.value||P.initializer.call(this)),this[E]},set:qc}:{enumerable:!1,configurable:!0,set:function(Z){yu(this,E,Z)},get:function(){}}};var Jc=function(_){return _()};function Es(_){return _.scheduler?_.scheduler:_.delay?function(E){return setTimeout(E,_.delay)}:Jc}function _i(_,E,P){P===void 0&&(P=v);var L,Z,Ae,Xe=P.name||"Reaction@"+m(),mt=Ho(Xe,P.onError?(L=P.onError,Z=E,function(){try{return Z.apply(this,arguments)}catch(rn){L.call(this,rn)}}):E),Vt=!P.scheduler&&!P.delay,Ar=Es(P),cr=!0,Gr=!1,wr=P.compareStructural?I.structural:P.equals||I.default,Ur=new Co(Xe,function(){cr||Vt?ao():Gr||(Gr=!0,Ar(ao))},P.onError,P.requiresObservable);function ao(){if(Gr=!1,!Ur.isDisposed){var rn=!1;Ur.track(function(){var qn=_(Ur);rn=cr||!wr(Ae,qn),Ae=qn}),cr&&P.fireImmediately&&mt(Ae,Ur),cr||rn!==!0||mt(Ae,Ur),cr&&(cr=!1)}}return Ur.schedule(),Ur.getDisposer()}function Ei(_,E,P){return ws("onBecomeUnobserved",_,E,P)}function ws(_,E,P,L){var Z=typeof L=="function"?oo(E,P):oo(E),Ae=typeof L=="function"?L:P,Xe=_+"Listeners";return Z[Xe]?Z[Xe].add(Ae):Z[Xe]=new Set([Ae]),typeof Z[_]!="function"?g(!1):function(){var mt=Z[Xe];mt&&(mt.delete(Ae),mt.size===0&&delete Z[Xe])}}function wi(_){var E=_.enforceActions,P=_.computedRequiresReaction,L=_.computedConfigurable,Z=_.disableErrorBoundaries,Ae=_.reactionScheduler,Xe=_.reactionRequiresObservable,mt=_.observableRequiresReaction;if(_.isolateGlobalState===!0&&((qt.pendingReactions.length||qt.inBatch||qt.isRunningReactions)&&g("isolateGlobalState should be called before MobX is running any reactions"),hs=!0,So&&(--hu().__mobxInstanceCount==0&&(hu().__mobxGlobals=void 0),qt=new Wi)),E!==void 0){var Vt=void 0;switch(E){case!0:case"observed":Vt=!0;break;case!1:case"never":Vt=!1;break;case"strict":case"always":Vt="strict";break;default:g("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}qt.enforceActions=Vt,qt.allowStateChanges=Vt!==!0&&Vt!=="strict"}P!==void 0&&(qt.computedRequiresReaction=!!P),Xe!==void 0&&(qt.reactionRequiresObservable=!!Xe),mt!==void 0&&(qt.observableRequiresReaction=!!mt,qt.allowStateReads=!qt.observableRequiresReaction),L!==void 0&&(qt.computedConfigurable=!!L),Z!==void 0&&(qt.disableErrorBoundaries=!!Z),Ae&&Kc(Ae)}function po(_,E,P,L){var Z=mu(L=me(L));return ht(_),Zi(_,L.name,Z.enhancer),E&&Os(_,E,P,Z),_}function mu(_){return _.defaultDecorator||(_.deep===!1?et:qe)}function Os(_,E,P,L){var Z,Ae;lo();try{var Xe=ae(E);try{for(var mt=Q(Xe),Vt=mt.next();!Vt.done;Vt=mt.next()){var Ar=Vt.value,cr=Object.getOwnPropertyDescriptor(E,Ar),Gr=(P&&Ar in P?P[Ar]:cr.get?Ht:L)(_,Ar,cr,!0);Gr&&Object.defineProperty(_,Ar,Gr)}}catch(wr){Z={error:wr}}finally{try{Vt&&!Vt.done&&(Ae=mt.return)&&Ae.call(mt)}finally{if(Z)throw Z.error}}}finally{fo()}}function Yi(_,E){return Oi(oo(_,E))}function Oi(_){var E,P,L={name:_.name};return _.observing&&_.observing.length>0&&(L.dependencies=(E=_.observing,P=[],E.forEach(function(Z){P.indexOf(Z)===-1&&P.push(Z)}),P).map(Oi)),L}var bu=0;function _u(){this.message="FLOW_CANCELLED"}function Ta(_){arguments.length!==1&&g("Flow expects 1 argument and cannot be used as decorator");var E=_.name||"<unnamed flow>";return function(){var P,L=this,Z=arguments,Ae=++bu,Xe=Ho(E+" - runid: "+Ae+" - init",_).apply(L,Z),mt=void 0,Vt=new Promise(function(Ar,cr){var Gr=0;function wr(rn){var qn;mt=void 0;try{qn=Ho(E+" - runid: "+Ae+" - yield "+Gr++,Xe.next).call(Xe,rn)}catch(Qi){return cr(Qi)}ao(qn)}function Ur(rn){var qn;mt=void 0;try{qn=Ho(E+" - runid: "+Ae+" - yield "+Gr++,Xe.throw).call(Xe,rn)}catch(Qi){return cr(Qi)}ao(qn)}function ao(rn){if(!rn||typeof rn.then!="function")return rn.done?Ar(rn.value):(mt=Promise.resolve(rn.value)).then(wr,Ur);rn.then(ao,cr)}P=cr,wr(void 0)});return Vt.cancel=Ho(E+" - runid: "+Ae+" - cancel",function(){try{mt&&$i(mt);var Ar=Xe.return(void 0),cr=Promise.resolve(Ar.value);cr.then(S,S),$i(cr),P(new _u)}catch(Gr){P(Gr)}}),Vt}}function $i(_){typeof _.cancel=="function"&&_.cancel()}function xs(_,E){if(_==null)return!1;if(E!==void 0){if(Nn(_)===!1||!_[Y].values.has(E))return!1;var P=oo(_,E);return Uo(P)}return Uo(_)}function Qc(_){return arguments.length>1?g(!1):xs(_)}function Ss(_,E){return typeof E!="string"?g(!1):xs(_,E)}function Yn(_,E){return _!=null&&(E!==void 0?!!Nn(_)&&_[Y].values.has(E):Nn(_)||!!_[Y]||$(_)||xa(_)||Uo(_))}function An(_){return arguments.length!==1&&g(!1),Yn(_)}function ho(_){return Nn(_)?_[Y].getKeys():_n(_)||Pn(_)?Array.from(_.keys()):Po(_)?_.map(function(E,P){return P}):g(!1)}function Gn(_){return Nn(_)?ho(_).map(function(E){return _[E]}):_n(_)?ho(_).map(function(E){return _.get(E)}):Pn(_)?Array.from(_.values()):Po(_)?_.slice():g(!1)}function Ts(_){return Nn(_)?ho(_).map(function(E){return[E,_[E]]}):_n(_)?ho(_).map(function(E){return[E,_.get(E)]}):Pn(_)?Array.from(_.entries()):Po(_)?_.map(function(E,P){return[P,E]}):g(!1)}function Eu(_,E,P){if(arguments.length!==2||Pn(_))if(Nn(_)){var L=_[Y],Z=L.values.get(E);Z?L.write(E,P):L.addObservableProp(E,P,L.defaultEnhancer)}else if(_n(_))_.set(E,P);else if(Pn(_))_.add(E);else{if(!Po(_))return g(!1);typeof E!="number"&&(E=parseInt(E,10)),w(E>=0,"Not a valid index: '"+E+"'"),lo(),E>=_.length&&(_.length=E+1),_[E]=P,fo()}else{lo();var Ae=E;try{for(var Xe in Ae)Eu(_,Xe,Ae[Xe])}finally{fo()}}}function wu(_,E,P,L){return typeof P=="function"?function(Z,Ae,Xe,mt){return io(Z,Ae).observe(Xe,mt)}(_,E,P,L):function(Z,Ae,Xe){return io(Z).observe(Ae,Xe)}(_,E,P)}_u.prototype=Object.create(Error.prototype);var el={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ui(_,E,P,L){return L.detectCycles&&_.set(E,P),P}function ro(_,E,P){if(!E.recurseEverything&&!An(_)||typeof _!="object")return _;if(_===null)return null;if(_ instanceof Date)return _;if(ii(_))return ro(_.get(),E,P);if(An(_)&&ho(_),E.detectCycles===!0&&_!==null&&P.has(_))return P.get(_);if(Po(_)||Array.isArray(_)){var L=ui(P,_,[],E),Z=_.map(function(wr){return ro(wr,E,P)});L.length=Z.length;for(var Ae=0,Xe=Z.length;Ae<Xe;Ae++)L[Ae]=Z[Ae];return L}if(Pn(_)||Object.getPrototypeOf(_)===Set.prototype){if(E.exportMapsAsObjects===!1){var mt=ui(P,_,new Set,E);return _.forEach(function(wr){mt.add(ro(wr,E,P))}),mt}var Vt=ui(P,_,[],E);return _.forEach(function(wr){Vt.push(ro(wr,E,P))}),Vt}if(_n(_)||Object.getPrototypeOf(_)===Map.prototype){if(E.exportMapsAsObjects===!1){var Ar=ui(P,_,new Map,E);return _.forEach(function(wr,Ur){Ar.set(Ur,ro(wr,E,P))}),Ar}var cr=ui(P,_,{},E);return _.forEach(function(wr,Ur){cr[Ur]=ro(wr,E,P)}),cr}var Gr=ui(P,_,{},E);return Ee(_).forEach(function(wr){Gr[wr]=ro(_[wr],E,P)}),Gr}function tl(_,E){var P;return typeof E=="boolean"&&(E={detectCycles:E}),E||(E=el),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0,E.detectCycles&&(P=new Map),ro(_,E,P)}function To(_){switch(_.length){case 0:return qt.trackingDerivation;case 1:return oo(_[0]);case 2:return oo(_[0],_[1])}}function vo(_,E){E===void 0&&(E=void 0),lo();try{return _.apply(E)}finally{fo()}}function As(_,E,P){return arguments.length===1||E&&typeof E=="object"?rl(_,E):Ps(_,E,P||{})}function Ps(_,E,P){var L;typeof P.timeout=="number"&&(L=setTimeout(function(){if(!Ae[Y].isDisposed){Ae();var Xe=new Error("WHEN_TIMEOUT");if(!P.onError)throw Xe;P.onError(Xe)}},P.timeout)),P.name=P.name||"When@"+m();var Z=dn(P.name+"-effect",E),Ae=gu(function(Xe){_()&&(Xe.dispose(),L&&clearTimeout(L),Z())},P);return Ae}function rl(_,E){var P,L=new Promise(function(Z,Ae){var Xe=Ps(_,Z,De(De({},E),{onError:Ae}));P=function(){Xe(),Ae("WHEN_CANCELLED")}});return L.cancel=P,L}function Aa(_){return _[Y]}function Xo(_){return typeof _=="string"||typeof _=="number"||typeof _=="symbol"}var yo={has:function(_,E){if(E===Y||E==="constructor"||E===be)return!0;var P=Aa(_);return Xo(E)?P.has(E):E in _},get:function(_,E){if(E===Y||E==="constructor"||E===be)return _[E];var P=Aa(_),L=P.values.get(E);if(L instanceof F){var Z=L.get();return Z===void 0&&P.has(E),Z}return Xo(E)&&P.has(E),_[E]},set:function(_,E,P){return!!Xo(E)&&(Eu(_,E,P),!0)},deleteProperty:function(_,E){return!!Xo(E)&&(Aa(_).remove(E),!0)},ownKeys:function(_){return Aa(_).keysAtom.reportObserved(),Reflect.ownKeys(_)},preventExtensions:function(_){return g("Dynamic observable objects cannot be frozen"),!1}};function nl(_){var E=new Proxy(_,yo);return _[Y].proxy=E,E}function $n(_){return _.interceptors!==void 0&&_.interceptors.length>0}function Ao(_,E){var P=_.interceptors||(_.interceptors=[]);return P.push(E),x(function(){var L=P.indexOf(E);L!==-1&&P.splice(L,1)})}function Rr(_,E){var P=de();try{for(var L=he(_.interceptors||[]),Z=0,Ae=L.length;Z<Ae&&(w(!(E=L[Z](E))||E.type,"Intercept handlers should return nothing or a change object"),E);Z++);return E}finally{Be(P)}}function no(_){return _.changeListeners!==void 0&&_.changeListeners.length>0}function Vo(_,E){var P=_.changeListeners||(_.changeListeners=[]);return P.push(E),x(function(){var L=P.indexOf(E);L!==-1&&P.splice(L,1)})}function Ln(_,E){var P=de(),L=_.changeListeners;if(L){for(var Z=0,Ae=(L=L.slice()).length;Z<Ae;Z++)L[Z](E);Be(P)}}var Pa={get:function(_,E){return E===Y?_[Y]:E==="length"?_[Y].getArrayLength():typeof E=="number"?Kn.get.call(_,E):typeof E!="string"||isNaN(E)?Kn.hasOwnProperty(E)?Kn[E]:_[E]:Kn.get.call(_,parseInt(E))},set:function(_,E,P){return E==="length"&&_[Y].setArrayLength(P),typeof E=="number"&&Kn.set.call(_,E,P),typeof E=="symbol"||isNaN(E)?_[E]=P:Kn.set.call(_,parseInt(E),P),!0},preventExtensions:function(_){return g("Observable arrays cannot be frozen"),!1}};function Ki(_,E,P,L){P===void 0&&(P="ObservableArray@"+m()),L===void 0&&(L=!1);var Z,Ae,Xe,mt=new Io(P,E,L);Z=mt.values,Ae=Y,Xe=mt,Object.defineProperty(Z,Ae,{enumerable:!1,writable:!1,configurable:!0,value:Xe});var Vt=new Proxy(mt.values,Pa);if(mt.proxy=Vt,_&&_.length){var Ar=gr(!0);mt.spliceWithArray(0,0,_),Xr(Ar)}return Vt}var Io=function(){function _(E,P,L){this.owned=L,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new F(E||"ObservableArray@"+m()),this.enhancer=function(Z,Ae){return P(Z,Ae,E+"[..]")}}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},_.prototype.intercept=function(E){return Ao(this,E)},_.prototype.observe=function(E,P){return P===void 0&&(P=!1),P&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Vo(this,E)},_.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},_.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var P=this.values.length;if(E!==P)if(E>P){for(var L=new Array(E-P),Z=0;Z<E-P;Z++)L[Z]=void 0;this.spliceWithArray(P,0,L)}else this.spliceWithArray(E,P-E)},_.prototype.updateArrayLength=function(E,P){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=P},_.prototype.spliceWithArray=function(E,P,L){var Z=this;sr(this.atom);var Ae=this.values.length;if(E===void 0?E=0:E>Ae?E=Ae:E<0&&(E=Math.max(0,Ae+E)),P=arguments.length===1?Ae-E:P==null?0:Math.max(0,Math.min(P,Ae-E)),L===void 0&&(L=h),$n(this)){var Xe=Rr(this,{object:this.proxy,type:"splice",index:E,removedCount:P,added:L});if(!Xe)return h;P=Xe.removedCount,L=Xe.added}L=L.length===0?L:L.map(function(Vt){return Z.enhancer(Vt,void 0)});var mt=this.spliceItemsIntoValues(E,P,L);return P===0&&L.length===0||this.notifyArraySplice(E,L,mt),this.dehanceValues(mt)},_.prototype.spliceItemsIntoValues=function(E,P,L){var Z;if(L.length<1e4)return(Z=this.values).splice.apply(Z,he([E,P],L));var Ae=this.values.slice(E,E+P);return this.values=this.values.slice(0,E).concat(L,this.values.slice(E+P)),Ae},_.prototype.notifyArrayChildUpdate=function(E,P,L){var Z=!this.owned&&!1,Ae=no(this),Xe=Ae||Z?{object:this.proxy,type:"update",index:E,newValue:P,oldValue:L}:null;this.atom.reportChanged(),Ae&&Ln(this,Xe)},_.prototype.notifyArraySplice=function(E,P,L){var Z=!this.owned&&!1,Ae=no(this),Xe=Ae||Z?{object:this.proxy,type:"splice",index:E,removed:L,added:P,removedCount:L.length,addedCount:P.length}:null;this.atom.reportChanged(),Ae&&Ln(this,Xe)},_}(),Kn={intercept:function(_){return this[Y].intercept(_)},observe:function(_,E){return E===void 0&&(E=!1),this[Y].observe(_,E)},clear:function(){return this.splice(0)},replace:function(_){var E=this[Y];return E.spliceWithArray(0,E.values.length,_)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(_,E){for(var P=[],L=2;L<arguments.length;L++)P[L-2]=arguments[L];var Z=this[Y];switch(arguments.length){case 0:return[];case 1:return Z.spliceWithArray(_);case 2:return Z.spliceWithArray(_,E)}return Z.spliceWithArray(_,E,P)},spliceWithArray:function(_,E,P){return this[Y].spliceWithArray(_,E,P)},push:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[Y];return P.spliceWithArray(P.values.length,0,_),P.values.length},pop:function(){return this.splice(Math.max(this[Y].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var _=[],E=0;E<arguments.length;E++)_[E]=arguments[E];var P=this[Y];return P.spliceWithArray(0,0,_),P.values.length},reverse:function(){var _=this.slice();return _.reverse.apply(_,arguments)},sort:function(_){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(_){var E=this[Y],P=E.dehanceValues(E.values).indexOf(_);return P>-1&&(this.splice(P,1),!0)},get:function(_){var E=this[Y];if(E&&_<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[_])},set:function(_,E){var P=this[Y],L=P.values;if(_<L.length){sr(P.atom);var Z=L[_];if($n(P)){var Ae=Rr(P,{type:"update",object:P.proxy,index:_,newValue:E});if(!Ae)return;E=Ae.newValue}(E=P.enhancer(E,Z))!==Z&&(L[_]=E,P.notifyArrayChildUpdate(_,E,Z))}else{if(_!==L.length)throw new Error("[mobx.array] Index out of bounds, "+_+" is larger than "+L.length);P.spliceWithArray(_,0,[E])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Kn[_]=function(){var E=this[Y];E.atom.reportObserved();var P=E.dehanceValues(E.values);return P[_].apply(P,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(_){typeof Array.prototype[_]=="function"&&(Kn[_]=function(E,P){var L=this,Z=this[Y];return Z.atom.reportObserved(),Z.dehanceValues(Z.values)[_](function(Ae,Xe){return E.call(P,Ae,Xe,L)},P)})}),["reduce","reduceRight"].forEach(function(_){Kn[_]=function(){var E=this,P=this[Y];P.atom.reportObserved();var L=arguments[0];return arguments[0]=function(Z,Ae,Xe){return Ae=P.dehanceValue(Ae),L(Z,Ae,Xe,E)},P.values[_].apply(P.values,arguments)}});var Ou,qi=D("ObservableArrayAdministration",Io);function Po(_){return N(_)&&qi(_[Y])}var Ns,ol={},xu=function(){function _(E,P,L){if(P===void 0&&(P=xt),L===void 0&&(L="ObservableMap@"+m()),this.enhancer=P,this.name=L,this[Ou]=ol,this._keysAtom=K(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return _.prototype._has=function(E){return this._data.has(E)},_.prototype.has=function(E){var P=this;if(!qt.trackingDerivation)return this._has(E);var L=this._hasMap.get(E);if(!L){var Z=L=new Cr(this._has(E),tr,this.name+"."+fe(E)+"?",!1);this._hasMap.set(E,Z),Ei(Z,function(){return P._hasMap.delete(E)})}return L.get()},_.prototype.set=function(E,P){var L=this._has(E);if($n(this)){var Z=Rr(this,{type:L?"update":"add",object:this,newValue:P,name:E});if(!Z)return this;P=Z.newValue}return L?this._updateValue(E,P):this._addValue(E,P),this},_.prototype.delete=function(E){var P=this;if(sr(this._keysAtom),$n(this)&&!(Z=Rr(this,{type:"delete",object:this,name:E})))return!1;if(this._has(E)){var L=no(this),Z=L?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return vo(function(){P._keysAtom.reportChanged(),P._updateHasMapEntry(E,!1),P._data.get(E).setNewValue(void 0),P._data.delete(E)}),L&&Ln(this,Z),!0}return!1},_.prototype._updateHasMapEntry=function(E,P){var L=this._hasMap.get(E);L&&L.setNewValue(P)},_.prototype._updateValue=function(E,P){var L=this._data.get(E);if((P=L.prepareNewValue(P))!==qt.UNCHANGED){var Z=no(this),Ae=Z?{type:"update",object:this,oldValue:L.value,name:E,newValue:P}:null;L.setNewValue(P),Z&&Ln(this,Ae)}},_.prototype._addValue=function(E,P){var L=this;sr(this._keysAtom),vo(function(){var Xe=new Cr(P,L.enhancer,L.name+"."+fe(E),!1);L._data.set(E,Xe),P=Xe.value,L._updateHasMapEntry(E,!0),L._keysAtom.reportChanged()});var Z=no(this),Ae=Z?{type:"add",object:this,name:E,newValue:P}:null;Z&&Ln(this,Ae)},_.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},_.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},_.prototype.values=function(){var E=this,P=this.keys();return Ma({next:function(){var L=P.next(),Z=L.done,Ae=L.value;return{done:Z,value:Z?void 0:E.get(Ae)}}})},_.prototype.entries=function(){var E=this,P=this.keys();return Ma({next:function(){var L=P.next(),Z=L.done,Ae=L.value;return{done:Z,value:Z?void 0:[Ae,E.get(Ae)]}}})},_.prototype[Ou=Y,Symbol.iterator]=function(){return this.entries()},_.prototype.forEach=function(E,P){var L,Z;try{for(var Ae=Q(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=se(Xe.value,2),Vt=mt[0],Ar=mt[1];E.call(P,Ar,Vt,this)}}catch(cr){L={error:cr}}finally{try{Xe&&!Xe.done&&(Z=Ae.return)&&Z.call(Ae)}finally{if(L)throw L.error}}},_.prototype.merge=function(E){var P=this;return _n(E)&&(E=E.toJS()),vo(function(){var L=gr(!0);try{j(E)?Ee(E).forEach(function(Z){return P.set(Z,E[Z])}):Array.isArray(E)?E.forEach(function(Z){var Ae=se(Z,2),Xe=Ae[0],mt=Ae[1];return P.set(Xe,mt)}):V(E)?(E.constructor!==Map&&g("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(Z,Ae){return P.set(Ae,Z)})):E!=null&&g("Cannot initialize map from "+E)}finally{Xr(L)}}),this},_.prototype.clear=function(){var E=this;vo(function(){Ne(function(){var P,L;try{for(var Z=Q(E.keys()),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=Ae.value;E.delete(Xe)}}catch(mt){P={error:mt}}finally{try{Ae&&!Ae.done&&(L=Z.return)&&L.call(Z)}finally{if(P)throw P.error}}})})},_.prototype.replace=function(E){var P=this;return vo(function(){var L,Z,Ae,Xe,mt=function(On){if(V(On)||_n(On))return On;if(Array.isArray(On))return new Map(On);if(j(On)){var ka=new Map;for(var ci in On)ka.set(ci,On[ci]);return ka}return g("Cannot convert to map from '"+On+"'")}(E),Vt=new Map,Ar=!1;try{for(var cr=Q(P._data.keys()),Gr=cr.next();!Gr.done;Gr=cr.next()){var wr=Gr.value;if(!mt.has(wr))if(P.delete(wr))Ar=!0;else{var Ur=P._data.get(wr);Vt.set(wr,Ur)}}}catch(On){L={error:On}}finally{try{Gr&&!Gr.done&&(Z=cr.return)&&Z.call(cr)}finally{if(L)throw L.error}}try{for(var ao=Q(mt.entries()),rn=ao.next();!rn.done;rn=ao.next()){var qn=se(rn.value,2),Qi=(wr=qn[0],Ur=qn[1],P._data.has(wr));if(P.set(wr,Ur),P._data.has(wr)){var il=P._data.get(wr);Vt.set(wr,il),Qi||(Ar=!0)}}}catch(On){Ae={error:On}}finally{try{rn&&!rn.done&&(Xe=ao.return)&&Xe.call(ao)}finally{if(Ae)throw Ae.error}}if(!Ar)if(P._data.size!==Vt.size)P._keysAtom.reportChanged();else for(var Ra=P._data.keys(),ea=Vt.keys(),Si=Ra.next(),ta=ea.next();!Si.done;){if(Si.value!==ta.value){P._keysAtom.reportChanged();break}Si=Ra.next(),ta=ea.next()}P._data=Vt}),this},Object.defineProperty(_.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.toPOJO=function(){var E,P,L={};try{for(var Z=Q(this),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=se(Ae.value,2),mt=Xe[0],Vt=Xe[1];L[typeof mt=="symbol"?mt:fe(mt)]=Vt}}catch(Ar){E={error:Ar}}finally{try{Ae&&!Ae.done&&(P=Z.return)&&P.call(Z)}finally{if(E)throw E.error}}return L},_.prototype.toJS=function(){return new Map(this)},_.prototype.toJSON=function(){return this.toPOJO()},_.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(P){return fe(P)+": "+E.get(P)}).join(", ")+" }]"},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return Ao(this,E)},_}(),_n=D("ObservableMap",xu),xi={},Na=function(){function _(E,P,L){if(P===void 0&&(P=xt),L===void 0&&(L="ObservableSet@"+m()),this.name=L,this[Ns]=xi,this._data=new Set,this._atom=K(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(Z,Ae){return P(Z,Ae,L)},E&&this.replace(E)}return _.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},_.prototype.clear=function(){var E=this;vo(function(){Ne(function(){var P,L;try{for(var Z=Q(E._data.values()),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=Ae.value;E.delete(Xe)}}catch(mt){P={error:mt}}finally{try{Ae&&!Ae.done&&(L=Z.return)&&L.call(Z)}finally{if(P)throw P.error}}})})},_.prototype.forEach=function(E,P){var L,Z;try{for(var Ae=Q(this),Xe=Ae.next();!Xe.done;Xe=Ae.next()){var mt=Xe.value;E.call(P,mt,mt,this)}}catch(Vt){L={error:Vt}}finally{try{Xe&&!Xe.done&&(Z=Ae.return)&&Z.call(Ae)}finally{if(L)throw L.error}}},Object.defineProperty(_.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),_.prototype.add=function(E){var P=this;if(sr(this._atom),$n(this)&&!(Z=Rr(this,{type:"add",object:this,newValue:E})))return this;if(!this.has(E)){vo(function(){P._data.add(P.enhancer(E,void 0)),P._atom.reportChanged()});var L=no(this),Z=L?{type:"add",object:this,newValue:E}:null;L&&Ln(this,Z)}return this},_.prototype.delete=function(E){var P=this;if($n(this)&&!(Z=Rr(this,{type:"delete",object:this,oldValue:E})))return!1;if(this.has(E)){var L=no(this),Z=L?{type:"delete",object:this,oldValue:E}:null;return vo(function(){P._atom.reportChanged(),P._data.delete(E)}),L&&Ln(this,Z),!0}return!1},_.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},_.prototype.entries=function(){var E=0,P=Array.from(this.keys()),L=Array.from(this.values());return Ma({next:function(){var Z=E;return E+=1,Z<L.length?{value:[P[Z],L[Z]],done:!1}:{done:!0}}})},_.prototype.keys=function(){return this.values()},_.prototype.values=function(){this._atom.reportObserved();var E=this,P=0,L=Array.from(this._data.values());return Ma({next:function(){return P<L.length?{value:E.dehanceValue(L[P++]),done:!1}:{done:!0}}})},_.prototype.replace=function(E){var P=this;return Pn(E)&&(E=E.toJS()),vo(function(){var L=gr(!0);try{Array.isArray(E)||ce(E)?(P.clear(),E.forEach(function(Z){return P.add(Z)})):E!=null&&g("Cannot initialize set from "+E)}finally{Xr(L)}}),this},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return Ao(this,E)},_.prototype.toJS=function(){return new Set(this)},_.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},_.prototype[Ns=Y,Symbol.iterator]=function(){return this.values()},_}(),Pn=D("ObservableSet",Na),js=function(){function _(E,P,L,Z){P===void 0&&(P=new Map),this.target=E,this.values=P,this.name=L,this.defaultEnhancer=Z,this.keysAtom=new F(L+".keys")}return _.prototype.read=function(E){return this.values.get(E).get()},_.prototype.write=function(E,P){var L=this.target,Z=this.values.get(E);if(Z instanceof Go)Z.set(P);else{if($n(this)){if(!(Xe=Rr(this,{type:"update",object:this.proxy||L,name:E,newValue:P})))return;P=Xe.newValue}if((P=Z.prepareNewValue(P))!==qt.UNCHANGED){var Ae=no(this),Xe=Ae?{type:"update",object:this.proxy||L,oldValue:Z.value,name:E,newValue:P}:null;Z.setNewValue(P),Ae&&Ln(this,Xe)}}},_.prototype.has=function(E){var P=this.pendingKeys||(this.pendingKeys=new Map),L=P.get(E);if(L)return L.get();var Z=!!this.values.get(E);return L=new Cr(Z,tr,this.name+"."+fe(E)+"?",!1),P.set(E,L),L.get()},_.prototype.addObservableProp=function(E,P,L){L===void 0&&(L=this.defaultEnhancer);var Z=this.target;if($n(this)){var Ae=Rr(this,{object:this.proxy||Z,name:E,type:"add",newValue:P});if(!Ae)return;P=Ae.newValue}var Xe=new Cr(P,L,this.name+"."+fe(E),!1);this.values.set(E,Xe),P=Xe.value,Object.defineProperty(Z,E,function(mt){return Wo[mt]||(Wo[mt]={configurable:!0,enumerable:!0,get:function(){return this[Y].read(mt)},set:function(Vt){this[Y].write(mt,Vt)}})}(E)),this.notifyPropertyAddition(E,P)},_.prototype.addComputedProp=function(E,P,L){var Z,Ae,Xe,mt=this.target;L.name=L.name||this.name+"."+fe(P),this.values.set(P,new Go(L)),(E===mt||(Z=E,Ae=P,!(Xe=Object.getOwnPropertyDescriptor(Z,Ae))||Xe.configurable!==!1&&Xe.writable!==!1))&&Object.defineProperty(E,P,function(Vt){return ja[Vt]||(ja[Vt]={configurable:qt.computedConfigurable,enumerable:!1,get:function(){return Lo(this).read(Vt)},set:function(Ar){Lo(this).write(Vt,Ar)}})}(P))},_.prototype.remove=function(E){if(this.values.has(E)){var P=this.target;if($n(this)&&!(Vt=Rr(this,{object:this.proxy||P,name:E,type:"remove"})))return;try{lo();var L=no(this),Z=!1,Ae=this.values.get(E),Xe=Ae&&Ae.get();if(Ae&&Ae.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var mt=this.pendingKeys.get(E);mt&&mt.set(!1)}delete this.target[E];var Vt=L?{type:"remove",object:this.proxy||P,oldValue:Xe,name:E}:null;L&&Ln(this,Vt)}finally{fo()}}},_.prototype.illegalAccess=function(E,P){},_.prototype.observe=function(E,P){return Vo(this,E)},_.prototype.intercept=function(E){return Ao(this,E)},_.prototype.notifyPropertyAddition=function(E,P){var L=no(this),Z=L?{type:"add",object:this.proxy||this.target,name:E,newValue:P}:null;if(L&&Ln(this,Z),this.pendingKeys){var Ae=this.pendingKeys.get(E);Ae&&Ae.set(!0)}this.keysAtom.reportChanged()},_.prototype.getKeys=function(){var E,P;this.keysAtom.reportObserved();var L=[];try{for(var Z=Q(this.values),Ae=Z.next();!Ae.done;Ae=Z.next()){var Xe=se(Ae.value,2),mt=Xe[0];Xe[1]instanceof Cr&&L.push(mt)}}catch(Vt){E={error:Vt}}finally{try{Ae&&!Ae.done&&(P=Z.return)&&P.call(Z)}finally{if(E)throw E.error}}return L},_}();function Zi(_,E,P){if(E===void 0&&(E=""),P===void 0&&(P=xt),Object.prototype.hasOwnProperty.call(_,Y))return _[Y];j(_)||(E=(_.constructor.name||"ObservableObject")+"@"+m()),E||(E="ObservableObject@"+m());var L=new js(_,new Map,fe(E),P);return R(_,Y,L),L}var Wo=Object.create(null),ja=Object.create(null);function Lo(_){var E=_[Y];return E||(ht(_),_[Y])}var Su=D("ObservableObjectAdministration",js);function Nn(_){return!!N(_)&&(ht(_),Su(_[Y]))}function oo(_,E){if(typeof _=="object"&&_!==null){if(Po(_))return E!==void 0&&g(!1),_[Y].atom;if(Pn(_))return _[Y];if(_n(_)){var P=_;return E===void 0?P._keysAtom:((L=P._data.get(E)||P._hasMap.get(E))||g(!1),L)}var L;if(ht(_),E&&!_[Y]&&_[E],Nn(_))return E?((L=_[Y].values.get(E))||g(!1),L):g(!1);if($(_)||Uo(_)||xa(_))return _}else if(typeof _=="function"&&xa(_[Y]))return _[Y];return g(!1)}function io(_,E){return _||g("Expecting some object"),E!==void 0?io(oo(_,E)):$(_)||Uo(_)||xa(_)||_n(_)||Pn(_)?_:(ht(_),_[Y]?_[Y]:void g(!1))}var Ji=Object.prototype.toString;function Tu(_,E,P){return P===void 0&&(P=-1),Au(_,E,P)}function Au(_,E,P,L,Z){if(_===E)return _!==0||1/_==1/E;if(_==null||E==null)return!1;if(_!=_)return E!=E;var Ae=typeof _;if(Ae!=="function"&&Ae!=="object"&&typeof E!="object")return!1;var Xe=Ji.call(_);if(Xe!==Ji.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+_==""+E;case"[object Number]":return+_!=+_?+E!=+E:+_==0?1/+_==1/E:+_==+E;case"[object Date]":case"[object Boolean]":return+_==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(_)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":P>=0&&P++}_=Ms(_),E=Ms(E);var mt=Xe==="[object Array]";if(!mt){if(typeof _!="object"||typeof E!="object")return!1;var Vt=_.constructor,Ar=E.constructor;if(Vt!==Ar&&!(typeof Vt=="function"&&Vt instanceof Vt&&typeof Ar=="function"&&Ar instanceof Ar)&&"constructor"in _&&"constructor"in E)return!1}if(P===0)return!1;P<0&&(P=-1),Z=Z||[];for(var cr=(L=L||[]).length;cr--;)if(L[cr]===_)return Z[cr]===E;if(L.push(_),Z.push(E),mt){if((cr=_.length)!==E.length)return!1;for(;cr--;)if(!Au(_[cr],E[cr],P-1,L,Z))return!1}else{var Gr=Object.keys(_),wr=void 0;if(cr=Gr.length,Object.keys(E).length!==cr)return!1;for(;cr--;)if(!Rs(E,wr=Gr[cr])||!Au(_[wr],E[wr],P-1,L,Z))return!1}return L.pop(),Z.pop(),!0}function Ms(_){return Po(_)?_.slice():V(_)||_n(_)||ce(_)||Pn(_)?Array.from(_.entries()):_}function Rs(_,E){return Object.prototype.hasOwnProperty.call(_,E)}function Ma(_){return _[Symbol.iterator]=si,_}function si(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:bs,extras:{getDebugName:function(_,E){return(E!==void 0?oo(_,E):Nn(_)||_n(_)||Pn(_)?io(_):oo(_)).name}},$mobx:Y})}).call(this,n(155),n(82))},function(o,s,n){var c=n(116),f=n(44),h=n(179);c||f(Object.prototype,"toString",h,{unsafe:!0})},function(o,s,n){var c=n(40),f=n(83),h=n(70),v=n(56),m=n(111),g="Array Iterator",w=v.set,x=v.getterFor(g);o.exports=m(Array,"Array",function(S,N){w(this,{type:g,target:c(S),index:0,kind:N})},function(){var S=x(this),N=S.target,j=S.kind,R=S.index++;return!N||R>=N.length?(S.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:R,done:!1}:j=="values"?{value:N[R],done:!1}:{value:[R,N[R]],done:!1}},"values"),h.Arguments=h.Array,f("keys"),f("values"),f("entries")},function(o,s,n){var c=n(7),f=n(147),h=n(148),v=n(3),m=n(57),g=n(27),w=g("iterator"),x=g("toStringTag"),S=v.values,N=function(R,D){if(R){if(R[w]!==S)try{m(R,w,S)}catch{R[w]=S}if(R[x]||m(R,x,D),f[D]){for(var V in v)if(R[V]!==v[V])try{m(R,V,v[V])}catch{R[V]=v[V]}}}};for(var j in f)N(c[j]&&c[j].prototype,j);N(h,"DOMTokenList")},function(o,s,n){var c=n(17),f=n(7),h=n(46),v=n(76),m=n(35),g=n(15),w=n(64),x=n(36),S=n(109),N=n(19),j=n(34),R=n(99),D=n(28),V=n(33),ce=n(58),Ee=n(88),fe=n(32),W=n(38),ae=n(40),Y=n(87),F=n(41),$=n(71),K=n(54),I=n(66),pe=n(72),De=n(139),Q=n(112),se=n(51),he=n(37),be=n(93),ee=n(101),ve=n(44),Fe=n(84),Ze=n(91),ht=n(69),Ft=n(85),bt=n(27),xt=n(149),tr=n(150),we=n(73),ne=n(56),me=n(74).forEach,qe=Ze("hidden"),gt="Symbol",et=bt("toPrimitive"),kt=ne.set,zt=ne.getterFor(gt),Zt=Object.prototype,Gt=f.Symbol,ze=Gt&&Gt.prototype,Yt=f.TypeError,xe=f.QObject,Ht=h("JSON","stringify"),yr=se.f,G=he.f,pr=De.f,Dr=be.f,$r=g([].push),Zr=Fe("symbols"),sr=Fe("op-symbols"),un=Fe("string-to-symbol-registry"),te=Fe("symbol-to-string-registry"),Ne=Fe("wks"),de=!xe||!xe.prototype||!xe.prototype.findChild,Be=x&&N(function(){return K(G({},"a",{get:function(){return G(this,"a",{value:7}).a}})).a!=7})?function(Xt,or,dr){var gr=yr(Zt,or);gr&&delete Zt[or],G(Xt,or,dr),gr&&Xt!==Zt&&G(Zt,or,gr)}:G,Nt=function(Xt,or){var dr=Zr[Xt]=K(ze);return kt(dr,{type:gt,tag:Xt,description:or}),x||(dr.description=or),dr},wt=function(Xt,or,dr){Xt===Zt&&wt(sr,or,dr),fe(Xt);var gr=Y(or);return fe(dr),j(Zr,gr)?(dr.enumerable?(j(Xt,qe)&&Xt[qe][gr]&&(Xt[qe][gr]=!1),dr=K(dr,{enumerable:$(0,!1)})):(j(Xt,qe)||G(Xt,qe,$(1,{})),Xt[qe][gr]=!0),Be(Xt,gr,dr)):G(Xt,gr,dr)},Kt=function(Xt,or){fe(Xt);var dr=ae(or),gr=I(dr).concat(dn(dr));return me(gr,function(Xr){x&&!m(Tr,dr,Xr)||wt(Xt,Xr,dr[Xr])}),Xt},Tr=function(Xt){var or=Y(Xt),dr=m(Dr,this,or);return!(this===Zt&&j(Zr,or)&&!j(sr,or))&&(!(dr||!j(this,or)||!j(Zr,or)||j(this,qe)&&this[qe][or])||dr)},wn=function(Xt,or){var dr=ae(Xt),gr=Y(or);if(dr!==Zt||!j(Zr,gr)||j(sr,gr)){var Xr=yr(dr,gr);return!Xr||!j(Zr,gr)||j(dr,qe)&&dr[qe][gr]||(Xr.enumerable=!0),Xr}},In=function(Xt){var or=pr(ae(Xt)),dr=[];return me(or,function(gr){j(Zr,gr)||j(ht,gr)||$r(dr,gr)}),dr},dn=function(Xt){var or=Xt===Zt,dr=pr(or?sr:ae(Xt)),gr=[];return me(dr,function(Xr){!j(Zr,Xr)||or&&!j(Zt,Xr)||$r(gr,Zr[Xr])}),gr};if(S||(Gt=function(){if(ce(ze,this))throw Yt("Symbol is not a constructor");var Xt=arguments.length&&arguments[0]!==void 0?F(arguments[0]):void 0,or=Ft(Xt),dr=function(gr){this===Zt&&m(dr,sr,gr),j(this,qe)&&j(this[qe],or)&&(this[qe][or]=!1),Be(this,or,$(1,gr))};return x&&de&&Be(Zt,or,{configurable:!0,set:dr}),Nt(or,Xt)},ve(ze=Gt.prototype,"toString",function(){return zt(this).tag}),ve(Gt,"withoutSetter",function(Xt){return Nt(Ft(Xt),Xt)}),be.f=Tr,he.f=wt,se.f=wn,pe.f=De.f=In,Q.f=dn,xt.f=function(Xt){return Nt(bt(Xt),Xt)},x&&(G(ze,"description",{configurable:!0,get:function(){return zt(this).description}}),w||ve(Zt,"propertyIsEnumerable",Tr,{unsafe:!0}))),c({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:Gt}),me(I(Ne),function(Xt){tr(Xt)}),c({target:gt,stat:!0,forced:!S},{for:function(Xt){var or=F(Xt);if(j(un,or))return un[or];var dr=Gt(or);return un[or]=dr,te[dr]=or,dr},keyFor:function(Xt){if(!Ee(Xt))throw Yt(Xt+" is not a symbol");if(j(te,Xt))return te[Xt]},useSetter:function(){de=!0},useSimple:function(){de=!1}}),c({target:"Object",stat:!0,forced:!S,sham:!x},{create:function(Xt,or){return or===void 0?K(Xt):Kt(K(Xt),or)},defineProperty:wt,defineProperties:Kt,getOwnPropertyDescriptor:wn}),c({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:In,getOwnPropertySymbols:dn}),c({target:"Object",stat:!0,forced:N(function(){Q.f(1)})},{getOwnPropertySymbols:function(Xt){return Q.f(W(Xt))}}),Ht&&c({target:"JSON",stat:!0,forced:!S||N(function(){var Xt=Gt();return Ht([Xt])!="[null]"||Ht({a:Xt})!="{}"||Ht(Object(Xt))!="{}"})},{stringify:function(Xt,or,dr){var gr=ee(arguments),Xr=or;if((V(or)||Xt!==void 0)&&!Ee(Xt))return R(or)||(or=function(Cr,ii){if(D(Xr)&&(ii=m(Xr,this,Cr,ii)),!Ee(ii))return ii}),gr[1]=or,v(Ht,null,gr)}}),!ze[et]){var bn=ze.valueOf;ve(ze,et,function(Xt){return m(bn,this)})}we(Gt,gt),ht[qe]=!0},function(o,s,n){var c=n(146).charAt,f=n(41),h=n(56),v=n(111),m="String Iterator",g=h.set,w=h.getterFor(m);v(String,"String",function(x){g(this,{type:m,string:f(x),index:0})},function(){var x,S=w(this),N=S.string,j=S.index;return j>=N.length?{value:void 0,done:!0}:(x=c(N,j),S.index+=x.length,{value:x,done:!1})})},function(o,s,n){(function(c){var f=function(h){return h&&h.Math==Math&&h};o.exports=f(typeof globalThis=="object"&&globalThis)||f(typeof window=="object"&&window)||f(typeof self=="object"&&self)||f(typeof c=="object"&&c)||function(){return this}()||Function("return this")()}).call(this,n(82))},function(o,s,n){var c=n(17),f=n(36),h=n(7),v=n(15),m=n(34),g=n(28),w=n(58),x=n(41),S=n(37).f,N=n(134),j=h.Symbol,R=j&&j.prototype;if(f&&g(j)&&(!("description"in R)||j().description!==void 0)){var D={},V=function(){var F=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),$=w(R,this)?new j(F):F===void 0?j():j(F);return F===""&&(D[$]=!0),$};N(V,j),V.prototype=R,R.constructor=V;var ce=String(j("test"))=="Symbol(test)",Ee=v(R.toString),fe=v(R.valueOf),W=/^Symbol\((.*)\)[^)]+$/,ae=v("".replace),Y=v("".slice);S(R,"description",{configurable:!0,get:function(){var F=fe(this),$=Ee(F);if(m(D,F))return"";var K=ce?Y($,7,-1):ae($,W,"$1");return K===""?void 0:K}}),c({global:!0,forced:!0},{Symbol:V})}},function(o,s,n){n(150)("iterator")},function(o,s,n){n.d(s,"a",function(){return v.a}),n.d(s,"c",function(){return v.e}),n.d(s,"h",function(){return W}),n.d(s,"i",function(){return ce}),n.d(s,"j",function(){return D}),n.d(s,"b",function(){return se}),n.d(s,"e",function(){return ve}),n.d(s,"f",function(){return he}),n.d(s,"g",function(){return Zr});var c,f,h,v=n(0),m=0,g=[],w=v.i.__b,x=v.i.__r,S=v.i.diffed,N=v.i.__c,j=v.i.unmount;function R(te,Ne){v.i.__h&&v.i.__h(f,te,m||Ne),m=0;var de=f.__H||(f.__H={__:[],__h:[]});return te>=de.__.length&&de.__.push({}),de.__[te]}function D(te){return m=1,V(pe,te)}function V(te,Ne,de){var Be=R(c++,2);return Be.t=te,Be.__c||(Be.__=[de?de(Ne):pe(void 0,Ne),function(Nt){var wt=Be.t(Be.__[0],Nt);Be.__[0]!==wt&&(Be.__=[wt,Be.__[1]],Be.__c.setState({}))}],Be.__c=f),Be.__}function ce(te,Ne){var de=R(c++,3);!v.i.__s&&I(de.__H,Ne)&&(de.__=te,de.__H=Ne,f.__H.__h.push(de))}function Ee(te,Ne){var de=R(c++,4);!v.i.__s&&I(de.__H,Ne)&&(de.__=te,de.__H=Ne,f.__h.push(de))}function fe(te,Ne){var de=R(c++,7);return I(de.__H,Ne)&&(de.__=te(),de.__H=Ne,de.__h=te),de.__}function W(te,Ne){return m=8,fe(function(){return te},Ne)}function ae(){var te;for(g.sort(function(Ne,de){return Ne.__v.__b-de.__v.__b});te=g.pop();)if(te.__P)try{te.__H.__h.forEach($),te.__H.__h.forEach(K),te.__H.__h=[]}catch(Ne){te.__H.__h=[],v.i.__e(Ne,te.__v)}}v.i.__b=function(te){f=null,w&&w(te)},v.i.__r=function(te){x&&x(te),c=0;var Ne=(f=te.__c).__H;Ne&&(Ne.__h.forEach($),Ne.__h.forEach(K),Ne.__h=[])},v.i.diffed=function(te){S&&S(te);var Ne=te.__c;Ne&&Ne.__H&&Ne.__H.__h.length&&(g.push(Ne)!==1&&h===v.i.requestAnimationFrame||((h=v.i.requestAnimationFrame)||F)(ae)),f=null},v.i.__c=function(te,Ne){Ne.some(function(de){try{de.__h.forEach($),de.__h=de.__h.filter(function(Be){return!Be.__||K(Be)})}catch(Be){Ne.some(function(Nt){Nt.__h&&(Nt.__h=[])}),Ne=[],v.i.__e(Be,de.__v)}}),N&&N(te,Ne)},v.i.unmount=function(te){j&&j(te);var Ne,de=te.__c;de&&de.__H&&(de.__H.__.forEach(function(Be){try{$(Be)}catch(Nt){Ne=Nt}}),Ne&&v.i.__e(Ne,de.__v))};var Y=typeof requestAnimationFrame=="function";function F(te){var Ne,de=function(){clearTimeout(Be),Y&&cancelAnimationFrame(Ne),setTimeout(te)},Be=setTimeout(de,100);Y&&(Ne=requestAnimationFrame(de))}function $(te){var Ne=f,de=te.__c;typeof de=="function"&&(te.__c=void 0,de()),f=Ne}function K(te){var Ne=f;te.__c=te.__(),f=Ne}function I(te,Ne){return!te||te.length!==Ne.length||Ne.some(function(de,Be){return de!==te[Be]})}function pe(te,Ne){return typeof Ne=="function"?Ne(te):Ne}function De(te,Ne){for(var de in Ne)te[de]=Ne[de];return te}function Q(te,Ne){for(var de in te)if(de!=="__source"&&!(de in Ne))return!0;for(var Be in Ne)if(Be!=="__source"&&te[Be]!==Ne[Be])return!0;return!1}function se(te){this.props=te}function he(te,Ne){function de(Nt){var wt=this.props.ref,Kt=wt==Nt.ref;return!Kt&&wt&&(wt.call?wt(null):wt.current=null),Ne?!Ne(this.props,Nt)||!Kt:Q(this.props,Nt)}function Be(Nt){return this.shouldComponentUpdate=de,Object(v.e)(te,Nt)}return Be.displayName="Memo("+(te.displayName||te.name)+")",Be.prototype.isReactComponent=!0,Be.__f=!0,Be}(se.prototype=new v.a).isPureReactComponent=!0,se.prototype.shouldComponentUpdate=function(te,Ne){return Q(this.props,te)||Q(this.state,Ne)};var be=v.i.__b;v.i.__b=function(te){te.type&&te.type.__f&&te.ref&&(te.props.ref=te.ref,te.ref=null),be&&be(te)};var ee=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ve(te){function Ne(de,Be){var Nt=De({},de);return delete Nt.ref,te(Nt,!(Be=de.ref||Be)||typeof Be=="object"&&!("current"in Be)?null:Be)}return Ne.$$typeof=ee,Ne.render=Ne,Ne.prototype.isReactComponent=Ne.__f=!0,Ne.displayName="ForwardRef("+(te.displayName||te.name)+")",Ne}var Fe=function(te,Ne){return te==null?null:Object(v.k)(Object(v.k)(te).map(Ne))},Ze={map:Fe,forEach:Fe,count:function(te){return te?Object(v.k)(te).length:0},only:function(te){var Ne=Object(v.k)(te);if(Ne.length!==1)throw"Children.only";return Ne[0]},toArray:v.k},ht=v.i.__e;v.i.__e=function(te,Ne,de){if(te.then){for(var Be,Nt=Ne;Nt=Nt.__;)if((Be=Nt.__c)&&Be.__c)return Ne.__e==null&&(Ne.__e=de.__e,Ne.__k=de.__k),Be.__c(te,Ne)}ht(te,Ne,de)};var Ft=v.i.unmount;function bt(te,Ne,de){return te&&(te.__c&&te.__c.__H&&(te.__c.__H.__.forEach(function(Be){typeof Be.__c=="function"&&Be.__c()}),te.__c.__H=null),(te=De({},te)).__c!=null&&(te.__c.__P===de&&(te.__c.__P=Ne),te.__c=null),te.__k=te.__k&&te.__k.map(function(Be){return bt(Be,Ne,de)})),te}function xt(te,Ne,de){return te&&(te.__v=null,te.__k=te.__k&&te.__k.map(function(Be){return xt(Be,Ne,de)}),te.__c&&te.__c.__P===Ne&&(te.__e&&de.insertBefore(te.__e,te.__d),te.__c.__e=!0,te.__c.__P=de)),te}function tr(){this.__u=0,this.t=null,this.__b=null}function we(te){var Ne=te.__.__c;return Ne&&Ne.__e&&Ne.__e(te)}function ne(){this.u=null,this.o=null}v.i.unmount=function(te){var Ne=te.__c;Ne&&Ne.__R&&Ne.__R(),Ne&&te.__h===!0&&(te.type=null),Ft&&Ft(te)},(tr.prototype=new v.a).__c=function(te,Ne){var de=Ne.__c,Be=this;Be.t==null&&(Be.t=[]),Be.t.push(de);var Nt=we(Be.__v),wt=!1,Kt=function(){wt||(wt=!0,de.__R=null,Nt?Nt(Tr):Tr())};de.__R=Kt;var Tr=function(){if(!--Be.__u){if(Be.state.__e){var In=Be.state.__e;Be.__v.__k[0]=xt(In,In.__c.__P,In.__c.__O)}var dn;for(Be.setState({__e:Be.__b=null});dn=Be.t.pop();)dn.forceUpdate()}},wn=Ne.__h===!0;Be.__u++||wn||Be.setState({__e:Be.__b=Be.__v.__k[0]}),te.then(Kt,Kt)},tr.prototype.componentWillUnmount=function(){this.t=[]},tr.prototype.render=function(te,Ne){if(this.__b){if(this.__v.__k){var de=document.createElement("div"),Be=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,de,Be.__O=Be.__P)}this.__b=null}var Nt=Ne.__e&&Object(v.e)(v.b,null,te.fallback);return Nt&&(Nt.__h=null),[Object(v.e)(v.b,null,Ne.__e?null:te.children),Nt]};var me=function(te,Ne,de){if(++de[1]===de[0]&&te.o.delete(Ne),te.props.revealOrder&&(te.props.revealOrder[0]!=="t"||!te.o.size))for(de=te.u;de;){for(;de.length>3;)de.pop()();if(de[1]<de[0])break;te.u=de=de[2]}};function qe(te){return this.getChildContext=function(){return te.context},te.children}function gt(te){var Ne=this,de=te.i;Ne.componentWillUnmount=function(){Object(v.j)(null,Ne.l),Ne.l=null,Ne.i=null},Ne.i&&Ne.i!==de&&Ne.componentWillUnmount(),te.__v?(Ne.l||(Ne.i=de,Ne.l={nodeType:1,parentNode:de,childNodes:[],appendChild:function(Be){this.childNodes.push(Be),Ne.i.appendChild(Be)},insertBefore:function(Be,Nt){this.childNodes.push(Be),Ne.i.appendChild(Be)},removeChild:function(Be){this.childNodes.splice(this.childNodes.indexOf(Be)>>>1,1),Ne.i.removeChild(Be)}}),Object(v.j)(Object(v.e)(qe,{context:Ne.context},te.__v),Ne.l)):Ne.l&&Ne.componentWillUnmount()}(ne.prototype=new v.a).__e=function(te){var Ne=this,de=we(Ne.__v),Be=Ne.o.get(te);return Be[0]++,function(Nt){var wt=function(){Ne.props.revealOrder?(Be.push(Nt),me(Ne,te,Be)):Nt()};de?de(wt):wt()}},ne.prototype.render=function(te){this.u=null,this.o=new Map;var Ne=Object(v.k)(te.children);te.revealOrder&&te.revealOrder[0]==="b"&&Ne.reverse();for(var de=Ne.length;de--;)this.o.set(Ne[de],this.u=[1,0,this.u]);return te.children},ne.prototype.componentDidUpdate=ne.prototype.componentDidMount=function(){var te=this;this.o.forEach(function(Ne,de){me(te,de,Ne)})};var et=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,kt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zt=typeof document<"u",Zt=function(te){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(te)};v.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(te){Object.defineProperty(v.a.prototype,te,{configurable:!0,get:function(){return this["UNSAFE_"+te]},set:function(Ne){Object.defineProperty(this,te,{configurable:!0,writable:!0,value:Ne})}})});var Gt=v.i.event;function ze(){}function Yt(){return this.cancelBubble}function xe(){return this.defaultPrevented}v.i.event=function(te){return Gt&&(te=Gt(te)),te.persist=ze,te.isPropagationStopped=Yt,te.isDefaultPrevented=xe,te.nativeEvent=te};var Ht,yr={configurable:!0,get:function(){return this.class}},G=v.i.vnode;v.i.vnode=function(te){var Ne=te.type,de=te.props,Be=de;if(typeof Ne=="string"){var Nt=Ne.indexOf("-")===-1;for(var wt in Be={},de){var Kt=de[wt];zt&&wt==="children"&&Ne==="noscript"||wt==="value"&&"defaultValue"in de&&Kt==null||(wt==="defaultValue"&&"value"in de&&de.value==null?wt="value":wt==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(wt)?wt="ondblclick":/^onchange(textarea|input)/i.test(wt+Ne)&&!Zt(de.type)?wt="oninput":/^onfocus$/i.test(wt)?wt="onfocusin":/^onblur$/i.test(wt)?wt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(wt)?wt=wt.toLowerCase():Nt&&kt.test(wt)?wt=wt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Be[wt]=Kt)}Ne=="select"&&Be.multiple&&Array.isArray(Be.value)&&(Be.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Be.value.indexOf(Tr.props.value)!=-1})),Ne=="select"&&Be.defaultValue!=null&&(Be.value=Object(v.k)(de.children).forEach(function(Tr){Tr.props.selected=Be.multiple?Be.defaultValue.indexOf(Tr.props.value)!=-1:Be.defaultValue==Tr.props.value})),te.props=Be,de.class!=de.className&&(yr.enumerable="className"in de,de.className!=null&&(Be.class=de.className),Object.defineProperty(Be,"className",yr))}te.$$typeof=et,G&&G(te)};var pr=v.i.__r;v.i.__r=function(te){pr&&pr(te),Ht=te.__c};var Dr={ReactCurrentDispatcher:{current:{readContext:function(te){return Ht.__n[te.__c].props.value}}}};function $r(te){return!!te&&te.$$typeof===et}var Zr=function(te,Ne){return te(Ne)},sr=v.b,un={useState:D,useReducer:V,useEffect:ce,useLayoutEffect:Ee,useRef:function(te){return m=5,fe(function(){return{current:te}},[])},useImperativeHandle:function(te,Ne,de){m=6,Ee(function(){typeof te=="function"?te(Ne()):te&&(te.current=Ne())},de==null?de:de.concat(te))},useMemo:fe,useCallback:W,useContext:function(te){var Ne=f.context[te.__c],de=R(c++,9);return de.c=te,Ne?(de.__==null&&(de.__=!0,Ne.sub(f)),Ne.props.value):te.__},useDebugValue:function(te,Ne){v.i.useDebugValue&&v.i.useDebugValue(Ne?Ne(te):te)},version:"17.0.2",Children:Ze,render:function(te,Ne,de){return Ne.__k==null&&(Ne.textContent=""),Object(v.j)(te,Ne),typeof de=="function"&&de(),te?te.__c:null},hydrate:function(te,Ne,de){return Object(v.h)(te,Ne),typeof de=="function"&&de(),te?te.__c:null},unmountComponentAtNode:function(te){return!!te.__k&&(Object(v.j)(null,te),!0)},createPortal:function(te,Ne){return Object(v.e)(gt,{__v:te,i:Ne})},createElement:v.e,createContext:v.d,createFactory:function(te){return v.e.bind(null,te)},cloneElement:function(te){return $r(te)?v.c.apply(null,arguments):te},createRef:v.f,Fragment:v.b,isValidElement:$r,findDOMNode:function(te){return te&&(te.base||te.nodeType===1&&te)||null},Component:v.a,PureComponent:se,memo:he,forwardRef:ve,flushSync:function(te,Ne){return te(Ne)},unstable_batchedUpdates:Zr,StrictMode:sr,Suspense:tr,SuspenseList:ne,lazy:function(te){var Ne,de,Be;function Nt(wt){if(Ne||(Ne=te()).then(function(Kt){de=Kt.default||Kt},function(Kt){Be=Kt}),Be)throw Be;if(!de)throw Ne;return Object(v.e)(de,wt)}return Nt.displayName="Lazy",Nt.__f=!0,Nt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Dr};s.d=un},function(o,s,n){var c=n(7),f=n(147),h=n(148),v=n(180),m=n(57),g=function(x){if(x&&x.forEach!==v)try{m(x,"forEach",v)}catch{x.forEach=v}};for(var w in f)f[w]&&g(c[w]&&c[w].prototype);g(h)},function(o,s,n){n(17)({target:"Object",stat:!0},{setPrototypeOf:n(97)})},function(o,s,n){var c=n(17),f=n(19),h=n(38),v=n(96),m=n(137);c({target:"Object",stat:!0,forced:f(function(){v(1)}),sham:!m},{getPrototypeOf:function(g){return v(h(g))}})},function(o,s,n){var c=n(17),f=n(46),h=n(76),v=n(200),m=n(157),g=n(32),w=n(33),x=n(54),S=n(19),N=f("Reflect","construct"),j=Object.prototype,R=[].push,D=S(function(){function Ee(){}return!(N(function(){},[],Ee)instanceof Ee)}),V=!S(function(){N(function(){})}),ce=D||V;c({target:"Reflect",stat:!0,forced:ce,sham:ce},{construct:function(Ee,fe){m(Ee),g(fe);var W=arguments.length<3?Ee:m(arguments[2]);if(V&&!D)return N(Ee,fe,W);if(Ee==W){switch(fe.length){case 0:return new Ee;case 1:return new Ee(fe[0]);case 2:return new Ee(fe[0],fe[1]);case 3:return new Ee(fe[0],fe[1],fe[2]);case 4:return new Ee(fe[0],fe[1],fe[2],fe[3])}var ae=[null];return h(R,ae,fe),new(h(v,Ee,ae))}var Y=W.prototype,F=x(w(Y)?Y:j),$=h(Ee,F,fe);return w($)?$:F}})},function(o,s){var n=Function.prototype,c=n.bind,f=n.call,h=c&&c.bind(f);o.exports=c?function(v){return v&&h(f,v)}:function(v){return v&&function(){return f.apply(v,arguments)}}},function(o,s,n){var c=n(17),f=n(7),h=n(99),v=n(100),m=n(33),g=n(67),w=n(43),x=n(40),S=n(61),N=n(27),j=n(75),R=n(101),D=j("slice"),V=N("species"),ce=f.Array,Ee=Math.max;c({target:"Array",proto:!0,forced:!D},{slice:function(fe,W){var ae,Y,F,$=x(this),K=w($),I=g(fe,K),pe=g(W===void 0?K:W,K);if(h($)&&(ae=$.constructor,(v(ae)&&(ae===ce||h(ae.prototype))||m(ae)&&(ae=ae[V])===null)&&(ae=void 0),ae===ce||ae===void 0))return R($,I,pe);for(Y=new(ae===void 0?ce:ae)(Ee(pe-I,0)),F=0;I<pe;I++,F++)I in $&&S(Y,F,$[I]);return Y.length=F,Y}})},function(o,s,n){var c=n(7),f=n(51).f,h=n(57),v=n(44),m=n(108),g=n(134),w=n(95);o.exports=function(x,S){var N,j,R,D,V,ce=x.target,Ee=x.global,fe=x.stat;if(N=Ee?c:fe?c[ce]||m(ce,{}):(c[ce]||{}).prototype)for(j in S){if(D=S[j],R=x.noTargetGet?(V=f(N,j))&&V.value:N[j],!w(Ee?j:ce+(fe?".":"#")+j,x.forced)&&R!==void 0){if(typeof D==typeof R)continue;g(D,R)}(x.sham||R&&R.sham)&&h(D,"sham",!0),v(N,j,D,x)}}},function(o,s,n){var c=n(17),f=n(102);c({target:"RegExp",proto:!0,forced:/./.exec!==f},{exec:f})},function(o,s){o.exports=function(n){try{return!!n()}catch{return!0}}},function(o,s,n){var c=n(17),f=n(38),h=n(66);c({target:"Object",stat:!0,forced:n(19)(function(){h(1)})},{keys:function(v){return h(f(v))}})},function(o,s,n){var c=n(17),f=n(19),h=n(40),v=n(51).f,m=n(36),g=f(function(){v(1)});c({target:"Object",stat:!0,forced:!m||g,sham:!m},{getOwnPropertyDescriptor:function(w,x){return v(h(w),x)}})},function(o,s,n){var c=n(36),f=n(94).EXISTS,h=n(15),v=n(37).f,m=Function.prototype,g=h(m.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(w.exec);c&&!f&&v(m,"name",{configurable:!0,get:function(){try{return x(w,g(this))[1]}catch{return""}}})},function(o,s,n){var c=n(17),f=n(74).filter;c({target:"Array",proto:!0,forced:!n(75)("filter")},{filter:function(h){return f(this,h,arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(17),f=n(183);c({target:"Array",stat:!0,forced:!n(118)(function(h){Array.from(h)})},{from:f})},function(o,s,n){var c=n(17),f=n(36),h=n(135),v=n(40),m=n(51),g=n(61);c({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(w){for(var x,S,N=v(w),j=m.f,R=h(N),D={},V=0;R.length>V;)(S=j(N,x=R[V++]))!==void 0&&g(D,x,S);return D}})},,function(o,s,n){var c=n(7),f=n(84),h=n(34),v=n(85),m=n(109),g=n(128),w=f("wks"),x=c.Symbol,S=x&&x.for,N=g?x:x&&x.withoutSetter||v;o.exports=function(j){if(!h(w,j)||!m&&typeof w[j]!="string"){var R="Symbol."+j;m&&h(x,j)?w[j]=x[j]:w[j]=g&&S?S(R):N(R)}return w[j]}},function(o,s){o.exports=function(n){return typeof n=="function"}},function(o,s,n){var c=n(17),f=n(7),h=n(19),v=n(99),m=n(33),g=n(38),w=n(43),x=n(61),S=n(119),N=n(75),j=n(27),R=n(65),D=j("isConcatSpreadable"),V=9007199254740991,ce="Maximum allowed index exceeded",Ee=f.TypeError,fe=R>=51||!h(function(){var Y=[];return Y[D]=!1,Y.concat()[0]!==Y}),W=N("concat"),ae=function(Y){if(!m(Y))return!1;var F=Y[D];return F!==void 0?!!F:v(Y)};c({target:"Array",proto:!0,forced:!fe||!W},{concat:function(Y){var F,$,K,I,pe,De=g(this),Q=S(De,0),se=0;for(F=-1,K=arguments.length;F<K;F++)if(ae(pe=F===-1?De:arguments[F])){if(se+(I=w(pe))>V)throw Ee(ce);for($=0;$<I;$++,se++)$ in pe&&x(Q,se,pe[$])}else{if(se>=V)throw Ee(ce);x(Q,se++,pe)}return Q.length=se,Q}})},function(o,s,n){var c=n(17),f=n(199);c({target:"Object",stat:!0,forced:Object.assign!==f},{assign:f})},function(o,s,n){var c=n(105),f=typeof self=="object"&&self&&self.Object===Object&&self,h=c.a||f||Function("return this")();s.a=h},function(o,s,n){var c=n(7),f=n(33),h=c.String,v=c.TypeError;o.exports=function(m){if(f(m))return m;throw v(h(m)+" is not an object")}},function(o,s,n){var c=n(28);o.exports=function(f){return typeof f=="object"?f!==null:c(f)}},function(o,s,n){var c=n(15),f=n(38),h=c({}.hasOwnProperty);o.exports=Object.hasOwn||function(v,m){return h(f(v),m)}},function(o,s){var n=Function.prototype.call;o.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},function(o,s,n){var c=n(19);o.exports=!c(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(o,s,n){var c=n(7),f=n(36),h=n(129),v=n(32),m=n(87),g=c.TypeError,w=Object.defineProperty;s.f=f?w:function(x,S,N){if(v(x),S=m(S),v(N),h)try{return w(x,S,N)}catch{}if("get"in N||"set"in N)throw g("Accessors not supported");return"value"in N&&(x[S]=N.value),x}},function(o,s,n){var c=n(7),f=n(45),h=c.Object;o.exports=function(v){return h(f(v))}},function(o,s,n){var c=n(17),f=n(74).map;c({target:"Array",proto:!0,forced:!n(75)("map")},{map:function(h){return f(this,h,arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(81),f=n(45);o.exports=function(h){return c(f(h))}},function(o,s,n){var c=n(7),f=n(98),h=c.String;o.exports=function(v){if(f(v)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(v)}},function(o,s,n){(function(c){n.d(s,"d",function(){return v}),n.d(s,"c",function(){return m}),n.d(s,"b",function(){return g}),n.d(s,"a",function(){return x});var f=n(10),h=function(S,N){var j=typeof Symbol=="function"&&S[Symbol.iterator];if(!j)return S;var R,D,V=j.call(S),ce=[];try{for(;(N===void 0||N-- >0)&&!(R=V.next()).done;)ce.push(R.value)}catch(Ee){D={error:Ee}}finally{try{R&&!R.done&&(j=V.return)&&j.call(V)}finally{if(D)throw D.error}}return ce};function v(){var S=h(Object(f.j)(0),2)[1];return Object(f.h)(function(){S(function(N){return N+1})},[])}function m(S){if(!S||typeof S!="object")return!1;var N=Object.getPrototypeOf(S);return!N||N===Object.prototype}function g(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function x(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:w}}).call(this,n(82))},function(o,s,n){var c=n(90);o.exports=function(f){return c(f.length)}},function(o,s,n){var c=n(7),f=n(28),h=n(34),v=n(57),m=n(108),g=n(92),w=n(56),x=n(94).CONFIGURABLE,S=w.get,N=w.enforce,j=String(String).split("String");(o.exports=function(R,D,V,ce){var Ee,fe=!!ce&&!!ce.unsafe,W=!!ce&&!!ce.enumerable,ae=!!ce&&!!ce.noTargetGet,Y=ce&&ce.name!==void 0?ce.name:D;f(V)&&(String(Y).slice(0,7)==="Symbol("&&(Y="["+String(Y).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(V,"name")||x&&V.name!==Y)&&v(V,"name",Y),(Ee=N(V)).source||(Ee.source=j.join(typeof Y=="string"?Y:""))),R!==c?(fe?!ae&&R[D]&&(W=!0):delete R[D],W?R[D]=V:v(R,D,V)):W?R[D]=V:m(D,V)})(Function.prototype,"toString",function(){return f(this)&&S(this).source||g(this)})},function(o,s,n){var c=n(7).TypeError;o.exports=function(f){if(f==null)throw c("Can't call method on "+f);return f}},function(o,s,n){var c=n(7),f=n(28),h=function(v){return f(v)?v:void 0};o.exports=function(v,m){return arguments.length<2?h(c[v]):c[v]&&c[v][m]}},function(o,s,n){var c=n(17),f=n(35),h=n(33),v=n(32),m=n(201),g=n(51),w=n(96);c({target:"Reflect",stat:!0},{get:function x(S,N){var j,R,D=arguments.length<3?S:arguments[2];return v(S)===D?S[N]:(j=g.f(S,N))?m(j)?j.value:j.get===void 0?void 0:f(j.get,D):h(R=w(S))?x(R,N,D):void 0}})},function(o,s,n){(function(c){var f=n(31),h=n(166),v=i&&!i.nodeType&&i,m=v&&typeof c=="object"&&c&&!c.nodeType&&c,g=m&&m.exports===v?f.a.Buffer:void 0,w=(g?g.isBuffer:void 0)||h.a;s.a=w}).call(this,n(121)(o))},function(o,s,n){(function(c){var f=n(105),h=i&&!i.nodeType&&i,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,m=v&&v.exports===h&&f.a.process,g=function(){try{var w=v&&v.require&&v.require("util").types;return w||m&&m.binding&&m.binding("util")}catch{}}();s.a=g}).call(this,n(121)(o))},function(o,s,n){var c=n(15),f=c({}.toString),h=c("".slice);o.exports=function(v){return h(f(v),8,-1)}},function(o,s,n){var c=n(36),f=n(35),h=n(93),v=n(71),m=n(40),g=n(87),w=n(34),x=n(129),S=Object.getOwnPropertyDescriptor;s.f=c?S:function(N,j){if(N=m(N),j=g(j),x)try{return S(N,j)}catch{}if(w(N,j))return v(!f(h.f,N,j),N[j])}},function(o,s,n){var c=n(17),f=n(213).entries;c({target:"Object",stat:!0},{entries:function(h){return f(h)}})},function(o,s,n){var c=n(46);o.exports=c("navigator","userAgent")||""},function(o,s,n){var c,f=n(32),h=n(169),v=n(110),m=n(69),g=n(133),w=n(86),x=n(91),S=x("IE_PROTO"),N=function(){},j=function(V){return"<script>"+V+"<\/script>"},R=function(V){V.write(j("")),V.close();var ce=V.parentWindow.Object;return V=null,ce},D=function(){try{c=new ActiveXObject("htmlfile")}catch{}var V,ce;D=typeof document<"u"?document.domain&&c?R(c):((ce=w("iframe")).style.display="none",g.appendChild(ce),ce.src="javascript:",(V=ce.contentWindow.document).open(),V.write(j("document.F=Object")),V.close(),V.F):R(c);for(var Ee=v.length;Ee--;)delete D.prototype[v[Ee]];return D()};m[S]=!0,o.exports=Object.create||function(V,ce){var Ee;return V!==null?(N.prototype=f(V),Ee=new N,N.prototype=null,Ee[S]=V):Ee=D(),ce===void 0?Ee:h(Ee,ce)}},function(o,s,n){var c=n(7),f=n(28),h=n(89),v=c.TypeError;o.exports=function(m){if(f(m))return m;throw v(h(m)+" is not a function")}},function(o,s,n){var c,f,h,v=n(171),m=n(7),g=n(15),w=n(33),x=n(57),S=n(34),N=n(107),j=n(91),R=n(69),D="Object already initialized",V=m.TypeError,ce=m.WeakMap;if(v||N.state){var Ee=N.state||(N.state=new ce),fe=g(Ee.get),W=g(Ee.has),ae=g(Ee.set);c=function(F,$){if(W(Ee,F))throw new V(D);return $.facade=F,ae(Ee,F,$),$},f=function(F){return fe(Ee,F)||{}},h=function(F){return W(Ee,F)}}else{var Y=j("state");R[Y]=!0,c=function(F,$){if(S(F,Y))throw new V(D);return $.facade=F,x(F,Y,$),$},f=function(F){return S(F,Y)?F[Y]:{}},h=function(F){return S(F,Y)}}o.exports={set:c,get:f,has:h,enforce:function(F){return h(F)?f(F):c(F,{})},getterFor:function(F){return function($){var K;if(!w($)||(K=f($)).type!==F)throw V("Incompatible receiver, "+F+" required");return K}}}},function(o,s,n){var c=n(36),f=n(37),h=n(71);o.exports=c?function(v,m,g){return f.f(v,m,h(1,g))}:function(v,m,g){return v[m]=g,v}},function(o,s,n){var c=n(15);o.exports=c({}.isPrototypeOf)},function(o,s,n){var c=n(55);o.exports=function(f,h){var v=f[h];return v==null?void 0:c(v)}},function(o,s,n){n(174)("Map",function(c){return function(){return c(this,arguments.length?arguments[0]:void 0)}},n(178))},function(o,s,n){var c=n(87),f=n(37),h=n(71);o.exports=function(v,m,g){var w=c(m);w in v?f.f(v,w,h(0,g)):v[w]=g}},function(o,s,n){var c=n(15),f=n(55),h=c(c.bind);o.exports=function(v,m){return f(v),m===void 0?v:h?h(v,m):function(){return v.apply(m,arguments)}}},function(o,s,n){var c=n(17),f=n(15),h=n(81),v=n(40),m=n(120),g=f([].join),w=h!=Object,x=m("join",",");c({target:"Array",proto:!0,forced:w||!x},{join:function(S){return g(v(this),S===void 0?",":S)}})},function(o,s){o.exports=!1},function(o,s,n){var c,f,h=n(7),v=n(53),m=h.process,g=h.Deno,w=m&&m.versions||g&&g.version,x=w&&w.v8;x&&(f=(c=x.split("."))[0]>0&&c[0]<4?1:+(c[0]+c[1])),!f&&v&&(!(c=v.match(/Edge\/(\d+)/))||c[1]>=74)&&(c=v.match(/Chrome\/(\d+)/))&&(f=+c[1]),o.exports=f},function(o,s,n){var c=n(131),f=n(110);o.exports=Object.keys||function(h){return c(h,f)}},function(o,s,n){var c=n(68),f=Math.max,h=Math.min;o.exports=function(v,m){var g=c(v);return g<0?f(g+m,0):h(g,m)}},function(o,s){var n=Math.ceil,c=Math.floor;o.exports=function(f){var h=+f;return h!=h||h===0?0:(h>0?c:n)(h)}},function(o,s){o.exports={}},function(o,s){o.exports={}},function(o,s){o.exports=function(n,c){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:c}}},function(o,s,n){var c=n(131),f=n(110).concat("length","prototype");s.f=Object.getOwnPropertyNames||function(h){return c(h,f)}},function(o,s,n){var c=n(37).f,f=n(34),h=n(27)("toStringTag");o.exports=function(v,m,g){v&&!f(v=g?v:v.prototype,h)&&c(v,h,{configurable:!0,value:m})}},function(o,s,n){var c=n(62),f=n(15),h=n(81),v=n(38),m=n(43),g=n(119),w=f([].push),x=function(S){var N=S==1,j=S==2,R=S==3,D=S==4,V=S==6,ce=S==7,Ee=S==5||V;return function(fe,W,ae,Y){for(var F,$,K=v(fe),I=h(K),pe=c(W,ae),De=m(I),Q=0,se=Y||g,he=N?se(fe,De):j||ce?se(fe,0):void 0;De>Q;Q++)if((Ee||Q in I)&&($=pe(F=I[Q],Q,K),S))if(N)he[Q]=$;else if($)switch(S){case 3:return!0;case 5:return F;case 6:return Q;case 2:w(he,F)}else switch(S){case 4:return!1;case 7:w(he,F)}return V?-1:R||D?D:he}};o.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(o,s,n){var c=n(19),f=n(27),h=n(65),v=f("species");o.exports=function(m){return h>=51||!c(function(){var g=[];return(g.constructor={})[v]=function(){return{foo:1}},g[m](Boolean).foo!==1})}},function(o,s){var n=Function.prototype,c=n.apply,f=n.bind,h=n.call;o.exports=typeof Reflect=="object"&&Reflect.apply||(f?h.bind(c):function(){return h.apply(c,arguments)})},function(o,s,n){var c=n(76),f=n(35),h=n(15),v=n(122),m=n(154),g=n(32),w=n(45),x=n(156),S=n(123),N=n(90),j=n(41),R=n(59),D=n(113),V=n(124),ce=n(102),Ee=n(151),fe=n(19),W=Ee.UNSUPPORTED_Y,ae=4294967295,Y=Math.min,F=[].push,$=h(/./.exec),K=h(F),I=h("".slice),pe=!fe(function(){var De=/(?:)/,Q=De.exec;De.exec=function(){return Q.apply(this,arguments)};var se="ab".split(De);return se.length!==2||se[0]!=="a"||se[1]!=="b"});v("split",function(De,Q,se){var he;return he="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(be,ee){var ve=j(w(this)),Fe=ee===void 0?ae:ee>>>0;if(Fe===0)return[];if(be===void 0)return[ve];if(!m(be))return f(Q,ve,be,Fe);for(var Ze,ht,Ft,bt=[],xt=(be.ignoreCase?"i":"")+(be.multiline?"m":"")+(be.unicode?"u":"")+(be.sticky?"y":""),tr=0,we=new RegExp(be.source,xt+"g");(Ze=f(ce,we,ve))&&!((ht=we.lastIndex)>tr&&(K(bt,I(ve,tr,Ze.index)),Ze.length>1&&Ze.index<ve.length&&c(F,bt,D(Ze,1)),Ft=Ze[0].length,tr=ht,bt.length>=Fe));)we.lastIndex===Ze.index&&we.lastIndex++;return tr===ve.length?!Ft&&$(we,"")||K(bt,""):K(bt,I(ve,tr)),bt.length>Fe?D(bt,0,Fe):bt}:"0".split(void 0,0).length?function(be,ee){return be===void 0&&ee===0?[]:f(Q,this,be,ee)}:Q,[function(be,ee){var ve=w(this),Fe=be==null?void 0:R(be,De);return Fe?f(Fe,be,ve,ee):f(he,j(ve),be,ee)},function(be,ee){var ve=g(this),Fe=j(be),Ze=se(he,ve,Fe,ee,he!==Q);if(Ze.done)return Ze.value;var ht=x(ve,RegExp),Ft=ve.unicode,bt=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(W?"g":"y"),xt=new ht(W?"^(?:"+ve.source+")":ve,bt),tr=ee===void 0?ae:ee>>>0;if(tr===0)return[];if(Fe.length===0)return V(xt,Fe)===null?[Fe]:[];for(var we=0,ne=0,me=[];ne<Fe.length;){xt.lastIndex=W?0:ne;var qe,gt=V(xt,W?I(Fe,ne):Fe);if(gt===null||(qe=Y(N(xt.lastIndex+(W?ne:0)),Fe.length))===we)ne=S(Fe,ne,Ft);else{if(K(me,I(Fe,we,ne)),me.length===tr)return me;for(var et=1;et<=gt.length-1;et++)if(K(me,gt[et]),me.length===tr)return me;ne=we=qe}}return K(me,I(Fe,we)),me}]},!pe,W)},function(o,s,n){var c=n(36),f=n(7),h=n(15),v=n(95),m=n(44),g=n(34),w=n(143),x=n(58),S=n(88),N=n(130),j=n(19),R=n(72).f,D=n(51).f,V=n(37).f,ce=n(197),Ee=n(159).trim,fe="Number",W=f.Number,ae=W.prototype,Y=f.TypeError,F=h("".slice),$=h("".charCodeAt),K=function(he){var be=N(he,"number");return typeof be=="bigint"?be:I(be)},I=function(he){var be,ee,ve,Fe,Ze,ht,Ft,bt,xt=N(he,"number");if(S(xt))throw Y("Cannot convert a Symbol value to a number");if(typeof xt=="string"&&xt.length>2){if(xt=Ee(xt),(be=$(xt,0))===43||be===45){if((ee=$(xt,2))===88||ee===120)return NaN}else if(be===48){switch($(xt,1)){case 66:case 98:ve=2,Fe=49;break;case 79:case 111:ve=8,Fe=55;break;default:return+xt}for(ht=(Ze=F(xt,2)).length,Ft=0;Ft<ht;Ft++)if((bt=$(Ze,Ft))<48||bt>Fe)return NaN;return parseInt(Ze,ve)}}return+xt};if(v(fe,!W(" 0o1")||!W("0b1")||W("+0x1"))){for(var pe,De=function(he){var be=arguments.length<1?0:W(K(he)),ee=this;return x(ae,ee)&&j(function(){ce(ee)})?w(Object(be),ee,De):be},Q=c?R(W):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),se=0;Q.length>se;se++)g(W,pe=Q[se])&&!g(De,pe)&&V(De,pe,D(W,pe));De.prototype=ae,ae.constructor=De,m(f,fe,De)}},function(o,s,n){n(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(o,s,n){var c=n(17),f=n(214),h=n(83);c({target:"Array",proto:!0},{fill:f}),h("fill")},function(o,s,n){var c=n(7),f=n(15),h=n(19),v=n(50),m=c.Object,g=f("".split);o.exports=h(function(){return!m("z").propertyIsEnumerable(0)})?function(w){return v(w)=="String"?g(w,""):m(w)}:m},function(o,s){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}o.exports=n},function(o,s,n){var c=n(27),f=n(54),h=n(37),v=c("unscopables"),m=Array.prototype;m[v]==null&&h.f(m,v,{configurable:!0,value:f(null)}),o.exports=function(g){m[v][g]=!0}},function(o,s,n){var c=n(64),f=n(107);(o.exports=function(h,v){return f[h]||(f[h]=v!==void 0?v:{})})("versions",[]).push({version:"3.19.3",mode:c?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(o,s,n){var c=n(15),f=0,h=Math.random(),v=c(1 .toString);o.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+v(++f+h,36)}},function(o,s,n){var c=n(7),f=n(33),h=c.document,v=f(h)&&f(h.createElement);o.exports=function(m){return v?h.createElement(m):{}}},function(o,s,n){var c=n(130),f=n(88);o.exports=function(h){var v=c(h,"string");return f(v)?v:v+""}},function(o,s,n){var c=n(7),f=n(46),h=n(28),v=n(58),m=n(128),g=c.Object;o.exports=m?function(w){return typeof w=="symbol"}:function(w){var x=f("Symbol");return h(x)&&v(x.prototype,g(w))}},function(o,s,n){var c=n(7).String;o.exports=function(f){try{return c(f)}catch{return"Object"}}},function(o,s,n){var c=n(68),f=Math.min;o.exports=function(h){return h>0?f(c(h),9007199254740991):0}},function(o,s,n){var c=n(84),f=n(85),h=c("keys");o.exports=function(v){return h[v]||(h[v]=f(v))}},function(o,s,n){var c=n(15),f=n(28),h=n(107),v=c(Function.toString);f(h.inspectSource)||(h.inspectSource=function(m){return v(m)}),o.exports=h.inspectSource},function(o,s,n){var c={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,h=f&&!c.call({1:2},1);s.f=h?function(v){var m=f(this,v);return!!m&&m.enumerable}:c},function(o,s,n){var c=n(36),f=n(34),h=Function.prototype,v=c&&Object.getOwnPropertyDescriptor,m=f(h,"name"),g=m&&function(){}.name==="something",w=m&&(!c||c&&v(h,"name").configurable);o.exports={EXISTS:m,PROPER:g,CONFIGURABLE:w}},function(o,s,n){var c=n(19),f=n(28),h=/#|\.prototype\./,v=function(S,N){var j=g[m(S)];return j==x||j!=w&&(f(N)?c(N):!!N)},m=v.normalize=function(S){return String(S).replace(h,".").toLowerCase()},g=v.data={},w=v.NATIVE="N",x=v.POLYFILL="P";o.exports=v},function(o,s,n){var c=n(7),f=n(34),h=n(28),v=n(38),m=n(91),g=n(137),w=m("IE_PROTO"),x=c.Object,S=x.prototype;o.exports=g?x.getPrototypeOf:function(N){var j=v(N);if(f(j,w))return j[w];var R=j.constructor;return h(R)&&j instanceof R?R.prototype:j instanceof x?S:null}},function(o,s,n){var c=n(15),f=n(32),h=n(173);o.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var v,m=!1,g={};try{(v=c(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(g,[]),m=g instanceof Array}catch{}return function(w,x){return f(w),h(x),m?v(w,x):w.__proto__=x,w}}():void 0)},function(o,s,n){var c=n(7),f=n(116),h=n(28),v=n(50),m=n(27)("toStringTag"),g=c.Object,w=v(function(){return arguments}())=="Arguments";o.exports=f?v:function(x){var S,N,j;return x===void 0?"Undefined":x===null?"Null":typeof(N=function(R,D){try{return R[D]}catch{}}(S=g(x),m))=="string"?N:w?v(S):(j=v(S))=="Object"&&h(S.callee)?"Arguments":j}},function(o,s,n){var c=n(50);o.exports=Array.isArray||function(f){return c(f)=="Array"}},function(o,s,n){var c=n(15),f=n(19),h=n(28),v=n(98),m=n(46),g=n(92),w=function(){},x=[],S=m("Reflect","construct"),N=/^\s*(?:class|function)\b/,j=c(N.exec),R=!N.exec(w),D=function(V){if(!h(V))return!1;try{return S(w,x,V),!0}catch{return!1}};o.exports=!S||f(function(){var V;return D(D.call)||!D(Object)||!D(function(){V=!0})||V})?function(V){if(!h(V))return!1;switch(v(V)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!j(N,g(V))}:D},function(o,s,n){var c=n(15);o.exports=c([].slice)},function(o,s,n){var c,f,h=n(35),v=n(15),m=n(41),g=n(185),w=n(151),x=n(84),S=n(54),N=n(56).get,j=n(186),R=n(187),D=x("native-string-replace",String.prototype.replace),V=RegExp.prototype.exec,ce=V,Ee=v("".charAt),fe=v("".indexOf),W=v("".replace),ae=v("".slice),Y=(f=/b*/g,h(V,c=/a/,"a"),h(V,f,"a"),c.lastIndex!==0||f.lastIndex!==0),F=w.BROKEN_CARET,$=/()??/.exec("")[1]!==void 0;(Y||$||F||j||R)&&(ce=function(K){var I,pe,De,Q,se,he,be,ee=this,ve=N(ee),Fe=m(K),Ze=ve.raw;if(Ze)return Ze.lastIndex=ee.lastIndex,I=h(ce,Ze,Fe),ee.lastIndex=Ze.lastIndex,I;var ht=ve.groups,Ft=F&&ee.sticky,bt=h(g,ee),xt=ee.source,tr=0,we=Fe;if(Ft&&(bt=W(bt,"y",""),fe(bt,"g")===-1&&(bt+="g"),we=ae(Fe,ee.lastIndex),ee.lastIndex>0&&(!ee.multiline||ee.multiline&&Ee(Fe,ee.lastIndex-1)!==`
`)&&(xt="(?: "+xt+")",we=" "+we,tr++),pe=new RegExp("^(?:"+xt+")",bt)),$&&(pe=new RegExp("^"+xt+"$(?!\\s)",bt)),Y&&(De=ee.lastIndex),Q=h(V,Ft?pe:ee,we),Ft?Q?(Q.input=ae(Q.input,tr),Q[0]=ae(Q[0],tr),Q.index=ee.lastIndex,ee.lastIndex+=Q[0].length):ee.lastIndex=0:Y&&Q&&(ee.lastIndex=ee.global?Q.index+Q[0].length:De),$&&Q&&Q.length>1&&h(D,Q[0],pe,function(){for(se=1;se<arguments.length-2;se++)arguments[se]===void 0&&(Q[se]=void 0)}),Q&&ht)for(Q.groups=he=S(null),se=0;se<ht.length;se++)he[(be=ht[se])[0]]=Q[be[1]];return Q}),o.exports=ce},function(o,s,n){var c=n(17),f=n(7),h=n(67),v=n(68),m=n(43),g=n(38),w=n(119),x=n(61),S=n(75)("splice"),N=f.TypeError,j=Math.max,R=Math.min,D=9007199254740991,V="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!S},{splice:function(ce,Ee){var fe,W,ae,Y,F,$,K=g(this),I=m(K),pe=h(ce,I),De=arguments.length;if(De===0?fe=W=0:De===1?(fe=0,W=I-pe):(fe=De-2,W=R(j(v(Ee),0),I-pe)),I+fe-W>D)throw N(V);for(ae=w(K,W),Y=0;Y<W;Y++)(F=pe+Y)in K&&x(ae,Y,K[F]);if(ae.length=W,fe<W){for(Y=pe;Y<I-W;Y++)$=Y+fe,(F=Y+W)in K?K[$]=K[F]:delete K[$];for(Y=I;Y>I-W+fe;Y--)delete K[Y-1]}else if(fe>W)for(Y=I-W;Y>pe;Y--)$=Y+fe-1,(F=Y+W-1)in K?K[$]=K[F]:delete K[$];for(Y=0;Y<fe;Y++)K[Y+pe]=arguments[Y+2];return K.length=I-W+fe,ae}})},function(o,s,n){var c=n(17),f=n(202);c({target:"String",proto:!0,forced:n(203)("anchor")},{anchor:function(h){return f(this,"a","name",h)}})},function(o,s,n){(function(c){var f=typeof c=="object"&&c&&c.Object===Object&&c;s.a=f}).call(this,n(82))},function(o,s,n){(function(c){var f=n(31),h=i&&!i.nodeType&&i,v=h&&typeof c=="object"&&c&&!c.nodeType&&c,m=v&&v.exports===h?f.a.Buffer:void 0,g=m?m.allocUnsafe:void 0;s.a=function(w,x){if(x)return w.slice();var S=w.length,N=g?g(S):new w.constructor(S);return w.copy(N),N}}).call(this,n(121)(o))},function(o,s,n){var c=n(7),f=n(108),h="__core-js_shared__",v=c[h]||f(h,{});o.exports=v},function(o,s,n){var c=n(7),f=Object.defineProperty;o.exports=function(h,v){try{f(c,h,{value:v,configurable:!0,writable:!0})}catch{c[h]=v}return v}},function(o,s,n){var c=n(65),f=n(19);o.exports=!!Object.getOwnPropertySymbols&&!f(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&c&&c<41})},function(o,s){o.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(o,s,n){var c=n(17),f=n(35),h=n(64),v=n(94),m=n(28),g=n(172),w=n(96),x=n(97),S=n(73),N=n(57),j=n(44),R=n(27),D=n(70),V=n(136),ce=v.PROPER,Ee=v.CONFIGURABLE,fe=V.IteratorPrototype,W=V.BUGGY_SAFARI_ITERATORS,ae=R("iterator"),Y="keys",F="values",$="entries",K=function(){return this};o.exports=function(I,pe,De,Q,se,he,be){g(De,pe,Q);var ee,ve,Fe,Ze=function(ne){if(ne===se&&tr)return tr;if(!W&&ne in bt)return bt[ne];switch(ne){case Y:case F:case $:return function(){return new De(this,ne)}}return function(){return new De(this)}},ht=pe+" Iterator",Ft=!1,bt=I.prototype,xt=bt[ae]||bt["@@iterator"]||se&&bt[se],tr=!W&&xt||Ze(se),we=pe=="Array"&&bt.entries||xt;if(we&&(ee=w(we.call(new I)))!==Object.prototype&&ee.next&&(h||w(ee)===fe||(x?x(ee,fe):m(ee[ae])||j(ee,ae,K)),S(ee,ht,!0,!0),h&&(D[ht]=K)),ce&&se==F&&xt&&xt.name!==F&&(!h&&Ee?N(bt,"name",F):(Ft=!0,tr=function(){return f(xt,this)})),se)if(ve={values:Ze(F),keys:he?tr:Ze(Y),entries:Ze($)},be)for(Fe in ve)(W||Ft||!(Fe in bt))&&j(bt,Fe,ve[Fe]);else c({target:pe,proto:!0,forced:W||Ft},ve);return h&&!be||bt[ae]===tr||j(bt,ae,tr,{name:se}),D[pe]=tr,ve}},function(o,s){s.f=Object.getOwnPropertySymbols},function(o,s,n){var c=n(7),f=n(67),h=n(43),v=n(61),m=c.Array,g=Math.max;o.exports=function(w,x,S){for(var N=h(w),j=f(x,N),R=f(S===void 0?N:S,N),D=m(g(R-j,0)),V=0;j<R;j++,V++)v(D,V,w[j]);return D.length=V,D}},function(o,s,n){var c=n(7),f=n(62),h=n(35),v=n(32),m=n(89),g=n(140),w=n(43),x=n(58),S=n(141),N=n(115),j=n(142),R=c.TypeError,D=function(ce,Ee){this.stopped=ce,this.result=Ee},V=D.prototype;o.exports=function(ce,Ee,fe){var W,ae,Y,F,$,K,I,pe=fe&&fe.that,De=!(!fe||!fe.AS_ENTRIES),Q=!(!fe||!fe.IS_ITERATOR),se=!(!fe||!fe.INTERRUPTED),he=f(Ee,pe),be=function(ve){return W&&j(W,"normal",ve),new D(!0,ve)},ee=function(ve){return De?(v(ve),se?he(ve[0],ve[1],be):he(ve[0],ve[1])):se?he(ve,be):he(ve)};if(Q)W=ce;else{if(!(ae=N(ce)))throw R(m(ce)+" is not iterable");if(g(ae)){for(Y=0,F=w(ce);F>Y;Y++)if(($=ee(ce[Y]))&&x(V,$))return $;return new D(!1)}W=S(ce,ae)}for(K=W.next;!(I=h(K,W)).done;){try{$=ee(I.value)}catch(ve){j(W,"throw",ve)}if(typeof $=="object"&&$&&x(V,$))return $}return new D(!1)}},function(o,s,n){var c=n(98),f=n(59),h=n(70),v=n(27)("iterator");o.exports=function(m){if(m!=null)return f(m,v)||f(m,"@@iterator")||h[c(m)]}},function(o,s,n){var c={};c[n(27)("toStringTag")]="z",o.exports=String(c)==="[object z]"},function(o,s,n){var c=n(7),f=n(58),h=c.TypeError;o.exports=function(v,m){if(f(m,v))return v;throw h("Incorrect invocation")}},function(o,s,n){var c=n(27)("iterator"),f=!1;try{var h=0,v={next:function(){return{done:!!h++}},return:function(){f=!0}};v[c]=function(){return this},Array.from(v,function(){throw 2})}catch{}o.exports=function(m,g){if(!g&&!f)return!1;var w=!1;try{var x={};x[c]=function(){return{next:function(){return{done:w=!0}}}},m(x)}catch{}return w}},function(o,s,n){var c=n(181);o.exports=function(f,h){return new(c(f))(h===0?0:h)}},function(o,s,n){var c=n(19);o.exports=function(f,h){var v=[][f];return!!v&&c(function(){v.call(null,h||function(){throw 1},1)})}},function(o,s){o.exports=function(n){if(!n.webpackPolyfill){var c=Object.create(n);c.children||(c.children=[]),Object.defineProperty(c,"loaded",{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,"id",{enumerable:!0,get:function(){return c.i}}),Object.defineProperty(c,"exports",{enumerable:!0}),c.webpackPolyfill=1}return c}},function(o,s,n){n(18);var c=n(15),f=n(44),h=n(102),v=n(19),m=n(27),g=n(57),w=m("species"),x=RegExp.prototype;o.exports=function(S,N,j,R){var D=m(S),V=!v(function(){var W={};return W[D]=function(){return 7},""[S](W)!=7}),ce=V&&!v(function(){var W=!1,ae=/a/;return S==="split"&&((ae={}).constructor={},ae.constructor[w]=function(){return ae},ae.flags="",ae[D]=/./[D]),ae.exec=function(){return W=!0,null},ae[D](""),!W});if(!V||!ce||j){var Ee=c(/./[D]),fe=N(D,""[S],function(W,ae,Y,F,$){var K=c(W),I=ae.exec;return I===h||I===x.exec?V&&!$?{done:!0,value:Ee(ae,Y,F)}:{done:!0,value:K(Y,ae,F)}:{done:!1}});f(String.prototype,S,fe[0]),f(x,D,fe[1])}R&&g(x[D],"sham",!0)}},function(o,s,n){var c=n(146).charAt;o.exports=function(f,h,v){return h+(v?c(f,h).length:1)}},function(o,s,n){var c=n(7),f=n(35),h=n(32),v=n(28),m=n(50),g=n(102),w=c.TypeError;o.exports=function(x,S){var N=x.exec;if(v(N)){var j=f(N,x,S);return j!==null&&h(j),j}if(m(x)==="RegExp")return f(g,x,S);throw w("RegExp#exec called on incompatible receiver")}},function(o,s,n){var c=n(76),f=n(35),h=n(15),v=n(122),m=n(19),g=n(32),w=n(28),x=n(68),S=n(90),N=n(41),j=n(45),R=n(123),D=n(59),V=n(198),ce=n(124),Ee=n(27)("replace"),fe=Math.max,W=Math.min,ae=h([].concat),Y=h([].push),F=h("".indexOf),$=h("".slice),K="a".replace(/./,"$0")==="$0",I=!!/./[Ee]&&/./[Ee]("a","$0")==="";v("replace",function(pe,De,Q){var se=I?"$":"$0";return[function(he,be){var ee=j(this),ve=he==null?void 0:D(he,Ee);return ve?f(ve,he,ee,be):f(De,N(ee),he,be)},function(he,be){var ee=g(this),ve=N(he);if(typeof be=="string"&&F(be,se)===-1&&F(be,"$<")===-1){var Fe=Q(De,ee,ve,be);if(Fe.done)return Fe.value}var Ze=w(be);Ze||(be=N(be));var ht=ee.global;if(ht){var Ft=ee.unicode;ee.lastIndex=0}for(var bt=[];;){var xt=ce(ee,ve);if(xt===null||(Y(bt,xt),!ht))break;N(xt[0])===""&&(ee.lastIndex=R(ve,S(ee.lastIndex),Ft))}for(var tr,we="",ne=0,me=0;me<bt.length;me++){for(var qe=N((xt=bt[me])[0]),gt=fe(W(x(xt.index),ve.length),0),et=[],kt=1;kt<xt.length;kt++)Y(et,(tr=xt[kt])===void 0?tr:String(tr));var zt=xt.groups;if(Ze){var Zt=ae([qe],et,gt,ve);zt!==void 0&&Y(Zt,zt);var Gt=N(c(be,void 0,Zt))}else Gt=V(qe,ve,gt,et,zt,be);gt>=ne&&(we+=$(ve,ne,gt)+Gt,ne=gt+qe.length)}return we+$(ve,ne)}]},!!m(function(){var pe=/./;return pe.exec=function(){var De=[];return De.groups={a:"7"},De},"".replace(pe,"$<a>")!=="7"})||!K||I)},function(o,s,n){var c=n(50),f=n(7);o.exports=c(f.process)=="process"},function(o,s,n){n(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(o,s,n){var c=n(109);o.exports=c&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(o,s,n){var c=n(36),f=n(19),h=n(86);o.exports=!c&&!f(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(o,s,n){var c=n(7),f=n(35),h=n(33),v=n(88),m=n(59),g=n(170),w=n(27),x=c.TypeError,S=w("toPrimitive");o.exports=function(N,j){if(!h(N)||v(N))return N;var R,D=m(N,S);if(D){if(j===void 0&&(j="default"),R=f(D,N,j),!h(R)||v(R))return R;throw x("Can't convert object to primitive value")}return j===void 0&&(j="number"),g(N,j)}},function(o,s,n){var c=n(15),f=n(34),h=n(40),v=n(132).indexOf,m=n(69),g=c([].push);o.exports=function(w,x){var S,N=h(w),j=0,R=[];for(S in N)!f(m,S)&&f(N,S)&&g(R,S);for(;x.length>j;)f(N,S=x[j++])&&(~v(R,S)||g(R,S));return R}},function(o,s,n){var c=n(40),f=n(67),h=n(43),v=function(m){return function(g,w,x){var S,N=c(g),j=h(N),R=f(x,j);if(m&&w!=w){for(;j>R;)if((S=N[R++])!=S)return!0}else for(;j>R;R++)if((m||R in N)&&N[R]===w)return m||R||0;return!m&&-1}};o.exports={includes:v(!0),indexOf:v(!1)}},function(o,s,n){var c=n(46);o.exports=c("document","documentElement")},function(o,s,n){var c=n(34),f=n(135),h=n(51),v=n(37);o.exports=function(m,g){for(var w=f(g),x=v.f,S=h.f,N=0;N<w.length;N++){var j=w[N];c(m,j)||x(m,j,S(g,j))}}},function(o,s,n){var c=n(46),f=n(15),h=n(72),v=n(112),m=n(32),g=f([].concat);o.exports=c("Reflect","ownKeys")||function(w){var x=h.f(m(w)),S=v.f;return S?g(x,S(w)):x}},function(o,s,n){var c,f,h,v=n(19),m=n(28),g=n(54),w=n(96),x=n(44),S=n(27),N=n(64),j=S("iterator"),R=!1;[].keys&&("next"in(h=[].keys())?(f=w(w(h)))!==Object.prototype&&(c=f):R=!0),c==null||v(function(){var D={};return c[j].call(D)!==D})?c={}:N&&(c=g(c)),m(c[j])||x(c,j,function(){return this}),o.exports={IteratorPrototype:c,BUGGY_SAFARI_ITERATORS:R}},function(o,s,n){var c=n(19);o.exports=!c(function(){function f(){}return f.prototype.constructor=null,Object.getPrototypeOf(new f)!==f.prototype})},function(o,s,n){var c=n(17),f=n(15),h=n(69),v=n(33),m=n(34),g=n(37).f,w=n(72),x=n(139),S=n(175),N=n(85),j=n(177),R=!1,D=N("meta"),V=0,ce=function(fe){g(fe,D,{value:{objectID:"O"+V++,weakData:{}}})},Ee=o.exports={enable:function(){Ee.enable=function(){},R=!0;var fe=w.f,W=f([].splice),ae={};ae[D]=1,fe(ae).length&&(w.f=function(Y){for(var F=fe(Y),$=0,K=F.length;$<K;$++)if(F[$]===D){W(F,$,1);break}return F},c({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},fastKey:function(fe,W){if(!v(fe))return typeof fe=="symbol"?fe:(typeof fe=="string"?"S":"P")+fe;if(!m(fe,D)){if(!S(fe))return"F";if(!W)return"E";ce(fe)}return fe[D].objectID},getWeakData:function(fe,W){if(!m(fe,D)){if(!S(fe))return!0;if(!W)return!1;ce(fe)}return fe[D].weakData},onFreeze:function(fe){return j&&R&&S(fe)&&!m(fe,D)&&ce(fe),fe}};h[D]=!0},function(o,s,n){var c=n(50),f=n(40),h=n(72).f,v=n(113),m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];o.exports.f=function(g){return m&&c(g)=="Window"?function(w){try{return h(w)}catch{return v(m)}}(g):h(f(g))}},function(o,s,n){var c=n(27),f=n(70),h=c("iterator"),v=Array.prototype;o.exports=function(m){return m!==void 0&&(f.Array===m||v[h]===m)}},function(o,s,n){var c=n(7),f=n(35),h=n(55),v=n(32),m=n(89),g=n(115),w=c.TypeError;o.exports=function(x,S){var N=arguments.length<2?g(x):S;if(h(N))return v(f(N,x));throw w(m(x)+" is not iterable")}},function(o,s,n){var c=n(35),f=n(32),h=n(59);o.exports=function(v,m,g){var w,x;f(v);try{if(!(w=h(v,"return"))){if(m==="throw")throw g;return g}w=c(w,v)}catch(S){x=!0,w=S}if(m==="throw")throw g;if(x)throw w;return f(w),g}},function(o,s,n){var c=n(28),f=n(33),h=n(97);o.exports=function(v,m,g){var w,x;return h&&c(w=m.constructor)&&w!==g&&f(x=w.prototype)&&x!==g.prototype&&h(v,x),v}},function(o,s,n){var c=n(44);o.exports=function(f,h,v){for(var m in h)c(f,m,h[m],v);return f}},function(o,s,n){var c=n(46),f=n(37),h=n(27),v=n(36),m=h("species");o.exports=function(g){var w=c(g),x=f.f;v&&w&&!w[m]&&x(w,m,{configurable:!0,get:function(){return this}})}},function(o,s,n){var c=n(15),f=n(68),h=n(41),v=n(45),m=c("".charAt),g=c("".charCodeAt),w=c("".slice),x=function(S){return function(N,j){var R,D,V=h(v(N)),ce=f(j),Ee=V.length;return ce<0||ce>=Ee?S?"":void 0:(R=g(V,ce))<55296||R>56319||ce+1===Ee||(D=g(V,ce+1))<56320||D>57343?S?m(V,ce):R:S?w(V,ce,ce+2):D-56320+(R-55296<<10)+65536}};o.exports={codeAt:x(!1),charAt:x(!0)}},function(o,s){o.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(o,s,n){var c=n(86)("span").classList,f=c&&c.constructor&&c.constructor.prototype;o.exports=f===Object.prototype?void 0:f},function(o,s,n){var c=n(27);s.f=c},function(o,s,n){var c=n(182),f=n(34),h=n(149),v=n(37).f;o.exports=function(m){var g=c.Symbol||(c.Symbol={});f(g,m)||v(g,m,{value:h.f(m)})}},function(o,s,n){var c=n(19),f=n(7).RegExp,h=c(function(){var g=f("a","y");return g.lastIndex=2,g.exec("abcd")!=null}),v=h||c(function(){return!f("a","y").sticky}),m=h||c(function(){var g=f("^r","gy");return g.lastIndex=2,g.exec("str")!=null});o.exports={BROKEN_CARET:m,MISSED_STICKY:v,UNSUPPORTED_Y:h}},function(o,s,n){var c=n(17),f=n(132).includes,h=n(83);c({target:"Array",proto:!0},{includes:function(v){return f(this,v,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(o,s,n){var c=n(17),f=n(15),h=n(194),v=n(45),m=n(41),g=n(195),w=f("".indexOf);c({target:"String",proto:!0,forced:!g("includes")},{includes:function(x){return!!~w(m(v(this)),m(h(x)),arguments.length>1?arguments[1]:void 0)}})},function(o,s,n){var c=n(33),f=n(50),h=n(27)("match");o.exports=function(v){var m;return c(v)&&((m=v[h])!==void 0?!!m:f(v)=="RegExp")}},function(o,s){var n,c,f=o.exports={};function h(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}function m(V){if(n===setTimeout)return setTimeout(V,0);if((n===h||!n)&&setTimeout)return n=setTimeout,setTimeout(V,0);try{return n(V,0)}catch{try{return n.call(null,V,0)}catch{return n.call(this,V,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:h}catch{n=h}try{c=typeof clearTimeout=="function"?clearTimeout:v}catch{c=v}})();var g,w=[],x=!1,S=-1;function N(){x&&g&&(x=!1,g.length?w=g.concat(w):S=-1,w.length&&j())}function j(){if(!x){var V=m(N);x=!0;for(var ce=w.length;ce;){for(g=w,w=[];++S<ce;)g&&g[S].run();S=-1,ce=w.length}g=null,x=!1,function(Ee){if(c===clearTimeout)return clearTimeout(Ee);if((c===v||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(Ee);try{c(Ee)}catch{try{return c.call(null,Ee)}catch{return c.call(this,Ee)}}}(V)}}function R(V,ce){this.fun=V,this.array=ce}function D(){}f.nextTick=function(V){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var Ee=1;Ee<arguments.length;Ee++)ce[Ee-1]=arguments[Ee];w.push(new R(V,ce)),w.length!==1||x||m(j)},R.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=D,f.addListener=D,f.once=D,f.off=D,f.removeListener=D,f.removeAllListeners=D,f.emit=D,f.prependListener=D,f.prependOnceListener=D,f.listeners=function(V){return[]},f.binding=function(V){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(V){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(o,s,n){var c=n(32),f=n(157),h=n(27)("species");o.exports=function(v,m){var g,w=c(v).constructor;return w===void 0||(g=c(w)[h])==null?m:f(g)}},function(o,s,n){var c=n(7),f=n(100),h=n(89),v=c.TypeError;o.exports=function(m){if(f(m))return m;throw v(h(m)+" is not a constructor")}},function(o,s,n){var c=n(17),f=n(159).trim;c({target:"String",proto:!0,forced:n(196)("trim")},{trim:function(){return f(this)}})},function(o,s,n){var c=n(15),f=n(45),h=n(41),v=n(160),m=c("".replace),g="["+v+"]",w=RegExp("^"+g+g+"*"),x=RegExp(g+g+"*$"),S=function(N){return function(j){var R=h(f(j));return 1&N&&(R=m(R,w,"")),2&N&&(R=m(R,x,"")),R}};o.exports={start:S(1),end:S(2),trim:S(3)}},function(o,s){o.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(o,s,n){var c=n(35),f=n(122),h=n(32),v=n(90),m=n(41),g=n(45),w=n(59),x=n(123),S=n(124);f("match",function(N,j,R){return[function(D){var V=g(this),ce=D==null?void 0:w(D,N);return ce?c(ce,D,V):new RegExp(D)[N](m(V))},function(D){var V=h(this),ce=m(D),Ee=R(j,V,ce);if(Ee.done)return Ee.value;if(!V.global)return S(V,ce);var fe=V.unicode;V.lastIndex=0;for(var W,ae=[],Y=0;(W=S(V,ce))!==null;){var F=m(W[0]);ae[Y]=F,F===""&&(V.lastIndex=x(ce,v(V.lastIndex),fe)),Y++}return Y===0?null:ae}]})},function(o,s,n){var c=n(17),f=Math.hypot,h=Math.abs,v=Math.sqrt;c({target:"Math",stat:!0,forced:!!f&&f(1/0,NaN)!==1/0},{hypot:function(m,g){for(var w,x,S=0,N=0,j=arguments.length,R=0;N<j;)R<(w=h(arguments[N++]))?(S=S*(x=R/w)*x+1,R=w):S+=w>0?(x=w/R)*x:w;return R===1/0?1/0:R*v(S)}})},function(o,s,n){var c,f,h,v,m=n(7),g=n(76),w=n(62),x=n(28),S=n(34),N=n(19),j=n(133),R=n(101),D=n(86),V=n(164),ce=n(126),Ee=m.setImmediate,fe=m.clearImmediate,W=m.process,ae=m.Dispatch,Y=m.Function,F=m.MessageChannel,$=m.String,K=0,I={},pe="onreadystatechange";try{c=m.location}catch{}var De=function(be){if(S(I,be)){var ee=I[be];delete I[be],ee()}},Q=function(be){return function(){De(be)}},se=function(be){De(be.data)},he=function(be){m.postMessage($(be),c.protocol+"//"+c.host)};Ee&&fe||(Ee=function(be){var ee=R(arguments,1);return I[++K]=function(){g(x(be)?be:Y(be),void 0,ee)},f(K),K},fe=function(be){delete I[be]},ce?f=function(be){W.nextTick(Q(be))}:ae&&ae.now?f=function(be){ae.now(Q(be))}:F&&!V?(v=(h=new F).port2,h.port1.onmessage=se,f=w(v.postMessage,v)):m.addEventListener&&x(m.postMessage)&&!m.importScripts&&c&&c.protocol!=="file:"&&!N(he)?(f=he,m.addEventListener("message",se,!1)):f=pe in D("script")?function(be){j.appendChild(D("script")).onreadystatechange=function(){j.removeChild(this),De(be)}}:function(be){setTimeout(Q(be),0)}),o.exports={set:Ee,clear:fe}},function(o,s,n){var c=n(53);o.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(c)},function(o,s,n){var c=n(55),f=function(h){var v,m;this.promise=new h(function(g,w){if(v!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");v=g,m=w}),this.resolve=c(v),this.reject=c(m)};o.exports.f=function(h){return new f(h)}},function(o,s,n){s.a=function(){return!1}},function(o,s,n){(function(c){n.d(s,"a",function(){return W});var f=n(1);function h(F){throw new Error("[mobx-utils] "+F)}function v(F,$){$===void 0&&($="Illegal state"),F||h($)}var m=function(F){return F&&F!==Object.prototype&&Object.getOwnPropertyNames(F).concat(m(Object.getPrototypeOf(F))||[])},g=function(F){return function($){var K=m($);return K.filter(function(I,pe){return K.indexOf(I)===pe})}(F).filter(function($){return $!=="constructor"&&!~$.indexOf("__")})},w="pending",x="fulfilled",S="rejected";function N(F){switch(this.state){case w:return F.pending&&F.pending(this.value);case S:return F.rejected&&F.rejected(this.value);case x:return F.fulfilled?F.fulfilled(this.value):this.value}}function j(F,$){if(v(arguments.length<=2,"fromPromise expects up to two arguments"),v(typeof F=="function"||typeof F=="object"&&F&&typeof F.then=="function","Please pass a promise or function to fromPromise"),F.isPromiseBasedObservable===!0)return F;typeof F=="function"&&(F=new Promise(F));var K=F;F.then(Object(f.k)("observableFromPromise-resolve",function(pe){K.value=pe,K.state=x}),Object(f.k)("observableFromPromise-reject",function(pe){K.value=pe,K.state=S})),K.isPromiseBasedObservable=!0,K.case=N;var I=$&&$.state===x?$.value:void 0;return Object(f.q)(K,{value:I,state:w},{},{deep:!1}),K}(function(F){F.reject=Object(f.k)("fromPromise.reject",function($){var K=F(Promise.reject($));return K.state=S,K.value=$,K}),F.resolve=Object(f.k)("fromPromise.resolve",function($){$===void 0&&($=void 0);var K=F(Promise.resolve($));return K.state=x,K.value=$,K})})(j||(j={}));var R=function(F,$,K,I){var pe,De=arguments.length,Q=De<3?$:I===null?I=Object.getOwnPropertyDescriptor($,K):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(F,$,K,I);else for(var se=F.length-1;se>=0;se--)(pe=F[se])&&(Q=(De<3?pe(Q):De>3?pe($,K,Q):pe($,K))||Q);return De>3&&Q&&Object.defineProperty($,K,Q),Q};(function(){function F($,K){var I=this;Object(f.G)(function(){I.current=K,I.subscription=$.subscribe(I)})}F.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},F.prototype.next=function($){this.current=$},F.prototype.complete=function(){this.dispose()},F.prototype.error=function($){this.current=$,this.dispose()},R([f.C.ref],F.prototype,"current",void 0),R([f.k.bound],F.prototype,"next",null),R([f.k.bound],F.prototype,"complete",null),R([f.k.bound],F.prototype,"error",null)})();var D=function(){return D=Object.assign||function(F){for(var $,K=1,I=arguments.length;K<I;K++)for(var pe in $=arguments[K])Object.prototype.hasOwnProperty.call($,pe)&&(F[pe]=$[pe]);return F},D.apply(this,arguments)},V=function(F,$,K,I){var pe,De=arguments.length,Q=De<3?$:I===null?I=Object.getOwnPropertyDescriptor($,K):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(F,$,K,I);else for(var se=F.length-1;se>=0;se--)(pe=F[se])&&(Q=(De<3?pe(Q):De>3?pe($,K,Q):pe($,K))||Q);return De>3&&Q&&Object.defineProperty($,K,Q),Q},ce=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function F($){var K=this;this.model=$,this.localValues=f.C.map({}),this.localComputedValues=f.C.map({}),this.isPropertyDirty=function(I){return K.localValues.has(I)},v(Object(f.A)($),"createViewModel expects an observable object"),g($).forEach(function(I){if(I!==f.a&&I!=="__mobxDidRunLazyInitializers"){if(v(ce.indexOf(I)===-1,"The propertyname "+I+" is reserved and cannot be used with viewModels"),Object(f.w)($,I)){var pe=Object(f.h)($,I).derivation;K.localComputedValues.set(I,Object(f.m)(pe.bind(K)))}var De=Object.getOwnPropertyDescriptor($,I),Q=De?{enumerable:De.enumerable}:{};Object.defineProperty(K,I,D(D({},Q),{configurable:!0,get:function(){return Object(f.w)($,I)?K.localComputedValues.get(I).get():K.isPropertyDirty(I)?K.localValues.get(I):K.model[I]},set:Object(f.k)(function(se){se!==K.model[I]?K.localValues.set(I,se):K.localValues.delete(I)})}))}})}Object.defineProperty(F.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(F.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),F.prototype.submit=function(){var $=this;Object(f.B)(this.localValues).forEach(function(K){var I=$.localValues.get(K),pe=$.model[K];Object(f.y)(pe)?pe.replace(I):Object(f.z)(pe)?(pe.clear(),pe.merge(I)):Object(f.v)(I)||($.model[K]=I)}),this.localValues.clear()},F.prototype.reset=function(){this.localValues.clear()},F.prototype.resetProperty=function($){this.localValues.delete($)},V([f.m],F.prototype,"isDirty",null),V([f.m],F.prototype,"changedValues",null),V([f.k.bound],F.prototype,"submit",null),V([f.k.bound],F.prototype,"reset",null),V([f.k.bound],F.prototype,"resetProperty",null)})();function Ee(F){if(!F)return"ROOT";for(var $=[];F.parent;)$.push(F.path),F=F.parent;return $.reverse().join("/")}function fe(F){return Object(f.A)(F)||Object(f.y)(F)||Object(f.z)(F)}function W(F,$){var K=new WeakMap;function I(Q){var se=K.get(Q.object);(function(he,be){switch(he.type){case"add":pe(he.newValue,be,he.name);break;case"update":De(he.oldValue),pe(he.newValue,be,he.name||""+he.index);break;case"remove":case"delete":De(he.oldValue);break;case"splice":he.removed.map(De),he.added.forEach(function(Fe,Ze){return pe(Fe,be,""+(he.index+Ze))});for(var ee=he.index+he.addedCount;ee<he.object.length;ee++)if(fe(he.object[ee])){var ve=K.get(he.object[ee]);ve&&(ve.path=""+ee)}}})(Q,se),$(Q,Ee(se),F)}function pe(Q,se,he){if(fe(Q)){var be=K.get(Q);if(be){if(be.parent!==se||be.path!==he)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+Ee(se)+"/"+he+"', but it already exists at '"+Ee(be.parent)+"/"+be.path+"'")}else{var ee={parent:se,path:he,dispose:Object(f.D)(Q,I)};K.set(Q,ee),Object(f.p)(Q).forEach(function(ve){var Fe=ve[0];return pe(ve[1],ee,Fe)})}}}function De(Q){if(fe(Q)){var se=K.get(Q);if(!se)return;K.delete(Q),se.dispose(),Object(f.L)(Q).forEach(De)}}return pe(F,void 0,""),function(){De(F)}}var ae,Y=(ae=function(F,$){return ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,I){K.__proto__=I}||function(K,I){for(var pe in I)I.hasOwnProperty(pe)&&(K[pe]=I[pe])},ae(F,$)},function(F,$){function K(){this.constructor=F}ae(F,$),F.prototype=$===null?Object.create($):(K.prototype=$.prototype,new K)});(function(F){function $(K,I,pe){var De=pe===void 0?{}:pe,Q=De.name,se=Q===void 0?"ogm"+(1e3*Math.random()|0):Q,he=De.keyToName,be=he===void 0?function(Fe){return""+Fe}:he,ee=F.call(this)||this;ee._keyToName=be,ee._groupBy=I,ee._ogmInfoKey=Symbol("ogmInfo"+se),ee._base=K;for(var ve=0;ve<K.length;ve++)ee._addItem(K[ve]);return ee._disposeBaseObserver=Object(f.D)(ee._base,function(Fe){if(Fe.type==="splice")Object(f.J)(function(){for(var Ze=0,ht=Fe.removed;Ze<ht.length;Ze++){var Ft=ht[Ze];ee._removeItem(Ft)}for(var bt=0,xt=Fe.added;bt<xt.length;bt++){var tr=xt[bt];ee._addItem(tr)}});else{if(Fe.type!=="update")throw new Error("illegal state");Object(f.J)(function(){ee._removeItem(Fe.oldValue),ee._addItem(Fe.newValue)})}}),ee}Y($,F),$.prototype.clear=function(){throw new Error("not supported")},$.prototype.delete=function(K){throw new Error("not supported")},$.prototype.set=function(K,I){throw new Error("not supported")},$.prototype.dispose=function(){this._disposeBaseObserver();for(var K=0;K<this._base.length;K++){var I=this._base[K];I[this._ogmInfoKey].reaction(),delete I[this._ogmInfoKey]}},$.prototype._getGroupArr=function(K){var I=F.prototype.get.call(this,K);return I===void 0&&(I=Object(f.C)([],{name:"GroupArray["+this._keyToName(K)+"]",deep:!1}),F.prototype.set.call(this,K,I)),I},$.prototype._removeFromGroupArr=function(K,I){var pe=F.prototype.get.call(this,K);pe.length===1?F.prototype.delete.call(this,K):(I===pe.length-1||(pe[I]=pe[pe.length-1],pe[I][this._ogmInfoKey].groupArrIndex=I),pe.length--)},$.prototype._addItem=function(K){var I=this,pe=this._groupBy(K),De=this._getGroupArr(pe),Q={groupByValue:pe,groupArrIndex:De.length,reaction:Object(f.F)(function(){return I._groupBy(K)},function(se,he){var be=K[I._ogmInfoKey];I._removeFromGroupArr(be.groupByValue,be.groupArrIndex);var ee=I._getGroupArr(se),ve=ee.length;ee.push(K),be.groupByValue=se,be.groupArrIndex=ve})};Object.defineProperty(K,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:Q}),De.push(K)},$.prototype._removeItem=function(K){var I=K[this._ogmInfoKey];this._removeFromGroupArr(I.groupByValue,I.groupArrIndex),I.reaction(),delete K[this._ogmInfoKey]}})(f.b),function(){function F($,K){this.base=$,this.args=K,this.closestIdx=0,this.isDisposed=!1;for(var I=this.closest=this.root=$,pe=0;pe<this.args.length-1&&(I=I.get(K[pe]));pe++)this.closest=I;this.closestIdx=pe}return F.prototype.exists=function(){this.assertNotDisposed();var $=this.args.length;return this.closestIdx>=$-1&&this.closest.has(this.args[$-1])},F.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},F.prototype.set=function($){this.assertNotDisposed();for(var K=this.args.length,I=this.closest,pe=this.closestIdx;pe<K-1;pe++){var De=new Map;I.set(this.args[pe],De),I=De}this.closestIdx=K-1,this.closest=I,I.set(this.args[K-1],$)},F.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var $=this.args.length;this.closest.delete(this.args[$-1]);for(var K=this.root,I=[K],pe=0;pe<$-1;pe++)K=K.get(this.args[pe]),I.push(K);for(pe=I.length-1;pe>0;pe--)I[pe].size===0&&I[pe-1].delete(this.args[pe-1]);this.isDisposed=!0},F.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},F}(),Promise.resolve(),typeof queueMicrotask<"u"||c!==void 0&&c.nextTick}).call(this,n(155))},function(o,s,n){var c;(function(f,h,v){if(f){for(var m,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},x={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)g[111+N]="f"+N;for(N=0;N<=9;++N)g[N+96]=N.toString();fe.prototype.bind=function(W,ae,Y){var F=this;return W=W instanceof Array?W:[W],F._bindMultiple.call(F,W,ae,Y),F},fe.prototype.unbind=function(W,ae){return this.bind.call(this,W,function(){},ae)},fe.prototype.trigger=function(W,ae){var Y=this;return Y._directMap[W+":"+ae]&&Y._directMap[W+":"+ae]({},W),Y},fe.prototype.reset=function(){var W=this;return W._callbacks={},W._directMap={},W},fe.prototype.stopCallback=function(W,ae){if((" "+ae.className+" ").indexOf(" mousetrap ")>-1||Ee(ae,this.target))return!1;if("composedPath"in W&&typeof W.composedPath=="function"){var Y=W.composedPath()[0];Y!==W.target&&(ae=Y)}return ae.tagName=="INPUT"||ae.tagName=="SELECT"||ae.tagName=="TEXTAREA"||ae.isContentEditable},fe.prototype.handleKey=function(){var W=this;return W._handleKey.apply(W,arguments)},fe.addKeycodes=function(W){for(var ae in W)W.hasOwnProperty(ae)&&(g[ae]=W[ae]);m=null},fe.init=function(){var W=fe(h);for(var ae in W)ae.charAt(0)!=="_"&&(fe[ae]=function(Y){return function(){return W[Y].apply(W,arguments)}}(ae))},fe.init(),f.Mousetrap=fe,o.exports&&(o.exports=fe),(c=function(){return fe}.call(s,n,s,o))===void 0||(o.exports=c)}function j(W,ae,Y){W.addEventListener?W.addEventListener(ae,Y,!1):W.attachEvent("on"+ae,Y)}function R(W){if(W.type=="keypress"){var ae=String.fromCharCode(W.which);return W.shiftKey||(ae=ae.toLowerCase()),ae}return g[W.which]?g[W.which]:w[W.which]?w[W.which]:String.fromCharCode(W.which).toLowerCase()}function D(W){return W=="shift"||W=="ctrl"||W=="alt"||W=="meta"}function V(W,ae,Y){return Y||(Y=function(){if(!m)for(var F in m={},g)F>95&&F<112||g.hasOwnProperty(F)&&(m[g[F]]=F);return m}()[W]?"keydown":"keypress"),Y=="keypress"&&ae.length&&(Y="keydown"),Y}function ce(W,ae){var Y,F,$,K=[];for(Y=function(I){return I==="+"?["+"]:(I=I.replace(/\+{2}/g,"+plus")).split("+")}(W),$=0;$<Y.length;++$)F=Y[$],S[F]&&(F=S[F]),ae&&ae!="keypress"&&x[F]&&(F=x[F],K.push("shift")),D(F)&&K.push(F);return{key:F,modifiers:K,action:ae=V(F,K,ae)}}function Ee(W,ae){return W!==null&&W!==h&&(W===ae||Ee(W.parentNode,ae))}function fe(W){var ae=this;if(W=W||h,!(ae instanceof fe))return new fe(W);ae.target=W,ae._callbacks={},ae._directMap={};var Y,F={},$=!1,K=!1,I=!1;function pe(ee){ee=ee||{};var ve,Fe=!1;for(ve in F)ee[ve]?Fe=!0:F[ve]=0;Fe||(I=!1)}function De(ee,ve,Fe,Ze,ht,Ft){var bt,xt,tr,we,ne=[],me=Fe.type;if(!ae._callbacks[ee])return[];for(me=="keyup"&&D(ee)&&(ve=[ee]),bt=0;bt<ae._callbacks[ee].length;++bt)if(xt=ae._callbacks[ee][bt],(Ze||!xt.seq||F[xt.seq]==xt.level)&&me==xt.action&&(me=="keypress"&&!Fe.metaKey&&!Fe.ctrlKey||(tr=ve,we=xt.modifiers,tr.sort().join(",")===we.sort().join(",")))){var qe=!Ze&&xt.combo==ht,gt=Ze&&xt.seq==Ze&&xt.level==Ft;(qe||gt)&&ae._callbacks[ee].splice(bt,1),ne.push(xt)}return ne}function Q(ee,ve,Fe,Ze){ae.stopCallback(ve,ve.target||ve.srcElement,Fe,Ze)||ee(ve,Fe)===!1&&(function(ht){ht.preventDefault?ht.preventDefault():ht.returnValue=!1}(ve),function(ht){ht.stopPropagation?ht.stopPropagation():ht.cancelBubble=!0}(ve))}function se(ee){typeof ee.which!="number"&&(ee.which=ee.keyCode);var ve=R(ee);ve&&(ee.type!="keyup"||$!==ve?ae.handleKey(ve,function(Fe){var Ze=[];return Fe.shiftKey&&Ze.push("shift"),Fe.altKey&&Ze.push("alt"),Fe.ctrlKey&&Ze.push("ctrl"),Fe.metaKey&&Ze.push("meta"),Ze}(ee),ee):$=!1)}function he(ee,ve,Fe,Ze){function ht(tr){return function(){I=tr,++F[ee],clearTimeout(Y),Y=setTimeout(pe,1e3)}}function Ft(tr){Q(Fe,tr,ee),Ze!=="keyup"&&($=R(tr)),setTimeout(pe,10)}F[ee]=0;for(var bt=0;bt<ve.length;++bt){var xt=bt+1===ve.length?Ft:ht(Ze||ce(ve[bt+1]).action);be(ve[bt],xt,Ze,ee,bt)}}function be(ee,ve,Fe,Ze,ht){ae._directMap[ee+":"+Fe]=ve;var Ft,bt=(ee=ee.replace(/\s+/g," ")).split(" ");bt.length>1?he(ee,bt,ve,Fe):(Ft=ce(ee,Fe),ae._callbacks[Ft.key]=ae._callbacks[Ft.key]||[],De(Ft.key,Ft.modifiers,{type:Ft.action},Ze,ee,ht),ae._callbacks[Ft.key][Ze?"unshift":"push"]({callback:ve,modifiers:Ft.modifiers,action:Ft.action,seq:Ze,level:ht,combo:ee}))}ae._handleKey=function(ee,ve,Fe){var Ze,ht=De(ee,ve,Fe),Ft={},bt=0,xt=!1;for(Ze=0;Ze<ht.length;++Ze)ht[Ze].seq&&(bt=Math.max(bt,ht[Ze].level));for(Ze=0;Ze<ht.length;++Ze)if(ht[Ze].seq){if(ht[Ze].level!=bt)continue;xt=!0,Ft[ht[Ze].seq]=1,Q(ht[Ze].callback,Fe,ht[Ze].combo,ht[Ze].seq)}else xt||Q(ht[Ze].callback,Fe,ht[Ze].combo);var tr=Fe.type=="keypress"&&K;Fe.type!=I||D(ee)||tr||pe(Ft),K=xt&&Fe.type=="keydown"},ae._bindMultiple=function(ee,ve,Fe){for(var Ze=0;Ze<ee.length;++Ze)be(ee[Ze],ve,Fe)},j(W,"keypress",se),j(W,"keydown",se),j(W,"keyup",se)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(o,s,n){var c=n(36),f=n(37),h=n(32),v=n(40),m=n(66);o.exports=c?Object.defineProperties:function(g,w){h(g);for(var x,S=v(w),N=m(w),j=N.length,R=0;j>R;)f.f(g,x=N[R++],S[x]);return g}},function(o,s,n){var c=n(7),f=n(35),h=n(28),v=n(33),m=c.TypeError;o.exports=function(g,w){var x,S;if(w==="string"&&h(x=g.toString)&&!v(S=f(x,g))||h(x=g.valueOf)&&!v(S=f(x,g))||w!=="string"&&h(x=g.toString)&&!v(S=f(x,g)))return S;throw m("Can't convert object to primitive value")}},function(o,s,n){var c=n(7),f=n(28),h=n(92),v=c.WeakMap;o.exports=f(v)&&/native code/.test(h(v))},function(o,s,n){var c=n(136).IteratorPrototype,f=n(54),h=n(71),v=n(73),m=n(70),g=function(){return this};o.exports=function(w,x,S,N){var j=x+" Iterator";return w.prototype=f(c,{next:h(+!N,S)}),v(w,j,!1,!0),m[j]=g,w}},function(o,s,n){var c=n(7),f=n(28),h=c.String,v=c.TypeError;o.exports=function(m){if(typeof m=="object"||f(m))return m;throw v("Can't set "+h(m)+" as a prototype")}},function(o,s,n){var c=n(17),f=n(7),h=n(15),v=n(95),m=n(44),g=n(138),w=n(114),x=n(117),S=n(28),N=n(33),j=n(19),R=n(118),D=n(73),V=n(143);o.exports=function(ce,Ee,fe){var W=ce.indexOf("Map")!==-1,ae=ce.indexOf("Weak")!==-1,Y=W?"set":"add",F=f[ce],$=F&&F.prototype,K=F,I={},pe=function(ee){var ve=h($[ee]);m($,ee,ee=="add"?function(Fe){return ve(this,Fe===0?0:Fe),this}:ee=="delete"?function(Fe){return!(ae&&!N(Fe))&&ve(this,Fe===0?0:Fe)}:ee=="get"?function(Fe){return ae&&!N(Fe)?void 0:ve(this,Fe===0?0:Fe)}:ee=="has"?function(Fe){return!(ae&&!N(Fe))&&ve(this,Fe===0?0:Fe)}:function(Fe,Ze){return ve(this,Fe===0?0:Fe,Ze),this})};if(v(ce,!S(F)||!(ae||$.forEach&&!j(function(){new F().entries().next()}))))K=fe.getConstructor(Ee,ce,W,Y),g.enable();else if(v(ce,!0)){var De=new K,Q=De[Y](ae?{}:-0,1)!=De,se=j(function(){De.has(1)}),he=R(function(ee){new F(ee)}),be=!ae&&j(function(){for(var ee=new F,ve=5;ve--;)ee[Y](ve,ve);return!ee.has(-0)});he||((K=Ee(function(ee,ve){x(ee,$);var Fe=V(new F,ee,K);return ve!=null&&w(ve,Fe[Y],{that:Fe,AS_ENTRIES:W}),Fe})).prototype=$,$.constructor=K),(se||be)&&(pe("delete"),pe("has"),W&&pe("get")),(be||Q)&&pe(Y),ae&&$.clear&&delete $.clear}return I[ce]=K,c({global:!0,forced:K!=F},I),D(K,ce),ae||fe.setStrong(K,ce,W),K}},function(o,s,n){var c=n(19),f=n(33),h=n(50),v=n(176),m=Object.isExtensible,g=c(function(){});o.exports=g||v?function(w){return!!f(w)&&(!v||h(w)!="ArrayBuffer")&&(!m||m(w))}:m},function(o,s,n){var c=n(19);o.exports=c(function(){if(typeof ArrayBuffer=="function"){var f=new ArrayBuffer(8);Object.isExtensible(f)&&Object.defineProperty(f,"a",{value:8})}})},function(o,s,n){var c=n(19);o.exports=!c(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(o,s,n){var c=n(37).f,f=n(54),h=n(144),v=n(62),m=n(117),g=n(114),w=n(111),x=n(145),S=n(36),N=n(138).fastKey,j=n(56),R=j.set,D=j.getterFor;o.exports={getConstructor:function(V,ce,Ee,fe){var W=V(function(K,I){m(K,ae),R(K,{type:ce,index:f(null),first:void 0,last:void 0,size:0}),S||(K.size=0),I!=null&&g(I,K[fe],{that:K,AS_ENTRIES:Ee})}),ae=W.prototype,Y=D(ce),F=function(K,I,pe){var De,Q,se=Y(K),he=$(K,I);return he?he.value=pe:(se.last=he={index:Q=N(I,!0),key:I,value:pe,previous:De=se.last,next:void 0,removed:!1},se.first||(se.first=he),De&&(De.next=he),S?se.size++:K.size++,Q!=="F"&&(se.index[Q]=he)),K},$=function(K,I){var pe,De=Y(K),Q=N(I);if(Q!=="F")return De.index[Q];for(pe=De.first;pe;pe=pe.next)if(pe.key==I)return pe};return h(ae,{clear:function(){for(var K=Y(this),I=K.index,pe=K.first;pe;)pe.removed=!0,pe.previous&&(pe.previous=pe.previous.next=void 0),delete I[pe.index],pe=pe.next;K.first=K.last=void 0,S?K.size=0:this.size=0},delete:function(K){var I=this,pe=Y(I),De=$(I,K);if(De){var Q=De.next,se=De.previous;delete pe.index[De.index],De.removed=!0,se&&(se.next=Q),Q&&(Q.previous=se),pe.first==De&&(pe.first=Q),pe.last==De&&(pe.last=se),S?pe.size--:I.size--}return!!De},forEach:function(K){for(var I,pe=Y(this),De=v(K,arguments.length>1?arguments[1]:void 0);I=I?I.next:pe.first;)for(De(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(K){return!!$(this,K)}}),h(ae,Ee?{get:function(K){var I=$(this,K);return I&&I.value},set:function(K,I){return F(this,K===0?0:K,I)}}:{add:function(K){return F(this,K=K===0?0:K,K)}}),S&&c(ae,"size",{get:function(){return Y(this).size}}),W},setStrong:function(V,ce,Ee){var fe=ce+" Iterator",W=D(ce),ae=D(fe);w(V,ce,function(Y,F){R(this,{type:fe,target:Y,state:W(Y),kind:F,last:void 0})},function(){for(var Y=ae(this),F=Y.kind,$=Y.last;$&&$.removed;)$=$.previous;return Y.target&&(Y.last=$=$?$.next:Y.state.first)?F=="keys"?{value:$.key,done:!1}:F=="values"?{value:$.value,done:!1}:{value:[$.key,$.value],done:!1}:(Y.target=void 0,{value:void 0,done:!0})},Ee?"entries":"values",!Ee,!0),x(ce)}}},function(o,s,n){var c=n(116),f=n(98);o.exports=c?{}.toString:function(){return"[object "+f(this)+"]"}},function(o,s,n){var c=n(74).forEach,f=n(120)("forEach");o.exports=f?[].forEach:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}},function(o,s,n){var c=n(7),f=n(99),h=n(100),v=n(33),m=n(27)("species"),g=c.Array;o.exports=function(w){var x;return f(w)&&(x=w.constructor,(h(x)&&(x===g||f(x.prototype))||v(x)&&(x=x[m])===null)&&(x=void 0)),x===void 0?g:x}},function(o,s,n){var c=n(7);o.exports=c},function(o,s,n){var c=n(7),f=n(62),h=n(35),v=n(38),m=n(184),g=n(140),w=n(100),x=n(43),S=n(61),N=n(141),j=n(115),R=c.Array;o.exports=function(D){var V=v(D),ce=w(this),Ee=arguments.length,fe=Ee>1?arguments[1]:void 0,W=fe!==void 0;W&&(fe=f(fe,Ee>2?arguments[2]:void 0));var ae,Y,F,$,K,I,pe=j(V),De=0;if(!pe||this==R&&g(pe))for(ae=x(V),Y=ce?new this(ae):R(ae);ae>De;De++)I=W?fe(V[De],De):V[De],S(Y,De,I);else for(K=($=N(V,pe)).next,Y=ce?new this:[];!(F=h(K,$)).done;De++)I=W?m($,fe,[F.value,De],!0):F.value,S(Y,De,I);return Y.length=De,Y}},function(o,s,n){var c=n(32),f=n(142);o.exports=function(h,v,m,g){try{return g?v(c(m)[0],m[1]):v(m)}catch(w){f(h,"throw",w)}}},function(o,s,n){var c=n(32);o.exports=function(){var f=c(this),h="";return f.global&&(h+="g"),f.ignoreCase&&(h+="i"),f.multiline&&(h+="m"),f.dotAll&&(h+="s"),f.unicode&&(h+="u"),f.sticky&&(h+="y"),h}},function(o,s,n){var c=n(19),f=n(7).RegExp;o.exports=c(function(){var h=f(".","s");return!(h.dotAll&&h.exec(`
`)&&h.flags==="s")})},function(o,s,n){var c=n(19),f=n(7).RegExp;o.exports=c(function(){var h=f("(?<a>b)","g");return h.exec("b").groups.a!=="b"||"b".replace(h,"$<a>c")!=="bc"})},function(o,s,n){var c=n(17),f=n(15),h=n(55),v=n(38),m=n(43),g=n(41),w=n(19),x=n(189),S=n(120),N=n(190),j=n(191),R=n(65),D=n(192),V=[],ce=f(V.sort),Ee=f(V.push),fe=w(function(){V.sort(void 0)}),W=w(function(){V.sort(null)}),ae=S("sort"),Y=!w(function(){if(R)return R<70;if(!(N&&N>3)){if(j)return!0;if(D)return D<603;var F,$,K,I,pe="";for(F=65;F<76;F++){switch($=String.fromCharCode(F),F){case 66:case 69:case 70:case 72:K=3;break;case 68:case 71:K=4;break;default:K=2}for(I=0;I<47;I++)V.push({k:$+I,v:K})}for(V.sort(function(De,Q){return Q.v-De.v}),I=0;I<V.length;I++)$=V[I].k.charAt(0),pe.charAt(pe.length-1)!==$&&(pe+=$);return pe!=="DGBEFHACIJK"}});c({target:"Array",proto:!0,forced:fe||!W||!ae||!Y},{sort:function(F){F!==void 0&&h(F);var $=v(this);if(Y)return F===void 0?ce($):ce($,F);var K,I,pe=[],De=m($);for(I=0;I<De;I++)I in $&&Ee(pe,$[I]);for(x(pe,function(Q){return function(se,he){return he===void 0?-1:se===void 0?1:Q!==void 0?+Q(se,he)||0:g(se)>g(he)?1:-1}}(F)),K=pe.length,I=0;I<K;)$[I]=pe[I++];for(;I<De;)delete $[I++];return $}})},function(o,s,n){var c=n(113),f=Math.floor,h=function(g,w){var x=g.length,S=f(x/2);return x<8?v(g,w):m(g,h(c(g,0,S),w),h(c(g,S),w),w)},v=function(g,w){for(var x,S,N=g.length,j=1;j<N;){for(S=j,x=g[j];S&&w(g[S-1],x)>0;)g[S]=g[--S];S!==j++&&(g[S]=x)}return g},m=function(g,w,x,S){for(var N=w.length,j=x.length,R=0,D=0;R<N||D<j;)g[R+D]=R<N&&D<j?S(w[R],x[D])<=0?w[R++]:x[D++]:R<N?w[R++]:x[D++];return g};o.exports=h},function(o,s,n){var c=n(53).match(/firefox\/(\d+)/i);o.exports=!!c&&+c[1]},function(o,s,n){var c=n(53);o.exports=/MSIE|Trident/.test(c)},function(o,s,n){var c=n(53).match(/AppleWebKit\/(\d+)\./);o.exports=!!c&&+c[1]},function(o,s,n){var c=n(17),f=n(74).find,h=n(83),v="find",m=!0;v in[]&&Array(1).find(function(){m=!1}),c({target:"Array",proto:!0,forced:m},{find:function(g){return f(this,g,arguments.length>1?arguments[1]:void 0)}}),h(v)},function(o,s,n){var c=n(7),f=n(154),h=c.TypeError;o.exports=function(v){if(f(v))throw h("The method doesn't accept regular expressions");return v}},function(o,s,n){var c=n(27)("match");o.exports=function(f){var h=/./;try{"/./"[f](h)}catch{try{return h[c]=!1,"/./"[f](h)}catch{}}return!1}},function(o,s,n){var c=n(94).PROPER,f=n(19),h=n(160);o.exports=function(v){return f(function(){return!!h[v]()||"​᠎"[v]()!=="​᠎"||c&&h[v].name!==v})}},function(o,s,n){var c=n(15);o.exports=c(1 .valueOf)},function(o,s,n){var c=n(15),f=n(38),h=Math.floor,v=c("".charAt),m=c("".replace),g=c("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;o.exports=function(S,N,j,R,D,V){var ce=j+S.length,Ee=R.length,fe=x;return D!==void 0&&(D=f(D),fe=w),m(V,fe,function(W,ae){var Y;switch(v(ae,0)){case"$":return"$";case"&":return S;case"`":return g(N,0,j);case"'":return g(N,ce);case"<":Y=D[g(ae,1,-1)];break;default:var F=+ae;if(F===0)return W;if(F>Ee){var $=h(F/10);return $===0?W:$<=Ee?R[$-1]===void 0?v(ae,1):R[$-1]+v(ae,1):W}Y=R[F-1]}return Y===void 0?"":Y})}},function(o,s,n){var c=n(36),f=n(15),h=n(35),v=n(19),m=n(66),g=n(112),w=n(93),x=n(38),S=n(81),N=Object.assign,j=Object.defineProperty,R=f([].concat);o.exports=!N||v(function(){if(c&&N({b:1},N(j({},"a",{enumerable:!0,get:function(){j(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},V={},ce=Symbol(),Ee="abcdefghijklmnopqrst";return D[ce]=7,Ee.split("").forEach(function(fe){V[fe]=fe}),N({},D)[ce]!=7||m(N({},V)).join("")!=Ee})?function(D,V){for(var ce=x(D),Ee=arguments.length,fe=1,W=g.f,ae=w.f;Ee>fe;)for(var Y,F=S(arguments[fe++]),$=W?R(m(F),W(F)):m(F),K=$.length,I=0;K>I;)Y=$[I++],c&&!h(ae,F,Y)||(ce[Y]=F[Y]);return ce}:N},function(o,s,n){var c=n(7),f=n(15),h=n(55),v=n(33),m=n(34),g=n(101),w=c.Function,x=f([].concat),S=f([].join),N={},j=function(R,D,V){if(!m(N,D)){for(var ce=[],Ee=0;Ee<D;Ee++)ce[Ee]="a["+Ee+"]";N[D]=w("C,a","return new C("+S(ce,",")+")")}return N[D](R,V)};o.exports=w.bind||function(R){var D=h(this),V=D.prototype,ce=g(arguments,1),Ee=function(){var fe=x(ce,g(arguments));return this instanceof Ee?j(D,fe.length,fe):D.apply(R,fe)};return v(V)&&(Ee.prototype=V),Ee}},function(o,s,n){var c=n(34);o.exports=function(f){return f!==void 0&&(c(f,"value")||c(f,"writable"))}},function(o,s,n){var c=n(15),f=n(45),h=n(41),v=/"/g,m=c("".replace);o.exports=function(g,w,x,S){var N=h(f(g)),j="<"+w;return x!==""&&(j+=" "+x+'="'+m(h(S),v,"&quot;")+'"'),j+">"+N+"</"+w+">"}},function(o,s,n){var c=n(19);o.exports=function(f){return c(function(){var h=""[f]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(o,s,n){var c,f,h,v,m=n(17),g=n(64),w=n(7),x=n(46),S=n(35),N=n(205),j=n(44),R=n(144),D=n(97),V=n(73),ce=n(145),Ee=n(55),fe=n(28),W=n(33),ae=n(117),Y=n(92),F=n(114),$=n(118),K=n(156),I=n(163).set,pe=n(206),De=n(209),Q=n(210),se=n(165),he=n(211),be=n(56),ee=n(95),ve=n(27),Fe=n(212),Ze=n(126),ht=n(65),Ft=ve("species"),bt="Promise",xt=be.getterFor(bt),tr=be.set,we=be.getterFor(bt),ne=N&&N.prototype,me=N,qe=ne,gt=w.TypeError,et=w.document,kt=w.process,zt=se.f,Zt=zt,Gt=!!(et&&et.createEvent&&w.dispatchEvent),ze=fe(w.PromiseRejectionEvent),Yt="unhandledrejection",xe=!1,Ht=ee(bt,function(){var de=Y(me),Be=de!==String(me);if(!Be&&ht===66||g&&!qe.finally)return!0;if(ht>=51&&/native code/.test(de))return!1;var Nt=new me(function(Kt){Kt(1)}),wt=function(Kt){Kt(function(){},function(){})};return(Nt.constructor={})[Ft]=wt,!(xe=Nt.then(function(){})instanceof wt)||!Be&&Fe&&!ze}),yr=Ht||!$(function(de){me.all(de).catch(function(){})}),G=function(de){var Be;return!(!W(de)||!fe(Be=de.then))&&Be},pr=function(de,Be){if(!de.notified){de.notified=!0;var Nt=de.reactions;pe(function(){for(var wt=de.value,Kt=de.state==1,Tr=0;Nt.length>Tr;){var wn,In,dn,bn=Nt[Tr++],Xt=Kt?bn.ok:bn.fail,or=bn.resolve,dr=bn.reject,gr=bn.domain;try{Xt?(Kt||(de.rejection===2&&sr(de),de.rejection=1),Xt===!0?wn=wt:(gr&&gr.enter(),wn=Xt(wt),gr&&(gr.exit(),dn=!0)),wn===bn.promise?dr(gt("Promise-chain cycle")):(In=G(wn))?S(In,wn,or,dr):or(wn)):dr(wt)}catch(Xr){gr&&!dn&&gr.exit(),dr(Xr)}}de.reactions=[],de.notified=!1,Be&&!de.rejection&&$r(de)})}},Dr=function(de,Be,Nt){var wt,Kt;Gt?((wt=et.createEvent("Event")).promise=Be,wt.reason=Nt,wt.initEvent(de,!1,!0),w.dispatchEvent(wt)):wt={promise:Be,reason:Nt},!ze&&(Kt=w["on"+de])?Kt(wt):de===Yt&&Q("Unhandled promise rejection",Nt)},$r=function(de){S(I,w,function(){var Be,Nt=de.facade,wt=de.value;if(Zr(de)&&(Be=he(function(){Ze?kt.emit("unhandledRejection",wt,Nt):Dr(Yt,Nt,wt)}),de.rejection=Ze||Zr(de)?2:1,Be.error))throw Be.value})},Zr=function(de){return de.rejection!==1&&!de.parent},sr=function(de){S(I,w,function(){var Be=de.facade;Ze?kt.emit("rejectionHandled",Be):Dr("rejectionhandled",Be,de.value)})},un=function(de,Be,Nt){return function(wt){de(Be,wt,Nt)}},te=function(de,Be,Nt){de.done||(de.done=!0,Nt&&(de=Nt),de.value=Be,de.state=2,pr(de,!0))},Ne=function(de,Be,Nt){if(!de.done){de.done=!0,Nt&&(de=Nt);try{if(de.facade===Be)throw gt("Promise can't be resolved itself");var wt=G(Be);wt?pe(function(){var Kt={done:!1};try{S(wt,Be,un(Ne,Kt,de),un(te,Kt,de))}catch(Tr){te(Kt,Tr,de)}}):(de.value=Be,de.state=1,pr(de,!1))}catch(Kt){te({done:!1},Kt,de)}}};if(Ht&&(qe=(me=function(de){ae(this,qe),Ee(de),S(c,this);var Be=xt(this);try{de(un(Ne,Be),un(te,Be))}catch(Nt){te(Be,Nt)}}).prototype,(c=function(de){tr(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=R(qe,{then:function(de,Be){var Nt=we(this),wt=Nt.reactions,Kt=zt(K(this,me));return Kt.ok=!fe(de)||de,Kt.fail=fe(Be)&&Be,Kt.domain=Ze?kt.domain:void 0,Nt.parent=!0,wt[wt.length]=Kt,Nt.state!=0&&pr(Nt,!1),Kt.promise},catch:function(de){return this.then(void 0,de)}}),f=function(){var de=new c,Be=xt(de);this.promise=de,this.resolve=un(Ne,Be),this.reject=un(te,Be)},se.f=zt=function(de){return de===me||de===h?new f(de):Zt(de)},!g&&fe(N)&&ne!==Object.prototype)){v=ne.then,xe||(j(ne,"then",function(de,Be){var Nt=this;return new me(function(wt,Kt){S(v,Nt,wt,Kt)}).then(de,Be)},{unsafe:!0}),j(ne,"catch",qe.catch,{unsafe:!0}));try{delete ne.constructor}catch{}D&&D(ne,qe)}m({global:!0,wrap:!0,forced:Ht},{Promise:me}),V(me,bt,!1,!0),ce(bt),h=x(bt),m({target:bt,stat:!0,forced:Ht},{reject:function(de){var Be=zt(this);return S(Be.reject,void 0,de),Be.promise}}),m({target:bt,stat:!0,forced:g||Ht},{resolve:function(de){return De(g&&this===h?me:this,de)}}),m({target:bt,stat:!0,forced:yr},{all:function(de){var Be=this,Nt=zt(Be),wt=Nt.resolve,Kt=Nt.reject,Tr=he(function(){var wn=Ee(Be.resolve),In=[],dn=0,bn=1;F(de,function(Xt){var or=dn++,dr=!1;bn++,S(wn,Be,Xt).then(function(gr){dr||(dr=!0,In[or]=gr,--bn||wt(In))},Kt)}),--bn||wt(In)});return Tr.error&&Kt(Tr.value),Nt.promise},race:function(de){var Be=this,Nt=zt(Be),wt=Nt.reject,Kt=he(function(){var Tr=Ee(Be.resolve);F(de,function(wn){S(Tr,Be,wn).then(Nt.resolve,wt)})});return Kt.error&&wt(Kt.value),Nt.promise}})},function(o,s,n){var c=n(7);o.exports=c.Promise},function(o,s,n){var c,f,h,v,m,g,w,x,S=n(7),N=n(62),j=n(51).f,R=n(163).set,D=n(164),V=n(207),ce=n(208),Ee=n(126),fe=S.MutationObserver||S.WebKitMutationObserver,W=S.document,ae=S.process,Y=S.Promise,F=j(S,"queueMicrotask"),$=F&&F.value;$||(c=function(){var K,I;for(Ee&&(K=ae.domain)&&K.exit();f;){I=f.fn,f=f.next;try{I()}catch(pe){throw f?v():h=void 0,pe}}h=void 0,K&&K.enter()},D||Ee||ce||!fe||!W?!V&&Y&&Y.resolve?((w=Y.resolve(void 0)).constructor=Y,x=N(w.then,w),v=function(){x(c)}):Ee?v=function(){ae.nextTick(c)}:(R=N(R,S),v=function(){R(c)}):(m=!0,g=W.createTextNode(""),new fe(c).observe(g,{characterData:!0}),v=function(){g.data=m=!m})),o.exports=$||function(K){var I={fn:K,next:void 0};h&&(h.next=I),f||(f=I,v()),h=I}},function(o,s,n){var c=n(53),f=n(7);o.exports=/ipad|iphone|ipod/i.test(c)&&f.Pebble!==void 0},function(o,s,n){var c=n(53);o.exports=/web0s(?!.*chrome)/i.test(c)},function(o,s,n){var c=n(32),f=n(33),h=n(165);o.exports=function(v,m){if(c(v),f(m)&&m.constructor===v)return m;var g=h.f(v);return(0,g.resolve)(m),g.promise}},function(o,s,n){var c=n(7);o.exports=function(f,h){var v=c.console;v&&v.error&&(arguments.length==1?v.error(f):v.error(f,h))}},function(o,s){o.exports=function(n){try{return{error:!1,value:n()}}catch(c){return{error:!0,value:c}}}},function(o,s){o.exports=typeof window=="object"},function(o,s,n){var c=n(36),f=n(15),h=n(66),v=n(40),m=f(n(93).f),g=f([].push),w=function(x){return function(S){for(var N,j=v(S),R=h(j),D=R.length,V=0,ce=[];D>V;)N=R[V++],c&&!m(j,N)||g(ce,x?[N,j[N]]:j[N]);return ce}};o.exports={entries:w(!0),values:w(!1)}},function(o,s,n){var c=n(38),f=n(67),h=n(43);o.exports=function(v){for(var m=c(this),g=h(m),w=arguments.length,x=f(w>1?arguments[1]:void 0,g),S=w>2?arguments[2]:void 0,N=S===void 0?g:f(S,g);N>x;)m[x++]=v;return m}},function(o,s,n){n.r(s),n.d(s,"observer",function(){return vi}),n.d(s,"LogicFlow",function(){return Og}),n.d(s,"h",function(){return xe.g}),n.d(s,"LogicFlowUtil",function(){return c}),n.d(s,"BaseNode",function(){return da}),n.d(s,"RectNode",function(){return yy}),n.d(s,"CircleNode",function(){return _y}),n.d(s,"PolygonNode",function(){return Sy}),n.d(s,"DiamondNode",function(){return Ny}),n.d(s,"EllipseNode",function(){return Dy}),n.d(s,"TextNode",function(){return Ly}),n.d(s,"HtmlNode",function(){return Uy}),n.d(s,"BaseEdge",function(){return sf}),n.d(s,"LineEdge",function(){return tg}),n.d(s,"PolylineEdge",function(){return ag}),n.d(s,"BezierEdge",function(){return lg}),n.d(s,"Arrow",function(){return qS}),n.d(s,"BaseEdgeModel",function(){return Vu}),n.d(s,"BezierEdgeModel",function(){return Sv}),n.d(s,"LineEdgeModel",function(){return $o}),n.d(s,"PolylineEdgeModel",function(){return Vn}),n.d(s,"BaseNodeModel",function(){return fa}),n.d(s,"CircleNodeModel",function(){return Mv}),n.d(s,"DiamondNodeModel",function(){return Iv}),n.d(s,"EllipseNodeModel",function(){return Gv}),n.d(s,"PolygonNodeModel",function(){return Wv}),n.d(s,"RectNodeModel",function(){return qv}),n.d(s,"TextNodeModel",function(){return ey}),n.d(s,"HtmlNodeModel",function(){return ny}),n.d(s,"EditConfigModel",function(){return El}),n.d(s,"GraphModel",function(){return jt}),n.d(s,"SnaplineModel",function(){return f0}),n.d(s,"Keyboard",function(){return Z0}),n.d(s,"get",function(){return tb}),n.d(s,"defaults",function(){return nb}),n.d(s,"ElementState",function(){return zr}),n.d(s,"ModelType",function(){return Pr}),n.d(s,"ElementType",function(){return xn}),n.d(s,"EventType",function(){return ir}),n.d(s,"formateAnchorConnectValidateData",function(){return Hu});var c={};n.r(c),n.d(c,"createUuid",function(){return fi}),n.d(c,"refreshGraphId",function(){return Td}),n.d(c,"createDrag",function(){return nr}),n.d(c,"StepDrag",function(){return Yr});var f=n(1),h=n(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!f.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var v=n(42),m=Object(v.b)("observerBatching");function g(t){t()}var w=!1;function x(){return w}function S(t){return Object(f.t)(t)}var N,j=1e4,R=new Set;function D(){N===void 0&&(N=setTimeout(V,1e4))}function V(){N=void 0;var t=Date.now();R.forEach(function(r){var a=r.current;a&&t>=a.cleanAt&&(a.reaction.dispose(),r.current=null,R.delete(r))}),R.size>0&&D()}var ce=!1,Ee=[],fe={};function W(t){return"observer"+t}function ae(t,r,a){r===void 0&&(r="observed"),a===void 0&&(a=fe),x();var u,d=function(O){return function(){ce?Ee.push(O):O()}}((a.useForceUpdate||v.d)()),l=h.d.useRef(null);if(!l.current){var p=new f.c(W(r),function(){y.mounted?d():(p.dispose(),l.current=null)}),y=function(O){return{cleanAt:Date.now()+j,reaction:O}}(p);l.current=y,u=l,R.add(u),D()}var b=l.current.reaction;return h.d.useDebugValue(b,S),h.d.useEffect(function(){var O;return O=l,R.delete(O),l.current?l.current.mounted=!0:(l.current={reaction:new f.c(W(r),function(){d()}),cleanAt:1/0},d()),function(){l.current.reaction.dispose(),l.current=null}},[]),function(O){ce=!0,Ee=[];try{var T=O();ce=!1;var M=Ee.length>0?Ee:void 0;return h.d.useLayoutEffect(function(){M&&M.forEach(function(C){return C()})},[M]),T}finally{ce=!1}}(function(){var O,T;if(b.track(function(){try{O=t()}catch(M){T=M}}),T)throw T;return O})}var Y=function(){return Y=Object.assign||function(t){for(var r,a=1,u=arguments.length;a<u;a++)for(var d in r=arguments[a])Object.prototype.hasOwnProperty.call(r,d)&&(t[d]=r[d]);return t},Y.apply(this,arguments)};function F(t,r){var a,u,d,l=Y({forwardRef:!1},r),p=t.displayName||t.name,y=function(b,O){return ae(function(){return t(b,O)},p)};return y.displayName=p,a=l.forwardRef?Object(h.f)(Object(h.e)(y)):Object(h.f)(y),u=t,d=a,Object.keys(u).forEach(function(b){$[b]||Object.defineProperty(d,b,Object.getOwnPropertyDescriptor(u,b))}),a.displayName=p,a}var $={$$typeof:!0,render:!0,compare:!0,type:!0};function K(t){var r=t.children,a=t.render,u=r||a;return typeof u!="function"?null:ae(u)}function I(t,r,a,u,d){var l=r==="children"?"render":"children",p=typeof t[r]=="function",y=typeof t[l]=="function";return p&&y?new Error("MobX Observer: Do not use children and render in the same time in`"+a):p||y?null:new Error("Invalid prop `"+d+"` of type `"+typeof t[r]+"` supplied to `"+a+"`, expected `function`.")}K.propTypes={children:I,render:I},K.displayName="Observer";var pe;(pe=h.g)||(pe=g),Object(f.n)({reactionScheduler:pe}),Object(v.a)()[m]=!0;var De=0,Q={};function se(t){return Q[t]||(Q[t]=function(r){if(typeof Symbol=="function")return Symbol(r);var a="__$mobx-react "+r+" ("+De+")";return De++,a}(t)),Q[t]}function he(t,r){if(be(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),u=Object.keys(r);if(a.length!==u.length)return!1;for(var d=0;d<a.length;d++)if(!Object.hasOwnProperty.call(r,a[d])||!be(t[a[d]],r[a[d]]))return!1;return!0}function be(t,r){return t===r?t!==0||1/t==1/r:t!=t&&r!=r}function ee(t,r,a){Object.hasOwnProperty.call(t,r)?t[r]=a:Object.defineProperty(t,r,{enumerable:!1,configurable:!0,writable:!0,value:a})}var ve=se("patchMixins"),Fe=se("patchedDefinition");function Ze(t,r){for(var a=this,u=arguments.length,d=new Array(u>2?u-2:0),l=2;l<u;l++)d[l-2]=arguments[l];r.locks++;try{var p;return t!=null&&(p=t.apply(this,d)),p}finally{r.locks--,r.locks===0&&r.methods.forEach(function(y){y.apply(a,d)})}}function ht(t,r){return function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];Ze.call.apply(Ze,[this,t,r].concat(u))}}function Ft(t,r,a){var u=function(y,b){var O=y[ve]=y[ve]||{},T=O[b]=O[b]||{};return T.locks=T.locks||0,T.methods=T.methods||[],T}(t,r);u.methods.indexOf(a)<0&&u.methods.push(a);var d=Object.getOwnPropertyDescriptor(t,r);if(!d||!d[Fe]){var l=t[r],p=bt(t,r,d?d.enumerable:void 0,u,l);Object.defineProperty(t,r,p)}}function bt(t,r,a,u,d){var l,p=ht(d,u);return(l={})[Fe]=!0,l.get=function(){return p},l.set=function(y){if(this===t)p=ht(y,u);else{var b=bt(this,r,a,u,y);Object.defineProperty(this,r,b)}},l.configurable=!0,l.enumerable=a,l}var xt=f.a||"$mobx",tr=se("isMobXReactObserver"),we=se("isUnmounted"),ne=se("skipRender"),me=se("isForcingUpdate");function qe(t){var r=t.prototype;if(t[tr]?gt(r):t[tr]=!0,r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==h.b)if(r.shouldComponentUpdate){if(r.shouldComponentUpdate!==kt)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else r.shouldComponentUpdate=kt;zt(r,"props"),zt(r,"state");var a=r.render;return r.render=function(){return et.call(this,a)},Ft(r,"componentWillUnmount",function(){var u;(u=this.render[xt])===null||u===void 0||u.dispose(),this[we]=!0,!this.render[xt]&&gt(this)}),t}function gt(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function et(t){var r=this;ee(this,ne,!1),ee(this,me,!1);var a=gt(this),u=t.bind(this),d=!1,l=new f.c(a+".render()",function(){if(!d&&(d=!0,r[we]!==!0)){var y=!0;try{ee(r,me,!0),r[ne]||h.a.prototype.forceUpdate.call(r),y=!1}finally{ee(r,me,!1),y&&l.dispose()}}});function p(){d=!1;var y=void 0,b=void 0;if(l.track(function(){try{b=Object(f.d)(!1,u)}catch(O){y=O}}),y)throw y;return b}return l.reactComponent=this,p[xt]=l,this.render=p,p.call(this)}function kt(t,r){return this.state!==r||!he(this.props,t)}function zt(t,r){var a=se("reactProp_"+r+"_valueHolder"),u=se("reactProp_"+r+"_atomHolder");function d(){return this[u]||ee(this,u,Object(f.o)("reactive "+r)),this[u]}Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){var l=!1;return f.f&&f.e&&(l=Object(f.f)(!0)),d.call(this).reportObserved(),f.f&&f.e&&Object(f.e)(l),this[a]},set:function(l){this[me]||he(this[a],l)?ee(this,a,l):(ee(this,a,l),ee(this,ne,!0),d.call(this).reportChanged(),ee(this,ne,!1))}})}var Zt=typeof Symbol=="function"&&Symbol.for,Gt=Zt?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(t){return null}).$$typeof,ze=Zt?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(t){return null}).$$typeof;function Yt(t){if(t.isMobxInjector,ze&&t.$$typeof===ze)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Gt&&t.$$typeof===Gt){var r=t.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var a=arguments;return Object(h.c)(K,null,function(){return r.apply(void 0,a)})})}return typeof t!="function"||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(h.a,t)?qe(t):F(t)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!f.C)throw new Error("mobx-react requires mobx to be available");var xe=n(0);n(3),n(60),n(2),n(6),n(4),n(11),n(39),n(29),n(22),n(20),n(5),n(23),n(21),n(25),n(8),n(9),n(16),n(24),n(18),n(188),n(193),n(103),n(152),n(153);var Ht=function(t,r){for(var a=-1,u=t==null?0:t.length,d=Array(u);++a<u;)d[a]=r(t[a],a,t);return d},yr=function(){this.__data__=[],this.size=0},G=function(t,r){return t===r||t!=t&&r!=r},pr=function(t,r){for(var a=t.length;a--;)if(G(t[a][0],r))return a;return-1},Dr=Array.prototype.splice,$r=function(t){var r=this.__data__,a=pr(r,t);return!(a<0)&&(a==r.length-1?r.pop():Dr.call(r,a,1),--this.size,!0)},Zr=function(t){var r=this.__data__,a=pr(r,t);return a<0?void 0:r[a][1]},sr=function(t){return pr(this.__data__,t)>-1},un=function(t,r){var a=this.__data__,u=pr(a,t);return u<0?(++this.size,a.push([t,r])):a[u][1]=r,this};function te(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}te.prototype.clear=yr,te.prototype.delete=$r,te.prototype.get=Zr,te.prototype.has=sr,te.prototype.set=un;var Ne=te,de=function(){this.__data__=new Ne,this.size=0},Be=function(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a},Nt=function(t){return this.__data__.get(t)},wt=function(t){return this.__data__.has(t)},Kt=n(31),Tr=Kt.a.Symbol,wn=Object.prototype,In=wn.hasOwnProperty,dn=wn.toString,bn=Tr?Tr.toStringTag:void 0,Xt=function(t){var r=In.call(t,bn),a=t[bn];try{t[bn]=void 0;var u=!0}catch{}var d=dn.call(t);return u&&(r?t[bn]=a:delete t[bn]),d},or=Object.prototype.toString,dr=function(t){return or.call(t)},gr=Tr?Tr.toStringTag:void 0,Xr=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":gr&&gr in Object(t)?Xt(t):dr(t)},Cr=function(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")},ii,Go=function(t){if(!Cr(t))return!1;var r=Xr(t);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},Uo=Kt.a["__core-js_shared__"],Wi=(ii=/[^.]+$/.exec(Uo&&Uo.keys&&Uo.keys.IE_PROTO||""))?"Symbol(src)_1."+ii:"",Yc=function(t){return!!Wi&&Wi in t},hu=Function.prototype.toString,So=function(t){if(t!=null){try{return hu.call(t)}catch{}try{return t+""}catch{}}return""},hs=/^\[object .+?Constructor\]$/,qt=Function.prototype,vs=Object.prototype,tn=qt.toString,ys=vs.hasOwnProperty,lo=RegExp("^"+tn.call(ys).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fo=function(t){return!(!Cr(t)||Yc(t))&&(Go(t)?lo:hs).test(So(t))},gs=function(t,r){return t==null?void 0:t[r]},zo=function(t,r){var a=gs(t,r);return fo(a)?a:void 0},bi=zo(Kt.a,"Map"),Co=zo(Object,"create"),vu=function(){this.__data__=Co?Co(null):{},this.size=0},ms=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},$c=Object.prototype.hasOwnProperty,xa=function(t){var r=this.__data__;if(Co){var a=r[t];return a==="__lodash_hash_undefined__"?void 0:a}return $c.call(r,t)?r[t]:void 0},Kc=Object.prototype.hasOwnProperty,bs=function(t){var r=this.__data__;return Co?r[t]!==void 0:Kc.call(r,t)},qc=function(t,r){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Co&&r===void 0?"__lodash_hash_undefined__":r,this};function ai(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}ai.prototype.clear=vu,ai.prototype.delete=ms,ai.prototype.get=xa,ai.prototype.has=bs,ai.prototype.set=qc;var _s=ai,Ho=function(){this.size=0,this.__data__={hash:new _s,map:new(bi||Ne),string:new _s}},Zc=function(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null},Sa=function(t,r){var a=t.__data__;return Zc(r)?a[typeof r=="string"?"string":"hash"]:a.map},yu=function(t){var r=Sa(this,t).delete(t);return this.size-=r?1:0,r},gu=function(t){return Sa(this,t).get(t)},Jc=function(t){return Sa(this,t).has(t)},Es=function(t,r){var a=Sa(this,t),u=a.size;return a.set(t,r),this.size+=a.size==u?0:1,this};function _i(t){var r=-1,a=t==null?0:t.length;for(this.clear();++r<a;){var u=t[r];this.set(u[0],u[1])}}_i.prototype.clear=Ho,_i.prototype.delete=yu,_i.prototype.get=gu,_i.prototype.has=Jc,_i.prototype.set=Es;var Ei=_i,ws=function(t,r){var a=this.__data__;if(a instanceof Ne){var u=a.__data__;if(!bi||u.length<199)return u.push([t,r]),this.size=++a.size,this;a=this.__data__=new Ei(u)}return a.set(t,r),this.size=a.size,this};function wi(t){var r=this.__data__=new Ne(t);this.size=r.size}wi.prototype.clear=de,wi.prototype.delete=Be,wi.prototype.get=Nt,wi.prototype.has=wt,wi.prototype.set=ws;var po=wi,mu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Os=function(t){return this.__data__.has(t)};function Yi(t){var r=-1,a=t==null?0:t.length;for(this.__data__=new Ei;++r<a;)this.add(t[r])}Yi.prototype.add=Yi.prototype.push=mu,Yi.prototype.has=Os;var Oi=Yi,bu=function(t,r){for(var a=-1,u=t==null?0:t.length;++a<u;)if(r(t[a],a,t))return!0;return!1},_u=function(t,r){return t.has(r)},Ta=function(t,r,a,u,d,l){var p=1&a,y=t.length,b=r.length;if(y!=b&&!(p&&b>y))return!1;var O=l.get(t),T=l.get(r);if(O&&T)return O==r&&T==t;var M=-1,C=!0,q=2&a?new Oi:void 0;for(l.set(t,r),l.set(r,t);++M<y;){var ie=t[M],ye=r[M];if(u)var Me=p?u(ye,ie,M,r,t,l):u(ie,ye,M,t,r,l);if(Me!==void 0){if(Me)continue;C=!1;break}if(q){if(!bu(r,function(Re,Ye){if(!_u(q,Ye)&&(ie===Re||d(ie,Re,a,u,l)))return q.push(Ye)})){C=!1;break}}else if(ie!==ye&&!d(ie,ye,a,u,l)){C=!1;break}}return l.delete(t),l.delete(r),C},$i=Kt.a.Uint8Array,xs=function(t){var r=-1,a=Array(t.size);return t.forEach(function(u,d){a[++r]=[d,u]}),a},Qc=function(t){var r=-1,a=Array(t.size);return t.forEach(function(u){a[++r]=u}),a},Ss=Tr?Tr.prototype:void 0,Yn=Ss?Ss.valueOf:void 0,An=function(t,r,a,u,d,l,p){switch(a){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!l(new $i(t),new $i(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return G(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var y=xs;case"[object Set]":var b=1&u;if(y||(y=Qc),t.size!=r.size&&!b)return!1;var O=p.get(t);if(O)return O==r;u|=2,p.set(t,r);var T=Ta(y(t),y(r),u,d,l,p);return p.delete(t),T;case"[object Symbol]":if(Yn)return Yn.call(t)==Yn.call(r)}return!1},ho=function(t,r){for(var a=-1,u=r.length,d=t.length;++a<u;)t[d+a]=r[a];return t},Gn=Array.isArray,Ts=function(t,r,a){var u=r(t);return Gn(t)?u:ho(u,a(t))},Eu=function(t,r){for(var a=-1,u=t==null?0:t.length,d=0,l=[];++a<u;){var p=t[a];r(p,a,t)&&(l[d++]=p)}return l},wu=function(){return[]},el=Object.prototype.propertyIsEnumerable,ui=Object.getOwnPropertySymbols,ro=ui?function(t){return t==null?[]:(t=Object(t),Eu(ui(t),function(r){return el.call(t,r)}))}:wu,tl=function(t,r){for(var a=-1,u=Array(t);++a<t;)u[a]=r(a);return u},To=function(t){return t!=null&&typeof t=="object"},vo=function(t){return To(t)&&Xr(t)=="[object Arguments]"},As=Object.prototype,Ps=As.hasOwnProperty,rl=As.propertyIsEnumerable,Aa=vo(function(){return arguments}())?vo:function(t){return To(t)&&Ps.call(t,"callee")&&!rl.call(t,"callee")},Xo=Aa,yo=n(48),nl=/^(?:0|[1-9]\d*)$/,$n=function(t,r){var a=typeof t;return!!(r=r??9007199254740991)&&(a=="number"||a!="symbol"&&nl.test(t))&&t>-1&&t%1==0&&t<r},Ao=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Rr={};Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var no=function(t){return To(t)&&Ao(t.length)&&!!Rr[Xr(t)]},Vo=function(t){return function(r){return t(r)}},Ln=n(49),Pa=Ln.a&&Ln.a.isTypedArray,Ki=Pa?Vo(Pa):no,Io=Object.prototype.hasOwnProperty,Kn=function(t,r){var a=Gn(t),u=!a&&Xo(t),d=!a&&!u&&Object(yo.a)(t),l=!a&&!u&&!d&&Ki(t),p=a||u||d||l,y=p?tl(t.length,String):[],b=y.length;for(var O in t)!r&&!Io.call(t,O)||p&&(O=="length"||d&&(O=="offset"||O=="parent")||l&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||$n(O,b))||y.push(O);return y},Ou=Object.prototype,qi=function(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||Ou)},Po=function(t,r){return function(a){return t(r(a))}},Ns=Po(Object.keys,Object),ol=Object.prototype.hasOwnProperty,xu=function(t){if(!qi(t))return Ns(t);var r=[];for(var a in Object(t))ol.call(t,a)&&a!="constructor"&&r.push(a);return r},_n=function(t){return t!=null&&Ao(t.length)&&!Go(t)},xi=function(t){return _n(t)?Kn(t):xu(t)},Na=function(t){return Ts(t,xi,ro)},Pn=Object.prototype.hasOwnProperty,js=function(t,r,a,u,d,l){var p=1&a,y=Na(t),b=y.length;if(b!=Na(r).length&&!p)return!1;for(var O=b;O--;){var T=y[O];if(!(p?T in r:Pn.call(r,T)))return!1}var M=l.get(t),C=l.get(r);if(M&&C)return M==r&&C==t;var q=!0;l.set(t,r),l.set(r,t);for(var ie=p;++O<b;){var ye=t[T=y[O]],Me=r[T];if(u)var Re=p?u(Me,ye,T,r,t,l):u(ye,Me,T,t,r,l);if(!(Re===void 0?ye===Me||d(ye,Me,a,u,l):Re)){q=!1;break}ie||(ie=T=="constructor")}if(q&&!ie){var Ye=t.constructor,lt=r.constructor;Ye==lt||!("constructor"in t)||!("constructor"in r)||typeof Ye=="function"&&Ye instanceof Ye&&typeof lt=="function"&&lt instanceof lt||(q=!1)}return l.delete(t),l.delete(r),q},Zi=zo(Kt.a,"DataView"),Wo=zo(Kt.a,"Promise"),ja=zo(Kt.a,"Set"),Lo=zo(Kt.a,"WeakMap"),Su="[object Map]",Nn="[object Promise]",oo="[object Set]",io="[object WeakMap]",Ji="[object DataView]",Tu=So(Zi),Au=So(bi),Ms=So(Wo),Rs=So(ja),Ma=So(Lo),si=Xr;(Zi&&si(new Zi(new ArrayBuffer(1)))!=Ji||bi&&si(new bi)!=Su||Wo&&si(Wo.resolve())!=Nn||ja&&si(new ja)!=oo||Lo&&si(new Lo)!=io)&&(si=function(t){var r=Xr(t),a=r=="[object Object]"?t.constructor:void 0,u=a?So(a):"";if(u)switch(u){case Tu:return Ji;case Au:return Su;case Ms:return Nn;case Rs:return oo;case Ma:return io}return r});var _=si,E="[object Arguments]",P="[object Array]",L="[object Object]",Z=Object.prototype.hasOwnProperty,Ae=function(t,r,a,u,d,l){var p=Gn(t),y=Gn(r),b=p?P:_(t),O=y?P:_(r),T=(b=b==E?L:b)==L,M=(O=O==E?L:O)==L,C=b==O;if(C&&Object(yo.a)(t)){if(!Object(yo.a)(r))return!1;p=!0,T=!1}if(C&&!T)return l||(l=new po),p||Ki(t)?Ta(t,r,a,u,d,l):An(t,r,b,a,u,d,l);if(!(1&a)){var q=T&&Z.call(t,"__wrapped__"),ie=M&&Z.call(r,"__wrapped__");if(q||ie){var ye=q?t.value():t,Me=ie?r.value():r;return l||(l=new po),d(ye,Me,a,u,l)}}return!!C&&(l||(l=new po),js(t,r,a,u,d,l))},Xe=function t(r,a,u,d,l){return r===a||(r==null||a==null||!To(r)&&!To(a)?r!=r&&a!=a:Ae(r,a,u,d,t,l))},mt=function(t,r,a,u){var d=a.length,l=d,p=!u;if(t==null)return!l;for(t=Object(t);d--;){var y=a[d];if(p&&y[2]?y[1]!==t[y[0]]:!(y[0]in t))return!1}for(;++d<l;){var b=(y=a[d])[0],O=t[b],T=y[1];if(p&&y[2]){if(O===void 0&&!(b in t))return!1}else{var M=new po;if(u)var C=u(O,T,b,t,r,M);if(!(C===void 0?Xe(T,O,3,u,M):C))return!1}}return!0},Vt=function(t){return t==t&&!Cr(t)},Ar=function(t){for(var r=xi(t),a=r.length;a--;){var u=r[a],d=t[u];r[a]=[u,d,Vt(d)]}return r},cr=function(t,r){return function(a){return a!=null&&a[t]===r&&(r!==void 0||t in Object(a))}},Gr=function(t){var r=Ar(t);return r.length==1&&r[0][2]?cr(r[0][0],r[0][1]):function(a){return a===t||mt(a,t,r)}},wr=function(t){return typeof t=="symbol"||To(t)&&Xr(t)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ao=/^\w*$/,rn=function(t,r){if(Gn(t))return!1;var a=typeof t;return!(a!="number"&&a!="symbol"&&a!="boolean"&&t!=null&&!wr(t))||ao.test(t)||!Ur.test(t)||r!=null&&t in Object(r)};function qn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var a=function(){var u=arguments,d=r?r.apply(this,u):u[0],l=a.cache;if(l.has(d))return l.get(d);var p=t.apply(this,u);return a.cache=l.set(d,p)||l,p};return a.cache=new(qn.Cache||Ei),a}qn.Cache=Ei;var Qi=qn,il=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ra=/\\(\\)?/g,ea=function(t){var r=Qi(t,function(u){return a.size===500&&a.clear(),u}),a=r.cache;return r}(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(il,function(a,u,d,l){r.push(d?l.replace(Ra,"$1"):u||a)}),r}),Si=Tr?Tr.prototype:void 0,ta=Si?Si.toString:void 0,On=function t(r){if(typeof r=="string")return r;if(Gn(r))return Ht(r,t)+"";if(wr(r))return ta?ta.call(r):"";var a=r+"";return a=="0"&&1/r==-1/0?"-0":a},ka=function(t){return t==null?"":On(t)},ci=function(t,r){return Gn(t)?t:rn(t,r)?[t]:ea(ka(t))},ra=function(t){if(typeof t=="string"||wr(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r},Pu=function(t,r){for(var a=0,u=(r=ci(r,t)).length;t!=null&&a<u;)t=t[ra(r[a++])];return a&&a==u?t:void 0},al=function(t,r,a){var u=t==null?void 0:Pu(t,r);return u===void 0?a:u},Gf=function(t,r){return t!=null&&r in Object(t)},Uf=function(t,r,a){for(var u=-1,d=(r=ci(r,t)).length,l=!1;++u<d;){var p=ra(r[u]);if(!(l=t!=null&&a(t,p)))break;t=t[p]}return l||++u!=d?l:!!(d=t==null?0:t.length)&&Ao(d)&&$n(p,d)&&(Gn(t)||Xo(t))},ul=function(t,r){return t!=null&&Uf(t,r,Gf)},zf=function(t,r){return rn(t)&&Vt(r)?cr(ra(t),r):function(a){var u=al(a,t);return u===void 0&&u===r?ul(a,t):Xe(r,u,3)}},ks=function(t){return t},Hf=function(t){return function(r){return r==null?void 0:r[t]}},Xf=function(t){return function(r){return Pu(r,t)}},Da=function(t){return rn(t)?Hf(ra(t)):Xf(t)},sl=function(t){return typeof t=="function"?t:t==null?ks:typeof t=="object"?Gn(t)?zf(t[0],t[1]):Gr(t):Da(t)},Ds=function(t){return function(r,a,u){for(var d=-1,l=Object(r),p=u(r),y=p.length;y--;){var b=p[t?y:++d];if(a(l[b],b,l)===!1)break}return r}}(),Nu=function(t,r){return function(a,u){if(a==null)return a;if(!_n(a))return t(a,u);for(var d=a.length,l=r?d:-1,p=Object(a);(r?l--:++l<d)&&u(p[l],l,p)!==!1;);return a}}(function(t,r){return t&&Ds(t,r,xi)}),Ah=function(t,r){var a=-1,u=_n(t)?Array(t.length):[];return Nu(t,function(d,l,p){u[++a]=r(d,l,p)}),u},Cs=function(t,r){return(Gn(t)?Ht:Ah)(t,sl(r))};Object(f.n)({isolateGlobalState:!0});var Is=function(){try{var t=zo(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ju=function(t,r,a){r=="__proto__"&&Is?Is(t,r,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[r]=a},Ph=Object.prototype.hasOwnProperty,Ls=function(t,r,a){var u=t[r];Ph.call(t,r)&&G(u,a)&&(a!==void 0||r in t)||ju(t,r,a)},Ca=function(t,r,a,u){var d=!a;a||(a={});for(var l=-1,p=r.length;++l<p;){var y=r[l],b=u?u(a[y],t[y],y,a,t):void 0;b===void 0&&(b=t[y]),d?ju(a,y,b):Ls(a,y,b)}return a},cl=function(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)},Vf=Math.max,Fs=function(t,r,a){return r=Vf(r===void 0?t.length-1:r,0),function(){for(var u=arguments,d=-1,l=Vf(u.length-r,0),p=Array(l);++d<l;)p[d]=u[r+d];d=-1;for(var y=Array(r+1);++d<r;)y[d]=u[d];return y[r]=a(p),cl(t,this,y)}},Wf=function(t){return function(){return t}},Yf=Is?function(t,r){return Is(t,"toString",{configurable:!0,enumerable:!1,value:Wf(r),writable:!0})}:ks,ll=Date.now,Nh=function(t){var r=0,a=0;return function(){var u=ll(),d=16-(u-a);if(a=u,d>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},Mu=Nh(Yf),jh=function(t,r){return Mu(Fs(t,r,ks),t+"")},Mh=function(t,r,a){if(!Cr(a))return!1;var u=typeof r;return!!(u=="number"?_n(a)&&$n(r,a.length):u=="string"&&r in a)&&G(a[r],t)},$f=function(t){return jh(function(r,a){var u=-1,d=a.length,l=d>1?a[d-1]:void 0,p=d>2?a[2]:void 0;for(l=t.length>3&&typeof l=="function"?(d--,l):void 0,p&&Mh(a[0],a[1],p)&&(l=d<3?void 0:l,d=1),r=Object(r);++u<d;){var y=a[u];y&&t(r,y,u,l)}return r})},Rh=Object.prototype.hasOwnProperty,Zn=$f(function(t,r){if(qi(r)||_n(r))Ca(r,xi(r),t);else for(var a in r)Rh.call(r,a)&&Ls(t,a,r[a])}),kh=function(t,r,a,u){if(!Cr(t))return t;for(var d=-1,l=(r=ci(r,t)).length,p=l-1,y=t;y!=null&&++d<l;){var b=ra(r[d]),O=a;if(b==="__proto__"||b==="constructor"||b==="prototype")return t;if(d!=p){var T=y[b];(O=u?u(T,b,y):void 0)===void 0&&(O=Cr(T)?T:$n(r[d+1])?[]:{})}Ls(y,b,O),y=y[b]}return t},Dh=function(t,r,a){for(var u=-1,d=r.length,l={};++u<d;){var p=r[u],y=Pu(t,p);a(y,p)&&kh(l,ci(p,t),y)}return l},Kf=function(t,r){return Dh(t,r,function(a,u){return ul(t,u)})},Ia=Tr?Tr.isConcatSpreadable:void 0,Ch=function(t){return Gn(t)||Xo(t)||!!(Ia&&t&&t[Ia])},Bs=function t(r,a,u,d,l){var p=-1,y=r.length;for(u||(u=Ch),l||(l=[]);++p<y;){var b=r[p];a>0&&u(b)?a>1?t(b,a-1,u,d,l):ho(l,b):d||(l[l.length]=b)}return l},No=function(t){return t!=null&&t.length?Bs(t,1):[]},Jr,fl,dl,pl,hl,vl,yl,qf,na,jn,gl,ml,Ti,bl,_l,Zf,Jf,Qf,Ru=function(t){return Mu(Fs(t,void 0,No),t+"")}(function(t,r){return t==null?{}:Kf(t,r)});function Mn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function ed(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function td(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Rn(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var zr,rd,Pr,xn,ir,Kr,nd={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Gs=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],El=(fl=Rn((Jr=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Mn(this,"isSilentMode",fl,this),Mn(this,"stopZoomGraph",dl,this),Mn(this,"stopScrollGraph",pl,this),Mn(this,"stopMoveGraph",hl,this),Mn(this,"adjustEdge",vl,this),Mn(this,"adjustEdgeMiddle",yl,this),Mn(this,"adjustEdgeStartAndEnd",qf,this),Mn(this,"adjustNodePosition",na,this),Mn(this,"hideAnchors",jn,this),Mn(this,"hoverOutline",gl,this),Mn(this,"nodeSelectedOutline",ml,this),Mn(this,"edgeSelectedOutline",Ti,this),Mn(this,"nodeTextEdit",bl,this),Mn(this,"edgeTextEdit",_l,this),Mn(this,"nodeTextDraggable",Zf,this),Mn(this,"edgeTextDraggable",Jf,this),Mn(this,"autoExpand",Qf,this),td(this,"multipleSelectKey",""),td(this,"defaultConfig",{}),Zn(this,this.getConfigDetail(u))}var r,a;return r=t,(a=[{key:"updateEditConfig",value:function(u){var d=this.getConfigDetail(u);Zn(this,d)}},{key:"getConfigDetail",value:function(u){var d=u.isSilentMode,l=u.textEdit,p={};if(d===!1&&Zn(p,this.defaultConfig),d===!0){var y=Ru(nd,Gs);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Zn(p,y)}l===!1&&Zn(p,{nodeTextEdit:!1,edgeTextEdit:!1});var b=Ru(u,Gs);return Zn(p,b)}},{key:"getConfig",value:function(){return Ru(this,Gs)}}])&&ed(r.prototype,a),t}()).prototype,"isSilentMode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dl=Rn(Jr.prototype,"stopZoomGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pl=Rn(Jr.prototype,"stopScrollGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hl=Rn(Jr.prototype,"stopMoveGraph",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vl=Rn(Jr.prototype,"adjustEdge",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yl=Rn(Jr.prototype,"adjustEdgeMiddle",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=Rn(Jr.prototype,"adjustEdgeStartAndEnd",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),na=Rn(Jr.prototype,"adjustNodePosition",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jn=Rn(Jr.prototype,"hideAnchors",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gl=Rn(Jr.prototype,"hoverOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ml=Rn(Jr.prototype,"nodeSelectedOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ti=Rn(Jr.prototype,"edgeSelectedOutline",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bl=Rn(Jr.prototype,"nodeTextEdit",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_l=Rn(Jr.prototype,"edgeTextEdit",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zf=Rn(Jr.prototype,"nodeTextDraggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jf=Rn(Jr.prototype,"edgeTextDraggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qf=Rn(Jr.prototype,"autoExpand",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rn(Jr.prototype,"updateEditConfig",[f.k],Object.getOwnPropertyDescriptor(Jr.prototype,"updateEditConfig"),Jr.prototype),Jr);n(63),function(t){t[t.DEFAULT=1]="DEFAULT",t[t.TEXT_EDIT=2]="TEXT_EDIT",t[t.SHOW_MENU=3]="SHOW_MENU",t[t.ALLOW_CONNECT=4]="ALLOW_CONNECT",t[t.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(t){t.KEY="logic-flow",t.NODE_NAME="lf-node",t.EDGE_NAME="lf-edge"}(rd||(rd={})),function(t){t.NODE="node",t.CIRCLE_NODE="circle-node",t.POLYGON_NODE="polygon-node",t.RECT_NODE="rect-node",t.TEXT_NODE="text-node",t.ELLIPSE_NODE="ellipse-node",t.DIAMOND_NODE="diamond-node",t.HTML_NODE="html-node",t.EDGE="edge",t.LINE_EDGE="line-edge",t.POLYLINE_EDGE="polyline-edge",t.BEZIER_EDGE="bezier-edge",t.GRAPH="graph"}(Pr||(Pr={})),function(t){t.NODE="node",t.EDGE="edge",t.GRAPH="graph"}(xn||(xn={})),function(t){t.ELEMENT_CLICK="element:click",t.NODE_CLICK="node:click",t.NODE_DBCLICK="node:dbclick",t.NODE_DELETE="node:delete",t.NODE_ADD="node:add",t.NODE_DND_ADD="node:dnd-add",t.NODE_DND_DRAG="node:dnd-drag",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DROP="node:drop",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_CONTEXTMENU="node:contextmenu",t.EDGE_DELETE="edge:delete",t.EDGE_ADD="edge:add",t.EDGE_CLICK="edge:click",t.EDGE_DBCLICK="edge:dbclick",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_ADJUST="edge:adjust",t.EDGE_EXCHANGE_NODE="edge:exchange-node",t.ANCHOR_DRAGSTART="anchor:dragstart",t.ANCHOR_DRAG="anchor:drag",t.ANCHOR_DROP="anchor:drop",t.ANCHOR_DRAGEND="anchor:dragend",t.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",t.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",t.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",t.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",t.ADJUST_POINT_DRAG="adjustPoint:drag",t.ADJUST_POINT_DROP="adjustPoint:drop",t.ADJUST_POINT_DRAGEND="adjustPoint:dragend",t.BLANK_MOUSEDOWN="blank:mousedown",t.BLANK_DRAGSTART="blank:dragstart",t.BLANK_DRAG="blank:drag",t.BLANK_DROP="blank:drop",t.BLANK_MOUSEMOVE="blank:mousemove",t.BLANK_MOUSEUP="blank:mouseup",t.BLANK_CLICK="blank:click",t.BLANK_CONTEXTMENU="blank:contextmenu",t.SELECTION_MOUSEDOWN="selection:mousedown",t.SELECTION_DRAGSTART="selection:dragstart",t.SELECTION_DRAG="selection:drag",t.SELECTION_DROP="selection:drop",t.SELECTION_MOUSEMOVE="selection:mousemove",t.SELECTION_MOUSEUP="selection:mouseup",t.SELECTION_CONTEXTMENU="selection:contextmenu",t.CONNECTION_NOT_ALLOWED="connection:not-allowed",t.HISTORY_CHANGE="history:change",t.TEXT_UPDATE="text:update",t.GRAPH_TRANSFORM="graph:transform",t.GRAPH_RENDERED="graph:rendered"}(ir||(ir={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Kr||(Kr={}));var uo,pn,wl,Ol,xl,Sl,jo,Tl,od;function Mo(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Us(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Us(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Us(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function go(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function zs(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Hs(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ro(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.INCREASE=1]="INCREASE"})(uo||(uo={}));var id=(pn=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Hs(this,"MINI_SCALE_SIZE",.2),Hs(this,"MAX_SCALE_SIZE",16),go(this,"SCALE_X",wl,this),go(this,"SKEW_Y",Ol,this),go(this,"SKEW_X",xl,this),go(this,"SCALE_Y",Sl,this),go(this,"TRANSLATE_X",jo,this),go(this,"TRANSLATE_Y",Tl,this),go(this,"ZOOM_SIZE",od,this),Hs(this,"eventCenter",void 0),this.eventCenter=u}var r,a;return r=t,a=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var d=Mo(u,2),l=d[0],p=d[1];return[(l-this.TRANSLATE_X)/this.SCALE_X,(p-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var d=Mo(u,2),l=d[0],p=d[1];return[l*this.SCALE_X+this.TRANSLATE_X,p*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,d,l){var p=Mo(u,2),y=p[0],b=p[1];return[y+d/this.SCALE_X,b+l/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,d){return[u/this.SCALE_X,d/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],d=arguments.length>1?arguments[1]:void 0,l=this.SCALE_X,p=this.SCALE_Y;return u===!0?(l+=this.ZOOM_SIZE,p+=this.ZOOM_SIZE):u===!1?(l-=this.ZOOM_SIZE,p-=this.ZOOM_SIZE):typeof u=="number"&&(l=u,p=u),l<this.MINI_SCALE_SIZE||l>this.MAX_SCALE_SIZE||(d&&(this.TRANSLATE_X-=(l-this.SCALE_X)*d[0],this.TRANSLATE_Y-=(p-this.SCALE_Y)*d[1]),this.SCALE_X=l,this.SCALE_Y=p,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(ir.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,d){this.TRANSLATE_X+=u,this.TRANSLATE_Y+=d,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,d,l,p){var y=Mo(this.CanvasPointToHtmlPoint([u,d]),2),b=l/2-y[0],O=p/2-y[1];this.TRANSLATE_X+=b,this.TRANSLATE_Y+=O,this.emitGraphTransform("focusOn")}}],a&&zs(r.prototype,a),t}(),wl=Ro(pn.prototype,"SCALE_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ol=Ro(pn.prototype,"SKEW_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xl=Ro(pn.prototype,"SKEW_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sl=Ro(pn.prototype,"SCALE_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),jo=Ro(pn.prototype,"TRANSLATE_X",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Tl=Ro(pn.prototype,"TRANSLATE_Y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),od=Ro(pn.prototype,"ZOOM_SIZE",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Ro(pn.prototype,"zoom",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"zoom"),pn.prototype),Ro(pn.prototype,"resetZoom",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"resetZoom"),pn.prototype),Ro(pn.prototype,"translate",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"translate"),pn.prototype),Ro(pn.prototype,"focusOn",[f.k],Object.getOwnPropertyDescriptor(pn.prototype,"focusOn"),pn.prototype),pn),ad=function(t,r){for(var a=-1,u=t==null?0:t.length;++a<u&&r(t[a],a,t)!==!1;);return t},ud=function(t,r){return t&&Ca(r,xi(r),t)},Ih=function(t){var r=[];if(t!=null)for(var a in Object(t))r.push(a);return r},Lh=Object.prototype.hasOwnProperty,Fh=function(t){if(!Cr(t))return Ih(t);var r=qi(t),a=[];for(var u in t)(u!="constructor"||!r&&Lh.call(t,u))&&a.push(u);return a},ku=function(t){return _n(t)?Kn(t,!0):Fh(t)},Bh=function(t,r){return t&&Ca(r,ku(r),t)},sd=n(106),cd=function(t,r){var a=-1,u=t.length;for(r||(r=Array(u));++a<u;)r[a]=t[a];return r},ld=function(t,r){return Ca(t,ro(t),r)},Xs=Po(Object.getPrototypeOf,Object),fd=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)ho(r,ro(t)),t=Xs(t);return r}:wu,Gh=function(t,r){return Ca(t,fd(t),r)},Al=function(t){return Ts(t,ku,fd)},Vs=Object.prototype.hasOwnProperty,Uh=function(t){var r=t.length,a=new t.constructor(r);return r&&typeof t[0]=="string"&&Vs.call(t,"index")&&(a.index=t.index,a.input=t.input),a},Pl=function(t){var r=new t.constructor(t.byteLength);return new $i(r).set(new $i(t)),r},zh=function(t,r){var a=r?Pl(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)},Hh=/\w*$/,Xh=function(t){var r=new t.constructor(t.source,Hh.exec(t));return r.lastIndex=t.lastIndex,r},Nl=Tr?Tr.prototype:void 0,dd=Nl?Nl.valueOf:void 0,Vh=function(t){return dd?Object(dd.call(t)):{}},pd=function(t,r){var a=r?Pl(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)},Wh=function(t,r,a){var u=t.constructor;switch(r){case"[object ArrayBuffer]":return Pl(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return zh(t,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return pd(t,a);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return Xh(t);case"[object Symbol]":return Vh(t)}},hd=Object.create,La=function(){function t(){}return function(r){if(!Cr(r))return{};if(hd)return hd(r);t.prototype=r;var a=new t;return t.prototype=void 0,a}}(),vd=function(t){return typeof t.constructor!="function"||qi(t)?{}:La(Xs(t))},Yh=function(t){return To(t)&&_(t)=="[object Map]"},jl=Ln.a&&Ln.a.isMap,Ml=jl?Vo(jl):Yh,$h=function(t){return To(t)&&_(t)=="[object Set]"},Rl=Ln.a&&Ln.a.isSet,Kh=Rl?Vo(Rl):$h,yd="[object Arguments]",gd="[object Function]",qh="[object Object]",Qr={};Qr[yd]=Qr["[object Array]"]=Qr["[object ArrayBuffer]"]=Qr["[object DataView]"]=Qr["[object Boolean]"]=Qr["[object Date]"]=Qr["[object Float32Array]"]=Qr["[object Float64Array]"]=Qr["[object Int8Array]"]=Qr["[object Int16Array]"]=Qr["[object Int32Array]"]=Qr["[object Map]"]=Qr["[object Number]"]=Qr["[object Object]"]=Qr["[object RegExp]"]=Qr["[object Set]"]=Qr["[object String]"]=Qr["[object Symbol]"]=Qr["[object Uint8Array]"]=Qr["[object Uint8ClampedArray]"]=Qr["[object Uint16Array]"]=Qr["[object Uint32Array]"]=!0,Qr["[object Error]"]=Qr[gd]=Qr["[object WeakMap]"]=!1;var Du=function t(r,a,u,d,l,p){var y,b=1&a,O=2&a,T=4&a;if(u&&(y=l?u(r,d,l,p):u(r)),y!==void 0)return y;if(!Cr(r))return r;var M=Gn(r);if(M){if(y=Uh(r),!b)return cd(r,y)}else{var C=_(r),q=C==gd||C=="[object GeneratorFunction]";if(Object(yo.a)(r))return Object(sd.a)(r,b);if(C==qh||C==yd||q&&!l){if(y=O||q?{}:vd(r),!b)return O?Gh(r,Bh(y,r)):ld(r,ud(y,r))}else{if(!Qr[C])return l?r:{};y=Wh(r,C,b)}}p||(p=new po);var ie=p.get(r);if(ie)return ie;p.set(r,y),Kh(r)?r.forEach(function(Me){y.add(t(Me,a,u,Me,r,p))}):Ml(r)&&r.forEach(function(Me,Re){y.set(Re,t(Me,a,u,Re,r,p))});var ye=M?void 0:(T?O?Al:Na:O?ku:xi)(r);return ad(ye||r,function(Me,Re){ye&&(Me=r[Re=Me]),Ls(y,Re,t(Me,a,u,Re,r,p))}),y},sn=function(t){return Du(t,5)},Fa=function(t,r,a){(a!==void 0&&!G(t[r],a)||a===void 0&&!(r in t))&&ju(t,r,a)},Zh=function(t){return To(t)&&_n(t)},Ba=Function.prototype,Ga=Object.prototype,md=Ba.toString,Ua=Ga.hasOwnProperty,bd=md.call(Object),za=function(t){if(!To(t)||Xr(t)!="[object Object]")return!1;var r=Xs(t);if(r===null)return!0;var a=Ua.call(r,"constructor")&&r.constructor;return typeof a=="function"&&a instanceof a&&md.call(a)==bd},Cu=function(t,r){if((r!=="constructor"||typeof t[r]!="function")&&r!="__proto__")return t[r]},kl=function(t){return Ca(t,ku(t))},Dl=function(t,r,a,u,d,l,p){var y=Cu(t,a),b=Cu(r,a),O=p.get(b);if(O)Fa(t,a,O);else{var T=l?l(y,b,a+"",t,r,p):void 0,M=T===void 0;if(M){var C=Gn(b),q=!C&&Object(yo.a)(b),ie=!C&&!q&&Ki(b);T=b,C||q||ie?Gn(y)?T=y:Zh(y)?T=cd(y):q?(M=!1,T=Object(sd.a)(b,!0)):ie?(M=!1,T=pd(b,!0)):T=[]:za(b)||Xo(b)?(T=y,Xo(y)?T=kl(y):Cr(y)&&!Go(y)||(T=vd(b))):M=!1}M&&(p.set(b,T),d(T,b,u,l,p),p.delete(b)),Fa(t,a,T)}},Cl=function t(r,a,u,d,l){r!==a&&Ds(a,function(p,y){if(l||(l=new po),Cr(p))Dl(r,a,y,u,t,d,l);else{var b=d?d(Cu(r,y),p,y+"",r,a,l):void 0;b===void 0&&(b=p),Fa(r,y,b)}},ku)},Ws=$f(function(t,r,a){Cl(t,r,a)}),Ys={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},Il=function(t){var r=sn(Ys);return t&&(r=Ws(r,t)),r};n(77),n(158);function _d(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}var Ed=function(){function t(){var u,d,l;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,t),l={},(d="_events")in(u=this)?Object.defineProperty(u,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[d]=l}var r,a;return r=t,(a=[{key:"on",value:function(u,d,l){var p=this;return u==null||u.split(",").forEach(function(y){y=y.trim(),p._events[y]||(p._events[y]=[]),p._events[y].push({callback:d,once:!!l})}),this}},{key:"once",value:function(u,d){var l=this;u==null||u.split(",").forEach(function(p){return p=p.trim(),l.on(p,d,!0)})}},{key:"emit",value:function(u,d){var l=this;u==null||u.split(",").forEach(function(p){var y=l._events[p]||[],b=l._events["*"]||[],O=function(T){for(var M=T.length,C=0;C<M;C++)if(T[C]){var q=T[C],ie=q.callback;q.once&&(T.splice(C,1),T.length===0&&delete l._events[p],M--,C--),ie.apply(l,[d])}};O(y),O(b)})}},{key:"off",value:function(u,d){var l=this;return u||(this._events={}),u.split(",").forEach(function(p){if(d){for(var y=l._events[p]||[],b=y.length,O=0;O<b;O++)y[O].callback===d&&(y.splice(O,1),b--,O--);y.length===0&&delete l._events[p]}else delete l._events[p]}),this}},{key:"getEvents",value:function(){return this._events}}])&&_d(r.prototype,a),t}();function li(t,r){return r*Math.round(t/r)||t}function Ll(t,r){return t%r}function Iu(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return $s(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return $s(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $s(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var Ks,qs=function(t,r,a){var u=Iu(t,2),d=u[0],l=u[1],p=Iu(r,2),y=p[0],b=p[1],O=Iu(a,2),T=O[0],M=O[1];return d>y&&d<T&&l>b&&l<M},Fl=function(t,r){var a=!1;switch(r.multipleSelectKey){case"meta":a=t.metaKey;break;case"alt":a=t.altKey;break;case"shift":a=t.shiftKey;break;case"ctrl":a=t.ctrlKey;break;default:a=!1}return a},wd=(n(78),n(161),n(125),n(79),n(30),n(12),n(13),n(14),n(47),new Uint8Array(16));function Bl(){if(!Ks&&!(Ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ks(wd)}for(var Od=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,xd=function(t){return typeof t=="string"&&Od.test(t)},kn=[],Lu=0;Lu<256;++Lu)kn.push((Lu+256).toString(16).substr(1));var Sd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(kn[t[r+0]]+kn[t[r+1]]+kn[t[r+2]]+kn[t[r+3]]+"-"+kn[t[r+4]]+kn[t[r+5]]+"-"+kn[t[r+6]]+kn[t[r+7]]+"-"+kn[t[r+8]]+kn[t[r+9]]+"-"+kn[t[r+10]]+kn[t[r+11]]+kn[t[r+12]]+kn[t[r+13]]+kn[t[r+14]]+kn[t[r+15]]).toLowerCase();if(!xd(a))throw TypeError("Stringified UUID is invalid");return a},Fu=function(t,r,a){var u=(t=t||{}).random||(t.rng||Bl)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,r){a=a||0;for(var d=0;d<16;++d)r[a+d]=u[d];return r}return Sd(u)},fi=function(){return Fu()},Td=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=t.nodes.reduce(function(u,d){return u[d.id]=r+Fu(),d.id=u[d.id],u},{});return t.edges.forEach(function(u){u.id=r+Fu(),u.sourceNodeId=a[u.sourceNodeId],u.targetNodeId=a[u.targetNodeId]}),t},oa=(n(104),n(162),function(t,r,a){var u=t.x,d=t.y;return(u-r.x)*(u-a.x)<=0&&(d-r.y)*(d-a.y)<=0});function Zs(t){return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zs(t)}function Gl(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Js(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Gl(Object(a),!0).forEach(function(u){Ul(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gl(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Ul(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var nt,zl,Bu,Yo,Ha,Ai,Xa,Va,Pi,Ni,ji,Gu,Uu,Wa,Qs,ec,ia,aa,Ad,Pd,Hl,tc=function(t){return t.anchors},zu=function(t,r){for(var a,u=r.nodes,d=u.length-1;d>=0;d--){var l=u[d];if(Qh(t,l)){var p=l.getTargetAnchor(t);if(p){var y={node:l,anchorIndex:p.index,anchor:p.anchor};a&&!Jh(l,a.node,r)||(a=y)}}}return a},Jh=function(t,r,a){return t.zIndex>r.zIndex||a.nodesMap[t.id].index>a.nodesMap[r.id].index},Jn=function(t,r,a,u){return Math.hypot(t-a,r-u)},Mi=function(t,r){var a=!1,u=mo(r);return t.x>=u.minX-0&&t.x<=u.maxX+0&&t.y>=u.minY-0&&t.y<=u.maxY+0&&(a=!0),a},Qh=function(t,r){var a=!1,u=mo(r);return t.x>=u.minX-5&&t.x<=u.maxX+5&&t.y>=u.minY-5&&t.y<=u.maxY+5&&(a=!0),a},mo=function(t){var r=t.x,a=t.y,u=t.width,d=t.height;return{minX:r-u/2,minY:a-d/2,maxX:r+u/2,maxY:a+d/2,x:r,y:a,width:u,height:d,centerX:r,centerY:a}},Xl=function(t,r,a){var u,d=function(p){var y=p,b=y.x,O=y.y,T=y.width,M=y.height,C=y.radius;return[{x:b-T/2+C,y:O-M/2+C,r:C},{x:b+T/2-C,y:O-M/2+C,r:C},{x:b-T/2+C,y:O+M/2-C,r:C},{x:b+T/2-C,y:O+M/2-C,r:C}]}(a),l=Number.MAX_SAFE_INTEGER;return d.forEach(function(p){var y=Jn(t.x,t.y,p.x,p.y);y<l&&(l=y,u=p)}),Vl(t,r,u)},Vl=function(t,r,a){var u,d=a,l=d.x,p=d.y,y=d.r;if(r===Kr.HORIZONTAL){var b=l-Math.sqrt(y*y-(t.y-p)*(t.y-p)),O=l+Math.sqrt(y*y-(t.y-p)*(t.y-p));u={x:Math.abs(b-t.x)<Math.abs(O-t.x)?b:O,y:t.y}}else if(r===Kr.VERTICAL){var T=p-Math.sqrt(y*y-(t.x-l)*(t.x-l)),M=p+Math.sqrt(y*y-(t.x-l)*(t.x-l)),C=Math.abs(T-t.y)<Math.abs(M-t.y)?T:M;u={x:t.x,y:C}}return u},Nd=function(t,r){var a=r,u=!1,d=a.x-a.width/2+a.radius,l=a.x+a.width/2-a.radius,p=a.y-a.height/2+a.radius,y=a.y+a.height/2-a.radius,b=a.x,O=a.y,T=a.width,M=a.height;return t.y===O+M/2||t.y===O-M/2?u=t.x>d&&t.x<l:t.x!==b+T/2&&t.x!==b-T/2||(u=t.y>p&&t.y<y),u},jd=function(t,r,a){var u,d=a,l=d.x,p=d.y,y=d.rx,b=d.ry;if(r===Kr.HORIZONTAL){var O=l-Math.sqrt(y*y-(t.y-p)*(t.y-p)*y*y/(b*b)),T=l+Math.sqrt(y*y-(t.y-p)*(t.y-p)*y*y/(b*b));u={x:Math.abs(O-t.x)<Math.abs(T-t.x)?O:T,y:t.y}}else if(r===Kr.VERTICAL){var M=p-Math.sqrt(b*b-(t.x-l)*(t.x-l)*b*b/(y*y)),C=p+Math.sqrt(b*b-(t.x-l)*(t.x-l)*b*b/(y*y)),q=Math.abs(M-t.y)<Math.abs(C-t.y)?M:C;u={x:t.x,y:q}}return u},Md=function(t,r,a){for(var u,d=a.pointsPosition,l=Number.MAX_SAFE_INTEGER,p=[],y=0;y<d.length;y++)p.push({start:d[y],end:d[(y+1)%d.length]});return p.forEach(function(b){var O=b.start,T=b.end,M=O,C=T;O.x>T.x&&(M=T,C=O);var q={x:t.x,y:t.y};if(M.x===C.x&&r===Kr.HORIZONTAL&&(q={x:M.x,y:t.y}),M.y===C.y&&r===Kr.VERTICAL&&(q={x:t.x,y:M.y}),M.x!==C.x&&M.y!==C.y){var ie=(C.y-M.y)/(C.x-M.x),ye=(M.x*C.y-C.x*M.y)/(M.x-C.x);r===Kr.HORIZONTAL?q={x:(t.y-ye)/ie,y:t.y}:r===Kr.VERTICAL&&(q={x:t.x,y:ie*t.x+ye})}if(oa(q,O,T)){var Me=Jn(q.x,q.y,t.x,t.y);Me<l&&(l=Me,u=q)}}),u},Rd=function(t,r,a,u){var d=t.x,l=t.y;return r.x>t.x?d=t.x+a/2:r.x<t.x&&(d=t.x-a/2),r.y>t.y?l=t.y+u/2:r.y<t.y&&(l=t.y-u/2),{x:d,y:l}},kd=function(t){var r=t.rows,a=t.style,u=t.rowsLength,d=t.className,l=document.createElement("div");l.style.fontSize=a.fontSize,l.style.width=a.width,l.className=d,l.style.lineHeight=a.lineHeight,l.style.padding=a.padding,a.fontFamily&&(l.style.fontFamily=a.fontFamily),u>1?r.forEach(function(y){var b=document.createElement("div");b.textContent=y,l.appendChild(b)}):l.textContent=r,document.body.appendChild(l);var p=l.clientHeight;return document.body.removeChild(l),p},Wl=function(t){var r=t.rows,a=t.rowsLength,u=t.fontSize,d=0;return r&&r.forEach(function(l){var p=St(l);d=p>d?p:d}),{width:Math.ceil(d/2)*u+u/4,height:a*(u+2)+u/4}},Hu=function(t){return Zs(t)!=="object"?{isAllPass:!!t,msg:t?"":"不允许连接"}:t},Xn=function(t){try{return JSON.parse(JSON.stringify(t))}catch{return t}},ev=1e3,Yl=999,Ya=function(){return++ev};function Xu(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Un(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Xu(Object(a),!0).forEach(function(u){Qn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xu(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function hn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function rc(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Qn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ar(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Vu=(nt=function(){function t(u,d){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Qn(this,"id",""),hn(this,"type",zl,this),hn(this,"sourceNodeId",Bu,this),hn(this,"targetNodeId",Yo,this),hn(this,"startPoint",Ha,this),hn(this,"endPoint",Ai,this),hn(this,"text",Xa,this),hn(this,"properties",Va,this),hn(this,"points",Pi,this),hn(this,"pointsList",Ni,this),hn(this,"isSelected",ji,this),hn(this,"isHovered",Gu,this),hn(this,"isHitable",Uu,this),hn(this,"draggable",Wa,this),hn(this,"visible",Qs,this),Qn(this,"virtual",!1),hn(this,"isAnimation",ec,this),hn(this,"isShowAdjustPoint",ia,this),Qn(this,"graphModel",void 0),hn(this,"zIndex",aa,this),Qn(this,"BaseType",xn.EDGE),Qn(this,"modelType",Pr.EDGE),hn(this,"state",Ad,this),Qn(this,"additionStateData",void 0),Qn(this,"sourceAnchorId",""),Qn(this,"targetAnchorId",""),Qn(this,"menu",void 0),Qn(this,"customTextPosition",!1),hn(this,"style",Pd,this),hn(this,"arrowConfig",Hl,this),this.graphModel=d,this.initEdgeData(u),this.setAttributes()}var r,a;return r=t,a=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,l=d&&d(u.type),p=this.createId();u.id=p||l||fi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var y=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=y,Zn(this,yt(u)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=u.zIndex||Ya()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Un(Un({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Un({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return sn(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return sn(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),d=this.getEdgeAnimationStyle(),l=this.graphModel.theme.arrow,p=this.isAnimation?d.stroke:u.stroke;return Un(Un({},u),{},{fill:p,stroke:p},l)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return sn(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.sourceNodeId])===null||d===void 0?void 0:d.model}},{key:"targetNode",get:function(){var u,d;return(u=this.graphModel)===null||u===void 0||(d=u.nodesMap[this.targetNodeId])===null||d===void 0?void 0:d.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,d){var l,p;return tc(u).forEach(function(y){var b=$t(y,d);(p===void 0||b<p)&&(p=b,l=y)}),l}},{key:"getEndAnchor",value:function(u){var d,l,p=this;return tc(u).forEach(function(y){var b=$t(y,p.startPoint);(l===void 0||b<l)&&(l=b,d=y)}),d}},{key:"getProperties",value:function(){return Object(f.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,d=u.x,l=u.y,p=u.value,y={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(f.I)(this.properties)};return p&&(y.text={x:d,y:l,value:p}),this.graphModel.overlapMode===uo.INCREASE&&(y.zIndex=this.zIndex),y}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,d){this.properties[u]=Xn(d),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Un(Un({},Object(f.I)(this.properties)),Xn(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var d=this.arrowConfig,l=d.markerEnd,p=d.markerStart;p&&p==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),l&&l==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,d){this.style=Un(Un({},this.style),{},Qn({},u,Xn(d)))}},{key:"setStyles",value:function(u){this.style=Un(Un({},this.style),Xn(u))}},{key:"updateStyles",value:function(u){this.style=Un({},Xn(u))}},{key:"formatText",value:function(u){var d=this.textPosition,l=d.x,p=d.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||l,y:u.text.y||p,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:l,y:p,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,d=u.x,l=u.y;this.text.x=d,this.text.y=l}},{key:"moveText",value:function(u,d){if(this.text){var l=this.text,p=l.x,y=l.y,b=l.value,O=l.draggable,T=l.editable;this.text={value:b,draggable:O,x:p+u,y:y+d,editable:T}}}},{key:"setText",value:function(u){u&&Zn(this.text,u)}},{key:"updateText",value:function(u){this.text=Un(Un({},Object(f.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var d=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:d.x,y:d.y}),this.targetAnchorId||(this.targetAnchorId=d.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,d){this.startPoint.x+=u,this.startPoint.y+=d}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,d){this.endPoint.x+=u,this.endPoint.y+=d}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Zn(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var d=u.startPoint,l=u.endPoint;this.updateStartPoint({x:d.x,y:d.y}),this.updateEndPoint({x:l.x,y:l.y})}}],a&&rc(r.prototype,a),t}(),zl=ar(nt.prototype,"type",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bu=ar(nt.prototype,"sourceNodeId",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Yo=ar(nt.prototype,"targetNodeId",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ha=ar(nt.prototype,"startPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=ar(nt.prototype,"endPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xa=ar(nt.prototype,"text",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Va=ar(nt.prototype,"properties",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pi=ar(nt.prototype,"points",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ni=ar(nt.prototype,"pointsList",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ji=ar(nt.prototype,"isSelected",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gu=ar(nt.prototype,"isHovered",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uu=ar(nt.prototype,"isHitable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wa=ar(nt.prototype,"draggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qs=ar(nt.prototype,"visible",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ec=ar(nt.prototype,"isAnimation",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ia=ar(nt.prototype,"isShowAdjustPoint",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=ar(nt.prototype,"zIndex",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ad=ar(nt.prototype,"state",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Pd=ar(nt.prototype,"style",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Hl=ar(nt.prototype,"arrowConfig",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),ar(nt.prototype,"sourceNode",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"sourceNode"),nt.prototype),ar(nt.prototype,"targetNode",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"targetNode"),nt.prototype),ar(nt.prototype,"textPosition",[f.m],Object.getOwnPropertyDescriptor(nt.prototype,"textPosition"),nt.prototype),ar(nt.prototype,"setProperty",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperty"),nt.prototype),ar(nt.prototype,"deleteProperty",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteProperty"),nt.prototype),ar(nt.prototype,"setProperties",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setProperties"),nt.prototype),ar(nt.prototype,"changeEdgeId",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeId"),nt.prototype),ar(nt.prototype,"setStyle",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyle"),nt.prototype),ar(nt.prototype,"setStyles",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setStyles"),nt.prototype),ar(nt.prototype,"updateStyles",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStyles"),nt.prototype),ar(nt.prototype,"formatText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"formatText"),nt.prototype),ar(nt.prototype,"resetTextPosition",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"resetTextPosition"),nt.prototype),ar(nt.prototype,"moveText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveText"),nt.prototype),ar(nt.prototype,"setText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setText"),nt.prototype),ar(nt.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),ar(nt.prototype,"setAnchors",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setAnchors"),nt.prototype),ar(nt.prototype,"setSelected",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setSelected"),nt.prototype),ar(nt.prototype,"setHovered",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHovered"),nt.prototype),ar(nt.prototype,"setHitable",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setHitable"),nt.prototype),ar(nt.prototype,"openEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),ar(nt.prototype,"closeEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),ar(nt.prototype,"setElementState",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementState"),nt.prototype),ar(nt.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateStartPoint"),nt.prototype),ar(nt.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveStartPoint"),nt.prototype),ar(nt.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateEndPoint"),nt.prototype),ar(nt.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEndPoint"),nt.prototype),ar(nt.prototype,"setZIndex",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"setZIndex"),nt.prototype),ar(nt.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"initPoints"),nt.prototype),ar(nt.prototype,"updateAttributes",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAttributes"),nt.prototype),ar(nt.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustStart"),nt.prototype),ar(nt.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAdjustEnd"),nt.prototype),ar(nt.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateAfterAdjustStartAndEnd"),nt.prototype),nt),$a=Vu;function Ka(t){return Ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ka(t)}function Wu(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function qa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Wu(Object(a),!0).forEach(function(u){Dd(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wu(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Yu(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $u(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ua(){return ua=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Ku(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},ua.apply(this,arguments)}function Ku(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ri(t))!==null;);return t}function nc(t,r){return nc=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},nc(t,r)}function qu(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ri(t);if(r){var d=Ri(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return sa(this,a)}}function sa(t,r){if(r&&(Ka(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $l(t)}function $l(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ri(t){return Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ri(t)}function Dd(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Or,Cd,$o=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&nc(l,p)})(d,t);var r,a,u=qu(d);function d(){var l;Yu(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Dd($l(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.LINE_EDGE),l}return r=d,(a=[{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.line;return qa(qa({},ua(Ri(d.prototype),"getEdgeStyle",this).call(this)),sn(l))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&$u(r.prototype,a),d}($a);function oc(t){return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},oc(t)}function Id(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Kl(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Kl(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kl(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Ld(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function ql(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ld(Object(a),!0).forEach(function(u){Zo(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ld(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function tv(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Ko(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Fd(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function qo(){return qo=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=ki(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},qo.apply(this,arguments)}function ki(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=vn(t))!==null;);return t}function ic(t,r){return ic=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ic(t,r)}function Zl(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=vn(t);if(r){var d=vn(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ac(this,a)}}function ac(t,r){if(r&&(oc(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Za(t)}function Za(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vn(t){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vn(t)}function Zo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function Ir(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Vn=(Or=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ic(l,p)})(d,t);var r,a,u=Zl(d);function d(){var l;Ko(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Zo(Za(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYLINE_EDGE),Zo(Za(l),"draggingPointList",void 0),tv(Za(l),"dbClickPosition",Cd,Za(l)),l}return r=d,(a=[{key:"initEdgeData",value:function(l){this.offset=30,qo(vn(d.prototype),"initEdgeData",this).call(this,l)}},{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.polyline;return ql(ql({},qo(vn(d.prototype),"getEdgeStyle",this).call(this)),sn(l))}},{key:"getTextPosition",value:function(){var l,p=(l=this.text)===null||l===void 0?void 0:l.value;if(this.dbClickPosition&&!p){var y=this.dbClickPosition;return{x:y.x,y:y.y}}var b=Se(this.points),O=Id(ut(b),2),T=O[0],M=O[1];return{x:(T.x+M.x)/2,y:(T.y+M.y)/2}}},{key:"getAfterAnchor",value:function(l,p,y){var b,O;return y.forEach(function(T){var M;l===Kr.HORIZONTAL?M=Math.abs(p.y-T.y):l===Kr.VERTICAL&&(M=Math.abs(p.x-T.x)),(!O||O>M)&&(O=M,b=T)}),b}},{key:"getCrossPoint",value:function(l,p,y){var b;return l===Kr.HORIZONTAL?b={x:y.x,y:p.y}:l===Kr.VERTICAL&&(b={x:p.x,y:y.y}),b}},{key:"removeCrossPoints",value:function(l,p,y){var b=y.map(function(Re){return Re});if(l===1){var O=b[l],T=b[p],M=b[l-1];if(pt(M,O,this.sourceNode)){if(_t(O,T,this.sourceNode)){var C=it(O,T,this.sourceNode);C&&(b[l]=C,b.splice(l-1,1),l--,p--)}}else this.sourceNode.anchors.forEach(function(Re){(Re.x===M.x&&Re.x===O.x||Re.y===M.y&&Re.y===O.y)&&Jn(Re.x,Re.y,O.x,O.y)<Jn(M.x,M.y,O.x,O.y)&&(b[l-1]=Re)})}if(p===y.length-2){var q=b[l],ie=b[p],ye=b[p+1];if(pt(ie,ye,this.targetNode)){if(_t(q,ie,this.targetNode)){var Me=it(q,ie,this.targetNode);Me&&(b[p]=Me,b.splice(p+1,1))}}else this.targetNode.anchors.forEach(function(Re){(Re.x===ye.x&&Re.x===ie.x||Re.y===ye.y&&Re.y===ie.y)&&Jn(Re.x,Re.y,ie.x,ie.y)<Jn(ye.x,ye.y,ie.x,ie.y)&&(b[p+1]=Re)})}return b}},{key:"getDraggingPoints",value:function(l,p,y,b,O){var T=O.map(function(q){return q}),M=this.getAfterAnchor(l,y,b),C=this.getCrossPoint(l,y,M);return p==="start"?(T.unshift(C),T.unshift(M)):(T.push(C),T.push(M)),T}},{key:"updateCrossPoints",value:function(l){var p=l.map(function(lt){return lt}),y=l[0],b=l[1],O=l[p.length-2],T=l[p.length-1],M=this.sourceNode,C=this.targetNode,q=M.modelType,ie=C.modelType,ye=dt(y,b),Me=p[0];switch(q){case Pr.RECT_NODE:M.radius!==0&&(Nd(y,M)||(Me=Xl(y,ye,M)));break;case Pr.CIRCLE_NODE:Me=Vl(y,ye,M);break;case Pr.ELLIPSE_NODE:Me=jd(y,ye,M);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Me=Md(y,ye,M)}p[0]=Me;var Re=dt(O,T),Ye=p[p.length-1];switch(ie){case Pr.RECT_NODE:C.radius!==0&&(Nd(T,C)||(Ye=Xl(T,Re,C)));break;case Pr.CIRCLE_NODE:Ye=Vl(T,Re,C);break;case Pr.ELLIPSE_NODE:Ye=jd(T,Re,C);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Ye=Md(T,Re,C)}return p[p.length-1]=Ye,p}},{key:"getData",value:function(){var l=qo(vn(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return Object.assign({},l,{pointsList:p})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(l){return"".concat(l.x,",").concat(l.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var l=ft({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=l,this.points=l.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"updateStartPoint",value:function(l){this.startPoint=l,this.updatePoints()}},{key:"moveStartPoint",value:function(l,p){this.startPoint.x+=l,this.startPoint.y+=p,this.updatePoints()}},{key:"updateEndPoint",value:function(l){this.endPoint=l,this.updatePoints()}},{key:"moveEndPoint",value:function(l,p){this.endPoint.x+=l,this.endPoint.y+=p,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(l){return l})}},{key:"dragAppendSimple",value:function(l,p){this.isDragging=!0;var y=l.start,b=l.end,O=l.startIndex,T=l.endIndex,M=l.direction,C=this.pointsList,q=C;return M===Kr.HORIZONTAL?(C[O]={x:y.x,y:y.y+p.y},C[T]={x:b.x,y:b.y+p.y},q=this.pointsList.map(function(ie){return ie})):M===Kr.VERTICAL&&(C[O]={x:y.x+p.x,y:y.y},C[T]={x:b.x+p.x,y:b.y},q=this.pointsList.map(function(ie){return ie})),this.updatePointsAfterDrag(q),this.draggingPointList=q,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[O]),end:Object.assign({},C[T]),startIndex:O,endIndex:T,direction:M}}},{key:"dragAppend",value:function(l,p){this.isDragging=!0;var y=l.start,b=l.end,O=l.startIndex,T=l.endIndex,M=l.direction,C=this.pointsList;if(M===Kr.HORIZONTAL){C[O]={x:y.x,y:y.y+p.y},C[T]={x:b.x,y:b.y+p.y};var q=this.pointsList.map(function(Rt){return Rt});if(O!==0&&T!==this.pointsList.length-1&&(q=this.removeCrossPoints(O,T,q)),O===0){var ie={x:y.x,y:y.y+p.y};if(!Mi(ie,this.sourceNode)){var ye=this.sourceNode.anchors;q=this.getDraggingPoints(M,"start",ie,ye,q)}}if(T===this.pointsList.length-1){var Me={x:b.x,y:b.y+p.y};if(!Mi(Me,this.targetNode)){var Re=this.targetNode.anchors;q=this.getDraggingPoints(M,"end",Me,Re,q)}}this.updatePointsAfterDrag(q),this.draggingPointList=q}else if(M===Kr.VERTICAL){C[O]={x:y.x+p.x,y:y.y},C[T]={x:b.x+p.x,y:b.y};var Ye=this.pointsList.map(function(Rt){return Rt});if(O!==0&&T!==this.pointsList.length-1&&(Ye=this.removeCrossPoints(O,T,Ye)),O===0){var lt={x:y.x+p.x,y:y.y};if(!Mi(lt,this.sourceNode)){var Ct=this.sourceNode.anchors;Ye=this.getDraggingPoints(M,"start",lt,Ct,Ye)}}if(T===this.pointsList.length-1){var Ot={x:b.x+p.x,y:b.y};if(!Mi(Ot,this.targetNode)){var er=this.targetNode.anchors;Ye=this.getDraggingPoints(M,"end",Ot,er,Ye)}}this.updatePointsAfterDrag(Ye),this.draggingPointList=Ye}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[O]),end:Object.assign({},C[T]),startIndex:O,endIndex:T,direction:M}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var l=at(Se(this.points));this.pointsList=l.map(function(b){return b}),this.draggingPointList=[];var p=l[0];this.startPoint=Object.assign({},p);var y=l[l.length-1];this.endPoint=Object.assign({},y)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(l){var p=this.updateCrossPoints(l);this.points=p.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var l=this.pointsList;return l[l.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(l){var p=l.startPoint,y=l.endPoint,b=l.sourceNode,O=l.targetNode,T=ft({x:p.x,y:p.y},{x:y.x,y:y.y},b,O,this.offset||0);this.pointsList=T,this.initPoints()}}])&&Fd(r.prototype,a),d}($a),Cd=Ir(Or.prototype,"dbClickPosition",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ir(Or.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"initPoints"),Or.prototype),Ir(Or.prototype,"updatePoints",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"updatePoints"),Or.prototype),Ir(Or.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"updateStartPoint"),Or.prototype),Ir(Or.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"moveStartPoint"),Or.prototype),Ir(Or.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"updateEndPoint"),Or.prototype),Ir(Or.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"moveEndPoint"),Or.prototype),Ir(Or.prototype,"dragAppendStart",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"dragAppendStart"),Or.prototype),Ir(Or.prototype,"dragAppendSimple",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"dragAppendSimple"),Or.prototype),Ir(Or.prototype,"dragAppend",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"dragAppend"),Or.prototype),Ir(Or.prototype,"dragAppendEnd",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"dragAppendEnd"),Or.prototype),Ir(Or.prototype,"updatePointsAfterDrag",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"updatePointsAfterDrag"),Or.prototype),Ir(Or.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"getAdjustStart"),Or.prototype),Ir(Or.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"getAdjustEnd"),Or.prototype),Ir(Or.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(Or.prototype,"updateAfterAdjustStartAndEnd"),Or.prototype),Or),Ja=function(t){var r=t.start,a=t.end,u=t.offset,d=t.verticalLength,l=t.type,p={leftX:0,leftY:0,rightX:0,rightY:0},y=Math.atan((a.y-r.y)/(a.x-r.x)),b=Math.atan(u/d),O=Math.sqrt(d*d+u*u);return l==="start"?a.x>=r.x?(p.leftX=r.x+O*Math.sin(y+b),p.leftY=r.y-O*Math.cos(y+b),p.rightX=r.x-O*Math.sin(y-b),p.rightY=r.y+O*Math.cos(y-b)):(p.leftX=r.x-O*Math.sin(y+b),p.leftY=r.y+O*Math.cos(y+b),p.rightX=r.x+O*Math.sin(y-b),p.rightY=r.y-O*Math.cos(y-b)):l==="end"&&(a.x>=r.x?(p.leftX=a.x+O*Math.sin(y-b),p.leftY=a.y-O*Math.cos(y-b),p.rightX=a.x-O*Math.sin(y+b),p.rightY=a.y+O*Math.cos(y+b)):(p.leftX=a.x-O*Math.sin(y-b),p.leftY=a.y+O*Math.cos(y-b),p.rightX=a.x+O*Math.sin(y+b),p.rightY=a.y-O*Math.cos(y+b))),p},rv={x:1,y:0,z:0};function Bd(t){var r=Math.hypot(t.x,t.y);return{x:t.x/r,y:t.y/r,z:0}}function nv(t){return u=function(l,p){return l.x*p.y-l.y*p.x}(r=rv,a=t),d=Math.acos(function(l,p){var y=[l.x,l.y,l.z];return[p.x,p.y,p.z].reduce(function(b,O,T){return b+O*y[T]})}(Bd(r),Bd(a))),u>=0?d:-d;var r,a,u,d}function Gd(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Zu(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Gd(Object(a),!0).forEach(function(u){ov(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gd(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ov(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function iv(t){return function(r){if(Array.isArray(r))return sc(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Ud(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jl(t){return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jl(t)}function uc(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||Ud(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ud(t,r){if(t){if(typeof t=="string")return sc(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?sc(t,r):void 0}}function sc(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var cc=function(t){var r=[],a={};return t.forEach(function(u){var d="".concat(u.x,"-").concat(u.y);u.id=d,a[d]=u}),Object.keys(a).forEach(function(u){r.push(a[u])}),r},Ju=function(t,r){return t.width===0&&t.height===0?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-r,minY:t.minY-r,maxX:t.maxX+r,maxY:t.maxY+r,height:t.height+2*r,width:t.width+2*r}},lc=function(t,r){var a=function(u,d){var l=Math.abs(u.x-d.centerX),p=Math.abs(u.y-d.centerY);return l/d.width>p/d.height?Kr.HORIZONTAL:Kr.VERTICAL}(r,t);return a===Kr.HORIZONTAL?{x:r.x>t.centerX?t.maxX:t.minX,y:r.y}:{x:r.x,y:r.y>t.centerY?t.maxY:t.minY}},zd=function(t,r){var a=Math.min(t.minX,r.minX),u=Math.min(t.minY,r.minY),d=Math.max(t.maxX,r.maxX),l=Math.max(t.maxY,r.maxY);return{centerX:(a+d)/2,centerY:(u+l)/2,minX:a,minY:u,maxX:d,maxY:l,height:l-u,width:d-a}},Qa=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,a=[],u=[];t.forEach(function(T){a.push(T.x),u.push(T.y)});var d=Math.min.apply(Math,a),l=Math.max.apply(Math,a),p=Math.min.apply(Math,u),y=Math.max.apply(Math,u),b=l-d,O=y-p;return r&&(b+=r,O+=r),{centerX:(d+l)/2,centerY:(p+y)/2,maxX:l,maxY:y,minX:d,minY:p,x:(d+l)/2,y:(p+y)/2,height:O,width:b}},fc=function(t){var r=t.minX,a=t.minY,u=t.maxX,d=t.maxY;return[{x:r,y:a},{x:u,y:a},{x:u,y:d},{x:r,y:d}]},A=function(t,r){var a=t.x,u=t.y;return a<r.minX||a>r.maxX||u<r.minY||u>r.maxY},U=function(t,r){return Math.abs(t.x-r.x)+Math.abs(t.y-r.y)},J=function(t,r,a,u,d){return U(t,r)+U(t,a)+function(l,p){var y=0;return p.forEach(function(b){b&&(l.x===b.x&&(y+=-2),l.y===b.y&&(y+=-2))}),y}(t,[r,a,u,d])},Ie=function t(r,a,u,d,l){l||(l=0),r.unshift(a[d]),u[d]&&u[d]!==d&&l<=100&&t(r,a,u,u[d],l+1)},Ve=function(t,r,a,u){var d=r.x-t.x,l=r.y-t.y,p=u.x-a.x,y=u.y-a.y,b=(-l*(t.x-a.x)+d*(t.y-a.y))/(-p*l+d*y),O=(p*(t.y-a.y)-y*(t.x-a.x))/(-p*l+d*y);return b>=0&&b<=1&&O>=0&&O<=1},Ce=function(t,r,a){if(a.width===0&&a.height===0)return!1;var u=uc(fc(a),4),d=u[0],l=u[1],p=u[2],y=u[3];return Ve(t,r,d,l)||Ve(t,r,d,y)||Ve(t,r,l,p)||Ve(t,r,p,y)},Ge=function(t,r,a,u,d,l,p){var y=[],b=[r],O={},T={},M={};T[r.id]=0,M[r.id]=J(r,a,r);var C={};t.forEach(function(ye){C[ye.id]=ye});for(var q=function(){var ye,Me,Re,Ye=void 0,lt=1/0;if(b.forEach(function(Ot){M[Ot.id]<lt&&(lt=M[Ot.id],Ye=Ot)}),Ye===a){var Ct=[];return Ie(Ct,C,O,a.id),{v:Ct}}Me=Ye,(Re=(ye=b).indexOf(Me))>-1&&ye.splice(Re,1),y.push(Ye),function(Ot,er,Rt,Tt){var vr=[];return Ot.forEach(function(Fr){Fr!==er&&(Fr.x!==er.x&&Fr.y!==er.y||Ce(Fr,er,Rt)||Ce(Fr,er,Tt)||vr.push(Fr))}),cc(vr)}(t,Ye,u,d).forEach(function(Ot){if(y.indexOf(Ot)===-1){b.indexOf(Ot)===-1&&b.push(Ot);var er=M[Ye.id]+U(Ye,Ot);T[Ot.id]&&er>=T[Ot.id]||(O[Ot.id]=Ye.id,T[Ot.id]=er,M[Ot.id]=T[Ot.id]+J(Ot,a,r,l,p))}})};b.length;){var ie=q();if(Jl(ie)==="object")return ie.v}return[r,a]},ot=function(t){return mo(t)},at=function(t){for(var r=1;r<t.length-1;){var a=t[r-1],u=t[r],d=t[r+1];a.x===u.x&&u.x===d.x||a.y===u.y&&u.y===d.y?t.splice(r,1):r++}return t},ft=function(t,r,a,u,d){var l,p,y=ot(a),b=ot(u),O=Ju(y,d),T=Ju(b,d),M=lc(O,t),C=lc(T,r);if(l=O,p=T,2*Math.abs(l.centerX-p.centerX)<l.width+p.width&&2*Math.abs(l.centerY-p.centerY)<l.height+p.height){var q=Ue(t,r,M,C);return[t,M].concat(iv(q),[C,r])}var ie=Qa([M,C]),ye=zd(O,ie),Me=zd(T,ie),Re=[];Re=(Re=Re.concat(fc(ye))).concat(fc(Me));var Ye={x:(t.x+r.x)/2,y:(t.y+r.y)/2};[ie,ye,Me].forEach(function(Ct){Re=Re.concat(function(Ot,er){return function(Rt,Tt){return Tt<Rt.minX||Tt>Rt.maxX?[]:[{x:Tt,y:Rt.minY},{x:Tt,y:Rt.maxY}]}(Ot,er.x).concat(function(Rt,Tt){return Tt<Rt.minY||Tt>Rt.maxY?[]:[{x:Rt.minX,y:Tt},{x:Rt.maxX,y:Tt}]}(Ot,er.y))}(Ct,Ye).filter(function(Ot){return A(Ot,O)&&A(Ot,T)}))}),[{x:M.x,y:C.y},{x:C.x,y:M.y}].forEach(function(Ct){A(Ct,O)&&A(Ct,T)&&Re.push(Ct)}),Re.unshift(M),Re.push(C),Re=cc(Re);var lt=Ge(Re,M,C,y,b,t,r);return lt.unshift(t),lt.push(r),lt.length>2&&(lt=at(lt)),cc(lt)},ut=function(t){var r;if(t.length===1)r=[t[0],t[0]];else if(t.length>=2){for(var a=t[0],u=t[1],d=Jn(a.x,a.y,u.x,u.y),l=1;l<t.length-1;l++){var p=t[l],y=t[l+1],b=Jn(p.x,p.y,y.x,y.y);b>d&&(d=b,a=p,u=y)}r=[a,u]}return r},pt=function(t,r,a){var u=Mi(t,a),d=Mi(r,a);return u&&d},_t=function(t,r,a){var u=Mi(t,a),d=Mi(r,a);return!(u&&d)&&(u||d)},it=function(t,r,a){for(var u,d,l=mo(a),p=fc(l),y=0;y<p.length;y++)Ve(t,r,p[y],p[(y+1)%p.length])&&(d=[p[y],p[(y+1)%p.length]]);return d&&(u=function(b,O,T,M){var C=(O.y-b.y)*(M.x-T.x)-(b.x-O.x)*(T.y-M.y);if(C===0)return!1;var q=((O.x-b.x)*(M.x-T.x)*(T.y-b.y)+(O.y-b.y)*(M.x-T.x)*b.x-(M.y-T.y)*(O.x-b.x)*T.x)/C,ie=-((O.y-b.y)*(M.y-T.y)*(T.x-b.x)+(O.x-b.x)*(M.y-T.y)*b.y-(M.x-T.x)*(O.y-b.y)*T.y)/C;return(q-b.x)*(q-O.x)<=0&&(ie-b.y)*(ie-O.y)<=0&&(q-T.x)*(q-M.x)<=0&&(ie-T.y)*(ie-M.y)<=0&&{x:q,y:ie}}(t,r,d[0],d[1])),u},dt=function(t,r){var a;return t.x===r.x?a=Kr.VERTICAL:t.y===r.y&&(a=Kr.HORIZONTAL),a},Se=function(t){var r=t.split(" "),a=[];return r&&r.forEach(function(u){var d=uc(u.split(","),2),l=d[0],p=d[1];a.push({x:Number(l),y:Number(p)})}),a},Ue=function(t,r,a,u){var d=[];if(dt(t,a)===dt(r,u))t.y===a.y?(d.push({x:a.x,y:(a.y+u.y)/2}),d.push({x:u.x,y:(a.y+u.y)/2})):(d.push({x:(a.x+u.x)/2,y:a.y}),d.push({x:(a.x+u.x)/2,y:u.y}));else{var l={x:a.x,y:u.y},p=oa(l,t,a),y=oa(l,r,u);if(p||y)l={x:u.x,y:a.y};else{var b=st(l,t,a),O=st(l,r,u);b&&O&&(l={x:u.x,y:a.y})}d.push(l)}return d},st=function(t,r,a){return t.x===r.x&&t.x===a.x||t.y===r.y&&t.y===a.y},St=function(t){if(!t)return 0;for(var r=0,a=0;a<t.length;a++){var u=t.charCodeAt(a);t.match(/[A-Z]/)?r+=1.5:r+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return r},Je=function(t){var r=t.start,a=t.end,u=t.sourceNode,d=t.targetNode,l=t.offset,p=mo(u),y=mo(d),b=Ju(p,l),O=Ju(y,l);return{sNext:lc(b,r),ePre:lc(O,a)}},At=function(t){var r=t.replace(/M/g,"").replace(/C/g,",").split(",");return[tt(r[0]),tt(r[1]),tt(r[2]),tt(r[3])]},tt=function(t){var r=uc(t.replace(/(^\s*)/g,"").split(" "),2);return{x:+r[0],y:+r[1]}},vt=function(t){var r=At(t),a=uc(r,4),u=function(d,l,p,y){return function(b){if(b<0||b>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:d.x*Math.pow(1-b,3)+3*l.x*b*Math.pow(1-b,2)+3*p.x*Math.pow(b,2)*(1-b)+y.x*Math.pow(b,3),y:d.y*Math.pow(1-b,3)+3*l.y*b*Math.pow(1-b,2)+3*p.y*Math.pow(b,2)*(1-b)+y.y*Math.pow(b,3)}}(.95)}(a[0],a[1],a[2],a[3]);return[u,r[3]]},rt=function(t,r){for(var a,u=t.x,d=t.y,l=Se(r),p=Number.MAX_SAFE_INTEGER,y=[],b=0;b<l.length;b++)y.push({start:l[b],end:l[(b+1)%l.length]});if(y.forEach(function(C){var q=C.start,ie=C.end;if(q.x===ie.x){var ye={x:q.x,y:d};if(oa(ye,q,ie)){var Me=Math.abs(q.x-u);Me<p&&(p=Me,a=ye)}}else if(q.y===ie.y){var Re={x:u,y:q.y};if(oa(Re,q,ie)){var Ye=Math.abs(q.y-d);Ye<p&&(p=Ye,a=Re)}}}),!a){var O=y[0],T=O.start,M=O.end;a={x:T.x+(M.x-T.x)/2,y:T.y+(M.y-T.y)/2}}return a},yt=function(t){return Ru(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},$t=function(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))};n(204);var rr=function(){};function Et(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Qe(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var $e=window.document;function nr(t){var r=t.onDragStart,a=r===void 0?rr:r,u=t.onDragging,d=u===void 0?rr:u,l=t.onDragEnd,p=l===void 0?rr:l,y=t.step,b=y===void 0?1:y,O=t.isStopPropagation,T=O===void 0||O,M=!1,C=!1,q=0,ie=0,ye=0,Me=0;function Re(lt){if(T&&lt.stopPropagation(),C&&(M=!0,ye+=lt.clientX-q,Me+=lt.clientY-ie,q=lt.clientX,ie=lt.clientY,Math.abs(ye)>b||Math.abs(Me)>b)){var Ct=ye%b,Ot=Me%b,er=ye-Ct,Rt=Me-Ot;ye=Ct,Me=Ot,d({deltaX:er,deltaY:Rt,event:lt})}}function Ye(lt){if(T&&lt.stopPropagation(),C=!1,$e.removeEventListener("mousemove",Re,!1),$e.removeEventListener("mouseup",Ye,!1),M)return M=!1,p({event:lt})}return function(lt){if(lt.button===0)return T&&lt.stopPropagation(),C=!0,q=lt.clientX,ie=lt.clientY,$e.addEventListener("mousemove",Re,!1),$e.addEventListener("mouseup",Ye,!1),a({event:lt})}}var Te,Lt,br,ur,mr,Mr,cn,En,xr,yn,Wr,ln,gn,Yr=function(){function t(u){var d=this,l=u.onDragStart,p=l===void 0?rr:l,y=u.onDragging,b=y===void 0?rr:y,O=u.onDragEnd,T=O===void 0?rr:O,M=u.eventType,C=M===void 0?"":M,q=u.eventCenter,ie=q===void 0?null:q,ye=u.step,Me=ye===void 0?1:ye,Re=u.isStopPropagation,Ye=Re===void 0||Re,lt=u.model,Ct=lt===void 0?null:lt,Ot=u.data,er=Ot===void 0?null:Ot;(function(Rt,Tt){if(!(Rt instanceof Tt))throw new TypeError("Cannot call a class as a function")})(this,t),Qe(this,"onDragStart",void 0),Qe(this,"onDragging",void 0),Qe(this,"onDragEnd",void 0),Qe(this,"step",void 0),Qe(this,"isStopPropagation",void 0),Qe(this,"isDragging",!1),Qe(this,"isStartDragging",!1),Qe(this,"startX",0),Qe(this,"startY",0),Qe(this,"sumDeltaX",0),Qe(this,"sumDeltaY",0),Qe(this,"eventType",void 0),Qe(this,"eventCenter",void 0),Qe(this,"model",void 0),Qe(this,"data",void 0),Qe(this,"startTime",void 0),Qe(this,"handleMouseDown",function(Rt){var Tt,vr;if(Rt.button===0){d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging=!0,d.startX=Rt.clientX,d.startY=Rt.clientY,$e.addEventListener("mousemove",d.handleMouseMove,!1),$e.addEventListener("mouseup",d.handleMouseUp,!1);var Fr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEDOWN")],{e:Rt,data:d.data||Fr}),d.startTime=new Date().getTime()}}),Qe(this,"handleMouseMove",function(Rt){if(d.isStopPropagation&&Rt.stopPropagation(),d.isStartDragging&&(d.sumDeltaX+=Rt.clientX-d.startX,d.sumDeltaY+=Rt.clientY-d.startY,d.startX=Rt.clientX,d.startY=Rt.clientY,d.step<=1||Math.abs(d.sumDeltaX)>d.step||Math.abs(d.sumDeltaY)>d.step)){var Tt,vr=d.sumDeltaX%d.step,Fr=d.sumDeltaY%d.step,qr=d.sumDeltaX-vr,Vr=d.sumDeltaY-Fr;d.sumDeltaX=vr,d.sumDeltaY=Fr;var en,Cn=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();d.isDragging||((en=d.eventCenter)===null||en===void 0||en.emit(ir["".concat(d.eventType,"_DRAGSTART")],{e:Rt,data:d.data||Cn}),d.onDragStart({event:Rt})),d.isDragging=!0,Promise.resolve().then(function(){var Hn,Oo;d.onDragging({deltaX:qr,deltaY:Vr,event:Rt}),(Hn=d.eventCenter)===null||Hn===void 0||Hn.emit(ir["".concat(d.eventType,"_MOUSEMOVE")],{e:Rt,data:d.data||Cn}),(Oo=d.eventCenter)===null||Oo===void 0||Oo.emit(ir["".concat(d.eventType,"_DRAG")],{e:Rt,data:d.data||Cn})})}}),Qe(this,"handleMouseUp",function(Rt){d.isStartDragging=!1,d.isStopPropagation&&Rt.stopPropagation(),Promise.resolve().then(function(){var Tt,vr,Fr;$e.removeEventListener("mousemove",d.handleMouseMove,!1),$e.removeEventListener("mouseup",d.handleMouseUp,!1);var qr=(Tt=d.model)===null||Tt===void 0?void 0:Tt.getData();(vr=d.eventCenter)===null||vr===void 0||vr.emit(ir["".concat(d.eventType,"_MOUSEUP")],{e:Rt,data:d.data||qr}),d.isDragging&&(d.isDragging=!1,d.onDragEnd({event:Rt}),(Fr=d.eventCenter)===null||Fr===void 0||Fr.emit(ir["".concat(d.eventType,"_DROP")],{e:Rt,data:d.data||qr}))})}),Qe(this,"cancelDrag",function(){$e.removeEventListener("mousemove",d.handleMouseMove,!1),$e.removeEventListener("mouseup",d.handleMouseUp,!1),d.onDragEnd({event:null}),d.isDragging=!1}),this.onDragStart=p,this.onDragging=b,this.onDragEnd=T,this.step=Me,this.isStopPropagation=Ye,this.eventType=C,this.eventCenter=ie,this.model=Ct,this.data=er}var r,a;return r=t,(a=[{key:"setStep",value:function(u){this.step=u}}])&&Et(r.prototype,a),t}(),Sn={node:!1,edge:!1},Fn={node:!0,edge:!0};function nn(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function lr(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?nn(Object(a),!0).forEach(function(u){Wn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):nn(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function mn(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||Jt(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Nr(t){return function(r){if(Array.isArray(r))return _r(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Jt(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jt(t,r){if(t){if(typeof t=="string")return _r(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_r(t,r):void 0}}function _r(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Sr(t){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sr(t)}function Br(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function Jo(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Wn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function B(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Le,ke=200,jt=(Te=function(){function t(u){(function(ie,ye){if(!(ie instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,t),Wn(this,"rootEl",void 0),Br(this,"width",Lt,this),Br(this,"height",br,this),Wn(this,"theme",void 0),Wn(this,"eventCenter",void 0),Wn(this,"modelMap",new Map),Wn(this,"topElement",void 0),Wn(this,"animation",void 0),Wn(this,"idGenerator",void 0),Wn(this,"edgeGenerator",void 0),Wn(this,"nodeMoveRules",[]),Br(this,"edgeType",ur,this),Br(this,"nodes",mr,this),Br(this,"edges",Mr,this),Br(this,"overlapMode",cn,this),Br(this,"background",En,this),Br(this,"transformModel",xr,this),Br(this,"editConfigModel",yn,this),Br(this,"gridSize",Wr,this),Br(this,"partial",ln,this),Br(this,"fakerNode",gn,this);var d,l,p,y=u.container,b=u.background,O=b===void 0?{}:b,T=u.grid,M=u.idGenerator,C=u.edgeGenerator,q=u.animation;this.background=O,Sr(T)==="object"&&(this.gridSize=T.size),this.rootEl=y,this.editConfigModel=new El(u),this.eventCenter=new Ed,this.transformModel=new id(this.eventCenter),this.theme=Il(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(d=q)&&typeof d!="boolean"?Ws(sn(Sn),d):sn(d===!0?Fn:Sn),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=M,this.edgeGenerator=(l=this,typeof(p=C)!="function"?function(ie,ye,Me){return Object.assign({type:l.edgeType},Me)}:function(ie,ye,Me){var Re=p(ie,ye,Me);return Re?typeof Re=="string"?Object.assign({},Me,{type:Re}):Object.assign({type:Re},Me):{type:l.edgeType}}),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=fi()}var r,a;return r=t,a=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,d,l){return u[d.id]={index:l,model:d},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,d,l){return u[d.id]={index:l,model:d},u},{})}},{key:"modelsMap",get:function(){return[].concat(Nr(this.nodes),Nr(this.edges)).reduce(function(u,d){return u[d.id]=d,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(O){return u.push(O)}),this.edges.forEach(function(O){return u.push(O)}),u=u.sort(function(O,T){return O.zIndex-T.zIndex});for(var d=[],l=[-200,-200],p=[this.width+ke,this.height+ke],y=0;y<u.length;y++){var b=u[y];b.visible&&(!this.partial||b.isSelected||this.isElementInArea(b,l,p,!1,!1))&&d.push(b)}return d}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(l){return l.state===zr.TEXT_EDIT}),d=this.edges.find(function(l){return l.state===zr.TEXT_EDIT});return u||d}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(d){d.isSelected&&u.set(d.id,d)}),this.edges.forEach(function(d){d.isSelected&&u.set(d.id,d)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(d){d.isSelected&&u.push(d)}),u}},{key:"getAreaElement",value:function(u,d){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=arguments.length>4&&arguments[4]!==void 0&&arguments[4],b=[],O=[];this.nodes.forEach(function(C){return O.push(C)}),this.edges.forEach(function(C){return O.push(C)});for(var T=0;T<O.length;T++){var M=O[T];y&&!M.visible||!this.isElementInArea(M,u,d,l,p)||b.push(M)}return b}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var d;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(d=this.nodesMap[u])===null||d===void 0?void 0:d.model}},{key:"getPointByClient",value:function(u){var d=u.x,l=u.y,p=this.rootEl.getBoundingClientRect(),y={x:d-p.left,y:l-p.top},b=mn(this.transformModel.HtmlPointToCanvasPoint([y.x,y.y]),2);return{domOverlayPosition:y,canvasOverlayPosition:{x:b[0],y:b[1]}}}},{key:"isElementInArea",value:function(u,d,l){var p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],y=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===xn.NODE){for(var b=mo(u=u),O=b.minX,T=b.minY,M=b.maxX,C=b.maxY,q=[{x:O,y:T},{x:M,y:T},{x:M,y:C},{x:O,y:C}],ie=y,ye=0;ye<q.length;ye++){var Me=q[ye],Re=Me.x,Ye=Me.y,lt=this.transformModel.CanvasPointToHtmlPoint([Re,Ye]),Ct=mn(lt,2);if(Re=Ct[0],Ye=Ct[1],qs([Re,Ye],d,l)!==y){ie=!y;break}}return ie}if(u.BaseType===xn.EDGE){var Ot=u=u,er=Ot.startPoint,Rt=Ot.endPoint,Tt=this.transformModel.CanvasPointToHtmlPoint([er.x,er.y]),vr=this.transformModel.CanvasPointToHtmlPoint([Rt.x,Rt.y]),Fr=qs(Tt,d,l),qr=qs(vr,d,l);return p?Fr&&qr:Fr||qr}return!1}},{key:"graphDataToModel",value:function(u){var d=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Cs(u.nodes,function(l){var p=d.getModel(l.type);if(!p)throw new Error("找不到".concat(l.type,"对应的节点。"));var y=l.x,b=l.y;return y&&b&&(l.x=li(y,d.gridSize),l.y=li(b,d.gridSize),Sr(l.text)==="object"&&(l.text.x-=Ll(y,d.gridSize),l.text.y-=Ll(b,d.gridSize))),new p(l,d)}):this.nodes=[],u.edges?this.edges=Cs(u.edges,function(l){var p=d.getModel(l.type);if(!p)throw new Error("找不到".concat(l.type,"对应的边。"));return new p(l,d)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(l){var p=l.getData();p&&!l.virtual&&u.push(p)});var d=[];return this.nodes.forEach(function(l){var p=l.getData();p&&!l.virtual&&d.push(p)}),{nodes:d,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,d=[],l=0;l<this.nodes.length;l++){var p=this.nodes[l];if(p.isDragging){u=!0;break}d.push(p.getHistoryData())}if(u)return!1;for(var y=!1,b=[],O=0;O<this.edges.length;O++){var T=this.edges[O];if(T.isDragging){y=!0;break}b.push(T.getHistoryData())}return!y&&{nodes:d,edges:b}}},{key:"getEdgeModelById",value:function(u){var d;return(d=this.edgesMap[u])===null||d===void 0?void 0:d.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var d=[],l=0;l<this.edges.length;l++){var p=this.edges[l],y=this.edges[l].sourceNodeId===u,b=this.edges[l].targetNodeId===u;(y||b)&&d.push(p)}return d}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],d=this.selectElements,l={nodes:[],edges:[]};return d.forEach(function(p){if(p.BaseType===xn.NODE&&l.nodes.push(p.getData()),p.BaseType===xn.EDGE){var y=p.getData(),b=d.get(y.sourceNodeId)&&d.get(y.targetNodeId);(u||b)&&l.edges.push(y)}}),l}},{key:"updateAttributes",value:function(u,d){this.getElement(u).updateAttributes(d)}},{key:"changeNodeId",value:function(u,d){return d||(d=fi()),this.nodesMap[d]?"":this.nodesMap[u]?(this.edges.forEach(function(l){l.sourceNodeId===u&&(l.sourceNodeId=d),l.targetNodeId===u&&(l.targetNodeId=d)}),this.nodesMap[u].model.id=d,this.nodesMap[d]=this.nodesMap[u],d):""}},{key:"changeEdgeId",value:function(u,d){return d||(d=fi()),this.edgesMap[d]?"":this.edgesMap[u]?(this.edges.forEach(function(l){l.id===u&&l.changeEdgeId(d)}),d):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,d){return this.modelMap.set(u,d)}},{key:"toFront",value:function(u){var d,l,p,y=((d=this.nodesMap[u])===null||d===void 0?void 0:d.model)||((l=this.edgesMap[u])===null||l===void 0?void 0:l.model);y&&(this.overlapMode===uo.DEFAULT&&((p=this.topElement)===null||p===void 0||p.setZIndex(),y.setZIndex(9999),this.topElement=y),this.overlapMode===uo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,d){var l,p,y,b=((l=this.nodesMap[u])===null||l===void 0?void 0:l.model)||((p=this.edgesMap[u])===null||p===void 0?void 0:p.model);b&&(typeof d=="number"&&(y=d),d==="top"&&(y=Ya()),d==="bottom"&&(y=--Yl),b.setZIndex(y))}},{key:"deleteNode",value:function(u){var d=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(ir.NODE_DELETE,{data:d})}},{key:"addNode",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD,l=arguments.length>2?arguments[2]:void 0,p=Xn(u);p.id&&this.nodesMap[u.id]&&delete p.id;var y=this.getModel(p.type);if(!y)throw new Error("找不到".concat(p.type,"对应的节点，请确认是否已注册此类型节点。"));p.x=li(p.x,this.gridSize),p.y=li(p.y,this.gridSize);var b=new y(p,this);this.nodes.push(b);var O=b.getData(),T={data:O};return l&&(T.e=l),this.eventCenter.emit(d,T),b}},{key:"cloneNode",value:function(u){var d=this.getNodeModelById(u),l=d.getData();l.x+=30,l.y+=30,delete l.id,l.text&&(l.text.x+=30,l.text.y+=30);var p=this.addNode(l);return p.setSelected(!0),d.setSelected(!1),p.getData()}},{key:"moveNode",value:function(u,d,l){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var b=y.model,O=b.getMoveDistance(d,l,p),T=mn(O,2);d=T[0],l=T[1],this.moveEdge(u,d,l)}}},{key:"moveNode2Coordinate",value:function(u,d,l){var p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],y=this.nodesMap[u];if(y){var b=y.model,O=b.x,T=b.y,M=d-O,C=l-T;this.moveNode(u,M,C,p)}}},{key:"editText",value:function(u){this.setElementStateById(u,zr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var d=Xn(u),l=d.type;l||(l=this.edgeType),d.id&&this.edgesMap[d.id]&&delete d.id;var p=this.getModel(l);if(!p)throw new Error("找不到".concat(l,"对应的边，请确认是否已注册此类型边。"));var y=new p(lr(lr({},d),{},{type:l}),this),b=y.getData();return this.edges.push(y),this.eventCenter.emit(ir.EDGE_ADD,{data:b}),y}},{key:"moveEdge",value:function(u,d,l){for(var p=0;p<this.edges.length;p++){var y,b=this.edges[p],O=b.textPosition,T=O.x,M=O.y,C=this.edges[p].sourceNodeId===u,q=this.edges[p].targetNodeId===u;if(C&&b.moveStartPoint(d,l),q&&b.moveEndPoint(d,l),C||q)if(b.customTextPosition===!0)b.resetTextPosition();else if(b.modelType===Pr.POLYLINE_EDGE&&(y=b.text)!==null&&y!==void 0&&y.value){var ie=b.text,ye=rt(ie,b.points);b.moveText(ye.x-ie.x,ye.y-ie.y)}else{var Me=b.textPosition,Re=Me.x,Ye=Me.y;b.moveText(Re-T,Ye-M)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,d){for(var l=0;l<this.edges.length;l++)if(this.edges[l].sourceNodeId===u&&this.edges[l].targetNodeId===d){var p=this.edges[l].getData();this.edges.splice(l,1),l--,this.eventCenter.emit(ir.EDGE_DELETE,{data:p})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var d=this.edgesMap[u].index,l=this.edgesMap[u].model.getData();this.edges.splice(d,1),this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeBySource",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].sourceNodeId===u){var l=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeByTarget",value:function(u){for(var d=0;d<this.edges.length;d++)if(this.edges[d].targetNodeId===u){var l=this.edges[d].getData();this.edges.splice(d,1),d--,this.eventCenter.emit(ir.EDGE_DELETE,{data:l})}}},{key:"setElementStateById",value:function(u,d,l){this.nodes.forEach(function(p){p.id===u?p.setElementState(d,l):p.setElementState(zr.DEFAULT)}),this.edges.forEach(function(p){p.id===u?p.setElementState(d,l):p.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(u,d){this.nodes.forEach(function(l){l.id===u&&l.updateText(d)}),this.edges.forEach(function(l){l.id===u&&l.updateText(d)})}},{key:"selectNodeById",value:function(u){var d,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l||this.clearSelectElements();var p=(d=this.nodesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var d,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l||this.clearSelectElements();var p=(d=this.edgesMap[u])===null||d===void 0?void 0:d.model;p==null||p.setSelected(!0)}},{key:"selectElementById",value:function(u){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];d||this.clearSelectElements();var l=this.getElement(u);l==null||l.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(d){d==null||d.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===uo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,d,l){for(var p=this,y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=u.reduce(function(Re,Ye){var lt=p.nodesMap[Ye].model.getMoveDistance(d,l,y);return Re[Ye]=lt,Re},{}),O=0;O<this.edges.length;O++){var T=this.edges[O],M=b[T.sourceNodeId],C=void 0,q=void 0;if(M){var ie=mn(M,2);C=ie[0],q=ie[1],T.moveStartPoint(C,q)}var ye=b[T.targetNodeId];if(ye){var Me=mn(ye,2);C=Me[0],q=Me[1],T.moveEndPoint(C,q)}(M||ye)&&T.moveText(C,q)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,d){var l=this.getNodeModelById(u);if(l){var p=l.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("找不到".concat(d,"对应的节点，请确认是否已注册此类型节点。"));var b=new y(p,this);this.nodes.splice(this.nodesMap[u].index,1,b),this.getNodeEdges(u).forEach(function(O){if(O.sourceNodeId===u){var T=Rd(b,O.startPoint,b.width,b.height);O.updateStartPoint(T)}if(O.targetNodeId===u){var M=Rd(b,O.endPoint,b.width,b.height);O.updateEndPoint(M)}})}}},{key:"changeEdgeType",value:function(u,d){var l=this.getEdgeModelById(u);if(l&&l.type!==d){var p=l.getData();p.type=d;var y=this.getModel(d);if(!y)throw new Error("找不到".concat(d,"对应的节点，请确认是否已注册此类型节点。"));delete p.pointsList;var b=new y(p,this);this.edges.splice(this.edgesMap[u].index,1,b)}}},{key:"getNodeIncomingEdge",value:function(u){var d=[];return this.edges.forEach(function(l){l.targetNodeId===u&&d.push(l)}),d}},{key:"getNodeOutgoingEdge",value:function(u){var d=[];return this.edges.forEach(function(l){l.sourceNodeId===u&&d.push(l)}),d}},{key:"getNodeIncomingNode",value:function(u){var d=this,l=[];return this.edges.forEach(function(p){p.targetNodeId===u&&l.push(d.nodesMap[p.sourceNodeId].model)}),l}},{key:"getNodeOutgoingNode",value:function(u){var d=this,l=[];return this.edges.forEach(function(p){p.sourceNodeId===u&&l.push(d.nodesMap[p.targetNodeId].model)}),l}},{key:"setTheme",value:function(u){this.theme=Il(lr(lr({},this.theme),u))}},{key:"resize",value:function(u,d){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=d||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,d=[],l=[];u.forEach(function(M){var C=M.x,q=M.y,ie=M.width,ye=M.height,Me=M.getNodeStyle().strokeWidth,Re=Me===void 0?0:Me;d=d.concat([C+ie/2+Re,C-ie/2-Re]),l=l.concat([q+ye/2+Re,q-ye/2-Re])});var p=Math.min.apply(Math,Nr(d)),y=Math.max.apply(Math,Nr(d)),b=Math.min.apply(Math,Nr(l)),O=y-p||0,T=Math.max.apply(Math,Nr(l))-b||0;return{virtualRectWidth:O,virtualRectHeight:T,virtualRectCenterPositionX:p+O/2,virtualRectCenterPositionY:b+T/2}}},{key:"translateCenter",value:function(){var u=this.nodes,d=this.width,l=this.height,p=this.rootEl,y=this.transformModel;if(u.length){var b=d||p.clientWidth,O=l||p.clientHeight,T=this.getVirtualRectSize(),M=T.virtualRectCenterPositionX,C=T.virtualRectCenterPositionY;y.focusOn(M,C,b,O)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,l=this.nodes,p=this.width,y=this.height,b=this.rootEl,O=this.transformModel;if(l.length){var T=p||b.clientWidth,M=y||b.clientHeight,C=this.getVirtualRectSize(),q=C.virtualRectWidth,ie=C.virtualRectHeight,ye=C.virtualRectCenterPositionX,Me=C.virtualRectCenterPositionY,Re=(q+d)/T,Ye=(ie+u)/M,lt=0;lt=1/Math.max(Re,Ye);var Ct=[T/2,M/2];O.zoom(lt,Ct),O.focusOn(ye,Me,T,M)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],a&&Jo(r.prototype,a),t}(),Lt=B(Te.prototype,"width",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br=B(Te.prototype,"height",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=B(Te.prototype,"edgeType",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=B(Te.prototype,"nodes",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=B(Te.prototype,"edges",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn=B(Te.prototype,"overlapMode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return uo.DEFAULT}}),En=B(Te.prototype,"background",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=B(Te.prototype,"transformModel",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yn=B(Te.prototype,"editConfigModel",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=B(Te.prototype,"gridSize",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ln=B(Te.prototype,"partial",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gn=B(Te.prototype,"fakerNode",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B(Te.prototype,"nodesMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"nodesMap"),Te.prototype),B(Te.prototype,"edgesMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"edgesMap"),Te.prototype),B(Te.prototype,"modelsMap",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"modelsMap"),Te.prototype),B(Te.prototype,"sortElements",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"sortElements"),Te.prototype),B(Te.prototype,"textEditElement",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"textEditElement"),Te.prototype),B(Te.prototype,"selectElements",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectElements"),Te.prototype),B(Te.prototype,"selectNodes",[f.m],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodes"),Te.prototype),B(Te.prototype,"setFakerNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setFakerNode"),Te.prototype),B(Te.prototype,"removeFakerNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"removeFakerNode"),Te.prototype),B(Te.prototype,"setModel",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setModel"),Te.prototype),B(Te.prototype,"toFront",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"toFront"),Te.prototype),B(Te.prototype,"setElementZIndex",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementZIndex"),Te.prototype),B(Te.prototype,"deleteNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteNode"),Te.prototype),B(Te.prototype,"addNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"addNode"),Te.prototype),B(Te.prototype,"cloneNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"cloneNode"),Te.prototype),B(Te.prototype,"moveNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode"),Te.prototype),B(Te.prototype,"moveNode2Coordinate",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNode2Coordinate"),Te.prototype),B(Te.prototype,"editText",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"editText"),Te.prototype),B(Te.prototype,"addEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"addEdge"),Te.prototype),B(Te.prototype,"moveEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveEdge"),Te.prototype),B(Te.prototype,"deleteEdgeBySourceAndTarget",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySourceAndTarget"),Te.prototype),B(Te.prototype,"deleteEdgeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeById"),Te.prototype),B(Te.prototype,"deleteEdgeBySource",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeBySource"),Te.prototype),B(Te.prototype,"deleteEdgeByTarget",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"deleteEdgeByTarget"),Te.prototype),B(Te.prototype,"setElementStateById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setElementStateById"),Te.prototype),B(Te.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"updateText"),Te.prototype),B(Te.prototype,"selectNodeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectNodeById"),Te.prototype),B(Te.prototype,"selectEdgeById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectEdgeById"),Te.prototype),B(Te.prototype,"selectElementById",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"selectElementById"),Te.prototype),B(Te.prototype,"clearSelectElements",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearSelectElements"),Te.prototype),B(Te.prototype,"moveNodes",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"moveNodes"),Te.prototype),B(Te.prototype,"setDefaultEdgeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setDefaultEdgeType"),Te.prototype),B(Te.prototype,"changeNodeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeNodeType"),Te.prototype),B(Te.prototype,"changeEdgeType",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"changeEdgeType"),Te.prototype),B(Te.prototype,"getNodeIncomingEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingEdge"),Te.prototype),B(Te.prototype,"getNodeOutgoingEdge",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingEdge"),Te.prototype),B(Te.prototype,"getNodeIncomingNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeIncomingNode"),Te.prototype),B(Te.prototype,"getNodeOutgoingNode",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"getNodeOutgoingNode"),Te.prototype),B(Te.prototype,"setTheme",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"setTheme"),Te.prototype),B(Te.prototype,"resize",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"resize"),Te.prototype),B(Te.prototype,"clearData",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"clearData"),Te.prototype),B(Te.prototype,"translateCenter",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"translateCenter"),Te.prototype),B(Te.prototype,"fitView",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"fitView"),Te.prototype),B(Te.prototype,"openEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"openEdgeAnimation"),Te.prototype),B(Te.prototype,"closeEdgeAnimation",[f.k],Object.getOwnPropertyDescriptor(Te.prototype,"closeEdgeAnimation"),Te.prototype),Te),Er=jt;function X(t){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},X(t)}function k(){return k=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},k.apply(this,arguments)}function ue(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Oe(t,r){return Oe=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Oe(t,r)}function Pe(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=ge(t);if(r){var d=ge(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return le(this,a)}}function le(t,r){if(r&&(X(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oe(t)}function oe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ge(t)}function H(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var re,z=vi(Le=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Oe(l,p)})(d,t);var r,a,u=Pe(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),H(oe(p=u.call(this)),"stepDrag",void 0),H(oe(p),"stepScrollX",0),H(oe(p),"stepScrollY",0),H(oe(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY;p.setState({isDragging:!0});var q=p.props.graphModel,ie=q.transformModel;q.editConfigModel.stopMoveGraph||ie.translate(M,C)}),H(oe(p),"onDragEnd",function(){p.setState({isDragging:!1})}),H(oe(p),"zoomHandler",function(T){var M=p.props,C=M.graphModel,q=C.editConfigModel,ie=C.transformModel,ye=C.gridSize,Me=M.graphModel,Re=T.deltaX,Ye=T.deltaY;if(q.stopScrollGraph||T.ctrlKey===!0){if(!q.stopZoomGraph){T.preventDefault();var lt=Me.getPointByClient({x:T.clientX,y:T.clientY}).canvasOverlayPosition,Ct=lt.x,Ot=lt.y;ie.zoom(T.deltaY<0,[Ct,Ot])}}else{if(T.preventDefault(),p.stepScrollX+=Re,p.stepScrollY+=Ye,Math.abs(p.stepScrollX)>=ye){var er=p.stepScrollX%ye,Rt=p.stepScrollX-er;ie.translate(-Rt*ie.SCALE_X,0),p.stepScrollX=er}if(Math.abs(p.stepScrollY)>=ye){var Tt=p.stepScrollY%ye,vr=p.stepScrollY-Tt;ie.translate(0,-vr*ie.SCALE_Y),p.stepScrollY=Tt}}}),H(oe(p),"clickHandler",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){var M=p.props.graphModel;M.selectElements.size>0&&M.clearSelectElements(),M.eventCenter.emit(ir.BLANK_CLICK,{e:T})}}),H(oe(p),"handleContextMenu",function(T){if(T.target.getAttribute("name")==="canvas-overlay"){T.preventDefault();var M=p.props.graphModel,C=M.getPointByClient({x:T.clientX,y:T.clientY});M.eventCenter.emit(ir.BLANK_CONTEXTMENU,{e:T,position:C})}}),H(oe(p),"mouseDownHandler",function(T){var M=p.props.graphModel,C=M.eventCenter,q=M.editConfigModel,ie=M.transformModel.SCALE_X,ye=M.gridSize,Me=T.target,Re=!q.adjustEdge&&!q.adjustNodePosition;(Me.getAttribute("name")==="canvas-overlay"||Re)&&(q.stopMoveGraph?C.emit(ir.BLANK_MOUSEDOWN,{e:T}):(p.stepDrag.setStep(ye*ie),p.stepDrag.handleMouseDown(T)),p.clickHandler(T))});var y=l.graphModel,b=y.gridSize,O=y.eventCenter;return p.stepDrag=new Yr({onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:b,eventType:"BLANK",isStopPropagation:!1,eventCenter:O,model:null}),p.state={isDragging:!1},p}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props,y=p.children,b=p.dnd,O=this.state.isDragging;return Object(xe.g)("svg",k({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:O?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},b.eventMap()),Object(xe.g)("g",{transform:l},y))}}])&&ue(r.prototype,a),d}(xe.a))||Le;function _e(t){return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_e(t)}function je(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function We(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ke(t,r){return Ke=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ke(t,r)}function He(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ut(t);if(r){var d=Ut(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ct(this,a)}}function ct(t,r){if(r&&(_e(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Ut(t){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ut(t)}var hr=vi(re=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ke(l,p)})(d,t);var r,a,u=He(d);function d(){return je(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var l=this.props,p=l.tool,y=l.graphModel,b=p.getTools().map(function(O){return Object(xe.g)(O,{graphModel:y,logicFlow:p.instance})});return p.components=b,b}},{key:"triggerToolRender",value:function(){var l=this.props,p=l.tool,y=l.graphModel,b=document.querySelector("#ToolOverlay_".concat(y.flowId)),O=p.getInstance();O.components.forEach(function(T){return T(O,b)}),O.components=[]}},{key:"render",value:function(){var l=this.props.graphModel;return Object(xe.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(l.flowId)},this.getTools())}}])&&We(r.prototype,a),d}(xe.a))||re;function It(t){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},It(t)}function Qt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fr(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function jr(t,r){return jr=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},jr(t,r)}function on(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=eu(t);if(r){var d=eu(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return eo(this,a)}}function eo(t,r){if(r&&(It(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function eu(t){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},eu(t)}var bo,Hd=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&jr(l,p)})(d,t);var r,a,u=on(d);function d(){return Qt(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.background;return Object(xe.g)("div",{className:"lf-background"},Object(xe.g)("div",{style:l,className:"lf-background-area"}))}}])&&fr(r.prototype,a),d}(xe.a);function _o(t){return _o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_o(t)}function Xd(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $O(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function av(t,r){return av=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},av(t,r)}function KO(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Vd(t);if(r){var d=Vd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return qO(this,a)}}function qO(t,r){if(r&&(_o(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dm(t)}function Dm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vd(t){return Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Vd(t)}function ZO(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Cm=vi(bo=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&av(l,p)})(d,t);var r,a,u=KO(d);function d(){var l;Xd(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return ZO(Dm(l=u.call.apply(u,[this].concat(y))),"id",fi()),l}return r=d,(a=[{key:"renderDot",value:function(){var l=this.props,p=l.config,y=p.color,b=p.thickness,O=b===void 0?2:b,T=l.size,M=l.visible,C=Math.min(Math.max(2,O),T/2),q=1;return M||(q=0),Object(xe.g)("rect",{width:C,height:C,rx:C/2,ry:C/2,fill:y,opacity:q})}},{key:"renderMesh",value:function(){var l=this.props,p=l.config,y=p.color,b=p.thickness,O=b===void 0?1:b,T=l.size,M=l.visible,C=Math.min(Math.max(1,O),T/2),q="M ".concat(T," 0 H0 M0 0 V0 ").concat(T),ie=1;return M||(ie=0),Object(xe.g)("path",{d:q,stroke:y,strokeWidth:C,opacity:ie})}},{key:"render",value:function(){var l=this.props,p=l.type,y=l.size,b=l.graphModel.transformModel,O=[b.SCALE_X,b.SKEW_Y,b.SKEW_X,b.SCALE_Y,b.TRANSLATE_X,b.TRANSLATE_Y].join(","),T="matrix(".concat(O,")");return Object(xe.g)("div",{className:"lf-grid"},Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(xe.g)("defs",null,Object(xe.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:T,x:"0",y:"0",width:y,height:y},p==="dot"&&this.renderDot(),p==="mesh"&&this.renderMesh())),Object(xe.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&$O(r.prototype,a),d}(xe.a))||bo;Cm.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},n(52);function uv(t){return uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},uv(t)}function JO(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Im(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Im(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Im(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var Lm,dc=function(t){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(t).forEach(function(a){var u=JO(a,2),d=u[0],l=u[1];(d==="style"||uv(l)!=="object")&&(r[d]=l)}),Object(xe.g)("line",r)};function sv(t){return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sv(t)}function Fm(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Wd(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Fm(Object(a),!0).forEach(function(u){QO(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fm(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function QO(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function e1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function t1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function cv(t,r){return cv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},cv(t,r)}function r1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Yd(t);if(r){var d=Yd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return n1(this,a)}}function n1(t,r){if(r&&(sv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Yd(t)}var Bm,o1=vi(Lm=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&cv(l,p)})(d,t);var r,a,u=r1(d);function d(){return e1(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.snaplineModel,p=l.position,y=l.isShowHorizontal,b=l.isShowVertical,O=l.getStyle(),T=p.x,M=T===void 0?0:T,C=p.y,q=C===void 0?0:C,ie=Wd(Wd({x1:-1e5,y1:q,x2:1e5,y2:q},O),{},{stroke:y?O.stroke:"none"}),ye=Wd(Wd({x1:M,y1:-1e5,x2:M,y2:1e5},O),{},{stroke:b?O.stroke:"none"});return Object(xe.g)("g",{className:"lf-snapline"},Object(xe.g)(dc,ie),Object(xe.g)(dc,ye))}}])&&t1(r.prototype,a),d}(xe.a))||Lm;function lv(t){return lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},lv(t)}function i1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Gm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Gm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function tu(t){var r=t.x,a=t.y,u=t.width,d=t.height,l=t.className,p=t.radius,y=r-u/2,b=a-d/2,O={};return Object.entries(t).forEach(function(T){var M=i1(T,2),C=M[0],q=M[1];lv(q)!=="object"&&(O[C]=q)}),O.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",p&&(O.rx=p,O.ry=p),O.x=y,O.y=b,Object(xe.g)("rect",O)}function fv(t){return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fv(t)}function pc(){return pc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},pc.apply(this,arguments)}function Um(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function zm(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Um(Object(a),!0).forEach(function(u){a1(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Um(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function a1(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function u1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function s1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function dv(t,r){return dv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},dv(t,r)}function c1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=$d(t);if(r){var d=$d(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return l1(this,a)}}function l1(t,r){if(r&&(fv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function $d(t){return $d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},$d(t)}tu.defaultProps={className:"",radius:""};var Hm,f1=vi(Bm=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&dv(l,p)})(d,t);var r,a,u=c1(d);function d(){return u1(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getNodesOutline",value:function(){var l=this.props.graphModel,p=l.nodes,y=l.editConfigModel,b=y.hoverOutline,O=y.nodeSelectedOutline,T=[];return p.forEach(function(M){if(M.isHovered||M.isSelected){var C=M.isHovered,q=M.isSelected,ie=M.x,ye=M.y,Me=M.width,Re=M.height;if(O&&q||b&&C){var Ye=M.getOutlineStyle(),lt={};if(Object.keys(Ye).forEach(function(Ot){Ot!=="hover"&&(lt[Ot]=Ye[Ot])}),C){var Ct=Ye.hover;lt=zm(zm({},lt),Ct)}T.push(Object(xe.g)(tu,pc({className:"lf-outline-node",x:ie,y:ye,width:Me+10,height:Re+10},lt)))}}}),T}},{key:"getEdgeOutline",value:function(){for(var l=this.props.graphModel,p=l.edges,y=l.editConfigModel,b=y.edgeSelectedOutline,O=y.hoverOutline,T=[],M=0;M<p.length;M++){var C=p[M];(b&&C.isSelected||O&&C.isHovered)&&(C.modelType===Pr.LINE_EDGE?T.push(this.getLineOutline(C)):C.modelType===Pr.POLYLINE_EDGE?T.push(this.getPolylineOutline(C)):C.modelType===Pr.BEZIER_EDGE&&T.push(this.getBezierOutline(C)))}return T}},{key:"getLineOutline",value:function(l){var p=l.startPoint,y=l.endPoint,b=(p.x+y.x)/2,O=(p.y+y.y)/2,T=Math.abs(p.x-y.x)+10,M=Math.abs(p.y-y.y)+10,C=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline-edge",x:b,y:O,width:T,height:M},C))}},{key:"getPolylineOutline",value:function(l){var p=l.points,y=Se(p),b=Qa(y,8),O=b.x,T=b.y,M=b.width,C=b.height,q=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline",x:O,y:T,width:M,height:C},q))}},{key:"getBezierOutline",value:function(l){var p=l.path,y=At(p),b=Qa(y,8),O=b.x,T=b.y,M=b.width,C=b.height,q=l.getOutlineStyle();return Object(xe.g)(tu,pc({className:"lf-outline",x:O,y:T,width:M,height:C},q))}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&s1(r.prototype,a),d}(xe.a))||Bm;function pv(t){return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pv(t)}function d1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Xm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Xm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Ql(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.r,p=l===void 0?4:l,y=t.className,b={cx:a,cy:d,r:p,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(O){var T=d1(O,2),M=T[0],C=T[1];pv(C)!=="object"&&(b[M]=C)}),b.className=y?"lf-basic-shape ".concat(y):"lf-basic-shape",Object(xe.g)("circle",b)}function hv(t){return hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hv(t)}function p1(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Vm(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Vm(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vm(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function ef(){return ef=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},ef.apply(this,arguments)}function Wm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ym(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function $m(t,r,a){return r&&Ym(t.prototype,r),a&&Ym(t,a),t}function Km(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&vv(t,r)}function vv(t,r){return vv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},vv(t,r)}function qm(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=qd(t);if(r){var d=qd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return h1(this,a)}}function h1(t,r){if(r&&(hv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kd(t)}function Kd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qd(t){return qd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},qd(t)}function yv(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Zm,Jm=function(t){Km(a,t);var r=qm(a);function a(){var u;return Wm(this,a),yv(Kd(u=r.call(this)),"dragHandler",void 0),yv(Kd(u),"onDragging",function(d){var l=d.event,p=u.props,y=p.graphModel,b=p.bezierModel,O=p.type,T=y.getPointByClient({x:l.clientX,y:l.clientY}).canvasOverlayPosition,M=T.x,C=T.y;b.updateAdjustAnchor({x:M,y:C},O)}),yv(Kd(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new Yr({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return $m(a,[{key:"render",value:function(){var u=this,d=this.props.position,l=d.x,p=d.y,y=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(xe.g)(Ql,ef({className:"lf-bezier-adjust-anchor",x:l,y:p},y,{onMouseDown:function(b){u.dragHandler.handleMouseDown(b)}}))}}]),a}(xe.a),v1=vi(Hm=function(t){Km(a,t);var r=qm(a);function a(){return Wm(this,a),r.apply(this,arguments)}return $m(a,[{key:"getBezierAdjust",value:function(u,d){var l=u.path,p=u.id,y=p1(At(l),4),b=y[0],O=y[1],T=y[2],M=y[3],C=u.getEdgeStyle().adjustLine,q=[];return q.push(Object(xe.g)(dc,ef({x1:b.x,y1:b.y,x2:O.x,y2:O.y},C))),q.push(Object(xe.g)(Jm,{position:O,bezierModel:u,graphModel:d,key:"".concat(p,"_ePre"),type:"sNext"})),q.push(Object(xe.g)(dc,ef({x1:M.x,y1:M.y,x2:T.x,y2:T.y},C))),q.push(Object(xe.g)(Jm,{position:T,bezierModel:u,graphModel:d,key:"".concat(p,"_sNext"),type:"ePre"})),q}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,d=u.edges,l=[],p=0;p<d.length;p++){var y=d[p];y.isSelected&&y.modelType===Pr.BEZIER_EDGE&&y.draggable&&l.push(this.getBezierAdjust(y,u))}return l}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),a}(xe.a))||Hm;function gv(t){return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gv(t)}function y1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function g1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function mv(t,r){return mv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},mv(t,r)}function m1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Zd(t);if(r){var d=Zd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return b1(this,a)}}function b1(t,r){if(r&&(gv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Zd(t)}var Qm,_1=vi(Zm=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&mv(l,p)})(d,t);var r,a,u=m1(d);function d(){return y1(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel.transformModel.getTransformStyle().transform,p=this.props.children;return Object(xe.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(xe.g)("g",{transform:l},p))}}])&&g1(r.prototype,a),d}(xe.a))||Zm;function bv(t){return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bv(t)}function _v(){return _v=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},_v.apply(this,arguments)}function E1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function w1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Ev(t,r){return Ev=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Ev(t,r)}function O1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Jd(t);if(r){var d=Jd(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return x1(this,a)}}function x1(t,r){if(r&&(bv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Jd(t)}var S1=vi(Qm=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Ev(l,p)})(d,t);var r,a,u=O1(d);function d(){return E1(this,d),u.apply(this,arguments)}return r=d,a=[{key:"getComponent",value:function(l,p){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",b=this.props.getView,O=b(l.type);return Object(xe.g)(O,{key:l.id,model:l,graphModel:p,overlay:y})}},{key:"render",value:function(){var l=this,p=this.props,y=p.graphModel,b=p.tool,O=p.options,T=p.dnd,M=p.snaplineModel,C={};O.width&&(C.width="".concat(y.width,"px")),O.height&&(C.height="".concat(y.height,"px"));var q=O.grid,ie=y.fakerNode,ye=y.editConfigModel.adjustEdge;return Object(xe.g)("div",{className:"lf-graph","flow-id":y.flowId,style:C},Object(xe.g)(z,{graphModel:y,dnd:T},Object(xe.g)("g",{className:"lf-base"},Cs(y.sortElements,function(Me){return l.getComponent(Me,y)})),ie?this.getComponent(ie,y):""),Object(xe.g)(_1,{graphModel:y},Object(xe.g)(f1,{graphModel:y}),ye?Object(xe.g)(v1,{graphModel:y}):"",O.snapline!==!1?Object(xe.g)(o1,{snaplineModel:M}):""),Object(xe.g)(hr,{graphModel:y,tool:b}),O.background&&Object(xe.g)(Hd,{background:O.background}),O.grid&&Object(xe.g)(Cm,_v({},q,{graphModel:y})))}}],a&&w1(r.prototype,a),d}(xe.a))||Qm,T1=S1;function eb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Qd(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?eb(Object(a),!0).forEach(function(u){ca(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):eb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function A1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ca(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var P1=function(){function t(u){var d=this;(function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")})(this,t),ca(this,"nodeConfig",void 0),ca(this,"lf",void 0),ca(this,"fakerNode",void 0),ca(this,"stopDrag",function(){d.nodeConfig=null,window.document.removeEventListener("mouseup",d.stopDrag)}),ca(this,"dragEnter",function(p){d.nodeConfig&&!d.fakerNode&&(d.fakerNode=d.lf.createFakerNode(Qd(Qd({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY}))))}),ca(this,"onDragOver",function(p){if(p.preventDefault(),d.fakerNode){var y=d.clientToLocalPoint({x:p.clientX,y:p.clientY}),b=y.x,O=y.y;d.fakerNode.moveTo(b,O);var T=d.fakerNode.getData();d.lf.setNodeSnapLine(T),d.lf.graphModel.eventCenter.emit(ir.NODE_DND_DRAG,{data:T})}return!1}),ca(this,"onDragLeave",function(){d.fakerNode&&(d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null)}),ca(this,"onDrop",function(p){d.lf.graphModel&&p&&d.nodeConfig&&(d.lf.addNode(Qd(Qd({},d.nodeConfig),d.clientToLocalPoint({x:p.clientX,y:p.clientY})),ir.NODE_DND_ADD,p),p.preventDefault(),p.stopPropagation(),d.nodeConfig=null,d.lf.removeNodeSnapLine(),d.lf.graphModel.removeFakerNode(),d.fakerNode=null)});var l=u.lf;this.lf=l}var r,a;return r=t,(a=[{key:"clientToLocalPoint",value:function(u){var d=u.x,l=u.y,p=al(this.lf.options,["grid","size"]),y=this.lf.graphModel.getPointByClient({x:d,y:l}).canvasOverlayPosition,b=y.x,O=y.y;return{x:li(b,p),y:li(O,p)}}},{key:"startDrag",value:function(u){this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&A1(r.prototype,a),t}();function tb(t){var r=t.container,a=t.grid,u=t.width,d=t.height;if(!r)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof d=="string")throw new Error("width或height不支持传入字符串，请传数字");return a&&(t.grid=Zn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},a)),Zn({},nb,t)}var Hr,rb,nb={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function wv(t){return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wv(t)}function Ov(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return ob(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return ob(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ob(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function ib(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function ep(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?ib(Object(a),!0).forEach(function(u){ab(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ib(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function N1(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function j1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function M1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function tf(){return tf=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=R1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},tf.apply(this,arguments)}function R1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=ru(t))!==null;);return t}function xv(t,r){return xv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},xv(t,r)}function k1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=ru(t);if(r){var d=ru(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return D1(this,a)}}function D1(t,r){if(r&&(wv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tp(t)}function tp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ru(t){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ru(t)}function ab(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function di(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Sv=(Hr=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&xv(l,p)})(d,t);var r,a,u=k1(d);function d(){var l;j1(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return ab(tp(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.BEZIER_EDGE),N1(tp(l),"path",rb,tp(l)),l}return r=d,(a=[{key:"initEdgeData",value:function(l){this.offset=100,tf(ru(d.prototype),"initEdgeData",this).call(this,l)}},{key:"getEdgeStyle",value:function(){var l=this.graphModel.theme.bezier;return ep(ep({},tf(ru(d.prototype),"getEdgeStyle",this).call(this)),sn(l))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var l=0,p=0;return this.pointsList.forEach(function(y){var b=y.x,O=y.y;l+=b,p+=O}),{x:l/this.pointsList.length,y:p/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var l=tf(ru(d.prototype),"getData",this).call(this),p=this.pointsList.map(function(y){return{x:y.x,y:y.y}});return ep(ep({},l),{},{pointsList:p})}},{key:"getControls",value:function(){var l=this.startPoint,p=this.endPoint;return Je({start:l,end:p,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(l){var p=Ov(l,4),y=p[0],b=p[1],O=p[2],T=p[3];return"M ".concat(y.x," ").concat(y.y,`
    C `).concat(b.x," ").concat(b.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(T.x," ").concat(T.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var l=this.getControls(),p=l.sNext,y=l.ePre;this.updatePath(p,y)}},{key:"updatePath",value:function(l,p){l=sn(l),p=sn(p);var y={x:this.startPoint.x,y:this.startPoint.y},b={x:this.endPoint.x,y:this.endPoint.y};if(!l||!p){var O=this.getControls();l=O.sNext,p=O.ePre}this.pointsList=[y,l,p,b],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(l){this.startPoint=l,this.updatePoints()}},{key:"updateEndPoint",value:function(l){this.endPoint=l,this.updatePoints()}},{key:"moveStartPoint",value:function(l,p){this.startPoint.x+=l,this.startPoint.y+=p;var y=Ov(this.pointsList,3),b=y[1],O=y[2];b.x+=l,b.y+=p,this.updatePath(b,O)}},{key:"moveEndPoint",value:function(l,p){this.endPoint.x+=l,this.endPoint.y+=p;var y=Ov(this.pointsList,3),b=y[1],O=y[2];O.x+=l,O.y+=p,this.updatePath(b,O)}},{key:"updateAdjustAnchor",value:function(l,p){p==="sNext"?this.pointsList[1]=l:p==="ePre"&&(this.pointsList[2]=l),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var l=this.pointsList;return l[l.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(l){var p=l.startPoint,y=l.endPoint,b=l.sourceNode,O=l.targetNode,T=Je({start:p,end:y,sourceNode:b,targetNode:O,offset:this.offset}),M=T.sNext,C=T.ePre;this.pointsList=[p,M,C,y],this.initPoints()}}])&&M1(r.prototype,a),d}($a),rb=di(Hr.prototype,"path",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),di(Hr.prototype,"initPoints",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"initPoints"),Hr.prototype),di(Hr.prototype,"updatePoints",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updatePoints"),Hr.prototype),di(Hr.prototype,"updateStartPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateStartPoint"),Hr.prototype),di(Hr.prototype,"updateEndPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEndPoint"),Hr.prototype),di(Hr.prototype,"moveStartPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveStartPoint"),Hr.prototype),di(Hr.prototype,"moveEndPoint",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveEndPoint"),Hr.prototype),di(Hr.prototype,"updateAdjustAnchor",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAdjustAnchor"),Hr.prototype),di(Hr.prototype,"getAdjustStart",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustStart"),Hr.prototype),di(Hr.prototype,"getAdjustEnd",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustEnd"),Hr.prototype),di(Hr.prototype,"updateAfterAdjustStartAndEnd",[f.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAfterAdjustStartAndEnd"),Hr.prototype),Hr),Dt,ub,sb,cb,lb,fb,db,pb,hb,vb,yb,gb,mb,bb,_b,Eb,wb,Ob,xb,Sb,C1=function(t){return t==null};function Tv(t){return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tv(t)}function I1(t,r){var a=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(b,O){if(b){if(typeof b=="string")return Tb(b,O);var T=Object.prototype.toString.call(b).slice(8,-1);if(T==="Object"&&b.constructor&&(T=b.constructor.name),T==="Map"||T==="Set")return Array.from(b);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return Tb(b,O)}}(t))||r&&t&&typeof t.length=="number"){a&&(t=a);var u=0,d=function(){};return{s:d,n:function(){return u>=t.length?{done:!0}:{done:!1,value:t[u++]}},e:function(b){throw b},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,p=!0,y=!1;return{s:function(){a=a.call(t)},n:function(){var b=a.next();return p=b.done,b},e:function(b){y=!0,l=b},f:function(){try{p||a.return==null||a.return()}finally{if(y)throw l}}}}function Tb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Ab(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Eo(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ab(Object(a),!0).forEach(function(u){ko(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ab(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function zn(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function L1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ko(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function kr(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var la,Pb,fa=(Dt=function(){function t(u,d){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),ko(this,"id",""),zn(this,"type",ub,this),zn(this,"x",sb,this),zn(this,"y",cb,this),zn(this,"text",lb,this),zn(this,"properties",fb,this),zn(this,"_width",db,this),zn(this,"_height",pb,this),zn(this,"anchorsOffset",hb,this),zn(this,"isSelected",vb,this),zn(this,"isHovered",yb,this),zn(this,"isShowAnchor",gb,this),zn(this,"isDragging",mb,this),zn(this,"isHitable",bb,this),zn(this,"draggable",_b,this),zn(this,"visible",Eb,this),ko(this,"virtual",!1),ko(this,"graphModel",void 0),zn(this,"zIndex",wb,this),zn(this,"state",Ob,this),zn(this,"autoToFront",xb,this),zn(this,"style",Sb,this),ko(this,"BaseType",xn.NODE),ko(this,"modelType",Pr.NODE),ko(this,"additionStateData",void 0),ko(this,"targetRules",[]),ko(this,"sourceRules",[]),ko(this,"moveRules",[]),ko(this,"hasSetTargetRules",!1),ko(this,"hasSetSourceRules",!1),this.graphModel=d,this.initNodeData(u),this.setAttributes()}var r,a;return r=t,a=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var d=this.graphModel.idGenerator,l=d&&d(u.type),p=this.createId();u.id=p||l||fi()}this.formatText(u),Zn(this,function(y){return Ru(y,["id","type","x","y","text","properties","virtual"])}(u)),this.graphModel.overlapMode===uo.INCREASE&&(this.zIndex=u.zIndex||Ya())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,d=u.x,l=u.y,p=u.value,y=this.properties;Object(f.x)(y)&&(y=Object(f.I)(y));var b={id:this.id,type:this.type,x:this.x,y:this.y,properties:y};return this.graphModel.overlapMode===uo.INCREASE&&(b.zIndex=this.zIndex),p&&(b.text={x:d,y:l,value:p}),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(f.I)(this.properties)}},{key:"getNodeStyle",value:function(){return Eo(Eo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return sn(u)}},{key:"getAnchorStyle",value:function(u){var d=this.graphModel.theme.anchor;return sn(d)}},{key:"getAnchorLineStyle",value:function(u){var d=this.graphModel.theme.anchorLine;return sn(d)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return sn(u)}},{key:"isAllowConnectedAsSource",value:function(u,d,l,p){var y=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var b,O=!0,T=0;T<y.length;T++){var M=y[T];if(!M.validate.call(this,this,u,d,l,p)){O=!1,b=M.message;break}}return{isAllPass:O,msg:b}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,d,l,p){var y=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var b,O=!0,T=0;T<y.length;T++){var M=y[T];if(!M.validate.call(this,u,this,d,l,p)){O=!1,b=M.message;break}}return{isAllPass:O,msg:b}}},{key:"isAllowMoveNode",value:function(u,d){var l,p=!0,y=!0,b=I1(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(b.s();!(l=b.n()).done;){var O=(0,l.value)(this,u,d);if(!O)return!1;if(Tv(O)==="object"){var T=O;if(T.x===!1&&T.y===!1)return!1;p=p&&T.x,y=y&&T.y}}}catch(M){b.e(M)}finally{b.f()}return{x:p,y}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,d=this.id,l=this.x,p=this.y;return u&&u.length>0?u.map(function(y,b){return y.length?(y=y,{id:"".concat(d,"_").concat(b),x:l+y[0],y:p+y[1]}):Eo(Eo({},y=y),{},{x:l+y.x,y:p+y.y,id:y.id||"".concat(d,"_").concat(b)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(d,l){for(var p,y=tc(l),b=Number.MAX_SAFE_INTEGER,O=0;O<y.length;O++){var T=Jn(d.x,d.y,y[O].x,y[O].y);T<b&&(b=T,p={index:O,anchor:Js(Js({},y[O]),{},{x:y[O].x,y:y[O].y,id:y[O].id})})}return p}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(u){if(!C1(u))for(var d=0;d<this.anchors.length;d++){var l=this.anchors[d];if(l.id===u)return l}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1;if(l)p=!0,y=!0;else{var b=this.isAllowMoveNode(u,d);typeof b=="boolean"?(p=b,y=b):(p=b.x,y=b.y)}if(p){var O=this.x+u;this.x=O,this.text&&this.moveText(u,0)}if(y){var T=this.y+d;this.y=T,this.text&&this.moveText(0,d)}return p||y}},{key:"getMoveDistance",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=!1,y=!1,b=0,O=0;if(l)p=!0,y=!0;else{var T=this.isAllowMoveNode(u,d);typeof T=="boolean"?(p=T,y=T):(p=T.x,y=T.y)}if(p&&u){var M=this.x+u;this.x=M,this.text&&this.moveText(u,0),b=u}if(y&&d){var C=this.y+d;this.y=C,this.text&&this.moveText(0,d),O=d}return[b,O]}},{key:"moveTo",value:function(u,d){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],p=u-this.x,y=d-this.y;return!(!l&&!this.isAllowMoveNode(p,y)||(this.text&&this.text&&this.moveText(p,y),this.x=u,this.y=d,0))}},{key:"moveText",value:function(u,d){var l=this.text,p=l.x,y=l.y,b=l.value,O=l.draggable,T=l.editable;this.text={value:b,editable:T,draggable:O,x:p+u,y:y+d}}},{key:"updateText",value:function(u){this.text=Eo(Eo({},Object(f.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,d){this.state=u,this.additionStateData=d}},{key:"setProperty",value:function(u,d){this.properties=Eo(Eo({},Object(f.I)(this.properties)),{},ko({},u,Xn(d))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Eo(Eo({},Object(f.I)(this.properties)),Xn(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,d){this.style=Eo(Eo({},this.style),{},ko({},u,Xn(d)))}},{key:"setStyles",value:function(u){this.style=Eo(Eo({},this.style),Xn(u))}},{key:"updateStyles",value:function(u){this.style=Eo({},Xn(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Zn(this,u)}}],a&&L1(r.prototype,a),t}(),ub=kr(Dt.prototype,"type",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),sb=kr(Dt.prototype,"x",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cb=kr(Dt.prototype,"y",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lb=kr(Dt.prototype,"text",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),fb=kr(Dt.prototype,"properties",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),db=kr(Dt.prototype,"_width",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),pb=kr(Dt.prototype,"_height",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),hb=kr(Dt.prototype,"anchorsOffset",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vb=kr(Dt.prototype,"isSelected",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yb=kr(Dt.prototype,"isHovered",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gb=kr(Dt.prototype,"isShowAnchor",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mb=kr(Dt.prototype,"isDragging",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bb=kr(Dt.prototype,"isHitable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_b=kr(Dt.prototype,"draggable",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Eb=kr(Dt.prototype,"visible",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wb=kr(Dt.prototype,"zIndex",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ob=kr(Dt.prototype,"state",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xb=kr(Dt.prototype,"autoToFront",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sb=kr(Dt.prototype,"style",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),kr(Dt.prototype,"incoming",[f.m],Object.getOwnPropertyDescriptor(Dt.prototype,"incoming"),Dt.prototype),kr(Dt.prototype,"outgoing",[f.m],Object.getOwnPropertyDescriptor(Dt.prototype,"outgoing"),Dt.prototype),kr(Dt.prototype,"addNodeMoveRules",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"addNodeMoveRules"),Dt.prototype),kr(Dt.prototype,"move",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"move"),Dt.prototype),kr(Dt.prototype,"getMoveDistance",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"getMoveDistance"),Dt.prototype),kr(Dt.prototype,"moveTo",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveTo"),Dt.prototype),kr(Dt.prototype,"moveText",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"moveText"),Dt.prototype),kr(Dt.prototype,"updateText",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateText"),Dt.prototype),kr(Dt.prototype,"setSelected",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setSelected"),Dt.prototype),kr(Dt.prototype,"setHovered",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHovered"),Dt.prototype),kr(Dt.prototype,"setIsShowAnchor",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setIsShowAnchor"),Dt.prototype),kr(Dt.prototype,"setHitable",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setHitable"),Dt.prototype),kr(Dt.prototype,"setElementState",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setElementState"),Dt.prototype),kr(Dt.prototype,"setProperty",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperty"),Dt.prototype),kr(Dt.prototype,"setProperties",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setProperties"),Dt.prototype),kr(Dt.prototype,"deleteProperty",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"deleteProperty"),Dt.prototype),kr(Dt.prototype,"setStyle",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyle"),Dt.prototype),kr(Dt.prototype,"setStyles",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setStyles"),Dt.prototype),kr(Dt.prototype,"updateStyles",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateStyles"),Dt.prototype),kr(Dt.prototype,"setZIndex",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"setZIndex"),Dt.prototype),kr(Dt.prototype,"updateAttributes",[f.k],Object.getOwnPropertyDescriptor(Dt.prototype,"updateAttributes"),Dt.prototype),Dt);function Av(t){return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Av(t)}function Nb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function jb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Nb(Object(a),!0).forEach(function(u){Mb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Nb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function F1(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function B1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function G1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Pv(){return Pv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=U1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Pv.apply(this,arguments)}function U1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=hc(t))!==null;);return t}function Nv(t,r){return Nv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Nv(t,r)}function z1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=hc(t);if(r){var d=hc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return H1(this,a)}}function H1(t,r){if(r&&(Av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rp(t)}function rp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hc(t){return hc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hc(t)}function Mb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function jv(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var so,Rb,kb,Mv=(la=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Nv(l,p)})(d,t);var r,a,u=z1(d);function d(){var l;B1(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Mb(rp(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.CIRCLE_NODE),F1(rp(l),"r",Pb,rp(l)),l}return r=d,(a=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var l=Pv(hc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.circle;return jb(jb({},l),sn(p))}},{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.r;return[{x:l,y:p-y,id:"".concat(this.id,"_0")},{x:l+y,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+y,id:"".concat(this.id,"_2")},{x:l-y,y:p,id:"".concat(this.id,"_3")}]}}])&&G1(r.prototype,a),d}(fa),Pb=jv(la.prototype,"r",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),jv(la.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(la.prototype,"width"),la.prototype),jv(la.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(la.prototype,"height"),la.prototype),la);n(127);function Rv(t){return Rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rv(t)}function kv(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Db(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Db(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Db(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Cb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Ib(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Cb(Object(a),!0).forEach(function(u){Fb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Cb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Lb(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function X1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function V1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Dv(){return Dv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=W1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Dv.apply(this,arguments)}function W1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=yc(t))!==null;);return t}function Cv(t,r){return Cv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Cv(t,r)}function Y1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=yc(t);if(r){var d=yc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return $1(this,a)}}function $1(t,r){if(r&&(Rv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vc(t)}function vc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yc(t){return yc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yc(t)}function Fb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function gc(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Di,Bb,Gb,Iv=(so=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Cv(l,p)})(d,t);var r,a,u=Y1(d);function d(){var l;X1(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Fb(vc(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.DIAMOND_NODE),Lb(vc(l),"rx",Rb,vc(l)),Lb(vc(l),"ry",kb,vc(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Dv(yc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.diamond;return Ib(Ib({},l),sn(p))}},{key:"points",get:function(){var l=this.x,p=this.y,y=this.rx,b=this.ry;return[[l,p-b],[l+y,p],[l,p+b],[l-y,p]]}},{key:"pointsPosition",get:function(){return this.points.map(function(l){return{x:l[0],y:l[1]}})}},{key:"width",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=kv(y,1)[0];b<l&&(l=b),b>p&&(p=b)}),p-l}},{key:"height",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=kv(y,2)[1];b<l&&(l=b),b>p&&(p=b)}),p-l}},{key:"getDefaultAnchor",value:function(){var l=this;return this.points.map(function(p,y){var b=kv(p,2);return{x:b[0],y:b[1],id:"".concat(l.id,"_").concat(y)}})}}])&&V1(r.prototype,a),d}(fa),Rb=gc(so.prototype,"rx",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),kb=gc(so.prototype,"ry",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),gc(so.prototype,"points",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"points"),so.prototype),gc(so.prototype,"pointsPosition",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"pointsPosition"),so.prototype),gc(so.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"width"),so.prototype),gc(so.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(so.prototype,"height"),so.prototype),so);function Lv(t){return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Lv(t)}function Ub(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function zb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ub(Object(a),!0).forEach(function(u){Xb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ub(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Hb(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function K1(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function q1(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Fv(){return Fv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=Z1(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Fv.apply(this,arguments)}function Z1(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=bc(t))!==null;);return t}function Bv(t,r){return Bv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Bv(t,r)}function J1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=bc(t);if(r){var d=bc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Q1(this,a)}}function Q1(t,r){if(r&&(Lv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mc(t)}function mc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(t){return bc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bc(t)}function Xb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function np(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Qo,Vb,Gv=(Di=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Bv(l,p)})(d,t);var r,a,u=J1(d);function d(){var l;K1(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Xb(mc(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.ELLIPSE_NODE),Hb(mc(l),"rx",Bb,mc(l)),Hb(mc(l),"ry",Gb,mc(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Fv(bc(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.ellipse;return zb(zb({},l),sn(p))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.rx,b=this.ry;return[{x:l,y:p-b,id:"".concat(this.id,"_0")},{x:l+y,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+b,id:"".concat(this.id,"_2")},{x:l-y,y:p,id:"".concat(this.id,"_3")}]}}])&&q1(r.prototype,a),d}(fa),Bb=np(Di.prototype,"rx",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Gb=np(Di.prototype,"ry",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),np(Di.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(Di.prototype,"width"),Di.prototype),np(Di.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(Di.prototype,"height"),Di.prototype),Di);function Uv(t){return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Uv(t)}function zv(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return Wb(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return Wb(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wb(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Yb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function $b(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Yb(Object(a),!0).forEach(function(u){Kb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Yb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ex(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function tx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function rx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Hv(){return Hv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=nx(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Hv.apply(this,arguments)}function nx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=_c(t))!==null;);return t}function Xv(t,r){return Xv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Xv(t,r)}function ox(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=_c(t);if(r){var d=_c(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return ix(this,a)}}function ix(t,r){if(r&&(Uv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return op(t)}function op(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _c(t){return _c=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_c(t)}function Kb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function ip(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var Vv,qb,Wv=(Qo=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Xv(l,p)})(d,t);var r,a,u=ox(d);function d(){var l;tx(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Kb(op(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.POLYGON_NODE),ex(op(l),"points",Vb,op(l)),l}return r=d,(a=[{key:"getNodeStyle",value:function(){var l=Hv(_c(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.polygon;return $b($b({},l),sn(p))}},{key:"pointsPosition",get:function(){var l=this.x,p=this.y,y=this.width,b=this.height;return this.points.map(function(O){return{x:O[0]+l-y/2,y:O[1]+p-b/2}})}},{key:"width",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=zv(y,1)[0];b<l&&(l=b),b>p&&(p=b)}),p-l}},{key:"height",get:function(){var l=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(y){var b=zv(y,2)[1];b<l&&(l=b),b>p&&(p=b)}),p-l}},{key:"getDefaultAnchor",value:function(){var l=this,p=this.x,y=this.y,b=this.width,O=this.height;return this.points.map(function(T,M){var C=zv(T,2),q=C[0],ie=C[1];return{x:p+q-b/2,y:y+ie-O/2,id:"".concat(l.id,"_").concat(M)}})}}])&&rx(r.prototype,a),d}(fa),Vb=ip(Qo.prototype,"points",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),ip(Qo.prototype,"pointsPosition",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"pointsPosition"),Qo.prototype),ip(Qo.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"width"),Qo.prototype),ip(Qo.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(Qo.prototype,"height"),Qo.prototype),Qo);function Yv(t){return Yv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yv(t)}function Zb(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Jb(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Zb(Object(a),!0).forEach(function(u){Qb(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Zb(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function ax(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function ux(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function sx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function $v(){return $v=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=cx(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},$v.apply(this,arguments)}function cx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ec(t))!==null;);return t}function Kv(t,r){return Kv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Kv(t,r)}function lx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ec(t);if(r){var d=Ec(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fx(this,a)}}function fx(t,r){if(r&&(Yv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ap(t)}function ap(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ec(t)}function Qb(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var nu,qv=(Vv=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Kv(l,p)})(d,t);var r,a,u=lx(d);function d(){var l;ux(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Qb(ap(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.RECT_NODE),ax(ap(l),"radius",qb,ap(l)),l}return r=d,(a=[{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.width,b=this.height;return[{x:l,y:p-b/2,id:"".concat(this.id,"_0")},{x:l+y/2,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+b/2,id:"".concat(this.id,"_2")},{x:l-y/2,y:p,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var l=$v(Ec(d.prototype),"getNodeStyle",this).call(this),p=this.graphModel.theme.rect;return Jb(Jb({},l),sn(p))}}])&&sx(r.prototype,a),d}(fa),qb=function(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}(Vv.prototype,"radius",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vv);function Zv(t){return Zv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zv(t)}function e0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function t0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?e0(Object(a),!0).forEach(function(u){n0(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function dx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function px(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Jv(){return Jv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,a){var u=hx(t,r);if(u){var d=Object.getOwnPropertyDescriptor(u,r);return d.get?d.get.call(arguments.length<3?t:a):d.value}},Jv.apply(this,arguments)}function hx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=wc(t))!==null;);return t}function Qv(t,r){return Qv=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Qv(t,r)}function vx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=wc(t);if(r){var d=wc(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return yx(this,a)}}function yx(t,r){if(r&&(Zv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r0(t)}function r0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wc(t){return wc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wc(t)}function n0(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function o0(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var ey=(nu=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Qv(l,p)})(d,t);var r,a,u=vx(d);function d(){var l;dx(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return n0(r0(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.TEXT_NODE),l}return r=d,(a=[{key:"getTextStyle",value:function(){var l=Jv(wc(d.prototype),"getTextStyle",this).call(this),p=this.graphModel.theme.text;return t0(t0({},l),sn(p))}},{key:"width",get:function(){var l=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return Wl({rows:l,fontSize:p,rowsLength:l.length}).width}},{key:"height",get:function(){var l=String(this.text.value).split(/[\r\n]/g),p=this.getTextStyle().fontSize;return Wl({rows:l,fontSize:p,rowsLength:l.length}).height}}])&&px(r.prototype,a),d}(fa),o0(nu.prototype,"width",[f.m],Object.getOwnPropertyDescriptor(nu.prototype,"width"),nu.prototype),o0(nu.prototype,"height",[f.m],Object.getOwnPropertyDescriptor(nu.prototype,"height"),nu.prototype),nu);function ty(t){return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ty(t)}function gx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function mx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ry(t,r){return ry=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ry(t,r)}function bx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=up(t);if(r){var d=up(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return _x(this,a)}}function _x(t,r){if(r&&(ty(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i0(t)}function i0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},up(t)}function Ex(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var pi,a0,u0,s0,ny=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ry(l,p)})(d,t);var r,a,u=bx(d);function d(){var l;gx(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Ex(i0(l=u.call.apply(u,[this].concat(y))),"modelType",Pr.HTML_NODE),l}return r=d,(a=[{key:"getDefaultAnchor",value:function(){var l=this.x,p=this.y,y=this.width,b=this.height;return[{x:l,y:p-b/2,id:"".concat(this.id,"_0")},{x:l+y/2,y:p,id:"".concat(this.id,"_1")},{x:l,y:p+b/2,id:"".concat(this.id,"_2")},{x:l-y/2,y:p,id:"".concat(this.id,"_3")}]}}])&&mx(r.prototype,a),d}(fa);function c0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function oy(t,r,a,u){a&&Object.defineProperty(t,r,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(u):void 0})}function wx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function l0(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function rf(t,r,a,u,d){var l={};return Object.keys(u).forEach(function(p){l[p]=u[p]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=a.slice().reverse().reduce(function(p,y){return y(t,r,p)||p},l),d&&l.initializer!==void 0&&(l.value=l.initializer?l.initializer.call(d):void 0,l.initializer=void 0),l.initializer===void 0&&(Object.defineProperty(t,r,l),l=null),l}var f0=(pi=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),l0(this,"graphModel",void 0),oy(this,"isShowHorizontal",a0,this),oy(this,"isShowVertical",u0,this),oy(this,"position",s0,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var r,a;return r=t,a=[{key:"getStyle",value:function(){return function(u){for(var d=1;d<arguments.length;d++){var l=arguments[d]!=null?arguments[d]:{};d%2?c0(Object(l),!0).forEach(function(p){l0(u,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):c0(Object(l)).forEach(function(p){Object.defineProperty(u,p,Object.getOwnPropertyDescriptor(l,p))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,d){for(var l=u.x,p=u.y,y=!1,b=!1,O=0;O<d.length;O++){var T=d[O];if(T.id!==u.id&&(l===T.x&&(y=!0),p===T.y&&(b=!0),y&&b))break}return{isShowVertical:y,isShowHorizontal:b,position:{x:l,y:p}}}},{key:"getHorizontalSnapline",value:function(u,d){var l,p,y=!1,b=u.id;if(b){var O=this.graphModel.fakerNode;if(O&&O.id===b)p=mo(O);else{var T=this.graphModel.getNodeModelById(b);p=mo(T)}}for(var M=0;M<d.length;M++){var C=d[M];if(C.id!==u.id){var q=mo(C);if(q.minY===p.minY||q.maxY===p.minY){y=!0,l=p.minY;break}if(q.minY===p.maxY||q.maxY===p.maxY){y=!0,l=p.maxY;break}}}return Zn({isShowHorizontal:y,position:{y:l}})}},{key:"getVerticalSnapline",value:function(u,d){var l,p,y=!1,b=u.id;if(b){var O=this.graphModel.fakerNode;if(O&&O.id===b)p=mo(O);else{var T=this.graphModel.getNodeModelById(b);p=mo(T)}}for(var M=0;M<d.length;M++){var C=d[M];if(C.id!==u.id){var q=mo(C);if(q.minX===p.minX||q.maxX===p.minX){y=!0,l=p.minX;break}if(q.minX===p.maxX||q.maxX===p.maxX){y=!0,l=p.maxX;break}}}return Zn({isShowVertical:y,position:{x:l}})}},{key:"getSnapLinePosition",value:function(u,d){var l=this.getCenterSnapLine(u,d),p=l.isShowHorizontal,y=l.isShowVertical;if(!p){var b=this.getHorizontalSnapline(u,d);b.isShowHorizontal&&(l.isShowHorizontal=b.isShowHorizontal,l.position.y=b.position.y)}if(!y){var O=this.getVerticalSnapline(u,d);O.isShowVertical&&(l.isShowVertical=O.isShowVertical,l.position.x=O.position.x)}return l}},{key:"setSnaplineInfo",value:function(u){var d=u.isShowHorizontal,l=u.isShowVertical,p=u.position;this.position=p,this.isShowHorizontal=d,this.isShowVertical=l}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var d=this.graphModel.nodes,l=this.getSnapLinePosition(u,d);this.setSnaplineInfo(l)}}],a&&wx(r.prototype,a),t}(),a0=rf(pi.prototype,"isShowHorizontal",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u0=rf(pi.prototype,"isShowVertical",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s0=rf(pi.prototype,"position",[f.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rf(pi.prototype,"clearSnapline",[f.k],Object.getOwnPropertyDescriptor(pi.prototype,"clearSnapline"),pi.prototype),rf(pi.prototype,"setNodeSnapLine",[f.k],Object.getOwnPropertyDescriptor(pi.prototype,"setNodeSnapLine"),pi.prototype),pi),nf=new Map,d0=function(t){var r=fi(),a=window.requestAnimationFrame(function u(){if(t(),nf.get(r)){var d=window.requestAnimationFrame(u);nf.set(r,d)}});return nf.set(r,a),r},sp=function(t){var r=nf.get(t);r&&(window.cancelAnimationFrame(r),nf.delete(t))};function iy(t){return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},iy(t)}function of(){return of=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},of.apply(this,arguments)}function p0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function cp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?p0(Object(a),!0).forEach(function(u){Ii(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Ox(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return h0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return h0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function xx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ay(t,r){return ay=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ay(t,r)}function Sx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=lp(t);if(r){var d=lp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Tx(this,a)}}function Tx(t,r){if(r&&(iy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ci(t)}function Ci(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lp(t){return lp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},lp(t)}function Ii(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Ax=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ay(l,p)})(d,t);var r,a,u=Sx(d);function d(){var l;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),Ii(Ci(l=u.call(this)),"preTargetNode",void 0),Ii(Ci(l),"sourceRuleResults",void 0),Ii(Ci(l),"targetRuleResults",void 0),Ii(Ci(l),"dragHandler",void 0),Ii(Ci(l),"t",void 0),Ii(Ci(l),"onDragStart",function(p){var y=p.event,b=l.props,O=b.anchorData,T=b.nodeModel,M=b.graphModel,C=M.overlapMode;M.selectNodeById(T.id),C!==uo.INCREASE&&T.autoToFront&&M.toFront(T.id),M.eventCenter.emit(ir.ANCHOR_DRAGSTART,{data:O,e:y,nodeModel:T}),l.setState({startX:O.x,startY:O.y,endX:O.x,endY:O.y})}),Ii(Ci(l),"onDragging",function(p){var y=p.event,b=l.props,O=b.graphModel,T=b.nodeModel,M=b.anchorData,C=O.transformModel,q=O.eventCenter,ie=O.width,ye=O.height,Me=O.editConfigModel,Re=Me.autoExpand,Ye=Me.stopMoveGraph,lt=y.clientX,Ct=y.clientY,Ot=O.getPointByClient({x:lt,y:Ct}),er=Ot.domOverlayPosition,Rt=er.x,Tt=er.y,vr=Ot.canvasOverlayPosition,Fr=vr.x,qr=vr.y;l.t&&sp(l.t);var Vr=[];Rt<10?Vr=[10,0]:Rt+10>ie?Vr=[-10,0]:Tt<10?Vr=[0,10]:Tt+10>ye&&(Vr=[0,-10]),l.setState({endX:Fr,endY:qr,dragging:!0}),l.moveAnchorEnd(Fr,qr),Vr.length>0&&!Ye&&Re&&(l.t=d0(function(){var en=Ox(Vr,2),Cn=en[0],Hn=en[1];C.translate(Cn,Hn);var Oo=l.state,Bi=Oo.endX,ei=Oo.endY;l.setState({endX:Bi-Cn,endY:ei-Hn}),l.moveAnchorEnd(Bi-Cn,ei-Hn)})),q.emit(ir.ANCHOR_DRAG,{data:M,e:y,nodeModel:T})}),Ii(Ci(l),"onDragEnd",function(p){var y=p.event;l.t&&sp(l.t),l.checkEnd(y),l.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),l.sourceRuleResults.clear(),l.targetRuleResults.clear();var b=l.props,O=b.graphModel,T=b.nodeModel,M=b.anchorData;O.eventCenter.emit(ir.ANCHOR_DRAGEND,{data:M,e:y,nodeModel:T})}),Ii(Ci(l),"checkEnd",function(p){var y=l.props,b=y.graphModel,O=y.nodeModel,T=y.anchorData,M=T.x,C=T.y,q=T.id,ie=(b.edgeType,l.state),ye=ie.endX,Me=ie.endY,Re=ie.dragging,Ye=zu({x:ye,y:Me},b);if(l.preTargetNode&&l.preTargetNode.state!==zr.DEFAULT&&l.preTargetNode.setElementState(zr.DEFAULT),Re&&Ye&&Ye.node){var lt=Ye.node,Ct=Ye.anchor.id,Ot="".concat(O.id,"_").concat(lt.id,"_").concat(Ct,"_").concat(q),er=l.sourceRuleResults.get(Ot)||{},Rt=er.isAllPass,Tt=er.msg,vr=l.targetRuleResults.get(Ot)||{},Fr=vr.isAllPass,qr=vr.msg;if(Rt&&Fr){lt.setElementState(zr.DEFAULT);var Vr=b.edgeGenerator(O.getData(),b.getNodeModelById(Ye.node.id).getData()),en=b.addEdge(cp(cp({},Vr),{},{sourceNodeId:O.id,sourceAnchorId:q,startPoint:{x:M,y:C},targetNodeId:Ye.node.id,targetAnchorId:Ye.anchor.id,endPoint:{x:Ye.anchor.x,y:Ye.anchor.y}})),Cn=l.props.anchorData;b.eventCenter.emit(ir.ANCHOR_DROP,{data:Cn,e:p,nodeModel:O,edgeModel:en})}else{var Hn=lt.getData();b.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Hn,msg:qr||Tt})}}}),l.sourceRuleResults=new Map,l.targetRuleResults=new Map,l.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},l.dragHandler=new Yr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd}),l}return r=d,(a=[{key:"getAnchorShape",value:function(){var l=this.props,p=l.anchorData,y=l.style,b=l.node.getAnchorShape(p);if(b)return b;var O=p.x,T=p.y,M=cp(cp({},y),y.hover);return Object(xe.g)("g",null,Object(xe.g)(Ql,of({className:"lf-node-anchor-hover"},M,{x:O,y:T})),Object(xe.g)(Ql,of({className:"lf-node-anchor"},y,{x:O,y:T})))}},{key:"moveAnchorEnd",value:function(l,p){var y=this.props,b=y.graphModel,O=y.nodeModel,T=y.anchorData,M=zu({x:l,y:p},b);if(M){var C=M.node,q=M.anchor.id;if(this.preTargetNode&&this.preTargetNode!==M.node&&this.preTargetNode.setElementState(zr.DEFAULT),T.id===q)return;this.preTargetNode=C;var ie="".concat(O.id,"_").concat(C.id,"_").concat(q,"_").concat(T.id);if(!this.targetRuleResults.has(ie)){var ye=M.anchor,Me=O.isAllowConnectedAsSource(C,T,ye),Re=C.isAllowConnectedAsTarget(O,T,ye);this.sourceRuleResults.set(ie,Hu(Me)),this.targetRuleResults.set(ie,Hu(Re))}var Ye=this.sourceRuleResults.get(ie).isAllPass,lt=this.targetRuleResults.get(ie).isAllPass;Ye&&lt?C.setElementState(zr.ALLOW_CONNECT):C.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var l=this.state,p=l.startX,y=l.startY,b=l.endX,O=l.endY;return Jn(p,y,b,O)>10}},{key:"render",value:function(){var l=this,p=this.state,y=p.startX,b=p.startY,O=p.endX,T=p.endY,M=this.props,C=M.anchorData.edgeAddable,q=M.edgeStyle;return Object(xe.g)("g",{className:"lf-anchor"},Object(xe.g)("g",{onMouseDown:function(ie){C!==!1&&l.dragHandler.handleMouseDown(ie)}},this.getAnchorShape()),this.isShowLine()&&Object(xe.g)(dc,of({x1:y,y1:b,x2:O,y2:T},q,{"pointer-events":"none"})))}}])&&xx(r.prototype,a),d}(xe.a);n(80);function v0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Px(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?v0(Object(a),!0).forEach(function(u){Nx(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function Nx(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function uy(t){return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},uy(t)}function jx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return y0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return y0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function g0(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.value,p=t.fontSize,y=t.fill,b=y===void 0?"currentColor":y,O=t.overflowMode,T=O===void 0?"default":O,M=t.textWidth,C=M===void 0?"":M,q=t.model,ie={textAnchor:"middle","dominant-baseline":"middle",x:a,y:d,fill:b};if(Object.entries(t).forEach(function(Ct){var Ot=jx(Ct,2),er=Ot[0],Rt=Ot[1];uy(Rt)!=="object"&&(ie[er]=Rt)}),l){var ye=String(l).split(/[\r\n]/g),Me=ye.length;if(T!=="default"){var Re=q.BaseType,Ye=q.modelType;if(Re===xn.NODE&&Ye!==Pr.TEXT_NODE||Re===xn.EDGE&&C)return function(Ct){var Ot=Ct.value,er=Ct.fontSize,Rt=Ct.model,Tt=Ct.fontFamily,vr=Tt===void 0?"":Tt,Fr=Ct.lineHeight,qr=Ct.wrapPadding,Vr=qr===void 0?"0, 0":qr,en=Ct.overflowMode,Cn=Ct.x,Hn=Ct.y,Oo=Rt.width,Bi=Rt.textHeight,ei=Ct.textWidth||Oo,Sc=String(Ot).split(/[\r\n]/g),kp=Sc.length,Dp=kd({rows:Sc,style:{fontSize:"".concat(er,"px"),width:"".concat(ei,"px"),fontFamily:vr,lineHeight:Fr,padding:Vr},rowsLength:kp,className:"lf-get-text-height"}),rs=Rt.height>Dp?Rt.height:Dp;Bi&&(rs=Bi);var au=en==="ellipsis";return au&&(rs=er+2),Object(xe.g)("g",null,Object(xe.g)("foreignObject",{width:ei,height:rs,x:Cn-ei/2,y:Hn-rs/2},Object(xe.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:rs,width:ei,padding:Vr}},Object(xe.g)("div",{className:au?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:au?Sc.join(""):"",style:Px({},Ct)},Sc.map(function(uu){return Object(xe.g)("div",{className:"lf-node-text--auto-wrap-inner"},uu)})))))}(t)}if(Me>1){var lt=ye.map(function(Ct,Ot){var er=(Ot-(Me-1)/2)*(p+2);return Object(xe.g)("tspan",{className:"lf-text-tspan",x:a,y:d+er},Ct)});return Object(xe.g)("text",ie,lt)}return Object(xe.g)("text",ie,l)}}function sy(t){return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sy(t)}function cy(){return cy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},cy.apply(this,arguments)}function Mx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return m0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return m0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function Rx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ly(t,r){return ly=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ly(t,r)}function kx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=fp(t);if(r){var d=fp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Dx(this,a)}}function Dx(t,r){if(r&&(sy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ou(t)}function ou(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t){return fp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fp(t)}function Qu(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var b0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ly(l,p)})(d,t);var r,a,u=kx(d);function d(l){var p;(function(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")})(this,d),Qu(ou(p=u.call(this)),"dragHandler",void 0),Qu(ou(p),"sumDeltaX",0),Qu(ou(p),"sumDeltaY",0),Qu(ou(p),"stepDrag",void 0),Qu(ou(p),"onDragging",function(b){var O=b.deltaX,T=b.deltaY,M=p.props,C=M.model,q=Mx(M.graphModel.transformModel.fixDeltaXY(O,T),2),ie=q[0],ye=q[1];C.moveText(ie,ye)}),Qu(ou(p),"dblClickHandler",function(){p.props.editable&&p.props.model.setElementState(zr.TEXT_EDIT)}),Qu(ou(p),"mouseDownHandle",function(b){var O=p.props,T=O.draggable,M=O.model,C=O.graphModel.editConfigModel.nodeTextDraggable;(T||C)&&(p.stepDrag.model=M,p.stepDrag.handleMouseDown(b))}),l.model;var y=l.draggable;return p.stepDrag=new Yr({onDragging:p.onDragging,step:1,isStopPropagation:y}),p}return r=d,(a=[{key:"getShape",value:function(){var l=this.props,p=l.model,y=l.graphModel,b=p.text,O=y.editConfigModel,T=b.value,M=b.x,C=b.y,q=b.editable,ie=b.draggable,ye={x:M,y:C,className:"",value:T};q?ye.className="lf-element-text":ie||O.nodeTextDraggable?ye.className="lf-text-draggable":ye.className="lf-text-disabled";var Me=p.getTextStyle();return Object(xe.g)(g0,cy({},ye,Me,{model:p}))}},{key:"render",value:function(){if(this.props.model.text)return Object(xe.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Rx(r.prototype,a),d}(xe.a),Cx=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function fy(t){return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fy(t)}function dp(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return _0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return _0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function E0(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function dy(t,r){return dy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},dy(t,r)}function Ix(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=pp(t);if(r){var d=pp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Lx(this,a)}}function Lx(t,r){if(r&&(fy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return co(t)}function co(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pp(t){return pp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pp(t)}function wo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var da=function(t){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&dy(p,y)})(l,t);var r,a,u,d=Ix(l);function l(p){var y;(function(C,q){if(!(C instanceof q))throw new TypeError("Cannot call a class as a function")})(this,l),wo(co(y=d.call(this)),"t",void 0),wo(co(y),"moveOffset",void 0),wo(co(y),"stepDrag",void 0),wo(co(y),"contextMenuTime",void 0),wo(co(y),"startTime",void 0),wo(co(y),"clickTimer",void 0),wo(co(y),"onDragStart",function(C){var q=C.event,ie=q.clientX,ye=q.clientY,Me=y.props,Re=Me.model,Ye=Me.graphModel.getPointByClient({x:ie,y:ye}).canvasOverlayPosition,lt=Ye.x,Ct=Ye.y;y.moveOffset={x:Re.x-lt,y:Re.y-Ct}}),wo(co(y),"onDragging",function(C){var q=C.event,ie=y.props,ye=ie.model,Me=ie.graphModel,Re=Me.editConfigModel,Ye=Re.stopMoveGraph,lt=Re.autoExpand,Ct=Me.transformModel,Ot=Me.selectNodes,er=Me.width,Rt=Me.height,Tt=Me.gridSize;ye.isDragging=!0;var vr=q.clientX,Fr=q.clientY,qr=Me.getPointByClient({x:vr,y:Fr}).canvasOverlayPosition,Vr=qr.x,en=qr.y,Cn=dp(Ct.CanvasPointToHtmlPoint([Vr,en]),2),Hn=Cn[0],Oo=Cn[1];if(Vr+=y.moveOffset.x,en+=y.moveOffset.y,Vr=li(Vr,Tt),en=li(en,Tt),er&&Rt){if(!lt||Ye||!(Hn<0||Oo<0||Hn>er||Oo>Rt)){var Bi=dp(Ct.CanvasPointToHtmlPoint([Vr-ye.width/2,en-ye.height/2]),2),ei=Bi[0],Sc=Bi[1],kp=dp(Ct.CanvasPointToHtmlPoint([Vr+ye.width/2,en+ye.height/2]),2),Dp=kp[0],rs=kp[1],au=Math.max(Tt,20),uu=[];ei<0?uu=[au,0]:Dp>Me.width?uu=[-au,0]:Sc<0?uu=[0,au]:rs>Me.height&&(uu=[0,-au]),y.t&&sp(y.t);var Cp=Ot.map(function(Ip){return Ip.id});Cp.indexOf(ye.id)===-1&&(Cp=[ye.id]),uu.length>0&&!Ye&&lt?y.t=d0(function(){var Ip=dp(uu,2),r_=Ip[0],n_=Ip[1];Ct.translate(r_,n_);var TT=-r_/Ct.SCALE_X,AT=-n_/Ct.SCALE_X;Me.moveNodes(Cp,TT,AT)}):Me.moveNodes(Cp,Vr-ye.x,en-ye.y)}}else Me.moveNode2Coordinate(ye.id,Vr,en)}),wo(co(y),"onDragEnd",function(){y.t&&sp(y.t),y.props.model.isDragging=!1}),wo(co(y),"handleClick",function(C){if(y.startTime&&!(new Date().getTime()-y.startTime>200)){var q=y.props,ie=q.model,ye=q.graphModel,Me={data:ie.getData(),e:C,position:ye.getPointByClient({x:C.clientX,y:C.clientY}),isSelected:!1,isMultiple:!1},Re=C.button===2,Ye=C.detail===2;if(!Re){var lt=ye.editConfigModel,Ct=Fl(C,lt);Me.isMultiple=Ct,ie.isSelected&&!Ye&&Ct?(Me.isSelected=!1,ie.setSelected(!1)):(ye.selectNodeById(ie.id,Ct),Me.isSelected=!0,y.toFront()),Ye?(lt.nodeTextEdit&&ie.text.editable&&(ie.setSelected(!1),ye.setElementStateById(ie.id,zr.TEXT_EDIT)),ye.eventCenter.emit(ir.NODE_DBCLICK,Me)):(ye.eventCenter.emit(ir.ELEMENT_CLICK,Me),ye.eventCenter.emit(ir.NODE_CLICK,Me))}}}),wo(co(y),"handleContextMenu",function(C){C.preventDefault();var q=y.props,ie=q.model,ye=q.graphModel,Me=ie.getData(),Re=ye.getPointByClient({x:C.clientX,y:C.clientY});ye.setElementStateById(ie.id,zr.SHOW_MENU,Re.domOverlayPosition),ie.isSelected||ye.selectNodeById(ie.id),ye.eventCenter.emit(ir.NODE_CONTEXTMENU,{data:Me,e:C,position:Re}),y.toFront()}),wo(co(y),"handleMouseDown",function(C){var q=y.props,ie=q.model,ye=q.graphModel;y.startTime=new Date().getTime(),ye.editConfigModel.adjustNodePosition&&ie.draggable&&y.stepDrag&&y.stepDrag.handleMouseDown(C)}),wo(co(y),"setHoverON",function(C){var q=y.props,ie=q.model,ye=q.graphModel;if(!ie.isHovered){var Me=ie.getData();ie.setHovered(!0),ye.eventCenter.emit(ir.NODE_MOUSEENTER,{data:Me,e:C})}}),wo(co(y),"setHoverOFF",function(C){var q=y.props,ie=q.model,ye=q.graphModel,Me=ie.getData();ie.isHovered&&(ie.setHovered(!1),ye.eventCenter.emit(ir.NODE_MOUSELEAVE,{data:Me,e:C}))}),wo(co(y),"onMouseOut",function(C){Cx&&y.setHoverOFF(C)});var b=p.graphModel,O=b.gridSize,T=b.eventCenter,M=p.model;return y.stepDrag=new Yr({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:O,eventType:"NODE",isStopPropagation:!1,eventCenter:T,model:M}),y}return r=l,u=[{key:"getModel",value:function(p){return p}}],(a=[{key:"getAnchorShape",value:function(p){return null}},{key:"getAnchors",value:function(){var p=this,y=this.props,b=y.model,O=y.graphModel,T=b.isSelected,M=b.isHitable,C=b.isDragging,q=b.isShowAnchor;return M&&(T||q)&&!C?Cs(b.anchors,function(ie,ye){var Me=b.getAnchorLineStyle(ie),Re=b.getAnchorStyle(ie);return Object(xe.g)(Ax,{anchorData:ie,node:p,style:Re,edgeStyle:Me,anchorIndex:ye,nodeModel:b,graphModel:O,setHoverOFF:p.setHoverOFF})}):[]}},{key:"getText",value:function(){var p=this.props,y=p.model,b=p.graphModel;if(y.state===zr.TEXT_EDIT)return"";if(y.text){var O=b.editConfigModel,T=!1;return(y.text.draggable||O.nodeTextDraggable)&&(T=!0),Object(xe.g)(b0,{editable:O.nodeTextEdit&&y.text.editable,model:y,graphModel:b,draggable:T})}}},{key:"getStateClassName",value:function(){var p=this.props.model,y=p.state,b=p.isDragging,O=p.isSelected,T="lf-node";switch(y){case zr.ALLOW_CONNECT:T+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:T+=" lf-node-not-allow";break;default:T+=" lf-node-default"}return b&&(T+=" lf-isDragging"),O&&(T+=" lf-node-selected"),T}},{key:"toFront",value:function(){var p=this.props,y=p.model,b=p.graphModel;b.overlapMode!==uo.INCREASE&&y.autoToFront&&b.toFront(y.id)}},{key:"render",value:function(){var p,y=this.props,b=y.model,O=y.graphModel,T=O.editConfigModel,M=T.hideAnchors,C=T.adjustNodePosition,q=O.gridSize,ie=O.transformModel.SCALE_X,ye=b.isHitable,Me=b.draggable,Re=Object(xe.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),M?null:this.getAnchors());return ye?(C&&Me&&this.stepDrag.setStep(q*ie),p=Object(xe.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Re)):p=Object(xe.g)("g",{className:this.getStateClassName()},Re),p}}])&&E0(r.prototype,a),u&&E0(r,u),l}(xe.a);function py(t){return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},py(t)}function hy(){return hy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},hy.apply(this,arguments)}function Fx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Bx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function vy(t,r){return vy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},vy(t,r)}function Gx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=hp(t);if(r){var d=hp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Ux(this,a)}}function Ux(t,r){if(r&&(py(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function hp(t){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hp(t)}var yy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&vy(l,p)})(d,t);var r,a,u=Gx(d);function d(){return Fx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)(tu,hy({},p,{x:l.x,y:l.y,width:l.width,height:l.height,radius:l.radius}))}}])&&Bx(r.prototype,a),d}(da);function gy(t){return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gy(t)}function my(){return my=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},my.apply(this,arguments)}function zx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Hx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function by(t,r){return by=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},by(t,r)}function Xx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=vp(t);if(r){var d=vp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return Vx(this,a)}}function Vx(t,r){if(r&&(gy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function vp(t){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vp(t)}var _y=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&by(l,p)})(d,t);var r,a,u=Xx(d);function d(){return zx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,b=l.r,O=l.getNodeStyle();return Object(xe.g)(Ql,my({},O,{x:p,y,r:b}))}}])&&Hx(r.prototype,a),d}(da);function Ey(t){return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ey(t)}function Wx(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return w0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return w0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function w0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function O0(t){var r=t.points,a=t.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(t).forEach(function(d){var l=Wx(d,2),p=l[0],y=l[1];Ey(y)!=="object"&&(u[p]=y)}),u.className=a?"lf-basic-shape ".concat(a):"lf-basic-shape",u.points=r.map(function(d){return d.join(",")}).join(" "),Object(xe.g)("polygon",u)}function wy(t){return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wy(t)}function Oy(){return Oy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Oy.apply(this,arguments)}function Yx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $x(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function xy(t,r){return xy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},xy(t,r)}function Kx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=yp(t);if(r){var d=yp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return qx(this,a)}}function qx(t,r){if(r&&(wy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function yp(t){return yp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},yp(t)}var Sy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&xy(l,p)})(d,t);var r,a,u=Kx(d);function d(){return Yx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,b=l.width,O=l.height,T=l.points,M=l.getNodeStyle(),C={transform:"matrix(1 0 0 1 ".concat(p-b/2," ").concat(y-O/2,")")};return Object(xe.g)("g",C,Object(xe.g)(O0,Oy({},M,{points:T,x:p,y})))}}])&&$x(r.prototype,a),d}(da);function Ty(t){return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ty(t)}function Ay(){return Ay=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Ay.apply(this,arguments)}function Zx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Jx(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Py(t,r){return Py=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Py(t,r)}function Qx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=gp(t);if(r){var d=gp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return eS(this,a)}}function eS(t,r){if(r&&(Ty(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function gp(t){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gp(t)}var Ny=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Py(l,p)})(d,t);var r,a,u=Qx(d);function d(){return Zx(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)("g",null,Object(xe.g)(O0,Ay({},p,{points:l.points,x:l.x,y:l.y})))}}])&&Jx(r.prototype,a),d}(da);function jy(t){return jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jy(t)}function tS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return x0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return x0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function x0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function rS(t){var r=t.x,a=r===void 0?0:r,u=t.y,d=u===void 0?0:u,l=t.rx,p=l===void 0?4:l,y=t.ry,b=y===void 0?4:y,O=t.className,T={cx:a,cy:d,rx:p,ry:b,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(M){var C=tS(M,2),q=C[0],ie=C[1];jy(ie)!=="object"&&(T[q]=ie)}),T.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(xe.g)("ellipse",T)}function My(t){return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},My(t)}function Ry(){return Ry=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Ry.apply(this,arguments)}function nS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function oS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ky(t,r){return ky=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ky(t,r)}function iS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=mp(t);if(r){var d=mp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return aS(this,a)}}function aS(t,r){if(r&&(My(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},mp(t)}var Dy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ky(l,p)})(d,t);var r,a,u=iS(d);function d(){return nS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getShape",value:function(){var l=this.props.model,p=l.getNodeStyle();return Object(xe.g)(rS,Ry({},p,{x:l.x,y:l.y,rx:l.rx,ry:l.ry}))}}])&&oS(r.prototype,a),d}(da);function Cy(t){return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cy(t)}function S0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function T0(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?S0(Object(a),!0).forEach(function(u){uS(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function uS(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function sS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Iy(t,r){return Iy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Iy(t,r)}function lS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=bp(t);if(r){var d=bp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return fS(this,a)}}function fS(t,r){if(r&&(Cy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function bp(t){return bp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bp(t)}var Ly=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Iy(l,p)})(d,t);var r,a,u=lS(d);function d(){return sS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getBackground",value:function(){var l=this.props.model,p=l.getTextStyle(),y=l.width,b=l.height,O=l.x,T=l.y,M=T0(T0({},p.background),{},{x:O,y:T-1,width:y,height:b});return Object(xe.g)(tu,M)}},{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getBackground())}}])&&cS(r.prototype,a),d}(da);function Fy(t){return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Fy(t)}function By(){return By=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},By.apply(this,arguments)}function dS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function pS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Gy(t,r){return Gy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Gy(t,r)}function hS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=_p(t);if(r){var d=_p(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return vS(this,a)}}function vS(t,r){if(r&&(Fy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return af(t)}function af(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _p(t){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_p(t)}function Ep(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Uy=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Gy(l,p)})(d,t);var r,a,u=hS(d);function d(){var l;dS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Ep(af(l=u.call.apply(u,[this].concat(y))),"ref",void 0),Ep(af(l),"currentProperties",void 0),Ep(af(l),"preProperties",void 0),Ep(af(l),"setRef",function(O){l.ref=O}),l}return r=d,(a=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(l){l.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var l=this.props.model,p=l.x,y=l.y,b=l.height,O=l.width,T=l.getNodeStyle();return this.currentProperties=JSON.stringify(l.properties),Object(xe.g)("foreignObject",By({},T,{x:p-O/2,y:y-b/2,width:O,height:b,ref:this.setRef}))}}])&&pS(r.prototype,a),d}(da);function zy(t){return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zy(t)}function Hy(){return Hy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Hy.apply(this,arguments)}function A0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function es(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?A0(Object(a),!0).forEach(function(u){Wy(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function yS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Xy(t,r){return Xy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},Xy(t,r)}function gS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=wp(t);if(r){var d=wp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return mS(this,a)}}function mS(t,r){if(r&&(zy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vy(t)}function Vy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wp(t){return wp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wp(t)}function Wy(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Li,bS=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&Xy(l,p)})(d,t);var r,a,u=gS(d);function d(l){var p;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),Wy(Vy(p=u.call(this,l)),"setHoverON",function(){p.setState({isHovered:!0})}),Wy(Vy(p),"setHoverOFF",function(){p.setState({isHovered:!1})}),p.state={isHovered:!1},p}return r=d,(a=[{key:"getBackground",value:function(){var l=this.props.model,p=l.getTextStyle(),y=l.text,b=p.background||{};if(this.state.isHovered&&p.hover&&p.hover.background&&(b=es(es({},b),p.hover.background)),y&&y.value&&b.fill!=="transparent"){var O,T=p.fontSize,M=p.overflowMode,C=p.lineHeight,q=p.wrapPadding,ie=p.textWidth,ye=y.value,Me=y.x,Re=y.y,Ye=String(ye).split(/[\r\n]/g),lt=Ye.length;if(M==="autoWrap"&&ie){var Ct=kd({rows:Ye,style:{fontSize:"".concat(T,"px"),width:"".concat(ie,"px"),lineHeight:C,padding:q},rowsLength:lt,className:"lf-get-text-height"});O=es(es({},b),{},{x:Me-1,y:Re-1,width:ie,height:Ct})}else{Ye&&Ye.forEach(function(vr){St(vr)});var Ot=Wl({rows:Ye,fontSize:T,rowsLength:lt}),er=Ot.width,Rt=Ot.height;if(typeof b.wrapPadding=="string"){var Tt=b.wrapPadding.split(",").filter(function(vr){return vr.trim()}).map(function(vr){return parseFloat(vr.trim())});Tt.length>0&&Tt.length<=4&&(Tt.length===1?Tt=[Tt[0],Tt[0],Tt[0],Tt[0]]:Tt.length===2?Tt=[Tt[0],Tt[1],Tt[0],Tt[1]]:Tt.length===3&&(Tt=[Tt[0],Tt[1],Tt[2],Tt[1]]),er+=Tt[1]+Tt[3],Rt+=Tt[0]+Tt[2],Me+=(Tt[1]-Tt[3])/2,Re+=(Tt[2]-Tt[0])/2)}O=es(es({},b),{},{x:Me-1,y:Re-1,width:er,height:Rt})}return Object(xe.g)(tu,O)}}},{key:"getShape",value:function(){var l=this.props.model,p=l.text,y=p.value,b=p.x,O=p.y;if(y){var T=es({x:b,y:O,className:"lf-element-text",value:y},l.getTextStyle());return Object(xe.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(xe.g)(g0,Hy({},T,{model:l})))}}}])&&yS(r.prototype,a),d}(b0);function Yy(t){return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Yy(t)}function P0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function pa(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?P0(Object(a),!0).forEach(function(u){Bo(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):P0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function _S(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return N0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return N0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function ES(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function $y(t,r){return $y=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},$y(t,r)}function wS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Op(t);if(r){var d=Op(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return OS(this,a)}}function OS(t,r){if(r&&(Yy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fo(t)}function Fo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Op(t){return Op=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Op(t)}function Bo(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Li||(Li={}));var j0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&$y(l,p)})(d,t);var r,a,u=wS(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),Bo(Fo(p=u.call(this)),"stepDragData",void 0),Bo(Fo(p),"stepDrag",void 0),Bo(Fo(p),"oldEdge",void 0),Bo(Fo(p),"preTargetNode",void 0),Bo(Fo(p),"targetRuleResults",void 0),Bo(Fo(p),"sourceRuleResults",void 0),Bo(Fo(p),"handleMouseDown",function(T){p.stepDrag&&p.stepDrag.handleMouseDown(T)}),Bo(Fo(p),"onDragStart",function(){var T=p.props,M=T.x,C=T.y,q=T.edgeModel,ie=q.startPoint,ye=q.endPoint,Me=q.pointsList;p.oldEdge={startPoint:ie,endPoint:ye,pointsList:Me},p.setState({endX:M,endY:C,dragging:!0})}),Bo(Fo(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY,q=p.state,ie=q.endX,ye=q.endY,Me=p.props,Re=Me.graphModel,Ye=Me.type,lt=Re.transformModel,Ct=Re.editConfigModel,Ot=_S(lt.moveCanvasPointByHtml([ie,ye],M,C),2),er=Ot[0],Rt=Ot[1];p.setState({endX:er,endY:Rt,dragging:!0});var Tt=p.props.edgeModel,vr=zu({x:ie,y:ye},Re);if(vr&&vr.node&&p.isAllowAdjust(vr).pass){var Fr,qr=Tt.startPoint,Vr=Tt.endPoint,en=Tt.sourceNode,Cn=Tt.targetNode;Ye===Li.SOURCE?Fr={startPoint:{x:vr.anchor.x,y:vr.anchor.y},endPoint:{x:Vr.x,y:Vr.y},sourceNode:vr.node,targetNode:Cn}:Ye===Li.TARGET&&(Fr={startPoint:{x:qr.x,y:qr.y},endPoint:{x:vr.anchor.x,y:vr.anchor.y},sourceNode:en,targetNode:vr.node}),Tt.updateAfterAdjustStartAndEnd(Fr)}else Ye===Li.SOURCE?Tt.updateStartPoint({x:er,y:Rt}):Ye===Li.TARGET&&Tt.updateEndPoint({x:er,y:Rt});Tt.text.value&&Ct.adjustEdge&&Tt.setText(Object.assign({},Tt.text,Tt.textPosition))}),Bo(Fo(p),"onDragEnd",function(T){var M=T.event;try{var C;p.setState({dragging:!1});var q=p.props,ie=q.graphModel,ye=q.edgeModel,Me=q.type,Re=p.state,Ye=Re.endX,lt=Re.endY,Ct=Re.dragging,Ot=zu({x:Ye,y:lt},ie);if(!Ct)return;var er,Rt=!1;if(Ot&&Ot.node){var Tt=p.isAllowAdjust(Ot),vr=Tt.pass,Fr=Tt.msg,qr=Tt.newTargetNode;if(vr){var Vr,en=ye.getData();er=pa(pa({},en),{},{sourceAnchorId:"",targetAnchorId:"",text:(en==null||(Vr=en.text)===null||Vr===void 0?void 0:Vr.value)||""}),Me===Li.SOURCE?(er=pa(pa({},ie.edgeGenerator(ie.getNodeModelById(Ot.node.id).getData(),ie.getNodeModelById(ye.targetNodeId).getData(),er)),{},{sourceNodeId:Ot.node.id,sourceAnchorId:Ot.anchor.id,startPoint:{x:Ot.anchor.x,y:Ot.anchor.y},targetNodeId:ye.targetNodeId,endPoint:pa({},ye.endPoint)}),ye.sourceNodeId===Ot.node.id&&ye.sourceAnchorId===Ot.anchor.id&&(Rt=!0)):Me===Li.TARGET&&(er=pa(pa({},ie.edgeGenerator(ie.getNodeModelById(ye.sourceNodeId).getData(),ie.getNodeModelById(Ot.node.id).getData(),er)),{},{sourceNodeId:ye.sourceNodeId,startPoint:pa({},ye.startPoint),targetNodeId:Ot.node.id,targetAnchorId:Ot.anchor.id,endPoint:{x:Ot.anchor.x,y:Ot.anchor.y}}),ye.targetNodeId===Ot.node.id&&ye.targetAnchorId===Ot.anchor.id&&(Rt=!0))}else{Rt=!0;var Cn=qr.getData();ie.eventCenter.emit(ir.CONNECTION_NOT_ALLOWED,{data:Cn,msg:Fr})}}else Rt=!0;if(Rt)p.recoveryEdge();else{var Hn=ye.getData();ie.deleteEdgeById(ye.id);var Oo=ie.addEdge(pa({},er));ie.eventCenter.emit(ir.EDGE_EXCHANGE_NODE,{data:{newEdge:Oo.getData(),oldEdge:Hn}})}(C=p.preTargetNode)===null||C===void 0||C.setElementState(zr.DEFAULT)}finally{p.props.graphModel.eventCenter.emit(ir.ADJUST_POINT_DRAGEND,{e:M,data:p.stepDragData})}}),Bo(Fo(p),"recoveryEdge",function(){var T=p.props.edgeModel,M=p.oldEdge,C=M.startPoint,q=M.endPoint,ie=M.pointsList;T.updateStartPoint(C),T.updateEndPoint(q),T.modelType!==Pr.LINE_EDGE&&(T.pointsList=ie,T.initPoints())}),Bo(Fo(p),"getAdjustPointStyle",function(){var T=p.props,M=T.graphModel.theme;return T.edgeModel,M.edgeAdjust}),p.state={dragging:!1,endX:0,endY:0},p.targetRuleResults=new Map,p.sourceRuleResults=new Map;var y=l.type,b=l.edgeModel,O=l.graphModel.eventCenter;return p.stepDragData={type:y,edgeData:b.getData()},p.stepDrag=new Yr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:p.stepDragData}),p}return r=d,(a=[{key:"isAllowAdjust",value:function(l){var p=this.props,y=p.edgeModel,b=y.id,O=y.sourceNode,T=y.targetNode,M=y.sourceAnchorId,C=y.targetAnchorId,q=p.type,ie=null,ye=null,Me=null,Re=null;if(q===Li.SOURCE?(ie=l.node,ye=T,Me=l.anchor,Re=T.getAnchorInfo(C)):(ie=O,ye=l.node,Re=l.anchor,Me=O.getAnchorInfo(M)),this.preTargetNode&&this.preTargetNode!==l.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=l.node,Re.id===Me.id)return{pass:!1,msg:"",newTargetNode:ye};var Ye="".concat(ie.id,"_").concat(ye.id,"_").concat(Me.id,"_").concat(Re.id);if(!this.targetRuleResults.has(Ye)){var lt=ie.isAllowConnectedAsSource(ye,Me,Re,b),Ct=ye.isAllowConnectedAsTarget(ie,Me,Re,b);this.sourceRuleResults.set(Ye,Hu(lt)),this.targetRuleResults.set(Ye,Hu(Ct))}var Ot=this.sourceRuleResults.get(Ye),er=Ot.isAllPass,Rt=Ot.msg,Tt=this.targetRuleResults.get(Ye),vr=Tt.isAllPass,Fr=Tt.msg,qr=er&&vr?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return q===Li.SOURCE?ie.setElementState(qr):ye.setElementState(qr),{pass:er&&vr,msg:Fr||Rt,newTargetNode:ye}}},{key:"render",value:function(){var l=this.props,p=l.x,y=l.y,b=l.getAdjustPointShape,O=l.edgeModel,T=this.state.dragging;return Object(xe.g)("g",{pointerEvents:T?"none":"",onMouseDown:this.handleMouseDown},T?"":b(p,y,O))}}])&&ES(r.prototype,a),d}(xe.a);function Ky(t){return Ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ky(t)}function uf(){return uf=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},uf.apply(this,arguments)}function xS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return M0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return M0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function SS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function TS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function qy(t,r){return qy=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},qy(t,r)}function AS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=xp(t);if(r){var d=xp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return PS(this,a)}}function PS(t,r){if(r&&(Ky(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hi(t)}function hi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xp(t){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},xp(t)}function Fi(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var sf=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&qy(l,p)})(d,t);var r,a,u=AS(d);function d(){var l;SS(this,d);for(var p=arguments.length,y=new Array(p),b=0;b<p;b++)y[b]=arguments[b];return Fi(hi(l=u.call.apply(u,[this].concat(y))),"startTime",void 0),Fi(hi(l),"contextMenuTime",void 0),Fi(hi(l),"clickTimer",void 0),Fi(hi(l),"textRef",Object(xe.f)()),Fi(hi(l),"handleHover",function(O,T){var M=l.props,C=M.model,q=M.graphModel.eventCenter;C.setHovered(O);var ie=O?ir.EDGE_MOUSEENTER:ir.EDGE_MOUSELEAVE,ye=C.getData();q.emit(ie,{data:ye,e:T})}),Fi(hi(l),"setHoverON",function(O){l.props.model.isHovered||(l.textRef&&l.textRef.current&&l.textRef.current.setHoverON(),l.handleHover(!0,O))}),Fi(hi(l),"setHoverOFF",function(O){l.props.model.isHovered&&(l.textRef&&l.textRef.current&&l.textRef.current.setHoverOFF(),l.handleHover(!1,O))}),Fi(hi(l),"handleContextMenu",function(O){O.preventDefault(),l.contextMenuTime=new Date().getTime(),l.clickTimer&&clearTimeout(l.clickTimer);var T=l.props,M=T.model,C=T.graphModel,q=C.getPointByClient({x:O.clientX,y:O.clientY});C.setElementStateById(M.id,zr.SHOW_MENU,q.domOverlayPosition),l.toFront(),M.isSelected||C.selectEdgeById(M.id);var ie=M==null?void 0:M.getData();C.eventCenter.emit(ir.EDGE_CONTEXTMENU,{data:ie,e:O,position:q})}),Fi(hi(l),"handleMouseDown",function(O){O.stopPropagation(),l.startTime=new Date().getTime()}),Fi(hi(l),"handleMouseUp",function(O){if(l.startTime&&!(new Date().getTime()-l.startTime>200||O.button===2)){var T=O.detail===2,M=l.props,C=M.model,q=M.graphModel,ie=C==null?void 0:C.getData(),ye=q.getPointByClient({x:O.clientX,y:O.clientY});if(T){var Me=q.editConfigModel,Re=q.textEditElement;if(Re&&Re.id===C.id&&q.setElementStateById(C.id,zr.DEFAULT),Me.edgeTextEdit&&C.text.editable&&q.setElementStateById(C.id,zr.TEXT_EDIT),C.modelType===Pr.POLYLINE_EDGE){var Ye=C,lt=q.getPointByClient({x:O.x,y:O.y}).canvasOverlayPosition,Ct=lt.x,Ot=lt.y,er=rt({x:Ct,y:Ot},Ye.points);Ye.dbClickPosition=er}q.eventCenter.emit(ir.EDGE_DBCLICK,{data:ie,e:O,position:ye})}else q.eventCenter.emit(ir.ELEMENT_CLICK,{data:ie,e:O,position:ye}),q.eventCenter.emit(ir.EDGE_CLICK,{data:ie,e:O,position:ye});var Rt=q.editConfigModel;q.selectEdgeById(C.id,Fl(O,Rt)),l.toFront()}}),l}return r=d,(a=[{key:"getShape",value:function(){return Object(xe.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var l=this.props,p=l.model,y=l.graphModel;if(p.state===zr.TEXT_EDIT)return null;var b=!1,O=y.editConfigModel;return(p.text.draggable||O.edgeTextDraggable)&&(b=!0),Object(xe.g)(bS,{ref:this.textRef,editable:O.edgeTextEdit&&p.text.editable,model:p,graphModel:y,draggable:b})}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=l.startPoint,y=l.endPoint,b=l.isSelected;return{start:p,end:y,hover:this.state.hover,isSelected:b}}},{key:"getLastTwoPoints",value:function(){var l=this.props.model;return[l.startPoint,l.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var l=this.props.model,p=l.id,y=l.getArrowStyle(),b=y.refY,O=b===void 0?0:b,T=y.refX,M=T===void 0?2:T,C=xS(this.getLastTwoPoints(),2),q=C[0],ie=C[1],ye="auto";return q!==null&&ie!==null&&(ye=nv({x:ie.x-q.x,y:ie.y-q.y,z:0})*(180/Math.PI)),Object(xe.g)("g",null,Object(xe.g)("defs",null,Object(xe.g)("marker",{id:"marker-start-".concat(p),refX:-M,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(xe.g)("marker",{id:"marker-end-".concat(p),refX:M,refY:O,overflow:"visible",orient:ye,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var l=this.props.model.getArrowStyle();return l.stroke,l.strokeWidth,l.offset,l.verticalLength,Object(xe.g)("path",null)}},{key:"getEndArrow",value:function(){var l=this.props.model.getArrowStyle(),p=l.stroke,y=l.strokeWidth,b=l.offset,O=l.verticalLength;return Object(xe.g)("path",{stroke:p,fill:p,strokeWidth:y,transform:"rotate(180)",d:"M 0 0 L ".concat(b," -").concat(O," L ").concat(b," ").concat(O," Z")})}},{key:"getAdjustPointShape",value:function(l,p,y){var b=y.getAdjustPointStyle();return Object(xe.g)(Ql,uf({className:"lf-edge-adjust-point"},b,{x:l,y:p}))}},{key:"getAdjustPoints",value:function(){var l=this.props,p=l.model,y=l.graphModel,b=p.getAdjustStart(),O=p.getAdjustEnd();return Object(xe.g)("g",null,Object(xe.g)(j0,uf({type:"SOURCE"},b,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})),Object(xe.g)(j0,uf({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:p,graphModel:y})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(xe.g)("g",null)}},{key:"getAppend",value:function(){return Object(xe.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var l=this.props,p=l.graphModel,y=l.model;p.overlapMode!==uo.INCREASE&&p.toFront(y.id)}},{key:"render",value:function(){var l=this.props,p=l.model,y=p.isSelected,b=p.isHitable,O=p.isShowAdjustPoint;return l.graphModel.animation,Object(xe.g)("g",null,Object(xe.g)("g",{className:["lf-edge",!b&&"pointer-none",y&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&y?this.getAdjustPoints():"")}}])&&TS(r.prototype,a),d}(xe.a);function Zy(t){return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Zy(t)}function NS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return R0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return R0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function R0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var cf=function(t){var r={d:""};return Object.entries(t).forEach(function(a){var u=NS(a,2),d=u[0],l=u[1],p=Zy(l);d!=="style"&&p==="object"||(r[d]=l)}),Object(xe.g)("path",r)};function Jy(t){return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jy(t)}function Qy(){return Qy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},Qy.apply(this,arguments)}function jS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function MS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function eg(t,r){return eg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},eg(t,r)}function RS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Sp(t);if(r){var d=Sp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return kS(this,a)}}function kS(t,r){if(r&&(Jy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Sp(t){return Sp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Sp(t)}var tg=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&eg(l,p)})(d,t);var r,a,u=RS(d);function d(){return jS(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.startPoint,y=l.endPoint,b=l.isAnimation,O=l.arrowConfig,T=l.getEdgeStyle(),M=l.getEdgeAnimationStyle(),C=M.strokeDasharray,q=M.stroke,ie=M.strokeDashoffset,ye=M.animationName,Me=M.animationDuration,Re=M.animationIterationCount,Ye=M.animationTimingFunction,lt=M.animationDirection;return Object(xe.g)(dc,Qy({},T,{x1:p.x,y1:p.y,x2:y.x,y2:y.y},O,b?{strokeDasharray:C,stroke:q,style:{strokeDashoffset:ie,animationName:ye,animationDuration:Me,animationIterationCount:Re,animationTimingFunction:Ye,animationDirection:lt}}:{}))}},{key:"getAppendWidth",value:function(){var l=this.props.model,p=function(C){var q,ie=C.start,ye=C.end;if(ie.x===ye.x&&ie.y===ye.y)q="";else{var Me={start:ie,end:ye,offset:10,verticalLength:5},Re=Ja(Zu(Zu({},Me),{},{type:"start"})),Ye=Ja(Zu(Zu({},Me),{},{type:"end"}));q="M".concat(Re.leftX," ").concat(Re.leftY,` 
    L`).concat(Re.rightX," ").concat(Re.rightY,` 
    L`).concat(Ye.rightX," ").concat(Ye.rightY,`
    L`).concat(Ye.leftX," ").concat(Ye.leftY," z")}return{d:q,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:l.startPoint,end:l.endPoint}),y=p.d,b=p.strokeWidth,O=p.fill,T=p.strokeDasharray,M=p.stroke;return Object(xe.g)(cf,{d:y,fill:O,strokeWidth:b,stroke:M,strokeDasharray:T})}}])&&MS(r.prototype,a),d}(sf);function rg(t){return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rg(t)}function DS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return k0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return k0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}var CS=function(t){var r={points:"",fill:"none"};return Object.entries(t).forEach(function(a){var u=DS(a,2),d=u[0],l=u[1];(d==="style"||rg(l)!=="object")&&(r[d]=l)}),Object(xe.g)("polyline",r)};function ng(t){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ng(t)}function D0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Tp(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?D0(Object(a),!0).forEach(function(u){va(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):D0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function og(){return og=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},og.apply(this,arguments)}function IS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return C0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return C0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function C0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function LS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function ig(t,r){return ig=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},ig(t,r)}function FS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Ap(t);if(r){var d=Ap(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return BS(this,a)}}function BS(t,r){if(r&&(ng(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ha(t)}function ha(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ap(t){return Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ap(t)}function va(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var ag=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&ig(l,p)})(d,t);var r,a,u=FS(d);function d(){var l;return function(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}(this,d),va(ha(l=u.call(this)),"drag",void 0),va(ha(l),"isDragging",void 0),va(ha(l),"isShowAdjustPointTemp",void 0),va(ha(l),"appendInfo",void 0),va(ha(l),"onDragStart",function(){var p=l.props.model;p.dragAppendStart(),l.isShowAdjustPointTemp=p.isShowAdjustPoint,p.isShowAdjustPoint=!1}),va(ha(l),"onDragging",function(p){var y=p.deltaX,b=p.deltaY,O=l.props,T=O.model,M=O.graphModel;l.isDragging=!0;var C=M.transformModel,q=M.editConfigModel,ie=IS(C.fixDeltaXY(y,b),2),ye=ie[0],Me=ie[1],Re=T,Ye=q.adjustEdgeMiddle;l.appendInfo=Ye?Re.dragAppendSimple(l.appendInfo,{x:ye,y:Me}):Re.dragAppend(l.appendInfo,{x:ye,y:Me})}),va(ha(l),"onDragEnd",function(){var p=l.props,y=p.model,b=p.graphModel.eventCenter,O=y;O.dragAppendEnd(),l.isDragging=!1,O.isShowAdjustPoint=l.isShowAdjustPointTemp,l.appendInfo=void 0,b.emit(ir.EDGE_ADJUST,{data:O.getData()})}),va(ha(l),"beforeDragStart",function(p,y){y.dragAble&&l.drag.handleMouseDown(p),l.appendInfo=y}),l.drag=new Yr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd,isStopPropagation:!1}),l}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.points,y=l.isAnimation,b=l.arrowConfig,O=l.getEdgeStyle(),T=l.getEdgeAnimationStyle(),M=T.strokeDasharray,C=T.stroke,q=T.strokeDashoffset,ie=T.animationName,ye=T.animationDuration,Me=T.animationIterationCount,Re=T.animationTimingFunction,Ye=T.animationDirection;return Object(xe.g)(CS,og({points:p},O,b,y?{strokeDasharray:M,stroke:C,style:{strokeDashoffset:q,animationName:ie,animationDuration:ye,animationIterationCount:Me,animationTimingFunction:Re,animationDirection:Ye}}:{}))}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=l.points,y=l.isSelected,b={start:null,end:null,hover:this.state.hover,isSelected:y},O=Se(p);return O.length>=2&&(b.start=O[O.length-2],b.end=O[O.length-1]),b}},{key:"getLastTwoPoints",value:function(){var l=this.props.model.points,p=Se(l);return p.length>=2?[p[p.length-2],p[p.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(l){var p,y=l.start,b=l.end;if(y.x===b.x&&y.y===b.y)p="";else{var O={start:y,end:b,offset:10,verticalLength:5},T=Ja(Tp(Tp({},O),{},{type:"start"})),M=Ja(Tp(Tp({},O),{},{type:"end"}));p="M".concat(T.leftX," ").concat(T.leftY,` 
      L`).concat(T.rightX," ").concat(T.rightY,` 
      L`).concat(M.rightX," ").concat(M.rightY,`
      L`).concat(M.leftX," ").concat(M.leftY," z")}return{d:p,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(l){var p=this.getAppendAttributes(l),y=p.d,b=p.strokeWidth,O=p.fill,T=p.strokeDasharray,M=p.stroke;return Object(xe.g)(cf,{d:y,fill:O,strokeWidth:b,stroke:M,strokeDasharray:T})}},{key:"getAppendWidth",value:function(){for(var l=this,p=this.props,y=p.model,b=p.graphModel,O=y.pointsList,T=y.draggable,M=[],C=O.length,q=function(ye){var Me="lf-polyline-append",Re={start:{x:O[ye].x,y:O[ye].y},end:{x:O[ye+1].x,y:O[ye+1].y},startIndex:ye,endIndex:ye+1,direction:"",dragAble:!0},Ye=Object(xe.g)("g",{className:Me},l.getAppendShape(Re)),lt=b.editConfigModel,Ct=lt.adjustEdge,Ot=lt.adjustEdgeMiddle;if(Ct&&T){var er=Re.startIndex,Rt=Re.endIndex,Tt=Ot&&(er===0||Rt===C-1);Re.dragAble=!Tt,Re.start.x===Re.end.x?(Re.dragAble&&(Me+="-ew-resize"),Re.direction=Kr.VERTICAL):Re.start.y===Re.end.y&&(Re.dragAble&&(Me+="-ns-resize"),Re.direction=Kr.HORIZONTAL),Ye=Object(xe.g)("g",{className:l.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(vr){return l.beforeDragStart(vr,Re)}},Object(xe.g)("g",{className:Me},l.getAppendShape(Re)))}M.push(Ye)},ie=0;ie<C-1;ie++)q(ie);return Object(xe.g)("g",null,M)}}])&&LS(r.prototype,a),d}(sf);function ug(t){return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ug(t)}function GS(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return I0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return I0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function sg(){return sg=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(t[u]=a[u])}return t},sg.apply(this,arguments)}function US(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function zS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function cg(t,r){return cg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},cg(t,r)}function HS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Pp(t);if(r){var d=Pp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return XS(this,a)}}function XS(t,r){if(r&&(ug(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Pp(t){return Pp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Pp(t)}var lg=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&cg(l,p)})(d,t);var r,a,u=HS(d);function d(){return US(this,d),u.apply(this,arguments)}return r=d,(a=[{key:"getEdge",value:function(){var l=this.props.model,p=l.getEdgeStyle(),y=l.path,b=l.isAnimation,O=l.arrowConfig,T=l.getEdgeAnimationStyle(),M=T.strokeDasharray,C=T.stroke,q=T.strokeDashoffset,ie=T.animationName,ye=T.animationDuration,Me=T.animationIterationCount,Re=T.animationTimingFunction,Ye=T.animationDirection;return Object(xe.g)(cf,sg({d:y},p,O,b?{strokeDasharray:M,stroke:C,style:{strokeDashoffset:q,animationName:ie,animationDuration:ye,animationIterationCount:Me,animationTimingFunction:Re,animationDirection:Ye}}:{}))}},{key:"getAppendWidth",value:function(){var l=this.props.model.path;return Object(xe.g)(cf,{d:l,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var l=this.props.model,p=this.state.hover,y=l,b=y.path,O=y.isSelected,T=GS(vt(b),2);return{start:T[0],end:T[1],hover:p,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var l=this.props.model.path;return vt(l)}}])&&zS(r.prototype,a),d}(sf);function fg(t){return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fg(t)}function L0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function VS(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function WS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function YS(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function dg(t,r){return dg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},dg(t,r)}function $S(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Np(t);if(r){var d=Np(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return KS(this,a)}}function KS(t,r){if(r&&(fg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(t)}function Np(t){return Np=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Np(t)}var qS=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&dg(l,p)})(d,t);var r,a,u=$S(d);function d(){return WS(this,d),u.apply(this,arguments)}return r=d,a=[{key:"getArrowAttributes",value:function(){var l=this.props,p=l.arrowInfo,y=l.style,b=p.start,O=p.end,T={start:b,end:O,offset:y.offset,verticalLength:y.verticalLength,type:"end"},M=Ja(T),C=M.leftX,q=M.leftY,ie=M.rightX,ye=M.rightY;return function(Me){for(var Re=1;Re<arguments.length;Re++){var Ye=arguments[Re]!=null?arguments[Re]:{};Re%2?L0(Object(Ye),!0).forEach(function(lt){VS(Me,lt,Ye[lt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Me,Object.getOwnPropertyDescriptors(Ye)):L0(Object(Ye)).forEach(function(lt){Object.defineProperty(Me,lt,Object.getOwnPropertyDescriptor(Ye,lt))})}return Me}({d:"M".concat(C," ").concat(q," L").concat(O.x," ").concat(O.y," L").concat(ie," ").concat(ye," z")},y)}},{key:"getShape",value:function(){var l=this.getArrowAttributes(),p=l.d,y=l.strokeWidth,b=l.stroke,O=l.fill;return Object(xe.g)(cf,{d:p,fill:O,strokeWidth:y,stroke:b})}},{key:"render",value:function(){return Object(xe.g)("g",{className:"lf-arrow"},this.getShape())}}],a&&YS(r.prototype,a),d}(xe.a),F0=function(t,r){return Xe(t,r)},ZS=function(t){var r=t==null?0:t.length;return r?t[r-1]:void 0},pg=function(){return Kt.a.Date.now()},JS=/\s/,QS=function(t){for(var r=t.length;r--&&JS.test(t.charAt(r)););return r},eT=/^\s+/,tT=function(t){return t&&t.slice(0,QS(t)+1).replace(eT,"")},rT=/^[-+]0x[0-9a-f]+$/i,nT=/^0b[01]+$/i,oT=/^0o[0-7]+$/i,iT=parseInt,B0=function(t){if(typeof t=="number")return t;if(wr(t))return NaN;if(Cr(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=Cr(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=tT(t);var a=nT.test(t);return a||oT.test(t)?iT(t.slice(2),a?2:8):rT.test(t)?NaN:+t},aT=Math.max,uT=Math.min,sT=function(t,r,a){var u,d,l,p,y,b,O=0,T=!1,M=!1,C=!0;if(typeof t!="function")throw new TypeError("Expected a function");function q(lt){var Ct=u,Ot=d;return u=d=void 0,O=lt,p=t.apply(Ot,Ct)}function ie(lt){return O=lt,y=setTimeout(Me,r),T?q(lt):p}function ye(lt){var Ct=lt-b;return b===void 0||Ct>=r||Ct<0||M&&lt-O>=l}function Me(){var lt=pg();if(ye(lt))return Re(lt);y=setTimeout(Me,function(Ct){var Ot=r-(Ct-b);return M?uT(Ot,l-(Ct-O)):Ot}(lt))}function Re(lt){return y=void 0,C&&u?q(lt):(u=d=void 0,p)}function Ye(){var lt=pg(),Ct=ye(lt);if(u=arguments,d=this,b=lt,Ct){if(y===void 0)return ie(b);if(M)return clearTimeout(y),y=setTimeout(Me,r),q(b)}return y===void 0&&(y=setTimeout(Me,r)),p}return r=B0(r)||0,Cr(a)&&(T=!!a.leading,l=(M="maxWait"in a)?aT(B0(a.maxWait)||0,r):l,C="trailing"in a?!!a.trailing:C),Ye.cancel=function(){y!==void 0&&clearTimeout(y),O=0,u=b=d=y=void 0},Ye.flush=function(){return y===void 0?p:Re(pg())},Ye},cT=n(167);function lT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function iu(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var G0,U0,z0,fT=function(){function t(u){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),iu(this,"undos",[]),iu(this,"redos",[]),iu(this,"callbacks",[]),iu(this,"stopWatch",null),iu(this,"curData",null),iu(this,"maxSize",50),iu(this,"waitTime",100),iu(this,"eventCenter",void 0),this.eventCenter=u}var r,a;return r=t,(a=[{key:"add",value:function(u){F0(ZS(this.undos),u)||(this.undos.push(u),F0(this.curData,u)||(this.redos=[]),this.eventCenter.emit(ir.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var d=this.undos.pop();return this.curData=sn(d),d}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=sn(u),u}}},{key:"watch",value:function(u){var d=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(cT.a)(u,sT(function(){var l=u.modelToHistoryData();l&&d.add(l)},this.waitTime))}}])&&lT(r.prototype,a),t}();function hg(t){return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hg(t)}function dT(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||function(a,u){if(a){if(typeof a=="string")return H0(a,u);var d=Object.prototype.toString.call(a).slice(8,-1);if(d==="Object"&&a.constructor&&(d=a.constructor.name),d==="Map"||d==="Set")return Array.from(a);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return H0(a,u)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function H0(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function X0(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function Oc(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?X0(Object(a),!0).forEach(function(u){ts(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X0(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function V0(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function vg(t,r){return vg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},vg(t,r)}function pT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=jp(t);if(r){var d=jp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return hT(this,a)}}function hT(t,r){if(r&&(hg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xc(t)}function xc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},jp(t)}function ts(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var W0,Y0,$0,yg=vi((z0=U0=function(t){(function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&vg(p,y)})(l,t);var r,a,u,d=pT(l);function l(){var p;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,l),ts(xc(p=d.call(this)),"ref",Object(xe.f)()),ts(xc(p),"__prevText",{type:"",text:"",id:""}),ts(xc(p),"keyupHandler",function(y){var b=p.props.graphModel.textEditElement;y.key==="Enter"&&y.altKey&&b.setElementState(0)}),ts(xc(p),"inputHandler",function(y){var b=y.target.innerText,O=p.props.graphModel.textEditElement;p.__prevText={type:O.type,text:b.replace(/(\r\n)+$|(\n)+$/,""),id:O.id}}),ts(xc(p),"keydownHandler",function(y){y.stopPropagation()}),p.state={style:{left:0,top:0}},p}return r=l,u=[{key:"getDerivedStateFromProps",value:function(p){var y,b=p.graphModel,O=b.transformModel,T=b.theme,M=b.textEditElement;if(M){var C;if((C=M.text)===null||C===void 0||!C.value)if(M.BaseType===xn.EDGE){var q=(M=M).text,ie=M.textPosition,ye=ie.x,Me=ie.y;q.x=ye,q.y=Me,M.setText(q)}else M=M;var Re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(M.BaseType===xn.EDGE){var Ye=T.edgeText,lt=Ye.overflowMode,Ct=Ye.lineHeight,Ot=Ye.wrapPadding,er=Ye.textWidth;er&&lt==="autoWrap"&&(y=Oc(Oc({},Re),{},{width:er,minWidth:er,lineHeight:Ct,padding:Ot}))}else if(M.BaseType===xn.NODE){var Rt=T.nodeText,Tt=Rt.overflowMode,vr=Rt.lineHeight,Fr=Rt.wrapPadding,qr=Rt.textWidth,Vr=M,en=Vr.width,Cn=Vr.modelType;(Cn!==Pr.TEXT_NODE&&Tt==="autoWrap"||Cn===Pr.TEXT_NODE&&qr)&&(y=Oc(Oc({},Re),{},{width:qr||en,minWidth:qr||en,lineHeight:vr,padding:Fr}))}var Hn=M.text,Oo=Hn.x,Bi=Hn.y,ei=dT(O.CanvasPointToHtmlPoint([Oo,Bi]),2);return{style:Oc({left:ei[0],top:ei[1]},y)}}}}],(a=[{key:"componentDidUpdate",value:function(){var p=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var y=this.__prevText,b=y.text,O=y.id;p.updateText(O,b),p.eventCenter.emit(ir.TEXT_UPDATE,Oc({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(p){if(window.getSelection!==void 0&&document.createRange!==void 0){var y=document.createRange();y.selectNodeContents(p),y.collapse(!1);var b=window.getSelection();b.removeAllRanges(),b.addRange(y)}}},{key:"render",value:function(){var p,y=this.props.graphModel.textEditElement,b=this.state.style;return y?Object(xe.g)("div",{contentEditable:!0,className:"lf-text-input",style:b,ref:this.ref,key:y.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(p=y.text)===null||p===void 0?void 0:p.value):null}}])&&V0(r.prototype,a),u&&V0(r,u),l}(xe.a),ts(U0,"toolName","textEdit"),G0=z0))||G0,vT=function(t){return t.modelType===Pr.LINE_EDGE?function(r){var a=r.startPoint,u=r.endPoint,d=(a.x+u.x)/2,l=(a.y+u.y)/2,p=Math.abs(a.x-u.x)+10,y=Math.abs(a.y-u.y)+10;return{x:d-p/2,y:l-y/2,x1:d+p/2,y1:l+y/2}}(t):t.modelType===Pr.POLYLINE_EDGE?function(r){var a=r.points,u=Se(a),d=Qa(u,8),l=d.x,p=d.y,y=d.width,b=d.height;return{x:l-y/2,y:p-b/2,x1:l+y/2,y1:p+b/2}}(t):t.modelType===Pr.BEZIER_EDGE?function(r){var a=r.path,u=At(a),d=Qa(u,8),l=d.x,p=d.y,y=d.width,b=d.height;return{x:l-y/2,y:p-b/2,x1:l+y/2,y1:p+b/2}}(t):void 0};function gg(t){return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gg(t)}function K0(t,r){return function(a){if(Array.isArray(a))return a}(t)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var l,p,y=[],b=!0,O=!1;try{for(d=d.call(a);!(b=(l=d.next()).done)&&(y.push(l.value),!u||y.length!==u);b=!0);}catch(T){O=!0,p=T}finally{try{b||d.return==null||d.return()}finally{if(O)throw p}}return y}}(t,r)||q0(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yT(t){return function(r){if(Array.isArray(r))return mg(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||q0(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q0(t,r){if(t){if(typeof t=="string")return mg(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set"?Array.from(t):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?mg(t,r):void 0}}function mg(t,r){(r==null||r>t.length)&&(r=t.length);for(var a=0,u=new Array(r);a<r;a++)u[a]=t[a];return u}function gT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function bg(t,r){return bg=Object.setPrototypeOf||function(a,u){return a.__proto__=u,a},bg(t,r)}function mT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,u=Mp(t);if(r){var d=Mp(this).constructor;a=Reflect.construct(u,arguments,d)}else a=u.apply(this,arguments);return bT(this,a)}}function bT(t,r){if(r&&(gg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lf(t)}function lf(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mp(t){return Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Mp(t)}function ff(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var _g=vi(($0=Y0=function(t){(function(l,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(p&&p.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),p&&bg(l,p)})(d,t);var r,a,u=mT(d);function d(l){var p;(function(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")})(this,d),ff(lf(p=u.call(this)),"stepDrag",void 0),ff(lf(p),"handleMouseDown",function(T){p.stepDrag.handleMouseDown(T)}),ff(lf(p),"onDragging",function(T){var M=T.deltaX,C=T.deltaY,q=p.props.graphModel,ie=q.getSelectElements(!0);q.moveNodes(ie.nodes.map(function(ye){return ye.id}),M,C)}),ff(lf(p),"handleContextMenu",function(T){T.preventDefault();var M=p.props,C=M.graphModel,q=M.graphModel,ie=q.eventCenter,ye=q.selectElements,Me=C.getPointByClient({x:T.clientX,y:T.clientY}),Re={nodes:[],edges:[]};yT(ye.values()).forEach(function(Ye){Ye.BaseType===xn.NODE&&Re.nodes.push(Ye.getData()),Ye.BaseType===xn.EDGE&&Re.edges.push(Ye.getData())}),ie.emit(ir.SELECTION_CONTEXTMENU,{data:Re,e:T,position:Me})});var y=l.graphModel,b=y.gridSize,O=y.eventCenter;return p.stepDrag=new Yr({onDragging:p.onDragging,step:b,eventType:"SELECTION",eventCenter:O}),p}return r=d,(a=[{key:"render",value:function(){var l=this.props.graphModel,p=l.selectElements,y=l.transformModel;if(!(p.size<=1)){var b=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER;p.forEach(function(ye){var Me={x:0,y:0,x1:0,y1:0};ye.BaseType===xn.NODE&&(Me=function(Re){var Ye=Re.x,lt=Re.y,Ct=Re.width,Ot=Re.height;return{x:Ye-Ct/2,y:lt-Ot/2,x1:Ye+Ct/2,y1:lt+Ot/2}}(ye)),ye.BaseType===xn.EDGE&&(Me=vT(ye)),b=Math.min(b,Me.x),O=Math.min(O,Me.y),T=Math.max(T,Me.x1),M=Math.max(M,Me.y1)});var C=K0(y.CanvasPointToHtmlPoint([b,O]),2);b=C[0],O=C[1];var q=K0(y.CanvasPointToHtmlPoint([T,M]),2);T=q[0],M=q[1];var ie={left:"".concat(b-10,"px"),top:"".concat(O-10,"px"),width:"".concat(T-b+20,"px"),height:"".concat(M-O+20,"px")};return Object(xe.g)("div",{className:"lf-multiple-select",style:ie,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&gT(r.prototype,a),d}(xe.a),ff(Y0,"toolName","multipleSelect"),W0=$0))||W0;function _T(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Rp(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var ET=function(){function t(u){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Rp(this,"tools",void 0),Rp(this,"components",void 0),Rp(this,"toolMap",new Map),Rp(this,"instance",void 0),this.instance=u,this.isDisabledTool(yg.toolName)||this.registerTool(yg.toolName,yg),this.isDisabledTool(_g.toolName)||this.registerTool(_g.toolName,_g);var d=u.graphModel;d.eventCenter.on("".concat(ir.GRAPH_TRANSFORM,",").concat(ir.NODE_CLICK,",").concat(ir.BLANK_CLICK," "),function(){var l=d.textEditElement,p=d.editConfigModel,y=p.edgeTextEdit,b=p.nodeTextEdit;(y||b)&&l&&d.textEditElement.setElementState(zr.DEFAULT)})}var r,a;return r=t,(a=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,d){this.toolMap.set(u,d)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&_T(r.prototype,a),t}(),wT=n(168),OT=n.n(wT);function xT(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Eg(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Z0=function(){function t(u){(function(l,p){if(!(l instanceof p))throw new TypeError("Cannot call a class as a function")})(this,t),Eg(this,"mousetrap",void 0),Eg(this,"options",void 0),Eg(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var d=u.lf;this.target=d.container,this.mousetrap=new OT.a(this.target),u.keyboard.enabled&&this.enable(!0)}var r,a;return r=t,(a=[{key:"initShortcuts",value:function(){var u=this,d=this.options.keyboard.shortcuts;if(d)if(Gn(d))d.forEach(function(b){var O=b.keys,T=b.callback,M=b.action;return u.on(O,T,M)});else{var l=d.keys,p=d.callback,y=d.action;this.on(l,p,y)}}},{key:"on",value:function(u,d,l){this.mousetrap.bind(this.getKeys(u),d,l)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,d){this.mousetrap.unbind(this.getKeys(u),d)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var d=this;return(Array.isArray(u)?u:[u]).map(function(l){return d.formatKey(l)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&xT(r.prototype,a),t}(),ST=Z0,ya=null;function J0(t,r){return t.x+=r,t.y+=r,t.text&&(t.text.x+=r,t.text.y+=r),t}function Q0(t,r){return t.startPoint&&(t.startPoint.x+=r,t.startPoint.y+=r),t.endPoint&&(t.endPoint.x+=r,t.endPoint.y+=r),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach(function(a){a.x+=r,a.y+=r}),t.text&&(t.text.x+=r,t.text.y+=r),t}function wg(t){return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},wg(t)}function e_(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);r&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(t,d).enumerable})),a.push.apply(a,u)}return a}function df(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?e_(Object(a),!0).forEach(function(u){Dn(t,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e_(Object(a)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(a,u))})}return t}function t_(t,r){for(var a=0;a<r.length;a++){var u=r[a];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}function Dn(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}var Og=function(){function t(d){var l,p,y=this;(function(b,O){if(!(b instanceof O))throw new TypeError("Cannot call a class as a function")})(this,t),Dn(this,"container",void 0),Dn(this,"width",void 0),Dn(this,"height",void 0),Dn(this,"graphModel",void 0),Dn(this,"history",void 0),Dn(this,"viewMap",new Map),Dn(this,"tool",void 0),Dn(this,"keyboard",void 0),Dn(this,"dnd",void 0),Dn(this,"options",void 0),Dn(this,"snaplineModel",void 0),Dn(this,"components",[]),Dn(this,"plugins",void 0),Dn(this,"extension",{}),Dn(this,"adapterIn",void 0),Dn(this,"adapterOut",void 0),Dn(this,"getView",function(b){return y.viewMap.get(b)}),d=tb(d),this.options=d,this.container=this.initContainer(d.container),this.plugins=d.plugins,this.graphModel=new Er(df({},d)),this.tool=new ET(this),this.history=new fT(this.graphModel.eventCenter),this.dnd=new P1({lf:this}),this.keyboard=new ST({lf:this,keyboard:d.keyboard}),d.snapline!==!1&&(this.snaplineModel=new f0(this.graphModel),l=this.graphModel.eventCenter,p=this.snaplineModel,l.on("node:mousemove",function(b){var O=b.data;p.setNodeSnapLine(O)}),l.on("node:mouseup",function(){p.clearSnapline()})),function(b,O){var T=b.keyboard,M=T.options.keyboard;T.on(["cmd + c","ctrl + c"],function(){if(!M.enabled||O.textEditElement)return!0;var C=b.options.guards,q=O.getSelectElements(!1);return C&&C.beforeClone&&!C.beforeClone(q)||q.nodes.length===0&&q.edges.length===0?(ya=null,!0):((ya=q).nodes.forEach(function(ie){return J0(ie,40)}),ya.edges.forEach(function(ie){return Q0(ie,40)}),!1)}),T.on(["cmd + v","ctrl + v"],function(){if(!M.enabled||O.textEditElement)return!0;if(ya&&(ya.nodes||ya.edges)){b.clearSelectElements();var C=b.addElements(ya);if(!C)return!0;C.nodes.forEach(function(q){return b.selectElementById(q.id,!0)}),C.edges.forEach(function(q){return b.selectElementById(q.id,!0)}),ya.nodes.forEach(function(q){return J0(q,40)}),ya.edges.forEach(function(q){return Q0(q,40)})}return!1}),T.on(["cmd + z","ctrl + z"],function(){return!M.enabled||!!O.textEditElement||(b.undo(),!1)}),T.on(["cmd + y","ctrl + y"],function(){return!M.enabled||!!O.textEditElement||(b.redo(),!1)}),T.on(["backspace"],function(){if(!M.enabled||O.textEditElement)return!0;var C=O.getSelectElements(!0);return b.clearSelectElements(),C.edges.forEach(function(q){return b.deleteEdge(q.id)}),C.nodes.forEach(function(q){return b.deleteNode(q.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(d.disabledPlugins)}var r,a,u;return r=t,a=[{key:"register",value:function(d,l){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof d=="string"){var y={BaseEdge:sf,BaseEdgeModel:Vu,BaseNode:da,BaseNodeModel:fa,RectNode:yy,RectNodeModel:qv,CircleNode:_y,CircleNodeModel:Mv,PolygonNode:Sy,PolygonNodeModel:Wv,TextNode:Ly,TextNodeModel:ey,LineEdge:tg,LineEdgeModel:$o,DiamondNode:Ny,DiamondNodeModel:Iv,PolylineEdge:ag,PolylineEdgeModel:Vn,BezierEdge:lg,BezierEdgeModel:Sv,EllipseNode:Dy,EllipseNodeModel:Gv,HtmlNode:Uy,HtmlNodeModel:ny,h:xe.g,type:d};this.viewMap.forEach(function(C){var q=C.extendKey;q&&(y[q]=C)}),this.graphModel.modelMap.forEach(function(C){var q=C.extendKey;q&&(y[q]=C)});var b=l(y),O=b.view,T=b.model,M=O;p&&!M.isObervered&&(M.isObervered=!0,M=Yt(M)),this.setView(d,M),this.graphModel.setModel(d,T)}else this.registerElement(d)}},{key:"registerElement",value:function(d){var l=d.view;d.isObserverView===!1||l.isObervered||(l.isObervered=!0,l=Yt(l)),this.setView(d.type,l),this.graphModel.setModel(d.type,d.model)}},{key:"batchRegister",value:function(){var d=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.forEach(function(p){d.registerElement(p)})}},{key:"defaultRegister",value:function(){this.registerElement({view:yy,model:qv,type:"rect"}),this.registerElement({type:"circle",view:_y,model:Mv}),this.registerElement({type:"polygon",view:Sy,model:Wv}),this.registerElement({type:"line",view:tg,model:$o}),this.registerElement({type:"polyline",view:ag,model:Vn}),this.registerElement({type:"bezier",view:lg,model:Sv}),this.registerElement({type:"text",view:Ly,model:ey}),this.registerElement({type:"ellipse",view:Dy,model:Gv}),this.registerElement({type:"diamond",view:Ny,model:Iv}),this.registerElement({type:"html",view:Uy,model:ny})}},{key:"selectElementById",value:function(d){var l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(d,l),!l&&p&&this.graphModel.toFront(d)}},{key:"focusOn",value:function(d){var l=this.graphModel.transformModel,p=d.coordinate,y=d.id;if(!p){var b=this.getNodeModelById(y);b&&(p=b.getData());var O=this.getEdgeModelById(y);O&&(p=O.textPosition)}var T=p,M=T.x,C=T.y;l.focusOn(M,C,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(d){this.graphModel.setTheme(d)}},{key:"resize",value:function(d,l){this.graphModel.resize(d,l),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(d){this.graphModel.setDefaultEdgeType(d)}},{key:"updateText",value:function(d,l){this.graphModel.updateText(d,l)}},{key:"deleteElement",value:function(d){var l,p,y,b=this.getModelById(d);return!!b&&(p=(y=(Dn(l={},xn.NODE,this.deleteNode),Dn(l,xn.EDGE,this.deleteEdge),l)[b.BaseType])===null||y===void 0?void 0:y.call(this,d))!==null&&p!==void 0&&p}},{key:"getModelById",value:function(d){return this.graphModel.getElement(d)}},{key:"getDataById",value:function(d){var l;return(l=this.graphModel.getElement(d))===null||l===void 0?void 0:l.getData()}},{key:"changeNodeType",value:function(d,l){this.graphModel.changeNodeType(d,l)}},{key:"changeEdgeType",value:function(d,l){this.graphModel.changeEdgeType(d,l)}},{key:"getNodeEdges",value:function(d){return this.graphModel.getNodeEdges(d)}},{key:"addNode",value:function(d){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ir.NODE_ADD,p=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(d,l,p)}},{key:"deleteNode",value:function(d){var l=this.graphModel.getNodeModelById(d);if(!l)return!1;var p=l.getData(),y=this.options.guards,b=!y||!y.beforeDelete||y.beforeDelete(p);return b&&this.graphModel.deleteNode(d),b}},{key:"cloneNode",value:function(d){var l=this.graphModel.getNodeModelById(d).getData(),p=this.options.guards;if(!p||!p.beforeClone||p.beforeClone(l))return this.graphModel.cloneNode(d)}},{key:"changeNodeId",value:function(d,l){return this.graphModel.changeNodeId(d,l)}},{key:"getNodeModelById",value:function(d){return this.graphModel.getNodeModelById(d)}},{key:"getNodeDataById",value:function(d){var l;return(l=this.graphModel.getNodeModelById(d))===null||l===void 0?void 0:l.getData()}},{key:"addEdge",value:function(d){return this.graphModel.addEdge(d)}},{key:"deleteEdge",value:function(d){var l=this.options.guards,p=this.graphModel.edgesMap[d];if(!p)return!1;var y=p.model.getData(),b=!l||!l.beforeDelete||l.beforeDelete(y);return b&&this.graphModel.deleteEdgeById(d),b}},{key:"deleteEdgeByNodeId",value:function(d){var l=d.sourceNodeId,p=d.targetNodeId;l&&p?this.graphModel.deleteEdgeBySourceAndTarget(l,p):l?this.graphModel.deleteEdgeBySource(l):p&&this.graphModel.deleteEdgeByTarget(p)}},{key:"changeEdgeId",value:function(d,l){return this.graphModel.changeEdgeId(d,l)}},{key:"getEdgeModelById",value:function(d){var l;return(l=this.graphModel.edgesMap[d])===null||l===void 0?void 0:l.model}},{key:"getEdgeModels",value:function(d){var l=this.graphModel.edges,p=d.sourceNodeId,y=d.targetNodeId;if(p&&y){var b=[];return l.forEach(function(M){M.sourceNodeId===p&&M.targetNodeId===y&&b.push(M)}),b}if(p){var O=[];return l.forEach(function(M){M.sourceNodeId===p&&O.push(M)}),O}if(y){var T=[];return l.forEach(function(M){M.targetNodeId===y&&T.push(M)}),T}return[]}},{key:"getEdgeDataById",value:function(d){var l;return(l=this.getEdgeModelById(d))===null||l===void 0?void 0:l.getData()}},{key:"getNodeIncomingEdge",value:function(d){return this.graphModel.getNodeIncomingEdge(d)}},{key:"getNodeOutgoingEdge",value:function(d){return this.graphModel.getNodeOutgoingEdge(d)}},{key:"getNodeIncomingNode",value:function(d){return this.graphModel.getNodeIncomingNode(d)}},{key:"getNodeOutgoingNode",value:function(d){return this.graphModel.getNodeOutgoingNode(d)}},{key:"editText",value:function(d){this.graphModel.editText(d)}},{key:"setProperties",value:function(d,l){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.setProperties(Xn(l))}},{key:"deleteProperty",value:function(d,l){var p;(p=this.graphModel.getElement(d))===null||p===void 0||p.deleteProperty(l)}},{key:"getProperties",value:function(d){var l;return(l=this.graphModel.getElement(d))===null||l===void 0?void 0:l.getProperties()}},{key:"toFront",value:function(d){this.graphModel.toFront(d)}},{key:"setElementZIndex",value:function(d,l){return this.graphModel.setElementZIndex(d,l)}},{key:"addElements",value:function(d){for(var l=this,p=d.nodes,y=d.edges,b={},O={nodes:[],edges:[]},T=0;T<p.length;T++){var M=p[T],C=M.id,q=this.addNode(M);if(!q)return;C&&(b[C]=q.id),O.nodes.push(q)}return y.forEach(function(ie){var ye=ie.sourceNodeId,Me=ie.targetNodeId;b[ye]&&(ye=b[ye]),b[Me]&&(Me=b[Me]);var Re=l.graphModel.addEdge(df(df({},ie),{},{sourceNodeId:ye,targetNodeId:Me}));O.edges.push(Re)}),O}},{key:"getAreaElement",value:function(d,l){var p=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(d,l,p,y,b).map(function(O){return O.getData()})}},{key:"getSelectElements",value:function(){var d=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(d)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var d=this.graphModel.modelToGraphData();if(this.adapterOut){for(var l=arguments.length,p=new Array(l),y=0;y<l;y++)p[y]=arguments[y];return this.adapterOut.apply(this,[d].concat(p))}return d}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(d){this.graphModel.editConfigModel.updateEditConfig(d)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(d,l){return this.graphModel.getPointByClient({x:d,y:l})}},{key:"undo",value:function(){if(this.history.undoAble()){var d=Xn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"redo",value:function(){if(this.history.redoAble()){var d=Xn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(d)}}},{key:"zoom",value:function(d,l){return this.graphModel.transformModel.zoom(d,l)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(d){this.graphModel.transformModel.setZoomMiniSize(d)}},{key:"setZoomMaxSize",value:function(d){this.graphModel.transformModel.setZoomMaxSize(d)}},{key:"getTransform",value:function(){var d=this.graphModel.transformModel;return{SCALE_X:d.SCALE_X,SCALE_Y:d.SCALE_Y,TRANSLATE_X:d.TRANSLATE_X,TRANSLATE_Y:d.TRANSLATE_Y}}},{key:"translate",value:function(d,l){this.graphModel.transformModel.translate(d,l)}},{key:"resetTranslate",value:function(){var d=this.graphModel.transformModel,l=d.TRANSLATE_X,p=d.TRANSLATE_Y;this.translate(-l,-p)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(d,l){l===void 0&&(l=d),this.graphModel.fitView(d,l)}},{key:"openEdgeAnimation",value:function(d){this.graphModel.openEdgeAnimation(d)}},{key:"closeEdgeAnimation",value:function(d){this.graphModel.closeEdgeAnimation(d)}},{key:"on",value:function(d,l){this.graphModel.eventCenter.on(d,l)}},{key:"off",value:function(d,l){this.graphModel.eventCenter.off(d,l)}},{key:"once",value:function(d,l){this.graphModel.eventCenter.once(d,l)}},{key:"emit",value:function(d,l){this.graphModel.eventCenter.emit(d,l)}},{key:"initContainer",value:function(d){var l=document.createElement("div");return l.style.position="relative",l.style.width="100%",l.style.height="100%",d.innerHTML="",d.appendChild(l),l}},{key:"installPlugins",value:function(){var d,l=this,p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=(d=this.plugins)!==null&&d!==void 0?d:t.extensions;y.forEach(function(b){var O=b.pluginName||b.name;p.indexOf(O)===-1&&l.installPlugin(b)})}},{key:"installPlugin",value:function(d){if(wg(d)==="object"){var l=d.install,p=d.render;return l&&l.call(d,this,t),p&&this.components.push(p.bind(d)),void(this.extension[d.pluginName]=d)}var y=d,b=new y({lf:this,LogicFlow:t,options:this.options.pluginsOptions});b.render&&this.components.push(b.render.bind(b)),this.extension[y.pluginName]=b}},{key:"updateAttributes",value:function(d,l){this.graphModel.updateAttributes(d,l)}},{key:"createFakerNode",value:function(d){var l=this.graphModel.modelMap.get(d.type);if(l){var p=new l(df(df({},d),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(p),p}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(d){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(d)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(d,l){this.viewMap.set(d,l)}},{key:"renderRawData",value:function(d){this.graphModel.graphDataToModel(Xn(d)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(xe.j)(Object(xe.g)(T1,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ir.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(d=this.adapterIn(d)),this.renderRawData(d)}}],u=[{key:"use",value:function(d){var l=d.pluginName;l||(l=d.name);var p=this.extensions.get(l);p&&p.destroy&&p.destroy(),this.extensions.set(l,d)}}],a&&t_(r.prototype,a),u&&t_(r,u),t}();function vi(t){return Yt(t)}Dn(Og,"extensions",new Map),s.default=Og}])})})(zg,zg.exports);var Wt=zg.exports,YE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),VT=function(e){YE(i,e);function i(o,s){var n=this;return o.id||(o.id="Event_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n}return i.prototype.setAttributes=function(){this.r=18},i.prototype.getConnectedTargetRules=function(){var o=e.prototype.getConnectedTargetRules.call(this),s={message:"起始节点不能作为边的终点",validate:function(){return!1}};return o.push(s),o},i.extendKey="StartEventModel",i}(Wt.CircleNodeModel),WT=function(e){YE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.extendKey="StartEventNode",i}(Wt.CircleNode),$E=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Yp=globalThis&&globalThis.__assign||function(){return Yp=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Yp.apply(this,arguments)},YT=function(e){$E(i,e);function i(o,s){var n=this;return o.id||(o.id="Event_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n}return i.prototype.setAttributes=function(){this.r=18},i.prototype.getConnectedSourceRules=function(){var o=e.prototype.getConnectedSourceRules.call(this),s={message:"结束节点不能作为边的起点",validate:function(){return!1}};return o.push(s),o},i.extendKey="EndEventModel",i}(Wt.CircleNodeModel),$T=function(e){$E(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},i.prototype.getShape=function(){var o=this.props.model,s=o.getNodeStyle(),n=o.x,c=o.y,f=o.r,h=e.prototype.getShape.call(this);return Wt.h("g",{},h,Wt.h("circle",Yp(Yp({},s),{cx:n,cy:c,r:f-5})))},i.extendKey="EndEventView",i}(Wt.CircleNode),KE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Sf=globalThis&&globalThis.__assign||function(){return Sf=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Sf.apply(this,arguments)},KT=function(e){KE(i,e);function i(o,s){var n=this;return o.id||(o.id="Gateway_"+Xi()),o.text||(o.text=""),o.text&&typeof o.text=="string"&&(o.text={value:o.text,x:o.x,y:o.y+40}),n=e.call(this,o,s)||this,n.points=[[25,0],[50,25],[25,50],[0,25]],n}return i.extendKey="ExclusiveGatewayModel",i}(Wt.PolygonNodeModel),qT=function(e){KE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.points,v=o.getNodeStyle();return Wt.h("g",{transform:"matrix(1 0 0 1 "+(s-c/2)+" "+(n-f/2)+")"},Wt.h("polygon",Sf(Sf({},v),{x:s,y:n,points:h})),Wt.h("path",Sf({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},v)))},i.extendKey="ExclusiveGatewayNode",i}(Wt.PolygonNode),qE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),$p=globalThis&&globalThis.__assign||function(){return $p=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$p.apply(this,arguments)},ZT=function(e){qE(i,e);function i(o,s){var n=this;return o.id||(o.id="Activity_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="UserTaskModel",i}(Wt.RectNodeModel),JT=function(e){qE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getLabelShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getNodeStyle();return Wt.h("svg",{x:s-c/2+5,y:n-f/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Wt.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.radius,v=o.getNodeStyle();return Wt.h("g",{},[Wt.h("rect",$p($p({},v),{x:s-c/2,y:n-f/2,rx:h,ry:h,width:c,height:f})),this.getLabelShape()])},i.extendKey="UserTaskNode",i}(Wt.RectNode),ZE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Hg=globalThis&&globalThis.__assign||function(){return Hg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Hg.apply(this,arguments)},QT=function(e){ZE(i,e);function i(o,s){var n=this;return o.id||(o.id="Activity_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="ServiceTaskModel",i}(Wt.RectNodeModel),eA=function(e){ZE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getLabelShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getNodeStyle();return Wt.h("svg",{x:s-c/2+5,y:n-f/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Wt.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},i.prototype.getShape=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.radius,v=o.getNodeStyle();return Wt.h("g",{},[Wt.h("rect",Hg({x:s-c/2,y:n-f/2,rx:h,ry:h,width:c,height:f},v)),this.getLabelShape()])},i.extendKey="ServiceTaskNode",i}(Wt.RectNode),JE=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),QE=function(e){JE(i,e);function i(o,s){var n=this;return o.id||(o.id="Flow_"+Xi()),n=e.call(this,o,s)||this,n}return i.extendKey="SequenceFlowModel",i}(Wt.PolylineEdgeModel),ew=function(e){JE(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.extendKey="SequenceFlowEdge",i}(Wt.PolylineEdge),u_={width:40,height:40},s_={width:40,height:40},c_={width:40,height:40},l_={width:100,height:80},f_={width:100,height:80},tA=new MT([32,32,1]);function d_(){return tA.next()}function tw(e){return Object.prototype.toString.call(e)}function rA(e){return"  ".repeat(e)}function Kp(e){var i=e;return tw(e)==="[object Object]"?(i={},Object.keys(e).forEach(function(o){var s=o;o.charAt(0)==="-"&&(s=o.substring(1)),i[s]=Kp(e[o])})):Array.isArray(e)&&(i=[],e.forEach(function(o,s){i[s]=Kp(o)})),i}function nA(e){var i=e;try{typeof i!="string"&&(i=JSON.parse(e))}catch{i=JSON.stringify(Kp(e)).replace(/"/g,"'")}return i}var Tc=`	
`;function Up(e,i,o){var s=rA(o),n="";if(i==="#text")return Tc+s+e;if(i==="#cdata-section")return Tc+s+"<![CDATA["+e+"]]>";if(i==="#comment")return Tc+s+"<!--"+e+"-->";if((""+i).charAt(0)==="-")return" "+i.substring(1)+'="'+nA(e)+'"';if(Array.isArray(e))e.forEach(function(v){n+=Up(v,i,o+1)});else if(tw(e)==="[object Object]"){var c=Object.keys(e),f="",h="";n+=(o===0?"":Tc+s)+"<"+i,c.forEach(function(v){v.charAt(0)==="-"?f+=Up(e[v],v,o+1):h+=Up(e[v],v,o+1)}),n+=f+(h!==""?">"+h+(Tc+s)+"</"+i+">":" />")}else n+=Tc+s+("<"+i+">"+e.toString()+"</"+i+">");return n}function oA(e){var i="";for(var o in e)i+=Up(e[o],o,0);return i}var xo=function(){};xo.ObjTree=function(){return this};xo.ObjTree.VERSION="0.23";xo.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;xo.ObjTree.prototype.attr_prefix="-";xo.ObjTree.prototype.parseXML=function(e){var i;if(window.DOMParser){var o=new DOMParser,s=o.parseFromString(e,"application/xml");if(!s)return;i=s.documentElement}else window.ActiveXObject&&(o=new ActiveXObject("Microsoft.XMLDOM"),o.async=!1,o.loadXML(e),i=o.documentElement);if(i)return this.parseDOM(i)};xo.ObjTree.prototype.parseHTTP=function(e,i,o){var s={};for(var n in i)s[n]=i[n];if(s.method||(typeof s.postBody>"u"&&typeof s.postbody>"u"&&typeof s.parameters>"u"?s.method="get":s.method="post"),o){s.asynchronous=!0;var c=this,f=o,h=s.onComplete;s.onComplete=function(g){var w;g&&g.responseXML&&g.responseXML.documentElement&&(w=c.parseDOM(g.responseXML.documentElement)),f(w,g),h&&h(g)}}else s.asynchronous=!1;var v;if(typeof HTTP<"u"&&HTTP.Request){s.uri=e;var m=new HTTP.Request(s);m&&(v=m.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var m=new Ajax.Request(e,s);m&&(v=m.transport)}if(o)return v;if(v&&v.responseXML&&v.responseXML.documentElement)return this.parseDOM(v.responseXML.documentElement)};xo.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var i=0;i<this.force_array.length;i++)this.__force_array[this.force_array[i]]=1;var o=this.parseElement(e);if(this.__force_array[e.nodeName]&&(o=[o]),e.nodeType!=11){var s={};s[e.nodeName]=o,o=s}return o}};xo.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var i=e.nodeValue.match(/[^\x00-\x20]/);return i==null?void 0:e.nodeValue}var o=null,s={};if(e.attributes&&e.attributes.length){o={};for(var n=0;n<e.attributes.length;n++){var c=e.attributes[n].nodeName;if(typeof c=="string"){var f=e.attributes[n].nodeValue;try{f=JSON.parse(e.attributes[n].nodeValue.replace(/'/g,'"'))}catch{f=e.attributes[n].nodeValue}f&&(c=this.attr_prefix+c,typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(o,c,s[c],f))}}}if(e.childNodes&&e.childNodes.length){var h=!0;o&&(h=!1);for(var n=0;n<e.childNodes.length&&h;n++){var v=e.childNodes[n].nodeType;v==3||v==4||v==8||(h=!1)}if(h){o||(o="");for(var n=0;n<e.childNodes.length;n++)o+=e.childNodes[n].nodeValue}else{o||(o={});for(var n=0;n<e.childNodes.length;n++){var c=e.childNodes[n].nodeName;if(typeof c=="string"){var f=this.parseElement(e.childNodes[n]);f&&(typeof s[c]>"u"&&(s[c]=0),s[c]++,this.addNode(o,c,s[c],f))}}}}else o===null&&(o={});return o}};xo.ObjTree.prototype.addNode=function(e,i,o,s){this.__force_array[i]?(o==1&&(e[i]=[]),e[i][e[i].length]=s):o==1?e[i]=s:o==2?e[i]=[e[i],s]:e[i][e[i].length]=s};xo.ObjTree.prototype.writeXML=function(e){var i=this.hash_to_xml(null,e);return this.xmlDecl+i};xo.ObjTree.prototype.hash_to_xml=function(e,i){var o=[],s=[];for(var n in i)if(i.hasOwnProperty(n)){var c=i[n];n.charAt(0)!=this.attr_prefix?typeof c>"u"||c==null?o[o.length]="<"+n+" />":typeof c=="object"&&c.constructor==Array?o[o.length]=this.array_to_xml(n,c):typeof c=="object"?o[o.length]=this.hash_to_xml(n,c):o[o.length]=this.scalar_to_xml(n,c):s[s.length]=" "+n.substring(1)+'="'+this.xml_escape(c)+'"'}var f=s.join(""),h=o.join("");return typeof e>"u"||e==null||(o.length>0?h.match(/\n/)?h="<"+e+f+`>
`+h+"</"+e+`>
`:h="<"+e+f+">"+h+"</"+e+`>
`:h="<"+e+f+` />
`),h};xo.ObjTree.prototype.array_to_xml=function(e,i){for(var o=[],s=0;s<i.length;s++){var n=i[s];typeof n>"u"||n==null?o[o.length]="<"+e+" />":typeof n=="object"&&n.constructor==Array?o[o.length]=this.array_to_xml(e,n):typeof n=="object"?o[o.length]=this.hash_to_xml(e,n):o[o.length]=this.scalar_to_xml(e,n)}return o.join("")};xo.ObjTree.prototype.scalar_to_xml=function(e,i){return e=="#text"?this.xml_escape(i):"<"+e+">"+this.xml_escape(i)+"</"+e+`>
`};xo.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var iA=function(e){return new xo.ObjTree().parseXML(e)},aA=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Xg=globalThis&&globalThis.__assign||function(){return Xg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Xg.apply(this,arguments)},lh=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},Hi;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(Hi||(Hi={}));var rw=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],p_=["properties","startPoint","endPoint","pointsList"];function h_(e){var i=e?p_.concat(e):p_;return function(o){function s(n){var c={};return typeof n=="string"?n:Array.isArray(n)?n.map(function(f){return s(f)}):(Object.entries(n).forEach(function(f){var h=lh(f,2),v=h[0],m=h[1];typeof m!="object"?v.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(v)?c[v]=m:c["-"+v]=m:i.includes(v)?c["-"+v]=s(m):c[v]=s(m)}),c)}return s(o)}}function qp(e){var i={};return Object.entries(e).forEach(function(o){var s=lh(o,2),n=s[0],c=s[1];n.indexOf("-")===0?i[n.substring(1)]=Kp(c):typeof c=="string"?i[n]=c:Object.prototype.toString.call(c)==="[object Object]"?i[n]=qp(c):Array.isArray(c)?i[n]=c.map(function(f){return qp(f)}):i[n]=c}),i}function uA(e,i,o){var s=new Map;i.nodes.forEach(function(c){var f,h={"-id":c.id};if(!((f=c.text)===null||f===void 0)&&f.value&&(h["-name"]=c.text.value),c.properties){var v=h_(o)(c.properties);Object.assign(h,v)}s.set(c.id,h),e[c.type]?Array.isArray(e[c.type])?e[c.type].push(h):e[c.type]=[e[c.type],h]:e[c.type]=h});var n=i.edges.map(function(c){var f,h,v=s.get(c.targetNodeId);v["bpmn:incoming"]?Array.isArray(v["bpmn:incoming"])?v["bpmn:incoming"].push(c.id):v["bpmn:incoming"]=[v["bpmn:incoming"],c.id]:v["bpmn:incoming"]=c.id;var m={"-id":c.id,"-sourceRef":c.sourceNodeId,"-targetRef":c.targetNodeId};if(!((f=c.text)===null||f===void 0)&&f.value&&(m["-name"]=(h=c.text)===null||h===void 0?void 0:h.value),c.properties){var g=h_(o)(c.properties);Object.assign(m,g)}return m});i.edges.forEach(function(c){var f=s.get(c.sourceNodeId);f["bpmn:outgoing"]?Array.isArray(f["bpmn:outgoing"])?f["bpmn:outgoing"].push(c.id):f["bpmn:outgoing"]=[f["bpmn:outgoing"],c.id]:f["bpmn:outgoing"]=c.id}),e[Hi.FLOW]=n}function sA(e,i){e["bpmndi:BPMNEdge"]=i.edges.map(function(o){var s,n=o.id,c=o.pointsList.map(function(h){var v=h.x,m=h.y;return{"-x":v,"-y":m}}),f={"-id":n+"_di","-bpmnElement":n,"di:waypoint":c};return!((s=o.text)===null||s===void 0)&&s.value&&(f["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":o.text.x-o.text.value.length*10/2,"-y":o.text.y-7,"-width":o.text.value.length*10,"-height":14}}),f}),e["bpmndi:BPMNShape"]=i.nodes.map(function(o){var s,n=o.id,c=100,f=80,h=o.x,v=o.y,m=fu.shapeConfigMap.get(o.type);m&&(c=m.width,f=m.height),h-=c/2,v-=f/2;var g={"-id":n+"_di","-bpmnElement":n,"dc:Bounds":{"-x":h,"-y":v,"-width":c,"-height":f}};return!((s=o.text)===null||s===void 0)&&s.value&&(g["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":o.text.x-o.text.value.length*10/2,"-y":o.text.y-7,"-width":o.text.value.length*10,"-height":14}}),g})}function cA(e){var i=[],o=[],s=e["bpmn:definitions"];if(s){var n=s["bpmn:process"];Object.keys(n).forEach(function(c){if(c.indexOf("bpmn:")===0){var f=n[c];if(c===Hi.FLOW){var h=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=fA(f,h)}else{var v=s["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];i=i.concat(lA(f,v,c))}}})}return{nodes:i,edges:o}}function lA(e,i,o){var s=[];if(Array.isArray(e))e.forEach(function(f){var h;Array.isArray(i)?h=i.find(function(m){return m["-bpmnElement"]===f["-id"]}):h=i;var v=v_(h,o,f);s.push(v)});else{var n=void 0;Array.isArray(i)?n=i.find(function(f){return f["-bpmnElement"]===e["-id"]}):n=i;var c=v_(n,o,e);s.push(c)}return s}function v_(e,i,o){var s=Number(e["dc:Bounds"]["-x"]),n=Number(e["dc:Bounds"]["-y"]),c=o["-name"],f=fu.shapeConfigMap.get(i);f&&(s+=f.width/2,n+=f.height/2);var h;Object.entries(o).forEach(function(w){var x=lh(w,2),S=x[0],N=x[1];rw.indexOf(S)===-1&&(h||(h={}),h[S]=N)}),h&&(h=qp(h));var v;if(c&&(v={x:s,y:n,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var m=e["bpmndi:BPMNLabel"]["dc:Bounds"];v.x=Number(m["-x"])+Number(m["-width"])/2,v.y=Number(m["-y"])+Number(m["-height"])/2}var g={id:e["-bpmnElement"],type:i,x:s,y:n,properties:h};return v&&(g.text=v),g}function fA(e,i){var o=[];if(Array.isArray(e))e.forEach(function(n){var c;Array.isArray(i)?c=i.find(function(f){return f["-bpmnElement"]===n["-id"]}):c=i,o.push(y_(c,n))});else{var s=void 0;Array.isArray(i)?s=i.find(function(n){return n["-bpmnElement"]===e["-id"]}):s=i,o.push(y_(s,e))}return o}function y_(e,i){var o,s=i["-name"];if(s){var n=e["bpmndi:BPMNLabel"]["dc:Bounds"],c=0;s.split(`
`).forEach(function(v){c<v.length&&(c=v.length)}),o={value:s,x:Number(n["-x"])+c*10/2,y:Number(n["-y"])+7}}var f;Object.entries(i).forEach(function(v){var m=lh(v,2),g=m[0],w=m[1];rw.indexOf(g)===-1&&(f||(f={}),f[g]=w)}),f&&(f=qp(f));var h={id:i["-id"],type:Hi.FLOW,pointsList:e["di:waypoint"].map(function(v){return{x:Number(v["-x"]),y:Number(v["-y"])}}),sourceNodeId:i["-sourceRef"],targetNodeId:i["-targetRef"],properties:f};return o&&(h.text=o),h}var fu=function(){function e(i){var o=this,s=i.lf;this.adapterOut=function(n,c){var f=Xg({},o.processAttributes);uA(f,n,c);var h={"-id":"BPMNPlane_1","-bpmnElement":f["-id"]};sA(h,n);var v=o.definitionAttributes;v["bpmn:process"]=f,v["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":h};var m={"bpmn:definitions":v};return m},this.adapterIn=function(n){if(n)return cA(n)},s.adapterIn=function(n){return o.adapterIn(n)},s.adapterOut=function(n,c){return o.adapterOut(n,c)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+d_()},this.definitionAttributes={"-id":"Definitions_"+d_(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(i,o){e.shapeConfigMap.set(i,o)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();fu.shapeConfigMap.set(Hi.START,{width:u_.width,height:u_.height});fu.shapeConfigMap.set(Hi.END,{width:s_.width,height:s_.height});fu.shapeConfigMap.set(Hi.GATEWAY,{width:c_.width,height:c_.height});fu.shapeConfigMap.set(Hi.SYSTEM,{width:l_.width,height:l_.height});fu.shapeConfigMap.set(Hi.USER,{width:f_.width,height:f_.height});(function(e){aA(i,e);function i(o){var s=e.call(this,o)||this;s.adapterXmlIn=function(c){var f=iA(c);return s.adapterIn(f)},s.adapterXmlOut=function(c,f){var h=s.adapterOut(c,f);return oA(h)};var n=o.lf;return n.adapterIn=s.adapterXmlIn,n.adapterOut=s.adapterXmlOut,s}return i.pluginName="bpmnXmlAdapter",i})(fu);var g_=globalThis&&globalThis.__assign||function(){return g_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},g_.apply(this,arguments)};globalThis&&globalThis.__read;var Uc;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Uc||(Uc={}));var dA=function(e,i,o,s){s===void 0&&(s=0);var n=hA(e,i,o);return n<=s};function m_(e){return e*e}function xg(e,i){return m_(e.x-i.x)+m_(e.y-i.y)}var pA=function(e,i,o){var s=xg(i,o);if(s===0)return xg(e,i);var n=((e.x-i.x)*(o.x-i.x)+(e.y-i.y)*(o.y-i.y))/s;return n=Math.max(0,Math.min(1,n)),xg(e,{x:i.x+n*(o.x-i.x),y:i.y+n*(o.y-i.y)})},hA=function(e,i,o){return Math.sqrt(pA(e,i,o))},vA=function(e){var i=e.x,o=e.y,s=e.width,n=e.height,c={minX:i-s/2,minY:o-n/2,maxX:i+s/2,maxY:o+n/2,x:i,y:o,width:s,height:n,centerX:i,centerY:o};return c},yA=function(e,i){var o;return e.x===i.x?o=Uc.VERTICAL:e.y===i.y&&(o=Uc.HORIZONTAL),o},gA=function(e,i,o){var s=vA(e),n=yA(i,o),c=Math.max(i.x,o.x),f=Math.min(i.x,o.x),h=Math.max(i.y,o.y),v=Math.min(i.y,o.y),m=e.x,g=e.y,w=e.width,x=e.height;if(n===Uc.HORIZONTAL){if(c>=s.maxX&&f<=s.minX)return{startCrossPoint:{x:i.x>o.x?m+w/2:m-w/2,y:i.y},endCrossPoint:{x:i.x>o.x?m-w/2:m+w/2,y:i.y}}}else if(n===Uc.VERTICAL&&h>=s.maxY&&v<=s.minY)return{startCrossPoint:{x:i.x,y:i.y>o.y?g+x/2:g-x/2},endCrossPoint:{x:i.x,y:i.y>o.y?g-x/2:g+x/2}}},mA=function(e,i,o){o===void 0&&(o=0);for(var s=e.x,n=e.y,c=i.pointsList,f=0;f<c.length-1;f++)if(dA({x:s,y:n},c[f],c[f+1],o)){var h=gA(e,c[f],c[f+1]);if(h)return{crossIndex:f+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},bA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},b_=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(bA(arguments[i]));return e},_A=function(){function e(i){var o=i.lf;this._lf=o,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return e.prototype.eventHandler=function(){var i=this;this.dndAdd&&this._lf.on("node:dnd-add",function(o){var s=o.data;i.insetNode(s)}),this.dropAdd&&this._lf.on("node:drop",function(o){for(var s=o.data,n=i._lf.graphModel.edges,c=s.id,f=!0,h=0;h<n.length;h++)if(n[h].sourceNodeId===c||n[h].targetNodeId===c){f=!1;break}f&&i.insetNode(s)})},e.prototype.checkRuleBeforeInsetNode=function(i,o,s,n,c){var f=this._lf.getNodeModelById(i),h=this._lf.getNodeModelById(o),v=f.getAnchorInfo(s),m=h.getAnchorInfo(n),g=f.isAllowConnectedAsSource(c,v,m),w=h.isAllowConnectedAsTarget(c,v,m),x=Wt.formateAnchorConnectValidateData(g),S=x.isAllPass,N=x.msg,j=Wt.formateAnchorConnectValidateData(w),R=j.isAllPass,D=j.msg;return{isPass:S&&R,sourceMsg:N,targetMsg:D}},e.prototype.insetNode=function(i){for(var o=this,s=this._lf.graphModel.edges,n=this._lf.getNodeModelById(i.id),c=0;c<s.length;c++){var f=mA(n,s[c],this.deviation),h=f.crossIndex,v=f.crossPoints;if(h>=0){var m=s[c],g=m.sourceNodeId,w=m.targetNodeId,x=m.id,S=m.type,N=m.pointsList,j=m.sourceAnchorId,R=m.targetAnchorId,D=Lp(N[0]),V=Lp(v.startCrossPoint);this._lf.deleteEdge(x);var ce=this.checkRuleBeforeInsetNode(g,w,j,R,i);if(this._lf.addEdge({type:S,sourceNodeId:g,targetNodeId:i.id,startPoint:D,endPoint:V,pointsList:b_(N.slice(0,h),[v.startCrossPoint])}),this._lf.addEdge({type:S,sourceNodeId:i.id,targetNodeId:w,startPoint:Lp(v.endCrossPoint),endPoint:Lp(N[N.length-1]),pointsList:b_([v.endCrossPoint],N.slice(h))}),ce.isPass)break;this._lf.graphModel.eventCenter.emit(Wt.EventType.CONNECTION_NOT_ALLOWED,{data:i,msg:ce.targetMsg||ce.sourceMsg}),setTimeout(function(){o._lf.undo()},200);break}}},e.pluginName="insertNodeInPolyline",e}(),EA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},wA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(EA(arguments[i]));return e},OA=function(){function e(i){var o=this,s=i.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){o.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){o.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){o.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){o.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){o.lf.redo()}}],this.lf=s}return e.prototype.render=function(i,o){this.destroy();var s=this.getControlTool();this.toolEl=s,o.appendChild(s),this.domContainer=o},e.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},e.prototype.addItem=function(i){this.controlItems.push(i)},e.prototype.removeItem=function(i){var o=this.controlItems.findIndex(function(s){return s.key===i});return this.controlItems.splice(o,1)[0]},e.prototype.getControlTool=function(){var i=this,o="lf-control-item",s="lf-control-item disabled",n=document.createElement("div"),c=[];return n.className="lf-control",this.controlItems.forEach(function(f){var h=document.createElement("div"),v=document.createElement("i"),m=document.createElement("span");switch(h.className=s,f.onClick&&(h.onclick=f.onClick.bind(null,i.lf)),f.onMouseEnter&&(h.onmouseenter=f.onMouseEnter.bind(null,i.lf)),f.onMouseLeave&&(h.onmouseleave=f.onMouseLeave.bind(null,i.lf)),v.className=f.iconClass,m.className="lf-control-text",m.title=f.title,m.innerText=f.text,h.append(v,m),f.text){case"上一步":i.lf.on("history:change",function(g){var w=g.data.undoAble;h.className=w?o:s});break;case"下一步":i.lf.on("history:change",function(g){var w=g.data.redoAble;h.className=w?o:s});break;default:h.className=o;break}c.push(h)}),n.append.apply(n,wA(c)),n},e.pluginName="control",e}(),xA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},SA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(xA(arguments[i]));return e},pf="lf:defaultNodeMenu",hf="lf:defaultEdgeMenu",vf="lf:defaultGraphMenu",__="lf:defaultSelectionMenu",TA=function(){function e(i){var o=this,s=i.lf;this.__menuDOM=document.createElement("ul"),this.lf=s,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(n){o.setMenuConfig(n)},this.lf.addMenuConfig=function(n){o.addMenuConfig(n)},this.lf.setMenuByType=function(n){o.setMenuByType(n)}}return e.prototype.init=function(){var i=this,o=[{text:"删除",callback:function(c){i.lf.deleteNode(c.id)}},{text:"编辑文本",callback:function(c){i.lf.graphModel.editText(c.id)}},{text:"复制",callback:function(c){i.lf.cloneNode(c.id)}}];this.menuTypeMap.set(pf,o);var s=[{text:"删除",callback:function(c){i.lf.deleteEdge(c.id)}},{text:"编辑文本",callback:function(c){i.lf.graphModel.editText(c.id)}}];this.menuTypeMap.set(hf,s),this.menuTypeMap.set(vf,[]);var n=[{text:"删除",callback:function(c){i.lf.clearSelectElements(),c.edges.forEach(function(f){return i.lf.deleteEdge(f.id)}),c.nodes.forEach(function(f){return i.lf.deleteNode(f.id)})}}];this.menuTypeMap.set(__,n)},e.prototype.render=function(i,o){var s=this;this.__container=o,this.__currentData=null,this.__menuDOM.className="lf-menu",o.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(n){n.stopPropagation();for(var c=n.target;Array.from(c.classList).indexOf("lf-menu-item")===-1&&Array.from(c.classList).indexOf("lf-menu")===-1;)c=c.parentElement;Array.from(c.classList).indexOf("lf-menu-item")>-1?(c.onclickCallback(s.__currentData),s.__menuDOM.style.display="none",s.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(n){var c=n.data,f=n.position,h=f.domOverlayPosition,v=h.x,m=h.y,g=c.id,w=s.lf.graphModel.getNodeModelById(g),x=[],S=s.menuTypeMap.get(w.type);w&&w.menu&&Array.isArray(w.menu)?x=w.menu:S?x=S:x=s.menuTypeMap.get(pf),s.__currentData=c,s.showMenu(v,m,x)}),this.lf.on("edge:contextmenu",function(n){var c=n.data,f=n.position,h=f.domOverlayPosition,v=h.x,m=h.y,g=c.id,w=s.lf.graphModel.getEdgeModelById(g),x=[],S=s.menuTypeMap.get(w.type);w&&w.menu&&Array.isArray(w.menu)?x=w.menu:S?x=S:x=s.menuTypeMap.get(hf),s.__currentData=c,s.showMenu(v,m,x)}),this.lf.on("blank:contextmenu",function(n){var c=n.position,f=s.menuTypeMap.get(vf),h=c.domOverlayPosition,v=h.x,m=h.y;s.showMenu(v,m,f)}),this.lf.on("selection:contextmenu",function(n){var c=n.data,f=n.position,h=s.menuTypeMap.get(__),v=f.domOverlayPosition,m=v.x,g=v.y;s.__currentData=c,s.showMenu(m,g,h)}),this.lf.on("node:mousedown",function(){s.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){s.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){s.__menuDOM.style.display="none"})},e.prototype.destroy=function(){var i;(i=this===null||this===void 0?void 0:this.__container)===null||i===void 0||i.removeChild(this.__menuDOM),this.__menuDOM=null},e.prototype.showMenu=function(i,o,s){if(!(!s||!s.length)){var n=this.__menuDOM;n.innerHTML="",n.append.apply(n,SA(this.__getMenuDom(s))),n.children.length&&(n.style.display="block",n.style.top=o+"px",n.style.left=i+"px")}},e.prototype.setMenuByType=function(i){!i.type||!i.menu||this.menuTypeMap.set(i.type,i.menu)},e.prototype.__getMenuDom=function(i){var o=[];return i&&i.length>0&&i.forEach(function(s){var n=document.createElement("li");if(s.className?n.className="lf-menu-item "+s.className:n.className="lf-menu-item",s.icon===!0){var c=document.createElement("span");c.className="lf-menu-item-icon",n.appendChild(c)}var f=document.createElement("span");f.className="lf-menu-item-text",s.text&&(f.innerText=s.text),n.appendChild(f),n.onclickCallback=s.callback,o.push(n)}),o},e.prototype.setMenuConfig=function(i){i&&(i.nodeMenu!==void 0&&this.menuTypeMap.set(pf,i.nodeMenu?i.nodeMenu:[]),i.edgeMenu!==void 0&&this.menuTypeMap.set(hf,i.edgeMenu?i.edgeMenu:[]),i.graphMenu!==void 0&&this.menuTypeMap.set(vf,i.graphMenu?i.graphMenu:[]))},e.prototype.addMenuConfig=function(i){if(i){if(Array.isArray(i.nodeMenu)){var o=this.menuTypeMap.get(pf);this.menuTypeMap.set(pf,o.concat(i.nodeMenu))}if(Array.isArray(i.edgeMenu)){var o=this.menuTypeMap.get(hf);this.menuTypeMap.set(hf,o.concat(i.edgeMenu))}if(Array.isArray(i.graphMenu)){var o=this.menuTypeMap.get(vf);this.menuTypeMap.set(vf,o.concat(i.graphMenu))}}},e.prototype.changeMenuItem=function(i,o){if(i==="add")this.addMenuConfig(o);else if(i==="reset")this.setMenuConfig(o);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},e.pluginName="menu",e}();globalThis&&globalThis.__read;var AA=function(){function e(i){var o=this,s=i.lf;this.lf=s,this.lf.setPatternItems=function(n){o.setPatternItems(n)}}return e.prototype.render=function(i,o){var s=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=o;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(n){s.panelEl.appendChild(s.createDndItem(n))}),o.appendChild(this.panelEl),this.domContainer=o},e.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},e.prototype.setPatternItems=function(i){this.shapeList=i,this.domContainer&&this.render(this.lf,this.domContainer)},e.prototype.createDndItem=function(i){var o=this,s=document.createElement("div");s.className=i.className?"lf-dnd-item "+i.className:"lf-dnd-item";var n=document.createElement("div");if(n.className="lf-dnd-shape",i.icon&&(n.style.backgroundImage="url("+i.icon+")"),s.appendChild(n),i.label){var c=document.createElement("div");c.innerText=i.label,c.className="lf-dnd-text",s.appendChild(c)}return s.onmousedown=function(){i.type&&o.lf.dnd.startDrag({type:i.type,properties:i.properties,text:i.text}),i.callback&&i.callback(o.lf,o.domContainer)},s.ondblclick=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:f,data:i})},s.onclick=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:f,data:i})},s.oncontextmenu=function(f){o.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:f,data:i})},s},e.pluginName="dndPanel",e}(),PA=function(){function e(i){var o=this,s=i.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(c){var f=o.lf.getPointByClient(c.clientX,c.clientY).domOverlayPosition,h=f.x,v=f.y;o.endPoint={x:h,y:v};var m=o.startPoint,g=m.x,w=m.y,x=o.wrapper.style,S=g,N=w,j=h-g,R=v-w;h<g&&(S=h,j=g-h),v<w&&(N=v,R=w-v),x.left=S+"px",x.top=N+"px",x.width=j+"px",x.height=R+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",o.__draw),document.removeEventListener("mouseup",o.__drawOff),o.wrapper.oncontextmenu=null,o.__domContainer.removeChild(o.wrapper);var c=o.startPoint,f=c.x,h=c.y,v=o.endPoint,m=v.x,g=v.y;if(!(Math.abs(m-f)<10&&Math.abs(g-h)<10)){var w=[Math.min(f,m),Math.min(h,g)],x=[Math.max(f,m),Math.max(h,g)],S=o.lf.graphModel.getAreaElement(w,x,o.isWholeEdge,o.isWholeNode,!0),N=o.lf.graphModel.group;S.forEach(function(j){(!N||!N.getNodeGroup(j.id))&&o.lf.selectElementById(j.id,!0)}),o.lf.emit("selection:selected",S)}},this.lf=s;var n=s.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=n,s.openSelectionSelect=function(){o.openSelectionSelect()},s.closeSelectionSelect=function(){o.closeSelectionSelect()}}return e.prototype.render=function(i,o){var s=this;this.__domContainer=o,i.on("blank:mousedown",function(n){var c=n.e,f=i.getEditConfig();if(!(!f.stopMoveGraph||s.__disabled)){var h=c.button===2;if(!h){var v=i.getPointByClient(c.clientX,c.clientY).domOverlayPosition,m=v.x,g=v.y;s.startPoint={x:m,y:g},s.endPoint={x:m,y:g};var w=document.createElement("div");w.className="lf-selection-select",w.oncontextmenu=function(S){S.preventDefault()},w.style.top=s.startPoint.y+"px",w.style.left=s.startPoint.x+"px",o.appendChild(w),s.wrapper=w,document.addEventListener("mousemove",s.__draw),document.addEventListener("mouseup",s.__drawOff)}}})},e.prototype.setSelectionSense=function(i,o){i===void 0&&(i=!0),o===void 0&&(o=!0),this.isWholeEdge=i,this.isWholeNode=o},e.prototype.openSelectionSelect=function(){var i=this.lf.getEditConfig().stopMoveGraph;i||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),NA=globalThis&&globalThis.__values||function(e){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&e[i],s=0;if(o)return o.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},jA=function(){function e(i){var o=this,s=i.lf,n=i.LogicFlow,c=i.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(f,h){o.setView(),o.isShow||o.createMiniMap(f,h),o.isShow=!0},this.hide=function(){o.isShow&&o.removeMiniMap(),o.isShow=!1},this.reset=function(){o.lf.resetTranslate(),o.lf.resetZoom(),o.hide(),o.show()},this.startDrag=function(f){document.addEventListener("mousemove",o.drag),document.addEventListener("mouseup",o.drop),o.startPosition={x:f.x,y:f.y}},this.moveViewport=function(f,h){var v=o.viewport.style;o.viewPortTop=f,o.viewPortLeft=h,v.top=o.viewPortTop+"px",v.left=o.viewPortLeft+"px"},this.drag=function(f){o.dragging=!0;var h=o.viewPortTop+f.y-o.startPosition.y,v=o.viewPortLeft+f.x-o.startPosition.x;o.moveViewport(h,v),o.startPosition={x:f.x,y:f.y};var m=(o.viewPortLeft+o.viewPortWidth/2)/o.viewPortScale,g=(o.viewPortTop+o.viewPortHeight/2)/o.viewPortScale;o.lf.focusOn({coordinate:{x:m+o.resetDataX,y:g+o.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",o.drag),document.removeEventListener("mouseup",o.drop);var f=o.viewPortTop,h=o.viewPortLeft;o.viewPortLeft>o.width&&(h=o.width-o.viewPortWidth),o.viewPortTop>o.height&&(f=o.height-o.viewPortHeight),o.viewPortLeft<-o.width&&(h=0),o.viewPortTop<-o.height&&(f=0),o.moveViewport(f,h)},this.mapClick=function(f){if(o.dragging)o.dragging=!1;else{var h=f.layerX,v=f.layerY,m=h,g=v,w=o.lf.getGraphRawData(),x=o.getBounds(w),S=x.left,N=x.top,j=S+m/o.viewPortScale,R=N+g/o.viewPortScale;o.lf.focusOn({coordinate:{x:j,y:R}})}},this.lf=s,c&&c.MiniMap&&this.setOption(c),this.miniMapWidth=s.graphModel.width,this.miniMapHeight=s.graphModel.width*this.height/this.width,this.LogicFlow=n,this.initMiniMap()}return e.prototype.render=function(i,o){var s=this;this.container=o,this.lf.on("history:change",function(){s.isShow&&s.setView()}),this.lf.on("graph:transform",DT(function(){s.isShow&&!s.dragging&&s.setView()},300))},e.prototype.init=function(i){this.disabledPlugins=this.disabledPlugins.concat(i.disabledPlugins||[])},e.prototype.setOption=function(i){var o=i.MiniMap,s=o.width,n=s===void 0?150:s,c=o.height,f=c===void 0?220:c,h=o.isShowHeader,v=h===void 0?!0:h,m=o.isShowCloseIcon,g=m===void 0?!0:m,w=o.leftPosition,x=w===void 0?0:w,S=o.topPosition,N=S===void 0?0:S,j=o.rightPosition,R=o.bottomPosition;this.width=n,this.height=f,this.isShowHeader=v,this.isShowCloseIcon=g,this.viewPortWidth=n,this.leftPosition=x,this.topPosition=N,this.rightPosition=j,this.bottomPosition=R},e.prototype.initMiniMap=function(){var i=document.createElement("div");i.className="lf-mini-map-graph",i.style.width=this.width+4+"px",i.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:i,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(o){return o},this.lfMap.adapterOut=function(o){return o},this.miniMapWrap=i,this.createViewPort(),i.addEventListener("click",this.mapClick)},e.prototype.createMiniMap=function(i,o){var s=document.createElement("div");s.appendChild(this.miniMapWrap),typeof i<"u"||typeof o<"u"?(s.style.left=(i||0)+"px",s.style.top=(o||0)+"px"):(typeof this.rightPosition<"u"?s.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(s.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?s.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(s.style.top=this.topPosition+"px")),s.style.position="absolute",s.className="lf-mini-map",this.isShowCloseIcon||s.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||s.classList.add("lf-mini-map-no-header"),this.container.appendChild(s),this.miniMapWrap.appendChild(this.viewport);var n=document.createElement("div");n.className="lf-mini-map-header",n.innerText=e.headerTitle,s.appendChild(n);var c=document.createElement("span");c.className="lf-mini-map-close",c.addEventListener("click",this.hide),s.appendChild(c),this.miniMapContainer=s},e.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},e.prototype.getBounds=function(i){var o=0,s=this.miniMapWidth,n=0,c=this.miniMapHeight,f=i.nodes;return f&&f.length>0&&f.forEach(function(h){var v=h.x,m=h.y,g=h.width,w=g===void 0?200:g,x=h.height,S=x===void 0?200:x,N=v-w/2,j=v+w/2,R=m-S/2,D=m+S/2;o=N<o?N:o,s=j>s?j:s,n=R<n?R:n,c=D>c?D:c}),{left:o,top:n,bottom:c,right:s}},e.prototype.resetData=function(i){var o=i.nodes,s=i.edges,n=0,c=0;return o&&o.length>0&&(o.forEach(function(f){var h=f.x,v=f.y,m=f.width,g=m===void 0?200:m,w=f.height,x=w===void 0?200:w,S=h-g/2,N=v-x/2;n=S<n?S:n,c=N<c?N:c}),(n<0||c<0)&&(this.resetDataX=n,this.resetDataY=c,o.forEach(function(f){f.x=f.x-n,f.y=f.y-c,f.text&&(f.text.x=f.text.x-n,f.text.y=f.text.y-c)}),s.forEach(function(f){f.startPoint&&(f.startPoint.x=f.startPoint.x-n,f.startPoint.y=f.startPoint.y-c),f.endPoint&&(f.endPoint.x=f.endPoint.x-n,f.endPoint.y=f.endPoint.y-c),f.text&&(f.text.x=f.text.x-n,f.text.y=f.text.y-c),f.pointsList&&f.pointsList.forEach(function(h){h.x=h.x-n,h.y=h.y-c})}))),i},e.prototype.setView=function(){var i,o,s=this.lf.getGraphRawData(),n=this.resetData(s),c=this.lf.viewMap,f=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var v=NA(c.keys()),m=v.next();!m.done;m=v.next()){var g=m.value;h.has(g)||(this.lfMap.setView(g,c.get(g)),this.lfMap.graphModel.modelMap.set(g,f.get(g)))}}catch(Ee){i={error:Ee}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}this.lfMap.render(n);var w=this.getBounds(n),x=w.left,S=w.top,N=w.right,j=w.bottom,R=this.width/(N-x),D=this.height/(j-S),V=this.miniMapWrap.firstChild.style,ce=Math.min(R,D);V.transform="matrix("+ce+", 0, 0, "+ce+", 0, 0)",V.transformOrigin="left top",V.height=j-Math.min(S,0)+"px",V.width=N-Math.min(x,0)+"px",this.viewPortScale=ce,this.setViewPort(ce,{left:x,top:S,right:N,bottom:j})},e.prototype.setViewPort=function(i,o){var s=o.left,n=o.right;o.top,o.bottom;var c=this.viewport.style;c.width=this.viewPortWidth+"px",c.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var f=this.lf.getTransform(),h=f.TRANSLATE_X,v=f.TRANSLATE_Y,m=f.SCALE_X,g=f.SCALE_Y,w=n-s,x=this.width/(w/this.lf.graphModel.width),S=this.width*(x/this.width),N=this.lf.graphModel.width/this.lf.graphModel.height,j=S/N,R=this.lf.getGraphRawData(),D=this.getBounds(R),V=D.left,ce=D.top,Ee=V,fe=ce;Ee+=h/m,fe+=v/g,this.viewPortTop=fe>0?0:-fe*i,this.viewPortLeft=Ee>0?0:-Ee*i,this.viewPortWidth=S,this.viewPortHeight=j,c.top=this.viewPortTop+"px",c.left=this.viewPortLeft+"px",c.width=S/m+"px",c.height=j/g+"px"},e.prototype.createViewPort=function(){var i=document.createElement("div");i.className="lf-minimap-viewport",i.addEventListener("mousedown",this.startDrag),this.viewport=i},e.pluginName="miniMap",e.width=150,e.height=220,e.viewPortWidth=150,e.viewPortHeight=75,e.isShowHeader=!0,e.isShowCloseIcon=!0,e.leftPosition=0,e.topPosition=0,e.rightPosition=null,e.bottomPosition=null,e.headerTitle="导航",e}();function MA(e){if(e.length<=1)return!1;for(var i=0,o=e.length-1;i!==o&&i+1!==o&&o-1!==i;)i++,o--;return i===o?[--i,o]:[i,o]}var nw=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),kc=globalThis&&globalThis.__assign||function(){return kc=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},kc.apply(this,arguments)},ga=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};(function(e){nw(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.pointFilter=function(o){for(var s=o,n=1;n<s.length-1;){var c=ga(s[n-1],2),f=c[0],h=c[1],v=ga(s[n],2),m=v[0],g=v[1],w=ga(s[n+1],2),x=w[0],S=w[1];f===m&&m===x||h===g&&g===S?s.splice(n,1):n++}return s},i.prototype.getEdge=function(){var o=this.props.model,s=o.points,n=o.isAnimation,c=o.arrowConfig,f=o.radius,h=f===void 0?5:f,v=o.getEdgeStyle(),m=o.getEdgeAnimationStyle(),g=this.pointFilter(s.split(" ").map(function(bt){return bt.split(",").map(function(xt){return Number(xt)})})),w=MA(g);if(w){var x=ga(w,2),S=x[0],N=x[1],j=g[S],R=g[N],D=j.some(function(bt,xt){return bt===R[xt]});if(!D){var V=(R[1]-j[1])/2,ce=[R[0],R[1]-V],Ee=[j[0],j[1]+V];g.splice(S+1,0,Ee,ce)}}for(var fe=ga(g[0],2),W=fe[0],ae=fe[1],Y="M"+W+" "+ae,F=1;F<g.length-1;F++){var $=ga(g[F-1],2),K=$[0],I=$[1],pe=ga(g[F],2),De=pe[0],Q=pe[1],se=ga(g[F+1],2),he=se[0],be=se[1];if(De===K&&Q!==I){var ee=Q>I?Q-h:Q+h;Y=Y+" L "+De+" "+ee}if(Q===I&&De!==K){var ve=De>K?De-h:De+h;Y=Y+" L "+ve+" "+Q}if(Y=Y+" Q "+De+" "+Q,De===he&&Q!==be){var ee=Q>be?Q-h:Q+h;Y=Y+" "+De+" "+ee}if(Q===be&&De!==he){var ve=De>he?De-h:De+h;Y=Y+" "+ve+" "+Q}}var Fe=ga(g[g.length-1],2),Ze=Fe[0],ht=Fe[1];Y=Y+" L "+Ze+" "+ht;var Ft=kc(kc(kc({d:Y,style:n?m:{}},v),c),{fill:"none"});return Wt.h("path",kc({d:Y},Ft))},i})(Wt.PolylineEdge);(function(e){nw(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i})(Wt.PolylineEdgeModel);var fm,Bn,ow,is,E_,iw,Vg,aw={},uw=[],RA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,dm=Array.isArray;function cu(e,i){for(var o in i)e[o]=i[o];return e}function sw(e){var i=e.parentNode;i&&i.removeChild(e)}function Tf(e,i,o){var s,n,c,f={};for(c in i)c=="key"?s=i[c]:c=="ref"?n=i[c]:f[c]=i[c];if(arguments.length>2&&(f.children=arguments.length>3?fm.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(c in e.defaultProps)f[c]===void 0&&(f[c]=e.defaultProps[c]);return zp(e,f,s,n,null)}function zp(e,i,o,s,n){var c={type:e,props:i,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++ow};return n==null&&Bn.vnode!=null&&Bn.vnode(c),c}function pm(e){return e.children}function Ic(e,i){this.props=e,this.context=i}function Pf(e,i){if(i==null)return e.__?Pf(e.__,e.__.__k.indexOf(e)+1):null;for(var o;i<e.__k.length;i++)if((o=e.__k[i])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Pf(e):null}function cw(e){var i,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,i=0;i<e.__k.length;i++)if((o=e.__k[i])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return cw(e)}}function w_(e){(!e.__d&&(e.__d=!0)&&is.push(e)&&!Zp.__r++||E_!==Bn.debounceRendering)&&((E_=Bn.debounceRendering)||iw)(Zp)}function Zp(){var e,i,o,s,n,c,f,h;for(is.sort(Vg);e=is.shift();)e.__d&&(i=is.length,s=void 0,n=void 0,f=(c=(o=e).__v).__e,(h=o.__P)&&(s=[],(n=cu({},c)).__v=c.__v+1,hw(h,c,n,o.__n,h.ownerSVGElement!==void 0,c.__h!=null?[f]:null,s,f??Pf(c),c.__h),DA(s,c),c.__e!=f&&cw(c)),is.length>i&&is.sort(Vg));Zp.__r=0}function lw(e,i,o,s,n,c,f,h,v,m){var g,w,x,S,N,j,R,D=s&&s.__k||uw,V=D.length;for(o.__k=[],g=0;g<i.length;g++)if((S=o.__k[g]=(S=i[g])==null||typeof S=="boolean"||typeof S=="function"?null:typeof S=="string"||typeof S=="number"||typeof S=="bigint"?zp(null,S,null,null,S):dm(S)?zp(pm,{children:S},null,null,null):S.__b>0?zp(S.type,S.props,S.key,S.ref?S.ref:null,S.__v):S)!=null){if(S.__=o,S.__b=o.__b+1,(x=D[g])===null||x&&S.key==x.key&&S.type===x.type)D[g]=void 0;else for(w=0;w<V;w++){if((x=D[w])&&S.key==x.key&&S.type===x.type){D[w]=void 0;break}x=null}hw(e,S,x=x||aw,n,c,f,h,v,m),N=S.__e,(w=S.ref)&&x.ref!=w&&(R||(R=[]),x.ref&&R.push(x.ref,null,S),R.push(w,S.__c||N,S)),N!=null?(j==null&&(j=N),typeof S.type=="function"&&S.__k===x.__k?S.__d=v=fw(S,v,e):v=dw(e,S,x,D,N,v),typeof o.type=="function"&&(o.__d=v)):v&&x.__e==v&&v.parentNode!=e&&(v=Pf(x))}for(o.__e=j,g=V;g--;)D[g]!=null&&(typeof o.type=="function"&&D[g].__e!=null&&D[g].__e==o.__d&&(o.__d=pw(s).nextSibling),yw(D[g],D[g]));if(R)for(g=0;g<R.length;g++)vw(R[g],R[++g],R[++g])}function fw(e,i,o){for(var s,n=e.__k,c=0;n&&c<n.length;c++)(s=n[c])&&(s.__=e,i=typeof s.type=="function"?fw(s,i,o):dw(o,s,s,n,s.__e,i));return i}function dw(e,i,o,s,n,c){var f,h,v;if(i.__d!==void 0)f=i.__d,i.__d=void 0;else if(o==null||n!=c||n.parentNode==null)e:if(c==null||c.parentNode!==e)e.appendChild(n),f=null;else{for(h=c,v=0;(h=h.nextSibling)&&v<s.length;v+=1)if(h==n)break e;e.insertBefore(n,c),f=c}return f!==void 0?f:n.nextSibling}function pw(e){var i,o,s;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(i=e.__k.length-1;i>=0;i--)if((o=e.__k[i])&&(s=pw(o)))return s}return null}function kA(e,i,o,s,n){var c;for(c in o)c==="children"||c==="key"||c in i||Jp(e,c,null,o[c],s);for(c in i)n&&typeof i[c]!="function"||c==="children"||c==="key"||c==="value"||c==="checked"||o[c]===i[c]||Jp(e,c,i[c],o[c],s)}function O_(e,i,o){i[0]==="-"?e.setProperty(i,o??""):e[i]=o==null?"":typeof o!="number"||RA.test(i)?o:o+"px"}function Jp(e,i,o,s,n){var c;e:if(i==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(i in s)o&&i in o||O_(e.style,i,"");if(o)for(i in o)s&&o[i]===s[i]||O_(e.style,i,o[i])}else if(i[0]==="o"&&i[1]==="n")c=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in e?i.toLowerCase().slice(2):i.slice(2),e.l||(e.l={}),e.l[i+c]=o,o?s||e.addEventListener(i,c?S_:x_,c):e.removeEventListener(i,c?S_:x_,c);else if(i!=="dangerouslySetInnerHTML"){if(n)i=i.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(i!=="width"&&i!=="height"&&i!=="href"&&i!=="list"&&i!=="form"&&i!=="tabIndex"&&i!=="download"&&i!=="rowSpan"&&i!=="colSpan"&&i in e)try{e[i]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&i[4]!=="-"?e.removeAttribute(i):e.setAttribute(i,o))}}function x_(e){return this.l[e.type+!1](Bn.event?Bn.event(e):e)}function S_(e){return this.l[e.type+!0](Bn.event?Bn.event(e):e)}function hw(e,i,o,s,n,c,f,h,v){var m,g,w,x,S,N,j,R,D,V,ce,Ee,fe,W,ae,Y=i.type;if(i.constructor!==void 0)return null;o.__h!=null&&(v=o.__h,h=i.__e=o.__e,i.__h=null,c=[h]),(m=Bn.__b)&&m(i);try{e:if(typeof Y=="function"){if(R=i.props,D=(m=Y.contextType)&&s[m.__c],V=m?D?D.props.value:m.__:s,o.__c?j=(g=i.__c=o.__c).__=g.__E:("prototype"in Y&&Y.prototype.render?i.__c=g=new Y(R,V):(i.__c=g=new Ic(R,V),g.constructor=Y,g.render=IA),D&&D.sub(g),g.props=R,g.state||(g.state={}),g.context=V,g.__n=s,w=g.__d=!0,g.__h=[],g._sb=[]),g.__s==null&&(g.__s=g.state),Y.getDerivedStateFromProps!=null&&(g.__s==g.state&&(g.__s=cu({},g.__s)),cu(g.__s,Y.getDerivedStateFromProps(R,g.__s))),x=g.props,S=g.state,g.__v=i,w)Y.getDerivedStateFromProps==null&&g.componentWillMount!=null&&g.componentWillMount(),g.componentDidMount!=null&&g.__h.push(g.componentDidMount);else{if(Y.getDerivedStateFromProps==null&&R!==x&&g.componentWillReceiveProps!=null&&g.componentWillReceiveProps(R,V),!g.__e&&g.shouldComponentUpdate!=null&&g.shouldComponentUpdate(R,g.__s,V)===!1||i.__v===o.__v){for(i.__v!==o.__v&&(g.props=R,g.state=g.__s,g.__d=!1),g.__e=!1,i.__e=o.__e,i.__k=o.__k,i.__k.forEach(function(F){F&&(F.__=i)}),ce=0;ce<g._sb.length;ce++)g.__h.push(g._sb[ce]);g._sb=[],g.__h.length&&f.push(g);break e}g.componentWillUpdate!=null&&g.componentWillUpdate(R,g.__s,V),g.componentDidUpdate!=null&&g.__h.push(function(){g.componentDidUpdate(x,S,N)})}if(g.context=V,g.props=R,g.__P=e,Ee=Bn.__r,fe=0,"prototype"in Y&&Y.prototype.render){for(g.state=g.__s,g.__d=!1,Ee&&Ee(i),m=g.render(g.props,g.state,g.context),W=0;W<g._sb.length;W++)g.__h.push(g._sb[W]);g._sb=[]}else do g.__d=!1,Ee&&Ee(i),m=g.render(g.props,g.state,g.context),g.state=g.__s;while(g.__d&&++fe<25);g.state=g.__s,g.getChildContext!=null&&(s=cu(cu({},s),g.getChildContext())),w||g.getSnapshotBeforeUpdate==null||(N=g.getSnapshotBeforeUpdate(x,S)),lw(e,dm(ae=m!=null&&m.type===pm&&m.key==null?m.props.children:m)?ae:[ae],i,o,s,n,c,f,h,v),g.base=i.__e,i.__h=null,g.__h.length&&f.push(g),j&&(g.__E=g.__=null),g.__e=!1}else c==null&&i.__v===o.__v?(i.__k=o.__k,i.__e=o.__e):i.__e=CA(o.__e,i,o,s,n,c,f,v);(m=Bn.diffed)&&m(i)}catch(F){i.__v=null,(v||c!=null)&&(i.__e=h,i.__h=!!v,c[c.indexOf(h)]=null),Bn.__e(F,i,o)}}function DA(e,i){Bn.__c&&Bn.__c(i,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){Bn.__e(s,o.__v)}})}function CA(e,i,o,s,n,c,f,h){var v,m,g,w=o.props,x=i.props,S=i.type,N=0;if(S==="svg"&&(n=!0),c!=null){for(;N<c.length;N++)if((v=c[N])&&"setAttribute"in v==!!S&&(S?v.localName===S:v.nodeType===3)){e=v,c[N]=null;break}}if(e==null){if(S===null)return document.createTextNode(x);e=n?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,x.is&&x),c=null,h=!1}if(S===null)w===x||h&&e.data===x||(e.data=x);else{if(c=c&&fm.call(e.childNodes),m=(w=o.props||aw).dangerouslySetInnerHTML,g=x.dangerouslySetInnerHTML,!h){if(c!=null)for(w={},N=0;N<e.attributes.length;N++)w[e.attributes[N].name]=e.attributes[N].value;(g||m)&&(g&&(m&&g.__html==m.__html||g.__html===e.innerHTML)||(e.innerHTML=g&&g.__html||""))}if(kA(e,x,w,n,h),g)i.__k=[];else if(lw(e,dm(N=i.props.children)?N:[N],i,o,s,n&&S!=="foreignObject",c,f,c?c[0]:o.__k&&Pf(o,0),h),c!=null)for(N=c.length;N--;)c[N]!=null&&sw(c[N]);h||("value"in x&&(N=x.value)!==void 0&&(N!==e.value||S==="progress"&&!N||S==="option"&&N!==w.value)&&Jp(e,"value",N,w.value,!1),"checked"in x&&(N=x.checked)!==void 0&&N!==e.checked&&Jp(e,"checked",N,w.checked,!1))}return e}function vw(e,i,o){try{typeof e=="function"?e(i):e.current=i}catch(s){Bn.__e(s,o)}}function yw(e,i,o){var s,n;if(Bn.unmount&&Bn.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||vw(s,null,i)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(c){Bn.__e(c,i)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(n=0;n<s.length;n++)s[n]&&yw(s[n],i,o||typeof e.type!="function");o||e.__e==null||sw(e.__e),e.__=e.__e=e.__d=void 0}function IA(e,i,o){return this.constructor(e,o)}fm=uw.slice,Bn={__e:function(e,i,o,s){for(var n,c,f;i=i.__;)if((n=i.__c)&&!n.__)try{if((c=n.constructor)&&c.getDerivedStateFromError!=null&&(n.setState(c.getDerivedStateFromError(e)),f=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,s||{}),f=n.__d),f)return n.__E=n}catch(h){e=h}throw e}},ow=0,Ic.prototype.setState=function(e,i){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=cu({},this.state),typeof e=="function"&&(e=e(cu({},o),this.props)),e&&cu(o,e),e!=null&&this.__v&&(i&&this._sb.push(i),w_(this))},Ic.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w_(this))},Ic.prototype.render=pm,is=[],iw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vg=function(e,i){return e.__v.__b-i.__v.__b},Zp.__r=0;var Af=globalThis&&globalThis.__assign||function(){return Af=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Af.apply(this,arguments)};function hm(e){var i=e.x,o=e.y,s=e.width,n=e.height,c=e.radius,f=e.className,h=i-s/2,v=o-n/2,m=Af(Af({width:10,height:10,cx:0,cy:0,rx:c||0,ry:c||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+f},e),{x:h,y:v});return Wt.h("rect",Af({},m))}hm.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Dc;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Dc||(Dc={}));function Hp(e){var i=e.x,o=e.y,s=e.width,n=e.height;return{minX:i-s/2,minY:o-n/2,maxX:i+s/2,maxY:o+n/2}}function T_(e){var i=Hp(e),o=e.radius,s=i.minX,n=i.minY,c=i.maxX,f=i.maxY;return[{x:s+o,y:n+o},{x:c-o,y:n+o},{x:c-o,y:f-o},{x:s+o,y:f-o}]}function A_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=i.x,c=i.y,f={x:n,y:c},h=o.radius,v=Hp(o),m=Hp(s);if(n===v.minX){f.x=m.minX;var g=(c-o.y)/(o.height/2-h);g?f.y=s.y+(s.height/2-h)*g:f.y=s.y}else if(n===v.maxX){f.x=m.maxX;var g=(c-o.y)/(o.height/2-h);g?f.y=s.y+(s.height/2-h)*g:f.y=s.y}else if(c===v.minY){f.y=m.minY;var g=(n-o.x)/(o.width/2-h);g?f.x=s.x+(s.width/2-h)*g:f.x=s.x}else if(c===v.maxY){f.y=m.maxY;var g=(n-o.x)/(o.width/2-h);g?f.x=s.x+(s.width/2-h)*g:f.x=s.x}else{var w=T_(o),x=T_(s),S=Hp(o),N=S.minX,j=S.minY,R=S.maxX,D=S.maxY,V=-1;if(n-N<h&&c-j<h?V=0:R-n<h&&c-j<h?V=1:R-n<h&&D-c<h?V=2:n-N<h&&j-c<h&&(V=3),V>-1){var ce=Math.atan2(c-w[V].y,n-w[V].x);f.x=x[V].x+h*Math.cos(ce),f.y=x[V].y+h*Math.sin(ce)}}return f}function P_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=s.rx,c=s.ry,f=i,h=(i.y-o.y)/(i.x-o.x),v=n,m=c,g,w;return h>=1/0?(g=0,w=m):h<=-1/0?(g=0,w=-m):i.x-o.x>0?(g=v*m/Math.sqrt(m*m+v*v*h*h),w=v*m*h/Math.sqrt(m*m+v*v*h*h)):(g=-(v*m)/Math.sqrt(m*m+v*v*h*h),w=-(v*m*h)/Math.sqrt(m*m+v*v*h*h)),f={x:g+s.x,y:w+s.y},f}function N_(e){var i=e.point,o=e.beforeNode,s=e.afterNode,n=i,c,f,h=i.x-o.x,v=i.y-o.y,m=o.rx,g=o.ry,w=Math.sqrt((m-Math.abs(h))*(m-Math.abs(h))+v*v)/Math.sqrt(m*m+g*g),x=s.rx,S=s.ry,N=Math.sqrt((x*x+S*S)*w*w*(x*x/(x*x+S*S))),j=N*(S/x);return h>=0?c=x-N:c=N-x,v>0?f=j:f=-j,n={x:c+s.x,y:f+s.y},n}var LA=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),as=globalThis&&globalThis.__assign||function(){return as=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},as.apply(this,arguments)},FA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},BA=Wt.LogicFlowUtil.StepDrag,GA=function(e){LA(i,e);function i(o){var s=e.call(this)||this;return s.updatePosition=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.x,m=h.y;s.nodeModel.x=v+c/2,s.nodeModel.y=m+f/2,s.nodeModel.moveText(c/2,f/2)},s.getResize=function(n){var c=n.index,f=n.deltaX,h=n.deltaY,v=n.width,m=n.height,g=n.PCTResizeInfo,w=n.pct,x=w===void 0?1:w,S={width:v,height:m,deltaX:f,deltaY:h};if(g){var N=4,j=0,R=0;switch(c){case 0:R=(f*-1-h)/N;break;case 1:R=(f-h)/N;break;case 2:R=(f+h)/N;break;case 3:R=(f*-1+h)/N;break}R!==0&&(j=Math.round(R/g.ResizeBasis.basisHeight*1e5)/1e3),g.ResizePCT.widthPCT=Math.max(Math.min(g.ResizePCT.widthPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit),g.ResizePCT.hightPCT=Math.max(Math.min(g.ResizePCT.hightPCT+j,g.ScaleLimit.maxScaleLimit),g.ScaleLimit.minScaleLimit);var D=Math.round(g.ResizePCT.widthPCT*g.ResizeBasis.basisWidth/100),V=Math.round(g.ResizePCT.hightPCT*g.ResizeBasis.basisHeight/100);switch(c){case 0:f=v-D,h=m-V;break;case 1:f=D-v,h=m-V;break;case 2:f=D-v,h=V-m;break;case 3:f=v-D,h=V-m;break}return S.width=D,S.height=V,S.deltaX=f/x,S.deltaY=h/x,S}switch(c){case 0:S.width=v-f*x,S.height=m-h*x;break;case 1:S.width=v+f*x,S.height=m-h*x;break;case 2:S.width=v+f*x,S.height=m+h*x;break;case 3:S.width=v-f*x,S.height=m+h*x;break}return S},s.updateRect=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,m=h.x,g=h.y,w=h.width,x=h.height,S=h.radius,N=h.PCTResizeInfo,j=s.index,R=s.getResize({index:j,deltaX:c,deltaY:f,width:w,height:x,PCTResizeInfo:N,pct:1}),D=s.nodeModel,V=D.minWidth,ce=D.minHeight,Ee=D.maxWidth,fe=D.maxHeight;if(R.width<V||R.width>Ee||R.height<ce||R.height>fe){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:R.deltaX,deltaY:R.deltaY}),s.nodeModel.width=R.width,s.nodeModel.height=R.height,s.nodeModel.setProperties({nodeSize:{width:R.width,height:R.height}});var W=s.getNodeEdges(v),ae={x:m,y:g,width:w,height:x,radius:S},Y={x:s.nodeModel.x,y:s.nodeModel.y,width:s.nodeModel.width,height:s.nodeModel.height,radius:S},F={point:"",beforeNode:ae,afterNode:Y},$;W.sourceEdges.forEach(function(K){F.point=K.startPoint,$=A_(F),K.updateStartPoint($)}),W.targetEdges.forEach(function(K){F.point=K.endPoint,$=A_(F),K.updateEndPoint($)}),s.eventEmit({beforeNode:ae,afterNode:Y})},s.updateEllipse=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,m=h.rx,g=h.ry,w=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=m,R=g,D=s.getResize({index:N,deltaX:c,deltaY:f,width:j,height:R,PCTResizeInfo:S,pct:1/2}),V=s.nodeModel,ce=V.minWidth,Ee=V.minHeight,fe=V.maxWidth,W=V.maxHeight;if(D.width<ce/2||D.width>fe/2||D.height<Ee/2||D.height>W/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),s.nodeModel.rx=D.width,s.nodeModel.ry=D.height,s.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ae=s.getNodeEdges(v),Y={x:w,y:x},F={rx:D.width,ry:D.height,x:s.nodeModel.x,y:s.nodeModel.y},$={point:{},beforeNode:Y,afterNode:F},K;ae.sourceEdges.forEach(function(I){$.point=I.startPoint,K=P_($),I.updateStartPoint(K)}),ae.targetEdges.forEach(function(I){$.point=I.endPoint,K=P_($),I.updateEndPoint(K)}),s.eventEmit({beforeNode:as(as({},Y),{rx:m,ry:g}),afterNode:F})},s.updateDiamond=function(n){var c=n.deltaX,f=n.deltaY,h=s.nodeModel,v=h.id,m=h.rx,g=h.ry,w=h.x,x=h.y,S=h.PCTResizeInfo,N=s.index,j=m,R=g,D=s.getResize({index:N,deltaX:c,deltaY:f,width:j,height:R,PCTResizeInfo:S,pct:1/2}),V=s.nodeModel,ce=V.minWidth,Ee=V.minHeight,fe=V.maxWidth,W=V.maxHeight;if(D.width<ce/2||D.width>fe/2||D.height<Ee/2||D.height>W/2){s.dragHandler.cancelDrag();return}s.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),s.nodeModel.rx=D.width,s.nodeModel.ry=D.height,s.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ae={x:w,y:x,rx:m,ry:g},Y={rx:D.width,ry:D.height,x:s.nodeModel.x,y:s.nodeModel.y},F={point:{},beforeNode:ae,afterNode:Y},$,K=s.getNodeEdges(v);K.sourceEdges.forEach(function(I){F.point=I.startPoint,$=N_(F),I.updateStartPoint($)}),K.targetEdges.forEach(function(I){F.point=I.endPoint,$=N_(F),I.updateEndPoint($)}),s.eventEmit({beforeNode:ae,afterNode:Y})},s.eventEmit=function(n){var c=n.beforeNode,f=n.afterNode,h=s.nodeModel,v=h.id,m=h.modelType,g=h.type,w=as({id:v,modelType:m,type:g},c),x=as({id:v,modelType:m,type:g},f);s.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:x})},s.onDragging=function(n){var c,f=n.deltaX,h=n.deltaY,v=s.graphModel.transformModel,m=s.nodeModel.modelType;c=FA(v.fixDeltaXY(f,h),2),f=c[0],h=c[1],m===Dc.RECT_NODE||m===Dc.HTML_NODE?s.updateRect({deltaX:f,deltaY:h}):m===Dc.ELLIPSE_NODE?s.updateEllipse({deltaX:f,deltaY:h}):m===Dc.DIAMOND_NODE&&s.updateDiamond({deltaX:f,deltaY:h})},s.onDragEnd=function(){var n=s.graphModel.gridSize,c=n===void 0?1:n,f=c*Math.round(s.nodeModel.x/c),h=c*Math.round(s.nodeModel.y/c);s.nodeModel.moveTo(f,h)},s.index=o.index,s.nodeModel=o.model,s.graphModel=o.graphModel,s.state={},s.dragHandler=new BA({onDragging:s.onDragging,onDragEnd:s.onDragEnd,step:1}),s}return i.prototype.getNodeEdges=function(o){for(var s=this.graphModel,n=s.edges,c=[],f=[],h=0;h<n.length;h++){var v=n[h];v.sourceNodeId===o?c.push(v):n[h].targetNodeId===o&&f.push(v)}return{sourceEdges:c,targetEdges:f}},i.prototype.render=function(){var o=this.props,s=o.x,n=o.y,c=o.index,f=o.model,h=f.getControlPointStyle();return Tf("g",{className:"lf-resize-control-"+c},Tf(hm,as({className:"lf-node-control"},{x:s,y:n},h,{onMouseDown:this.dragHandler.handleMouseDown})))},i}(Ic),UA=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Qp=globalThis&&globalThis.__assign||function(){return Qp=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Qp.apply(this,arguments)},fh=function(e){UA(i,e);function i(){var o=e.call(this)||this;return o.state={},o}return i.prototype.getResizeControl=function(){var o=this.props,s=o.model,n=o.graphModel,c=s.x,f=s.y,h=s.width,v=s.height,m={minX:c-h/2,minY:f-v/2,maxX:c+h/2,maxY:f+v/2},g=m.minX,w=m.minY,x=m.maxX,S=m.maxY,N=[{x:g,y:w},{x,y:w},{x,y:S},{x:g,y:S}];return N.map(function(j,R){return Tf(GA,Qp({index:R},j,{model:s,graphModel:n}))})},i.prototype.getGroupSolid=function(){var o=this.props.model,s=o.x,n=o.y,c=o.width,f=o.height,h=o.getResizeOutlineStyle();return Tf(hm,Qp({fill:"none"},h,{x:s,y:n,width:c,height:f}))},i.prototype.render=function(){return Tf("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},i}(Ic),gw=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),zA=function(e){gw(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.width=c.width,n.height=c.height),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.resize=function(o,s){console.log(o,s)},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i}(Wt.RectNodeModel),HA=function(e){gw(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(fh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i}(Wt.RectNode),dh={type:"rect",view:HA,model:zA},mw=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();(function(e){mw(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.rx=c.rx,n.ry=c.ry),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.EllipseNodeModel);(function(e){mw(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(fh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s.isSelected&&!n?this.getControlGroup():"")},i})(Wt.EllipseNode);var Wg=globalThis&&globalThis.__assign||function(){return Wg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Wg.apply(this,arguments)};function XA(e){var i=e.fillOpacity,o=i===void 0?1:i,s=e.strokeWidth,n=s===void 0?1:s,c=e.strokeOpacity,f=c===void 0?1:c,h=e.fill,v=h===void 0?"transparent":h,m=e.stroke,g=m===void 0?"#000":m,w=e.points,x=e.className,S=x===void 0?"lf-basic-shape":x,N={fill:v,fillOpacity:o,strokeWidth:n,stroke:g,strokeOpacity:f,points:"",className:S};return N.points=w.map(function(j){return j.join(",")}).join(" "),Wt.h("polygon",Wg({},N))}var bw=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),Yg=globalThis&&globalThis.__assign||function(){return Yg=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Yg.apply(this,arguments)};(function(e){bw(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.rx=c.rx,n.ry=c.ry),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.rx,basisHeight:this.ry},c={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.DiamondNodeModel);(function(e){bw(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(fh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){var o=this.props.model,s=o.points,n=o.getNodeStyle();return Wt.h("g",null,Wt.h(XA,Yg({},n,{points:s})))},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i})(Wt.DiamondNode);var _w=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();(function(e){_w(i,e);function i(o,s){var n=e.call(this,o,s)||this,c=n.properties.nodeSize;return c&&(n.width=c.width,n.height=c.height),n}return i.prototype.initNodeData=function(o){e.prototype.initNodeData.call(this,o),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},i.prototype.getOutlineStyle=function(){var o=e.prototype.getOutlineStyle.call(this),s=this.graphModel.editConfigModel.isSilentMode;return s||(o.stroke="none",o.hover&&(o.hover.stroke="none")),o},i.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},i.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},i.prototype.enableProportionResize=function(o){if(o===void 0&&(o=!0),o){var s={widthPCT:100,hightPCT:100},n={basisWidth:this.width,basisHeight:this.height},c={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:s,ResizeBasis:n,ScaleLimit:c}}else delete this.PCTResizeInfo},i})(Wt.HtmlNodeModel);(function(e){_w(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props,s=o.model,n=o.graphModel;return Wt.h(fh,{model:s,graphModel:n})},i.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},i.prototype.getShape=function(){var o=this.props,s=o.model.isSelected,n=o.graphModel.editConfigModel.isSilentMode;return Wt.h("g",null,this.getResizeShape(),s&&!n?this.getControlGroup():"")},i})(Wt.HtmlNode);var Ew=globalThis&&globalThis.__extends||function(){var e=function(i,o){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c])},e(i,o)};return function(i,o){e(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}(),eh=globalThis&&globalThis.__assign||function(){return eh=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},eh.apply(this,arguments)},VA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c},WA=globalThis&&globalThis.__spread||function(){for(var e=[],i=0;i<arguments.length;i++)e=e.concat(VA(arguments[i]));return e},j_=500,M_=300,YA=-1e4,$A=function(e){Ew(i,e);function i(){var o=e!==null&&e.apply(this,arguments)||this;return o.isGroup=!0,o.unfoldedWidth=j_,o.unfoldedHight=M_,o}return i.prototype.initNodeData=function(o){var s=this;e.prototype.initNodeData.call(this,o);var n=[];Array.isArray(o.children)&&(n=o.children),this.children=new Set(n),this.width=j_,this.height=M_,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=YA,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){s.isFolded&&s.foldGroup(s.isFolded)})},i.prototype.getResizeOutlineStyle=function(){var o=e.prototype.getResizeOutlineStyle.call(this);return o.stroke="none",o},i.prototype.foldGroup=function(o){var s=this;this.setProperty("isFolded",o),this.isFolded=o,o?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var n=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(c){var f=s.graphModel.getElement(c);f.isGroup&&!f.isFolded&&f.foldGroup(o),f.visible=!o,n=n.concat(f.incoming.edges.concat(f.outgoing.edges))}),this.foldEdge(o,n)},i.prototype.getAnchorStyle=function(o){var s=e.prototype.getAnchorStyle.call(this,o);return s.stroke="transparent",s.fill="transparent",s.hover.fill="transparent",s.hover.stroke="transparent",s},i.prototype.foldEdge=function(o,s){var n=this;s.forEach(function(c,f){var h=c.id,v=c.sourceNodeId,m=c.targetNodeId,g=c.startPoint,w=c.endPoint,x=c.type,S=c.text,N=c.getProperties(),j={id:h+"__"+f,sourceNodeId:v,targetNodeId:m,startPoint:g,endPoint:w,type:x,properties:N,text:S==null?void 0:S.value};c.virtual&&n.graphModel.deleteEdgeById(c.id);var R=n.graphModel.group.getNodeGroup(m);R||(R=n.graphModel.getNodeModelById(m));var D=n.graphModel.group.getNodeGroup(v);D||(D=n.graphModel.getNodeModelById(v)),o&&c.visible!==!1&&(n.children.has(v)||n.id===v?(j.startPoint=void 0,j.sourceNodeId=n.id):(j.endPoint=void 0,j.targetNodeId=n.id),(R.id!==n.id||D.id!==n.id)&&n.createVirtualEdge(j),c.visible=!1),!o&&c.visible===!1&&(R&&R.isGroup&&R.isFolded?(j.targetNodeId=R.id,j.endPoint=void 0,n.createVirtualEdge(j)):D&&D.isGroup&&D.isFolded?(j.sourceNodeId=D.id,j.startPoint=void 0,n.createVirtualEdge(j)):c.visible=!0)})},i.prototype.createVirtualEdge=function(o){o.pointsList=void 0;var s=this.graphModel.addEdge(o);s.virtual=!0,s.text.editable=!1,s.isFoldedEdge=!0},i.prototype.isInRange=function(o){var s=o.x1,n=o.y1,c=o.x2,f=o.y2;return s>=this.x-this.width/2&&c<=this.x+this.width/2&&n>=this.y-this.height/2&&f<=this.y+this.height/2},i.prototype.isAllowMoveTo=function(o){var s=o.x1,n=o.y1,c=o.x2,f=o.y2;return{x:s>=this.x-this.width/2&&c<=this.x+this.width/2,y:n>=this.y-this.height/2&&f<=this.y+this.height/2}},i.prototype.setAllowAppendChild=function(o){this.setProperty("groupAddable",o)},i.prototype.addChild=function(o){this.children.add(o)},i.prototype.removeChild=function(o){this.children.delete(o)},i.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},i.prototype.getData=function(){var o=this,s=e.prototype.getData.call(this);s.children=[],this.children.forEach(function(c){var f=o.graphModel.getNodeModelById(c);f&&!f.virtual&&s.children.push(c)});var n=s.properties;return delete n.groupAddable,delete n.isFolded,s},i.prototype.getHistoryData=function(){var o=e.prototype.getData.call(this);o.children=WA(this.children),o.isGroup=!0;var s=o.properties;return delete s.groupAddable,s.isFolded&&(o.x=o.x+this.unfoldedWidth/2-this.foldedWidth/2,o.y=o.y+this.unfoldedHight/2-this.foldedHeight/2),o},i.prototype.isAllowAppendIn=function(o){return!0},i.prototype.toBack=function(){this.zIndex--},i}(dh.model),KA=function(e){Ew(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.getControlGroup=function(){var o=this.props.model,s=o.resizable,n=o.properties;return s&&!n.isFolded?e.prototype.getControlGroup.call(this):null},i.prototype.getAddableShape=function(){var o=this.props.model,s=o.width,n=o.height,c=o.x,f=o.y,h=o.radius,v=o.properties;if(!v.groupAddable)return null;var m=this.props.model.getNodeStyle().strokeWidth,g=this.props.model.getAddableOutlineStyle(),w=s+m+8,x=n+m+8;return Wt.h("rect",eh(eh({},g),{width:w,height:x,x:c-w/2,y:f-x/2,rx:h,ry:h}))},i.prototype.getFoldIcon=function(){var o=this.props.model,s=o.x-o.width/2+5,n=o.y-o.height/2+5;if(!o.foldable)return null;var c=Wt.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:o.properties.isFolded?"M "+(s+3)+","+(n+6)+" "+(s+11)+","+(n+6)+" M"+(s+7)+","+(n+2)+" "+(s+7)+","+(n+10):"M "+(s+3)+","+(n+6)+" "+(s+11)+","+(n+6)+" "});return Wt.h("g",{},[Wt.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:o.x-o.width/2+5,y:o.y-o.height/2+5,onClick:function(){o.foldGroup(!o.properties.isFolded)}}),c])},i.prototype.getResizeShape=function(){return Wt.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},i}(dh.view);const vm={type:"group",view:KA,model:$A};var qA=-1e3,R_=-1e4,ZA=function(){function e(i){var o=this,s=i.lf;this.topGroupZIndex=R_,this.nodeGroupMap=new Map,this.graphRendered=function(n){n&&n.nodes&&n.nodes.forEach(function(c){c.children&&c.children.forEach(function(f){o.nodeGroupMap.set(f,c.id)})})},this.appendNodeToGroup=function(n){var c=n.data,f=o.nodeGroupMap.get(c.id);if(f){var h=o.lf.getNodeModelById(f);h.removeChild(c.id),o.nodeGroupMap.delete(c.id),h.setAllowAppendChild(!1)}var v=o.lf.getNodeModelById(c.id),m=v.getBounds(),g=o.getGroup(m,c);if(g){var w=g.isAllowAppendIn(c);if(!w){o.lf.emit("group:not-allowed",{group:g.getData(),node:c});return}g.addChild(c.id),o.nodeGroupMap.set(c.id,g.id),g.setAllowAppendChild(!1),v.isGroup&&(c.children.forEach(function(x){o.nodeGroupMap.set(x,c.id)}),o.nodeSelected({data:c,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(n){var c=n.data;c.children&&c.children.forEach(function(v){o.nodeGroupMap.delete(v),o.lf.deleteNode(v)});var f=o.nodeGroupMap.get(c.id);if(f){var h=o.lf.getNodeModelById(f);h.removeChild(c.id),o.nodeGroupMap.delete(c.id)}},this.setActiveGroup=function(n){var c=n.data,f=o.lf.getNodeModelById(c.id),h=f.getBounds(),v=o.getGroup(h,c);if(o.activeGroup&&o.activeGroup.setAllowAppendChild(!1),!(!v||f.isGroup&&v.id===c.id)){var m=v.isAllowAppendIn(c);m&&(o.activeGroup=v,o.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(n){var c=n.data,f=n.isMultiple,h=n.isSelected,v=o.lf.getNodeModelById(c.id);if(o.toFrontGroup(v),o.topGroupZIndex>qA){o.topGroupZIndex=R_;for(var m=o.lf.graphModel.nodes.filter(function(j){return j.isGroup}).sort(function(j,R){return j.zIndex-R.zIndex}),g=0,w=0;w<m.length;w++){var x=m[w];x.zIndex!==g&&(o.topGroupZIndex++,g=x.zIndex),x.setZIndex(o.topGroupZIndex)}}if(f&&h)if(v.isGroup)v.children.forEach(function(j){var R=o.lf.graphModel.getElement(j);R.setSelected(!1)});else{var S=o.nodeGroupMap.get(c.id);if(S){var N=o.lf.getNodeModelById(S);N.isSelected&&v.setSelected(!1)}}},this.toFrontGroup=function(n){!n||!n.isGroup||(o.topGroupZIndex++,n.setZIndex(o.topGroupZIndex),n.children&&n.children.forEach(function(c){var f=o.lf.getNodeModelById(c);o.toFrontGroup(f)}))},s.register(vm),this.lf=s,s.graphModel.addNodeMoveRules(function(n,c,f){if(n.isGroup){var h=o.getNodeAllChild(n);return s.graphModel.moveNodes(h,c,f,!0),!0}var v=s.getNodeModelById(o.nodeGroupMap.get(n.id));if(v&&v.isRestrict){var m=n.getBounds(),g=m.x1,w=m.y1,x=m.x2,S=m.y2,N=v.isAllowMoveTo({x1:g+c,y1:w+f,x2:x+c,y2:S+f});return N}return!0}),s.graphModel.group=this,s.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),s.on("node:delete",this.deleteGroupChild),s.on("node:dnd-drag,node:drag",this.setActiveGroup),s.on("node:click",this.nodeSelected),s.on("graph:rendered",this.graphRendered)}return e.prototype.getNodeAllChild=function(i){var o=this,s=[];return i.children&&i.children.forEach(function(n){s.push(n);var c=o.lf.getNodeModelById(n);c.isGroup&&(s=s.concat(o.getNodeAllChild(c)))}),s},e.prototype.getGroup=function(i,o){var s=this.lf.graphModel.nodes,n=s.filter(function(h){return h.isGroup&&h.isInRange(i)&&h.id!==o.id});if(n.length!==0){if(n.length===1)return n[0];for(var c=n[n.length-1],f=n.length-2;f>=0;f--)n[f].zIndex>c.zIndex&&(c=n[f]);return c}},e.prototype.getNodeGroup=function(i){var o=this.nodeGroupMap.get(i);if(o)return this.lf.getNodeModelById(o)},e.pluginName="group",e}(),JA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};globalThis&&globalThis.__spread;var k_=globalThis&&globalThis.__assign||function(){return k_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},k_.apply(this,arguments)},D_=globalThis&&globalThis.__assign||function(){return D_=Object.assign||function(e){for(var i,o=1,s=arguments.length;o<s;o++){i=arguments[o];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},D_.apply(this,arguments)},QA=globalThis&&globalThis.__read||function(e,i){var o=typeof Symbol=="function"&&e[Symbol.iterator];if(!o)return e;var s=o.call(e),n,c=[],f;try{for(;(i===void 0||i-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(h){f={error:h}}finally{try{n&&!n.done&&(o=s.return)&&o.call(s)}finally{if(f)throw f.error}}return c};globalThis&&globalThis.__spread;class eP extends Wt.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class tP extends Wt.HtmlNode{}class rP extends VT{}class nP extends WT{}class oP extends YT{}class iP extends $T{getShape(){const i=this.props.model,o=i.getNodeStyle(),{x:s,y:n,r:c}=i;return Wt.h("circle",{...o,cx:s,cy:n,r:c,strokeWidth:5})}}class aP extends KT{constructor(i,o){const{id:s,text:n,x:c,y:f}=i;i.id=s||`Gateway_${Xi()}`,i.text=n||{value:n||"",x:c,y:f+40},super(i,o),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class uP extends qT{getShape(){const{model:i}=this.props,{x:o,y:s,width:n,height:c,points:f}=i,h=i.getNodeStyle();return Wt.h("g",{transform:`matrix(1 0 0 1 ${o-n/2} ${s-c/2})`},Wt.h("polygon",{...h,x:o,y:s,points:f}),Wt.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),Wt.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class sP extends Wt.PolygonNodeModel{constructor(i,o){const{id:s,text:n,x:c,y:f}=i;i.id=s||`Gateway_${Xi()}`,i.text=n||{value:n||"",x:c,y:f+40},super(i,o),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class cP extends Wt.PolygonNode{getShape(){const{model:i}=this.props,{x:o,y:s,width:n,height:c,points:f}=i,h=i.getNodeStyle();return Wt.h("g",{transform:`matrix(1 0 0 1 ${o-n/2} ${s-c/2})`},Wt.h("polygon",{...h,x:o,y:s,points:f}),Wt.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),Wt.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class lP extends ZT{}class fP extends JT{}class dP extends QT{isAllowConnectedAsSource(){return!1}}class pP extends eA{}class hP extends QE{getTextPosition(){const{x:i,y:o}=this.text;return i&&o?{x:i,y:o}:this.dbClickPosition||{x:0,y:0}}}class vP extends ew{}const yP=dh.model,gP=dh.view;class mP extends yP{createId(){return`Note_${Xi()}`}initNodeData(i){super.initNodeData(i),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const i=super.getNodeStyle();return i.strokeDasharray="3 3",i.fill="transparent",i}}class bP extends gP{}class _P extends QE{getEdgeStyle(){const i=super.getEdgeStyle();return i.strokeDasharray="3 3",i}getTextPosition(){const{x:i,y:o}=this.text;return i&&o?{x:i,y:o}:this.dbClickPosition||{x:0,y:0}}}class EP extends ew{}const wP=vm.model;class OP extends wP{createId(){return`Group_${Xi()}`}initNodeData(i){super.initNodeData(i),this.resizable=!0,this.foldable=!0}addChild(i){var o,s;super.addChild(i),(s=(o=this.graphModel.nodesMap[i])==null?void 0:o.model)==null||s.setProperty("groupKey",this.id)}removeChild(i){var o,s;super.removeChild(i),(s=(o=this.graphModel.nodesMap[i])==null?void 0:o.model)==null||s.deleteProperty("groupKey")}}class xP extends vm.view{}class C_ extends ZA{constructor({lf:i}){super({lf:i}),i.register({type:"group",model:OP,view:xP}),i.off("node:delete",this.deleteGroupChild),i.on("node:delete",({data:o})=>{o.children&&o.children.forEach(s=>{this.nodeGroupMap.delete(s),this.lf.deleteNode(s)})})}}const SP=[{type:"process",model:eP,view:tP},{type:"startEvent",model:rP,view:nP},{type:"endEvent",model:oP,view:iP},{type:"exclusiveGateway",model:aP,view:uP},{type:"parallelGateway",model:sP,view:cP},{type:"userTask",model:lP,view:fP},{type:"serviceTask",model:dP,view:pP},{type:"sequenceFlow",model:hP,view:vP},{type:"note",model:mP,view:bP},{type:"noteFlow",model:_P,view:EP}];class $g{constructor({lf:i}){i.batchRegister(SP),i.setDefaultEdgeType("sequenceFlow")}}yi($g,"pluginName","bpmnExtend");class TP extends OA{constructor({lf:i}){super({lf:i}),[{key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>i.clearData()},{key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>i.emit("custom:edit-click",{})},{key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:s,show:n,hide:c}=i.extension.miniMap??{};s?c():n()}},{key:"reset",iconClass:"lf-control-reset",title:"重置",text:"重置",onClick:()=>{kT.confirm("选择重置的配置","提示",{confirmButtonText:"重置表单配置",cancelButtonText:"重置按钮配置"}).then(()=>{i.emit("custom:reset-form-property",{})}).catch(()=>{i.emit("custom:reset-button",{})})}}].forEach(s=>this.addItem(s))}}class AP{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(i){return this.init(i),this.execute(!0)}init(i){this.nodes=i.nodes||[],this.edges=i.edges||[],this.combos=i.combos||[],this.comboEdges=i.comboEdges||[],this.hiddenNodes=i.hiddenNodes||[],this.hiddenEdges=i.hiddenEdges||[],this.hiddenCombos=i.hiddenCombos||[],this.vedges=i.vedges||[]}execute(i){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(i){i&&Object.assign(this,i)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const PP=e=>typeof e=="string",I_=Array.isArray,th=e=>typeof e=="number",ww=e=>e!==null&&typeof e=="object",rh=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const i=[];return e.forEach(o=>{i.push(o)}),i.map(o=>rh(o))}if(typeof e=="object"&&Object.keys(e).length){const i=Object.assign({},e);return Object.keys(i).forEach(o=>{i[o]=rh(i[o])}),i}return e},Ac=(e,i)=>{const o=e[i];return ww(o)?o.cell:o},L_=(e,i,o)=>{let s;return o?s=o:th(e)?s=()=>e:s=()=>i,s},NP=(e,i)=>{if(e!=="next"&&e!=="prev")return i},F_=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let jP=class{constructor(){const i={};i.prev=i,i.next=i.prev,this.shortcut=i}dequeue(){const i=this.shortcut,o=i.prev;if(o&&o!==i)return F_(o),o}enqueue(i){const o=this.shortcut;i.prev&&i.next&&F_(i),i.next=o.next,o.next.prev=i,o.next=i,i.prev=o}toString(){const i=[],o=this.shortcut;let s=o.prev;for(;s!==o;)i.push(JSON.stringify(s,NP)),s=s==null?void 0:s.prev;return`[${i.join(", ")}]`}};var Lc;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Lc||(Lc={}));function B_(e,i){var o=e.get(i)||0;e.set(i,o+1)}function G_(e,i){var o=e.get(i);o!==void 0&&(o=o-1,o>0?e.set(i,o):e.delete(i))}function Ow(e,i,o,s){var n=String(i),c=String(o);if(!e&&n>c){var f=n;n=c,c=f}return n+Lc.EDGE_KEY_DELIM+c+Lc.EDGE_KEY_DELIM+(s===void 0?Lc.DEFAULT_EDGE_NAME:s)}function U_(e,i,o,s){var n=String(i),c=String(o),f={v:i,w:o};if(!e&&n>c){var h=f.v;f.v=f.w,f.w=h}return s!==void 0&&(f.name=s),f}function Sg(e,i){return Ow(e,i.v,i.w,i.name)}function z_(e){return typeof e=="function"}var MP=function(i){return i.nodes().map(function(o){var s=i.node(o),n=i.parent(o),c={id:o,value:s,parent:n};return c.value===void 0&&delete c.value,c.parent===void 0&&delete c.parent,c})},RP=function(i){return i.edges().map(function(o){var s=i.edge(o),n={v:o.v,w:o.w,value:s,name:o.name};return n.name===void 0&&delete n.name,n.value===void 0&&delete n.value,n})},kP=function(i){var o={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:MP(i),edges:RP(i),value:i.graph()};return o.value===void 0&&delete o.value,o},DP=function(i){var o=new Xc(i.options);return i.value!==void 0&&o.setGraph(i.value),i.nodes.forEach(function(s){o.setNode(s.id,s.value),s.parent&&o.setParent(s.id,s.parent)}),i.edges.forEach(function(s){o.setEdge(s.v,s.w,s.value,s.name)}),o};function H_(e,i){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);i&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),o.push.apply(o,s)}return o}function X_(e){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?H_(Object(o),!0).forEach(function(s){CP(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):H_(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}function CP(e,i,o){return i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}function IP(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function V_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function LP(e,i,o){return i&&V_(e.prototype,i),o&&V_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}var FP={compound:!1,multigraph:!1,directed:!0},Xc=function(){function e(){var i=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};IP(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Lc.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return i.directed},this.isMultigraph=function(){return i.multigraph},this.isCompound=function(){return i.compound},this.setGraph=function(n){return i.label=n,i},this.graph=function(){return i.label},this.setDefaultNodeLabel=function(n){return z_(n)?i.defaultNodeLabelFn=n:i.defaultNodeLabelFn=function(){return n},i},this.nodeCount=function(){return i.nodeCountNum},this.node=function(n){return i.nodesLabelMap.get(n)},this.nodes=function(){return Array.from(i.nodesLabelMap.keys())},this.sources=function(){return i.nodes().filter(function(n){var c;return!(!((c=i.inEdgesMap.get(n))===null||c===void 0)&&c.size)})},this.sinks=function(){return i.nodes().filter(function(n){var c;return!(!((c=i.outEdgesMap.get(n))===null||c===void 0)&&c.size)})},this.setNodes=function(n,c){return n.map(function(f){return i.setNode(f,c)}),i},this.hasNode=function(n){return i.nodesLabelMap.has(n)},this.checkCompound=function(){if(!i.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(n){if(i.isCompound()){var c,f=(c=i.parentMap)===null||c===void 0?void 0:c.get(n);if(f!==i.GRAPH_NODE)return f}},this.removeFromParentsChildList=function(n){var c=i.parentMap.get(n);i.childrenMap.get(c).delete(n)},this.setParent=function(n,c){var f,h;i.checkCompound();for(var v=c===void 0?i.GRAPH_NODE:c,m=i.parent(v);m;){if(n===m)throw new Error("Setting "+c+" as parent of "+n+" would create a cycle");m=i.parent(m)}c&&i.setNode(c),i.setNode(n),i.removeFromParentsChildList(n),(f=i.parentMap)===null||f===void 0||f.set(n,v);var g=i.childrenMap.get(v);return g.set(n,!0),(h=i.childrenMap)===null||h===void 0||h.set(v,g),i},this.children=function(n){var c=n===void 0?i.GRAPH_NODE:n;if(i.isCompound()){var f,h=(f=i.childrenMap)===null||f===void 0?void 0:f.get(c);return h?Array.from(h.keys()):void 0}if(c===i.GRAPH_NODE)return i.nodes();if(n&&i.hasNode(n))return[]},this.predecessors=function(n){var c=i.predecessorsMap.get(n);return c?Array.from(c.keys()):void 0},this.successors=function(n){var c=i.successorsMap.get(n);return c?Array.from(c.keys()):void 0},this.neighbors=function(n){var c;if(i.hasNode(n))return Array.from(new Set((c=i.predecessors(n))===null||c===void 0?void 0:c.concat(i.successors(n))))},this.isLeaf=function(n){var c;if(i.isDirected()){var f;return!(!((f=i.successors(n))===null||f===void 0)&&f.length)}return!(!((c=i.neighbors(n))===null||c===void 0)&&c.length)},this.filterNodes=function(n){var c=i.directed,f=i.multigraph,h=i.compound,v=new e({directed:c,multigraph:f,compound:h});if(v.setGraph(i.graph()),i.nodes().forEach(function(g){n(g)&&v.setNode(g,i.node(g))}),i.edges().forEach(function(g){v.hasNode(g.v)&&v.hasNode(g.w)&&v.setEdgeObj(g,i.edge(g))}),h){var m=function(w){for(var x=i.parent(w);x!==void 0&&!v.hasNode(x);)x=i.parent(x);return x};v.nodes().forEach(function(g){v.setParent(g,m(g))})}return v},this.setDefaultEdgeLabel=function(n){return z_(n)?i.defaultEdgeLabelFn=n:i.defaultEdgeLabelFn=function(){return n},i},this.edgeCount=function(){return i.edgeCountNum},this.setEdgeObj=function(n,c){return i.setEdge(n.v,n.w,c,n.name)},this.setPath=function(n,c){return n.reduce(function(f,h){return i.setEdge(f,h,c),h}),i},this.edgeFromArgs=function(n,c,f){return i.edge({v:n,w:c,name:f})},this.edge=function(n){return i.edgesLabelsMap.get(Sg(i.isDirected(),n))},this.hasEdge=function(n,c,f){return i.edgesLabelsMap.has(Sg(i.isDirected(),{v:n,w:c,name:f}))},this.removeEdgeObj=function(n){var c=n.v,f=n.w,h=n.name;return i.removeEdge(c,f,h)},this.edges=function(){return Array.from(i.edgesMap.values())},this.inEdges=function(n,c){var f=i.inEdgesMap.get(n);if(f)return Array.from(f.values()).filter(function(h){return!c||h.v===c})},this.outEdges=function(n,c){var f=i.outEdgesMap.get(n);if(f)return Array.from(f.values()).filter(function(h){return!c||h.w===c})},this.nodeEdges=function(n,c){var f;if(i.hasNode(n))return(f=i.inEdges(n,c))===null||f===void 0?void 0:f.concat(i.outEdges(n,c))},this.toJSON=function(){return kP(i)},this.nodeInDegree=function(n){var c=i.inEdgesMap.get(n);return c?c.size:0},this.nodeOutDegree=function(n){var c=i.outEdgesMap.get(n);return c?c.size:0},this.nodeDegree=function(n){return i.nodeInDegree(n)+i.nodeOutDegree(n)},this.source=function(n){return n.v},this.target=function(n){return n.w};var s=X_(X_({},FP),o);this.compound=s.compound,this.directed=s.directed,this.multigraph=s.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return LP(e,[{key:"setNode",value:function(o,s){var n=this.nodesLabelMap,c=this.defaultNodeLabelFn,f=this.isCompound,h=this.parentMap,v=this.childrenMap,m=this.inEdgesMap,g=this.outEdgesMap,w=this.predecessorsMap,x=this.successorsMap;if(n.has(o))return s!==void 0&&n.set(o,s),this;if(n.set(o,s||c(o)),f()){var S;h==null||h.set(o,this.GRAPH_NODE),v==null||v.set(o,new Map),v!=null&&v.has(this.GRAPH_NODE)||v==null||v.set(this.GRAPH_NODE,new Map),v==null||(S=v.get(this.GRAPH_NODE))===null||S===void 0||S.set(o,!0)}return[m,g,w,x].forEach(function(N){return N.set(o,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(o){var s=this;if(this.hasNode(o)){var n=function(R){s.removeEdge(R.v,R.w,R.name)},c=this.inEdgesMap,f=this.outEdgesMap,h=this.predecessorsMap,v=this.successorsMap,m=this.nodesLabelMap;if(this.isCompound()){var g,w,x;this.removeFromParentsChildList(o),(g=this.parentMap)===null||g===void 0||g.delete(o),(w=this.children(o))===null||w===void 0||w.forEach(function(j){return s.setParent(j)}),(x=this.childrenMap)===null||x===void 0||x.delete(o)}var S=c.get(o),N=f.get(o);Array.from(S.values()).forEach(function(j){return n(j)}),Array.from(N.values()).forEach(function(j){return n(j)}),m.delete(o),c.delete(o),f.delete(o),h.delete(o),v.delete(o),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(o,s,n,c){var f,h,v=U_(this.isDirected(),o,s,c),m=Sg(this.isDirected(),v),g=v.v,w=v.w;if(this.edgesLabelsMap.has(m))return this.edgesLabelsMap.set(m,n),this;if(c!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(g),this.setNode(w),this.edgesLabelsMap.set(m,n||this.defaultEdgeLabelFn(g,w,c)),Object.freeze(v),this.edgesMap.set(m,v);var x=this.predecessorsMap.get(w),S=this.successorsMap.get(g);return B_(x,g),B_(S,w),(f=this.inEdgesMap.get(w))===null||f===void 0||f.set(m,v),(h=this.outEdgesMap.get(g))===null||h===void 0||h.set(m,v),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(o,s,n){var c=Ow(this.isDirected(),o,s,n),f=this.edgesMap.get(c);if(f){var h=U_(this.isDirected(),o,s,n),v=h.v,m=h.w;this.edgesLabelsMap.delete(c),this.edgesMap.delete(c);var g=this.predecessorsMap.get(m),w=this.successorsMap.get(v);G_(g,v),G_(w,m),this.inEdgesMap.get(m).delete(c),this.outEdgesMap.get(v).delete(c),this.edgeCountNum-=1}return this}}]),e}();Xc.fromJSON=DP;function W_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function BP(e,i,o){return i&&W_(e.prototype,i),o&&W_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function GP(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var xw=BP(function e(){var i=this;GP(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return i.arr.length},this.keys=function(){return i.arr.map(function(o){return o.key})},this.has=function(o){return i.keyIndice.has(o)},this.priority=function(o){var s=i.keyIndice.get(o);if(s!==void 0)return i.arr[s].priority},this.swap=function(o,s){var n=i.arr,c=i.keyIndice,f=[n[o],n[s]],h=f[0],v=f[1];n[o]=v,n[s]=h,c.set(h.key,s),c.set(v.key,o)},this.innerDecrease=function(o){for(var s=i.arr,n=s[o].priority,c,f=o;f!==0;){var h;if(c=f>>1,((h=s[c])===null||h===void 0?void 0:h.priority)<n)break;i.swap(f,c),f=c}},this.heapify=function(o){var s=i.arr,n=o<<1,c=n+1,f=o;n<s.length&&(f=s[n].priority<s[f].priority?n:f,c<s.length&&(f=s[c].priority<s[f].priority?c:f),f!==o&&(i.swap(o,f),i.heapify(f)))},this.min=function(){if(i.size()===0)throw new Error("Queue underflow");return i.arr[0].key},this.add=function(o,s){var n=i.keyIndice,c=i.arr;if(!n.has(o)){var f=c.length;return n.set(o,f),c.push({key:o,priority:s}),i.innerDecrease(f),!0}return!1},this.removeMin=function(){i.swap(0,i.arr.length-1);var o=i.arr.pop();return i.keyIndice.delete(o.key),i.heapify(0),o.key},this.decrease=function(o,s){if(!i.has(o))throw new Error("There's no key named ".concat(o));var n=i.keyIndice.get(o);if(s>i.arr[n].priority)throw new Error("New priority is greater than current priority.Key: ".concat(o," Old: + ").concat(i.arr[n].priority," New: ").concat(s));i.arr[n].priority=s,i.innerDecrease(n)}}),UP=function(i,o){var s=new Xc,n=new Map,c=new xw,f;function h(g){var w=g.v===f?g.w:g.v,x=c.priority(w);if(x!==void 0){var S=o(g);S<x&&(n.set(w,f),c.decrease(w,S))}}if(i.nodeCount()===0)return s;i.nodes().forEach(function(g){c.add(g,Number.POSITIVE_INFINITY),s.setNode(g)}),c.decrease(i.nodes()[0],0);for(var v=!1;c.size()>0;){var m;if(f=c.removeMin(),n.has(f))s.setEdge(f,n.get(f));else{if(v)throw new Error("Input graph is not connected: "+i.graph());v=!0}(m=i.nodeEdges(f))===null||m===void 0||m.forEach(h)}return s},zP=function(i){var o=new Set,s=[],n=i.nodes();return n.forEach(function(c){for(var f=[],h=[c];h.length>0;){var v=h.pop();if(!o.has(v)){var m,g;o.add(v),f.push(v),(m=i.successors(v))===null||m===void 0||m.forEach(function(w){return h.push(w)}),(g=i.predecessors(v))===null||g===void 0||g.forEach(function(w){return h.push(w)})}}f.length&&s.push(f)}),s},HP=function e(i,o,s,n,c,f){n.includes(o)||(n.push(o),s||f.push(o),c(o).forEach(function(h){return e(i,h,s,n,c,f)}),s&&f.push(o))},ym=function(i,o,s){var n=Array.isArray(o)?o:[o],c=function(m){return i.isDirected()?i.successors(m):i.neighbors(m)},f=[],h=[];return n.forEach(function(v){if(i.hasNode(v))HP(i,v,s==="post",h,c,f);else throw new Error("Graph does not have node: "+v)}),f};function XP(e,i){return $P(e)||YP(e,i)||WP(e,i)||VP()}function VP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WP(e,i){if(e){if(typeof e=="string")return Y_(e,i);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return Y_(e,i)}}function Y_(e,i){(i==null||i>e.length)&&(i=e.length);for(var o=0,s=new Array(i);o<i;o++)s[o]=e[o];return s}function YP(e,i){var o=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(o!=null){var s=[],n=!0,c=!1,f,h;try{for(o=o.call(e);!(n=(f=o.next()).done)&&(s.push(f.value),!(i&&s.length===i));n=!0);}catch(v){c=!0,h=v}finally{try{!n&&o.return!=null&&o.return()}finally{if(c)throw h}}return s}}function $P(e){if(Array.isArray(e))return e}var KP=function(){return 1},Sw=function(i,o,s,n){return qP(i,o,s||KP,n||function(c){return i.outEdges(c)})},qP=function(i,o,s,n){var c=new Map,f=new xw,h,v,m=function(x){var S=x.v!==h?x.v:x.w,N=c.get(S),j=s(x),R=v.distance+j;if(j<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+j);R<N.distance&&(N.distance=R,N.predecessor=h,f.decrease(S,R))};for(i.nodes().forEach(function(w){var x=w===o?0:Number.POSITIVE_INFINITY;c.set(w,{distance:x}),f.add(w,x)});f.size()>0&&(h=f.removeMin(),v=c.get(h),!(v&&v.distance===Number.POSITIVE_INFINITY));)n(h).forEach(m);var g={};return Array.from(c.entries()).forEach(function(w){var x=XP(w,2),S=x[0],N=x[1];return g[String(S)]=N,g}),g},ZP=function(i,o,s){var n={};return i.nodes().forEach(function(c){return n[String(c)]=Sw(i,c,o,s),n}),n},Tw=function(i){var o=0,s=[],n=new Map,c=[];function f(h){var v,m={onStack:!0,lowlink:o,index:o};if(n.set(h,m),o+=1,s.push(h),(v=i.successors(h))===null||v===void 0||v.forEach(function(S){var N;if(n.has(S)){if(!((N=n.get(S))===null||N===void 0)&&N.onStack){var R=n.get(S);m.lowlink=Math.min(m.lowlink,R.index)}}else{f(S);var j=n.get(S);m.lowlink=Math.min(m.lowlink,j.lowlink)}}),m.lowlink===m.index){var g=[],w;do{w=s.pop();var x=n.get(w);x.onStack=!1,g.push(w)}while(h!==w);c.push(g)}}return i.nodes().forEach(function(h){n.has(h)||f(h)}),c},JP=function(i){return Tw(i).filter(function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})};function Kg(e){return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kg(e)}function $_(e,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function QP(e,i,o){return i&&$_(e.prototype,i),o&&$_(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function eN(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function tN(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(i&&i.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),i&&Nf(e,i)}function rN(e){var i=Aw();return function(){var s=jf(e),n;if(i){var c=jf(this).constructor;n=Reflect.construct(s,arguments,c)}else n=s.apply(this,arguments);return nN(this,n)}}function nN(e,i){if(i&&(Kg(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oN(e)}function oN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qg(e){var i=typeof Map=="function"?new Map:void 0;return qg=function(s){if(s===null||!iN(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof i<"u"){if(i.has(s))return i.get(s);i.set(s,n)}function n(){return Xp(s,arguments,jf(this).constructor)}return n.prototype=Object.create(s.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Nf(n,s)},qg(e)}function Xp(e,i,o){return Aw()?Xp=Reflect.construct:Xp=function(n,c,f){var h=[null];h.push.apply(h,c);var v=Function.bind.apply(n,h),m=new v;return f&&Nf(m,f.prototype),m},Xp.apply(null,arguments)}function Aw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iN(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Nf(e,i){return Nf=Object.setPrototypeOf||function(s,n){return s.__proto__=n,s},Nf(e,i)}function jf(e){return jf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},jf(e)}var Zg=function(e){tN(o,e);var i=rN(o);function o(){return eN(this,o),i.apply(this,arguments)}return QP(o)}(qg(Error));function Pw(e){var i=new Set,o=new Set,s=[];function n(c){if(o.has(c))throw new Zg;if(!i.has(c)){var f;o.add(c),i.add(c),(f=e.predecessors(c))===null||f===void 0||f.forEach(n),o.delete(c),s.push(c)}}if(e.sinks().forEach(n),i.size!==e.nodeCount())throw new Zg;return s}var aN=function(i){try{Pw(i)}catch(o){if(o instanceof Zg)return!1;throw o}return!0},uN=function(i,o){return ym(i,o,"post")},sN=function(i,o){return ym(i,o,"pre")},cN=function(){return 1};function lN(e,i,o){return fN(e,i||cN,o||function(s){return e.outEdges(s)})}function fN(e,i,o){var s={},n=e.nodes();return n.forEach(function(c){var f=String(c);s[f]={},s[f][f]={distance:0},n.forEach(function(h){c!==h&&(s[f][String(h)]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(h){var v=h.v===c?h.w:h.v,m=i(h);s[f][String(v)]={distance:m,predecessor:c}})}),n.forEach(function(c){var f=String(c),h=s[f];n.forEach(function(v){var m=String(v),g=s[m];n.forEach(function(w){var x=String(w),S=g[f],N=h[x],j=g[x],R=S.distance+N.distance;R<j.distance&&(j.distance=R,j.predecessor=N.predecessor)})})}),s}const dN=Object.freeze(Object.defineProperty({__proto__:null,components:zP,dfs:ym,dijkstra:Sw,dijkstraAll:ZP,findCycles:JP,floydWarshall:lN,isAcyclic:aN,postorder:uN,preorder:sN,prim:UP,tarjan:Tw,topsort:Pw},Symbol.toStringTag,{value:"Module"}));class pN extends jP{}class hN extends Xc{}const vN=()=>1,yN=(e,i)=>{var o;if(e.nodeCount()<=1)return[];const s=mN(e,i||vN);return(o=gN(s.graph,s.buckets,s.zeroIdx).map(c=>e.outEdges(c.v,c.w)))===null||o===void 0?void 0:o.flat()},gN=(e,i,o)=>{let s=[];const n=i[i.length-1],c=i[0];let f;for(;e.nodeCount();){for(;f=c.dequeue();)Tg(e,i,o,f);for(;f=n.dequeue();)Tg(e,i,o,f);if(e.nodeCount()){for(let h=i.length-2;h>0;--h)if(f=i[h].dequeue(),f){s=s.concat(Tg(e,i,o,f,!0));break}}}return s},Tg=(e,i,o,s,n)=>{var c,f;const h=[];return(c=e.inEdges(s.v))===null||c===void 0||c.forEach(v=>{const m=e.edge(v),g=e.node(v.v);n&&h.push({v:v.v,w:v.w,in:0,out:0}),g.out===void 0&&(g.out=0),g.out-=m,Jg(i,o,g)}),(f=e.outEdges(s.v))===null||f===void 0||f.forEach(v=>{const m=e.edge(v),g=v.w,w=e.node(g);w.in===void 0&&(w.in=0),w.in-=m,Jg(i,o,w)}),e.removeNode(s.v),n?h:void 0},mN=(e,i)=>{const o=new hN;let s=0,n=0;e.nodes().forEach(v=>{o.setNode(v,{v,in:0,out:0})}),e.edges().forEach(v=>{const m=o.edge(v)||0,g=(i==null?void 0:i(v))||1,w=m+g;o.setEdge(v.v,v.w,w),n=Math.max(n,o.node(v.v).out+=g),s=Math.max(s,o.node(v.w).in+=g)});const c=[],f=n+s+3;for(let v=0;v<f;v++)c.push(new pN);const h=s+1;return o.nodes().forEach(v=>{Jg(c,h,o.node(v))}),{buckets:c,zeroIdx:h,graph:o}},Jg=(e,i,o)=>{o.out?o.in?e[o.out-o.in+i].enqueue(o):e[e.length-1].enqueue(o):e[0].enqueue(o)},bN=e=>{const i=s=>n=>{var c;return((c=s.edge(n))===null||c===void 0?void 0:c.weight)||1},o=e.graph().acyclicer==="greedy"?yN(e,i(e)):_N(e);o==null||o.forEach(s=>{const n=e.edge(s);e.removeEdgeObj(s),n.forwardName=s.name,n.reversed=!0,e.setEdge(s.w,s.v,n,`rev-${Math.random()}`)})},_N=e=>{const i=[],o={},s={},n=c=>{var f;s[c]||(s[c]=!0,o[c]=!0,(f=e.outEdges(c))===null||f===void 0||f.forEach(h=>{o[h.w]?i.push(h):n(h.w)}),delete o[c])};return e.nodes().forEach(n),i},EN=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o.reversed){e.removeEdgeObj(i);const s=o.forwardName;delete o.reversed,delete o.forwardName,e.setEdge(i.w,i.v,o,s)}})},K_={run:bN,undo:EN};class Ea extends Xc{}const wN=(e,i)=>Number(e)-Number(i),Vc=(e,i,o,s)=>{let n;do n=`${s}${Math.random()}`;while(e.hasNode(n));return o.dummy=i,e.setNode(n,o),n},ON=e=>{const i=new Ea().setGraph(e.graph());return e.nodes().forEach(o=>{i.setNode(o,e.node(o))}),e.edges().forEach(o=>{const s=i.edgeFromArgs(o.v,o.w)||{weight:0,minlen:1},n=e.edge(o);i.setEdge(o.v,o.w,{weight:s.weight+n.weight,minlen:Math.max(s.minlen,n.minlen)})}),i},Nw=e=>{const i=new Ea({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(o=>{var s;!((s=e.children(o))===null||s===void 0)&&s.length||i.setNode(o,e.node(o))}),e.edges().forEach(o=>{i.setEdgeObj(o,e.edge(o))}),i},xN=(e,i)=>e==null?void 0:e.reduce((o,s,n)=>(o[s]=i[n],o),{}),q_=(e,i)=>{const o=Number(e.x),s=Number(e.y),n=Number(i.x)-o,c=Number(i.y)-s;let f=Number(e.width)/2,h=Number(e.height)/2;if(!n&&!c)return{x:0,y:0};let v,m;return Math.abs(c)*f>Math.abs(n)*h?(c<0&&(h=-h),v=h*n/c,m=h):(n<0&&(f=-f),v=f,m=f*c/n),{x:o+v,y:s+m}},Mf=e=>{const i=[],o=jw(e)+1;for(let s=0;s<o;s++)i.push([]);e.nodes().forEach(s=>{const n=e.node(s);if(!n)return;const c=n.rank;c!==void 0&&i[c]&&i[c].push(s)});for(let s=0;s<o;s++)i[s]=i[s].sort((n,c)=>{var f,h;return wN((f=e.node(n))===null||f===void 0?void 0:f.order,(h=e.node(c))===null||h===void 0?void 0:h.order)});return i},SN=e=>{const i=e.nodes().filter(s=>{var n;return((n=e.node(s))===null||n===void 0?void 0:n.rank)!==void 0}).map(s=>e.node(s).rank),o=Math.min(...i);e.nodes().forEach(s=>{const n=e.node(s);n.hasOwnProperty("rank")&&o!==1/0&&(n.rank-=o)})},TN=e=>{const i=e.nodes(),o=i.filter(h=>{var v;return((v=e.node(h))===null||v===void 0?void 0:v.rank)!==void 0}).map(h=>e.node(h).rank),s=Math.min(...o),n=[];i.forEach(h=>{var v;const m=(((v=e.node(h))===null||v===void 0?void 0:v.rank)||0)-s;n[m]||(n[m]=[]),n[m].push(h)});let c=0;const f=e.graph().nodeRankFactor||0;for(let h=0;h<n.length;h++){const v=n[h];v===void 0?h%f!==0&&(c-=1):c&&(v==null||v.forEach(m=>{const g=e.node(m);g&&(g.rank=g.rank||0,g.rank+=c)}))}},Z_=(e,i,o,s)=>{const n={width:0,height:0};return th(o)&&th(s)&&(n.rank=o,n.order=s),Vc(e,"border",n,i)},jw=e=>{let i;return e.nodes().forEach(o=>{var s;const n=(s=e.node(o))===null||s===void 0?void 0:s.rank;n!==void 0&&(i===void 0||n>i)&&(i=n)}),i||(i=0),i},AN=(e,i)=>{const o={lhs:[],rhs:[]};return e==null||e.forEach(s=>{i(s)?o.lhs.push(s):o.rhs.push(s)}),o},Mw=(e,i)=>{const o=Date.now();try{return i()}finally{console.log(`${e} time: ${Date.now()-o}ms`)}},Rw=(e,i)=>i(),gm=(e,i)=>e.reduce((o,s)=>{const n=i(o),c=i(s);return n>c?s:o}),PN=e=>{e.graph().dummyChains=[],e.edges().forEach(i=>NN(e,i))},NN=(e,i)=>{let o=i.v,s=e.node(o).rank;const n=i.w,c=e.node(n).rank,f=i.name,h=e.edge(i),v=h.labelRank;if(c===s+1)return;e.removeEdgeObj(i);const m=e.graph();let g,w,x;for(x=0,++s;s<c;++x,++s)h.points=[],w={edgeLabel:h,width:0,height:0,edgeObj:i,rank:s},g=Vc(e,"edge",w,"_d"),s===v&&(w.width=h.width,w.height=h.height,w.dummy="edge-label",w.labelpos=h.labelpos),e.setEdge(o,g,{weight:h.weight},f),x===0&&(m.dummyChains||(m.dummyChains=[]),m.dummyChains.push(g)),o=g;e.setEdge(o,n,{weight:h.weight},f)},jN=e=>{var i;(i=e.graph().dummyChains)===null||i===void 0||i.forEach(o=>{let s=e.node(o);const n=s.edgeLabel;let c;s.edgeObj&&e.setEdgeObj(s.edgeObj,n);let f=o;for(;s.dummy;)c=e.successors(f)[0],e.removeNode(f),n.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height),f=c,s=e.node(f)})},J_={run:PN,undo:jN},kw=e=>{var i;const o={},s=n=>{var c;const f=e.node(n);if(!f)return 0;if(o[n])return f.rank;o[n]=!0;let h;return(c=e.outEdges(n))===null||c===void 0||c.forEach(v=>{const m=s(v.w),g=e.edge(v).minlen,w=m-g;w&&(h===void 0||w<h)&&(h=w)}),h||(h=0),f.rank=h,h};(i=e.sources())===null||i===void 0||i.forEach(n=>s(n))},MN=e=>{var i;const o={};let s;const n=h=>{var v;const m=e.node(h);if(!m)return 0;if(o[h])return m.rank;o[h]=!0;let g;return(v=e.outEdges(h))===null||v===void 0||v.forEach(w=>{const x=n(w.w),S=e.edge(w).minlen,N=x-S;N&&(g===void 0||N<g)&&(g=N)}),g||(g=0),(s===void 0||g<s)&&(s=g),m.rank=g,g};(i=e.sources())===null||i===void 0||i.forEach(h=>{e.node(h)&&n(h)}),s===void 0&&(s=0);const c={},f=(h,v)=>{var m;const g=e.node(h),w=isNaN(g.layer)?v:g.layer;(g.rank===void 0||g.rank<w)&&(g.rank=w),!c[h]&&(c[h]=!0,(m=e.outEdges(h))===null||m===void 0||m.map(x=>{f(x.w,w+e.edge(x).minlen)}))};e.nodes().forEach(h=>{const v=e.node(h);v&&(isNaN(v.layer)?v.rank-=s:f(h,v.layer))})},lu=(e,i)=>e.node(i.w).rank-e.node(i.v).rank-e.edge(i).minlen,RN=e=>{const i=new Ea({directed:!1}),o=e.nodes()[0],s=e.nodeCount();i.setNode(o,{});let n,c;for(;kN(i,e)<s;)n=Dw(i,e),c=i.hasNode(n.v)?lu(e,n):-lu(e,n),Cw(i,e,c);return i},kN=(e,i)=>{const o=s=>{i.nodeEdges(s).forEach(n=>{const c=n.v,f=s===c?n.w:c;!e.hasNode(f)&&!lu(i,n)&&(e.setNode(f,{}),e.setEdge(s,f,{}),o(f))})};return e.nodes().forEach(o),e.nodeCount()},DN=e=>{const i=new Ea({directed:!1}),o=e.nodes()[0],s=e.nodes().filter(f=>!!e.node(f)).length;i.setNode(o,{});let n,c;for(;CN(i,e)<s;)n=Dw(i,e),c=i.hasNode(n.v)?lu(e,n):-lu(e,n),Cw(i,e,c);return i},CN=(e,i)=>{const o=s=>{var n;(n=i.nodeEdges(s))===null||n===void 0||n.forEach(c=>{const f=c.v,h=s===f?c.w:f;!e.hasNode(h)&&(i.node(h).layer!==void 0||!lu(i,c))&&(e.setNode(h,{}),e.setEdge(s,h,{}),o(h))})};return e.nodes().forEach(o),e.nodeCount()},Dw=(e,i)=>gm(i.edges(),o=>e.hasNode(o.v)!==e.hasNode(o.w)?lu(i,o):1/0),Cw=(e,i,o)=>{e.nodes().forEach(s=>{i.node(s).rank||(i.node(s).rank=0),i.node(s).rank+=o})},{preorder:IN,postorder:LN}=dN,FN=e=>{const i=ON(e);kw(i);const o=RN(i);Lw(o),Iw(o,i);let s,n;for(;s=UN(o);)n=zN(o,i,s),HN(o,i,s,n)},Iw=(e,i)=>{let o=LN(e,e.nodes());o=o==null?void 0:o.slice(0,(o==null?void 0:o.length)-1),o==null||o.forEach(s=>{BN(e,i,s)})},BN=(e,i,o)=>{const n=e.node(o).parent;e.edgeFromArgs(o,n).cutvalue=GN(e,i,o)},GN=(e,i,o)=>{var s;const c=e.node(o).parent;let f=!0,h=i.edgeFromArgs(o,c),v=0;return h||(f=!1,h=i.edgeFromArgs(c,o)),v=h.weight,(s=i.nodeEdges(o))===null||s===void 0||s.forEach(m=>{const g=m.v===o,w=g?m.w:m.v;if(w!==c){const x=g===f,S=i.edge(m).weight;if(v+=x?S:-S,VN(e,o,w)){const N=e.edgeFromArgs(o,w).cutvalue;v+=x?-N:N}}}),v},Lw=(e,i=e.nodes()[0])=>{Fw(e,{},1,i)},Fw=(e,i,o,s,n)=>{var c;const f=o;let h=o;const v=e.node(s);return i[s]=!0,(c=e.neighbors(s))===null||c===void 0||c.forEach(m=>{i[m]||(h=Fw(e,i,h,m,s))}),v.low=f,v.lim=h++,n?v.parent=n:delete v.parent,h},UN=e=>e.edges().find(i=>e.edge(i).cutvalue<0),zN=(e,i,o)=>{let s=o.v,n=o.w;i.hasEdge(s,n)||(s=o.w,n=o.v);const c=e.node(s),f=e.node(n);let h=c,v=!1;c.lim>f.lim&&(h=f,v=!0);const m=i.edges().filter(g=>v===Q_(e,e.node(g.v),h)&&v!==Q_(e,e.node(g.w),h));return gm(m,g=>lu(i,g))},HN=(e,i,o,s)=>{const n=o.v,c=o.w;e.removeEdge(n,c),e.setEdge(s.v,s.w,{}),Lw(e),Iw(e,i),XN(e,i)},XN=(e,i)=>{const o=e.nodes().find(n=>{var c;return!(!((c=i.node(n))===null||c===void 0)&&c.parent)});let s=IN(e,o);s=s==null?void 0:s.slice(1),s==null||s.forEach(n=>{const c=e.node(n).parent;let f=i.edgeFromArgs(n,c),h=!1;f||(f=i.edgeFromArgs(c,n),h=!0),i.node(n).rank=i.node(c).rank+(h?f.minlen:-f.minlen)})},VN=(e,i,o)=>e.hasEdge(i,o),Q_=(e,i,o)=>o.low<=i.lim&&i.lim<=o.lim,WN=e=>{switch(e.graph().ranker){case"network-simplex":$N(e);break;case"tight-tree":eE(e);break;case"longest-path":YN(e);break;default:eE(e)}},YN=kw,eE=e=>{MN(e),DN(e)},$N=e=>{FN(e)},KN=e=>{var i;const o={};let s=0;const n=c=>{var f;const h=s;(f=e.children(c))===null||f===void 0||f.forEach(n),o[c]={low:h,lim:s++}};return(i=e.children())===null||i===void 0||i.forEach(n),o},qN=(e,i,o,s)=>{const n=[],c=[],f=Math.min(i[o].low,i[s].low),h=Math.max(i[o].lim,i[s].lim);let v,m;v=o;do v=e.parent(v),n.push(v);while(v&&(i[v].low>f||h>i[v].lim));for(m=v,v=s;v&&v!==m;)c.push(v),v=e.parent(v);return{lca:m,path:n.concat(c.reverse())}},ZN=e=>{var i;const o=KN(e);(i=e.graph().dummyChains)===null||i===void 0||i.forEach(s=>{var n,c;let f=s,h=e.node(f);const v=h.edgeObj;if(!v)return;const m=qN(e,o,v.v,v.w),g=m.path,w=m.lca;let x=0,S=g[x],N=!0;for(;f!==v.w;){if(h=e.node(f),N){for(;S!==w&&((n=e.node(S))===null||n===void 0?void 0:n.maxRank)<h.rank;)x++,S=g[x];S===w&&(N=!1)}if(!N){for(;x<g.length-1&&((c=e.node(g[x+1]))===null||c===void 0?void 0:c.minRank)<=h.rank;)x++;S=g[x]}e.setParent(f,S),f=e.successors(f)[0]}})},JN=e=>{var i;const o=Vc(e,"root",{},"_root"),s=QN(e);let n=Math.max(...Object.values(s));Math.abs(n)===1/0&&(n=1);const c=n-1,f=2*c+1;e.graph().nestingRoot=o,e.edges().forEach(v=>{e.edge(v).minlen*=f});const h=ej(e)+1;(i=e.children())===null||i===void 0||i.forEach(v=>{Bw(e,o,f,h,c,s,v)}),e.graph().nodeRankFactor=f},Bw=(e,i,o,s,n,c,f)=>{const h=e.children(f);if(!(h!=null&&h.length)){f!==i&&e.setEdge(i,f,{weight:0,minlen:o});return}const v=Z_(e,"_bt"),m=Z_(e,"_bb"),g=e.node(f);e.setParent(v,f),g.borderTop=v,e.setParent(m,f),g.borderBottom=m,h==null||h.forEach(w=>{Bw(e,i,o,s,n,c,w);const x=e.node(w),S=x.borderTop?x.borderTop:w,N=x.borderBottom?x.borderBottom:w,j=x.borderTop?s:2*s,R=S!==N?1:n-c[f]+1;e.setEdge(v,S,{minlen:R,weight:j,nestingEdge:!0}),e.setEdge(N,m,{minlen:R,weight:j,nestingEdge:!0})}),e.parent(f)||e.setEdge(i,v,{weight:0,minlen:n+c[f]})},QN=e=>{var i;const o={},s=(n,c)=>{const f=e.children(n);f==null||f.forEach(h=>s(h,c+1)),o[n]=c};return(i=e.children())===null||i===void 0||i.forEach(n=>s(n,1)),o},ej=e=>{let i=0;return e.edges().forEach(o=>{i+=e.edge(o).weight}),i},tj=e=>{const i=e.graph();i.nestingRoot&&e.removeNode(i.nestingRoot),delete i.nestingRoot,e.edges().forEach(o=>{e.edge(o).nestingEdge&&e.removeEdgeObj(o)})},tE={run:JN,cleanup:tj},rj=e=>{var i;const o=s=>{const n=e.children(s),c=e.node(s);if(n!=null&&n.length&&n.forEach(f=>o(f)),c.hasOwnProperty("minRank")){c.borderLeft=[],c.borderRight=[];for(let f=c.minRank,h=c.maxRank+1;f<h;f+=1)rE(e,"borderLeft","_bl",s,c,f),rE(e,"borderRight","_br",s,c,f)}};(i=e.children())===null||i===void 0||i.forEach(s=>o(s))},rE=(e,i,o,s,n,c)=>{const f={rank:c,borderType:i,width:0,height:0},h=n[i][c-1],v=Vc(e,"border",f,o);n[i][c]=v,e.setParent(v,s),h&&e.setEdge(h,v,{weight:1})},nj=e=>{var i;const o=(i=e.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="lr"||o==="rl")&&Gw(e)},oj=e=>{var i;const o=(i=e.graph().rankdir)===null||i===void 0?void 0:i.toLowerCase();(o==="bt"||o==="rl")&&ij(e),(o==="lr"||o==="rl")&&(aj(e),Gw(e))},Gw=e=>{e.nodes().forEach(i=>{nE(e.node(i))}),e.edges().forEach(i=>{nE(e.edge(i))})},nE=e=>{const i=e.width;e.width=e.height,e.height=i},ij=e=>{e.nodes().forEach(i=>{Ag(e.node(i))}),e.edges().forEach(i=>{var o;const s=e.edge(i);(o=s.points)===null||o===void 0||o.forEach(n=>Ag(n)),s.hasOwnProperty("y")&&Ag(s)})},Ag=e=>{e!=null&&e.y&&(e.y=-e.y)},aj=e=>{e.nodes().forEach(i=>{Pg(e.node(i))}),e.edges().forEach(i=>{var o;const s=e.edge(i);(o=s.points)===null||o===void 0||o.forEach(n=>Pg(n)),s.hasOwnProperty("x")&&Pg(s)})},Pg=e=>{const i=e.x;e.x=e.y,e.y=i},oE={adjust:nj,undo:oj};var uj={}.toString,sj=function(e,i){return uj.call(e)==="[object "+i+"]"};const cj=sj,Uw=function(e){return Array.isArray?Array.isArray(e):cj(e,"Array")},Qg=function(e){if(Uw(e))return e.reduce(function(i,o){return Math.max(i,o)},e[0])},iE=function(e){if(Uw(e))return e.reduce(function(i,o){return Math.min(i,o)},e[0])},aE=e=>{const i={},o=e.nodes().filter(g=>{var w;return!(!((w=e.children(g))===null||w===void 0)&&w.length)}),s=o.map(g=>e.node(g).rank),n=Qg(s),c=[];for(let g=0;g<n+1;g++)c.push([]);const f=g=>{var w;if(i.hasOwnProperty(g))return;i[g]=!0;const x=e.node(g);isNaN(x.rank)||c[x.rank].push(g),(w=e.successors(g))===null||w===void 0||w.forEach(S=>f(S))},h=o.sort((g,w)=>e.node(g).rank-e.node(w).rank),m=h.filter(g=>e.node(g).fixorder!==void 0).sort((g,w)=>e.node(g).fixorder-e.node(w).fixorder);return m==null||m.forEach(g=>{isNaN(e.node(g).rank)||c[e.node(g).rank].push(g),i[g]=!0}),h==null||h.forEach(f),c},lj=(e,i,o)=>{const s=xN(o,o.map((g,w)=>w)),c=i.map(g=>{var w;const x=(w=e.outEdges(g))===null||w===void 0?void 0:w.map(S=>({pos:s[S.w]||0,weight:e.edge(S).weight}));return x==null?void 0:x.sort((S,N)=>S.pos-N.pos)}).flat().filter(g=>g!==void 0);let f=1;for(;f<o.length;)f<<=1;const h=2*f-1;f-=1;const v=Array(h).fill(0,0,h);let m=0;return c==null||c.forEach(g=>{if(g){let w=g.pos+f;v[w]+=g.weight;let x=0;for(;w>0;)w%2&&(x+=v[w+1]),w=w-1>>1,v[w]+=g.weight;m+=g.weight*x}}),m},uE=(e,i)=>{let o=0;for(let s=1;s<(i==null?void 0:i.length);s+=1)o+=lj(e,i[s-1],i[s]);return o},fj=(e,i,o)=>{const s=dj(e),n=new Ea({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(c=>e.node(c));return e.nodes().forEach(c=>{var f;const h=e.node(c),v=e.parent(c);(h.rank===i||h.minRank<=i&&i<=h.maxRank)&&(n.setNode(c),n.setParent(c,v||s),(f=e[o](c))===null||f===void 0||f.forEach(m=>{const g=m.v===c?m.w:m.v,w=n.edgeFromArgs(g,c),x=w!==void 0?w.weight:0;n.setEdge(g,c,{weight:e.edge(m).weight+x})}),h.hasOwnProperty("minRank")&&n.setNode(c,{borderLeft:h.borderLeft[i],borderRight:h.borderRight[i]}))}),n},dj=e=>{let i;for(;e.hasNode(i=`_root${Math.random()}`););return i},pj=(e,i,o)=>{const s={};let n;o==null||o.forEach(c=>{let f=e.parent(c),h,v;for(;f;){if(h=e.parent(f),h?(v=s[h],s[h]=f):(v=n,n=f),v&&v!==f){i.setEdge(v,f);return}f=h}})},hj=(e,i)=>i.map(o=>{const s=e.inEdges(o);if(!(s!=null&&s.length))return{v:o};{const n={sum:0,weight:0};return s==null||s.forEach(c=>{const f=e.edge(c),h=e.node(c.v);n.sum+=f.weight*h.order,n.weight+=f.weight}),{v:o,barycenter:n.sum/n.weight,weight:n.weight}}}),vj=(e,i)=>{var o,s,n;const c={};e==null||e.forEach((h,v)=>{c[h.v]={i:v,indegree:0,in:[],out:[],vs:[h.v]};const m=c[h.v];h.barycenter!==void 0&&(m.barycenter=h.barycenter,m.weight=h.weight)}),(o=i.edges())===null||o===void 0||o.forEach(h=>{const v=c[h.v],m=c[h.w];v!==void 0&&m!==void 0&&(m.indegree++,v.out.push(c[h.w]))});const f=(n=(s=Object.values(c)).filter)===null||n===void 0?void 0:n.call(s,h=>!h.indegree);return yj(f)},yj=e=>{var i,o;const s=[],n=v=>m=>{m.merged||(m.barycenter===void 0||v.barycenter===void 0||m.barycenter>=v.barycenter)&&gj(v,m)},c=v=>m=>{m.in.push(v),--m.indegree===0&&e.push(m)};for(;e!=null&&e.length;){const v=e.pop();s.push(v),(i=v.in.reverse())===null||i===void 0||i.forEach(m=>n(v)(m)),(o=v.out)===null||o===void 0||o.forEach(m=>c(v)(m))}const f=s.filter(v=>!v.merged),h=["vs","i","barycenter","weight"];return f.map(v=>{const m={};return h==null||h.forEach(g=>{v[g]!==void 0&&(m[g]=v[g])}),m})},gj=(e,i)=>{var o;let s=0,n=0;e.weight&&(s+=e.barycenter*e.weight,n+=e.weight),i.weight&&(s+=i.barycenter*i.weight,n+=i.weight),e.vs=(o=i.vs)===null||o===void 0?void 0:o.concat(e.vs),e.barycenter=s/n,e.weight=n,e.i=Math.min(i.i,e.i),i.merged=!0},mj=(e,i,o,s)=>{const n=AN(e,x=>{const S=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return s?!S&&x.hasOwnProperty("barycenter"):S||x.hasOwnProperty("barycenter")}),c=n.lhs,f=n.rhs.sort((x,S)=>-x.i- -S.i),h=[];let v=0,m=0,g=0;c==null||c.sort(bj(!!i,!!o)),g=sE(h,f,g),c==null||c.forEach(x=>{var S;g+=(S=x.vs)===null||S===void 0?void 0:S.length,h.push(x.vs),v+=x.barycenter*x.weight,m+=x.weight,g=sE(h,f,g)});const w={vs:h.flat()};return m&&(w.barycenter=v/m,w.weight=m),w},sE=(e,i,o)=>{let s=o,n;for(;i.length&&(n=i[i.length-1]).i<=s;)i.pop(),e==null||e.push(n.vs),s++;return s},bj=(e,i)=>(o,s)=>{if(o.fixorder!==void 0&&s.fixorder!==void 0)return o.fixorder-s.fixorder;if(o.barycenter<s.barycenter)return-1;if(o.barycenter>s.barycenter)return 1;if(i&&o.order!==void 0&&s.order!==void 0){if(o.order<s.order)return-1;if(o.order>s.order)return 1}return e?s.i-o.i:o.i-s.i},zw=(e,i,o,s,n,c)=>{var f,h,v,m;let g=e.children(i);const w=e.node(i),x=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,N={};x&&(g=g==null?void 0:g.filter(V=>V!==x&&V!==S));const j=hj(e,g||[]);j==null||j.forEach(V=>{var ce;if(!((ce=e.children(V.v))===null||ce===void 0)&&ce.length){const Ee=zw(e,V.v,o,s,c);N[V.v]=Ee,Ee.hasOwnProperty("barycenter")&&Ej(V,Ee)}});const R=vj(j,o);_j(R,N),(f=R.filter(V=>V.vs.length>0))===null||f===void 0||f.forEach(V=>{const ce=e.node(V.vs[0]);ce&&(V.fixorder=ce.fixorder,V.order=ce.order)});const D=mj(R,s,n,c);if(x&&(D.vs=[x,D.vs,S].flat(),!((h=e.predecessors(x))===null||h===void 0)&&h.length)){const V=e.node(((v=e.predecessors(x))===null||v===void 0?void 0:v[0])||""),ce=e.node(((m=e.predecessors(S))===null||m===void 0?void 0:m[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+V.order+ce.order)/(D.weight+2),D.weight+=2}return D},_j=(e,i)=>{e==null||e.forEach(o=>{var s;const n=(s=o.vs)===null||s===void 0?void 0:s.map(c=>i[c]?i[c].vs:c);o.vs=n.flat()})},Ej=(e,i)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+i.barycenter*i.weight)/(e.weight+i.weight),e.weight+=i.weight):(e.barycenter=i.barycenter,e.weight=i.weight)},wj=(e,i)=>{const o=jw(e),s=[],n=[];for(let g=1;g<o+1;g++)s.push(g);for(let g=o-1;g>-1;g--)n.push(g);const c=cE(e,s,"inEdges"),f=cE(e,n,"outEdges");let h=aE(e);Ng(e,h);let v=Number.POSITIVE_INFINITY,m;for(let g=0,w=0;w<4;++g,++w){lE(g%2?c:f,g%4>=2,!1,i),h=Mf(e);const x=uE(e,h);x<v&&(w=0,m=rh(h),v=x)}h=aE(e),Ng(e,h);for(let g=0,w=0;w<4;++g,++w){lE(g%2?c:f,g%4>=2,!0,i),h=Mf(e);const x=uE(e,h);x<v&&(w=0,m=rh(h),v=x)}Ng(e,m)},cE=(e,i,o)=>i.map(s=>fj(e,s,o)),lE=(e,i,o,s)=>{const n=new Ea;e==null||e.forEach(c=>{var f;const h=c.graph().root,v=zw(c,h,n,i,o,s);for(let m=0;m<((f=v.vs)===null||f===void 0?void 0:f.length);m++){const g=c.node(v.vs[m]);g&&(g.order=m)}pj(c,n,v.vs)})},Ng=(e,i)=>{i==null||i.forEach(o=>{o==null||o.forEach((s,n)=>{e.node(s).order=n})})};class Oj extends Xc{}const xj=(e,i)=>{const o={},s=(n,c)=>{let f=0,h=0;const v=n.length,m=c==null?void 0:c[(c==null?void 0:c.length)-1];return c==null||c.forEach((g,w)=>{var x;const S=Tj(e,g),N=S?e.node(S).order:v;(S||g===m)&&((x=c.slice(h,w+1))===null||x===void 0||x.forEach(j=>{var R;(R=e.predecessors(j))===null||R===void 0||R.forEach(D=>{var V;const ce=e.node(D),Ee=ce.order;(Ee<f||N<Ee)&&!(ce.dummy&&(!((V=e.node(j))===null||V===void 0)&&V.dummy))&&Hw(o,D,j)})}),h=w+1,f=N)}),c};return i!=null&&i.length&&i.reduce(s),o},Sj=(e,i)=>{const o={};function s(h,v,m,g,w){var x,S;let N;for(let j=v;j<m;j++)N=h[j],!((x=e.node(N))===null||x===void 0)&&x.dummy&&((S=e.predecessors(N))===null||S===void 0||S.forEach(R=>{const D=e.node(R);D.dummy&&(D.order<g||D.order>w)&&Hw(o,R,N)}))}function n(h){return JSON.stringify(h.slice(1))}function c(h,v){const m=n(h);v.get(m)||(s(...h),v.set(m,!0))}const f=(h,v)=>{let m=-1,g,w=0;const x=new Map;return v==null||v.forEach((S,N)=>{var j;if(((j=e.node(S))===null||j===void 0?void 0:j.dummy)==="border"){const R=e.predecessors(S)||[];R.length&&(g=e.node(R[0]).order,c([v,w,N,m,g],x),w=N,m=g)}c([v,w,v.length,g,h.length],x)}),v};return i!=null&&i.length&&i.reduce(f),o},Tj=(e,i)=>{var o,s;if(!((o=e.node(i))===null||o===void 0)&&o.dummy)return(s=e.predecessors(i))===null||s===void 0?void 0:s.find(n=>e.node(n).dummy)},Hw=(e,i,o)=>{let s=i,n=o;if(s>n){const f=s;s=n,n=f}let c=e[s];c||(e[s]=c={}),c[n]=!0},Aj=(e,i,o)=>{let s=i,n=o;if(s>n){const c=i;s=n,n=c}return!!e[s]},Pj=(e,i,o,s)=>{const n={},c={},f={};return i==null||i.forEach(h=>{h==null||h.forEach((v,m)=>{n[v]=v,c[v]=v,f[v]=m})}),i==null||i.forEach(h=>{let v=-1;h==null||h.forEach(m=>{let g=s(m);if(g.length){g=g.sort((x,S)=>f[x]-f[S]);const w=(g.length-1)/2;for(let x=Math.floor(w),S=Math.ceil(w);x<=S;++x){const N=g[x];c[m]===m&&v<f[N]&&!Aj(o,m,N)&&(c[N]=m,c[m]=n[m]=n[N],v=f[N])}}})}),{root:n,align:c}},Nj=(e,i,o,s,n)=>{var c;const f={},h=jj(e,i,o,n),v=n?"borderLeft":"borderRight",m=(x,S)=>{let N=h.nodes(),j=N.pop();const R={};for(;j;)R[j]?x(j):(R[j]=!0,N.push(j),N=N.concat(S(j))),j=N.pop()},g=x=>{f[x]=(h.inEdges(x)||[]).reduce((S,N)=>Math.max(S,(f[N.v]||0)+h.edge(N)),0)},w=x=>{const S=(h.outEdges(x)||[]).reduce((j,R)=>Math.min(j,(f[R.w]||0)-h.edge(R)),Number.POSITIVE_INFINITY),N=e.node(x);S!==Number.POSITIVE_INFINITY&&N.borderType!==v&&(f[x]=Math.max(f[x],S))};return m(g,h.predecessors.bind(h)),m(w,h.successors.bind(h)),(c=Object.values(s))===null||c===void 0||c.forEach(x=>{f[x]=f[o[x]]}),f},jj=(e,i,o,s)=>{const n=new Oj,c=e.graph(),f=Dj(c.nodesep,c.edgesep,s);return i==null||i.forEach(h=>{let v;h==null||h.forEach(m=>{const g=o[m];if(n.setNode(g),v){const w=o[v],x=n.edgeFromArgs(w,g);n.setEdge(w,g,Math.max(f(e,m,v),x||0))}v=m})}),n},Mj=(e,i)=>gm(Object.values(i),o=>{var s;let n=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;return(s=Object.keys(o))===null||s===void 0||s.forEach(f=>{const h=o[f],v=Cj(e,f)/2;n=Math.max(h+v,n),c=Math.min(h-v,c)}),n-c});function Rj(e,i){const o=Object.values(i),s=iE(o),n=Qg(o);["u","d"].forEach(c=>{["l","r"].forEach(f=>{const h=c+f,v=e[h];let m;if(v===i)return;const g=Object.values(v);m=f==="l"?s-iE(g):n-Qg(g),m&&(e[h]={},Object.keys(v).forEach(w=>{e[h][w]=v[w]+m}))})})}const kj=(e,i)=>{const o={};return Object.keys(e.ul).forEach(s=>{if(i)o[s]=e[i.toLowerCase()][s];else{const n=Object.values(e).map(c=>c[s]);o[s]=(n[0]+n[1])/2}}),o},Dj=(e,i,o)=>(s,n,c)=>{const f=s.node(n),h=s.node(c);let v=0,m;if(v+=f.width/2,f.hasOwnProperty("labelpos"))switch((f.labelpos||"").toLowerCase()){case"l":m=-f.width/2;break;case"r":m=f.width/2;break}if(m&&(v+=o?m:-m),m=0,v+=(f.dummy?i:e)/2,v+=(h.dummy?i:e)/2,v+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":m=h.width/2;break;case"r":m=-h.width/2;break}return m&&(v+=o?m:-m),m=0,v},Cj=(e,i)=>e.node(i).width||0,Ij=e=>{const i=Mf(e),o=e.graph().ranksep;let s=0;i==null||i.forEach(n=>{const c=n.map(h=>e.node(h).height),f=Math.max(...c,0);n==null||n.forEach(h=>{e.node(h).y=s+f/2}),s+=f+o})},Lj=e=>{const i=Mf(e),o=Object.assign(xj(e,i),Sj(e,i)),s={};let n=[];["u","d"].forEach(f=>{n=f==="u"?i:Object.values(i).reverse(),["l","r"].forEach(h=>{h==="r"&&(n=n.map(w=>Object.values(w).reverse()));const v=(f==="u"?e.predecessors:e.successors).bind(e),m=Pj(e,n,o,v),g=Nj(e,n,m.root,m.align,h==="r");h==="r"&&Object.keys(g).forEach(w=>g[w]=-g[w]),s[f+h]=g})});const c=Mj(e,s);return c&&Rj(s,c),kj(s,e.graph().align)},Fj=e=>{var i;const o=Nw(e);Ij(o);const s=Lj(o);(i=Object.keys(s))===null||i===void 0||i.forEach(n=>{o.node(n).x=s[n]})},Bj=(e,i)=>{const s=e.nodes().filter(f=>{var h;return!(!((h=e.children(f))===null||h===void 0)&&h.length)}).map(f=>e.node(f).rank),n=Math.max(...s),c=[];for(let f=0;f<n+1;f++)c[f]=[];i==null||i.forEach(f=>{const h=e.node(f);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=c[h.rank].length,c[h.rank].push(f))})},Gj=(e,i)=>{const o=i&&i.debugTiming?Mw:Rw;o("layout",()=>{i&&!i.keepNodeOrder&&i.prevGraph&&o("  inheritOrder",()=>{zj(e,i.prevGraph)});const s=o("  buildLayoutGraph",()=>qj(e));i&&i.edgeLabelSpace===!1||o("  makeSpaceForEdgeLabels",()=>{Zj(s)});try{o("  runLayout",()=>{Uj(s,o,i)})}catch(n){if(n.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,n);return}throw n}o("  updateInputGraph",()=>{Hj(e,s)})})},Uj=(e,i,o)=>{i("    removeSelfEdges",()=>{aM(e)}),i("    acyclic",()=>{K_.run(e)}),i("    nestingGraph.run",()=>{tE.run(e)}),i("    rank",()=>{WN(Nw(e))}),i("    injectEdgeLabelProxies",()=>{Jj(e)}),i("    removeEmptyRanks",()=>{TN(e)}),i("    nestingGraph.cleanup",()=>{tE.cleanup(e)}),i("    normalizeRanks",()=>{SN(e)}),i("    assignRankMinMax",()=>{Qj(e)}),i("    removeEdgeLabelProxies",()=>{eM(e)}),i("    normalize.run",()=>{J_.run(e)}),i("    parentDummyChains",()=>{ZN(e)}),i("    addBorderSegments",()=>{rj(e)}),o&&o.keepNodeOrder&&i("    initDataOrder",()=>{Bj(e,o.nodeOrder)}),i("    order",()=>{wj(e,o==null?void 0:o.keepNodeOrder)}),i("    insertSelfEdges",()=>{uM(e)}),i("    adjustCoordinateSystem",()=>{oE.adjust(e)}),i("    position",()=>{Fj(e)}),i("    positionSelfEdges",()=>{sM(e)}),i("    removeBorderNodes",()=>{iM(e)}),i("    normalize.undo",()=>{J_.undo(e)}),i("    fixupEdgeLabelCoords",()=>{nM(e)}),i("    undoCoordinateSystem",()=>{oE.undo(e)}),i("    translateGraph",()=>{tM(e)}),i("    assignNodeIntersects",()=>{rM(e)}),i("    reversePoints",()=>{oM(e)}),i("    acyclic.undo",()=>{K_.undo(e)})},zj=(e,i)=>{e.nodes().forEach(o=>{const s=e.node(o),n=i.node(o);n!==void 0?(s.fixorder=n._order,delete n._order):delete s.fixorder})},Hj=(e,i)=>{e.nodes().forEach(o=>{var s;const n=e.node(o);if(n){const c=i.node(o);n.x=c.x,n.y=c.y,n._order=c.order,n._rank=c.rank,!((s=i.children(o))===null||s===void 0)&&s.length&&(n.width=c.width,n.height=c.height)}}),e.edges().forEach(o=>{const s=e.edge(o),n=i.edge(o);s.points=n?n.points:[],n&&n.hasOwnProperty("x")&&(s.x=n.x,s.y=n.y)}),e.graph().width=i.graph().width,e.graph().height=i.graph().height},Xj=["nodesep","edgesep","ranksep","marginx","marginy"],Vj={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},jg=["acyclicer","ranker","rankdir","align"],Wj=["width","height","layer","fixorder"],Yj={width:0,height:0},$j=["minlen","weight","width","height","labeloffset"],Kj={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Mg=["labelpos"],qj=e=>{const i=new Ea({multigraph:!0,compound:!0}),o=kg(e.graph()),s={};return jg==null||jg.forEach(n=>{o[n]!==void 0&&(s[n]=o[n])}),i.setGraph(Object.assign({},Vj,Rg(o,Xj),s)),e.nodes().forEach(n=>{const c=kg(e.node(n)),f=Object.assign(Object.assign({},Yj),c),h=Rg(f,Wj);i.setNode(n,h),i.setParent(n,e.parent(n))}),e.edges().forEach(n=>{const c=kg(e.edge(n)),f={};Mg==null||Mg.forEach(h=>{c[h]!==void 0&&(f[h]=c[h])}),i.setEdgeObj(n,Object.assign({},Kj,Rg(c,$j),f))}),i},Zj=e=>{const i=e.graph();i.ranksep||(i.ranksep=0),i.ranksep/=2,e.nodes().forEach(o=>{const s=e.node(o);isNaN(s.layer)||s.layer||(s.layer=0)}),e.edges().forEach(o=>{var s;const n=e.edge(o);n.minlen*=2,((s=n.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(i.rankdir==="TB"||i.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})},Jj=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o.width&&o.height){const s=e.node(i.v),n=e.node(i.w),c={e:i,rank:(n.rank-s.rank)/2+s.rank};Vc(e,"edge-proxy",c,"_ep")}})},Qj=e=>{let i=0;e.nodes().forEach(o=>{var s,n;const c=e.node(o);c.borderTop&&(c.minRank=(s=e.node(c.borderTop))===null||s===void 0?void 0:s.rank,c.maxRank=(n=e.node(c.borderBottom))===null||n===void 0?void 0:n.rank,i=Math.max(i,c.maxRank||-1/0))}),e.graph().maxRank=i},eM=e=>{e.nodes().forEach(i=>{const o=e.node(i);o.dummy==="edge-proxy"&&(e.edge(o.e).labelRank=o.rank,e.removeNode(i))})},tM=e=>{let i,o=0,s,n=0;const c=e.graph(),f=c.marginx||0,h=c.marginy||0,v=m=>{if(!m)return;const g=m.x,w=m.y,x=m.width,S=m.height;!isNaN(g)&&!isNaN(x)&&(i===void 0&&(i=g-x/2),i=Math.min(i,g-x/2),o=Math.max(o,g+x/2)),!isNaN(w)&&!isNaN(S)&&(s===void 0&&(s=w-S/2),s=Math.min(s,w-S/2),n=Math.max(n,w+S/2))};e.nodes().forEach(m=>{v(e.node(m))}),e.edges().forEach(m=>{const g=e.edge(m);g!=null&&g.hasOwnProperty("x")&&v(g)}),i-=f,s-=h,e.nodes().forEach(m=>{const g=e.node(m);g&&(g.x-=i,g.y-=s)}),e.edges().forEach(m=>{var g;const w=e.edge(m);(g=w.points)===null||g===void 0||g.forEach(x=>{x.x-=i,x.y-=s}),w.hasOwnProperty("x")&&(w.x-=i),w.hasOwnProperty("y")&&(w.y-=s)}),c.width=o-i+f,c.height=n-s+h},rM=e=>{e.edges().forEach(i=>{const o=e.edge(i),s=e.node(i.v),n=e.node(i.w);let c,f;o.points?(c=o.points[0],f=o.points[o.points.length-1]):(o.points=[],c=n,f=s),o.points.unshift(q_(s,c)),o.points.push(q_(n,f))})},nM=e=>{e.edges().forEach(i=>{const o=e.edge(i);if(o!=null&&o.hasOwnProperty("x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})},oM=e=>{e.edges().forEach(i=>{var o;const s=e.edge(i);s.reversed&&((o=s.points)===null||o===void 0||o.reverse())})},iM=e=>{e.nodes().forEach(i=>{var o,s,n;if(!((o=e.children(i))===null||o===void 0)&&o.length){const c=e.node(i),f=e.node(c.borderTop),h=e.node(c.borderBottom),v=e.node(c.borderLeft[((s=c.borderLeft)===null||s===void 0?void 0:s.length)-1]),m=e.node(c.borderRight[((n=c.borderRight)===null||n===void 0?void 0:n.length)-1]);c.width=Math.abs((m==null?void 0:m.x)-(v==null?void 0:v.x))||10,c.height=Math.abs((h==null?void 0:h.y)-(f==null?void 0:f.y))||10,c.x=((v==null?void 0:v.x)||0)+c.width/2,c.y=((f==null?void 0:f.y)||0)+c.height/2}}),e.nodes().forEach(i=>{var o;((o=e.node(i))===null||o===void 0?void 0:o.dummy)==="border"&&e.removeNode(i)})},aM=e=>{e.edges().forEach(i=>{if(i.v===i.w){const o=e.node(i.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:i,label:e.edge(i)}),e.removeEdgeObj(i)}})},uM=e=>{const i=Mf(e);i==null||i.forEach(o=>{let s=0;o==null||o.forEach((n,c)=>{var f;const h=e.node(n);h.order=c+s,(f=h.selfEdges)===null||f===void 0||f.forEach(v=>{Vc(e,"selfedge",{width:v.label.width,height:v.label.height,rank:h.rank,order:c+ ++s,e:v.e,label:v.label},"_se")}),delete h.selfEdges})})},sM=e=>{e.nodes().forEach(i=>{const o=e.node(i);if(o.dummy==="selfedge"){const s=e.node(o.e.v),n=s.x+s.width/2,c=s.y,f=o.x-n,h=s.height/2;e.setEdgeObj(o.e,o.label),e.removeNode(i),o.label.points=[{x:n+2*f/3,y:c-h},{x:n+5*f/6,y:c-h},{y:c,x:n+f},{x:n+5*f/6,y:c+h},{x:n+2*f/3,y:c+h}],o.label.x=o.x,o.label.y=o.y}})},Rg=(e,i)=>{const o={};return i==null||i.forEach(s=>{e[s]!==void 0&&(o[s]=+e[s])}),o},kg=(e={})=>{const i={};return Object.keys(e).forEach(o=>{i[o.toLowerCase()]=e[o]}),i},cM={layout:Gj,util:{time:Mw,notime:Rw}};class lM extends AP{constructor(i){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=o=>{const s=this,{nodes:n}=s,c=n.find(f=>f.id===o);return c?c.layout!==!1:!0},this.updateCfg(i)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var i,o,s,n;const c=this,{nodes:f,nodeSize:h,rankdir:v,combos:m,begin:g,radial:w,comboEdges:x=[],vedges:S=[]}=c;if(!f)return;const N=c.edges||[],j=new Ea({multigraph:!0,compound:!0});c.nodeMap={};const R={};f.forEach(I=>{c.nodeMap[I.id]=I,I.comboId&&(R[I.comboId]=R[I.comboId]||[],R[I.comboId].push(I.id))});let D=[];const V={};!((i=c.nodeOrder)===null||i===void 0)&&i.length?(c.nodeOrder.forEach(I=>{V[I]=!0,D.push(c.nodeMap[I])}),f.forEach(I=>{V[I.id]||D.push(I)})):D=f;let ce;h?I_(h)?ce=()=>h:ce=()=>[h,h]:ce=I=>I.size?I_(I.size)?I.size:ww(I.size)?[I.size.width||40,I.size.height||40]:[I.size,I.size]:[40,40];const Ee=L_(c.ranksep,50,c.ranksepFunc),fe=L_(c.nodesep,50,c.nodesepFunc);let W=fe,ae=Ee;(v==="LR"||v==="RL")&&(W=Ee,ae=fe),j.setDefaultEdgeLabel(()=>({})),j.setGraph(c);const Y={};this.sortByCombo&&m&&m.forEach(I=>{if(Y[I.id]=I,I.collapsed){const pe=ce(I),De=ae(I),Q=W(I),se=pe[0]+2*Q,he=pe[1]+2*De;j.setNode(I.id,{width:se,height:he})}I.parentId&&(Y[I.parentId]||j.setNode(I.parentId,{}),j.setParent(I.id,I.parentId))}),D.filter(I=>I.layout!==!1).forEach(I=>{const pe=ce(I),De=ae(I),Q=W(I),se=pe[0]+2*Q,he=pe[1]+2*De,be=I.layer;th(be)?j.setNode(I.id,{width:se,height:he,layer:be}):j.setNode(I.id,{width:se,height:he}),this.sortByCombo&&I.comboId&&(Y[I.comboId]||(Y[I.comboId]={id:I.comboId},j.setNode(I.comboId,{})),j.setParent(I.id,I.comboId))}),N.forEach(I=>{const pe=Ac(I,"source"),De=Ac(I,"target");this.layoutNode(pe)&&this.layoutNode(De)&&j.setEdge(pe,De,{weight:I.weight||1})}),(o=x==null?void 0:x.concat(S||[]))===null||o===void 0||o.forEach(I=>{var pe,De;const{source:Q,target:se}=I,he=!((pe=Y[Q])===null||pe===void 0)&&pe.collapsed?[Q]:R[Q]||[Q],be=!((De=Y[se])===null||De===void 0)&&De.collapsed?[se]:R[se]||[se];he.forEach(ee=>{be.forEach(ve=>{j.setEdge(ee,ve,{weight:I.weight||1})})})});let F;!((s=c.preset)===null||s===void 0)&&s.nodes&&(F=new Ea({multigraph:!0,compound:!0}),c.preset.nodes.forEach(I=>{F==null||F.setNode(I.id,I)})),cM.layout(j,{prevGraph:F,edgeLabelSpace:c.edgeLabelSpace,keepNodeOrder:!!c.nodeOrder,nodeOrder:c.nodeOrder});const $=[0,0];if(g){let I=1/0,pe=1/0;j.nodes().forEach(De=>{const Q=j.node(De);I>Q.x&&(I=Q.x),pe>Q.y&&(pe=Q.y)}),j.edges().forEach(De=>{var Q;(Q=j.edge(De).points)===null||Q===void 0||Q.forEach(he=>{I>he.x&&(I=he.x),pe>he.y&&(pe=he.y)})}),$[0]=g[0]-I,$[1]=g[1]-pe}const K=v==="LR"||v==="RL";if(w){const{focusNode:I,ranksep:pe,getRadialPos:De}=this,Q=PP(I)?I:I==null?void 0:I.id,se=Q?(n=j.node(Q))===null||n===void 0?void 0:n._rank:0,he=[],be=K?"y":"x",ee=K?"height":"width";let ve=1/0,Fe=-1/0;j.nodes().forEach(ne=>{const me=j.node(ne);if(!c.nodeMap[ne])return;const qe=fe(c.nodeMap[ne]);if(se===0)he[me._rank]||(he[me._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),he[me._rank].nodes.push(ne),he[me._rank].totalWidth+=qe*2+me[ee],he[me._rank].maxSize<Math.max(me.width,me.height)&&(he[me._rank].maxSize=Math.max(me.width,me.height));else{const kt=me._rank-se;if(kt===0)he[kt]||(he[kt]={nodes:[],totalWidth:0,maxSize:-1/0}),he[kt].nodes.push(ne),he[kt].totalWidth+=qe*2+me[ee],he[kt].maxSize<Math.max(me.width,me.height)&&(he[kt].maxSize=Math.max(me.width,me.height));else{const zt=Math.abs(kt);he[zt]||(he[zt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),he[zt].totalWidth+=qe*2+me[ee],he[zt].maxSize<Math.max(me.width,me.height)&&(he[zt].maxSize=Math.max(me.width,me.height)),kt<0?he[zt].left.push(ne):he[zt].right.push(ne)}}const gt=me[be]-me[ee]/2-qe,et=me[be]+me[ee]/2+qe;gt<ve&&(ve=gt),et>Fe&&(Fe=et)});let Ze=pe||50;const ht={},Ft=(Fe-ve)/.9,bt=[(ve+Fe-Ft)*.5,(ve+Fe+Ft)*.5],xt=(ne,me,qe=-1/0,gt=[0,1])=>{let et=qe;return ne.forEach(kt=>{const zt=j.node(kt);ht[kt]=me;const{x:Zt,y:Gt}=De(zt[be],bt,Ft,me,gt);if(!c.nodeMap[kt])return;c.nodeMap[kt].x=Zt+$[0],c.nodeMap[kt].y=Gt+$[1],c.nodeMap[kt]._order=zt._order;const ze=Ee(c.nodeMap[kt]);et<ze&&(et=ze)}),et};let tr=!0;const we=0;he.forEach(ne=>{var me,qe,gt,et,kt,zt,Zt;if(!(!((me=ne==null?void 0:ne.nodes)===null||me===void 0)&&me.length)&&!(!((qe=ne==null?void 0:ne.left)===null||qe===void 0)&&qe.length)&&!(!((gt=ne==null?void 0:ne.right)===null||gt===void 0)&&gt.length))return;if(tr&&ne.nodes.length===1){const ze=ne.nodes[0];if(!c.nodeMap[ze])return;c.nodeMap[ze].x=$[0],c.nodeMap[ze].y=$[1],ht[ne.nodes[0]]=0,Ze=Ee(c.nodeMap[ze]),tr=!1;return}Ze=Math.max(Ze,ne.totalWidth/(2*Math.PI));let Gt=-1/0;if(se===0||!((et=ne.nodes)===null||et===void 0)&&et.length)Gt=xt(ne.nodes,Ze,Gt,[0,1]);else{const ze=((kt=ne.left)===null||kt===void 0?void 0:kt.length)/(((zt=ne.left)===null||zt===void 0?void 0:zt.length)+((Zt=ne.right)===null||Zt===void 0?void 0:Zt.length));Gt=xt(ne.left,Ze,Gt,[0,ze]),Gt=xt(ne.right,Ze,Gt,[ze+.05,1])}Ze+=Gt,tr=!1,we-ne.maxSize}),j.edges().forEach(ne=>{var me,qe,gt;const et=j.edge(ne),kt=N.findIndex(zt=>{const Zt=Ac(zt,"source"),Gt=Ac(zt,"target");return Zt===ne.v&&Gt===ne.w});if(!(kt<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[kt].type!=="loop"){const zt=be==="x"?"y":"x",Zt=(me=et==null?void 0:et.points)===null||me===void 0?void 0:me.slice(1,et.points.length-1),Gt=[],ze=(qe=j.node(ne.v))===null||qe===void 0?void 0:qe[zt],Yt=ze-((gt=j.node(ne.w))===null||gt===void 0?void 0:gt[zt]),xe=ht[ne.v],Ht=xe-ht[ne.w];Zt==null||Zt.forEach(yr=>{const G=(yr[zt]-ze)/Yt*Ht+xe,pr=De(yr[be],bt,Ft,G);Gt.push({x:pr.x+$[0],y:pr.y+$[1]})}),N[kt].controlPoints=Gt}})}else{const I=new Set,De=v==="BT"||v==="RL"?(be,ee)=>ee-be:(be,ee)=>be-ee;j.nodes().forEach(be=>{const ee=j.node(be);if(!ee)return;let ve=this.nodeMap[be];ve||(ve=m==null?void 0:m.find(Fe=>Fe.id===be)),ve&&(ve.x=ee.x+$[0],ve.y=ee.y+$[1],ve._order=ee._order,I.add(K?ve.x:ve.y))});const Q=Array.from(I).sort(De),se=K?(be,ee)=>be.x!==ee.x:(be,ee)=>be.y!==ee.y,he=K?(be,ee,ve)=>{const Fe=Math.max(ee.y,ve.y),Ze=Math.min(ee.y,ve.y);return be.filter(ht=>ht.y<=Fe&&ht.y>=Ze)}:(be,ee,ve)=>{const Fe=Math.max(ee.x,ve.x),Ze=Math.min(ee.x,ve.x);return be.filter(ht=>ht.x<=Fe&&ht.x>=Ze)};j.edges().forEach(be=>{var ee;const ve=j.edge(be),Fe=N.findIndex(Ze=>{const ht=Ac(Ze,"source"),Ft=Ac(Ze,"target");return ht===be.v&&Ft===be.w});if(!(Fe<=-1)&&c.edgeLabelSpace&&c.controlPoints&&N[Fe].type!=="loop"){(ee=ve==null?void 0:ve.points)===null||ee===void 0||ee.forEach(Ft=>{Ft.x+=$[0],Ft.y+=$[1]});const Ze=c.nodeMap[be.v],ht=c.nodeMap[be.w];N[Fe].controlPoints=fM(ve==null?void 0:ve.points,Ze,ht,Q,K,se,he)}})}return c.onLayoutEnd&&c.onLayoutEnd(),{nodes:f,edges:N}}getRadialPos(i,o,s,n,c=[0,1]){let f=(i-o[0])/s;f=f*(c[1]-c[0])+c[0];const h=f*2*Math.PI;return{x:Math.cos(h)*n,y:Math.sin(h)*n}}getType(){return"dagre"}}const fM=(e,i,o,s,n,c,f)=>{let h=(e==null?void 0:e.slice(1,e.length-1))||[];if(i&&o){let{x:v,y:m}=i,{x:g,y:w}=o;if(n&&(v=i.y,m=i.x,g=o.y,w=o.x),w!==m&&v!==g){const x=s.indexOf(m),S=s[x+1];if(S){const R=h[0],D=n?{x:(m+S)/2,y:(R==null?void 0:R.y)||g}:{x:(R==null?void 0:R.x)||g,y:(m+S)/2};(!R||c(R,D))&&h.unshift(D)}const N=s.indexOf(w),j=Math.abs(N-x);if(j===1)h=f(h,i,o),h.length||h.push(n?{x:(m+w)/2,y:v}:{x:v,y:(m+w)/2});else if(j>1){const R=s[N-1];if(R){const D=h[h.length-1],V=n?{x:(w+R)/2,y:(D==null?void 0:D.y)||g}:{x:(D==null?void 0:D.x)||v,y:(w+R)/2};(!D||c(D,V))&&h.push(V)}}}}return h};var fE,dE,pE,hE;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(fE||(fE={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(dE||(dE={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(pE||(pE={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(hE||(hE={}));var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mm(e,i){return e(i={exports:{}},i.exports),i.exports}var dM=function(){this.__data__=[],this.size=0},Wc=function(e,i){return e===i||e!=e&&i!=i},ph=function(e,i){for(var o=e.length;o--;)if(Wc(e[o][0],i))return o;return-1},pM=Array.prototype.splice,hM=function(e){var i=this.__data__,o=ph(i,e);return!(o<0)&&(o==i.length-1?i.pop():pM.call(i,o,1),--this.size,!0)},vM=function(e){var i=this.__data__,o=ph(i,e);return o<0?void 0:i[o][1]},yM=function(e){return ph(this.__data__,e)>-1},gM=function(e,i){var o=this.__data__,s=ph(o,e);return s<0?(++this.size,o.push([e,i])):o[s][1]=i,this};function Nc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}Nc.prototype.clear=dM,Nc.prototype.delete=hM,Nc.prototype.get=vM,Nc.prototype.has=yM,Nc.prototype.set=gM;var hh=Nc,mM=function(){this.__data__=new hh,this.size=0},bM=function(e){var i=this.__data__,o=i.delete(e);return this.size=i.size,o},_M=function(e){return this.__data__.get(e)},EM=function(e){return this.__data__.has(e)},Xw=typeof Fp=="object"&&Fp&&Fp.Object===Object&&Fp,wM=typeof self=="object"&&self&&self.Object===Object&&self,mi=Xw||wM||Function("return this")(),oi=mi.Symbol,Vw=Object.prototype,OM=Vw.hasOwnProperty,xM=Vw.toString,yf=oi?oi.toStringTag:void 0,SM=function(e){var i=OM.call(e,yf),o=e[yf];try{e[yf]=void 0;var s=!0}catch{}var n=xM.call(e);return s&&(i?e[yf]=o:delete e[yf]),n},TM=Object.prototype.toString,AM=function(e){return TM.call(e)},vE=oi?oi.toStringTag:void 0,du=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":vE&&vE in Object(e)?SM(e):AM(e)},Do=function(e){var i=typeof e;return e!=null&&(i=="object"||i=="function")},yE,If=function(e){if(!Do(e))return!1;var i=du(e);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},Dg=mi["__core-js_shared__"],gE=(yE=/[^.]+$/.exec(Dg&&Dg.keys&&Dg.keys.IE_PROTO||""))?"Symbol(src)_1."+yE:"",PM=function(e){return!!gE&&gE in e},NM=Function.prototype.toString,ls=function(e){if(e!=null){try{return NM.call(e)}catch{}try{return e+""}catch{}}return""},jM=/^\[object .+?Constructor\]$/,MM=Function.prototype,RM=Object.prototype,kM=MM.toString,DM=RM.hasOwnProperty,CM=RegExp("^"+kM.call(DM).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),IM=function(e){return!(!Do(e)||PM(e))&&(If(e)?CM:jM).test(ls(e))},LM=function(e,i){return e==null?void 0:e[i]},fs=function(e,i){var o=LM(e,i);return IM(o)?o:void 0},Rf=fs(mi,"Map"),kf=fs(Object,"create"),FM=function(){this.__data__=kf?kf(null):{},this.size=0},BM=function(e){var i=this.has(e)&&delete this.__data__[e];return this.size-=i?1:0,i},GM=Object.prototype.hasOwnProperty,UM=function(e){var i=this.__data__;if(kf){var o=i[e];return o==="__lodash_hash_undefined__"?void 0:o}return GM.call(i,e)?i[e]:void 0},zM=Object.prototype.hasOwnProperty,HM=function(e){var i=this.__data__;return kf?i[e]!==void 0:zM.call(i,e)},XM=function(e,i){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=kf&&i===void 0?"__lodash_hash_undefined__":i,this};function jc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}jc.prototype.clear=FM,jc.prototype.delete=BM,jc.prototype.get=UM,jc.prototype.has=HM,jc.prototype.set=XM;var mE=jc,VM=function(){this.size=0,this.__data__={hash:new mE,map:new(Rf||hh),string:new mE}},WM=function(e){var i=typeof e;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?e!=="__proto__":e===null},vh=function(e,i){var o=e.__data__;return WM(i)?o[typeof i=="string"?"string":"hash"]:o.map},YM=function(e){var i=vh(this,e).delete(e);return this.size-=i?1:0,i},$M=function(e){return vh(this,e).get(e)},KM=function(e){return vh(this,e).has(e)},qM=function(e,i){var o=vh(this,e),s=o.size;return o.set(e,i),this.size+=o.size==s?0:1,this};function Mc(e){var i=-1,o=e==null?0:e.length;for(this.clear();++i<o;){var s=e[i];this.set(s[0],s[1])}}Mc.prototype.clear=VM,Mc.prototype.delete=YM,Mc.prototype.get=$M,Mc.prototype.has=KM,Mc.prototype.set=qM;var yh=Mc,ZM=function(e,i){var o=this.__data__;if(o instanceof hh){var s=o.__data__;if(!Rf||s.length<199)return s.push([e,i]),this.size=++o.size,this;o=this.__data__=new yh(s)}return o.set(e,i),this.size=o.size,this};function Rc(e){var i=this.__data__=new hh(e);this.size=i.size}Rc.prototype.clear=mM,Rc.prototype.delete=bM,Rc.prototype.get=_M,Rc.prototype.has=EM,Rc.prototype.set=ZM;var Fc=Rc,bm=function(e,i){for(var o=-1,s=e==null?0:e.length;++o<s&&i(e[o],o,e)!==!1;);return e},nh=function(){try{var e=fs(Object,"defineProperty");return e({},"",{}),e}catch{}}(),gh=function(e,i,o){i=="__proto__"&&nh?nh(e,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[i]=o},JM=Object.prototype.hasOwnProperty,mh=function(e,i,o){var s=e[i];JM.call(e,i)&&Wc(s,o)&&(o!==void 0||i in e)||gh(e,i,o)},Lf=function(e,i,o,s){var n=!o;o||(o={});for(var c=-1,f=i.length;++c<f;){var h=i[c],v=s?s(o[h],e[h],h,o,e):void 0;v===void 0&&(v=e[h]),n?gh(o,h,v):mh(o,h,v)}return o},QM=function(e,i){for(var o=-1,s=Array(e);++o<e;)s[o]=i(o);return s},gi=function(e){return e!=null&&typeof e=="object"},bE=function(e){return gi(e)&&du(e)=="[object Arguments]"},Ww=Object.prototype,eR=Ww.hasOwnProperty,tR=Ww.propertyIsEnumerable,zc=bE(function(){return arguments}())?bE:function(e){return gi(e)&&eR.call(e,"callee")&&!tR.call(e,"callee")},Tn=Array.isArray,rR=function(){return!1},us=mm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o?mi.Buffer:void 0,c=(n?n.isBuffer:void 0)||rR;e.exports=c}),nR=/^(?:0|[1-9]\d*)$/,bh=function(e,i){var o=typeof e;return!!(i=i??9007199254740991)&&(o=="number"||o!="symbol"&&nR.test(e))&&e>-1&&e%1==0&&e<i},_m=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},fn={};fn["[object Float32Array]"]=fn["[object Float64Array]"]=fn["[object Int8Array]"]=fn["[object Int16Array]"]=fn["[object Int32Array]"]=fn["[object Uint8Array]"]=fn["[object Uint8ClampedArray]"]=fn["[object Uint16Array]"]=fn["[object Uint32Array]"]=!0,fn["[object Arguments]"]=fn["[object Array]"]=fn["[object ArrayBuffer]"]=fn["[object Boolean]"]=fn["[object DataView]"]=fn["[object Date]"]=fn["[object Error]"]=fn["[object Function]"]=fn["[object Map]"]=fn["[object Number]"]=fn["[object Object]"]=fn["[object RegExp]"]=fn["[object Set]"]=fn["[object String]"]=fn["[object WeakMap]"]=!1;var oR=function(e){return gi(e)&&_m(e.length)&&!!fn[du(e)]},_h=function(e){return function(i){return e(i)}},Hc=mm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o&&Xw.process,c=function(){try{var f=s&&s.require&&s.require("util").types;return f||n&&n.binding&&n.binding("util")}catch{}}();e.exports=c}),_E=Hc&&Hc.isTypedArray,Ff=_E?_h(_E):oR,iR=Object.prototype.hasOwnProperty,Yw=function(e,i){var o=Tn(e),s=!o&&zc(e),n=!o&&!s&&us(e),c=!o&&!s&&!n&&Ff(e),f=o||s||n||c,h=f?QM(e.length,String):[],v=h.length;for(var m in e)!i&&!iR.call(e,m)||f&&(m=="length"||n&&(m=="offset"||m=="parent")||c&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||bh(m,v))||h.push(m);return h},aR=Object.prototype,Eh=function(e){var i=e&&e.constructor;return e===(typeof i=="function"&&i.prototype||aR)},$w=function(e,i){return function(o){return e(i(o))}},uR=$w(Object.keys,Object),sR=Object.prototype.hasOwnProperty,Em=function(e){if(!Eh(e))return uR(e);var i=[];for(var o in Object(e))sR.call(e,o)&&o!="constructor"&&i.push(o);return i},wa=function(e){return e!=null&&_m(e.length)&&!If(e)},pu=function(e){return wa(e)?Yw(e):Em(e)},cR=function(e,i){return e&&Lf(i,pu(i),e)},lR=function(e){var i=[];if(e!=null)for(var o in Object(e))i.push(o);return i},fR=Object.prototype.hasOwnProperty,dR=function(e){if(!Do(e))return lR(e);var i=Eh(e),o=[];for(var s in e)(s!="constructor"||!i&&fR.call(e,s))&&o.push(s);return o},ds=function(e){return wa(e)?Yw(e,!0):dR(e)},pR=function(e,i){return e&&Lf(i,ds(i),e)},Kw=mm(function(e,i){var o=i&&!i.nodeType&&i,s=o&&e&&!e.nodeType&&e,n=s&&s.exports===o?mi.Buffer:void 0,c=n?n.allocUnsafe:void 0;e.exports=function(f,h){if(h)return f.slice();var v=f.length,m=c?c(v):new f.constructor(v);return f.copy(m),m}}),qw=function(e,i){var o=-1,s=e.length;for(i||(i=Array(s));++o<s;)i[o]=e[o];return i},Zw=function(e,i){for(var o=-1,s=e==null?0:e.length,n=0,c=[];++o<s;){var f=e[o];i(f,o,e)&&(c[n++]=f)}return c},Jw=function(){return[]},hR=Object.prototype.propertyIsEnumerable,EE=Object.getOwnPropertySymbols,wm=EE?function(e){return e==null?[]:(e=Object(e),Zw(EE(e),function(i){return hR.call(e,i)}))}:Jw,vR=function(e,i){return Lf(e,wm(e),i)},Om=function(e,i){for(var o=-1,s=i.length,n=e.length;++o<s;)e[n+o]=i[o];return e},wh=$w(Object.getPrototypeOf,Object),Qw=Object.getOwnPropertySymbols?function(e){for(var i=[];e;)Om(i,wm(e)),e=wh(e);return i}:Jw,yR=function(e,i){return Lf(e,Qw(e),i)},eO=function(e,i,o){var s=i(e);return Tn(e)?s:Om(s,o(e))},em=function(e){return eO(e,pu,wm)},gR=function(e){return eO(e,ds,Qw)},tm=fs(mi,"DataView"),rm=fs(mi,"Promise"),Bc=fs(mi,"Set"),nm=fs(mi,"WeakMap"),mR=ls(tm),bR=ls(Rf),_R=ls(rm),ER=ls(Bc),wR=ls(nm),os=du;(tm&&os(new tm(new ArrayBuffer(1)))!="[object DataView]"||Rf&&os(new Rf)!="[object Map]"||rm&&os(rm.resolve())!="[object Promise]"||Bc&&os(new Bc)!="[object Set]"||nm&&os(new nm)!="[object WeakMap]")&&(os=function(e){var i=du(e),o=i=="[object Object]"?e.constructor:void 0,s=o?ls(o):"";if(s)switch(s){case mR:return"[object DataView]";case bR:return"[object Map]";case _R:return"[object Promise]";case ER:return"[object Set]";case wR:return"[object WeakMap]"}return i});var ss=os,OR=Object.prototype.hasOwnProperty,xR=function(e){var i=e.length,o=new e.constructor(i);return i&&typeof e[0]=="string"&&OR.call(e,"index")&&(o.index=e.index,o.input=e.input),o},oh=mi.Uint8Array,xm=function(e){var i=new e.constructor(e.byteLength);return new oh(i).set(new oh(e)),i},SR=function(e,i){var o=i?xm(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.byteLength)},TR=/\w*$/,AR=function(e){var i=new e.constructor(e.source,TR.exec(e));return i.lastIndex=e.lastIndex,i},wE=oi?oi.prototype:void 0,OE=wE?wE.valueOf:void 0,PR=function(e){return OE?Object(OE.call(e)):{}},tO=function(e,i){var o=i?xm(e.buffer):e.buffer;return new e.constructor(o,e.byteOffset,e.length)},NR=function(e,i,o){var s=e.constructor;switch(i){case"[object ArrayBuffer]":return xm(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return SR(e,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return tO(e,o);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return AR(e);case"[object Set]":return new s;case"[object Symbol]":return PR(e)}},xE=Object.create,rO=function(){function e(){}return function(i){if(!Do(i))return{};if(xE)return xE(i);e.prototype=i;var o=new e;return e.prototype=void 0,o}}(),nO=function(e){return typeof e.constructor!="function"||Eh(e)?{}:rO(wh(e))},jR=function(e){return gi(e)&&ss(e)=="[object Map]"},SE=Hc&&Hc.isMap,MR=SE?_h(SE):jR,RR=function(e){return gi(e)&&ss(e)=="[object Set]"},TE=Hc&&Hc.isSet,kR=TE?_h(TE):RR,an={};an["[object Arguments]"]=an["[object Array]"]=an["[object ArrayBuffer]"]=an["[object DataView]"]=an["[object Boolean]"]=an["[object Date]"]=an["[object Float32Array]"]=an["[object Float64Array]"]=an["[object Int8Array]"]=an["[object Int16Array]"]=an["[object Int32Array]"]=an["[object Map]"]=an["[object Number]"]=an["[object Object]"]=an["[object RegExp]"]=an["[object Set]"]=an["[object String]"]=an["[object Symbol]"]=an["[object Uint8Array]"]=an["[object Uint8ClampedArray]"]=an["[object Uint16Array]"]=an["[object Uint32Array]"]=!0,an["[object Error]"]=an["[object Function]"]=an["[object WeakMap]"]=!1;var oO=function e(i,o,s,n,c,f){var h,v=1&o,m=2&o,g=4&o;if(s&&(h=c?s(i,n,c,f):s(i)),h!==void 0)return h;if(!Do(i))return i;var w=Tn(i);if(w){if(h=xR(i),!v)return qw(i,h)}else{var x=ss(i),S=x=="[object Function]"||x=="[object GeneratorFunction]";if(us(i))return Kw(i,v);if(x=="[object Object]"||x=="[object Arguments]"||S&&!c){if(h=m||S?{}:nO(i),!v)return m?yR(i,pR(h,i)):vR(i,cR(h,i))}else{if(!an[x])return c?i:{};h=NR(i,x,v)}}f||(f=new Fc);var N=f.get(i);if(N)return N;f.set(i,h),kR(i)?i.forEach(function(R){h.add(e(R,o,s,R,i,f))}):MR(i)&&i.forEach(function(R,D){h.set(D,e(R,o,s,D,i,f))});var j=w?void 0:(g?m?gR:em:m?ds:pu)(i);return bm(j||i,function(R,D){j&&(R=i[D=R]),mh(h,D,e(R,o,s,D,i,f))}),h},DR=function(e){return oO(e,4)},Sm=function(e){return function(){return e}},Tm=function(e){return function(i,o,s){for(var n=-1,c=Object(i),f=s(i),h=f.length;h--;){var v=f[e?h:++n];if(o(c[v],v,c)===!1)break}return i}}(),Am=function(e,i){return e&&Tm(e,i,pu)},Oh=function(e,i){return function(o,s){if(o==null)return o;if(!wa(o))return e(o,s);for(var n=o.length,c=i?n:-1,f=Object(o);(i?c--:++c<n)&&s(f[c],c,f)!==!1;);return o}}(Am),ps=function(e){return e},iO=function(e){return typeof e=="function"?e:ps},aO=function(e,i){return(Tn(e)?bm:Oh)(e,iO(i))},uO=aO,CR=function(e,i){var o=[];return Oh(e,function(s,n,c){i(s,n,c)&&o.push(s)}),o},IR=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},LR=function(e){return this.__data__.has(e)};function Vp(e){var i=-1,o=e==null?0:e.length;for(this.__data__=new yh;++i<o;)this.add(e[i])}Vp.prototype.add=Vp.prototype.push=IR,Vp.prototype.has=LR;var sO=Vp,FR=function(e,i){for(var o=-1,s=e==null?0:e.length;++o<s;)if(i(e[o],o,e))return!0;return!1},cO=function(e,i){return e.has(i)},lO=function(e,i,o,s,n,c){var f=1&o,h=e.length,v=i.length;if(h!=v&&!(f&&v>h))return!1;var m=c.get(e),g=c.get(i);if(m&&g)return m==i&&g==e;var w=-1,x=!0,S=2&o?new sO:void 0;for(c.set(e,i),c.set(i,e);++w<h;){var N=e[w],j=i[w];if(s)var R=f?s(j,N,w,i,e,c):s(N,j,w,e,i,c);if(R!==void 0){if(R)continue;x=!1;break}if(S){if(!FR(i,function(D,V){if(!cO(S,V)&&(N===D||n(N,D,o,s,c)))return S.push(V)})){x=!1;break}}else if(N!==j&&!n(N,j,o,s,c)){x=!1;break}}return c.delete(e),c.delete(i),x},BR=function(e){var i=-1,o=Array(e.size);return e.forEach(function(s,n){o[++i]=[n,s]}),o},Pm=function(e){var i=-1,o=Array(e.size);return e.forEach(function(s){o[++i]=s}),o},AE=oi?oi.prototype:void 0,Cg=AE?AE.valueOf:void 0,GR=function(e,i,o,s,n,c,f){switch(o){case"[object DataView]":if(e.byteLength!=i.byteLength||e.byteOffset!=i.byteOffset)return!1;e=e.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=i.byteLength||!c(new oh(e),new oh(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Wc(+e,+i);case"[object Error]":return e.name==i.name&&e.message==i.message;case"[object RegExp]":case"[object String]":return e==i+"";case"[object Map]":var h=BR;case"[object Set]":var v=1&s;if(h||(h=Pm),e.size!=i.size&&!v)return!1;var m=f.get(e);if(m)return m==i;s|=2,f.set(e,i);var g=lO(h(e),h(i),s,n,c,f);return f.delete(e),g;case"[object Symbol]":if(Cg)return Cg.call(e)==Cg.call(i)}return!1},UR=Object.prototype.hasOwnProperty,zR=function(e,i,o,s,n,c){var f=1&o,h=em(e),v=h.length;if(v!=em(i).length&&!f)return!1;for(var m=v;m--;){var g=h[m];if(!(f?g in i:UR.call(i,g)))return!1}var w=c.get(e),x=c.get(i);if(w&&x)return w==i&&x==e;var S=!0;c.set(e,i),c.set(i,e);for(var N=f;++m<v;){var j=e[g=h[m]],R=i[g];if(s)var D=f?s(R,j,g,i,e,c):s(j,R,g,e,i,c);if(!(D===void 0?j===R||n(j,R,o,s,c):D)){S=!1;break}N||(N=g=="constructor")}if(S&&!N){var V=e.constructor,ce=i.constructor;V==ce||!("constructor"in e)||!("constructor"in i)||typeof V=="function"&&V instanceof V&&typeof ce=="function"&&ce instanceof ce||(S=!1)}return c.delete(e),c.delete(i),S},PE=Object.prototype.hasOwnProperty,HR=function(e,i,o,s,n,c){var f=Tn(e),h=Tn(i),v=f?"[object Array]":ss(e),m=h?"[object Array]":ss(i),g=(v=v=="[object Arguments]"?"[object Object]":v)=="[object Object]",w=(m=m=="[object Arguments]"?"[object Object]":m)=="[object Object]",x=v==m;if(x&&us(e)){if(!us(i))return!1;f=!0,g=!1}if(x&&!g)return c||(c=new Fc),f||Ff(e)?lO(e,i,o,s,n,c):GR(e,i,v,o,s,n,c);if(!(1&o)){var S=g&&PE.call(e,"__wrapped__"),N=w&&PE.call(i,"__wrapped__");if(S||N){var j=S?e.value():e,R=N?i.value():i;return c||(c=new Fc),n(j,R,o,s,c)}}return!!x&&(c||(c=new Fc),zR(e,i,o,s,n,c))},fO=function e(i,o,s,n,c){return i===o||(i==null||o==null||!gi(i)&&!gi(o)?i!=i&&o!=o:HR(i,o,s,n,e,c))},XR=function(e,i,o,s){var n=o.length,c=n,f=!s;if(e==null)return!c;for(e=Object(e);n--;){var h=o[n];if(f&&h[2]?h[1]!==e[h[0]]:!(h[0]in e))return!1}for(;++n<c;){var v=(h=o[n])[0],m=e[v],g=h[1];if(f&&h[2]){if(m===void 0&&!(v in e))return!1}else{var w=new Fc;if(s)var x=s(m,g,v,e,i,w);if(!(x===void 0?fO(g,m,3,s,w):x))return!1}}return!0},dO=function(e){return e==e&&!Do(e)},VR=function(e){for(var i=pu(e),o=i.length;o--;){var s=i[o],n=e[s];i[o]=[s,n,dO(n)]}return i},pO=function(e,i){return function(o){return o!=null&&o[e]===i&&(i!==void 0||e in Object(o))}},WR=function(e){var i=VR(e);return i.length==1&&i[0][2]?pO(i[0][0],i[0][1]):function(o){return o===e||XR(o,e,i)}},cs=function(e){return typeof e=="symbol"||gi(e)&&du(e)=="[object Symbol]"},YR=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$R=/^\w*$/,Nm=function(e,i){if(Tn(e))return!1;var o=typeof e;return!(o!="number"&&o!="symbol"&&o!="boolean"&&e!=null&&!cs(e))||$R.test(e)||!YR.test(e)||i!=null&&e in Object(i)};function jm(e,i){if(typeof e!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var o=function(){var s=arguments,n=i?i.apply(this,s):s[0],c=o.cache;if(c.has(n))return c.get(n);var f=e.apply(this,s);return o.cache=c.set(n,f)||c,f};return o.cache=new(jm.Cache||yh),o}jm.Cache=yh;var KR=jm,qR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZR=/\\(\\)?/g,JR=function(e){var i=KR(e,function(s){return o.size===500&&o.clear(),s}),o=i.cache;return i}(function(e){var i=[];return e.charCodeAt(0)===46&&i.push(""),e.replace(qR,function(o,s,n,c){i.push(n?c.replace(ZR,"$1"):s||o)}),i}),Gc=function(e,i){for(var o=-1,s=e==null?0:e.length,n=Array(s);++o<s;)n[o]=i(e[o],o,e);return n},NE=oi?oi.prototype:void 0,jE=NE?NE.toString:void 0,QR=function e(i){if(typeof i=="string")return i;if(Tn(i))return Gc(i,e)+"";if(cs(i))return jE?jE.call(i):"";var o=i+"";return o=="0"&&1/i==-1/0?"-0":o},hO=function(e){return e==null?"":QR(e)},xh=function(e,i){return Tn(e)?e:Nm(e,i)?[e]:JR(hO(e))},Bf=function(e){if(typeof e=="string"||cs(e))return e;var i=e+"";return i=="0"&&1/e==-1/0?"-0":i},Sh=function(e,i){for(var o=0,s=(i=xh(i,e)).length;e!=null&&o<s;)e=e[Bf(i[o++])];return o&&o==s?e:void 0},ek=function(e,i,o){var s=e==null?void 0:Sh(e,i);return s===void 0?o:s},tk=function(e,i){return e!=null&&i in Object(e)},vO=function(e,i,o){for(var s=-1,n=(i=xh(i,e)).length,c=!1;++s<n;){var f=Bf(i[s]);if(!(c=e!=null&&o(e,f)))break;e=e[f]}return c||++s!=n?c:!!(n=e==null?0:e.length)&&_m(n)&&bh(f,n)&&(Tn(e)||zc(e))},yO=function(e,i){return e!=null&&vO(e,i,tk)},rk=function(e,i){return Nm(e)&&dO(i)?pO(Bf(e),i):function(o){var s=ek(o,e);return s===void 0&&s===i?yO(o,e):fO(i,s,3)}},gO=function(e){return function(i){return i==null?void 0:i[e]}},nk=function(e){return function(i){return Sh(i,e)}},ok=function(e){return Nm(e)?gO(Bf(e)):nk(e)},Oa=function(e){return typeof e=="function"?e:e==null?ps:typeof e=="object"?Tn(e)?rk(e[0],e[1]):WR(e):ok(e)},mO=function(e,i){return(Tn(e)?Zw:CR)(e,Oa(i))},ik=Object.prototype.hasOwnProperty,ak=function(e,i){return e!=null&&ik.call(e,i)},bO=function(e,i){return e!=null&&vO(e,i,ak)},uk=Object.prototype.hasOwnProperty,sk=function(e){if(e==null)return!0;if(wa(e)&&(Tn(e)||typeof e=="string"||typeof e.splice=="function"||us(e)||Ff(e)||zc(e)))return!e.length;var i=ss(e);if(i=="[object Map]"||i=="[object Set]")return!e.size;if(Eh(e))return!Em(e).length;for(var o in e)if(uk.call(e,o))return!1;return!0},_O=function(e){return e===void 0},EO=function(e,i){var o=-1,s=wa(e)?Array(e.length):[];return Oh(e,function(n,c,f){s[++o]=i(n,c,f)}),s},wO=function(e,i){return(Tn(e)?Gc:EO)(e,Oa(i))},ck=function(e,i,o,s){var n=-1,c=e==null?0:e.length;for(s&&c&&(o=e[++n]);++n<c;)o=i(o,e[n],n,e);return o},lk=function(e,i,o,s,n){return n(e,function(c,f,h){o=s?(s=!1,c):i(o,c,f,h)}),o},OO=function(e,i,o){var s=Tn(e)?ck:lk,n=arguments.length<3;return s(e,Oa(i),o,n,Oh)},fk=function(e){return typeof e=="string"||!Tn(e)&&gi(e)&&du(e)=="[object String]"},dk=gO("length"),pk=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),hk=function(e){return pk.test(e)},vk="[\\ud800-\\udfff]",om="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",im="\\ud83c[\\udffb-\\udfff]",xO="[^\\ud800-\\udfff]",SO="(?:\\ud83c[\\udde6-\\uddff]){2}",TO="[\\ud800-\\udbff][\\udc00-\\udfff]",ME="(?:"+om+"|"+im+")?",yk="[\\ufe0e\\ufe0f]?"+ME+("(?:\\u200d(?:"+[xO,SO,TO].join("|")+")[\\ufe0e\\ufe0f]?"+ME+")*"),gk="(?:"+[xO+om+"?",om,SO,TO,vk].join("|")+")",RE=RegExp(im+"(?="+im+")|"+gk+yk,"g"),mk=function(e){for(var i=RE.lastIndex=0;RE.test(e);)++i;return i},bk=function(e){return hk(e)?mk(e):dk(e)},_k=function(e){if(e==null)return 0;if(wa(e))return fk(e)?bk(e):e.length;var i=ss(e);return i=="[object Map]"||i=="[object Set]"?e.size:Em(e).length},Ek=function(e,i,o){var s=Tn(e),n=s||us(e)||Ff(e);if(i=Oa(i),o==null){var c=e&&e.constructor;o=n?s?new c:[]:Do(e)&&If(c)?rO(wh(e)):{}}return(n?bm:Am)(e,function(f,h,v){return i(o,f,h,v)}),o},kE=oi?oi.isConcatSpreadable:void 0,wk=function(e){return Tn(e)||zc(e)||!!(kE&&e&&e[kE])},Mm=function e(i,o,s,n,c){var f=-1,h=i.length;for(s||(s=wk),c||(c=[]);++f<h;){var v=i[f];o>0&&s(v)?o>1?e(v,o-1,s,n,c):Om(c,v):n||(c[c.length]=v)}return c},Ok=function(e,i,o){switch(o.length){case 0:return e.call(i);case 1:return e.call(i,o[0]);case 2:return e.call(i,o[0],o[1]);case 3:return e.call(i,o[0],o[1],o[2])}return e.apply(i,o)},DE=Math.max,AO=function(e,i,o){return i=DE(i===void 0?e.length-1:i,0),function(){for(var s=arguments,n=-1,c=DE(s.length-i,0),f=Array(c);++n<c;)f[n]=s[i+n];n=-1;for(var h=Array(i+1);++n<i;)h[n]=s[n];return h[i]=o(f),Ok(e,this,h)}},xk=nh?function(e,i){return nh(e,"toString",{configurable:!0,enumerable:!1,value:Sm(i),writable:!0})}:ps,Sk=Date.now,PO=function(e){var i=0,o=0;return function(){var s=Sk(),n=16-(s-o);if(o=s,n>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}(xk),Th=function(e,i){return PO(AO(e,i,ps),e+"")},NO=function(e,i,o,s){for(var n=e.length,c=o+(s?1:-1);s?c--:++c<n;)if(i(e[c],c,e))return c;return-1},Tk=function(e){return e!=e},Ak=function(e,i,o){for(var s=o-1,n=e.length;++s<n;)if(e[s]===i)return s;return-1},Pk=function(e,i,o){return i==i?Ak(e,i,o):NO(e,Tk,o)},Nk=function(e,i){return!!(e!=null&&e.length)&&Pk(e,i,0)>-1},jk=function(e,i,o){for(var s=-1,n=e==null?0:e.length;++s<n;)if(o(i,e[s]))return!0;return!1},Mk=function(){},Rk=Bc&&1/Pm(new Bc([,-0]))[1]==1/0?function(e){return new Bc(e)}:Mk,kk=function(e,i,o){var s=-1,n=Nk,c=e.length,f=!0,h=[],v=h;if(o)f=!1,n=jk;else if(c>=200){var m=i?null:Rk(e);if(m)return Pm(m);f=!1,n=cO,v=new sO}else v=i?[]:h;e:for(;++s<c;){var g=e[s],w=i?i(g):g;if(g=o||g!==0?g:0,f&&w==w){for(var x=v.length;x--;)if(v[x]===w)continue e;i&&v.push(w),h.push(g)}else n(v,w,o)||(v!==h&&v.push(w),h.push(g))}return h},jO=function(e){return gi(e)&&wa(e)},Dk=Th(function(e){return kk(Mm(e,1,jO,!0))}),Ck=function(e,i){return Gc(i,function(o){return e[o]})},ih,MO=function(e){return e==null?[]:Ck(e,pu(e))};try{ih={clone:DR,constant:Sm,each:uO,filter:mO,has:bO,isArray:Tn,isEmpty:sk,isFunction:If,isUndefined:_O,keys:pu,map:wO,reduce:OO,size:_k,transform:Ek,union:Dk,values:MO}}catch{}ih||(ih=window._);var Bt=ih,Rm=Lr;function Lr(e){this._isDirected=!Bt.has(e,"directed")||e.directed,this._isMultigraph=!!Bt.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Bt.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Bt.constant(void 0),this._defaultEdgeLabelFn=Bt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function CE(e,i){e[i]?e[i]++:e[i]=1}function IE(e,i){--e[i]||delete e[i]}function Of(e,i,o,s){var n=""+i,c=""+o;if(!e&&n>c){var f=n;n=c,c=f}return n+""+c+""+(Bt.isUndefined(s)?"\0":s)}function Ik(e,i,o,s){var n=""+i,c=""+o;if(!e&&n>c){var f=n;n=c,c=f}var h={v:n,w:c};return s&&(h.name=s),h}function Ig(e,i){return Of(e,i.v,i.w,i.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(e){return this._label=e,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(e){return Bt.isFunction(e)||(e=Bt.constant(e)),this._defaultNodeLabelFn=e,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return Bt.keys(this._nodes)},Lr.prototype.sources=function(){var e=this;return Bt.filter(this.nodes(),function(i){return Bt.isEmpty(e._in[i])})},Lr.prototype.sinks=function(){var e=this;return Bt.filter(this.nodes(),function(i){return Bt.isEmpty(e._out[i])})},Lr.prototype.setNodes=function(e,i){var o=arguments,s=this;return Bt.each(e,function(n){o.length>1?s.setNode(n,i):s.setNode(n)}),this},Lr.prototype.setNode=function(e,i){return Bt.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=i),this):(this._nodes[e]=arguments.length>1?i:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Lr.prototype.node=function(e){return this._nodes[e]},Lr.prototype.hasNode=function(e){return Bt.has(this._nodes,e)},Lr.prototype.removeNode=function(e){var i=this;if(Bt.has(this._nodes,e)){var o=function(s){i.removeEdge(i._edgeObjs[s])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Bt.each(this.children(e),function(s){i.setParent(s)}),delete this._children[e]),Bt.each(Bt.keys(this._in[e]),o),delete this._in[e],delete this._preds[e],Bt.each(Bt.keys(this._out[e]),o),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Lr.prototype.setParent=function(e,i){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Bt.isUndefined(i))i="\0";else{for(var o=i+="";!Bt.isUndefined(o);o=this.parent(o))if(o===e)throw new Error("Setting "+i+" as parent of "+e+" would create a cycle");this.setNode(i)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=i,this._children[i][e]=!0,this},Lr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Lr.prototype.parent=function(e){if(this._isCompound){var i=this._parent[e];if(i!=="\0")return i}},Lr.prototype.children=function(e){if(Bt.isUndefined(e)&&(e="\0"),this._isCompound){var i=this._children[e];if(i)return Bt.keys(i)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Lr.prototype.predecessors=function(e){var i=this._preds[e];if(i)return Bt.keys(i)},Lr.prototype.successors=function(e){var i=this._sucs[e];if(i)return Bt.keys(i)},Lr.prototype.neighbors=function(e){var i=this.predecessors(e);if(i)return Bt.union(i,this.successors(e))},Lr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Lr.prototype.filterNodes=function(e){var i=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});i.setGraph(this.graph());var o=this;Bt.each(this._nodes,function(c,f){e(f)&&i.setNode(f,c)}),Bt.each(this._edgeObjs,function(c){i.hasNode(c.v)&&i.hasNode(c.w)&&i.setEdge(c,o.edge(c))});var s={};function n(c){var f=o.parent(c);return f===void 0||i.hasNode(f)?(s[c]=f,f):f in s?s[f]:n(f)}return this._isCompound&&Bt.each(i.nodes(),function(c){i.setParent(c,n(c))}),i},Lr.prototype.setDefaultEdgeLabel=function(e){return Bt.isFunction(e)||(e=Bt.constant(e)),this._defaultEdgeLabelFn=e,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return Bt.values(this._edgeObjs)},Lr.prototype.setPath=function(e,i){var o=this,s=arguments;return Bt.reduce(e,function(n,c){return s.length>1?o.setEdge(n,c,i):o.setEdge(n,c),c}),this},Lr.prototype.setEdge=function(){var e,i,o,s,n=!1,c=arguments[0];typeof c=="object"&&c!==null&&"v"in c?(e=c.v,i=c.w,o=c.name,arguments.length===2&&(s=arguments[1],n=!0)):(e=c,i=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],n=!0)),e=""+e,i=""+i,Bt.isUndefined(o)||(o=""+o);var f=Of(this._isDirected,e,i,o);if(Bt.has(this._edgeLabels,f))return n&&(this._edgeLabels[f]=s),this;if(!Bt.isUndefined(o)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(i),this._edgeLabels[f]=n?s:this._defaultEdgeLabelFn(e,i,o);var h=Ik(this._isDirected,e,i,o);return e=h.v,i=h.w,Object.freeze(h),this._edgeObjs[f]=h,CE(this._preds[i],e),CE(this._sucs[e],i),this._in[i][f]=h,this._out[e][f]=h,this._edgeCount++,this},Lr.prototype.edge=function(e,i,o){var s=arguments.length===1?Ig(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o);return this._edgeLabels[s]},Lr.prototype.hasEdge=function(e,i,o){var s=arguments.length===1?Ig(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o);return Bt.has(this._edgeLabels,s)},Lr.prototype.removeEdge=function(e,i,o){var s=arguments.length===1?Ig(this._isDirected,arguments[0]):Of(this._isDirected,e,i,o),n=this._edgeObjs[s];return n&&(e=n.v,i=n.w,delete this._edgeLabels[s],delete this._edgeObjs[s],IE(this._preds[i],e),IE(this._sucs[e],i),delete this._in[i][s],delete this._out[e][s],this._edgeCount--),this},Lr.prototype.inEdges=function(e,i){var o=this._in[e];if(o){var s=Bt.values(o);return i?Bt.filter(s,function(n){return n.v===i}):s}},Lr.prototype.outEdges=function(e,i){var o=this._out[e];if(o){var s=Bt.values(o);return i?Bt.filter(s,function(n){return n.w===i}):s}},Lr.prototype.nodeEdges=function(e,i){var o=this.inEdges(e,i);if(o)return o.concat(this.outEdges(e,i))};var LE={Graph:Rm,version:"2.1.8"},Lk={write:function(e){var i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Fk(e),edges:Bk(e)};return Bt.isUndefined(e.graph())||(i.value=Bt.clone(e.graph())),i},read:function(e){var i=new Rm(e.options).setGraph(e.value);return Bt.each(e.nodes,function(o){i.setNode(o.v,o.value),o.parent&&i.setParent(o.v,o.parent)}),Bt.each(e.edges,function(o){i.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),i}};function Fk(e){return Bt.map(e.nodes(),function(i){var o=e.node(i),s=e.parent(i),n={v:i};return Bt.isUndefined(o)||(n.value=o),Bt.isUndefined(s)||(n.parent=s),n})}function Bk(e){return Bt.map(e.edges(),function(i){var o=e.edge(i),s={v:i.v,w:i.w};return Bt.isUndefined(i.name)||(s.name=i.name),Bt.isUndefined(o)||(s.value=o),s})}var Gk=function(e){var i,o={},s=[];function n(c){Bt.has(o,c)||(o[c]=!0,i.push(c),Bt.each(e.successors(c),n),Bt.each(e.predecessors(c),n))}return Bt.each(e.nodes(),function(c){i=[],n(c),i.length&&s.push(i)}),s},RO=ni;function ni(){this._arr=[],this._keyIndices={}}ni.prototype.size=function(){return this._arr.length},ni.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ni.prototype.has=function(e){return Bt.has(this._keyIndices,e)},ni.prototype.priority=function(e){var i=this._keyIndices[e];if(i!==void 0)return this._arr[i].priority},ni.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ni.prototype.add=function(e,i){var o=this._keyIndices;if(e=String(e),!Bt.has(o,e)){var s=this._arr,n=s.length;return o[e]=n,s.push({key:e,priority:i}),this._decrease(n),!0}return!1},ni.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ni.prototype.decrease=function(e,i){var o=this._keyIndices[e];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},ni.prototype._heapify=function(e){var i=this._arr,o=2*e,s=o+1,n=e;o<i.length&&(n=i[o].priority<i[n].priority?o:n,s<i.length&&(n=i[s].priority<i[n].priority?s:n),n!==e&&(this._swap(e,n),this._heapify(n)))},ni.prototype._decrease=function(e){for(var i,o=this._arr,s=o[e].priority;e!==0&&!(o[i=e>>1].priority<s);)this._swap(e,i),e=i},ni.prototype._swap=function(e,i){var o=this._arr,s=this._keyIndices,n=o[e],c=o[i];o[e]=c,o[i]=n,s[c.key]=e,s[n.key]=i};var kO=function(e,i,o,s){return function(n,c,f,h){var v,m,g={},w=new RO,x=function(S){var N=S.v!==v?S.v:S.w,j=g[N],R=f(S),D=m.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+R);D<j.distance&&(j.distance=D,j.predecessor=v,w.decrease(N,D))};for(n.nodes().forEach(function(S){var N=S===c?0:Number.POSITIVE_INFINITY;g[S]={distance:N},w.add(S,N)});w.size()>0&&(v=w.removeMin(),(m=g[v]).distance!==Number.POSITIVE_INFINITY);)h(v).forEach(x);return g}(e,String(i),o||Uk,s||function(n){return e.outEdges(n)})},Uk=Bt.constant(1),zk=function(e,i,o){return Bt.transform(e.nodes(),function(s,n){s[n]=kO(e,n,i,o)},{})},DO=function(e){var i=0,o=[],s={},n=[];function c(f){var h=s[f]={onStack:!0,lowlink:i,index:i++};if(o.push(f),e.successors(f).forEach(function(g){Bt.has(s,g)?s[g].onStack&&(h.lowlink=Math.min(h.lowlink,s[g].index)):(c(g),h.lowlink=Math.min(h.lowlink,s[g].lowlink))}),h.lowlink===h.index){var v,m=[];do v=o.pop(),s[v].onStack=!1,m.push(v);while(f!==v);n.push(m)}}return e.nodes().forEach(function(f){Bt.has(s,f)||c(f)}),n},Hk=function(e){return Bt.filter(DO(e),function(i){return i.length>1||i.length===1&&e.hasEdge(i[0],i[0])})},Xk=function(e,i,o){return function(s,n,c){var f={},h=s.nodes();return h.forEach(function(v){f[v]={},f[v][v]={distance:0},h.forEach(function(m){v!==m&&(f[v][m]={distance:Number.POSITIVE_INFINITY})}),c(v).forEach(function(m){var g=m.v===v?m.w:m.v,w=n(m);f[v][g]={distance:w,predecessor:v}})}),h.forEach(function(v){var m=f[v];h.forEach(function(g){var w=f[g];h.forEach(function(x){var S=w[v],N=m[x],j=w[x],R=S.distance+N.distance;R<j.distance&&(j.distance=R,j.predecessor=N.predecessor)})})}),f}(e,i||Vk,o||function(s){return e.outEdges(s)})},Vk=Bt.constant(1),Lg=CO;function CO(e){var i={},o={},s=[];if(Bt.each(e.sinks(),function n(c){if(Bt.has(o,c))throw new ah;Bt.has(i,c)||(o[c]=!0,i[c]=!0,Bt.each(e.predecessors(c),n),delete o[c],s.push(c))}),Bt.size(i)!==e.nodeCount())throw new ah;return s}function ah(){}CO.CycleException=ah,ah.prototype=new Error;var FE=function(e,i,o){Bt.isArray(i)||(i=[i]);var s=(e.isDirected()?e.successors:e.neighbors).bind(e),n=[],c={};return Bt.each(i,function(f){if(!e.hasNode(f))throw new Error("Graph does not have node: "+f);IO(e,f,o==="post",c,s,n)}),n};function IO(e,i,o,s,n,c){Bt.has(s,i)||(s[i]=!0,o||c.push(i),Bt.each(n(i),function(f){IO(e,f,o,s,n,c)}),o&&c.push(i))}var uh,Wk={Graph:LE.Graph,json:Lk,alg:{components:Gk,dijkstra:kO,dijkstraAll:zk,findCycles:Hk,floydWarshall:Xk,isAcyclic:function(e){try{Lg(e)}catch(i){if(i instanceof Lg.CycleException)return!1;throw i}return!0},postorder:function(e,i){return FE(e,i,"post")},preorder:function(e,i){return FE(e,i,"pre")},prim:function(e,i){var o,s=new Rm,n={},c=new RO;function f(v){var m=v.v===o?v.w:v.v,g=c.priority(m);if(g!==void 0){var w=i(v);w<g&&(n[m]=o,c.decrease(m,w))}}if(e.nodeCount()===0)return s;Bt.each(e.nodes(),function(v){c.add(v,Number.POSITIVE_INFINITY),s.setNode(v)}),c.decrease(e.nodes()[0],0);for(var h=!1;c.size()>0;){if(o=c.removeMin(),Bt.has(n,o))s.setEdge(o,n[o]);else{if(h)throw new Error("Input graph is not connected: "+e);h=!0}e.nodeEdges(o).forEach(f)}return s},tarjan:DO,topsort:Lg},version:LE.version};try{uh=Wk}catch{}uh||(uh=window.graphlib);var Vi=uh,Yk=function(e){return oO(e,5)},Df=function(e,i,o){if(!Do(o))return!1;var s=typeof i;return!!(s=="number"?wa(o)&&bh(i,o.length):s=="string"&&i in o)&&Wc(o[i],e)},LO=Object.prototype,$k=LO.hasOwnProperty,Kk=Th(function(e,i){e=Object(e);var o=-1,s=i.length,n=s>2?i[2]:void 0;for(n&&Df(i[0],i[1],n)&&(s=1);++o<s;)for(var c=i[o],f=ds(c),h=-1,v=f.length;++h<v;){var m=f[h],g=e[m];(g===void 0||Wc(g,LO[m])&&!$k.call(e,m))&&(e[m]=c[m])}return e}),qk=function(e){return function(i,o,s){var n=Object(i);if(!wa(i)){var c=Oa(o);i=pu(i),o=function(h){return c(n[h],h,n)}}var f=e(i,o,s);return f>-1?n[c?i[f]:f]:void 0}},Zk=/^\s+|\s+$/g,Jk=/^[-+]0x[0-9a-f]+$/i,Qk=/^0b[01]+$/i,eD=/^0o[0-7]+$/i,tD=parseInt,rD=function(e){if(typeof e=="number")return e;if(cs(e))return NaN;if(Do(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=Do(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(Zk,"");var o=Qk.test(e);return o||eD.test(e)?tD(e.slice(2),o?2:8):Jk.test(e)?NaN:+e},Wp=function(e){return e?(e=rD(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},nD=function(e){var i=Wp(e),o=i%1;return i==i?o?i-o:i:0},oD=Math.max,iD=qk(function(e,i,o){var s=e==null?0:e.length;if(!s)return-1;var n=o==null?0:nD(o);return n<0&&(n=oD(s+n,0)),NO(e,Oa(i),n)}),FO=function(e){return e!=null&&e.length?Mm(e,1):[]},aD=function(e,i){return e==null?e:Tm(e,iO(i),ds)},uD=function(e){var i=e==null?0:e.length;return i?e[i-1]:void 0},sD=function(e,i){var o={};return i=Oa(i),Am(e,function(s,n,c){gh(o,n,i(s,n,c))}),o},km=function(e,i,o){for(var s=-1,n=e.length;++s<n;){var c=e[s],f=i(c);if(f!=null&&(h===void 0?f==f&&!cs(f):o(f,h)))var h=f,v=c}return v},cD=function(e,i){return e>i},lD=function(e){return e&&e.length?km(e,ps,cD):void 0},am=function(e,i,o){(o!==void 0&&!Wc(e[i],o)||o===void 0&&!(i in e))&&gh(e,i,o)},fD=Function.prototype,dD=Object.prototype,BO=fD.toString,pD=dD.hasOwnProperty,hD=BO.call(Object),vD=function(e){if(!gi(e)||du(e)!="[object Object]")return!1;var i=wh(e);if(i===null)return!0;var o=pD.call(i,"constructor")&&i.constructor;return typeof o=="function"&&o instanceof o&&BO.call(o)==hD},um=function(e,i){if((i!=="constructor"||typeof e[i]!="function")&&i!="__proto__")return e[i]},yD=function(e){return Lf(e,ds(e))},gD=function(e,i,o,s,n,c,f){var h=um(e,o),v=um(i,o),m=f.get(v);if(m)am(e,o,m);else{var g=c?c(h,v,o+"",e,i,f):void 0,w=g===void 0;if(w){var x=Tn(v),S=!x&&us(v),N=!x&&!S&&Ff(v);g=v,x||S||N?Tn(h)?g=h:jO(h)?g=qw(h):S?(w=!1,g=Kw(v,!0)):N?(w=!1,g=tO(v,!0)):g=[]:vD(v)||zc(v)?(g=h,zc(h)?g=yD(h):Do(h)&&!If(h)||(g=nO(v))):w=!1}w&&(f.set(v,g),n(g,v,s,c,f),f.delete(v)),am(e,o,g)}},mD=function e(i,o,s,n,c){i!==o&&Tm(o,function(f,h){if(c||(c=new Fc),Do(f))gD(i,o,h,s,e,n,c);else{var v=n?n(um(i,h),f,h+"",i,o,c):void 0;v===void 0&&(v=f),am(i,h,v)}},ds)},bD=function(e){return Th(function(i,o){var s=-1,n=o.length,c=n>1?o[n-1]:void 0,f=n>2?o[2]:void 0;for(c=e.length>3&&typeof c=="function"?(n--,c):void 0,f&&Df(o[0],o[1],f)&&(c=n<3?void 0:c,n=1),i=Object(i);++s<n;){var h=o[s];h&&e(i,h,s,c)}return i})}(function(e,i,o){mD(e,i,o)}),GO=function(e,i){return e<i},_D=function(e){return e&&e.length?km(e,ps,GO):void 0},ED=function(e,i){return e&&e.length?km(e,Oa(i),GO):void 0},wD=function(){return mi.Date.now()},OD=function(e,i,o,s){if(!Do(e))return e;for(var n=-1,c=(i=xh(i,e)).length,f=c-1,h=e;h!=null&&++n<c;){var v=Bf(i[n]),m=o;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(n!=f){var g=h[v];(m=s?s(g,v,h):void 0)===void 0&&(m=Do(g)?g:bh(i[n+1])?[]:{})}mh(h,v,m),h=h[v]}return e},xD=function(e,i,o){for(var s=-1,n=i.length,c={};++s<n;){var f=i[s],h=Sh(e,f);o(h,f)&&OD(c,xh(f,e),h)}return c},SD=function(e,i){return xD(e,i,function(o,s){return yO(e,s)})},TD=function(e){return PO(AO(e,void 0,FO),e+"")}(function(e,i){return e==null?{}:SD(e,i)}),AD=Math.ceil,PD=Math.max,ND=function(e,i,o,s){for(var n=-1,c=PD(AD((i-e)/(o||1)),0),f=Array(c);c--;)f[s?c:++n]=e,e+=o;return f},jD=function(e){return function(i,o,s){return s&&typeof s!="number"&&Df(i,o,s)&&(o=s=void 0),i=Wp(i),o===void 0?(o=i,i=0):o=Wp(o),s=s===void 0?i<o?1:-1:Wp(s),ND(i,o,s,e)}}(),MD=function(e,i){var o=e.length;for(e.sort(i);o--;)e[o]=e[o].value;return e},RD=function(e,i){if(e!==i){var o=e!==void 0,s=e===null,n=e==e,c=cs(e),f=i!==void 0,h=i===null,v=i==i,m=cs(i);if(!h&&!m&&!c&&e>i||c&&f&&v&&!h&&!m||s&&f&&v||!o&&v||!n)return 1;if(!s&&!c&&!m&&e<i||m&&o&&n&&!s&&!c||h&&o&&n||!f&&n||!v)return-1}return 0},kD=function(e,i,o){for(var s=-1,n=e.criteria,c=i.criteria,f=n.length,h=o.length;++s<f;){var v=RD(n[s],c[s]);if(v)return s>=h?v:v*(o[s]=="desc"?-1:1)}return e.index-i.index},DD=function(e,i,o){i=i.length?Gc(i,function(c){return Tn(c)?function(f){return Sh(f,c.length===1?c[0]:c)}:c}):[ps];var s=-1;i=Gc(i,_h(Oa));var n=EO(e,function(c,f,h){return{criteria:Gc(i,function(v){return v(c)}),index:++s,value:c}});return MD(n,function(c,f){return kD(c,f,o)})},CD=Th(function(e,i){if(e==null)return[];var o=i.length;return o>1&&Df(e,i[0],i[1])?i=[]:o>2&&Df(i[0],i[1],i[2])&&(i=[i[0]]),DD(e,Mm(i,1),[])}),ID=0,LD=function(e){var i=++ID;return hO(e)+i},FD=function(e,i,o){for(var s=-1,n=e.length,c=i.length,f={};++s<n;){var h=s<c?i[s]:void 0;o(f,e[s],h)}return f},sh,BD=function(e,i){return FD(e||[],i||[],mh)};try{sh={cloneDeep:Yk,constant:Sm,defaults:Kk,each:uO,filter:mO,find:iD,flatten:FO,forEach:aO,forIn:aD,has:bO,isUndefined:_O,last:uD,map:wO,mapValues:sD,max:lD,merge:bD,min:_D,minBy:ED,now:wD,pick:TD,range:jD,reduce:OO,sortBy:CD,uniqueId:LD,values:MO,zipObject:BD}}catch{}sh||(sh=window._);var GD=sh;Vi.Graph;GD.constant(1);Vi.Graph;Vi.Graph;Vi.alg.preorder;Vi.alg.postorder;Vi.Graph;Vi.Graph;Vi.Graph;Vi.Graph;Vi.Graph;function Cf(e){return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Cf(e)}function UD(e,i){if(Cf(e)!=="object"||e===null)return e;var o=e[Symbol.toPrimitive];if(o!==void 0){var s=o.call(e,i||"default");if(Cf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function zD(e){var i=UD(e,"string");return Cf(i)==="symbol"?i:String(i)}function Mt(e,i,o){return i=zD(i),i in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o,e}var HD=typeof _f=="object"&&_f&&_f.Object===Object&&_f,UO=HD,XD=UO,VD=typeof self=="object"&&self&&self.Object===Object&&self,WD=XD||VD||Function("return this")(),YD=WD,$D=YD,KD=$D.Symbol,zO=KD,BE=zO;BE&&BE.toStringTag;var GE=zO;GE&&GE.toStringTag;var ch={exports:{}};ch.exports;(function(e,i){var o=UO,s=i&&!i.nodeType&&i,n=s&&!0&&e&&!e.nodeType&&e,c=n&&n.exports===s,f=c&&o.process,h=function(){try{var v=n&&n.require&&n.require("util").types;return v||f&&f.binding&&f.binding("util")}catch{}}();e.exports=h})(ch,ch.exports);var qD=ch.exports,UE=qD;UE&&UE.isTypedArray;var HO={exports:{}},XO={exports:{}};(function(e){function i(o){return e.exports=i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},e.exports.__esModule=!0,e.exports.default=e.exports,i(o)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(XO);var ZD=XO.exports;(function(e){var i=ZD.default;function o(){e.exports=o=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var s={},n=Object.prototype,c=n.hasOwnProperty,f=Object.defineProperty||function(Q,se,he){Q[se]=he.value},h=typeof Symbol=="function"?Symbol:{},v=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",g=h.toStringTag||"@@toStringTag";function w(Q,se,he){return Object.defineProperty(Q,se,{value:he,enumerable:!0,configurable:!0,writable:!0}),Q[se]}try{w({},"")}catch{w=function(he,be,ee){return he[be]=ee}}function x(Q,se,he,be){var ee=se&&se.prototype instanceof j?se:j,ve=Object.create(ee.prototype),Fe=new I(be||[]);return f(ve,"_invoke",{value:Y(Q,he,Fe)}),ve}function S(Q,se,he){try{return{type:"normal",arg:Q.call(se,he)}}catch(be){return{type:"throw",arg:be}}}s.wrap=x;var N={};function j(){}function R(){}function D(){}var V={};w(V,v,function(){return this});var ce=Object.getPrototypeOf,Ee=ce&&ce(ce(pe([])));Ee&&Ee!==n&&c.call(Ee,v)&&(V=Ee);var fe=D.prototype=j.prototype=Object.create(V);function W(Q){["next","throw","return"].forEach(function(se){w(Q,se,function(he){return this._invoke(se,he)})})}function ae(Q,se){function he(ee,ve,Fe,Ze){var ht=S(Q[ee],Q,ve);if(ht.type!=="throw"){var Ft=ht.arg,bt=Ft.value;return bt&&i(bt)=="object"&&c.call(bt,"__await")?se.resolve(bt.__await).then(function(xt){he("next",xt,Fe,Ze)},function(xt){he("throw",xt,Fe,Ze)}):se.resolve(bt).then(function(xt){Ft.value=xt,Fe(Ft)},function(xt){return he("throw",xt,Fe,Ze)})}Ze(ht.arg)}var be;f(this,"_invoke",{value:function(ve,Fe){function Ze(){return new se(function(ht,Ft){he(ve,Fe,ht,Ft)})}return be=be?be.then(Ze,Ze):Ze()}})}function Y(Q,se,he){var be="suspendedStart";return function(ee,ve){if(be==="executing")throw new Error("Generator is already running");if(be==="completed"){if(ee==="throw")throw ve;return De()}for(he.method=ee,he.arg=ve;;){var Fe=he.delegate;if(Fe){var Ze=F(Fe,he);if(Ze){if(Ze===N)continue;return Ze}}if(he.method==="next")he.sent=he._sent=he.arg;else if(he.method==="throw"){if(be==="suspendedStart")throw be="completed",he.arg;he.dispatchException(he.arg)}else he.method==="return"&&he.abrupt("return",he.arg);be="executing";var ht=S(Q,se,he);if(ht.type==="normal"){if(be=he.done?"completed":"suspendedYield",ht.arg===N)continue;return{value:ht.arg,done:he.done}}ht.type==="throw"&&(be="completed",he.method="throw",he.arg=ht.arg)}}}function F(Q,se){var he=se.method,be=Q.iterator[he];if(be===void 0)return se.delegate=null,he==="throw"&&Q.iterator.return&&(se.method="return",se.arg=void 0,F(Q,se),se.method==="throw")||he!=="return"&&(se.method="throw",se.arg=new TypeError("The iterator does not provide a '"+he+"' method")),N;var ee=S(be,Q.iterator,se.arg);if(ee.type==="throw")return se.method="throw",se.arg=ee.arg,se.delegate=null,N;var ve=ee.arg;return ve?ve.done?(se[Q.resultName]=ve.value,se.next=Q.nextLoc,se.method!=="return"&&(se.method="next",se.arg=void 0),se.delegate=null,N):ve:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,N)}function $(Q){var se={tryLoc:Q[0]};1 in Q&&(se.catchLoc=Q[1]),2 in Q&&(se.finallyLoc=Q[2],se.afterLoc=Q[3]),this.tryEntries.push(se)}function K(Q){var se=Q.completion||{};se.type="normal",delete se.arg,Q.completion=se}function I(Q){this.tryEntries=[{tryLoc:"root"}],Q.forEach($,this),this.reset(!0)}function pe(Q){if(Q){var se=Q[v];if(se)return se.call(Q);if(typeof Q.next=="function")return Q;if(!isNaN(Q.length)){var he=-1,be=function ee(){for(;++he<Q.length;)if(c.call(Q,he))return ee.value=Q[he],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return be.next=be}}return{next:De}}function De(){return{value:void 0,done:!0}}return R.prototype=D,f(fe,"constructor",{value:D,configurable:!0}),f(D,"constructor",{value:R,configurable:!0}),R.displayName=w(D,g,"GeneratorFunction"),s.isGeneratorFunction=function(Q){var se=typeof Q=="function"&&Q.constructor;return!!se&&(se===R||(se.displayName||se.name)==="GeneratorFunction")},s.mark=function(Q){return Object.setPrototypeOf?Object.setPrototypeOf(Q,D):(Q.__proto__=D,w(Q,g,"GeneratorFunction")),Q.prototype=Object.create(fe),Q},s.awrap=function(Q){return{__await:Q}},W(ae.prototype),w(ae.prototype,m,function(){return this}),s.AsyncIterator=ae,s.async=function(Q,se,he,be,ee){ee===void 0&&(ee=Promise);var ve=new ae(x(Q,se,he,be),ee);return s.isGeneratorFunction(se)?ve:ve.next().then(function(Fe){return Fe.done?Fe.value:ve.next()})},W(fe),w(fe,g,"Generator"),w(fe,v,function(){return this}),w(fe,"toString",function(){return"[object Generator]"}),s.keys=function(Q){var se=Object(Q),he=[];for(var be in se)he.push(be);return he.reverse(),function ee(){for(;he.length;){var ve=he.pop();if(ve in se)return ee.value=ve,ee.done=!1,ee}return ee.done=!0,ee}},s.values=pe,I.prototype={constructor:I,reset:function(se){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(K),!se)for(var he in this)he.charAt(0)==="t"&&c.call(this,he)&&!isNaN(+he.slice(1))&&(this[he]=void 0)},stop:function(){this.done=!0;var se=this.tryEntries[0].completion;if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var he=this;function be(Ft,bt){return Fe.type="throw",Fe.arg=se,he.next=Ft,bt&&(he.method="next",he.arg=void 0),!!bt}for(var ee=this.tryEntries.length-1;ee>=0;--ee){var ve=this.tryEntries[ee],Fe=ve.completion;if(ve.tryLoc==="root")return be("end");if(ve.tryLoc<=this.prev){var Ze=c.call(ve,"catchLoc"),ht=c.call(ve,"finallyLoc");if(Ze&&ht){if(this.prev<ve.catchLoc)return be(ve.catchLoc,!0);if(this.prev<ve.finallyLoc)return be(ve.finallyLoc)}else if(Ze){if(this.prev<ve.catchLoc)return be(ve.catchLoc,!0)}else{if(!ht)throw new Error("try statement without catch or finally");if(this.prev<ve.finallyLoc)return be(ve.finallyLoc)}}}},abrupt:function(se,he){for(var be=this.tryEntries.length-1;be>=0;--be){var ee=this.tryEntries[be];if(ee.tryLoc<=this.prev&&c.call(ee,"finallyLoc")&&this.prev<ee.finallyLoc){var ve=ee;break}}ve&&(se==="break"||se==="continue")&&ve.tryLoc<=he&&he<=ve.finallyLoc&&(ve=null);var Fe=ve?ve.completion:{};return Fe.type=se,Fe.arg=he,ve?(this.method="next",this.next=ve.finallyLoc,N):this.complete(Fe)},complete:function(se,he){if(se.type==="throw")throw se.arg;return se.type==="break"||se.type==="continue"?this.next=se.arg:se.type==="return"?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):se.type==="normal"&&he&&(this.next=he),N},finish:function(se){for(var he=this.tryEntries.length-1;he>=0;--he){var be=this.tryEntries[he];if(be.finallyLoc===se)return this.complete(be.completion,be.afterLoc),K(be),N}},catch:function(se){for(var he=this.tryEntries.length-1;he>=0;--he){var be=this.tryEntries[he];if(be.tryLoc===se){var ee=be.completion;if(ee.type==="throw"){var ve=ee.arg;K(be)}return ve}}throw new Error("illegal catch attempt")},delegateYield:function(se,he,be){return this.delegate={iterator:pe(se),resultName:he,nextLoc:be},this.method==="next"&&(this.arg=void 0),N}},s}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(HO);var JD=HO.exports,Fg=JD();try{regeneratorRuntime=Fg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Fg:Function("r","regeneratorRuntime = r")(Fg)}var Pt;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Pt||(Pt={}));var zE;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(zE||(zE={}));var HE;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(HE||(HE={}));var XE;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(XE||(XE={}));var VE;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(VE||(VE={}));var QD={exports:{}};(function(e,i){(function(o,s){e.exports=s()})(_f,function(){var o=function(A){return A instanceof Uint8Array||A instanceof Uint16Array||A instanceof Uint32Array||A instanceof Int8Array||A instanceof Int16Array||A instanceof Int32Array||A instanceof Float32Array||A instanceof Float64Array||A instanceof Uint8ClampedArray},s=function(A,U){for(var J=Object.keys(U),Ie=0;Ie<J.length;++Ie)A[J[Ie]]=U[J[Ie]];return A},n=`
`;function c(A){return typeof atob<"u"?atob(A):"base64:"+A}function f(A){var U=new Error("(regl) "+A);throw console.error(U),U}function h(A,U){A||f(U)}function v(A){return A?": "+A:""}function m(A,U,J){A in U||f("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(U).join())}function g(A,U){o(A)||f("invalid parameter type"+v(U)+". must be a typed array")}function w(A,U){switch(U){case"number":return typeof A=="number";case"object":return typeof A=="object";case"string":return typeof A=="string";case"boolean":return typeof A=="boolean";case"function":return typeof A=="function";case"undefined":return typeof A>"u";case"symbol":return typeof A=="symbol"}}function x(A,U,J){w(A,U)||f("invalid parameter type"+v(J)+". expected "+U+", got "+typeof A)}function S(A,U){A>=0&&(A|0)===A||f("invalid parameter type, ("+A+")"+v(U)+". must be a nonnegative integer")}function N(A,U,J){U.indexOf(A)<0&&f("invalid value"+v(J)+". must be one of: "+U)}var j=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(A){Object.keys(A).forEach(function(U){j.indexOf(U)<0&&f('invalid regl constructor argument "'+U+'". must be one of '+j)})}function D(A,U){for(A=A+"";A.length<U;)A=" "+A;return A}function V(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ce(A,U){this.number=A,this.line=U,this.errors=[]}function Ee(A,U,J){this.file=A,this.line=U,this.message=J}function fe(){var A=new Error,U=(A.stack||A).toString(),J=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(U);if(J)return J[1];var Ie=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(U);return Ie?Ie[1]:"unknown"}function W(){var A=new Error,U=(A.stack||A).toString(),J=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(U);if(J)return J[1];var Ie=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(U);return Ie?Ie[1]:"unknown"}function ae(A,U){var J=A.split(`
`),Ie=1,Ve=0,Ce={unknown:new V,0:new V};Ce.unknown.name=Ce[0].name=U||fe(),Ce.unknown.lines.push(new ce(0,""));for(var Ge=0;Ge<J.length;++Ge){var ot=J[Ge],at=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(ot);if(at)switch(at[1]){case"line":var ft=/(\d+)(\s+\d+)?/.exec(at[2]);ft&&(Ie=ft[1]|0,ft[2]&&(Ve=ft[2]|0,Ve in Ce||(Ce[Ve]=new V)));break;case"define":var ut=/SHADER_NAME(_B64)?\s+(.*)$/.exec(at[2]);ut&&(Ce[Ve].name=ut[1]?c(ut[2]):ut[2]);break}Ce[Ve].lines.push(new ce(Ie++,ot))}return Object.keys(Ce).forEach(function(pt){var _t=Ce[pt];_t.lines.forEach(function(it){_t.index[it.number]=it})}),Ce}function Y(A){var U=[];return A.split(`
`).forEach(function(J){if(!(J.length<5)){var Ie=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(J);Ie?U.push(new Ee(Ie[1]|0,Ie[2]|0,Ie[3].trim())):J.length>0&&U.push(new Ee("unknown",0,J))}}),U}function F(A,U){U.forEach(function(J){var Ie=A[J.file];if(Ie){var Ve=Ie.index[J.line];if(Ve){Ve.errors.push(J),Ie.hasErrors=!0;return}}A.unknown.hasErrors=!0,A.unknown.lines[0].errors.push(J)})}function $(A,U,J,Ie,Ve){if(!A.getShaderParameter(U,A.COMPILE_STATUS)){var Ce=A.getShaderInfoLog(U),Ge=Ie===A.FRAGMENT_SHADER?"fragment":"vertex";he(J,"string",Ge+" shader source must be a string",Ve);var ot=ae(J,Ve),at=Y(Ce);F(ot,at),Object.keys(ot).forEach(function(ft){var ut=ot[ft];if(!ut.hasErrors)return;var pt=[""],_t=[""];function it(dt,Se){pt.push(dt),_t.push(Se||"")}it("file number "+ft+": "+ut.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ut.lines.forEach(function(dt){if(dt.errors.length>0){it(D(dt.number,4)+"|  ","background-color:yellow; font-weight:bold"),it(dt.line+n,"color:red; background-color:yellow; font-weight:bold");var Se=0;dt.errors.forEach(function(Ue){var st=Ue.message,St=/^\s*'(.*)'\s*:\s*(.*)$/.exec(st);if(St){var Je=St[1];switch(st=St[2],Je){case"assign":Je="=";break}Se=Math.max(dt.line.indexOf(Je,Se),0)}else Se=0;it(D("| ",6)),it(D("^^^",Se+3)+n,"font-weight:bold"),it(D("| ",6)),it(st+n,"font-weight:bold")}),it(D("| ",6)+n)}else it(D(dt.number,4)+"|  "),it(dt.line+n,"color:red")}),typeof document<"u"&&!window.chrome?(_t[0]=pt.join("%c"),console.log.apply(console,_t)):console.log(pt.join(""))}),h.raise("Error compiling "+Ge+" shader, "+ot[0].name)}}function K(A,U,J,Ie,Ve){if(!A.getProgramParameter(U,A.LINK_STATUS)){var Ce=A.getProgramInfoLog(U),Ge=ae(J,Ve),ot=ae(Ie,Ve),at='Error linking program with vertex shader, "'+ot[0].name+'", and fragment shader "'+Ge[0].name+'"';typeof document<"u"?console.log("%c"+at+n+"%c"+Ce,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(at+n+Ce),h.raise(at)}}function I(A){A._commandRef=fe()}function pe(A,U,J,Ie){I(A);function Ve(at){return at?Ie.id(at):0}A._fragId=Ve(A.static.frag),A._vertId=Ve(A.static.vert);function Ce(at,ft){Object.keys(ft).forEach(function(ut){at[Ie.id(ut)]=!0})}var Ge=A._uniformSet={};Ce(Ge,U.static),Ce(Ge,U.dynamic);var ot=A._attributeSet={};Ce(ot,J.static),Ce(ot,J.dynamic),A._hasCount="count"in A.static||"count"in A.dynamic||"elements"in A.static||"elements"in A.dynamic}function De(A,U){var J=W();f(A+" in command "+(U||fe())+(J==="unknown"?"":" called from "+J))}function Q(A,U,J){A||De(U,J||fe())}function se(A,U,J,Ie){A in U||De("unknown parameter ("+A+")"+v(J)+". possible values: "+Object.keys(U).join(),Ie||fe())}function he(A,U,J,Ie){w(A,U)||De("invalid parameter type"+v(J)+". expected "+U+", got "+typeof A,Ie||fe())}function be(A){A()}function ee(A,U,J){A.texture?N(A.texture._texture.internalformat,U,"unsupported texture format for attachment"):N(A.renderbuffer._renderbuffer.format,J,"unsupported renderbuffer format for attachment")}var ve=33071,Fe=9728,Ze=9984,ht=9985,Ft=9986,bt=9987,xt=5120,tr=5121,we=5122,ne=5123,me=5124,qe=5125,gt=5126,et=32819,kt=32820,zt=33635,Zt=34042,Gt=36193,ze={};ze[xt]=ze[tr]=1,ze[we]=ze[ne]=ze[Gt]=ze[zt]=ze[et]=ze[kt]=2,ze[me]=ze[qe]=ze[gt]=ze[Zt]=4;function Yt(A,U){return A===kt||A===et||A===zt?2:A===Zt?4:ze[A]*U}function xe(A){return!(A&A-1)&&!!A}function Ht(A,U,J){var Ie,Ve=U.width,Ce=U.height,Ge=U.channels;h(Ve>0&&Ve<=J.maxTextureSize&&Ce>0&&Ce<=J.maxTextureSize,"invalid texture shape"),(A.wrapS!==ve||A.wrapT!==ve)&&h(xe(Ve)&&xe(Ce),"incompatible wrap mode for texture, both width and height must be power of 2"),U.mipmask===1?Ve!==1&&Ce!==1&&h(A.minFilter!==Ze&&A.minFilter!==Ft&&A.minFilter!==ht&&A.minFilter!==bt,"min filter requires mipmap"):(h(xe(Ve)&&xe(Ce),"texture must be a square power of 2 to support mipmapping"),h(U.mipmask===(Ve<<1)-1,"missing or incomplete mipmap data")),U.type===gt&&(J.extensions.indexOf("oes_texture_float_linear")<0&&h(A.minFilter===Fe&&A.magFilter===Fe,"filter not supported, must enable oes_texture_float_linear"),h(!A.genMipmaps,"mipmap generation not supported with float textures"));var ot=U.images;for(Ie=0;Ie<16;++Ie)if(ot[Ie]){var at=Ve>>Ie,ft=Ce>>Ie;h(U.mipmask&1<<Ie,"missing mipmap data");var ut=ot[Ie];if(h(ut.width===at&&ut.height===ft,"invalid shape for mip images"),h(ut.format===U.format&&ut.internalformat===U.internalformat&&ut.type===U.type,"incompatible type for mip image"),!ut.compressed)if(ut.data){var pt=Math.ceil(Yt(ut.type,Ge)*at/ut.unpackAlignment)*ut.unpackAlignment;h(ut.data.byteLength===pt*ft,"invalid data for image, buffer size is inconsistent with image format")}else ut.element||ut.copy}else A.genMipmaps||h((U.mipmask&1<<Ie)===0,"extra mipmap data");U.compressed&&h(!A.genMipmaps,"mipmap generation for compressed images not supported")}function yr(A,U,J,Ie){var Ve=A.width,Ce=A.height,Ge=A.channels;h(Ve>0&&Ve<=Ie.maxTextureSize&&Ce>0&&Ce<=Ie.maxTextureSize,"invalid texture shape"),h(Ve===Ce,"cube map must be square"),h(U.wrapS===ve&&U.wrapT===ve,"wrap mode not supported by cube map");for(var ot=0;ot<J.length;++ot){var at=J[ot];h(at.width===Ve&&at.height===Ce,"inconsistent cube map face shape"),U.genMipmaps&&(h(!at.compressed,"can not generate mipmap for compressed textures"),h(at.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ft=at.images,ut=0;ut<16;++ut){var pt=ft[ut];if(pt){var _t=Ve>>ut,it=Ce>>ut;h(at.mipmask&1<<ut,"missing mipmap data"),h(pt.width===_t&&pt.height===it,"invalid shape for mip images"),h(pt.format===A.format&&pt.internalformat===A.internalformat&&pt.type===A.type,"incompatible type for mip image"),pt.compressed||(pt.data?h(pt.data.byteLength===_t*it*Math.max(Yt(pt.type,Ge),pt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):pt.element||pt.copy)}}}}var G=s(h,{optional:be,raise:f,commandRaise:De,command:Q,parameter:m,commandParameter:se,constructor:R,type:x,commandType:he,isTypedArray:g,nni:S,oneOf:N,shaderError:$,linkError:K,callSite:W,saveCommandRef:I,saveDrawInfo:pe,framebufferFormat:ee,guessCommand:fe,texture2D:Ht,textureCube:yr}),pr=0,Dr=0,$r=5,Zr=6;function sr(A,U){this.id=pr++,this.type=A,this.data=U}function un(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function te(A){if(A.length===0)return[];var U=A.charAt(0),J=A.charAt(A.length-1);if(A.length>1&&U===J&&(U==='"'||U==="'"))return['"'+un(A.substr(1,A.length-2))+'"'];var Ie=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(A);if(Ie)return te(A.substr(0,Ie.index)).concat(te(Ie[1])).concat(te(A.substr(Ie.index+Ie[0].length)));var Ve=A.split(".");if(Ve.length===1)return['"'+un(A)+'"'];for(var Ce=[],Ge=0;Ge<Ve.length;++Ge)Ce=Ce.concat(te(Ve[Ge]));return Ce}function Ne(A){return"["+te(A).join("][")+"]"}function de(A,U){return new sr(A,Ne(U+""))}function Be(A){return typeof A=="function"&&!A._reglType||A instanceof sr}function Nt(A,U){if(typeof A=="function")return new sr(Dr,A);if(typeof A=="number"||typeof A=="boolean")return new sr($r,A);if(Array.isArray(A))return new sr(Zr,A.map((J,Ie)=>Nt(J,U+"["+Ie+"]")));if(A instanceof sr)return A;G(!1,"invalid option type in uniform "+U)}var wt={DynamicVariable:sr,define:de,isDynamic:Be,unbox:Nt,accessor:Ne},Kt={next:typeof requestAnimationFrame=="function"?function(A){return requestAnimationFrame(A)}:function(A){return setTimeout(A,16)},cancel:typeof cancelAnimationFrame=="function"?function(A){return cancelAnimationFrame(A)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function wn(){var A={"":0},U=[""];return{id:function(J){var Ie=A[J];return Ie||(Ie=A[J]=U.length,U.push(J),Ie)},str:function(J){return U[J]}}}function In(A,U,J){var Ie=document.createElement("canvas");s(Ie.style,{border:0,margin:0,padding:0,top:0,left:0}),A.appendChild(Ie),A===document.body&&(Ie.style.position="absolute",s(A.style,{margin:0,padding:0}));function Ve(){var ot=window.innerWidth,at=window.innerHeight;if(A!==document.body){var ft=A.getBoundingClientRect();ot=ft.right-ft.left,at=ft.bottom-ft.top}Ie.width=J*ot,Ie.height=J*at,s(Ie.style,{width:ot+"px",height:at+"px"})}var Ce;A!==document.body&&typeof ResizeObserver=="function"?(Ce=new ResizeObserver(function(){setTimeout(Ve)}),Ce.observe(A)):window.addEventListener("resize",Ve,!1);function Ge(){Ce?Ce.disconnect():window.removeEventListener("resize",Ve),A.removeChild(Ie)}return Ve(),{canvas:Ie,onDestroy:Ge}}function dn(A,U){function J(Ie){try{return A.getContext(Ie,U)}catch{return null}}return J("webgl")||J("experimental-webgl")||J("webgl-experimental")}function bn(A){return typeof A.nodeName=="string"&&typeof A.appendChild=="function"&&typeof A.getBoundingClientRect=="function"}function Xt(A){return typeof A.drawArrays=="function"||typeof A.drawElements=="function"}function or(A){return typeof A=="string"?A.split():(G(Array.isArray(A),"invalid extension array"),A)}function dr(A){return typeof A=="string"?(G(typeof document<"u","not supported outside of DOM"),document.querySelector(A)):A}function gr(A){var U=A||{},J,Ie,Ve,Ce,Ge={},ot=[],at=[],ft=typeof window>"u"?1:window.devicePixelRatio,ut=!1,pt=function(dt){dt&&G.raise(dt)},_t=function(){};if(typeof U=="string"?(G(typeof document<"u","selector queries only supported in DOM enviroments"),J=document.querySelector(U),G(J,"invalid query string for element")):typeof U=="object"?bn(U)?J=U:Xt(U)?(Ce=U,Ve=Ce.canvas):(G.constructor(U),"gl"in U?Ce=U.gl:"canvas"in U?Ve=dr(U.canvas):"container"in U&&(Ie=dr(U.container)),"attributes"in U&&(Ge=U.attributes,G.type(Ge,"object","invalid context attributes")),"extensions"in U&&(ot=or(U.extensions)),"optionalExtensions"in U&&(at=or(U.optionalExtensions)),"onDone"in U&&(G.type(U.onDone,"function","invalid or missing onDone callback"),pt=U.onDone),"profile"in U&&(ut=!!U.profile),"pixelRatio"in U&&(ft=+U.pixelRatio,G(ft>0,"invalid pixel ratio"))):G.raise("invalid arguments to regl"),J&&(J.nodeName.toLowerCase()==="canvas"?Ve=J:Ie=J),!Ce){if(!Ve){G(typeof document<"u","must manually specify webgl context outside of DOM environments");var it=In(Ie||document.body,pt,ft);if(!it)return null;Ve=it.canvas,_t=it.onDestroy}Ge.premultipliedAlpha===void 0&&(Ge.premultipliedAlpha=!0),Ce=dn(Ve,Ge)}return Ce?{gl:Ce,canvas:Ve,container:Ie,extensions:ot,optionalExtensions:at,pixelRatio:ft,profile:ut,onDone:pt,onDestroy:_t}:(_t(),pt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(A,U){var J={};function Ie(Ge){G.type(Ge,"string","extension name must be string");var ot=Ge.toLowerCase(),at;try{at=J[ot]=A.getExtension(ot)}catch{}return!!at}for(var Ve=0;Ve<U.extensions.length;++Ve){var Ce=U.extensions[Ve];if(!Ie(Ce))return U.onDestroy(),U.onDone('"'+Ce+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return U.optionalExtensions.forEach(Ie),{extensions:J,restore:function(){Object.keys(J).forEach(function(Ge){if(J[Ge]&&!Ie(Ge))throw new Error("(regl): error restoring extension "+Ge)})}}}function Cr(A,U){for(var J=Array(A),Ie=0;Ie<A;++Ie)J[Ie]=U(Ie);return J}var ii=5120,Go=5121,Uo=5122,Wi=5123,Yc=5124,hu=5125,So=5126;function hs(A){for(var U=16;U<=1<<28;U*=16)if(A<=U)return U;return 0}function qt(A){var U,J;return U=(A>65535)<<4,A>>>=U,J=(A>255)<<3,A>>>=J,U|=J,J=(A>15)<<2,A>>>=J,U|=J,J=(A>3)<<1,A>>>=J,U|=J,U|A>>1}function vs(){var A=Cr(8,function(){return[]});function U(Ce){var Ge=hs(Ce),ot=A[qt(Ge)>>2];return ot.length>0?ot.pop():new ArrayBuffer(Ge)}function J(Ce){A[qt(Ce.byteLength)>>2].push(Ce)}function Ie(Ce,Ge){var ot=null;switch(Ce){case ii:ot=new Int8Array(U(Ge),0,Ge);break;case Go:ot=new Uint8Array(U(Ge),0,Ge);break;case Uo:ot=new Int16Array(U(2*Ge),0,Ge);break;case Wi:ot=new Uint16Array(U(2*Ge),0,Ge);break;case Yc:ot=new Int32Array(U(4*Ge),0,Ge);break;case hu:ot=new Uint32Array(U(4*Ge),0,Ge);break;case So:ot=new Float32Array(U(4*Ge),0,Ge);break;default:return null}return ot.length!==Ge?ot.subarray(0,Ge):ot}function Ve(Ce){J(Ce.buffer)}return{alloc:U,free:J,allocType:Ie,freeType:Ve}}var tn=vs();tn.zero=vs();var ys=3408,lo=3410,fo=3411,gs=3412,zo=3413,bi=3414,Co=3415,vu=33901,ms=33902,$c=3379,xa=3386,Kc=34921,bs=36347,qc=36348,ai=35661,_s=35660,Ho=34930,Zc=36349,Sa=34076,yu=34024,gu=7936,Jc=7937,Es=7938,_i=35724,Ei=34047,ws=36063,wi=34852,po=3553,mu=34067,Os=34069,Yi=33984,Oi=6408,bu=5126,_u=5121,Ta=36160,$i=36053,xs=36064,Qc=16384,Ss=function(A,U){var J=1;U.ext_texture_filter_anisotropic&&(J=A.getParameter(Ei));var Ie=1,Ve=1;U.webgl_draw_buffers&&(Ie=A.getParameter(wi),Ve=A.getParameter(ws));var Ce=!!U.oes_texture_float;if(Ce){var Ge=A.createTexture();A.bindTexture(po,Ge),A.texImage2D(po,0,Oi,1,1,0,Oi,bu,null);var ot=A.createFramebuffer();if(A.bindFramebuffer(Ta,ot),A.framebufferTexture2D(Ta,xs,po,Ge,0),A.bindTexture(po,null),A.checkFramebufferStatus(Ta)!==$i)Ce=!1;else{A.viewport(0,0,1,1),A.clearColor(1,0,0,1),A.clear(Qc);var at=tn.allocType(bu,4);A.readPixels(0,0,1,1,Oi,bu,at),A.getError()?Ce=!1:(A.deleteFramebuffer(ot),A.deleteTexture(Ge),Ce=at[0]===1),tn.freeType(at)}}var ft=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ut=!0;if(!ft){var pt=A.createTexture(),_t=tn.allocType(_u,36);A.activeTexture(Yi),A.bindTexture(mu,pt),A.texImage2D(Os,0,Oi,3,3,0,Oi,_u,_t),tn.freeType(_t),A.bindTexture(mu,null),A.deleteTexture(pt),ut=!A.getError()}return{colorBits:[A.getParameter(lo),A.getParameter(fo),A.getParameter(gs),A.getParameter(zo)],depthBits:A.getParameter(bi),stencilBits:A.getParameter(Co),subpixelBits:A.getParameter(ys),extensions:Object.keys(U).filter(function(it){return!!U[it]}),maxAnisotropic:J,maxDrawbuffers:Ie,maxColorAttachments:Ve,pointSizeDims:A.getParameter(vu),lineWidthDims:A.getParameter(ms),maxViewportDims:A.getParameter(xa),maxCombinedTextureUnits:A.getParameter(ai),maxCubeMapSize:A.getParameter(Sa),maxRenderbufferSize:A.getParameter(yu),maxTextureUnits:A.getParameter(Ho),maxTextureSize:A.getParameter($c),maxAttributes:A.getParameter(Kc),maxVertexUniforms:A.getParameter(bs),maxVertexTextureUnits:A.getParameter(_s),maxVaryingVectors:A.getParameter(qc),maxFragmentUniforms:A.getParameter(Zc),glsl:A.getParameter(_i),renderer:A.getParameter(Jc),vendor:A.getParameter(gu),version:A.getParameter(Es),readFloat:Ce,npotTextureCube:ut}};function Yn(A){return!!A&&typeof A=="object"&&Array.isArray(A.shape)&&Array.isArray(A.stride)&&typeof A.offset=="number"&&A.shape.length===A.stride.length&&(Array.isArray(A.data)||o(A.data))}var An=function(A){return Object.keys(A).map(function(U){return A[U]})},ho={shape:ui,flatten:el};function Gn(A,U,J){for(var Ie=0;Ie<U;++Ie)J[Ie]=A[Ie]}function Ts(A,U,J,Ie){for(var Ve=0,Ce=0;Ce<U;++Ce)for(var Ge=A[Ce],ot=0;ot<J;++ot)Ie[Ve++]=Ge[ot]}function Eu(A,U,J,Ie,Ve,Ce){for(var Ge=Ce,ot=0;ot<U;++ot)for(var at=A[ot],ft=0;ft<J;++ft)for(var ut=at[ft],pt=0;pt<Ie;++pt)Ve[Ge++]=ut[pt]}function wu(A,U,J,Ie,Ve){for(var Ce=1,Ge=J+1;Ge<U.length;++Ge)Ce*=U[Ge];var ot=U[J];if(U.length-J===4){var at=U[J+1],ft=U[J+2],ut=U[J+3];for(Ge=0;Ge<ot;++Ge)Eu(A[Ge],at,ft,ut,Ie,Ve),Ve+=Ce}else for(Ge=0;Ge<ot;++Ge)wu(A[Ge],U,J+1,Ie,Ve),Ve+=Ce}function el(A,U,J,Ie){var Ve=1;if(U.length)for(var Ce=0;Ce<U.length;++Ce)Ve*=U[Ce];else Ve=0;var Ge=Ie||tn.allocType(J,Ve);switch(U.length){case 0:break;case 1:Gn(A,U[0],Ge);break;case 2:Ts(A,U[0],U[1],Ge);break;case 3:Eu(A,U[0],U[1],U[2],Ge,0);break;default:wu(A,U,0,Ge,0)}return Ge}function ui(A){for(var U=[],J=A;J.length;J=J[0])U.push(J.length);return U}var ro={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},tl=5120,To=5122,vo=5124,As=5121,Ps=5123,rl=5125,Aa=5126,Xo=5126,yo={int8:tl,int16:To,int32:vo,uint8:As,uint16:Ps,uint32:rl,float:Aa,float32:Xo},nl=35048,$n=35040,Ao={dynamic:nl,stream:$n,static:35044},Rr=ho.flatten,no=ho.shape,Vo=35044,Ln=35040,Pa=5121,Ki=5126,Io=[];Io[5120]=1,Io[5122]=2,Io[5124]=4,Io[5121]=1,Io[5123]=2,Io[5125]=4,Io[5126]=4;function Kn(A){return ro[Object.prototype.toString.call(A)]|0}function Ou(A,U){for(var J=0;J<U.length;++J)A[J]=U[J]}function qi(A,U,J,Ie,Ve,Ce,Ge){for(var ot=0,at=0;at<J;++at)for(var ft=0;ft<Ie;++ft)A[ot++]=U[Ve*at+Ce*ft+Ge]}function Po(A,U,J,Ie){var Ve=0,Ce={};function Ge(Se){this.id=Ve++,this.buffer=A.createBuffer(),this.type=Se,this.usage=Vo,this.byteLength=0,this.dimension=1,this.dtype=Pa,this.persistentData=null,J.profile&&(this.stats={size:0})}Ge.prototype.bind=function(){A.bindBuffer(this.type,this.buffer)},Ge.prototype.destroy=function(){_t(this)};var ot=[];function at(Se,Ue){var st=ot.pop();return st||(st=new Ge(Se)),st.bind(),pt(st,Ue,Ln,0,1,!1),st}function ft(Se){ot.push(Se)}function ut(Se,Ue,st){Se.byteLength=Ue.byteLength,A.bufferData(Se.type,Ue,st)}function pt(Se,Ue,st,St,Je,At){var tt;if(Se.usage=st,Array.isArray(Ue)){if(Se.dtype=St||Ki,Ue.length>0){var vt;if(Array.isArray(Ue[0])){tt=no(Ue);for(var rt=1,yt=1;yt<tt.length;++yt)rt*=tt[yt];Se.dimension=rt,vt=Rr(Ue,tt,Se.dtype),ut(Se,vt,st),At?Se.persistentData=vt:tn.freeType(vt)}else if(typeof Ue[0]=="number"){Se.dimension=Je;var $t=tn.allocType(Se.dtype,Ue.length);Ou($t,Ue),ut(Se,$t,st),At?Se.persistentData=$t:tn.freeType($t)}else o(Ue[0])?(Se.dimension=Ue[0].length,Se.dtype=St||Kn(Ue[0])||Ki,vt=Rr(Ue,[Ue.length,Ue[0].length],Se.dtype),ut(Se,vt,st),At?Se.persistentData=vt:tn.freeType(vt)):G.raise("invalid buffer data")}}else if(o(Ue))Se.dtype=St||Kn(Ue),Se.dimension=Je,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue.buffer)));else if(Yn(Ue)){tt=Ue.shape;var rr=Ue.stride,Et=Ue.offset,Qe=0,$e=0,nr=0,Te=0;tt.length===1?(Qe=tt[0],$e=1,nr=rr[0],Te=0):tt.length===2?(Qe=tt[0],$e=tt[1],nr=rr[0],Te=rr[1]):G.raise("invalid shape"),Se.dtype=St||Kn(Ue.data)||Ki,Se.dimension=$e;var Lt=tn.allocType(Se.dtype,Qe*$e);qi(Lt,Ue.data,Qe,$e,nr,Te,Et),ut(Se,Lt,st),At?Se.persistentData=Lt:tn.freeType(Lt)}else Ue instanceof ArrayBuffer?(Se.dtype=Pa,Se.dimension=Je,ut(Se,Ue,st),At&&(Se.persistentData=new Uint8Array(new Uint8Array(Ue)))):G.raise("invalid buffer data")}function _t(Se){U.bufferCount--,Ie(Se);var Ue=Se.buffer;G(Ue,"buffer must not be deleted already"),A.deleteBuffer(Ue),Se.buffer=null,delete Ce[Se.id]}function it(Se,Ue,st,St){U.bufferCount++;var Je=new Ge(Ue);Ce[Je.id]=Je;function At(rt){var yt=Vo,$t=null,rr=0,Et=0,Qe=1;return Array.isArray(rt)||o(rt)||Yn(rt)||rt instanceof ArrayBuffer?$t=rt:typeof rt=="number"?rr=rt|0:rt&&(G.type(rt,"object","buffer arguments must be an object, a number or an array"),"data"in rt&&(G($t===null||Array.isArray($t)||o($t)||Yn($t),"invalid data for buffer"),$t=rt.data),"usage"in rt&&(G.parameter(rt.usage,Ao,"invalid buffer usage"),yt=Ao[rt.usage]),"type"in rt&&(G.parameter(rt.type,yo,"invalid buffer type"),Et=yo[rt.type]),"dimension"in rt&&(G.type(rt.dimension,"number","invalid dimension"),Qe=rt.dimension|0),"length"in rt&&(G.nni(rr,"buffer length must be a nonnegative integer"),rr=rt.length|0)),Je.bind(),$t?pt(Je,$t,yt,Et,Qe,St):(rr&&A.bufferData(Je.type,rr,yt),Je.dtype=Et||Pa,Je.usage=yt,Je.dimension=Qe,Je.byteLength=rr),J.profile&&(Je.stats.size=Je.byteLength*Io[Je.dtype]),At}function tt(rt,yt){G(yt+rt.byteLength<=Je.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+rt.byteLength+" starting from offset "+yt+" to a buffer of size "+Je.byteLength),A.bufferSubData(Je.type,yt,rt)}function vt(rt,yt){var $t=(yt||0)|0,rr;if(Je.bind(),o(rt)||rt instanceof ArrayBuffer)tt(rt,$t);else if(Array.isArray(rt)){if(rt.length>0)if(typeof rt[0]=="number"){var Et=tn.allocType(Je.dtype,rt.length);Ou(Et,rt),tt(Et,$t),tn.freeType(Et)}else if(Array.isArray(rt[0])||o(rt[0])){rr=no(rt);var Qe=Rr(rt,rr,Je.dtype);tt(Qe,$t),tn.freeType(Qe)}else G.raise("invalid buffer data")}else if(Yn(rt)){rr=rt.shape;var $e=rt.stride,nr=0,Te=0,Lt=0,br=0;rr.length===1?(nr=rr[0],Te=1,Lt=$e[0],br=0):rr.length===2?(nr=rr[0],Te=rr[1],Lt=$e[0],br=$e[1]):G.raise("invalid shape");var ur=Array.isArray(rt.data)?Je.dtype:Kn(rt.data),mr=tn.allocType(ur,nr*Te);qi(mr,rt.data,nr,Te,Lt,br,rt.offset),tt(mr,$t),tn.freeType(mr)}else G.raise("invalid data for buffer subdata");return At}return st||At(Se),At._reglType="buffer",At._buffer=Je,At.subdata=vt,J.profile&&(At.stats=Je.stats),At.destroy=function(){_t(Je)},At}function dt(){An(Ce).forEach(function(Se){Se.buffer=A.createBuffer(),A.bindBuffer(Se.type,Se.buffer),A.bufferData(Se.type,Se.persistentData||Se.byteLength,Se.usage)})}return J.profile&&(U.getTotalBufferSize=function(){var Se=0;return Object.keys(Ce).forEach(function(Ue){Se+=Ce[Ue].stats.size}),Se}),{create:it,createStream:at,destroyStream:ft,clear:function(){An(Ce).forEach(_t),ot.forEach(_t)},getBuffer:function(Se){return Se&&Se._buffer instanceof Ge?Se._buffer:null},restore:dt,_initBuffer:pt}}var Ns=0,ol=0,xu=1,_n=1,xi=4,Na=4,Pn={points:Ns,point:ol,lines:xu,line:_n,triangles:xi,triangle:Na,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},js=0,Zi=1,Wo=4,ja=5120,Lo=5121,Su=5122,Nn=5123,oo=5124,io=5125,Ji=34963,Tu=35040,Au=35044;function Ms(A,U,J,Ie){var Ve={},Ce=0,Ge={uint8:Lo,uint16:Nn};U.oes_element_index_uint&&(Ge.uint32=io);function ot(dt){this.id=Ce++,Ve[this.id]=this,this.buffer=dt,this.primType=Wo,this.vertCount=0,this.type=0}ot.prototype.bind=function(){this.buffer.bind()};var at=[];function ft(dt){var Se=at.pop();return Se||(Se=new ot(J.create(null,Ji,!0,!1)._buffer)),pt(Se,dt,Tu,-1,-1,0,0),Se}function ut(dt){at.push(dt)}function pt(dt,Se,Ue,st,St,Je,At){dt.buffer.bind();var tt;if(Se){var vt=At;!At&&(!o(Se)||Yn(Se)&&!o(Se.data))&&(vt=U.oes_element_index_uint?io:Nn),J._initBuffer(dt.buffer,Se,Ue,vt,3)}else A.bufferData(Ji,Je,Ue),dt.buffer.dtype=tt||Lo,dt.buffer.usage=Ue,dt.buffer.dimension=3,dt.buffer.byteLength=Je;if(tt=At,!At){switch(dt.buffer.dtype){case Lo:case ja:tt=Lo;break;case Nn:case Su:tt=Nn;break;case io:case oo:tt=io;break;default:G.raise("unsupported type for element array")}dt.buffer.dtype=tt}dt.type=tt,G(tt!==io||!!U.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var rt=St;rt<0&&(rt=dt.buffer.byteLength,tt===Nn?rt>>=1:tt===io&&(rt>>=2)),dt.vertCount=rt;var yt=st;if(st<0){yt=Wo;var $t=dt.buffer.dimension;$t===1&&(yt=js),$t===2&&(yt=Zi),$t===3&&(yt=Wo)}dt.primType=yt}function _t(dt){Ie.elementsCount--,G(dt.buffer!==null,"must not double destroy elements"),delete Ve[dt.id],dt.buffer.destroy(),dt.buffer=null}function it(dt,Se){var Ue=J.create(null,Ji,!0),st=new ot(Ue._buffer);Ie.elementsCount++;function St(Je){if(!Je)Ue(),st.primType=Wo,st.vertCount=0,st.type=Lo;else if(typeof Je=="number")Ue(Je),st.primType=Wo,st.vertCount=Je|0,st.type=Lo;else{var At=null,tt=Au,vt=-1,rt=-1,yt=0,$t=0;Array.isArray(Je)||o(Je)||Yn(Je)?At=Je:(G.type(Je,"object","invalid arguments for elements"),"data"in Je&&(At=Je.data,G(Array.isArray(At)||o(At)||Yn(At),"invalid data for element buffer")),"usage"in Je&&(G.parameter(Je.usage,Ao,"invalid element buffer usage"),tt=Ao[Je.usage]),"primitive"in Je&&(G.parameter(Je.primitive,Pn,"invalid element buffer primitive"),vt=Pn[Je.primitive]),"count"in Je&&(G(typeof Je.count=="number"&&Je.count>=0,"invalid vertex count for elements"),rt=Je.count|0),"type"in Je&&(G.parameter(Je.type,Ge,"invalid buffer type"),$t=Ge[Je.type]),"length"in Je?yt=Je.length|0:(yt=rt,$t===Nn||$t===Su?yt*=2:($t===io||$t===oo)&&(yt*=4))),pt(st,At,tt,vt,rt,yt,$t)}return St}return St(dt),St._reglType="elements",St._elements=st,St.subdata=function(Je,At){return Ue.subdata(Je,At),St},St.destroy=function(){_t(st)},St}return{create:it,createStream:ft,destroyStream:ut,getElements:function(dt){return typeof dt=="function"&&dt._elements instanceof ot?dt._elements:null},clear:function(){An(Ve).forEach(_t)}}}var Rs=new Float32Array(1),Ma=new Uint32Array(Rs.buffer),si=5123;function _(A){for(var U=tn.allocType(si,A.length),J=0;J<A.length;++J)if(isNaN(A[J]))U[J]=65535;else if(A[J]===1/0)U[J]=31744;else if(A[J]===-1/0)U[J]=64512;else{Rs[0]=A[J];var Ie=Ma[0],Ve=Ie>>>31<<15,Ce=(Ie<<1>>>24)-127,Ge=Ie>>13&(1<<10)-1;if(Ce<-24)U[J]=Ve;else if(Ce<-14){var ot=-14-Ce;U[J]=Ve+(Ge+(1<<10)>>ot)}else Ce>15?U[J]=Ve+31744:U[J]=Ve+(Ce+15<<10)+Ge}return U}function E(A){return Array.isArray(A)||o(A)}var P=function(A){return!(A&A-1)&&!!A},L=34467,Z=3553,Ae=34067,Xe=34069,mt=6408,Vt=6406,Ar=6407,cr=6409,Gr=6410,wr=32854,Ur=32855,ao=36194,rn=32819,qn=32820,Qi=33635,il=34042,Ra=6402,ea=34041,Si=35904,ta=35906,On=36193,ka=33776,ci=33777,ra=33778,Pu=33779,al=35986,Gf=35987,Uf=34798,ul=35840,zf=35841,ks=35842,Hf=35843,Xf=36196,Da=5121,sl=5123,Ds=5125,Nu=5126,Ah=10242,Cs=10243,Is=10497,ju=33071,Ph=33648,Ls=10240,Ca=10241,cl=9728,Vf=9729,Fs=9984,Wf=9985,Yf=9986,ll=9987,Nh=33170,Mu=4352,jh=4353,Mh=4354,$f=34046,Rh=3317,Zn=37440,kh=37441,Dh=37443,Kf=37444,Ia=33984,Ch=[Fs,Yf,Wf,ll],Bs=[0,cr,Gr,Ar,mt],No={};No[cr]=No[Vt]=No[Ra]=1,No[ea]=No[Gr]=2,No[Ar]=No[Si]=3,No[mt]=No[ta]=4;function Jr(A){return"[object "+A+"]"}var fl=Jr("HTMLCanvasElement"),dl=Jr("OffscreenCanvas"),pl=Jr("CanvasRenderingContext2D"),hl=Jr("ImageBitmap"),vl=Jr("HTMLImageElement"),yl=Jr("HTMLVideoElement"),qf=Object.keys(ro).concat([fl,dl,pl,hl,vl,yl]),na=[];na[Da]=1,na[Nu]=4,na[On]=2,na[sl]=2,na[Ds]=4;var jn=[];jn[wr]=2,jn[Ur]=2,jn[ao]=2,jn[ea]=4,jn[ka]=.5,jn[ci]=.5,jn[ra]=1,jn[Pu]=1,jn[al]=.5,jn[Gf]=1,jn[Uf]=1,jn[ul]=.5,jn[zf]=.25,jn[ks]=.5,jn[Hf]=.25,jn[Xf]=.5;function gl(A){return Array.isArray(A)&&(A.length===0||typeof A[0]=="number")}function ml(A){if(!Array.isArray(A))return!1;var U=A.length;return!(U===0||!E(A[0]))}function Ti(A){return Object.prototype.toString.call(A)}function bl(A){return Ti(A)===fl}function _l(A){return Ti(A)===dl}function Zf(A){return Ti(A)===pl}function Jf(A){return Ti(A)===hl}function Qf(A){return Ti(A)===vl}function Ru(A){return Ti(A)===yl}function Mn(A){if(!A)return!1;var U=Ti(A);return qf.indexOf(U)>=0?!0:gl(A)||ml(A)||Yn(A)}function ed(A){return ro[Object.prototype.toString.call(A)]|0}function td(A,U){var J=U.length;switch(A.type){case Da:case sl:case Ds:case Nu:var Ie=tn.allocType(A.type,J);Ie.set(U),A.data=Ie;break;case On:A.data=_(U);break;default:G.raise("unsupported texture type, must specify a typed array")}}function Rn(A,U){return tn.allocType(A.type===On?Nu:A.type,U)}function zr(A,U){A.type===On?(A.data=_(U),tn.freeType(U)):A.data=U}function rd(A,U,J,Ie,Ve,Ce){for(var Ge=A.width,ot=A.height,at=A.channels,ft=Ge*ot*at,ut=Rn(A,ft),pt=0,_t=0;_t<ot;++_t)for(var it=0;it<Ge;++it)for(var dt=0;dt<at;++dt)ut[pt++]=U[J*it+Ie*_t+Ve*dt+Ce];zr(A,ut)}function Pr(A,U,J,Ie,Ve,Ce){var Ge;if(typeof jn[A]<"u"?Ge=jn[A]:Ge=No[A]*na[U],Ce&&(Ge*=6),Ve){for(var ot=0,at=J;at>=1;)ot+=Ge*at*at,at/=2;return ot}else return Ge*J*Ie}function xn(A,U,J,Ie,Ve,Ce,Ge){var ot={"don't care":Mu,"dont care":Mu,nice:Mh,fast:jh},at={repeat:Is,clamp:ju,mirror:Ph},ft={nearest:cl,linear:Vf},ut=s({mipmap:ll,"nearest mipmap nearest":Fs,"linear mipmap nearest":Wf,"nearest mipmap linear":Yf,"linear mipmap linear":ll},ft),pt={none:0,browser:Kf},_t={uint8:Da,rgba4:rn,rgb565:Qi,"rgb5 a1":qn},it={alpha:Vt,luminance:cr,"luminance alpha":Gr,rgb:Ar,rgba:mt,rgba4:wr,"rgb5 a1":Ur,rgb565:ao},dt={};U.ext_srgb&&(it.srgb=Si,it.srgba=ta),U.oes_texture_float&&(_t.float32=_t.float=Nu),U.oes_texture_half_float&&(_t.float16=_t["half float"]=On),U.webgl_depth_texture&&(s(it,{depth:Ra,"depth stencil":ea}),s(_t,{uint16:sl,uint32:Ds,"depth stencil":il})),U.webgl_compressed_texture_s3tc&&s(dt,{"rgb s3tc dxt1":ka,"rgba s3tc dxt1":ci,"rgba s3tc dxt3":ra,"rgba s3tc dxt5":Pu}),U.webgl_compressed_texture_atc&&s(dt,{"rgb atc":al,"rgba atc explicit alpha":Gf,"rgba atc interpolated alpha":Uf}),U.webgl_compressed_texture_pvrtc&&s(dt,{"rgb pvrtc 4bppv1":ul,"rgb pvrtc 2bppv1":zf,"rgba pvrtc 4bppv1":ks,"rgba pvrtc 2bppv1":Hf}),U.webgl_compressed_texture_etc1&&(dt["rgb etc1"]=Xf);var Se=Array.prototype.slice.call(A.getParameter(L));Object.keys(dt).forEach(function(B){var Le=dt[B];Se.indexOf(Le)>=0&&(it[B]=Le)});var Ue=Object.keys(it);J.textureFormats=Ue;var st=[];Object.keys(it).forEach(function(B){var Le=it[B];st[Le]=B});var St=[];Object.keys(_t).forEach(function(B){var Le=_t[B];St[Le]=B});var Je=[];Object.keys(ft).forEach(function(B){var Le=ft[B];Je[Le]=B});var At=[];Object.keys(ut).forEach(function(B){var Le=ut[B];At[Le]=B});var tt=[];Object.keys(at).forEach(function(B){var Le=at[B];tt[Le]=B});var vt=Ue.reduce(function(B,Le){var ke=it[Le];return ke===cr||ke===Vt||ke===cr||ke===Gr||ke===Ra||ke===ea||U.ext_srgb&&(ke===Si||ke===ta)?B[ke]=ke:ke===Ur||Le.indexOf("rgba")>=0?B[ke]=mt:B[ke]=Ar,B},{});function rt(){this.internalformat=mt,this.format=mt,this.type=Da,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Kf,this.width=0,this.height=0,this.channels=0}function yt(B,Le){B.internalformat=Le.internalformat,B.format=Le.format,B.type=Le.type,B.compressed=Le.compressed,B.premultiplyAlpha=Le.premultiplyAlpha,B.flipY=Le.flipY,B.unpackAlignment=Le.unpackAlignment,B.colorSpace=Le.colorSpace,B.width=Le.width,B.height=Le.height,B.channels=Le.channels}function $t(B,Le){if(!(typeof Le!="object"||!Le)){if("premultiplyAlpha"in Le&&(G.type(Le.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),B.premultiplyAlpha=Le.premultiplyAlpha),"flipY"in Le&&(G.type(Le.flipY,"boolean","invalid texture flip"),B.flipY=Le.flipY),"alignment"in Le&&(G.oneOf(Le.alignment,[1,2,4,8],"invalid texture unpack alignment"),B.unpackAlignment=Le.alignment),"colorSpace"in Le&&(G.parameter(Le.colorSpace,pt,"invalid colorSpace"),B.colorSpace=pt[Le.colorSpace]),"type"in Le){var ke=Le.type;G(U.oes_texture_float||!(ke==="float"||ke==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),G(U.oes_texture_half_float||!(ke==="half float"||ke==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),G(U.webgl_depth_texture||!(ke==="uint16"||ke==="uint32"||ke==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(ke,_t,"invalid texture type"),B.type=_t[ke]}var jt=B.width,Er=B.height,X=B.channels,k=!1;"shape"in Le?(G(Array.isArray(Le.shape)&&Le.shape.length>=2,"shape must be an array"),jt=Le.shape[0],Er=Le.shape[1],Le.shape.length===3&&(X=Le.shape[2],G(X>0&&X<=4,"invalid number of channels"),k=!0),G(jt>=0&&jt<=J.maxTextureSize,"invalid width"),G(Er>=0&&Er<=J.maxTextureSize,"invalid height")):("radius"in Le&&(jt=Er=Le.radius,G(jt>=0&&jt<=J.maxTextureSize,"invalid radius")),"width"in Le&&(jt=Le.width,G(jt>=0&&jt<=J.maxTextureSize,"invalid width")),"height"in Le&&(Er=Le.height,G(Er>=0&&Er<=J.maxTextureSize,"invalid height")),"channels"in Le&&(X=Le.channels,G(X>0&&X<=4,"invalid number of channels"),k=!0)),B.width=jt|0,B.height=Er|0,B.channels=X|0;var ue=!1;if("format"in Le){var Oe=Le.format;G(U.webgl_depth_texture||!(Oe==="depth"||Oe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),G.parameter(Oe,it,"invalid texture format");var Pe=B.internalformat=it[Oe];B.format=vt[Pe],Oe in _t&&("type"in Le||(B.type=_t[Oe])),Oe in dt&&(B.compressed=!0),ue=!0}!k&&ue?B.channels=No[B.format]:k&&!ue?B.channels!==Bs[B.format]&&(B.format=B.internalformat=Bs[B.channels]):ue&&k&&G(B.channels===No[B.format],"number of channels inconsistent with specified format")}}function rr(B){A.pixelStorei(Zn,B.flipY),A.pixelStorei(kh,B.premultiplyAlpha),A.pixelStorei(Dh,B.colorSpace),A.pixelStorei(Rh,B.unpackAlignment)}function Et(){rt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Qe(B,Le){var ke=null;if(Mn(Le)?ke=Le:Le&&(G.type(Le,"object","invalid pixel data type"),$t(B,Le),"x"in Le&&(B.xOffset=Le.x|0),"y"in Le&&(B.yOffset=Le.y|0),Mn(Le.data)&&(ke=Le.data)),G(!B.compressed||ke instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Le.copy){G(!ke,"can not specify copy and data field for the same texture");var jt=Ve.viewportWidth,Er=Ve.viewportHeight;B.width=B.width||jt-B.xOffset,B.height=B.height||Er-B.yOffset,B.needsCopy=!0,G(B.xOffset>=0&&B.xOffset<jt&&B.yOffset>=0&&B.yOffset<Er&&B.width>0&&B.width<=jt&&B.height>0&&B.height<=Er,"copy texture read out of bounds")}else if(!ke)B.width=B.width||1,B.height=B.height||1,B.channels=B.channels||4;else if(o(ke))B.channels=B.channels||4,B.data=ke,!("type"in Le)&&B.type===Da&&(B.type=ed(ke));else if(gl(ke))B.channels=B.channels||4,td(B,ke),B.alignment=1,B.needsFree=!0;else if(Yn(ke)){var X=ke.data;!Array.isArray(X)&&B.type===Da&&(B.type=ed(X));var k=ke.shape,ue=ke.stride,Oe,Pe,le,oe,ge,H;k.length===3?(le=k[2],H=ue[2]):(G(k.length===2,"invalid ndarray pixel data, must be 2 or 3D"),le=1,H=1),Oe=k[0],Pe=k[1],oe=ue[0],ge=ue[1],B.alignment=1,B.width=Oe,B.height=Pe,B.channels=le,B.format=B.internalformat=Bs[le],B.needsFree=!0,rd(B,X,oe,ge,H,ke.offset)}else if(bl(ke)||_l(ke)||Zf(ke))bl(ke)||_l(ke)?B.element=ke:B.element=ke.canvas,B.width=B.element.width,B.height=B.element.height,B.channels=4;else if(Jf(ke))B.element=ke,B.width=ke.width,B.height=ke.height,B.channels=4;else if(Qf(ke))B.element=ke,B.width=ke.naturalWidth,B.height=ke.naturalHeight,B.channels=4;else if(Ru(ke))B.element=ke,B.width=ke.videoWidth,B.height=ke.videoHeight,B.channels=4;else if(ml(ke)){var re=B.width||ke[0].length,z=B.height||ke.length,_e=B.channels;E(ke[0][0])?_e=_e||ke[0][0].length:_e=_e||1;for(var je=ho.shape(ke),We=1,Ke=0;Ke<je.length;++Ke)We*=je[Ke];var He=Rn(B,We);ho.flatten(ke,je,"",He),zr(B,He),B.alignment=1,B.width=re,B.height=z,B.channels=_e,B.format=B.internalformat=Bs[_e],B.needsFree=!0}B.type===Nu?G(J.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):B.type===On&&G(J.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function $e(B,Le,ke){var jt=B.element,Er=B.data,X=B.internalformat,k=B.format,ue=B.type,Oe=B.width,Pe=B.height;rr(B),jt?A.texImage2D(Le,ke,k,k,ue,jt):B.compressed?A.compressedTexImage2D(Le,ke,X,Oe,Pe,0,Er):B.needsCopy?(Ie(),A.copyTexImage2D(Le,ke,k,B.xOffset,B.yOffset,Oe,Pe,0)):A.texImage2D(Le,ke,k,Oe,Pe,0,k,ue,Er||null)}function nr(B,Le,ke,jt,Er){var X=B.element,k=B.data,ue=B.internalformat,Oe=B.format,Pe=B.type,le=B.width,oe=B.height;rr(B),X?A.texSubImage2D(Le,Er,ke,jt,Oe,Pe,X):B.compressed?A.compressedTexSubImage2D(Le,Er,ke,jt,ue,le,oe,k):B.needsCopy?(Ie(),A.copyTexSubImage2D(Le,Er,ke,jt,B.xOffset,B.yOffset,le,oe)):A.texSubImage2D(Le,Er,ke,jt,le,oe,Oe,Pe,k)}var Te=[];function Lt(){return Te.pop()||new Et}function br(B){B.needsFree&&tn.freeType(B.data),Et.call(B),Te.push(B)}function ur(){rt.call(this),this.genMipmaps=!1,this.mipmapHint=Mu,this.mipmask=0,this.images=Array(16)}function mr(B,Le,ke){var jt=B.images[0]=Lt();B.mipmask=1,jt.width=B.width=Le,jt.height=B.height=ke,jt.channels=B.channels=4}function Mr(B,Le){var ke=null;if(Mn(Le))ke=B.images[0]=Lt(),yt(ke,B),Qe(ke,Le),B.mipmask=1;else if($t(B,Le),Array.isArray(Le.mipmap))for(var jt=Le.mipmap,Er=0;Er<jt.length;++Er)ke=B.images[Er]=Lt(),yt(ke,B),ke.width>>=Er,ke.height>>=Er,Qe(ke,jt[Er]),B.mipmask|=1<<Er;else ke=B.images[0]=Lt(),yt(ke,B),Qe(ke,Le),B.mipmask=1;yt(B,B.images[0]),B.compressed&&(B.internalformat===ka||B.internalformat===ci||B.internalformat===ra||B.internalformat===Pu)&&G(B.width%4===0&&B.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function cn(B,Le){for(var ke=B.images,jt=0;jt<ke.length;++jt){if(!ke[jt])return;$e(ke[jt],Le,jt)}}var En=[];function xr(){var B=En.pop()||new ur;rt.call(B),B.mipmask=0;for(var Le=0;Le<16;++Le)B.images[Le]=null;return B}function yn(B){for(var Le=B.images,ke=0;ke<Le.length;++ke)Le[ke]&&br(Le[ke]),Le[ke]=null;En.push(B)}function Wr(){this.minFilter=cl,this.magFilter=cl,this.wrapS=ju,this.wrapT=ju,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Mu}function ln(B,Le){if("min"in Le){var ke=Le.min;G.parameter(ke,ut),B.minFilter=ut[ke],Ch.indexOf(B.minFilter)>=0&&!("faces"in Le)&&(B.genMipmaps=!0)}if("mag"in Le){var jt=Le.mag;G.parameter(jt,ft),B.magFilter=ft[jt]}var Er=B.wrapS,X=B.wrapT;if("wrap"in Le){var k=Le.wrap;typeof k=="string"?(G.parameter(k,at),Er=X=at[k]):Array.isArray(k)&&(G.parameter(k[0],at),G.parameter(k[1],at),Er=at[k[0]],X=at[k[1]])}else{if("wrapS"in Le){var ue=Le.wrapS;G.parameter(ue,at),Er=at[ue]}if("wrapT"in Le){var Oe=Le.wrapT;G.parameter(Oe,at),X=at[Oe]}}if(B.wrapS=Er,B.wrapT=X,"anisotropic"in Le){var Pe=Le.anisotropic;G(typeof Pe=="number"&&Pe>=1&&Pe<=J.maxAnisotropic,"aniso samples must be between 1 and "),B.anisotropic=Le.anisotropic}if("mipmap"in Le){var le=!1;switch(typeof Le.mipmap){case"string":G.parameter(Le.mipmap,ot,"invalid mipmap hint"),B.mipmapHint=ot[Le.mipmap],B.genMipmaps=!0,le=!0;break;case"boolean":le=B.genMipmaps=Le.mipmap;break;case"object":G(Array.isArray(Le.mipmap),"invalid mipmap type"),B.genMipmaps=!1,le=!0;break;default:G.raise("invalid mipmap type")}le&&!("min"in Le)&&(B.minFilter=Fs)}}function gn(B,Le){A.texParameteri(Le,Ca,B.minFilter),A.texParameteri(Le,Ls,B.magFilter),A.texParameteri(Le,Ah,B.wrapS),A.texParameteri(Le,Cs,B.wrapT),U.ext_texture_filter_anisotropic&&A.texParameteri(Le,$f,B.anisotropic),B.genMipmaps&&(A.hint(Nh,B.mipmapHint),A.generateMipmap(Le))}var Yr=0,Sn={},Fn=J.maxTextureUnits,nn=Array(Fn).map(function(){return null});function lr(B){rt.call(this),this.mipmask=0,this.internalformat=mt,this.id=Yr++,this.refCount=1,this.target=B,this.texture=A.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,Ge.profile&&(this.stats={size:0})}function mn(B){A.activeTexture(Ia),A.bindTexture(B.target,B.texture)}function Nr(){var B=nn[0];B?A.bindTexture(B.target,B.texture):A.bindTexture(Z,null)}function Jt(B){var Le=B.texture;G(Le,"must not double destroy texture");var ke=B.unit,jt=B.target;ke>=0&&(A.activeTexture(Ia+ke),A.bindTexture(jt,null),nn[ke]=null),A.deleteTexture(Le),B.texture=null,B.params=null,B.pixels=null,B.refCount=0,delete Sn[B.id],Ce.textureCount--}s(lr.prototype,{bind:function(){var B=this;B.bindCount+=1;var Le=B.unit;if(Le<0){for(var ke=0;ke<Fn;++ke){var jt=nn[ke];if(jt){if(jt.bindCount>0)continue;jt.unit=-1}nn[ke]=B,Le=ke;break}Le>=Fn&&G.raise("insufficient number of texture units"),Ge.profile&&Ce.maxTextureUnits<Le+1&&(Ce.maxTextureUnits=Le+1),B.unit=Le,A.activeTexture(Ia+Le),A.bindTexture(B.target,B.texture)}return Le},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jt(this)}});function _r(B,Le){var ke=new lr(Z);Sn[ke.id]=ke,Ce.textureCount++;function jt(k,ue){var Oe=ke.texInfo;Wr.call(Oe);var Pe=xr();return typeof k=="number"?typeof ue=="number"?mr(Pe,k|0,ue|0):mr(Pe,k|0,k|0):k?(G.type(k,"object","invalid arguments to regl.texture"),ln(Oe,k),Mr(Pe,k)):mr(Pe,1,1),Oe.genMipmaps&&(Pe.mipmask=(Pe.width<<1)-1),ke.mipmask=Pe.mipmask,yt(ke,Pe),G.texture2D(Oe,Pe,J),ke.internalformat=Pe.internalformat,jt.width=Pe.width,jt.height=Pe.height,mn(ke),cn(Pe,Z),gn(Oe,Z),Nr(),yn(Pe),Ge.profile&&(ke.stats.size=Pr(ke.internalformat,ke.type,Pe.width,Pe.height,Oe.genMipmaps,!1)),jt.format=st[ke.internalformat],jt.type=St[ke.type],jt.mag=Je[Oe.magFilter],jt.min=At[Oe.minFilter],jt.wrapS=tt[Oe.wrapS],jt.wrapT=tt[Oe.wrapT],jt}function Er(k,ue,Oe,Pe){G(!!k,"must specify image data");var le=ue|0,oe=Oe|0,ge=Pe|0,H=Lt();return yt(H,ke),H.width=0,H.height=0,Qe(H,k),H.width=H.width||(ke.width>>ge)-le,H.height=H.height||(ke.height>>ge)-oe,G(ke.type===H.type&&ke.format===H.format&&ke.internalformat===H.internalformat,"incompatible format for texture.subimage"),G(le>=0&&oe>=0&&le+H.width<=ke.width&&oe+H.height<=ke.height,"texture.subimage write out of bounds"),G(ke.mipmask&1<<ge,"missing mipmap data"),G(H.data||H.element||H.needsCopy,"missing image data"),mn(ke),nr(H,Z,le,oe,ge),Nr(),br(H),jt}function X(k,ue){var Oe=k|0,Pe=ue|0||Oe;if(Oe===ke.width&&Pe===ke.height)return jt;jt.width=ke.width=Oe,jt.height=ke.height=Pe,mn(ke);for(var le=0;ke.mipmask>>le;++le){var oe=Oe>>le,ge=Pe>>le;if(!oe||!ge)break;A.texImage2D(Z,le,ke.format,oe,ge,0,ke.format,ke.type,null)}return Nr(),Ge.profile&&(ke.stats.size=Pr(ke.internalformat,ke.type,Oe,Pe,!1,!1)),jt}return jt(B,Le),jt.subimage=Er,jt.resize=X,jt._reglType="texture2d",jt._texture=ke,Ge.profile&&(jt.stats=ke.stats),jt.destroy=function(){ke.decRef()},jt}function Sr(B,Le,ke,jt,Er,X){var k=new lr(Ae);Sn[k.id]=k,Ce.cubeCount++;var ue=new Array(6);function Oe(oe,ge,H,re,z,_e){var je,We=k.texInfo;for(Wr.call(We),je=0;je<6;++je)ue[je]=xr();if(typeof oe=="number"||!oe){var Ke=oe|0||1;for(je=0;je<6;++je)mr(ue[je],Ke,Ke)}else if(typeof oe=="object")if(ge)Mr(ue[0],oe),Mr(ue[1],ge),Mr(ue[2],H),Mr(ue[3],re),Mr(ue[4],z),Mr(ue[5],_e);else if(ln(We,oe),$t(k,oe),"faces"in oe){var He=oe.faces;for(G(Array.isArray(He)&&He.length===6,"cube faces must be a length 6 array"),je=0;je<6;++je)G(typeof He[je]=="object"&&!!He[je],"invalid input for cube map face"),yt(ue[je],k),Mr(ue[je],He[je])}else for(je=0;je<6;++je)Mr(ue[je],oe);else G.raise("invalid arguments to cube map");for(yt(k,ue[0]),J.npotTextureCube||G(P(k.width)&&P(k.height),"your browser does not support non power or two texture dimensions"),We.genMipmaps?k.mipmask=(ue[0].width<<1)-1:k.mipmask=ue[0].mipmask,G.textureCube(k,We,ue,J),k.internalformat=ue[0].internalformat,Oe.width=ue[0].width,Oe.height=ue[0].height,mn(k),je=0;je<6;++je)cn(ue[je],Xe+je);for(gn(We,Ae),Nr(),Ge.profile&&(k.stats.size=Pr(k.internalformat,k.type,Oe.width,Oe.height,We.genMipmaps,!0)),Oe.format=st[k.internalformat],Oe.type=St[k.type],Oe.mag=Je[We.magFilter],Oe.min=At[We.minFilter],Oe.wrapS=tt[We.wrapS],Oe.wrapT=tt[We.wrapT],je=0;je<6;++je)yn(ue[je]);return Oe}function Pe(oe,ge,H,re,z){G(!!ge,"must specify image data"),G(typeof oe=="number"&&oe===(oe|0)&&oe>=0&&oe<6,"invalid face");var _e=H|0,je=re|0,We=z|0,Ke=Lt();return yt(Ke,k),Ke.width=0,Ke.height=0,Qe(Ke,ge),Ke.width=Ke.width||(k.width>>We)-_e,Ke.height=Ke.height||(k.height>>We)-je,G(k.type===Ke.type&&k.format===Ke.format&&k.internalformat===Ke.internalformat,"incompatible format for texture.subimage"),G(_e>=0&&je>=0&&_e+Ke.width<=k.width&&je+Ke.height<=k.height,"texture.subimage write out of bounds"),G(k.mipmask&1<<We,"missing mipmap data"),G(Ke.data||Ke.element||Ke.needsCopy,"missing image data"),mn(k),nr(Ke,Xe+oe,_e,je,We),Nr(),br(Ke),Oe}function le(oe){var ge=oe|0;if(ge!==k.width){Oe.width=k.width=ge,Oe.height=k.height=ge,mn(k);for(var H=0;H<6;++H)for(var re=0;k.mipmask>>re;++re)A.texImage2D(Xe+H,re,k.format,ge>>re,ge>>re,0,k.format,k.type,null);return Nr(),Ge.profile&&(k.stats.size=Pr(k.internalformat,k.type,Oe.width,Oe.height,!1,!0)),Oe}}return Oe(B,Le,ke,jt,Er,X),Oe.subimage=Pe,Oe.resize=le,Oe._reglType="textureCube",Oe._texture=k,Ge.profile&&(Oe.stats=k.stats),Oe.destroy=function(){k.decRef()},Oe}function Br(){for(var B=0;B<Fn;++B)A.activeTexture(Ia+B),A.bindTexture(Z,null),nn[B]=null;An(Sn).forEach(Jt),Ce.cubeCount=0,Ce.textureCount=0}Ge.profile&&(Ce.getTotalTextureSize=function(){var B=0;return Object.keys(Sn).forEach(function(Le){B+=Sn[Le].stats.size}),B});function Jo(){for(var B=0;B<Fn;++B){var Le=nn[B];Le&&(Le.bindCount=0,Le.unit=-1,nn[B]=null)}An(Sn).forEach(function(ke){ke.texture=A.createTexture(),A.bindTexture(ke.target,ke.texture);for(var jt=0;jt<32;++jt)if(ke.mipmask&1<<jt)if(ke.target===Z)A.texImage2D(Z,jt,ke.internalformat,ke.width>>jt,ke.height>>jt,0,ke.internalformat,ke.type,null);else for(var Er=0;Er<6;++Er)A.texImage2D(Xe+Er,jt,ke.internalformat,ke.width>>jt,ke.height>>jt,0,ke.internalformat,ke.type,null);gn(ke.texInfo,ke.target)})}function Wn(){for(var B=0;B<Fn;++B){var Le=nn[B];Le&&(Le.bindCount=0,Le.unit=-1,nn[B]=null),A.activeTexture(Ia+B),A.bindTexture(Z,null),A.bindTexture(Ae,null)}}return{create2D:_r,createCube:Sr,clear:Br,getTexture:function(B){return null},restore:Jo,refresh:Wn}}var ir=36161,Kr=32854,nd=32855,Gs=36194,El=33189,uo=36168,pn=34041,wl=35907,Ol=34836,xl=34842,Sl=34843,jo=[];jo[Kr]=2,jo[nd]=2,jo[Gs]=2,jo[El]=2,jo[uo]=1,jo[pn]=4,jo[wl]=4,jo[Ol]=16,jo[xl]=8,jo[Sl]=6;function Tl(A,U,J){return jo[A]*U*J}var od=function(A,U,J,Ie,Ve){var Ce={rgba4:Kr,rgb565:Gs,"rgb5 a1":nd,depth:El,stencil:uo,"depth stencil":pn};U.ext_srgb&&(Ce.srgba=wl),U.ext_color_buffer_half_float&&(Ce.rgba16f=xl,Ce.rgb16f=Sl),U.webgl_color_buffer_float&&(Ce.rgba32f=Ol);var Ge=[];Object.keys(Ce).forEach(function(it){var dt=Ce[it];Ge[dt]=it});var ot=0,at={};function ft(it){this.id=ot++,this.refCount=1,this.renderbuffer=it,this.format=Kr,this.width=0,this.height=0,Ve.profile&&(this.stats={size:0})}ft.prototype.decRef=function(){--this.refCount<=0&&ut(this)};function ut(it){var dt=it.renderbuffer;G(dt,"must not double destroy renderbuffer"),A.bindRenderbuffer(ir,null),A.deleteRenderbuffer(dt),it.renderbuffer=null,it.refCount=0,delete at[it.id],Ie.renderbufferCount--}function pt(it,dt){var Se=new ft(A.createRenderbuffer());at[Se.id]=Se,Ie.renderbufferCount++;function Ue(St,Je){var At=0,tt=0,vt=Kr;if(typeof St=="object"&&St){var rt=St;if("shape"in rt){var yt=rt.shape;G(Array.isArray(yt)&&yt.length>=2,"invalid renderbuffer shape"),At=yt[0]|0,tt=yt[1]|0}else"radius"in rt&&(At=tt=rt.radius|0),"width"in rt&&(At=rt.width|0),"height"in rt&&(tt=rt.height|0);"format"in rt&&(G.parameter(rt.format,Ce,"invalid renderbuffer format"),vt=Ce[rt.format])}else typeof St=="number"?(At=St|0,typeof Je=="number"?tt=Je|0:tt=At):St?G.raise("invalid arguments to renderbuffer constructor"):At=tt=1;if(G(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),!(At===Se.width&&tt===Se.height&&vt===Se.format))return Ue.width=Se.width=At,Ue.height=Se.height=tt,Se.format=vt,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,vt,At,tt),G(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Tl(Se.format,Se.width,Se.height)),Ue.format=Ge[Se.format],Ue}function st(St,Je){var At=St|0,tt=Je|0||At;return At===Se.width&&tt===Se.height||(G(At>0&&tt>0&&At<=J.maxRenderbufferSize&&tt<=J.maxRenderbufferSize,"invalid renderbuffer size"),Ue.width=Se.width=At,Ue.height=Se.height=tt,A.bindRenderbuffer(ir,Se.renderbuffer),A.renderbufferStorage(ir,Se.format,At,tt),G(A.getError()===0,"invalid render buffer format"),Ve.profile&&(Se.stats.size=Tl(Se.format,Se.width,Se.height))),Ue}return Ue(it,dt),Ue.resize=st,Ue._reglType="renderbuffer",Ue._renderbuffer=Se,Ve.profile&&(Ue.stats=Se.stats),Ue.destroy=function(){Se.decRef()},Ue}Ve.profile&&(Ie.getTotalRenderbufferSize=function(){var it=0;return Object.keys(at).forEach(function(dt){it+=at[dt].stats.size}),it});function _t(){An(at).forEach(function(it){it.renderbuffer=A.createRenderbuffer(),A.bindRenderbuffer(ir,it.renderbuffer),A.renderbufferStorage(ir,it.format,it.width,it.height)}),A.bindRenderbuffer(ir,null)}return{create:pt,clear:function(){An(at).forEach(ut)},restore:_t}},Mo=36160,Us=36161,go=3553,zs=34069,Hs=36064,Ro=36096,id=36128,ad=33306,ud=36053,Ih=36054,Lh=36055,Fh=36057,ku=36061,Bh=36193,sd=5121,cd=5126,ld=6407,Xs=6408,fd=6402,Gh=[ld,Xs],Al=[];Al[Xs]=4,Al[ld]=3;var Vs=[];Vs[sd]=1,Vs[cd]=4,Vs[Bh]=2;var Uh=32854,Pl=32855,zh=36194,Hh=33189,Xh=36168,Nl=34041,dd=35907,Vh=34836,pd=34842,Wh=34843,hd=[Uh,Pl,zh,dd,pd,Wh,Vh],La={};La[ud]="complete",La[Ih]="incomplete attachment",La[Fh]="incomplete dimensions",La[Lh]="incomplete, missing attachment",La[ku]="unsupported";function vd(A,U,J,Ie,Ve,Ce){var Ge={cur:null,next:null,dirty:!1,setFBO:null},ot=["rgba"],at=["rgba4","rgb565","rgb5 a1"];U.ext_srgb&&at.push("srgba"),U.ext_color_buffer_half_float&&at.push("rgba16f","rgb16f"),U.webgl_color_buffer_float&&at.push("rgba32f");var ft=["uint8"];U.oes_texture_half_float&&ft.push("half float","float16"),U.oes_texture_float&&ft.push("float","float32");function ut(Et,Qe,$e){this.target=Et,this.texture=Qe,this.renderbuffer=$e;var nr=0,Te=0;Qe?(nr=Qe.width,Te=Qe.height):$e&&(nr=$e.width,Te=$e.height),this.width=nr,this.height=Te}function pt(Et){Et&&(Et.texture&&Et.texture._texture.decRef(),Et.renderbuffer&&Et.renderbuffer._renderbuffer.decRef())}function _t(Et,Qe,$e){if(Et)if(Et.texture){var nr=Et.texture._texture,Te=Math.max(1,nr.width),Lt=Math.max(1,nr.height);G(Te===Qe&&Lt===$e,"inconsistent width/height for supplied texture"),nr.refCount+=1}else{var br=Et.renderbuffer._renderbuffer;G(br.width===Qe&&br.height===$e,"inconsistent width/height for renderbuffer"),br.refCount+=1}}function it(Et,Qe){Qe&&(Qe.texture?A.framebufferTexture2D(Mo,Et,Qe.target,Qe.texture._texture.texture,0):A.framebufferRenderbuffer(Mo,Et,Us,Qe.renderbuffer._renderbuffer.renderbuffer))}function dt(Et){var Qe=go,$e=null,nr=null,Te=Et;typeof Et=="object"&&(Te=Et.data,"target"in Et&&(Qe=Et.target|0)),G.type(Te,"function","invalid attachment data");var Lt=Te._reglType;return Lt==="texture2d"?($e=Te,G(Qe===go)):Lt==="textureCube"?($e=Te,G(Qe>=zs&&Qe<zs+6,"invalid cube map target")):Lt==="renderbuffer"?(nr=Te,Qe=Us):G.raise("invalid regl object for attachment"),new ut(Qe,$e,nr)}function Se(Et,Qe,$e,nr,Te){if($e){var Lt=Ie.create2D({width:Et,height:Qe,format:nr,type:Te});return Lt._texture.refCount=0,new ut(go,Lt,null)}else{var br=Ve.create({width:Et,height:Qe,format:nr});return br._renderbuffer.refCount=0,new ut(Us,null,br)}}function Ue(Et){return Et&&(Et.texture||Et.renderbuffer)}function st(Et,Qe,$e){Et&&(Et.texture?Et.texture.resize(Qe,$e):Et.renderbuffer&&Et.renderbuffer.resize(Qe,$e),Et.width=Qe,Et.height=$e)}var St=0,Je={};function At(){this.id=St++,Je[this.id]=this,this.framebuffer=A.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function tt(Et){Et.colorAttachments.forEach(pt),pt(Et.depthAttachment),pt(Et.stencilAttachment),pt(Et.depthStencilAttachment)}function vt(Et){var Qe=Et.framebuffer;G(Qe,"must not double destroy framebuffer"),A.deleteFramebuffer(Qe),Et.framebuffer=null,Ce.framebufferCount--,delete Je[Et.id]}function rt(Et){var Qe;A.bindFramebuffer(Mo,Et.framebuffer);var $e=Et.colorAttachments;for(Qe=0;Qe<$e.length;++Qe)it(Hs+Qe,$e[Qe]);for(Qe=$e.length;Qe<J.maxColorAttachments;++Qe)A.framebufferTexture2D(Mo,Hs+Qe,go,null,0);A.framebufferTexture2D(Mo,ad,go,null,0),A.framebufferTexture2D(Mo,Ro,go,null,0),A.framebufferTexture2D(Mo,id,go,null,0),it(Ro,Et.depthAttachment),it(id,Et.stencilAttachment),it(ad,Et.depthStencilAttachment);var nr=A.checkFramebufferStatus(Mo);!A.isContextLost()&&nr!==ud&&G.raise("framebuffer configuration not supported, status = "+La[nr]),A.bindFramebuffer(Mo,Ge.next?Ge.next.framebuffer:null),Ge.cur=Ge.next,A.getError()}function yt(Et,Qe){var $e=new At;Ce.framebufferCount++;function nr(Lt,br){var ur;G(Ge.next!==$e,"can not update framebuffer which is currently in use");var mr=0,Mr=0,cn=!0,En=!0,xr=null,yn=!0,Wr="rgba",ln="uint8",gn=1,Yr=null,Sn=null,Fn=null,nn=!1;if(typeof Lt=="number")mr=Lt|0,Mr=br|0||mr;else if(!Lt)mr=Mr=1;else{G.type(Lt,"object","invalid arguments for framebuffer");var lr=Lt;if("shape"in lr){var mn=lr.shape;G(Array.isArray(mn)&&mn.length>=2,"invalid shape for framebuffer"),mr=mn[0],Mr=mn[1]}else"radius"in lr&&(mr=Mr=lr.radius),"width"in lr&&(mr=lr.width),"height"in lr&&(Mr=lr.height);("color"in lr||"colors"in lr)&&(xr=lr.color||lr.colors,Array.isArray(xr)&&G(xr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),xr||("colorCount"in lr&&(gn=lr.colorCount|0,G(gn>0,"invalid color buffer count")),"colorTexture"in lr&&(yn=!!lr.colorTexture,Wr="rgba4"),"colorType"in lr&&(ln=lr.colorType,yn?(G(U.oes_texture_float||!(ln==="float"||ln==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),G(U.oes_texture_half_float||!(ln==="half float"||ln==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ln==="half float"||ln==="float16"?(G(U.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(ln==="float"||ln==="float32")&&(G(U.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),G.oneOf(ln,ft,"invalid color type")),"colorFormat"in lr&&(Wr=lr.colorFormat,ot.indexOf(Wr)>=0?yn=!0:at.indexOf(Wr)>=0?yn=!1:yn?G.oneOf(lr.colorFormat,ot,"invalid color format for texture"):G.oneOf(lr.colorFormat,at,"invalid color format for renderbuffer"))),("depthTexture"in lr||"depthStencilTexture"in lr)&&(nn=!!(lr.depthTexture||lr.depthStencilTexture),G(!nn||U.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in lr&&(typeof lr.depth=="boolean"?cn=lr.depth:(Yr=lr.depth,En=!1)),"stencil"in lr&&(typeof lr.stencil=="boolean"?En=lr.stencil:(Sn=lr.stencil,cn=!1)),"depthStencil"in lr&&(typeof lr.depthStencil=="boolean"?cn=En=lr.depthStencil:(Fn=lr.depthStencil,cn=!1,En=!1))}var Nr=null,Jt=null,_r=null,Sr=null;if(Array.isArray(xr))Nr=xr.map(dt);else if(xr)Nr=[dt(xr)];else for(Nr=new Array(gn),ur=0;ur<gn;++ur)Nr[ur]=Se(mr,Mr,yn,Wr,ln);G(U.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),G(Nr.length<=J.maxColorAttachments,"too many color attachments, not supported"),mr=mr||Nr[0].width,Mr=Mr||Nr[0].height,Yr?Jt=dt(Yr):cn&&!En&&(Jt=Se(mr,Mr,nn,"depth","uint32")),Sn?_r=dt(Sn):En&&!cn&&(_r=Se(mr,Mr,!1,"stencil","uint8")),Fn?Sr=dt(Fn):!Yr&&!Sn&&En&&cn&&(Sr=Se(mr,Mr,nn,"depth stencil","depth stencil")),G(!!Yr+!!Sn+!!Fn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Br=null;for(ur=0;ur<Nr.length;++ur)if(_t(Nr[ur],mr,Mr),G(!Nr[ur]||Nr[ur].texture&&Gh.indexOf(Nr[ur].texture._texture.format)>=0||Nr[ur].renderbuffer&&hd.indexOf(Nr[ur].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ur+" is invalid"),Nr[ur]&&Nr[ur].texture){var Jo=Al[Nr[ur].texture._texture.format]*Vs[Nr[ur].texture._texture.type];Br===null?Br=Jo:G(Br===Jo,"all color attachments much have the same number of bits per pixel.")}return _t(Jt,mr,Mr),G(!Jt||Jt.texture&&Jt.texture._texture.format===fd||Jt.renderbuffer&&Jt.renderbuffer._renderbuffer.format===Hh,"invalid depth attachment for framebuffer object"),_t(_r,mr,Mr),G(!_r||_r.renderbuffer&&_r.renderbuffer._renderbuffer.format===Xh,"invalid stencil attachment for framebuffer object"),_t(Sr,mr,Mr),G(!Sr||Sr.texture&&Sr.texture._texture.format===Nl||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Nl,"invalid depth-stencil attachment for framebuffer object"),tt($e),$e.width=mr,$e.height=Mr,$e.colorAttachments=Nr,$e.depthAttachment=Jt,$e.stencilAttachment=_r,$e.depthStencilAttachment=Sr,nr.color=Nr.map(Ue),nr.depth=Ue(Jt),nr.stencil=Ue(_r),nr.depthStencil=Ue(Sr),nr.width=$e.width,nr.height=$e.height,rt($e),nr}function Te(Lt,br){G(Ge.next!==$e,"can not resize a framebuffer which is currently in use");var ur=Math.max(Lt|0,1),mr=Math.max(br|0||ur,1);if(ur===$e.width&&mr===$e.height)return nr;for(var Mr=$e.colorAttachments,cn=0;cn<Mr.length;++cn)st(Mr[cn],ur,mr);return st($e.depthAttachment,ur,mr),st($e.stencilAttachment,ur,mr),st($e.depthStencilAttachment,ur,mr),$e.width=nr.width=ur,$e.height=nr.height=mr,rt($e),nr}return nr(Et,Qe),s(nr,{resize:Te,_reglType:"framebuffer",_framebuffer:$e,destroy:function(){vt($e),tt($e)},use:function(Lt){Ge.setFBO({framebuffer:nr},Lt)}})}function $t(Et){var Qe=Array(6);function $e(Te){var Lt;G(Qe.indexOf(Ge.next)<0,"can not update framebuffer which is currently in use");var br={color:null},ur=0,mr=null,Mr="rgba",cn="uint8",En=1;if(typeof Te=="number")ur=Te|0;else if(!Te)ur=1;else{G.type(Te,"object","invalid arguments for framebuffer");var xr=Te;if("shape"in xr){var yn=xr.shape;G(Array.isArray(yn)&&yn.length>=2,"invalid shape for framebuffer"),G(yn[0]===yn[1],"cube framebuffer must be square"),ur=yn[0]}else"radius"in xr&&(ur=xr.radius|0),"width"in xr?(ur=xr.width|0,"height"in xr&&G(xr.height===ur,"must be square")):"height"in xr&&(ur=xr.height|0);("color"in xr||"colors"in xr)&&(mr=xr.color||xr.colors,Array.isArray(mr)&&G(mr.length===1||U.webgl_draw_buffers,"multiple render targets not supported")),mr||("colorCount"in xr&&(En=xr.colorCount|0,G(En>0,"invalid color buffer count")),"colorType"in xr&&(G.oneOf(xr.colorType,ft,"invalid color type"),cn=xr.colorType),"colorFormat"in xr&&(Mr=xr.colorFormat,G.oneOf(xr.colorFormat,ot,"invalid color format for texture"))),"depth"in xr&&(br.depth=xr.depth),"stencil"in xr&&(br.stencil=xr.stencil),"depthStencil"in xr&&(br.depthStencil=xr.depthStencil)}var Wr;if(mr)if(Array.isArray(mr))for(Wr=[],Lt=0;Lt<mr.length;++Lt)Wr[Lt]=mr[Lt];else Wr=[mr];else{Wr=Array(En);var ln={radius:ur,format:Mr,type:cn};for(Lt=0;Lt<En;++Lt)Wr[Lt]=Ie.createCube(ln)}for(br.color=Array(Wr.length),Lt=0;Lt<Wr.length;++Lt){var gn=Wr[Lt];G(typeof gn=="function"&&gn._reglType==="textureCube","invalid cube map"),ur=ur||gn.width,G(gn.width===ur&&gn.height===ur,"invalid cube map shape"),br.color[Lt]={target:zs,data:Wr[Lt]}}for(Lt=0;Lt<6;++Lt){for(var Yr=0;Yr<Wr.length;++Yr)br.color[Yr].target=zs+Lt;Lt>0&&(br.depth=Qe[0].depth,br.stencil=Qe[0].stencil,br.depthStencil=Qe[0].depthStencil),Qe[Lt]?Qe[Lt](br):Qe[Lt]=yt(br)}return s($e,{width:ur,height:ur,color:Wr})}function nr(Te){var Lt,br=Te|0;if(G(br>0&&br<=J.maxCubeMapSize,"invalid radius for cube fbo"),br===$e.width)return $e;var ur=$e.color;for(Lt=0;Lt<ur.length;++Lt)ur[Lt].resize(br);for(Lt=0;Lt<6;++Lt)Qe[Lt].resize(br);return $e.width=$e.height=br,$e}return $e(Et),s($e,{faces:Qe,resize:nr,_reglType:"framebufferCube",destroy:function(){Qe.forEach(function(Te){Te.destroy()})}})}function rr(){Ge.cur=null,Ge.next=null,Ge.dirty=!0,An(Je).forEach(function(Et){Et.framebuffer=A.createFramebuffer(),rt(Et)})}return s(Ge,{getFramebuffer:function(Et){if(typeof Et=="function"&&Et._reglType==="framebuffer"){var Qe=Et._framebuffer;if(Qe instanceof At)return Qe}return null},create:yt,createCube:$t,clear:function(){An(Je).forEach(vt)},restore:rr})}var Yh=5126,jl=34962;function Ml(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yh,this.offset=0,this.stride=0,this.divisor=0}function $h(A,U,J,Ie,Ve){for(var Ce=J.maxAttributes,Ge=new Array(Ce),ot=0;ot<Ce;++ot)Ge[ot]=new Ml;var at=0,ft={},ut={Record:Ml,scope:{},state:Ge,currentVAO:null,targetVAO:null,restore:_t()?Je:function(){},createVAO:At,getVAO:dt,destroyBuffer:pt,setVAO:_t()?Se:Ue,clear:_t()?st:function(){}};function pt(tt){for(var vt=0;vt<Ge.length;++vt){var rt=Ge[vt];rt.buffer===tt&&(A.disableVertexAttribArray(vt),rt.buffer=null)}}function _t(){return U.oes_vertex_array_object}function it(){return U.angle_instanced_arrays}function dt(tt){return typeof tt=="function"&&tt._vao?tt._vao:null}function Se(tt){if(tt!==ut.currentVAO){var vt=_t();tt?vt.bindVertexArrayOES(tt.vao):vt.bindVertexArrayOES(null),ut.currentVAO=tt}}function Ue(tt){if(tt!==ut.currentVAO){if(tt)tt.bindAttrs();else for(var vt=it(),rt=0;rt<Ge.length;++rt){var yt=Ge[rt];yt.buffer?(A.enableVertexAttribArray(rt),A.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offfset),vt&&yt.divisor&&vt.vertexAttribDivisorANGLE(rt,yt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}ut.currentVAO=tt}}function st(){An(ft).forEach(function(tt){tt.destroy()})}function St(){this.id=++at,this.attributes=[];var tt=_t();tt?this.vao=tt.createVertexArrayOES():this.vao=null,ft[this.id]=this,this.buffers=[]}St.prototype.bindAttrs=function(){for(var tt=it(),vt=this.attributes,rt=0;rt<vt.length;++rt){var yt=vt[rt];yt.buffer?(A.enableVertexAttribArray(rt),A.bindBuffer(jl,yt.buffer.buffer),A.vertexAttribPointer(rt,yt.size,yt.type,yt.normalized,yt.stride,yt.offset),tt&&yt.divisor&&tt.vertexAttribDivisorANGLE(rt,yt.divisor)):(A.disableVertexAttribArray(rt),A.vertexAttrib4f(rt,yt.x,yt.y,yt.z,yt.w))}for(var $t=vt.length;$t<Ce;++$t)A.disableVertexAttribArray($t)},St.prototype.refresh=function(){var tt=_t();tt&&(tt.bindVertexArrayOES(this.vao),this.bindAttrs(),ut.currentVAO=this)},St.prototype.destroy=function(){if(this.vao){var tt=_t();this===ut.currentVAO&&(ut.currentVAO=null,tt.bindVertexArrayOES(null)),tt.deleteVertexArrayOES(this.vao),this.vao=null}ft[this.id]&&(delete ft[this.id],Ie.vaoCount-=1)};function Je(){var tt=_t();tt&&An(ft).forEach(function(vt){vt.refresh()})}function At(tt){var vt=new St;Ie.vaoCount+=1;function rt(yt){G(Array.isArray(yt),"arguments to vertex array constructor must be an array"),G(yt.length<Ce,"too many attributes"),G(yt.length>0,"must specify at least one attribute");var $t={},rr=vt.attributes;rr.length=yt.length;for(var Et=0;Et<yt.length;++Et){var Qe=yt[Et],$e=rr[Et]=new Ml,nr=Qe.data||Qe;if(Array.isArray(nr)||o(nr)||Yn(nr)){var Te;vt.buffers[Et]&&(Te=vt.buffers[Et],o(nr)&&Te._buffer.byteLength>=nr.byteLength?Te.subdata(nr):(Te.destroy(),vt.buffers[Et]=null)),vt.buffers[Et]||(Te=vt.buffers[Et]=Ve.create(Qe,jl,!1,!0)),$e.buffer=Ve.getBuffer(Te),$e.size=$e.buffer.dimension|0,$e.normalized=!1,$e.type=$e.buffer.dtype,$e.offset=0,$e.stride=0,$e.divisor=0,$e.state=1,$t[Et]=1}else Ve.getBuffer(Qe)?($e.buffer=Ve.getBuffer(Qe),$e.size=$e.buffer.dimension|0,$e.normalized=!1,$e.type=$e.buffer.dtype,$e.offset=0,$e.stride=0,$e.divisor=0,$e.state=1):Ve.getBuffer(Qe.buffer)?($e.buffer=Ve.getBuffer(Qe.buffer),$e.size=(+Qe.size||$e.buffer.dimension)|0,$e.normalized=!!Qe.normalized||!1,"type"in Qe?(G.parameter(Qe.type,yo,"invalid buffer type"),$e.type=yo[Qe.type]):$e.type=$e.buffer.dtype,$e.offset=(Qe.offset||0)|0,$e.stride=(Qe.stride||0)|0,$e.divisor=(Qe.divisor||0)|0,$e.state=1,G($e.size>=1&&$e.size<=4,"size must be between 1 and 4"),G($e.offset>=0,"invalid offset"),G($e.stride>=0&&$e.stride<=255,"stride must be between 0 and 255"),G($e.divisor>=0,"divisor must be positive"),G(!$e.divisor||!!U.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Qe?(G(Et>0,"first attribute must not be a constant"),$e.x=+Qe.x||0,$e.y=+Qe.y||0,$e.z=+Qe.z||0,$e.w=+Qe.w||0,$e.state=2):G(!1,"invalid attribute spec for location "+Et)}for(var Lt=0;Lt<vt.buffers.length;++Lt)!$t[Lt]&&vt.buffers[Lt]&&(vt.buffers[Lt].destroy(),vt.buffers[Lt]=null);return vt.refresh(),rt}return rt.destroy=function(){for(var yt=0;yt<vt.buffers.length;++yt)vt.buffers[yt]&&vt.buffers[yt].destroy();vt.buffers.length=0,vt.destroy()},rt._vao=vt,rt._reglType="vao",rt(tt)}return ut}var Rl=35632,Kh=35633,yd=35718,gd=35721;function qh(A,U,J,Ie){var Ve={},Ce={};function Ge(Se,Ue,st,St){this.name=Se,this.id=Ue,this.location=st,this.info=St}function ot(Se,Ue){for(var st=0;st<Se.length;++st)if(Se[st].id===Ue.id){Se[st].location=Ue.location;return}Se.push(Ue)}function at(Se,Ue,st){var St=Se===Rl?Ve:Ce,Je=St[Ue];if(!Je){var At=U.str(Ue);Je=A.createShader(Se),A.shaderSource(Je,At),A.compileShader(Je),G.shaderError(A,Je,At,Se,st),St[Ue]=Je}return Je}var ft={},ut=[],pt=0;function _t(Se,Ue){this.id=pt++,this.fragId=Se,this.vertId=Ue,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ie.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function it(Se,Ue,st){var St,Je,At=at(Rl,Se.fragId),tt=at(Kh,Se.vertId),vt=Se.program=A.createProgram();if(A.attachShader(vt,At),A.attachShader(vt,tt),st)for(St=0;St<st.length;++St){var rt=st[St];A.bindAttribLocation(vt,rt[0],rt[1])}A.linkProgram(vt),G.linkError(A,vt,U.str(Se.fragId),U.str(Se.vertId),Ue);var yt=A.getProgramParameter(vt,yd);Ie.profile&&(Se.stats.uniformsCount=yt);var $t=Se.uniforms;for(St=0;St<yt;++St)if(Je=A.getActiveUniform(vt,St),Je)if(Je.size>1)for(var rr=0;rr<Je.size;++rr){var Et=Je.name.replace("[0]","["+rr+"]");ot($t,new Ge(Et,U.id(Et),A.getUniformLocation(vt,Et),Je))}else ot($t,new Ge(Je.name,U.id(Je.name),A.getUniformLocation(vt,Je.name),Je));var Qe=A.getProgramParameter(vt,gd);Ie.profile&&(Se.stats.attributesCount=Qe);var $e=Se.attributes;for(St=0;St<Qe;++St)Je=A.getActiveAttrib(vt,St),Je&&ot($e,new Ge(Je.name,U.id(Je.name),A.getAttribLocation(vt,Je.name),Je))}Ie.profile&&(J.getMaxUniformsCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.uniformsCount>Se&&(Se=Ue.stats.uniformsCount)}),Se},J.getMaxAttributesCount=function(){var Se=0;return ut.forEach(function(Ue){Ue.stats.attributesCount>Se&&(Se=Ue.stats.attributesCount)}),Se});function dt(){Ve={},Ce={};for(var Se=0;Se<ut.length;++Se)it(ut[Se],null,ut[Se].attributes.map(function(Ue){return[Ue.location,Ue.name]}))}return{clear:function(){var Se=A.deleteShader.bind(A);An(Ve).forEach(Se),Ve={},An(Ce).forEach(Se),Ce={},ut.forEach(function(Ue){A.deleteProgram(Ue.program)}),ut.length=0,ft={},J.shaderCount=0},program:function(Se,Ue,st,St){G.command(Se>=0,"missing vertex shader",st),G.command(Ue>=0,"missing fragment shader",st);var Je=ft[Ue];Je||(Je=ft[Ue]={});var At=Je[Se];if(At&&(At.refCount++,!St))return At;var tt=new _t(Ue,Se);return J.shaderCount++,it(tt,st,St),At||(Je[Se]=tt),ut.push(tt),s(tt,{destroy:function(){if(tt.refCount--,tt.refCount<=0){A.deleteProgram(tt.program);var vt=ut.indexOf(tt);ut.splice(vt,1),J.shaderCount--}Je[tt.vertId].refCount<=0&&(A.deleteShader(Ce[tt.vertId]),delete Ce[tt.vertId],delete ft[tt.fragId][tt.vertId]),Object.keys(ft[tt.fragId]).length||(A.deleteShader(Ve[tt.fragId]),delete Ve[tt.fragId],delete ft[tt.fragId])}})},restore:dt,shader:at,frag:-1,vert:-1}}var Qr=6408,Du=5121,sn=3333,Fa=5126;function Zh(A,U,J,Ie,Ve,Ce,Ge){function ot(ut){var pt;U.next===null?(G(Ve.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),pt=Du):(G(U.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),pt=U.next.colorAttachments[0].texture._texture.type,Ce.oes_texture_float?(G(pt===Du||pt===Fa,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),pt===Fa&&G(Ge.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):G(pt===Du,"Reading from a framebuffer is only allowed for the type 'uint8'"));var _t=0,it=0,dt=Ie.framebufferWidth,Se=Ie.framebufferHeight,Ue=null;o(ut)?Ue=ut:ut&&(G.type(ut,"object","invalid arguments to regl.read()"),_t=ut.x|0,it=ut.y|0,G(_t>=0&&_t<Ie.framebufferWidth,"invalid x offset for regl.read"),G(it>=0&&it<Ie.framebufferHeight,"invalid y offset for regl.read"),dt=(ut.width||Ie.framebufferWidth-_t)|0,Se=(ut.height||Ie.framebufferHeight-it)|0,Ue=ut.data||null),Ue&&(pt===Du?G(Ue instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):pt===Fa&&G(Ue instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),G(dt>0&&dt+_t<=Ie.framebufferWidth,"invalid width for read pixels"),G(Se>0&&Se+it<=Ie.framebufferHeight,"invalid height for read pixels"),J();var st=dt*Se*4;return Ue||(pt===Du?Ue=new Uint8Array(st):pt===Fa&&(Ue=Ue||new Float32Array(st))),G.isTypedArray(Ue,"data buffer for regl.read() must be a typedarray"),G(Ue.byteLength>=st,"data buffer for regl.read() too small"),A.pixelStorei(sn,4),A.readPixels(_t,it,dt,Se,Qr,pt,Ue),Ue}function at(ut){var pt;return U.setFBO({framebuffer:ut.framebuffer},function(){pt=ot(ut)}),pt}function ft(ut){return!ut||!("framebuffer"in ut)?ot(ut):at(ut)}return ft}function Ba(A){return Array.prototype.slice.call(A)}function Ga(A){return Ba(A).join("")}function md(){var A=0,U=[],J=[];function Ie(pt){for(var _t=0;_t<J.length;++_t)if(J[_t]===pt)return U[_t];var it="g"+A++;return U.push(it),J.push(pt),it}function Ve(){var pt=[];function _t(){pt.push.apply(pt,Ba(arguments))}var it=[];function dt(){var Se="v"+A++;return it.push(Se),arguments.length>0&&(pt.push(Se,"="),pt.push.apply(pt,Ba(arguments)),pt.push(";")),Se}return s(_t,{def:dt,toString:function(){return Ga([it.length>0?"var "+it.join(",")+";":"",Ga(pt)])}})}function Ce(){var pt=Ve(),_t=Ve(),it=pt.toString,dt=_t.toString;function Se(Ue,st){_t(Ue,st,"=",pt.def(Ue,st),";")}return s(function(){pt.apply(pt,Ba(arguments))},{def:pt.def,entry:pt,exit:_t,save:Se,set:function(Ue,st,St){Se(Ue,st),pt(Ue,st,"=",St,";")},toString:function(){return it()+dt()}})}function Ge(){var pt=Ga(arguments),_t=Ce(),it=Ce(),dt=_t.toString,Se=it.toString;return s(_t,{then:function(){return _t.apply(_t,Ba(arguments)),this},else:function(){return it.apply(it,Ba(arguments)),this},toString:function(){var Ue=Se();return Ue&&(Ue="else{"+Ue+"}"),Ga(["if(",pt,"){",dt(),"}",Ue])}})}var ot=Ve(),at={};function ft(pt,_t){var it=[];function dt(){var Je="a"+it.length;return it.push(Je),Je}_t=_t||0;for(var Se=0;Se<_t;++Se)dt();var Ue=Ce(),st=Ue.toString,St=at[pt]=s(Ue,{arg:dt,toString:function(){return Ga(["function(",it.join(),"){",st(),"}"])}});return St}function ut(){var pt=['"use strict";',ot,"return {"];Object.keys(at).forEach(function(dt){pt.push('"',dt,'":',at[dt].toString(),",")}),pt.push("}");var _t=Ga(pt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),it=Function.apply(null,U.concat(_t));return it.apply(null,J)}return{global:ot,link:Ie,block:Ve,proc:ft,scope:Ce,cond:Ge,compile:ut}}var Ua="xyzw".split(""),bd=5121,za=1,Cu=2,kl=0,Dl=1,Cl=2,Ws=3,Ys=4,Il=5,_d=6,Ed="dither",li="blend.enable",Ll="blend.color",Iu="blend.equation",$s="blend.func",Ks="depth.enable",qs="depth.func",Fl="depth.range",wd="depth.mask",Bl="colorMask",Od="cull.enable",xd="cull.face",kn="frontFace",Lu="lineWidth",Sd="polygonOffset.enable",Fu="polygonOffset.offset",fi="sample.alpha",Td="sample.enable",oa="sample.coverage",Zs="stencil.enable",Gl="stencil.mask",Js="stencil.func",Ul="stencil.opFront",nt="stencil.opBack",zl="scissor.enable",Bu="scissor.box",Yo="viewport",Ha="profile",Ai="framebuffer",Xa="vert",Va="frag",Pi="elements",Ni="primitive",ji="count",Gu="offset",Uu="instances",Wa="vao",Qs="Width",ec="Height",ia=Ai+Qs,aa=Ai+ec,Ad=Yo+Qs,Pd=Yo+ec,Hl="drawingBuffer",tc=Hl+Qs,zu=Hl+ec,Jh=[$s,Iu,Js,Ul,nt,oa,Yo,Bu,Fu],Jn=34962,Mi=34963,Qh=35632,mo=35633,Xl=3553,Vl=34067,Nd=2884,jd=3042,Md=3024,Rd=2960,kd=2929,Wl=3089,Hu=32823,Xn=32926,ev=32928,Yl=5126,Ya=35664,Xu=35665,Un=35666,hn=5124,rc=35667,Qn=35668,ar=35669,Vu=35670,$a=35671,Ka=35672,Wu=35673,qa=35674,Yu=35675,$u=35676,ua=35678,Ku=35680,nc=4,qu=1028,sa=1029,$l=2304,Ri=2305,Dd=32775,Or=32776,Cd=519,$o=7680,oc=0,Id=1,Kl=32774,Ld=513,ql=36160,tv=36064,Ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Fd=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],qo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ki={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ic={frag:Qh,vert:mo},Zl={cw:$l,ccw:Ri};function ac(A){return Array.isArray(A)||o(A)||Yn(A)}function Za(A){return A.sort(function(U,J){return U===Yo?-1:J===Yo?1:U<J?-1:1})}function vn(A,U,J,Ie){this.thisDep=A,this.contextDep=U,this.propDep=J,this.append=Ie}function Zo(A){return A&&!(A.thisDep||A.contextDep||A.propDep)}function Ir(A){return new vn(!1,!1,!1,A)}function Vn(A,U){var J=A.type;if(J===kl){var Ie=A.data.length;return new vn(!0,Ie>=1,Ie>=2,U)}else if(J===Ys){var Ve=A.data;return new vn(Ve.thisDep,Ve.contextDep,Ve.propDep,U)}else{if(J===Il)return new vn(!1,!1,!1,U);if(J===_d){for(var Ce=!1,Ge=!1,ot=!1,at=0;at<A.data.length;++at){var ft=A.data[at];if(ft.type===Dl)ot=!0;else if(ft.type===Cl)Ge=!0;else if(ft.type===Ws)Ce=!0;else if(ft.type===kl){Ce=!0;var ut=ft.data;ut>=1&&(Ge=!0),ut>=2&&(ot=!0)}else ft.type===Ys&&(Ce=Ce||ft.data.thisDep,Ge=Ge||ft.data.contextDep,ot=ot||ft.data.propDep)}return new vn(Ce,Ge,ot,U)}else return new vn(J===Ws,J===Cl,J===Dl,U)}}var Ja=new vn(!1,!1,!1,function(){});function rv(A,U,J,Ie,Ve,Ce,Ge,ot,at,ft,ut,pt,_t,it,dt){var Se=ft.Record,Ue={add:32774,subtract:32778,"reverse subtract":32779};J.ext_blend_minmax&&(Ue.min=Dd,Ue.max=Or);var st=J.angle_instanced_arrays,St=J.webgl_draw_buffers,Je={dirty:!0,profile:dt.profile},At={},tt=[],vt={},rt={};function yt(X){return X.replace(".","_")}function $t(X,k,ue){var Oe=yt(X);tt.push(X),At[Oe]=Je[Oe]=!!ue,vt[Oe]=k}function rr(X,k,ue){var Oe=yt(X);tt.push(X),Array.isArray(ue)?(Je[Oe]=ue.slice(),At[Oe]=ue.slice()):Je[Oe]=At[Oe]=ue,rt[Oe]=k}$t(Ed,Md),$t(li,jd),rr(Ll,"blendColor",[0,0,0,0]),rr(Iu,"blendEquationSeparate",[Kl,Kl]),rr($s,"blendFuncSeparate",[Id,oc,Id,oc]),$t(Ks,kd,!0),rr(qs,"depthFunc",Ld),rr(Fl,"depthRange",[0,1]),rr(wd,"depthMask",!0),rr(Bl,Bl,[!0,!0,!0,!0]),$t(Od,Nd),rr(xd,"cullFace",sa),rr(kn,kn,Ri),rr(Lu,Lu,1),$t(Sd,Hu),rr(Fu,"polygonOffset",[0,0]),$t(fi,Xn),$t(Td,ev),rr(oa,"sampleCoverage",[1,!1]),$t(Zs,Rd),rr(Gl,"stencilMask",-1),rr(Js,"stencilFunc",[Cd,0,-1]),rr(Ul,"stencilOpSeparate",[qu,$o,$o,$o]),rr(nt,"stencilOpSeparate",[sa,$o,$o,$o]),$t(zl,Wl),rr(Bu,"scissor",[0,0,A.drawingBufferWidth,A.drawingBufferHeight]),rr(Yo,Yo,[0,0,A.drawingBufferWidth,A.drawingBufferHeight]);var Et={gl:A,context:_t,strings:U,next:At,current:Je,draw:pt,elements:Ce,buffer:Ve,shader:ut,attributes:ft.state,vao:ft,uniforms:at,framebuffer:ot,extensions:J,timer:it,isBufferArgs:ac},Qe={primTypes:Pn,compareFuncs:qo,blendFuncs:Ko,blendEquations:Ue,stencilOps:ki,glTypes:yo,orientationType:Zl};G.optional(function(){Et.isArrayLike=E}),St&&(Qe.backBuffer=[sa],Qe.drawBuffer=Cr(Ie.maxDrawbuffers,function(X){return X===0?[0]:Cr(X,function(k){return tv+k})}));var $e=0;function nr(){var X=md(),k=X.link,ue=X.global;X.id=$e++,X.batchId="0";var Oe=k(Et),Pe=X.shared={props:"a0"};Object.keys(Et).forEach(function(re){Pe[re]=ue.def(Oe,".",re)}),G.optional(function(){X.CHECK=k(G),X.commandStr=G.guessCommand(),X.command=k(X.commandStr),X.assert=function(re,z,_e){re("if(!(",z,"))",this.CHECK,".commandRaise(",k(_e),",",this.command,");")},Qe.invalidBlendCombinations=Fd});var le=X.next={},oe=X.current={};Object.keys(rt).forEach(function(re){Array.isArray(Je[re])&&(le[re]=ue.def(Pe.next,".",re),oe[re]=ue.def(Pe.current,".",re))});var ge=X.constants={};Object.keys(Qe).forEach(function(re){ge[re]=ue.def(JSON.stringify(Qe[re]))}),X.invoke=function(re,z){switch(z.type){case kl:var _e=["this",Pe.context,Pe.props,X.batchId];return re.def(k(z.data),".call(",_e.slice(0,Math.max(z.data.length+1,4)),")");case Dl:return re.def(Pe.props,z.data);case Cl:return re.def(Pe.context,z.data);case Ws:return re.def("this",z.data);case Ys:return z.data.append(X,re),z.data.ref;case Il:return z.data.toString();case _d:return z.data.map(function(je){return X.invoke(re,je)})}},X.attribCache={};var H={};return X.scopeAttrib=function(re){var z=U.id(re);if(z in H)return H[z];var _e=ft.scope[z];_e||(_e=ft.scope[z]=new Se);var je=H[z]=k(_e);return je},X}function Te(X){var k=X.static,ue=X.dynamic,Oe;if(Ha in k){var Pe=!!k[Ha];Oe=Ir(function(oe,ge){return Pe}),Oe.enable=Pe}else if(Ha in ue){var le=ue[Ha];Oe=Vn(le,function(oe,ge){return oe.invoke(ge,le)})}return Oe}function Lt(X,k){var ue=X.static,Oe=X.dynamic;if(Ai in ue){var Pe=ue[Ai];return Pe?(Pe=ot.getFramebuffer(Pe),G.command(Pe,"invalid framebuffer object"),Ir(function(oe,ge){var H=oe.link(Pe),re=oe.shared;ge.set(re.framebuffer,".next",H);var z=re.context;return ge.set(z,"."+ia,H+".width"),ge.set(z,"."+aa,H+".height"),H})):Ir(function(oe,ge){var H=oe.shared;ge.set(H.framebuffer,".next","null");var re=H.context;return ge.set(re,"."+ia,re+"."+tc),ge.set(re,"."+aa,re+"."+zu),"null"})}else if(Ai in Oe){var le=Oe[Ai];return Vn(le,function(oe,ge){var H=oe.invoke(ge,le),re=oe.shared,z=re.framebuffer,_e=ge.def(z,".getFramebuffer(",H,")");G.optional(function(){oe.assert(ge,"!"+H+"||"+_e,"invalid framebuffer object")}),ge.set(z,".next",_e);var je=re.context;return ge.set(je,"."+ia,_e+"?"+_e+".width:"+je+"."+tc),ge.set(je,"."+aa,_e+"?"+_e+".height:"+je+"."+zu),_e})}else return null}function br(X,k,ue){var Oe=X.static,Pe=X.dynamic;function le(H){if(H in Oe){var re=Oe[H];G.commandType(re,"object","invalid "+H,ue.commandStr);var z=!0,_e=re.x|0,je=re.y|0,We,Ke;return"width"in re?(We=re.width|0,G.command(We>=0,"invalid "+H,ue.commandStr)):z=!1,"height"in re?(Ke=re.height|0,G.command(Ke>=0,"invalid "+H,ue.commandStr)):z=!1,new vn(!z&&k&&k.thisDep,!z&&k&&k.contextDep,!z&&k&&k.propDep,function(Ut,hr){var It=Ut.shared.context,Qt=We;"width"in re||(Qt=hr.def(It,".",ia,"-",_e));var fr=Ke;return"height"in re||(fr=hr.def(It,".",aa,"-",je)),[_e,je,Qt,fr]})}else if(H in Pe){var He=Pe[H],ct=Vn(He,function(Ut,hr){var It=Ut.invoke(hr,He);G.optional(function(){Ut.assert(hr,It+"&&typeof "+It+'==="object"',"invalid "+H)});var Qt=Ut.shared.context,fr=hr.def(It,".x|0"),jr=hr.def(It,".y|0"),on=hr.def('"width" in ',It,"?",It,".width|0:","(",Qt,".",ia,"-",fr,")"),eo=hr.def('"height" in ',It,"?",It,".height|0:","(",Qt,".",aa,"-",jr,")");return G.optional(function(){Ut.assert(hr,on+">=0&&"+eo+">=0","invalid "+H)}),[fr,jr,on,eo]});return k&&(ct.thisDep=ct.thisDep||k.thisDep,ct.contextDep=ct.contextDep||k.contextDep,ct.propDep=ct.propDep||k.propDep),ct}else return k?new vn(k.thisDep,k.contextDep,k.propDep,function(Ut,hr){var It=Ut.shared.context;return[0,0,hr.def(It,".",ia),hr.def(It,".",aa)]}):null}var oe=le(Yo);if(oe){var ge=oe;oe=new vn(oe.thisDep,oe.contextDep,oe.propDep,function(H,re){var z=ge.append(H,re),_e=H.shared.context;return re.set(_e,"."+Ad,z[2]),re.set(_e,"."+Pd,z[3]),z})}return{viewport:oe,scissor_box:le(Bu)}}function ur(X,k){var ue=X.static,Oe=typeof ue[Va]=="string"&&typeof ue[Xa]=="string";if(Oe){if(Object.keys(k.dynamic).length>0)return null;var Pe=k.static,le=Object.keys(Pe);if(le.length>0&&typeof Pe[le[0]]=="number"){for(var oe=[],ge=0;ge<le.length;++ge)G(typeof Pe[le[ge]]=="number","must specify all vertex attribute locations when using vaos"),oe.push([Pe[le[ge]]|0,le[ge]]);return oe}}return null}function mr(X,k,ue){var Oe=X.static,Pe=X.dynamic;function le(z){if(z in Oe){var _e=U.id(Oe[z]);G.optional(function(){ut.shader(ic[z],_e,G.guessCommand())});var je=Ir(function(){return _e});return je.id=_e,je}else if(z in Pe){var We=Pe[z];return Vn(We,function(Ke,He){var ct=Ke.invoke(He,We),Ut=He.def(Ke.shared.strings,".id(",ct,")");return G.optional(function(){He(Ke.shared.shader,".shader(",ic[z],",",Ut,",",Ke.command,");")}),Ut})}return null}var oe=le(Va),ge=le(Xa),H=null,re;return Zo(oe)&&Zo(ge)?(H=ut.program(ge.id,oe.id,null,ue),re=Ir(function(z,_e){return z.link(H)})):re=new vn(oe&&oe.thisDep||ge&&ge.thisDep,oe&&oe.contextDep||ge&&ge.contextDep,oe&&oe.propDep||ge&&ge.propDep,function(z,_e){var je=z.shared.shader,We;oe?We=oe.append(z,_e):We=_e.def(je,".",Va);var Ke;ge?Ke=ge.append(z,_e):Ke=_e.def(je,".",Xa);var He=je+".program("+Ke+","+We;return G.optional(function(){He+=","+z.command}),_e.def(He+")")}),{frag:oe,vert:ge,progVar:re,program:H}}function Mr(X,k){var ue=X.static,Oe=X.dynamic;function Pe(){if(Pi in ue){var z=ue[Pi];ac(z)?z=Ce.getElements(Ce.create(z,!0)):z&&(z=Ce.getElements(z),G.command(z,"invalid elements",k.commandStr));var _e=Ir(function(We,Ke){if(z){var He=We.link(z);return We.ELEMENTS=He,He}return We.ELEMENTS=null,null});return _e.value=z,_e}else if(Pi in Oe){var je=Oe[Pi];return Vn(je,function(We,Ke){var He=We.shared,ct=He.isBufferArgs,Ut=He.elements,hr=We.invoke(Ke,je),It=Ke.def("null"),Qt=Ke.def(ct,"(",hr,")"),fr=We.cond(Qt).then(It,"=",Ut,".createStream(",hr,");").else(It,"=",Ut,".getElements(",hr,");");return G.optional(function(){We.assert(fr.else,"!"+hr+"||"+It,"invalid elements")}),Ke.entry(fr),Ke.exit(We.cond(Qt).then(Ut,".destroyStream(",It,");")),We.ELEMENTS=It,It})}return null}var le=Pe();function oe(){if(Ni in ue){var z=ue[Ni];return G.commandParameter(z,Pn,"invalid primitve",k.commandStr),Ir(function(je,We){return Pn[z]})}else if(Ni in Oe){var _e=Oe[Ni];return Vn(_e,function(je,We){var Ke=je.constants.primTypes,He=je.invoke(We,_e);return G.optional(function(){je.assert(We,He+" in "+Ke,"invalid primitive, must be one of "+Object.keys(Pn))}),We.def(Ke,"[",He,"]")})}else if(le)return Zo(le)?le.value?Ir(function(je,We){return We.def(je.ELEMENTS,".primType")}):Ir(function(){return nc}):new vn(le.thisDep,le.contextDep,le.propDep,function(je,We){var Ke=je.ELEMENTS;return We.def(Ke,"?",Ke,".primType:",nc)});return null}function ge(z,_e){if(z in ue){var je=ue[z]|0;return G.command(!_e||je>=0,"invalid "+z,k.commandStr),Ir(function(Ke,He){return _e&&(Ke.OFFSET=je),je})}else if(z in Oe){var We=Oe[z];return Vn(We,function(Ke,He){var ct=Ke.invoke(He,We);return _e&&(Ke.OFFSET=ct,G.optional(function(){Ke.assert(He,ct+">=0","invalid "+z)})),ct})}else if(_e&&le)return Ir(function(Ke,He){return Ke.OFFSET="0",0});return null}var H=ge(Gu,!0);function re(){if(ji in ue){var z=ue[ji]|0;return G.command(typeof z=="number"&&z>=0,"invalid vertex count",k.commandStr),Ir(function(){return z})}else if(ji in Oe){var _e=Oe[ji];return Vn(_e,function(Ke,He){var ct=Ke.invoke(He,_e);return G.optional(function(){Ke.assert(He,"typeof "+ct+'==="number"&&'+ct+">=0&&"+ct+"===("+ct+"|0)","invalid vertex count")}),ct})}else if(le)if(Zo(le)){if(le)return H?new vn(H.thisDep,H.contextDep,H.propDep,function(Ke,He){var ct=He.def(Ke.ELEMENTS,".vertCount-",Ke.OFFSET);return G.optional(function(){Ke.assert(He,ct+">=0","invalid vertex offset/element buffer too small")}),ct}):Ir(function(Ke,He){return He.def(Ke.ELEMENTS,".vertCount")});var je=Ir(function(){return-1});return G.optional(function(){je.MISSING=!0}),je}else{var We=new vn(le.thisDep||H.thisDep,le.contextDep||H.contextDep,le.propDep||H.propDep,function(Ke,He){var ct=Ke.ELEMENTS;return Ke.OFFSET?He.def(ct,"?",ct,".vertCount-",Ke.OFFSET,":-1"):He.def(ct,"?",ct,".vertCount:-1")});return G.optional(function(){We.DYNAMIC=!0}),We}return null}return{elements:le,primitive:oe(),count:re(),instances:ge(Uu,!1),offset:H}}function cn(X,k){var ue=X.static,Oe=X.dynamic,Pe={};return tt.forEach(function(le){var oe=yt(le);function ge(H,re){if(le in ue){var z=H(ue[le]);Pe[oe]=Ir(function(){return z})}else if(le in Oe){var _e=Oe[le];Pe[oe]=Vn(_e,function(je,We){return re(je,We,je.invoke(We,_e))})}}switch(le){case Od:case li:case Ed:case Zs:case Ks:case zl:case Sd:case fi:case Td:case wd:return ge(function(H){return G.commandType(H,"boolean",le,k.commandStr),H},function(H,re,z){return G.optional(function(){H.assert(re,"typeof "+z+'==="boolean"',"invalid flag "+le,H.commandStr)}),z});case qs:return ge(function(H){return G.commandParameter(H,qo,"invalid "+le,k.commandStr),qo[H]},function(H,re,z){var _e=H.constants.compareFuncs;return G.optional(function(){H.assert(re,z+" in "+_e,"invalid "+le+", must be one of "+Object.keys(qo))}),re.def(_e,"[",z,"]")});case Fl:return ge(function(H){return G.command(E(H)&&H.length===2&&typeof H[0]=="number"&&typeof H[1]=="number"&&H[0]<=H[1],"depth range is 2d array",k.commandStr),H},function(H,re,z){G.optional(function(){H.assert(re,H.shared.isArrayLike+"("+z+")&&"+z+".length===2&&typeof "+z+'[0]==="number"&&typeof '+z+'[1]==="number"&&'+z+"[0]<="+z+"[1]","depth range must be a 2d array")});var _e=re.def("+",z,"[0]"),je=re.def("+",z,"[1]");return[_e,je]});case $s:return ge(function(H){G.commandType(H,"object","blend.func",k.commandStr);var re="srcRGB"in H?H.srcRGB:H.src,z="srcAlpha"in H?H.srcAlpha:H.src,_e="dstRGB"in H?H.dstRGB:H.dst,je="dstAlpha"in H?H.dstAlpha:H.dst;return G.commandParameter(re,Ko,oe+".srcRGB",k.commandStr),G.commandParameter(z,Ko,oe+".srcAlpha",k.commandStr),G.commandParameter(_e,Ko,oe+".dstRGB",k.commandStr),G.commandParameter(je,Ko,oe+".dstAlpha",k.commandStr),G.command(Fd.indexOf(re+", "+_e)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+re+", "+_e+")",k.commandStr),[Ko[re],Ko[_e],Ko[z],Ko[je]]},function(H,re,z){var _e=H.constants.blendFuncs;G.optional(function(){H.assert(re,z+"&&typeof "+z+'==="object"',"invalid blend func, must be an object")});function je(It,Qt){var fr=re.def('"',It,Qt,'" in ',z,"?",z,".",It,Qt,":",z,".",It);return G.optional(function(){H.assert(re,fr+" in "+_e,"invalid "+le+"."+It+Qt+", must be one of "+Object.keys(Ko))}),fr}var We=je("src","RGB"),Ke=je("dst","RGB");G.optional(function(){var It=H.constants.invalidBlendCombinations;H.assert(re,It+".indexOf("+We+'+", "+'+Ke+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var He=re.def(_e,"[",We,"]"),ct=re.def(_e,"[",je("src","Alpha"),"]"),Ut=re.def(_e,"[",Ke,"]"),hr=re.def(_e,"[",je("dst","Alpha"),"]");return[He,Ut,ct,hr]});case Iu:return ge(function(H){if(typeof H=="string")return G.commandParameter(H,Ue,"invalid "+le,k.commandStr),[Ue[H],Ue[H]];if(typeof H=="object")return G.commandParameter(H.rgb,Ue,le+".rgb",k.commandStr),G.commandParameter(H.alpha,Ue,le+".alpha",k.commandStr),[Ue[H.rgb],Ue[H.alpha]];G.commandRaise("invalid blend.equation",k.commandStr)},function(H,re,z){var _e=H.constants.blendEquations,je=re.def(),We=re.def(),Ke=H.cond("typeof ",z,'==="string"');return G.optional(function(){function He(ct,Ut,hr){H.assert(ct,hr+" in "+_e,"invalid "+Ut+", must be one of "+Object.keys(Ue))}He(Ke.then,le,z),H.assert(Ke.else,z+"&&typeof "+z+'==="object"',"invalid "+le),He(Ke.else,le+".rgb",z+".rgb"),He(Ke.else,le+".alpha",z+".alpha")}),Ke.then(je,"=",We,"=",_e,"[",z,"];"),Ke.else(je,"=",_e,"[",z,".rgb];",We,"=",_e,"[",z,".alpha];"),re(Ke),[je,We]});case Ll:return ge(function(H){return G.command(E(H)&&H.length===4,"blend.color must be a 4d array",k.commandStr),Cr(4,function(re){return+H[re]})},function(H,re,z){return G.optional(function(){H.assert(re,H.shared.isArrayLike+"("+z+")&&"+z+".length===4","blend.color must be a 4d array")}),Cr(4,function(_e){return re.def("+",z,"[",_e,"]")})});case Gl:return ge(function(H){return G.commandType(H,"number",oe,k.commandStr),H|0},function(H,re,z){return G.optional(function(){H.assert(re,"typeof "+z+'==="number"',"invalid stencil.mask")}),re.def(z,"|0")});case Js:return ge(function(H){G.commandType(H,"object",oe,k.commandStr);var re=H.cmp||"keep",z=H.ref||0,_e="mask"in H?H.mask:-1;return G.commandParameter(re,qo,le+".cmp",k.commandStr),G.commandType(z,"number",le+".ref",k.commandStr),G.commandType(_e,"number",le+".mask",k.commandStr),[qo[re],z,_e]},function(H,re,z){var _e=H.constants.compareFuncs;G.optional(function(){function He(){H.assert(re,Array.prototype.join.call(arguments,""),"invalid stencil.func")}He(z+"&&typeof ",z,'==="object"'),He('!("cmp" in ',z,")||(",z,".cmp in ",_e,")")});var je=re.def('"cmp" in ',z,"?",_e,"[",z,".cmp]",":",$o),We=re.def(z,".ref|0"),Ke=re.def('"mask" in ',z,"?",z,".mask|0:-1");return[je,We,Ke]});case Ul:case nt:return ge(function(H){G.commandType(H,"object",oe,k.commandStr);var re=H.fail||"keep",z=H.zfail||"keep",_e=H.zpass||"keep";return G.commandParameter(re,ki,le+".fail",k.commandStr),G.commandParameter(z,ki,le+".zfail",k.commandStr),G.commandParameter(_e,ki,le+".zpass",k.commandStr),[le===nt?sa:qu,ki[re],ki[z],ki[_e]]},function(H,re,z){var _e=H.constants.stencilOps;G.optional(function(){H.assert(re,z+"&&typeof "+z+'==="object"',"invalid "+le)});function je(We){return G.optional(function(){H.assert(re,'!("'+We+'" in '+z+")||("+z+"."+We+" in "+_e+")","invalid "+le+"."+We+", must be one of "+Object.keys(ki))}),re.def('"',We,'" in ',z,"?",_e,"[",z,".",We,"]:",$o)}return[le===nt?sa:qu,je("fail"),je("zfail"),je("zpass")]});case Fu:return ge(function(H){G.commandType(H,"object",oe,k.commandStr);var re=H.factor|0,z=H.units|0;return G.commandType(re,"number",oe+".factor",k.commandStr),G.commandType(z,"number",oe+".units",k.commandStr),[re,z]},function(H,re,z){G.optional(function(){H.assert(re,z+"&&typeof "+z+'==="object"',"invalid "+le)});var _e=re.def(z,".factor|0"),je=re.def(z,".units|0");return[_e,je]});case xd:return ge(function(H){var re=0;return H==="front"?re=qu:H==="back"&&(re=sa),G.command(!!re,oe,k.commandStr),re},function(H,re,z){return G.optional(function(){H.assert(re,z+'==="front"||'+z+'==="back"',"invalid cull.face")}),re.def(z,'==="front"?',qu,":",sa)});case Lu:return ge(function(H){return G.command(typeof H=="number"&&H>=Ie.lineWidthDims[0]&&H<=Ie.lineWidthDims[1],"invalid line width, must be a positive number between "+Ie.lineWidthDims[0]+" and "+Ie.lineWidthDims[1],k.commandStr),H},function(H,re,z){return G.optional(function(){H.assert(re,"typeof "+z+'==="number"&&'+z+">="+Ie.lineWidthDims[0]+"&&"+z+"<="+Ie.lineWidthDims[1],"invalid line width")}),z});case kn:return ge(function(H){return G.commandParameter(H,Zl,oe,k.commandStr),Zl[H]},function(H,re,z){return G.optional(function(){H.assert(re,z+'==="cw"||'+z+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),re.def(z+'==="cw"?'+$l+":"+Ri)});case Bl:return ge(function(H){return G.command(E(H)&&H.length===4,"color.mask must be length 4 array",k.commandStr),H.map(function(re){return!!re})},function(H,re,z){return G.optional(function(){H.assert(re,H.shared.isArrayLike+"("+z+")&&"+z+".length===4","invalid color.mask")}),Cr(4,function(_e){return"!!"+z+"["+_e+"]"})});case oa:return ge(function(H){G.command(typeof H=="object"&&H,oe,k.commandStr);var re="value"in H?H.value:1,z=!!H.invert;return G.command(typeof re=="number"&&re>=0&&re<=1,"sample.coverage.value must be a number between 0 and 1",k.commandStr),[re,z]},function(H,re,z){G.optional(function(){H.assert(re,z+"&&typeof "+z+'==="object"',"invalid sample.coverage")});var _e=re.def('"value" in ',z,"?+",z,".value:1"),je=re.def("!!",z,".invert");return[_e,je]})}}),Pe}function En(X,k){var ue=X.static,Oe=X.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var oe=ue[le],ge;if(typeof oe=="number"||typeof oe=="boolean")ge=Ir(function(){return oe});else if(typeof oe=="function"){var H=oe._reglType;H==="texture2d"||H==="textureCube"?ge=Ir(function(re){return re.link(oe)}):H==="framebuffer"||H==="framebufferCube"?(G.command(oe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+le+'"',k.commandStr),ge=Ir(function(re){return re.link(oe.color[0])})):G.commandRaise('invalid data for uniform "'+le+'"',k.commandStr)}else E(oe)?ge=Ir(function(re){var z=re.global.def("[",Cr(oe.length,function(_e){return G.command(typeof oe[_e]=="number"||typeof oe[_e]=="boolean","invalid uniform "+le,re.commandStr),oe[_e]}),"]");return z}):G.commandRaise('invalid or missing data for uniform "'+le+'"',k.commandStr);ge.value=oe,Pe[le]=ge}),Object.keys(Oe).forEach(function(le){var oe=Oe[le];Pe[le]=Vn(oe,function(ge,H){return ge.invoke(H,oe)})}),Pe}function xr(X,k){var ue=X.static,Oe=X.dynamic,Pe={};return Object.keys(ue).forEach(function(le){var oe=ue[le],ge=U.id(le),H=new Se;if(ac(oe))H.state=za,H.buffer=Ve.getBuffer(Ve.create(oe,Jn,!1,!0)),H.type=0;else{var re=Ve.getBuffer(oe);if(re)H.state=za,H.buffer=re,H.type=0;else if(G.command(typeof oe=="object"&&oe,"invalid data for attribute "+le,k.commandStr),"constant"in oe){var z=oe.constant;H.buffer="null",H.state=Cu,typeof z=="number"?H.x=z:(G.command(E(z)&&z.length>0&&z.length<=4,"invalid constant for attribute "+le,k.commandStr),Ua.forEach(function(Ut,hr){hr<z.length&&(H[Ut]=z[hr])}))}else{ac(oe.buffer)?re=Ve.getBuffer(Ve.create(oe.buffer,Jn,!1,!0)):re=Ve.getBuffer(oe.buffer),G.command(!!re,'missing buffer for attribute "'+le+'"',k.commandStr);var _e=oe.offset|0;G.command(_e>=0,'invalid offset for attribute "'+le+'"',k.commandStr);var je=oe.stride|0;G.command(je>=0&&je<256,'invalid stride for attribute "'+le+'", must be integer betweeen [0, 255]',k.commandStr);var We=oe.size|0;G.command(!("size"in oe)||We>0&&We<=4,'invalid size for attribute "'+le+'", must be 1,2,3,4',k.commandStr);var Ke=!!oe.normalized,He=0;"type"in oe&&(G.commandParameter(oe.type,yo,"invalid type for attribute "+le,k.commandStr),He=yo[oe.type]);var ct=oe.divisor|0;"divisor"in oe&&(G.command(ct===0||st,'cannot specify divisor for attribute "'+le+'", instancing not supported',k.commandStr),G.command(ct>=0,'invalid divisor for attribute "'+le+'"',k.commandStr)),G.optional(function(){var Ut=k.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(oe).forEach(function(It){G.command(hr.indexOf(It)>=0,'unknown parameter "'+It+'" for attribute pointer "'+le+'" (valid parameters are '+hr+")",Ut)})}),H.buffer=re,H.state=za,H.size=We,H.normalized=Ke,H.type=He||re.dtype,H.offset=_e,H.stride=je,H.divisor=ct}}Pe[le]=Ir(function(Ut,hr){var It=Ut.attribCache;if(ge in It)return It[ge];var Qt={isStream:!1};return Object.keys(H).forEach(function(fr){Qt[fr]=H[fr]}),H.buffer&&(Qt.buffer=Ut.link(H.buffer),Qt.type=Qt.type||Qt.buffer+".dtype"),It[ge]=Qt,Qt})}),Object.keys(Oe).forEach(function(le){var oe=Oe[le];function ge(H,re){var z=H.invoke(re,oe),_e=H.shared,je=H.constants,We=_e.isBufferArgs,Ke=_e.buffer;G.optional(function(){H.assert(re,z+"&&(typeof "+z+'==="object"||typeof '+z+'==="function")&&('+We+"("+z+")||"+Ke+".getBuffer("+z+")||"+Ke+".getBuffer("+z+".buffer)||"+We+"("+z+'.buffer)||("constant" in '+z+"&&(typeof "+z+'.constant==="number"||'+_e.isArrayLike+"("+z+".constant))))",'invalid dynamic attribute "'+le+'"')});var He={isStream:re.def(!1)},ct=new Se;ct.state=za,Object.keys(ct).forEach(function(Qt){He[Qt]=re.def(""+ct[Qt])});var Ut=He.buffer,hr=He.type;re("if(",We,"(",z,")){",He.isStream,"=true;",Ut,"=",Ke,".createStream(",Jn,",",z,");",hr,"=",Ut,".dtype;","}else{",Ut,"=",Ke,".getBuffer(",z,");","if(",Ut,"){",hr,"=",Ut,".dtype;",'}else if("constant" in ',z,"){",He.state,"=",Cu,";","if(typeof "+z+'.constant === "number"){',He[Ua[0]],"=",z,".constant;",Ua.slice(1).map(function(Qt){return He[Qt]}).join("="),"=0;","}else{",Ua.map(function(Qt,fr){return He[Qt]+"="+z+".constant.length>"+fr+"?"+z+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",We,"(",z,".buffer)){",Ut,"=",Ke,".createStream(",Jn,",",z,".buffer);","}else{",Ut,"=",Ke,".getBuffer(",z,".buffer);","}",hr,'="type" in ',z,"?",je.glTypes,"[",z,".type]:",Ut,".dtype;",He.normalized,"=!!",z,".normalized;");function It(Qt){re(He[Qt],"=",z,".",Qt,"|0;")}return It("size"),It("offset"),It("stride"),It("divisor"),re("}}"),re.exit("if(",He.isStream,"){",Ke,".destroyStream(",Ut,");","}"),He}Pe[le]=Vn(oe,ge)}),Pe}function yn(X,k){var ue=X.static,Oe=X.dynamic;if(Wa in ue){var Pe=ue[Wa];return Pe!==null&&ft.getVAO(Pe)===null&&(Pe=ft.createVAO(Pe)),Ir(function(oe){return oe.link(ft.getVAO(Pe))})}else if(Wa in Oe){var le=Oe[Wa];return Vn(le,function(oe,ge){var H=oe.invoke(ge,le);return ge.def(oe.shared.vao+".getVAO("+H+")")})}return null}function Wr(X){var k=X.static,ue=X.dynamic,Oe={};return Object.keys(k).forEach(function(Pe){var le=k[Pe];Oe[Pe]=Ir(function(oe,ge){return typeof le=="number"||typeof le=="boolean"?""+le:oe.link(le)})}),Object.keys(ue).forEach(function(Pe){var le=ue[Pe];Oe[Pe]=Vn(le,function(oe,ge){return oe.invoke(ge,le)})}),Oe}function ln(X,k,ue,Oe,Pe){var le=X.static,oe=X.dynamic;G.optional(function(){var It=[Ai,Xa,Va,Pi,Ni,Gu,ji,Uu,Ha,Wa].concat(tt);function Qt(fr){Object.keys(fr).forEach(function(jr){G.command(It.indexOf(jr)>=0,'unknown parameter "'+jr+'"',Pe.commandStr)})}Qt(le),Qt(oe)});var ge=ur(X,k),H=Lt(X),re=br(X,H,Pe),z=Mr(X,Pe),_e=cn(X,Pe),je=mr(X,Pe,ge);function We(It){var Qt=re[It];Qt&&(_e[It]=Qt)}We(Yo),We(yt(Bu));var Ke=Object.keys(_e).length>0,He={framebuffer:H,draw:z,shader:je,state:_e,dirty:Ke,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(He.profile=Te(X),He.uniforms=En(ue,Pe),He.drawVAO=He.scopeVAO=yn(X),!He.drawVAO&&je.program&&!ge&&J.angle_instanced_arrays){var ct=!0,Ut=je.program.attributes.map(function(It){var Qt=k.static[It];return ct=ct&&!!Qt,Qt});if(ct&&Ut.length>0){var hr=ft.getVAO(ft.createVAO(Ut));He.drawVAO=new vn(null,null,null,function(It,Qt){return It.link(hr)}),He.useVAO=!0}}return ge?He.useVAO=!0:He.attributes=xr(k,Pe),He.context=Wr(Oe),He}function gn(X,k,ue){var Oe=X.shared,Pe=Oe.context,le=X.scope();Object.keys(ue).forEach(function(oe){k.save(Pe,"."+oe);var ge=ue[oe],H=ge.append(X,k);Array.isArray(H)?le(Pe,".",oe,"=[",H.join(),"];"):le(Pe,".",oe,"=",H,";")}),k(le)}function Yr(X,k,ue,Oe){var Pe=X.shared,le=Pe.gl,oe=Pe.framebuffer,ge;St&&(ge=k.def(Pe.extensions,".webgl_draw_buffers"));var H=X.constants,re=H.drawBuffer,z=H.backBuffer,_e;ue?_e=ue.append(X,k):_e=k.def(oe,".next"),Oe||k("if(",_e,"!==",oe,".cur){"),k("if(",_e,"){",le,".bindFramebuffer(",ql,",",_e,".framebuffer);"),St&&k(ge,".drawBuffersWEBGL(",re,"[",_e,".colorAttachments.length]);"),k("}else{",le,".bindFramebuffer(",ql,",null);"),St&&k(ge,".drawBuffersWEBGL(",z,");"),k("}",oe,".cur=",_e,";"),Oe||k("}")}function Sn(X,k,ue){var Oe=X.shared,Pe=Oe.gl,le=X.current,oe=X.next,ge=Oe.current,H=Oe.next,re=X.cond(ge,".dirty");tt.forEach(function(z){var _e=yt(z);if(!(_e in ue.state)){var je,We;if(_e in oe){je=oe[_e],We=le[_e];var Ke=Cr(Je[_e].length,function(ct){return re.def(je,"[",ct,"]")});re(X.cond(Ke.map(function(ct,Ut){return ct+"!=="+We+"["+Ut+"]"}).join("||")).then(Pe,".",rt[_e],"(",Ke,");",Ke.map(function(ct,Ut){return We+"["+Ut+"]="+ct}).join(";"),";"))}else{je=re.def(H,".",_e);var He=X.cond(je,"!==",ge,".",_e);re(He),_e in vt?He(X.cond(je).then(Pe,".enable(",vt[_e],");").else(Pe,".disable(",vt[_e],");"),ge,".",_e,"=",je,";"):He(Pe,".",rt[_e],"(",je,");",ge,".",_e,"=",je,";")}}}),Object.keys(ue.state).length===0&&re(ge,".dirty=false;"),k(re)}function Fn(X,k,ue,Oe){var Pe=X.shared,le=X.current,oe=Pe.current,ge=Pe.gl;Za(Object.keys(ue)).forEach(function(H){var re=ue[H];if(!(Oe&&!Oe(re))){var z=re.append(X,k);if(vt[H]){var _e=vt[H];Zo(re)?z?k(ge,".enable(",_e,");"):k(ge,".disable(",_e,");"):k(X.cond(z).then(ge,".enable(",_e,");").else(ge,".disable(",_e,");")),k(oe,".",H,"=",z,";")}else if(E(z)){var je=le[H];k(ge,".",rt[H],"(",z,");",z.map(function(We,Ke){return je+"["+Ke+"]="+We}).join(";"),";")}else k(ge,".",rt[H],"(",z,");",oe,".",H,"=",z,";")}})}function nn(X,k){st&&(X.instancing=k.def(X.shared.extensions,".angle_instanced_arrays"))}function lr(X,k,ue,Oe,Pe){var le=X.shared,oe=X.stats,ge=le.current,H=le.timer,re=ue.profile;function z(){return typeof performance>"u"?"Date.now()":"performance.now()"}var _e,je;function We(It){_e=k.def(),It(_e,"=",z(),";"),typeof Pe=="string"?It(oe,".count+=",Pe,";"):It(oe,".count++;"),it&&(Oe?(je=k.def(),It(je,"=",H,".getNumPendingQueries();")):It(H,".beginQuery(",oe,");"))}function Ke(It){It(oe,".cpuTime+=",z(),"-",_e,";"),it&&(Oe?It(H,".pushScopeStats(",je,",",H,".getNumPendingQueries(),",oe,");"):It(H,".endQuery();"))}function He(It){var Qt=k.def(ge,".profile");k(ge,".profile=",It,";"),k.exit(ge,".profile=",Qt,";")}var ct;if(re){if(Zo(re)){re.enable?(We(k),Ke(k.exit),He("true")):He("false");return}ct=re.append(X,k),He(ct)}else ct=k.def(ge,".profile");var Ut=X.block();We(Ut),k("if(",ct,"){",Ut,"}");var hr=X.block();Ke(hr),k.exit("if(",ct,"){",hr,"}")}function mn(X,k,ue,Oe,Pe){var le=X.shared;function oe(H){switch(H){case Ya:case rc:case $a:return 2;case Xu:case Qn:case Ka:return 3;case Un:case ar:case Wu:return 4;default:return 1}}function ge(H,re,z){var _e=le.gl,je=k.def(H,".location"),We=k.def(le.attributes,"[",je,"]"),Ke=z.state,He=z.buffer,ct=[z.x,z.y,z.z,z.w],Ut=["buffer","normalized","offset","stride"];function hr(){k("if(!",We,".buffer){",_e,".enableVertexAttribArray(",je,");}");var Qt=z.type,fr;if(z.size?fr=k.def(z.size,"||",re):fr=re,k("if(",We,".type!==",Qt,"||",We,".size!==",fr,"||",Ut.map(function(on){return We+"."+on+"!=="+z[on]}).join("||"),"){",_e,".bindBuffer(",Jn,",",He,".buffer);",_e,".vertexAttribPointer(",[je,fr,Qt,z.normalized,z.stride,z.offset],");",We,".type=",Qt,";",We,".size=",fr,";",Ut.map(function(on){return We+"."+on+"="+z[on]+";"}).join(""),"}"),st){var jr=z.divisor;k("if(",We,".divisor!==",jr,"){",X.instancing,".vertexAttribDivisorANGLE(",[je,jr],");",We,".divisor=",jr,";}")}}function It(){k("if(",We,".buffer){",_e,".disableVertexAttribArray(",je,");",We,".buffer=null;","}if(",Ua.map(function(Qt,fr){return We+"."+Qt+"!=="+ct[fr]}).join("||"),"){",_e,".vertexAttrib4f(",je,",",ct,");",Ua.map(function(Qt,fr){return We+"."+Qt+"="+ct[fr]+";"}).join(""),"}")}Ke===za?hr():Ke===Cu?It():(k("if(",Ke,"===",za,"){"),hr(),k("}else{"),It(),k("}"))}Oe.forEach(function(H){var re=H.name,z=ue.attributes[re],_e;if(z){if(!Pe(z))return;_e=z.append(X,k)}else{if(!Pe(Ja))return;var je=X.scopeAttrib(re);G.optional(function(){X.assert(k,je+".state","missing attribute "+re)}),_e={},Object.keys(new Se).forEach(function(We){_e[We]=k.def(je,".",We)})}ge(X.link(H),oe(H.info.type),_e)})}function Nr(X,k,ue,Oe,Pe){for(var le=X.shared,oe=le.gl,ge,H=0;H<Oe.length;++H){var re=Oe[H],z=re.name,_e=re.info.type,je=ue.uniforms[z],We=X.link(re),Ke=We+".location",He;if(je){if(!Pe(je))continue;if(Zo(je)){var ct=je.value;if(G.command(ct!==null&&typeof ct<"u",'missing uniform "'+z+'"',X.commandStr),_e===ua||_e===Ku){G.command(typeof ct=="function"&&(_e===ua&&(ct._reglType==="texture2d"||ct._reglType==="framebuffer")||_e===Ku&&(ct._reglType==="textureCube"||ct._reglType==="framebufferCube")),"invalid texture for uniform "+z,X.commandStr);var Ut=X.link(ct._texture||ct.color[0]._texture);k(oe,".uniform1i(",Ke,",",Ut+".bind());"),k.exit(Ut,".unbind();")}else if(_e===qa||_e===Yu||_e===$u){G.optional(function(){G.command(E(ct),"invalid matrix for uniform "+z,X.commandStr),G.command(_e===qa&&ct.length===4||_e===Yu&&ct.length===9||_e===$u&&ct.length===16,"invalid length for matrix uniform "+z,X.commandStr)});var hr=X.global.def("new Float32Array(["+Array.prototype.slice.call(ct)+"])"),It=2;_e===Yu?It=3:_e===$u&&(It=4),k(oe,".uniformMatrix",It,"fv(",Ke,",false,",hr,");")}else{switch(_e){case Yl:G.commandType(ct,"number","uniform "+z,X.commandStr),ge="1f";break;case Ya:G.command(E(ct)&&ct.length===2,"uniform "+z,X.commandStr),ge="2f";break;case Xu:G.command(E(ct)&&ct.length===3,"uniform "+z,X.commandStr),ge="3f";break;case Un:G.command(E(ct)&&ct.length===4,"uniform "+z,X.commandStr),ge="4f";break;case Vu:G.commandType(ct,"boolean","uniform "+z,X.commandStr),ge="1i";break;case hn:G.commandType(ct,"number","uniform "+z,X.commandStr),ge="1i";break;case $a:G.command(E(ct)&&ct.length===2,"uniform "+z,X.commandStr),ge="2i";break;case rc:G.command(E(ct)&&ct.length===2,"uniform "+z,X.commandStr),ge="2i";break;case Ka:G.command(E(ct)&&ct.length===3,"uniform "+z,X.commandStr),ge="3i";break;case Qn:G.command(E(ct)&&ct.length===3,"uniform "+z,X.commandStr),ge="3i";break;case Wu:G.command(E(ct)&&ct.length===4,"uniform "+z,X.commandStr),ge="4i";break;case ar:G.command(E(ct)&&ct.length===4,"uniform "+z,X.commandStr),ge="4i";break}k(oe,".uniform",ge,"(",Ke,",",E(ct)?Array.prototype.slice.call(ct):ct,");")}continue}else He=je.append(X,k)}else{if(!Pe(Ja))continue;He=k.def(le.uniforms,"[",U.id(z),"]")}_e===ua?(G(!Array.isArray(He),"must specify a scalar prop for textures"),k("if(",He,"&&",He,'._reglType==="framebuffer"){',He,"=",He,".color[0];","}")):_e===Ku&&(G(!Array.isArray(He),"must specify a scalar prop for cube maps"),k("if(",He,"&&",He,'._reglType==="framebufferCube"){',He,"=",He,".color[0];","}")),G.optional(function(){function eo(_o,Xd){X.assert(k,_o,'bad data or missing for uniform "'+z+'".  '+Xd)}function eu(_o){G(!Array.isArray(He),"must not specify an array type for uniform"),eo("typeof "+He+'==="'+_o+'"',"invalid type, expected "+_o)}function bo(_o,Xd){Array.isArray(He)?G(He.length===_o,"must have length "+_o):eo(le.isArrayLike+"("+He+")&&"+He+".length==="+_o,"invalid vector, should have length "+_o,X.commandStr)}function Hd(_o){G(!Array.isArray(He),"must not specify a value type"),eo("typeof "+He+'==="function"&&'+He+'._reglType==="texture'+(_o===Xl?"2d":"Cube")+'"',"invalid texture type",X.commandStr)}switch(_e){case hn:eu("number");break;case rc:bo(2);break;case Qn:bo(3);break;case ar:bo(4);break;case Yl:eu("number");break;case Ya:bo(2);break;case Xu:bo(3);break;case Un:bo(4);break;case Vu:eu("boolean");break;case $a:bo(2);break;case Ka:bo(3);break;case Wu:bo(4);break;case qa:bo(4);break;case Yu:bo(9);break;case $u:bo(16);break;case ua:Hd(Xl);break;case Ku:Hd(Vl);break}});var Qt=1;switch(_e){case ua:case Ku:var fr=k.def(He,"._texture");k(oe,".uniform1i(",Ke,",",fr,".bind());"),k.exit(fr,".unbind();");continue;case hn:case Vu:ge="1i";break;case rc:case $a:ge="2i",Qt=2;break;case Qn:case Ka:ge="3i",Qt=3;break;case ar:case Wu:ge="4i",Qt=4;break;case Yl:ge="1f";break;case Ya:ge="2f",Qt=2;break;case Xu:ge="3f",Qt=3;break;case Un:ge="4f",Qt=4;break;case qa:ge="Matrix2fv";break;case Yu:ge="Matrix3fv";break;case $u:ge="Matrix4fv";break}if(k(oe,".uniform",ge,"(",Ke,","),ge.charAt(0)==="M"){var jr=Math.pow(_e-qa+2,2),on=X.global.def("new Float32Array(",jr,")");Array.isArray(He)?k("false,(",Cr(jr,function(eo){return on+"["+eo+"]="+He[eo]}),",",on,")"):k("false,(Array.isArray(",He,")||",He," instanceof Float32Array)?",He,":(",Cr(jr,function(eo){return on+"["+eo+"]="+He+"["+eo+"]"}),",",on,")")}else Qt>1?k(Cr(Qt,function(eo){return Array.isArray(He)?He[eo]:He+"["+eo+"]"})):(G(!Array.isArray(He),"uniform value must not be an array"),k(He));k(");")}}function Jt(X,k,ue,Oe){var Pe=X.shared,le=Pe.gl,oe=Pe.draw,ge=Oe.draw;function H(){var fr=ge.elements,jr,on=k;return fr?((fr.contextDep&&Oe.contextDynamic||fr.propDep)&&(on=ue),jr=fr.append(X,on)):jr=on.def(oe,".",Pi),jr&&on("if("+jr+")"+le+".bindBuffer("+Mi+","+jr+".buffer.buffer);"),jr}function re(){var fr=ge.count,jr,on=k;return fr?((fr.contextDep&&Oe.contextDynamic||fr.propDep)&&(on=ue),jr=fr.append(X,on),G.optional(function(){fr.MISSING&&X.assert(k,"false","missing vertex count"),fr.DYNAMIC&&X.assert(on,jr+">=0","missing vertex count")})):(jr=on.def(oe,".",ji),G.optional(function(){X.assert(on,jr+">=0","missing vertex count")})),jr}var z=H();function _e(fr){var jr=ge[fr];return jr?jr.contextDep&&Oe.contextDynamic||jr.propDep?jr.append(X,ue):jr.append(X,k):k.def(oe,".",fr)}var je=_e(Ni),We=_e(Gu),Ke=re();if(typeof Ke=="number"){if(Ke===0)return}else ue("if(",Ke,"){"),ue.exit("}");var He,ct;st&&(He=_e(Uu),ct=X.instancing);var Ut=z+".type",hr=ge.elements&&Zo(ge.elements);function It(){function fr(){ue(ct,".drawElementsInstancedANGLE(",[je,Ke,Ut,We+"<<(("+Ut+"-"+bd+")>>1)",He],");")}function jr(){ue(ct,".drawArraysInstancedANGLE(",[je,We,Ke,He],");")}z?hr?fr():(ue("if(",z,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}function Qt(){function fr(){ue(le+".drawElements("+[je,Ke,Ut,We+"<<(("+Ut+"-"+bd+")>>1)"]+");")}function jr(){ue(le+".drawArrays("+[je,We,Ke]+");")}z?hr?fr():(ue("if(",z,"){"),fr(),ue("}else{"),jr(),ue("}")):jr()}st&&(typeof He!="number"||He>=0)?typeof He=="string"?(ue("if(",He,">0){"),It(),ue("}else if(",He,"<0){"),Qt(),ue("}")):It():Qt()}function _r(X,k,ue,Oe,Pe){var le=nr(),oe=le.proc("body",Pe);return G.optional(function(){le.commandStr=k.commandStr,le.command=le.link(k.commandStr)}),st&&(le.instancing=oe.def(le.shared.extensions,".angle_instanced_arrays")),X(le,oe,ue,Oe),le.compile().body}function Sr(X,k,ue,Oe){nn(X,k),ue.useVAO?ue.drawVAO?k(X.shared.vao,".setVAO(",ue.drawVAO.append(X,k),");"):k(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(k(X.shared.vao,".setVAO(null);"),mn(X,k,ue,Oe.attributes,function(){return!0})),Nr(X,k,ue,Oe.uniforms,function(){return!0}),Jt(X,k,k,ue)}function Br(X,k){var ue=X.proc("draw",1);nn(X,ue),gn(X,ue,k.context),Yr(X,ue,k.framebuffer),Sn(X,ue,k),Fn(X,ue,k.state),lr(X,ue,k,!1,!0);var Oe=k.shader.progVar.append(X,ue);if(ue(X.shared.gl,".useProgram(",Oe,".program);"),k.shader.program)Sr(X,ue,k,k.shader.program);else{ue(X.shared.vao,".setVAO(null);");var Pe=X.global.def("{}"),le=ue.def(Oe,".id"),oe=ue.def(Pe,"[",le,"]");ue(X.cond(oe).then(oe,".call(this,a0);").else(oe,"=",Pe,"[",le,"]=",X.link(function(ge){return _r(Sr,X,k,ge,1)}),"(",Oe,");",oe,".call(this,a0);"))}Object.keys(k.state).length>0&&ue(X.shared.current,".dirty=true;")}function Jo(X,k,ue,Oe){X.batchId="a1",nn(X,k);function Pe(){return!0}mn(X,k,ue,Oe.attributes,Pe),Nr(X,k,ue,Oe.uniforms,Pe),Jt(X,k,k,ue)}function Wn(X,k,ue,Oe){nn(X,k);var Pe=ue.contextDep,le=k.def(),oe="a0",ge="a1",H=k.def();X.shared.props=H,X.batchId=le;var re=X.scope(),z=X.scope();k(re.entry,"for(",le,"=0;",le,"<",ge,";++",le,"){",H,"=",oe,"[",le,"];",z,"}",re.exit);function _e(Ut){return Ut.contextDep&&Pe||Ut.propDep}function je(Ut){return!_e(Ut)}if(ue.needsContext&&gn(X,z,ue.context),ue.needsFramebuffer&&Yr(X,z,ue.framebuffer),Fn(X,z,ue.state,_e),ue.profile&&_e(ue.profile)&&lr(X,z,ue,!1,!0),Oe)ue.useVAO?ue.drawVAO?_e(ue.drawVAO)?z(X.shared.vao,".setVAO(",ue.drawVAO.append(X,z),");"):re(X.shared.vao,".setVAO(",ue.drawVAO.append(X,re),");"):re(X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"):(re(X.shared.vao,".setVAO(null);"),mn(X,re,ue,Oe.attributes,je),mn(X,z,ue,Oe.attributes,_e)),Nr(X,re,ue,Oe.uniforms,je),Nr(X,z,ue,Oe.uniforms,_e),Jt(X,re,z,ue);else{var We=X.global.def("{}"),Ke=ue.shader.progVar.append(X,z),He=z.def(Ke,".id"),ct=z.def(We,"[",He,"]");z(X.shared.gl,".useProgram(",Ke,".program);","if(!",ct,"){",ct,"=",We,"[",He,"]=",X.link(function(Ut){return _r(Jo,X,ue,Ut,2)}),"(",Ke,");}",ct,".call(this,a0[",le,"],",le,");")}}function B(X,k){var ue=X.proc("batch",2);X.batchId="0",nn(X,ue);var Oe=!1,Pe=!0;Object.keys(k.context).forEach(function(We){Oe=Oe||k.context[We].propDep}),Oe||(gn(X,ue,k.context),Pe=!1);var le=k.framebuffer,oe=!1;le?(le.propDep?Oe=oe=!0:le.contextDep&&Oe&&(oe=!0),oe||Yr(X,ue,le)):Yr(X,ue,null),k.state.viewport&&k.state.viewport.propDep&&(Oe=!0);function ge(We){return We.contextDep&&Oe||We.propDep}Sn(X,ue,k),Fn(X,ue,k.state,function(We){return!ge(We)}),(!k.profile||!ge(k.profile))&&lr(X,ue,k,!1,"a1"),k.contextDep=Oe,k.needsContext=Pe,k.needsFramebuffer=oe;var H=k.shader.progVar;if(H.contextDep&&Oe||H.propDep)Wn(X,ue,k,null);else{var re=H.append(X,ue);if(ue(X.shared.gl,".useProgram(",re,".program);"),k.shader.program)Wn(X,ue,k,k.shader.program);else{ue(X.shared.vao,".setVAO(null);");var z=X.global.def("{}"),_e=ue.def(re,".id"),je=ue.def(z,"[",_e,"]");ue(X.cond(je).then(je,".call(this,a0,a1);").else(je,"=",z,"[",_e,"]=",X.link(function(We){return _r(Wn,X,k,We,2)}),"(",re,");",je,".call(this,a0,a1);"))}}Object.keys(k.state).length>0&&ue(X.shared.current,".dirty=true;")}function Le(X,k){var ue=X.proc("scope",3);X.batchId="a2";var Oe=X.shared,Pe=Oe.current;gn(X,ue,k.context),k.framebuffer&&k.framebuffer.append(X,ue),Za(Object.keys(k.state)).forEach(function(oe){var ge=k.state[oe],H=ge.append(X,ue);E(H)?H.forEach(function(re,z){ue.set(X.next[oe],"["+z+"]",re)}):ue.set(Oe.next,"."+oe,H)}),lr(X,ue,k,!0,!0),[Pi,Gu,ji,Uu,Ni].forEach(function(oe){var ge=k.draw[oe];ge&&ue.set(Oe.draw,"."+oe,""+ge.append(X,ue))}),Object.keys(k.uniforms).forEach(function(oe){var ge=k.uniforms[oe].append(X,ue);Array.isArray(ge)&&(ge="["+ge.join()+"]"),ue.set(Oe.uniforms,"["+U.id(oe)+"]",ge)}),Object.keys(k.attributes).forEach(function(oe){var ge=k.attributes[oe].append(X,ue),H=X.scopeAttrib(oe);Object.keys(new Se).forEach(function(re){ue.set(H,"."+re,ge[re])})}),k.scopeVAO&&ue.set(Oe.vao,".targetVAO",k.scopeVAO.append(X,ue));function le(oe){var ge=k.shader[oe];ge&&ue.set(Oe.shader,"."+oe,ge.append(X,ue))}le(Xa),le(Va),Object.keys(k.state).length>0&&(ue(Pe,".dirty=true;"),ue.exit(Pe,".dirty=true;")),ue("a1(",X.shared.context,",a0,",X.batchId,");")}function ke(X){if(!(typeof X!="object"||E(X))){for(var k=Object.keys(X),ue=0;ue<k.length;++ue)if(wt.isDynamic(X[k[ue]]))return!0;return!1}}function jt(X,k,ue){var Oe=k.static[ue];if(!Oe||!ke(Oe))return;var Pe=X.global,le=Object.keys(Oe),oe=!1,ge=!1,H=!1,re=X.global.def("{}");le.forEach(function(_e){var je=Oe[_e];if(wt.isDynamic(je)){typeof je=="function"&&(je=Oe[_e]=wt.unbox(je));var We=Vn(je,null);oe=oe||We.thisDep,H=H||We.propDep,ge=ge||We.contextDep}else{switch(Pe(re,".",_e,"="),typeof je){case"number":Pe(je);break;case"string":Pe('"',je,'"');break;case"object":Array.isArray(je)&&Pe("[",je.join(),"]");break;default:Pe(X.link(je));break}Pe(";")}});function z(_e,je){le.forEach(function(We){var Ke=Oe[We];if(wt.isDynamic(Ke)){var He=_e.invoke(je,Ke);je(re,".",We,"=",He,";")}})}k.dynamic[ue]=new wt.DynamicVariable(Ys,{thisDep:oe,contextDep:ge,propDep:H,ref:re,append:z}),delete k.static[ue]}function Er(X,k,ue,Oe,Pe){var le=nr();le.stats=le.link(Pe),Object.keys(k.static).forEach(function(ge){jt(le,k,ge)}),Jh.forEach(function(ge){jt(le,X,ge)});var oe=ln(X,k,ue,Oe,le);return Br(le,oe),Le(le,oe),B(le,oe),s(le.compile(),{destroy:function(){oe.shader.program.destroy()}})}return{next:At,current:Je,procs:function(){var X=nr(),k=X.proc("poll"),ue=X.proc("refresh"),Oe=X.block();k(Oe),ue(Oe);var Pe=X.shared,le=Pe.gl,oe=Pe.next,ge=Pe.current;Oe(ge,".dirty=false;"),Yr(X,k),Yr(X,ue,null,!0);var H;st&&(H=X.link(st)),J.oes_vertex_array_object&&ue(X.link(J.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var re=0;re<Ie.maxAttributes;++re){var z=ue.def(Pe.attributes,"[",re,"]"),_e=X.cond(z,".buffer");_e.then(le,".enableVertexAttribArray(",re,");",le,".bindBuffer(",Jn,",",z,".buffer.buffer);",le,".vertexAttribPointer(",re,",",z,".size,",z,".type,",z,".normalized,",z,".stride,",z,".offset);").else(le,".disableVertexAttribArray(",re,");",le,".vertexAttrib4f(",re,",",z,".x,",z,".y,",z,".z,",z,".w);",z,".buffer=null;"),ue(_e),st&&ue(H,".vertexAttribDivisorANGLE(",re,",",z,".divisor);")}return ue(X.shared.vao,".currentVAO=null;",X.shared.vao,".setVAO(",X.shared.vao,".targetVAO);"),Object.keys(vt).forEach(function(je){var We=vt[je],Ke=Oe.def(oe,".",je),He=X.block();He("if(",Ke,"){",le,".enable(",We,")}else{",le,".disable(",We,")}",ge,".",je,"=",Ke,";"),ue(He),k("if(",Ke,"!==",ge,".",je,"){",He,"}")}),Object.keys(rt).forEach(function(je){var We=rt[je],Ke=Je[je],He,ct,Ut=X.block();if(Ut(le,".",We,"("),E(Ke)){var hr=Ke.length;He=X.global.def(oe,".",je),ct=X.global.def(ge,".",je),Ut(Cr(hr,function(It){return He+"["+It+"]"}),");",Cr(hr,function(It){return ct+"["+It+"]="+He+"["+It+"];"}).join("")),k("if(",Cr(hr,function(It){return He+"["+It+"]!=="+ct+"["+It+"]"}).join("||"),"){",Ut,"}")}else He=Oe.def(oe,".",je),ct=Oe.def(ge,".",je),Ut(He,");",ge,".",je,"=",He,";"),k("if(",He,"!==",ct,"){",Ut,"}");ue(Ut)}),X.compile()}(),compile:Er}}function Bd(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var nv=34918,Gd=34919,Zu=35007,ov=function(A,U){if(!U.ext_disjoint_timer_query)return null;var J=[];function Ie(){return J.pop()||U.ext_disjoint_timer_query.createQueryEXT()}function Ve(st){J.push(st)}var Ce=[];function Ge(st){var St=Ie();U.ext_disjoint_timer_query.beginQueryEXT(Zu,St),Ce.push(St),it(Ce.length-1,Ce.length,st)}function ot(){U.ext_disjoint_timer_query.endQueryEXT(Zu)}function at(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ft=[];function ut(){return ft.pop()||new at}function pt(st){ft.push(st)}var _t=[];function it(st,St,Je){var At=ut();At.startQueryIndex=st,At.endQueryIndex=St,At.sum=0,At.stats=Je,_t.push(At)}var dt=[],Se=[];function Ue(){var st,St,Je=Ce.length;if(Je!==0){Se.length=Math.max(Se.length,Je+1),dt.length=Math.max(dt.length,Je+1),dt[0]=0,Se[0]=0;var At=0;for(st=0,St=0;St<Ce.length;++St){var tt=Ce[St];U.ext_disjoint_timer_query.getQueryObjectEXT(tt,Gd)?(At+=U.ext_disjoint_timer_query.getQueryObjectEXT(tt,nv),Ve(tt)):Ce[st++]=tt,dt[St+1]=At,Se[St+1]=st}for(Ce.length=st,st=0,St=0;St<_t.length;++St){var vt=_t[St],rt=vt.startQueryIndex,yt=vt.endQueryIndex;vt.sum+=dt[yt]-dt[rt];var $t=Se[rt],rr=Se[yt];rr===$t?(vt.stats.gpuTime+=vt.sum/1e6,pt(vt)):(vt.startQueryIndex=$t,vt.endQueryIndex=rr,_t[st++]=vt)}_t.length=st}}return{beginQuery:Ge,endQuery:ot,pushScopeStats:it,update:Ue,getNumPendingQueries:function(){return Ce.length},clear:function(){J.push.apply(J,Ce);for(var st=0;st<J.length;st++)U.ext_disjoint_timer_query.deleteQueryEXT(J[st]);Ce.length=0,J.length=0},restore:function(){Ce.length=0,J.length=0}}},iv=16384,Jl=256,uc=1024,Ud=34962,sc="webglcontextlost",cc="webglcontextrestored",Ju=1,lc=2,zd=3;function Qa(A,U){for(var J=0;J<A.length;++J)if(A[J]===U)return J;return-1}function fc(A){var U=gr(A);if(!U)return null;var J=U.gl,Ie=J.getContextAttributes(),Ve=J.isContextLost(),Ce=Xr(J,U);if(!Ce)return null;var Ge=wn(),ot=Bd(),at=Ce.extensions,ft=ov(J,at),ut=Tr(),pt=J.drawingBufferWidth,_t=J.drawingBufferHeight,it={tick:0,time:0,viewportWidth:pt,viewportHeight:_t,framebufferWidth:pt,framebufferHeight:_t,drawingBufferWidth:pt,drawingBufferHeight:_t,pixelRatio:U.pixelRatio},dt={},Se={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ue=Ss(J,at),st=Po(J,ot,U,Je),St=$h(J,at,Ue,ot,st);function Je(Jt){return St.destroyBuffer(Jt)}var At=Ms(J,at,st,ot),tt=qh(J,Ge,ot,U),vt=xn(J,at,Ue,function(){$t.procs.poll()},it,ot,U),rt=od(J,at,Ue,ot,U),yt=vd(J,at,Ue,vt,rt,ot),$t=rv(J,Ge,at,Ue,st,At,vt,yt,dt,St,tt,Se,it,ft,U),rr=Zh(J,yt,$t.procs.poll,it,Ie,at,Ue),Et=$t.next,Qe=J.canvas,$e=[],nr=[],Te=[],Lt=[U.onDestroy],br=null;function ur(){if($e.length===0){ft&&ft.update(),br=null;return}br=Kt.next(ur),Fn();for(var Jt=$e.length-1;Jt>=0;--Jt){var _r=$e[Jt];_r&&_r(it,null,0)}J.flush(),ft&&ft.update()}function mr(){!br&&$e.length>0&&(br=Kt.next(ur))}function Mr(){br&&(Kt.cancel(ur),br=null)}function cn(Jt){Jt.preventDefault(),Ve=!0,Mr(),nr.forEach(function(_r){_r()})}function En(Jt){J.getError(),Ve=!1,Ce.restore(),tt.restore(),st.restore(),vt.restore(),rt.restore(),yt.restore(),St.restore(),ft&&ft.restore(),$t.procs.refresh(),mr(),Te.forEach(function(_r){_r()})}Qe&&(Qe.addEventListener(sc,cn,!1),Qe.addEventListener(cc,En,!1));function xr(){$e.length=0,Mr(),Qe&&(Qe.removeEventListener(sc,cn),Qe.removeEventListener(cc,En)),tt.clear(),yt.clear(),rt.clear(),vt.clear(),At.clear(),st.clear(),St.clear(),ft&&ft.clear(),Lt.forEach(function(Jt){Jt()})}function yn(Jt){G(!!Jt,"invalid args to regl({...})"),G.type(Jt,"object","invalid args to regl({...})");function _r(Pe){var le=s({},Pe);delete le.uniforms,delete le.attributes,delete le.context,delete le.vao,"stencil"in le&&le.stencil.op&&(le.stencil.opBack=le.stencil.opFront=le.stencil.op,delete le.stencil.op);function oe(ge){if(ge in le){var H=le[ge];delete le[ge],Object.keys(H).forEach(function(re){le[ge+"."+re]=H[re]})}}return oe("blend"),oe("depth"),oe("cull"),oe("stencil"),oe("polygonOffset"),oe("scissor"),oe("sample"),"vao"in Pe&&(le.vao=Pe.vao),le}function Sr(Pe,le){var oe={},ge={};return Object.keys(Pe).forEach(function(H){var re=Pe[H];if(wt.isDynamic(re)){ge[H]=wt.unbox(re,H);return}else if(le&&Array.isArray(re)){for(var z=0;z<re.length;++z)if(wt.isDynamic(re[z])){ge[H]=wt.unbox(re,H);return}}oe[H]=re}),{dynamic:ge,static:oe}}var Br=Sr(Jt.context||{},!0),Jo=Sr(Jt.uniforms||{},!0),Wn=Sr(Jt.attributes||{},!1),B=Sr(_r(Jt),!1),Le={gpuTime:0,cpuTime:0,count:0},ke=$t.compile(B,Wn,Jo,Br,Le),jt=ke.draw,Er=ke.batch,X=ke.scope,k=[];function ue(Pe){for(;k.length<Pe;)k.push(null);return k}function Oe(Pe,le){var oe;if(Ve&&G.raise("context lost"),typeof Pe=="function")return X.call(this,null,Pe,0);if(typeof le=="function")if(typeof Pe=="number")for(oe=0;oe<Pe;++oe)X.call(this,null,le,oe);else if(Array.isArray(Pe))for(oe=0;oe<Pe.length;++oe)X.call(this,Pe[oe],le,oe);else return X.call(this,Pe,le,0);else if(typeof Pe=="number"){if(Pe>0)return Er.call(this,ue(Pe|0),Pe|0)}else if(Array.isArray(Pe)){if(Pe.length)return Er.call(this,Pe,Pe.length)}else return jt.call(this,Pe)}return s(Oe,{stats:Le,destroy:function(){ke.destroy()}})}var Wr=yt.setFBO=yn({framebuffer:wt.define.call(null,Ju,"framebuffer")});function ln(Jt,_r){var Sr=0;$t.procs.poll();var Br=_r.color;Br&&(J.clearColor(+Br[0]||0,+Br[1]||0,+Br[2]||0,+Br[3]||0),Sr|=iv),"depth"in _r&&(J.clearDepth(+_r.depth),Sr|=Jl),"stencil"in _r&&(J.clearStencil(_r.stencil|0),Sr|=uc),G(!!Sr,"called regl.clear with no buffer specified"),J.clear(Sr)}function gn(Jt){if(G(typeof Jt=="object"&&Jt,"regl.clear() takes an object as input"),"framebuffer"in Jt)if(Jt.framebuffer&&Jt.framebuffer_reglType==="framebufferCube")for(var _r=0;_r<6;++_r)Wr(s({framebuffer:Jt.framebuffer.faces[_r]},Jt),ln);else Wr(Jt,ln);else ln(null,Jt)}function Yr(Jt){G.type(Jt,"function","regl.frame() callback must be a function"),$e.push(Jt);function _r(){var Sr=Qa($e,Jt);G(Sr>=0,"cannot cancel a frame twice");function Br(){var Jo=Qa($e,Br);$e[Jo]=$e[$e.length-1],$e.length-=1,$e.length<=0&&Mr()}$e[Sr]=Br}return mr(),{cancel:_r}}function Sn(){var Jt=Et.viewport,_r=Et.scissor_box;Jt[0]=Jt[1]=_r[0]=_r[1]=0,it.viewportWidth=it.framebufferWidth=it.drawingBufferWidth=Jt[2]=_r[2]=J.drawingBufferWidth,it.viewportHeight=it.framebufferHeight=it.drawingBufferHeight=Jt[3]=_r[3]=J.drawingBufferHeight}function Fn(){it.tick+=1,it.time=lr(),Sn(),$t.procs.poll()}function nn(){vt.refresh(),Sn(),$t.procs.refresh(),ft&&ft.update()}function lr(){return(Tr()-ut)/1e3}nn();function mn(Jt,_r){G.type(_r,"function","listener callback must be a function");var Sr;switch(Jt){case"frame":return Yr(_r);case"lost":Sr=nr;break;case"restore":Sr=Te;break;case"destroy":Sr=Lt;break;default:G.raise("invalid event, must be one of frame,lost,restore,destroy")}return Sr.push(_r),{cancel:function(){for(var Br=0;Br<Sr.length;++Br)if(Sr[Br]===_r){Sr[Br]=Sr[Sr.length-1],Sr.pop();return}}}}var Nr=s(yn,{clear:gn,prop:wt.define.bind(null,Ju),context:wt.define.bind(null,lc),this:wt.define.bind(null,zd),draw:yn({}),buffer:function(Jt){return st.create(Jt,Ud,!1,!1)},elements:function(Jt){return At.create(Jt,!1)},texture:vt.create2D,cube:vt.createCube,renderbuffer:rt.create,framebuffer:yt.create,framebufferCube:yt.createCube,vao:St.createVAO,attributes:Ie,frame:Yr,on:mn,limits:Ue,hasExtension:function(Jt){return Ue.extensions.indexOf(Jt.toLowerCase())>=0},read:rr,destroy:xr,_gl:J,_refresh:nn,poll:function(){Fn(),ft&&ft.update()},now:lr,stats:ot});return U.onDone(null,Nr),Nr}return fc})})(QD);var ma,gf,ba,ti,mf,su,bf,Bp,Gi,ns,to,Ui,zi,Gp;ma={},Mt(ma,Pt.POINTS,"points"),Mt(ma,Pt.LINES,"lines"),Mt(ma,Pt.LINE_LOOP,"line loop"),Mt(ma,Pt.LINE_STRIP,"line strip"),Mt(ma,Pt.TRIANGLES,"triangles"),Mt(ma,Pt.TRIANGLE_FAN,"triangle fan"),Mt(ma,Pt.TRIANGLE_STRIP,"triangle strip");gf={},Mt(gf,Pt.STATIC_DRAW,"static"),Mt(gf,Pt.DYNAMIC_DRAW,"dynamic"),Mt(gf,Pt.STREAM_DRAW,"stream");ba={},Mt(ba,Pt.BYTE,"int8"),Mt(ba,Pt.UNSIGNED_INT,"int16"),Mt(ba,Pt.INT,"int32"),Mt(ba,Pt.UNSIGNED_BYTE,"uint8"),Mt(ba,Pt.UNSIGNED_SHORT,"uint16"),Mt(ba,Pt.UNSIGNED_INT,"uint32"),Mt(ba,Pt.FLOAT,"float");ti={},Mt(ti,Pt.ALPHA,"alpha"),Mt(ti,Pt.LUMINANCE,"luminance"),Mt(ti,Pt.LUMINANCE_ALPHA,"luminance alpha"),Mt(ti,Pt.RGB,"rgb"),Mt(ti,Pt.RGBA,"rgba"),Mt(ti,Pt.RGBA4,"rgba4"),Mt(ti,Pt.RGB5_A1,"rgb5 a1"),Mt(ti,Pt.RGB565,"rgb565"),Mt(ti,Pt.DEPTH_COMPONENT,"depth"),Mt(ti,Pt.DEPTH_STENCIL,"depth stencil");mf={},Mt(mf,Pt.DONT_CARE,"dont care"),Mt(mf,Pt.NICEST,"nice"),Mt(mf,Pt.FASTEST,"fast");su={},Mt(su,Pt.NEAREST,"nearest"),Mt(su,Pt.LINEAR,"linear"),Mt(su,Pt.LINEAR_MIPMAP_LINEAR,"mipmap"),Mt(su,Pt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Mt(su,Pt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Mt(su,Pt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");bf={},Mt(bf,Pt.REPEAT,"repeat"),Mt(bf,Pt.CLAMP_TO_EDGE,"clamp"),Mt(bf,Pt.MIRRORED_REPEAT,"mirror");Bp={},Mt(Bp,Pt.NONE,"none"),Mt(Bp,Pt.BROWSER_DEFAULT_WEBGL,"browser");Gi={},Mt(Gi,Pt.NEVER,"never"),Mt(Gi,Pt.ALWAYS,"always"),Mt(Gi,Pt.LESS,"less"),Mt(Gi,Pt.LEQUAL,"lequal"),Mt(Gi,Pt.GREATER,"greater"),Mt(Gi,Pt.GEQUAL,"gequal"),Mt(Gi,Pt.EQUAL,"equal"),Mt(Gi,Pt.NOTEQUAL,"notequal");ns={},Mt(ns,Pt.FUNC_ADD,"add"),Mt(ns,Pt.MIN_EXT,"min"),Mt(ns,Pt.MAX_EXT,"max"),Mt(ns,Pt.FUNC_SUBTRACT,"subtract"),Mt(ns,Pt.FUNC_REVERSE_SUBTRACT,"reverse subtract");to={},Mt(to,Pt.ZERO,"zero"),Mt(to,Pt.ONE,"one"),Mt(to,Pt.SRC_COLOR,"src color"),Mt(to,Pt.ONE_MINUS_SRC_COLOR,"one minus src color"),Mt(to,Pt.SRC_ALPHA,"src alpha"),Mt(to,Pt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Mt(to,Pt.DST_COLOR,"dst color"),Mt(to,Pt.ONE_MINUS_DST_COLOR,"one minus dst color"),Mt(to,Pt.DST_ALPHA,"dst alpha"),Mt(to,Pt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Mt(to,Pt.CONSTANT_COLOR,"constant color"),Mt(to,Pt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Mt(to,Pt.CONSTANT_ALPHA,"constant alpha"),Mt(to,Pt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Mt(to,Pt.SRC_ALPHA_SATURATE,"src alpha saturate");Ui={},Mt(Ui,Pt.NEVER,"never"),Mt(Ui,Pt.ALWAYS,"always"),Mt(Ui,Pt.LESS,"less"),Mt(Ui,Pt.LEQUAL,"lequal"),Mt(Ui,Pt.GREATER,"greater"),Mt(Ui,Pt.GEQUAL,"gequal"),Mt(Ui,Pt.EQUAL,"equal"),Mt(Ui,Pt.NOTEQUAL,"notequal");zi={},Mt(zi,Pt.ZERO,"zero"),Mt(zi,Pt.KEEP,"keep"),Mt(zi,Pt.REPLACE,"replace"),Mt(zi,Pt.INVERT,"invert"),Mt(zi,Pt.INCR,"increment"),Mt(zi,Pt.DECR,"decrement"),Mt(zi,Pt.INCR_WRAP,"increment wrap"),Mt(zi,Pt.DECR_WRAP,"decrement wrap");Gp={},Mt(Gp,Pt.FRONT,"front"),Mt(Gp,Pt.BACK,"back");var eC=Function.prototype,tC=eC.toString;tC.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class VO{constructor(){yi(this,"lf");yi(this,"option")}render(i){this.lf=i}getBytesLength(i){if(!i)return 0;let o=0;for(let s=0;s<i.length;s++){const n=i.charCodeAt(s);i.match(/[A-Z]/)?o+=1.5:n>=1&&n<=126||n>=65376&&n<=65439?o+=1:o+=2}return o}layout(i={}){const{nodes:o,edges:s,gridSize:n}=this.lf.graphModel;let c=40,f=40;n>20&&(c=n*2,f=n*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:c,ranksep:f,begin:[120,120],...i};const v=new lM(this.option).layout({nodes:o.map(g=>({id:g.id,size:{width:g.width,height:g.height},model:g})),edges:s.map(g=>({source:g.sourceNodeId,target:g.targetNodeId,model:g}))}),m={nodes:[],edges:[]};v.nodes.forEach(g=>{const{model:w}=g,x=w.getData();x.x=g.x,x.y=g.y,x.text&&x.text.value&&(x.text={x:x.x,y:x.y+10,value:x.text.value}),m.nodes.push(x)}),v.edges.forEach(g=>{const{model:w}=g,x=w.getData();if(x.pointsList=this.calcPointsList(w,m.nodes),x.pointsList){const S=x.pointsList[0],N=x.pointsList[x.pointsList.length-1];x.startPoint={x:S.x,y:S.y},x.endPoint={x:N.x,y:N.y},x.text&&x.text.value&&(x.text={x:(S.x+N.x)/2,y:N.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);m.edges.push(x)}),this.lf.renderRawData(m)}pointFilter(i){const o=i;let s=1;for(;s<o.length-1;){const n=o[s-1],c=o[s],f=o[s+1];n.x===c.x&&c.x===f.x||n.y===c.y&&c.y===f.y?o.splice(s,1):s++}return o}calcPointsList(i,o){const s=[];if(this.option.rankdir==="LR"&&i.modelType==="polyline-edge"){const n=this.lf.getNodeModelById(i.sourceNodeId),c=this.lf.getNodeModelById(i.targetNodeId),f=o.find(v=>v.id===i.sourceNodeId),h=o.find(v=>v.id===i.targetNodeId);if(f.x<h.x)return s.push({x:f.x+n.width/2,y:f.y}),s.push({x:f.x+n.width/2+(i.offset||50),y:f.y}),s.push({x:f.x+n.width/2+(i.offset||50),y:h.y}),s.push({x:h.x-c.width/2,y:h.y}),this.pointFilter(s);if(f.x>h.x)return f.y>=h.y?(s.push({x:f.x,y:f.y+n.height/2}),s.push({x:f.x,y:f.y+n.height/2+(i.offset||50)}),s.push({x:h.x,y:f.y+n.height/2+(i.offset||50)}),s.push({x:h.x,y:h.y+c.height/2})):(s.push({x:f.x,y:f.y-n.height/2}),s.push({x:f.x,y:f.y-n.height/2-(i.offset||50)}),s.push({x:h.x,y:f.y-n.height/2-(i.offset||50)}),s.push({x:h.x,y:h.y-c.height/2})),this.pointFilter(s)}}}yi(VO,"pluginName","dagre");class rC extends TA{constructor({lf:i}){super({lf:i});const o={text:"复制",icon:!0,className:"lf-menu-copy",callback:W=>i.cloneNode(W.id)},s={text:"删除",icon:!0,className:"lf-menu-delete",callback:W=>{i.deleteNode(W.id),i.deleteEdge(W.id)}},n={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:W=>i.graphModel.editText(W.id)},c={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:W=>i.updateText(W.id,"")},f={text:"框选",icon:!0,className:"lf-menu-select",callback(){i.openSelectionSelect(),i.once("selection:selected",i.closeSelectionSelect)}},h={text:"清空",icon:!0,className:"lf-menu-clear",callback:()=>i.clearData()},v={text:"",icon:!0,className:"lf-menu-back",callback:W=>this.changeMenuList(W,fe.nodeMenu)},m={text:"添加",icon:!0,className:"lf-menu-add",callback:W=>{let ae=[];switch(W.type){case"startEvent":case"userTask":case"exclusiveGateway":case"parallelGateway":ae=[v,g,w,S,N,x,j];break;case"endEvent":case"sequenceFlow":case"group":case"serviceTask":ae=[v,j];break;default:ae=[v]}this.changeMenuList(W,ae)}},g={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:W=>this.addNode(W,{type:"userTask",x:W.x+200,y:W.y})},w={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:W=>this.addNode(W,{type:"serviceTask",x:W.x+200,y:W.y})},x={text:"结束",icon:!0,className:"lf-menu-end-event",callback:W=>this.addNode(W,{type:"endEvent",x:W.x+150,y:W.y})},S={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:W=>this.addNode(W,{type:"exclusiveGateway",x:W.x+150,y:W.y})},N={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:W=>this.addNode(W,{type:"parallelGateway",x:W.x+150,y:W.y})},j={text:"注释",icon:!0,className:"lf-menu-note",callback:W=>this.addNode(W,{type:"note",x:W.x,y:W.y-150})},R={text:"切换类型",icon:!0,className:"lf-menu-switch",callback:W=>{let ae=[];switch(W.type){case"exclusiveGateway":ae=[v,ce];break;case"parallelGateway":ae=[v,Ee];break;case"startEvent":ae=[v,V];break;case"endEvent":ae=[v,D];break;default:ae=[v]}this.changeMenuList(W,ae)}},D={text:"开始",icon:!0,className:"lf-menu-start-event",callback:W=>this.changeNodeType(W,"startEvent")},V={text:"结束",icon:!0,className:"lf-menu-end-event",callback:W=>this.changeNodeType(W,"endEvent")},ce={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:W=>this.changeNodeType(W,"parallelGateway")},Ee={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:W=>this.changeNodeType(W,"exclusiveGateway")},fe={nodeMenu:[m,o,s,R,n,c],edgeMenu:[s,n,c],graphMenu:[f,h]};this.setMenuConfig(fe)}changeMenuList(i,o){setTimeout(()=>{this.__currentData=i;const{left:s,top:n}=this.__menuDOM.style;this.showMenu(s,n,o)})}addNode(i,o){const s=this.lf.addNode(o),n=["serviceTask","note"].includes(o.type);this.lf.addEdge({type:n?"noteFlow":void 0,sourceNodeId:i.id,targetNodeId:s.id})}changeNodeType(i,o){this.lf.changeNodeType(i.id,o),Object.keys(i.properties||{}).forEach(s=>this.lf.deleteProperty(i.id,s)),this.lf.emit("element:click",{data:{...i,type:o,properties:{}}})}}class nC extends AA{constructor({lf:i}){super({lf:i}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){i.openSelectionSelect(),i.once("selection:selected",i.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const WO={type:"process",key:"Process",properties:{}};function oC(e){const{id:i,type:o,x:s,y:n,properties:c,children:f,text:h}=e;return{incoming:[],outgoing:[],children:f,type:o,key:i,groupKey:c==null?void 0:c.groupKey,properties:{...c,name:lm(h)?h:(h==null?void 0:h.value)??"",x:s,y:n,text:h}}}function iC(e){const{id:i,type:o,sourceNodeId:s,targetNodeId:n,startPoint:c,endPoint:f,pointsList:h,properties:v,text:m}=e;return{incoming:[s],outgoing:[n],type:o,key:i,groupKey:v==null?void 0:v.groupKey,properties:{...v,name:lm(m)?m:(m==null?void 0:m.value)??"",text:m,startPoint:c,endPoint:f,pointsList:h}}}function aC(e){const{id:i,type:o,properties:s,text:n}=e;return{type:o,key:i,properties:{...s,name:lm(n)?n:(n==null?void 0:n.value)??""}}}function uC(e){const i=new Map,o={processData:WO,flowElementList:[]};return e.nodes.forEach(s=>{var n;if(s.type==="process")o.processData=aC(s);else{const c=oC(s);(n=o.flowElementList)==null||n.push(c),i.set(s.id,c)}}),e.edges.forEach(s=>{var h;const n=iC(s);i.get(s.sourceNodeId).outgoing.push(n.key),i.get(s.targetNodeId).incoming.push(n.key),(h=o.flowElementList)==null||h.push(n)}),o}function sC(e){const{incoming:i,outgoing:o,properties:s,key:n,type:c}=e,{text:f,name:h,startPoint:v,endPoint:m,pointsList:g}=s??{},w={id:n,type:c,sourceNodeId:(i==null?void 0:i[0])??"",targetNodeId:(o==null?void 0:o[0])??"",text:f||h,startPoint:v,endPoint:m,pointsList:g,properties:{}},x=["startPoint","endPoint","pointsList","text"];return w.properties=cm(s,x),w}function cC(e){const{properties:i,key:o,type:s,children:n}=e,{x:c,y:f,text:h,name:v}=i??{},m={id:o,type:s??"",x:c,y:f,text:h||v,children:n,properties:{}},g=["x","y","text"];return m.properties=cm(i,g),m}function lC(e){const{properties:i,key:o,type:s}=e,{name:n}=i??{},c={id:o,type:s??"",text:n,x:0,y:0},f=["x","y","text"];return c.properties=cm(i,f),c}function fC(e){const{flowElementList:i}=e,o=f=>["sequenceFlow","noteFlow"].includes(f),s=(i==null?void 0:i.filter(f=>!o(f.type)).map(cC))??[],n=(i==null?void 0:i.filter(f=>o(f.type)).map(sC))??[];return s.unshift(lC(e.processData??WO)),{nodes:s,edges:n}}class sm{constructor({lf:i}){i.adapterIn=this.adapterIn,i.adapterOut=this.adapterOut}adapterOut(i){return uC(i)}adapterIn(i){return fC(i)}}yi(sm,"pluginName","turboAdapter");class YO{constructor({lf:i}){yi(this,"lf");yi(this,"container");yi(this,"__tooltipDOM");yi(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=i}render(i,o){this.container=o,o.appendChild(this.__tooltipDOM),i.on("node:mouseenter,edge:mouseenter",({data:s,e:n})=>{var m;const c=(m=this.__tooltips.find(g=>g.id===s.id))==null?void 0:m.content;if(!c)return;this.__tooltipDOM.innerHTML=c;const f=i.getPointByClient(n.x,n.y),{domOverlayPosition:{x:h,y:v}}=f;this.__tooltipDOM.style.top=`${v+10}px`,this.__tooltipDOM.style.left=`${h+10}px`,this.__tooltipDOM.style.display="block"}),i.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(i){this.__tooltips=i}}yi(YO,"pluginName","tooltip");function dC({props:e,state:i}){const{lf:o,graphData:s}=i;function n(f){var h;o.value=new Wt.LogicFlow({container:f,grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[TP,nC,PA,rC,jA,_A,$g,C_,sm,VO],edgeGenerator:(v,m)=>{if(["note","serviceTask"].includes(m.type))return"noteFlow"},...e.initOptions}),(h=o.value)==null||h.setTheme(i_),XT(i),o_(s,v=>{var x,S,N;const m=JSON.stringify(v),g=JSON.stringify((x=o.value)==null?void 0:x.getGraphData());m!==g&&((S=o.value)==null||S.render(v),(N=o.value)==null||N.emit("element:click",{isForce:!0}))},{immediate:!0})}function c(f){var h;o.value=new Wt.LogicFlow({container:f,grid:{type:"dot",size:10},isSilentMode:!0,plugins:[$g,C_,sm,YO],...e.initOptions}),(h=o.value)==null||h.setTheme(i_),o_(()=>[s.value,e.styles,e.tooltips],async()=>{var v,m,g,w;(v=o.value)==null||v.render(s.value),await Bg(),(m=e.styles)==null||m.forEach(({id:x,style:S})=>{var N,j;x&&((j=(N=o.value)==null?void 0:N.graphModel)==null||j.updateAttributes(x,{style:S}))}),(w=(g=o.value)==null?void 0:g.extension.tooltip)==null||w.setTooltips(e.tooltips??[])},{immediate:!0})}return{initViewer:c,initModeler:n}}const pC=BT("span",null,"编辑JSON",-1),hC=WE({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(e,{emit:i}){const s=HT(e),{modelValue:n,visible:c}=s,f=IT("");function h(){const v=JSON.parse(f.value);n.value=v,i("confirm",v),c.value=!1}return LT(()=>{f.value=JSON.stringify(n.value,null,2)}),(v,m)=>{const g=_a("el-input"),w=_a("el-button"),x=_a("el-drawer");return Pc(),Ef(x,{modelValue:ri(c),"onUpdate:modelValue":m[1]||(m[1]=S=>wf(c)?c.value=S:null)},{header:Cc(()=>[pC,Gg(v.$slots,"header")]),default:Cc(()=>[xf(g,{modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=S=>f.value=S),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"]),xf(w,{class:"flow-editor__confirm-btn",type:"primary",onClick:h},{default:Cc(()=>[FT(" 确定 ")]),_:1})]),_:3},8,["modelValue"])}}});const vC=["id"],xC=WE({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},dataOptions:{},type:{},styles:{},tooltips:{}},setup(e){const i=e,o=RT(i),{lf:s,graphData:n,formRef:c,formData:f,formOption:h,formDefaults:v,formLoading:m,editorVisible:g,onUpdateFormData:w}=o,{initModeler:x,initViewer:S}=dC({props:i,state:o}),N=CT("logicflow-container");return GT(()=>{const j=document.querySelector(`#${N}`);i.type==="viewer"?S(j):x(j)}),(j,R)=>{const D=_a("el-main"),V=_a("el-empty"),ce=_a("el-skeleton"),Ee=_a("avue-form"),fe=_a("el-aside"),W=_a("el-container");return j.type==="viewer"?(Pc(),UT("div",{key:0,id:ri(N),class:"lf-container"},null,8,vC)):(Pc(),Ef(W,{key:1,class:"lf-container"},{default:Cc(()=>[xf(D,{id:ri(N),class:"lf-main"},null,8,["id"]),xf(fe,{width:j.formWidth,class:"lf-aside"},{default:Cc(()=>{var ae,Y;return[Gg(j.$slots,"form-top"),(Y=(ae=ri(h))==null?void 0:ae.group)!=null&&Y.length?ri(m)?(Pc(),Ef(ce,{key:1})):(Pc(),Ef(Ee,{key:2,ref_key:"formRef",ref:c,modelValue:ri(f),"onUpdate:modelValue":[R[0]||(R[0]=F=>wf(f)?f.value=F:null),ri(w)],defaults:ri(v),"onUpdate:defaults":R[1]||(R[1]=F=>wf(v)?v.value=F:null),option:ri(h)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(Pc(),Ef(V,{key:0,description:"选择元素以编辑数据"}))]}),_:3},8,["width"]),xf(hC,{modelValue:ri(n),"onUpdate:modelValue":R[2]||(R[2]=ae=>wf(n)?n.value=ae:null),visible:ri(g),"onUpdate:visible":R[3]||(R[3]=ae=>wf(g)?g.value=ae:null),onConfirm:R[4]||(R[4]=ae=>{var Y;return(Y=ri(s))==null?void 0:Y.render(ae)})},zT({_:2},[j.$slots["editor-header"]?{name:"header",fn:Cc(()=>[Gg(j.$slots,"editor-header")]),key:"0"}:void 0]),1032,["modelValue","visible"])]),_:3}))}}});export{$g as B,TP as C,VO as D,oP as E,OP as G,rC as M,mP as N,eP as P,rP as S,sm as T,lP as U,xC as _,dC as a,tP as b,nP as c,i_ as d,iP as e,aP as f,uP as g,sP as h,cP as i,fP as j,dP as k,pP as l,hP as m,vP as n,bP as o,_P as p,EP as q,xP as r,C_ as s,nC as t,XT as u,uC as v,fC as w,YO as x,a_ as y,Ug as z};
