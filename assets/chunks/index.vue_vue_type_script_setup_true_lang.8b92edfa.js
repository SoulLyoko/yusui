import{an as ke,J as P,r as K,q as L,n as V,l as he,d as S,av as te,aq as He,aG as Ie,u as $,a4 as qe,v as N,C as z,O,F as ne,a as E,N as k,a7 as G,b as B,j as ue,a3 as I,aH as ce,z as U,x as fe,L as De,X as pe,B as H,I as we,K as je,Z as X,ac as lt,V as Ge,a1 as rt,$ as it,ax as me,ab as de,a5 as Ae,aF as ut,M as A,ak as be,E as J,y as Se,k as Oe,A as Be,T as ct,ao as ht,a9 as ze,aa as Pe,aI as ft}from"./framework.93e84c5c.js";import{p as Le}from"./pick.c38fd284.js";import{U as ye,d as Ue,u as pt,E as q,b as yt}from"./index.07eec42b.js";import{aL as Re,aJ as Me,bh as Ce,bg as Ne,aR as vt,aO as Te,aQ as Fe,aP as We,aS as M,aY as R,aK as gt,aM as kt,aZ as mt,b4 as Ye,ba as ge,b9 as bt,aW as Ct,b3 as Nt,bi as Et,aN as Kt,b2 as xt,bj as Dt}from"./use-form-item.f6cd6a08.js";import{i as Ee}from"./isEqual.1cc8ee6e.js";import{p as wt}from"./pickBy.e06d9ce3.js";const Ze={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:Re,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},Je={[ye]:e=>ke(e)||Me(e)||Ce(e),change:e=>ke(e)||Me(e)||Ce(e)},_=Symbol("checkboxGroupContextKey"),St=({model:e,isChecked:t})=>{const o=P(_,void 0),a=K(()=>{var d,l;const s=(d=o==null?void 0:o.max)==null?void 0:d.value,c=(l=o==null?void 0:o.min)==null?void 0:l.value;return!Ne(s)&&e.value.length>=s&&!t.value||!Ne(c)&&e.value.length<=c&&t.value});return{isDisabled:vt(K(()=>(o==null?void 0:o.disabled.value)||a.value)),isLimitDisabled:a}},Bt=(e,{model:t,isLimitExceeded:o,hasOwnLabel:a,isDisabled:n,isLabeledByFormItem:d})=>{const l=P(_,void 0),{formItem:s}=Te(),{emit:c}=he();function r(f){var g,v;return f===e.trueLabel||f===!0?(g=e.trueLabel)!=null?g:!0:(v=e.falseLabel)!=null?v:!1}function u(f,g){c("change",r(f),g)}function p(f){if(o.value)return;const g=f.target;c("change",r(g.checked),f)}async function i(f){o.value||!a.value&&!n.value&&d.value&&(f.composedPath().some(m=>m.tagName==="LABEL")||(t.value=r([!1,e.falseLabel].includes(t.value)),await V(),u(t.value,f)))}const h=K(()=>(l==null?void 0:l.validateEvent)||e.validateEvent);return L(()=>e.modelValue,()=>{h.value&&(s==null||s.validate("change").catch(f=>Ue()))}),{handleChange:p,onClickRoot:i}},Lt=e=>{const t=S(!1),{emit:o}=he(),a=P(_,void 0),n=K(()=>Ne(a)===!1),d=S(!1);return{model:K({get(){var s,c;return n.value?(s=a==null?void 0:a.modelValue)==null?void 0:s.value:(c=e.modelValue)!=null?c:t.value},set(s){var c,r;n.value&&te(s)?(d.value=((c=a==null?void 0:a.max)==null?void 0:c.value)!==void 0&&s.length>(a==null?void 0:a.max.value),d.value===!1&&((r=a==null?void 0:a.changeEvent)==null||r.call(a,s))):(o(ye,s),t.value=s)}}),isGroup:n,isLimitExceeded:d}},Tt=(e,t,{model:o})=>{const a=P(_,void 0),n=S(!1),d=K(()=>{const r=o.value;return Ce(r)?r:te(r)?He(e.label)?r.map(Ie).some(u=>Ee(u,e.label)):r.map(Ie).includes(e.label):r!=null?r===e.trueLabel:!!r}),l=Fe(K(()=>{var r;return(r=a==null?void 0:a.size)==null?void 0:r.value}),{prop:!0}),s=Fe(K(()=>{var r;return(r=a==null?void 0:a.size)==null?void 0:r.value})),c=K(()=>!!(t.default||e.label));return{checkboxButtonSize:l,isChecked:d,isFocused:n,checkboxSize:s,hasOwnLabel:c}},$t=(e,{model:t})=>{function o(){te(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&o()},Qe=(e,t)=>{const{formItem:o}=Te(),{model:a,isGroup:n,isLimitExceeded:d}=Lt(e),{isFocused:l,isChecked:s,checkboxButtonSize:c,checkboxSize:r,hasOwnLabel:u}=Tt(e,t,{model:a}),{isDisabled:p}=St({model:a,isChecked:s}),{inputId:i,isLabeledByFormItem:h}=We(e,{formItemContext:o,disableIdGeneration:u,disableIdManagement:n}),{handleChange:f,onClickRoot:g}=Bt(e,{model:a,isLimitExceeded:d,hasOwnLabel:u,isDisabled:p,isLabeledByFormItem:h});return $t(e,{model:a}),{inputId:i,isLabeledByFormItem:h,isChecked:s,isDisabled:p,isFocused:l,checkboxButtonSize:c,checkboxSize:r,hasOwnLabel:u,model:a,handleChange:f,onClickRoot:g}},It=["tabindex","role","aria-checked"],At=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],Ot=["id","aria-hidden","disabled","value","name","tabindex"],zt=$({name:"ElCheckbox"}),Pt=$({...zt,props:Ze,emits:Je,setup(e){const t=e,o=qe(),{inputId:a,isLabeledByFormItem:n,isChecked:d,isDisabled:l,isFocused:s,checkboxSize:c,hasOwnLabel:r,model:u,handleChange:p,onClickRoot:i}=Qe(t,o),h=M("checkbox"),f=K(()=>[h.b(),h.m(c.value),h.is("disabled",l.value),h.is("bordered",t.border),h.is("checked",d.value)]),g=K(()=>[h.e("input"),h.is("disabled",l.value),h.is("checked",d.value),h.is("indeterminate",t.indeterminate),h.is("focus",s.value)]);return(v,m)=>(N(),z(we(!k(r)&&k(n)?"span":"label"),{class:E(k(f)),"aria-controls":v.indeterminate?v.controls:null,onClick:k(i)},{default:O(()=>[ne("span",{class:E(k(g)),tabindex:v.indeterminate?0:void 0,role:v.indeterminate?"checkbox":void 0,"aria-checked":v.indeterminate?"mixed":void 0},[v.trueLabel||v.falseLabel?G((N(),B("input",{key:0,id:k(a),"onUpdate:modelValue":m[0]||(m[0]=x=>ue(u)?u.value=x:null),class:E(k(h).e("original")),type:"checkbox","aria-hidden":v.indeterminate?"true":"false",name:v.name,tabindex:v.tabindex,disabled:k(l),"true-value":v.trueLabel,"false-value":v.falseLabel,onChange:m[1]||(m[1]=(...x)=>k(p)&&k(p)(...x)),onFocus:m[2]||(m[2]=x=>s.value=!0),onBlur:m[3]||(m[3]=x=>s.value=!1),onClick:m[4]||(m[4]=I(()=>{},["stop"]))},null,42,At)),[[ce,k(u)]]):G((N(),B("input",{key:1,id:k(a),"onUpdate:modelValue":m[5]||(m[5]=x=>ue(u)?u.value=x:null),class:E(k(h).e("original")),type:"checkbox","aria-hidden":v.indeterminate?"true":"false",disabled:k(l),value:v.label,name:v.name,tabindex:v.tabindex,onChange:m[6]||(m[6]=(...x)=>k(p)&&k(p)(...x)),onFocus:m[7]||(m[7]=x=>s.value=!0),onBlur:m[8]||(m[8]=x=>s.value=!1),onClick:m[9]||(m[9]=I(()=>{},["stop"]))},null,42,Ot)),[[ce,k(u)]]),ne("span",{class:E(k(h).e("inner"))},null,2)],10,It),k(r)?(N(),B("span",{key:0,class:E(k(h).e("label"))},[U(v.$slots,"default"),v.$slots.default?H("v-if",!0):(N(),B(fe,{key:0},[De(pe(v.label),1)],64))],2)):H("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var Mt=R(Pt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const Ft=["name","tabindex","disabled","true-value","false-value"],Vt=["name","tabindex","disabled","value"],Ht=$({name:"ElCheckboxButton"}),qt=$({...Ht,props:Ze,emits:Je,setup(e){const t=e,o=qe(),{isFocused:a,isChecked:n,isDisabled:d,checkboxButtonSize:l,model:s,handleChange:c}=Qe(t,o),r=P(_,void 0),u=M("checkbox"),p=K(()=>{var h,f,g,v;const m=(f=(h=r==null?void 0:r.fill)==null?void 0:h.value)!=null?f:"";return{backgroundColor:m,borderColor:m,color:(v=(g=r==null?void 0:r.textColor)==null?void 0:g.value)!=null?v:"",boxShadow:m?`-1px 0 0 0 ${m}`:void 0}}),i=K(()=>[u.b("button"),u.bm("button",l.value),u.is("disabled",d.value),u.is("checked",n.value),u.is("focus",a.value)]);return(h,f)=>(N(),B("label",{class:E(k(i))},[h.trueLabel||h.falseLabel?G((N(),B("input",{key:0,"onUpdate:modelValue":f[0]||(f[0]=g=>ue(s)?s.value=g:null),class:E(k(u).be("button","original")),type:"checkbox",name:h.name,tabindex:h.tabindex,disabled:k(d),"true-value":h.trueLabel,"false-value":h.falseLabel,onChange:f[1]||(f[1]=(...g)=>k(c)&&k(c)(...g)),onFocus:f[2]||(f[2]=g=>a.value=!0),onBlur:f[3]||(f[3]=g=>a.value=!1),onClick:f[4]||(f[4]=I(()=>{},["stop"]))},null,42,Ft)),[[ce,k(s)]]):G((N(),B("input",{key:1,"onUpdate:modelValue":f[5]||(f[5]=g=>ue(s)?s.value=g:null),class:E(k(u).be("button","original")),type:"checkbox",name:h.name,tabindex:h.tabindex,disabled:k(d),value:h.label,onChange:f[6]||(f[6]=(...g)=>k(c)&&k(c)(...g)),onFocus:f[7]||(f[7]=g=>a.value=!0),onBlur:f[8]||(f[8]=g=>a.value=!1),onClick:f[9]||(f[9]=I(()=>{},["stop"]))},null,42,Vt)),[[ce,k(s)]]),h.$slots.default||h.label?(N(),B("span",{key:2,class:E(k(u).be("button","inner")),style:je(k(n)?k(p):void 0)},[U(h.$slots,"default",{},()=>[De(pe(h.label),1)])],6)):H("v-if",!0)],2))}});var Xe=R(qt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const jt=gt({modelValue:{type:kt(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:Re,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),Gt={[ye]:e=>te(e),change:e=>te(e)},Ut=$({name:"ElCheckboxGroup"}),Rt=$({...Ut,props:jt,emits:Gt,setup(e,{emit:t}){const o=e,a=M("checkbox"),{formItem:n}=Te(),{inputId:d,isLabeledByFormItem:l}=We(o,{formItemContext:n}),s=async r=>{t(ye,r),await V(),t("change",r)},c=K({get(){return o.modelValue},set(r){s(r)}});return X(_,{...Le(lt(o),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:c,changeEvent:s}),L(()=>o.modelValue,()=>{o.validateEvent&&(n==null||n.validate("change").catch(r=>Ue()))}),(r,u)=>{var p;return N(),z(we(r.tag),{id:k(d),class:E(k(a).b("group")),role:"group","aria-label":k(l)?void 0:r.label||"checkbox-group","aria-labelledby":k(l)?(p=k(n))==null?void 0:p.labelId:void 0},{default:O(()=>[U(r.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var _e=R(Rt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const Wt=mt(Mt,{CheckboxButton:Xe,CheckboxGroup:_e}),Nn=Ye(Xe),En=Ye(_e),Yt=$({name:"ElCollapseTransition"}),Zt=$({...Yt,setup(e){const t=M("collapse-transition"),o=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},a={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){n.dataset.oldOverflow=n.style.overflow,n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){o(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){o(n)},leaveCancelled(n){o(n)}};return(n,d)=>(N(),z(it,Ge({name:k(t).b()},rt(a)),{default:O(()=>[U(n.$slots,"default")]),_:3},16,["name"]))}});var le=R(Zt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);le.install=e=>{e.component(le.name,le)};const et=le,Kn=et,Q="$treeNodeId",Ve=function(e,t){!t||t[Q]||Object.defineProperty(t,Q,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},$e=function(e,t){return e?t[e]:t[Q]},Ke=(e,t,o)=>{const a=e.value.currentNode;o();const n=e.value.currentNode;a!==n&&t("current-change",n?n.data:null,n)},xe=e=>{let t=!0,o=!0,a=!0;for(let n=0,d=e.length;n<d;n++){const l=e[n];(l.checked!==!0||l.indeterminate)&&(t=!1,l.disabled||(a=!1)),(l.checked!==!1||l.indeterminate)&&(o=!1)}return{all:t,none:o,allWithoutDisable:a,half:!t&&!o}},re=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:o,half:a}=xe(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):a?(e.checked=!1,e.indeterminate=!0):o&&(e.checked=!1,e.indeterminate=!1);const n=e.parent;!n||n.level===0||e.store.checkStrictly||re(n)},se=function(e,t){const o=e.store.props,a=e.data||{},n=o[t];if(typeof n=="function")return n(a,e);if(typeof n=="string")return a[n];if(typeof n>"u"){const d=a[t];return d===void 0?"":d}};let Jt=0;class j{constructor(t){this.id=Jt++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const o in t)me(t,o)&&(this[o]=t[o]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const o=t.props;if(o&&typeof o.isLeaf<"u"){const d=se(this,"isLeaf");typeof d=="boolean"&&(this.isLeafByUser=d)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Ve(this,this.data),!this.data)return;const a=t.defaultExpandedKeys,n=t.key;n&&a&&a.includes(this.key)&&this.expand(null,t.autoExpandParent),n&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||Ve(this,t),this.data=t,this.childNodes=[];let o;this.level===0&&Array.isArray(this.data)?o=this.data:o=se(this,"children")||[];for(let a=0,n=o.length;a<n;a++)this.insertChild({data:o[a]})}get label(){return se(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return se(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const o=t.childNodes.indexOf(this);if(o>-1)return t.childNodes[o+1]}return null}get previousSibling(){const t=this.parent;if(t){const o=t.childNodes.indexOf(this);if(o>-1)return o>0?t.childNodes[o-1]:null}return null}contains(t,o=!0){return(this.childNodes||[]).some(a=>a===t||o&&a.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,o,a){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof j)){if(!a){const n=this.getChildren(!0);n.includes(t.data)||(typeof o>"u"||o<0?n.push(t.data):n.splice(o,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=de(new j(t)),t instanceof j&&t.initialize()}t.level=this.level+1,typeof o>"u"||o<0?this.childNodes.push(t):this.childNodes.splice(o,0,t),this.updateLeafState()}insertBefore(t,o){let a;o&&(a=this.childNodes.indexOf(o)),this.insertChild(t,a)}insertAfter(t,o){let a;o&&(a=this.childNodes.indexOf(o),a!==-1&&(a+=1)),this.insertChild(t,a)}removeChild(t){const o=this.getChildren()||[],a=o.indexOf(t.data);a>-1&&o.splice(a,1);const n=this.childNodes.indexOf(t);n>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(t){let o=null;for(let a=0;a<this.childNodes.length;a++)if(this.childNodes[a].data===t){o=this.childNodes[a];break}o&&this.removeChild(o)}expand(t,o){const a=()=>{if(o){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{Array.isArray(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||re(this),a())}):a()}doCreateChildren(t,o={}){t.forEach(a=>{this.insertChild(Object.assign({data:a},o),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,o,a,n){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:s}=xe(this.childNodes);!this.isLeaf&&!l&&s&&(this.checked=!1,t=!1);const c=()=>{if(o){const r=this.childNodes;for(let i=0,h=r.length;i<h;i++){const f=r[i];n=n||t!==!1;const g=f.disabled?f.checked:n;f.setChecked(g,o,!0,n)}const{half:u,all:p}=xe(r);p||(this.checked=p,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{c(),re(this)},{checked:t!==!1});return}else c()}const d=this.parent;!d||d.level===0||a||re(d)}getChildren(t=!1){if(this.level===0)return this.data;const o=this.data;if(!o)return null;const a=this.store.props;let n="children";return a&&(n=a.children||"children"),o[n]===void 0&&(o[n]=null),t&&!o[n]&&(o[n]=[]),o[n]}updateChildren(){const t=this.getChildren()||[],o=this.childNodes.map(d=>d.data),a={},n=[];t.forEach((d,l)=>{const s=d[Q];!!s&&o.findIndex(r=>r[Q]===s)>=0?a[s]={index:l,data:d}:n.push({index:l,data:d})}),this.store.lazy||o.forEach(d=>{a[d[Q]]||this.removeChildByData(d)}),n.forEach(({index:d,data:l})=>{this.insertChild({data:l},d)}),this.updateLeafState()}loadData(t,o={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(o).length)){this.loading=!0;const a=n=>{this.childNodes=[],this.doCreateChildren(n,o),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,n)};this.store.load(this,a)}else t&&t.call(this)}}class Qt{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const o in t)me(t,o)&&(this[o]=t[o]);this.nodesMap={}}initialize(){if(this.root=new j({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,o=>{this.root.doCreateChildren(o),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const o=this.filterNodeMethod,a=this.lazy,n=function(d){const l=d.root?d.root.childNodes:d.childNodes;if(l.forEach(s=>{s.visible=o.call(s,t,s.data,s),n(s)}),!d.visible&&l.length){let s=!0;s=!l.some(c=>c.visible),d.root?d.root.visible=s===!1:d.visible=s===!1}t&&d.visible&&!d.isLeaf&&!a&&d.expand()};n(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof j)return t;const o=He(t)?$e(this.key,t):t;return this.nodesMap[o]||null}insertBefore(t,o){const a=this.getNode(o);a.parent.insertBefore({data:t},a)}insertAfter(t,o){const a=this.getNode(o);a.parent.insertAfter({data:t},a)}remove(t){const o=this.getNode(t);o&&o.parent&&(o===this.currentNode&&(this.currentNode=null),o.parent.removeChild(o))}append(t,o){const a=o?this.getNode(o):this.root;a&&a.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],o=this.nodesMap;t.forEach(a=>{const n=o[a];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const o=this.key;!t||!t.data||(o?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(a=>{this.deregisterNode(a)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,o=!1){const a=[],n=function(d){(d.root?d.root.childNodes:d.childNodes).forEach(s=>{(s.checked||o&&s.indeterminate)&&(!t||t&&s.isLeaf)&&a.push(s.data),n(s)})};return n(this),a}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(o=>(o||{})[this.key])}getHalfCheckedNodes(){const t=[],o=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(d=>{d.indeterminate&&t.push(d.data),o(d)})};return o(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],o=this.nodesMap;for(const a in o)me(o,a)&&t.push(o[a]);return t}updateChildren(t,o){const a=this.nodesMap[t];if(!a)return;const n=a.childNodes;for(let d=n.length-1;d>=0;d--){const l=n[d];this.remove(l.data)}for(let d=0,l=o.length;d<l;d++){const s=o[d];this.append(s,a.data)}}_setCheckedKeys(t,o=!1,a){const n=this._getAllNodes().sort((s,c)=>c.level-s.level),d=Object.create(null),l=Object.keys(a);n.forEach(s=>s.setChecked(!1,!1));for(let s=0,c=n.length;s<c;s++){const r=n[s],u=r.data[t].toString();if(!l.includes(u)){r.checked&&!d[u]&&r.setChecked(!1,!1);continue}let i=r.parent;for(;i&&i.level>0;)d[i.data[t]]=!0,i=i.parent;if(r.isLeaf||this.checkStrictly){r.setChecked(!0,!1);continue}if(r.setChecked(!0,!0),o){r.setChecked(!1,!1);const h=function(f){f.childNodes.forEach(v=>{v.isLeaf||v.setChecked(!1,!1),h(v)})};h(r)}}}setCheckedNodes(t,o=!1){const a=this.key,n={};t.forEach(d=>{n[(d||{})[a]]=!0}),this._setCheckedKeys(a,o,n)}setCheckedKeys(t,o=!1){this.defaultCheckedKeys=t;const a=this.key,n={};t.forEach(d=>{n[d]=!0}),this._setCheckedKeys(a,o,n)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(o=>{const a=this.getNode(o);a&&a.expand(null,this.autoExpandParent)})}setChecked(t,o,a){const n=this.getNode(t);n&&n.setChecked(!!o,a)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const o=this.currentNode;o&&(o.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,o=!0){const a=t[this.key],n=this.nodesMap[a];this.setCurrentNode(n),o&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,o=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const a=this.getNode(t);a&&(this.setCurrentNode(a),o&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Xt=$({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=M("tree"),o=P("NodeInstance"),a=P("RootTree");return()=>{const n=e.node,{data:d,store:l}=n;return e.renderContent?e.renderContent(Ae,{_self:o,node:n,data:d,store:l}):a.ctx.slots.default?a.ctx.slots.default({node:n,data:d}):Ae("span",{class:t.be("node","label")},[n.label])}}});var _t=R(Xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function tt(e){const t=P("TreeNodeMap",null),o={treeNodeExpand:a=>{e.node!==a&&e.node.collapse()},children:[]};return t&&t.children.push(o),X("TreeNodeMap",o),{broadcastExpanded:a=>{if(e.accordion)for(const n of o.children)n.treeNodeExpand(a)}}}const nt=Symbol("dragEvents");function en({props:e,ctx:t,el$:o,dropIndicator$:a,store:n}){const d=M("tree"),l=S({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return X(nt,{treeNodeDragStart:({event:u,treeNode:p})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(p.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=p,t.emit("node-drag-start",p.node,u)},treeNodeDragOver:({event:u,treeNode:p})=>{const i=p,h=l.value.dropNode;h&&h.node.id!==i.node.id&&ge(h.$el,d.is("drop-inner"));const f=l.value.draggingNode;if(!f||!i)return;let g=!0,v=!0,m=!0,x=!0;typeof e.allowDrop=="function"&&(g=e.allowDrop(f.node,i.node,"prev"),x=v=e.allowDrop(f.node,i.node,"inner"),m=e.allowDrop(f.node,i.node,"next")),u.dataTransfer.dropEffect=v||g||m?"move":"none",(g||v||m)&&(h==null?void 0:h.node.id)!==i.node.id&&(h&&t.emit("node-drag-leave",f.node,h.node,u),t.emit("node-drag-enter",f.node,i.node,u)),(g||v||m)&&(l.value.dropNode=i),i.node.nextSibling===f.node&&(m=!1),i.node.previousSibling===f.node&&(g=!1),i.node.contains(f.node,!1)&&(v=!1),(f.node===i.node||f.node.contains(i.node))&&(g=!1,v=!1,m=!1);const F=i.$el.querySelector(`.${d.be("node","content")}`).getBoundingClientRect(),W=o.value.getBoundingClientRect();let T;const oe=g?v?.25:m?.45:1:-1,ae=m?v?.75:g?.55:0:1;let Y=-9999;const b=u.clientY-F.top;b<F.height*oe?T="before":b>F.height*ae?T="after":v?T="inner":T="none";const D=i.$el.querySelector(`.${d.be("node","expand-icon")}`).getBoundingClientRect(),w=a.value;T==="before"?Y=D.top-W.top:T==="after"&&(Y=D.bottom-W.top),w.style.top=`${Y}px`,w.style.left=`${D.right-W.left}px`,T==="inner"?bt(i.$el,d.is("drop-inner")):ge(i.$el,d.is("drop-inner")),l.value.showDropIndicator=T==="before"||T==="after",l.value.allowDrop=l.value.showDropIndicator||x,l.value.dropType=T,t.emit("node-drag-over",f.node,i.node,u)},treeNodeDragEnd:u=>{const{draggingNode:p,dropType:i,dropNode:h}=l.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",p&&h){const f={data:p.node.data};i!=="none"&&p.node.remove(),i==="before"?h.node.parent.insertBefore(f,h.node):i==="after"?h.node.parent.insertAfter(f,h.node):i==="inner"&&h.node.insertChild(f),i!=="none"&&n.value.registerNode(f),ge(h.$el,d.is("drop-inner")),t.emit("node-drag-end",p.node,h.node,i,u),i!=="none"&&t.emit("node-drop",p.node,h.node,i,u)}p&&!h&&t.emit("node-drag-end",p.node,null,i,u),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const tn=$({name:"ElTreeNode",components:{ElCollapseTransition:et,ElCheckbox:Wt,NodeContent:_t,ElIcon:Ct,Loading:Nt},props:{node:{type:j,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const o=M("tree"),{broadcastExpanded:a}=tt(e),n=P("RootTree"),d=S(!1),l=S(!1),s=S(null),c=S(null),r=S(null),u=P(nt),p=he();X("NodeInstance",p),e.node.expanded&&(d.value=!0,l.value=!0);const i=n.props.props.children||"children";L(()=>{const b=e.node.data[i];return b&&[...b]},()=>{e.node.updateChildren()}),L(()=>e.node.indeterminate,b=>{g(e.node.checked,b)}),L(()=>e.node.checked,b=>{g(b,e.node.indeterminate)}),L(()=>e.node.expanded,b=>{V(()=>d.value=b),b&&(l.value=!0)});const h=b=>$e(n.props.nodeKey,b.data),f=b=>{const D=e.props.class;if(!D)return{};let w;if(ut(D)){const{data:ve}=b;w=D(ve,b)}else w=D;return ke(w)?{[w]:!0}:w},g=(b,D)=>{(s.value!==b||c.value!==D)&&n.ctx.emit("check-change",e.node.data,b,D),s.value=b,c.value=D},v=b=>{Ke(n.store,n.ctx.emit,()=>n.store.value.setCurrentNode(e.node)),n.currentNode.value=e.node,n.props.expandOnClickNode&&x(),n.props.checkOnClickNode&&!e.node.disabled&&F(null,{target:{checked:!e.node.checked}}),n.ctx.emit("node-click",e.node.data,e.node,p,b)},m=b=>{n.instance.vnode.props.onNodeContextmenu&&(b.stopPropagation(),b.preventDefault()),n.ctx.emit("node-contextmenu",b,e.node.data,e.node,p)},x=()=>{e.node.isLeaf||(d.value?(n.ctx.emit("node-collapse",e.node.data,e.node,p),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,p)))},F=(b,D)=>{e.node.setChecked(D.target.checked,!n.props.checkStrictly),V(()=>{const w=n.store.value;n.ctx.emit("check",e.node.data,{checkedNodes:w.getCheckedNodes(),checkedKeys:w.getCheckedKeys(),halfCheckedNodes:w.getHalfCheckedNodes(),halfCheckedKeys:w.getHalfCheckedKeys()})})};return{ns:o,node$:r,tree:n,expanded:d,childNodeRendered:l,oldChecked:s,oldIndeterminate:c,getNodeKey:h,getNodeClass:f,handleSelectChange:g,handleClick:v,handleContextMenu:m,handleExpandIconClick:x,handleCheckChange:F,handleChildNodeExpand:(b,D,w)=>{a(D),n.ctx.emit("node-expand",b,D,w)},handleDragStart:b=>{n.props.draggable&&u.treeNodeDragStart({event:b,treeNode:e})},handleDragOver:b=>{b.preventDefault(),n.props.draggable&&u.treeNodeDragOver({event:b,treeNode:{$el:r.value,node:e.node}})},handleDrop:b=>{b.preventDefault()},handleDragEnd:b=>{n.props.draggable&&u.treeNodeDragEnd(b)},CaretRight:Et}}}),nn=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],on=["aria-expanded"];function an(e,t,o,a,n,d){const l=A("el-icon"),s=A("el-checkbox"),c=A("loading"),r=A("node-content"),u=A("el-tree-node"),p=A("el-collapse-transition");return G((N(),B("div",{ref:"node$",class:E([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=I((...i)=>e.handleClick&&e.handleClick(...i),["stop"])),onContextmenu:t[2]||(t[2]=(...i)=>e.handleContextMenu&&e.handleContextMenu(...i)),onDragstart:t[3]||(t[3]=I((...i)=>e.handleDragStart&&e.handleDragStart(...i),["stop"])),onDragover:t[4]||(t[4]=I((...i)=>e.handleDragOver&&e.handleDragOver(...i),["stop"])),onDragend:t[5]||(t[5]=I((...i)=>e.handleDragEnd&&e.handleDragEnd(...i),["stop"])),onDrop:t[6]||(t[6]=I((...i)=>e.handleDrop&&e.handleDrop(...i),["stop"]))},[ne("div",{class:E(e.ns.be("node","content")),style:je({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(N(),z(l,{key:0,class:E([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:I(e.handleExpandIconClick,["stop"])},{default:O(()=>[(N(),z(we(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):H("v-if",!0),e.showCheckbox?(N(),z(s,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=I(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):H("v-if",!0),e.node.loading?(N(),z(l,{key:2,class:E([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:O(()=>[J(c)]),_:1},8,["class"])):H("v-if",!0),J(r,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),J(p,null,{default:O(()=>[!e.renderAfterExpand||e.childNodeRendered?G((N(),B("div",{key:0,class:E(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(N(!0),B(fe,null,Se(e.node.childNodes,i=>(N(),z(u,{key:e.getNodeKey(i),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:i,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,on)),[[be,e.expanded]]):H("v-if",!0)]),_:1})],42,nn)),[[be,e.node.visible]])}var sn=R(tn,[["render",an],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function dn({el$:e},t){const o=M("tree"),a=Oe([]),n=Oe([]);Be(()=>{l()}),ct(()=>{a.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),L(n,s=>{s.forEach(c=>{c.setAttribute("tabindex","-1")})}),pt(e,"keydown",s=>{const c=s.target;if(!c.className.includes(o.b("node")))return;const r=s.code;a.value=Array.from(e.value.querySelectorAll(`.${o.is("focusable")}[role=treeitem]`));const u=a.value.indexOf(c);let p;if([q.up,q.down].includes(r)){if(s.preventDefault(),r===q.up){p=u===-1?0:u!==0?u-1:a.value.length-1;const h=p;for(;!t.value.getNode(a.value[p].dataset.key).canFocus;){if(p--,p===h){p=-1;break}p<0&&(p=a.value.length-1)}}else{p=u===-1?0:u<a.value.length-1?u+1:0;const h=p;for(;!t.value.getNode(a.value[p].dataset.key).canFocus;){if(p++,p===h){p=-1;break}p>=a.value.length&&(p=0)}}p!==-1&&a.value[p].focus()}[q.left,q.right].includes(r)&&(s.preventDefault(),c.click());const i=c.querySelector('[type="checkbox"]');[q.enter,q.space].includes(r)&&i&&(s.preventDefault(),i.click())});const l=()=>{var s;a.value=Array.from(e.value.querySelectorAll(`.${o.is("focusable")}[role=treeitem]`)),n.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const c=e.value.querySelectorAll(`.${o.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(s=a.value[0])==null||s.setAttribute("tabindex","0")}}const ln=$({name:"ElTree",components:{ElTreeNode:sn},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Kt}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:o}=xt(),a=M("tree"),n=S(new Qt({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));n.value.initialize();const d=S(n.value.root),l=S(null),s=S(null),c=S(null),{broadcastExpanded:r}=tt(e),{dragState:u}=en({props:e,ctx:t,el$:s,dropIndicator$:c,store:n});dn({el$:s},n);const p=K(()=>{const{childNodes:y}=d.value;return!y||y.length===0||y.every(({visible:C})=>!C)});L(()=>e.currentNodeKey,y=>{n.value.setCurrentNodeKey(y)}),L(()=>e.defaultCheckedKeys,y=>{n.value.setDefaultCheckedKey(y)}),L(()=>e.defaultExpandedKeys,y=>{n.value.setDefaultExpandedKeys(y)}),L(()=>e.data,y=>{n.value.setData(y)},{deep:!0}),L(()=>e.checkStrictly,y=>{n.value.checkStrictly=y});const i=y=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");n.value.filter(y)},h=y=>$e(e.nodeKey,y.data),f=y=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const C=n.value.getNode(y);if(!C)return[];const Z=[C.data];let ee=C.parent;for(;ee&&ee!==d.value;)Z.push(ee.data),ee=ee.parent;return Z.reverse()},g=(y,C)=>n.value.getCheckedNodes(y,C),v=y=>n.value.getCheckedKeys(y),m=()=>{const y=n.value.getCurrentNode();return y?y.data:null},x=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const y=m();return y?y[e.nodeKey]:null},F=(y,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");n.value.setCheckedNodes(y,C)},W=(y,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");n.value.setCheckedKeys(y,C)},T=(y,C,Z)=>{n.value.setChecked(y,C,Z)},oe=()=>n.value.getHalfCheckedNodes(),ae=()=>n.value.getHalfCheckedKeys(),Y=(y,C=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Ke(n,t.emit,()=>n.value.setUserCurrentNode(y,C))},b=(y,C=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Ke(n,t.emit,()=>n.value.setCurrentNodeKey(y,C))},D=y=>n.value.getNode(y),w=y=>{n.value.remove(y)},ve=(y,C)=>{n.value.append(y,C)},ot=(y,C)=>{n.value.insertBefore(y,C)},at=(y,C)=>{n.value.insertAfter(y,C)},st=(y,C,Z)=>{r(C),t.emit("node-expand",y,C,Z)},dt=(y,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");n.value.updateChildren(y,C)};return X("RootTree",{ctx:t,props:e,store:n,root:d,currentNode:l,instance:he()}),X(Dt,void 0),{ns:a,store:n,root:d,currentNode:l,dragState:u,el$:s,dropIndicator$:c,isEmpty:p,filter:i,getNodeKey:h,getNodePath:f,getCheckedNodes:g,getCheckedKeys:v,getCurrentNode:m,getCurrentKey:x,setCheckedNodes:F,setCheckedKeys:W,setChecked:T,getHalfCheckedNodes:oe,getHalfCheckedKeys:ae,setCurrentNode:Y,setCurrentKey:b,t:o,getNode:D,remove:w,append:ve,insertBefore:ot,insertAfter:at,handleNodeExpand:st,updateKeyChildren:dt}}});function rn(e,t,o,a,n,d){const l=A("el-tree-node");return N(),B("div",{ref:"el$",class:E([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(N(!0),B(fe,null,Se(e.root.childNodes,s=>(N(),z(l,{key:e.getNodeKey(s),node:s,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(N(),B("div",{key:0,class:E(e.ns.e("empty-block"))},[U(e.$slots,"empty",{},()=>{var s;return[ne("span",{class:E(e.ns.e("empty-text"))},pe((s=e.emptyText)!=null?s:e.t("el.tree.emptyText")),3)]})],2)):H("v-if",!0),G(ne("div",{ref:"dropIndicator$",class:E(e.ns.e("drop-indicator"))},null,2),[[be,e.dragState.showDropIndicator]])],2)}var ie=R(ln,[["render",rn],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);ie.install=e=>{e.component(ie.name,ie)};const un=ie,cn=un;function hn(e,{treeRef:t}){const o=S("");L(o,n=>{var d;(d=t.value)==null||d.filter(n)});const a=K(()=>Array.isArray(e.modelValue)?e.modelValue.length?"":e.placeholder:typeof e.modelValue=="string"?e.modelValue?"":e.placeholder:"");return{...Le(e,Object.keys(yt.props)),placeholder:a,modelValue:o,"onUpdate:modelValue":n=>o.value=n}}function fn(e,{emit:t,treeRef:o}){const a=K(()=>{var d,l,s;if(e.multiple)return((d=o.value)==null?void 0:d.getCheckedNodes(!e.checkStrictly))??[];{const c=(s=(l=o.value)==null?void 0:l.getNode(e.modelValue))==null?void 0:s.data;return c?[c]:[]}});function n(d){const l=e.multiple?e.modelValue.filter(s=>s!==d[e.nodeKey]):"";t("update:modelValue",l)}return{checkedNodes:a,onTagClose:n}}function pn(e,{emit:t,treeRef:o}){const a=ht();Be(()=>{L(()=>e.modelValue,()=>{e.multiple?V(()=>{var s,c;Ee((s=o.value)==null?void 0:s.getCheckedKeys(),e.modelValue||[])||(c=o.value)==null||c.setCheckedKeys(e.modelValue)}):V(()=>{var s,c;Ee((s=o.value)==null?void 0:s.getCurrentKey(),e.modelValue)||(c=o.value)==null||c.setCurrentKey(e.modelValue||void 0)})},{immediate:!0,deep:!0})});function n(s,c,r){if(e.multiple&&e.checkOnClickNode)return;const u=s[e.nodeKey];!e.multiple&&(e.checkStrictly||c.isLeaf)?t("update:modelValue",u):e.expandOnClickNode&&r.proxy.handleExpandIconClick(),V(()=>{var p,i;(p=o.value)==null||p.setCurrentKey(e.modelValue||void 0),(i=a.onNodeClick)==null||i.call(a,s,c,r)})}function d(s,{checkedKeys:c}){var r;e.multiple&&(e.checkStrictly?t("update:modelValue",c):t("update:modelValue",(r=o.value)==null?void 0:r.getCheckedKeys(!0)),V(()=>{var u,p,i,h,f,g;(u=o.value)==null||u.setCheckedKeys(e.modelValue),(g=a.onCheck)==null||g.call(a,s,{checkedKeys:(p=o.value)==null?void 0:p.getCheckedKeys(),checkedNodes:(i=o.value)==null?void 0:i.getCheckedNodes(),halfCheckedKeys:(h=o.value)==null?void 0:h.getHalfCheckedKeys(),halfCheckedNodes:(f=o.value)==null?void 0:f.getHalfCheckedNodes()})}))}function l(s,c,r){return e.filterNodeMethod?e.filterNodeMethod(s,c,r):s?c.label.includes(s):!0}return{...Le(e,Object.keys(cn.props)),showCheckbox:K(()=>e.multiple),highlightCurrent:K(()=>!e.multiple),expandOnClickNode:K(()=>!e.checkStrictly&&e.expandOnClickNode),filterNodeMethod:l,onNodeClick:n,onCheck:d}}const yn={class:"input-tree"},xn=$({__name:"index",props:{data:{},emptyText:{},renderAfterExpand:{type:Boolean},nodeKey:{default:"value"},checkStrictly:{type:Boolean},expandOnClickNode:{type:Boolean},defaultExpandAll:{type:Boolean},checkOnClickNode:{type:Boolean},checkDescendants:{type:Boolean},autoExpandParent:{type:Boolean},defaultCheckedKeys:{},defaultExpandedKeys:{},currentNodeKey:{},renderContent:{},showCheckbox:{type:Boolean},draggable:{type:Boolean},allowDrag:{},allowDrop:{},props:{},lazy:{type:Boolean},highlightCurrent:{type:Boolean},load:{},filterNodeMethod:{},accordion:{type:Boolean},indent:{},icon:{},id:{},size:{},disabled:{type:Boolean},type:{},resize:{},autosize:{},autocomplete:{},formatter:{},parser:{},placeholder:{default:"输入关键字搜索"},form:{},readonly:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},showWordLimit:{type:Boolean},suffixIcon:{},prefixIcon:{},containerRole:{},label:{},tabindex:{},validateEvent:{type:Boolean},inputStyle:{},modelValue:{},multiple:{type:Boolean},tagType:{default:"info"}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const a=e,n=S(),d=pn(a,{emit:o,treeRef:n}),l=hn(a,{treeRef:n}),{checkedNodes:s,onTagClose:c}=fn(a,{emit:o,treeRef:n}),r=de({});return t(r),Be(()=>{const u=wt(n.value??{},p=>typeof p=="function");Object.assign(r,u)}),(u,p)=>{const i=A("el-tag"),h=A("el-space"),f=A("el-input"),g=A("el-tree");return N(),B("div",yn,[J(f,ze(Pe(de(k(l)))),{prefix:O(()=>[J(h,{wrap:""},{default:O(()=>[(N(!0),B(fe,null,Se(k(s),v=>(N(),z(i,{key:v[u.nodeKey],closable:"",type:u.tagType,onClose:m=>k(c)(v)},{default:O(()=>[De(pe(v.label),1)]),_:2},1032,["type","onClose"]))),128))]),_:1})]),_:1},16),J(g,Ge({ref_key:"treeRef",ref:n},de(k(d))),ft({_:2},[u.$slots.default?{name:"default",fn:O(v=>[U(u.$slots,"default",ze(Pe(v)))]),key:"0"}:void 0,u.$slots.empty?{name:"empty",fn:O(()=>[U(u.$slots,"empty")]),key:"1"}:void 0]),1040)])}}});export{cn as E,xn as _,Wt as a,et as b,En as c,un as d,Nn as e,Kn as f};
