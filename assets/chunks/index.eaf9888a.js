var Wt=Object.defineProperty;var $t=(e,t,n)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var q=(e,t,n)=>($t(e,typeof t!="symbol"?t+"":t,n),n);import{C as Ut,G as me,M as Yt,D as qt,l as lt,S as Xt,a as Ht,I as Jt,B as ct,b as ut}from"./mysqlWorkbench.a343a5ce.js";import{E as us,f as fs,g as hs,h as ps,t as vs,u as ms,r as ys,s as bs,N as ws,q as gs,i as xs,j as Es,P as ks,c as _s,o as Ns,p as Ms,m as Is,n as Os,d as Ss,e as Ls,U as Ps,k as Ts}from"./mysqlWorkbench.a343a5ce.js";import{i as Pe,u as ft}from"./uniqueId.137e80bf.js";import{d3 as Te}from"../composables_use-crud_index.md.ff48cf7f.js";import{d as Cs}from"./data.4cb21f02.js";import{d as Kt,u as Qt}from"../flow-design_flow-modeler_index.md.429080b3.js";import{b as Fs,c as js,e as Vs,f as As,a as Bs,g as Gs,h as zs,m as Ws,n as $s,p as Us,i as Ys,s as qs,j as Xs,k as Hs,l as Js}from"../flow-design_flow-modeler_index.md.429080b3.js";import{n as Ge,h as De,r as Zt,e as en,G as J,i as oe,C as ie,D as ae,I as de,m as tn,u as U,a6 as se,B as nn,f as ht,w as fe,k as on,j as rn}from"./framework.bb591d25.js";import{u as pt}from"./theme.733a67e1.js";import"../app.a0fbb67d.js";import"../components_icon-select_index.md.9b5df973.js";import"../components_index.md.a071e943.js";import"../components_v-text_index.md.3276e479.js";import"../composables_index.md.ee547963.js";import"../flow-design_flow-viewer_index.md.1320c504.js";import"../flow-design_index.md.71f89b63.js";import"../flow-pages_index.md.b36270ef.js";import"../flow-pages_pages_flow-button_index.md.53b1b4a7.js";import"../flow-pages_pages_flow-manage_index.md.78036b7c.js";import"../flow-pages_pages_flow-ops_index.md.94496f30.js";import"../flow-pages_pages_flow-param_index.md.9009d564.js";import"../flow-pages_pages_flow-template_index.md.33431d91.js";import"../flow-pages_pages_flow-workbench_index.md.814882c7.js";import"../flow-pages_pages_form-template_index.md.f486cc1d.js";import"../flow-pages_pages_table-template_index.md.77a5284c.js";import"../form-design_demo.md.8fdb3921.js";import"../form-design_index.md.a38e33b9.js";import"../guide_changelog.md.5e061225.js";import"../guide_start.md.083770d4.js";import"../index.md.ecbcf3a6.js";import"../plugins_avue-patch_index.md.2e853b9f.js";import"../plugins_env-dts_index.md.c312023f.js";import"../plugins_index.md.dd7f79b6.js";import"../plugins_load-proxy_index.md.1cfc5186.js";import"../plugins_setup-extend_index.md.1811b24a.js";import"../plugins_uni-ui-patch_index.md.7eeaebfb.js";import"../plugins_uview-patch_index.md.f8b64fe3.js";import"../types_avue_index.md.2fb869ec.js";import"../utils_date_dateFormat.md.b8a158e0.js";import"../utils_date_durationFormat.md.797cda4d.js";import"../utils_emitter_mittAsync.md.b3a4dee0.js";import"../utils_index.md.2419292d.js";import"../utils_math_index.md.06a3fbd0.js";import"../utils_object_filterObj.md.d86e7e47.js";import"../utils_object_filterObjDeep.md.8bf78672.js";import"../utils_object_getDataType.md.9fc6abe7.js";import"../utils_string_deserialize.md.20267d67.js";import"../utils_string_serialize.md.5b24c073.js";import"../utils_string_uuid.md.77aee2e2.js";import"../utils_tool_awaitTo.md.2bddde9d.js";import"../utils_tool_enumToDic.md.5ae4cf6f.js";import"../utils_tool_sleep.md.bc3a2b0f.js";import"../utils_tree_buildTree.md.798fc546.js";import"../utils_tree_filterTree.md.e72e35d2.js";import"../utils_tree_findTree.md.f745ffa9.js";import"../utils_tree_flatTree.md.711d8133.js";import"../utils_tree_treeMap.md.e1d1d735.js";const vt={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}},sn=[{label:"开始",value:"start"},{label:"任务",value:"task"},{label:"结束",value:"end"}],an=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],dn=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],os=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:sn},{label:"类型",prop:"eventType",type:"select",dicData:an},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:dn},{label:"值",prop:"fieldValue"}]}}]}}];function ln({lf:e,graphData:t,elementData:n,formData:o,formLoading:r,formOption:i,formOptions:a,editorVisible:s,formOptionFormat:d,formDataFormat:l}){var u,f,h,p,v,b,g;async function c({data:w,isForce:y}={data:void 0,isForce:!1}){var O,L,te,X,Q,j;const x=(O=e.value)==null?void 0:O.graphModel.nodes.find(Z=>Z.type==="process");!w&&(x!=null&&x.id)&&(w=(L=e.value)==null?void 0:L.getNodeDataById(x.id)),!((w==null?void 0:w.id)===((te=n.value)==null?void 0:te.id)&&!y)&&(w.type!=="process"&&((X=e.value)==null||X.selectElementById(w.id)),r.value=!0,await Ge(),n.value=w,i.value=await d({menuBtn:!1,span:24,labelPosition:"left",group:((Q=a.value)==null?void 0:Q[w.type])??Kt}),o.value=await l({...w.properties,id:w.id,name:((j=w.text)==null?void 0:j.value)||""}),await Ge(),r.value=!1)}(u=e.value)==null||u.on("element:click",c),(f=e.value)==null||f.on("blank:click",c),(h=e.value)==null||h.on("node:add",c),(p=e.value)==null||p.on("node:dnd-add",c),(v=e.value)==null||v.on("node:delete",()=>c()),(b=e.value)==null||b.on("history:change",()=>{var w;t.value=(w=e.value)==null?void 0:w.getGraphData()}),(g=e.value)==null||g.on("custom:edit-click",()=>{s.value=!0})}const cn=[{label:"创建",value:"create"},{label:"指派",value:"assignment"},{label:"完成",value:"complete"},{label:"删除",value:"delete"},{label:"更新",value:"update"},{label:"超时",value:"timeout"}],un=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],fn=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],rs=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:cn},{label:"类型",prop:"eventType",type:"select",dicData:un},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:fn},{label:"值",prop:"fieldValue"}]}}]}}],is=[{label:"",labelWidth:0,prop:"timeLimit",type:"dynamic",children:{column:[{label:"名称",prop:"name"},{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"}]},value:[]}];class hn extends Ut{constructor({lf:t}){super({lf:t}),this.addItem({key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>t.clearData()}),this.addItem({key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>t.emit("custom:edit-click",{})}),this.addItem({key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:n,show:o,hide:r}=t.extension.miniMap??{};n?r():o()}})}}class pn{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const vn=e=>typeof e=="string",ze=Array.isArray,pe=e=>typeof e=="number",mt=e=>e!==null&&typeof e=="object",ve=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>ve(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=ve(t[n])}),t}return e},ne=(e,t)=>{const n=e[t];return mt(n)?n.cell:n},We=(e,t,n)=>{let o;return n?o=n:pe(e)?o=()=>e:o=()=>t,o},mn=(e,t)=>{if(e!=="next"&&e!=="prev")return t},$e=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let yn=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return $e(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&$e(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,mn)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function bn(e,t,n){return t&&Ue(e.prototype,t),n&&Ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var yt=bn(function e(){var t=this;wn(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,i=t.keyIndice,a=[r[n],r[o]],s=a[0],d=a[1];r[n]=d,r[o]=s,i.set(s.key,o),i.set(d.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,i,a=n;a!==0;){var s;if(i=a>>1,((s=o[i])===null||s===void 0?void 0:s.priority)<r)break;t.swap(a,i),a=i}},this.heapify=function(n){var o=t.arr,r=n<<1,i=r+1,a=n;r<o.length&&(a=o[r].priority<o[a].priority?r:a,i<o.length&&(a=o[i].priority<o[a].priority?i:a),a!==n&&(t.swap(n,a),t.heapify(a)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,i=t.arr;if(!r.has(n)){var a=i.length;return r.set(n,a),i.push({key:n,priority:o}),t.innerDecrease(a),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),gn=function(t,n){var o=new me,r=new Map,i=new yt,a;function s(c){var u=c.v===a?c.w:c.v,f=i.priority(u);if(f!==void 0){var h=n(c);h<f&&(r.set(u,a),i.decrease(u,h))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(c){i.add(c,Number.POSITIVE_INFINITY),o.setNode(c)}),i.decrease(t.nodes()[0],0);for(var d=!1;i.size()>0;){var l;if(a=i.removeMin(),r.has(a))o.setEdge(a,r.get(a));else{if(d)throw new Error("Input graph is not connected: "+t.graph());d=!0}(l=t.nodeEdges(a))===null||l===void 0||l.forEach(s)}return o},xn=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(i){for(var a=[],s=[i];s.length>0;){var d=s.pop();if(!n.has(d)){var l,c;n.add(d),a.push(d),(l=t.successors(d))===null||l===void 0||l.forEach(function(u){return s.push(u)}),(c=t.predecessors(d))===null||c===void 0||c.forEach(function(u){return s.push(u)})}}a.length&&o.push(a)}),o},En=function e(t,n,o,r,i,a){r.includes(n)||(r.push(n),o||a.push(n),i(n).forEach(function(s){return e(t,s,o,r,i,a)}),o&&a.push(n))},Ce=function(t,n,o){var r=Array.isArray(n)?n:[n],i=function(l){return t.isDirected()?t.successors(l):t.neighbors(l)},a=[],s=[];return r.forEach(function(d){if(t.hasNode(d))En(t,d,o==="post",s,i,a);else throw new Error("Graph does not have node: "+d)}),a};function kn(e,t){return In(e)||Mn(e,t)||Nn(e,t)||_n()}function _n(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nn(e,t){if(e){if(typeof e=="string")return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}}function Ye(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Mn(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,i=!1,a,s;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!(t&&o.length===t));r=!0);}catch(d){i=!0,s=d}finally{try{!r&&n.return!=null&&n.return()}finally{if(i)throw s}}return o}}function In(e){if(Array.isArray(e))return e}var On=function(){return 1},bt=function(t,n,o,r){return Sn(t,n,o||On,r||function(i){return t.outEdges(i)})},Sn=function(t,n,o,r){var i=new Map,a=new yt,s,d,l=function(f){var h=f.v!==s?f.v:f.w,p=i.get(h),v=o(f),b=d.distance+v;if(v<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+f+" Weight: "+v);b<p.distance&&(p.distance=b,p.predecessor=s,a.decrease(h,b))};for(t.nodes().forEach(function(u){var f=u===n?0:Number.POSITIVE_INFINITY;i.set(u,{distance:f}),a.add(u,f)});a.size()>0&&(s=a.removeMin(),d=i.get(s),!(d&&d.distance===Number.POSITIVE_INFINITY));)r(s).forEach(l);var c={};return Array.from(i.entries()).forEach(function(u){var f=kn(u,2),h=f[0],p=f[1];return c[String(h)]=p,c}),c},Ln=function(t,n,o){var r={};return t.nodes().forEach(function(i){return r[String(i)]=bt(t,i,n,o),r}),r},wt=function(t){var n=0,o=[],r=new Map,i=[];function a(s){var d,l={onStack:!0,lowlink:n,index:n};if(r.set(s,l),n+=1,o.push(s),(d=t.successors(s))===null||d===void 0||d.forEach(function(h){var p;if(r.has(h)){if(!((p=r.get(h))===null||p===void 0)&&p.onStack){var b=r.get(h);l.lowlink=Math.min(l.lowlink,b.index)}}else{a(h);var v=r.get(h);l.lowlink=Math.min(l.lowlink,v.lowlink)}}),l.lowlink===l.index){var c=[],u;do{u=o.pop();var f=r.get(u);f.onStack=!1,c.push(u)}while(s!==u);i.push(c)}}return t.nodes().forEach(function(s){r.has(s)||a(s)}),i},Pn=function(t){return wt(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function Ie(e){return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ie(e)}function qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Tn(e,t,n){return t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&le(e,t)}function Rn(e){var t=gt();return function(){var o=ce(e),r;if(t){var i=ce(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return Fn(this,r)}}function Fn(e,t){if(t&&(Ie(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jn(e)}function jn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e){var t=typeof Map=="function"?new Map:void 0;return Oe=function(o){if(o===null||!Vn(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return he(o,arguments,ce(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),le(r,o)},Oe(e)}function he(e,t,n){return gt()?he=Reflect.construct:he=function(r,i,a){var s=[null];s.push.apply(s,i);var d=Function.bind.apply(r,s),l=new d;return a&&le(l,a.prototype),l},he.apply(null,arguments)}function gt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vn(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function le(e,t){return le=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},le(e,t)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ce(e)}var Se=function(e){Cn(n,e);var t=Rn(n);function n(){return Dn(this,n),t.apply(this,arguments)}return Tn(n)}(Oe(Error));function xt(e){var t=new Set,n=new Set,o=[];function r(i){if(n.has(i))throw new Se;if(!t.has(i)){var a;n.add(i),t.add(i),(a=e.predecessors(i))===null||a===void 0||a.forEach(r),n.delete(i),o.push(i)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Se;return o}var An=function(t){try{xt(t)}catch(n){if(n instanceof Se)return!1;throw n}return!0},Bn=function(t,n){return Ce(t,n,"post")},Gn=function(t,n){return Ce(t,n,"pre")},zn=function(){return 1};function Wn(e,t,n){return $n(e,t||zn,n||function(o){return e.outEdges(o)})}function $n(e,t,n){var o={},r=e.nodes();return r.forEach(function(i){var a=String(i);o[a]={},o[a][a]={distance:0},r.forEach(function(s){i!==s&&(o[a][String(s)]={distance:Number.POSITIVE_INFINITY})}),n(i).forEach(function(s){var d=s.v===i?s.w:s.v,l=t(s);o[a][String(d)]={distance:l,predecessor:i}})}),r.forEach(function(i){var a=String(i),s=o[a];r.forEach(function(d){var l=String(d),c=o[l];r.forEach(function(u){var f=String(u),h=c[a],p=s[f],v=c[f],b=h.distance+p.distance;b<v.distance&&(v.distance=b,v.predecessor=p.predecessor)})})}),o}const Un=Object.freeze(Object.defineProperty({__proto__:null,components:xn,dfs:Ce,dijkstra:bt,dijkstraAll:Ln,findCycles:Pn,floydWarshall:Wn,isAcyclic:An,postorder:Bn,preorder:Gn,prim:gn,tarjan:wt,topsort:xt},Symbol.toStringTag,{value:"Module"}));class Yn extends yn{}class qn extends me{}const Xn=()=>1,Hn=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=Kn(e,t||Xn);return(n=Jn(o.graph,o.buckets,o.zeroIdx).map(i=>e.outEdges(i.v,i.w)))===null||n===void 0?void 0:n.flat()},Jn=(e,t,n)=>{let o=[];const r=t[t.length-1],i=t[0];let a;for(;e.nodeCount();){for(;a=i.dequeue();)we(e,t,n,a);for(;a=r.dequeue();)we(e,t,n,a);if(e.nodeCount()){for(let s=t.length-2;s>0;--s)if(a=t[s].dequeue(),a){o=o.concat(we(e,t,n,a,!0));break}}}return o},we=(e,t,n,o,r)=>{var i,a;const s=[];return(i=e.inEdges(o.v))===null||i===void 0||i.forEach(d=>{const l=e.edge(d),c=e.node(d.v);r&&s.push({v:d.v,w:d.w,in:0,out:0}),c.out===void 0&&(c.out=0),c.out-=l,Le(t,n,c)}),(a=e.outEdges(o.v))===null||a===void 0||a.forEach(d=>{const l=e.edge(d),c=d.w,u=e.node(c);u.in===void 0&&(u.in=0),u.in-=l,Le(t,n,u)}),e.removeNode(o.v),r?s:void 0},Kn=(e,t)=>{const n=new qn;let o=0,r=0;e.nodes().forEach(d=>{n.setNode(d,{v:d,in:0,out:0})}),e.edges().forEach(d=>{const l=n.edge(d)||0,c=(t==null?void 0:t(d))||1,u=l+c;n.setEdge(d.v,d.w,u),r=Math.max(r,n.node(d.v).out+=c),o=Math.max(o,n.node(d.w).in+=c)});const i=[],a=r+o+3;for(let d=0;d<a;d++)i.push(new Yn);const s=o+1;return n.nodes().forEach(d=>{Le(i,s,n.node(d))}),{buckets:i,zeroIdx:s,graph:n}},Le=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},Qn=e=>{const t=o=>r=>{var i;return((i=o.edge(r))===null||i===void 0?void 0:i.weight)||1},n=e.graph().acyclicer==="greedy"?Hn(e,t(e)):Zn(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},Zn=e=>{const t=[],n={},o={},r=i=>{var a;o[i]||(o[i]=!0,n[i]=!0,(a=e.outEdges(i))===null||a===void 0||a.forEach(s=>{n[s.w]?t.push(s):r(s.w)}),delete n[i])};return e.nodes().forEach(r),t},eo=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},Xe={run:Qn,undo:eo};class K extends me{}const to=(e,t)=>Number(e)-Number(t),re=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},no=e=>{const t=new K().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},Et=e=>{const t=new K({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},oo=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),He=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,i=Number(t.y)-o;let a=Number(e.width)/2,s=Number(e.height)/2;if(!r&&!i)return{x:0,y:0};let d,l;return Math.abs(i)*a>Math.abs(r)*s?(i<0&&(s=-s),d=s*r/i,l=s):(r<0&&(a=-a),d=a,l=a*i/r),{x:n+d,y:o+l}},ue=e=>{const t=[],n=kt(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const i=r.rank;i!==void 0&&t[i]&&t[i].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,i)=>{var a,s;return to((a=e.node(r))===null||a===void 0?void 0:a.order,(s=e.node(i))===null||s===void 0?void 0:s.order)});return t},ro=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},io=e=>{const t=e.nodes(),n=t.filter(s=>{var d;return((d=e.node(s))===null||d===void 0?void 0:d.rank)!==void 0}).map(s=>e.node(s).rank),o=Math.min(...n),r=[];t.forEach(s=>{var d;const l=(((d=e.node(s))===null||d===void 0?void 0:d.rank)||0)-o;r[l]||(r[l]=[]),r[l].push(s)});let i=0;const a=e.graph().nodeRankFactor||0;for(let s=0;s<r.length;s++){const d=r[s];d===void 0?s%a!==0&&(i-=1):i&&(d==null||d.forEach(l=>{const c=e.node(l);c&&(c.rank=c.rank||0,c.rank+=i)}))}},Je=(e,t,n,o)=>{const r={width:0,height:0};return pe(n)&&pe(o)&&(r.rank=n,r.order=o),re(e,"border",r,t)},kt=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},so=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},_t=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Nt=(e,t)=>t(),Re=(e,t)=>e.reduce((n,o)=>{const r=t(n),i=t(o);return r>i?o:n}),ao=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>lo(e,t))},lo=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,i=e.node(r).rank,a=t.name,s=e.edge(t),d=s.labelRank;if(i===o+1)return;e.removeEdgeObj(t);const l=e.graph();let c,u,f;for(f=0,++o;o<i;++f,++o)s.points=[],u={edgeLabel:s,width:0,height:0,edgeObj:t,rank:o},c=re(e,"edge",u,"_d"),o===d&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),e.setEdge(n,c,{weight:s.weight},a),f===0&&(l.dummyChains||(l.dummyChains=[]),l.dummyChains.push(c)),n=c;e.setEdge(n,r,{weight:s.weight},a)},co=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let i;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let a=n;for(;o.dummy;)i=e.successors(a)[0],e.removeNode(a),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),a=i,o=e.node(a)})},Ke={run:ao,undo:co},Mt=e=>{var t;const n={},o=r=>{var i;const a=e.node(r);if(!a)return 0;if(n[r])return a.rank;n[r]=!0;let s;return(i=e.outEdges(r))===null||i===void 0||i.forEach(d=>{const l=o(d.w),c=e.edge(d).minlen,u=l-c;u&&(s===void 0||u<s)&&(s=u)}),s||(s=0),a.rank=s,s};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},uo=e=>{var t;const n={};let o;const r=s=>{var d;const l=e.node(s);if(!l)return 0;if(n[s])return l.rank;n[s]=!0;let c;return(d=e.outEdges(s))===null||d===void 0||d.forEach(u=>{const f=r(u.w),h=e.edge(u).minlen,p=f-h;p&&(c===void 0||p<c)&&(c=p)}),c||(c=0),(o===void 0||c<o)&&(o=c),l.rank=c,c};(t=e.sources())===null||t===void 0||t.forEach(s=>{e.node(s)&&r(s)}),o===void 0&&(o=0);const i={},a=(s,d)=>{var l;const c=e.node(s),u=isNaN(c.layer)?d:c.layer;(c.rank===void 0||c.rank<u)&&(c.rank=u),!i[s]&&(i[s]=!0,(l=e.outEdges(s))===null||l===void 0||l.map(f=>{a(f.w,u+e.edge(f).minlen)}))};e.nodes().forEach(s=>{const d=e.node(s);d&&(isNaN(d.layer)?d.rank-=o:a(s,d.layer))})},ee=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,fo=e=>{const t=new K({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,i;for(;ho(t,e)<o;)r=It(t,e),i=t.hasNode(r.v)?ee(e,r):-ee(e,r),Ot(t,e,i);return t},ho=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const i=r.v,a=o===i?r.w:i;!e.hasNode(a)&&!ee(t,r)&&(e.setNode(a,{}),e.setEdge(o,a,{}),n(a))})};return e.nodes().forEach(n),e.nodeCount()},po=e=>{const t=new K({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(a=>!!e.node(a)).length;t.setNode(n,{});let r,i;for(;vo(t,e)<o;)r=It(t,e),i=t.hasNode(r.v)?ee(e,r):-ee(e,r),Ot(t,e,i);return t},vo=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(i=>{const a=i.v,s=o===a?i.w:a;!e.hasNode(s)&&(t.node(s).layer!==void 0||!ee(t,i))&&(e.setNode(s,{}),e.setEdge(o,s,{}),n(s))})};return e.nodes().forEach(n),e.nodeCount()},It=(e,t)=>Re(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?ee(t,n):1/0),Ot=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:mo,postorder:yo}=Un,bo=e=>{const t=no(e);Mt(t);const n=fo(t);Lt(n),St(n,t);let o,r;for(;o=xo(n);)r=Eo(n,t,o),ko(n,t,o,r)},St=(e,t)=>{let n=yo(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{wo(e,t,o)})},wo=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=go(e,t,n)},go=(e,t,n)=>{var o;const i=e.node(n).parent;let a=!0,s=t.edgeFromArgs(n,i),d=0;return s||(a=!1,s=t.edgeFromArgs(i,n)),d=s.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(l=>{const c=l.v===n,u=c?l.w:l.v;if(u!==i){const f=c===a,h=t.edge(l).weight;if(d+=f?h:-h,No(e,n,u)){const p=e.edgeFromArgs(n,u).cutvalue;d+=f?-p:p}}}),d},Lt=(e,t=e.nodes()[0])=>{Pt(e,{},1,t)},Pt=(e,t,n,o,r)=>{var i;const a=n;let s=n;const d=e.node(o);return t[o]=!0,(i=e.neighbors(o))===null||i===void 0||i.forEach(l=>{t[l]||(s=Pt(e,t,s,l,o))}),d.low=a,d.lim=s++,r?d.parent=r:delete d.parent,s},xo=e=>e.edges().find(t=>e.edge(t).cutvalue<0),Eo=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const i=e.node(o),a=e.node(r);let s=i,d=!1;i.lim>a.lim&&(s=a,d=!0);const l=t.edges().filter(c=>d===Qe(e,e.node(c.v),s)&&d!==Qe(e,e.node(c.w),s));return Re(l,c=>ee(t,c))},ko=(e,t,n,o)=>{const r=n.v,i=n.w;e.removeEdge(r,i),e.setEdge(o.v,o.w,{}),Lt(e),St(e,t),_o(e,t)},_o=(e,t)=>{const n=e.nodes().find(r=>{var i;return!(!((i=t.node(r))===null||i===void 0)&&i.parent)});let o=mo(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const i=e.node(r).parent;let a=t.edgeFromArgs(r,i),s=!1;a||(a=t.edgeFromArgs(i,r),s=!0),t.node(r).rank=t.node(i).rank+(s?a.minlen:-a.minlen)})},No=(e,t,n)=>e.hasEdge(t,n),Qe=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,Mo=e=>{switch(e.graph().ranker){case"network-simplex":Oo(e);break;case"tight-tree":Ze(e);break;case"longest-path":Io(e);break;default:Ze(e)}},Io=Mt,Ze=e=>{uo(e),po(e)},Oo=e=>{bo(e)},So=e=>{var t;const n={};let o=0;const r=i=>{var a;const s=o;(a=e.children(i))===null||a===void 0||a.forEach(r),n[i]={low:s,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},Lo=(e,t,n,o)=>{const r=[],i=[],a=Math.min(t[n].low,t[o].low),s=Math.max(t[n].lim,t[o].lim);let d,l;d=n;do d=e.parent(d),r.push(d);while(d&&(t[d].low>a||s>t[d].lim));for(l=d,d=o;d&&d!==l;)i.push(d),d=e.parent(d);return{lca:l,path:r.concat(i.reverse())}},Po=e=>{var t;const n=So(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,i;let a=o,s=e.node(a);const d=s.edgeObj;if(!d)return;const l=Lo(e,n,d.v,d.w),c=l.path,u=l.lca;let f=0,h=c[f],p=!0;for(;a!==d.w;){if(s=e.node(a),p){for(;h!==u&&((r=e.node(h))===null||r===void 0?void 0:r.maxRank)<s.rank;)f++,h=c[f];h===u&&(p=!1)}if(!p){for(;f<c.length-1&&((i=e.node(c[f+1]))===null||i===void 0?void 0:i.minRank)<=s.rank;)f++;h=c[f]}e.setParent(a,h),a=e.successors(a)[0]}})},To=e=>{var t;const n=re(e,"root",{},"_root"),o=Do(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const i=r-1,a=2*i+1;e.graph().nestingRoot=n,e.edges().forEach(d=>{e.edge(d).minlen*=a});const s=Co(e)+1;(t=e.children())===null||t===void 0||t.forEach(d=>{Tt(e,n,a,s,i,o,d)}),e.graph().nodeRankFactor=a},Tt=(e,t,n,o,r,i,a)=>{const s=e.children(a);if(!(s!=null&&s.length)){a!==t&&e.setEdge(t,a,{weight:0,minlen:n});return}const d=Je(e,"_bt"),l=Je(e,"_bb"),c=e.node(a);e.setParent(d,a),c.borderTop=d,e.setParent(l,a),c.borderBottom=l,s==null||s.forEach(u=>{Tt(e,t,n,o,r,i,u);const f=e.node(u),h=f.borderTop?f.borderTop:u,p=f.borderBottom?f.borderBottom:u,v=f.borderTop?o:2*o,b=h!==p?1:r-i[a]+1;e.setEdge(d,h,{minlen:b,weight:v,nestingEdge:!0}),e.setEdge(p,l,{minlen:b,weight:v,nestingEdge:!0})}),e.parent(a)||e.setEdge(t,d,{weight:0,minlen:r+i[a]})},Do=e=>{var t;const n={},o=(r,i)=>{const a=e.children(r);a==null||a.forEach(s=>o(s,i+1)),n[r]=i};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},Co=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},Ro=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},et={run:To,cleanup:Ro},Fo=e=>{var t;const n=o=>{const r=e.children(o),i=e.node(o);if(r!=null&&r.length&&r.forEach(a=>n(a)),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let a=i.minRank,s=i.maxRank+1;a<s;a+=1)tt(e,"borderLeft","_bl",o,i,a),tt(e,"borderRight","_br",o,i,a)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},tt=(e,t,n,o,r,i)=>{const a={rank:i,borderType:t,width:0,height:0},s=r[t][i-1],d=re(e,"border",a,n);r[t][i]=d,e.setParent(d,o),s&&e.setEdge(s,d,{weight:1})},jo=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Dt(e)},Vo=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&Ao(e),(n==="lr"||n==="rl")&&(Bo(e),Dt(e))},Dt=e=>{e.nodes().forEach(t=>{nt(e.node(t))}),e.edges().forEach(t=>{nt(e.edge(t))})},nt=e=>{const t=e.width;e.width=e.height,e.height=t},Ao=e=>{e.nodes().forEach(t=>{ge(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>ge(r)),o.hasOwnProperty("y")&&ge(o)})},ge=e=>{e!=null&&e.y&&(e.y=-e.y)},Bo=e=>{e.nodes().forEach(t=>{xe(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>xe(r)),o.hasOwnProperty("x")&&xe(o)})},xe=e=>{const t=e.x;e.x=e.y,e.y=t},ot={adjust:jo,undo:Vo},rt=e=>{const t={},n=e.nodes().filter(c=>{var u;return!(!((u=e.children(c))===null||u===void 0)&&u.length)}),o=n.map(c=>e.node(c).rank),r=Math.max(...o),i=[];for(let c=0;c<r+1;c++)i.push([]);const a=c=>{var u;if(t.hasOwnProperty(c))return;t[c]=!0;const f=e.node(c);isNaN(f.rank)||i[f.rank].push(c),(u=e.successors(c))===null||u===void 0||u.forEach(h=>a(h))},s=n.sort((c,u)=>e.node(c).rank-e.node(u).rank),l=s.filter(c=>e.node(c).fixorder!==void 0).sort((c,u)=>e.node(c).fixorder-e.node(u).fixorder);return l==null||l.forEach(c=>{isNaN(e.node(c).rank)||i[e.node(c).rank].push(c),t[c]=!0}),s==null||s.forEach(a),i},Go=(e,t,n)=>{const o=oo(n,n.map((c,u)=>u)),i=t.map(c=>{var u;const f=(u=e.outEdges(c))===null||u===void 0?void 0:u.map(h=>({pos:o[h.w]||0,weight:e.edge(h).weight}));return f==null?void 0:f.sort((h,p)=>h.pos-p.pos)}).flat().filter(c=>c!==void 0);let a=1;for(;a<n.length;)a<<=1;const s=2*a-1;a-=1;const d=Array(s).fill(0,0,s);let l=0;return i==null||i.forEach(c=>{if(c){let u=c.pos+a;d[u]+=c.weight;let f=0;for(;u>0;)u%2&&(f+=d[u+1]),u=u-1>>1,d[u]+=c.weight;l+=c.weight*f}}),l},it=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=Go(e,t[o-1],t[o]);return n},zo=(e,t,n)=>{const o=Wo(e),r=new K({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(i=>e.node(i));return e.nodes().forEach(i=>{var a;const s=e.node(i),d=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(r.setNode(i),r.setParent(i,d||o),(a=e[n](i))===null||a===void 0||a.forEach(l=>{const c=l.v===i?l.w:l.v,u=r.edgeFromArgs(c,i),f=u!==void 0?u.weight:0;r.setEdge(c,i,{weight:e.edge(l).weight+f})}),s.hasOwnProperty("minRank")&&r.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),r},Wo=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},$o=(e,t,n)=>{const o={};let r;n==null||n.forEach(i=>{let a=e.parent(i),s,d;for(;a;){if(s=e.parent(a),s?(d=o[s],o[s]=a):(d=r,r=a),d&&d!==a){t.setEdge(d,a);return}a=s}})},Uo=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(i=>{const a=e.edge(i),s=e.node(i.v);r.sum+=a.weight*s.order,r.weight+=a.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),Yo=(e,t)=>{var n,o,r;const i={};e==null||e.forEach((s,d)=>{i[s.v]={i:d,indegree:0,in:[],out:[],vs:[s.v]};const l=i[s.v];s.barycenter!==void 0&&(l.barycenter=s.barycenter,l.weight=s.weight)}),(n=t.edges())===null||n===void 0||n.forEach(s=>{const d=i[s.v],l=i[s.w];d!==void 0&&l!==void 0&&(l.indegree++,d.out.push(i[s.w]))});const a=(r=(o=Object.values(i)).filter)===null||r===void 0?void 0:r.call(o,s=>!s.indegree);return qo(a)},qo=e=>{var t,n;const o=[],r=d=>l=>{l.merged||(l.barycenter===void 0||d.barycenter===void 0||l.barycenter>=d.barycenter)&&Xo(d,l)},i=d=>l=>{l.in.push(d),--l.indegree===0&&e.push(l)};for(;e!=null&&e.length;){const d=e.pop();o.push(d),(t=d.in.reverse())===null||t===void 0||t.forEach(l=>r(d)(l)),(n=d.out)===null||n===void 0||n.forEach(l=>i(d)(l))}const a=o.filter(d=>!d.merged),s=["vs","i","barycenter","weight"];return a.map(d=>{const l={};return s==null||s.forEach(c=>{d[c]!==void 0&&(l[c]=d[c])}),l})},Xo=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},Ho=(e,t,n,o)=>{const r=so(e,f=>{const h=f.hasOwnProperty("fixorder")&&!isNaN(f.fixorder);return o?!h&&f.hasOwnProperty("barycenter"):h||f.hasOwnProperty("barycenter")}),i=r.lhs,a=r.rhs.sort((f,h)=>-f.i- -h.i),s=[];let d=0,l=0,c=0;i==null||i.sort(Jo(!!t,!!n)),c=st(s,a,c),i==null||i.forEach(f=>{var h;c+=(h=f.vs)===null||h===void 0?void 0:h.length,s.push(f.vs),d+=f.barycenter*f.weight,l+=f.weight,c=st(s,a,c)});const u={vs:s.flat()};return l&&(u.barycenter=d/l,u.weight=l),u},st=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},Jo=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},Ct=(e,t,n,o,r,i)=>{var a,s,d,l;let c=e.children(t);const u=e.node(t),f=u?u.borderLeft:void 0,h=u?u.borderRight:void 0,p={};f&&(c=c==null?void 0:c.filter(w=>w!==f&&w!==h));const v=Uo(e,c||[]);v==null||v.forEach(w=>{var y;if(!((y=e.children(w.v))===null||y===void 0)&&y.length){const x=Ct(e,w.v,n,o,i);p[w.v]=x,x.hasOwnProperty("barycenter")&&Qo(w,x)}});const b=Yo(v,n);Ko(b,p),(a=b.filter(w=>w.vs.length>0))===null||a===void 0||a.forEach(w=>{const y=e.node(w.vs[0]);y&&(w.fixorder=y.fixorder,w.order=y.order)});const g=Ho(b,o,r,i);if(f&&(g.vs=[f,g.vs,h].flat(),!((s=e.predecessors(f))===null||s===void 0)&&s.length)){const w=e.node(((d=e.predecessors(f))===null||d===void 0?void 0:d[0])||""),y=e.node(((l=e.predecessors(h))===null||l===void 0?void 0:l[0])||"");g.hasOwnProperty("barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+w.order+y.order)/(g.weight+2),g.weight+=2}return g},Ko=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(i=>t[i]?t[i].vs:i);n.vs=r.flat()})},Qo=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},Zo=(e,t)=>{const n=kt(e),o=[],r=[];for(let c=1;c<n+1;c++)o.push(c);for(let c=n-1;c>-1;c--)r.push(c);const i=at(e,o,"inEdges"),a=at(e,r,"outEdges");let s=rt(e);Ee(e,s);let d=Number.POSITIVE_INFINITY,l;for(let c=0,u=0;u<4;++c,++u){dt(c%2?i:a,c%4>=2,!1,t),s=ue(e);const f=it(e,s);f<d&&(u=0,l=ve(s),d=f)}s=rt(e),Ee(e,s);for(let c=0,u=0;u<4;++c,++u){dt(c%2?i:a,c%4>=2,!0,t),s=ue(e);const f=it(e,s);f<d&&(u=0,l=ve(s),d=f)}Ee(e,l)},at=(e,t,n)=>t.map(o=>zo(e,o,n)),dt=(e,t,n,o)=>{const r=new K;e==null||e.forEach(i=>{var a;const s=i.graph().root,d=Ct(i,s,r,t,n,o);for(let l=0;l<((a=d.vs)===null||a===void 0?void 0:a.length);l++){const c=i.node(d.vs[l]);c&&(c.order=l)}$o(i,r,d.vs)})},Ee=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class er extends me{}const tr=(e,t)=>{const n={},o=(r,i)=>{let a=0,s=0;const d=r.length,l=i==null?void 0:i[(i==null?void 0:i.length)-1];return i==null||i.forEach((c,u)=>{var f;const h=or(e,c),p=h?e.node(h).order:d;(h||c===l)&&((f=i.slice(s,u+1))===null||f===void 0||f.forEach(v=>{var b;(b=e.predecessors(v))===null||b===void 0||b.forEach(g=>{var w;const y=e.node(g),x=y.order;(x<a||p<x)&&!(y.dummy&&(!((w=e.node(v))===null||w===void 0)&&w.dummy))&&Rt(n,g,v)})}),s=u+1,a=p)}),i};return t!=null&&t.length&&t.reduce(o),n},nr=(e,t)=>{const n={};function o(s,d,l,c,u){var f,h;let p;for(let v=d;v<l;v++)p=s[v],!((f=e.node(p))===null||f===void 0)&&f.dummy&&((h=e.predecessors(p))===null||h===void 0||h.forEach(b=>{const g=e.node(b);g.dummy&&(g.order<c||g.order>u)&&Rt(n,b,p)}))}function r(s){return JSON.stringify(s.slice(1))}function i(s,d){const l=r(s);d.get(l)||(o(...s),d.set(l,!0))}const a=(s,d)=>{let l=-1,c,u=0;const f=new Map;return d==null||d.forEach((h,p)=>{var v;if(((v=e.node(h))===null||v===void 0?void 0:v.dummy)==="border"){const b=e.predecessors(h)||[];b.length&&(c=e.node(b[0]).order,i([d,u,p,l,c],f),u=p,l=c)}i([d,u,d.length,c,s.length],f)}),d};return t!=null&&t.length&&t.reduce(a),n},or=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},Rt=(e,t,n)=>{let o=t,r=n;if(o>r){const a=o;o=r,r=a}let i=e[o];i||(e[o]=i={}),i[r]=!0},rr=(e,t,n)=>{let o=t,r=n;if(o>r){const i=t;o=r,r=i}return!!e[o]},ir=(e,t,n,o)=>{const r={},i={},a={};return t==null||t.forEach(s=>{s==null||s.forEach((d,l)=>{r[d]=d,i[d]=d,a[d]=l})}),t==null||t.forEach(s=>{let d=-1;s==null||s.forEach(l=>{let c=o(l);if(c.length){c=c.sort((f,h)=>a[f]-a[h]);const u=(c.length-1)/2;for(let f=Math.floor(u),h=Math.ceil(u);f<=h;++f){const p=c[f];i[l]===l&&d<a[p]&&!rr(n,l,p)&&(i[p]=l,i[l]=r[l]=r[p],d=a[p])}}})}),{root:r,align:i}},sr=(e,t,n,o,r)=>{var i;const a={},s=ar(e,t,n,r),d=r?"borderLeft":"borderRight",l=(f,h)=>{let p=s.nodes(),v=p.pop();const b={};for(;v;)b[v]?f(v):(b[v]=!0,p.push(v),p=p.concat(h(v))),v=p.pop()},c=f=>{a[f]=(s.inEdges(f)||[]).reduce((h,p)=>Math.max(h,(a[p.v]||0)+s.edge(p)),0)},u=f=>{const h=(s.outEdges(f)||[]).reduce((v,b)=>Math.min(v,(a[b.w]||0)-s.edge(b)),Number.POSITIVE_INFINITY),p=e.node(f);h!==Number.POSITIVE_INFINITY&&p.borderType!==d&&(a[f]=Math.max(a[f],h))};return l(c,s.predecessors.bind(s)),l(u,s.successors.bind(s)),(i=Object.values(o))===null||i===void 0||i.forEach(f=>{a[f]=a[n[f]]}),a},ar=(e,t,n,o)=>{const r=new er,i=e.graph(),a=ur(i.nodesep,i.edgesep,o);return t==null||t.forEach(s=>{let d;s==null||s.forEach(l=>{const c=n[l];if(r.setNode(c),d){const u=n[d],f=r.edgeFromArgs(u,c);r.setEdge(u,c,Math.max(a(e,l,d),f||0))}d=l})}),r},dr=(e,t)=>Re(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(a=>{const s=n[a],d=fr(e,a)/2;r=Math.max(s+d,r),i=Math.min(s-d,i)}),r-i});function lr(e,t){const n=Object.values(t),o=Math.min(...n),r=Math.max(...n);["u","d"].forEach(i=>{["l","r"].forEach(a=>{const s=i+a,d=e[s];let l;if(d===t)return;const c=Object.values(d);l=a==="l"?o-Math.min(...c):r-Math.max(...c),l&&(e[s]={},Object.keys(d).forEach(u=>{e[s][u]=d[u]+l}))})})}const cr=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(i=>i[o]);n[o]=(r[0]+r[1])/2}}),n},ur=(e,t,n)=>(o,r,i)=>{const a=o.node(r),s=o.node(i);let d=0,l;if(d+=a.width/2,a.hasOwnProperty("labelpos"))switch((a.labelpos||"").toLowerCase()){case"l":l=-a.width/2;break;case"r":l=a.width/2;break}if(l&&(d+=n?l:-l),l=0,d+=(a.dummy?t:e)/2,d+=(s.dummy?t:e)/2,d+=s.width/2,s.labelpos)switch((s.labelpos||"").toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(d+=n?l:-l),l=0,d},fr=(e,t)=>e.node(t).width||0,hr=e=>{const t=ue(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const i=r.map(s=>e.node(s).height),a=Math.max(...i,0);r==null||r.forEach(s=>{e.node(s).y=o+a/2}),o+=a+n})},pr=e=>{const t=ue(e),n=Object.assign(tr(e,t),nr(e,t)),o={};let r=[];["u","d"].forEach(a=>{r=a==="u"?t:Object.values(t).reverse(),["l","r"].forEach(s=>{s==="r"&&(r=r.map(u=>Object.values(u).reverse()));const d=(a==="u"?e.predecessors:e.successors).bind(e),l=ir(e,r,n,d),c=sr(e,r,l.root,l.align,s==="r");s==="r"&&Object.keys(c).forEach(u=>c[u]=-c[u]),o[a+s]=c})});const i=dr(e,o);return i&&lr(o,i),cr(o,e.graph().align)},vr=e=>{var t;const n=Et(e);hr(n);const o=pr(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},mr=(e,t)=>{const o=e.nodes().filter(a=>{var s;return!(!((s=e.children(a))===null||s===void 0)&&s.length)}).map(a=>e.node(a).rank),r=Math.max(...o),i=[];for(let a=0;a<r+1;a++)i[a]=[];t==null||t.forEach(a=>{const s=e.node(a);!s||s!=null&&s.dummy||isNaN(s.rank)||(s.fixorder=i[s.rank].length,i[s.rank].push(a))})},yr=(e,t)=>{const n=t&&t.debugTiming?_t:Nt;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{wr(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>Ir(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{Or(o)});try{n("  runLayout",()=>{br(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{gr(e,o)})})},br=(e,t,n)=>{t("    removeSelfEdges",()=>{jr(e)}),t("    acyclic",()=>{Xe.run(e)}),t("    nestingGraph.run",()=>{et.run(e)}),t("    rank",()=>{Mo(Et(e))}),t("    injectEdgeLabelProxies",()=>{Sr(e)}),t("    removeEmptyRanks",()=>{io(e)}),t("    nestingGraph.cleanup",()=>{et.cleanup(e)}),t("    normalizeRanks",()=>{ro(e)}),t("    assignRankMinMax",()=>{Lr(e)}),t("    removeEdgeLabelProxies",()=>{Pr(e)}),t("    normalize.run",()=>{Ke.run(e)}),t("    parentDummyChains",()=>{Po(e)}),t("    addBorderSegments",()=>{Fo(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{mr(e,n.nodeOrder)}),t("    order",()=>{Zo(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{Vr(e)}),t("    adjustCoordinateSystem",()=>{ot.adjust(e)}),t("    position",()=>{vr(e)}),t("    positionSelfEdges",()=>{Ar(e)}),t("    removeBorderNodes",()=>{Fr(e)}),t("    normalize.undo",()=>{Ke.undo(e)}),t("    fixupEdgeLabelCoords",()=>{Cr(e)}),t("    undoCoordinateSystem",()=>{ot.undo(e)}),t("    translateGraph",()=>{Tr(e)}),t("    assignNodeIntersects",()=>{Dr(e)}),t("    reversePoints",()=>{Rr(e)}),t("    acyclic.undo",()=>{Xe.undo(e)})},wr=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},gr=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const i=t.node(n);r.x=i.x,r.y=i.y,r._order=i.order,r._rank=i.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=i.width,r.height=i.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},xr=["nodesep","edgesep","ranksep","marginx","marginy"],Er={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ke=["acyclicer","ranker","rankdir","align"],kr=["width","height","layer","fixorder"],_r={width:0,height:0},Nr=["minlen","weight","width","height","labeloffset"],Mr={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_e=["labelpos"],Ir=e=>{const t=new K({multigraph:!0,compound:!0}),n=Me(e.graph()),o={};return ke==null||ke.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},Er,Ne(n,xr),o)),e.nodes().forEach(r=>{const i=Me(e.node(r)),a=Object.assign(Object.assign({},_r),i),s=Ne(a,kr);t.setNode(r,s),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const i=Me(e.edge(r)),a={};_e==null||_e.forEach(s=>{i[s]!==void 0&&(a[s]=i[s])}),t.setEdgeObj(r,Object.assign({},Mr,Ne(i,Nr),a))}),t},Or=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},Sr=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),i={e:t,rank:(r.rank-o.rank)/2+o.rank};re(e,"edge-proxy",i,"_ep")}})},Lr=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const i=e.node(n);i.borderTop&&(i.minRank=(o=e.node(i.borderTop))===null||o===void 0?void 0:o.rank,i.maxRank=(r=e.node(i.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,i.maxRank||-1/0))}),e.graph().maxRank=t},Pr=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},Tr=e=>{let t,n=0,o,r=0;const i=e.graph(),a=i.marginx||0,s=i.marginy||0,d=l=>{if(!l)return;const c=l.x,u=l.y,f=l.width,h=l.height;!isNaN(c)&&!isNaN(f)&&(t===void 0&&(t=c-f/2),t=Math.min(t,c-f/2),n=Math.max(n,c+f/2)),!isNaN(u)&&!isNaN(h)&&(o===void 0&&(o=u-h/2),o=Math.min(o,u-h/2),r=Math.max(r,u+h/2))};e.nodes().forEach(l=>{d(e.node(l))}),e.edges().forEach(l=>{const c=e.edge(l);c!=null&&c.hasOwnProperty("x")&&d(c)}),t-=a,o-=s,e.nodes().forEach(l=>{const c=e.node(l);c&&(c.x-=t,c.y-=o)}),e.edges().forEach(l=>{var c;const u=e.edge(l);(c=u.points)===null||c===void 0||c.forEach(f=>{f.x-=t,f.y-=o}),u.hasOwnProperty("x")&&(u.x-=t),u.hasOwnProperty("y")&&(u.y-=o)}),i.width=n-t+a,i.height=r-o+s},Dr=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let i,a;n.points?(i=n.points[0],a=n.points[n.points.length-1]):(n.points=[],i=r,a=o),n.points.unshift(He(o,i)),n.points.push(He(r,a))})},Cr=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},Rr=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},Fr=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const i=e.node(t),a=e.node(i.borderTop),s=e.node(i.borderBottom),d=e.node(i.borderLeft[((o=i.borderLeft)===null||o===void 0?void 0:o.length)-1]),l=e.node(i.borderRight[((r=i.borderRight)===null||r===void 0?void 0:r.length)-1]);i.width=Math.abs((l==null?void 0:l.x)-(d==null?void 0:d.x))||10,i.height=Math.abs((s==null?void 0:s.y)-(a==null?void 0:a.y))||10,i.x=((d==null?void 0:d.x)||0)+i.width/2,i.y=((a==null?void 0:a.y)||0)+i.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},jr=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},Vr=e=>{const t=ue(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,i)=>{var a;const s=e.node(r);s.order=i+o,(a=s.selfEdges)===null||a===void 0||a.forEach(d=>{re(e,"selfedge",{width:d.label.width,height:d.label.height,rank:s.rank,order:i+ ++o,e:d.e,label:d.label},"_se")}),delete s.selfEdges})})},Ar=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,i=o.y,a=n.x-r,s=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*a/3,y:i-s},{x:r+5*a/6,y:i-s},{y:i,x:r+a},{x:r+5*a/6,y:i+s},{x:r+2*a/3,y:i+s}],n.label.x=n.x,n.label.y=n.y}})},Ne=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},Me=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},Br={layout:yr,util:{time:_t,notime:Nt}};class Gr extends pn{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,i=r.find(a=>a.id===n);return i?i.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const i=this,{nodes:a,nodeSize:s,rankdir:d,combos:l,begin:c,radial:u,comboEdges:f=[],vedges:h=[]}=i;if(!a)return;const p=i.edges||[],v=new K({multigraph:!0,compound:!0});i.nodeMap={};const b={};a.forEach(m=>{i.nodeMap[m.id]=m,m.comboId&&(b[m.comboId]=b[m.comboId]||[],b[m.comboId].push(m.id))});let g=[];const w={};!((t=i.nodeOrder)===null||t===void 0)&&t.length?(i.nodeOrder.forEach(m=>{w[m]=!0,g.push(i.nodeMap[m])}),a.forEach(m=>{w[m.id]||g.push(m)})):g=a;let y;s?ze(s)?y=()=>s:y=()=>[s,s]:y=m=>m.size?ze(m.size)?m.size:mt(m.size)?[m.size.width||40,m.size.height||40]:[m.size,m.size]:[40,40];const x=We(i.ranksep,50,i.ranksepFunc),O=We(i.nodesep,50,i.nodesepFunc);let L=O,te=x;(d==="LR"||d==="RL")&&(L=x,te=O),v.setDefaultEdgeLabel(()=>({})),v.setGraph(i);const X={};this.sortByCombo&&l&&l.forEach(m=>{if(X[m.id]=m,m.collapsed){const T=y(m),C=te(m),P=L(m),R=T[0]+2*P,_=T[1]+2*C;v.setNode(m.id,{width:R,height:_})}m.parentId&&(X[m.parentId]||v.setNode(m.parentId,{}),v.setParent(m.id,m.parentId))}),g.filter(m=>m.layout!==!1).forEach(m=>{const T=y(m),C=te(m),P=L(m),R=T[0]+2*P,_=T[1]+2*C,N=m.layer;pe(N)?v.setNode(m.id,{width:R,height:_,layer:N}):v.setNode(m.id,{width:R,height:_}),this.sortByCombo&&m.comboId&&(X[m.comboId]||(X[m.comboId]={id:m.comboId},v.setNode(m.comboId,{})),v.setParent(m.id,m.comboId))}),p.forEach(m=>{const T=ne(m,"source"),C=ne(m,"target");this.layoutNode(T)&&this.layoutNode(C)&&v.setEdge(T,C,{weight:m.weight||1})}),(n=f==null?void 0:f.concat(h||[]))===null||n===void 0||n.forEach(m=>{var T,C;const{source:P,target:R}=m,_=!((T=X[P])===null||T===void 0)&&T.collapsed?[P]:b[P]||[P],N=!((C=X[R])===null||C===void 0)&&C.collapsed?[R]:b[R]||[R];_.forEach(M=>{N.forEach(I=>{v.setEdge(M,I,{weight:m.weight||1})})})});let Q;!((o=i.preset)===null||o===void 0)&&o.nodes&&(Q=new K({multigraph:!0,compound:!0}),i.preset.nodes.forEach(m=>{Q==null||Q.setNode(m.id,m)})),Br.layout(v,{prevGraph:Q,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:!!i.nodeOrder,nodeOrder:i.nodeOrder});const j=[0,0];if(c){let m=1/0,T=1/0;v.nodes().forEach(C=>{const P=v.node(C);m>P.x&&(m=P.x),T>P.y&&(T=P.y)}),v.edges().forEach(C=>{var P;(P=v.edge(C).points)===null||P===void 0||P.forEach(_=>{m>_.x&&(m=_.x),T>_.y&&(T=_.y)})}),j[0]=c[0]-m,j[1]=c[1]-T}const Z=d==="LR"||d==="RL";if(u){const{focusNode:m,ranksep:T,getRadialPos:C}=this,P=vn(m)?m:m==null?void 0:m.id,R=P?(r=v.node(P))===null||r===void 0?void 0:r._rank:0,_=[],N=Z?"y":"x",M=Z?"height":"width";let I=1/0,V=-1/0;v.nodes().forEach(E=>{const k=v.node(E);if(!i.nodeMap[E])return;const A=O(i.nodeMap[E]);if(R===0)_[k._rank]||(_[k._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),_[k._rank].nodes.push(E),_[k._rank].totalWidth+=A*2+k[M],_[k._rank].maxSize<Math.max(k.width,k.height)&&(_[k._rank].maxSize=Math.max(k.width,k.height));else{const S=k._rank-R;if(S===0)_[S]||(_[S]={nodes:[],totalWidth:0,maxSize:-1/0}),_[S].nodes.push(E),_[S].totalWidth+=A*2+k[M],_[S].maxSize<Math.max(k.width,k.height)&&(_[S].maxSize=Math.max(k.width,k.height));else{const D=Math.abs(S);_[D]||(_[D]={left:[],right:[],totalWidth:0,maxSize:-1/0}),_[D].totalWidth+=A*2+k[M],_[D].maxSize<Math.max(k.width,k.height)&&(_[D].maxSize=Math.max(k.width,k.height)),S<0?_[D].left.push(E):_[D].right.push(E)}}const $=k[N]-k[M]/2-A,B=k[N]+k[M]/2+A;$<I&&(I=$),B>V&&(V=B)});let F=T||50;const G={},H=(V-I)/.9,je=[(I+V-H)*.5,(I+V+H)*.5],ye=(E,k,A=-1/0,$=[0,1])=>{let B=A;return E.forEach(S=>{const D=v.node(S);G[S]=k;const{x:Y,y:z}=C(D[N],je,H,k,$);if(!i.nodeMap[S])return;i.nodeMap[S].x=Y+j[0],i.nodeMap[S].y=z+j[1],i.nodeMap[S]._order=D._order;const W=x(i.nodeMap[S]);B<W&&(B=W)}),B};let be=!0;const At=0;_.forEach(E=>{var k,A,$,B,S,D,Y;if(!(!((k=E==null?void 0:E.nodes)===null||k===void 0)&&k.length)&&!(!((A=E==null?void 0:E.left)===null||A===void 0)&&A.length)&&!(!(($=E==null?void 0:E.right)===null||$===void 0)&&$.length))return;if(be&&E.nodes.length===1){const W=E.nodes[0];if(!i.nodeMap[W])return;i.nodeMap[W].x=j[0],i.nodeMap[W].y=j[1],G[E.nodes[0]]=0,F=x(i.nodeMap[W]),be=!1;return}F=Math.max(F,E.totalWidth/(2*Math.PI));let z=-1/0;if(R===0||!((B=E.nodes)===null||B===void 0)&&B.length)z=ye(E.nodes,F,z,[0,1]);else{const W=((S=E.left)===null||S===void 0?void 0:S.length)/(((D=E.left)===null||D===void 0?void 0:D.length)+((Y=E.right)===null||Y===void 0?void 0:Y.length));z=ye(E.left,F,z,[0,W]),z=ye(E.right,F,z,[W+.05,1])}F+=z,be=!1,At-E.maxSize}),v.edges().forEach(E=>{var k,A,$;const B=v.edge(E),S=p.findIndex(D=>{const Y=ne(D,"source"),z=ne(D,"target");return Y===E.v&&z===E.w});if(!(S<=-1)&&i.edgeLabelSpace&&i.controlPoints&&p[S].type!=="loop"){const D=N==="x"?"y":"x",Y=(k=B==null?void 0:B.points)===null||k===void 0?void 0:k.slice(1,B.points.length-1),z=[],W=(A=v.node(E.v))===null||A===void 0?void 0:A[D],Bt=W-(($=v.node(E.w))===null||$===void 0?void 0:$[D]),Ve=G[E.v],Gt=Ve-G[E.w];Y==null||Y.forEach(Ae=>{const zt=(Ae[D]-W)/Bt*Gt+Ve,Be=C(Ae[N],je,H,zt);z.push({x:Be.x+j[0],y:Be.y+j[1]})}),p[S].controlPoints=z}})}else{const m=new Set,C=d==="BT"||d==="RL"?(N,M)=>M-N:(N,M)=>N-M;v.nodes().forEach(N=>{const M=v.node(N);if(!M)return;let I=this.nodeMap[N];I||(I=l==null?void 0:l.find(V=>V.id===N)),I&&(I.x=M.x+j[0],I.y=M.y+j[1],I._order=M._order,m.add(Z?I.x:I.y))});const P=Array.from(m).sort(C),R=Z?(N,M)=>N.x!==M.x:(N,M)=>N.y!==M.y,_=Z?(N,M,I)=>{const V=Math.max(M.y,I.y),F=Math.min(M.y,I.y);return N.filter(G=>G.y<=V&&G.y>=F)}:(N,M,I)=>{const V=Math.max(M.x,I.x),F=Math.min(M.x,I.x);return N.filter(G=>G.x<=V&&G.x>=F)};v.edges().forEach(N=>{var M;const I=v.edge(N),V=p.findIndex(F=>{const G=ne(F,"source"),H=ne(F,"target");return G===N.v&&H===N.w});if(!(V<=-1)&&i.edgeLabelSpace&&i.controlPoints&&p[V].type!=="loop"){(M=I==null?void 0:I.points)===null||M===void 0||M.forEach(H=>{H.x+=j[0],H.y+=j[1]});const F=i.nodeMap[N.v],G=i.nodeMap[N.w];p[V].controlPoints=zr(I==null?void 0:I.points,F,G,P,Z,R,_)}})}return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:a,edges:p}}getRadialPos(t,n,o,r,i=[0,1]){let a=(t-n[0])/o;a=a*(i[1]-i[0])+i[0];const s=a*2*Math.PI;return{x:Math.cos(s)*r,y:Math.sin(s)*r}}getType(){return"dagre"}}const zr=(e,t,n,o,r,i,a)=>{let s=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:d,y:l}=t,{x:c,y:u}=n;if(r&&(d=t.y,l=t.x,c=n.y,u=n.x),u!==l&&d!==c){const f=o.indexOf(l),h=o[f+1];if(h){const b=s[0],g=r?{x:(l+h)/2,y:(b==null?void 0:b.y)||c}:{x:(b==null?void 0:b.x)||c,y:(l+h)/2};(!b||i(b,g))&&s.unshift(g)}const p=o.indexOf(u),v=Math.abs(p-f);if(v===1)s=a(s,t,n),s.length||s.push(r?{x:(l+u)/2,y:d}:{x:d,y:(l+u)/2});else if(v>1){const b=o[p-1];if(b){const g=s[s.length-1],w=r?{x:(u+b)/2,y:(g==null?void 0:g.y)||c}:{x:(g==null?void 0:g.x)||d,y:(u+b)/2};(!g||i(g,w))&&s.push(w)}}}}return s};class Ft{constructor(){q(this,"lf");q(this,"option")}render(t){this.lf=t}getBytesLength(t){if(!t)return 0;let n=0;for(let o=0;o<t.length;o++){const r=t.charCodeAt(o);t.match(/[A-Z]/)?n+=1.5:r>=1&&r<=126||r>=65376&&r<=65439?n+=1:n+=2}return n}layout(t={}){const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let i=40,a=40;r>20&&(i=r*2,a=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:i,ranksep:a,begin:[120,120],...t};const d=new Gr(this.option).layout({nodes:n.map(c=>({id:c.id,size:{width:c.width,height:c.height},model:c})),edges:o.map(c=>({source:c.sourceNodeId,target:c.targetNodeId,model:c}))}),l={nodes:[],edges:[]};d.nodes.forEach(c=>{const{model:u}=c,f=u.getData();f.x=c.x,f.y=c.y,l.nodes.push(f)}),d.edges.forEach(c=>{const{model:u}=c,f=u.getData();if(f.pointsList=this.calcPointsList(u,l.nodes),f.pointsList){const h=f.pointsList[0],p=f.pointsList[f.pointsList.length-1];f.startPoint={x:h.x,y:h.y},f.endPoint={x:p.x,y:p.y},f.text&&f.text.value&&(f.text={x:p.x-this.getBytesLength(f.text.value)*6-10,y:p.y,value:f.text.value})}else f.startPoint=void 0,f.endPoint=void 0,f.text&&f.text.value&&(f.text=f.text.value);l.edges.push(f)}),this.lf.renderRawData(l)}pointFilter(t){const n=t;let o=1;for(;o<n.length-1;){const r=n[o-1],i=n[o],a=n[o+1];r.x===i.x&&i.x===a.x||r.y===i.y&&i.y===a.y?n.splice(o,1):o++}return n}calcPointsList(t,n){const o=[];if(this.option.rankdir==="LR"&&t.modelType==="polyline-edge"){const r=this.lf.getNodeModelById(t.sourceNodeId),i=this.lf.getNodeModelById(t.targetNodeId),a=n.find(d=>d.id===t.sourceNodeId),s=n.find(d=>d.id===t.targetNodeId);if(a.x<s.x)return o.push({x:a.x+r.width/2,y:a.y}),o.push({x:a.x+r.width/2+(t.offset||50),y:a.y}),o.push({x:a.x+r.width/2+(t.offset||50),y:s.y}),o.push({x:s.x-i.width/2,y:s.y}),this.pointFilter(o);if(a.x>s.x)return a.y>=s.y?(o.push({x:a.x,y:a.y+r.height/2}),o.push({x:a.x,y:a.y+r.height/2+(t.offset||50)}),o.push({x:s.x,y:a.y+r.height/2+(t.offset||50)}),o.push({x:s.x,y:s.y+i.height/2})):(o.push({x:a.x,y:a.y-r.height/2}),o.push({x:a.x,y:a.y-r.height/2-(t.offset||50)}),o.push({x:s.x,y:a.y-r.height/2-(t.offset||50)}),o.push({x:s.x,y:s.y-i.height/2})),this.pointFilter(o)}}}q(Ft,"pluginName","dagre");class Wr extends Yt{constructor({lf:t}){super({lf:t});const n={text:"复制",icon:!0,className:"lf-menu-copy",callback:y=>t.cloneNode(y.id)},o={text:"删除",icon:!0,className:"lf-menu-delete",callback:y=>{t.deleteNode(y.id),t.deleteEdge(y.id)}},r={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:y=>t.graphModel.editText(y.id)},i={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:y=>t.updateText(y.id,"")},a={text:"框选",icon:!0,className:"lf-menu-select",callback(){t.openSelectionSelect(),t.once("selection:selected",t.closeSelectionSelect)}},s={text:"清空",icon:!0,className:"lf-menu-clear",callback(){t.clearData()}},d={text:"添加",icon:!0,className:"lf-menu-add",callback:y=>{console.log("🚀 ~ file: menu.ts:66 ~ Menu ~ constructor ~ ele:",y),["endEvent","serviceTask","note"].includes(y.type)?b(y,[l]):b(y,w.nodeMenu)}},l={text:"",icon:!0,className:"lf-menu-back",callback:y=>{b(y,g.nodeMenu)}},c={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"userTask",x:x+200,y:O});t.addEdge({sourceNodeId:y.id,targetNodeId:L.id})}},u={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"serviceTask",x:x+200,y:O});t.addEdge({type:"noteFlow",sourceNodeId:y.id,targetNodeId:L.id})}},f={text:"结束",icon:!0,className:"lf-menu-end-event",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"endEvent",x:x+150,y:O});t.addEdge({sourceNodeId:y.id,targetNodeId:L.id})}},h={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"exclusiveGateway",x:x+150,y:O});t.addEdge({sourceNodeId:y.id,targetNodeId:L.id})}},p={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"parallelGateway",x:x+150,y:O});t.addEdge({sourceNodeId:y.id,targetNodeId:L.id})}},v={text:"注释",icon:!0,className:"lf-menu-note",callback:y=>{const{x,y:O}=y,L=t.addNode({type:"note",x,y:O-150});t.addEdge({type:"noteFlow",sourceNodeId:y.id,targetNodeId:L.id})}},b=(y,x)=>{setTimeout(()=>{this.__currentData=y;const{left:O,top:L}=this.__menuDOM.style;this.showMenu(O,L,x)})},g={nodeMenu:[d,n,o,r,i],edgeMenu:[o,r,i],graphMenu:[a,s]},w={nodeMenu:[l,c,u,h,p,f,v]};this.setMenuConfig(g)}}class $r extends qt{constructor({lf:t}){super({lf:t}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){t.openSelectionSelect(),t.once("selection:selected",t.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const jt={type:"process",key:"Process",properties:{}};function Ur(e){const{id:t,type:n,x:o,y:r,properties:i,children:a,text:s}=e;return{incoming:[],outgoing:[],children:a,type:n,key:t,groupKey:i==null?void 0:i.groupKey,properties:{...i,name:Pe(s)?s:(s==null?void 0:s.value)??"",x:o,y:r,text:s}}}function Yr(e){const{id:t,type:n,sourceNodeId:o,targetNodeId:r,startPoint:i,endPoint:a,pointsList:s,properties:d,text:l}=e;return{incoming:[o],outgoing:[r],type:n,key:t,groupKey:d==null?void 0:d.groupKey,properties:{...d,name:Pe(l)?l:(l==null?void 0:l.value)??"",text:l,startPoint:i,endPoint:a,pointsList:s}}}function qr(e){const{id:t,type:n,properties:o,text:r}=e;return{type:n,key:t,properties:{...o,name:Pe(r)?r:(r==null?void 0:r.value)??""}}}function Xr(e){const t=new Map,n={processData:jt,flowElementList:[]};return e.nodes.forEach(o=>{var r;if(o.type==="process")n.processData=qr(o);else{const i=Ur(o);(r=n.flowElementList)==null||r.push(i),t.set(o.id,i)}}),e.edges.forEach(o=>{var s;const r=Yr(o);t.get(o.sourceNodeId).outgoing.push(r.key),t.get(o.targetNodeId).incoming.push(r.key),(s=n.flowElementList)==null||s.push(r)}),n}function Hr(e){const{incoming:t,outgoing:n,properties:o,key:r,type:i}=e,{text:a,name:s,startPoint:d,endPoint:l,pointsList:c}=o??{},u={id:r,type:i,sourceNodeId:(t==null?void 0:t[0])??"",targetNodeId:(n==null?void 0:n[0])??"",text:a||s,startPoint:d,endPoint:l,pointsList:c,properties:{}},f=["startPoint","endPoint","pointsList","text"];return u.properties=Te(o,f),u}function Jr(e){const{properties:t,key:n,type:o,children:r}=e,{x:i,y:a,text:s,name:d}=t??{},l={id:n,type:o??"",x:i,y:a,text:s||d,children:r,properties:{}},c=["x","y","text"];return l.properties=Te(t,c),l}function Kr(e){const{properties:t,key:n,type:o}=e,{name:r}=t??{},i={id:n,type:o??"",text:r,x:0,y:0},a=["x","y","text"];return i.properties=Te(t,a),i}function Qr(e){const{flowElementList:t}=e,n=a=>["sequenceFlow","noteFlow"].includes(a),o=(t==null?void 0:t.filter(a=>!n(a.type)).map(Jr))??[],r=(t==null?void 0:t.filter(a=>n(a.type)).map(Hr))??[];return o.unshift(Kr(e.processData??jt)),{nodes:o,edges:r}}class Fe{constructor({lf:t}){t.adapterIn=this.adapterIn,t.adapterOut=this.adapterOut}adapterOut(t){return Xr(t)}adapterIn(t){return Qr(t)}}q(Fe,"pluginName","turboAdapter");class Vt{constructor({lf:t}){q(this,"lf");q(this,"container");q(this,"__tooltipDOM");q(this,"__currentData");q(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=t}render(t,n){this.container=n,n.appendChild(this.__tooltipDOM),t.on("node:mouseenter,edge:mouseenter",({data:o,e:r})=>{var l;const i=(l=this.__tooltips.find(c=>c.id===o.id))==null?void 0:l.content;if(!i)return;this.__tooltipDOM.innerHTML=i;const a=t.getPointByClient(r.x,r.y),{domOverlayPosition:{x:s,y:d}}=a;this.__tooltipDOM.style.top=`${d+10}px`,this.__tooltipDOM.style.left=`${s+10}px`,this.__tooltipDOM.style.display="block"}),t.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(t){this.__tooltips=t}}q(Vt,"pluginName","tooltip");const Zr=nn("span",null,"编辑JSON",-1),ei=De({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(e,{emit:t}){const o=pt(e),{modelValue:r,visible:i}=o,a=Zt("");function s(){const d=JSON.parse(a.value);r.value=d,t("confirm",d),i.value=!1}return en(()=>{a.value=JSON.stringify(r.value,null,2)}),(d,l)=>{const c=J("el-button"),u=J("el-input"),f=J("el-drawer");return oe(),ie(f,{modelValue:U(i),"onUpdate:modelValue":l[1]||(l[1]=h=>se(i)?i.value=h:null)},{header:ae(()=>[Zr,de(c,{type:"primary",onClick:s},{default:ae(()=>[tn(" 确定 ")]),_:1})]),default:ae(()=>[de(u,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=h=>a.value=h),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),as=De({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},formOptionFormat:{type:Function},formDataFormat:{type:Function}},setup(e){const t=e,n=Qt(t),{lf:o,graphData:r,formData:i,formOption:a,formDefaults:s,formLoading:d,editorVisible:l,onUpdateFormData:c}=n,u=ft("container");return ht(()=>{var f;o.value=new lt.LogicFlow({container:document.querySelector(`#${u}`),grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[hn,$r,Xt,Wr,Ht,Jt,ct,ut,Fe,Ft],edgeGenerator:(h,p)=>{if(["note","serviceTask"].includes(p.type))return"noteFlow"},...t.initOptions}),(f=o.value)==null||f.setTheme(vt),ln(n),fe(r,h=>{var g,w,y;const p=JSON.stringify(h),v=JSON.stringify((g=o.value)==null?void 0:g.getGraphData());p!==v&&((w=o.value)==null||w.render(h),(y=o.value)==null||y.emit("element:click",{isForce:!0}))},{immediate:!0})}),(f,h)=>{const p=J("el-main"),v=J("el-empty"),b=J("el-skeleton"),g=J("avue-form"),w=J("el-aside"),y=J("el-container");return oe(),ie(y,{class:"lf-container"},{default:ae(()=>[de(p,{id:U(u),class:"lf-main"},null,8,["id"]),de(w,{width:f.formWidth,class:"lf-aside"},{default:ae(()=>{var x,O;return[on(f.$slots,"form-top"),(O=(x=U(a))==null?void 0:x.group)!=null&&O.length?U(d)?(oe(),ie(b,{key:1})):(oe(),ie(g,{key:2,modelValue:U(i),"onUpdate:modelValue":[h[0]||(h[0]=L=>se(i)?i.value=L:null),U(c)],defaults:U(s),"onUpdate:defaults":h[1]||(h[1]=L=>se(s)?s.value=L:null),option:U(a)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(oe(),ie(v,{key:0,description:"选择元素以编辑数据"}))]}),_:3},8,["width"]),de(ei,{modelValue:U(r),"onUpdate:modelValue":h[2]||(h[2]=x=>se(r)?r.value=x:null),visible:U(l),"onUpdate:visible":h[3]||(h[3]=x=>se(l)?l.value=x:null),onConfirm:h[4]||(h[4]=x=>{var O;return(O=U(o))==null?void 0:O.render(x)})},null,8,["modelValue","visible"])]),_:3})}}}),ti=["id"],ds=De({__name:"index",props:{lf:{},initOptions:{},modelValue:{},styles:{},tooltips:{}},setup(e){const t=e,n=pt(t,void 0,{passive:!0}),{lf:o,modelValue:r}=n,i=ft("container");return ht(()=>{var a;o.value=new lt.LogicFlow({container:document.querySelector(`#${i}`),grid:{type:"dot",size:10},isSilentMode:!0,plugins:[ct,ut,Fe,Vt],...t.initOptions}),(a=o.value)==null||a.setTheme(vt),fe(r,s=>{var d;(d=o.value)==null||d.render(s)},{immediate:!0}),fe(()=>t.styles,s=>{s==null||s.forEach(({id:d,style:l})=>{var c,u;d&&((u=(c=o.value)==null?void 0:c.graphModel)==null||u.updateAttributes(d,{style:l}))})},{immediate:!0}),fe(()=>t.tooltips,s=>{var d,l;(l=(d=o.value)==null?void 0:d.extension.tooltip)==null||l.setTooltips(s??[])},{immediate:!0})}),(a,s)=>(oe(),rn("div",{id:U(i),class:"lf-container"},null,8,ti))}});export{ct as BpmnExtend,hn as Control,Ft as Dagre,us as EndEventModel,fs as EndEventView,hs as ExclusiveGatewayModel,ps as ExclusiveGatewayView,as as FlowModeler,ds as FlowViewer,ut as Group,vs as GroupModel,ms as GroupView,Wr as Menu,ys as NoteFlowModel,bs as NoteFlowView,ws as NoteModel,gs as NoteView,$r as Panel,xs as ParallelGatewayModel,Es as ParallelGatewayView,ks as ProcessModel,_s as ProcessView,Ns as SequenceFlowModel,Ms as SequenceFlowView,Is as ServiceTaskModel,Os as ServiceTaskView,Ss as StartEventModel,Ls as StartEventView,Vt as Tooltip,Fe as TurboAdapter,Ps as UserTaskModel,Ts as UserTaskView,Fs as assigneeColumn,js as baseColumn,Vs as buttonColumn,As as circulateColumn,Cs as defaultGraphData,Kt as defaultGroup,Bs as defaultOptions,vt as defaultTheme,os as executionListenerColumn,Gs as formPropertyColumn,zs as gatewayColumn,Ws as multiInstanceColumn,$s as noteColumn,Us as processColumn,Ys as propertyColumn,qs as sequenceFlowColumn,Xs as serialColumn,Hs as serviceTaskColumn,rs as taskListenerColumn,is as timeLimitColumn,Qr as toLogicflowData,Xr as toTurboData,Js as userTaskColumn};
