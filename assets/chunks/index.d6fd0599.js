import{d as R,m as M,H as k,o as T,D as L,j as I,w as q,c as U,J as V,E as D,a as N,e as _,k as B,F as P,R as H,p as he,X as Se,Y as Oe,C as F,t as le,l as Le,I as _e,a3 as X,n as te,O as Ie,G as re,a5 as ge,ar as Ve,q as Ee,at as We}from"./framework.893d3c69.js";import{a as K,v as Re,w as Ue}from"../flow-design_demo.md.7ca749ed.js";import{g as se,f as we,a as Ae,_ as O,p as Me,b as Pe,t as je,c as Be,s as ze,d as ie,e as C,h as Y,i as G,j as He,k as Fe,l as Ne,m as qe,n as Ge,o as Ke,q as Je,r as Xe,u as Ye,v as Qe,w as Ze,x as el,y as ll,z as tl,A as ol,B as al,C as nl,D as rl,E as il,F as pl,G as ul,H as sl,I as ke,J as de,K as Te,L as xe,M as cl}from"./vuedraggable.umd.32c58759.js";import{O as Io,N as Eo}from"./vuedraggable.umd.32c58759.js";import{cr as dl,cs as pe,ct as ml,cu as bl,cv as fl,cw as A,aE as oe,cx as ae,cq as vl,cy as yl,cz as hl,cA as _l}from"../composables_use-crud_index.md.80d9fcd1.js";import{aO as gl}from"../app.46bd79f7.js";import"./vue.runtime.esm-bundler.88a25be6.js";import"./theme.ea6c12eb.js";import"../components_icon-select_index.md.fa314bdb.js";import"../components_index.md.c4883e2d.js";import"../components_v-text_index.md.ae040ac4.js";import"../composables_index.md.5c5bc1a0.js";import"../flow-design_index.md.97a0804d.js";import"../flow-pages_index.md.29be8972.js";import"../flow-pages_pages_flow-button_index.md.f959f5b7.js";import"../flow-pages_pages_flow-manage_index.md.68241b66.js";import"../flow-pages_pages_flow-ops_index.md.dbbe51af.js";import"../flow-pages_pages_flow-param_index.md.8bc100fc.js";import"../flow-pages_pages_flow-template_index.md.f624eb5f.js";import"../flow-pages_pages_flow-workbench_index.md.c22e7bad.js";import"../flow-pages_pages_form-template_index.md.95d0e3bf.js";import"../flow-pages_pages_table-template_index.md.74a33780.js";import"../form-design_demo.md.5be482af.js";import"../form-design_index.md.6e4d7b38.js";import"../guide_changelog.md.3f96ecea.js";import"../guide_start.md.0c303a84.js";import"../index.md.45571f0d.js";import"../plugins_avue-patch_index.md.d7ef31ad.js";import"../plugins_compatible-tips_index.md.da152e22.js";import"../plugins_env-dts_index.md.8f818d48.js";import"../plugins_index.md.a4e4b704.js";import"../plugins_load-proxy_index.md.06a48642.js";import"../plugins_setup-extend_index.md.ee89ab25.js";import"../plugins_uni-ui-patch_index.md.2d99c7f5.js";import"../plugins_uview-patch_index.md.c0e9597e.js";import"../types_avue_index.md.71b6211b.js";import"../types_index.md.16238616.js";import"../utils_date_dateFormat.md.a7849fcc.js";import"../utils_date_durationFormat.md.c951f8ee.js";import"../utils_emitter_mittAsync.md.33710d95.js";import"../utils_index.md.b422de11.js";import"../utils_math_index.md.b02108d7.js";import"../utils_object_filterObj.md.8f5ea217.js";import"../utils_object_filterObjDeep.md.0a2f5d0f.js";import"../utils_object_getDataType.md.a3fc0920.js";import"../utils_string_deserialize.md.9bdfc2c7.js";import"../utils_string_serialize.md.0744f8fa.js";import"../utils_string_uuid.md.c7000e71.js";import"../utils_tool_awaitTo.md.5d912ffe.js";import"../utils_tool_enumToDic.md.8db0e352.js";import"../utils_tool_sleep.md.12e01257.js";import"../utils_tree_buildTree.md.748c5451.js";import"../utils_tree_filterTree.md.e959896e.js";import"../utils_tree_findTree.md.3d8903e2.js";import"../utils_tree_flatTree.md.7ce54663.js";import"../utils_tree_treeMap.md.89fc6622.js";var Vl=/\s/;function wl(e){for(var o=e.length;o--&&Vl.test(e.charAt(o)););return o}var kl=/^\s+/;function Tl(e){return e&&e.slice(0,wl(e)+1).replace(kl,"")}var me=0/0,xl=/^[-+]0x[0-9a-f]+$/i,Dl=/^0b[01]+$/i,Cl=/^0o[0-7]+$/i,$l=parseInt;function be(e){if(typeof e=="number")return e;if(dl(e))return me;if(pe(e)){var o=typeof e.valueOf=="function"?e.valueOf():e;e=pe(o)?o+"":o}if(typeof e!="string")return e===0?e:+e;e=Tl(e);var t=Dl.test(e);return t||Cl.test(e)?$l(e.slice(2),t?2:8):xl.test(e)?me:+e}var Sl=function(){return ml.Date.now()};const ne=Sl;var Ol="Expected a function",Ll=Math.max,Il=Math.min;function El(e,o,t){var l,n,p,c,a,s,u=0,b=!1,m=!1,i=!0;if(typeof e!="function")throw new TypeError(Ol);o=be(o)||0,pe(t)&&(b=!!t.leading,m="maxWait"in t,p=m?Ll(be(t.maxWait)||0,o):p,i="trailing"in t?!!t.trailing:i);function r(v){var g=l,W=n;return l=n=void 0,u=v,c=e.apply(W,g),c}function y(v){return u=v,a=setTimeout($,o),b?r(v):c}function x(v){var g=v-s,W=v-u,E=o-g;return m?Il(E,p-W):E}function S(v){var g=v-s,W=v-u;return s===void 0||g>=o||g<0||m&&W>=p}function $(){var v=ne();if(S(v))return w(v);a=setTimeout($,x(v))}function w(v){return a=void 0,i&&l?r(v):(l=n=void 0,c)}function f(){a!==void 0&&clearTimeout(a),u=0,l=s=n=a=void 0}function d(){return a===void 0?c:w(ne())}function h(){var v=ne(),g=S(v);if(l=arguments,n=this,s=v,g){if(a===void 0)return y(s);if(m)return clearTimeout(a),a=setTimeout($,o),r(s)}return a===void 0&&(a=setTimeout($,o)),c}return h.cancel=f,h.flush=d,h}function De(e,o){return bl(e,o)}function fe(e,o,t){return e==null?e:fl(e,o,t)}function Wl(e,o=[void 0,null],t=[]){const l={};for(const n in e){const p=o.every(a=>e[n]!==a),c=t.every(a=>!n.includes(a));p&&c&&(l[n]=e[n])}return l}function ue(e,o=[void 0,null],t=[]){if(Array.isArray(e))return e.map(l=>ue(l,o,t));{const l={};for(const n in e)if(typeof e[n]=="object")l[n]=ue(e[n],o,t);else{const p=o.every(a=>e[n]!==a),c=t.every(a=>!n.includes(a));p&&c&&(l[n]=e[n])}return l}}function ee(e){return e.map(o=>{var n;const t=A(o);let l=[];return t.name=t.name||t.component||t.type,t.id=t.id||se(t.name),t.name==="form"?l=ee([...t.column??[],...t.group??[]]):t.name==="group"?l=ee(t.column??[]):["dynamic","table"].includes(t.name)&&(l=ee(((n=t.children)==null?void 0:n.column)??[])),{name:t.name,id:t.id,isRoot:t.isRoot,props:t,children:l}})}function ve(e){return ee([{isRoot:!0,name:"form",id:se("form"),...e}])[0]}function Z(e){return e.map(o=>{var l,n,p;const t=A(o);if(t.props&&(t.props.prop=t.props.prop??t.id),t.name==="form"){const c=Z(((l=t.children)==null?void 0:l.filter(s=>s.name!=="group"))??[]),a=Z(((n=t.children)==null?void 0:n.filter(s=>s.name==="group"))??[]);return{...t.props,column:c.length?c:void 0,group:a.length?a:void 0}}if(t.name==="group"){const c=Z(t.children??[]);return{...t.props,column:c}}else if(["dynamic","table"].includes(t.name??"")){const c=Z(t.children??[]),a={...(p=t.props)==null?void 0:p.children,column:c};return{...t.props,children:a}}return{...t.props}})}function Rl(e){return Z([e])[0]??{}}function ce(e,o){const{parentWhiteList:t,parentBlackList:l}=(e==null?void 0:e.rules)??{},{childWhiteList:n,childBlackList:p}=(o==null?void 0:o.rules)??{},c=[];if(t&&o){const a=t.includes((o==null?void 0:o.name)??"");c.push(a)}if(l&&o){const a=l.includes((o==null?void 0:o.name)??"");c.push(!a)}if(n){const a=n.includes((e==null?void 0:e.name)??"");c.push(a)}if(p){const a=p.includes((e==null?void 0:e.name)??"");c.push(!a)}return c.every(a=>a)}const Ul=R({__name:"property-select",props:{tableData:{},dic:{}},setup(e){const o=e,{elementTree:t,baseOption:l,resolveSettings:n,getResource:p}=j(),c=M(()=>{var u;const a=we([t.value],b=>{var m,i,r;return((m=b.props)==null?void 0:m.prop)===((r=(i=o.tableData)==null?void 0:i.row)==null?void 0:r.field)}),s=((u=p(a==null?void 0:a.name))==null?void 0:u.settings)??[];return[...l.value,...n(s)].filter(b=>b.prop).map(b=>({label:b.label,value:b.prop,desc:b.prop}))});return(a,s)=>{const u=k("avue-select");return T(),L(u,{dic:c.value,"allow-create":"",filterable:"","default-first-option":""},null,8,["dic"])}}}),Al=R({__name:"index",props:{modelValue:{}},setup(e){const t=K(e),{modelValue:l}=t,{elementTree:n}=j(),p=I(!1),c=I([]);q(l,()=>{var u,b,m;if(!l.value){c.value=[];return}try{const r=((m=(b=(u=Me(l.value,{ecmaVersion:"latest"}).body[0])==null?void 0:u.expression)==null?void 0:b.body)==null?void 0:m.properties)??[];r!=null&&r.length&&(c.value=r.map(y=>y.value.properties.map(x=>{const S=Pe(x.value);return{field:y.key.name,property:x.key.name,value:S}})).flat())}catch{}},{immediate:!0}),q(c,()=>{var m;if(!p.value)return;const b=`(val, form) => ({
    ${[...new Set((m=c.value)==null?void 0:m.map(i=>i.field))].map(i=>{var y;const r=(y=c.value)==null?void 0:y.filter(x=>x.field===i);return`${i}: { ${r==null?void 0:r.map(x=>`${x.property}: ${x.value}`).join(", ")} }`}).join(`,
    `)}
})`;l.value=b},{deep:!0});const a=M(()=>{var b;return Ae(((b=n.value)==null?void 0:b.children)??[]).map(m=>{const{label:i,prop:r}=m.props??{};return{label:i,value:r,desc:r}})}),s=M(()=>({column:[{label:"受控字段",prop:"field",type:"select",dicData:a.value,rules:{required:!0}},{label:"受控属性",prop:"property",component:Ul,rules:{required:!0}},{label:"表达式/值",prop:"value",component:O,tooltip:!0,rules:{required:!0}}]}));return(u,b)=>{const m=k("el-button"),i=k("avue-dynamic"),r=k("el-dialog");return T(),U(P,null,[V(m,{onClick:b[0]||(b[0]=y=>p.value=!0)},{default:D(()=>[N(" 编辑代码 ")]),_:1}),V(r,{modelValue:p.value,"onUpdate:modelValue":b[3]||(b[3]=y=>p.value=y),title:"控制字段属性"},{default:D(()=>[V(i,{modelValue:c.value,"onUpdate:modelValue":b[1]||(b[1]=y=>c.value=y),children:s.value},null,8,["modelValue","children"]),N(" 代码： "),V(O,{modelValue:_(l),"onUpdate:modelValue":b[2]||(b[2]=y=>B(l)?l.value=y:null),"value-type":"function",height:"200px"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),Co=R({__name:"index",props:{modelValue:{},setterType:{}},setup(e){const t=K(e),{modelValue:l}=t,n={column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]},p={props:{value:"id"},formOption:{column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]}},c=I({});function a(m,i){m(),setTimeout(()=>{(i==="add"||i==="parentAdd")&&(c.value.id=se())},100)}const s=(m,i,r)=>r(),u=(m,i,r)=>r(),b=(m,i)=>i();return(m,i)=>{const r=k("avue-tree"),y=k("avue-dynamic");return m.setterType=="tree"?(T(),L(r,{key:0,modelValue:c.value,"onUpdate:modelValue":i[0]||(i[0]=x=>c.value=x),data:_(l),option:p,"before-open":a,onSave:s,onUpdate:u,onDel:b},null,8,["modelValue","data"])):(T(),L(y,{key:1,children:n,"model-value":_(l)||[],"onUpdate:modelValue":i[1]||(i[1]=x=>l.value=x)},null,8,["model-value"]))}}}),Ml=R({__name:"index",props:{modelValue:{},tableData:{}},setup(e){const o=e,t=K(o),{modelValue:l}=t,n=I(!1),p=I({});q(l,()=>{var a,s;l.value&&(p.value=((s=(a=o.tableData)==null?void 0:a.row)==null?void 0:s.onLoadData)??{})},{immediate:!0}),q(p,()=>{var x;if(!n.value||!((x=o.tableData)!=null&&x.row)||(o.tableData.row.onLoadData=p.value,p.value.codeMode))return;const{url:a,method:s,isPage:u,currentPageKey:b,pageSizeKey:m,totalPath:i,dataPath:r}=p.value,y=`({ page, value, data }, callback) => {
    const params = page && ${u} ? { ${b}: page.currentPage, ${m}: page.pageSize } : {};
    this.$axios({ url: "${a}", method: "${s}", params }).then(res => {
        const data = this.getAsVal({ res }, "${r}");
        const total = this.getAsVal({ res }, "${i}");
        callback({ data, total });
    });
}`;l.value=y},{deep:!0});const c={span:24,menuBtn:!1,labelWidth:100,column:[{label:"请求地址",prop:"url"},{label:"请求方法",prop:"method",type:"radio",button:!0,value:"get",dicData:[{label:"GET",value:"get"},{label:"POST",value:"post"}]},{label:"是否分页",prop:"isPage",type:"switch",value:!0},{label:"当前页键名",prop:"currentPageKey",value:"current"},{label:"每页条数键名",prop:"pageSizeKey",value:"size"},{label:"总条数路径",prop:"totalPath",value:"res.data.total"},{label:"返回数据路径",prop:"dataPath",value:"res.data.records"},{label:"编辑代码模式",prop:"codeMode",type:"switch",value:!1,span:4,tip:"关闭时，代码根据以上参数自动生成。开启时，可自由编辑代码"}]};return(a,s)=>{const u=k("el-button"),b=k("avue-form"),m=k("el-dialog");return T(),U(P,null,[V(u,{onClick:s[0]||(s[0]=i=>n.value=!0)},{default:D(()=>[N(" 编辑代码 ")]),_:1}),V(m,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=i=>n.value=i),title:"加载数据函数"},{default:D(()=>[V(b,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=i=>p.value=i),option:c},null,8,["modelValue"]),N(" 代码： "),V(O,{modelValue:_(l),"onUpdate:modelValue":s[2]||(s[2]=i=>B(l)?l.value=i:null),"value-type":"function",height:"200px",disabled:""},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),Pl=R({__name:"index",props:{modelValue:{}},setup(e){const t=K(e),{modelValue:l}=t,n=I(!1),p=I(-1),c=M({get(){var i;return((i=l.value)==null?void 0:i[p.value])??{}},set(i){if(l.value&&p.value!==-1){const r=Wl(i,[void 0,null,""],["$"]);l.value[p.value]=r}}});async function a(){var i;!l.value&&(l.value=[]),await he(),(i=l.value)==null||i.push({})}function s(i,r){p.value=r,n.value=!0}function u(i,r){var y;(y=l.value)==null||y.splice(r,1)}const b=[{label:"否",value:!1},{label:"是",value:!0}],m={menuBtn:!1,span:24,labelWidth:100,column:[{label:"触发方式",prop:"trigger",type:"select",dicData:[{label:"值变化",value:"change"},{label:"聚焦时",value:"focus"},{label:"失焦时",value:"blur"}]},{label:"值类型",prop:"type",type:"select",dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"整数",value:"integer"},{label:"浮点数",value:"float"},{label:"日期",value:"date"},{label:"URL地址",value:"url"},{label:"十六进制",value:"hex"},{label:"邮箱",value:"email"},{label:"任意类型",value:"any"}]},{label:"是否必填",prop:"required",type:"radio",button:!0,dicData:b},{label:"错误消息",prop:"message"},{label:"正则表达式",prop:"pattern",prepend:"/",append:"/"},{label:"最小",prop:"min",type:"number"},{label:"最大",prop:"max",type:"number"},{label:"长度",prop:"len",type:"number"},{label:"禁止空白符",prop:"whitespace",type:"radio",button:!0,dicData:b},{label:"自定义校验函数",prop:"validator",labelWidth:120,component:O,tooltip:!0,width:"400px",defaultValue:`(rule, value, callback, source, options) => {

}`}]};return(i,r)=>{const y=k("avue-form"),x=k("el-drawer");return T(),U(P,null,[(T(!0),U(P,null,H(_(l),(S,$)=>(T(),U("div",{key:$},[V(_(oe),{icon:"el-icon-setting",onClick:w=>s(S,$)},{default:D(()=>[N(" 配置规则 ")]),_:2},1032,["onClick"]),V(_(oe),{text:"",icon:"el-icon-delete",onClick:w=>u(S,$)},null,8,["onClick"])]))),128)),V(_(oe),{icon:"el-icon-plus",onClick:a},{default:D(()=>[N(" 添加规则 ")]),_:1}),V(x,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=S=>n.value=S),title:"配置规则","append-to-body":"","destroy-on-close":""},{default:D(()=>[V(y,{modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=S=>c.value=S),option:m},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),jl={style:{display:"flex"}},Bl=R({__name:"index",props:{modelValue:{},tableData:{},placeholder:{}},setup(e){const o=e,t=K(o),{modelValue:l}=t,n=M({get(){var s,u;return((u=(s=o.tableData)==null?void 0:s.row)==null?void 0:u.valueType)??"string"},set(s){var u;(u=o.tableData)!=null&&u.row&&(o.tableData.row.valueType=s)}});function p(){l.value=void 0}const c=[{label:"str",value:"string"},{label:"num",value:"number"},{label:"boo",value:"boolean"},{label:"arr",value:"array"},{label:"obj",value:"object"}],a=[{label:"true",value:!0},{label:"false",value:!1}];return(s,u)=>{const b=k("el-input"),m=k("el-input-number"),i=k("avue-select");return T(),U("div",jl,[n.value==="string"?(T(),L(b,{key:0,modelValue:_(l),"onUpdate:modelValue":u[0]||(u[0]=r=>B(l)?l.value=r:null),placeholder:s.placeholder},null,8,["modelValue","placeholder"])):n.value==="number"?(T(),L(m,{key:1,modelValue:_(l),"onUpdate:modelValue":u[1]||(u[1]=r=>B(l)?l.value=r:null),placeholder:s.placeholder},null,8,["modelValue","placeholder"])):n.value==="boolean"?(T(),L(i,{key:2,modelValue:_(l),"onUpdate:modelValue":u[2]||(u[2]=r=>B(l)?l.value=r:null),placeholder:s.placeholder,dic:a},null,8,["modelValue","placeholder"])):(T(),L(O,{key:3,modelValue:_(l),"onUpdate:modelValue":u[3]||(u[3]=r=>B(l)?l.value=r:null),"value-type":n.value,tooltip:""},null,8,["modelValue","value-type"])),V(i,{modelValue:n.value,"onUpdate:modelValue":[u[4]||(u[4]=r=>n.value=r),p],dic:c,clearable:!1,"suffix-icon":"",style:{width:"60px"}},null,8,["modelValue"])])}}}),zl=[{label:"控制其它字段",prop:"control",component:Al},{label:"值变化事件",prop:"change",component:O,tooltip:!0,defaultValue:"({ value, row }) => {}"},{label:"点击事件",prop:"click",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"获取焦点事件",prop:"focus",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"失去焦点事件",prop:"blur",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"其他属性",prop:"params",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"其他事件",prop:"event",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}],ye=[{label:"字段标识",prop:"prop"},{label:"标签标题",prop:"label"},{label:"标签宽度",prop:"labelWidth",type:"number",step:10},{label:"标签位置",prop:"labelPosition",type:"radio",button:!0,dicData:Be},{label:"组件尺寸",prop:"size",type:"radio",button:!0,dicData:ze},{label:"数据类型",prop:"dataType",type:"radio",button:!0,labelWidth:90,labelTip:'会将数据转换为选择的数据类型，如：[1,2,3]=>"1,2,3"',dicData:[{label:"字符",value:"string"},{label:"数字",value:"number"},{label:"数组",value:"array"}]},{label:"表单项栅格",prop:"span",type:"number",min:1,max:24},{label:"字段提示",prop:"tip"},{label:"字段提示位置",prop:"tipPlacement",type:"select",dicData:ie},{label:"标签提示",prop:"labelTip"},{label:"标签提示位置",prop:"labelTipPlacement",type:"select",dicData:ie},{label:"默认值",prop:"value",component:Bl},{label:"占位内容",prop:"placeholder"},{label:"是否可清空",prop:"clearable",component:C,defaultValue:!0},{label:"详情模式",prop:"detail",component:C,defaultValue:!1},{label:"是否只读",prop:"readonly",component:C,defaultValue:!1},{label:"是否禁用",prop:"disabled",component:C,defaultValue:!1},{label:"是否可见",prop:"display",component:C,defaultValue:!0},{label:"校验规则",prop:"rules",component:Pl}],Hl=[{labelWidth:0,type:"title",modelValue:"子表单/表格属性"},{label:"宽度",prop:"width",type:"number"},{label:"最小宽度",prop:"minWidth",type:"number"},{label:"固定列",prop:"fixed",type:"radio",button:!0,dicData:[{label:"左",value:"left"},{label:"右",value:"right"}]},{label:"超长省略",prop:"overHidden",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"是否可搜索",prop:"search",component:C,defaultValue:!1},{label:"是否隐藏",prop:"hide",component:C,defaultValue:!1}],Fl=({elementTree:e,activeElement:o})=>{var n;const t=je([e],(p,c,a)=>({...p,parent:a})),l=we(t,p=>p.id===o.id);return((n=l==null?void 0:l.parent)==null?void 0:n.name)==="dynamic"?[...ye,...Hl]:ye},Nl={name:"color",title:"颜色",icon:"el-icon-brush",group:"表单组件",props:{type:"color",label:"颜色"},settings:[{label:"支持透明度选择",prop:"showAlpha",component:C,defaultValue:!1,labelWidth:120},{label:"颜色格式",prop:"colorFormat",type:"select",dicData:[{label:"hsl",value:"hsl"},{label:"hsv",value:"hsv"},{label:"hex",value:"hex"},{label:"rgb",value:"rgb"}]},{label:"预定义颜色",prop:"predefine",type:"array"}]},ql={name:"dynamic",title:"子表单",icon:"el-icon-grid",group:"表单组件",isContainer:!0,rules:{parentWhiteList:["form","group"],childBlackList:["group","dynamic"]},designOption:e=>{const{label:o,prop:t}=e.props??{};return{column:[{label:o,prop:t,type:"text"}]}},props:{type:"dynamic",label:"子表单",children:{column:[]}},settings:[{prop:"children",labelWidth:0,component:"avue-form",option:{labelWidth:100,menuBtn:!1,span:24,column:[{label:"展示类型",prop:"type",type:"radio",button:!0,value:"crud",dicData:[{label:"表格",value:"crud"},{label:"表单",value:"form"}],control(e){const o=e==="form",t=e==="crud";return{showHeader:{display:t},stripe:{display:t},border:{display:t},headerAlign:{display:t},align:{display:t},span:{display:o}}}},{label:"显示新增按钮",prop:"addBtn",component:C,defaultValue:!0},{label:"显示删除按钮",prop:"delBtn",component:C,defaultValue:!0},{label:"显示序号",prop:"index",type:"switch",control(e,o){return o.type==="crud"&&typeof e=="boolean"&&(o.index=e?"":!1),{}}},{label:"显示表头",prop:"showHeader",component:C,defaultValue:!0},{label:"表格边框",prop:"border",component:C,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"表单项栅格",prop:"span",type:"number"},{label:"空数据文字",prop:"emptyText",type:"number"}]}}]},Gl={name:"group",title:"分组",icon:"el-icon-menu",group:"布局组件",isContainer:!0,rules:{parentWhiteList:["form"],childBlackList:["group"]},designOption:e=>{const{label:o,prop:t}=e.props??{};return{column:[{prop:t,labelWidth:0,type:"title",modelValue:o,styles:{fontWeight:500,fontSize:"16px"}}]}},props:{type:"group",label:"分组",column:[]},settings:[{label:"图标",prop:"icon",type:"icon",iconList:G},{label:"是否默认展开",prop:"collapse",component:C,defaultValue:!0},{label:"是否显示箭头",prop:"arrow",component:C,defaultValue:!0}]},Kl={name:"input",title:"输入框",icon:"el-icon-chat-dot-square",group:"表单组件",props:{type:"input",label:"输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:C,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"前缀文字",prop:"prepend"},{label:"后缀文字",prop:"append"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:G},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:G},{label:"输入值格式化",prop:"formatter",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"返回值格式化",prop:"parser",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"输入框样式",prop:"inputStyle",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}]},Jl={name:"number",title:"数字输入框",icon:"el-icon-more",group:"表单组件",props:{type:"number",label:"数字输入框"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"计数器步长",prop:"step",type:"number"},{label:"只能输入步长倍数",prop:"stepStrictly",component:C,defaultValue:!1,labelWidth:130},{label:"数值精度",prop:"precision",type:"number"},{label:"是否使用控制按钮",prop:"controls",type:"switch",value:!0,labelWidth:130,control(e){return{controlsPosition:{display:!!e}}}},{label:"控制按钮位置",prop:"controlsPosition",type:"radio",button:!0,dicData:[{label:"两边",value:"default"},{label:"右",value:"right"}]},{label:"清空时显示值",prop:"valueOnClear",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"最小值",value:"min"},{label:"最大值",value:"max"}],control(e,o){return e&&!["min","max"].includes(e)&&(o.valueOnClear=Number(e)),{}}}]},Xl={name:"password",title:"密码输入框",icon:"el-icon-lock",group:"表单组件",props:{type:"password",label:"密码输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:G},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:G},{label:"是否显示切换密码",prop:"showPassword",component:C,defaultValue:!1,labelWidth:130}]},Yl={name:"rate",title:"评分",icon:"el-icon-star",group:"表单组件",props:{type:"rate",label:"评分"},settings:[{label:"是否允许半选",prop:"allowHalf",component:C,defaultValue:!1},{label:"最大分值",prop:"max",type:"number",modelValue:5},{label:"低分界限值",prop:"lowThreshold",type:"number",modelValue:2,labelTip:"低分和中等分数的界限值，值本身被划分在低分中"},{label:"高分界限值",prop:"highThreshold",type:"number",modelValue:4,labelTip:"高分和中等分数的界限值，值本身被划分在高分中"},{label:"颜色数组",prop:"colors",component:O,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"若传入数组，共有 3 个元素，为 3 个分段所对应的颜色；若传入对象，可自定义分段，键名为分段的界限值，键值为对应的颜色"},{label:"未选中颜色",prop:"voidColor",type:"color"},{label:"未选颜色(禁用)",prop:"disabledVoidColor",type:"color",labelWidth:110},{label:"图标数组",prop:"icons",component:O,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"若传入数组，则需要传入 3 个元素，分别为 3 个部分所对应的图标；若传入对象，则可自定义分段，键名为分段的界限值，键值为对应的图标"},{label:"未选中图标",prop:"voidIcon",type:"icon",iconList:G},{label:"未选图标(禁用)",prop:"disabledVoidIcon",type:"icon",iconList:G,labelWidth:110},{label:"显示辅助文字",prop:"showText",component:C,defaultValue:!1,labelWidth:120,labelTip:"是否显示辅助文字，若为是，则会从 辅助文字数组 中选取当前分数对应的文字内容"},{label:"显示当前分数",prop:"showScore",component:C,defaultValue:!1,labelWidth:120,labelTip:"是否显示当前分数，当前分数 和 辅助文字 不能同时显示"},{label:"辅助文字数组",prop:"texts",type:"array"},{label:"分数显示模板",prop:"scoreTemplate"}]},Ql={name:"slider",title:"滑块",icon:"el-icon-operation",group:"表单组件",props:{type:"slider",label:"滑块"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"步长",prop:"step",type:"number"},{label:"显示输入框",prop:"showInput",component:C,defaultValue:!1},{label:"输入控制按钮",prop:"showInputControls",component:C,defaultValue:!0},{label:"显示间断点",prop:"showStops",component:C,defaultValue:!1},{label:"显示提示信息",prop:"showTooltip",component:C,defaultValue:!0},{label:"提示信息类名",prop:"tooltipClase"},{label:"提示信息位置",prop:"placement",type:"select",dicData:ie},{label:"格式化提示信息",prop:"formatTooltip",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"开启选择范围",prop:"range",component:C,defaultValue:!1},{label:"垂直模式",prop:"vertical",component:C,defaultValue:!1},{label:"滑块高度",prop:"height",type:"number",labelTip:"垂直模式必填"},{label:"标记",prop:"marks",component:O,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"标记， key 的类型必须为 number 且取值在闭区间 [min, max] 内，每个标记可以单独设置样式"}]},Zl={name:"switch",title:"开关",icon:"el-icon-switch",group:"表单组件",props:{type:"switch",label:"开关"},settings:[{label:"开关数据",prop:"dicData",type:"dynamic",labelPosition:"top",children:{column:[{label:"_index",prop:"_index",hide:!0},{label:"文字",prop:"label"},{label:"值",prop:"value",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"true",value:!0},{label:"false",value:!1}]}]},value:[{label:"",value:!1},{label:"",value:!0}]},{label:"开关宽度",prop:"len"},{label:"开启时背景色",prop:"activeColor",type:"color"},{label:"关闭时背景色",prop:"inactiveColor",type:"color"}]},et={name:"table",title:"表格选择",icon:"el-icon-grid",group:"表单组件",isContainer:!0,props:{type:"table",label:"表格选择",children:{column:[]}},settings:[{label:"显示表头",prop:"showHeader",component:C,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:C,defaultValue:!1},{label:"表格边框",prop:"border",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"整体对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"显示序号",prop:"index",type:"switch"},{label:"键值配置",prop:"props",component:O,valueType:"object",tooltip:!0,value:{label:"name",value:"id"}},{label:"格式化函数",prop:"formatter",component:O,valueType:"function",tooltip:!0,defaultValue:"(row) => row.name"},{label:"加载数据函数",prop:"onLoad",component:Ml}]},lt={name:"textarea",title:"文本域",icon:"el-icon-chat-line-square",group:"表单组件",props:{type:"textarea",label:"文本域"},settings:[{label:"最小行数",prop:"minRows",type:"number"},{label:"最大行数",prop:"maxRows",type:"number"},{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:C,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"是否能被缩放",prop:"resize",type:"select",dicData:[{label:"不可缩放",value:"none"},{label:"可水平缩放",value:"horizontal"},{label:"可垂直缩放",value:"vertical"},{label:"可自由缩放",value:"both"}]},{label:"输入框样式",prop:"inputStyle",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}]},tt={name:"title",title:"标题",icon:"el-icon-minus",group:"布局组件",props:{type:"title",label:"",labelWidth:0},settings:[{label:"标题内容",prop:"modelValue",type:"textarea",labelPosition:"top",value:"标题"},{label:"样式",prop:"styles",component:O,valueType:"object",tooltip:!0,value:{textAlign:"center"}}]},ot={name:"upload",title:"上传",icon:"el-icon-upload",group:"表单组件",props:{type:"upload",label:"上传"},settings:[{label:"上传地址",prop:"action"},{label:"请求头",prop:"headers",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"请求方法",prop:"method",type:"radio",button:!0,dicData:[{label:"POST",value:"post"},{label:"GET",value:"get"}]},{label:"是否支持多选",prop:"multiple",component:C,defaultValue:!1},{label:"额外参数",prop:"data",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"显示文件列表",prop:"showFileList",component:C,defaultValue:!0},{label:"拖拽排序",prop:"drag",component:C,defaultValue:!1},{label:"拖拽上传",prop:"dragFile",component:C,defaultValue:!1},{label:"接受上传类型",prop:"accept"},{label:"文件列表类型",prop:"listType",type:"select",dicData:[{label:"文本",value:"text"},{label:"图片",value:"picture"},{label:"图片卡片",value:"picture-card"},{label:"图片图片",value:"picture-img"}]},{label:"最大上传数量",prop:"limit",type:"number"},{label:"最大上传大小",prop:"fileSize",type:"number"},{label:"上传按钮文字",prop:"fileText"},{label:"上传等待文字",prop:"loadText"},{label:"上传请求配置",prop:"propsHttp",component:O,valueType:"object",tooltip:!0,defaultValue:`{
  home: "",
  res: "",
  url: "",
  name: "",
  fileName: "file"
}`},{label:"图片水印配置",prop:"canvasOption",component:O,valueType:"object",tooltip:!0,defaultValue:`{
  text: "",
  fontFamily: "microsoft yahei",
  color: "#999",
  fontSize: 16,
  opacity: 100,
  bottom: 10,
  right: 10,
  ratio: 1
}`}]},at=Object.freeze(Object.defineProperty({__proto__:null,array:He,cascader:Fe,checkbox:Ne,color:Nl,date:qe,daterange:Ge,dates:Ke,datetime:Je,datetimerange:Xe,dynamic:ql,form:Ye,group:Gl,icon:Qe,img:Ze,input:Kl,month:el,monthrange:ll,number:Jl,password:Xl,radio:tl,rate:Yl,select:ol,slider:Ql,switch:Zl,table:et,textarea:lt,time:al,timerange:nl,title:tt,tree:rl,upload:ot,url:il,week:pl,year:ul},Symbol.toStringTag,{value:"Module"})),Ce=Symbol("form-design-state");function nt(e,o){const t=K(e),{modelValue:l}=t,n=M(()=>e.groupList||sl),p=M(()=>ae(A({...at}),e.resources)),c=M(()=>ae(w(Fl),w(e.baseOption))),a=M(()=>ae(w(zl),w(e.advanceOption))),s=I({}),u=I({}),b=I({}),m=M(()=>{var g;return vl((g=s.value)==null?void 0:g.props,["column","group"])??{}}),i=I([]),r=I(0),y=I("design"),x=I("pc");q(l,g=>{De(s.value,ve(g||{}))||(s.value=ve(g||{}),Object.keys(u.value).length||$(),i.value.length||f("init"))},{immediate:!0,deep:!0}),q(s,()=>{l.value=Rl(s.value)},{deep:!0});function S(g){if(g)return p.value[g]}function $(g){u.value=g??s.value??{}}function w(g){if(typeof g=="function"){const W={elementTree:s.value,activeElement:u.value};return A(g(W)??[])}else return A(g??[])}async function f(g){i.value.push({type:g,timestamp:Date.now(),active:A(u.value),tree:A(s.value),option:A(l.value??{})}),r.value=i.value.length-1}function d(g){const W=i.value.find((E,z)=>z===g);W&&(s.value=A(W.tree),u.value=A(W.active),r.value=g)}function h(){i.value=[],r.value=0,s.value={},u.value={},o("reset")}const v={groupList:n,resources:p,elementTree:s,activeElement:u,hoverElement:b,formOption:m,historyList:i,historyIndex:r,workType:y,deviceType:x,modelValue:l,baseOption:c,advanceOption:a,resolveSettings:w,setActiveElement:$,recordHistory:f,restoreHistory:d,resetHistory:h,getResource:S};return Oe(Ce,v),v}function j(){return Se(Ce)}const rt={class:"resource-list"},it={class:"resource-item"},pt=R({__name:"resource",setup(e){const{groupList:o,resources:t,elementTree:l,workType:n,setActiveElement:p,recordHistory:c,getResource:a}=j(),s=I(""),u=M(()=>{const i=Object.values(t.value).filter(r=>{const{name:y,title:x,keywords:S}=r,$=[y,x,S].filter(w=>w).join(",");return!r.disabled&&($==null?void 0:$.includes(s.value))});return o.value.map(r=>({label:r,children:i.filter(y=>y.group===r).map((y,x)=>({...y,priority:y.priority??x})).sort((y,x)=>y.priority-x.priority)})).filter(r=>r.children.length)});function b(i){var y,x;if(n.value!=="design")return;const r=de(i);(x=(y=l.value)==null?void 0:y.children)==null||x.push(r),p(r),c("added")}function m({draggedContext:i,relatedContext:r}){var y;return ce(a(i.element.name),a((y=r.component.componentData)==null?void 0:y.name))}return(i,r)=>{const y=k("el-input"),x=k("el-button"),S=k("el-collapse-item"),$=k("el-collapse");return T(),U("div",rt,[V(y,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=w=>s.value=w),"suffix-icon":"el-icon-search",placeholder:"搜索组件"},null,8,["modelValue"]),V($,{"model-value":u.value.map(w=>w.label)},{default:D(()=>[(T(!0),U(P,null,H(u.value,w=>(T(),L(S,{key:w.label,title:w.label,name:w.label},{default:D(()=>[V(_(ke),{list:w.children,group:{name:"components",pull:"clone",put:!1},clone:_(de),sort:!1,"item-key":"name",move:m},{item:D(({element:f})=>[F("div",it,[V(x,{icon:f.icon,onClick:d=>b(f)},{default:D(()=>[N(le(f.title),1)]),_:2},1032,["icon","onClick"])])]),_:2},1032,["list","clone"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["model-value"])])}}}),ut=["onMouseover"],st={class:"item-label"},ct={class:"item-actions"},dt=R({__name:"tree",setup(e){const{elementTree:o,activeElement:t,hoverElement:l,setActiveElement:n,recordHistory:p,getResource:c}=j(),a=M(()=>[A(o.value)]);function s(f,d,h){return d.data.isRoot?!1:h==="inner"?ce(c(f.data.name),c(d.data.name)):!0}const u=I();Le(()=>{var f,d;(d=u.value)==null||d.setCurrentKey((f=t.value)==null?void 0:f.id)});function b(f){n(f)}function m(){o.value=a.value[0]}function i(f){var h;const d=Te(f.data);(h=u.value)==null||h.append(d,f.parent),m(),n(d),p("added")}function r(f){var d;(d=u.value)==null||d.remove(f),m(),n(),p("removed")}function y(f){var d;(d=f.data.children)!=null&&d.length&&(f.data.children.forEach(h=>{var v;return(v=u.value)==null?void 0:v.remove(h)}),m(),n(f.data),p("clear"))}function x(){m(),p("moved")}const S=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:i},{name:"delete",type:"danger",icon:"el-icon-delete",handler:r},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:y}];function $(f){return S.filter(d=>w(f,d.name))}function w(f,d){const{disabledActions:h,isContainer:v}=c(f.name)??{},g=!(h!=null&&h.includes(d));return d==="clear"?v&&g:g}return(f,d)=>{const h=k("el-link");return T(),L(_(gl),{ref_key:"treeRef",ref:u,class:"component-tree","node-key":"id",data:a.value,"default-expand-all":"",draggable:"","expand-on-click-node":!1,"allow-drop":s,onNodeClick:b,onNodeDrop:x},{default:D(({node:v,data:g})=>{var W,E;return[F("div",{class:"tree-item",onMouseover:z=>l.value=g||{},onMouseleave:d[0]||(d[0]=z=>l.value={})},[F("div",st,le(((W=g.props)==null?void 0:W.label)||((E=_(c)(g.name))==null?void 0:E.title)),1),F("div",ct,[(T(!0),U(P,null,H($(g),z=>(T(),L(h,_e({key:z.name,underline:!1},z,{onClick:X(J=>z.handler(v),["stop"])}),null,16,["onClick"]))),128))])],40,ut)]}),_:1},8,["data"])}}}),mt={init:"初始化",added:"添加组件",moved:"移动组件",removed:"删除组件",property:"修改属性",clear:"清空子组件"},$o={copy:"复制",delete:"删除",clear:"清空"},bt={class:"history-list"},ft=["onClick"],vt=R({__name:"history",setup(e){const{historyList:o,historyIndex:t,restoreHistory:l}=j(),n=Re("history-show-source",!1);return(p,c)=>{const a=k("el-switch"),s=k("el-input"),u=k("el-tooltip");return T(),U("div",bt,[N(" 显示源码："),V(a,{modelValue:_(n),"onUpdate:modelValue":c[0]||(c[0]=b=>B(n)?n.value=b:null)},null,8,["modelValue"]),(T(!0),U(P,null,H(_(o),(b,m)=>(T(),L(u,{key:b.timestamp,disabled:!_(n),effect:"light",placement:"right"},{content:D(()=>[V(s,{type:"textarea","model-value":_(xe)(b),autosize:{minRows:1,maxRows:20},style:{width:"300px"}},null,8,["model-value"])]),default:D(()=>[F("div",{class:te(["history-item",{"is-active":m===_(t)}]),onClick:i=>_(l)(m)},[F("span",null,le(_(mt)[b.type]),1),F("span",null,le(new Date(b.timestamp).toLocaleString()),1)],10,ft)]),_:2},1032,["disabled"]))),128))])}}}),yt=R({__name:"index",setup(e){const o=[{title:"组件",icon:"el-icon-menu",component:pt},{title:"大纲",icon:"el-icon-operation",component:dt},{title:"历史",icon:"el-icon-clock",component:vt}];return(t,l)=>{const n=k("el-link"),p=k("el-tab-pane"),c=k("el-tabs");return T(),L(c,{"tab-position":"top",stretch:""},{default:D(()=>[(T(),U(P,null,H(o,a=>V(p,{key:a.title},{label:D(()=>[V(n,{title:a.title,icon:a.icon,underline:!1,style:{color:"inherit"}},null,8,["title","icon"])]),default:D(()=>[(T(),L(Ie(a.component)))]),_:2},1024)),64))]),_:1})}}}),ht={class:"item-actions"},$e=R({__name:"design",props:{list:{},componentData:{}},emits:["update:active","update:list"],setup(e,{emit:o}){const t=e,{list:l}=K(t,o,{passive:!0,deep:!0}),{activeElement:n,hoverElement:p,formOption:c,setActiveElement:a,recordHistory:s,getResource:u}=j();function b(d){const h={...A(c.value),span:24,menuBtn:!1},{designOption:v}=u(d.name)??{};if(typeof v=="object")return{...h,...v};if(typeof v=="function")return{...h,...v(d)};{const g=[];return d.props&&g.push({...yl(d.props,hl),span:24}),{...h,column:g}}}function m(d){var h,v;return(h=u(d.name))!=null&&h.isContainer?24:((v=d.props)==null?void 0:v.span)||c.value.span||24}function i(d){var v;const h=Object.keys(d)[0];h&&(a((v=d[h])==null?void 0:v.element),s(h))}function r(d){const h=Te(d);l.value.push(h),a(h),s("added")}function y(d,h){l.value.splice(h,1),a(l.value[h]??l.value[h-1]),s("removed")}function x(d){var h;(h=d.children)!=null&&h.length&&(d.children=[],a(d),s("clear"))}function S({draggedContext:d,relatedContext:h}){var v;return ce(u(d.element.name),u((v=h.component.componentData)==null?void 0:v.name))}const $=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:r},{name:"delete",type:"danger",icon:"el-icon-delete",handler:y},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:x}];function w(d){return $.filter(h=>f(d,h.name))}function f(d,h){const{disabledActions:v,isContainer:g}=u(d.name)??{},W=!(v!=null&&v.includes(h));return h==="clear"?g&&W:W}return(d,h)=>{const v=k("avue-form"),g=k("el-button"),W=k("el-col");return T(),L(_(ke),{list:_(l),class:te(["el-row draggable-list",{"is-empty":!_(l).length,"is-root":d.componentData.isRoot}]),group:{name:"components"},"component-data":d.componentData,"item-key":"id",move:S,onChange:i},{item:D(({element:E,index:z})=>[V(W,{class:te(["draggable-item",{"is-active":_(n).id===E.id,"is-hover":_(p).name&&_(p).id===E.id}]),span:m(E),onClick:X(J=>_(a)(E),["stop"]),onMouseover:X(J=>p.value=E||{},["stop"]),onMouseleave:h[0]||(h[0]=X(J=>p.value={},["stop"]))},{default:D(()=>{var J;return[E.name!=="form"?(T(),L(v,{key:0,option:b(E)},null,8,["option"])):re("",!0),(J=_(u)(E.name))!=null&&J.isContainer?(T(),L($e,{key:1,class:"is-container","component-data":E,list:E.children??[],"onUpdate:list":Q=>E.children=Q},null,8,["component-data","list","onUpdate:list"])):re("",!0),ge(F("div",ht,[(T(!0),U(P,null,H(w(E),Q=>(T(),L(g,_e({key:Q.name},Q,{circle:"",plain:"",onClick:X(Tt=>Q.handler(E,z),["stop"])}),null,16,["onClick"]))),128))],512),[[Ve,_(n).id===E.id]])]}),_:2},1032,["class","span","onClick","onMouseover"])]),_:1},8,["list","class","component-data"])}}}),_t=R({setup(){const{proxy:e}=Ee(),{modelValue:o}=j(),t=I({}),l=I({}),n=M(()=>cl.bind(e)(xe(o.value))),p=I();return{form:t,defaults:l,option:n,formRef:p}},render(){return We(k("avue-form"),{ref:"formRef",modelValue:this.form,option:this.option,defaults:this.defaults,"onUpdate:modelValue":e=>this.form=e,"onUpdate:defaults":e=>this.defaults=e})}}),gt=R({__name:"source",setup(e){const{modelValue:o}=j();return(t,l)=>(T(),L(_(O),{modelValue:_(o),"onUpdate:modelValue":l[0]||(l[0]=n=>B(o)?o.value=n:null),"value-type":"object"},null,8,["modelValue"]))}}),Vt=R({__name:"index",setup(e){const{elementTree:o,workType:t,setActiveElement:l}=j();return(n,p)=>_(t)==="preview"?(T(),L(_t,{key:0})):_(t)==="source"?(T(),L(gt,{key:1})):(T(),L($e,{key:2,"component-data":_(o),list:_(o).children??[],"onUpdate:list":p[0]||(p[0]=c=>_(o).children=c),onClick:p[1]||(p[1]=X(c=>_(l)(),["stop"]))},null,8,["component-data","list"]))}}),wt=R({__name:"index",setup(e){const o=j(),{elementTree:t,activeElement:l,baseOption:n,advanceOption:p,resolveSettings:c,recordHistory:a,getResource:s}=o,u=I(!1),b=I(""),m=I([]),i=I({}),r=I(0),y={labelPosition:"left",labelWidth:100,menuBtn:!1,span:24};q(()=>l.value.id,async()=>{u.value=!0,r.value=0,await he();const{settings:$,disabledSettings:w}=s(l.value.name)??{},f={...y,label:"基础",prop:"base",column:n.value},d={...y,label:"高级",prop:"advance",column:p.value},h={...y,label:"属性",prop:"component",column:c($)};m.value=[f,h,d].filter(v=>!(w!=null&&w.includes(v.prop))),b.value=m.value[0].prop,i.value=A(l.value.props),u.value=!1},{immediate:!0});const x=El(()=>a("property"),1e3);Ue(i,$=>{const w=ue($,[void 0,null,""],["$"]);if(l.value.isRoot)fe(t.value,"props",w);else{const f=S(t.value,l.value.id)??[];f.length&&!De(w,_l(t.value,f.concat("props")))&&fe(t.value,f.concat("props"),w)}r.value&&x(),r.value++},{deep:!0,debounce:100});function S($,w){if($.id===w)return[];if($.children)for(const f in $.children){const d=S($.children[f],w);if(d)return["children",f].concat(d)}}return($,w)=>{const f=k("avue-form"),d=k("el-tab-pane"),h=k("el-tabs");return T(),L(h,{modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=v=>b.value=v)},{default:D(()=>[(T(!0),U(P,null,H(m.value,v=>(T(),L(d,{key:v.label,label:v.label,name:v.prop},{default:D(()=>[u.value?re("",!0):(T(),L(f,{key:0,modelValue:i.value,"onUpdate:modelValue":w[0]||(w[0]=g=>i.value=g),class:"settings-form",option:v},null,8,["modelValue","option"]))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}}),kt=R({__name:"index",setup(e){const{elementTree:o,workType:t,deviceType:l,historyList:n,historyIndex:p,restoreHistory:c,resetHistory:a}=j(),s=[{label:"PC端",value:"pc",icon:"el-icon-monitor"},{label:"移动端",value:"mobile",icon:"el-icon-cellphone"}],u=[{label:"设计",value:"design",icon:"el-icon-brush"},{label:"源码",value:"source",icon:"el-icon-more"},{label:"预览",value:"preview",icon:"el-icon-view"}];return(b,m)=>{const i=k("el-button"),r=k("el-button-group"),y=k("el-col"),x=k("el-link"),S=k("el-radio-button"),$=k("el-radio-group"),w=k("el-row");return T(),L(w,{gutter:20},{default:D(()=>[V(y,{span:8,style:{"align-self":"center"}},{default:D(()=>[V(r,{size:"small"},{default:D(()=>{var f;return[V(i,{disabled:_(p)===0,title:"撤回",icon:"el-icon-arrow-left",onClick:m[0]||(m[0]=d=>_(c)(_(p)-1))},null,8,["disabled"]),V(i,{disabled:_(p)===_(n).length-1,title:"重做",icon:"el-icon-arrow-right",onClick:m[1]||(m[1]=d=>_(c)(_(p)+1))},null,8,["disabled"]),V(i,{disabled:!((f=_(o).children)!=null&&f.length),title:"清空",icon:"el-icon-delete",onClick:m[2]||(m[2]=d=>_(a)())},null,8,["disabled"])]}),_:1})]),_:1}),V(y,{span:8,style:{"text-align":"center"}},{default:D(()=>[V($,{modelValue:_(l),"onUpdate:modelValue":m[3]||(m[3]=f=>B(l)?l.value=f:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(T(),U(P,null,H(s,f=>V(S,{key:f.value,label:f.value},{default:D(()=>[V(x,{title:f.label,icon:f.icon,underline:!1,style:{color:"inherit"},onClick:d=>l.value=f.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),V(y,{span:8,style:{"text-align":"right"}},{default:D(()=>[V($,{modelValue:_(t),"onUpdate:modelValue":m[4]||(m[4]=f=>B(t)?t.value=f:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(T(),U(P,null,H(u,f=>V(S,{key:f.value,label:f.value},{default:D(()=>[V(x,{title:f.label,icon:f.icon,underline:!1,style:{color:"inherit"},onClick:d=>t.value=f.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),So=R({__name:"index",props:{modelValue:{},groupList:{},resources:{},baseOption:{type:[Array,Function]},advanceOption:{type:[Array,Function]},leftWidth:{},rightWidth:{}},emits:["reset"],setup(e,{emit:o}){const t=e,{workType:l,deviceType:n}=nt(t,o);return(p,c)=>{const a=k("el-aside"),s=k("el-header"),u=k("el-main"),b=k("el-container");return T(),L(b,{class:"form-design"},{default:D(()=>[V(a,{class:"left-panel",width:p.leftWidth},{default:D(()=>[V(yt)]),_:1},8,["width"]),V(b,null,{default:D(()=>[V(s,{class:"main-header",height:"auto"},{default:D(()=>[V(kt)]),_:1}),V(u,{class:"main-workspace"},{default:D(()=>[V(Vt,{class:te(`device-${_(n)}`)},null,8,["class"])]),_:1})]),_:1}),ge(V(a,{class:"right-panel",width:p.rightWidth},{default:D(()=>[V(wt)]),_:1},8,["width"]),[[Ve,_(l)=="design"]])]),_:1})}}});export{Al as ControlSetter,$o as DesignActionMap,Co as DicDataSetter,Io as DicTreeSetter,O as EditorSetter,So as FormDesign,mt as HistoryTypeMap,Ml as OnLoadSetter,Pl as RulesSetter,C as SwitchSetter,Bl as ValueSetter,ve as adapterIn,Rl as adapterOut,zl as advance,Y as alignDic,He as array,Fl as base,Fe as cascader,ce as checkRules,Ne as checkbox,de as cloneItem,Nl as color,Te as copyItem,qe as date,Ge as daterange,Ke as dates,Je as datetime,Xe as datetimerange,Eo as dic,ql as dynamic,Ye as form,se as getRandomId,Gl as group,sl as groupList,Qe as icon,G as iconList,Ze as img,Kl as input,cl as jsonParse,xe as jsonStringify,el as month,ll as monthrange,Jl as number,Xl as password,ie as placementDic,Be as positionDic,tl as radio,Yl as rate,ol as select,ze as sizeDic,Ql as slider,Zl as switch,et as table,lt as textarea,al as time,nl as timerange,tt as title,rl as tree,ot as upload,il as url,pl as week,ul as year};
