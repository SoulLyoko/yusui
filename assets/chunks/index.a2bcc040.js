import{h as E,d as j,G as g,i as V,C as S,r as W,w as q,j as R,I as h,D,m as N,u as f,a6 as z,F as A,N as H,n as be,U as xe,V as De,B as F,p as le,e as Ce,H as ve,a0 as Q,l as te,L as $e,E as ne,a2 as fe,ap as ye,b as Le,ar as Se}from"./framework.22a77fa2.js";import{u as K,b as Oe,w as We}from"./theme.1d56182c.js";import{g as ue,f as _e,a as Ue,_ as L,p as Ee,b as Re,t as Ie,c as Pe,s as je,d as re,e as C,h as X,i as G,j as Ae,k as Me,l as ze,m as Be,n as He,o as Fe,q as Ne,r as qe,u as Ge,v as Ke,w as Je,x as Qe,y as Xe,z as Ye,A as Ze,B as el,C as ll,D as tl,E as ol,F as al,G as nl,H as rl,I as he,J as se,K as ge,L as Ve,M as pl}from"./vuedraggable.umd.627d7d33.js";import{O as bo,N as vo}from"./vuedraggable.umd.627d7d33.js";import{aE as P,ax as oe,by as ae,d3 as ul,d4 as il,cw as sl,d9 as ce,bc as cl}from"../composables_use-crud_index.md.b279084a.js";import{p as we,L as dl,k as ml}from"../app.ffe80b2a.js";import"./vue.runtime.esm-bundler.ed40cebf.js";import"../components_icon-select_index.md.dc997862.js";import"../components_index.md.d18bb5a3.js";import"../components_v-text_index.md.306fe565.js";import"../composables_index.md.1bb90be4.js";import"../flow-design_flow-modeler_index.md.07d02c14.js";import"./data.4cb21f02.js";import"../flow-design_flow-viewer_index.md.e9fcc2c5.js";import"../flow-design_index.md.e062cae5.js";import"../flow-pages_index.md.d27d2c75.js";import"../flow-pages_pages_flow-button_index.md.2cf37f1f.js";import"../flow-pages_pages_flow-manage_index.md.3b729385.js";import"../flow-pages_pages_flow-ops_index.md.1351e2c2.js";import"../flow-pages_pages_flow-param_index.md.907e6ed8.js";import"../flow-pages_pages_flow-template_index.md.743ad38c.js";import"../flow-pages_pages_flow-workbench_index.md.e559c6b1.js";import"../flow-pages_pages_form-template_index.md.754d7c10.js";import"../flow-pages_pages_table-template_index.md.f196419b.js";import"../form-design_demo.md.f7fa8b02.js";import"../form-design_index.md.f8d915c9.js";import"../guide_changelog.md.71ace3ef.js";import"../guide_start.md.f25ec09d.js";import"../index.md.dedad964.js";import"../plugins_avue-patch_index.md.298f53e4.js";import"../plugins_compatible-tips_index.md.4a4a879f.js";import"../plugins_env-dts_index.md.90c505c6.js";import"../plugins_index.md.09238556.js";import"../plugins_load-proxy_index.md.8c57e468.js";import"../plugins_setup-extend_index.md.ffc97dab.js";import"../plugins_uni-ui-patch_index.md.b8a395e2.js";import"../plugins_uview-patch_index.md.e65878da.js";import"../types_avue_index.md.31e36571.js";import"../types_index.md.aa1779e7.js";import"../utils_date_dateFormat.md.24466ffd.js";import"../utils_date_durationFormat.md.a91e1175.js";import"../utils_emitter_mittAsync.md.65520a0e.js";import"../utils_index.md.99824380.js";import"../utils_math_index.md.81fb7150.js";import"../utils_object_filterObj.md.d634698f.js";import"../utils_object_filterObjDeep.md.aee85325.js";import"../utils_object_getDataType.md.4c16fa33.js";import"../utils_string_deserialize.md.49b88e4f.js";import"../utils_string_serialize.md.175ca994.js";import"../utils_string_uuid.md.1b6743be.js";import"../utils_tool_awaitTo.md.907e2bd0.js";import"../utils_tool_enumToDic.md.f0182e11.js";import"../utils_tool_sleep.md.15440607.js";import"../utils_tree_buildTree.md.b95211e7.js";import"../utils_tree_filterTree.md.753c4098.js";import"../utils_tree_findTree.md.30184861.js";import"../utils_tree_flatTree.md.cb52189f.js";import"../utils_tree_treeMap.md.168ca5df.js";function bl(t,o=[void 0,null],l=[]){const e={};for(const a in t){const p=o.every(u=>t[a]!==u),c=l.every(u=>!a.includes(u));p&&c&&(e[a]=t[a])}return e}function pe(t,o=[void 0,null],l=[]){if(Array.isArray(t))return t.map(e=>pe(e,o,l));{const e={};for(const a in t)if(typeof t[a]=="object")e[a]=pe(t[a],o,l);else{const p=o.every(u=>t[a]!==u),c=l.every(u=>!a.includes(u));p&&c&&(e[a]=t[a])}return e}}function ee(t){return t.map(o=>{var a;const l=P(o);let e=[];return l.name=l.name||l.component||l.type,l.id=l.id||ue(l.name),l.name==="form"?e=ee([...l.column??[],...l.group??[]]):l.name==="group"?e=ee(l.column??[]):["dynamic","table"].includes(l.name)&&(e=ee(((a=l.children)==null?void 0:a.column)??[])),{name:l.name,id:l.id,isRoot:l.isRoot,props:l,children:e}})}function de(t){return ee([{isRoot:!0,name:"form",id:ue("form"),...t}])[0]}function Z(t){return t.map(o=>{var e,a,p;const l=P(o);if(l.props&&(l.props.prop=l.props.prop??l.id),l.name==="form"){const c=Z(((e=l.children)==null?void 0:e.filter(s=>s.name!=="group"))??[]),u=Z(((a=l.children)==null?void 0:a.filter(s=>s.name==="group"))??[]);return{...l.props,column:c.length?c:void 0,group:u.length?u:void 0}}if(l.name==="group"){const c=Z(l.children??[]);return{...l.props,column:c}}else if(["dynamic","table"].includes(l.name??"")){const c=Z(l.children??[]),u={...(p=l.props)==null?void 0:p.children,column:c};return{...l.props,children:u}}return{...l.props}})}function vl(t){return Z([t])[0]??{}}function ie(t,o){const{parentWhiteList:l,parentBlackList:e}=(t==null?void 0:t.rules)??{},{childWhiteList:a,childBlackList:p}=(o==null?void 0:o.rules)??{},c=[];if(l&&o){const u=l.includes((o==null?void 0:o.name)??"");c.push(u)}if(e&&o){const u=e.includes((o==null?void 0:o.name)??"");c.push(!u)}if(a){const u=a.includes((t==null?void 0:t.name)??"");c.push(u)}if(p){const u=p.includes((t==null?void 0:t.name)??"");c.push(!u)}return c.every(u=>u)}const fl=E({__name:"property-select",props:{tableData:{},dic:{}},setup(t){const o=t,{elementTree:l,baseOption:e,resolveSettings:a,getResource:p}=M(),c=j(()=>{var i;const u=_e([l.value],b=>{var v,r,n;return((v=b.props)==null?void 0:v.prop)===((n=(r=o.tableData)==null?void 0:r.row)==null?void 0:n.field)}),s=((i=p(u==null?void 0:u.name))==null?void 0:i.settings)??[];return[...e.value,...a(s)].filter(b=>b.prop).map(b=>({label:b.label,value:b.prop,desc:b.prop}))});return(u,s)=>{const i=g("avue-select");return V(),S(i,{dic:c.value,"allow-create":"",filterable:"","default-first-option":""},null,8,["dic"])}}}),yl=E({__name:"index",props:{modelValue:{}},setup(t){const l=K(t),{modelValue:e}=l,{elementTree:a}=M(),p=W(!1),c=W([]);q(e,()=>{var i,b,v;if(!e.value){c.value=[];return}try{const n=((v=(b=(i=Ee(e.value,{ecmaVersion:"latest"}).body[0])==null?void 0:i.expression)==null?void 0:b.body)==null?void 0:v.properties)??[];n!=null&&n.length&&(c.value=n.map(y=>y.value.properties.map(k=>{const O=Re(k.value);return{field:y.key.name,property:k.key.name,value:O}})).flat())}catch{}},{immediate:!0}),q(c,()=>{var v;if(!p.value)return;const b=`(val, form) => ({
    ${[...new Set((v=c.value)==null?void 0:v.map(r=>r.field))].map(r=>{var y;const n=(y=c.value)==null?void 0:y.filter(k=>k.field===r);return`${r}: { ${n==null?void 0:n.map(k=>`${k.property}: ${k.value}`).join(", ")} }`}).join(`,
    `)}
})`;e.value=b},{deep:!0});const u=j(()=>{var b;return Ue(((b=a.value)==null?void 0:b.children)??[]).map(v=>{const{label:r,prop:n}=v.props??{};return{label:r,value:n,desc:n}})}),s=j(()=>({column:[{label:"受控字段",prop:"field",type:"select",dicData:u.value,rules:{required:!0}},{label:"受控属性",prop:"property",component:fl,rules:{required:!0}},{label:"表达式/值",prop:"value",component:L,tooltip:!0,rules:{required:!0}}]}));return(i,b)=>{const v=g("el-button"),r=g("avue-dynamic"),n=g("el-dialog");return V(),R(A,null,[h(v,{onClick:b[0]||(b[0]=y=>p.value=!0)},{default:D(()=>[N(" 编辑代码 ")]),_:1}),h(n,{modelValue:p.value,"onUpdate:modelValue":b[3]||(b[3]=y=>p.value=y),title:"控制字段属性"},{default:D(()=>[h(r,{modelValue:c.value,"onUpdate:modelValue":b[1]||(b[1]=y=>c.value=y),children:s.value},null,8,["modelValue","children"]),N(" 代码： "),h(L,{modelValue:f(e),"onUpdate:modelValue":b[2]||(b[2]=y=>z(e)?e.value=y:null),"value-type":"function",height:"200px"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),uo=E({__name:"index",props:{modelValue:{},setterType:{}},setup(t){const l=K(t),{modelValue:e}=l,a={column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]},p={props:{value:"id"},formOption:{column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]}},c=W({});function u(v,r){v(),setTimeout(()=>{(r==="add"||r==="parentAdd")&&(c.value.id=ue())},100)}const s=(v,r,n)=>n(),i=(v,r,n)=>n(),b=(v,r)=>r();return(v,r)=>{const n=g("avue-tree"),y=g("avue-dynamic");return v.setterType=="tree"?(V(),S(n,{key:0,modelValue:c.value,"onUpdate:modelValue":r[0]||(r[0]=k=>c.value=k),data:f(e),option:p,"before-open":u,onSave:s,onUpdate:i,onDel:b},null,8,["modelValue","data"])):(V(),S(y,{key:1,children:a,"model-value":f(e)||[],"onUpdate:modelValue":r[1]||(r[1]=k=>e.value=k)},null,8,["model-value"]))}}}),_l=E({__name:"index",props:{modelValue:{},tableData:{}},setup(t){const o=t,l=K(o),{modelValue:e}=l,a=W(!1),p=W({});q(e,()=>{var u,s;e.value&&(p.value=((s=(u=o.tableData)==null?void 0:u.row)==null?void 0:s.onLoadData)??{})},{immediate:!0}),q(p,()=>{var k;if(!a.value||!((k=o.tableData)!=null&&k.row)||(o.tableData.row.onLoadData=p.value,p.value.codeMode))return;const{url:u,method:s,isPage:i,currentPageKey:b,pageSizeKey:v,totalPath:r,dataPath:n}=p.value,y=`({ page, value, data }, callback) => {
    const params = page && ${i} ? { ${b}: page.currentPage, ${v}: page.pageSize } : {};
    this.$axios({ url: "${u}", method: "${s}", params }).then(res => {
        const data = this.getAsVal({ res }, "${n}");
        const total = this.getAsVal({ res }, "${r}");
        callback({ data, total });
    });
}`;e.value=y},{deep:!0});const c={span:24,menuBtn:!1,labelWidth:100,column:[{label:"请求地址",prop:"url"},{label:"请求方法",prop:"method",type:"radio",button:!0,value:"get",dicData:[{label:"GET",value:"get"},{label:"POST",value:"post"}]},{label:"是否分页",prop:"isPage",type:"switch",value:!0},{label:"当前页键名",prop:"currentPageKey",value:"current"},{label:"每页条数键名",prop:"pageSizeKey",value:"size"},{label:"总条数路径",prop:"totalPath",value:"res.data.total"},{label:"返回数据路径",prop:"dataPath",value:"res.data.records"},{label:"编辑代码模式",prop:"codeMode",type:"switch",value:!1,span:4,tip:"关闭时，代码根据以上参数自动生成。开启时，可自由编辑代码"}]};return(u,s)=>{const i=g("el-button"),b=g("avue-form"),v=g("el-dialog");return V(),R(A,null,[h(i,{onClick:s[0]||(s[0]=r=>a.value=!0)},{default:D(()=>[N(" 编辑代码 ")]),_:1}),h(v,{modelValue:a.value,"onUpdate:modelValue":s[3]||(s[3]=r=>a.value=r),title:"加载数据函数"},{default:D(()=>[h(b,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=r=>p.value=r),option:c},null,8,["modelValue"]),N(" 代码： "),h(L,{modelValue:f(e),"onUpdate:modelValue":s[2]||(s[2]=r=>z(e)?e.value=r:null),"value-type":"function",height:"200px",disabled:""},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),hl=E({__name:"index",props:{modelValue:{}},setup(t){const l=K(t),{modelValue:e}=l,a=W(!1),p=W(-1),c=j({get(){var r;return((r=e.value)==null?void 0:r[p.value])??{}},set(r){if(e.value&&p.value!==-1){const n=bl(r,[void 0,null,""],["$"]);e.value[p.value]=n}}});async function u(){var r;!e.value&&(e.value=[]),await be(),(r=e.value)==null||r.push({})}function s(r,n){p.value=n,a.value=!0}function i(r,n){var y;(y=e.value)==null||y.splice(n,1)}const b=[{label:"否",value:!1},{label:"是",value:!0}],v={menuBtn:!1,span:24,labelWidth:100,column:[{label:"触发方式",prop:"trigger",type:"select",dicData:[{label:"值变化",value:"change"},{label:"聚焦时",value:"focus"},{label:"失焦时",value:"blur"}]},{label:"值类型",prop:"type",type:"select",dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"整数",value:"integer"},{label:"浮点数",value:"float"},{label:"日期",value:"date"},{label:"URL地址",value:"url"},{label:"十六进制",value:"hex"},{label:"邮箱",value:"email"},{label:"任意类型",value:"any"}]},{label:"是否必填",prop:"required",type:"radio",button:!0,dicData:b},{label:"错误消息",prop:"message"},{label:"正则表达式",prop:"pattern",prepend:"/",append:"/"},{label:"最小",prop:"min",type:"number"},{label:"最大",prop:"max",type:"number"},{label:"长度",prop:"len",type:"number"},{label:"禁止空白符",prop:"whitespace",type:"radio",button:!0,dicData:b},{label:"自定义校验函数",prop:"validator",labelWidth:120,component:L,tooltip:!0,width:"400px",defaultValue:`(rule, value, callback, source, options) => {

}`}]};return(r,n)=>{const y=g("avue-form"),k=g("el-drawer");return V(),R(A,null,[(V(!0),R(A,null,H(f(e),(O,$)=>(V(),R("div",{key:$},[h(f(oe),{icon:"el-icon-setting",onClick:w=>s(O,$)},{default:D(()=>[N(" 配置规则 ")]),_:2},1032,["onClick"]),h(f(oe),{text:"",icon:"el-icon-delete",onClick:w=>i(O,$)},null,8,["onClick"])]))),128)),h(f(oe),{icon:"el-icon-plus",onClick:u},{default:D(()=>[N(" 添加规则 ")]),_:1}),h(k,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=O=>a.value=O),title:"配置规则","append-to-body":"","destroy-on-close":""},{default:D(()=>[h(y,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=O=>c.value=O),option:v},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),gl={style:{display:"flex"}},Vl=E({__name:"index",props:{modelValue:{},tableData:{},placeholder:{}},setup(t){const o=t,l=K(o),{modelValue:e}=l,a=j({get(){var s,i;return((i=(s=o.tableData)==null?void 0:s.row)==null?void 0:i.valueType)??"string"},set(s){var i;(i=o.tableData)!=null&&i.row&&(o.tableData.row.valueType=s)}});function p(){e.value=void 0}const c=[{label:"str",value:"string"},{label:"num",value:"number"},{label:"boo",value:"boolean"},{label:"arr",value:"array"},{label:"obj",value:"object"}],u=[{label:"true",value:!0},{label:"false",value:!1}];return(s,i)=>{const b=g("el-input"),v=g("el-input-number"),r=g("avue-select");return V(),R("div",gl,[a.value==="string"?(V(),S(b,{key:0,modelValue:f(e),"onUpdate:modelValue":i[0]||(i[0]=n=>z(e)?e.value=n:null),placeholder:s.placeholder},null,8,["modelValue","placeholder"])):a.value==="number"?(V(),S(v,{key:1,modelValue:f(e),"onUpdate:modelValue":i[1]||(i[1]=n=>z(e)?e.value=n:null),placeholder:s.placeholder},null,8,["modelValue","placeholder"])):a.value==="boolean"?(V(),S(r,{key:2,modelValue:f(e),"onUpdate:modelValue":i[2]||(i[2]=n=>z(e)?e.value=n:null),placeholder:s.placeholder,dic:u},null,8,["modelValue","placeholder"])):(V(),S(L,{key:3,modelValue:f(e),"onUpdate:modelValue":i[3]||(i[3]=n=>z(e)?e.value=n:null),"value-type":a.value,tooltip:""},null,8,["modelValue","value-type"])),h(r,{modelValue:a.value,"onUpdate:modelValue":[i[4]||(i[4]=n=>a.value=n),p],dic:c,clearable:!1,"suffix-icon":"",style:{width:"60px"}},null,8,["modelValue"])])}}}),wl=[{label:"控制其它字段",prop:"control",component:yl},{label:"值变化事件",prop:"change",component:L,tooltip:!0,defaultValue:"({ value, row }) => {}"},{label:"点击事件",prop:"click",component:L,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"获取焦点事件",prop:"focus",component:L,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"失去焦点事件",prop:"blur",component:L,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"其他属性",prop:"params",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"其他事件",prop:"event",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"}],me=[{label:"字段标识",prop:"prop"},{label:"标签标题",prop:"label"},{label:"标签宽度",prop:"labelWidth",type:"number",step:10},{label:"标签位置",prop:"labelPosition",type:"radio",button:!0,dicData:Pe},{label:"组件尺寸",prop:"size",type:"radio",button:!0,dicData:je},{label:"数据类型",prop:"dataType",type:"radio",button:!0,labelWidth:90,labelTip:'会将数据转换为选择的数据类型，如：[1,2,3]=>"1,2,3"',dicData:[{label:"字符",value:"string"},{label:"数字",value:"number"},{label:"数组",value:"array"}]},{label:"表单项栅格",prop:"span",type:"number",min:1,max:24},{label:"字段提示",prop:"tip"},{label:"字段提示位置",prop:"tipPlacement",type:"select",dicData:re},{label:"标签提示",prop:"labelTip"},{label:"标签提示位置",prop:"labelTipPlacement",type:"select",dicData:re},{label:"默认值",prop:"value",component:Vl},{label:"占位内容",prop:"placeholder"},{label:"是否可清空",prop:"clearable",component:C,defaultValue:!0},{label:"详情模式",prop:"detail",component:C,defaultValue:!1},{label:"是否只读",prop:"readonly",component:C,defaultValue:!1},{label:"是否禁用",prop:"disabled",component:C,defaultValue:!1},{label:"是否可见",prop:"display",component:C,defaultValue:!0},{label:"校验规则",prop:"rules",component:hl}],kl=[{labelWidth:0,type:"title",modelValue:"子表单/表格属性"},{label:"宽度",prop:"width",type:"number"},{label:"最小宽度",prop:"minWidth",type:"number"},{label:"固定列",prop:"fixed",type:"radio",button:!0,dicData:[{label:"左",value:"left"},{label:"右",value:"right"}]},{label:"超长省略",prop:"overHidden",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:X},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:X},{label:"是否可搜索",prop:"search",component:C,defaultValue:!1},{label:"是否隐藏",prop:"hide",component:C,defaultValue:!1}],Tl=({elementTree:t,activeElement:o})=>{var a;const l=Ie([t],(p,c,u)=>({...p,parent:u})),e=_e(l,p=>p.id===o.id);return((a=e==null?void 0:e.parent)==null?void 0:a.name)==="dynamic"?[...me,...kl]:me},xl={name:"color",title:"颜色",icon:"el-icon-brush",group:"表单组件",props:{type:"color",label:"颜色"},settings:[{label:"支持透明度选择",prop:"showAlpha",component:C,defaultValue:!1,labelWidth:120},{label:"颜色格式",prop:"colorFormat",type:"select",dicData:[{label:"hsl",value:"hsl"},{label:"hsv",value:"hsv"},{label:"hex",value:"hex"},{label:"rgb",value:"rgb"}]},{label:"预定义颜色",prop:"predefine",type:"array"}]},Dl={name:"dynamic",title:"子表单",icon:"el-icon-grid",group:"表单组件",isContainer:!0,rules:{parentWhiteList:["form","group"],childBlackList:["group","dynamic"]},designOption:t=>{const{label:o,prop:l}=t.props??{};return{column:[{label:o,prop:l,type:"text"}]}},props:{type:"dynamic",label:"子表单",children:{column:[]}},settings:[{prop:"children",labelWidth:0,component:"avue-form",option:{labelWidth:100,menuBtn:!1,span:24,column:[{label:"展示类型",prop:"type",type:"radio",button:!0,value:"crud",dicData:[{label:"表格",value:"crud"},{label:"表单",value:"form"}],control(t){const o=t==="form",l=t==="crud";return{showHeader:{display:l},stripe:{display:l},border:{display:l},headerAlign:{display:l},align:{display:l},span:{display:o}}}},{label:"显示新增按钮",prop:"addBtn",component:C,defaultValue:!0},{label:"显示删除按钮",prop:"delBtn",component:C,defaultValue:!0},{label:"显示序号",prop:"index",type:"switch",control(t,o){return o.type==="crud"&&typeof t=="boolean"&&(o.index=t?"":!1),{}}},{label:"显示表头",prop:"showHeader",component:C,defaultValue:!0},{label:"表格边框",prop:"border",component:C,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:X},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:X},{label:"表单项栅格",prop:"span",type:"number"},{label:"空数据文字",prop:"emptyText",type:"number"}]}}]},Cl={name:"group",title:"分组",icon:"el-icon-menu",group:"布局组件",isContainer:!0,rules:{parentWhiteList:["form"],childBlackList:["group"]},designOption:t=>{const{label:o,prop:l}=t.props??{};return{column:[{prop:l,labelWidth:0,type:"title",modelValue:o,styles:{fontWeight:500,fontSize:"16px"}}]}},props:{type:"group",label:"分组",column:[]},settings:[{label:"图标",prop:"icon",type:"icon",iconList:G},{label:"是否默认展开",prop:"collapse",component:C,defaultValue:!0},{label:"是否显示箭头",prop:"arrow",component:C,defaultValue:!0}]},$l={name:"input",title:"输入框",icon:"el-icon-chat-dot-square",group:"表单组件",props:{type:"input",label:"输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:C,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"前缀文字",prop:"prepend"},{label:"后缀文字",prop:"append"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:G},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:G},{label:"输入值格式化",prop:"formatter",component:L,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"返回值格式化",prop:"parser",component:L,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"输入框样式",prop:"inputStyle",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"}]},Ll={name:"number",title:"数字输入框",icon:"el-icon-more",group:"表单组件",props:{type:"number",label:"数字输入框"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"计数器步长",prop:"step",type:"number"},{label:"只能输入步长倍数",prop:"stepStrictly",component:C,defaultValue:!1,labelWidth:130},{label:"数值精度",prop:"precision",type:"number"},{label:"是否使用控制按钮",prop:"controls",type:"switch",value:!0,labelWidth:130,control(t){return{controlsPosition:{display:!!t}}}},{label:"控制按钮位置",prop:"controlsPosition",type:"radio",button:!0,dicData:[{label:"两边",value:"default"},{label:"右",value:"right"}]},{label:"清空时显示值",prop:"valueOnClear",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"最小值",value:"min"},{label:"最大值",value:"max"}],control(t,o){return t&&!["min","max"].includes(t)&&(o.valueOnClear=Number(t)),{}}}]},Sl={name:"password",title:"密码输入框",icon:"el-icon-lock",group:"表单组件",props:{type:"password",label:"密码输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:G},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:G},{label:"是否显示切换密码",prop:"showPassword",component:C,defaultValue:!1,labelWidth:130}]},Ol={name:"rate",title:"评分",icon:"el-icon-star",group:"表单组件",props:{type:"rate",label:"评分"},settings:[{label:"是否允许半选",prop:"allowHalf",component:C,defaultValue:!1},{label:"最大分值",prop:"max",type:"number",modelValue:5},{label:"低分界限值",prop:"lowThreshold",type:"number",modelValue:2,labelTip:"低分和中等分数的界限值，值本身被划分在低分中"},{label:"高分界限值",prop:"highThreshold",type:"number",modelValue:4,labelTip:"高分和中等分数的界限值，值本身被划分在高分中"},{label:"颜色数组",prop:"colors",component:L,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"若传入数组，共有 3 个元素，为 3 个分段所对应的颜色；若传入对象，可自定义分段，键名为分段的界限值，键值为对应的颜色"},{label:"未选中颜色",prop:"voidColor",type:"color"},{label:"未选颜色(禁用)",prop:"disabledVoidColor",type:"color",labelWidth:110},{label:"图标数组",prop:"icons",component:L,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"若传入数组，则需要传入 3 个元素，分别为 3 个部分所对应的图标；若传入对象，则可自定义分段，键名为分段的界限值，键值为对应的图标"},{label:"未选中图标",prop:"voidIcon",type:"icon",iconList:G},{label:"未选图标(禁用)",prop:"disabledVoidIcon",type:"icon",iconList:G,labelWidth:110},{label:"显示辅助文字",prop:"showText",component:C,defaultValue:!1,labelWidth:120,labelTip:"是否显示辅助文字，若为是，则会从 辅助文字数组 中选取当前分数对应的文字内容"},{label:"显示当前分数",prop:"showScore",component:C,defaultValue:!1,labelWidth:120,labelTip:"是否显示当前分数，当前分数 和 辅助文字 不能同时显示"},{label:"辅助文字数组",prop:"texts",type:"array"},{label:"分数显示模板",prop:"scoreTemplate"}]},Wl={name:"slider",title:"滑块",icon:"el-icon-operation",group:"表单组件",props:{type:"slider",label:"滑块"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"步长",prop:"step",type:"number"},{label:"显示输入框",prop:"showInput",component:C,defaultValue:!1},{label:"输入控制按钮",prop:"showInputControls",component:C,defaultValue:!0},{label:"显示间断点",prop:"showStops",component:C,defaultValue:!1},{label:"显示提示信息",prop:"showTooltip",component:C,defaultValue:!0},{label:"提示信息类名",prop:"tooltipClase"},{label:"提示信息位置",prop:"placement",type:"select",dicData:re},{label:"格式化提示信息",prop:"formatTooltip",component:L,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"开启选择范围",prop:"range",component:C,defaultValue:!1},{label:"垂直模式",prop:"vertical",component:C,defaultValue:!1},{label:"滑块高度",prop:"height",type:"number",labelTip:"垂直模式必填"},{label:"标记",prop:"marks",component:L,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"标记， key 的类型必须为 number 且取值在闭区间 [min, max] 内，每个标记可以单独设置样式"}]},Ul={name:"switch",title:"开关",icon:"el-icon-switch",group:"表单组件",props:{type:"switch",label:"开关"},settings:[{label:"开关数据",prop:"dicData",type:"dynamic",labelPosition:"top",children:{column:[{label:"_index",prop:"_index",hide:!0},{label:"文字",prop:"label"},{label:"值",prop:"value",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"true",value:!0},{label:"false",value:!1}]}]},value:[{label:"",value:!1},{label:"",value:!0}]},{label:"开关宽度",prop:"len"},{label:"开启时背景色",prop:"activeColor",type:"color"},{label:"关闭时背景色",prop:"inactiveColor",type:"color"}]},El={name:"table",title:"表格选择",icon:"el-icon-grid",group:"表单组件",isContainer:!0,props:{type:"table",label:"表格选择",children:{column:[]}},settings:[{label:"显示表头",prop:"showHeader",component:C,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:C,defaultValue:!1},{label:"表格边框",prop:"border",component:C,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:X},{label:"整体对齐方式",prop:"align",type:"radio",button:!0,dicData:X},{label:"显示序号",prop:"index",type:"switch"},{label:"键值配置",prop:"props",component:L,valueType:"object",tooltip:!0,value:{label:"name",value:"id"}},{label:"格式化函数",prop:"formatter",component:L,valueType:"function",tooltip:!0,defaultValue:"(row) => row.name"},{label:"加载数据函数",prop:"onLoad",component:_l}]},Rl={name:"textarea",title:"文本域",icon:"el-icon-chat-line-square",group:"表单组件",props:{type:"textarea",label:"文本域"},settings:[{label:"最小行数",prop:"minRows",type:"number"},{label:"最大行数",prop:"maxRows",type:"number"},{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:C,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"是否能被缩放",prop:"resize",type:"select",dicData:[{label:"不可缩放",value:"none"},{label:"可水平缩放",value:"horizontal"},{label:"可垂直缩放",value:"vertical"},{label:"可自由缩放",value:"both"}]},{label:"输入框样式",prop:"inputStyle",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"}]},Il={name:"title",title:"标题",icon:"el-icon-minus",group:"布局组件",props:{type:"title",label:"",labelWidth:0},settings:[{label:"标题内容",prop:"modelValue",type:"textarea",labelPosition:"top",value:"标题"},{label:"样式",prop:"styles",component:L,valueType:"object",tooltip:!0,value:{textAlign:"center"}}]},Pl={name:"upload",title:"上传",icon:"el-icon-upload",group:"表单组件",props:{type:"upload",label:"上传"},settings:[{label:"上传地址",prop:"action"},{label:"请求头",prop:"headers",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"请求方法",prop:"method",type:"radio",button:!0,dicData:[{label:"POST",value:"post"},{label:"GET",value:"get"}]},{label:"是否支持多选",prop:"multiple",component:C,defaultValue:!1},{label:"额外参数",prop:"data",component:L,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"显示文件列表",prop:"showFileList",component:C,defaultValue:!0},{label:"拖拽排序",prop:"drag",component:C,defaultValue:!1},{label:"拖拽上传",prop:"dragFile",component:C,defaultValue:!1},{label:"接受上传类型",prop:"accept"},{label:"文件列表类型",prop:"listType",type:"select",dicData:[{label:"文本",value:"text"},{label:"图片",value:"picture"},{label:"图片卡片",value:"picture-card"},{label:"图片图片",value:"picture-img"}]},{label:"最大上传数量",prop:"limit",type:"number"},{label:"最大上传大小",prop:"fileSize",type:"number"},{label:"上传按钮文字",prop:"fileText"},{label:"上传等待文字",prop:"loadText"},{label:"上传请求配置",prop:"propsHttp",component:L,valueType:"object",tooltip:!0,defaultValue:`{
  home: "",
  res: "",
  url: "",
  name: "",
  fileName: "file"
}`},{label:"图片水印配置",prop:"canvasOption",component:L,valueType:"object",tooltip:!0,defaultValue:`{
  text: "",
  fontFamily: "microsoft yahei",
  color: "#999",
  fontSize: 16,
  opacity: 100,
  bottom: 10,
  right: 10,
  ratio: 1
}`}]},jl=Object.freeze(Object.defineProperty({__proto__:null,array:Ae,cascader:Me,checkbox:ze,color:xl,date:Be,daterange:He,dates:Fe,datetime:Ne,datetimerange:qe,dynamic:Dl,form:Ge,group:Cl,icon:Ke,img:Je,input:$l,month:Qe,monthrange:Xe,number:Ll,password:Sl,radio:Ye,rate:Ol,select:Ze,slider:Wl,switch:Ul,table:El,textarea:Rl,time:el,timerange:ll,title:Il,tree:tl,upload:Pl,url:ol,week:al,year:nl},Symbol.toStringTag,{value:"Module"})),ke=Symbol("form-design-state");function Al(t,o){const l=K(t),{modelValue:e}=l,a=j(()=>t.groupList||rl),p=j(()=>ae(P({...jl}),t.resources)),c=j(()=>ae(w(Tl),w(t.baseOption))),u=j(()=>ae(w(wl),w(t.advanceOption))),s=W({}),i=W({}),b=W({}),v=j(()=>{var x;return ul((x=s.value)==null?void 0:x.props,["column","group"])??{}}),r=W([]),n=W(0),y=W("design"),k=W("pc");q(e,x=>{we(s.value,de(x||{}))||(s.value=de(x||{}),Object.keys(i.value).length||$(),r.value.length||m("init"))},{immediate:!0,deep:!0}),q(s,()=>{e.value=vl(s.value)},{deep:!0});function O(x){if(x)return p.value[x]}function $(x){i.value=x??s.value??{}}function w(x){if(typeof x=="function"){const I={elementTree:s.value,activeElement:i.value};return P(x(I)??[])}else return P(x??[])}async function m(x){r.value.push({type:x,timestamp:Date.now(),active:P(i.value),tree:P(s.value),option:P(e.value??{})}),n.value=r.value.length-1}function d(x){const I=r.value.find((U,B)=>B===x);I&&(s.value=P(I.tree),i.value=P(I.active),n.value=x)}function _(){r.value=[],n.value=0,s.value={},i.value={},o("reset")}const T={groupList:a,resources:p,elementTree:s,activeElement:i,hoverElement:b,formOption:v,historyList:r,historyIndex:n,workType:y,deviceType:k,modelValue:e,baseOption:c,advanceOption:u,resolveSettings:w,setActiveElement:$,recordHistory:m,restoreHistory:d,resetHistory:_,getResource:O};return De(ke,T),T}function M(){return xe(ke)}const Ml={class:"resource-list"},zl={class:"resource-item"},Bl=E({__name:"resource",setup(t){const{groupList:o,resources:l,elementTree:e,workType:a,setActiveElement:p,recordHistory:c,getResource:u}=M(),s=W(""),i=j(()=>{const r=Object.values(l.value).filter(n=>{const{name:y,title:k,keywords:O}=n,$=[y,k,O].filter(w=>w).join(",");return!n.disabled&&($==null?void 0:$.includes(s.value))});return o.value.map(n=>({label:n,children:r.filter(y=>y.group===n).map((y,k)=>({...y,priority:y.priority??k})).sort((y,k)=>y.priority-k.priority)})).filter(n=>n.children.length)});function b(r){var y,k;if(a.value!=="design")return;const n=se(r);(k=(y=e.value)==null?void 0:y.children)==null||k.push(n),p(n),c("added")}function v({draggedContext:r,relatedContext:n}){var y;return ie(u(r.element.name),u((y=n.component.componentData)==null?void 0:y.name))}return(r,n)=>{const y=g("el-input"),k=g("el-button"),O=g("el-collapse-item"),$=g("el-collapse");return V(),R("div",Ml,[h(y,{modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=w=>s.value=w),"suffix-icon":"el-icon-search",placeholder:"搜索组件"},null,8,["modelValue"]),h($,{"model-value":i.value.map(w=>w.label)},{default:D(()=>[(V(!0),R(A,null,H(i.value,w=>(V(),S(O,{key:w.label,title:w.label,name:w.label},{default:D(()=>[h(f(he),{list:w.children,group:{name:"components",pull:"clone",put:!1},clone:f(se),sort:!1,"item-key":"name",move:v},{item:D(({element:m})=>[F("div",zl,[h(k,{icon:m.icon,onClick:d=>b(m)},{default:D(()=>[N(le(m.title),1)]),_:2},1032,["icon","onClick"])])]),_:2},1032,["list","clone"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["model-value"])])}}}),Hl=["onMouseover"],Fl={class:"item-label"},Nl={class:"item-actions"},ql=E({__name:"tree",setup(t){const{elementTree:o,activeElement:l,hoverElement:e,setActiveElement:a,recordHistory:p,getResource:c}=M(),u=j(()=>[P(o.value)]);function s(m,d,_){return d.data.isRoot?!1:_==="inner"?ie(c(m.data.name),c(d.data.name)):!0}const i=W();Ce(()=>{var m,d;(d=i.value)==null||d.setCurrentKey((m=l.value)==null?void 0:m.id)});function b(m){a(m)}function v(){o.value=u.value[0]}function r(m){var _;const d=ge(m.data);(_=i.value)==null||_.append(d,m.parent),v(),a(d),p("added")}function n(m){var d;(d=i.value)==null||d.remove(m),v(),a(),p("removed")}function y(m){var d;(d=m.data.children)!=null&&d.length&&(m.data.children.forEach(_=>{var T;return(T=i.value)==null?void 0:T.remove(_)}),v(),a(m.data),p("clear"))}function k(){v(),p("moved")}const O=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:r},{name:"delete",type:"danger",icon:"el-icon-delete",handler:n},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:y}];function $(m){return O.filter(d=>w(m,d.name))}function w(m,d){const{disabledActions:_,isContainer:T}=c(m.name)??{},x=!(_!=null&&_.includes(d));return d==="clear"?T&&x:x}return(m,d)=>{const _=g("el-link");return V(),S(f(dl),{ref_key:"treeRef",ref:i,class:"component-tree","node-key":"id",data:u.value,"default-expand-all":"",draggable:"","expand-on-click-node":!1,"allow-drop":s,onNodeClick:b,onNodeDrop:k},{default:D(({node:T,data:x})=>{var I,U;return[F("div",{class:"tree-item",onMouseover:B=>e.value=x||{},onMouseleave:d[0]||(d[0]=B=>e.value={})},[F("div",Fl,le(((I=x.props)==null?void 0:I.label)||((U=f(c)(x.name))==null?void 0:U.title)),1),F("div",Nl,[(V(!0),R(A,null,H($(x),B=>(V(),S(_,ve({key:B.name,underline:!1},B,{onClick:Q(J=>B.handler(T),["stop"])}),null,16,["onClick"]))),128))])],40,Hl)]}),_:1},8,["data"])}}}),Gl={init:"初始化",added:"添加组件",moved:"移动组件",removed:"删除组件",property:"修改属性",clear:"清空子组件"},io={copy:"复制",delete:"删除",clear:"清空"},Kl={class:"history-list"},Jl=["onClick"],Ql=E({__name:"history",setup(t){const{historyList:o,historyIndex:l,restoreHistory:e}=M(),a=Oe("history-show-source",!1);return(p,c)=>{const u=g("el-switch"),s=g("el-input"),i=g("el-tooltip");return V(),R("div",Kl,[N(" 显示源码："),h(u,{modelValue:f(a),"onUpdate:modelValue":c[0]||(c[0]=b=>z(a)?a.value=b:null)},null,8,["modelValue"]),(V(!0),R(A,null,H(f(o),(b,v)=>(V(),S(i,{key:b.timestamp,disabled:!f(a),effect:"light",placement:"right"},{content:D(()=>[h(s,{type:"textarea","model-value":f(Ve)(b),autosize:{minRows:1,maxRows:20},style:{width:"300px"}},null,8,["model-value"])]),default:D(()=>[F("div",{class:te(["history-item",{"is-active":v===f(l)}]),onClick:r=>f(e)(v)},[F("span",null,le(f(Gl)[b.type]),1),F("span",null,le(new Date(b.timestamp).toLocaleString()),1)],10,Jl)]),_:2},1032,["disabled"]))),128))])}}}),Xl=E({__name:"index",setup(t){const o=[{title:"组件",icon:"el-icon-menu",component:Bl},{title:"大纲",icon:"el-icon-operation",component:ql},{title:"历史",icon:"el-icon-clock",component:Ql}];return(l,e)=>{const a=g("el-link"),p=g("el-tab-pane"),c=g("el-tabs");return V(),S(c,{"tab-position":"top",stretch:""},{default:D(()=>[(V(),R(A,null,H(o,u=>h(p,{key:u.title},{label:D(()=>[h(a,{title:u.title,icon:u.icon,underline:!1,style:{color:"inherit"}},null,8,["title","icon"])]),default:D(()=>[(V(),S($e(u.component)))]),_:2},1024)),64))]),_:1})}}}),Yl={class:"item-actions"},Te=E({__name:"design",props:{list:{},componentData:{}},emits:["update:active","update:list"],setup(t,{emit:o}){const l=t,{list:e}=K(l,o,{passive:!0,deep:!0}),{activeElement:a,hoverElement:p,formOption:c,setActiveElement:u,recordHistory:s,getResource:i}=M();function b(d){const _={...P(c.value),span:24,menuBtn:!1},{designOption:T}=i(d.name)??{};if(typeof T=="object")return{..._,...T};if(typeof T=="function")return{..._,...T(d)};{const x=[];return d.props&&x.push({...il(d.props,sl),span:24}),{..._,column:x}}}function v(d){var _,T;return(_=i(d.name))!=null&&_.isContainer?24:((T=d.props)==null?void 0:T.span)||c.value.span||24}function r(d){var T;const _=Object.keys(d)[0];_&&(u((T=d[_])==null?void 0:T.element),s(_))}function n(d){const _=ge(d);e.value.push(_),u(_),s("added")}function y(d,_){e.value.splice(_,1),u(e.value[_]??e.value[_-1]),s("removed")}function k(d){var _;(_=d.children)!=null&&_.length&&(d.children=[],u(d),s("clear"))}function O({draggedContext:d,relatedContext:_}){var T;return ie(i(d.element.name),i((T=_.component.componentData)==null?void 0:T.name))}const $=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:n},{name:"delete",type:"danger",icon:"el-icon-delete",handler:y},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:k}];function w(d){return $.filter(_=>m(d,_.name))}function m(d,_){const{disabledActions:T,isContainer:x}=i(d.name)??{},I=!(T!=null&&T.includes(_));return _==="clear"?x&&I:I}return(d,_)=>{const T=g("avue-form"),x=g("el-button"),I=g("el-col");return V(),S(f(he),{list:f(e),class:te(["el-row draggable-list",{"is-empty":!f(e).length,"is-root":d.componentData.isRoot}]),group:{name:"components"},"component-data":d.componentData,"item-key":"id",move:O,onChange:r},{item:D(({element:U,index:B})=>[h(I,{class:te(["draggable-item",{"is-active":f(a).id===U.id,"is-hover":f(p).name&&f(p).id===U.id}]),span:v(U),onClick:Q(J=>f(u)(U),["stop"]),onMouseover:Q(J=>p.value=U||{},["stop"]),onMouseleave:_[0]||(_[0]=Q(J=>p.value={},["stop"]))},{default:D(()=>{var J;return[U.name!=="form"?(V(),S(T,{key:0,option:b(U)},null,8,["option"])):ne("",!0),(J=f(i)(U.name))!=null&&J.isContainer?(V(),S(Te,{key:1,class:"is-container","component-data":U,list:U.children??[],"onUpdate:list":Y=>U.children=Y},null,8,["component-data","list","onUpdate:list"])):ne("",!0),fe(F("div",Yl,[(V(!0),R(A,null,H(w(U),Y=>(V(),S(x,ve({key:Y.name},Y,{circle:"",plain:"",onClick:Q(at=>Y.handler(U,B),["stop"])}),null,16,["onClick"]))),128))],512),[[ye,f(a).id===U.id]])]}),_:2},1032,["class","span","onClick","onMouseover"])]),_:1},8,["list","class","component-data"])}}}),Zl=E({setup(){const{proxy:t}=Le(),{modelValue:o}=M(),l=W({}),e=W({}),a=j(()=>pl.bind(t)(Ve(o.value))),p=W();return{form:l,defaults:e,option:a,formRef:p}},render(){return Se(g("avue-form"),{ref:"formRef",modelValue:this.form,option:this.option,defaults:this.defaults,"onUpdate:modelValue":t=>this.form=t,"onUpdate:defaults":t=>this.defaults=t})}}),et=E({__name:"source",setup(t){const{modelValue:o}=M();return(l,e)=>(V(),S(f(L),{modelValue:f(o),"onUpdate:modelValue":e[0]||(e[0]=a=>z(o)?o.value=a:null),"value-type":"object"},null,8,["modelValue"]))}}),lt=E({__name:"index",setup(t){const{elementTree:o,workType:l,setActiveElement:e}=M();return(a,p)=>f(l)==="preview"?(V(),S(Zl,{key:0})):f(l)==="source"?(V(),S(et,{key:1})):(V(),S(Te,{key:2,"component-data":f(o),list:f(o).children??[],"onUpdate:list":p[0]||(p[0]=c=>f(o).children=c),onClick:p[1]||(p[1]=Q(c=>f(e)(),["stop"]))},null,8,["component-data","list"]))}}),tt=E({__name:"index",setup(t){const o=M(),{elementTree:l,activeElement:e,baseOption:a,advanceOption:p,resolveSettings:c,recordHistory:u,getResource:s}=o,i=W(!1),b=W(""),v=W([]),r=W({}),n=W(0),y={labelPosition:"left",labelWidth:100,menuBtn:!1,span:24};q(()=>e.value.id,async()=>{i.value=!0,n.value=0,await be();const{settings:$,disabledSettings:w}=s(e.value.name)??{},m={...y,label:"基础",prop:"base",column:a.value},d={...y,label:"高级",prop:"advance",column:p.value},_={...y,label:"属性",prop:"component",column:c($)};v.value=[m,_,d].filter(T=>!(w!=null&&w.includes(T.prop))),b.value=v.value[0].prop,r.value=P(e.value.props),i.value=!1},{immediate:!0});const k=ml(()=>u("property"),1e3);We(r,$=>{const w=pe($,[void 0,null,""],["$"]);if(e.value.isRoot)ce(l.value,"props",w);else{const m=O(l.value,e.value.id)??[];m.length&&!we(w,cl(l.value,m.concat("props")))&&ce(l.value,m.concat("props"),w)}n.value&&k(),n.value++},{deep:!0,debounce:100});function O($,w){if($.id===w)return[];if($.children)for(const m in $.children){const d=O($.children[m],w);if(d)return["children",m].concat(d)}}return($,w)=>{const m=g("avue-form"),d=g("el-tab-pane"),_=g("el-tabs");return V(),S(_,{modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=T=>b.value=T)},{default:D(()=>[(V(!0),R(A,null,H(v.value,T=>(V(),S(d,{key:T.label,label:T.label,name:T.prop},{default:D(()=>[i.value?ne("",!0):(V(),S(m,{key:0,modelValue:r.value,"onUpdate:modelValue":w[0]||(w[0]=x=>r.value=x),class:"settings-form",option:T},null,8,["modelValue","option"]))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}}),ot=E({__name:"index",setup(t){const{elementTree:o,workType:l,deviceType:e,historyList:a,historyIndex:p,restoreHistory:c,resetHistory:u}=M(),s=[{label:"PC端",value:"pc",icon:"el-icon-monitor"},{label:"移动端",value:"mobile",icon:"el-icon-cellphone"}],i=[{label:"设计",value:"design",icon:"el-icon-brush"},{label:"源码",value:"source",icon:"el-icon-more"},{label:"预览",value:"preview",icon:"el-icon-view"}];return(b,v)=>{const r=g("el-button"),n=g("el-button-group"),y=g("el-col"),k=g("el-link"),O=g("el-radio-button"),$=g("el-radio-group"),w=g("el-row");return V(),S(w,{gutter:20},{default:D(()=>[h(y,{span:8,style:{"align-self":"center"}},{default:D(()=>[h(n,{size:"small"},{default:D(()=>{var m;return[h(r,{disabled:f(p)===0,title:"撤回",icon:"el-icon-arrow-left",onClick:v[0]||(v[0]=d=>f(c)(f(p)-1))},null,8,["disabled"]),h(r,{disabled:f(p)===f(a).length-1,title:"重做",icon:"el-icon-arrow-right",onClick:v[1]||(v[1]=d=>f(c)(f(p)+1))},null,8,["disabled"]),h(r,{disabled:!((m=f(o).children)!=null&&m.length),title:"清空",icon:"el-icon-delete",onClick:v[2]||(v[2]=d=>f(u)())},null,8,["disabled"])]}),_:1})]),_:1}),h(y,{span:8,style:{"text-align":"center"}},{default:D(()=>[h($,{modelValue:f(e),"onUpdate:modelValue":v[3]||(v[3]=m=>z(e)?e.value=m:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(V(),R(A,null,H(s,m=>h(O,{key:m.value,label:m.value},{default:D(()=>[h(k,{title:m.label,icon:m.icon,underline:!1,style:{color:"inherit"},onClick:d=>e.value=m.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),h(y,{span:8,style:{"text-align":"right"}},{default:D(()=>[h($,{modelValue:f(l),"onUpdate:modelValue":v[4]||(v[4]=m=>z(l)?l.value=m:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(V(),R(A,null,H(i,m=>h(O,{key:m.value,label:m.value},{default:D(()=>[h(k,{title:m.label,icon:m.icon,underline:!1,style:{color:"inherit"},onClick:d=>l.value=m.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),so=E({__name:"index",props:{modelValue:{},groupList:{},resources:{},baseOption:{type:[Array,Function]},advanceOption:{type:[Array,Function]},leftWidth:{},rightWidth:{}},emits:["reset"],setup(t,{emit:o}){const l=t,{workType:e,deviceType:a}=Al(l,o);return(p,c)=>{const u=g("el-aside"),s=g("el-header"),i=g("el-main"),b=g("el-container");return V(),S(b,{class:"form-design"},{default:D(()=>[h(u,{class:"left-panel",width:p.leftWidth},{default:D(()=>[h(Xl)]),_:1},8,["width"]),h(b,null,{default:D(()=>[h(s,{class:"main-header",height:"auto"},{default:D(()=>[h(ot)]),_:1}),h(i,{class:"main-workspace"},{default:D(()=>[h(lt,{class:te(`device-${f(a)}`)},null,8,["class"])]),_:1})]),_:1}),fe(h(u,{class:"right-panel",width:p.rightWidth},{default:D(()=>[h(tt)]),_:1},8,["width"]),[[ye,f(e)=="design"]])]),_:1})}}});export{yl as ControlSetter,io as DesignActionMap,uo as DicDataSetter,bo as DicTreeSetter,L as EditorSetter,so as FormDesign,Gl as HistoryTypeMap,_l as OnLoadSetter,hl as RulesSetter,C as SwitchSetter,Vl as ValueSetter,de as adapterIn,vl as adapterOut,wl as advance,X as alignDic,Ae as array,Tl as base,Me as cascader,ie as checkRules,ze as checkbox,se as cloneItem,xl as color,ge as copyItem,Be as date,He as daterange,Fe as dates,Ne as datetime,qe as datetimerange,vo as dic,Dl as dynamic,Ge as form,ue as getRandomId,Cl as group,rl as groupList,Ke as icon,G as iconList,Je as img,$l as input,pl as jsonParse,Ve as jsonStringify,Qe as month,Xe as monthrange,Ll as number,Sl as password,re as placementDic,Pe as positionDic,Ye as radio,Ol as rate,Ze as select,je as sizeDic,Wl as slider,Ul as switch,El as table,Rl as textarea,el as time,ll as timerange,Il as title,tl as tree,Pl as upload,ol as url,al as week,nl as year};
