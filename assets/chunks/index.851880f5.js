import{i as ee}from"./state-local.dd516420.js";import{C as y,d as W,g as w,H as B,z as s,a5 as m,j as k,h as te,E}from"./framework.a13ec59b.js";function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(r){ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function re(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function ae(e,t){if(e==null)return{};var n=re(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ie(e,t){return oe(e)||le(e,t)||ue(e,t)||de()}function oe(e){if(Array.isArray(e))return e}function le(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),f;!(r=(f=o.next()).done)&&(n.push(f.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function ue(e,t){if(e){if(typeof e=="string")return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}}function C(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.36.1/min/vs"}};function fe(e){return function t(){for(var n=this,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return a.length>=e.length?e.apply(this,a):function(){for(var o=arguments.length,f=new Array(o),c=0;c<o;c++)f[c]=arguments[c];return t.apply(n,[].concat(a,f))}}}function se(e){return{}.toString.call(e).includes("Object")}function ve(e){return e||D("configIsRequired"),se(e)||D("configType"),e.urls?(ge(),{paths:{vs:e.urls.monacoBase}}):e}function ge(){console.warn(F.deprecation)}function me(e,t){throw new Error(e[t]||e.default)}var F={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},D=fe(me)(F),he={config:ve},ye=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(a){return n.reduceRight(function(i,o){return o(i)},a)}};function G(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],G(e[n],t[n]))}),$($({},e),t)}var pe={type:"cancelation",msg:"operation is manually canceled"};function S(e){var t=!1,n=new Promise(function(r,a){e.then(function(i){return t?a(pe):r(i)}),e.catch(a)});return n.cancel=function(){return t=!0},n}var Oe=ee.create({config:ce,isInitialized:!1,resolve:null,reject:null,monaco:null}),K=ie(Oe,2),p=K[0],b=K[1];function we(e){var t=he.config(e),n=t.monaco,r=ae(t,["monaco"]);b(function(a){return{config:G(a.config,r),monaco:n}})}function be(){var e=p(function(t){var n=t.monaco,r=t.isInitialized,a=t.resolve;return{monaco:n,isInitialized:r,resolve:a}});if(!e.isInitialized){if(b({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),S(M);if(window.monaco&&window.monaco.editor)return Y(window.monaco),e.resolve(window.monaco),S(M);ye(_e,Me)(Pe)}return S(M)}function _e(e){return document.body.appendChild(e)}function Se(e){var t=document.createElement("script");return e&&(t.src=e),t}function Me(e){var t=p(function(r){var a=r.config,i=r.reject;return{config:a,reject:i}}),n=Se("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function Pe(){var e=p(function(n){var r=n.config,a=n.resolve,i=n.reject;return{config:r,resolve:a,reject:i}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){Y(n),e.resolve(n)},function(n){e.reject(n)})}function Y(e){p().monaco||b({monaco:e})}function je(){return p(function(e){var t=e.monaco;return t})}var M=new Promise(function(e,t){return b({resolve:e,reject:t})}),Ee={config:we,init:be,__getMonacoInstance:je};const J=Ee;var Ie=Object.defineProperty,Le=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,x=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))$e.call(t,n)&&x(e,n,t[n]);if(A)for(var n of A(t))Ce.call(t,n)&&x(e,n,t[n]);return e},De=(e,t)=>Le(e,Ve(t));const j={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function Q(e,t){const n=w(()=>{const{width:a,height:i}=e;return De(P({},j.wrapper),{width:a,height:i})}),r=w(()=>P(P({},j.fullWidth),!t.value&&j.hide));return{wrapperStyle:n,containerStyle:r}}function X(){const e=y(null),t=J.init(),n=()=>t.cancel();return t.then(r=>e.value=r).catch(r=>{(r==null?void 0:r.type)!=="cancelation"&&console.error("Monaco initialization error:",r)}),{monacoRef:e,unload:n}}function Z(e){return typeof e=="function"?e():e}function Ae(e){return e===void 0}function h(e,t,n,r){return xe(e,r)||Ne(e,t,n,r)}function xe(e,t){return e.editor.getModel(R(e,t))}function Ne(e,t,n,r){return e.editor.createModel(t,n,r?R(e,r):void 0)}function R(e,t){return e.Uri.parse(t)}var Te=Object.defineProperty,N=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,T=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,He=(e,t)=>{for(var n in t||(t={}))ze.call(t,n)&&T(e,n,t[n]);if(N)for(var n of N(t))Ue.call(t,n)&&T(e,n,t[n]);return e};const qe={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var z=W({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const n=new Map,r=y(null),{monacoRef:a,unload:i}=X(),{editorRef:o}=We(t,e,a,r),{disposeValidator:f}=Be(t,e,a,o),c=w(()=>!!a.value&&!!o.value),{wrapperStyle:l,containerStyle:u}=Q(e,c);return B(()=>{var d,v;(d=f.value)==null||d.call(f),o.value?((v=o.value.getModel())==null||v.dispose(),o.value.dispose()):i()}),s(()=>e.path,(d,v)=>{const g=h(a.value,e.value||e.defaultValue||"",e.language||e.defaultLanguage||"",d||e.defaultPath||"");g!==o.value.getModel()&&(e.saveViewState&&n.set(v,o.value.saveViewState()),o.value.setModel(g),e.saveViewState&&o.value.restoreViewState(n.get(d)))}),s(()=>e.value,d=>{o.value&&o.value.getValue()!==d&&o.value.setValue(d)}),s(()=>e.options,d=>o.value&&o.value.updateOptions(d),{deep:!0}),s(()=>e.theme,d=>a.value&&a.value.editor.setTheme(d)),s(()=>e.language,d=>c.value&&a.value.editor.setModelLanguage(o.value.getModel(),d)),s(()=>e.line,d=>{o.value&&!Ae(d)&&o.value.revealLine(d)}),{containerRef:r,isEditorReady:c,wrapperStyle:l,containerStyle:u}},render(){const{$slots:e,isEditorReady:t,wrapperStyle:n,containerStyle:r,className:a}=this;return m("div",{style:n},[!t&&m("div",{style:qe},e.default?Z(e.default):"loading..."),m("div",{ref:"containerRef",key:"monaco_editor_container",style:r,class:a})])}});function We({emit:e},t,n,r){const a=y(null);k(()=>{const o=s(n,()=>{r.value&&n.value&&(E(()=>o()),i())},{immediate:!0})});function i(){var o;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value);const f=t.path||t.defaultPath,c=h(n.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",f||"");a.value=n.value.editor.create(r.value,He({model:c,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),(o=a.value)==null||o.onDidChangeModelContent(l=>{const u=a.value.getValue();u!==t.value&&(e("update:value",u),e("change",u,l))}),e("mount",a.value,n.value)}return{editorRef:a}}function Be({emit:e},t,n,r){const a=te(null),i=s([n,r],()=>{if(n.value&&r.value){E(()=>i());const o=n.value.editor.onDidChangeMarkers(f=>{var c,l;const u=(l=(c=r.value)==null?void 0:c.getModel())==null?void 0:l.uri;if(u&&f.find(v=>v.path===u.path)){const v=n.value.editor.getModelMarkers({resource:u});e("validate",v)}});a.value=()=>o==null?void 0:o.dispose()}});return{disposeValidator:a}}var ke=Object.defineProperty,U=Object.getOwnPropertySymbols,Fe=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,H=(e,t,n)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ke=(e,t)=>{for(var n in t||(t={}))Fe.call(t,n)&&H(e,n,t[n]);if(U)for(var n of U(t))Ge.call(t,n)&&H(e,n,t[n]);return e};const Ye={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var q=W({name:"VueMonacoDiffEditor",props:{original:String,modified:String,language:String,originalLanguage:String,modifiedLanguage:String,originalModelPath:String,modifiedModelPath:String,theme:{type:String,default:"vs"},options:{type:Object,default:()=>({})},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},setup(e,t){const n=y(null),{monacoRef:r,unload:a}=X(),{diffEditorRef:i}=Je(t,e,r,n),o=w(()=>!!r.value&&!!i.value),{wrapperStyle:f,containerStyle:c}=Q(e,o);return B(()=>{var l,u,d,v,g,I,_,L;!r.value&&a();const O=(u=(l=i.value)==null?void 0:l.getModel)==null?void 0:u.call(l);(v=(d=O==null?void 0:O.original)==null?void 0:d.dispose)==null||v.call(d),(I=(g=O==null?void 0:O.modified)==null?void 0:g.dispose)==null||I.call(g),(L=(_=i.value)==null?void 0:_.dispose)==null||L.call(_)}),s(()=>e.originalModelPath,()=>{if(!r.value||!i.value)return;const l=i.value.getOriginalEditor(),u=h(r.value,e.original||"",e.originalLanguage||e.language||"text",e.originalModelPath||"");u!==l.getModel()&&l.setModel(u)}),s(()=>e.modifiedModelPath,()=>{if(!r.value||!i.value)return;const l=i.value.getModifiedEditor(),u=h(r.value,e.modified||"",e.modifiedLanguage||e.language||"text",e.modifiedModelPath||"");u!==l.getModel()&&l.setModel(u)}),s(()=>e.modified,()=>{if(!o.value)return;const l=i.value.getModifiedEditor();l.getOption(r.value.editor.EditorOption.readOnly)?l.setValue(e.modified||""):e.modified!==l.getValue()&&(l.executeEdits("",[{range:l.getModel().getFullModelRange(),text:e.modified||"",forceMoveMarkers:!0}]),l.pushUndoStop())}),s(()=>e.original,()=>{var l,u;(u=(l=i.value)==null?void 0:l.getModel())==null||u.original.setValue((e==null?void 0:e.original)||"")}),s(()=>[e.language,e.originalLanguage,e.modifiedLanguage],()=>{if(!o.value)return;const{original:l,modified:u}=i.value.getModel();r.value.editor.setModelLanguage(l,e.originalLanguage||e.language||"text"),r.value.editor.setModelLanguage(u,e.originalLanguage||e.language||"text")}),s(()=>e.theme,()=>{var l;return(l=r.value)==null?void 0:l.editor.setTheme(e.theme)}),s(()=>e.options,()=>{var l;return(l=i.value)==null?void 0:l.updateOptions(e.options)},{deep:!0}),{containerRef:n,isDiffEditorReady:o,wrapperStyle:f,containerStyle:c}},render(){const{$slots:e,isDiffEditorReady:t,wrapperStyle:n,containerStyle:r,className:a}=this;return m("div",{style:n},[!t&&m("div",{style:Ye},e.default?Z(e.default):"loading..."),m("div",{ref:"containerRef",key:"monaco_diff_editor_container",style:r,class:a})])}});function Je({emit:e},t,n,r){const a=y(null);k(()=>{const o=s(n,()=>{r.value&&n.value&&(E(()=>o()),i())},{immediate:!0})});function i(){var o;if(!r.value||!n.value||a.value)return;e("beforeMount",n.value),a.value=n.value.editor.createDiffEditor(r.value,Ke({automaticLayout:!0,autoIndent:"brackets",theme:t.theme,formatOnPaste:!0,formatOnType:!0},t.options));const f=h(n.value,t.original||"",t.originalLanguage||t.language||"text",t.originalModelPath||""),c=h(n.value,t.modified||"",t.modifiedLanguage||t.language||"text",t.modifiedModelPath||"");(o=a.value)==null||o.setModel({original:f,modified:c}),e("mount",a.value,n.value)}return{diffEditorRef:a}}function Ze(e,t){t&&J.config(t),e.component(z.name,z),e.component(q.name,q)}export{q as DiffEditor,z as Editor,q as VueMonacoDiffEditor,z as VueMonacoEditor,z as default,Ze as install,J as loader,X as useMonaco};
