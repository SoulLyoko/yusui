var Hj=Object.defineProperty;var Xj=(n,a,i)=>a in n?Hj(n,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[a]=i;var Pl=(n,a,i)=>(Xj(n,typeof a!="symbol"?a+"":a,i),i);import{g as Ui,I as $j}from"./data.ee8ef805.js";import{d as Vj,a2 as Wj}from"../flow-design_flow-modeler_index.md.5ac41c23.js";import{n as Yj,f as Ib,r as Kj,b as Zj,D as Es,h as Pc,A as yv,B as wc,G as _c,k as Jj,u as si,af as gv,z as Qj,e as GA,w as kA,C as qj,i as eB}from"./framework.6c76c79f.js";import{d as UA}from"./theme.22e7a177.js";import{b as tB,c8 as rB,c9 as nB,ca as oB,c7 as iB,ar as dv,a7 as Tc,cb as Db}from"../composables_use-crud_index.md.72c17a30.js";import{eC as aB}from"../app.449d28a3.js";var sB="[object String]";function Cb(n){return typeof n=="string"||!tB(n)&&rB(n)&&nB(n)==sB}var uB=0;function zA(n){var a=++uB;return oB(n)+a}const HA={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function lB({lf:n,graphData:a,elementData:i,formData:u,formLoading:o,formOption:l,formOptions:c,editorVisible:h}){var m,y,S,x,T,_,N;async function p({data:M,isForce:D}={data:void 0,isForce:!1}){var $,Oe,ge,de,ce,Me;const W=($=n.value)==null?void 0:$.graphModel.nodes.find(j=>j.type==="process");!M&&(W!=null&&W.id)&&(M=(Oe=n.value)==null?void 0:Oe.getNodeDataById(W.id)),!((M==null?void 0:M.id)===((ge=i.value)==null?void 0:ge.id)&&!D)&&(M.type!=="process"&&((de=n.value)==null||de.selectElementById(M.id)),o.value=!0,i.value=M,l.value.group=((ce=c.value)==null?void 0:ce[M.type])??Vj,u.value={...M.properties,id:M.id,name:((Me=M.text)==null?void 0:Me.value)||""},await Yj(),o.value=!1)}(m=n.value)==null||m.on("element:click",p),(y=n.value)==null||y.on("blank:click",p),(S=n.value)==null||S.on("node:add",p),(x=n.value)==null||x.on("node:dnd-add",p),(T=n.value)==null||T.on("node:delete",()=>p()),(_=n.value)==null||_.on("history:change",()=>{var M;a.value=(M=n.value)==null?void 0:M.getGraphData()}),(N=n.value)==null||N.on("custom:edit-click",()=>{h.value=!0})}var $t={},fB={get exports(){return $t},set exports(n){$t=n}};(function(n,a){(function(u,o){n.exports=o()})(window,function(){return function(i){var u={};function o(l){if(u[l])return u[l].exports;var c=u[l]={i:l,l:!1,exports:{}};return i[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=i,o.c=u,o.d=function(l,c,h){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:h})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(c&1&&(l=o(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var h=Object.create(null);if(o.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var p in l)o.d(h,p,function(m){return l[m]}.bind(null,p));return h},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=215)}([function(i,u,o){(function(l,c){o.d(u,"a",function(){return k}),o.d(u,"b",function(){return Ji}),o.d(u,"c",function(){return Wo}),o.d(u,"d",function(){return jr}),o.d(u,"e",function(){return Kt}),o.d(u,"f",function(){return wt}),o.d(u,"g",function(){return As}),o.d(u,"h",function(){return Zo}),o.d(u,"i",function(){return vr}),o.d(u,"j",function(){return ro}),o.d(u,"k",function(){return un}),o.d(u,"l",function(){return co}),o.d(u,"m",function(){return to}),o.d(u,"n",function(){return nf}),o.d(u,"o",function(){return Z}),o.d(u,"p",function(){return ju}),o.d(u,"q",function(){return Ms}),o.d(u,"r",function(){return Ca}),o.d(u,"s",function(){return Nn}),o.d(u,"t",function(){return Du}),o.d(u,"u",function(){return ef}),o.d(u,"v",function(){return Lu}),o.d(u,"w",function(){return af}),o.d(u,"x",function(){return Do}),o.d(u,"y",function(){return ao}),o.d(u,"z",function(){return dn}),o.d(u,"A",function(){return kn}),o.d(u,"B",function(){return Gn}),o.d(u,"C",function(){return Ir}),o.d(u,"D",function(){return sf}),o.d(u,"E",function(){return Ns}),o.d(u,"F",function(){return tf}),o.d(u,"G",function(){return Da}),o.d(u,"H",function(){return wu}),o.d(u,"I",function(){return ff}),o.d(u,"J",function(){return ho}),o.d(u,"K",function(){return we}),o.d(u,"L",function(){return ja}),o.d(u,"M",function(){return po});var h="An invariant failed, however the error is obfuscated because this is a production build.",p=[];Object.freeze(p);var m={};Object.freeze(m);function y(){return++Wt.mobxGuid}function S(g){throw x(!1,g),"X"}function x(g,E){if(!g)throw new Error("[mobx] "+(E||h))}function T(g){var E=!1;return function(){if(!E)return E=!0,g.apply(this,arguments)}}var _=function(){};function N(g){var E=[];return g.forEach(function(A){E.indexOf(A)===-1&&E.push(A)}),E}function M(g){return g!==null&&typeof g=="object"}function D(g){if(g===null||typeof g!="object")return!1;var E=Object.getPrototypeOf(g);return E===Object.prototype||E===null}function W(g){if(ce(g)||dn(g))return g;if(Array.isArray(g))return new Map(g);if(D(g)){var E=new Map;for(var A in g)E.set(A,g[A]);return E}else return S("Cannot convert to map from '"+g+"'")}function $(g,E,A){Object.defineProperty(g,E,{enumerable:!1,writable:!0,configurable:!0,value:A})}function Oe(g,E,A){Object.defineProperty(g,E,{enumerable:!1,writable:!1,configurable:!0,value:A})}function ge(g,E){var A=Object.getOwnPropertyDescriptor(g,E);return!A||A.configurable!==!1&&A.writable!==!1}function de(g,E){var A="isMobX"+g;return E.prototype[A]=!0,function(B){return M(B)&&B[A]===!0}}function ce(g){return g instanceof Map}function Me(g){return g instanceof Set}function j(g){var E=new Set;for(var A in g)E.add(A);return Object.getOwnPropertySymbols(g).forEach(function(B){Object.getOwnPropertyDescriptor(g,B).enumerable&&E.add(B)}),Array.from(E)}function Q(g){return g&&g.toString?g.toString():new String(g).toString()}function U(g){return g===null?null:typeof g=="object"?""+g:g}var I=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:Object.getOwnPropertyNames,k=Symbol("mobx administration"),te=function(){function g(E){E===void 0&&(E="Atom@"+y()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.NOT_TRACKING}return g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},g.prototype.reportObserved=function(){return Su(this)},g.prototype.reportChanged=function(){Kr(),Wl(this),no()},g.prototype.toString=function(){return this.name},g}(),V=de("Atom",te);function Z(g,E,A){E===void 0&&(E=_),A===void 0&&(A=_);var B=new te(g);return E!==_&&rf(B,E),A!==_&&Ns(B,A),B}function le(g,E){return g===E}function Te(g,E){return bi(g,E)}function Re(g,E){return bi(g,E,1)}function Pe(g,E){return Object.is(g,E)}var Ke={identity:le,structural:Te,default:Pe,shallow:Re};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var gt=function(g,E){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,B){A.__proto__=B}||function(A,B){for(var J in B)B.hasOwnProperty(J)&&(A[J]=B[J])},gt(g,E)};function Nt(g,E){gt(g,E);function A(){this.constructor=g}g.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)}var Vt=function(){return Vt=Object.assign||function(E){for(var A,B=1,J=arguments.length;B<J;B++){A=arguments[B];for(var pe in A)Object.prototype.hasOwnProperty.call(A,pe)&&(E[pe]=A[pe])}return E},Vt.apply(this,arguments)};function Ct(g){var E=typeof Symbol=="function"&&g[Symbol.iterator],A=0;return E?E.call(g):{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}}}function Ge(g,E){var A=typeof Symbol=="function"&&g[Symbol.iterator];if(!A)return g;var B=A.call(g),J,pe=[],Xe;try{for(;(E===void 0||E-- >0)&&!(J=B.next()).done;)pe.push(J.value)}catch(Et){Xe={error:Et}}finally{try{J&&!J.done&&(A=B.return)&&A.call(B)}finally{if(Xe)throw Xe.error}}return pe}function bt(){for(var g=[],E=0;E<arguments.length;E++)g=g.concat(Ge(arguments[E]));return g}var Ut=Symbol("mobx did run lazy initializers"),ee=Symbol("mobx pending decorators"),se={},me={};function Ue(g,E){var A=E?se:me;return A[g]||(A[g]={configurable:!0,enumerable:E,get:function(){return tt(this),this[g]},set:function(B){tt(this),this[g]=B}})}function tt(g){var E,A;if(g[Ut]!==!0){var B=g[ee];if(B){$(g,Ut,!0);var J=bt(Object.getOwnPropertySymbols(B),Object.keys(B));try{for(var pe=Ct(J),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Xe.value,Yt=B[Et];Yt.propertyCreator(g,Yt.prop,Yt.descriptor,Yt.decoratorTarget,Yt.decoratorArguments)}}catch(Tr){E={error:Tr}}finally{try{Xe&&!Xe.done&&(A=pe.return)&&A.call(pe)}finally{if(E)throw E.error}}}}}function He(g,E){return function(){var B,J=function(Xe,Et,Yt,Tr){if(Tr===!0)return E(Xe,Et,Yt,Xe,B),null;if(!Object.prototype.hasOwnProperty.call(Xe,ee)){var _r=Xe[ee];$(Xe,ee,Vt({},_r))}return Xe[ee][Et]={prop:Et,propertyCreator:E,descriptor:Yt,decoratorTarget:Xe,decoratorArguments:B},Ue(Et,g)};return Lt(arguments)?(B=p,J.apply(null,arguments)):(B=Array.prototype.slice.call(arguments),J)}}function Lt(g){return(g.length===2||g.length===3)&&(typeof g[1]=="string"||typeof g[1]=="symbol")||g.length===4&&g[3]===!0}function nr(g,E,A){return Do(g)?g:Array.isArray(g)?Ir.array(g,{name:A}):D(g)?Ir.object(g,void 0,{name:A}):ce(g)?Ir.map(g,{name:A}):Me(g)?Ir.set(g,{name:A}):g}function tr(g,E,A){return g==null||kn(g)||ao(g)||dn(g)||Bn(g)?g:Array.isArray(g)?Ir.array(g,{name:A,deep:!1}):D(g)?Ir.object(g,void 0,{name:A,deep:!1}):ce(g)?Ir.map(g,{name:A,deep:!1}):Me(g)?Ir.set(g,{name:A,deep:!1}):S(!1)}function Jt(g){return g}function rt(g,E,A){return bi(g,E)?E:g}function Er(g){x(g);var E=He(!0,function(B,J,pe,Xe,Et){var Yt=pe?pe.initializer?pe.initializer.call(B):pe.value:void 0;js(B).addObservableProp(J,Yt,g)}),A=(typeof l<"u"&&l.env,E);return A.enhancer=g,A}var ur={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ur);function Xt(g){return g==null?ur:typeof g=="string"?{name:g,deep:!0,proxy:!0}:g}var L=Er(nr),Qr=Er(tr),Rr=Er(Jt),kr=Er(rt);function Be(g){return g.defaultDecorator?g.defaultDecorator.enhancer:g.deep===!1?Jt:nr}function Xr(g,E,A){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return L.apply(null,arguments);if(Do(g))return g;var B=D(g)?Ir.object(g,E,A):Array.isArray(g)?Ir.array(g,E):ce(g)?Ir.map(g,E):Me(g)?Ir.set(g,E):g;if(B!==g)return B;S(!1)}var zr={box:function(g,E){arguments.length>2&&On("box");var A=Xt(E);return new Vo(g,Be(A),A.name,!0,A.equals)},array:function(g,E){arguments.length>2&&On("array");var A=Xt(E);return qr(g,Be(A),A.name)},map:function(g,E){arguments.length>2&&On("map");var A=Xt(E);return new Ji(g,Be(A),A.name)},set:function(g,E){arguments.length>2&&On("set");var A=Xt(E);return new Cs(g,Be(A),A.name)},object:function(g,E,A){typeof arguments[1]=="string"&&On("object");var B=Xt(A);if(B.proxy===!1)return Ms({},g,E,B);var J=Ru(B),pe=Ms({},void 0,void 0,B),Xe=$n(pe);return Iu(Xe,g,E,J),Xe},ref:Rr,shallow:Qr,deep:L,struct:kr},Ir=Xr;Object.keys(zr).forEach(function(g){return Ir[g]=zr[g]});function On(g){S("Expected one or two arguments to observable."+g+". Did you accidentally try to use observable."+g+" as decorator?")}var eo=He(!1,function(g,E,A,B,J){var pe=A.get,Xe=A.set,Et=J[0]||{};js(g).addComputedProp(g,E,Vt({get:pe,set:Xe,context:g},Et))}),In=eo({equals:Ke.structural}),to=function(E,A,B){if(typeof A=="string"||E!==null&&typeof E=="object"&&arguments.length===1)return eo.apply(null,arguments);var J=typeof A=="object"?A:{};return J.get=E,J.set=typeof A=="function"?A:J.set,J.name=J.name||E.name||"",new ci(J)};to.struct=In;var Qt;(function(g){g[g.NOT_TRACKING=-1]="NOT_TRACKING",g[g.UP_TO_DATE=0]="UP_TO_DATE",g[g.POSSIBLY_STALE=1]="POSSIBLY_STALE",g[g.STALE=2]="STALE"})(Qt||(Qt={}));var $r;(function(g){g[g.NONE=0]="NONE",g[g.LOG=1]="LOG",g[g.BREAK=2]="BREAK"})($r||($r={}));var Dn=function(){function g(E){this.cause=E}return g}();function Mt(g){return g instanceof Dn}function or(g){switch(g.dependenciesState){case Qt.UP_TO_DATE:return!1;case Qt.NOT_TRACKING:case Qt.STALE:return!0;case Qt.POSSIBLY_STALE:{for(var E=wt(!0),A=_e(),B=g.observing,J=B.length,pe=0;pe<J;pe++){var Xe=B[pe];if(di(Xe)){if(Wt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return ht(A),Kt(E),!0}if(g.dependenciesState===Qt.STALE)return ht(A),Kt(E),!0}}return Br(g),ht(A),Kt(E),!1}}}function vr(){return Wt.trackingDerivation!==null}function fr(g){var E=g.observers.size>0;Wt.computationDepth>0&&E&&S(!1),!Wt.allowStateChanges&&(E||Wt.enforceActions==="strict")&&S(!1)}function wr(g,E,A){var B=wt(!0);Br(g),g.newObserving=new Array(g.observing.length+100),g.unboundDepsCount=0,g.runId=++Wt.runId;var J=Wt.trackingDerivation;Wt.trackingDerivation=g;var pe;if(Wt.disableErrorBoundaries===!0)pe=E.call(A);else try{pe=E.call(A)}catch(Xe){pe=new Dn(Xe)}return Wt.trackingDerivation=J,re(g),Kt(B),pe}function re(g){for(var E=g.observing,A=g.observing=g.newObserving,B=Qt.UP_TO_DATE,J=0,pe=g.unboundDepsCount,Xe=0;Xe<pe;Xe++){var Et=A[Xe];Et.diffValue===0&&(Et.diffValue=1,J!==Xe&&(A[J]=Et),J++),Et.dependenciesState>B&&(B=Et.dependenciesState)}for(A.length=J,g.newObserving=null,pe=E.length;pe--;){var Et=E[pe];Et.diffValue===0&&Mo(Et,g),Et.diffValue=0}for(;J--;){var Et=A[J];Et.diffValue===1&&(Et.diffValue=0,Vl(Et,g))}B!==Qt.UP_TO_DATE&&(g.dependenciesState=B,g.onBecomeStale())}function Ee(g){var E=g.observing;g.observing=[];for(var A=E.length;A--;)Mo(E[A],g);g.dependenciesState=Qt.NOT_TRACKING}function we(g){var E=_e();try{return g()}finally{ht(E)}}function _e(){var g=Wt.trackingDerivation;return Wt.trackingDerivation=null,g}function ht(g){Wt.trackingDerivation=g}function wt(g){var E=Wt.allowStateReads;return Wt.allowStateReads=g,E}function Kt(g){Wt.allowStateReads=g}function Br(g){if(g.dependenciesState!==Qt.UP_TO_DATE){g.dependenciesState=Qt.UP_TO_DATE;for(var E=g.observing,A=E.length;A--;)E[A].lowestObserverState=Qt.UP_TO_DATE}}var Cn=0,Ln=1,Hi=Object.getOwnPropertyDescriptor(function(){},"name");Hi&&Hi.configurable;function No(g,E,A){var B=function(){return mu(g,E,A||this,arguments)};return B.isMobxAction=!0,B}function mu(g,E,A,B){var J=ro();try{return E.apply(A,B)}catch(pe){throw J.error=pe,pe}finally{As(J)}}function ro(g,E,A){var B=Zr(),J=0,pe=_e();Kr();var Xe=fi(!0),Et=wt(!0),Yt={prevDerivation:pe,prevAllowStateChanges:Xe,prevAllowStateReads:Et,notifySpy:B,startTime:J,actionId:Ln++,parentActionId:Cn};return Cn=Yt.actionId,Yt}function As(g){Cn!==g.actionId&&S("invalid action stack. did you forget to finish an action?"),Cn=g.parentActionId,g.error!==void 0&&(Wt.suppressReactionErrors=!0),Xi(g.prevAllowStateChanges),Kt(g.prevAllowStateReads),no(),ht(g.prevDerivation),g.notifySpy,Wt.suppressReactionErrors=!1}function jr(g,E){var A=fi(g),B;try{B=E()}finally{Xi(A)}return B}function fi(g){var E=Wt.allowStateChanges;return Wt.allowStateChanges=g,E}function Xi(g){Wt.allowStateChanges=g}var Vo=function(g){Nt(E,g);function E(A,B,J,pe,Xe){J===void 0&&(J="ObservableValue@"+y()),pe===void 0&&(pe=!0),Xe===void 0&&(Xe=Ke.default);var Et=g.call(this,J)||this;return Et.enhancer=B,Et.name=J,Et.equals=Xe,Et.hasUnreportedChange=!1,Et.value=B(A,void 0,J),pe&&Zr(),Et}return E.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},E.prototype.set=function(A){var B=this.value;if(A=this.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr();this.setNewValue(A)}},E.prototype.prepareNewValue=function(A){if(fr(this),Vn(this)){var B=vo(this,{object:this,type:"update",newValue:A});if(!B)return Wt.UNCHANGED;A=B.newValue}return A=this.enhancer(A,this.value,this.name),this.equals(this.value,A)?Wt.UNCHANGED:A},E.prototype.setNewValue=function(A){var B=this.value;this.value=A,this.reportChanged(),io(this)&&jn(this,{type:"update",object:this,newValue:A,oldValue:B})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(A){return Ki(this,A)},E.prototype.observe=function(A,B){return B&&A({object:this,type:"update",newValue:this.value,oldValue:void 0}),gi(this,A)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return U(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(te),$i=de("ObservableValue",Vo),ci=function(){function g(E){this.dependenciesState=Qt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+y(),this.value=new Dn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$r.NONE,x(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+y(),E.set&&(this.setter=No(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?Ke.structural:Ke.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return g.prototype.onBecomeStale=function(){Kl(this)},g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},g.prototype.get=function(){this.isComputing&&S("Cycle detected in computation "+this.name+": "+this.derivation),Wt.inBatch===0&&this.observers.size===0&&!this.keepAlive?or(this)&&(this.warnAboutUntrackedRead(),Kr(),this.value=this.computeValue(!1),no()):(Su(this),or(this)&&this.trackAndCompute()&&Yl(this));var E=this.value;if(Mt(E))throw E.cause;return E},g.prototype.peek=function(){var E=this.computeValue(!1);if(Mt(E))throw E.cause;return E},g.prototype.set=function(E){if(this.setter){x(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else x(!1,!1)},g.prototype.trackAndCompute=function(){var E=this.value,A=this.dependenciesState===Qt.NOT_TRACKING,B=this.computeValue(!0),J=A||Mt(E)||Mt(B)||!this.equals(E,B);return J&&(this.value=B),J},g.prototype.computeValue=function(E){this.isComputing=!0,Wt.computationDepth++;var A;if(E)A=wr(this,this.derivation,this.scope);else if(Wt.disableErrorBoundaries===!0)A=this.derivation.call(this.scope);else try{A=this.derivation.call(this.scope)}catch(B){A=new Dn(B)}return Wt.computationDepth--,this.isComputing=!1,A},g.prototype.suspend=function(){this.keepAlive||(Ee(this),this.value=void 0)},g.prototype.observe=function(E,A){var B=this,J=!0,pe=void 0;return co(function(){var Xe=B.get();if(!J||A){var Et=_e();E({type:"update",object:B,newValue:Xe,oldValue:pe}),ht(Et)}J=!1,pe=Xe})},g.prototype.warnAboutUntrackedRead=function(){},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},g.prototype.valueOf=function(){return U(this.get())},g.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},g}(),di=de("ComputedValue",ci),_a=function(){function g(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return g}(),$l={};function Na(){return typeof window<"u"?window:typeof c<"u"?c:typeof self<"u"?self:$l}var Ma=!0,bu=!1,Wt=function(){var g=Na();return g.__mobxInstanceCount>0&&!g.__mobxGlobals&&(Ma=!1),g.__mobxGlobals&&g.__mobxGlobals.version!==new _a().version&&(Ma=!1),Ma?g.__mobxGlobals?(g.__mobxInstanceCount+=1,g.__mobxGlobals.UNCHANGED||(g.__mobxGlobals.UNCHANGED={}),g.__mobxGlobals):(g.__mobxInstanceCount=1,g.__mobxGlobals=new _a):(setTimeout(function(){bu||S("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new _a)}();function Eu(){(Wt.pendingReactions.length||Wt.inBatch||Wt.isRunningReactions)&&S("isolateGlobalState should be called before MobX is running any reactions"),bu=!0,Ma&&(--Na().__mobxInstanceCount===0&&(Na().__mobxGlobals=void 0),Wt=new _a)}function Vl(g,E){g.observers.add(E),g.lowestObserverState>E.dependenciesState&&(g.lowestObserverState=E.dependenciesState)}function Mo(g,E){g.observers.delete(E),g.observers.size===0&&Ou(g)}function Ou(g){g.isPendingUnobservation===!1&&(g.isPendingUnobservation=!0,Wt.pendingUnobservations.push(g))}function Kr(){Wt.inBatch++}function no(){if(--Wt.inBatch===0){Vi();for(var g=Wt.pendingUnobservations,E=0;E<g.length;E++){var A=g[E];A.isPendingUnobservation=!1,A.observers.size===0&&(A.isBeingObserved&&(A.isBeingObserved=!1,A.onBecomeUnobserved()),A instanceof ci&&A.suspend())}Wt.pendingUnobservations=[]}}function Su(g){var E=Wt.trackingDerivation;return E!==null?(E.runId!==g.lastAccessedBy&&(g.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=g,g.isBeingObserved||(g.isBeingObserved=!0,g.onBecomeObserved())),!0):(g.observers.size===0&&Wt.inBatch>0&&Ou(g),!1)}function Wl(g){g.lowestObserverState!==Qt.STALE&&(g.lowestObserverState=Qt.STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.isTracing!==$r.NONE&&Ra(E,g),E.onBecomeStale()),E.dependenciesState=Qt.STALE}))}function Yl(g){g.lowestObserverState!==Qt.STALE&&(g.lowestObserverState=Qt.STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.POSSIBLY_STALE?E.dependenciesState=Qt.STALE:E.dependenciesState===Qt.UP_TO_DATE&&(g.lowestObserverState=Qt.UP_TO_DATE)}))}function Kl(g){g.lowestObserverState===Qt.UP_TO_DATE&&(g.lowestObserverState=Qt.POSSIBLY_STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.dependenciesState=Qt.POSSIBLY_STALE,E.isTracing!==$r.NONE&&Ra(E,g),E.onBecomeStale())}))}function Ra(g,E){if(console.log("[mobx.trace] '"+g.name+"' is invalidated due to a change in: '"+E.name+"'"),g.isTracing===$r.BREAK){var A=[];xu(Du(g),A,1),new Function(`debugger;
/*
Tracing '`+g.name+`'

You are entering this break point because derivation '`+g.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(g instanceof ci?g.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+A.join(`
`)+`
*/
    `)()}}function xu(g,E,A){if(E.length>=1e3){E.push("(and many more)");return}E.push(""+new Array(A).join("	")+g.name),g.dependencies&&g.dependencies.forEach(function(B){return xu(B,E,A+1)})}var Wo=function(){function g(E,A,B,J){E===void 0&&(E="Reaction@"+y()),J===void 0&&(J=!1),this.name=E,this.onInvalidate=A,this.errorHandler=B,this.requiresObservable=J,this.observing=[],this.newObserving=[],this.dependenciesState=Qt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+y(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$r.NONE}return g.prototype.onBecomeStale=function(){this.schedule()},g.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),Vi())},g.prototype.isScheduled=function(){return this._isScheduled},g.prototype.runReaction=function(){if(!this.isDisposed){if(Kr(),this._isScheduled=!1,or(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Zr()}catch(E){this.reportExceptionInDerivation(E)}}no()}},g.prototype.track=function(E){if(!this.isDisposed){Kr(),this._isRunning=!0;var A=wr(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Ee(this),Mt(A)&&this.reportExceptionInDerivation(A.cause),no()}},g.prototype.reportExceptionInDerivation=function(E){var A=this;if(this.errorHandler){this.errorHandler(E,this);return}if(Wt.disableErrorBoundaries)throw E;var B="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Wt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(B,E),Wt.globalReactionErrorHandlers.forEach(function(J){return J(E,A)})},g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Kr(),Ee(this),no()))},g.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[k]=this,E},g.prototype.toString=function(){return"Reaction["+this.name+"]"},g.prototype.trace=function(E){E===void 0&&(E=!1),vi(this,E)},g}(),Ps=100,ws=function(g){return g()};function Vi(){Wt.inBatch>0||Wt.isRunningReactions||ws(Tu)}function Tu(){Wt.isRunningReactions=!0;for(var g=Wt.pendingReactions,E=0;g.length>0;){++E===Ps&&(console.error("Reaction doesn't converge to a stable state after "+Ps+" iterations."+(" Probably there is a cycle in the reactive function: "+g[0])),g.splice(0));for(var A=g.splice(0),B=0,J=A.length;B<J;B++)A[B].runReaction()}Wt.isRunningReactions=!1}var Ia=de("Reaction",Wo);function Zl(g){var E=ws;ws=function(A){return g(function(){return E(A)})}}function Zr(){return!1}function Au(g){}function Jl(g){}function Pu(g){}function wu(g){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Ql(){S(!1)}function _u(g){return function(E,A,B){if(B){if(B.value)return{value:No(g,B.value),enumerable:!1,configurable:!0,writable:!0};var J=B.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return No(g,J.call(this))}}}return ql(g).apply(this,arguments)}}function ql(g){return function(E,A,B){Object.defineProperty(E,A,{configurable:!0,enumerable:!1,get:function(){},set:function(J){$(this,A,un(g,J))}})}}function oo(g,E,A,B){return B===!0?(_s(g,E,A.value),null):A?{configurable:!0,enumerable:!1,get:function(){return _s(this,E,A.value||A.initializer.call(this)),this[E]},set:Ql}:{enumerable:!1,configurable:!0,set:function(J){_s(this,E,J)},get:function(){}}}var un=function(E,A,B,J){if(arguments.length===1&&typeof E=="function")return No(E.name||"<unnamed action>",E);if(arguments.length===2&&typeof A=="function")return No(E,A);if(arguments.length===1&&typeof E=="string")return _u(E);if(J===!0)$(E,A,No(E.name||A,B.value,this));else return _u(A).apply(null,arguments)};un.bound=oo;function Da(g,E){var A=typeof g=="string"?g:g.name||"<unnamed action>",B=typeof g=="function"?g:E;return mu(A,B,this,void 0)}function ef(g){return typeof g=="function"&&g.isMobxAction===!0}function _s(g,E,A){$(g,E,No(E,A.bind(g)))}function co(g,E){E===void 0&&(E=m);var A=E&&E.name||g.name||"Autorun@"+y(),B=!E.scheduler&&!E.delay,J;if(B)J=new Wo(A,function(){this.track(Et)},E.onError,E.requiresObservable);else{var pe=hi(E),Xe=!1;J=new Wo(A,function(){Xe||(Xe=!0,pe(function(){Xe=!1,J.isDisposed||J.track(Et)}))},E.onError,E.requiresObservable)}function Et(){g(J)}return J.schedule(),J.getDisposer()}var Nu=function(g){return g()};function hi(g){return g.scheduler?g.scheduler:g.delay?function(E){return setTimeout(E,g.delay)}:Nu}function tf(g,E,A){A===void 0&&(A=m);var B=A.name||"Reaction@"+y(),J=un(B,A.onError?Yo(A.onError,E):E),pe=!A.scheduler&&!A.delay,Xe=hi(A),Et=!0,Yt=!1,Tr,_r=A.compareStructural?Ke.structural:A.equals||Ke.default,Ur=new Wo(B,function(){Et||pe?Hr():Yt||(Yt=!0,Xe(Hr))},A.onError,A.requiresObservable);function Hr(){if(Yt=!1,!Ur.isDisposed){var nn=!1;Ur.track(function(){var Sn=g(Ur);nn=Et||!_r(Tr,Sn),Tr=Sn}),Et&&A.fireImmediately&&J(Tr,Ur),!Et&&nn===!0&&J(Tr,Ur),Et&&(Et=!1)}}return Ur.schedule(),Ur.getDisposer()}function Yo(g,E){return function(){try{return E.apply(this,arguments)}catch(A){g.call(this,A)}}}function rf(g,E,A){return Mu("onBecomeObserved",g,E,A)}function Ns(g,E,A){return Mu("onBecomeUnobserved",g,E,A)}function Mu(g,E,A,B){var J=typeof B=="function"?Nn(E,A):Nn(E),pe=typeof B=="function"?B:A,Xe=g+"Listeners";J[Xe]?J[Xe].add(pe):J[Xe]=new Set([pe]);var Et=J[g];return typeof Et!="function"?S(!1):function(){var Yt=J[Xe];Yt&&(Yt.delete(pe),Yt.size===0&&delete J[Xe])}}function nf(g){var E=g.enforceActions,A=g.computedRequiresReaction,B=g.computedConfigurable,J=g.disableErrorBoundaries,pe=g.reactionScheduler,Xe=g.reactionRequiresObservable,Et=g.observableRequiresReaction;if(g.isolateGlobalState===!0&&Eu(),E!==void 0){var Yt=void 0;switch(E){case!0:case"observed":Yt=!0;break;case!1:case"never":Yt=!1;break;case"strict":case"always":Yt="strict";break;default:S("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}Wt.enforceActions=Yt,Wt.allowStateChanges=!(Yt===!0||Yt==="strict")}A!==void 0&&(Wt.computedRequiresReaction=!!A),Xe!==void 0&&(Wt.reactionRequiresObservable=!!Xe),Et!==void 0&&(Wt.observableRequiresReaction=!!Et,Wt.allowStateReads=!Wt.observableRequiresReaction),B!==void 0&&(Wt.computedConfigurable=!!B),J!==void 0&&(J===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Wt.disableErrorBoundaries=!!J),pe&&Zl(pe)}function Ms(g,E,A,B){B=Xt(B);var J=Ru(B);return tt(g),js(g,B.name,J.enhancer),E&&Iu(g,E,A,J),g}function Ru(g){return g.defaultDecorator||(g.deep===!1?Rr:L)}function Iu(g,E,A,B){var J,pe,Xe,Et;Kr();try{var Et=I(E);try{for(var Yt=Ct(Et),Tr=Yt.next();!Tr.done;Tr=Yt.next()){var Xe=Tr.value,_r=Object.getOwnPropertyDescriptor(E,Xe),Ur=A&&Xe in A?A[Xe]:_r.get?eo:B,Hr=Ur(g,Xe,_r,!0);Hr&&Object.defineProperty(g,Xe,Hr)}}catch(Sn){J={error:Sn}}finally{try{Tr&&!Tr.done&&(pe=Yt.return)&&pe.call(Yt)}finally{if(J)throw J.error}}}finally{no()}}function Du(g,E){return Ro(Nn(g,E))}function Ro(g){var E={name:g.name};return g.observing&&g.observing.length>0&&(E.dependencies=N(g.observing).map(Ro)),E}var of=0;function Cu(){this.message="FLOW_CANCELLED"}Cu.prototype=Object.create(Error.prototype);function Ca(g){arguments.length!==1&&S("Flow expects 1 argument and cannot be used as decorator");var E=g.name||"<unnamed flow>";return function(){var A=this,B=arguments,J=++of,pe=un(E+" - runid: "+J+" - init",g).apply(A,B),Xe,Et=void 0,Yt=new Promise(function(Tr,_r){var Ur=0;Xe=_r;function Hr(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,pe.next).call(pe,Vr)}catch(Jo){return _r(Jo)}Sn(Wn)}function nn(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,pe.throw).call(pe,Vr)}catch(Jo){return _r(Jo)}Sn(Wn)}function Sn(Vr){if(Vr&&typeof Vr.then=="function"){Vr.then(Sn,_r);return}return Vr.done?Tr(Vr.value):(Et=Promise.resolve(Vr.value),Et.then(Hr,nn))}Hr(void 0)});return Yt.cancel=un(E+" - runid: "+J+" - cancel",function(){try{Et&&La(Et);var Tr=pe.return(void 0),_r=Promise.resolve(Tr.value);_r.then(_,_),La(_r),Xe(new Cu)}catch(Ur){Xe(Ur)}}),Yt}}function La(g){typeof g.cancel=="function"&&g.cancel()}function Rs(g,E){if(g==null)return!1;if(E!==void 0){if(kn(g)===!1||!g[k].values.has(E))return!1;var A=Nn(g,E);return di(A)}return di(g)}function Lu(g){return arguments.length>1?S(!1):Rs(g)}function af(g,E){return typeof E!="string"?S(!1):Rs(g,E)}function Io(g,E){return g==null?!1:E!==void 0?kn(g)?g[k].values.has(E):!1:kn(g)||!!g[k]||V(g)||Ia(g)||di(g)}function Do(g){return arguments.length!==1&&S(!1),Io(g)}function Gn(g){return kn(g)?g[k].getKeys():dn(g)||Bn(g)?Array.from(g.keys()):ao(g)?g.map(function(E,A){return A}):S(!1)}function ja(g){return kn(g)?Gn(g).map(function(E){return g[E]}):dn(g)?Gn(g).map(function(E){return g.get(E)}):Bn(g)?Array.from(g.values()):ao(g)?g.slice():S(!1)}function ju(g){return kn(g)?Gn(g).map(function(E){return[E,g[E]]}):dn(g)?Gn(g).map(function(E){return[E,g.get(E)]}):Bn(g)?Array.from(g.entries()):ao(g)?g.map(function(E,A){return[A,E]}):S(!1)}function Is(g,E,A){if(arguments.length===2&&!Bn(g)){Kr();var B=E;try{for(var J in B)Is(g,J,B[J])}finally{no()}return}if(kn(g)){var pe=g[k],Xe=pe.values.get(E);Xe?pe.write(E,A):pe.addObservableProp(E,A,pe.defaultEnhancer)}else if(dn(g))g.set(E,A);else if(Bn(g))g.add(E);else if(ao(g))typeof E!="number"&&(E=parseInt(E,10)),x(E>=0,"Not a valid index: '"+E+"'"),Kr(),E>=g.length&&(g.length=E+1),g[E]=A,no();else return S(!1)}function sf(g,E,A,B){return typeof A=="function"?uf(g,E,A,B):Ba(g,E,A)}function Ba(g,E,A){return Zo(g).observe(E,A)}function uf(g,E,A,B){return Zo(g,E).observe(A,B)}var lf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function pi(g,E,A,B){return B.detectCycles&&g.set(E,A),A}function Co(g,E,A){if(!E.recurseEverything&&!Do(g)||typeof g!="object")return g;if(g===null)return null;if(g instanceof Date)return g;if($i(g))return Co(g.get(),E,A);Do(g)&&Gn(g);var B=E.detectCycles===!0;if(B&&g!==null&&A.has(g))return A.get(g);if(ao(g)||Array.isArray(g)){var J=pi(A,g,[],E),pe=g.map(function(nn){return Co(nn,E,A)});J.length=pe.length;for(var Xe=0,Et=pe.length;Xe<Et;Xe++)J[Xe]=pe[Xe];return J}if(Bn(g)||Object.getPrototypeOf(g)===Set.prototype)if(E.exportMapsAsObjects===!1){var Yt=pi(A,g,new Set,E);return g.forEach(function(nn){Yt.add(Co(nn,E,A))}),Yt}else{var Tr=pi(A,g,[],E);return g.forEach(function(nn){Tr.push(Co(nn,E,A))}),Tr}if(dn(g)||Object.getPrototypeOf(g)===Map.prototype)if(E.exportMapsAsObjects===!1){var _r=pi(A,g,new Map,E);return g.forEach(function(nn,Sn){_r.set(Sn,Co(nn,E,A))}),_r}else{var Ur=pi(A,g,{},E);return g.forEach(function(nn,Sn){Ur[Sn]=Co(nn,E,A)}),Ur}var Hr=pi(A,g,{},E);return j(g).forEach(function(nn){Hr[nn]=Co(g[nn],E,A)}),Hr}function ff(g,E){typeof E=="boolean"&&(E={detectCycles:E}),E||(E=lf),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0;var A;return E.detectCycles&&(A=new Map),Co(g,E,A)}function vi(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=!1;typeof g[g.length-1]=="boolean"&&(A=g.pop());var B=cf(g);if(!B)return S(!1);B.isTracing===$r.NONE&&console.log("[mobx.trace] '"+B.name+"' tracing enabled"),B.isTracing=A?$r.BREAK:$r.LOG}function cf(g){switch(g.length){case 0:return Wt.trackingDerivation;case 1:return Nn(g[0]);case 2:return Nn(g[0],g[1])}}function ho(g,E){E===void 0&&(E=void 0),Kr();try{return g.apply(E)}finally{no()}}function po(g,E,A){return arguments.length===1||E&&typeof E=="object"?yi(g,E):Wi(g,E,A||{})}function Wi(g,E,A){var B;typeof A.timeout=="number"&&(B=setTimeout(function(){if(!pe[k].isDisposed){pe();var Xe=new Error("WHEN_TIMEOUT");if(A.onError)A.onError(Xe);else throw Xe}},A.timeout)),A.name=A.name||"When@"+y();var J=No(A.name+"-effect",E),pe=co(function(Xe){g()&&(Xe.dispose(),B&&clearTimeout(B),J())},A);return pe}function yi(g,E){var A,B=new Promise(function(J,pe){var Xe=Wi(g,J,Vt(Vt({},E),{onError:pe}));A=function(){Xe(),pe("WHEN_CANCELLED")}});return B.cancel=A,B}function Yi(g){return g[k]}function xo(g){return typeof g=="string"||typeof g=="number"||typeof g=="symbol"}var Ko={has:function(g,E){if(E===k||E==="constructor"||E===Ut)return!0;var A=Yi(g);return xo(E)?A.has(E):E in g},get:function(g,E){if(E===k||E==="constructor"||E===Ut)return g[E];var A=Yi(g),B=A.values.get(E);if(B instanceof te){var J=B.get();return J===void 0&&A.has(E),J}return xo(E)&&A.has(E),g[E]},set:function(g,E,A){return xo(E)?(Is(g,E,A),!0):!1},deleteProperty:function(g,E){if(!xo(E))return!1;var A=Yi(g);return A.remove(E),!0},ownKeys:function(g){var E=Yi(g);return E.keysAtom.reportObserved(),Reflect.ownKeys(g)},preventExtensions:function(g){return S("Dynamic observable objects cannot be frozen"),!1}};function $n(g){var E=new Proxy(g,Ko);return g[k].proxy=E,E}function Vn(g){return g.interceptors!==void 0&&g.interceptors.length>0}function Ki(g,E){var A=g.interceptors||(g.interceptors=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function vo(g,E){var A=_e();try{for(var B=bt(g.interceptors||[]),J=0,pe=B.length;J<pe&&(E=B[J](E),x(!E||E.type,"Intercept handlers should return nothing or a change object"),!!E);J++);return E}finally{ht(A)}}function io(g){return g.changeListeners!==void 0&&g.changeListeners.length>0}function gi(g,E){var A=g.changeListeners||(g.changeListeners=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function jn(g,E){var A=_e(),B=g.changeListeners;if(B){B=B.slice();for(var J=0,pe=B.length;J<pe;J++)B[J](E);ht(A)}}var df=1e4,Bu={get:function(g,E){return E===k?g[k]:E==="length"?g[k].getArrayLength():typeof E=="number"?To.get.call(g,E):typeof E=="string"&&!isNaN(E)?To.get.call(g,parseInt(E)):To.hasOwnProperty(E)?To[E]:g[E]},set:function(g,E,A){return E==="length"&&g[k].setArrayLength(A),typeof E=="number"&&To.set.call(g,E,A),typeof E=="symbol"||isNaN(E)?g[E]=A:To.set.call(g,parseInt(E),A),!0},preventExtensions:function(g){return S("Observable arrays cannot be frozen"),!1}};function qr(g,E,A,B){A===void 0&&(A="ObservableArray@"+y()),B===void 0&&(B=!1);var J=new Ds(A,E,B);Oe(J.values,k,J);var pe=new Proxy(J.values,Bu);if(J.proxy=pe,g&&g.length){var Xe=fi(!0);J.spliceWithArray(0,0,g),Xi(Xe)}return pe}var Ds=function(){function g(E,A,B){this.owned=B,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new te(E||"ObservableArray@"+y()),this.enhancer=function(J,pe){return A(J,pe,E+"[..]")}}return g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.observe=function(E,A){return A===void 0&&(A=!1),A&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),gi(this,E)},g.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},g.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var A=this.values.length;if(E!==A)if(E>A){for(var B=new Array(E-A),J=0;J<E-A;J++)B[J]=void 0;this.spliceWithArray(A,0,B)}else this.spliceWithArray(E,A-E)},g.prototype.updateArrayLength=function(E,A){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=A},g.prototype.spliceWithArray=function(E,A,B){var J=this;fr(this.atom);var pe=this.values.length;if(E===void 0?E=0:E>pe?E=pe:E<0&&(E=Math.max(0,pe+E)),arguments.length===1?A=pe-E:A==null?A=0:A=Math.max(0,Math.min(A,pe-E)),B===void 0&&(B=p),Vn(this)){var Xe=vo(this,{object:this.proxy,type:"splice",index:E,removedCount:A,added:B});if(!Xe)return p;A=Xe.removedCount,B=Xe.added}B=B.length===0?B:B.map(function(Yt){return J.enhancer(Yt,void 0)});var Et=this.spliceItemsIntoValues(E,A,B);return(A!==0||B.length!==0)&&this.notifyArraySplice(E,B,Et),this.dehanceValues(Et)},g.prototype.spliceItemsIntoValues=function(E,A,B){var J;if(B.length<df)return(J=this.values).splice.apply(J,bt([E,A],B));var pe=this.values.slice(E,E+A);return this.values=this.values.slice(0,E).concat(B,this.values.slice(E+A)),pe},g.prototype.notifyArrayChildUpdate=function(E,A,B){var J=!this.owned&&Zr(),pe=io(this),Xe=pe||J?{object:this.proxy,type:"update",index:E,newValue:A,oldValue:B}:null;this.atom.reportChanged(),pe&&jn(this,Xe)},g.prototype.notifyArraySplice=function(E,A,B){var J=!this.owned&&Zr(),pe=io(this),Xe=pe||J?{object:this.proxy,type:"splice",index:E,removed:B,added:A,removedCount:B.length,addedCount:A.length}:null;this.atom.reportChanged(),pe&&jn(this,Xe)},g}(),To={intercept:function(g){return this[k].intercept(g)},observe:function(g,E){E===void 0&&(E=!1);var A=this[k];return A.observe(g,E)},clear:function(){return this.splice(0)},replace:function(g){var E=this[k];return E.spliceWithArray(0,E.values.length,g)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(g,E){for(var A=[],B=2;B<arguments.length;B++)A[B-2]=arguments[B];var J=this[k];switch(arguments.length){case 0:return[];case 1:return J.spliceWithArray(g);case 2:return J.spliceWithArray(g,E)}return J.spliceWithArray(g,E,A)},spliceWithArray:function(g,E,A){var B=this[k];return B.spliceWithArray(g,E,A)},push:function(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=this[k];return A.spliceWithArray(A.values.length,0,g),A.values.length},pop:function(){return this.splice(Math.max(this[k].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=this[k];return A.spliceWithArray(0,0,g),A.values.length},reverse:function(){var g=this.slice();return g.reverse.apply(g,arguments)},sort:function(g){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(g){var E=this[k],A=E.dehanceValues(E.values).indexOf(g);return A>-1?(this.splice(A,1),!0):!1},get:function(g){var E=this[k];if(E){if(g<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[g]);console.warn("[mobx.array] Attempt to read an array index ("+g+") that is out of bounds ("+E.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(g,E){var A=this[k],B=A.values;if(g<B.length){fr(A.atom);var J=B[g];if(Vn(A)){var pe=vo(A,{type:"update",object:A.proxy,index:g,newValue:E});if(!pe)return;E=pe.newValue}E=A.enhancer(E,J);var Xe=E!==J;Xe&&(B[g]=E,A.notifyArrayChildUpdate(g,E,J))}else if(g===B.length)A.spliceWithArray(g,0,[E]);else throw new Error("[mobx.array] Index out of bounds, "+g+" is larger than "+B.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(g){typeof Array.prototype[g]=="function"&&(To[g]=function(){var E=this[k];E.atom.reportObserved();var A=E.dehanceValues(E.values);return A[g].apply(A,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(g){typeof Array.prototype[g]=="function"&&(To[g]=function(E,A){var B=this,J=this[k];J.atom.reportObserved();var pe=J.dehanceValues(J.values);return pe[g](function(Xe,Et){return E.call(A,Xe,Et,B)},A)})}),["reduce","reduceRight"].forEach(function(g){To[g]=function(){var E=this,A=this[k];A.atom.reportObserved();var B=arguments[0];return arguments[0]=function(J,pe,Xe){return pe=A.dehanceValue(pe),B(J,pe,Xe,E)},A.values[g].apply(A.values,arguments)}});var yo=de("ObservableArrayAdministration",Ds);function ao(g){return M(g)&&yo(g[k])}var Zi,Lo={},Ji=function(){function g(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableMap@"+y()),this.enhancer=A,this.name=B,this[Zi]=Lo,this._keysAtom=Z(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return g.prototype._has=function(E){return this._data.has(E)},g.prototype.has=function(E){var A=this;if(!Wt.trackingDerivation)return this._has(E);var B=this._hasMap.get(E);if(!B){var J=B=new Vo(this._has(E),Jt,this.name+"."+Q(E)+"?",!1);this._hasMap.set(E,J),Ns(J,function(){return A._hasMap.delete(E)})}return B.get()},g.prototype.set=function(E,A){var B=this._has(E);if(Vn(this)){var J=vo(this,{type:B?"update":"add",object:this,newValue:A,name:E});if(!J)return this;A=J.newValue}return B?this._updateValue(E,A):this._addValue(E,A),this},g.prototype.delete=function(E){var A=this;if(fr(this._keysAtom),Vn(this)){var B=vo(this,{type:"delete",object:this,name:E});if(!B)return!1}if(this._has(E)){var J=Zr(),pe=io(this),B=pe||J?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return ho(function(){A._keysAtom.reportChanged(),A._updateHasMapEntry(E,!1);var Et=A._data.get(E);Et.setNewValue(void 0),A._data.delete(E)}),pe&&jn(this,B),!0}return!1},g.prototype._updateHasMapEntry=function(E,A){var B=this._hasMap.get(E);B&&B.setNewValue(A)},g.prototype._updateValue=function(E,A){var B=this._data.get(E);if(A=B.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr(),pe=io(this),Xe=pe||J?{type:"update",object:this,oldValue:B.value,name:E,newValue:A}:null;B.setNewValue(A),pe&&jn(this,Xe)}},g.prototype._addValue=function(E,A){var B=this;fr(this._keysAtom),ho(function(){var Et=new Vo(A,B.enhancer,B.name+"."+Q(E),!1);B._data.set(E,Et),A=Et.value,B._updateHasMapEntry(E,!0),B._keysAtom.reportChanged()});var J=Zr(),pe=io(this),Xe=pe||J?{type:"add",object:this,name:E,newValue:A}:null;pe&&jn(this,Xe)},g.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},g.prototype.values=function(){var E=this,A=this.keys();return Qi({next:function(){var B=A.next(),J=B.done,pe=B.value;return{done:J,value:J?void 0:E.get(pe)}}})},g.prototype.entries=function(){var E=this,A=this.keys();return Qi({next:function(){var B=A.next(),J=B.done,pe=B.value;return{done:J,value:J?void 0:[pe,E.get(pe)]}}})},g.prototype[Zi=k,Symbol.iterator]=function(){return this.entries()},g.prototype.forEach=function(E,A){var B,J;try{for(var pe=Ct(this),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Ge(Xe.value,2),Yt=Et[0],Tr=Et[1];E.call(A,Tr,Yt,this)}}catch(_r){B={error:_r}}finally{try{Xe&&!Xe.done&&(J=pe.return)&&J.call(pe)}finally{if(B)throw B.error}}},g.prototype.merge=function(E){var A=this;return dn(E)&&(E=E.toJS()),ho(function(){var B=fi(!0);try{D(E)?j(E).forEach(function(J){return A.set(J,E[J])}):Array.isArray(E)?E.forEach(function(J){var pe=Ge(J,2),Xe=pe[0],Et=pe[1];return A.set(Xe,Et)}):ce(E)?(E.constructor!==Map&&S("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(J,pe){return A.set(pe,J)})):E!=null&&S("Cannot initialize map from "+E)}finally{Xi(B)}}),this},g.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E.keys()),pe=J.next();!pe.done;pe=J.next()){var Xe=pe.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{pe&&!pe.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},g.prototype.replace=function(E){var A=this;return ho(function(){var B,J,pe,Xe,Et=W(E),Yt=new Map,Tr=!1;try{for(var _r=Ct(A._data.keys()),Ur=_r.next();!Ur.done;Ur=_r.next()){var Hr=Ur.value;if(!Et.has(Hr)){var nn=A.delete(Hr);if(nn)Tr=!0;else{var Sn=A._data.get(Hr);Yt.set(Hr,Sn)}}}}catch(Qo){B={error:Qo}}finally{try{Ur&&!Ur.done&&(J=_r.return)&&J.call(_r)}finally{if(B)throw B.error}}try{for(var Vr=Ct(Et.entries()),Wn=Vr.next();!Wn.done;Wn=Vr.next()){var Jo=Ge(Wn.value,2),Hr=Jo[0],Sn=Jo[1],Ha=A._data.has(Hr);if(A.set(Hr,Sn),A._data.has(Hr)){var Uu=A._data.get(Hr);Yt.set(Hr,Uu),Ha||(Tr=!0)}}}catch(Qo){pe={error:Qo}}finally{try{Wn&&!Wn.done&&(Xe=Vr.return)&&Xe.call(Vr)}finally{if(pe)throw pe.error}}if(!Tr)if(A._data.size!==Yt.size)A._keysAtom.reportChanged();else for(var qi=A._data.keys(),zu=Yt.keys(),Us=qi.next(),Oi=zu.next();!Us.done;){if(Us.value!==Oi.value){A._keysAtom.reportChanged();break}Us=qi.next(),Oi=zu.next()}A._data=Yt}),this},Object.defineProperty(g.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.toPOJO=function(){var E,A,B={};try{for(var J=Ct(this),pe=J.next();!pe.done;pe=J.next()){var Xe=Ge(pe.value,2),Et=Xe[0],Yt=Xe[1];B[typeof Et=="symbol"?Et:Q(Et)]=Yt}}catch(Tr){E={error:Tr}}finally{try{pe&&!pe.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},g.prototype.toJS=function(){return new Map(this)},g.prototype.toJSON=function(){return this.toPOJO()},g.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(A){return Q(A)+": "+(""+E.get(A))}).join(", ")+" }]"},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g}(),dn=de("ObservableMap",Ji),mi,Fa={},Cs=function(){function g(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableSet@"+y()),this.name=B,this[mi]=Fa,this._data=new Set,this._atom=Z(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(J,pe){return A(J,pe,B)},E&&this.replace(E)}return g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E._data.values()),pe=J.next();!pe.done;pe=J.next()){var Xe=pe.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{pe&&!pe.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},g.prototype.forEach=function(E,A){var B,J;try{for(var pe=Ct(this),Xe=pe.next();!Xe.done;Xe=pe.next()){var Et=Xe.value;E.call(A,Et,Et,this)}}catch(Yt){B={error:Yt}}finally{try{Xe&&!Xe.done&&(J=pe.return)&&J.call(pe)}finally{if(B)throw B.error}}},Object.defineProperty(g.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.add=function(E){var A=this;if(fr(this._atom),Vn(this)){var B=vo(this,{type:"add",object:this,newValue:E});if(!B)return this}if(!this.has(E)){ho(function(){A._data.add(A.enhancer(E,void 0)),A._atom.reportChanged()});var J=Zr(),pe=io(this),B=pe||J?{type:"add",object:this,newValue:E}:null;pe&&jn(this,B)}return this},g.prototype.delete=function(E){var A=this;if(Vn(this)){var B=vo(this,{type:"delete",object:this,oldValue:E});if(!B)return!1}if(this.has(E)){var J=Zr(),pe=io(this),B=pe||J?{type:"delete",object:this,oldValue:E}:null;return ho(function(){A._atom.reportChanged(),A._data.delete(E)}),pe&&jn(this,B),!0}return!1},g.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},g.prototype.entries=function(){var E=0,A=Array.from(this.keys()),B=Array.from(this.values());return Qi({next:function(){var J=E;return E+=1,J<B.length?{value:[A[J],B[J]],done:!1}:{done:!0}}})},g.prototype.keys=function(){return this.values()},g.prototype.values=function(){this._atom.reportObserved();var E=this,A=0,B=Array.from(this._data.values());return Qi({next:function(){return A<B.length?{value:E.dehanceValue(B[A++]),done:!1}:{done:!0}}})},g.prototype.replace=function(E){var A=this;return Bn(E)&&(E=E.toJS()),ho(function(){var B=fi(!0);try{Array.isArray(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):Me(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):E!=null&&S("Cannot initialize set from "+E)}finally{Xi(B)}}),this},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.toJS=function(){return new Set(this)},g.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},g.prototype[mi=k,Symbol.iterator]=function(){return this.values()},g}(),Bn=de("ObservableSet",Cs),Ls=function(){function g(E,A,B,J){A===void 0&&(A=new Map),this.target=E,this.values=A,this.name=B,this.defaultEnhancer=J,this.keysAtom=new te(B+".keys")}return g.prototype.read=function(E){return this.values.get(E).get()},g.prototype.write=function(E,A){var B=this.target,J=this.values.get(E);if(J instanceof ci){J.set(A);return}if(Vn(this)){var pe=vo(this,{type:"update",object:this.proxy||B,name:E,newValue:A});if(!pe)return;A=pe.newValue}if(A=J.prepareNewValue(A),A!==Wt.UNCHANGED){var Xe=io(this),Et=Zr(),pe=Xe||Et?{type:"update",object:this.proxy||B,oldValue:J.value,name:E,newValue:A}:null;J.setNewValue(A),Xe&&jn(this,pe)}},g.prototype.has=function(E){var A=this.pendingKeys||(this.pendingKeys=new Map),B=A.get(E);if(B)return B.get();var J=!!this.values.get(E);return B=new Vo(J,Jt,this.name+"."+Q(E)+"?",!1),A.set(E,B),B.get()},g.prototype.addObservableProp=function(E,A,B){B===void 0&&(B=this.defaultEnhancer);var J=this.target;if(Vn(this)){var pe=vo(this,{object:this.proxy||J,name:E,type:"add",newValue:A});if(!pe)return;A=pe.newValue}var Xe=new Vo(A,B,this.name+"."+Q(E),!1);this.values.set(E,Xe),A=Xe.value,Object.defineProperty(J,E,hf(E)),this.notifyPropertyAddition(E,A)},g.prototype.addComputedProp=function(E,A,B){var J=this.target;B.name=B.name||this.name+"."+Q(A),this.values.set(A,new ci(B)),(E===J||ge(E,A))&&Object.defineProperty(E,A,ka(A))},g.prototype.remove=function(E){if(this.values.has(E)){var A=this.target;if(Vn(this)){var B=vo(this,{object:this.proxy||A,name:E,type:"remove"});if(!B)return}try{Kr();var J=io(this),pe=Zr(),Xe=this.values.get(E),Et=Xe&&Xe.get();if(Xe&&Xe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var Yt=this.pendingKeys.get(E);Yt&&Yt.set(!1)}delete this.target[E];var B=J||pe?{type:"remove",object:this.proxy||A,oldValue:Et,name:E}:null;J&&jn(this,B)}finally{no()}}},g.prototype.illegalAccess=function(E,A){console.warn("Property '"+A+"' of '"+E+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.notifyPropertyAddition=function(E,A){var B=io(this),J=Zr(),pe=B||J?{type:"add",object:this.proxy||this.target,name:E,newValue:A}:null;if(B&&jn(this,pe),this.pendingKeys){var Xe=this.pendingKeys.get(E);Xe&&Xe.set(!0)}this.keysAtom.reportChanged()},g.prototype.getKeys=function(){var E,A;this.keysAtom.reportObserved();var B=[];try{for(var J=Ct(this.values),pe=J.next();!pe.done;pe=J.next()){var Xe=Ge(pe.value,2),Et=Xe[0],Yt=Xe[1];Yt instanceof Vo&&B.push(Et)}}catch(Tr){E={error:Tr}}finally{try{pe&&!pe.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},g}();function js(g,E,A){if(E===void 0&&(E=""),A===void 0&&(A=nr),Object.prototype.hasOwnProperty.call(g,k))return g[k];D(g)||(E=(g.constructor.name||"ObservableObject")+"@"+y()),E||(E="ObservableObject@"+y());var B=new Ls(g,new Map,Q(E),A);return $(g,k,B),B}var Fu=Object.create(null),Gu=Object.create(null);function hf(g){return Fu[g]||(Fu[g]={configurable:!0,enumerable:!0,get:function(){return this[k].read(g)},set:function(E){this[k].write(g,E)}})}function Ga(g){var E=g[k];return E||(tt(g),g[k])}function ka(g){return Gu[g]||(Gu[g]={configurable:Wt.computedConfigurable,enumerable:!1,get:function(){return Ga(this).read(g)},set:function(E){Ga(this).write(g,E)}})}var Bs=de("ObservableObjectAdministration",Ls);function kn(g){return M(g)?(tt(g),Bs(g[k])):!1}function Nn(g,E){if(typeof g=="object"&&g!==null){if(ao(g))return E!==void 0&&S(!1),g[k].atom;if(Bn(g))return g[k];if(dn(g)){var A=g;if(E===void 0)return A._keysAtom;var B=A._data.get(E)||A._hasMap.get(E);return B||S(!1),B}if(tt(g),E&&!g[k]&&g[E],kn(g)){if(!E)return S(!1);var B=g[k].values.get(E);return B||S(!1),B}if(V(g)||di(g)||Ia(g))return g}else if(typeof g=="function"&&Ia(g[k]))return g[k];return S(!1)}function Zo(g,E){if(g||S("Expecting some object"),E!==void 0)return Zo(Nn(g,E));if(V(g)||di(g)||Ia(g)||dn(g)||Bn(g))return g;if(tt(g),g[k])return g[k];S(!1)}function Fs(g,E){var A;return E!==void 0?A=Nn(g,E):kn(g)||dn(g)||Bn(g)?A=Zo(g):A=Nn(g),A.name}var Ua=Object.prototype.toString;function bi(g,E,A){return A===void 0&&(A=-1),Ei(g,E,A)}function Ei(g,E,A,B,J){if(g===E)return g!==0||1/g===1/E;if(g==null||E==null)return!1;if(g!==g)return E!==E;var pe=typeof g;if(pe!=="function"&&pe!=="object"&&typeof E!="object")return!1;var Xe=Ua.call(g);if(Xe!==Ua.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+g==""+E;case"[object Number]":return+g!=+g?+E!=+E:+g==0?1/+g===1/E:+g==+E;case"[object Date]":case"[object Boolean]":return+g==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(g)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":A>=0&&A++;break}g=Gs(g),E=Gs(E);var Et=Xe==="[object Array]";if(!Et){if(typeof g!="object"||typeof E!="object")return!1;var Yt=g.constructor,Tr=E.constructor;if(Yt!==Tr&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Tr=="function"&&Tr instanceof Tr)&&"constructor"in g&&"constructor"in E)return!1}if(A===0)return!1;A<0&&(A=-1),B=B||[],J=J||[];for(var _r=B.length;_r--;)if(B[_r]===g)return J[_r]===E;if(B.push(g),J.push(E),Et){if(_r=g.length,_r!==E.length)return!1;for(;_r--;)if(!Ei(g[_r],E[_r],A-1,B,J))return!1}else{var Ur=Object.keys(g),Hr=void 0;if(_r=Ur.length,Object.keys(E).length!==_r)return!1;for(;_r--;)if(Hr=Ur[_r],!(ku(E,Hr)&&Ei(g[Hr],E[Hr],A-1,B,J)))return!1}return B.pop(),J.pop(),!0}function Gs(g){return ao(g)?g.slice():ce(g)||dn(g)||Me(g)||Bn(g)?Array.from(g.entries()):g}function ku(g,E){return Object.prototype.hasOwnProperty.call(g,E)}function Qi(g){return g[Symbol.iterator]=za,g}function za(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");try{}catch{var ks=Na();typeof l>"u"&&(ks.process={}),ks.process.env={}}(function(){function g(){}if(g.name!=="testCodeMinification"&&!1)var E})(),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wu,extras:{getDebugName:Fs},$mobx:k})}).call(this,o(155),o(82))},function(i,u,o){o.d(u,"a",function(){return ge}),o.d(u,"b",function(){return Oe}),o.d(u,"c",function(){return bt}),o.d(u,"d",function(){return Ut}),o.d(u,"e",function(){return D}),o.d(u,"f",function(){return $}),o.d(u,"g",function(){return D}),o.d(u,"h",function(){return Ge}),o.d(u,"i",function(){return c}),o.d(u,"j",function(){return Ct}),o.d(u,"k",function(){return I});var l,c,h,p,m,y,S,x={},T=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(ee,se){for(var me in se)ee[me]=se[me];return ee}function M(ee){var se=ee.parentNode;se&&se.removeChild(ee)}function D(ee,se,me){var Ue,tt,He,Lt={};for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];if(arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):me),typeof ee=="function"&&ee.defaultProps!=null)for(He in ee.defaultProps)Lt[He]===void 0&&(Lt[He]=ee.defaultProps[He]);return W(ee,Lt,Ue,tt,null)}function W(ee,se,me,Ue,tt){var He={type:ee,props:se,key:me,ref:Ue,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:tt??++h};return tt==null&&c.vnode!=null&&c.vnode(He),He}function $(){return{current:null}}function Oe(ee){return ee.children}function ge(ee,se){this.props=ee,this.context=se}function de(ee,se){if(se==null)return ee.__?de(ee.__,ee.__.__k.indexOf(ee)+1):null;for(var me;se<ee.__k.length;se++)if((me=ee.__k[se])!=null&&me.__e!=null)return me.__e;return typeof ee.type=="function"?de(ee):null}function ce(ee){var se,me;if((ee=ee.__)!=null&&ee.__c!=null){for(ee.__e=ee.__c.base=null,se=0;se<ee.__k.length;se++)if((me=ee.__k[se])!=null&&me.__e!=null){ee.__e=ee.__c.base=me.__e;break}return ce(ee)}}function Me(ee){(!ee.__d&&(ee.__d=!0)&&p.push(ee)&&!j.__r++||y!==c.debounceRendering)&&((y=c.debounceRendering)||m)(j)}function j(){for(var ee;j.__r=p.length;)ee=p.sort(function(se,me){return se.__v.__b-me.__v.__b}),p=[],ee.some(function(se){var me,Ue,tt,He,Lt,nr;se.__d&&(Lt=(He=(me=se).__v).__e,(nr=me.__P)&&(Ue=[],(tt=N({},He)).__v=He.__v+1,Re(nr,He,tt,me.__n,nr.ownerSVGElement!==void 0,He.__h!=null?[Lt]:null,Ue,Lt??de(He),He.__h),Pe(Ue,He),He.__e!=Lt&&ce(He)))})}function Q(ee,se,me,Ue,tt,He,Lt,nr,tr,Jt){var rt,Er,ur,Xt,L,Qr,Rr,kr=Ue&&Ue.__k||T,Be=kr.length;for(me.__k=[],rt=0;rt<se.length;rt++)if((Xt=me.__k[rt]=(Xt=se[rt])==null||typeof Xt=="boolean"?null:typeof Xt=="string"||typeof Xt=="number"||typeof Xt=="bigint"?W(null,Xt,null,null,Xt):Array.isArray(Xt)?W(Oe,{children:Xt},null,null,null):Xt.__b>0?W(Xt.type,Xt.props,Xt.key,null,Xt.__v):Xt)!=null){if(Xt.__=me,Xt.__b=me.__b+1,(ur=kr[rt])===null||ur&&Xt.key==ur.key&&Xt.type===ur.type)kr[rt]=void 0;else for(Er=0;Er<Be;Er++){if((ur=kr[Er])&&Xt.key==ur.key&&Xt.type===ur.type){kr[Er]=void 0;break}ur=null}Re(ee,Xt,ur=ur||x,tt,He,Lt,nr,tr,Jt),L=Xt.__e,(Er=Xt.ref)&&ur.ref!=Er&&(Rr||(Rr=[]),ur.ref&&Rr.push(ur.ref,null,Xt),Rr.push(Er,Xt.__c||L,Xt)),L!=null?(Qr==null&&(Qr=L),typeof Xt.type=="function"&&Xt.__k===ur.__k?Xt.__d=tr=U(Xt,tr,ee):tr=k(ee,Xt,ur,kr,L,tr),typeof me.type=="function"&&(me.__d=tr)):tr&&ur.__e==tr&&tr.parentNode!=ee&&(tr=de(ur))}for(me.__e=Qr,rt=Be;rt--;)kr[rt]!=null&&(typeof me.type=="function"&&kr[rt].__e!=null&&kr[rt].__e==me.__d&&(me.__d=de(Ue,rt+1)),Nt(kr[rt],kr[rt]));if(Rr)for(rt=0;rt<Rr.length;rt++)gt(Rr[rt],Rr[++rt],Rr[++rt])}function U(ee,se,me){for(var Ue,tt=ee.__k,He=0;tt&&He<tt.length;He++)(Ue=tt[He])&&(Ue.__=ee,se=typeof Ue.type=="function"?U(Ue,se,me):k(me,Ue,Ue,tt,Ue.__e,se));return se}function I(ee,se){return se=se||[],ee==null||typeof ee=="boolean"||(Array.isArray(ee)?ee.some(function(me){I(me,se)}):se.push(ee)),se}function k(ee,se,me,Ue,tt,He){var Lt,nr,tr;if(se.__d!==void 0)Lt=se.__d,se.__d=void 0;else if(me==null||tt!=He||tt.parentNode==null)e:if(He==null||He.parentNode!==ee)ee.appendChild(tt),Lt=null;else{for(nr=He,tr=0;(nr=nr.nextSibling)&&tr<Ue.length;tr+=2)if(nr==tt)break e;ee.insertBefore(tt,He),Lt=He}return Lt!==void 0?Lt:tt.nextSibling}function te(ee,se,me,Ue,tt){var He;for(He in me)He==="children"||He==="key"||He in se||Z(ee,He,null,me[He],Ue);for(He in se)tt&&typeof se[He]!="function"||He==="children"||He==="key"||He==="value"||He==="checked"||me[He]===se[He]||Z(ee,He,se[He],me[He],Ue)}function V(ee,se,me){se[0]==="-"?ee.setProperty(se,me):ee[se]=me==null?"":typeof me!="number"||_.test(se)?me:me+"px"}function Z(ee,se,me,Ue,tt){var He;e:if(se==="style")if(typeof me=="string")ee.style.cssText=me;else{if(typeof Ue=="string"&&(ee.style.cssText=Ue=""),Ue)for(se in Ue)me&&se in me||V(ee.style,se,"");if(me)for(se in me)Ue&&me[se]===Ue[se]||V(ee.style,se,me[se])}else if(se[0]==="o"&&se[1]==="n")He=se!==(se=se.replace(/Capture$/,"")),se=se.toLowerCase()in ee?se.toLowerCase().slice(2):se.slice(2),ee.l||(ee.l={}),ee.l[se+He]=me,me?Ue||ee.addEventListener(se,He?Te:le,He):ee.removeEventListener(se,He?Te:le,He);else if(se!=="dangerouslySetInnerHTML"){if(tt)se=se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(se!=="href"&&se!=="list"&&se!=="form"&&se!=="tabIndex"&&se!=="download"&&se in ee)try{ee[se]=me??"";break e}catch{}typeof me=="function"||(me!=null&&(me!==!1||se[0]==="a"&&se[1]==="r")?ee.setAttribute(se,me):ee.removeAttribute(se))}}function le(ee){this.l[ee.type+!1](c.event?c.event(ee):ee)}function Te(ee){this.l[ee.type+!0](c.event?c.event(ee):ee)}function Re(ee,se,me,Ue,tt,He,Lt,nr,tr){var Jt,rt,Er,ur,Xt,L,Qr,Rr,kr,Be,Xr,zr=se.type;if(se.constructor!==void 0)return null;me.__h!=null&&(tr=me.__h,nr=se.__e=me.__e,se.__h=null,He=[nr]),(Jt=c.__b)&&Jt(se);try{e:if(typeof zr=="function"){if(Rr=se.props,kr=(Jt=zr.contextType)&&Ue[Jt.__c],Be=Jt?kr?kr.props.value:Jt.__:Ue,me.__c?Qr=(rt=se.__c=me.__c).__=rt.__E:("prototype"in zr&&zr.prototype.render?se.__c=rt=new zr(Rr,Be):(se.__c=rt=new ge(Rr,Be),rt.constructor=zr,rt.render=Vt),kr&&kr.sub(rt),rt.props=Rr,rt.state||(rt.state={}),rt.context=Be,rt.__n=Ue,Er=rt.__d=!0,rt.__h=[]),rt.__s==null&&(rt.__s=rt.state),zr.getDerivedStateFromProps!=null&&(rt.__s==rt.state&&(rt.__s=N({},rt.__s)),N(rt.__s,zr.getDerivedStateFromProps(Rr,rt.__s))),ur=rt.props,Xt=rt.state,Er)zr.getDerivedStateFromProps==null&&rt.componentWillMount!=null&&rt.componentWillMount(),rt.componentDidMount!=null&&rt.__h.push(rt.componentDidMount);else{if(zr.getDerivedStateFromProps==null&&Rr!==ur&&rt.componentWillReceiveProps!=null&&rt.componentWillReceiveProps(Rr,Be),!rt.__e&&rt.shouldComponentUpdate!=null&&rt.shouldComponentUpdate(Rr,rt.__s,Be)===!1||se.__v===me.__v){rt.props=Rr,rt.state=rt.__s,se.__v!==me.__v&&(rt.__d=!1),rt.__v=se,se.__e=me.__e,se.__k=me.__k,se.__k.forEach(function(Ir){Ir&&(Ir.__=se)}),rt.__h.length&&Lt.push(rt);break e}rt.componentWillUpdate!=null&&rt.componentWillUpdate(Rr,rt.__s,Be),rt.componentDidUpdate!=null&&rt.__h.push(function(){rt.componentDidUpdate(ur,Xt,L)})}rt.context=Be,rt.props=Rr,rt.state=rt.__s,(Jt=c.__r)&&Jt(se),rt.__d=!1,rt.__v=se,rt.__P=ee,Jt=rt.render(rt.props,rt.state,rt.context),rt.state=rt.__s,rt.getChildContext!=null&&(Ue=N(N({},Ue),rt.getChildContext())),Er||rt.getSnapshotBeforeUpdate==null||(L=rt.getSnapshotBeforeUpdate(ur,Xt)),Xr=Jt!=null&&Jt.type===Oe&&Jt.key==null?Jt.props.children:Jt,Q(ee,Array.isArray(Xr)?Xr:[Xr],se,me,Ue,tt,He,Lt,nr,tr),rt.base=se.__e,se.__h=null,rt.__h.length&&Lt.push(rt),Qr&&(rt.__E=rt.__=null),rt.__e=!1}else He==null&&se.__v===me.__v?(se.__k=me.__k,se.__e=me.__e):se.__e=Ke(me.__e,se,me,Ue,tt,He,Lt,tr);(Jt=c.diffed)&&Jt(se)}catch(Ir){se.__v=null,(tr||He!=null)&&(se.__e=nr,se.__h=!!tr,He[He.indexOf(nr)]=null),c.__e(Ir,se,me)}}function Pe(ee,se){c.__c&&c.__c(se,ee),ee.some(function(me){try{ee=me.__h,me.__h=[],ee.some(function(Ue){Ue.call(me)})}catch(Ue){c.__e(Ue,me.__v)}})}function Ke(ee,se,me,Ue,tt,He,Lt,nr){var tr,Jt,rt,Er=me.props,ur=se.props,Xt=se.type,L=0;if(Xt==="svg"&&(tt=!0),He!=null){for(;L<He.length;L++)if((tr=He[L])&&"setAttribute"in tr==!!Xt&&(Xt?tr.localName===Xt:tr.nodeType===3)){ee=tr,He[L]=null;break}}if(ee==null){if(Xt===null)return document.createTextNode(ur);ee=tt?document.createElementNS("http://www.w3.org/2000/svg",Xt):document.createElement(Xt,ur.is&&ur),He=null,nr=!1}if(Xt===null)Er===ur||nr&&ee.data===ur||(ee.data=ur);else{if(He=He&&l.call(ee.childNodes),Jt=(Er=me.props||x).dangerouslySetInnerHTML,rt=ur.dangerouslySetInnerHTML,!nr){if(He!=null)for(Er={},L=0;L<ee.attributes.length;L++)Er[ee.attributes[L].name]=ee.attributes[L].value;(rt||Jt)&&(rt&&(Jt&&rt.__html==Jt.__html||rt.__html===ee.innerHTML)||(ee.innerHTML=rt&&rt.__html||""))}if(te(ee,ur,Er,tt,nr),rt)se.__k=[];else if(L=se.props.children,Q(ee,Array.isArray(L)?L:[L],se,me,Ue,tt&&Xt!=="foreignObject",He,Lt,He?He[0]:me.__k&&de(me,0),nr),He!=null)for(L=He.length;L--;)He[L]!=null&&M(He[L]);nr||("value"in ur&&(L=ur.value)!==void 0&&(L!==Er.value||L!==ee.value||Xt==="progress"&&!L)&&Z(ee,"value",L,Er.value,!1),"checked"in ur&&(L=ur.checked)!==void 0&&L!==ee.checked&&Z(ee,"checked",L,Er.checked,!1))}return ee}function gt(ee,se,me){try{typeof ee=="function"?ee(se):ee.current=se}catch(Ue){c.__e(Ue,me)}}function Nt(ee,se,me){var Ue,tt;if(c.unmount&&c.unmount(ee),(Ue=ee.ref)&&(Ue.current&&Ue.current!==ee.__e||gt(Ue,null,se)),(Ue=ee.__c)!=null){if(Ue.componentWillUnmount)try{Ue.componentWillUnmount()}catch(He){c.__e(He,se)}Ue.base=Ue.__P=null}if(Ue=ee.__k)for(tt=0;tt<Ue.length;tt++)Ue[tt]&&Nt(Ue[tt],se,typeof ee.type!="function");me||ee.__e==null||M(ee.__e),ee.__e=ee.__d=void 0}function Vt(ee,se,me){return this.constructor(ee,me)}function Ct(ee,se,me){var Ue,tt,He;c.__&&c.__(ee,se),tt=(Ue=typeof me=="function")?null:me&&me.__k||se.__k,He=[],Re(se,ee=(!Ue&&me||se).__k=D(Oe,null,[ee]),tt||x,x,se.ownerSVGElement!==void 0,!Ue&&me?[me]:tt?null:se.firstChild?l.call(se.childNodes):null,He,!Ue&&me?me:tt?tt.__e:se.firstChild,Ue),Pe(He,ee)}function Ge(ee,se){Ct(ee,se,Ge)}function bt(ee,se,me){var Ue,tt,He,Lt=N({},ee.props);for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];return arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):me),W(ee.type,Lt,Ue||ee.key,tt||ee.ref,null)}function Ut(ee,se){var me={__c:se="__cC"+S++,__:ee,Consumer:function(Ue,tt){return Ue.children(tt)},Provider:function(Ue){var tt,He;return this.getChildContext||(tt=[],(He={})[se]=this,this.getChildContext=function(){return He},this.shouldComponentUpdate=function(Lt){this.props.value!==Lt.value&&tt.some(Me)},this.sub=function(Lt){tt.push(Lt);var nr=Lt.componentWillUnmount;Lt.componentWillUnmount=function(){tt.splice(tt.indexOf(Lt),1),nr&&nr.call(Lt)}}),Ue.children}};return me.Provider.__=me.Consumer.contextType=me}l=T.slice,c={__e:function(ee,se){for(var me,Ue,tt;se=se.__;)if((me=se.__c)&&!me.__)try{if((Ue=me.constructor)&&Ue.getDerivedStateFromError!=null&&(me.setState(Ue.getDerivedStateFromError(ee)),tt=me.__d),me.componentDidCatch!=null&&(me.componentDidCatch(ee),tt=me.__d),tt)return me.__E=me}catch(He){ee=He}throw ee}},h=0,ge.prototype.setState=function(ee,se){var me;me=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof ee=="function"&&(ee=ee(N({},me),this.props)),ee&&N(me,ee),ee!=null&&this.__v&&(se&&this.__h.push(se),Me(this))},ge.prototype.forceUpdate=function(ee){this.__v&&(this.__e=!0,ee&&this.__h.push(ee),Me(this))},ge.prototype.render=Oe,p=[],m=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,j.__r=0,S=0},function(i,u,o){var l=o(116),c=o(44),h=o(178);l||c(Object.prototype,"toString",h,{unsafe:!0})},function(i,u,o){var l=o(39),c=o(83),h=o(71),p=o(56),m=o(111),y="Array Iterator",S=p.set,x=p.getterFor(y);i.exports=m(Array,"Array",function(T,_){S(this,{type:y,target:l(T),index:0,kind:_})},function(){var T=x(this),_=T.target,N=T.kind,M=T.index++;return!_||M>=_.length?(T.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:M,done:!1}:N=="values"?{value:_[M],done:!1}:{value:[M,_[M]],done:!1}},"values"),h.Arguments=h.Array,c("keys"),c("values"),c("entries")},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(3),m=o(57),y=o(27),S=y("iterator"),x=y("toStringTag"),T=p.values,_=function(M,D){if(M){if(M[S]!==T)try{m(M,S,T)}catch{M[S]=T}if(M[x]||m(M,x,D),c[D]){for(var W in p)if(M[W]!==p[W])try{m(M,W,p[W])}catch{M[W]=p[W]}}}};for(var N in c)_(l[N]&&l[N].prototype,N);_(h,"DOMTokenList")},function(i,u,o){var l=o(16),c=o(7),h=o(46),p=o(77),m=o(35),y=o(15),S=o(65),x=o(36),T=o(109),_=o(18),N=o(34),M=o(99),D=o(28),W=o(33),$=o(58),Oe=o(88),ge=o(32),de=o(38),ce=o(39),Me=o(87),j=o(40),Q=o(72),U=o(54),I=o(67),k=o(73),te=o(139),V=o(112),Z=o(51),le=o(37),Te=o(93),Re=o(101),Pe=o(44),Ke=o(84),gt=o(91),Nt=o(70),Vt=o(85),Ct=o(27),Ge=o(149),bt=o(150),Ut=o(74),ee=o(56),se=o(75).forEach,me=gt("hidden"),Ue="Symbol",tt="prototype",He=Ct("toPrimitive"),Lt=ee.set,nr=ee.getterFor(Ue),tr=Object[tt],Jt=c.Symbol,rt=Jt&&Jt[tt],Er=c.TypeError,ur=c.QObject,Xt=h("JSON","stringify"),L=Z.f,Qr=le.f,Rr=te.f,kr=Te.f,Be=y([].push),Xr=Ke("symbols"),zr=Ke("op-symbols"),Ir=Ke("string-to-symbol-registry"),On=Ke("symbol-to-string-registry"),eo=Ke("wks"),In=!ur||!ur[tt]||!ur[tt].findChild,to=x&&_(function(){return U(Qr({},"a",{get:function(){return Qr(this,"a",{value:7}).a}})).a!=7})?function(we,_e,ht){var wt=L(tr,_e);wt&&delete tr[_e],Qr(we,_e,ht),wt&&we!==tr&&Qr(tr,_e,wt)}:Qr,Qt=function(we,_e){var ht=Xr[we]=U(rt);return Lt(ht,{type:Ue,tag:we,description:_e}),x||(ht.description=_e),ht},$r=function(_e,ht,wt){_e===tr&&$r(zr,ht,wt),ge(_e);var Kt=Me(ht);return ge(wt),N(Xr,Kt)?(wt.enumerable?(N(_e,me)&&_e[me][Kt]&&(_e[me][Kt]=!1),wt=U(wt,{enumerable:Q(0,!1)})):(N(_e,me)||Qr(_e,me,Q(1,{})),_e[me][Kt]=!0),to(_e,Kt,wt)):Qr(_e,Kt,wt)},Dn=function(_e,ht){ge(_e);var wt=ce(ht),Kt=I(wt).concat(wr(wt));return se(Kt,function(Br){(!x||m(or,wt,Br))&&$r(_e,Br,wt[Br])}),_e},Mt=function(_e,ht){return ht===void 0?U(_e):Dn(U(_e),ht)},or=function(_e){var ht=Me(_e),wt=m(kr,this,ht);return this===tr&&N(Xr,ht)&&!N(zr,ht)?!1:wt||!N(this,ht)||!N(Xr,ht)||N(this,me)&&this[me][ht]?wt:!0},vr=function(_e,ht){var wt=ce(_e),Kt=Me(ht);if(!(wt===tr&&N(Xr,Kt)&&!N(zr,Kt))){var Br=L(wt,Kt);return Br&&N(Xr,Kt)&&!(N(wt,me)&&wt[me][Kt])&&(Br.enumerable=!0),Br}},fr=function(_e){var ht=Rr(ce(_e)),wt=[];return se(ht,function(Kt){!N(Xr,Kt)&&!N(Nt,Kt)&&Be(wt,Kt)}),wt},wr=function(_e){var ht=_e===tr,wt=Rr(ht?zr:ce(_e)),Kt=[];return se(wt,function(Br){N(Xr,Br)&&(!ht||N(tr,Br))&&Be(Kt,Xr[Br])}),Kt};if(T||(Jt=function(){if($(rt,this))throw Er("Symbol is not a constructor");var _e=!arguments.length||arguments[0]===void 0?void 0:j(arguments[0]),ht=Vt(_e),wt=function(Kt){this===tr&&m(wt,zr,Kt),N(this,me)&&N(this[me],ht)&&(this[me][ht]=!1),to(this,ht,Q(1,Kt))};return x&&In&&to(tr,ht,{configurable:!0,set:wt}),Qt(ht,_e)},rt=Jt[tt],Pe(rt,"toString",function(){return nr(this).tag}),Pe(Jt,"withoutSetter",function(we){return Qt(Vt(we),we)}),Te.f=or,le.f=$r,Z.f=vr,k.f=te.f=fr,V.f=wr,Ge.f=function(we){return Qt(Ct(we),we)},x&&(Qr(rt,"description",{configurable:!0,get:function(){return nr(this).description}}),S||Pe(tr,"propertyIsEnumerable",or,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!T,sham:!T},{Symbol:Jt}),se(I(eo),function(we){bt(we)}),l({target:Ue,stat:!0,forced:!T},{for:function(we){var _e=j(we);if(N(Ir,_e))return Ir[_e];var ht=Jt(_e);return Ir[_e]=ht,On[ht]=_e,ht},keyFor:function(_e){if(!Oe(_e))throw Er(_e+" is not a symbol");if(N(On,_e))return On[_e]},useSetter:function(){In=!0},useSimple:function(){In=!1}}),l({target:"Object",stat:!0,forced:!T,sham:!x},{create:Mt,defineProperty:$r,defineProperties:Dn,getOwnPropertyDescriptor:vr}),l({target:"Object",stat:!0,forced:!T},{getOwnPropertyNames:fr,getOwnPropertySymbols:wr}),l({target:"Object",stat:!0,forced:_(function(){V.f(1)})},{getOwnPropertySymbols:function(_e){return V.f(de(_e))}}),Xt){var re=!T||_(function(){var we=Jt();return Xt([we])!="[null]"||Xt({a:we})!="{}"||Xt(Object(we))!="{}"});l({target:"JSON",stat:!0,forced:re},{stringify:function(_e,ht,wt){var Kt=Re(arguments),Br=ht;if(!(!W(ht)&&_e===void 0||Oe(_e)))return M(ht)||(ht=function(Cn,Ln){if(D(Br)&&(Ln=m(Br,this,Cn,Ln)),!Oe(Ln))return Ln}),Kt[1]=ht,p(Xt,null,Kt)}})}if(!rt[He]){var Ee=rt.valueOf;Pe(rt,He,function(we){return m(Ee,this)})}Ut(Jt,Ue),Nt[me]=!0},function(i,u,o){var l=o(146).charAt,c=o(40),h=o(56),p=o(111),m="String Iterator",y=h.set,S=h.getterFor(m);p(String,"String",function(x){y(this,{type:m,string:c(x),index:0})},function(){var T=S(this),_=T.string,N=T.index,M;return N>=_.length?{value:void 0,done:!0}:(M=l(_,N),T.index+=M.length,{value:M,done:!1})})},function(i,u,o){(function(l){var c=function(h){return h&&h.Math==Math&&h};i.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(i,u,o){var l=o(16),c=o(36),h=o(7),p=o(15),m=o(34),y=o(28),S=o(58),x=o(40),T=o(37).f,_=o(134),N=h.Symbol,M=N&&N.prototype;if(c&&y(N)&&(!("description"in M)||N().description!==void 0)){var D={},W=function(){var Q=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),U=S(M,this)?new N(Q):Q===void 0?N():N(Q);return Q===""&&(D[U]=!0),U};_(W,N),W.prototype=M,M.constructor=W;var $=String(N("test"))=="Symbol(test)",Oe=p(M.toString),ge=p(M.valueOf),de=/^Symbol\((.*)\)[^)]+$/,ce=p("".replace),Me=p("".slice);T(M,"description",{configurable:!0,get:function(){var Q=ge(this),U=Oe(Q);if(m(D,Q))return"";var I=$?Me(U,7,-1):ce(U,de,"$1");return I===""?void 0:I}}),l({global:!0,forced:!0},{Symbol:W})}},function(i,u,o){var l=o(150);l("iterator")},function(i,u,o){o.d(u,"a",function(){return l.a}),o.d(u,"c",function(){return l.e}),o.d(u,"h",function(){return Me}),o.d(u,"i",function(){return $}),o.d(u,"j",function(){return D}),o.d(u,"b",function(){return Pe}),o.d(u,"e",function(){return Vt}),o.d(u,"f",function(){return Ke}),o.d(u,"g",function(){return or});var l=o(1),c,h,p,m=0,y=[],S=l.i.__b,x=l.i.__r,T=l.i.diffed,_=l.i.__c,N=l.i.unmount;function M(re,Ee){l.i.__h&&l.i.__h(h,re,m||Ee),m=0;var we=h.__H||(h.__H={__:[],__h:[]});return re>=we.__.length&&we.__.push({}),we.__[re]}function D(re){return m=1,W(le,re)}function W(re,Ee,we){var _e=M(c++,2);return _e.t=re,_e.__c||(_e.__=[we?we(Ee):le(void 0,Ee),function(ht){var wt=_e.t(_e.__[0],ht);_e.__[0]!==wt&&(_e.__=[wt,_e.__[1]],_e.__c.setState({}))}],_e.__c=h),_e.__}function $(re,Ee){var we=M(c++,3);!l.i.__s&&Z(we.__H,Ee)&&(we.__=re,we.__H=Ee,h.__H.__h.push(we))}function Oe(re,Ee){var we=M(c++,4);!l.i.__s&&Z(we.__H,Ee)&&(we.__=re,we.__H=Ee,h.__h.push(we))}function ge(re){return m=5,ce(function(){return{current:re}},[])}function de(re,Ee,we){m=6,Oe(function(){typeof re=="function"?re(Ee()):re&&(re.current=Ee())},we==null?we:we.concat(re))}function ce(re,Ee){var we=M(c++,7);return Z(we.__H,Ee)&&(we.__=re(),we.__H=Ee,we.__h=re),we.__}function Me(re,Ee){return m=8,ce(function(){return re},Ee)}function j(re){var Ee=h.context[re.__c],we=M(c++,9);return we.c=re,Ee?(we.__==null&&(we.__=!0,Ee.sub(h)),Ee.props.value):re.__}function Q(re,Ee){l.i.useDebugValue&&l.i.useDebugValue(Ee?Ee(re):re)}function U(){var re;for(y.sort(function(Ee,we){return Ee.__v.__b-we.__v.__b});re=y.pop();)if(re.__P)try{re.__H.__h.forEach(te),re.__H.__h.forEach(V),re.__H.__h=[]}catch(Ee){re.__H.__h=[],l.i.__e(Ee,re.__v)}}l.i.__b=function(re){h=null,S&&S(re)},l.i.__r=function(re){x&&x(re),c=0;var Ee=(h=re.__c).__H;Ee&&(Ee.__h.forEach(te),Ee.__h.forEach(V),Ee.__h=[])},l.i.diffed=function(re){T&&T(re);var Ee=re.__c;Ee&&Ee.__H&&Ee.__H.__h.length&&(y.push(Ee)!==1&&p===l.i.requestAnimationFrame||((p=l.i.requestAnimationFrame)||k)(U)),h=null},l.i.__c=function(re,Ee){Ee.some(function(we){try{we.__h.forEach(te),we.__h=we.__h.filter(function(_e){return!_e.__||V(_e)})}catch(_e){Ee.some(function(ht){ht.__h&&(ht.__h=[])}),Ee=[],l.i.__e(_e,we.__v)}}),_&&_(re,Ee)},l.i.unmount=function(re){N&&N(re);var Ee,we=re.__c;we&&we.__H&&(we.__H.__.forEach(function(_e){try{te(_e)}catch(ht){Ee=ht}}),Ee&&l.i.__e(Ee,we.__v))};var I=typeof requestAnimationFrame=="function";function k(re){var Ee,we=function(){clearTimeout(_e),I&&cancelAnimationFrame(Ee),setTimeout(re)},_e=setTimeout(we,100);I&&(Ee=requestAnimationFrame(we))}function te(re){var Ee=h,we=re.__c;typeof we=="function"&&(re.__c=void 0,we()),h=Ee}function V(re){var Ee=h;re.__c=re.__(),h=Ee}function Z(re,Ee){return!re||re.length!==Ee.length||Ee.some(function(we,_e){return we!==re[_e]})}function le(re,Ee){return typeof Ee=="function"?Ee(re):Ee}function Te(re,Ee){for(var we in Ee)re[we]=Ee[we];return re}function Re(re,Ee){for(var we in re)if(we!=="__source"&&!(we in Ee))return!0;for(var _e in Ee)if(_e!=="__source"&&re[_e]!==Ee[_e])return!0;return!1}function Pe(re){this.props=re}function Ke(re,Ee){function we(ht){var wt=this.props.ref,Kt=wt==ht.ref;return!Kt&&wt&&(wt.call?wt(null):wt.current=null),Ee?!Ee(this.props,ht)||!Kt:Re(this.props,ht)}function _e(ht){return this.shouldComponentUpdate=we,Object(l.e)(re,ht)}return _e.displayName="Memo("+(re.displayName||re.name)+")",_e.prototype.isReactComponent=!0,_e.__f=!0,_e}(Pe.prototype=new l.a).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(re,Ee){return Re(this.props,re)||Re(this.state,Ee)};var gt=l.i.__b;l.i.__b=function(re){re.type&&re.type.__f&&re.ref&&(re.props.ref=re.ref,re.ref=null),gt&&gt(re)};var Nt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Vt(re){function Ee(we,_e){var ht=Te({},we);return delete ht.ref,re(ht,!(_e=we.ref||_e)||typeof _e=="object"&&!("current"in _e)?null:_e)}return Ee.$$typeof=Nt,Ee.render=Ee,Ee.prototype.isReactComponent=Ee.__f=!0,Ee.displayName="ForwardRef("+(re.displayName||re.name)+")",Ee}var Ct=function(re,Ee){return re==null?null:Object(l.k)(Object(l.k)(re).map(Ee))},Ge={map:Ct,forEach:Ct,count:function(re){return re?Object(l.k)(re).length:0},only:function(re){var Ee=Object(l.k)(re);if(Ee.length!==1)throw"Children.only";return Ee[0]},toArray:l.k},bt=l.i.__e;l.i.__e=function(re,Ee,we){if(re.then){for(var _e,ht=Ee;ht=ht.__;)if((_e=ht.__c)&&_e.__c)return Ee.__e==null&&(Ee.__e=we.__e,Ee.__k=we.__k),_e.__c(re,Ee)}bt(re,Ee,we)};var Ut=l.i.unmount;function ee(re,Ee,we){return re&&(re.__c&&re.__c.__H&&(re.__c.__H.__.forEach(function(_e){typeof _e.__c=="function"&&_e.__c()}),re.__c.__H=null),(re=Te({},re)).__c!=null&&(re.__c.__P===we&&(re.__c.__P=Ee),re.__c=null),re.__k=re.__k&&re.__k.map(function(_e){return ee(_e,Ee,we)})),re}function se(re,Ee,we){return re&&(re.__v=null,re.__k=re.__k&&re.__k.map(function(_e){return se(_e,Ee,we)}),re.__c&&re.__c.__P===Ee&&(re.__e&&we.insertBefore(re.__e,re.__d),re.__c.__e=!0,re.__c.__P=we)),re}function me(){this.__u=0,this.t=null,this.__b=null}function Ue(re){var Ee=re.__.__c;return Ee&&Ee.__e&&Ee.__e(re)}function tt(re){var Ee,we,_e;function ht(wt){if(Ee||(Ee=re()).then(function(Kt){we=Kt.default||Kt},function(Kt){_e=Kt}),_e)throw _e;if(!we)throw Ee;return Object(l.e)(we,wt)}return ht.displayName="Lazy",ht.__f=!0,ht}function He(){this.u=null,this.o=null}l.i.unmount=function(re){var Ee=re.__c;Ee&&Ee.__R&&Ee.__R(),Ee&&re.__h===!0&&(re.type=null),Ut&&Ut(re)},(me.prototype=new l.a).__c=function(re,Ee){var we=Ee.__c,_e=this;_e.t==null&&(_e.t=[]),_e.t.push(we);var ht=Ue(_e.__v),wt=!1,Kt=function(){wt||(wt=!0,we.__R=null,ht?ht(Br):Br())};we.__R=Kt;var Br=function(){if(!--_e.__u){if(_e.state.__e){var Ln=_e.state.__e;_e.__v.__k[0]=se(Ln,Ln.__c.__P,Ln.__c.__O)}var Hi;for(_e.setState({__e:_e.__b=null});Hi=_e.t.pop();)Hi.forceUpdate()}},Cn=Ee.__h===!0;_e.__u++||Cn||_e.setState({__e:_e.__b=_e.__v.__k[0]}),re.then(Kt,Kt)},me.prototype.componentWillUnmount=function(){this.t=[]},me.prototype.render=function(re,Ee){if(this.__b){if(this.__v.__k){var we=document.createElement("div"),_e=this.__v.__k[0].__c;this.__v.__k[0]=ee(this.__b,we,_e.__O=_e.__P)}this.__b=null}var ht=Ee.__e&&Object(l.e)(l.b,null,re.fallback);return ht&&(ht.__h=null),[Object(l.e)(l.b,null,Ee.__e?null:re.children),ht]};var Lt=function(re,Ee,we){if(++we[1]===we[0]&&re.o.delete(Ee),re.props.revealOrder&&(re.props.revealOrder[0]!=="t"||!re.o.size))for(we=re.u;we;){for(;we.length>3;)we.pop()();if(we[1]<we[0])break;re.u=we=we[2]}};function nr(re){return this.getChildContext=function(){return re.context},re.children}function tr(re){var Ee=this,we=re.i;Ee.componentWillUnmount=function(){Object(l.j)(null,Ee.l),Ee.l=null,Ee.i=null},Ee.i&&Ee.i!==we&&Ee.componentWillUnmount(),re.__v?(Ee.l||(Ee.i=we,Ee.l={nodeType:1,parentNode:we,childNodes:[],appendChild:function(_e){this.childNodes.push(_e),Ee.i.appendChild(_e)},insertBefore:function(_e,ht){this.childNodes.push(_e),Ee.i.appendChild(_e)},removeChild:function(_e){this.childNodes.splice(this.childNodes.indexOf(_e)>>>1,1),Ee.i.removeChild(_e)}}),Object(l.j)(Object(l.e)(nr,{context:Ee.context},re.__v),Ee.l)):Ee.l&&Ee.componentWillUnmount()}function Jt(re,Ee){return Object(l.e)(tr,{__v:re,i:Ee})}(He.prototype=new l.a).__e=function(re){var Ee=this,we=Ue(Ee.__v),_e=Ee.o.get(re);return _e[0]++,function(ht){var wt=function(){Ee.props.revealOrder?(_e.push(ht),Lt(Ee,re,_e)):ht()};we?we(wt):wt()}},He.prototype.render=function(re){this.u=null,this.o=new Map;var Ee=Object(l.k)(re.children);re.revealOrder&&re.revealOrder[0]==="b"&&Ee.reverse();for(var we=Ee.length;we--;)this.o.set(Ee[we],this.u=[1,0,this.u]);return re.children},He.prototype.componentDidUpdate=He.prototype.componentDidMount=function(){var re=this;this.o.forEach(function(Ee,we){Lt(re,we,Ee)})};var rt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Er=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ur=typeof document<"u",Xt=function(re){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(re)};function L(re,Ee,we){return Ee.__k==null&&(Ee.textContent=""),Object(l.j)(re,Ee),typeof we=="function"&&we(),re?re.__c:null}function Qr(re,Ee,we){return Object(l.h)(re,Ee),typeof we=="function"&&we(),re?re.__c:null}l.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(re){Object.defineProperty(l.a.prototype,re,{configurable:!0,get:function(){return this["UNSAFE_"+re]},set:function(Ee){Object.defineProperty(this,re,{configurable:!0,writable:!0,value:Ee})}})});var Rr=l.i.event;function kr(){}function Be(){return this.cancelBubble}function Xr(){return this.defaultPrevented}l.i.event=function(re){return Rr&&(re=Rr(re)),re.persist=kr,re.isPropagationStopped=Be,re.isDefaultPrevented=Xr,re.nativeEvent=re};var zr,Ir={configurable:!0,get:function(){return this.class}},On=l.i.vnode;l.i.vnode=function(re){var Ee=re.type,we=re.props,_e=we;if(typeof Ee=="string"){var ht=Ee.indexOf("-")===-1;for(var wt in _e={},we){var Kt=we[wt];ur&&wt==="children"&&Ee==="noscript"||wt==="value"&&"defaultValue"in we&&Kt==null||(wt==="defaultValue"&&"value"in we&&we.value==null?wt="value":wt==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(wt)?wt="ondblclick":/^onchange(textarea|input)/i.test(wt+Ee)&&!Xt(we.type)?wt="oninput":/^onfocus$/i.test(wt)?wt="onfocusin":/^onblur$/i.test(wt)?wt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(wt)?wt=wt.toLowerCase():ht&&Er.test(wt)?wt=wt.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),_e[wt]=Kt)}Ee=="select"&&_e.multiple&&Array.isArray(_e.value)&&(_e.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=_e.value.indexOf(Br.props.value)!=-1})),Ee=="select"&&_e.defaultValue!=null&&(_e.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=_e.multiple?_e.defaultValue.indexOf(Br.props.value)!=-1:_e.defaultValue==Br.props.value})),re.props=_e,we.class!=we.className&&(Ir.enumerable="className"in we,we.className!=null&&(_e.class=we.className),Object.defineProperty(_e,"className",Ir))}re.$$typeof=rt,On&&On(re)};var eo=l.i.__r;l.i.__r=function(re){eo&&eo(re),zr=re.__c};var In={ReactCurrentDispatcher:{current:{readContext:function(re){return zr.__n[re.__c].props.value}}}};function to(re){return l.e.bind(null,re)}function Qt(re){return!!re&&re.$$typeof===rt}function $r(re){return Qt(re)?l.c.apply(null,arguments):re}function Dn(re){return!!re.__k&&(Object(l.j)(null,re),!0)}function Mt(re){return re&&(re.base||re.nodeType===1&&re)||null}var or=function(re,Ee){return re(Ee)},vr=function(re,Ee){return re(Ee)},fr=l.b,wr={useState:D,useReducer:W,useEffect:$,useLayoutEffect:Oe,useRef:ge,useImperativeHandle:de,useMemo:ce,useCallback:Me,useContext:j,useDebugValue:Q,version:"17.0.2",Children:Ge,render:L,hydrate:Qr,unmountComponentAtNode:Dn,createPortal:Jt,createElement:l.e,createContext:l.d,createFactory:to,cloneElement:$r,createRef:l.f,Fragment:l.b,isValidElement:Qt,findDOMNode:Mt,Component:l.a,PureComponent:Pe,memo:Ke,forwardRef:Vt,flushSync:vr,unstable_batchedUpdates:or,StrictMode:fr,Suspense:me,SuspenseList:He,lazy:tt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:In};u.d=wr},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(179),m=o(57),y=function(x){if(x&&x.forEach!==p)try{m(x,"forEach",p)}catch{x.forEach=p}};for(var S in c)c[S]&&y(l[S]&&l[S].prototype);y(h)},function(i,u,o){var l=o(16),c=o(97);l({target:"Object",stat:!0},{setPrototypeOf:c})},function(i,u,o){var l=o(16),c=o(18),h=o(38),p=o(96),m=o(137),y=c(function(){p(1)});l({target:"Object",stat:!0,forced:y,sham:!m},{getPrototypeOf:function(x){return p(h(x))}})},function(i,u,o){var l=o(16),c=o(46),h=o(77),p=o(199),m=o(157),y=o(32),S=o(33),x=o(54),T=o(18),_=c("Reflect","construct"),N=Object.prototype,M=[].push,D=T(function(){function Oe(){}return!(_(function(){},[],Oe)instanceof Oe)}),W=!T(function(){_(function(){})}),$=D||W;l({target:"Reflect",stat:!0,forced:$,sham:$},{construct:function(ge,de){m(ge),y(de);var ce=arguments.length<3?ge:m(arguments[2]);if(W&&!D)return _(ge,de,ce);if(ge==ce){switch(de.length){case 0:return new ge;case 1:return new ge(de[0]);case 2:return new ge(de[0],de[1]);case 3:return new ge(de[0],de[1],de[2]);case 4:return new ge(de[0],de[1],de[2],de[3])}var Me=[null];return h(M,Me,de),new(h(p,ge,Me))}var j=ce.prototype,Q=x(S(j)?j:N),U=h(ge,Q,de);return S(U)?U:Q}})},function(i,u){var o=Function.prototype,l=o.bind,c=o.call,h=l&&l.bind(c);i.exports=l?function(p){return p&&h(c,p)}:function(p){return p&&function(){return c.apply(p,arguments)}}},function(i,u,o){var l=o(7),c=o(51).f,h=o(57),p=o(44),m=o(108),y=o(134),S=o(95);i.exports=function(x,T){var _=x.target,N=x.global,M=x.stat,D,W,$,Oe,ge,de;if(N?W=l:M?W=l[_]||m(_,{}):W=(l[_]||{}).prototype,W)for($ in T){if(ge=T[$],x.noTargetGet?(de=c(W,$),Oe=de&&de.value):Oe=W[$],D=S(N?$:_+(M?".":"#")+$,x.forced),!D&&Oe!==void 0){if(typeof ge==typeof Oe)continue;y(ge,Oe)}(x.sham||Oe&&Oe.sham)&&h(ge,"sham",!0),p(W,$,ge,x)}}},function(i,u,o){var l=o(16),c=o(7),h=o(99),p=o(100),m=o(33),y=o(68),S=o(43),x=o(39),T=o(61),_=o(27),N=o(76),M=o(101),D=N("slice"),W=_("species"),$=c.Array,Oe=Math.max;l({target:"Array",proto:!0,forced:!D},{slice:function(de,ce){var Me=x(this),j=S(Me),Q=y(de,j),U=y(ce===void 0?j:ce,j),I,k,te;if(h(Me)&&(I=Me.constructor,p(I)&&(I===$||h(I.prototype))?I=void 0:m(I)&&(I=I[W],I===null&&(I=void 0)),I===$||I===void 0))return M(Me,Q,U);for(k=new(I===void 0?$:I)(Oe(U-Q,0)),te=0;Q<U;Q++,te++)Q in Me&&T(k,te,Me[Q]);return k.length=te,k}})},function(i,u){i.exports=function(o){try{return!!o()}catch{return!0}}},function(i,u,o){var l=o(16),c=o(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(i,u,o){var l=o(16),c=o(38),h=o(67),p=o(18),m=p(function(){h(1)});l({target:"Object",stat:!0,forced:m},{keys:function(S){return h(c(S))}})},function(i,u,o){var l=o(16),c=o(18),h=o(39),p=o(51).f,m=o(36),y=c(function(){p(1)}),S=!m||y;l({target:"Object",stat:!0,forced:S,sham:!m},{getOwnPropertyDescriptor:function(T,_){return p(h(T),_)}})},function(i,u,o){var l=o(16),c=o(75).filter,h=o(76),p=h("filter");l({target:"Array",proto:!0,forced:!p},{filter:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(36),c=o(94).EXISTS,h=o(15),p=o(37).f,m=Function.prototype,y=h(m.toString),S=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(S.exec),T="name";l&&!c&&p(m,T,{configurable:!0,get:function(){try{return x(S,y(this))[1]}catch{return""}}})},function(i,u,o){var l=o(16),c=o(36),h=o(135),p=o(39),m=o(51),y=o(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(x){for(var T=p(x),_=m.f,N=h(T),M={},D=0,W,$;N.length>D;)$=_(T,W=N[D++]),$!==void 0&&y(M,W,$);return M}})},function(i,u,o){var l=o(16),c=o(182),h=o(118),p=!h(function(m){Array.from(m)});l({target:"Array",stat:!0,forced:p},{from:c})},,function(i,u,o){var l=o(7),c=o(84),h=o(34),p=o(85),m=o(109),y=o(128),S=c("wks"),x=l.Symbol,T=x&&x.for,_=y?x:x&&x.withoutSetter||p;i.exports=function(N){if(!h(S,N)||!(m||typeof S[N]=="string")){var M="Symbol."+N;m&&h(x,N)?S[N]=x[N]:y&&T?S[N]=T(M):S[N]=_(M)}return S[N]}},function(i,u){i.exports=function(o){return typeof o=="function"}},function(i,u,o){var l=o(16),c=o(7),h=o(18),p=o(99),m=o(33),y=o(38),S=o(43),x=o(61),T=o(119),_=o(76),N=o(27),M=o(66),D=N("isConcatSpreadable"),W=9007199254740991,$="Maximum allowed index exceeded",Oe=c.TypeError,ge=M>=51||!h(function(){var j=[];return j[D]=!1,j.concat()[0]!==j}),de=_("concat"),ce=function(j){if(!m(j))return!1;var Q=j[D];return Q!==void 0?!!Q:p(j)},Me=!ge||!de;l({target:"Array",proto:!0,forced:Me},{concat:function(Q){var U=y(this),I=T(U,0),k=0,te,V,Z,le,Te;for(te=-1,Z=arguments.length;te<Z;te++)if(Te=te===-1?U:arguments[te],ce(Te)){if(le=S(Te),k+le>W)throw Oe($);for(V=0;V<le;V++,k++)V in Te&&x(I,k,Te[V])}else{if(k>=W)throw Oe($);x(I,k++,Te)}return I.length=k,I}})},function(i,u,o){var l=o(16),c=o(198);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(i,u,o){var l=o(105),c=typeof self=="object"&&self&&self.Object===Object&&self,h=l.a||c||Function("return this")();u.a=h},function(i,u,o){var l=o(7),c=o(33),h=l.String,p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not an object")}},function(i,u,o){var l=o(28);i.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(i,u,o){var l=o(15),c=o(38),h=l({}.hasOwnProperty);i.exports=Object.hasOwn||function(m,y){return h(c(m),y)}},function(i,u){var o=Function.prototype.call;i.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(i,u,o){var l=o(7),c=o(36),h=o(129),p=o(32),m=o(87),y=l.TypeError,S=Object.defineProperty;u.f=c?S:function(T,_,N){if(p(T),_=m(_),p(N),h)try{return S(T,_,N)}catch{}if("get"in N||"set"in N)throw y("Accessors not supported");return"value"in N&&(T[_]=N.value),T}},function(i,u,o){var l=o(7),c=o(45),h=l.Object;i.exports=function(p){return h(c(p))}},function(i,u,o){var l=o(81),c=o(45);i.exports=function(h){return l(c(h))}},function(i,u,o){var l=o(7),c=o(98),h=l.String;i.exports=function(p){if(c(p)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(p)}},function(i,u,o){var l=o(16),c=o(75).map,h=o(76),p=h("map");l({target:"Array",proto:!0,forced:!p},{map:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){(function(l){o.d(u,"d",function(){return p}),o.d(u,"c",function(){return m}),o.d(u,"b",function(){return y}),o.d(u,"a",function(){return x});var c=o(10),h=function(T,_){var N=typeof Symbol=="function"&&T[Symbol.iterator];if(!N)return T;var M=N.call(T),D,W=[],$;try{for(;(_===void 0||_-- >0)&&!(D=M.next()).done;)W.push(D.value)}catch(Oe){$={error:Oe}}finally{try{D&&!D.done&&(N=M.return)&&N.call(M)}finally{if($)throw $.error}}return W};function p(){var T=h(Object(c.j)(0),2),_=T[1],N=Object(c.h)(function(){_(function(M){return M+1})},[]);return N}function m(T){if(!T||typeof T!="object")return!1;var _=Object.getPrototypeOf(T);return!_||_===Object.prototype}function y(T){return typeof Symbol=="function"?Symbol.for(T):"__$mobx-react "+T+"__"}var S={};function x(){return typeof window<"u"?window:typeof l<"u"?l:typeof self<"u"?self:S}}).call(this,o(82))},function(i,u,o){var l=o(90);i.exports=function(c){return l(c.length)}},function(i,u,o){var l=o(7),c=o(28),h=o(34),p=o(57),m=o(108),y=o(92),S=o(56),x=o(94).CONFIGURABLE,T=S.get,_=S.enforce,N=String(String).split("String");(i.exports=function(M,D,W,$){var Oe=$?!!$.unsafe:!1,ge=$?!!$.enumerable:!1,de=$?!!$.noTargetGet:!1,ce=$&&$.name!==void 0?$.name:D,Me;if(c(W)&&(String(ce).slice(0,7)==="Symbol("&&(ce="["+String(ce).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(W,"name")||x&&W.name!==ce)&&p(W,"name",ce),Me=_(W),Me.source||(Me.source=N.join(typeof ce=="string"?ce:""))),M===l){ge?M[D]=W:m(D,W);return}else Oe?!de&&M[D]&&(ge=!0):delete M[D];ge?M[D]=W:p(M,D,W)})(Function.prototype,"toString",function(){return c(this)&&T(this).source||y(this)})},function(i,u,o){var l=o(7),c=l.TypeError;i.exports=function(h){if(h==null)throw c("Can't call method on "+h);return h}},function(i,u,o){var l=o(7),c=o(28),h=function(p){return c(p)?p:void 0};i.exports=function(p,m){return arguments.length<2?h(l[p]):l[p]&&l[p][m]}},function(i,u,o){var l=o(16),c=o(35),h=o(33),p=o(32),m=o(200),y=o(51),S=o(96);function x(T,_){var N=arguments.length<3?T:arguments[2],M,D;if(p(T)===N)return T[_];if(M=y.f(T,_),M)return m(M)?M.value:M.get===void 0?void 0:c(M.get,N);if(h(D=S(T)))return x(D,_,N)}l({target:"Reflect",stat:!0},{get:x})},function(i,u,o){(function(l){var c=o(31),h=o(165),p=a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,y=m&&m.exports===p,S=y?c.a.Buffer:void 0,x=S?S.isBuffer:void 0,T=x||h.a;u.a=T}).call(this,o(121)(i))},function(i,u,o){(function(l){var c=o(105),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,m=p&&p.exports===h,y=m&&c.a.process,S=function(){try{var x=p&&p.require&&p.require("util").types;return x||y&&y.binding&&y.binding("util")}catch{}}();u.a=S}).call(this,o(121)(i))},function(i,u,o){var l=o(15),c=l({}.toString),h=l("".slice);i.exports=function(p){return h(c(p),8,-1)}},function(i,u,o){var l=o(36),c=o(35),h=o(93),p=o(72),m=o(39),y=o(87),S=o(34),x=o(129),T=Object.getOwnPropertyDescriptor;u.f=l?T:function(N,M){if(N=m(N),M=y(M),x)try{return T(N,M)}catch{}if(S(N,M))return p(!c(h.f,N,M),N[M])}},function(i,u,o){var l=o(16),c=o(213).entries;l({target:"Object",stat:!0},{entries:function(p){return c(p)}})},function(i,u,o){var l=o(46);i.exports=l("navigator","userAgent")||""},function(i,u,o){var l=o(32),c=o(168),h=o(110),p=o(70),m=o(133),y=o(86),S=o(91),x=">",T="<",_="prototype",N="script",M=S("IE_PROTO"),D=function(){},W=function(ce){return T+N+x+ce+T+"/"+N+x},$=function(ce){ce.write(W("")),ce.close();var Me=ce.parentWindow.Object;return ce=null,Me},Oe=function(){var ce=y("iframe"),Me="java"+N+":",j;return ce.style.display="none",m.appendChild(ce),ce.src=String(Me),j=ce.contentWindow.document,j.open(),j.write(W("document.F=Object")),j.close(),j.F},ge,de=function(){try{ge=new ActiveXObject("htmlfile")}catch{}de=typeof document<"u"?document.domain&&ge?$(ge):Oe():$(ge);for(var ce=h.length;ce--;)delete de[_][h[ce]];return de()};p[M]=!0,i.exports=Object.create||function(Me,j){var Q;return Me!==null?(D[_]=l(Me),Q=new D,D[_]=null,Q[M]=Me):Q=de(),j===void 0?Q:c(Q,j)}},function(i,u,o){var l=o(7),c=o(28),h=o(89),p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not a function")}},function(i,u,o){var l=o(170),c=o(7),h=o(15),p=o(33),m=o(57),y=o(34),S=o(107),x=o(91),T=o(70),_="Object already initialized",N=c.TypeError,M=c.WeakMap,D,W,$,Oe=function(U){return $(U)?W(U):D(U,{})},ge=function(U){return function(I){var k;if(!p(I)||(k=W(I)).type!==U)throw N("Incompatible receiver, "+U+" required");return k}};if(l||S.state){var de=S.state||(S.state=new M),ce=h(de.get),Me=h(de.has),j=h(de.set);D=function(U,I){if(Me(de,U))throw new N(_);return I.facade=U,j(de,U,I),I},W=function(U){return ce(de,U)||{}},$=function(U){return Me(de,U)}}else{var Q=x("state");T[Q]=!0,D=function(U,I){if(y(U,Q))throw new N(_);return I.facade=U,m(U,Q,I),I},W=function(U){return y(U,Q)?U[Q]:{}},$=function(U){return y(U,Q)}}i.exports={set:D,get:W,has:$,enforce:Oe,getterFor:ge}},function(i,u,o){var l=o(36),c=o(37),h=o(72);i.exports=l?function(p,m,y){return c.f(p,m,h(1,y))}:function(p,m,y){return p[m]=y,p}},function(i,u,o){var l=o(15);i.exports=l({}.isPrototypeOf)},function(i,u,o){var l=o(55);i.exports=function(c,h){var p=c[h];return p==null?void 0:l(p)}},function(i,u,o){var l=o(173),c=o(177);l("Map",function(h){return function(){return h(this,arguments.length?arguments[0]:void 0)}},c)},function(i,u,o){var l=o(87),c=o(37),h=o(72);i.exports=function(p,m,y){var S=l(m);S in p?c.f(p,S,h(0,y)):p[S]=y}},function(i,u,o){var l=o(15),c=o(55),h=l(l.bind);i.exports=function(p,m){return c(p),m===void 0?p:h?h(p,m):function(){return p.apply(m,arguments)}}},function(i,u,o){var l=o(16),c=o(15),h=o(81),p=o(39),m=o(120),y=c([].join),S=h!=Object,x=m("join",",");l({target:"Array",proto:!0,forced:S||!x},{join:function(_){return y(p(this),_===void 0?",":_)}})},function(i,u,o){var l=o(16),c=o(214),h=o(83);l({target:"Array",proto:!0},{fill:c}),h("fill")},function(i,u){i.exports=!1},function(i,u,o){var l=o(7),c=o(53),h=l.process,p=l.Deno,m=h&&h.versions||p&&p.version,y=m&&m.v8,S,x;y&&(S=y.split("."),x=S[0]>0&&S[0]<4?1:+(S[0]+S[1])),!x&&c&&(S=c.match(/Edge\/(\d+)/),(!S||S[1]>=74)&&(S=c.match(/Chrome\/(\d+)/),S&&(x=+S[1]))),i.exports=x},function(i,u,o){var l=o(131),c=o(110);i.exports=Object.keys||function(p){return l(p,c)}},function(i,u,o){var l=o(69),c=Math.max,h=Math.min;i.exports=function(p,m){var y=l(p);return y<0?c(y+m,0):h(y,m)}},function(i,u){var o=Math.ceil,l=Math.floor;i.exports=function(c){var h=+c;return h!==h||h===0?0:(h>0?l:o)(h)}},function(i,u){i.exports={}},function(i,u){i.exports={}},function(i,u){i.exports=function(o,l){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:l}}},function(i,u,o){var l=o(131),c=o(110),h=c.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(m){return l(m,h)}},function(i,u,o){var l=o(37).f,c=o(34),h=o(27),p=h("toStringTag");i.exports=function(m,y,S){m&&!c(m=S?m:m.prototype,p)&&l(m,p,{configurable:!0,value:y})}},function(i,u,o){var l=o(62),c=o(15),h=o(81),p=o(38),m=o(43),y=o(119),S=c([].push),x=function(T){var _=T==1,N=T==2,M=T==3,D=T==4,W=T==6,$=T==7,Oe=T==5||W;return function(ge,de,ce,Me){for(var j=p(ge),Q=h(j),U=l(de,ce),I=m(Q),k=0,te=Me||y,V=_?te(ge,I):N||$?te(ge,0):void 0,Z,le;I>k;k++)if((Oe||k in Q)&&(Z=Q[k],le=U(Z,k,j),T))if(_)V[k]=le;else if(le)switch(T){case 3:return!0;case 5:return Z;case 6:return k;case 2:S(V,Z)}else switch(T){case 4:return!1;case 7:S(V,Z)}return W?-1:M||D?D:V}};i.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(i,u,o){var l=o(18),c=o(27),h=o(66),p=c("species");i.exports=function(m){return h>=51||!l(function(){var y=[],S=y.constructor={};return S[p]=function(){return{foo:1}},y[m](Boolean).foo!==1})}},function(i,u){var o=Function.prototype,l=o.apply,c=o.bind,h=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(c?h.bind(l):function(){return h.apply(l,arguments)})},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),m=o(154),y=o(32),S=o(45),x=o(156),T=o(123),_=o(90),N=o(40),M=o(59),D=o(113),W=o(124),$=o(102),Oe=o(151),ge=o(18),de=Oe.UNSUPPORTED_Y,ce=4294967295,Me=Math.min,j=[].push,Q=h(/./.exec),U=h(j),I=h("".slice),k=!ge(function(){var te=/(?:)/,V=te.exec;te.exec=function(){return V.apply(this,arguments)};var Z="ab".split(te);return Z.length!==2||Z[0]!=="a"||Z[1]!=="b"});p("split",function(te,V,Z){var le;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?le=function(Te,Re){var Pe=N(S(this)),Ke=Re===void 0?ce:Re>>>0;if(Ke===0)return[];if(Te===void 0)return[Pe];if(!m(Te))return c(V,Pe,Te,Ke);for(var gt=[],Nt=(Te.ignoreCase?"i":"")+(Te.multiline?"m":"")+(Te.unicode?"u":"")+(Te.sticky?"y":""),Vt=0,Ct=new RegExp(Te.source,Nt+"g"),Ge,bt,Ut;(Ge=c($,Ct,Pe))&&(bt=Ct.lastIndex,!(bt>Vt&&(U(gt,I(Pe,Vt,Ge.index)),Ge.length>1&&Ge.index<Pe.length&&l(j,gt,D(Ge,1)),Ut=Ge[0].length,Vt=bt,gt.length>=Ke)));)Ct.lastIndex===Ge.index&&Ct.lastIndex++;return Vt===Pe.length?(Ut||!Q(Ct,""))&&U(gt,""):U(gt,I(Pe,Vt)),gt.length>Ke?D(gt,0,Ke):gt}:"0".split(void 0,0).length?le=function(Te,Re){return Te===void 0&&Re===0?[]:c(V,this,Te,Re)}:le=V,[function(Re,Pe){var Ke=S(this),gt=Re==null?void 0:M(Re,te);return gt?c(gt,Re,Ke,Pe):c(le,N(Ke),Re,Pe)},function(Te,Re){var Pe=y(this),Ke=N(Te),gt=Z(le,Pe,Ke,Re,le!==V);if(gt.done)return gt.value;var Nt=x(Pe,RegExp),Vt=Pe.unicode,Ct=(Pe.ignoreCase?"i":"")+(Pe.multiline?"m":"")+(Pe.unicode?"u":"")+(de?"g":"y"),Ge=new Nt(de?"^(?:"+Pe.source+")":Pe,Ct),bt=Re===void 0?ce:Re>>>0;if(bt===0)return[];if(Ke.length===0)return W(Ge,Ke)===null?[Ke]:[];for(var Ut=0,ee=0,se=[];ee<Ke.length;){Ge.lastIndex=de?0:ee;var me=W(Ge,de?I(Ke,ee):Ke),Ue;if(me===null||(Ue=Me(_(Ge.lastIndex+(de?ee:0)),Ke.length))===Ut)ee=T(Ke,ee,Vt);else{if(U(se,I(Ke,Ut,ee)),se.length===bt)return se;for(var tt=1;tt<=me.length-1;tt++)if(U(se,me[tt]),se.length===bt)return se;ee=Ut=Ue}}return U(se,I(Ke,Ut)),se}]},!k,de)},function(i,u,o){var l=o(36),c=o(7),h=o(15),p=o(95),m=o(44),y=o(34),S=o(143),x=o(58),T=o(88),_=o(130),N=o(18),M=o(73).f,D=o(51).f,W=o(37).f,$=o(196),Oe=o(159).trim,ge="Number",de=c[ge],ce=de.prototype,Me=c.TypeError,j=h("".slice),Q=h("".charCodeAt),U=function(le){var Te=_(le,"number");return typeof Te=="bigint"?Te:I(Te)},I=function(le){var Te=_(le,"number"),Re,Pe,Ke,gt,Nt,Vt,Ct,Ge;if(T(Te))throw Me("Cannot convert a Symbol value to a number");if(typeof Te=="string"&&Te.length>2){if(Te=Oe(Te),Re=Q(Te,0),Re===43||Re===45){if(Pe=Q(Te,2),Pe===88||Pe===120)return NaN}else if(Re===48){switch(Q(Te,1)){case 66:case 98:Ke=2,gt=49;break;case 79:case 111:Ke=8,gt=55;break;default:return+Te}for(Nt=j(Te,2),Vt=Nt.length,Ct=0;Ct<Vt;Ct++)if(Ge=Q(Nt,Ct),Ge<48||Ge>gt)return NaN;return parseInt(Nt,Ke)}}return+Te};if(p(ge,!de(" 0o1")||!de("0b1")||de("+0x1"))){for(var k=function(Te){var Re=arguments.length<1?0:de(U(Te)),Pe=this;return x(ce,Pe)&&N(function(){$(Pe)})?S(Object(Re),Pe,k):Re},te=l?M(de):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),V=0,Z;te.length>V;V++)y(de,Z=te[V])&&!y(k,Z)&&W(k,Z,D(de,Z));k.prototype=ce,ce.constructor=k,m(c,ge,k)}},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(i,u,o){var l=o(7),c=o(15),h=o(18),p=o(50),m=l.Object,y=c("".split);i.exports=h(function(){return!m("z").propertyIsEnumerable(0)})?function(S){return p(S)=="String"?y(S,""):m(S)}:m},function(i,u){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},function(i,u,o){var l=o(27),c=o(54),h=o(37),p=l("unscopables"),m=Array.prototype;m[p]==null&&h.f(m,p,{configurable:!0,value:c(null)}),i.exports=function(y){m[p][y]=!0}},function(i,u,o){var l=o(65),c=o(107);(i.exports=function(h,p){return c[h]||(c[h]=p!==void 0?p:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(i,u,o){var l=o(15),c=0,h=Math.random(),p=l(1 .toString);i.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+p(++c+h,36)}},function(i,u,o){var l=o(7),c=o(33),h=l.document,p=c(h)&&c(h.createElement);i.exports=function(m){return p?h.createElement(m):{}}},function(i,u,o){var l=o(130),c=o(88);i.exports=function(h){var p=l(h,"string");return c(p)?p:p+""}},function(i,u,o){var l=o(7),c=o(46),h=o(28),p=o(58),m=o(128),y=l.Object;i.exports=m?function(S){return typeof S=="symbol"}:function(S){var x=c("Symbol");return h(x)&&p(x.prototype,y(S))}},function(i,u,o){var l=o(7),c=l.String;i.exports=function(h){try{return c(h)}catch{return"Object"}}},function(i,u,o){var l=o(69),c=Math.min;i.exports=function(h){return h>0?c(l(h),9007199254740991):0}},function(i,u,o){var l=o(84),c=o(85),h=l("keys");i.exports=function(p){return h[p]||(h[p]=c(p))}},function(i,u,o){var l=o(15),c=o(28),h=o(107),p=l(Function.toString);c(h.inspectSource)||(h.inspectSource=function(m){return p(m)}),i.exports=h.inspectSource},function(i,u,o){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,h=c&&!l.call({1:2},1);u.f=h?function(m){var y=c(this,m);return!!y&&y.enumerable}:l},function(i,u,o){var l=o(36),c=o(34),h=Function.prototype,p=l&&Object.getOwnPropertyDescriptor,m=c(h,"name"),y=m&&function(){}.name==="something",S=m&&(!l||l&&p(h,"name").configurable);i.exports={EXISTS:m,PROPER:y,CONFIGURABLE:S}},function(i,u,o){var l=o(18),c=o(28),h=/#|\.prototype\./,p=function(T,_){var N=y[m(T)];return N==x?!0:N==S?!1:c(_)?l(_):!!_},m=p.normalize=function(T){return String(T).replace(h,".").toLowerCase()},y=p.data={},S=p.NATIVE="N",x=p.POLYFILL="P";i.exports=p},function(i,u,o){var l=o(7),c=o(34),h=o(28),p=o(38),m=o(91),y=o(137),S=m("IE_PROTO"),x=l.Object,T=x.prototype;i.exports=y?x.getPrototypeOf:function(_){var N=p(_);if(c(N,S))return N[S];var M=N.constructor;return h(M)&&N instanceof M?M.prototype:N instanceof x?T:null}},function(i,u,o){var l=o(15),c=o(32),h=o(172);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p=!1,m={},y;try{y=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),y(m,[]),p=m instanceof Array}catch{}return function(x,T){return c(x),h(T),p?y(x,T):x.__proto__=T,x}}():void 0)},function(i,u,o){var l=o(7),c=o(116),h=o(28),p=o(50),m=o(27),y=m("toStringTag"),S=l.Object,x=p(function(){return arguments}())=="Arguments",T=function(_,N){try{return _[N]}catch{}};i.exports=c?p:function(_){var N,M,D;return _===void 0?"Undefined":_===null?"Null":typeof(M=T(N=S(_),y))=="string"?M:x?p(N):(D=p(N))=="Object"&&h(N.callee)?"Arguments":D}},function(i,u,o){var l=o(50);i.exports=Array.isArray||function(h){return l(h)=="Array"}},function(i,u,o){var l=o(15),c=o(18),h=o(28),p=o(98),m=o(46),y=o(92),S=function(){},x=[],T=m("Reflect","construct"),_=/^\s*(?:class|function)\b/,N=l(_.exec),M=!_.exec(S),D=function($){if(!h($))return!1;try{return T(S,x,$),!0}catch{return!1}},W=function($){if(!h($))return!1;switch(p($)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return M||!!N(_,y($))};i.exports=!T||c(function(){var $;return D(D.call)||!D(Object)||!D(function(){$=!0})||$})?W:D},function(i,u,o){var l=o(15);i.exports=l([].slice)},function(i,u,o){var l=o(35),c=o(15),h=o(40),p=o(184),m=o(151),y=o(84),S=o(54),x=o(56).get,T=o(185),_=o(186),N=y("native-string-replace",String.prototype.replace),M=RegExp.prototype.exec,D=M,W=c("".charAt),$=c("".indexOf),Oe=c("".replace),ge=c("".slice),de=function(){var Q=/a/,U=/b*/g;return l(M,Q,"a"),l(M,U,"a"),Q.lastIndex!==0||U.lastIndex!==0}(),ce=m.BROKEN_CARET,Me=/()??/.exec("")[1]!==void 0,j=de||Me||ce||T||_;j&&(D=function(U){var I=this,k=x(I),te=h(U),V=k.raw,Z,le,Te,Re,Pe,Ke,gt;if(V)return V.lastIndex=I.lastIndex,Z=l(D,V,te),I.lastIndex=V.lastIndex,Z;var Nt=k.groups,Vt=ce&&I.sticky,Ct=l(p,I),Ge=I.source,bt=0,Ut=te;if(Vt&&(Ct=Oe(Ct,"y",""),$(Ct,"g")===-1&&(Ct+="g"),Ut=ge(te,I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&W(te,I.lastIndex-1)!==`
`)&&(Ge="(?: "+Ge+")",Ut=" "+Ut,bt++),le=new RegExp("^(?:"+Ge+")",Ct)),Me&&(le=new RegExp("^"+Ge+"$(?!\\s)",Ct)),de&&(Te=I.lastIndex),Re=l(M,Vt?le:I,Ut),Vt?Re?(Re.input=ge(Re.input,bt),Re[0]=ge(Re[0],bt),Re.index=I.lastIndex,I.lastIndex+=Re[0].length):I.lastIndex=0:de&&Re&&(I.lastIndex=I.global?Re.index+Re[0].length:Te),Me&&Re&&Re.length>1&&l(N,Re[0],le,function(){for(Pe=1;Pe<arguments.length-2;Pe++)arguments[Pe]===void 0&&(Re[Pe]=void 0)}),Re&&Nt)for(Re.groups=Ke=S(null),Pe=0;Pe<Nt.length;Pe++)gt=Nt[Pe],Ke[gt[0]]=Re[gt[1]];return Re}),i.exports=D},function(i,u,o){var l=o(16),c=o(7),h=o(68),p=o(69),m=o(43),y=o(38),S=o(119),x=o(61),T=o(76),_=T("splice"),N=c.TypeError,M=Math.max,D=Math.min,W=9007199254740991,$="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!_},{splice:function(ge,de){var ce=y(this),Me=m(ce),j=h(ge,Me),Q=arguments.length,U,I,k,te,V,Z;if(Q===0?U=I=0:Q===1?(U=0,I=Me-j):(U=Q-2,I=D(M(p(de),0),Me-j)),Me+U-I>W)throw N($);for(k=S(ce,I),te=0;te<I;te++)V=j+te,V in ce&&x(k,te,ce[V]);if(k.length=I,U<I){for(te=j;te<Me-I;te++)V=te+I,Z=te+U,V in ce?ce[Z]=ce[V]:delete ce[Z];for(te=Me;te>Me-I+U;te--)delete ce[te-1]}else if(U>I)for(te=Me-I;te>j;te--)V=te+I-1,Z=te+U-1,V in ce?ce[Z]=ce[V]:delete ce[Z];for(te=0;te<U;te++)ce[te+j]=arguments[te+2];return ce.length=Me-I+U,k}})},function(i,u,o){var l=o(16),c=o(201),h=o(202);l({target:"String",proto:!0,forced:h("anchor")},{anchor:function(m){return c(this,"a","name",m)}})},function(i,u,o){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;u.a=c}).call(this,o(82))},function(i,u,o){(function(l){var c=o(31),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,m=p&&p.exports===h,y=m?c.a.Buffer:void 0,S=y?y.allocUnsafe:void 0;function x(T,_){if(_)return T.slice();var N=T.length,M=S?S(N):new T.constructor(N);return T.copy(M),M}u.a=x}).call(this,o(121)(i))},function(i,u,o){var l=o(7),c=o(108),h="__core-js_shared__",p=l[h]||c(h,{});i.exports=p},function(i,u,o){var l=o(7),c=Object.defineProperty;i.exports=function(h,p){try{c(l,h,{value:p,configurable:!0,writable:!0})}catch{l[h]=p}return p}},function(i,u,o){var l=o(66),c=o(18);i.exports=!!Object.getOwnPropertySymbols&&!c(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(i,u){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(i,u,o){var l=o(16),c=o(35),h=o(65),p=o(94),m=o(28),y=o(171),S=o(96),x=o(97),T=o(74),_=o(57),N=o(44),M=o(27),D=o(71),W=o(136),$=p.PROPER,Oe=p.CONFIGURABLE,ge=W.IteratorPrototype,de=W.BUGGY_SAFARI_ITERATORS,ce=M("iterator"),Me="keys",j="values",Q="entries",U=function(){return this};i.exports=function(I,k,te,V,Z,le,Te){y(te,k,V);var Re=function(ee){if(ee===Z&&Vt)return Vt;if(!de&&ee in gt)return gt[ee];switch(ee){case Me:return function(){return new te(this,ee)};case j:return function(){return new te(this,ee)};case Q:return function(){return new te(this,ee)}}return function(){return new te(this)}},Pe=k+" Iterator",Ke=!1,gt=I.prototype,Nt=gt[ce]||gt["@@iterator"]||Z&&gt[Z],Vt=!de&&Nt||Re(Z),Ct=k=="Array"&&gt.entries||Nt,Ge,bt,Ut;if(Ct&&(Ge=S(Ct.call(new I)),Ge!==Object.prototype&&Ge.next&&(!h&&S(Ge)!==ge&&(x?x(Ge,ge):m(Ge[ce])||N(Ge,ce,U)),T(Ge,Pe,!0,!0),h&&(D[Pe]=U))),$&&Z==j&&Nt&&Nt.name!==j&&(!h&&Oe?_(gt,"name",j):(Ke=!0,Vt=function(){return c(Nt,this)})),Z)if(bt={values:Re(j),keys:le?Vt:Re(Me),entries:Re(Q)},Te)for(Ut in bt)(de||Ke||!(Ut in gt))&&N(gt,Ut,bt[Ut]);else l({target:k,proto:!0,forced:de||Ke},bt);return(!h||Te)&&gt[ce]!==Vt&&N(gt,ce,Vt,{name:Z}),D[k]=Vt,bt}},function(i,u){u.f=Object.getOwnPropertySymbols},function(i,u,o){var l=o(7),c=o(68),h=o(43),p=o(61),m=l.Array,y=Math.max;i.exports=function(S,x,T){for(var _=h(S),N=c(x,_),M=c(T===void 0?_:T,_),D=m(y(M-N,0)),W=0;N<M;N++,W++)p(D,W,S[N]);return D.length=W,D}},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(32),m=o(89),y=o(140),S=o(43),x=o(58),T=o(141),_=o(115),N=o(142),M=l.TypeError,D=function($,Oe){this.stopped=$,this.result=Oe},W=D.prototype;i.exports=function($,Oe,ge){var de=ge&&ge.that,ce=!!(ge&&ge.AS_ENTRIES),Me=!!(ge&&ge.IS_ITERATOR),j=!!(ge&&ge.INTERRUPTED),Q=c(Oe,de),U,I,k,te,V,Z,le,Te=function(Pe){return U&&N(U,"normal",Pe),new D(!0,Pe)},Re=function(Pe){return ce?(p(Pe),j?Q(Pe[0],Pe[1],Te):Q(Pe[0],Pe[1])):j?Q(Pe,Te):Q(Pe)};if(Me)U=$;else{if(I=_($),!I)throw M(m($)+" is not iterable");if(y(I)){for(k=0,te=S($);te>k;k++)if(V=Re($[k]),V&&x(W,V))return V;return new D(!1)}U=T($,I)}for(Z=U.next;!(le=h(Z,U)).done;){try{V=Re(le.value)}catch(Pe){N(U,"throw",Pe)}if(typeof V=="object"&&V&&x(W,V))return V}return new D(!1)}},function(i,u,o){var l=o(98),c=o(59),h=o(71),p=o(27),m=p("iterator");i.exports=function(y){if(y!=null)return c(y,m)||c(y,"@@iterator")||h[l(y)]}},function(i,u,o){var l=o(27),c=l("toStringTag"),h={};h[c]="z",i.exports=String(h)==="[object z]"},function(i,u,o){var l=o(7),c=o(58),h=l.TypeError;i.exports=function(p,m){if(c(m,p))return p;throw h("Incorrect invocation")}},function(i,u,o){var l=o(27),c=l("iterator"),h=!1;try{var p=0,m={next:function(){return{done:!!p++}},return:function(){h=!0}};m[c]=function(){return this},Array.from(m,function(){throw 2})}catch{}i.exports=function(y,S){if(!S&&!h)return!1;var x=!1;try{var T={};T[c]=function(){return{next:function(){return{done:x=!0}}}},y(T)}catch{}return x}},function(i,u,o){var l=o(180);i.exports=function(c,h){return new(l(c))(h===0?0:h)}},function(i,u,o){var l=o(18);i.exports=function(c,h){var p=[][c];return!!p&&l(function(){p.call(null,h||function(){throw 1},1)})}},function(i,u){i.exports=function(o){if(!o.webpackPolyfill){var l=Object.create(o);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(i,u,o){o(19);var l=o(15),c=o(44),h=o(102),p=o(18),m=o(27),y=o(57),S=m("species"),x=RegExp.prototype;i.exports=function(T,_,N,M){var D=m(T),W=!p(function(){var de={};return de[D]=function(){return 7},""[T](de)!=7}),$=W&&!p(function(){var de=!1,ce=/a/;return T==="split"&&(ce={},ce.constructor={},ce.constructor[S]=function(){return ce},ce.flags="",ce[D]=/./[D]),ce.exec=function(){return de=!0,null},ce[D](""),!de});if(!W||!$||N){var Oe=l(/./[D]),ge=_(D,""[T],function(de,ce,Me,j,Q){var U=l(de),I=ce.exec;return I===h||I===x.exec?W&&!Q?{done:!0,value:Oe(ce,Me,j)}:{done:!0,value:U(Me,ce,j)}:{done:!1}});c(String.prototype,T,ge[0]),c(x,D,ge[1])}M&&y(x[D],"sham",!0)}},function(i,u,o){var l=o(146).charAt;i.exports=function(c,h,p){return h+(p?l(c,h).length:1)}},function(i,u,o){var l=o(7),c=o(35),h=o(32),p=o(28),m=o(50),y=o(102),S=l.TypeError;i.exports=function(x,T){var _=x.exec;if(p(_)){var N=c(_,x,T);return N!==null&&h(N),N}if(m(x)==="RegExp")return c(y,x,T);throw S("RegExp#exec called on incompatible receiver")}},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),m=o(18),y=o(32),S=o(28),x=o(69),T=o(90),_=o(40),N=o(45),M=o(123),D=o(59),W=o(197),$=o(124),Oe=o(27),ge=Oe("replace"),de=Math.max,ce=Math.min,Me=h([].concat),j=h([].push),Q=h("".indexOf),U=h("".slice),I=function(Z){return Z===void 0?Z:String(Z)},k=function(){return"a".replace(/./,"$0")==="$0"}(),te=function(){return/./[ge]?/./[ge]("a","$0")==="":!1}(),V=!m(function(){var Z=/./;return Z.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(Z,"$<a>")!=="7"});p("replace",function(Z,le,Te){var Re=te?"$":"$0";return[function(Ke,gt){var Nt=N(this),Vt=Ke==null?void 0:D(Ke,ge);return Vt?c(Vt,Ke,Nt,gt):c(le,_(Nt),Ke,gt)},function(Pe,Ke){var gt=y(this),Nt=_(Pe);if(typeof Ke=="string"&&Q(Ke,Re)===-1&&Q(Ke,"$<")===-1){var Vt=Te(le,gt,Nt,Ke);if(Vt.done)return Vt.value}var Ct=S(Ke);Ct||(Ke=_(Ke));var Ge=gt.global;if(Ge){var bt=gt.unicode;gt.lastIndex=0}for(var Ut=[];;){var ee=$(gt,Nt);if(ee===null||(j(Ut,ee),!Ge))break;var se=_(ee[0]);se===""&&(gt.lastIndex=M(Nt,T(gt.lastIndex),bt))}for(var me="",Ue=0,tt=0;tt<Ut.length;tt++){ee=Ut[tt];for(var He=_(ee[0]),Lt=de(ce(x(ee.index),Nt.length),0),nr=[],tr=1;tr<ee.length;tr++)j(nr,I(ee[tr]));var Jt=ee.groups;if(Ct){var rt=Me([He],nr,Lt,Nt);Jt!==void 0&&j(rt,Jt);var Er=_(l(Ke,void 0,rt))}else Er=W(He,Nt,Lt,nr,Jt,Ke);Lt>=Ue&&(me+=U(Nt,Ue,Lt)+Er,Ue=Lt+He.length)}return me+U(Nt,Ue)}]},!V||!k||te)},function(i,u,o){var l=o(50),c=o(7);i.exports=l(c.process)=="process"},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(i,u,o){var l=o(109);i.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(i,u,o){var l=o(36),c=o(18),h=o(86);i.exports=!l&&!c(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(i,u,o){var l=o(7),c=o(35),h=o(33),p=o(88),m=o(59),y=o(169),S=o(27),x=l.TypeError,T=S("toPrimitive");i.exports=function(_,N){if(!h(_)||p(_))return _;var M=m(_,T),D;if(M){if(N===void 0&&(N="default"),D=c(M,_,N),!h(D)||p(D))return D;throw x("Can't convert object to primitive value")}return N===void 0&&(N="number"),y(_,N)}},function(i,u,o){var l=o(15),c=o(34),h=o(39),p=o(132).indexOf,m=o(70),y=l([].push);i.exports=function(S,x){var T=h(S),_=0,N=[],M;for(M in T)!c(m,M)&&c(T,M)&&y(N,M);for(;x.length>_;)c(T,M=x[_++])&&(~p(N,M)||y(N,M));return N}},function(i,u,o){var l=o(39),c=o(68),h=o(43),p=function(m){return function(y,S,x){var T=l(y),_=h(T),N=c(x,_),M;if(m&&S!=S){for(;_>N;)if(M=T[N++],M!=M)return!0}else for(;_>N;N++)if((m||N in T)&&T[N]===S)return m||N||0;return!m&&-1}};i.exports={includes:p(!0),indexOf:p(!1)}},function(i,u,o){var l=o(46);i.exports=l("document","documentElement")},function(i,u,o){var l=o(34),c=o(135),h=o(51),p=o(37);i.exports=function(m,y){for(var S=c(y),x=p.f,T=h.f,_=0;_<S.length;_++){var N=S[_];l(m,N)||x(m,N,T(y,N))}}},function(i,u,o){var l=o(46),c=o(15),h=o(73),p=o(112),m=o(32),y=c([].concat);i.exports=l("Reflect","ownKeys")||function(x){var T=h.f(m(x)),_=p.f;return _?y(T,_(x)):T}},function(i,u,o){var l=o(18),c=o(28),h=o(54),p=o(96),m=o(44),y=o(27),S=o(65),x=y("iterator"),T=!1,_,N,M;[].keys&&(M=[].keys(),"next"in M?(N=p(p(M)),N!==Object.prototype&&(_=N)):T=!0);var D=_==null||l(function(){var W={};return _[x].call(W)!==W});D?_={}:S&&(_=h(_)),c(_[x])||m(_,x,function(){return this}),i.exports={IteratorPrototype:_,BUGGY_SAFARI_ITERATORS:T}},function(i,u,o){var l=o(18);i.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(i,u,o){var l=o(16),c=o(15),h=o(70),p=o(33),m=o(34),y=o(37).f,S=o(73),x=o(139),T=o(174),_=o(85),N=o(176),M=!1,D=_("meta"),W=0,$=function(j){y(j,D,{value:{objectID:"O"+W++,weakData:{}}})},Oe=function(j,Q){if(!p(j))return typeof j=="symbol"?j:(typeof j=="string"?"S":"P")+j;if(!m(j,D)){if(!T(j))return"F";if(!Q)return"E";$(j)}return j[D].objectID},ge=function(j,Q){if(!m(j,D)){if(!T(j))return!0;if(!Q)return!1;$(j)}return j[D].weakData},de=function(j){return N&&M&&T(j)&&!m(j,D)&&$(j),j},ce=function(){Me.enable=function(){},M=!0;var j=S.f,Q=c([].splice),U={};U[D]=1,j(U).length&&(S.f=function(I){for(var k=j(I),te=0,V=k.length;te<V;te++)if(k[te]===D){Q(k,te,1);break}return k},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},Me=i.exports={enable:ce,fastKey:Oe,getWeakData:ge,onFreeze:de};h[D]=!0},function(i,u,o){var l=o(50),c=o(39),h=o(73).f,p=o(113),m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(S){try{return h(S)}catch{return p(m)}};i.exports.f=function(x){return m&&l(x)=="Window"?y(x):h(c(x))}},function(i,u,o){var l=o(27),c=o(71),h=l("iterator"),p=Array.prototype;i.exports=function(m){return m!==void 0&&(c.Array===m||p[h]===m)}},function(i,u,o){var l=o(7),c=o(35),h=o(55),p=o(32),m=o(89),y=o(115),S=l.TypeError;i.exports=function(x,T){var _=arguments.length<2?y(x):T;if(h(_))return p(c(_,x));throw S(m(x)+" is not iterable")}},function(i,u,o){var l=o(35),c=o(32),h=o(59);i.exports=function(p,m,y){var S,x;c(p);try{if(S=h(p,"return"),!S){if(m==="throw")throw y;return y}S=l(S,p)}catch(T){x=!0,S=T}if(m==="throw")throw y;if(x)throw S;return c(S),y}},function(i,u,o){var l=o(28),c=o(33),h=o(97);i.exports=function(p,m,y){var S,x;return h&&l(S=m.constructor)&&S!==y&&c(x=S.prototype)&&x!==y.prototype&&h(p,x),p}},function(i,u,o){var l=o(44);i.exports=function(c,h,p){for(var m in h)l(c,m,h[m],p);return c}},function(i,u,o){var l=o(46),c=o(37),h=o(27),p=o(36),m=h("species");i.exports=function(y){var S=l(y),x=c.f;p&&S&&!S[m]&&x(S,m,{configurable:!0,get:function(){return this}})}},function(i,u,o){var l=o(15),c=o(69),h=o(40),p=o(45),m=l("".charAt),y=l("".charCodeAt),S=l("".slice),x=function(T){return function(_,N){var M=h(p(_)),D=c(N),W=M.length,$,Oe;return D<0||D>=W?T?"":void 0:($=y(M,D),$<55296||$>56319||D+1===W||(Oe=y(M,D+1))<56320||Oe>57343?T?m(M,D):$:T?S(M,D,D+2):($-55296<<10)+(Oe-56320)+65536)}};i.exports={codeAt:x(!1),charAt:x(!0)}},function(i,u){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(i,u,o){var l=o(86),c=l("span").classList,h=c&&c.constructor&&c.constructor.prototype;i.exports=h===Object.prototype?void 0:h},function(i,u,o){var l=o(27);u.f=l},function(i,u,o){var l=o(181),c=o(34),h=o(149),p=o(37).f;i.exports=function(m){var y=l.Symbol||(l.Symbol={});c(y,m)||p(y,m,{value:h.f(m)})}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp,p=l(function(){var S=h("a","y");return S.lastIndex=2,S.exec("abcd")!=null}),m=p||l(function(){return!h("a","y").sticky}),y=p||l(function(){var S=h("^r","gy");return S.lastIndex=2,S.exec("str")!=null});i.exports={BROKEN_CARET:y,MISSED_STICKY:m,UNSUPPORTED_Y:p}},function(i,u,o){var l=o(16),c=o(132).includes,h=o(83);l({target:"Array",proto:!0},{includes:function(m){return c(this,m,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(i,u,o){var l=o(16),c=o(15),h=o(193),p=o(45),m=o(40),y=o(194),S=c("".indexOf);l({target:"String",proto:!0,forced:!y("includes")},{includes:function(T){return!!~S(m(p(this)),m(h(T)),arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(33),c=o(50),h=o(27),p=h("match");i.exports=function(m){var y;return l(m)&&((y=m[p])!==void 0?!!y:c(m)=="RegExp")}},function(i,u){var o=i.exports={},l,c;function h(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=h}catch{l=h}try{typeof clearTimeout=="function"?c=clearTimeout:c=p}catch{c=p}})();function m($){if(l===setTimeout)return setTimeout($,0);if((l===h||!l)&&setTimeout)return l=setTimeout,setTimeout($,0);try{return l($,0)}catch{try{return l.call(null,$,0)}catch{return l.call(this,$,0)}}}function y($){if(c===clearTimeout)return clearTimeout($);if((c===p||!c)&&clearTimeout)return c=clearTimeout,clearTimeout($);try{return c($)}catch{try{return c.call(null,$)}catch{return c.call(this,$)}}}var S=[],x=!1,T,_=-1;function N(){!x||!T||(x=!1,T.length?S=T.concat(S):_=-1,S.length&&M())}function M(){if(!x){var $=m(N);x=!0;for(var Oe=S.length;Oe;){for(T=S,S=[];++_<Oe;)T&&T[_].run();_=-1,Oe=S.length}T=null,x=!1,y($)}}o.nextTick=function($){var Oe=new Array(arguments.length-1);if(arguments.length>1)for(var ge=1;ge<arguments.length;ge++)Oe[ge-1]=arguments[ge];S.push(new D($,Oe)),S.length===1&&!x&&m(M)};function D($,Oe){this.fun=$,this.array=Oe}D.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function W(){}o.on=W,o.addListener=W,o.once=W,o.off=W,o.removeListener=W,o.removeAllListeners=W,o.emit=W,o.prependListener=W,o.prependOnceListener=W,o.listeners=function($){return[]},o.binding=function($){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function($){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(i,u,o){var l=o(32),c=o(157),h=o(27),p=h("species");i.exports=function(m,y){var S=l(m).constructor,x;return S===void 0||(x=l(S)[p])==null?y:c(x)}},function(i,u,o){var l=o(7),c=o(100),h=o(89),p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not a constructor")}},function(i,u,o){var l=o(16),c=o(159).trim,h=o(195);l({target:"String",proto:!0,forced:h("trim")},{trim:function(){return c(this)}})},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=o(160),m=l("".replace),y="["+p+"]",S=RegExp("^"+y+y+"*"),x=RegExp(y+y+"*$"),T=function(_){return function(N){var M=h(c(N));return _&1&&(M=m(M,S,"")),_&2&&(M=m(M,x,"")),M}};i.exports={start:T(1),end:T(2),trim:T(3)}},function(i,u){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(i,u,o){var l=o(35),c=o(122),h=o(32),p=o(90),m=o(40),y=o(45),S=o(59),x=o(123),T=o(124);c("match",function(_,N,M){return[function(W){var $=y(this),Oe=W==null?void 0:S(W,_);return Oe?l(Oe,W,$):new RegExp(W)[_](m($))},function(D){var W=h(this),$=m(D),Oe=M(N,W,$);if(Oe.done)return Oe.value;if(!W.global)return T(W,$);var ge=W.unicode;W.lastIndex=0;for(var de=[],ce=0,Me;(Me=T(W,$))!==null;){var j=m(Me[0]);de[ce]=j,j===""&&(W.lastIndex=x($,p(W.lastIndex),ge)),ce++}return ce===0?null:de}]})},function(i,u,o){var l=o(7),c=o(77),h=o(62),p=o(28),m=o(34),y=o(18),S=o(133),x=o(101),T=o(86),_=o(163),N=o(126),M=l.setImmediate,D=l.clearImmediate,W=l.process,$=l.Dispatch,Oe=l.Function,ge=l.MessageChannel,de=l.String,ce=0,Me={},j="onreadystatechange",Q,U,I,k;try{Q=l.location}catch{}var te=function(Te){if(m(Me,Te)){var Re=Me[Te];delete Me[Te],Re()}},V=function(Te){return function(){te(Te)}},Z=function(Te){te(Te.data)},le=function(Te){l.postMessage(de(Te),Q.protocol+"//"+Q.host)};(!M||!D)&&(M=function(Re){var Pe=x(arguments,1);return Me[++ce]=function(){c(p(Re)?Re:Oe(Re),void 0,Pe)},U(ce),ce},D=function(Re){delete Me[Re]},N?U=function(Te){W.nextTick(V(Te))}:$&&$.now?U=function(Te){$.now(V(Te))}:ge&&!_?(I=new ge,k=I.port2,I.port1.onmessage=Z,U=h(k.postMessage,k)):l.addEventListener&&p(l.postMessage)&&!l.importScripts&&Q&&Q.protocol!=="file:"&&!y(le)?(U=le,l.addEventListener("message",Z,!1)):j in T("script")?U=function(Te){S.appendChild(T("script"))[j]=function(){S.removeChild(this),te(Te)}}:U=function(Te){setTimeout(V(Te),0)}),i.exports={set:M,clear:D}},function(i,u,o){var l=o(53);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(i,u,o){var l=o(55),c=function(h){var p,m;this.promise=new h(function(y,S){if(p!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");p=y,m=S}),this.resolve=l(p),this.reject=l(m)};i.exports.f=function(h){return new c(h)}},function(i,u,o){function l(){return!1}u.a=l},function(i,u,o){(function(l){o.d(u,"a",function(){return ce});var c=o(0);function h(j){throw new Error("[mobx-utils] "+j)}function p(j,Q){Q===void 0&&(Q="Illegal state"),j||h(Q)}var m=function(j){return j&&j!==Object.prototype&&Object.getOwnPropertyNames(j).concat(m(Object.getPrototypeOf(j))||[])},y=function(j){var Q=m(j),U=Q.filter(function(I,k){return Q.indexOf(I)===k});return U},S=function(j){return y(j).filter(function(Q){return Q!=="constructor"&&!~Q.indexOf("__")})},x="pending",T="fulfilled",_="rejected";function N(j){switch(this.state){case x:return j.pending&&j.pending(this.value);case _:return j.rejected&&j.rejected(this.value);case T:return j.fulfilled?j.fulfilled(this.value):this.value}}function M(j,Q){if(p(arguments.length<=2,"fromPromise expects up to two arguments"),p(typeof j=="function"||typeof j=="object"&&j&&typeof j.then=="function","Please pass a promise or function to fromPromise"),j.isPromiseBasedObservable===!0)return j;typeof j=="function"&&(j=new Promise(j));var U=j;j.then(Object(c.k)("observableFromPromise-resolve",function(k){U.value=k,U.state=T}),Object(c.k)("observableFromPromise-reject",function(k){U.value=k,U.state=_})),U.isPromiseBasedObservable=!0,U.case=N;var I=Q&&Q.state===T?Q.value:void 0;return Object(c.q)(U,{value:I,state:x},{},{deep:!1}),U}(function(j){j.reject=Object(c.k)("fromPromise.reject",function(U){var I=j(Promise.reject(U));return I.state=_,I.value=U,I});function Q(U){U===void 0&&(U=void 0);var I=j(Promise.resolve(U));return I.state=T,I.value=U,I}j.resolve=Object(c.k)("fromPromise.resolve",Q)})(M||(M={}));var D=function(j,Q,U,I){var k=arguments.length,te=k<3?Q:I===null?I=Object.getOwnPropertyDescriptor(Q,U):I,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(j,Q,U,I);else for(var Z=j.length-1;Z>=0;Z--)(V=j[Z])&&(te=(k<3?V(te):k>3?V(Q,U,te):V(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te};(function(){function j(Q,U){var I=this;Object(c.G)(function(){I.current=U,I.subscription=Q.subscribe(I)})}return j.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},j.prototype.next=function(Q){this.current=Q},j.prototype.complete=function(){this.dispose()},j.prototype.error=function(Q){this.current=Q,this.dispose()},D([c.C.ref],j.prototype,"current",void 0),D([c.k.bound],j.prototype,"next",null),D([c.k.bound],j.prototype,"complete",null),D([c.k.bound],j.prototype,"error",null),j})();var W=function(){return W=Object.assign||function(j){for(var Q,U=1,I=arguments.length;U<I;U++){Q=arguments[U];for(var k in Q)Object.prototype.hasOwnProperty.call(Q,k)&&(j[k]=Q[k])}return j},W.apply(this,arguments)},$=function(j,Q,U,I){var k=arguments.length,te=k<3?Q:I===null?I=Object.getOwnPropertyDescriptor(Q,U):I,V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(j,Q,U,I);else for(var Z=j.length-1;Z>=0;Z--)(V=j[Z])&&(te=(k<3?V(te):k>3?V(Q,U,te):V(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te},Oe=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function j(Q){var U=this;this.model=Q,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(I){return U.localValues.has(I)},p(Object(c.A)(Q),"createViewModel expects an observable object"),S(Q).forEach(function(I){if(!(I===c.a||I==="__mobxDidRunLazyInitializers")){if(p(Oe.indexOf(I)===-1,"The propertyname "+I+" is reserved and cannot be used with viewModels"),Object(c.w)(Q,I)){var k=Object(c.h)(Q,I).derivation;U.localComputedValues.set(I,Object(c.m)(k.bind(U)))}var te=Object.getOwnPropertyDescriptor(Q,I),V=te?{enumerable:te.enumerable}:{};Object.defineProperty(U,I,W(W({},V),{configurable:!0,get:function(){return Object(c.w)(Q,I)?U.localComputedValues.get(I).get():U.isPropertyDirty(I)?U.localValues.get(I):U.model[I]},set:Object(c.k)(function(Z){Z!==U.model[I]?U.localValues.set(I,Z):U.localValues.delete(I)})}))}})}return Object.defineProperty(j.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),j.prototype.submit=function(){var Q=this;Object(c.B)(this.localValues).forEach(function(U){var I=Q.localValues.get(U),k=Q.model[U];Object(c.y)(k)?k.replace(I):Object(c.z)(k)?(k.clear(),k.merge(I)):Object(c.v)(I)||(Q.model[U]=I)}),this.localValues.clear()},j.prototype.reset=function(){this.localValues.clear()},j.prototype.resetProperty=function(Q){this.localValues.delete(Q)},$([c.m],j.prototype,"isDirty",null),$([c.m],j.prototype,"changedValues",null),$([c.k.bound],j.prototype,"submit",null),$([c.k.bound],j.prototype,"reset",null),$([c.k.bound],j.prototype,"resetProperty",null),j})();function ge(j){if(!j)return"ROOT";for(var Q=[];j.parent;)Q.push(j.path),j=j.parent;return Q.reverse().join("/")}function de(j){return Object(c.A)(j)||Object(c.y)(j)||Object(c.z)(j)}function ce(j,Q){var U=new WeakMap;function I(Z){var le=U.get(Z.object);k(Z,le),Q(Z,ge(le),j)}function k(Z,le){switch(Z.type){case"add":te(Z.newValue,le,Z.name);break;case"update":V(Z.oldValue),te(Z.newValue,le,Z.name||""+Z.index);break;case"remove":case"delete":V(Z.oldValue);break;case"splice":Z.removed.map(V),Z.added.forEach(function(Pe,Ke){return te(Pe,le,""+(Z.index+Ke))});for(var Te=Z.index+Z.addedCount;Te<Z.object.length;Te++)if(de(Z.object[Te])){var Re=U.get(Z.object[Te]);Re&&(Re.path=""+Te)}break}}function te(Z,le,Te){if(de(Z)){var Re=U.get(Z);if(Re){if(Re.parent!==le||Re.path!==Te)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+ge(le)+"/"+Te+"',")+(" but it already exists at '"+ge(Re.parent)+"/"+Re.path+"'"))}else{var Pe={parent:le,path:Te,dispose:Object(c.D)(Z,I)};U.set(Z,Pe),Object(c.p)(Z).forEach(function(Ke){var gt=Ke[0],Nt=Ke[1];return te(Nt,Pe,gt)})}}}function V(Z){if(de(Z)){var le=U.get(Z);if(!le)return;U.delete(Z),le.dispose(),Object(c.L)(Z).forEach(V)}}return te(j,void 0,""),function(){V(j)}}var Me=function(){var j=function(Q,U){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var te in k)k.hasOwnProperty(te)&&(I[te]=k[te])},j(Q,U)};return function(Q,U){j(Q,U);function I(){this.constructor=Q}Q.prototype=U===null?Object.create(U):(I.prototype=U.prototype,new I)}}();(function(j){Me(Q,j);function Q(U,I,k){var te=k===void 0?{}:k,V=te.name,Z=V===void 0?"ogm"+(Math.random()*1e3|0):V,le=te.keyToName,Te=le===void 0?function(Ke){return""+Ke}:le,Re=j.call(this)||this;Re._keyToName=Te,Re._groupBy=I,Re._ogmInfoKey=Symbol("ogmInfo"+Z),Re._base=U;for(var Pe=0;Pe<U.length;Pe++)Re._addItem(U[Pe]);return Re._disposeBaseObserver=Object(c.D)(Re._base,function(Ke){if(Ke.type==="splice")Object(c.J)(function(){for(var gt=0,Nt=Ke.removed;gt<Nt.length;gt++){var Vt=Nt[gt];Re._removeItem(Vt)}for(var Ct=0,Ge=Ke.added;Ct<Ge.length;Ct++){var bt=Ge[Ct];Re._addItem(bt)}});else if(Ke.type==="update")Object(c.J)(function(){Re._removeItem(Ke.oldValue),Re._addItem(Ke.newValue)});else throw new Error("illegal state")}),Re}return Q.prototype.clear=function(){throw new Error("not supported")},Q.prototype.delete=function(U){throw new Error("not supported")},Q.prototype.set=function(U,I){throw new Error("not supported")},Q.prototype.dispose=function(){this._disposeBaseObserver();for(var U=0;U<this._base.length;U++){var I=this._base[U],k=I[this._ogmInfoKey];k.reaction(),delete I[this._ogmInfoKey]}},Q.prototype._getGroupArr=function(U){var I=j.prototype.get.call(this,U);return I===void 0&&(I=Object(c.C)([],{name:"GroupArray["+this._keyToName(U)+"]",deep:!1}),j.prototype.set.call(this,U,I)),I},Q.prototype._removeFromGroupArr=function(U,I){var k=j.prototype.get.call(this,U);k.length===1?j.prototype.delete.call(this,U):(I===k.length-1||(k[I]=k[k.length-1],k[I][this._ogmInfoKey].groupArrIndex=I),k.length--)},Q.prototype._addItem=function(U){var I=this,k=this._groupBy(U),te=this._getGroupArr(k),V={groupByValue:k,groupArrIndex:te.length,reaction:Object(c.F)(function(){return I._groupBy(U)},function(Z,le){var Te=U[I._ogmInfoKey];I._removeFromGroupArr(Te.groupByValue,Te.groupArrIndex);var Re=I._getGroupArr(Z),Pe=Re.length;Re.push(U),Te.groupByValue=Z,Te.groupArrIndex=Pe})};Object.defineProperty(U,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:V}),te.push(U)},Q.prototype._removeItem=function(U){var I=U[this._ogmInfoKey];this._removeFromGroupArr(I.groupByValue,I.groupArrIndex),I.reaction(),delete U[this._ogmInfoKey]},Q})(c.b),Promise.resolve(),typeof queueMicrotask<"u"||typeof l<"u"&&l.nextTick}).call(this,o(155))},function(i,u,o){var l;(function(c,h,p){if(!c)return;for(var m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T,_=1;_<20;++_)m[111+_]="f"+_;for(_=0;_<=9;++_)m[_+96]=_.toString();function N(I,k,te){if(I.addEventListener){I.addEventListener(k,te,!1);return}I.attachEvent("on"+k,te)}function M(I){if(I.type=="keypress"){var k=String.fromCharCode(I.which);return I.shiftKey||(k=k.toLowerCase()),k}return m[I.which]?m[I.which]:y[I.which]?y[I.which]:String.fromCharCode(I.which).toLowerCase()}function D(I,k){return I.sort().join(",")===k.sort().join(",")}function W(I){var k=[];return I.shiftKey&&k.push("shift"),I.altKey&&k.push("alt"),I.ctrlKey&&k.push("ctrl"),I.metaKey&&k.push("meta"),k}function $(I){if(I.preventDefault){I.preventDefault();return}I.returnValue=!1}function Oe(I){if(I.stopPropagation){I.stopPropagation();return}I.cancelBubble=!0}function ge(I){return I=="shift"||I=="ctrl"||I=="alt"||I=="meta"}function de(){if(!T){T={};for(var I in m)I>95&&I<112||m.hasOwnProperty(I)&&(T[m[I]]=I)}return T}function ce(I,k,te){return te||(te=de()[I]?"keydown":"keypress"),te=="keypress"&&k.length&&(te="keydown"),te}function Me(I){return I==="+"?["+"]:(I=I.replace(/\+{2}/g,"+plus"),I.split("+"))}function j(I,k){var te,V,Z,le=[];for(te=Me(I),Z=0;Z<te.length;++Z)V=te[Z],x[V]&&(V=x[V]),k&&k!="keypress"&&S[V]&&(V=S[V],le.push("shift")),ge(V)&&le.push(V);return k=ce(V,le,k),{key:V,modifiers:le,action:k}}function Q(I,k){return I===null||I===h?!1:I===k?!0:Q(I.parentNode,k)}function U(I){var k=this;if(I=I||h,!(k instanceof U))return new U(I);k.target=I,k._callbacks={},k._directMap={};var te={},V,Z=!1,le=!1,Te=!1;function Re(Ge){Ge=Ge||{};var bt=!1,Ut;for(Ut in te){if(Ge[Ut]){bt=!0;continue}te[Ut]=0}bt||(Te=!1)}function Pe(Ge,bt,Ut,ee,se,me){var Ue,tt,He=[],Lt=Ut.type;if(!k._callbacks[Ge])return[];for(Lt=="keyup"&&ge(Ge)&&(bt=[Ge]),Ue=0;Ue<k._callbacks[Ge].length;++Ue)if(tt=k._callbacks[Ge][Ue],!(!ee&&tt.seq&&te[tt.seq]!=tt.level)&&Lt==tt.action&&(Lt=="keypress"&&!Ut.metaKey&&!Ut.ctrlKey||D(bt,tt.modifiers))){var nr=!ee&&tt.combo==se,tr=ee&&tt.seq==ee&&tt.level==me;(nr||tr)&&k._callbacks[Ge].splice(Ue,1),He.push(tt)}return He}function Ke(Ge,bt,Ut,ee){k.stopCallback(bt,bt.target||bt.srcElement,Ut,ee)||Ge(bt,Ut)===!1&&($(bt),Oe(bt))}k._handleKey=function(Ge,bt,Ut){var ee=Pe(Ge,bt,Ut),se,me={},Ue=0,tt=!1;for(se=0;se<ee.length;++se)ee[se].seq&&(Ue=Math.max(Ue,ee[se].level));for(se=0;se<ee.length;++se){if(ee[se].seq){if(ee[se].level!=Ue)continue;tt=!0,me[ee[se].seq]=1,Ke(ee[se].callback,Ut,ee[se].combo,ee[se].seq);continue}tt||Ke(ee[se].callback,Ut,ee[se].combo)}var He=Ut.type=="keypress"&&le;Ut.type==Te&&!ge(Ge)&&!He&&Re(me),le=tt&&Ut.type=="keydown"};function gt(Ge){typeof Ge.which!="number"&&(Ge.which=Ge.keyCode);var bt=M(Ge);if(bt){if(Ge.type=="keyup"&&Z===bt){Z=!1;return}k.handleKey(bt,W(Ge),Ge)}}function Nt(){clearTimeout(V),V=setTimeout(Re,1e3)}function Vt(Ge,bt,Ut,ee){te[Ge]=0;function se(Lt){return function(){Te=Lt,++te[Ge],Nt()}}function me(Lt){Ke(Ut,Lt,Ge),ee!=="keyup"&&(Z=M(Lt)),setTimeout(Re,10)}for(var Ue=0;Ue<bt.length;++Ue){var tt=Ue+1===bt.length,He=tt?me:se(ee||j(bt[Ue+1]).action);Ct(bt[Ue],He,ee,Ge,Ue)}}function Ct(Ge,bt,Ut,ee,se){k._directMap[Ge+":"+Ut]=bt,Ge=Ge.replace(/\s+/g," ");var me=Ge.split(" "),Ue;if(me.length>1){Vt(Ge,me,bt,Ut);return}Ue=j(Ge,Ut),k._callbacks[Ue.key]=k._callbacks[Ue.key]||[],Pe(Ue.key,Ue.modifiers,{type:Ue.action},ee,Ge,se),k._callbacks[Ue.key][ee?"unshift":"push"]({callback:bt,modifiers:Ue.modifiers,action:Ue.action,seq:ee,level:se,combo:Ge})}k._bindMultiple=function(Ge,bt,Ut){for(var ee=0;ee<Ge.length;++ee)Ct(Ge[ee],bt,Ut)},N(I,"keypress",gt),N(I,"keydown",gt),N(I,"keyup",gt)}U.prototype.bind=function(I,k,te){var V=this;return I=I instanceof Array?I:[I],V._bindMultiple.call(V,I,k,te),V},U.prototype.unbind=function(I,k){var te=this;return te.bind.call(te,I,function(){},k)},U.prototype.trigger=function(I,k){var te=this;return te._directMap[I+":"+k]&&te._directMap[I+":"+k]({},I),te},U.prototype.reset=function(){var I=this;return I._callbacks={},I._directMap={},I},U.prototype.stopCallback=function(I,k){var te=this;if((" "+k.className+" ").indexOf(" mousetrap ")>-1||Q(k,te.target))return!1;if("composedPath"in I&&typeof I.composedPath=="function"){var V=I.composedPath()[0];V!==I.target&&(k=V)}return k.tagName=="INPUT"||k.tagName=="SELECT"||k.tagName=="TEXTAREA"||k.isContentEditable},U.prototype.handleKey=function(){var I=this;return I._handleKey.apply(I,arguments)},U.addKeycodes=function(I){for(var k in I)I.hasOwnProperty(k)&&(m[k]=I[k]);T=null},U.init=function(){var I=U(h);for(var k in I)k.charAt(0)!=="_"&&(U[k]=function(te){return function(){return I[te].apply(I,arguments)}}(k))},U.init(),c.Mousetrap=U,i.exports&&(i.exports=U),l=function(){return U}.call(u,o,u,i),l!==p&&(i.exports=l)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(i,u,o){var l=o(36),c=o(37),h=o(32),p=o(39),m=o(67);i.exports=l?Object.defineProperties:function(S,x){h(S);for(var T=p(x),_=m(x),N=_.length,M=0,D;N>M;)c.f(S,D=_[M++],T[D]);return S}},function(i,u,o){var l=o(7),c=o(35),h=o(28),p=o(33),m=l.TypeError;i.exports=function(y,S){var x,T;if(S==="string"&&h(x=y.toString)&&!p(T=c(x,y))||h(x=y.valueOf)&&!p(T=c(x,y))||S!=="string"&&h(x=y.toString)&&!p(T=c(x,y)))return T;throw m("Can't convert object to primitive value")}},function(i,u,o){var l=o(7),c=o(28),h=o(92),p=l.WeakMap;i.exports=c(p)&&/native code/.test(h(p))},function(i,u,o){var l=o(136).IteratorPrototype,c=o(54),h=o(72),p=o(74),m=o(71),y=function(){return this};i.exports=function(S,x,T,_){var N=x+" Iterator";return S.prototype=c(l,{next:h(+!_,T)}),p(S,N,!1,!0),m[N]=y,S}},function(i,u,o){var l=o(7),c=o(28),h=l.String,p=l.TypeError;i.exports=function(m){if(typeof m=="object"||c(m))return m;throw p("Can't set "+h(m)+" as a prototype")}},function(i,u,o){var l=o(16),c=o(7),h=o(15),p=o(95),m=o(44),y=o(138),S=o(114),x=o(117),T=o(28),_=o(33),N=o(18),M=o(118),D=o(74),W=o(143);i.exports=function($,Oe,ge){var de=$.indexOf("Map")!==-1,ce=$.indexOf("Weak")!==-1,Me=de?"set":"add",j=c[$],Q=j&&j.prototype,U=j,I={},k=function(Pe){var Ke=h(Q[Pe]);m(Q,Pe,Pe=="add"?function(Nt){return Ke(this,Nt===0?0:Nt),this}:Pe=="delete"?function(gt){return ce&&!_(gt)?!1:Ke(this,gt===0?0:gt)}:Pe=="get"?function(Nt){return ce&&!_(Nt)?void 0:Ke(this,Nt===0?0:Nt)}:Pe=="has"?function(Nt){return ce&&!_(Nt)?!1:Ke(this,Nt===0?0:Nt)}:function(Nt,Vt){return Ke(this,Nt===0?0:Nt,Vt),this})},te=p($,!T(j)||!(ce||Q.forEach&&!N(function(){new j().entries().next()})));if(te)U=ge.getConstructor(Oe,$,de,Me),y.enable();else if(p($,!0)){var V=new U,Z=V[Me](ce?{}:-0,1)!=V,le=N(function(){V.has(1)}),Te=M(function(Pe){new j(Pe)}),Re=!ce&&N(function(){for(var Pe=new j,Ke=5;Ke--;)Pe[Me](Ke,Ke);return!Pe.has(-0)});Te||(U=Oe(function(Pe,Ke){x(Pe,Q);var gt=W(new j,Pe,U);return Ke!=null&&S(Ke,gt[Me],{that:gt,AS_ENTRIES:de}),gt}),U.prototype=Q,Q.constructor=U),(le||Re)&&(k("delete"),k("has"),de&&k("get")),(Re||Z)&&k(Me),ce&&Q.clear&&delete Q.clear}return I[$]=U,l({global:!0,forced:U!=j},I),D(U,$),ce||ge.setStrong(U,$,de),U}},function(i,u,o){var l=o(18),c=o(33),h=o(50),p=o(175),m=Object.isExtensible,y=l(function(){});i.exports=y||p?function(x){return!c(x)||p&&h(x)=="ArrayBuffer"?!1:m?m(x):!0}:m},function(i,u,o){var l=o(18);i.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(i,u,o){var l=o(37).f,c=o(54),h=o(144),p=o(62),m=o(117),y=o(114),S=o(111),x=o(145),T=o(36),_=o(138).fastKey,N=o(56),M=N.set,D=N.getterFor;i.exports={getConstructor:function(W,$,Oe,ge){var de=W(function(U,I){m(U,ce),M(U,{type:$,index:c(null),first:void 0,last:void 0,size:0}),T||(U.size=0),I!=null&&y(I,U[ge],{that:U,AS_ENTRIES:Oe})}),ce=de.prototype,Me=D($),j=function(U,I,k){var te=Me(U),V=Q(U,I),Z,le;return V?V.value=k:(te.last=V={index:le=_(I,!0),key:I,value:k,previous:Z=te.last,next:void 0,removed:!1},te.first||(te.first=V),Z&&(Z.next=V),T?te.size++:U.size++,le!=="F"&&(te.index[le]=V)),U},Q=function(U,I){var k=Me(U),te=_(I),V;if(te!=="F")return k.index[te];for(V=k.first;V;V=V.next)if(V.key==I)return V};return h(ce,{clear:function(){for(var I=this,k=Me(I),te=k.index,V=k.first;V;)V.removed=!0,V.previous&&(V.previous=V.previous.next=void 0),delete te[V.index],V=V.next;k.first=k.last=void 0,T?k.size=0:I.size=0},delete:function(U){var I=this,k=Me(I),te=Q(I,U);if(te){var V=te.next,Z=te.previous;delete k.index[te.index],te.removed=!0,Z&&(Z.next=V),V&&(V.previous=Z),k.first==te&&(k.first=V),k.last==te&&(k.last=Z),T?k.size--:I.size--}return!!te},forEach:function(I){for(var k=Me(this),te=p(I,arguments.length>1?arguments[1]:void 0),V;V=V?V.next:k.first;)for(te(V.value,V.key,this);V&&V.removed;)V=V.previous},has:function(I){return!!Q(this,I)}}),h(ce,Oe?{get:function(I){var k=Q(this,I);return k&&k.value},set:function(I,k){return j(this,I===0?0:I,k)}}:{add:function(I){return j(this,I=I===0?0:I,I)}}),T&&l(ce,"size",{get:function(){return Me(this).size}}),de},setStrong:function(W,$,Oe){var ge=$+" Iterator",de=D($),ce=D(ge);S(W,$,function(Me,j){M(this,{type:ge,target:Me,state:de(Me),kind:j,last:void 0})},function(){for(var Me=ce(this),j=Me.kind,Q=Me.last;Q&&Q.removed;)Q=Q.previous;return!Me.target||!(Me.last=Q=Q?Q.next:Me.state.first)?(Me.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:Q.key,done:!1}:j=="values"?{value:Q.value,done:!1}:{value:[Q.key,Q.value],done:!1}},Oe?"entries":"values",!Oe,!0),x($)}}},function(i,u,o){var l=o(116),c=o(98);i.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(i,u,o){var l=o(75).forEach,c=o(120),h=c("forEach");i.exports=h?[].forEach:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}},function(i,u,o){var l=o(7),c=o(99),h=o(100),p=o(33),m=o(27),y=m("species"),S=l.Array;i.exports=function(x){var T;return c(x)&&(T=x.constructor,h(T)&&(T===S||c(T.prototype))?T=void 0:p(T)&&(T=T[y],T===null&&(T=void 0))),T===void 0?S:T}},function(i,u,o){var l=o(7);i.exports=l},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(38),m=o(183),y=o(140),S=o(100),x=o(43),T=o(61),_=o(141),N=o(115),M=l.Array;i.exports=function(W){var $=p(W),Oe=S(this),ge=arguments.length,de=ge>1?arguments[1]:void 0,ce=de!==void 0;ce&&(de=c(de,ge>2?arguments[2]:void 0));var Me=N($),j=0,Q,U,I,k,te,V;if(Me&&!(this==M&&y(Me)))for(k=_($,Me),te=k.next,U=Oe?new this:[];!(I=h(te,k)).done;j++)V=ce?m(k,de,[I.value,j],!0):I.value,T(U,j,V);else for(Q=x($),U=Oe?new this(Q):M(Q);Q>j;j++)V=ce?de($[j],j):$[j],T(U,j,V);return U.length=j,U}},function(i,u,o){var l=o(32),c=o(142);i.exports=function(h,p,m,y){try{return y?p(l(m)[0],m[1]):p(m)}catch(S){c(h,"throw",S)}}},function(i,u,o){var l=o(32);i.exports=function(){var c=l(this),h="";return c.global&&(h+="g"),c.ignoreCase&&(h+="i"),c.multiline&&(h+="m"),c.dotAll&&(h+="s"),c.unicode&&(h+="u"),c.sticky&&(h+="y"),h}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h(".","s");return!(p.dotAll&&p.exec(`
`)&&p.flags==="s")})},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})},function(i,u,o){var l=o(16),c=o(15),h=o(55),p=o(38),m=o(43),y=o(40),S=o(18),x=o(188),T=o(120),_=o(189),N=o(190),M=o(66),D=o(191),W=[],$=c(W.sort),Oe=c(W.push),ge=S(function(){W.sort(void 0)}),de=S(function(){W.sort(null)}),ce=T("sort"),Me=!S(function(){if(M)return M<70;if(!(_&&_>3)){if(N)return!0;if(D)return D<603;var U="",I,k,te,V;for(I=65;I<76;I++){switch(k=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:te=3;break;case 68:case 71:te=4;break;default:te=2}for(V=0;V<47;V++)W.push({k:k+V,v:te})}for(W.sort(function(Z,le){return le.v-Z.v}),V=0;V<W.length;V++)k=W[V].k.charAt(0),U.charAt(U.length-1)!==k&&(U+=k);return U!=="DGBEFHACIJK"}}),j=ge||!de||!ce||!Me,Q=function(U){return function(I,k){return k===void 0?-1:I===void 0?1:U!==void 0?+U(I,k)||0:y(I)>y(k)?1:-1}};l({target:"Array",proto:!0,forced:j},{sort:function(I){I!==void 0&&h(I);var k=p(this);if(Me)return I===void 0?$(k):$(k,I);var te=[],V=m(k),Z,le;for(le=0;le<V;le++)le in k&&Oe(te,k[le]);for(x(te,Q(I)),Z=te.length,le=0;le<Z;)k[le]=te[le++];for(;le<V;)delete k[le++];return k}})},function(i,u,o){var l=o(113),c=Math.floor,h=function(y,S){var x=y.length,T=c(x/2);return x<8?p(y,S):m(y,h(l(y,0,T),S),h(l(y,T),S),S)},p=function(y,S){for(var x=y.length,T=1,_,N;T<x;){for(N=T,_=y[T];N&&S(y[N-1],_)>0;)y[N]=y[--N];N!==T++&&(y[N]=_)}return y},m=function(y,S,x,T){for(var _=S.length,N=x.length,M=0,D=0;M<_||D<N;)y[M+D]=M<_&&D<N?T(S[M],x[D])<=0?S[M++]:x[D++]:M<_?S[M++]:x[D++];return y};i.exports=h},function(i,u,o){var l=o(53),c=l.match(/firefox\/(\d+)/i);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(53);i.exports=/MSIE|Trident/.test(l)},function(i,u,o){var l=o(53),c=l.match(/AppleWebKit\/(\d+)\./);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(16),c=o(75).find,h=o(83),p="find",m=!0;p in[]&&Array(1)[p](function(){m=!1}),l({target:"Array",proto:!0,forced:m},{find:function(S){return c(this,S,arguments.length>1?arguments[1]:void 0)}}),h(p)},function(i,u,o){var l=o(7),c=o(154),h=l.TypeError;i.exports=function(p){if(c(p))throw h("The method doesn't accept regular expressions");return p}},function(i,u,o){var l=o(27),c=l("match");i.exports=function(h){var p=/./;try{"/./"[h](p)}catch{try{return p[c]=!1,"/./"[h](p)}catch{}}return!1}},function(i,u,o){var l=o(94).PROPER,c=o(18),h=o(160),p="​᠎";i.exports=function(m){return c(function(){return!!h[m]()||p[m]()!==p||l&&h[m].name!==m})}},function(i,u,o){var l=o(15);i.exports=l(1 .valueOf)},function(i,u,o){var l=o(15),c=o(38),h=Math.floor,p=l("".charAt),m=l("".replace),y=l("".slice),S=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;i.exports=function(T,_,N,M,D,W){var $=N+T.length,Oe=M.length,ge=x;return D!==void 0&&(D=c(D),ge=S),m(W,ge,function(de,ce){var Me;switch(p(ce,0)){case"$":return"$";case"&":return T;case"`":return y(_,0,N);case"'":return y(_,$);case"<":Me=D[y(ce,1,-1)];break;default:var j=+ce;if(j===0)return de;if(j>Oe){var Q=h(j/10);return Q===0?de:Q<=Oe?M[Q-1]===void 0?p(ce,1):M[Q-1]+p(ce,1):de}Me=M[j-1]}return Me===void 0?"":Me})}},function(i,u,o){var l=o(36),c=o(15),h=o(35),p=o(18),m=o(67),y=o(112),S=o(93),x=o(38),T=o(81),_=Object.assign,N=Object.defineProperty,M=c([].concat);i.exports=!_||p(function(){if(l&&_({b:1},_(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},W={},$=Symbol(),Oe="abcdefghijklmnopqrst";return D[$]=7,Oe.split("").forEach(function(ge){W[ge]=ge}),_({},D)[$]!=7||m(_({},W)).join("")!=Oe})?function(W,$){for(var Oe=x(W),ge=arguments.length,de=1,ce=y.f,Me=S.f;ge>de;)for(var j=T(arguments[de++]),Q=ce?M(m(j),ce(j)):m(j),U=Q.length,I=0,k;U>I;)k=Q[I++],(!l||h(Me,j,k))&&(Oe[k]=j[k]);return Oe}:_},function(i,u,o){var l=o(7),c=o(15),h=o(55),p=o(33),m=o(34),y=o(101),S=l.Function,x=c([].concat),T=c([].join),_={},N=function(M,D,W){if(!m(_,D)){for(var $=[],Oe=0;Oe<D;Oe++)$[Oe]="a["+Oe+"]";_[D]=S("C,a","return new C("+T($,",")+")")}return _[D](M,W)};i.exports=S.bind||function(D){var W=h(this),$=W.prototype,Oe=y(arguments,1),ge=function(){var ce=x(Oe,y(arguments));return this instanceof ge?N(W,ce.length,ce):W.apply(D,ce)};return p($)&&(ge.prototype=$),ge}},function(i,u,o){var l=o(34);i.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=/"/g,m=l("".replace);i.exports=function(y,S,x,T){var _=h(c(y)),N="<"+S;return x!==""&&(N+=" "+x+'="'+m(h(T),p,"&quot;")+'"'),N+">"+_+"</"+S+">"}},function(i,u,o){var l=o(18);i.exports=function(c){return l(function(){var h=""[c]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(i,u,o){var l=o(16),c=Math.hypot,h=Math.abs,p=Math.sqrt,m=!!c&&c(1/0,NaN)!==1/0;l({target:"Math",stat:!0,forced:m},{hypot:function(S,x){for(var T=0,_=0,N=arguments.length,M=0,D,W;_<N;)D=h(arguments[_++]),M<D?(W=M/D,T=T*W*W+1,M=D):D>0?(W=D/M,T+=W*W):T+=D;return M===1/0?1/0:M*p(T)}})},function(i,u,o){var l=o(16),c=o(65),h=o(7),p=o(46),m=o(35),y=o(205),S=o(44),x=o(144),T=o(97),_=o(74),N=o(145),M=o(55),D=o(28),W=o(33),$=o(117),Oe=o(92),ge=o(114),de=o(118),ce=o(156),Me=o(162).set,j=o(206),Q=o(209),U=o(210),I=o(164),k=o(211),te=o(56),V=o(95),Z=o(27),le=o(212),Te=o(126),Re=o(66),Pe=Z("species"),Ke="Promise",gt=te.getterFor(Ke),Nt=te.set,Vt=te.getterFor(Ke),Ct=y&&y.prototype,Ge=y,bt=Ct,Ut=h.TypeError,ee=h.document,se=h.process,me=I.f,Ue=me,tt=!!(ee&&ee.createEvent&&h.dispatchEvent),He=D(h.PromiseRejectionEvent),Lt="unhandledrejection",nr="rejectionhandled",tr=0,Jt=1,rt=2,Er=1,ur=2,Xt=!1,L,Qr,Rr,kr,Be=V(Ke,function(){var Mt=Oe(Ge),or=Mt!==String(Ge);if(!or&&Re===66||c&&!bt.finally)return!0;if(Re>=51&&/native code/.test(Mt))return!1;var vr=new Ge(function(re){re(1)}),fr=function(re){re(function(){},function(){})},wr=vr.constructor={};return wr[Pe]=fr,Xt=vr.then(function(){})instanceof fr,Xt?!or&&le&&!He:!0}),Xr=Be||!de(function(Mt){Ge.all(Mt).catch(function(){})}),zr=function(Mt){var or;return W(Mt)&&D(or=Mt.then)?or:!1},Ir=function(Mt,or){if(!Mt.notified){Mt.notified=!0;var vr=Mt.reactions;j(function(){for(var fr=Mt.value,wr=Mt.state==Jt,re=0;vr.length>re;){var Ee=vr[re++],we=wr?Ee.ok:Ee.fail,_e=Ee.resolve,ht=Ee.reject,wt=Ee.domain,Kt,Br,Cn;try{we?(wr||(Mt.rejection===ur&&to(Mt),Mt.rejection=Er),we===!0?Kt=fr:(wt&&wt.enter(),Kt=we(fr),wt&&(wt.exit(),Cn=!0)),Kt===Ee.promise?ht(Ut("Promise-chain cycle")):(Br=zr(Kt))?m(Br,Kt,_e,ht):_e(Kt)):ht(fr)}catch(Ln){wt&&!Cn&&wt.exit(),ht(Ln)}}Mt.reactions=[],Mt.notified=!1,or&&!Mt.rejection&&eo(Mt)})}},On=function(Mt,or,vr){var fr,wr;tt?(fr=ee.createEvent("Event"),fr.promise=or,fr.reason=vr,fr.initEvent(Mt,!1,!0),h.dispatchEvent(fr)):fr={promise:or,reason:vr},!He&&(wr=h["on"+Mt])?wr(fr):Mt===Lt&&U("Unhandled promise rejection",vr)},eo=function(Mt){m(Me,h,function(){var or=Mt.facade,vr=Mt.value,fr=In(Mt),wr;if(fr&&(wr=k(function(){Te?se.emit("unhandledRejection",vr,or):On(Lt,or,vr)}),Mt.rejection=Te||In(Mt)?ur:Er,wr.error))throw wr.value})},In=function(Mt){return Mt.rejection!==Er&&!Mt.parent},to=function(Mt){m(Me,h,function(){var or=Mt.facade;Te?se.emit("rejectionHandled",or):On(nr,or,Mt.value)})},Qt=function(Mt,or,vr){return function(fr){Mt(or,fr,vr)}},$r=function(Mt,or,vr){Mt.done||(Mt.done=!0,vr&&(Mt=vr),Mt.value=or,Mt.state=rt,Ir(Mt,!0))},Dn=function(Mt,or,vr){if(!Mt.done){Mt.done=!0,vr&&(Mt=vr);try{if(Mt.facade===or)throw Ut("Promise can't be resolved itself");var fr=zr(or);fr?j(function(){var wr={done:!1};try{m(fr,or,Qt(Dn,wr,Mt),Qt($r,wr,Mt))}catch(re){$r(wr,re,Mt)}}):(Mt.value=or,Mt.state=Jt,Ir(Mt,!1))}catch(wr){$r({done:!1},wr,Mt)}}};if(Be&&(Ge=function(or){$(this,bt),M(or),m(L,this);var vr=gt(this);try{or(Qt(Dn,vr),Qt($r,vr))}catch(fr){$r(vr,fr)}},bt=Ge.prototype,L=function(or){Nt(this,{type:Ke,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:tr,value:void 0})},L.prototype=x(bt,{then:function(or,vr){var fr=Vt(this),wr=fr.reactions,re=me(ce(this,Ge));return re.ok=D(or)?or:!0,re.fail=D(vr)&&vr,re.domain=Te?se.domain:void 0,fr.parent=!0,wr[wr.length]=re,fr.state!=tr&&Ir(fr,!1),re.promise},catch:function(Mt){return this.then(void 0,Mt)}}),Qr=function(){var Mt=new L,or=gt(Mt);this.promise=Mt,this.resolve=Qt(Dn,or),this.reject=Qt($r,or)},I.f=me=function(Mt){return Mt===Ge||Mt===Rr?new Qr(Mt):Ue(Mt)},!c&&D(y)&&Ct!==Object.prototype)){kr=Ct.then,Xt||(S(Ct,"then",function(or,vr){var fr=this;return new Ge(function(wr,re){m(kr,fr,wr,re)}).then(or,vr)},{unsafe:!0}),S(Ct,"catch",bt.catch,{unsafe:!0}));try{delete Ct.constructor}catch{}T&&T(Ct,bt)}l({global:!0,wrap:!0,forced:Be},{Promise:Ge}),_(Ge,Ke,!1,!0),N(Ke),Rr=p(Ke),l({target:Ke,stat:!0,forced:Be},{reject:function(or){var vr=me(this);return m(vr.reject,void 0,or),vr.promise}}),l({target:Ke,stat:!0,forced:c||Be},{resolve:function(or){return Q(c&&this===Rr?Ge:this,or)}}),l({target:Ke,stat:!0,forced:Xr},{all:function(or){var vr=this,fr=me(vr),wr=fr.resolve,re=fr.reject,Ee=k(function(){var we=M(vr.resolve),_e=[],ht=0,wt=1;ge(or,function(Kt){var Br=ht++,Cn=!1;wt++,m(we,vr,Kt).then(function(Ln){Cn||(Cn=!0,_e[Br]=Ln,--wt||wr(_e))},re)}),--wt||wr(_e)});return Ee.error&&re(Ee.value),fr.promise},race:function(or){var vr=this,fr=me(vr),wr=fr.reject,re=k(function(){var Ee=M(vr.resolve);ge(or,function(we){m(Ee,vr,we).then(fr.resolve,wr)})});return re.error&&wr(re.value),fr.promise}})},function(i,u,o){var l=o(7);i.exports=l.Promise},function(i,u,o){var l=o(7),c=o(62),h=o(51).f,p=o(162).set,m=o(163),y=o(207),S=o(208),x=o(126),T=l.MutationObserver||l.WebKitMutationObserver,_=l.document,N=l.process,M=l.Promise,D=h(l,"queueMicrotask"),W=D&&D.value,$,Oe,ge,de,ce,Me,j,Q;W||($=function(){var U,I;for(x&&(U=N.domain)&&U.exit();Oe;){I=Oe.fn,Oe=Oe.next;try{I()}catch(k){throw Oe?de():ge=void 0,k}}ge=void 0,U&&U.enter()},!m&&!x&&!S&&T&&_?(ce=!0,Me=_.createTextNode(""),new T($).observe(Me,{characterData:!0}),de=function(){Me.data=ce=!ce}):!y&&M&&M.resolve?(j=M.resolve(void 0),j.constructor=M,Q=c(j.then,j),de=function(){Q($)}):x?de=function(){N.nextTick($)}:(p=c(p,l),de=function(){p($)})),i.exports=W||function(U){var I={fn:U,next:void 0};ge&&(ge.next=I),Oe||(Oe=I,de()),ge=I}},function(i,u,o){var l=o(53),c=o(7);i.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(i,u,o){var l=o(53);i.exports=/web0s(?!.*chrome)/i.test(l)},function(i,u,o){var l=o(32),c=o(33),h=o(164);i.exports=function(p,m){if(l(p),c(m)&&m.constructor===p)return m;var y=h.f(p),S=y.resolve;return S(m),y.promise}},function(i,u,o){var l=o(7);i.exports=function(c,h){var p=l.console;p&&p.error&&(arguments.length==1?p.error(c):p.error(c,h))}},function(i,u){i.exports=function(o){try{return{error:!1,value:o()}}catch(l){return{error:!0,value:l}}}},function(i,u){i.exports=typeof window=="object"},function(i,u,o){var l=o(36),c=o(15),h=o(67),p=o(39),m=o(93).f,y=c(m),S=c([].push),x=function(T){return function(_){for(var N=p(_),M=h(N),D=M.length,W=0,$=[],Oe;D>W;)Oe=M[W++],(!l||y(N,Oe))&&S($,T?[Oe,N[Oe]]:N[Oe]);return $}};i.exports={entries:x(!0),values:x(!1)}},function(i,u,o){var l=o(38),c=o(68),h=o(43);i.exports=function(m){for(var y=l(this),S=h(y),x=arguments.length,T=c(x>1?arguments[1]:void 0,S),_=x>2?arguments[2]:void 0,N=_===void 0?S:c(_,S);N>T;)y[T++]=m;return y}},function(i,u,o){o.r(u),o.d(u,"observer",function(){return ai}),o.d(u,"LogicFlow",function(){return Jm}),o.d(u,"h",function(){return Be.g}),o.d(u,"LogicFlowUtil",function(){return l}),o.d(u,"BaseNode",function(){return ma}),o.d(u,"RectNode",function(){return fm}),o.d(u,"CircleNode",function(){return hm}),o.d(u,"PolygonNode",function(){return ym}),o.d(u,"DiamondNode",function(){return bm}),o.d(u,"EllipseNode",function(){return Sm}),o.d(u,"TextNode",function(){return Tm}),o.d(u,"HtmlNode",function(){return wm}),o.d(u,"BaseEdge",function(){return dc}),o.d(u,"LineEdge",function(){return jm}),o.d(u,"PolylineEdge",function(){return Gm}),o.d(u,"BezierEdge",function(){return zm}),o.d(u,"Arrow",function(){return P2}),o.d(u,"BaseEdgeModel",function(){return dg}),o.d(u,"BezierEdgeModel",function(){return Fg}),o.d(u,"LineEdgeModel",function(){return vg}),o.d(u,"PolylineEdgeModel",function(){return mg}),o.d(u,"BaseNodeModel",function(){return ya}),o.d(u,"CircleNodeModel",function(){return Ug}),o.d(u,"DiamondNodeModel",function(){return Xg}),o.d(u,"EllipseNodeModel",function(){return Vg}),o.d(u,"PolygonNodeModel",function(){return Kg}),o.d(u,"RectNodeModel",function(){return Qg}),o.d(u,"TextNodeModel",function(){return em}),o.d(u,"HtmlNodeModel",function(){return rm}),o.d(u,"EditConfigModel",function(){return nt}),o.d(u,"GraphModel",function(){return U0}),o.d(u,"SnaplineModel",function(){return US}),o.d(u,"Keyboard",function(){return Wx}),o.d(u,"get",function(){return OO}),o.d(u,"defaults",function(){return SO}),o.d(u,"ElementState",function(){return ct}),o.d(u,"ModelType",function(){return Ze}),o.d(u,"ElementType",function(){return Ve}),o.d(u,"EventType",function(){return ze});var l={};o.r(l),o.d(l,"createUuid",function(){return fs}),o.d(l,"refreshGraphId",function(){return IN}),o.d(l,"createDrag",function(){return F1}),o.d(l,"StepDrag",function(){return ha});var c=o(0),h=o(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var p=o(42),m=Object(p.b)("observerBatching");function y(e){e()}function S(e){e||(e=y),Object(c.n)({reactionScheduler:e}),Object(p.a)()[m]=!0}function x(e){return Object(c.t)(e)}function T(e){var r={cleanAt:Date.now()+_,reaction:e};return r}var _=1e4,N=1e4,M=new Set,D;function W(){D===void 0&&(D=setTimeout(ge,N))}function $(e){M.add(e),W()}function Oe(e){M.delete(e)}function ge(){D=void 0;var e=Date.now();M.forEach(function(r){var t=r.current;t&&e>=t.cleanAt&&(t.reaction.dispose(),r.current=null,M.delete(r))}),M.size>0&&W()}var de=!1,ce=[];function Me(e){return function(){de?ce.push(e):e()}}function j(e){de=!0,ce=[];try{var r=e();de=!1;var t=ce.length>0?ce:void 0;return h.d.useLayoutEffect(function(){t&&t.forEach(function(s){return s()})},[t]),r}finally{de=!1}}var Q={};function U(e){return"observer"+e}function I(e,r,t){r===void 0&&(r="observed"),t===void 0&&(t=Q);var s=t.useForceUpdate||p.d,f=s(),d=Me(f),v=h.d.useRef(null);if(!v.current){var b=new c.c(U(r),function(){O.mounted?d():(b.dispose(),v.current=null)}),O=T(b);v.current=O,$(v)}var P=v.current.reaction;return h.d.useDebugValue(P,x),h.d.useEffect(function(){return Oe(v),v.current?v.current.mounted=!0:(v.current={reaction:new c.c(U(r),function(){d()}),cleanAt:1/0},d()),function(){v.current.reaction.dispose(),v.current=null}},[]),j(function(){var R,F;if(P.track(function(){try{R=e()}catch(Y){F=Y}}),F)throw F;return R})}var k=function(){return k=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(e[f]=r[f])}return e},k.apply(this,arguments)};function te(e,r){var t=k({forwardRef:!1},r),s=e.displayName||e.name,f=function(v,b){return I(function(){return e(v,b)},s)};f.displayName=s;var d;return t.forwardRef?d=Object(h.f)(Object(h.e)(f)):d=Object(h.f)(f),Z(e,d),d.displayName=s,d}var V={$$typeof:!0,render:!0,compare:!0,type:!0};function Z(e,r){Object.keys(e).forEach(function(t){V[t]||Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}function le(e){var r=e.children,t=e.render,s=r||t;return typeof s!="function"?null:I(s)}le.propTypes={children:Te,render:Te},le.displayName="Observer";function Te(e,r,t,s,f){var d=r==="children"?"render":"children",v=typeof e[r]=="function",b=typeof e[d]=="function";return v&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+t):v||b?null:new Error("Invalid prop `"+f+"` of type `"+typeof e[r]+"` supplied to `"+t+"`, expected `function`.")}S(h.g);var Re=0;function Pe(e){if(typeof Symbol=="function")return Symbol(e);var r="__$mobx-react "+e+" ("+Re+")";return Re++,r}var Ke={};function gt(e){return Ke[e]||(Ke[e]=Pe(e)),Ke[e]}function Nt(e,r){if(Vt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(var f=0;f<t.length;f++)if(!Object.hasOwnProperty.call(r,t[f])||!Vt(e[t[f]],r[t[f]]))return!1;return!0}function Vt(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Ct(e,r,t){Object.hasOwnProperty.call(e,r)?e[r]=t:Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t})}var Ge=gt("patchMixins"),bt=gt("patchedDefinition");function Ut(e,r){var t=e[Ge]=e[Ge]||{},s=t[r]=t[r]||{};return s.locks=s.locks||0,s.methods=s.methods||[],s}function ee(e,r){for(var t=this,s=arguments.length,f=new Array(s>2?s-2:0),d=2;d<s;d++)f[d-2]=arguments[d];r.locks++;try{var v;return e!=null&&(v=e.apply(this,f)),v}finally{r.locks--,r.locks===0&&r.methods.forEach(function(b){b.apply(t,f)})}}function se(e,r){var t=function(){for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];ee.call.apply(ee,[this,e,r].concat(d))};return t}function me(e,r,t){var s=Ut(e,r);s.methods.indexOf(t)<0&&s.methods.push(t);var f=Object.getOwnPropertyDescriptor(e,r);if(!(f&&f[bt])){var d=e[r],v=Ue(e,r,f?f.enumerable:void 0,s,d);Object.defineProperty(e,r,v)}}function Ue(e,r,t,s,f){var d,v=se(f,s);return d={},d[bt]=!0,d.get=function(){return v},d.set=function(O){if(this===e)v=se(O,s);else{var P=Ue(this,r,t,s,O);Object.defineProperty(this,r,P)}},d.configurable=!0,d.enumerable=t,d}var tt=c.a||"$mobx",He=gt("isMobXReactObserver"),Lt=gt("isUnmounted"),nr=gt("skipRender"),tr=gt("isForcingUpdate");function Jt(e){var r=e.prototype;if(e[He]){var t=rt(r);console.warn("The provided component class ("+t+`) 
                has already been declared as an observer component.`)}else e[He]=!0;if(r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==h.b){if(!r.shouldComponentUpdate)r.shouldComponentUpdate=ur;else if(r.shouldComponentUpdate!==ur)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}Xt(r,"props"),Xt(r,"state");var s=r.render;return r.render=function(){return Er.call(this,s)},me(r,"componentWillUnmount",function(){var f;if((f=this.render[tt])===null||f===void 0||f.dispose(),this[Lt]=!0,!this.render[tt]){var d=rt(this);console.warn("The reactive render of an observer class component ("+d+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function rt(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function Er(e){var r=this;Ct(this,nr,!1),Ct(this,tr,!1);var t=rt(this),s=e.bind(this),f=!1,d=new c.c(t+".render()",function(){if(!f&&(f=!0,r[Lt]!==!0)){var b=!0;try{Ct(r,tr,!0),r[nr]||h.a.prototype.forceUpdate.call(r),b=!1}finally{Ct(r,tr,!1),b&&d.dispose()}}});d.reactComponent=this,v[tt]=d,this.render=v;function v(){f=!1;var b=void 0,O=void 0;if(d.track(function(){try{O=Object(c.d)(!1,s)}catch(P){b=P}}),b)throw b;return O}return v.call(this)}function ur(e,r){return this.state!==r?!0:!Nt(this.props,e)}function Xt(e,r){var t=gt("reactProp_"+r+"_valueHolder"),s=gt("reactProp_"+r+"_atomHolder");function f(){return this[s]||Ct(this,s,Object(c.o)("reactive "+r)),this[s]}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var v=!1;return c.f&&c.e&&(v=Object(c.f)(!0)),f.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(v),this[t]},set:function(v){!this[tr]&&!Nt(this[t],v)?(Ct(this,t,v),Ct(this,nr,!0),f.call(this).reportChanged(),Ct(this,nr,!1)):Ct(this,t,v)}})}var L=typeof Symbol=="function"&&Symbol.for,Qr=L?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(e){return null}).$$typeof,Rr=L?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(e){return null}).$$typeof;function kr(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Rr&&e.$$typeof===Rr)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Qr&&e.$$typeof===Qr){var r=e.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var s=arguments;return Object(h.c)(le,null,function(){return r.apply(void 0,s)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(h.a,e)?te(e):Jt(e)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Be=o(1);o(3),o(60),o(2),o(6),o(4),o(11),o(41),o(23),o(20),o(5),o(22),o(21),o(24),o(8),o(9),o(17),o(25),o(19),o(29),o(187),o(192),o(103),o(152),o(153);function Xr(e,r){for(var t=-1,s=e==null?0:e.length,f=Array(s);++t<s;)f[t]=r(e[t],t,e);return f}var zr=Xr;function Ir(){this.__data__=[],this.size=0}var On=Ir;function eo(e,r){return e===r||e!==e&&r!==r}var In=eo;function to(e,r){for(var t=e.length;t--;)if(In(e[t][0],r))return t;return-1}var Qt=to,$r=Array.prototype,Dn=$r.splice;function Mt(e){var r=this.__data__,t=Qt(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():Dn.call(r,t,1),--this.size,!0}var or=Mt;function vr(e){var r=this.__data__,t=Qt(r,e);return t<0?void 0:r[t][1]}var fr=vr;function wr(e){return Qt(this.__data__,e)>-1}var re=wr;function Ee(e,r){var t=this.__data__,s=Qt(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}var we=Ee;function _e(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}_e.prototype.clear=On,_e.prototype.delete=or,_e.prototype.get=fr,_e.prototype.has=re,_e.prototype.set=we;var ht=_e;function wt(){this.__data__=new ht,this.size=0}var Kt=wt;function Br(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var Cn=Br;function Ln(e){return this.__data__.get(e)}var Hi=Ln;function No(e){return this.__data__.has(e)}var mu=No,ro=o(31),As=ro.a.Symbol,jr=As,fi=Object.prototype,Xi=fi.hasOwnProperty,Vo=fi.toString,$i=jr?jr.toStringTag:void 0;function ci(e){var r=Xi.call(e,$i),t=e[$i];try{e[$i]=void 0;var s=!0}catch{}var f=Vo.call(e);return s&&(r?e[$i]=t:delete e[$i]),f}var di=ci,_a=Object.prototype,$l=_a.toString;function Na(e){return $l.call(e)}var Ma=Na,bu="[object Null]",Wt="[object Undefined]",Eu=jr?jr.toStringTag:void 0;function Vl(e){return e==null?e===void 0?Wt:bu:Eu&&Eu in Object(e)?di(e):Ma(e)}var Mo=Vl;function Ou(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Kr=Ou,no="[object AsyncFunction]",Su="[object Function]",Wl="[object GeneratorFunction]",Yl="[object Proxy]";function Kl(e){if(!Kr(e))return!1;var r=Mo(e);return r==Su||r==Wl||r==no||r==Yl}var Ra=Kl,xu=ro.a["__core-js_shared__"],Wo=xu,Ps=function(){var e=/[^.]+$/.exec(Wo&&Wo.keys&&Wo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ws(e){return!!Ps&&Ps in e}var Vi=ws,Tu=Function.prototype,Ia=Tu.toString;function Zl(e){if(e!=null){try{return Ia.call(e)}catch{}try{return e+""}catch{}}return""}var Zr=Zl,Au=/[\\^$.*+?()[\]{}|]/g,Jl=/^\[object .+?Constructor\]$/,Pu=Function.prototype,wu=Object.prototype,Ql=Pu.toString,_u=wu.hasOwnProperty,ql=RegExp("^"+Ql.call(_u).replace(Au,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oo(e){if(!Kr(e)||Vi(e))return!1;var r=Ra(e)?ql:Jl;return r.test(Zr(e))}var un=oo;function Da(e,r){return e==null?void 0:e[r]}var ef=Da;function _s(e,r){var t=ef(e,r);return un(t)?t:void 0}var co=_s,Nu=co(ro.a,"Map"),hi=Nu,tf=co(Object,"create"),Yo=tf;function rf(){this.__data__=Yo?Yo(null):{},this.size=0}var Ns=rf;function Mu(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var nf=Mu,Ms="__lodash_hash_undefined__",Ru=Object.prototype,Iu=Ru.hasOwnProperty;function Du(e){var r=this.__data__;if(Yo){var t=r[e];return t===Ms?void 0:t}return Iu.call(r,e)?r[e]:void 0}var Ro=Du,of=Object.prototype,Cu=of.hasOwnProperty;function Ca(e){var r=this.__data__;return Yo?r[e]!==void 0:Cu.call(r,e)}var La=Ca,Rs="__lodash_hash_undefined__";function Lu(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Yo&&r===void 0?Rs:r,this}var af=Lu;function Io(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Io.prototype.clear=Ns,Io.prototype.delete=nf,Io.prototype.get=Ro,Io.prototype.has=La,Io.prototype.set=af;var Do=Io;function Gn(){this.size=0,this.__data__={hash:new Do,map:new(hi||ht),string:new Do}}var ja=Gn;function ju(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Is=ju;function sf(e,r){var t=e.__data__;return Is(r)?t[typeof r=="string"?"string":"hash"]:t.map}var Ba=sf;function uf(e){var r=Ba(this,e).delete(e);return this.size-=r?1:0,r}var lf=uf;function pi(e){return Ba(this,e).get(e)}var Co=pi;function ff(e){return Ba(this,e).has(e)}var vi=ff;function cf(e,r){var t=Ba(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}var ho=cf;function po(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}po.prototype.clear=ja,po.prototype.delete=lf,po.prototype.get=Co,po.prototype.has=vi,po.prototype.set=ho;var Wi=po,yi=200;function Yi(e,r){var t=this.__data__;if(t instanceof ht){var s=t.__data__;if(!hi||s.length<yi-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Wi(s)}return t.set(e,r),this.size=t.size,this}var xo=Yi;function Ko(e){var r=this.__data__=new ht(e);this.size=r.size}Ko.prototype.clear=Kt,Ko.prototype.delete=Cn,Ko.prototype.get=Hi,Ko.prototype.has=mu,Ko.prototype.set=xo;var $n=Ko,Vn="__lodash_hash_undefined__";function Ki(e){return this.__data__.set(e,Vn),this}var vo=Ki;function io(e){return this.__data__.has(e)}var gi=io;function jn(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Wi;++r<t;)this.add(e[r])}jn.prototype.add=jn.prototype.push=vo,jn.prototype.has=gi;var df=jn;function Bu(e,r){for(var t=-1,s=e==null?0:e.length;++t<s;)if(r(e[t],t,e))return!0;return!1}var qr=Bu;function Ds(e,r){return e.has(r)}var To=Ds,yo=1,ao=2;function Zi(e,r,t,s,f,d){var v=t&yo,b=e.length,O=r.length;if(b!=O&&!(v&&O>b))return!1;var P=d.get(e),R=d.get(r);if(P&&R)return P==r&&R==e;var F=-1,Y=!0,ne=t&ao?new df:void 0;for(d.set(e,r),d.set(r,e);++F<b;){var ve=e[F],Le=r[F];if(s)var De=v?s(Le,ve,F,r,e,d):s(ve,Le,F,e,r,d);if(De!==void 0){if(De)continue;Y=!1;break}if(ne){if(!qr(r,function(Fe,Tt){if(!To(ne,Tt)&&(ve===Fe||f(ve,Fe,t,s,d)))return ne.push(Tt)})){Y=!1;break}}else if(!(ve===Le||f(ve,Le,t,s,d))){Y=!1;break}}return d.delete(e),d.delete(r),Y}var Lo=Zi,Ji=ro.a.Uint8Array,dn=Ji;function mi(e){var r=-1,t=Array(e.size);return e.forEach(function(s,f){t[++r]=[f,s]}),t}var Fa=mi;function Cs(e){var r=-1,t=Array(e.size);return e.forEach(function(s){t[++r]=s}),t}var Bn=Cs,Ls=1,js=2,Fu="[object Boolean]",Gu="[object Date]",hf="[object Error]",Ga="[object Map]",ka="[object Number]",Bs="[object RegExp]",kn="[object Set]",Nn="[object String]",Zo="[object Symbol]",Fs="[object ArrayBuffer]",Ua="[object DataView]",bi=jr?jr.prototype:void 0,Ei=bi?bi.valueOf:void 0;function Gs(e,r,t,s,f,d,v){switch(t){case Ua:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Fs:return!(e.byteLength!=r.byteLength||!d(new dn(e),new dn(r)));case Fu:case Gu:case ka:return In(+e,+r);case hf:return e.name==r.name&&e.message==r.message;case Bs:case Nn:return e==r+"";case Ga:var b=Fa;case kn:var O=s&Ls;if(b||(b=Bn),e.size!=r.size&&!O)return!1;var P=v.get(e);if(P)return P==r;s|=js,v.set(e,r);var R=Lo(b(e),b(r),s,f,d,v);return v.delete(e),R;case Zo:if(Ei)return Ei.call(e)==Ei.call(r)}return!1}var ku=Gs;function Qi(e,r){for(var t=-1,s=r.length,f=e.length;++t<s;)e[f+t]=r[t];return e}var za=Qi,ks=Array.isArray,g=ks;function E(e,r,t){var s=r(e);return g(e)?s:za(s,t(e))}var A=E;function B(e,r){for(var t=-1,s=e==null?0:e.length,f=0,d=[];++t<s;){var v=e[t];r(v,t,e)&&(d[f++]=v)}return d}var J=B;function pe(){return[]}var Xe=pe,Et=Object.prototype,Yt=Et.propertyIsEnumerable,Tr=Object.getOwnPropertySymbols,_r=Tr?function(e){return e==null?[]:(e=Object(e),J(Tr(e),function(r){return Yt.call(e,r)}))}:Xe,Ur=_r;function Hr(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s}var nn=Hr;function Sn(e){return e!=null&&typeof e=="object"}var Vr=Sn,Wn="[object Arguments]";function Jo(e){return Vr(e)&&Mo(e)==Wn}var Ha=Jo,Uu=Object.prototype,qi=Uu.hasOwnProperty,zu=Uu.propertyIsEnumerable,Us=Ha(function(){return arguments}())?Ha:function(e){return Vr(e)&&qi.call(e,"callee")&&!zu.call(e,"callee")},Oi=Us,Qo=o(48),ty=9007199254740991,ry=/^(?:0|[1-9]\d*)$/;function ny(e,r){var t=typeof e;return r=r??ty,!!r&&(t=="number"||t!="symbol"&&ry.test(e))&&e>-1&&e%1==0&&e<r}var zs=ny,Hs=9007199254740991;function oy(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hs}var Xa=oy,go="[object Arguments]",$a="[object Array]",$c="[object Boolean]",Vc="[object Date]",Wc="[object Error]",Yc="[object Function]",Kc="[object Map]",Zc="[object Number]",iy="[object Object]",Va="[object RegExp]",xn="[object Set]",Jc="[object String]",Qc="[object WeakMap]",ea="[object ArrayBuffer]",qc="[object DataView]",ed="[object Float32Array]",ay="[object Float64Array]",sy="[object Int8Array]",uy="[object Int16Array]",ly="[object Int32Array]",pf="[object Uint8Array]",td="[object Uint8ClampedArray]",fy="[object Uint16Array]",rd="[object Uint32Array]",Jr={};Jr[ed]=Jr[ay]=Jr[sy]=Jr[uy]=Jr[ly]=Jr[pf]=Jr[td]=Jr[fy]=Jr[rd]=!0,Jr[go]=Jr[$a]=Jr[ea]=Jr[$c]=Jr[qc]=Jr[Vc]=Jr[Wc]=Jr[Yc]=Jr[Kc]=Jr[Zc]=Jr[iy]=Jr[Va]=Jr[xn]=Jr[Jc]=Jr[Qc]=!1;function cy(e){return Vr(e)&&Xa(e.length)&&!!Jr[Mo(e)]}var Hu=cy;function dy(e){return function(r){return e(r)}}var jo=dy,qo=o(49),vf=qo.a&&qo.a.isTypedArray,nd=vf?jo(vf):Hu,Xu=nd,od=Object.prototype,id=od.hasOwnProperty;function ad(e,r){var t=g(e),s=!t&&Oi(e),f=!t&&!s&&Object(Qo.a)(e),d=!t&&!s&&!f&&Xu(e),v=t||s||f||d,b=v?nn(e.length,String):[],O=b.length;for(var P in e)(r||id.call(e,P))&&!(v&&(P=="length"||f&&(P=="offset"||P=="parent")||d&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||zs(P,O)))&&b.push(P);return b}var yf=ad,sd=Object.prototype;function ud(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||sd;return e===t}var Yn=ud;function ld(e,r){return function(t){return e(r(t))}}var fd=ld,ei=fd(Object.keys,Object),gf=ei,ta=Object.prototype,$u=ta.hasOwnProperty;function cd(e){if(!Yn(e))return gf(e);var r=[];for(var t in Object(e))$u.call(e,t)&&t!="constructor"&&r.push(t);return r}var dd=cd;function hd(e){return e!=null&&Xa(e.length)&&!Ra(e)}var Si=hd;function pd(e){return Si(e)?yf(e):dd(e)}var Wa=pd;function hy(e){return A(e,Wa,Ur)}var mf=hy,py=1,vy=Object.prototype,yy=vy.hasOwnProperty;function gy(e,r,t,s,f,d){var v=t&py,b=mf(e),O=b.length,P=mf(r),R=P.length;if(O!=R&&!v)return!1;for(var F=O;F--;){var Y=b[F];if(!(v?Y in r:yy.call(r,Y)))return!1}var ne=d.get(e),ve=d.get(r);if(ne&&ve)return ne==r&&ve==e;var Le=!0;d.set(e,r),d.set(r,e);for(var De=v;++F<O;){Y=b[F];var Fe=e[Y],Tt=r[Y];if(s)var It=v?s(Tt,Fe,Y,r,e,d):s(Fe,Tt,Y,e,r,d);if(!(It===void 0?Fe===Tt||f(Fe,Tt,t,s,d):It)){Le=!1;break}De||(De=Y=="constructor")}if(Le&&!De){var ut=e.constructor,Ft=r.constructor;ut!=Ft&&"constructor"in e&&"constructor"in r&&!(typeof ut=="function"&&ut instanceof ut&&typeof Ft=="function"&&Ft instanceof Ft)&&(Le=!1)}return d.delete(e),d.delete(r),Le}var vd=gy,yd=co(ro.a,"DataView"),bf=yd,my=co(ro.a,"Promise"),Xs=my,Vu=co(ro.a,"Set"),Ef=Vu,by=co(ro.a,"WeakMap"),Of=by,gd="[object Map]",Ey="[object Object]",Sf="[object Promise]",md="[object Set]",bd="[object WeakMap]",Ed="[object DataView]",Oy=Zr(bf),Sy=Zr(hi),Ya=Zr(Xs),xy=Zr(Ef),Ty=Zr(Of),xi=Mo;(bf&&xi(new bf(new ArrayBuffer(1)))!=Ed||hi&&xi(new hi)!=gd||Xs&&xi(Xs.resolve())!=Sf||Ef&&xi(new Ef)!=md||Of&&xi(new Of)!=bd)&&(xi=function(e){var r=Mo(e),t=r==Ey?e.constructor:void 0,s=t?Zr(t):"";if(s)switch(s){case Oy:return Ed;case Sy:return gd;case Ya:return Sf;case xy:return md;case Ty:return bd}return r});var ra=xi,Ay=1,xf="[object Arguments]",Od="[object Array]",Wu="[object Object]",Py=Object.prototype,Sd=Py.hasOwnProperty;function wy(e,r,t,s,f,d){var v=g(e),b=g(r),O=v?Od:ra(e),P=b?Od:ra(r);O=O==xf?Wu:O,P=P==xf?Wu:P;var R=O==Wu,F=P==Wu,Y=O==P;if(Y&&Object(Qo.a)(e)){if(!Object(Qo.a)(r))return!1;v=!0,R=!1}if(Y&&!R)return d||(d=new $n),v||Xu(e)?Lo(e,r,t,s,f,d):ku(e,r,O,t,s,f,d);if(!(t&Ay)){var ne=R&&Sd.call(e,"__wrapped__"),ve=F&&Sd.call(r,"__wrapped__");if(ne||ve){var Le=ne?e.value():e,De=ve?r.value():r;return d||(d=new $n),f(Le,De,t,s,d)}}return Y?(d||(d=new $n),vd(e,r,t,s,f,d)):!1}var $s=wy;function xd(e,r,t,s,f){return e===r?!0:e==null||r==null||!Vr(e)&&!Vr(r)?e!==e&&r!==r:$s(e,r,t,s,xd,f)}var Ka=xd,_y=1,Za=2;function Ja(e,r,t,s){var f=t.length,d=f,v=!s;if(e==null)return!d;for(e=Object(e);f--;){var b=t[f];if(v&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<d;){b=t[f];var O=b[0],P=e[O],R=b[1];if(v&&b[2]){if(P===void 0&&!(O in e))return!1}else{var F=new $n;if(s)var Y=s(P,R,O,e,r,F);if(!(Y===void 0?Ka(R,P,_y|Za,s,F):Y))return!1}}return!0}var Ny=Ja;function Qa(e){return e===e&&!Kr(e)}var Tf=Qa;function qa(e){for(var r=Wa(e),t=r.length;t--;){var s=r[t],f=e[s];r[t]=[s,f,Tf(f)]}return r}var Af=qa;function Pf(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}var Yu=Pf;function wf(e){var r=Af(e);return r.length==1&&r[0][2]?Yu(r[0][0],r[0][1]):function(t){return t===e||Ny(t,e,r)}}var _f=wf,Ku="[object Symbol]";function Td(e){return typeof e=="symbol"||Vr(e)&&Mo(e)==Ku}var Vs=Td,Ad=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pd=/^\w*$/;function wd(e,r){if(g(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Vs(e)?!0:Pd.test(e)||!Ad.test(e)||r!=null&&e in Object(r)}var Ws=wd,Nf="Expected a function";function Zu(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Nf);var t=function(){var s=arguments,f=r?r.apply(this,s):s[0],d=t.cache;if(d.has(f))return d.get(f);var v=e.apply(this,s);return t.cache=d.set(f,v)||d,v};return t.cache=new(Zu.Cache||Wi),t}Zu.Cache=Wi;var _d=Zu,Nd=500;function Md(e){var r=_d(e,function(s){return t.size===Nd&&t.clear(),s}),t=r.cache;return r}var Mf=Md,Rd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Id=/\\(\\)?/g,Rf=Mf(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Rd,function(t,s,f,d){r.push(f?d.replace(Id,"$1"):s||t)}),r}),If=Rf,Dd=1/0,Ju=jr?jr.prototype:void 0,Df=Ju?Ju.toString:void 0;function Cf(e){if(typeof e=="string")return e;if(g(e))return zr(e,Cf)+"";if(Vs(e))return Df?Df.call(e):"";var r=e+"";return r=="0"&&1/e==-Dd?"-0":r}var Lf=Cf;function Cd(e){return e==null?"":Lf(e)}var Ld=Cd;function jf(e,r){return g(e)?e:Ws(e,r)?[e]:If(Ld(e))}var es=jf,Ys=1/0;function jd(e){if(typeof e=="string"||Vs(e))return e;var r=e+"";return r=="0"&&1/e==-Ys?"-0":r}var Ti=jd;function ti(e,r){r=es(r,e);for(var t=0,s=r.length;e!=null&&t<s;)e=e[Ti(r[t++])];return t&&t==s?e:void 0}var na=ti;function oa(e,r,t){var s=e==null?void 0:na(e,r);return s===void 0?t:s}var ts=oa;function Ks(e,r){return e!=null&&r in Object(e)}var ia=Ks;function aa(e,r,t){r=es(r,e);for(var s=-1,f=r.length,d=!1;++s<f;){var v=Ti(r[s]);if(!(d=e!=null&&t(e,v)))break;e=e[v]}return d||++s!=f?d:(f=e==null?0:e.length,!!f&&Xa(f)&&zs(v,f)&&(g(e)||Oi(e)))}var sa=aa;function Qu(e,r){return e!=null&&sa(e,r,ia)}var Zs=Qu,Js=1,Bf=2;function Ff(e,r){return Ws(e)&&Tf(r)?Yu(Ti(e),r):function(t){var s=ts(t,e);return s===void 0&&s===r?Zs(t,e):Ka(r,s,Js|Bf)}}var rs=Ff;function ns(e){return e}var Gf=ns;function My(e){return function(r){return r==null?void 0:r[e]}}var Bd=My;function Fd(e){return function(r){return na(r,e)}}var Gd=Fd;function Ry(e){return Ws(e)?Bd(Ti(e)):Gd(e)}var os=Ry;function Iy(e){return typeof e=="function"?e:e==null?Gf:typeof e=="object"?g(e)?rs(e[0],e[1]):_f(e):os(e)}var Dy=Iy;function Cy(e){return function(r,t,s){for(var f=-1,d=Object(r),v=s(r),b=v.length;b--;){var O=v[e?b:++f];if(t(d[O],O,d)===!1)break}return r}}var kd=Cy,Ly=kd(),Ud=Ly;function jy(e,r){return e&&Ud(e,r,Wa)}var By=jy;function Fy(e,r){return function(t,s){if(t==null)return t;if(!Si(t))return e(t,s);for(var f=t.length,d=r?f:-1,v=Object(t);(r?d--:++d<f)&&s(v[d],d,v)!==!1;);return t}}var Gy=Fy,ky=Gy(By),Uy=ky;function zy(e,r){var t=-1,s=Si(e)?Array(e.length):[];return Uy(e,function(f,d,v){s[++t]=r(f,d,v)}),s}var Hy=zy;function kf(e,r){var t=g(e)?zr:Hy;return t(e,Dy(r))}var ua=kf,qu=function(){try{var e=co(Object,"defineProperty");return e({},"",{}),e}catch{}}(),la=qu;function Uf(e,r,t){r=="__proto__"&&la?la(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var is=Uf,el=Object.prototype,tl=el.hasOwnProperty;function zf(e,r,t){var s=e[r];(!(tl.call(e,r)&&In(s,t))||t===void 0&&!(r in e))&&is(e,r,t)}var fa=zf;function rl(e,r,t,s){var f=!t;t||(t={});for(var d=-1,v=r.length;++d<v;){var b=r[d],O=s?s(t[b],e[b],b,t,e):void 0;O===void 0&&(O=e[b]),f?is(t,b,O):fa(t,b,O)}return t}var ri=rl;function Qs(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var qs=Qs,as=Math.max;function eu(e,r,t){return r=as(r===void 0?e.length-1:r,0),function(){for(var s=arguments,f=-1,d=as(s.length-r,0),v=Array(d);++f<d;)v[f]=s[r+f];f=-1;for(var b=Array(r+1);++f<r;)b[f]=s[f];return b[r]=t(v),qs(e,this,b)}}var ss=eu;function zd(e){return function(){return e}}var tu=zd,ca=la?function(e,r){return la(e,"toString",{configurable:!0,enumerable:!1,value:tu(r),writable:!0})}:Gf,Hd=ca,Hf=800,Xy=16,$y=Date.now;function Vy(e){var r=0,t=0;return function(){var s=$y(),f=Xy-(s-t);if(t=s,f>0){if(++r>=Hf)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var Ai=Vy,Xd=Ai(Hd),Xf=Xd;function $d(e,r){return Xf(ss(e,r,Gf),e+"")}var Wy=$d;function Vd(e,r,t){if(!Kr(t))return!1;var s=typeof r;return(s=="number"?Si(t)&&zs(r,t.length):s=="string"&&r in t)?In(t[r],e):!1}var Yy=Vd;function Bo(e){return Wy(function(r,t){var s=-1,f=t.length,d=f>1?t[f-1]:void 0,v=f>2?t[2]:void 0;for(d=e.length>3&&typeof d=="function"?(f--,d):void 0,v&&Yy(t[0],t[1],v)&&(d=f<3?void 0:d,f=1),r=Object(r);++s<f;){var b=t[s];b&&e(r,b,s,d)}return r})}var $f=Bo,us=Object.prototype,Pi=us.hasOwnProperty,Wd=$f(function(e,r){if(Yn(r)||Si(r)){ri(r,Wa(r),e);return}for(var t in r)Pi.call(r,t)&&fa(e,t,r[t])}),Mn=Wd;function nl(e,r,t,s){if(!Kr(e))return e;r=es(r,e);for(var f=-1,d=r.length,v=d-1,b=e;b!=null&&++f<d;){var O=Ti(r[f]),P=t;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(f!=v){var R=b[O];P=s?s(R,O,b):void 0,P===void 0&&(P=Kr(R)?R:zs(r[f+1])?[]:{})}fa(b,O,P),b=b[O]}return e}var Yd=nl;function Un(e,r,t){for(var s=-1,f=r.length,d={};++s<f;){var v=r[s],b=na(e,v);t(b,v)&&Yd(d,es(v,e),b)}return d}var wi=Un;function ln(e,r){return wi(e,r,function(t,s){return Zs(e,s)})}var Kn=ln,Vf=jr?jr.isConcatSpreadable:void 0;function Ky(e){return g(e)||Oi(e)||!!(Vf&&e&&e[Vf])}var Zy=Ky;function Kd(e,r,t,s,f){var d=-1,v=e.length;for(t||(t=Zy),f||(f=[]);++d<v;){var b=e[d];r>0&&t(b)?r>1?Kd(b,r-1,t,s,f):za(f,b):s||(f[f.length]=b)}return f}var Jy=Kd;function Zd(e){var r=e==null?0:e.length;return r?Jy(e,1):[]}var Qy=Zd;function qy(e){return Xf(ss(e,void 0,Qy),e+"")}var eg=qy,tg=eg(function(e,r){return e==null?{}:Kn(e,r)}),ru=tg,on,Wf,Yf,Jd,Qd,Kf,qd,w,G,q,Ce,Je,Ie,ke,at,lt,vt,ft;function it(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function St(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function st(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ot(e,r,t){return r&&st(e.prototype,r),t&&st(e,t),e}function be(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ne(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var yt={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},xt=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],nt=(on=function(){function e(r){St(this,e),it(this,"isSilentMode",Wf,this),it(this,"stopZoomGraph",Yf,this),it(this,"stopScrollGraph",Jd,this),it(this,"stopMoveGraph",Qd,this),it(this,"adjustEdge",Kf,this),it(this,"adjustEdgeMiddle",qd,this),it(this,"adjustEdgeStartAndEnd",w,this),it(this,"adjustNodePosition",G,this),it(this,"hideAnchors",q,this),it(this,"hoverOutline",Ce,this),it(this,"nodeSelectedOutline",Je,this),it(this,"edgeSelectedOutline",Ie,this),it(this,"nodeTextEdit",ke,this),it(this,"edgeTextEdit",at,this),it(this,"nodeTextDraggable",lt,this),it(this,"edgeTextDraggable",vt,this),it(this,"autoExpand",ft,this),be(this,"multipleSelectKey",""),be(this,"defaultConfig",{}),Mn(this,this.getConfigDetail(r))}return Ot(e,[{key:"updateEditConfig",value:function(t){var s=this.getConfigDetail(t);Mn(this,s)}},{key:"getConfigDetail",value:function(t){var s=t.isSilentMode,f=t.textEdit,d={};if(s===!1&&Mn(d,this.defaultConfig),s===!0){var v=ru(yt,xt);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Mn(d,v)}f===!1&&Mn(d,{nodeTextEdit:!1,edgeTextEdit:!1});var b=ru(t,xt);return Mn(d,b)}},{key:"getConfig",value:function(){return ru(this,xt)}}]),e}(),Wf=Ne(on.prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yf=Ne(on.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jd=Ne(on.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qd=Ne(on.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Ne(on.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qd=Ne(on.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Ne(on.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Ne(on.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=Ne(on.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=Ne(on.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Je=Ne(on.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ie=Ne(on.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ke=Ne(on.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at=Ne(on.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=Ne(on.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Ne(on.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ft=Ne(on.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ne(on.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(on.prototype,"updateEditConfig"),on.prototype),on);o(63);var ct;(function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(ct||(ct={}));var ot;(function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"})(ot||(ot={}));var Ze;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Ze||(Ze={}));var Ve;(function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"})(Ve||(Ve={}));var ze;(function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"})(ze||(ze={}));var At;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(At||(At={}));var ir=9999,mt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(mt||(mt={}));var et,qe,rr,cr,Gt,mr,ar,yr;function Ar(e,r){return Wr(e)||hn(e,r)||vn(e,r)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vn(e,r){if(e){if(typeof e=="string")return Or(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Or(e,r)}}function Or(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function hn(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function Wr(e){if(Array.isArray(e))return e}function Yr(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function pn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cn(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bn(e,r,t){return r&&cn(e.prototype,r),t&&cn(e,t),e}function yn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Fr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var dr=(et=function(){function e(r){pn(this,e),yn(this,"MINI_SCALE_SIZE",.2),yn(this,"MAX_SCALE_SIZE",16),Yr(this,"SCALE_X",qe,this),Yr(this,"SKEW_Y",rr,this),Yr(this,"SKEW_X",cr,this),Yr(this,"SCALE_Y",Gt,this),Yr(this,"TRANSLATE_X",mr,this),Yr(this,"TRANSLATE_Y",ar,this),Yr(this,"ZOOM_SIZE",yr,this),yn(this,"eventCenter",void 0),this.eventCenter=r}return bn(e,[{key:"setZoomMiniSize",value:function(t){this.MINI_SCALE_SIZE=t}},{key:"setZoomMaxSize",value:function(t){this.MAX_SCALE_SIZE=t}},{key:"HtmlPointToCanvasPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(d-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[f*this.SCALE_X+this.TRANSLATE_X,d*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(t,s,f){var d=Ar(t,2),v=d[0],b=d[1];return[v+s/this.SCALE_X,b+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(t,s){return[t/this.SCALE_X,s/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}}},{key:"zoom",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,d=this.SCALE_Y;return t===!0?(f+=this.ZOOM_SIZE,d+=this.ZOOM_SIZE):t===!1?(f-=this.ZOOM_SIZE,d-=this.ZOOM_SIZE):typeof t=="number"&&(f=t,d=t),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(s&&(this.TRANSLATE_X-=(f-this.SCALE_X)*s[0],this.TRANSLATE_Y-=(d-this.SCALE_Y)*s[1]),this.SCALE_X=f,this.SCALE_Y=d,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))}},{key:"emitGraphTransform",value:function(t){this.eventCenter.emit(ze.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(t,s){this.TRANSLATE_X+=t,this.TRANSLATE_Y+=s,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(t,s,f,d){var v=this.CanvasPointToHtmlPoint([t,s]),b=Ar(v,2),O=b[0],P=b[1],R=f/2-O,F=d/2-P;this.TRANSLATE_X+=R,this.TRANSLATE_Y+=F,this.emitGraphTransform("focusOn")}}]),e}(),qe=Fr(et.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rr=Fr(et.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cr=Fr(et.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gt=Fr(et.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),mr=Fr(et.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ar=Fr(et.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yr=Fr(et.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Fr(et.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"zoom"),et.prototype),Fr(et.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"resetZoom"),et.prototype),Fr(et.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"translate"),et.prototype),Fr(et.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"focusOn"),et.prototype),et);function Tn(e,r){for(var t=-1,s=e==null?0:e.length;++t<s&&r(e[t],t,e)!==!1;);return e}var Dr=Tn;function qt(e,r){return e&&ri(r,Wa(r),e)}var Sr=qt;function Pr(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var an=Pr,Fo=Object.prototype,da=Fo.hasOwnProperty;function K(e){if(!Kr(e))return an(e);var r=Yn(e),t=[];for(var s in e)s=="constructor"&&(r||!da.call(e,s))||t.push(s);return t}var je=K;function Ae(e){return Si(e)?yf(e,!0):je(e)}var Rt=Ae;function br(e,r){return e&&ri(r,Rt(r),e)}var H=br,C=o(106);function ie(e,r){var t=-1,s=e.length;for(r||(r=Array(s));++t<s;)r[t]=e[t];return r}var ye=ie;function Se(e,r){return ri(e,Ur(e),r)}var ue=Se,ae=fd(Object.getPrototypeOf,Object),fe=ae,X=Object.getOwnPropertySymbols,oe=X?function(e){for(var r=[];e;)za(r,Ur(e)),e=fe(e);return r}:Xe,z=oe;function he(e,r){return ri(e,z(e),r)}var xe=he;function Ye(e){return A(e,Rt,z)}var Qe=Ye,$e=Object.prototype,pt=$e.hasOwnProperty;function Ht(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&pt.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var hr=Ht;function kt(e){var r=new e.constructor(e.byteLength);return new dn(r).set(new dn(e)),r}var Zt=kt;function lr(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var Nr=lr,en=/\w*$/;function zn(e){var r=new e.constructor(e.source,en.exec(e));return r.lastIndex=e.lastIndex,r}var Zf=zn,so=jr?jr.prototype:void 0,Jf=so?so.valueOf:void 0;function Ao(e){return Jf?Object(Jf.call(e)):{}}var eh=Ao;function kw(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var aE=kw,Uw="[object Boolean]",zw="[object Date]",Hw="[object Map]",Xw="[object Number]",$w="[object RegExp]",Vw="[object Set]",Ww="[object String]",Yw="[object Symbol]",Kw="[object ArrayBuffer]",Zw="[object DataView]",Jw="[object Float32Array]",Qw="[object Float64Array]",qw="[object Int8Array]",e_="[object Int16Array]",t_="[object Int32Array]",r_="[object Uint8Array]",n_="[object Uint8ClampedArray]",o_="[object Uint16Array]",i_="[object Uint32Array]";function a_(e,r,t){var s=e.constructor;switch(r){case Kw:return Zt(e);case Uw:case zw:return new s(+e);case Zw:return Nr(e,t);case Jw:case Qw:case qw:case e_:case t_:case r_:case n_:case o_:case i_:return aE(e,t);case Hw:return new s;case Xw:case Ww:return new s(e);case $w:return Zf(e);case Vw:return new s;case Yw:return eh(e)}}var s_=a_,sE=Object.create,u_=function(){function e(){}return function(r){if(!Kr(r))return{};if(sE)return sE(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),l_=u_;function f_(e){return typeof e.constructor=="function"&&!Yn(e)?l_(fe(e)):{}}var uE=f_,c_="[object Map]";function d_(e){return Vr(e)&&ra(e)==c_}var h_=d_,lE=qo.a&&qo.a.isMap,p_=lE?jo(lE):h_,v_=p_,y_="[object Set]";function g_(e){return Vr(e)&&ra(e)==y_}var m_=g_,fE=qo.a&&qo.a.isSet,b_=fE?jo(fE):m_,E_=b_,O_=1,S_=2,x_=4,cE="[object Arguments]",T_="[object Array]",A_="[object Boolean]",P_="[object Date]",w_="[object Error]",dE="[object Function]",__="[object GeneratorFunction]",N_="[object Map]",M_="[object Number]",hE="[object Object]",R_="[object RegExp]",I_="[object Set]",D_="[object String]",C_="[object Symbol]",L_="[object WeakMap]",j_="[object ArrayBuffer]",B_="[object DataView]",F_="[object Float32Array]",G_="[object Float64Array]",k_="[object Int8Array]",U_="[object Int16Array]",z_="[object Int32Array]",H_="[object Uint8Array]",X_="[object Uint8ClampedArray]",$_="[object Uint16Array]",V_="[object Uint32Array]",tn={};tn[cE]=tn[T_]=tn[j_]=tn[B_]=tn[A_]=tn[P_]=tn[F_]=tn[G_]=tn[k_]=tn[U_]=tn[z_]=tn[N_]=tn[M_]=tn[hE]=tn[R_]=tn[I_]=tn[D_]=tn[C_]=tn[H_]=tn[X_]=tn[$_]=tn[V_]=!0,tn[w_]=tn[dE]=tn[L_]=!1;function th(e,r,t,s,f,d){var v,b=r&O_,O=r&S_,P=r&x_;if(t&&(v=f?t(e,s,f,d):t(e)),v!==void 0)return v;if(!Kr(e))return e;var R=g(e);if(R){if(v=hr(e),!b)return ye(e,v)}else{var F=ra(e),Y=F==dE||F==__;if(Object(Qo.a)(e))return Object(C.a)(e,b);if(F==hE||F==cE||Y&&!f){if(v=O||Y?{}:uE(e),!b)return O?xe(e,H(v,e)):ue(e,Sr(v,e))}else{if(!tn[F])return f?e:{};v=s_(e,F,b)}}d||(d=new $n);var ne=d.get(e);if(ne)return ne;d.set(e,v),E_(e)?e.forEach(function(De){v.add(th(De,r,t,De,e,d))}):v_(e)&&e.forEach(function(De,Fe){v.set(Fe,th(De,r,t,Fe,e,d))});var ve=P?O?Qe:mf:O?Rt:Wa,Le=R?void 0:ve(e);return Dr(Le||e,function(De,Fe){Le&&(Fe=De,De=e[Fe]),fa(v,Fe,th(De,r,t,Fe,e,d))}),v}var W_=th,Y_=1,K_=4;function Z_(e){return W_(e,Y_|K_)}var gn=Z_;function J_(e,r,t){(t!==void 0&&!In(e[r],t)||t===void 0&&!(r in e))&&is(e,r,t)}var rg=J_;function Q_(e){return Vr(e)&&Si(e)}var q_=Q_,eN="[object Object]",tN=Function.prototype,rN=Object.prototype,pE=tN.toString,nN=rN.hasOwnProperty,oN=pE.call(Object);function iN(e){if(!Vr(e)||Mo(e)!=eN)return!1;var r=fe(e);if(r===null)return!0;var t=nN.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&pE.call(t)==oN}var aN=iN;function sN(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var ng=sN;function uN(e){return ri(e,Rt(e))}var lN=uN;function fN(e,r,t,s,f,d,v){var b=ng(e,t),O=ng(r,t),P=v.get(O);if(P){rg(e,t,P);return}var R=d?d(b,O,t+"",e,r,v):void 0,F=R===void 0;if(F){var Y=g(O),ne=!Y&&Object(Qo.a)(O),ve=!Y&&!ne&&Xu(O);R=O,Y||ne||ve?g(b)?R=b:q_(b)?R=ye(b):ne?(F=!1,R=Object(C.a)(O,!0)):ve?(F=!1,R=aE(O,!0)):R=[]:aN(O)||Oi(O)?(R=b,Oi(b)?R=lN(b):(!Kr(b)||Ra(b))&&(R=uE(O))):F=!1}F&&(v.set(O,R),f(R,O,s,d,v),v.delete(O)),rg(e,t,R)}var cN=fN;function vE(e,r,t,s,f){e!==r&&Ud(r,function(d,v){if(f||(f=new $n),Kr(d))cN(e,r,v,t,vE,s,f);else{var b=s?s(ng(e,v),d,v+"",e,r,f):void 0;b===void 0&&(b=d),rg(e,v,b)}},Rt)}var dN=vE,hN=$f(function(e,r,t){dN(e,r,t)}),yE=hN,pN={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},gE=function(r){var t=gn(pN);return r&&(t=yE(t,r)),t};o(78),o(158);function vN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function yN(e,r,t){return r&&mE(e.prototype,r),t&&mE(e,t),e}function gN(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var mN="*",bN=function(){function e(){vN(this,e),gN(this,"_events",{})}return yN(e,[{key:"on",value:function(t,s,f){var d=this;return t==null||t.split(",").forEach(function(v){v=v.trim(),d._events[v]||(d._events[v]=[]),d._events[v].push({callback:s,once:!!f})}),this}},{key:"once",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){return d=d.trim(),f.on(d,s,!0)})}},{key:"emit",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){var v=f._events[d]||[],b=f._events[mN]||[],O=function(R){for(var F=R.length,Y=0;Y<F;Y++)if(R[Y]){var ne=R[Y],ve=ne.callback,Le=ne.once;Le&&(R.splice(Y,1),R.length===0&&delete f._events[d],F--,Y--),ve.apply(f,[s])}};O(v),O(b)})}},{key:"off",value:function(t,s){var f=this;return t||(this._events={}),t.split(",").forEach(function(d){if(!s)delete f._events[d];else{for(var v=f._events[d]||[],b=v.length,O=0;O<b;O++)v[O].callback===s&&(v.splice(O,1),b--,O--);v.length===0&&delete f._events[d]}}),this}},{key:"getEvents",value:function(){return this._events}}]),e}();function ls(e,r){return r*Math.round(e/r)||e}function bE(e,r){return e%r}function og(e,r){return xN(e)||SN(e,r)||ON(e,r)||EN()}function EN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ON(e,r){if(e){if(typeof e=="string")return EE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return EE(e,r)}}function EE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function SN(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function xN(e){if(Array.isArray(e))return e}var ig=function(r,t,s){var f=og(r,2),d=f[0],v=f[1],b=og(t,2),O=b[0],P=b[1],R=og(s,2),F=R[0],Y=R[1];return d>O&&d<F&&v>P&&v<Y},OE=function(r,t){var s=t.multipleSelectKey,f=!1;switch(s){case"meta":f=r.metaKey;break;case"alt":f=r.altKey;break;case"shift":f=r.shiftKey;break;case"ctrl":f=r.ctrlKey;break;default:f=!1;break}return f};o(79),o(161),o(125),o(80),o(30),o(12),o(13),o(14),o(47);var rh,TN=new Uint8Array(16);function AN(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(TN)}var PN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wN(e){return typeof e=="string"&&PN.test(e)}for(var _N=wN,Hn=[],ag=0;ag<256;++ag)Hn.push((ag+256).toString(16).substr(1));function NN(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Hn[e[r+0]]+Hn[e[r+1]]+Hn[e[r+2]]+Hn[e[r+3]]+"-"+Hn[e[r+4]]+Hn[e[r+5]]+"-"+Hn[e[r+6]]+Hn[e[r+7]]+"-"+Hn[e[r+8]]+Hn[e[r+9]]+"-"+Hn[e[r+10]]+Hn[e[r+11]]+Hn[e[r+12]]+Hn[e[r+13]]+Hn[e[r+14]]+Hn[e[r+15]]).toLowerCase();if(!_N(t))throw TypeError("Stringified UUID is invalid");return t}var MN=NN;function RN(e,r,t){e=e||{};var s=e.random||(e.rng||AN)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,r){t=t||0;for(var f=0;f<16;++f)r[t+f]=s[f];return r}return MN(s)}var sg=RN,fs=function(){var r=sg();return r},IN=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.nodes.reduce(function(f,d){return f[d.id]=t+sg(),d.id=f[d.id],f},{});return r.edges.forEach(function(f){f.id=t+sg(),f.sourceNodeId=s[f.sourceNodeId],f.targetNodeId=s[f.targetNodeId]}),r};o(104),o(203);var DN=function(r,t,s,f){var d=(t.y-r.y)*(f.x-s.x)-(r.x-t.x)*(s.y-f.y);if(d===0)return!1;var v=((t.x-r.x)*(f.x-s.x)*(s.y-r.y)+(t.y-r.y)*(f.x-s.x)*r.x-(f.y-s.y)*(t.x-r.x)*s.x)/d,b=-((t.y-r.y)*(f.y-s.y)*(s.x-r.x)+(t.x-r.x)*(f.y-s.y)*r.y-(f.x-s.x)*(t.y-r.y)*s.y)/d;return(v-r.x)*(v-t.x)<=0&&(b-r.y)*(b-t.y)<=0&&(v-s.x)*(v-f.x)<=0&&(b-s.y)*(b-f.y)<=0?{x:v,y:b}:!1},Qf=function(r,t,s){var f=r.x,d=r.y;return(f-t.x)*(f-s.x)<=0&&(d-t.y)*(d-s.y)<=0};function nh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nh=function(t){return typeof t}:nh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function SE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function xE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?SE(Object(t),!0).forEach(function(s){CN(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function CN(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ug=function(r){var t=r.anchors;return t},oh=function(r,t){for(var s=t.nodes,f,d=s.length-1;d>=0;d--){var v=s[d],b=BN(r,v);if(b){var O=v.getTargetAnchor(r);if(O){var P={node:v,anchorIndex:O.index,anchor:O.anchor};(!f||LN(v,f.node,t))&&(f=P)}}}return f},LN=function(r,t,s){return r.zIndex>t.zIndex||s.nodesMap[r.id].index>s.nodesMap[t.id].index},jN=function(r,t){for(var s=ug(t),f,d=Number.MAX_SAFE_INTEGER,v=0;v<s.length;v++){var b=_i(r.x,r.y,s[v].x,s[v].y);b<d&&(d=b,f={index:v,anchor:xE(xE({},s[v]),{},{x:s[v].x,y:s[v].y,id:s[v].id})})}return f},_i=function(r,t,s,f){return Math.hypot(r-s,t-f)},cs=function(r,t){var s=!1,f=0,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},BN=function(r,t){var s=!1,f=5,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},Po=function(r){var t=r.x,s=r.y,f=r.width,d=r.height,v={minX:t-f/2,minY:s-d/2,maxX:t+f/2,maxY:s+d/2,x:t,y:s,width:f,height:d,centerX:t,centerY:s};return v},FN=function(r){var t=r,s=t.x,f=t.y,d=t.width,v=t.height,b=t.radius,O=[{x:s-d/2+b,y:f-v/2+b,r:b},{x:s+d/2-b,y:f-v/2+b,r:b},{x:s-d/2+b,y:f+v/2-b,r:b},{x:s+d/2-b,y:f+v/2-b,r:b}];return O},TE=function(r,t,s){var f=FN(s),d,v=Number.MAX_SAFE_INTEGER;f.forEach(function(O){var P=_i(r.x,r.y,O.x,O.y);P<v&&(v=P,d=O)});var b=lg(r,t,d);return b},lg=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.r;if(t===At.HORIZONTAL){var P=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)),R=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)),F=Math.abs(P-r.x)<Math.abs(R-r.x)?P:R;f={x:F,y:r.y}}else if(t===At.VERTICAL){var Y=b-Math.sqrt(O*O-(r.x-v)*(r.x-v)),ne=b+Math.sqrt(O*O-(r.x-v)*(r.x-v)),ve=Math.abs(Y-r.y)<Math.abs(ne-r.y)?Y:ne;f={x:r.x,y:ve}}return f},AE=function(r,t){var s=t,f=!1,d={minX:s.x-s.width/2+s.radius,maxX:s.x+s.width/2-s.radius,minY:s.y-s.height/2+s.radius,maxY:s.y+s.height/2-s.radius},v=s.x,b=s.y,O=s.width,P=s.height;return r.y===b+P/2||r.y===b-P/2?f=r.x>d.minX&&r.x<d.maxX:(r.x===v+O/2||r.x===v-O/2)&&(f=r.y>d.minY&&r.y<d.maxY),f},PE=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.rx,P=d.ry;if(t===At.HORIZONTAL){var R=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),F=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),Y=Math.abs(R-r.x)<Math.abs(F-r.x)?R:F;f={x:Y,y:r.y}}else if(t===At.VERTICAL){var ne=b-Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),ve=b+Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),Le=Math.abs(ne-r.y)<Math.abs(ve-r.y)?ne:ve;f={x:r.x,y:Le}}return f},ih=function(r,t,s){for(var f=s,d=f.pointsPosition,v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});return O.forEach(function(R){var F=R.start,Y=R.end,ne=F,ve=Y;F.x>Y.x&&(ne=Y,ve=F);var Le={x:r.x,y:r.y};if(ne.x===ve.x&&t===At.HORIZONTAL&&(Le={x:ne.x,y:r.y}),ne.y===ve.y&&t===At.VERTICAL&&(Le={x:r.x,y:ne.y}),ne.x!==ve.x&&ne.y!==ve.y){var De=(ve.y-ne.y)/(ve.x-ne.x),Fe=(ne.x*ve.y-ve.x*ne.y)/(ne.x-ve.x);t===At.HORIZONTAL?Le={x:(r.y-Fe)/De,y:r.y}:t===At.VERTICAL&&(Le={x:r.x,y:De*r.x+Fe})}var Tt=Qf(Le,F,Y);if(Tt){var It=_i(Le.x,Le.y,r.x,r.y);It<v&&(v=It,b=Le)}}),b},GN=function(r){var t=ru(r,["id","type","x","y","text","properties","virtual"]);return t},wE=function(r,t,s,f){var d=r.x,v=r.y;return t.x>r.x?d=r.x+s/2:t.x<r.x&&(d=r.x-s/2),t.y>r.y?v=r.y+f/2:t.y<r.y&&(v=r.y-f/2),{x:d,y:v}},_E=function(r){var t=r.rows,s=r.style,f=r.rowsLength,d=r.className,v=document.createElement("div");v.style.fontSize=s.fontSize,v.style.width=s.width,v.className=d,v.style.lineHeight=s.lineHeight,v.style.padding=s.padding,s.fontFamily&&(v.style.fontFamily=s.fontFamily),f>1?t.forEach(function(O){var P=document.createElement("div");P.textContent=O,v.appendChild(P)}):v.textContent=t,document.body.appendChild(v);var b=v.clientHeight;return document.body.removeChild(v),b},fg=function(r){var t=r.rows,s=r.rowsLength,f=r.fontSize,d=0;return t&&t.forEach(function(v){var b=b0(v);d=b>d?b:d}),{width:Math.ceil(d/2)*f+f/4,height:s*(f+2)+f/4}},ah=function(r){return nh(r)!=="object"?{isAllPass:!!r,msg:r?"":"不允许连接"}:r},Zn=function(r){try{return JSON.parse(JSON.stringify(r))}catch{return r}},kN=1e3,UN=999,cg=function(){return++kN},zN=function(){return--UN},dt,NE,ME,RE,IE,DE,CE,LE,jE,BE,FE,GE,kE,UE,zE,HE,XE,$E,VE,WE,YE;function KE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function mo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?KE(Object(t),!0).forEach(function(s){Go(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):KE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function An(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function HN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ZE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function XN(e,r,t){return r&&ZE(e.prototype,r),t&&ZE(e,t),e}function Go(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var dg=(dt=function(){function e(r,t){HN(this,e),Go(this,"id",""),An(this,"type",NE,this),An(this,"sourceNodeId",ME,this),An(this,"targetNodeId",RE,this),An(this,"startPoint",IE,this),An(this,"endPoint",DE,this),An(this,"text",CE,this),An(this,"properties",LE,this),An(this,"points",jE,this),An(this,"pointsList",BE,this),An(this,"isSelected",FE,this),An(this,"isHovered",GE,this),An(this,"isHitable",kE,this),An(this,"draggable",UE,this),An(this,"visible",zE,this),Go(this,"virtual",!1),An(this,"isAnimation",HE,this),An(this,"isShowAdjustPoint",XE,this),Go(this,"graphModel",void 0),An(this,"zIndex",$E,this),Go(this,"BaseType",Ve.EDGE),Go(this,"modelType",Ze.EDGE),An(this,"state",VE,this),Go(this,"additionStateData",void 0),Go(this,"sourceAnchorId",""),Go(this,"targetAnchorId",""),Go(this,"menu",void 0),Go(this,"customTextPosition",!1),An(this,"style",WE,this),An(this,"arrowConfig",YE,this),this.graphModel=t,this.initEdgeData(r),this.setAttributes()}return XN(e,[{key:"initEdgeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||fs()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")");var v=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=v,Mn(this,D1(t));var b=this.graphModel.overlapMode;b===mt.INCREASE&&(this.zIndex=t.zIndex||cg()),this.setAnchors(),this.initPoints(),this.formatText(t)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return mo(mo({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return mo({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.edgeText;return gn(t)}},{key:"getEdgeAnimationStyle",value:function(){var t=this.graphModel.theme.edgeAnimation;return gn(t)}},{key:"getArrowStyle",value:function(){var t=this.getEdgeStyle(),s=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,d=this.isAnimation?s.stroke:t.stroke;return mo(mo({},t),{},{fill:d,stroke:d},f)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel,s=t.theme.outline;return gn(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.sourceNodeId])===null||s===void 0?void 0:s.model}},{key:"targetNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.targetNodeId])===null||s===void 0?void 0:s.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(t,s){var f,d,v=ug(t);return v.forEach(function(b){var O=S0(b,s);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getEndAnchor",value:function(t){var s=this,f,d,v=ug(t);return v.forEach(function(b){var O=S0(b,s.startPoint);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return d&&(v.text={x:s,y:f,value:d}),this.graphModel.overlapMode===mt.INCREASE&&(v.zIndex=this.zIndex),v}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(t,s){this.properties[t]=Zn(s),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=mo(mo({},this.properties),Zn(t)),this.setAttributes()}},{key:"changeEdgeId",value:function(t){var s=this.arrowConfig,f=s.markerEnd,d=s.markerStart;d&&d==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t}},{key:"setStyle",value:function(t,s){this.style=mo(mo({},this.style),{},Go({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=mo(mo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=mo({},Zn(t))}},{key:"formatText",value:function(t){var s=this.textPosition,f=s.x,d=s.y;if(!t.text||typeof t.text=="string"){this.text={value:t.text||"",x:f,y:d,draggable:this.text.draggable,editable:this.text.editable};return}Object.prototype.toString.call(t.text)==="[object Object]"&&(this.text={x:t.text.x||f,y:t.text.y||d,value:t.text.value||"",draggable:this.text.draggable,editable:this.text.editable})}},{key:"resetTextPosition",value:function(){var t=this.textPosition,s=t.x,f=t.y;this.text.x=s,this.text.y=f}},{key:"moveText",value:function(t,s){if(this.text){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,draggable:O,x:d+t,y:v+s,editable:P}}}},{key:"setText",value:function(t){t&&Mn(this.text,t)}},{key:"updateText",value:function(t){this.text=mo(mo({},this.text),{},{value:t})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var s=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:s.x,y:s.y}),this.targetAnchorId||(this.targetAnchorId=s.id)}}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"updateStartPoint",value:function(t){this.startPoint=t}},{key:"moveStartPoint",value:function(t,s){this.startPoint.x+=t,this.startPoint.y+=s}},{key:"updateEndPoint",value:function(t){this.endPoint=t}},{key:"moveEndPoint",value:function(t,s){this.endPoint.x+=t,this.endPoint.y+=s}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=t}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(t){Mn(this,t)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(t){var s=t.startPoint,f=t.endPoint;this.updateStartPoint({x:s.x,y:s.y}),this.updateEndPoint({x:f.x,y:f.y})}}]),e}(),NE=pr(dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ME=pr(dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),RE=pr(dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IE=pr(dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),DE=pr(dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),CE=pr(dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),LE=pr(dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),jE=pr(dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),BE=pr(dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),FE=pr(dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GE=pr(dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kE=pr(dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),UE=pr(dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zE=pr(dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HE=pr(dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),XE=pr(dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$E=pr(dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),VE=pr(dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),WE=pr(dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),YE=pr(dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),pr(dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"sourceNode"),dt.prototype),pr(dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"targetNode"),dt.prototype),pr(dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"textPosition"),dt.prototype),pr(dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperty"),dt.prototype),pr(dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"deleteProperty"),dt.prototype),pr(dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperties"),dt.prototype),pr(dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"changeEdgeId"),dt.prototype),pr(dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyle"),dt.prototype),pr(dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyles"),dt.prototype),pr(dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStyles"),dt.prototype),pr(dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"formatText"),dt.prototype),pr(dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"resetTextPosition"),dt.prototype),pr(dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveText"),dt.prototype),pr(dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setText"),dt.prototype),pr(dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateText"),dt.prototype),pr(dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setAnchors"),dt.prototype),pr(dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setSelected"),dt.prototype),pr(dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHovered"),dt.prototype),pr(dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHitable"),dt.prototype),pr(dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"openEdgeAnimation"),dt.prototype),pr(dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"closeEdgeAnimation"),dt.prototype),pr(dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setElementState"),dt.prototype),pr(dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStartPoint"),dt.prototype),pr(dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveStartPoint"),dt.prototype),pr(dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateEndPoint"),dt.prototype),pr(dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveEndPoint"),dt.prototype),pr(dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setZIndex"),dt.prototype),pr(dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"initPoints"),dt.prototype),pr(dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAttributes"),dt.prototype),pr(dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustStart"),dt.prototype),pr(dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustEnd"),dt.prototype),pr(dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAfterAdjustStartAndEnd"),dt.prototype),dt),hg=dg;function sh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sh=function(t){return typeof t}:sh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function JE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function QE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?JE(Object(t),!0).forEach(function(s){t0(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function $N(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function qE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function VN(e,r,t){return r&&qE(e.prototype,r),t&&qE(e,t),e}function uh(){return typeof Reflect<"u"&&Reflect.get?uh=Reflect.get:uh=function(r,t,s){var f=WN(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},uh.apply(this,arguments)}function WN(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ol(e),e!==null););return e}function YN(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&pg(e,r)}function pg(e,r){return pg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},pg(e,r)}function KN(e){var r=JN();return function(){var s=ol(e),f;if(r){var d=ol(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return ZN(this,f)}}function ZN(e,r){if(r&&(sh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e0(e)}function e0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ol(e){return ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ol(e)}function t0(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var vg=function(e){YN(t,e);var r=KN(t);function t(){var s;$N(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),t0(e0(s),"modelType",Ze.LINE_EDGE),s}return VN(t,[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line,d=uh(ol(t.prototype),"getEdgeStyle",this).call(this);return QE(QE({},d),gn(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}]),t}(hg);function lh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lh=function(t){return typeof t}:lh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}var xr,r0;function QN(e,r){return r1(e)||t1(e,r)||e1(e,r)||qN()}function qN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e1(e,r){if(e){if(typeof e=="string")return n0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return n0(e,r)}}function n0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function t1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function r1(e){if(Array.isArray(e))return e}function o0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function i0(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?o0(Object(t),!0).forEach(function(s){gg(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function n1(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function o1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function a0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i1(e,r,t){return r&&a0(e.prototype,r),t&&a0(e,t),e}function il(){return typeof Reflect<"u"&&Reflect.get?il=Reflect.get:il=function(r,t,s){var f=a1(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},il.apply(this,arguments)}function a1(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ds(e),e!==null););return e}function s1(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&yg(e,r)}function yg(e,r){return yg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},yg(e,r)}function u1(e){var r=f1();return function(){var s=ds(e),f;if(r){var d=ds(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return l1(this,f)}}function l1(e,r){if(r&&(lh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qf(e)}function qf(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ds(e){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ds(e)}function gg(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function uo(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var mg=(xr=function(e){s1(t,e);var r=u1(t);function t(){var s;o1(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),gg(qf(s),"modelType",Ze.POLYLINE_EDGE),gg(qf(s),"draggingPointList",void 0),n1(qf(s),"dbClickPosition",r0,qf(s)),s}return i1(t,[{key:"initEdgeData",value:function(f){this.offset=30,il(ds(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline,d=il(ds(t.prototype),"getEdgeStyle",this).call(this);return i0(i0({},d),gn(f))}},{key:"getTextPosition",value:function(){var f,d=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!d){var v=this.dbClickPosition,b=v.x,O=v.y;return{x:b,y:O}}var P=al(this.points),R=N1(P),F=QN(R,2),Y=F[0],ne=F[1];return{x:(Y.x+ne.x)/2,y:(Y.y+ne.y)/2}}},{key:"getAfterAnchor",value:function(f,d,v){var b,O;return v.forEach(function(P){var R;f===At.HORIZONTAL?R=Math.abs(d.y-P.y):f===At.VERTICAL&&(R=Math.abs(d.x-P.x)),(!O||O>R)&&(O=R,b=P)}),b}},{key:"getCrossPoint",value:function(f,d,v){var b;return f===At.HORIZONTAL?b={x:v.x,y:d.y}:f===At.VERTICAL&&(b={x:d.x,y:v.y}),b}},{key:"removeCrossPoints",value:function(f,d,v){var b=v.map(function(Pt){return Pt});if(f===1){var O=b[f],P=b[d],R=b[f-1],F=v0(R,O,this.sourceNode);if(F){var Y=y0(O,P,this.sourceNode);if(Y){var ne=g0(O,P,this.sourceNode);ne&&(b[f]=ne,b.splice(f-1,1),f--,d--)}}else{var ve=this.sourceNode.anchors;ve.forEach(function(Pt){if(Pt.x===R.x&&Pt.x===O.x||Pt.y===R.y&&Pt.y===O.y){var er=_i(Pt.x,Pt.y,O.x,O.y),_t=_i(R.x,R.y,O.x,O.y);er<_t&&(b[f-1]=Pt)}})}}if(d===v.length-2){var Le=b[f],De=b[d],Fe=b[d+1],Tt=v0(De,Fe,this.targetNode);if(Tt){var It=y0(Le,De,this.targetNode);if(It){var ut=g0(Le,De,this.targetNode);ut&&(b[d]=ut,b.splice(d+1,1))}}else{var Ft=this.targetNode.anchors;Ft.forEach(function(Pt){if(Pt.x===Fe.x&&Pt.x===De.x||Pt.y===Fe.y&&Pt.y===De.y){var er=_i(Pt.x,Pt.y,De.x,De.y),_t=_i(Fe.x,Fe.y,De.x,De.y);er<_t&&(b[d+1]=Pt)}})}}return b}},{key:"getDraggingPoints",value:function(f,d,v,b,O){var P=O.map(function(Y){return Y}),R=this.getAfterAnchor(f,v,b),F=this.getCrossPoint(f,v,R);return d==="start"?(P.unshift(F),P.unshift(R)):(P.push(F),P.push(R)),P}},{key:"updateCrossPoints",value:function(f){var d=f.map(function(ut){return ut}),v=f[0],b=f[1],O=f[d.length-2],P=f[d.length-1],R=this.sourceNode,F=this.targetNode,Y=R.modelType,ne=F.modelType,ve=yh(v,b),Le=d[0];switch(Y){case Ze.RECT_NODE:if(R.radius!==0){var De=AE(v,R);De||(Le=TE(v,ve,R))}break;case Ze.CIRCLE_NODE:Le=lg(v,ve,R);break;case Ze.ELLIPSE_NODE:Le=PE(v,ve,R);break;case Ze.DIAMOND_NODE:Le=ih(v,ve,R);break;case Ze.POLYGON_NODE:Le=ih(v,ve,R);break}d[0]=Le;var Fe=yh(O,P),Tt=d[d.length-1];switch(ne){case Ze.RECT_NODE:if(F.radius!==0){var It=AE(P,F);It||(Tt=TE(P,Fe,F))}break;case Ze.CIRCLE_NODE:Tt=lg(P,Fe,F);break;case Ze.ELLIPSE_NODE:Tt=PE(P,Fe,F);break;case Ze.DIAMOND_NODE:Tt=ih(P,Fe,F);break;case Ze.POLYGON_NODE:Tt=ih(P,Fe,F);break}return d[d.length-1]=Tt,d}},{key:"getData",value:function(){var f=il(ds(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Object.assign({},f,{pointsList:d})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=p0({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,R=f.direction,F=this.pointsList,Y=F;return R===At.HORIZONTAL?(F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y},Y=this.pointsList.map(function(ne){return ne})):R===At.VERTICAL&&(F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y},Y=this.pointsList.map(function(ne){return ne})),this.updatePointsAfterDrag(Y),this.draggingPointList=Y,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:R}}},{key:"dragAppend",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,R=f.direction,F=this.pointsList;if(R===At.HORIZONTAL){F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y};var Y=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(Y=this.removeCrossPoints(O,P,Y)),O===0){var ne={x:v.x,y:v.y+d.y},ve=cs(ne,this.sourceNode);if(!ve){var Le=this.sourceNode.anchors;Y=this.getDraggingPoints(R,"start",ne,Le,Y)}}if(P===this.pointsList.length-1){var De={x:b.x,y:b.y+d.y},Fe=cs(De,this.targetNode);if(!Fe){var Tt=this.targetNode.anchors;Y=this.getDraggingPoints(R,"end",De,Tt,Y)}}this.updatePointsAfterDrag(Y),this.draggingPointList=Y}else if(R===At.VERTICAL){F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y};var It=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(It=this.removeCrossPoints(O,P,It)),O===0){var ut={x:v.x+d.x,y:v.y},Ft=cs(ut,this.sourceNode);if(!Ft){var Pt=this.sourceNode.anchors;It=this.getDraggingPoints(R,"start",ut,Pt,It)}}if(P===this.pointsList.length-1){var er={x:b.x+d.x,y:b.y},_t=cs(er,this.targetNode);if(!_t){var gr=this.targetNode.anchors;It=this.getDraggingPoints(R,"end",er,gr,It)}}this.updatePointsAfterDrag(It),this.draggingPointList=It}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:R}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=h0(al(this.points));this.pointsList=f.map(function(b){return b}),this.draggingPointList=[];var d=f[0];this.startPoint=Object.assign({},d);var v=f[f.length-1];this.endPoint=Object.assign({},v)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var d=this.updateCrossPoints(f);this.points=d.map(function(v){return"".concat(v.x,",").concat(v.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=p0({x:d.x,y:d.y},{x:v.x,y:v.y},b,O,this.offset||0);this.pointsList=P,this.initPoints()}}]),t}(hg),r0=uo(xr.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo(xr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"initPoints"),xr.prototype),uo(xr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePoints"),xr.prototype),uo(xr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateStartPoint"),xr.prototype),uo(xr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveStartPoint"),xr.prototype),uo(xr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateEndPoint"),xr.prototype),uo(xr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveEndPoint"),xr.prototype),uo(xr.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendStart"),xr.prototype),uo(xr.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendSimple"),xr.prototype),uo(xr.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppend"),xr.prototype),uo(xr.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendEnd"),xr.prototype),uo(xr.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePointsAfterDrag"),xr.prototype),uo(xr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustStart"),xr.prototype),uo(xr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustEnd"),xr.prototype),uo(xr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateAfterAdjustStartAndEnd"),xr.prototype),xr),ec=function(r){var t=r.start,s=r.end,f=r.offset,d=r.verticalLength,v=r.type,b={leftX:0,leftY:0,rightX:0,rightY:0},O=Math.atan((s.y-t.y)/(s.x-t.x)),P=Math.atan(f/d),R=Math.sqrt(d*d+f*f);return v==="start"?s.x>=t.x?(b.leftX=t.x+R*Math.sin(O+P),b.leftY=t.y-R*Math.cos(O+P),b.rightX=t.x-R*Math.sin(O-P),b.rightY=t.y+R*Math.cos(O-P)):(b.leftX=t.x-R*Math.sin(O+P),b.leftY=t.y+R*Math.cos(O+P),b.rightX=t.x+R*Math.sin(O-P),b.rightY=t.y-R*Math.cos(O-P)):v==="end"&&(s.x>=t.x?(b.leftX=s.x+R*Math.sin(O-P),b.leftY=s.y-R*Math.cos(O-P),b.rightX=s.x-R*Math.sin(O+P),b.rightY=s.y+R*Math.cos(O+P)):(b.leftX=s.x-R*Math.sin(O-P),b.leftY=s.y+R*Math.cos(O-P),b.rightX=s.x+R*Math.sin(O+P),b.rightY=s.y-R*Math.cos(O+P))),b};function s0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function fh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?s0(Object(t),!0).forEach(function(s){c1(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function c1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d1(e){return v1(e)||p1(e)||u0(e)||h1()}function h1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function v1(e){if(Array.isArray(e))return Eg(e)}function ch(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ch=function(t){return typeof t}:ch=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function bg(e,r){return m1(e)||g1(e,r)||u0(e,r)||y1()}function y1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u0(e,r){if(e){if(typeof e=="string")return Eg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Eg(e,r)}}function Eg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function g1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function m1(e){if(Array.isArray(e))return e}var b1=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},Og=function(r){var t=[],s={};return r.forEach(function(f){var d="".concat(f.x,"-").concat(f.y);f.id=d,s[d]=f}),Object.keys(s).forEach(function(f){t.push(s[f])}),t},dh=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},E1=function(r,t){var s=Math.abs(r.x-t.centerX),f=Math.abs(r.y-t.centerY);return s/t.width>f/t.height?At.HORIZONTAL:At.VERTICAL},hh=function(r,t){var s=E1(t,r);return s===At.HORIZONTAL?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},l0=function(r,t){var s=Math.min(r.minX,t.minX),f=Math.min(r.minY,t.minY),d=Math.max(r.maxX,t.maxX),v=Math.max(r.maxY,t.maxY);return{centerX:(s+d)/2,centerY:(f+v)/2,minX:s,minY:f,maxX:d,maxY:v,height:v-f,width:d-s}},tc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=[],f=[];r.forEach(function(F){s.push(F.x),f.push(F.y)});var d=Math.min.apply(Math,s),v=Math.max.apply(Math,s),b=Math.min.apply(Math,f),O=Math.max.apply(Math,f),P=v-d,R=O-b;return t&&(P+=t,R+=t),{centerX:(d+v)/2,centerY:(b+O)/2,maxX:v,maxY:O,minX:d,minY:b,x:(d+v)/2,y:(b+O)/2,height:R,width:P}},ph=function(r){var t=r.minX,s=r.minY,f=r.maxX,d=r.maxY;return[{x:t,y:s},{x:f,y:s},{x:f,y:d},{x:t,y:d}]},vh=function(r,t){var s=r.x,f=r.y;return s<t.minX||s>t.maxX||f<t.minY||f>t.maxY},O1=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},S1=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},x1=function(r,t){return O1(r,t.x).concat(S1(r,t.y))},Sg=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},T1=function(r,t){var s=-2,f=0;return t.forEach(function(d){d&&(r.x===d.x&&(f+=s),r.y===d.y&&(f+=s))}),f},f0=function(r,t,s,f,d){return Sg(r,t)+Sg(r,s)+T1(r,[t,s,f,d])},A1=function e(r,t,s,f,d){d||(d=0),r.unshift(t[f]),s[f]&&s[f]!==f&&d<=100&&e(r,t,s,s[f],d+1)},P1=function(r,t){var s=r.indexOf(t);s>-1&&r.splice(s,1)},rc=function(r,t,s,f){var d=t.x-r.x,v=t.y-r.y,b=f.x-s.x,O=f.y-s.y,P=(-v*(r.x-s.x)+d*(r.y-s.y))/(-b*v+d*O),R=(b*(r.y-s.y)-O*(r.x-s.x))/(-b*v+d*O);return P>=0&&P<=1&&R>=0&&R<=1},c0=function(r,t,s){if(s.width===0&&s.height===0)return!1;var f=ph(s),d=bg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return rc(r,t,v,b)||rc(r,t,v,P)||rc(r,t,b,O)||rc(r,t,O,P)},w1=function(r,t,s,f){var d=[];return r.forEach(function(v){v!==t&&(v.x===t.x||v.y===t.y)&&!c0(v,t,s)&&!c0(v,t,f)&&d.push(v)}),Og(d)},_1=function(r,t,s,f,d,v,b){var O=[],P=[t],R={},F={},Y={};F[t.id]=0,Y[t.id]=f0(t,s,t);var ne={};r.forEach(function(De){ne[De.id]=De});for(var ve=function(){var Fe=void 0,Tt=1/0;if(P.forEach(function(ut){Y[ut.id]<Tt&&(Tt=Y[ut.id],Fe=ut)}),Fe===s){var It=[];return A1(It,ne,R,s.id),{v:It}}P1(P,Fe),O.push(Fe),w1(r,Fe,f,d).forEach(function(ut){if(O.indexOf(ut)===-1){P.indexOf(ut)===-1&&P.push(ut);var Ft=Y[Fe.id]+Sg(Fe,ut);F[ut.id]&&Ft>=F[ut.id]||(R[ut.id]=Fe.id,F[ut.id]=Ft,Y[ut.id]=F[ut.id]+f0(ut,s,t,v,b))}})};P.length;){var Le=ve();if(ch(Le)==="object")return Le.v}return[t,s]},d0=function(r){var t=Po(r);return t},h0=function(r){for(var t=1;t<r.length-1;){var s=r[t-1],f=r[t],d=r[t+1];s.x===f.x&&f.x===d.x||s.y===f.y&&f.y===d.y?r.splice(t,1):t++}return r},p0=function(r,t,s,f,d){var v=d0(s),b=d0(f),O=dh(v,d),P=dh(b,d),R=hh(O,r),F=hh(P,t);if(b1(O,P)){var Y=M1(r,t,R,F);return[r,R].concat(d1(Y),[F,t])}var ne=tc([R,F]),ve=l0(O,ne),Le=l0(P,ne),De=[];De=De.concat(ph(ve)),De=De.concat(ph(Le));var Fe={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[ne,ve,Le].forEach(function(It){De=De.concat(x1(It,Fe).filter(function(ut){return vh(ut,O)&&vh(ut,P)}))}),[{x:R.x,y:F.y},{x:F.x,y:R.y}].forEach(function(It){vh(It,O)&&vh(It,P)&&De.push(It)}),De.unshift(R),De.push(F),De=Og(De);var Tt=_1(De,R,F,v,b,r,t);return Tt.unshift(r),Tt.push(t),Tt.length>2&&(Tt=h0(Tt)),Og(Tt)},N1=function(r){var t;if(r.length===1)t=[r[0],r[0]];else if(r.length>=2){for(var s=r[0],f=r[1],d=_i(s.x,s.y,f.x,f.y),v=1;v<r.length-1;v++){var b=r[v],O=r[v+1],P=_i(b.x,b.y,O.x,O.y);P>d&&(d=P,s=b,f=O)}t=[s,f]}return t},v0=function(r,t,s){var f=cs(r,s),d=cs(t,s);return f&&d},y0=function(r,t,s){var f=cs(r,s),d=cs(t,s),v=f&&d,b=f||d;return!v&&b},g0=function(r,t,s){for(var f,d,v=Po(s),b=ph(v),O=0;O<b.length;O++){var P=rc(r,t,b[O],b[(O+1)%b.length]);P&&(d=[b[O],b[(O+1)%b.length]])}return d&&(f=DN(r,t,d[0],d[1])),f},yh=function(r,t){var s;return r.x===t.x?s=At.VERTICAL:r.y===t.y&&(s=At.HORIZONTAL),s},al=function(r){var t=r.split(" "),s=[];return t&&t.forEach(function(f){var d=f.split(","),v=bg(d,2),b=v[0],O=v[1];s.push({x:Number(b),y:Number(O)})}),s},M1=function(r,t,s,f){var d=[],v=yh(r,s),b=yh(t,f);if(v===b)r.y===s.y?(d.push({x:s.x,y:(s.y+f.y)/2}),d.push({x:f.x,y:(s.y+f.y)/2})):(d.push({x:(s.x+f.x)/2,y:s.y}),d.push({x:(s.x+f.x)/2,y:f.y}));else{var O={x:s.x,y:f.y},P=Qf(O,r,s),R=Qf(O,t,f);if(P||R)O={x:f.x,y:s.y};else{var F=m0(O,r,s),Y=m0(O,t,f);F&&Y&&(O={x:f.x,y:s.y})}d.push(O)}return d},m0=function(r,t,s){return r.x===t.x&&r.x===s.x||r.y===t.y&&r.y===s.y},b0=function(r){if(!r)return 0;for(var t=0,s=0;s<r.length;s++){var f=r.charCodeAt(s);r.match(/[A-Z]/)?t+=1.5:f>=1&&f<=126||f>=65376&&f<=65439?t+=1:t+=2}return t},R1=function(r){var t=r.start,s=r.end,f;if(t.x===s.x&&t.y===s.y)f="";else{var d={start:t,end:s,offset:10,verticalLength:5},v=ec(fh(fh({},d),{},{type:"start"})),b=ec(fh(fh({},d),{},{type:"end"}));f="M".concat(v.leftX," ").concat(v.leftY,` 
    L`).concat(v.rightX," ").concat(v.rightY,` 
    L`).concat(b.rightX," ").concat(b.rightY,`
    L`).concat(b.leftX," ").concat(b.leftY," z")}return{d:f,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},E0=function(r){var t=r.start,s=r.end,f=r.sourceNode,d=r.targetNode,v=r.offset,b=Po(f),O=Po(d),P=dh(b,v),R=dh(O,v),F=hh(P,t),Y=hh(R,s);return{sNext:F,ePre:Y}},gh=function(r){var t=r.replace(/M/g,"").replace(/C/g,",").split(","),s=mh(t[0]),f=mh(t[1]),d=mh(t[2]),v=mh(t[3]);return[s,f,d,v]},mh=function(r){var t=r.replace(/(^\s*)/g,"").split(" "),s=bg(t,2),f=s[0],d=s[1];return{x:+f,y:+d}},I1=function(r){var t=gh(r);return[t[2],t[3]]},O0=function(r,t){for(var s=r.x,f=r.y,d=al(t),v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});if(O.forEach(function(ne){var ve=ne.start,Le=ne.end;if(ve.x===Le.x){var De={x:ve.x,y:f},Fe=Qf(De,ve,Le);if(Fe){var Tt=Math.abs(ve.x-s);Tt<v&&(v=Tt,b=De)}}else if(ve.y===Le.y){var It={x:s,y:ve.y},ut=Qf(It,ve,Le);if(ut){var Ft=Math.abs(ve.y-f);Ft<v&&(v=Ft,b=It)}}}),!b){var R=O[0],F=R.start,Y=R.end;b={x:F.x+(Y.x-F.x)/2,y:F.y+(Y.y-F.y)/2}}return b},D1=function(r){return ru(r,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},S0=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))};function C1(e,r){return typeof r!="function"?function(t,s,f){return Object.assign({type:e.edgeType},f)}:function(t,s,f){var d=r(t,s,f);return d?typeof d=="string"?Object.assign({},f,{type:d}):Object.assign({type:d},f):{type:e.edgeType}}}o(204);function L1(){}var sl=L1;function j1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function x0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function B1(e,r,t){return r&&x0(e.prototype,r),t&&x0(e,t),e}function Pn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ni=window.document,T0=0;function F1(e){var r=e.onDragStart,t=r===void 0?sl:r,s=e.onDragging,f=s===void 0?sl:s,d=e.onDragEnd,v=d===void 0?sl:d,b=e.step,O=b===void 0?1:b,P=e.isStopPropagation,R=P===void 0?!0:P,F=!1,Y=!1,ne=0,ve=0,Le=0,De=0;function Fe(ut){if(R&&ut.stopPropagation(),!!Y&&(F=!0,Le+=ut.clientX-ne,De+=ut.clientY-ve,ne=ut.clientX,ve=ut.clientY,Math.abs(Le)>O||Math.abs(De)>O)){var Ft=Le%O,Pt=De%O,er=Le-Ft,_t=De-Pt;Le=Ft,De=Pt,f({deltaX:er,deltaY:_t,event:ut})}}function Tt(ut){if(R&&ut.stopPropagation(),Y=!1,Ni.removeEventListener("mousemove",Fe,!1),Ni.removeEventListener("mouseup",Tt,!1),!!F)return F=!1,v({event:ut})}function It(ut){if(ut.button===T0)return R&&ut.stopPropagation(),Y=!0,ne=ut.clientX,ve=ut.clientY,Ni.addEventListener("mousemove",Fe,!1),Ni.addEventListener("mouseup",Tt,!1),t({event:ut})}return It}var ha=function(){function e(r){var t=this,s=r.onDragStart,f=s===void 0?sl:s,d=r.onDragging,v=d===void 0?sl:d,b=r.onDragEnd,O=b===void 0?sl:b,P=r.eventType,R=P===void 0?"":P,F=r.eventCenter,Y=F===void 0?null:F,ne=r.step,ve=ne===void 0?1:ne,Le=r.isStopPropagation,De=Le===void 0?!0:Le,Fe=r.model,Tt=Fe===void 0?null:Fe,It=r.data,ut=It===void 0?null:It;j1(this,e),Pn(this,"onDragStart",void 0),Pn(this,"onDragging",void 0),Pn(this,"onDragEnd",void 0),Pn(this,"step",void 0),Pn(this,"isStopPropagation",void 0),Pn(this,"isDragging",!1),Pn(this,"isStartDragging",!1),Pn(this,"startX",0),Pn(this,"startY",0),Pn(this,"sumDeltaX",0),Pn(this,"sumDeltaY",0),Pn(this,"eventType",void 0),Pn(this,"eventCenter",void 0),Pn(this,"model",void 0),Pn(this,"data",void 0),Pn(this,"startTime",void 0),Pn(this,"handleMouseDown",function(Ft){var Pt,er;if(Ft.button===T0){t.isStopPropagation&&Ft.stopPropagation(),t.isStartDragging=!0,t.startX=Ft.clientX,t.startY=Ft.clientY,Ni.addEventListener("mousemove",t.handleMouseMove,!1),Ni.addEventListener("mouseup",t.handleMouseUp,!1);var _t=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEDOWN")],{e:Ft,data:t.data||_t}),t.startTime=new Date().getTime()}}),Pn(this,"handleMouseMove",function(Ft){if(t.isStopPropagation&&Ft.stopPropagation(),!!t.isStartDragging&&(t.sumDeltaX+=Ft.clientX-t.startX,t.sumDeltaY+=Ft.clientY-t.startY,t.startX=Ft.clientX,t.startY=Ft.clientY,t.step<=1||Math.abs(t.sumDeltaX)>t.step||Math.abs(t.sumDeltaY)>t.step)){var Pt,er=t.sumDeltaX%t.step,_t=t.sumDeltaY%t.step,gr=t.sumDeltaX-er,Cr=t.sumDeltaY-_t;t.sumDeltaX=er,t.sumDeltaY=_t;var wn=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();if(!t.isDragging){var Fn;(Fn=t.eventCenter)===null||Fn===void 0||Fn.emit(ze["".concat(t.eventType,"_DRAGSTART")],{e:Ft,data:t.data||wn}),t.onDragStart({event:Ft})}t.isDragging=!0,Promise.resolve().then(function(){var qn,Eo;t.onDragging({deltaX:gr,deltaY:Cr,event:Ft}),(qn=t.eventCenter)===null||qn===void 0||qn.emit(ze["".concat(t.eventType,"_MOUSEMOVE")],{e:Ft,data:t.data||wn}),(Eo=t.eventCenter)===null||Eo===void 0||Eo.emit(ze["".concat(t.eventType,"_DRAG")],{e:Ft,data:t.data||wn})})}}),Pn(this,"handleMouseUp",function(Ft){t.isStartDragging=!1,t.isStopPropagation&&Ft.stopPropagation(),Promise.resolve().then(function(){var Pt,er,_t;Ni.removeEventListener("mousemove",t.handleMouseMove,!1),Ni.removeEventListener("mouseup",t.handleMouseUp,!1);var gr=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEUP")],{e:Ft,data:t.data||gr}),t.isDragging&&(t.isDragging=!1,t.onDragEnd({event:Ft}),(_t=t.eventCenter)===null||_t===void 0||_t.emit(ze["".concat(t.eventType,"_DROP")],{e:Ft,data:t.data||gr}))})}),Pn(this,"cancelDrag",function(){Ni.removeEventListener("mousemove",t.handleMouseMove,!1),Ni.removeEventListener("mouseup",t.handleMouseUp,!1),t.onDragEnd({event:null}),t.isDragging=!1}),this.onDragStart=f,this.onDragging=v,this.onDragEnd=O,this.step=ve,this.isStopPropagation=De,this.eventType=R,this.eventCenter=Y,this.model=Tt,this.data=ut}return B1(e,[{key:"setStep",value:function(t){this.step=t}}]),e}(),A0={node:!1,edge:!1},G1={node:!0,edge:!0},k1=function(r){return!r||typeof r=="boolean"?gn(r===!0?G1:A0):yE(gn(A0),r)},We,P0,w0,_0,N0,M0,R0,I0,D0,C0,L0,j0,B0;function F0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function bh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?F0(Object(t),!0).forEach(function(s){Mi(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function nc(e,r){return H1(e)||z1(e,r)||G0(e,r)||U1()}function U1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function H1(e){if(Array.isArray(e))return e}function ul(e){return V1(e)||$1(e)||G0(e)||X1()}function X1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G0(e,r){if(e){if(typeof e=="string")return xg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xg(e,r)}}function $1(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V1(e){if(Array.isArray(e))return xg(e)}function xg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function oc(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?oc=function(t){return typeof t}:oc=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function ko(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function W1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function k0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Y1(e,r,t){return r&&k0(e.prototype,r),t&&k0(e,t),e}function Mi(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Eh=200,U0=(We=function(){function e(r){W1(this,e),Mi(this,"rootEl",void 0),ko(this,"width",P0,this),ko(this,"height",w0,this),Mi(this,"theme",void 0),Mi(this,"eventCenter",void 0),Mi(this,"modelMap",new Map),Mi(this,"topElement",void 0),Mi(this,"animation",void 0),Mi(this,"idGenerator",void 0),Mi(this,"edgeGenerator",void 0),Mi(this,"nodeMoveRules",[]),ko(this,"edgeType",_0,this),ko(this,"nodes",N0,this),ko(this,"edges",M0,this),ko(this,"overlapMode",R0,this),ko(this,"background",I0,this),ko(this,"transformModel",D0,this),ko(this,"editConfigModel",C0,this),ko(this,"gridSize",L0,this),ko(this,"partial",j0,this),ko(this,"fakerNode",B0,this);var t=r.container,s=r.background,f=s===void 0?{}:s,d=r.grid,v=r.idGenerator,b=r.edgeGenerator,O=r.animation;this.background=f,oc(d)==="object"&&(this.gridSize=d.size),this.rootEl=t,this.editConfigModel=new nt(r),this.eventCenter=new bN,this.transformModel=new dr(this.eventCenter),this.theme=gE(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=k1(O),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=v,this.edgeGenerator=C1(this,b),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=fs()}return Y1(e,[{key:"nodesMap",get:function(){return this.nodes.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"modelsMap",get:function(){return[].concat(ul(this.nodes),ul(this.edges)).reduce(function(t,s){return t[s.id]=s,t},{})}},{key:"sortElements",get:function(){var t=[];this.nodes.forEach(function(O){return t.push(O)}),this.edges.forEach(function(O){return t.push(O)}),t=t.sort(function(O,P){return O.zIndex-P.zIndex});for(var s=[],f=[-Eh,-Eh],d=[this.width+Eh,this.height+Eh],v=0;v<t.length;v++){var b=t[v];b.visible&&(!this.partial||b.isSelected||this.isElementInArea(b,f,d,!1,!1))&&s.push(b)}return s}},{key:"textEditElement",get:function(){var t=this.nodes.find(function(f){return f.state===ct.TEXT_EDIT}),s=this.edges.find(function(f){return f.state===ct.TEXT_EDIT});return t||s}},{key:"selectElements",get:function(){var t=new Map;return this.nodes.forEach(function(s){s.isSelected&&t.set(s.id,s)}),this.edges.forEach(function(s){s.isSelected&&t.set(s.id,s)}),t}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,b=[],O=[];this.nodes.forEach(function(F){return O.push(F)}),this.edges.forEach(function(F){return O.push(F)});for(var P=0;P<O.length;P++){var R=O[P];(!v||R.visible)&&this.isElementInArea(R,t,s,f,d)&&b.push(R)}return b}},{key:"getModel",value:function(t){return this.modelMap.get(t)}},{key:"getNodeModelById",value:function(t){var s;return this.fakerNode&&t===this.fakerNode.id?this.fakerNode:(s=this.nodesMap[t])===null||s===void 0?void 0:s.model}},{key:"getPointByClient",value:function(t){var s=t.x,f=t.y,d=this.rootEl.getBoundingClientRect(),v={x:s-d.left,y:f-d.top},b=this.transformModel.HtmlPointToCanvasPoint([v.x,v.y]),O=nc(b,2),P=O[0],R=O[1];return{domOverlayPosition:v,canvasOverlayPosition:{x:P,y:R}}}},{key:"isElementInArea",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(t.BaseType===Ve.NODE){t=t;for(var b=Po(t),O=b.minX,P=b.minY,R=b.maxX,F=b.maxY,Y=[{x:O,y:P},{x:R,y:P},{x:R,y:F},{x:O,y:F}],ne=v,ve=0;ve<Y.length;ve++){var Le=Y[ve],De=Le.x,Fe=Le.y,Tt=this.transformModel.CanvasPointToHtmlPoint([De,Fe]),It=nc(Tt,2);if(De=It[0],Fe=It[1],ig([De,Fe],s,f)!==v){ne=!v;break}}return ne}if(t.BaseType===Ve.EDGE){t=t;var ut=t,Ft=ut.startPoint,Pt=ut.endPoint,er=this.transformModel.CanvasPointToHtmlPoint([Ft.x,Ft.y]),_t=this.transformModel.CanvasPointToHtmlPoint([Pt.x,Pt.y]),gr=ig(er,s,f),Cr=ig(_t,s,f);return d?gr&&Cr:gr||Cr}return!1}},{key:"graphDataToModel",value:function(t){var s=this;(!this.width||!this.height)&&this.resize(),this.nodes=ua(t.nodes,function(f){var d=s.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的节点。"));var v=f.x,b=f.y;return v&&b&&(f.x=ls(v,s.gridSize),f.y=ls(b,s.gridSize),oc(f.text)==="object"&&(f.text.x-=bE(v,s.gridSize),f.text.y-=bE(b,s.gridSize))),new d(f,s)}),this.edges=ua(t.edges,function(f){var d=s.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的边。"));return new d(f,s)})}},{key:"modelToGraphData",value:function(){var t=[];this.edges.forEach(function(f){var d=f.getData();d&&!f.virtual&&t.push(d)});var s=[];return this.nodes.forEach(function(f){var d=f.getData();d&&!f.virtual&&s.push(d)}),{nodes:s,edges:t}}},{key:"modelToHistoryData",value:function(){for(var t=!1,s=[],f=0;f<this.nodes.length;f++){var d=this.nodes[f];if(d.isDragging){t=!0;break}else s.push(d.getHistoryData())}if(t)return!1;for(var v=!1,b=[],O=0;O<this.edges.length;O++){var P=this.edges[O];if(P.isDragging){v=!0;break}else b.push(P.getHistoryData())}return v?!1:{nodes:s,edges:b}}},{key:"getEdgeModelById",value:function(t){var s;return(s=this.edgesMap[t])===null||s===void 0?void 0:s.model}},{key:"getElement",value:function(t){return this.modelsMap[t]}},{key:"getNodeEdges",value:function(t){for(var s=[],f=0;f<this.edges.length;f++){var d=this.edges[f],v=this.edges[f].sourceNodeId===t,b=this.edges[f].targetNodeId===t;(v||b)&&s.push(d)}return s}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=this.selectElements,f={nodes:[],edges:[]};return s.forEach(function(d){if(d.BaseType===Ve.NODE&&f.nodes.push(d.getData()),d.BaseType===Ve.EDGE){var v=d.getData(),b=s.get(v.sourceNodeId)&&s.get(v.targetNodeId);(t||b)&&f.edges.push(v)}}),f}},{key:"updateAttributes",value:function(t,s){var f=this.getElement(t);f.updateAttributes(s)}},{key:"changeNodeId",value:function(t,s){return s||(s=fs()),this.nodesMap[s]?(console.warn("当前流程图已存在节点".concat(s,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach(function(f){f.sourceNodeId===t&&(f.sourceNodeId=s),f.targetNodeId===t&&(f.targetNodeId=s)}),this.nodesMap[t].model.id=s,s):(console.warn("当前流程图找不到节点".concat(s,", 修改失败")),"")}},{key:"changeEdgeId",value:function(t,s){return s||(s=fs()),this.edgesMap[s]?(console.warn("当前流程图已存在边: ".concat(s,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach(function(f){f.id===t&&f.changeEdgeId(s)}),s):(console.warn("当前流程图找不到边: ".concat(s,", 修改失败")),"")}},{key:"setFakerNode",value:function(t){this.fakerNode=t}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(t,s){return this.modelMap.set(t,s)}},{key:"toFront",value:function(t){var s,f,d=((s=this.nodesMap[t])===null||s===void 0?void 0:s.model)||((f=this.edgesMap[t])===null||f===void 0?void 0:f.model);if(d){if(this.overlapMode===mt.DEFAULT){var v;(v=this.topElement)===null||v===void 0||v.setZIndex(),d.setZIndex(ir),this.topElement=d}this.overlapMode===mt.INCREASE&&this.setElementZIndex(t,"top")}}},{key:"setElementZIndex",value:function(t,s){var f,d,v=((f=this.nodesMap[t])===null||f===void 0?void 0:f.model)||((d=this.edgesMap[t])===null||d===void 0?void 0:d.model);if(v){var b;typeof s=="number"&&(b=s),s==="top"&&(b=cg()),s==="bottom"&&(b=zN()),v.setZIndex(b)}}},{key:"deleteNode",value:function(t){var s=this.nodesMap[t].model.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(ze.NODE_DELETE,{data:s})}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD,f=Zn(t);f.id&&this.nodesMap[t.id]&&delete f.id;var d=this.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的节点，请确认是否已注册此类型节点。"));f.x=ls(f.x,this.gridSize),f.y=ls(f.y,this.gridSize);var v=new d(f,this);this.nodes.push(v);var b=v.getData();return this.eventCenter.emit(s,{data:b}),v}},{key:"cloneNode",value:function(t){var s=this.getNodeModelById(t),f=s.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var d=this.addNode(f);return d.setSelected(!0),s.setSelected(!1),d.getData()}},{key:"moveNode",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("不存在id为".concat(t,"的节点"));return}var b=v.model,O=b.getMoveDistance(s,f,d),P=nc(O,2);s=P[0],f=P[1],this.moveEdge(t,s,f)}},{key:"moveNode2Coordinate",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("不存在id为".concat(t,"的节点"));return}var b=v.model,O=b.x,P=b.y,R=s-O,F=f-P;this.moveNode(t,R,F,d)}},{key:"editText",value:function(t){this.setElementStateById(t,ct.TEXT_EDIT)}},{key:"addEdge",value:function(t){var s=Zn(t),f=s.type;f||(f=this.edgeType),s.id&&this.edgesMap[s.id]&&delete s.id;var d=this.getModel(f);if(!d)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var v=new d(bh(bh({},s),{},{type:f}),this),b=v.getData();return this.edges.push(v),this.eventCenter.emit(ze.EDGE_ADD,{data:b}),v}},{key:"moveEdge",value:function(t,s,f){for(var d=0;d<this.edges.length;d++){var v=this.edges[d],b=v.textPosition,O=b.x,P=b.y,R=this.edges[d].sourceNodeId===t,F=this.edges[d].targetNodeId===t;if(R&&v.moveStartPoint(s,f),F&&v.moveEndPoint(s,f),R||F){var Y;if(v.customTextPosition===!0)v.resetTextPosition();else if(v.modelType===Ze.POLYLINE_EDGE&&(Y=v.text)!==null&&Y!==void 0&&Y.value){var ne=v.text,ve=O0(ne,v.points);v.moveText(ve.x-ne.x,ve.y-ne.y)}else{var Le=v.textPosition,De=Le.x,Fe=Le.y;v.moveText(De-O,Fe-P)}}}}},{key:"deleteEdgeBySourceAndTarget",value:function(t,s){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===t&&this.edges[f].targetNodeId===s){var d=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeById",value:function(t){var s=this.edgesMap[t];if(s){var f=this.edgesMap[t].index,d=this.edgesMap[t].model.getData();this.edges.splice(f,1),this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].sourceNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].targetNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(t,s,f){this.nodes.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)}),this.edges.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)})}},{key:"updateText",value:function(t,s){this.nodes.forEach(function(f){f.id===t&&f.updateText(s)}),this.edges.forEach(function(f){f.id===t&&f.updateText(s)})}},{key:"selectNodeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.nodesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectEdgeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.edgesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s||this.clearSelectElements();var f=this.getElement(t);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){if(this.selectElements.forEach(function(s){s==null||s.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===mt.DEFAULT){var t;(t=this.topElement)===null||t===void 0||t.setZIndex()}}},{key:"moveNodes",value:function(t,s,f){for(var d=this,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,b=t.reduce(function(De,Fe){var Tt=d.nodesMap[Fe].model,It=Tt.getMoveDistance(s,f,v);return De[Fe]=It,De},{}),O=0;O<this.edges.length;O++){var P=this.edges[O],R=b[P.sourceNodeId],F=void 0,Y=void 0;if(R){var ne=nc(R,2);F=ne[0],Y=ne[1],P.moveStartPoint(F,Y)}var ve=b[P.sourceNodeId];if(ve){var Le=nc(ve,2);F=Le[0],Y=Le[1],P.moveEndPoint(F,Y)}(R||ve)&&P.moveText(F,Y)}}},{key:"addNodeMoveRules",value:function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)}},{key:"setDefaultEdgeType",value:function(t){this.edgeType=t}},{key:"changeNodeType",value:function(t,s){var f=this.getNodeModelById(t);if(!f){console.warn("找不到id为".concat(t,"的节点"));return}var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("找不到".concat(s,"对应的节点，请确认是否已注册此类型节点。"));var b=new v(d,this);this.nodes.splice(this.nodesMap[t].index,1,b);var O=this.getNodeEdges(t);O.forEach(function(P){if(P.sourceNodeId===t){var R=wE(b,P.startPoint,b.width,b.height);P.updateStartPoint(R)}if(P.targetNodeId===t){var F=wE(b,P.endPoint,b.width,b.height);P.updateEndPoint(F)}})}},{key:"changeEdgeType",value:function(t,s){var f=this.getEdgeModelById(t);if(!f){console.warn("找不到id为".concat(t,"的边"));return}if(f.type!==s){var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("找不到".concat(s,"对应的节点，请确认是否已注册此类型节点。"));delete d.pointsList;var b=new v(d,this);this.edges.splice(this.edgesMap[t].index,1,b)}}},{key:"getNodeIncomingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.targetNodeId===t&&s.push(f)}),s}},{key:"getNodeOutgoingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.sourceNodeId===t&&s.push(f)}),s}},{key:"getNodeIncomingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.targetNodeId===t&&f.push(s.nodesMap[d.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.sourceNodeId===t&&f.push(s.nodesMap[d.targetNodeId].model)}),f}},{key:"setTheme",value:function(t){this.theme=gE(bh(bh({},this.theme),t))}},{key:"resize",value:function(t,s){this.width=t||this.rootEl.getBoundingClientRect().width,this.height=s||this.rootEl.getBoundingClientRect().height,(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var t=this.nodes,s=[],f=[];t.forEach(function(ne){var ve=ne.x,Le=ne.y,De=ne.width,Fe=ne.height,Tt=ne.getNodeStyle(),It=Tt.strokeWidth,ut=It===void 0?0:It;s=s.concat([ve+De/2+ut,ve-De/2-ut]),f=f.concat([Le+Fe/2+ut,Le-Fe/2-ut])});var d=Math.min.apply(Math,ul(s)),v=Math.max.apply(Math,ul(s)),b=Math.min.apply(Math,ul(f)),O=Math.max.apply(Math,ul(f)),P=v-d||0,R=O-b||0,F=d+P/2,Y=b+R/2;return{virtualRectWidth:P,virtualRectHeight:R,virtualRectCenterPositionX:F,virtualRectCenterPositionY:Y}}},{key:"translateCenter",value:function(){var t=this.nodes,s=this.width,f=this.height,d=this.rootEl,v=this.transformModel;if(t.length){var b=s||d.clientWidth,O=f||d.clientHeight,P=this.getVirtualRectSize(),R=P.virtualRectCenterPositionX,F=P.virtualRectCenterPositionY;v.focusOn(R,F,b,O)}}},{key:"fitView",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,d=this.width,v=this.height,b=this.rootEl,O=this.transformModel;if(f.length){var P=d||b.clientWidth,R=v||b.clientHeight,F=this.getVirtualRectSize(),Y=F.virtualRectWidth,ne=F.virtualRectHeight,ve=F.virtualRectCenterPositionX,Le=F.virtualRectCenterPositionY,De=(Y+s)/P,Fe=(ne+t)/R,Tt=0;Tt=1/Math.max(De,Fe);var It=[P/2,R/2];O.zoom(Tt,It),O.focusOn(ve,Le,P,R)}}},{key:"openEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.closeEdgeAnimation()}}]),e}(),P0=sr(We.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w0=sr(We.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_0=sr(We.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N0=sr(We.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M0=sr(We.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R0=sr(We.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.DEFAULT}}),I0=sr(We.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D0=sr(We.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C0=sr(We.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L0=sr(We.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),j0=sr(We.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B0=sr(We.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr(We.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"nodesMap"),We.prototype),sr(We.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"edgesMap"),We.prototype),sr(We.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"modelsMap"),We.prototype),sr(We.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"sortElements"),We.prototype),sr(We.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"textEditElement"),We.prototype),sr(We.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"selectElements"),We.prototype),sr(We.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setFakerNode"),We.prototype),sr(We.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"removeFakerNode"),We.prototype),sr(We.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setModel"),We.prototype),sr(We.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"toFront"),We.prototype),sr(We.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementZIndex"),We.prototype),sr(We.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteNode"),We.prototype),sr(We.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addNode"),We.prototype),sr(We.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"cloneNode"),We.prototype),sr(We.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode"),We.prototype),sr(We.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode2Coordinate"),We.prototype),sr(We.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"editText"),We.prototype),sr(We.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addEdge"),We.prototype),sr(We.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveEdge"),We.prototype),sr(We.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySourceAndTarget"),We.prototype),sr(We.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeById"),We.prototype),sr(We.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySource"),We.prototype),sr(We.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeByTarget"),We.prototype),sr(We.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementStateById"),We.prototype),sr(We.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"updateText"),We.prototype),sr(We.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectNodeById"),We.prototype),sr(We.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectEdgeById"),We.prototype),sr(We.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectElementById"),We.prototype),sr(We.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearSelectElements"),We.prototype),sr(We.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNodes"),We.prototype),sr(We.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setDefaultEdgeType"),We.prototype),sr(We.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeNodeType"),We.prototype),sr(We.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeEdgeType"),We.prototype),sr(We.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingEdge"),We.prototype),sr(We.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingEdge"),We.prototype),sr(We.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingNode"),We.prototype),sr(We.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingNode"),We.prototype),sr(We.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setTheme"),We.prototype),sr(We.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"resize"),We.prototype),sr(We.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearData"),We.prototype),sr(We.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"translateCenter"),We.prototype),sr(We.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"fitView"),We.prototype),sr(We.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"openEdgeAnimation"),We.prototype),sr(We.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"closeEdgeAnimation"),We.prototype),We),K1=U0;function Oh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oh=function(t){return typeof t}:Oh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}var z0;function Tg(){return Tg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tg.apply(this,arguments)}function Z1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function H0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function J1(e,r,t){return r&&H0(e.prototype,r),t&&H0(e,t),e}function Q1(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ag(e,r)}function Ag(e,r){return Ag=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ag(e,r)}function q1(e){var r=tM();return function(){var s=Sh(e),f;if(r){var d=Sh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return eM(this,f)}}function eM(e,r){if(r&&(Oh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sh(e)}function pa(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var rM=ai(z0=function(e){Q1(t,e);var r=q1(t);function t(s){var f;Z1(this,t),f=r.call(this),pa(Ri(f),"stepDrag",void 0),pa(Ri(f),"stepScrollX",0),pa(Ri(f),"stepScrollY",0),pa(Ri(f),"onDragging",function(O){var P=O.deltaX,R=O.deltaY;f.setState({isDragging:!0});var F=f.props.graphModel,Y=F.transformModel,ne=F.editConfigModel;ne.stopMoveGraph||Y.translate(P,R)}),pa(Ri(f),"onDragEnd",function(){f.setState({isDragging:!1})}),pa(Ri(f),"zoomHandler",function(O){var P=f.props,R=P.graphModel,F=R.editConfigModel,Y=R.transformModel,ne=R.gridSize,ve=P.graphModel,Le=O.deltaX,De=O.deltaY;if(!F.stopScrollGraph&&O.ctrlKey!==!0){if(O.preventDefault(),f.stepScrollX+=Le,f.stepScrollY+=De,Math.abs(f.stepScrollX)>=ne){var Fe=f.stepScrollX%ne,Tt=f.stepScrollX-Fe;Y.translate(-Tt*Y.SCALE_X,0),f.stepScrollX=Fe}if(Math.abs(f.stepScrollY)>=ne){var It=f.stepScrollY%ne,ut=f.stepScrollY-It;Y.translate(0,-ut*Y.SCALE_Y),f.stepScrollY=It}return}if(!F.stopZoomGraph){O.preventDefault();var Ft=ve.getPointByClient({x:O.clientX,y:O.clientY}),Pt=Ft.canvasOverlayPosition,er=Pt.x,_t=Pt.y;Y.zoom(O.deltaY<0,[er,_t])}}),pa(Ri(f),"clickHandler",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){var R=f.props.graphModel,F=R.selectElements;F.size>0&&R.clearSelectElements(),R.eventCenter.emit(ze.BLANK_CLICK,{e:O})}}),pa(Ri(f),"handleContextMenu",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){O.preventDefault();var R=f.props.graphModel,F=R.getPointByClient({x:O.clientX,y:O.clientY});R.eventCenter.emit(ze.BLANK_CONTEXTMENU,{e:O,position:F})}}),pa(Ri(f),"mouseDownHandler",function(O){var P=f.props.graphModel,R=P.eventCenter,F=P.editConfigModel,Y=P.transformModel.SCALE_X,ne=P.gridSize,ve=O.target,Le=!F.adjustEdge&&!F.adjustNodePosition;(ve.getAttribute("name")==="canvas-overlay"||Le)&&(F.stopMoveGraph?R.emit(ze.BLANK_MOUSEDOWN,{e:O}):(f.stepDrag.setStep(ne*Y),f.stepDrag.handleMouseDown(O)),f.clickHandler(O))});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new ha({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"BLANK",isStopPropagation:!1,eventCenter:b,model:null}),f.state={isDragging:!1},f}return J1(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props,O=b.children,P=b.dnd,R=this.state.isDragging;return Object(Be.g)("svg",Tg({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:R?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},P.eventMap()),Object(Be.g)("g",{transform:v},O))}}]),t}(Be.a))||z0,nM=rM;function xh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xh=function(t){return typeof t}:xh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}var X0;function oM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function iM(e,r,t){return r&&$0(e.prototype,r),t&&$0(e,t),e}function aM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Pg(e,r)}function Pg(e,r){return Pg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Pg(e,r)}function sM(e){var r=fM();return function(){var s=Th(e),f;if(r){var d=Th(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return uM(this,f)}}function uM(e,r){if(r&&(xh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lM(e)}function lM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Th(e)}var cM=ai(X0=function(e){aM(t,e);var r=sM(t);function t(){return oM(this,t),r.apply(this,arguments)}return iM(t,[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=d.getTools(),O=b.map(function(P){return Object(Be.g)(P,{graphModel:v,logicFlow:d.instance})});return d.components=O,O}},{key:"triggerToolRender",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=document.querySelector("#ToolOverlay_".concat(v.flowId)),O=d.getInstance();O.components.forEach(function(P){return P(O,b)}),O.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Be.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}]),t}(Be.a))||X0;function Ah(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(t){return typeof t}:Ah=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function dM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function V0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function hM(e,r,t){return r&&V0(e.prototype,r),t&&V0(e,t),e}function pM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&wg(e,r)}function wg(e,r){return wg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},wg(e,r)}function vM(e){var r=mM();return function(){var s=Ph(e),f;if(r){var d=Ph(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return yM(this,f)}}function yM(e,r){if(r&&(Ah(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gM(e)}function gM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ph(e)}var bM=function(e){pM(t,e);var r=vM(t);function t(){return dM(this,t),r.apply(this,arguments)}return hM(t,[{key:"render",value:function(){var f=this.props.background;return Object(Be.g)("div",{className:"lf-background"},Object(Be.g)("div",{style:f,className:"lf-background-area"}))}}]),t}(Be.a);function wh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wh=function(t){return typeof t}:wh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(e)}var W0;function EM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Y0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function OM(e,r,t){return r&&Y0(e.prototype,r),t&&Y0(e,t),e}function SM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&_g(e,r)}function _g(e,r){return _g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},_g(e,r)}function xM(e){var r=AM();return function(){var s=_h(e),f;if(r){var d=_h(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return TM(this,f)}}function TM(e,r){if(r&&(wh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K0(e)}function K0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _h(e){return _h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_h(e)}function PM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Z0=ai(W0=function(e){SM(t,e);var r=xM(t);function t(){var s;EM(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),PM(K0(s),"id",fs()),s}return OM(t,[{key:"renderDot",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?2:b,P=f.size,R=f.visible,F=Math.min(Math.max(2,O),P/2),Y=1;return R||(Y=0),Object(Be.g)("rect",{width:F,height:F,rx:F/2,ry:F/2,fill:v,opacity:Y})}},{key:"renderMesh",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?1:b,P=f.size,R=f.visible,F=Math.min(Math.max(1,O),P/2),Y="M ".concat(P," 0 H0 M0 0 V0 ").concat(P),ne=1;return R||(ne=0),Object(Be.g)("path",{d:Y,stroke:v,strokeWidth:F,opacity:ne})}},{key:"render",value:function(){var f=this.props,d=f.type,v=f.size,b=f.graphModel.transformModel,O=b.SCALE_X,P=b.SKEW_Y,R=b.SKEW_X,F=b.SCALE_Y,Y=b.TRANSLATE_X,ne=b.TRANSLATE_Y,ve=[O,P,R,F,Y,ne].join(","),Le="matrix(".concat(ve,")");return Object(Be.g)("div",{className:"lf-grid"},Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Be.g)("defs",null,Object(Be.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:Le,x:"0",y:"0",width:v,height:v},d==="dot"&&this.renderDot(),d==="mesh"&&this.renderMesh())),Object(Be.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}]),t}(Be.a))||W0;Z0.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function Nh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nh=function(t){return typeof t}:Nh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}function wM(e,r){return RM(e)||MM(e,r)||NM(e,r)||_M()}function _M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NM(e,r){if(e){if(typeof e=="string")return J0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J0(e,r)}}function J0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function MM(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function RM(e){if(Array.isArray(e))return e}function IM(e){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(t){var s=wM(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Nh(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("line",r)}var ll=IM;function Mh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mh=function(t){return typeof t}:Mh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mh(e)}var Q0;function q0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Rh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?q0(Object(t),!0).forEach(function(s){DM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function DM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function CM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function eO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function LM(e,r,t){return r&&eO(e.prototype,r),t&&eO(e,t),e}function jM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ng(e,r)}function Ng(e,r){return Ng=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ng(e,r)}function BM(e){var r=kM();return function(){var s=Ih(e),f;if(r){var d=Ih(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return FM(this,f)}}function FM(e,r){if(r&&(Mh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GM(e)}function GM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ih(e){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ih(e)}var UM=ai(Q0=function(e){jM(t,e);var r=BM(t);function t(){return CM(this,t),r.apply(this,arguments)}return LM(t,[{key:"render",value:function(){var f=this.props.snaplineModel,d=f.position,v=f.isShowHorizontal,b=f.isShowVertical,O=f.getStyle(),P=d.x,R=P===void 0?0:P,F=d.y,Y=F===void 0?0:F,ne=Rh(Rh({x1:-1e5,y1:Y,x2:1e5,y2:Y},O),{},{stroke:v?O.stroke:"none"}),ve=Rh(Rh({x1:R,y1:-1e5,x2:R,y2:1e5},O),{},{stroke:b?O.stroke:"none"});return Object(Be.g)("g",{className:"lf-snapline"},Object(Be.g)(ll,ne),Object(Be.g)(ll,ve))}}]),t}(Be.a))||Q0;function Dh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(t){return typeof t}:Dh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}function zM(e,r){return VM(e)||$M(e,r)||XM(e,r)||HM()}function HM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XM(e,r){if(e){if(typeof e=="string")return tO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tO(e,r)}}function tO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function $M(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function VM(e){if(Array.isArray(e))return e}function hs(e){var r=e.x,t=e.y,s=e.width,f=e.height,d=e.className,v=e.radius,b=r-s/2,O=t-f/2,P={};return Object.entries(e).forEach(function(R){var F=zM(R,2),Y=F[0],ne=F[1],ve=Dh(ne);ve!=="object"&&(P[Y]=ne)}),d?P.className="lf-basic-shape ".concat(d):P.className="lf-basic-shape",v&&(P.rx=v,P.ry=v),P.x=b,P.y=O,Object(Be.g)("rect",P)}hs.defaultProps={className:"",radius:""};function Ch(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ch=function(t){return typeof t}:Ch=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}var rO;function fl(){return fl=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fl.apply(this,arguments)}function nO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function oO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?nO(Object(t),!0).forEach(function(s){WM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):nO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function WM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function YM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function iO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function KM(e,r,t){return r&&iO(e.prototype,r),t&&iO(e,t),e}function ZM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Mg(e,r)}function Mg(e,r){return Mg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Mg(e,r)}function JM(e){var r=eR();return function(){var s=Lh(e),f;if(r){var d=Lh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return QM(this,f)}}function QM(e,r){if(r&&(Ch(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qM(e)}function qM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(e)}var tR=ai(rO=function(e){ZM(t,e);var r=JM(t);function t(){return YM(this,t),r.apply(this,arguments)}return KM(t,[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,d=f.nodes,v=f.editConfigModel,b=v.hoverOutline,O=v.nodeSelectedOutline,P=[];return d.forEach(function(R){if(R.isHovered||R.isSelected){var F=R.isHovered,Y=R.isSelected,ne=R.x,ve=R.y,Le=R.width,De=R.height;if(O&&Y||b&&F){var Fe=R.getOutlineStyle(),Tt={};if(Object.keys(Fe).forEach(function(ut){ut!=="hover"&&(Tt[ut]=Fe[ut])}),F){var It=Fe.hover;Tt=oO(oO({},Tt),It)}P.push(Object(Be.g)(hs,fl({className:"lf-outline-node",x:ne,y:ve,width:Le+10,height:De+10},Tt)))}}}),P}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,d=f.edges,v=f.editConfigModel,b=v.edgeSelectedOutline,O=v.hoverOutline,P=[],R=0;R<d.length;R++){var F=d[R];(b&&F.isSelected||O&&F.isHovered)&&(F.modelType===Ze.LINE_EDGE?P.push(this.getLineOutline(F)):F.modelType===Ze.POLYLINE_EDGE?P.push(this.getPolylineOutline(F)):F.modelType===Ze.BEZIER_EDGE&&P.push(this.getBezierOutline(F)))}return P}},{key:"getLineOutline",value:function(f){var d=f.startPoint,v=f.endPoint,b=(d.x+v.x)/2,O=(d.y+v.y)/2,P=Math.abs(d.x-v.x)+10,R=Math.abs(d.y-v.y)+10,F=f.getOutlineStyle();return Object(Be.g)(hs,fl({className:"lf-outline-edge",x:b,y:O,width:P,height:R},F))}},{key:"getPolylineOutline",value:function(f){var d=f.points,v=al(d),b=tc(v,8),O=b.x,P=b.y,R=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(hs,fl({className:"lf-outline",x:O,y:P,width:R,height:F},Y))}},{key:"getBezierOutline",value:function(f){var d=f.path,v=gh(d),b=tc(v,8),O=b.x,P=b.y,R=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(hs,fl({className:"lf-outline",x:O,y:P,width:R,height:F},Y))}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}]),t}(Be.a))||rO;function jh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(t){return typeof t}:jh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}function rR(e,r){return aR(e)||iR(e,r)||oR(e,r)||nR()}function nR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oR(e,r){if(e){if(typeof e=="string")return aO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return aO(e,r)}}function aO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function iR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function aR(e){if(Array.isArray(e))return e}function ic(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.r,v=d===void 0?4:d,b=e.className,O={cx:t,cy:f,r:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(P){var R=rR(P,2),F=R[0],Y=R[1],ne=jh(Y);ne!=="object"&&(O[F]=Y)}),b?O.className="lf-basic-shape ".concat(b):O.className="lf-basic-shape",Object(Be.g)("circle",O)}function Bh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bh=function(t){return typeof t}:Bh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}var sO;function sR(e,r){return cR(e)||fR(e,r)||lR(e,r)||uR()}function uR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lR(e,r){if(e){if(typeof e=="string")return uO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uO(e,r)}}function uO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function fR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function cR(e){if(Array.isArray(e))return e}function ac(){return ac=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},ac.apply(this,arguments)}function lO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function fO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function cO(e,r,t){return r&&fO(e.prototype,r),t&&fO(e,t),e}function dO(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Rg(e,r)}function Rg(e,r){return Rg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Rg(e,r)}function hO(e){var r=hR();return function(){var s=Gh(e),f;if(r){var d=Gh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return dR(this,f)}}function dR(e,r){if(r&&(Bh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fh(e)}function Fh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gh(e)}function Ig(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var pO=function(e){dO(t,e);var r=hO(t);function t(){var s;return lO(this,t),s=r.call(this),Ig(Fh(s),"dragHandler",void 0),Ig(Fh(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.bezierModel,P=v.type,R=b.getPointByClient({x:d.clientX,y:d.clientY}),F=R.canvasOverlayPosition,Y=F.x,ne=F.y;O.updateAdjustAnchor({x:Y,y:ne},P)}),Ig(Fh(s),"onDragEnd",function(){var f=s.props.bezierModel;f.isDragging=!1}),s.dragHandler=new ha({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return cO(t,[{key:"render",value:function(){var f=this,d=this.props.position,v=d.x,b=d.y,O=this.props.bezierModel,P=O.getEdgeStyle(),R=P.adjustAnchor;return Object(Be.g)(ic,ac({className:"lf-bezier-adjust-anchor",x:v,y:b},R,{onMouseDown:function(Y){f.dragHandler.handleMouseDown(Y)}}))}}]),t}(Be.a),pR=ai(sO=function(e){dO(t,e);var r=hO(t);function t(){return lO(this,t),r.apply(this,arguments)}return cO(t,[{key:"getBezierAdjust",value:function(f,d){var v=f.path,b=f.id,O=gh(v),P=sR(O,4),R=P[0],F=P[1],Y=P[2],ne=P[3],ve=f.getEdgeStyle(),Le=ve.adjustLine,De=[];return De.push(Object(Be.g)(ll,ac({x1:R.x,y1:R.y,x2:F.x,y2:F.y},Le))),De.push(Object(Be.g)(pO,{position:F,bezierModel:f,graphModel:d,key:"".concat(b,"_ePre"),type:"sNext"})),De.push(Object(Be.g)(ll,ac({x1:ne.x,y1:ne.y,x2:Y.x,y2:Y.y},Le))),De.push(Object(Be.g)(pO,{position:Y,bezierModel:f,graphModel:d,key:"".concat(b,"_sNext"),type:"ePre"})),De}},{key:"selectedBezierEdge",value:function(){for(var f=this.props.graphModel,d=f.edges,v=[],b=0;b<d.length;b++){var O=d[b];O.isSelected&&O.modelType===Ze.BEZIER_EDGE&&O.draggable&&v.push(this.getBezierAdjust(O,f))}return v}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),t}(Be.a))||sO;function kh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kh=function(t){return typeof t}:kh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}var vO;function vR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function yO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function yR(e,r,t){return r&&yO(e.prototype,r),t&&yO(e,t),e}function gR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Dg(e,r)}function Dg(e,r){return Dg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Dg(e,r)}function mR(e){var r=OR();return function(){var s=Uh(e),f;if(r){var d=Uh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return bR(this,f)}}function bR(e,r){if(r&&(kh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ER(e)}function ER(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Uh(e)}var SR=ai(vO=function(e){gR(t,e);var r=mR(t);function t(){return vR(this,t),r.apply(this,arguments)}return yR(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props.children;return Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Be.g)("g",{transform:v},b))}}]),t}(Be.a))||vO;function zh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zh=function(t){return typeof t}:zh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}var gO;function Cg(){return Cg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cg.apply(this,arguments)}function xR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function TR(e,r,t){return r&&mO(e.prototype,r),t&&mO(e,t),e}function AR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Lg(e,r)}function Lg(e,r){return Lg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Lg(e,r)}function PR(e){var r=NR();return function(){var s=Hh(e),f;if(r){var d=Hh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return wR(this,f)}}function wR(e,r){if(r&&(zh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _R(e)}function _R(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hh(e)}var MR=ai(gO=function(e){AR(t,e);var r=PR(t);function t(){return xR(this,t),r.apply(this,arguments)}return TR(t,[{key:"getComponent",value:function(f,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",b=this.props.getView,O=b(f.type);return Object(Be.g)(O,{key:f.id,model:f,graphModel:d,overlay:v})}},{key:"render",value:function(){var f=this,d=this.props,v=d.graphModel,b=d.tool,O=d.options,P=d.dnd,R=d.snaplineModel,F={};O.width&&(F.width="".concat(v.width,"px")),O.height&&(F.height="".concat(v.height,"px"));var Y=O.grid,ne=v.fakerNode,ve=v.editConfigModel,Le=ve.adjustEdge;return Object(Be.g)("div",{className:"lf-graph","flow-id":v.flowId,style:F},Object(Be.g)(nM,{graphModel:v,dnd:P},Object(Be.g)("g",{className:"lf-base"},ua(v.sortElements,function(De){return f.getComponent(De,v)})),ne?this.getComponent(ne,v):""),Object(Be.g)(SR,{graphModel:v},Object(Be.g)(tR,{graphModel:v}),Le?Object(Be.g)(pR,{graphModel:v}):"",O.snapline!==!1?Object(Be.g)(UM,{snaplineModel:R}):""),Object(Be.g)(cM,{graphModel:v,tool:b}),O.background&&Object(Be.g)(bM,{background:O.background}),O.grid&&Object(Be.g)(Z0,Cg({},Y,{graphModel:v})))}}]),t}(Be.a))||gO,RR=MR;function bO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Xh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?bO(Object(t),!0).forEach(function(s){va(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function IR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function EO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function DR(e,r,t){return r&&EO(e.prototype,r),t&&EO(e,t),e}function va(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CR=function(){function e(r){var t=this;IR(this,e),va(this,"nodeConfig",void 0),va(this,"lf",void 0),va(this,"fakerNode",void 0),va(this,"stopDrag",function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)}),va(this,"dragEnter",function(f){!t.nodeConfig||t.fakerNode||(t.fakerNode=t.lf.createFakerNode(Xh(Xh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY}))))}),va(this,"onDragOver",function(f){if(f.preventDefault(),t.fakerNode){var d=t.clientToLocalPoint({x:f.clientX,y:f.clientY}),v=d.x,b=d.y;t.fakerNode.moveTo(v,b);var O=t.fakerNode.getData();t.lf.setNodeSnapLine(O),t.lf.graphModel.eventCenter.emit(ze.NODE_DND_DRAG,{data:O})}return!1}),va(this,"onDragLeave",function(){t.fakerNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null)}),va(this,"onDrop",function(f){if(!(!t.lf.graphModel||!f||!t.nodeConfig)){var d=t.lf.addNode(Xh(Xh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY})),ze.NODE_DND_ADD);f.preventDefault(),f.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null,d.getData()}});var s=r.lf;this.lf=s}return DR(e,[{key:"clientToLocalPoint",value:function(t){var s=t.x,f=t.y,d=ts(this.lf.options,["grid","size"]),v=this.lf.graphModel.getPointByClient({x:s,y:f}),b=v.canvasOverlayPosition,O=b.x,P=b.y;return{x:ls(O,d),y:ls(P,d)}}},{key:"startDrag",value:function(t){this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}]),e}();function OO(e){var r=e.container,t=e.grid,s=e.width,f=e.height;if(!r)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof f=="string")throw new Error("width或height不支持传入字符串，请传数字");return t&&(e.grid=Mn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},t)),Mn({},SO,e)}var SO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function $h(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$h=function(t){return typeof t}:$h=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}var Gr,xO;function jg(e,r){return FR(e)||BR(e,r)||jR(e,r)||LR()}function LR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jR(e,r){if(e){if(typeof e=="string")return TO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TO(e,r)}}function TO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function BR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function FR(e){if(Array.isArray(e))return e}function AO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Vh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?AO(Object(t),!0).forEach(function(s){wO(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):AO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function GR(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function kR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function PO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function UR(e,r,t){return r&&PO(e.prototype,r),t&&PO(e,t),e}function cl(){return typeof Reflect<"u"&&Reflect.get?cl=Reflect.get:cl=function(r,t,s){var f=zR(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},cl.apply(this,arguments)}function zR(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ps(e),e!==null););return e}function HR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Bg(e,r)}function Bg(e,r){return Bg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Bg(e,r)}function XR(e){var r=VR();return function(){var s=ps(e),f;if(r){var d=ps(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return $R(this,f)}}function $R(e,r){if(r&&($h(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(e)}function Wh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ps(e){return ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(e)}function wO(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ni(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Fg=(Gr=function(e){HR(t,e);var r=XR(t);function t(){var s;kR(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),wO(Wh(s),"modelType",Ze.BEZIER_EDGE),GR(Wh(s),"path",xO,Wh(s)),s}return UR(t,[{key:"initEdgeData",value:function(f){this.offset=100,cl(ps(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier,d=cl(ps(t.prototype),"getEdgeStyle",this).call(this);return Vh(Vh({},d),gn(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,d=0;return this.pointsList.forEach(function(v){var b=v.x,O=v.y;f+=b,d+=O}),{x:f/this.pointsList.length,y:d/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=cl(ps(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Vh(Vh({},f),{},{pointsList:d})}},{key:"getControls",value:function(){var f=this.startPoint,d=this.endPoint,v=E0({start:f,end:d,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return v}},{key:"getPath",value:function(f){var d=jg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return"M ".concat(v.x," ").concat(v.y,`
    C `).concat(b.x," ").concat(b.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(P.x," ").concat(P.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),d=f.sNext,v=f.ePre;this.updatePath(d,v)}},{key:"updatePath",value:function(f,d){var v={x:this.startPoint.x,y:this.startPoint.y},b={x:this.endPoint.x,y:this.endPoint.y};if(!f||!d){var O=this.getControls();f=O.sNext,d=O.ePre}this.pointsList=[v,f,d,b],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d;var v=jg(this.pointsList,3),b=v[1],O=v[2];b.x+=f,b.y+=d,this.updatePath(b,O)}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d;var v=jg(this.pointsList,3),b=v[1],O=v[2];O.x+=f,O.y+=d,this.updatePath(b,O)}},{key:"updateAdjustAnchor",value:function(f,d){d==="sNext"?this.pointsList[1]=f:d==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=E0({start:d,end:v,sourceNode:b,targetNode:O,offset:this.offset}),R=P.sNext,F=P.ePre;this.pointsList=[d,R,F,v],this.initPoints()}}]),t}(hg),xO=ni(Gr.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ni(Gr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"initPoints"),Gr.prototype),ni(Gr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updatePoints"),Gr.prototype),ni(Gr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateStartPoint"),Gr.prototype),ni(Gr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateEndPoint"),Gr.prototype),ni(Gr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveStartPoint"),Gr.prototype),ni(Gr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveEndPoint"),Gr.prototype),ni(Gr.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAdjustAnchor"),Gr.prototype),ni(Gr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustStart"),Gr.prototype),ni(Gr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustEnd"),Gr.prototype),ni(Gr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAfterAdjustStartAndEnd"),Gr.prototype),Gr);function WR(e){return e==null}var YR=WR,Bt,_O,NO,MO,RO,IO,DO,CO,LO,jO,BO,FO,GO,kO,UO,zO,HO,XO,$O,VO;function Yh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yh=function(t){return typeof t}:Yh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function KR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=ZR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var s=0,f=function(){};return{s:f,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(P){throw P},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,v=!1,b;return{s:function(){t=t.call(e)},n:function(){var P=t.next();return d=P.done,P},e:function(P){v=!0,b=P},f:function(){try{!d&&t.return!=null&&t.return()}finally{if(v)throw b}}}}function ZR(e,r){if(e){if(typeof e=="string")return WO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WO(e,r)}}function WO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function YO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function lo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?YO(Object(t),!0).forEach(function(s){bo(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):YO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Rn(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function JR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function KO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function QR(e,r,t){return r&&KO(e.prototype,r),t&&KO(e,t),e}function bo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Mr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var ya=(Bt=function(){function e(r,t){JR(this,e),bo(this,"id",""),Rn(this,"type",_O,this),Rn(this,"x",NO,this),Rn(this,"y",MO,this),Rn(this,"text",RO,this),Rn(this,"properties",IO,this),Rn(this,"_width",DO,this),Rn(this,"_height",CO,this),Rn(this,"anchorsOffset",LO,this),Rn(this,"isSelected",jO,this),Rn(this,"isHovered",BO,this),Rn(this,"isShowAnchor",FO,this),Rn(this,"isDragging",GO,this),Rn(this,"isHitable",kO,this),Rn(this,"draggable",UO,this),Rn(this,"visible",zO,this),bo(this,"virtual",!1),bo(this,"graphModel",void 0),Rn(this,"zIndex",HO,this),Rn(this,"state",XO,this),Rn(this,"autoToFront",$O,this),Rn(this,"style",VO,this),bo(this,"BaseType",Ve.NODE),bo(this,"modelType",Ze.NODE),bo(this,"additionStateData",void 0),bo(this,"targetRules",[]),bo(this,"sourceRules",[]),bo(this,"moveRules",[]),bo(this,"hasSetTargetRules",!1),bo(this,"hasSetSourceRules",!1),this.graphModel=t,this.initNodeData(r),this.setAttributes()}return QR(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||fs()}this.formatText(t),Mn(this,GN(t));var v=this.graphModel.overlapMode;v===mt.INCREASE&&(this.zIndex=t.zIndex||cg())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(t){t.text||(t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!0}),t.text&&typeof t.text=="string"?t.text={value:t.text,x:t.x,y:t.y,draggable:!1,editable:!0}:t.text&&t.text.editable===void 0&&(t.text.editable=!0)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v=this.properties;Object(c.x)(v)&&(v=Object(c.I)(v));var b={id:this.id,type:this.type,x:this.x,y:this.y,properties:v};return this.graphModel.overlapMode===mt.INCREASE&&(b.zIndex=this.zIndex),d&&(b.text={x:s,y:f,value:d}),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return lo(lo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.nodeText;return gn(t)}},{key:"getAnchorStyle",value:function(t){var s=this.graphModel.theme.anchor;return gn(s)}},{key:"getAnchorLineStyle",value:function(t){var s=this.graphModel.theme.anchorLine;return gn(s)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel.theme.outline;return gn(t)}},{key:"isAllowConnectedAsSource",value:function(t,s,f,d){var v=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var R=v[P];if(!R.validate.call(this,this,t,s,f,d)){b=!1,O=R.message;break}}return{isAllPass:b,msg:O}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(t,s,f,d){var v=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var R=v[P];if(!R.validate.call(this,t,this,s,f,d)){b=!1,O=R.message;break}}return{isAllPass:b,msg:O}}},{key:"isAllowMoveNode",value:function(t,s){var f=!0,d=!0,v=this.moveRules.concat(this.graphModel.nodeMoveRules),b=KR(v),O;try{for(b.s();!(O=b.n()).done;){var P=O.value,R=P(this,t,s);if(!R)return!1;if(Yh(R)==="object"){var F=R;if(F.x===!1&&F.y===!1)return!1;f=f&&F.x,d=d&&F.y}}}catch(Y){b.e(Y)}finally{b.f()}return{x:f,y:d}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var t=this.anchorsOffset,s=this.id,f=this.x,d=this.y;return t&&t.length>0?t.map(function(v,b){return v.length?(v=v,{id:"".concat(s,"_").concat(b),x:f+v[0],y:d+v[1]}):(v=v,lo(lo({},v),{},{x:f+v.x,y:d+v.y,id:v.id||"".concat(s,"_").concat(b)}))}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(t){return jN(t,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(t){if(!YR(t))for(var s=0;s<this.anchors.length;s++){var f=this.anchors[s];if(f.id===t)return f}}},{key:"addNodeMoveRules",value:function(t){this.moveRules.includes(t)||this.moveRules.push(t)}},{key:"move",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1;if(f)d=!0,v=!0;else{var b=this.isAllowMoveNode(t,s);typeof b=="boolean"?(d=b,v=b):(d=b.x,v=b.y)}if(d){var O=this.x+t;this.x=O,this.text&&this.moveText(t,0)}if(v){var P=this.y+s;this.y=P,this.text&&this.moveText(0,s)}return d||v}},{key:"getMoveDistance",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1,b=0,O=0;if(f)d=!0,v=!0;else{var P=this.isAllowMoveNode(t,s);typeof P=="boolean"?(d=P,v=P):(d=P.x,v=P.y)}if(d&&t){var R=this.x+t;this.x=R,this.text&&this.moveText(t,0),b=t}if(v&&s){var F=this.y+s;this.y=F,this.text&&this.moveText(0,s),O=s}return[b,O]}},{key:"moveTo",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=t-this.x,v=s-this.y;return!f&&!this.isAllowMoveNode(d,v)?!1:(this.text&&this.text&&this.moveText(d,v),this.x=t,this.y=s,!0)}},{key:"moveText",value:function(t,s){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,editable:P,draggable:O,x:d+t,y:v+s}}},{key:"updateText",value:function(t){this.text=lo(lo({},this.text),{},{value:t})}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t,this.setIsShowAnchor(t)}},{key:"setIsShowAnchor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isShowAnchor=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"setProperty",value:function(t,s){this.properties=lo(lo({},this.properties),{},bo({},t,Zn(s))),this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=lo(lo({},this.properties),Zn(t)),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setStyle",value:function(t,s){this.style=lo(lo({},this.style),{},bo({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=lo(lo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=lo({},Zn(t))}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=t}},{key:"updateAttributes",value:function(t){Mn(this,t)}}]),e}(),_O=Mr(Bt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),NO=Mr(Bt.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),MO=Mr(Bt.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),RO=Mr(Bt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),IO=Mr(Bt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),DO=Mr(Bt.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),CO=Mr(Bt.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),LO=Mr(Bt.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jO=Mr(Bt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),BO=Mr(Bt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),FO=Mr(Bt.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GO=Mr(Bt.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Mr(Bt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),UO=Mr(Bt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zO=Mr(Bt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HO=Mr(Bt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),XO=Mr(Bt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$O=Mr(Bt.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),VO=Mr(Bt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Mr(Bt.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"incoming"),Bt.prototype),Mr(Bt.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"outgoing"),Bt.prototype),Mr(Bt.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"addNodeMoveRules"),Bt.prototype),Mr(Bt.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"move"),Bt.prototype),Mr(Bt.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"getMoveDistance"),Bt.prototype),Mr(Bt.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveTo"),Bt.prototype),Mr(Bt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveText"),Bt.prototype),Mr(Bt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateText"),Bt.prototype),Mr(Bt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setSelected"),Bt.prototype),Mr(Bt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHovered"),Bt.prototype),Mr(Bt.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setIsShowAnchor"),Bt.prototype),Mr(Bt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHitable"),Bt.prototype),Mr(Bt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setElementState"),Bt.prototype),Mr(Bt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperty"),Bt.prototype),Mr(Bt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperties"),Bt.prototype),Mr(Bt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"deleteProperty"),Bt.prototype),Mr(Bt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyle"),Bt.prototype),Mr(Bt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyles"),Bt.prototype),Mr(Bt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateStyles"),Bt.prototype),Mr(Bt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setZIndex"),Bt.prototype),Mr(Bt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateAttributes"),Bt.prototype),Bt);function Kh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kh=function(t){return typeof t}:Kh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}var ga,ZO;function JO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function QO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?JO(Object(t),!0).forEach(function(s){eS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function qR(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function eI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function qO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function tI(e,r,t){return r&&qO(e.prototype,r),t&&qO(e,t),e}function Zh(){return typeof Reflect<"u"&&Reflect.get?Zh=Reflect.get:Zh=function(r,t,s){var f=rI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},Zh.apply(this,arguments)}function rI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=dl(e),e!==null););return e}function nI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Gg(e,r)}function Gg(e,r){return Gg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Gg(e,r)}function oI(e){var r=aI();return function(){var s=dl(e),f;if(r){var d=dl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return iI(this,f)}}function iI(e,r){if(r&&(Kh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jh(e)}function Jh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dl(e){return dl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dl(e)}function eS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function kg(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Ug=(ga=function(e){nI(t,e);var r=oI(t);function t(){var s;eI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),eS(Jh(s),"modelType",Ze.CIRCLE_NODE),qR(Jh(s),"r",ZO,Jh(s)),s}return tI(t,[{key:"width",get:function(){return this.r*2}},{key:"height",get:function(){return this.r*2}},{key:"getNodeStyle",value:function(){var f=Zh(dl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.circle;return QO(QO({},f),gn(d))}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.r;return[{x:f,y:d-v,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+v,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),ZO=kg(ga.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),kg(ga.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ga.prototype,"width"),ga.prototype),kg(ga.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ga.prototype,"height"),ga.prototype),ga);o(127);function Qh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qh=function(t){return typeof t}:Qh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var Jn,tS,rS;function zg(e,r){return fI(e)||lI(e,r)||uI(e,r)||sI()}function sI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uI(e,r){if(e){if(typeof e=="string")return nS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nS(e,r)}}function nS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function lI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function fI(e){if(Array.isArray(e))return e}function oS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function iS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?oS(Object(t),!0).forEach(function(s){uS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function aS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function cI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function dI(e,r,t){return r&&sS(e.prototype,r),t&&sS(e,t),e}function qh(){return typeof Reflect<"u"&&Reflect.get?qh=Reflect.get:qh=function(r,t,s){var f=hI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},qh.apply(this,arguments)}function hI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=pl(e),e!==null););return e}function pI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Hg(e,r)}function Hg(e,r){return Hg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Hg(e,r)}function vI(e){var r=gI();return function(){var s=pl(e),f;if(r){var d=pl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return yI(this,f)}}function yI(e,r){if(r&&(Qh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hl(e)}function hl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pl(e){return pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pl(e)}function uS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function vl(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Xg=(Jn=function(e){pI(t,e);var r=vI(t);function t(){var s;cI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),uS(hl(s),"modelType",Ze.DIAMOND_NODE),aS(hl(s),"rx",tS,hl(s)),aS(hl(s),"ry",rS,hl(s)),s}return dI(t,[{key:"getNodeStyle",value:function(){var f=qh(pl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.diamond;return iS(iS({},f),gn(d))}},{key:"points",get:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[[f,d-b],[f+v,d],[f,d+b],[f-v,d]]}},{key:"pointsPosition",get:function(){var f=this.points.map(function(d){return{x:d[0],y:d[1]}});return f}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=zg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=zg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(d,v){var b=zg(d,2),O=b[0],P=b[1];return{x:O,y:P,id:"".concat(f.id,"_").concat(v)}})}}]),t}(ya),tS=vl(Jn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),rS=vl(Jn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),vl(Jn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"points"),Jn.prototype),vl(Jn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"pointsPosition"),Jn.prototype),vl(Jn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"width"),Jn.prototype),vl(Jn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"height"),Jn.prototype),Jn);function ep(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ep=function(t){return typeof t}:ep=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Ii,lS,fS;function cS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function dS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?cS(Object(t),!0).forEach(function(s){vS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):cS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function hS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function mI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bI(e,r,t){return r&&pS(e.prototype,r),t&&pS(e,t),e}function tp(){return typeof Reflect<"u"&&Reflect.get?tp=Reflect.get:tp=function(r,t,s){var f=EI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},tp.apply(this,arguments)}function EI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=gl(e),e!==null););return e}function OI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&$g(e,r)}function $g(e,r){return $g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},$g(e,r)}function SI(e){var r=TI();return function(){var s=gl(e),f;if(r){var d=gl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return xI(this,f)}}function xI(e,r){if(r&&(ep(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yl(e)}function yl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gl(e){return gl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gl(e)}function vS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rp(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Vg=(Ii=function(e){OI(t,e);var r=SI(t);function t(){var s;mI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),vS(yl(s),"modelType",Ze.ELLIPSE_NODE),hS(yl(s),"rx",lS,yl(s)),hS(yl(s),"ry",fS,yl(s)),s}return bI(t,[{key:"getNodeStyle",value:function(){var f=tp(gl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.ellipse;return dS(dS({},f),gn(d))}},{key:"width",get:function(){return this.rx*2}},{key:"height",get:function(){return this.ry*2}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[{x:f,y:d-b,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),lS=rp(Ii.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),fS=rp(Ii.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),rp(Ii.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"width"),Ii.prototype),rp(Ii.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"height"),Ii.prototype),Ii);function np(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?np=function(t){return typeof t}:np=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}var Uo,yS;function Wg(e,r){return _I(e)||wI(e,r)||PI(e,r)||AI()}function AI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PI(e,r){if(e){if(typeof e=="string")return gS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gS(e,r)}}function gS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function wI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function _I(e){if(Array.isArray(e))return e}function mS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function bS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mS(Object(t),!0).forEach(function(s){OS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function NI(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function MI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ES(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function RI(e,r,t){return r&&ES(e.prototype,r),t&&ES(e,t),e}function op(){return typeof Reflect<"u"&&Reflect.get?op=Reflect.get:op=function(r,t,s){var f=II(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},op.apply(this,arguments)}function II(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ml(e),e!==null););return e}function DI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Yg(e,r)}function Yg(e,r){return Yg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Yg(e,r)}function CI(e){var r=jI();return function(){var s=ml(e),f;if(r){var d=ml(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return LI(this,f)}}function LI(e,r){if(r&&(np(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ip(e)}function ip(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ml(e){return ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ml(e)}function OS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ap(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Kg=(Uo=function(e){DI(t,e);var r=CI(t);function t(){var s;MI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),OS(ip(s),"modelType",Ze.POLYGON_NODE),NI(ip(s),"points",yS,ip(s)),s}return RI(t,[{key:"getNodeStyle",value:function(){var f=op(ml(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.polygon;return bS(bS({},f),gn(d))}},{key:"pointsPosition",get:function(){var f=this.x,d=this.y,v=this.width,b=this.height,O=this.points.map(function(P){return{x:P[0]+f-v/2,y:P[1]+d-b/2}});return O}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Wg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Wg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this,d=this.x,v=this.y,b=this.width,O=this.height,P=this.points;return P.map(function(R,F){var Y=Wg(R,2),ne=Y[0],ve=Y[1];return{x:d+ne-b/2,y:v+ve-O/2,id:"".concat(f.id,"_").concat(F)}})}}]),t}(ya),yS=ap(Uo.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),ap(Uo.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"pointsPosition"),Uo.prototype),ap(Uo.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"width"),Uo.prototype),ap(Uo.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"height"),Uo.prototype),Uo);function sp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sp=function(t){return typeof t}:sp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}var Zg,SS;function xS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function TS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xS(Object(t),!0).forEach(function(s){PS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function BI(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function FI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function AS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function GI(e,r,t){return r&&AS(e.prototype,r),t&&AS(e,t),e}function up(){return typeof Reflect<"u"&&Reflect.get?up=Reflect.get:up=function(r,t,s){var f=kI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},up.apply(this,arguments)}function kI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=bl(e),e!==null););return e}function UI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Jg(e,r)}function Jg(e,r){return Jg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Jg(e,r)}function zI(e){var r=XI();return function(){var s=bl(e),f;if(r){var d=bl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return HI(this,f)}}function HI(e,r){if(r&&(sp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lp(e)}function lp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bl(e){return bl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bl(e)}function PS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function $I(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Qg=(Zg=function(e){UI(t,e);var r=zI(t);function t(){var s;FI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),PS(lp(s),"modelType",Ze.RECT_NODE),BI(lp(s),"radius",SS,lp(s)),s}return GI(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=up(bl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.rect;return TS(TS({},f),gn(d))}}]),t}(ya),SS=$I(Zg.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zg);function fp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fp=function(t){return typeof t}:fp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}var vs;function wS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function _S(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wS(Object(t),!0).forEach(function(s){RS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function VI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function NS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function WI(e,r,t){return r&&NS(e.prototype,r),t&&NS(e,t),e}function cp(){return typeof Reflect<"u"&&Reflect.get?cp=Reflect.get:cp=function(r,t,s){var f=YI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},cp.apply(this,arguments)}function YI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=El(e),e!==null););return e}function KI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&qg(e,r)}function qg(e,r){return qg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},qg(e,r)}function ZI(e){var r=QI();return function(){var s=El(e),f;if(r){var d=El(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return JI(this,f)}}function JI(e,r){if(r&&(fp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MS(e)}function MS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function El(e){return El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},El(e)}function RS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function IS(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var em=(vs=function(e){KI(t,e);var r=ZI(t);function t(){var s;VI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),RS(MS(s),"modelType",Ze.TEXT_NODE),s}return WI(t,[{key:"getTextStyle",value:function(){var f=cp(El(t.prototype),"getTextStyle",this).call(this),d=this.graphModel.theme.text;return _S(_S({},f),gn(d))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=fg({rows:f,fontSize:v,rowsLength:f.length}),O=b.width;return O}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=fg({rows:f,fontSize:v,rowsLength:f.length}),O=b.height;return O}}]),t}(ya),IS(vs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(vs.prototype,"width"),vs.prototype),IS(vs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(vs.prototype,"height"),vs.prototype),vs);function dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dp=function(t){return typeof t}:dp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function qI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function DS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function eD(e,r,t){return r&&DS(e.prototype,r),t&&DS(e,t),e}function tD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&tm(e,r)}function tm(e,r){return tm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},tm(e,r)}function rD(e){var r=oD();return function(){var s=hp(e),f;if(r){var d=hp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return nD(this,f)}}function nD(e,r){if(r&&(dp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CS(e)}function CS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hp(e){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hp(e)}function iD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var rm=function(e){tD(t,e);var r=rD(t);function t(){var s;qI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),iD(CS(s),"modelType",Ze.HTML_NODE),s}return eD(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),oi,LS,jS,BS;function FS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function aD(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?FS(Object(t),!0).forEach(function(s){kS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function nm(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function sD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function GS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function uD(e,r,t){return r&&GS(e.prototype,r),t&&GS(e,t),e}function kS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sc(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var US=(oi=function(){function e(r){sD(this,e),kS(this,"graphModel",void 0),nm(this,"isShowHorizontal",LS,this),nm(this,"isShowVertical",jS,this),nm(this,"position",BS,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}return uD(e,[{key:"getStyle",value:function(){return aD({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(t,s){for(var f=t.x,d=t.y,v=!1,b=!1,O=0;O<s.length;O++){var P=s[O];if(P.id!==t.id&&(f===P.x&&(v=!0),d===P.y&&(b=!0),v&&b))break}return{isShowVertical:v,isShowHorizontal:b,position:{x:f,y:d}}}},{key:"getHorizontalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var R=0;R<s.length;R++){var F=s[R];if(F.id!==t.id){var Y=Po(F);if(Y.minY===b.minY||Y.maxY===b.minY){f=!0,d=b.minY;break}if(Y.minY===b.maxY||Y.maxY===b.maxY){f=!0,d=b.maxY;break}}}return Mn({isShowHorizontal:f,position:{y:d}})}},{key:"getVerticalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var R=0;R<s.length;R++){var F=s[R];if(F.id!==t.id){var Y=Po(F);if(Y.minX===b.minX||Y.maxX===b.minX){f=!0,d=b.minX;break}if(Y.minX===b.maxX||Y.maxX===b.maxX){f=!0,d=b.maxX;break}}}return Mn({isShowVertical:f,position:{x:d}})}},{key:"getSnapLinePosition",value:function(t,s){var f=this.getCenterSnapLine(t,s),d=f.isShowHorizontal,v=f.isShowVertical;if(!d){var b=this.getHorizontalSnapline(t,s);b.isShowHorizontal&&(f.isShowHorizontal=b.isShowHorizontal,f.position.y=b.position.y)}if(!v){var O=this.getVerticalSnapline(t,s);O.isShowVertical&&(f.isShowVertical=O.isShowVertical,f.position.x=O.position.x)}return f}},{key:"setSnaplineInfo",value:function(t){var s=t.isShowHorizontal,f=t.isShowVertical,d=t.position;this.position=d,this.isShowHorizontal=s,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(t){var s=this.graphModel.nodes,f=this.getSnapLinePosition(t,s);this.setSnaplineInfo(f)}}]),e}(),LS=sc(oi.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jS=sc(oi.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BS=sc(oi.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc(oi.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(oi.prototype,"clearSnapline"),oi.prototype),sc(oi.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(oi.prototype,"setNodeSnapLine"),oi.prototype),oi),uc=new Map,zS=function(r){var t=fs();function s(){r();var d=uc.get(t);if(d){var v=window.requestAnimationFrame(s);uc.set(t,v)}}var f=window.requestAnimationFrame(s);return uc.set(t,f),t},pp=function(r){var t=uc.get(r);t&&(window.cancelAnimationFrame(t),uc.delete(r))};function vp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vp=function(t){return typeof t}:vp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function lc(){return lc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},lc.apply(this,arguments)}function HS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function yp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?HS(Object(t),!0).forEach(function(s){Ci(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function lD(e,r){return hD(e)||dD(e,r)||cD(e,r)||fD()}function fD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cD(e,r){if(e){if(typeof e=="string")return XS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return XS(e,r)}}function XS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function dD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function hD(e){if(Array.isArray(e))return e}function pD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $S(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function vD(e,r,t){return r&&$S(e.prototype,r),t&&$S(e,t),e}function yD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&om(e,r)}function om(e,r){return om=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},om(e,r)}function gD(e){var r=bD();return function(){var s=gp(e),f;if(r){var d=gp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return mD(this,f)}}function mD(e,r){if(r&&(vp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Di(e)}function Di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(e)}function Ci(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ED=function(e){yD(t,e);var r=gD(t);function t(){var s;return pD(this,t),s=r.call(this),Ci(Di(s),"preTargetNode",void 0),Ci(Di(s),"sourceRuleResults",void 0),Ci(Di(s),"targetRuleResults",void 0),Ci(Di(s),"dragHandler",void 0),Ci(Di(s),"t",void 0),Ci(Di(s),"onDragStart",function(f){var d=f.event,v=s.props,b=v.anchorData,O=v.nodeModel,P=v.graphModel,R=P.overlapMode;P.selectNodeById(O.id),R!==mt.INCREASE&&O.autoToFront&&P.toFront(O.id),P.eventCenter.emit(ze.ANCHOR_DRAGSTART,{data:b,e:d,nodeModel:O}),s.setState({startX:b.x,startY:b.y,endX:b.x,endY:b.y})}),Ci(Di(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,R=b.transformModel,F=b.eventCenter,Y=b.width,ne=b.height,ve=b.editConfigModel,Le=ve.autoExpand,De=ve.stopMoveGraph,Fe=d.clientX,Tt=d.clientY,It=b.getPointByClient({x:Fe,y:Tt}),ut=It.domOverlayPosition,Ft=ut.x,Pt=ut.y,er=It.canvasOverlayPosition,_t=er.x,gr=er.y;s.t&&pp(s.t);var Cr=[],wn=10;Ft<10?Cr=[wn,0]:Ft+10>Y?Cr=[-wn,0]:Pt<10?Cr=[0,wn]:Pt+10>ne&&(Cr=[0,-wn]),s.setState({endX:_t,endY:gr,dragging:!0}),s.moveAnchorEnd(_t,gr),Cr.length>0&&!De&&Le&&(s.t=zS(function(){var Fn=Cr,qn=lD(Fn,2),Eo=qn[0],au=qn[1];R.translate(Eo,au);var xl=s.state,ms=xl.endX,Tl=xl.endY;s.setState({endX:ms-Eo,endY:Tl-au}),s.moveAnchorEnd(ms-Eo,Tl-au)})),F.emit(ze.ANCHOR_DRAG,{data:P,e:d,nodeModel:O})}),Ci(Di(s),"onDragEnd",function(f){var d=f.event;s.t&&pp(s.t),s.checkEnd(d),s.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),s.sourceRuleResults.clear(),s.targetRuleResults.clear();var v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData;b.eventCenter.emit(ze.ANCHOR_DRAGEND,{data:P,e:d,nodeModel:O})}),Ci(Di(s),"checkEnd",function(f){var d=s.props,v=d.graphModel,b=d.nodeModel,O=d.anchorData,P=O.x,R=O.y,F=O.id;v.edgeType;var Y=s.state,ne=Y.endX,ve=Y.endY,Le=Y.dragging,De=oh({x:ne,y:ve},v);if(s.preTargetNode&&s.preTargetNode.state!==ct.DEFAULT&&s.preTargetNode.setElementState(ct.DEFAULT),!!Le&&De&&De.node){var Fe=De.node,Tt=De.anchor.id,It="".concat(b.id,"_").concat(Fe.id,"_").concat(Tt,"_").concat(F),ut=s.sourceRuleResults.get(It)||{},Ft=ut.isAllPass,Pt=ut.msg,er=s.targetRuleResults.get(It)||{},_t=er.isAllPass,gr=er.msg;if(Ft&&_t){Fe.setElementState(ct.DEFAULT);var Cr=v.edgeGenerator(b.getData(),v.getNodeModelById(De.node.id).getData()),wn=v.addEdge(yp(yp({},Cr),{},{sourceNodeId:b.id,sourceAnchorId:F,startPoint:{x:P,y:R},targetNodeId:De.node.id,targetAnchorId:De.anchor.id,endPoint:{x:De.anchor.x,y:De.anchor.y}})),Fn=s.props.anchorData;v.eventCenter.emit(ze.ANCHOR_DROP,{data:Fn,e:f,nodeModel:b,edgeModel:wn})}else{var qn=Fe.getData();v.eventCenter.emit(ze.CONNECTION_NOT_ALLOWED,{data:qn,msg:gr||Pt})}}}),s.sourceRuleResults=new Map,s.targetRuleResults=new Map,s.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},s.dragHandler=new ha({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return vD(t,[{key:"getAnchorShape",value:function(){var f=this.props,d=f.anchorData,v=f.style,b=f.node,O=b.getAnchorShape(d);if(O)return O;var P=d.x,R=d.y,F=yp(yp({},v),v.hover);return Object(Be.g)("g",null,Object(Be.g)(ic,lc({className:"lf-node-anchor-hover"},F,{x:P,y:R})),Object(Be.g)(ic,lc({className:"lf-node-anchor"},v,{x:P,y:R})))}},{key:"moveAnchorEnd",value:function(f,d){var v=this.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,R=oh({x:f,y:d},b);if(R){var F=R.node,Y=R.anchor.id;if(this.preTargetNode&&this.preTargetNode!==R.node&&this.preTargetNode.setElementState(ct.DEFAULT),P.id===Y)return;this.preTargetNode=F;var ne="".concat(O.id,"_").concat(F.id,"_").concat(Y,"_").concat(P.id);if(!this.targetRuleResults.has(ne)){var ve=R.anchor,Le=O.isAllowConnectedAsSource(F,P,ve),De=F.isAllowConnectedAsTarget(O,P,ve);this.sourceRuleResults.set(ne,ah(Le)),this.targetRuleResults.set(ne,ah(De))}var Fe=this.sourceRuleResults.get(ne),Tt=Fe.isAllPass,It=this.targetRuleResults.get(ne),ut=It.isAllPass;Tt&&ut?F.setElementState(ct.ALLOW_CONNECT):F.setElementState(ct.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==ct.DEFAULT&&this.preTargetNode.setElementState(ct.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,d=f.startX,v=f.startY,b=f.endX,O=f.endY,P=_i(d,v,b,O);return P>10}},{key:"render",value:function(){var f=this,d=this.state,v=d.startX,b=d.startY,O=d.endX,P=d.endY,R=this.props,F=R.anchorData.edgeAddable,Y=R.edgeStyle;return Object(Be.g)("g",{className:"lf-anchor"},Object(Be.g)("g",{onMouseDown:function(ve){F!==!1&&f.dragHandler.handleMouseDown(ve)}},this.getAnchorShape()),this.isShowLine()&&Object(Be.g)(ll,lc({x1:v,y1:b,x2:O,y2:P},Y,{"pointer-events":"none"})))}}]),t}(Be.a),OD=ED;o(64);function VS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function SD(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?VS(Object(t),!0).forEach(function(s){xD(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):VS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function xD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function mp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mp=function(t){return typeof t}:mp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function TD(e,r){return _D(e)||wD(e,r)||PD(e,r)||AD()}function AD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PD(e,r){if(e){if(typeof e=="string")return WS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WS(e,r)}}function WS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function wD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function _D(e){if(Array.isArray(e))return e}function YS(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.value,v=e.fontSize,b=e.fill,O=b===void 0?"currentColor":b,P=e.overflowMode,R=P===void 0?"default":P,F=e.textWidth,Y=F===void 0?"":F,ne=e.model,ve={textAnchor:"middle","dominant-baseline":"middle",x:t,y:f,fill:O};if(Object.entries(e).forEach(function(ut){var Ft=TD(ut,2),Pt=Ft[0],er=Ft[1],_t=mp(er);_t!=="object"&&(ve[Pt]=er)}),d){var Le=String(d).split(/[\r\n]/g),De=Le.length;if(R!=="default"){var Fe=ne.BaseType,Tt=ne.modelType;if(Fe===Ve.NODE&&Tt!==Ze.TEXT_NODE||Fe===Ve.EDGE&&Y)return ND(e)}if(De>1){var It=Le.map(function(ut,Ft){var Pt=v+2,er=(Ft-(De-1)/2)*Pt;return Object(Be.g)("tspan",{className:"lf-text-tspan",x:t,y:f+er},ut)});return Object(Be.g)("text",ve,It)}return Object(Be.g)("text",ve,d)}}function ND(e){var r=e.value,t=e.fontSize,s=e.model,f=e.fontFamily,d=f===void 0?"":f,v=e.lineHeight,b=e.wrapPadding,O=b===void 0?"0, 0":b,P=e.overflowMode,R=e.x,F=e.y,Y=s.width,ne=s.textHeight,ve=e.textWidth||Y,Le=String(r).split(/[\r\n]/g),De=Le.length,Fe=_E({rows:Le,style:{fontSize:"".concat(t,"px"),width:"".concat(ve,"px"),fontFamily:d,lineHeight:v,padding:O},rowsLength:De,className:"lf-get-text-height"}),Tt=s.height>Fe?s.height:Fe;ne&&(Tt=ne);var It=P==="ellipsis";return Object(Be.g)("g",null,Object(Be.g)("foreignObject",{width:ve,height:Tt,x:R-ve/2,y:F-Tt/2},Object(Be.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Tt,width:ve,padding:O}},Object(Be.g)("div",{className:It?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:It?Le.join(""):"",style:SD({},e)},Le.map(function(ut){return Object(Be.g)("div",{className:"lf-node-text--auto-wrap-inner"},ut)})))))}function bp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bp=function(t){return typeof t}:bp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function im(){return im=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},im.apply(this,arguments)}function MD(e,r){return CD(e)||DD(e,r)||ID(e,r)||RD()}function RD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ID(e,r){if(e){if(typeof e=="string")return KS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KS(e,r)}}function KS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function DD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function CD(e){if(Array.isArray(e))return e}function LD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ZS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function jD(e,r,t){return r&&ZS(e.prototype,r),t&&ZS(e,t),e}function BD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&am(e,r)}function am(e,r){return am=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},am(e,r)}function FD(e){var r=kD();return function(){var s=Ep(e),f;if(r){var d=Ep(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return GD(this,f)}}function GD(e,r){if(r&&(bp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ys(e)}function ys(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ep(e){return Ep=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ep(e)}function nu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var JS=function(e){BD(t,e);var r=FD(t);function t(s){var f;LD(this,t),f=r.call(this),nu(ys(f),"dragHandler",void 0),nu(ys(f),"sumDeltaX",0),nu(ys(f),"sumDeltaY",0),nu(ys(f),"stepDrag",void 0),nu(ys(f),"onDragging",function(b){var O=b.deltaX,P=b.deltaY,R=f.props,F=R.model,Y=R.graphModel.transformModel,ne=Y.fixDeltaXY(O,P),ve=MD(ne,2),Le=ve[0],De=ve[1];F.moveText(Le,De)}),nu(ys(f),"dblClickHandler",function(){var b=f.props.editable;if(b){var O=f.props.model;O.setElementState(ct.TEXT_EDIT)}}),nu(ys(f),"mouseDownHandle",function(b){var O=f.props,P=O.draggable,R=O.graphModel.editConfigModel.nodeTextDraggable;(P||R)&&f.stepDrag.handleMouseDown(b)});var d=s.model,v=s.draggable;return f.stepDrag=new ha({onDragging:f.onDragging,step:1,model:d,isStopPropagation:v}),f}return jD(t,[{key:"getShape",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.text,O=v.editConfigModel,P=b.value,R=b.x,F=b.y,Y=b.editable,ne=b.draggable,ve={x:R,y:F,className:"",value:P};Y?ve.className="lf-element-text":ne||O.nodeTextDraggable?ve.className="lf-text-draggable":ve.className="lf-text-disabled";var Le=d.getTextStyle();return Object(Be.g)(YS,im({},ve,Le,{model:d}))}},{key:"render",value:function(){var f=this.props.model.text;if(f)return Object(Be.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}]),t}(Be.a),UD=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Op(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Op=function(t){return typeof t}:Op=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function Sp(e,r){return $D(e)||XD(e,r)||HD(e,r)||zD()}function zD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HD(e,r){if(e){if(typeof e=="string")return QS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QS(e,r)}}function QS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function XD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function $D(e){if(Array.isArray(e))return e}function VD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function qS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function WD(e,r,t){return r&&qS(e.prototype,r),t&&qS(e,t),e}function YD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&sm(e,r)}function sm(e,r){return sm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},sm(e,r)}function KD(e){var r=JD();return function(){var s=xp(e),f;if(r){var d=xp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return ZD(this,f)}}function ZD(e,r){if(r&&(Op(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xp(e){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xp(e)}function fo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ma=function(e){YD(t,e);var r=KD(t);function t(s){var f;VD(this,t),f=r.call(this),fo(Qn(f),"t",void 0),fo(Qn(f),"moveOffset",void 0),fo(Qn(f),"stepDrag",void 0),fo(Qn(f),"contextMenuTime",void 0),fo(Qn(f),"startTime",void 0),fo(Qn(f),"clickTimer",void 0),fo(Qn(f),"onDragStart",function(P){var R=P.event,F=R.clientX,Y=R.clientY,ne=f.props,ve=ne.model,Le=ne.graphModel,De=Le.getPointByClient({x:F,y:Y}),Fe=De.canvasOverlayPosition,Tt=Fe.x,It=Fe.y;f.moveOffset={x:ve.x-Tt,y:ve.y-It}}),fo(Qn(f),"onDragging",function(P){var R=P.event,F=f.props,Y=F.model,ne=F.graphModel,ve=ne.editConfigModel,Le=ve.stopMoveGraph,De=ve.autoExpand,Fe=ne.transformModel,Tt=ne.width,It=ne.height,ut=ne.gridSize;Y.isDragging=!0;var Ft=R.clientX,Pt=R.clientY,er=ne.getPointByClient({x:Ft,y:Pt}),_t=er.canvasOverlayPosition,gr=_t.x,Cr=_t.y,wn=Fe.CanvasPointToHtmlPoint([gr,Cr]),Fn=Sp(wn,2),qn=Fn[0],Eo=Fn[1];if(gr=gr+f.moveOffset.x,Cr=Cr+f.moveOffset.y,gr=ls(gr,ut),Cr=ls(Cr,ut),!Tt||!It){ne.moveNode2Coordinate(Y.id,gr,Cr);return}var au=qn<0||Eo<0||qn>Tt||Eo>It;if(!(De&&!Le&&au)){var xl=Fe.CanvasPointToHtmlPoint([gr-Y.width/2,Cr-Y.height/2]),ms=Sp(xl,2),Tl=ms[0],Qm=ms[1],Gj=Fe.CanvasPointToHtmlPoint([gr+Y.width/2,Cr+Y.height/2]),Qx=Sp(Gj,2),kj=Qx[0],Uj=Qx[1],cv=Math.max(ut,20),Al=[];Tl<0?Al=[cv,0]:kj>ne.width?Al=[-cv,0]:Qm<0?Al=[0,cv]:Uj>ne.height&&(Al=[0,-cv]),f.t&&pp(f.t),Al.length>0&&!Le&&De?f.t=zS(function(){var zj=Al,qx=Sp(zj,2),eT=qx[0],tT=qx[1];Fe.translate(eT,tT),ne.moveNode(Y.id,-eT/Fe.SCALE_X,-tT/Fe.SCALE_X)}):ne.moveNode2Coordinate(Y.id,gr,Cr)}}),fo(Qn(f),"onDragEnd",function(){f.t&&pp(f.t);var P=f.props.model;P.isDragging=!1}),fo(Qn(f),"handleClick",function(P){if(f.startTime){var R=new Date().getTime()-f.startTime;if(!(R>200)){var F=f.props,Y=F.model,ne=F.graphModel,ve=Y.getData(),Le=ne.getPointByClient({x:P.clientX,y:P.clientY}),De={data:ve,e:P,position:Le,isSelected:!1,isMultiple:!1},Fe=P.button===2,Tt=P.detail===2;if(!Fe){var It=ne.editConfigModel,ut=OE(P,It);De.isMultiple=ut,Y.isSelected&&!Tt&&ut?(De.isSelected=!1,Y.setSelected(!1)):(ne.selectNodeById(Y.id,ut),De.isSelected=!0,f.toFront()),Tt?(It.nodeTextEdit&&Y.text.editable&&(Y.setSelected(!1),ne.setElementStateById(Y.id,ct.TEXT_EDIT)),ne.eventCenter.emit(ze.NODE_DBCLICK,De)):(ne.eventCenter.emit(ze.ELEMENT_CLICK,De),ne.eventCenter.emit(ze.NODE_CLICK,De))}}}}),fo(Qn(f),"handleContextMenu",function(P){P.preventDefault();var R=f.props,F=R.model,Y=R.graphModel,ne=F.getData(),ve=Y.getPointByClient({x:P.clientX,y:P.clientY});Y.setElementStateById(F.id,ct.SHOW_MENU,ve.domOverlayPosition),F.isSelected||Y.selectNodeById(F.id),Y.eventCenter.emit(ze.NODE_CONTEXTMENU,{data:ne,e:P,position:ve}),f.toFront()}),fo(Qn(f),"handleMouseDown",function(P){var R=f.props,F=R.model,Y=R.graphModel;f.startTime=new Date().getTime();var ne=Y.editConfigModel;ne.adjustNodePosition&&F.draggable&&f.stepDrag&&f.stepDrag.handleMouseDown(P)}),fo(Qn(f),"setHoverON",function(P){var R=f.props,F=R.model,Y=R.graphModel;if(!F.isHovered){var ne=F.getData();F.setHovered(!0),Y.eventCenter.emit(ze.NODE_MOUSEENTER,{data:ne,e:P})}}),fo(Qn(f),"setHoverOFF",function(P){var R=f.props,F=R.model,Y=R.graphModel,ne=F.getData();F.isHovered&&(F.setHovered(!1),Y.eventCenter.emit(ze.NODE_MOUSELEAVE,{data:ne,e:P}))}),fo(Qn(f),"onMouseOut",function(P){UD&&f.setHoverOFF(P)});var d=s.graphModel,v=d.gridSize,b=d.eventCenter,O=s.model;return f.stepDrag=new ha({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"NODE",isStopPropagation:!1,eventCenter:b,model:O}),f}return WD(t,[{key:"getAnchorShape",value:function(f){return null}},{key:"getAnchors",value:function(){var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.isSelected,P=v.isHitable,R=v.isDragging,F=v.isShowAnchor;return P&&(O||F)&&!R?ua(v.anchors,function(Y,ne){var ve=v.getAnchorLineStyle(Y),Le=v.getAnchorStyle(Y);return Object(Be.g)(OD,{anchorData:Y,node:f,style:Le,edgeStyle:ve,anchorIndex:ne,nodeModel:v,graphModel:b,setHoverOFF:f.setHoverOFF})}):[]}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return"";if(d.text){var b=v.editConfigModel,O=!1;return(d.text.draggable||b.nodeTextDraggable)&&(O=!0),Object(Be.g)(JS,{editable:b.nodeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:O})}}},{key:"getStateClassName",value:function(){var f=this.props.model,d=f.state,v=f.isDragging,b=f.isSelected,O="lf-node";switch(d){case ct.ALLOW_CONNECT:O+=" lf-node-allow";break;case ct.NOT_ALLOW_CONNECT:O+=" lf-node-not-allow";break;default:O+=" lf-node-default";break}return v&&(O+=" lf-isDragging"),b&&(O+=" lf-node-selected"),O}},{key:"toFront",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.overlapMode;b!==mt.INCREASE&&d.autoToFront&&v.toFront(d.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.editConfigModel,O=b.hideAnchors,P=b.adjustNodePosition,R=v.gridSize,F=v.transformModel.SCALE_X,Y=d.isHitable,ne=d.draggable,ve=Object(Be.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),O?null:this.getAnchors()),Le;return Y?(P&&ne&&this.stepDrag.setStep(R*F),Le=Object(Be.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},ve)):Le=Object(Be.g)("g",{className:this.getStateClassName()},ve),Le}}],[{key:"getModel",value:function(f){return f}}]),t}(Be.a);function Tp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tp=function(t){return typeof t}:Tp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function um(){return um=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},um.apply(this,arguments)}function QD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ex(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function qD(e,r,t){return r&&ex(e.prototype,r),t&&ex(e,t),e}function eC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&lm(e,r)}function lm(e,r){return lm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},lm(e,r)}function tC(e){var r=oC();return function(){var s=Ap(e),f;if(r){var d=Ap(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return rC(this,f)}}function rC(e,r){if(r&&(Tp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nC(e)}function nC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ap(e){return Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ap(e)}var fm=function(e){eC(t,e);var r=tC(t);function t(){return QD(this,t),r.apply(this,arguments)}return qD(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(hs,um({},d,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}]),t}(ma);function Pp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pp=function(t){return typeof t}:Pp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function cm(){return cm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cm.apply(this,arguments)}function iC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function aC(e,r,t){return r&&tx(e.prototype,r),t&&tx(e,t),e}function sC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&dm(e,r)}function dm(e,r){return dm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},dm(e,r)}function uC(e){var r=cC();return function(){var s=wp(e),f;if(r){var d=wp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return lC(this,f)}}function lC(e,r){if(r&&(Pp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fC(e)}function fC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wp(e){return wp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wp(e)}var hm=function(e){sC(t,e);var r=uC(t);function t(){return iC(this,t),r.apply(this,arguments)}return aC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.r,O=f.getNodeStyle();return Object(Be.g)(ic,cm({},O,{x:d,y:v,r:b}))}}]),t}(ma);function _p(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_p=function(t){return typeof t}:_p=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function dC(e,r){return yC(e)||vC(e,r)||pC(e,r)||hC()}function hC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pC(e,r){if(e){if(typeof e=="string")return rx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rx(e,r)}}function rx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function vC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function yC(e){if(Array.isArray(e))return e}function nx(e){var r=e.points,t=e.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(f){var d=dC(f,2),v=d[0],b=d[1],O=_p(b);O!=="object"&&(s[v]=b)}),t?s.className="lf-basic-shape ".concat(t):s.className="lf-basic-shape",s.points=r.map(function(f){return f.join(",")}).join(" "),Object(Be.g)("polygon",s)}function Np(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Np=function(t){return typeof t}:Np=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function pm(){return pm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},pm.apply(this,arguments)}function gC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ox(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function mC(e,r,t){return r&&ox(e.prototype,r),t&&ox(e,t),e}function bC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&vm(e,r)}function vm(e,r){return vm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},vm(e,r)}function EC(e){var r=xC();return function(){var s=Mp(e),f;if(r){var d=Mp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return OC(this,f)}}function OC(e,r){if(r&&(Np(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SC(e)}function SC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(e)}var ym=function(e){bC(t,e);var r=EC(t);function t(){return gC(this,t),r.apply(this,arguments)}return mC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.width,O=f.height,P=f.points,R=f.getNodeStyle(),F={transform:"matrix(1 0 0 1 ".concat(d-b/2," ").concat(v-O/2,")")};return Object(Be.g)("g",F,Object(Be.g)(nx,pm({},R,{points:P,x:d,y:v})))}}]),t}(ma);function Rp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rp=function(t){return typeof t}:Rp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function gm(){return gm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gm.apply(this,arguments)}function TC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ix(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function AC(e,r,t){return r&&ix(e.prototype,r),t&&ix(e,t),e}function PC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&mm(e,r)}function mm(e,r){return mm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},mm(e,r)}function wC(e){var r=MC();return function(){var s=Ip(e),f;if(r){var d=Ip(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return _C(this,f)}}function _C(e,r){if(r&&(Rp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NC(e)}function NC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ip(e){return Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ip(e)}var bm=function(e){PC(t,e);var r=wC(t);function t(){return TC(this,t),r.apply(this,arguments)}return AC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)("g",null,Object(Be.g)(nx,gm({},d,{points:f.points,x:f.x,y:f.y})))}}]),t}(ma);function Dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(t){return typeof t}:Dp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function RC(e,r){return LC(e)||CC(e,r)||DC(e,r)||IC()}function IC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DC(e,r){if(e){if(typeof e=="string")return ax(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ax(e,r)}}function ax(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function CC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function LC(e){if(Array.isArray(e))return e}function jC(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.rx,v=d===void 0?4:d,b=e.ry,O=b===void 0?4:b,P=e.className,R={cx:t,cy:f,rx:v,ry:O,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(F){var Y=RC(F,2),ne=Y[0],ve=Y[1],Le=Dp(ve);Le!=="object"&&(R[ne]=ve)}),P?R.className="lf-basic-shape ".concat(P):R.className="lf-basic-shape",Object(Be.g)("ellipse",R)}function Cp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cp=function(t){return typeof t}:Cp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Em(){return Em=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Em.apply(this,arguments)}function BC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function FC(e,r,t){return r&&sx(e.prototype,r),t&&sx(e,t),e}function GC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Om(e,r)}function Om(e,r){return Om=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Om(e,r)}function kC(e){var r=HC();return function(){var s=Lp(e),f;if(r){var d=Lp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return UC(this,f)}}function UC(e,r){if(r&&(Cp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zC(e)}function zC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lp(e)}var Sm=function(e){GC(t,e);var r=kC(t);function t(){return BC(this,t),r.apply(this,arguments)}return FC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(jC,Em({},d,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}]),t}(ma);function jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jp=function(t){return typeof t}:jp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function ux(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function lx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ux(Object(t),!0).forEach(function(s){XC(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ux(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function XC(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function $C(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function fx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function VC(e,r,t){return r&&fx(e.prototype,r),t&&fx(e,t),e}function WC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&xm(e,r)}function xm(e,r){return xm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},xm(e,r)}function YC(e){var r=JC();return function(){var s=Bp(e),f;if(r){var d=Bp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return KC(this,f)}}function KC(e,r){if(r&&(jp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZC(e)}function ZC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bp(e)}var Tm=function(e){WC(t,e);var r=YC(t);function t(){return $C(this,t),r.apply(this,arguments)}return VC(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text;if(v&&v.value&&d.background&&d.background.fill!=="transparent"){var b=v.x,O=v.y,P=f.width,R=f.height,F=lx(lx({},d.background),{},{x:b,y:O-1,width:P,height:R});return Object(Be.g)(hs,F)}}},{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getBackground())}}]),t}(ma);function Fp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fp=function(t){return typeof t}:Fp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function Am(){return Am=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Am.apply(this,arguments)}function QC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function qC(e,r,t){return r&&cx(e.prototype,r),t&&cx(e,t),e}function eL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Pm(e,r)}function Pm(e,r){return Pm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Pm(e,r)}function tL(e){var r=nL();return function(){var s=Gp(e),f;if(r){var d=Gp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return rL(this,f)}}function rL(e,r){if(r&&(Fp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fc(e)}function fc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gp(e)}function kp(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var wm=function(e){eL(t,e);var r=tL(t);function t(){var s;QC(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),kp(fc(s),"ref",void 0),kp(fc(s),"currentProperties",void 0),kp(fc(s),"preProperties",void 0),kp(fc(s),"setRef",function(b){s.ref=b}),s}return qC(t,[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!(this.preProperties&&this.preProperties===this.currentProperties))return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.height,O=f.width,P=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Be.g)("foreignObject",Am({},P,{x:d-O/2,y:v-b/2,width:O,height:b,ref:this.setRef}))}}]),t}(ma);function Up(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Up=function(t){return typeof t}:Up=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function _m(){return _m=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},_m.apply(this,arguments)}function dx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ou(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?dx(Object(t),!0).forEach(function(s){Rm(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function oL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function hx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function iL(e,r,t){return r&&hx(e.prototype,r),t&&hx(e,t),e}function aL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Nm(e,r)}function Nm(e,r){return Nm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Nm(e,r)}function sL(e){var r=lL();return function(){var s=zp(e),f;if(r){var d=zp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return uL(this,f)}}function uL(e,r){if(r&&(Up(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mm(e)}function Mm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(e)}function Rm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var fL=function(e){aL(t,e);var r=sL(t);function t(s){var f;return oL(this,t),f=r.call(this,s),Rm(Mm(f),"setHoverON",function(){f.setState({isHovered:!0})}),Rm(Mm(f),"setHoverOFF",function(){f.setState({isHovered:!1})}),f.state={isHovered:!1},f}return iL(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text,b=d.background||{},O=this.state.isHovered;if(O&&d.hover&&d.hover.background&&(b=ou(ou({},b),d.hover.background)),v&&v.value&&b.fill!=="transparent"){var P=d.fontSize,R=d.overflowMode,F=d.lineHeight,Y=d.wrapPadding,ne=d.textWidth,ve=v.value,Le=v.x,De=v.y,Fe=String(ve).split(/[\r\n]/g),Tt=Fe.length,It;if(R==="autoWrap"&&ne){var ut=_E({rows:Fe,style:{fontSize:"".concat(P,"px"),width:"".concat(ne,"px"),lineHeight:F,padding:Y},rowsLength:Tt,className:"lf-get-text-height"});It=ou(ou({},b),{},{x:Le-1,y:De-1,width:ne,height:ut})}else{Fe&&Fe.forEach(function(gr){b0(gr)});var Ft=fg({rows:Fe,fontSize:P,rowsLength:Tt}),Pt=Ft.width,er=Ft.height;if(typeof b.wrapPadding=="string"){var _t=b.wrapPadding.split(",").filter(function(gr){return gr.trim()}).map(function(gr){return parseFloat(gr.trim())});_t.length>0&&_t.length<=4&&(_t.length===1?_t=[_t[0],_t[0],_t[0],_t[0]]:_t.length===2?_t=[_t[0],_t[1],_t[0],_t[1]]:_t.length===3&&(_t=[_t[0],_t[1],_t[2],_t[1]]),Pt+=_t[1]+_t[3],er+=_t[0]+_t[2],Le=Le+(_t[1]-_t[3])/2,De=De+(_t[2]-_t[0])/2)}It=ou(ou({},b),{},{x:Le-1,y:De-1,width:Pt,height:er})}return Object(Be.g)(hs,It)}}},{key:"getShape",value:function(){var f=this.props.model,d=f.text,v=d.value,b=d.x,O=d.y;if(v){var P=f.getTextStyle(),R=ou({x:b,y:O,className:"lf-element-text",value:v},P);return Object(Be.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Be.g)(YS,_m({},R,{model:f})))}}}]),t}(JS);function Hp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hp=function(t){return typeof t}:Hp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function px(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ba(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?px(Object(t),!0).forEach(function(s){_o(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):px(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function cL(e,r){return vL(e)||pL(e,r)||hL(e,r)||dL()}function dL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hL(e,r){if(e){if(typeof e=="string")return vx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vx(e,r)}}function vx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function pL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function vL(e){if(Array.isArray(e))return e}function yL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function yx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function gL(e,r,t){return r&&yx(e.prototype,r),t&&yx(e,t),e}function mL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Im(e,r)}function Im(e,r){return Im=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Im(e,r)}function bL(e){var r=OL();return function(){var s=Xp(e),f;if(r){var d=Xp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return EL(this,f)}}function EL(e,r){if(r&&(Hp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wo(e)}function wo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xp(e)}function _o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Li;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Li||(Li={}));var gx=function(e){mL(t,e);var r=bL(t);function t(s){var f;yL(this,t),f=r.call(this),_o(wo(f),"stepDragData",void 0),_o(wo(f),"stepDrag",void 0),_o(wo(f),"oldEdge",void 0),_o(wo(f),"preTargetNode",void 0),_o(wo(f),"targetRuleResults",void 0),_o(wo(f),"sourceRuleResults",void 0),_o(wo(f),"handleMouseDown",function(P){f.stepDrag&&f.stepDrag.handleMouseDown(P)}),_o(wo(f),"onDragStart",function(){var P=f.props,R=P.x,F=P.y,Y=P.edgeModel,ne=Y.startPoint,ve=Y.endPoint,Le=Y.pointsList;f.oldEdge={startPoint:ne,endPoint:ve,pointsList:Le},f.setState({endX:R,endY:F,dragging:!0})}),_o(wo(f),"onDragging",function(P){var R=P.deltaX,F=P.deltaY,Y=f.state,ne=Y.endX,ve=Y.endY,Le=f.props,De=Le.graphModel,Fe=Le.type,Tt=De.transformModel,It=De.editConfigModel,ut=Tt.moveCanvasPointByHtml([ne,ve],R,F),Ft=cL(ut,2),Pt=Ft[0],er=Ft[1];f.setState({endX:Pt,endY:er,dragging:!0});var _t=f.props.edgeModel,gr=oh({x:ne,y:ve},De);if(gr&&gr.node&&f.isAllowAdjust(gr)){var Cr,wn=_t.startPoint,Fn=_t.endPoint,qn=_t.sourceNode,Eo=_t.targetNode;Fe===Li.SOURCE?Cr={startPoint:{x:gr.anchor.x,y:gr.anchor.y},endPoint:{x:Fn.x,y:Fn.y},sourceNode:gr.node,targetNode:Eo}:Fe===Li.TARGET&&(Cr={startPoint:{x:wn.x,y:wn.y},endPoint:{x:gr.anchor.x,y:gr.anchor.y},sourceNode:qn,targetNode:gr.node}),_t.updateAfterAdjustStartAndEnd(Cr)}else Fe===Li.SOURCE?_t.updateStartPoint({x:Pt,y:er}):Fe===Li.TARGET&&_t.updateEndPoint({x:Pt,y:er});_t.text.value&&It.adjustEdge&&_t.setText(Object.assign({},_t.text,_t.textPosition))}),_o(wo(f),"onDragEnd",function(P){var R=P.event;try{var F;f.setState({dragging:!1});var Y=f.props,ne=Y.graphModel,ve=Y.edgeModel,Le=Y.type,De=f.state,Fe=De.endX,Tt=De.endY,It=De.dragging,ut=oh({x:Fe,y:Tt},ne);if(!It)return;var Ft=!1,Pt;if(ut&&ut.node&&f.isAllowAdjust(ut)){var er,_t=ve.getData();if(Pt=ba(ba({},_t),{},{sourceAnchorId:"",targetAnchorId:"",text:(_t==null||(er=_t.text)===null||er===void 0?void 0:er.value)||""}),Le===Li.SOURCE){var gr=ne.edgeGenerator(ne.getNodeModelById(ut.node.id).getData(),ne.getNodeModelById(ve.targetNodeId).getData(),Pt);Pt=ba(ba({},gr),{},{sourceNodeId:ut.node.id,sourceAnchorId:ut.anchor.id,startPoint:{x:ut.anchor.x,y:ut.anchor.y},targetNodeId:ve.targetNodeId,endPoint:ba({},ve.endPoint)}),ve.sourceNodeId===ut.node.id&&ve.sourceAnchorId===ut.anchor.id&&(Ft=!0)}else if(Le===Li.TARGET){var Cr=ne.edgeGenerator(ne.getNodeModelById(ve.sourceNodeId).getData(),ne.getNodeModelById(ut.node.id).getData(),Pt);Pt=ba(ba({},Cr),{},{sourceNodeId:ve.sourceNodeId,startPoint:ba({},ve.startPoint),targetNodeId:ut.node.id,targetAnchorId:ut.anchor.id,endPoint:{x:ut.anchor.x,y:ut.anchor.y}}),ve.targetNodeId===ut.node.id&&ve.targetAnchorId===ut.anchor.id&&(Ft=!0)}}else Ft=!0;if(Ft)f.recoveryEdge();else{ne.deleteEdgeById(ve.id);var wn=ne.addEdge(ba({},Pt));ne.eventCenter.emit(ze.EDGE_EXCHANGE_NODE,{data:{newEdge:wn.getData(),oldEdge:ve.getData()}})}(F=f.preTargetNode)===null||F===void 0||F.setElementState(ct.DEFAULT)}finally{var Fn=f.props.graphModel;Fn.eventCenter.emit(ze.ADJUST_POINT_DRAGEND,{e:R,data:f.stepDragData})}}),_o(wo(f),"recoveryEdge",function(){var P=f.props.edgeModel,R=f.oldEdge,F=R.startPoint,Y=R.endPoint,ne=R.pointsList;P.updateStartPoint(F),P.updateEndPoint(Y),P.modelType!==Ze.LINE_EDGE&&(P.pointsList=ne,P.initPoints())}),_o(wo(f),"getAdjustPointStyle",function(){var P=f.props,R=P.graphModel.theme;P.edgeModel;var F=R.edgeAdjust;return F}),f.state={dragging:!1,endX:0,endY:0},f.targetRuleResults=new Map,f.sourceRuleResults=new Map;var d=s.type,v=s.edgeModel,b=s.graphModel,O=b.eventCenter;return f.stepDragData={type:d,edgeData:v.getData()},f.stepDrag=new ha({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:f.stepDragData}),f}return gL(t,[{key:"isAllowAdjust",value:function(f){var d=this.props,v=d.edgeModel,b=v.id,O=v.sourceNode,P=v.targetNode,R=v.sourceAnchorId,F=v.targetAnchorId,Y=d.type,ne=null,ve=null,Le=null,De=null;if(Y===Li.SOURCE?(ne=f.node,ve=P,Le=f.anchor,De=P.getAnchorInfo(F)):(ne=O,ve=f.node,De=f.anchor,Le=O.getAnchorInfo(R)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(ct.DEFAULT),this.preTargetNode=f.node,De.id===Le.id)return!1;var Fe="".concat(ne.id,"_").concat(ve.id,"_").concat(Le.id,"_").concat(De.id);if(!this.targetRuleResults.has(Fe)){var Tt=ne.isAllowConnectedAsSource(ve,Le,De,b),It=ve.isAllowConnectedAsTarget(ne,Le,De,b);this.sourceRuleResults.set(Fe,ah(Tt)),this.targetRuleResults.set(Fe,ah(It))}var ut=this.sourceRuleResults.get(Fe),Ft=ut.isAllPass,Pt=this.targetRuleResults.get(Fe),er=Pt.isAllPass,_t=Ft&&er?ct.ALLOW_CONNECT:ct.NOT_ALLOW_CONNECT;return Y===Li.SOURCE?ne.setElementState(_t):ve.setElementState(_t),Ft&&er}},{key:"render",value:function(){var f=this.props,d=f.x,v=f.y,b=f.getAdjustPointShape,O=this.state.dragging;return Object(Be.g)("g",{pointerEvents:O?"none":"",onMouseDown:this.handleMouseDown},b(d,v,O))}}]),t}(Be.a);function $p(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$p=function(t){return typeof t}:$p=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function cc(){return cc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cc.apply(this,arguments)}function SL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function mx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function xL(e,r,t){return r&&mx(e.prototype,r),t&&mx(e,t),e}function TL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Dm(e,r)}function Dm(e,r){return Dm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Dm(e,r)}function AL(e){var r=wL();return function(){var s=Vp(e),f;if(r){var d=Vp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return PL(this,f)}}function PL(e,r){if(r&&($p(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zo(e)}function zo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(e)}function ii(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var dc=function(e){TL(t,e);var r=AL(t);function t(){var s;SL(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),ii(zo(s),"startTime",void 0),ii(zo(s),"contextMenuTime",void 0),ii(zo(s),"clickTimer",void 0),ii(zo(s),"textRef",Object(Be.f)()),ii(zo(s),"getAdjustPointShape",function(b,O){var P=s.props.model,R=P.getAdjustPointStyle();return Object(Be.g)(ic,cc({className:"lf-edge-adjust-point"},R,{x:b,y:O}))}),ii(zo(s),"handleHover",function(b,O){var P=s.props,R=P.model,F=P.graphModel.eventCenter;R.setHovered(b);var Y=b?ze.EDGE_MOUSEENTER:ze.EDGE_MOUSELEAVE,ne=R.getData();F.emit(Y,{data:ne,e:O})}),ii(zo(s),"setHoverON",function(b){var O=s.props.model.isHovered;O||(s.textRef&&s.textRef.current.setHoverON(),s.handleHover(!0,b))}),ii(zo(s),"setHoverOFF",function(b){var O=s.props.model.isHovered;O&&(s.textRef&&s.textRef.current.setHoverOFF(),s.handleHover(!1,b))}),ii(zo(s),"handleContextMenu",function(b){b.preventDefault(),s.contextMenuTime=new Date().getTime(),s.clickTimer&&clearTimeout(s.clickTimer);var O=s.props,P=O.model,R=O.graphModel,F=R.getPointByClient({x:b.clientX,y:b.clientY});R.setElementStateById(P.id,ct.SHOW_MENU,F.domOverlayPosition),s.toFront(),P.isSelected||R.selectEdgeById(P.id);var Y=P==null?void 0:P.getData();R.eventCenter.emit(ze.EDGE_CONTEXTMENU,{data:Y,e:b,position:F})}),ii(zo(s),"handleMouseDown",function(b){b.stopPropagation(),s.startTime=new Date().getTime()}),ii(zo(s),"handleMouseUp",function(b){if(s.startTime){var O=new Date().getTime()-s.startTime;if(!(O>200)){var P=b.button===2;if(!P){var R=b.detail===2,F=s.props,Y=F.model,ne=F.graphModel,ve=Y==null?void 0:Y.getData(),Le=ne.getPointByClient({x:b.clientX,y:b.clientY});if(R){var De=ne.editConfigModel,Fe=ne.textEditElement;if(Fe&&Fe.id===Y.id&&ne.setElementStateById(Y.id,ct.DEFAULT),De.edgeTextEdit&&Y.text.editable&&ne.setElementStateById(Y.id,ct.TEXT_EDIT),Y.modelType===Ze.POLYLINE_EDGE){var Tt=Y,It=ne.getPointByClient({x:b.x,y:b.y}),ut=It.canvasOverlayPosition,Ft=ut.x,Pt=ut.y,er=O0({x:Ft,y:Pt},Tt.points);Tt.dbClickPosition=er}ne.eventCenter.emit(ze.EDGE_DBCLICK,{data:ve,e:b,position:Le})}else ne.eventCenter.emit(ze.ELEMENT_CLICK,{data:ve,e:b,position:Le}),ne.eventCenter.emit(ze.EDGE_CLICK,{data:ve,e:b,position:Le});var _t=ne.editConfigModel;ne.selectEdgeById(Y.id,OE(b,_t)),s.toFront()}}}}),s}return xL(t,[{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return null;var b=!1,O=v.editConfigModel;return(d.text.draggable||O.edgeTextDraggable)&&(b=!0),Object(Be.g)(fL,{ref:this.textRef,editable:O.edgeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:b})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isSelected,O=this.state,P=O.hover;return{start:d,end:v,hover:P,isSelected:b}}},{key:"getArrowStyle",value:function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null}},{key:"getArrow",value:function(){var f=this.props.model,d=f.id,v=f.getArrowStyle(),b=v.refY,O=b===void 0?0:b,P=v.refX,R=P===void 0?2:P;return Object(Be.g)("g",null,Object(Be.g)("defs",null,Object(Be.g)("marker",{id:"marker-start-".concat(d),refX:-R,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Be.g)("marker",{id:"marker-end-".concat(d),refX:R,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getEndArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getAdjustPoints",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.getAdjustStart(),O=d.getAdjustEnd();return Object(Be.g)("g",null,Object(Be.g)(gx,cc({type:"SOURCE"},b,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})),Object(Be.g)(gx,cc({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})))}},{key:"getAnimation",value:function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")}},{key:"getAppendWidth",value:function(){return Object(Be.g)("g",null)}},{key:"getAppend",value:function(){return Object(Be.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,d=f.graphModel,v=f.model,b=d.overlapMode;b!==mt.INCREASE&&d.toFront(v.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=d.isSelected,b=d.isHitable,O=d.isShowAdjustPoint,P=f.graphModel;return P.animation,Object(Be.g)("g",null,Object(Be.g)("g",{className:["lf-edge",!b&&"pointer-none",v&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&v?this.getAdjustPoints():"")}}]),t}(Be.a);function Wp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wp=function(t){return typeof t}:Wp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function _L(e,r){return IL(e)||RL(e,r)||ML(e,r)||NL()}function NL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ML(e,r){if(e){if(typeof e=="string")return bx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return bx(e,r)}}function bx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function RL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function IL(e){if(Array.isArray(e))return e}function DL(e){var r={d:""};return Object.entries(e).forEach(function(t){var s=_L(t,2),f=s[0],d=s[1],v=Wp(d);(f==="style"||v!=="object")&&(r[f]=d)}),Object(Be.g)("path",r)}var hc=DL;function Yp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yp=function(t){return typeof t}:Yp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function Cm(){return Cm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cm.apply(this,arguments)}function CL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ex(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function LL(e,r,t){return r&&Ex(e.prototype,r),t&&Ex(e,t),e}function jL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Lm(e,r)}function Lm(e,r){return Lm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Lm(e,r)}function BL(e){var r=kL();return function(){var s=Kp(e),f;if(r){var d=Kp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return FL(this,f)}}function FL(e,r){if(r&&(Yp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GL(e)}function GL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kp(e)}var jm=function(e){jL(t,e);var r=BL(t);function t(){return CL(this,t),r.apply(this,arguments)}return LL(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeStyle(),R=f.getEdgeAnimationStyle(),F=R.strokeDasharray,Y=R.stroke,ne=R.strokeDashoffset,ve=R.animationName,Le=R.animationDuration,De=R.animationIterationCount,Fe=R.animationTimingFunction,Tt=R.animationDirection;return Object(Be.g)(ll,Cm({},P,{x1:d.x,y1:d.y,x2:v.x,y2:v.y},O,b?{strokeDasharray:F,stroke:Y,style:{strokeDashoffset:ne,animationName:ve,animationDuration:Le,animationIterationCount:De,animationTimingFunction:Fe,animationDirection:Tt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b={start:d,end:v},O=R1(b),P=O.d,R=O.strokeWidth,F=O.fill,Y=O.strokeDasharray,ne=O.stroke;return Object(Be.g)(hc,{d:P,fill:F,strokeWidth:R,stroke:ne,strokeDasharray:Y})}}]),t}(dc);function Zp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zp=function(t){return typeof t}:Zp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}function UL(e,r){return $L(e)||XL(e,r)||HL(e,r)||zL()}function zL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HL(e,r){if(e){if(typeof e=="string")return Ox(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ox(e,r)}}function Ox(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function XL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function $L(e){if(Array.isArray(e))return e}function VL(e){var r={points:"",fill:"none"};return Object.entries(e).forEach(function(t){var s=UL(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Zp(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("polyline",r)}var WL=VL;function Jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jp=function(t){return typeof t}:Jp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function Sx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Qp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Sx(Object(t),!0).forEach(function(s){Oa(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Sx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Bm(){return Bm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Bm.apply(this,arguments)}function YL(e,r){return QL(e)||JL(e,r)||ZL(e,r)||KL()}function KL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZL(e,r){if(e){if(typeof e=="string")return xx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xx(e,r)}}function xx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function JL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function QL(e){if(Array.isArray(e))return e}function qL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Tx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function e2(e,r,t){return r&&Tx(e.prototype,r),t&&Tx(e,t),e}function t2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Fm(e,r)}function Fm(e,r){return Fm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Fm(e,r)}function r2(e){var r=o2();return function(){var s=qp(e),f;if(r){var d=qp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return n2(this,f)}}function n2(e,r){if(r&&(Jp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ea(e)}function Ea(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qp(e)}function Oa(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Gm=function(e){t2(t,e);var r=r2(t);function t(){var s;return qL(this,t),s=r.call(this),Oa(Ea(s),"drag",void 0),Oa(Ea(s),"isDragging",void 0),Oa(Ea(s),"isShowAdjustPointTemp",void 0),Oa(Ea(s),"appendInfo",void 0),Oa(Ea(s),"onDragStart",function(){var f=s.props.model;f.dragAppendStart(),s.isShowAdjustPointTemp=f.isShowAdjustPoint,f.isShowAdjustPoint=!1}),Oa(Ea(s),"onDragging",function(f){var d=f.deltaX,v=f.deltaY,b=s.props,O=b.model,P=b.graphModel;s.isDragging=!0;var R=P.transformModel,F=P.editConfigModel,Y=R.fixDeltaXY(d,v),ne=YL(Y,2),ve=ne[0],Le=ne[1],De=O,Fe=F.adjustEdgeMiddle;Fe?s.appendInfo=De.dragAppendSimple(s.appendInfo,{x:ve,y:Le}):s.appendInfo=De.dragAppend(s.appendInfo,{x:ve,y:Le})}),Oa(Ea(s),"onDragEnd",function(){var f=s.props,d=f.model,v=f.graphModel.eventCenter,b=d;b.dragAppendEnd(),s.isDragging=!1,b.isShowAdjustPoint=s.isShowAdjustPointTemp,s.appendInfo=void 0,v.emit(ze.EDGE_ADJUST,{data:b.getData()})}),Oa(Ea(s),"beforeDragStart",function(f,d){d.dragAble&&s.drag.handleMouseDown(f),s.appendInfo=d}),s.drag=new ha({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd,isStopPropagation:!1}),s}return e2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.points,v=f.isAnimation,b=f.arrowConfig,O=f.getEdgeStyle(),P=f.getEdgeAnimationStyle(),R=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,ve=P.animationDuration,Le=P.animationIterationCount,De=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(WL,Bm({points:d},O,b,v?{strokeDasharray:R,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:ve,animationIterationCount:Le,animationTimingFunction:De,animationDirection:Fe}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.points,v=f.isSelected,b=this.state,O=b.hover,P={start:null,end:null,hover:O,isSelected:v},R=al(d);return R.length>=2&&(P.start=R[R.length-2],P.end=R[R.length-1]),P}},{key:"getAppendAttributes",value:function(f){var d=f.start,v=f.end,b;if(d.x===v.x&&d.y===v.y)b="";else{var O={start:d,end:v,offset:10,verticalLength:5},P=ec(Qp(Qp({},O),{},{type:"start"})),R=ec(Qp(Qp({},O),{},{type:"end"}));b="M".concat(P.leftX," ").concat(P.leftY,` 
      L`).concat(P.rightX," ").concat(P.rightY,` 
      L`).concat(R.rightX," ").concat(R.rightY,`
      L`).concat(R.leftX," ").concat(R.leftY," z")}return{d:b,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var d=this.getAppendAttributes(f),v=d.d,b=d.strokeWidth,O=d.fill,P=d.strokeDasharray,R=d.stroke;return Object(Be.g)(hc,{d:v,fill:O,strokeWidth:b,stroke:R,strokeDasharray:P})}},{key:"getAppendWidth",value:function(){for(var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.pointsList,P=v.draggable,R=[],F=O.length,Y=function(Le){var De="lf-polyline-append",Fe={start:{x:O[Le].x,y:O[Le].y},end:{x:O[Le+1].x,y:O[Le+1].y},startIndex:Le,endIndex:Le+1,direction:"",dragAble:!0},Tt=Object(Be.g)("g",{className:De},f.getAppendShape(Fe)),It=b.editConfigModel,ut=It.adjustEdge,Ft=It.adjustEdgeMiddle;if(ut&&P){var Pt=Fe.startIndex,er=Fe.endIndex,_t=Ft&&(Pt===0||er===F-1);Fe.dragAble=!_t,Fe.start.x===Fe.end.x?(Fe.dragAble&&(De+="-ew-resize"),Fe.direction=At.VERTICAL):Fe.start.y===Fe.end.y&&(Fe.dragAble&&(De+="-ns-resize"),Fe.direction=At.HORIZONTAL),Tt=Object(Be.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Cr){return f.beforeDragStart(Cr,Fe)}},Object(Be.g)("g",{className:De},f.getAppendShape(Fe)))}R.push(Tt)},ne=0;ne<F-1;ne++)Y(ne);return Object(Be.g)("g",null,R)}}]),t}(dc);function ev(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ev=function(t){return typeof t}:ev=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}function i2(e,r){return l2(e)||u2(e,r)||s2(e,r)||a2()}function a2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s2(e,r){if(e){if(typeof e=="string")return Ax(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ax(e,r)}}function Ax(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function u2(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function l2(e){if(Array.isArray(e))return e}function km(){return km=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},km.apply(this,arguments)}function f2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Px(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function c2(e,r,t){return r&&Px(e.prototype,r),t&&Px(e,t),e}function d2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Um(e,r)}function Um(e,r){return Um=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Um(e,r)}function h2(e){var r=y2();return function(){var s=tv(e),f;if(r){var d=tv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return p2(this,f)}}function p2(e,r){if(r&&(ev(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v2(e)}function v2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tv(e)}var zm=function(e){d2(t,e);var r=h2(t);function t(){return f2(this,t),r.apply(this,arguments)}return c2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.getEdgeStyle(),v=f.path,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeAnimationStyle(),R=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,ve=P.animationDuration,Le=P.animationIterationCount,De=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(hc,km({d:v},d,O,b?{strokeDasharray:R,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:ve,animationIterationCount:Le,animationTimingFunction:De,animationDirection:Fe}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Be.g)(hc,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=this.state,v=d.hover,b=f,O=b.path,P=b.isSelected,R=I1(O),F=i2(R,2),Y=F[0],ne=F[1],ve={start:Y,end:ne,hover:v,isSelected:P};return ve}}]),t}(dc);function rv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rv=function(t){return typeof t}:rv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function wx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function g2(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wx(Object(t),!0).forEach(function(s){m2(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function m2(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function b2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _x(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function E2(e,r,t){return r&&_x(e.prototype,r),t&&_x(e,t),e}function O2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Hm(e,r)}function Hm(e,r){return Hm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Hm(e,r)}function S2(e){var r=A2();return function(){var s=nv(e),f;if(r){var d=nv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return x2(this,f)}}function x2(e,r){if(r&&(rv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T2(e)}function T2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nv(e)}var P2=function(e){O2(t,e);var r=S2(t);function t(){return b2(this,t),r.apply(this,arguments)}return E2(t,[{key:"getArrowAttributes",value:function(){var f=this.props,d=f.arrowInfo,v=f.style,b=d.start,O=d.end,P={start:b,end:O,offset:v.offset,verticalLength:v.verticalLength,type:"end"},R=ec(P),F=R.leftX,Y=R.leftY,ne=R.rightX,ve=R.rightY;return g2({d:"M".concat(F," ").concat(Y," L").concat(O.x," ").concat(O.y," L").concat(ne," ").concat(ve," z")},v)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),d=f.d,v=f.strokeWidth,b=f.stroke,O=f.fill;return Object(Be.g)(hc,{d,fill:O,strokeWidth:v,stroke:b})}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-arrow"},this.getShape())}}]),t}(Be.a);function w2(e,r){return Ka(e,r)}var Nx=w2;function _2(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var N2=_2,M2=function(){return ro.a.Date.now()},Xm=M2,R2=/\s/;function I2(e){for(var r=e.length;r--&&R2.test(e.charAt(r)););return r}var D2=I2,C2=/^\s+/;function L2(e){return e&&e.slice(0,D2(e)+1).replace(C2,"")}var j2=L2,Mx=0/0,B2=/^[-+]0x[0-9a-f]+$/i,F2=/^0b[01]+$/i,G2=/^0o[0-7]+$/i,k2=parseInt;function U2(e){if(typeof e=="number")return e;if(Vs(e))return Mx;if(Kr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Kr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=j2(e);var t=F2.test(e);return t||G2.test(e)?k2(e.slice(2),t?2:8):B2.test(e)?Mx:+e}var Rx=U2,z2="Expected a function",H2=Math.max,X2=Math.min;function $2(e,r,t){var s,f,d,v,b,O,P=0,R=!1,F=!1,Y=!0;if(typeof e!="function")throw new TypeError(z2);r=Rx(r)||0,Kr(t)&&(R=!!t.leading,F="maxWait"in t,d=F?H2(Rx(t.maxWait)||0,r):d,Y="trailing"in t?!!t.trailing:Y);function ne(Pt){var er=s,_t=f;return s=f=void 0,P=Pt,v=e.apply(_t,er),v}function ve(Pt){return P=Pt,b=setTimeout(Fe,r),R?ne(Pt):v}function Le(Pt){var er=Pt-O,_t=Pt-P,gr=r-er;return F?X2(gr,d-_t):gr}function De(Pt){var er=Pt-O,_t=Pt-P;return O===void 0||er>=r||er<0||F&&_t>=d}function Fe(){var Pt=Xm();if(De(Pt))return Tt(Pt);b=setTimeout(Fe,Le(Pt))}function Tt(Pt){return b=void 0,Y&&s?ne(Pt):(s=f=void 0,v)}function It(){b!==void 0&&clearTimeout(b),P=0,s=O=f=b=void 0}function ut(){return b===void 0?v:Tt(Xm())}function Ft(){var Pt=Xm(),er=De(Pt);if(s=arguments,f=this,O=Pt,er){if(b===void 0)return ve(O);if(F)return clearTimeout(b),b=setTimeout(Fe,r),ne(O)}return b===void 0&&(b=setTimeout(Fe,r)),v}return Ft.cancel=It,Ft.flush=ut,Ft}var V2=$2,W2=o(166);function Y2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ix(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function K2(e,r,t){return r&&Ix(e.prototype,r),t&&Ix(e,t),e}function gs(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Z2=function(){function e(r){Y2(this,e),gs(this,"undos",[]),gs(this,"redos",[]),gs(this,"callbacks",[]),gs(this,"stopWatch",null),gs(this,"curData",null),gs(this,"maxSize",50),gs(this,"waitTime",100),gs(this,"eventCenter",void 0),this.eventCenter=r}return K2(e,[{key:"add",value:function(t){Nx(N2(this.undos),t)||(this.undos.push(t),Nx(this.curData,t)||(this.redos=[]),this.eventCenter.emit(ze.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var s=this.undos.pop();return this.curData=gn(s),s}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=gn(t),t}}},{key:"watch",value:function(t){var s=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=Object(W2.a)(t,V2(function(){var f=t.modelToHistoryData();f&&s.add(f)},this.waitTime))}}]),e}(),J2=Z2;function ov(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ov=function(t){return typeof t}:ov=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}var Dx,Cx,Lx;function Q2(e,r){return rj(e)||tj(e,r)||ej(e,r)||q2()}function q2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ej(e,r){if(e){if(typeof e=="string")return jx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return jx(e,r)}}function jx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function tj(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function rj(e){if(Array.isArray(e))return e}function Bx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Ol(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Bx(Object(t),!0).forEach(function(s){iu(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function nj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Fx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oj(e,r,t){return r&&Fx(e.prototype,r),t&&Fx(e,t),e}function ij(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&$m(e,r)}function $m(e,r){return $m=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},$m(e,r)}function aj(e){var r=uj();return function(){var s=iv(e),f;if(r){var d=iv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return sj(this,f)}}function sj(e,r){if(r&&(ov(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sl(e)}function Sl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iv(e)}function iu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Vm=ai(Dx=(Lx=Cx=function(e){ij(t,e);var r=aj(t);function t(){var s;return nj(this,t),s=r.call(this),iu(Sl(s),"ref",Object(Be.f)()),iu(Sl(s),"__prevText",{type:"",text:"",id:""}),iu(Sl(s),"keyupHandler",function(f){var d=s.props.graphModel.textEditElement;f.key==="Enter"&&f.altKey&&d.setElementState(0)}),iu(Sl(s),"inputHandler",function(f){var d=f.target,v=d.innerText,b=s.props.graphModel.textEditElement;s.__prevText={type:b.type,text:v.replace(/(\r\n)+$|(\n)+$/,""),id:b.id}}),iu(Sl(s),"keydownHandler",function(f){f.stopPropagation()}),s.state={style:{left:0,top:0}},s}return oj(t,[{key:"componentDidUpdate",value:function(){var f=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var d=this.__prevText,v=d.text,b=d.id;f.updateText(b,v),f.eventCenter.emit(ze.TEXT_UPDATE,Ol({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(f){if(window.getSelection!==void 0&&document.createRange!==void 0){var d=document.createRange();d.selectNodeContents(f),d.collapse(!1);var v=window.getSelection();v.removeAllRanges(),v.addRange(d)}}},{key:"render",value:function(){var f,d=this.props.graphModel.textEditElement,v=this.state.style;return d?Object(Be.g)("div",{contentEditable:!0,className:"lf-text-input",style:v,ref:this.ref,key:d.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(f=d.text)===null||f===void 0?void 0:f.value):null}}],[{key:"getDerivedStateFromProps",value:function(f){var d=f.graphModel,v=d.transformModel,b=d.theme,O=d.textEditElement,P;if(O){var R;if(!((R=O.text)!==null&&R!==void 0&&R.value))if(O.BaseType===Ve.EDGE){O=O;var F=O.text,Y=O.textPosition,ne=Y.x,ve=Y.y;F.x=ne,F.y=ve,O.setText(F)}else O=O;var Le={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(O.BaseType===Ve.EDGE){var De=b.edgeText,Fe=De.overflowMode,Tt=De.lineHeight,It=De.wrapPadding,ut=De.textWidth;ut&&Fe==="autoWrap"&&(P=Ol(Ol({},Le),{},{width:ut,minWidth:ut,lineHeight:Tt,padding:It}))}else if(O.BaseType===Ve.NODE){var Ft=b.nodeText,Pt=Ft.overflowMode,er=Ft.lineHeight,_t=Ft.wrapPadding,gr=Ft.textWidth,Cr=O,wn=Cr.width,Fn=Cr.modelType;(Fn!==Ze.TEXT_NODE&&Pt==="autoWrap"||Fn===Ze.TEXT_NODE&&gr)&&(P=Ol(Ol({},Le),{},{width:gr||wn,minWidth:gr||wn,lineHeight:er,padding:_t}))}var qn=O.text,Eo=qn.x,au=qn.y,xl=v.CanvasPointToHtmlPoint([Eo,au]),ms=Q2(xl,2),Tl=ms[0],Qm=ms[1];return{style:Ol({left:Tl,top:Qm},P)}}}}]),t}(Be.a),iu(Cx,"toolName","textEdit"),Lx))||Dx,lj=function(r){var t=r.x,s=r.y,f=r.width,d=r.height;return{x:t-f/2,y:s-d/2,x1:t+f/2,y1:s+d/2}},fj=function(r){var t=r.startPoint,s=r.endPoint,f=(t.x+s.x)/2,d=(t.y+s.y)/2,v=Math.abs(t.x-s.x)+10,b=Math.abs(t.y-s.y)+10;return{x:f-v/2,y:d-b/2,x1:f+v/2,y1:d+b/2}},cj=function(r){var t=r.points,s=al(t),f=tc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},dj=function(r){var t=r.path,s=gh(t),f=tc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},hj=function(r){if(r.modelType===Ze.LINE_EDGE)return fj(r);if(r.modelType===Ze.POLYLINE_EDGE)return cj(r);if(r.modelType===Ze.BEZIER_EDGE)return dj(r)};function av(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?av=function(t){return typeof t}:av=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}var Gx,kx,Ux;function zx(e,r){return yj(e)||vj(e,r)||Hx(e,r)||pj()}function pj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vj(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function yj(e){if(Array.isArray(e))return e}function gj(e){return Ej(e)||bj(e)||Hx(e)||mj()}function mj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hx(e,r){if(e){if(typeof e=="string")return Wm(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wm(e,r)}}function bj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ej(e){if(Array.isArray(e))return Wm(e)}function Wm(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function Oj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Xx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Sj(e,r,t){return r&&Xx(e.prototype,r),t&&Xx(e,t),e}function xj(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ym(e,r)}function Ym(e,r){return Ym=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ym(e,r)}function Tj(e){var r=Pj();return function(){var s=sv(e),f;if(r){var d=sv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return Aj(this,f)}}function Aj(e,r){if(r&&(av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pc(e)}function pc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sv(e)}function vc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Km=ai(Gx=(Ux=kx=function(e){xj(t,e);var r=Tj(t);function t(s){var f;Oj(this,t),f=r.call(this),vc(pc(f),"stepDrag",void 0),vc(pc(f),"handleMouseDown",function(O){f.stepDrag.handleMouseDown(O)}),vc(pc(f),"onDragging",function(O){var P=O.deltaX,R=O.deltaY,F=f.props.graphModel,Y=F.getSelectElements(!0);F.moveNodes(Y.nodes.map(function(ne){return ne.id}),P,R)}),vc(pc(f),"handleContextMenu",function(O){O.preventDefault();var P=f.props,R=P.graphModel,F=P.graphModel,Y=F.eventCenter,ne=F.selectElements,ve=R.getPointByClient({x:O.clientX,y:O.clientY}),Le={nodes:[],edges:[]},De=gj(ne.values());De.forEach(function(Fe){Fe.BaseType===Ve.NODE&&Le.nodes.push(Fe.getData()),Fe.BaseType===Ve.EDGE&&Le.edges.push(Fe.getData())}),Y.emit(ze.SELECTION_CONTEXTMENU,{data:Le,e:O,position:ve})});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new ha({onDragging:f.onDragging,step:v,eventType:"SELECTION",eventCenter:b}),f}return Sj(t,[{key:"render",value:function(){var f=this.props.graphModel,d=f.selectElements,v=f.transformModel;if(!(d.size<=1)){var b=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;d.forEach(function(De){var Fe={x:0,y:0,x1:0,y1:0};De.BaseType===Ve.NODE&&(Fe=lj(De)),De.BaseType===Ve.EDGE&&(Fe=hj(De)),b=Math.min(b,Fe.x),O=Math.min(O,Fe.y),P=Math.max(P,Fe.x1),R=Math.max(R,Fe.y1)});var F=v.CanvasPointToHtmlPoint([b,O]),Y=zx(F,2);b=Y[0],O=Y[1];var ne=v.CanvasPointToHtmlPoint([P,R]),ve=zx(ne,2);P=ve[0],R=ve[1];var Le={left:"".concat(b-10,"px"),top:"".concat(O-10,"px"),width:"".concat(P-b+20,"px"),height:"".concat(R-O+20,"px")};return Object(Be.g)("div",{className:"lf-multiple-select",style:Le,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}]),t}(Be.a),vc(kx,"toolName","multipleSelect"),Ux))||Gx;function wj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $x(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _j(e,r,t){return r&&$x(e.prototype,r),t&&$x(e,t),e}function uv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Nj=function(){function e(r){wj(this,e),uv(this,"tools",void 0),uv(this,"components",void 0),uv(this,"toolMap",new Map),uv(this,"instance",void 0),this.instance=r,this.isDisabledTool(Vm.toolName)||this.registerTool(Vm.toolName,Vm),this.isDisabledTool(Km.toolName)||this.registerTool(Km.toolName,Km);var t=r.graphModel,s=t.eventCenter;s.on("".concat(ze.GRAPH_TRANSFORM,",").concat(ze.NODE_CLICK,",").concat(ze.BLANK_CLICK," "),function(){var f=t.textEditElement,d=t.editConfigModel,v=d.edgeTextEdit,b=d.nodeTextEdit;(v||b)&&f&&t.textEditElement.setElementState(ct.DEFAULT)})}return _j(e,[{key:"isDisabledTool",value:function(t){return this.instance.options.disabledTools.indexOf(t)!==-1}},{key:"registerTool",value:function(t,s){this.toolMap.set(t,s)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}]),e}(),Mj=o(167),Rj=o.n(Mj);function Ij(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Dj(e,r,t){return r&&Vx(e.prototype,r),t&&Vx(e,t),e}function Zm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Wx=function(){function e(r){Ij(this,e),Zm(this,"mousetrap",void 0),Zm(this,"options",void 0),Zm(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var t=r.lf;this.target=t.container,this.mousetrap=new Rj.a,r.keyboard.enabled&&this.enable(!0)}return Dj(e,[{key:"initShortcuts",value:function(){var t=this,s=this.options.keyboard.shortcuts;if(s)if(g(s))s.forEach(function(b){var O=b.keys,P=b.callback,R=b.action;return t.on(O,P,R)});else{var f=s.keys,d=s.callback,v=s.action;this.on(f,d,v)}}},{key:"on",value:function(t,s,f){this.mousetrap.bind(this.getKeys(t),s,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(t,s){this.mousetrap.unbind(this.getKeys(t),s)}},{key:"enable",value:function(t){(this.disabled||t)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(t){var s=this;return(Array.isArray(t)?t:[t]).map(function(f){return s.formatKey(f)})}},{key:"formatKey",value:function(t){var s=t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command");return s}}]),e}(),Cj=Wx,ji=null;function Yx(e,r){return e.x+=r,e.y+=r,e.text&&(e.text.x+=r,e.text.y+=r),e}function Kx(e,r){return e.startPoint&&(e.startPoint.x+=r,e.startPoint.y+=r),e.endPoint&&(e.endPoint.x+=r,e.endPoint.y+=r),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(t){t.x+=r,t.y+=r}),e.text&&(e.text.x+=r,e.text.y+=r),e}var lv=40;function Lj(e,r){var t=e.keyboard,s=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(s.enabled&&!r.textEditElement){var f=e.options.guards,d=r.getSelectElements(!1),v=f&&f.beforeClone?f.beforeClone(d):!0;return v?(ji=d,ji.nodes.forEach(function(b){return Yx(b,lv)}),ji.edges.forEach(function(b){return Kx(b,lv)}),!1):(ji=null,!1)}}),t.on(["cmd + v","ctrl + v"],function(){if(s.enabled&&!r.textEditElement){if(ji&&(ji.nodes||ji.edges)){e.clearSelectElements();var f=e.addElements(ji);if(!f)return;f.nodes.forEach(function(d){return e.selectElementById(d.id,!0)}),f.edges.forEach(function(d){return e.selectElementById(d.id,!0)}),ji.nodes.forEach(function(d){return Yx(d,lv)}),ji.edges.forEach(function(d){return Kx(d,lv)})}return!1}}),t.on(["cmd + z","ctrl + z"],function(){if(s.enabled&&!r.textEditElement)return e.undo(),!1}),t.on(["cmd + y","ctrl + y"],function(){if(s.enabled&&!r.textEditElement)return e.redo(),!1}),t.on(["backspace"],function(){if(s.enabled&&!r.textEditElement){var f=r.getSelectElements(!0);return e.clearSelectElements(),f.edges.forEach(function(d){return e.deleteEdge(d.id)}),f.nodes.forEach(function(d){return e.deleteNode(d.id)}),!1}})}function jj(e,r){e.on("node:mousemove",function(t){var s=t.data;r.setNodeSnapLine(s)}),e.on("node:mouseup",function(){r.clearSnapline()})}function fv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fv=function(t){return typeof t}:fv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function Zx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function yc(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Zx(Object(t),!0).forEach(function(s){En(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Bj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Jx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Fj(e,r,t){return r&&Jx(e.prototype,r),t&&Jx(e,t),e}function En(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Jm=function(){function e(r){var t=this;Bj(this,e),En(this,"container",void 0),En(this,"width",void 0),En(this,"height",void 0),En(this,"graphModel",void 0),En(this,"history",void 0),En(this,"viewMap",new Map),En(this,"tool",void 0),En(this,"keyboard",void 0),En(this,"dnd",void 0),En(this,"options",void 0),En(this,"snaplineModel",void 0),En(this,"components",[]),En(this,"plugins",void 0),En(this,"extension",{}),En(this,"adapterIn",void 0),En(this,"adapterOut",void 0),En(this,"getView",function(s){return t.viewMap.get(s)}),r=OO(r),this.options=r,this.container=r.container,this.plugins=r.plugins,this.graphModel=new K1(yc({},r)),this.tool=new Nj(this),this.history=new J2(this.graphModel.eventCenter),this.dnd=new CR({lf:this}),this.keyboard=new Cj({lf:this,keyboard:r.keyboard}),r.snapline!==!1&&(this.snaplineModel=new US(this.graphModel),jj(this.graphModel.eventCenter,this.snaplineModel)),Lj(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(r.disabledPlugins)}return Fj(e,[{key:"register",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(typeof t!="string"){this.registerElement(t);return}var d={BaseEdge:dc,BaseEdgeModel:dg,BaseNode:ma,BaseNodeModel:ya,RectNode:fm,RectNodeModel:Qg,CircleNode:hm,CircleNodeModel:Ug,PolygonNode:ym,PolygonNodeModel:Kg,TextNode:Tm,TextNodeModel:em,LineEdge:jm,LineEdgeModel:vg,DiamondNode:bm,DiamondNodeModel:Xg,PolylineEdge:Gm,PolylineEdgeModel:mg,BezierEdge:zm,BezierEdgeModel:Fg,EllipseNode:Sm,EllipseNodeModel:Vg,HtmlNode:wm,HtmlNodeModel:rm,h:Be.g,type:t};this.viewMap.forEach(function(R){var F=R.extendKey;F&&(d[F]=R)}),this.graphModel.modelMap.forEach(function(R){var F=R.extendKey;F&&(d[F]=R)});var v=s(d),b=v.view,O=v.model,P=b;f&&!P.isObervered&&(P.isObervered=!0,P=kr(P)),this.setView(t,P),this.graphModel.setModel(t,O)}},{key:"registerElement",value:function(t){var s=t.view;t.isObserverView!==!1&&!s.isObervered&&(s.isObervered=!0,s=kr(s)),this.setView(t.type,s),this.graphModel.setModel(t.type,t.model)}},{key:"batchRegister",value:function(){var t=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(f){t.registerElement(f)})}},{key:"defaultRegister",value:function(){this.registerElement({view:fm,model:Qg,type:"rect"}),this.registerElement({type:"circle",view:hm,model:Ug}),this.registerElement({type:"polygon",view:ym,model:Kg}),this.registerElement({type:"line",view:jm,model:vg}),this.registerElement({type:"polyline",view:Gm,model:mg}),this.registerElement({type:"bezier",view:zm,model:Fg}),this.registerElement({type:"text",view:Tm,model:em}),this.registerElement({type:"ellipse",view:Sm,model:Vg}),this.registerElement({type:"diamond",view:bm,model:Xg}),this.registerElement({type:"html",view:wm,model:rm})}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.graphModel.selectElementById(t,s),!s&&f&&this.graphModel.toFront(t)}},{key:"focusOn",value:function(t){var s=this.graphModel.transformModel,f=t.coordinate,d=t.id;if(!f){var v=this.getNodeModelById(d);v&&(f=v.getData());var b=this.getEdgeModelById(d);b&&(f=b.textPosition)}var O=f,P=O.x,R=O.y;s.focusOn(P,R,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(t){this.graphModel.setTheme(t)}},{key:"resize",value:function(t,s){this.graphModel.resize(t,s),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(t){this.graphModel.setDefaultEdgeType(t)}},{key:"updateText",value:function(t,s){this.graphModel.updateText(t,s)}},{key:"deleteElement",value:function(t){var s,f,d,v=this.getModelById(t);if(!v)return!1;var b=(s={},En(s,Ve.NODE,this.deleteNode),En(s,Ve.EDGE,this.deleteEdge),s),O=v.BaseType;return(f=(d=b[O])===null||d===void 0?void 0:d.call(this,t))!==null&&f!==void 0?f:!1}},{key:"getModelById",value:function(t){return this.graphModel.getElement(t)}},{key:"getDataById",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getData()}},{key:"changeNodeType",value:function(t,s){this.graphModel.changeNodeType(t,s)}},{key:"changeEdgeType",value:function(t,s){this.graphModel.changeEdgeType(t,s)}},{key:"getNodeEdges",value:function(t){return this.graphModel.getNodeEdges(t)}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD;return this.graphModel.addNode(t,s)}},{key:"deleteNode",value:function(t){var s=this.graphModel.getNodeModelById(t);if(!s)return!1;var f=s.getData(),d=this.options.guards,v=d&&d.beforeDelete?d.beforeDelete(f):!0;return v&&this.graphModel.deleteNode(t),v}},{key:"cloneNode",value:function(t){var s=this.graphModel.getNodeModelById(t),f=s.getData(),d=this.options.guards,v=d&&d.beforeClone?d.beforeClone(f):!0;if(v)return this.graphModel.cloneNode(t)}},{key:"changeNodeId",value:function(t,s){return this.graphModel.changeNodeId(t,s)}},{key:"getNodeModelById",value:function(t){return this.graphModel.getNodeModelById(t)}},{key:"getNodeDataById",value:function(t){return this.graphModel.getNodeModelById(t).getData()}},{key:"addEdge",value:function(t){return this.graphModel.addEdge(t)}},{key:"deleteEdge",value:function(t){var s=this.options.guards,f=this.graphModel.edgesMap[t];if(!f)return!1;var d=f.model.getData(),v=s&&s.beforeDelete?s.beforeDelete(d):!0;return v&&this.graphModel.deleteEdgeById(t),v}},{key:"deleteEdgeByNodeId",value:function(t){var s=t.sourceNodeId,f=t.targetNodeId;s&&f?this.graphModel.deleteEdgeBySourceAndTarget(s,f):s?this.graphModel.deleteEdgeBySource(s):f&&this.graphModel.deleteEdgeByTarget(f)}},{key:"changeEdgeId",value:function(t,s){return this.graphModel.changeEdgeId(t,s)}},{key:"getEdgeModelById",value:function(t){var s,f=this.graphModel.edgesMap;return(s=f[t])===null||s===void 0?void 0:s.model}},{key:"getEdgeModels",value:function(t){var s=this.graphModel.edges,f=t.sourceNodeId,d=t.targetNodeId;if(f&&d){var v=[];return s.forEach(function(P){P.sourceNodeId===f&&P.targetNodeId===d&&v.push(P)}),v}if(f){var b=[];return s.forEach(function(P){P.sourceNodeId===f&&b.push(P)}),b}if(d){var O=[];return s.forEach(function(P){P.targetNodeId===d&&O.push(P)}),O}return[]}},{key:"getEdgeDataById",value:function(t){var s;return(s=this.getEdgeModelById(t))===null||s===void 0?void 0:s.getData()}},{key:"getNodeIncomingEdge",value:function(t){return this.graphModel.getNodeIncomingEdge(t)}},{key:"getNodeOutgoingEdge",value:function(t){return this.graphModel.getNodeOutgoingEdge(t)}},{key:"getNodeIncomingNode",value:function(t){return this.graphModel.getNodeIncomingNode(t)}},{key:"getNodeOutgoingNode",value:function(t){return this.graphModel.getNodeOutgoingNode(t)}},{key:"editText",value:function(t){this.graphModel.editText(t)}},{key:"setProperties",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.setProperties(Zn(s))}},{key:"deleteProperty",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.deleteProperty(s)}},{key:"getProperties",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getProperties()}},{key:"toFront",value:function(t){this.graphModel.toFront(t)}},{key:"setElementZIndex",value:function(t,s){return this.graphModel.setElementZIndex(t,s)}},{key:"addElements",value:function(t){for(var s=this,f=t.nodes,d=t.edges,v={},b={nodes:[],edges:[]},O=0;O<f.length;O++){var P=f[O],R=P.id,F=this.addNode(P);if(!F)return;R&&(v[R]=F.id),b.nodes.push(F)}return d.forEach(function(Y){var ne=Y.sourceNodeId,ve=Y.targetNodeId;v[ne]&&(ne=v[ne]),v[ve]&&(ve=v[ve]);var Le=s.graphModel.addEdge(yc(yc({},Y),{},{sourceNodeId:ne,targetNodeId:ve}));b.edges.push(Le)}),b}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return this.graphModel.getAreaElement(t,s,f,d,v).map(function(b){return b.getData()})}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.graphModel.getSelectElements(t)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var t=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(t):t}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(t){this.graphModel.editConfigModel.updateEditConfig(t)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(t,s){return this.graphModel.getPointByClient({x:t,y:s})}},{key:"undo",value:function(){if(this.history.undoAble()){var t=Zn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"redo",value:function(){if(this.history.redoAble()){var t=Zn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"zoom",value:function(t,s){var f=this.graphModel.transformModel;return f.zoom(t,s)}},{key:"resetZoom",value:function(){var t=this.graphModel.transformModel;t.resetZoom()}},{key:"setZoomMiniSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMiniSize(t)}},{key:"setZoomMaxSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMaxSize(t)}},{key:"getTransform",value:function(){var t=this.graphModel.transformModel,s=t.SCALE_X,f=t.SCALE_Y,d=t.TRANSLATE_X,v=t.TRANSLATE_Y;return{SCALE_X:s,SCALE_Y:f,TRANSLATE_X:d,TRANSLATE_Y:v}}},{key:"translate",value:function(t,s){var f=this.graphModel.transformModel;f.translate(t,s)}},{key:"resetTranslate",value:function(){var t=this.graphModel.transformModel,s=t.TRANSLATE_X,f=t.TRANSLATE_Y;this.translate(-s,-f)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(t,s){s===void 0&&(s=t),this.graphModel.fitView(t,s)}},{key:"openEdgeAnimation",value:function(t){this.graphModel.openEdgeAnimation(t)}},{key:"closeEdgeAnimation",value:function(t){this.graphModel.closeEdgeAnimation(t)}},{key:"on",value:function(t,s){this.graphModel.eventCenter.on(t,s)}},{key:"off",value:function(t,s){this.graphModel.eventCenter.off(t,s)}},{key:"once",value:function(t,s){this.graphModel.eventCenter.once(t,s)}},{key:"emit",value:function(t,s){this.graphModel.eventCenter.emit(t,s)}},{key:"installPlugins",value:function(){var t,s=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=(t=this.plugins)!==null&&t!==void 0?t:e.extensions;d.forEach(function(v){var b=v.pluginName||v.name;f.indexOf(b)===-1&&s.installPlugin(v)})}},{key:"installPlugin",value:function(t){if(fv(t)==="object"){var s=t.install,f=t.render;s&&s.call(t,this,e),f&&this.components.push(f.bind(t)),this.extension[t.pluginName]=t;return}var d=t,v=new d({lf:this,LogicFlow:e,options:this.options.pluginsOptions});v.render&&this.components.push(v.render.bind(v)),this.extension[d.pluginName]=v}},{key:"updateAttributes",value:function(t,s){this.graphModel.updateAttributes(t,s)}},{key:"createFakerNode",value:function(t){var s=this.graphModel.modelMap.get(t.type);if(!s){console.warn("不存在为".concat(t.type,"类型的节点"));return}var f=new s(yc(yc({},t),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(f),f}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(t){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(t)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(t,s){this.viewMap.set(t,s)}},{key:"renderRawData",value:function(t){this.graphModel.graphDataToModel(Zn(t)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Be.j)(Object(Be.g)(RR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ze.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)}}],[{key:"use",value:function(t){var s=t.pluginName;s||(console.warn("请给插件".concat(t.name||t.constructor.name,"指定pluginName!")),s=t.name);var f=this.extensions.get(s);f&&f.destroy&&f.destroy(),this.extensions.set(s,t)}}]),e}();En(Jm,"extensions",new Map);function ai(e){return kr(e)}u.default=Jm}])})})(fB,$t);const XA=iB($t);var $A=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),cB=function(n){$A(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedTargetRules=function(){var i=n.prototype.getConnectedTargetRules.call(this),u={message:"起始节点不能作为边的终点",validate:function(){return!1}};return i.push(u),i},a.extendKey="StartEventModel",a}($t.CircleNodeModel),dB=function(n){$A(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="StartEventNode",a}($t.CircleNode),VA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),xv=globalThis&&globalThis.__assign||function(){return xv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},xv.apply(this,arguments)},hB=function(n){VA(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedSourceRules=function(){var i=n.prototype.getConnectedSourceRules.call(this),u={message:"结束节点不能作为边的起点",validate:function(){return!1}};return i.push(u),i},a.extendKey="EndEventModel",a}($t.CircleNodeModel),pB=function(n){VA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},a.prototype.getShape=function(){var i=this.props.model,u=i.getNodeStyle(),o=i.x,l=i.y,c=i.r,h=n.prototype.getShape.call(this);return $t.h("g",{},h,$t.h("circle",xv(xv({},u),{cx:o,cy:l,r:c-5})))},a.extendKey="EndEventView",a}($t.CircleNode),WA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Nc=globalThis&&globalThis.__assign||function(){return Nc=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Nc.apply(this,arguments)},vB=function(n){WA(a,n);function a(i,u){var o=this;return i.id||(i.id="Gateway_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return a.extendKey="ExclusiveGatewayModel",a}($t.PolygonNodeModel),yB=function(n){WA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.points,p=i.getNodeStyle();return $t.h("g",{transform:"matrix(1 0 0 1 "+(u-l/2)+" "+(o-c/2)+")"},$t.h("polygon",Nc(Nc({},p),{x:u,y:o,points:h})),$t.h("path",Nc({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},p)))},a.extendKey="ExclusiveGatewayNode",a}($t.PolygonNode),YA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Tv=globalThis&&globalThis.__assign||function(){return Tv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Tv.apply(this,arguments)},gB=function(n){YA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="UserTaskModel",a}($t.RectNodeModel),mB=function(n){YA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",Tv(Tv({},p),{x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c})),this.getLabelShape()])},a.extendKey="UserTaskNode",a}($t.RectNode),KA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),pb=globalThis&&globalThis.__assign||function(){return pb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},pb.apply(this,arguments)},bB=function(n){KA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="ServiceTaskModel",a}($t.RectNodeModel),EB=function(n){KA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",pb({x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c},p)),this.getLabelShape()])},a.extendKey="ServiceTaskNode",a}($t.RectNode),ZA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),JA=function(n){ZA(a,n);function a(i,u){var o=this;return i.id||(i.id="Flow_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="SequenceFlowModel",a}($t.PolylineEdgeModel),QA=function(n){ZA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="SequenceFlowEdge",a}($t.PolylineEdge),rT={width:40,height:40},nT={width:40,height:40},oT={width:40,height:40},iT={width:100,height:80},aT={width:100,height:80},OB=new $j([32,32,1]);function sT(){return OB.next()}var So=function(){};So.ObjTree=function(){return this};So.ObjTree.VERSION="0.23";So.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;So.ObjTree.prototype.attr_prefix="-";So.ObjTree.prototype.parseXML=function(n){var a;if(window.DOMParser){var i=new DOMParser,u=i.parseFromString(n,"application/xml");if(!u)return;a=u.documentElement}else window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(n),a=i.documentElement);if(a)return this.parseDOM(a)};So.ObjTree.prototype.parseHTTP=function(n,a,i){var u={};for(var o in a)u[o]=a[o];if(u.method||(typeof u.postBody>"u"&&typeof u.postbody>"u"&&typeof u.parameters>"u"?u.method="get":u.method="post"),i){u.asynchronous=!0;var l=this,c=i,h=u.onComplete;u.onComplete=function(y){var S;y&&y.responseXML&&y.responseXML.documentElement&&(S=l.parseDOM(y.responseXML.documentElement)),c(S,y),h&&h(y)}}else u.asynchronous=!1;var p;if(typeof HTTP<"u"&&HTTP.Request){u.uri=n;var m=new HTTP.Request(u);m&&(p=m.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var m=new Ajax.Request(n,u);m&&(p=m.transport)}if(i)return p;if(p&&p.responseXML&&p.responseXML.documentElement)return this.parseDOM(p.responseXML.documentElement)};So.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var a=0;a<this.force_array.length;a++)this.__force_array[this.force_array[a]]=1;var i=this.parseElement(n);if(this.__force_array[n.nodeName]&&(i=[i]),n.nodeType!=11){var u={};u[n.nodeName]=i,i=u}return i}};So.ObjTree.prototype.parseElement=function(n){if(n.nodeType!=7){if(n.nodeType==3||n.nodeType==4){var a=n.nodeValue.match(/[^\x00-\x20]/);return a==null?void 0:n.nodeValue}var i,u={};if(n.attributes&&n.attributes.length){i={};for(var o=0;o<n.attributes.length;o++){var l=n.attributes[o].nodeName;if(typeof l=="string"){var c=n.attributes[o].nodeValue;c&&(l=this.attr_prefix+l,typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}if(n.childNodes&&n.childNodes.length){var h=!0;i&&(h=!1);for(var o=0;o<n.childNodes.length&&h;o++){var p=n.childNodes[o].nodeType;p==3||p==4||(h=!1)}if(h){i||(i="");for(var o=0;o<n.childNodes.length;o++)i+=n.childNodes[o].nodeValue}else{i||(i={});for(var o=0;o<n.childNodes.length;o++){var l=n.childNodes[o].nodeName;if(typeof l=="string"){var c=this.parseElement(n.childNodes[o]);c&&(typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}}return i}};So.ObjTree.prototype.addNode=function(n,a,i,u){this.__force_array[a]?(i==1&&(n[a]=[]),n[a][n[a].length]=u):i==1?n[a]=u:i==2?n[a]=[n[a],u]:n[a][n[a].length]=u};So.ObjTree.prototype.writeXML=function(n){var a=this.hash_to_xml(null,n);return this.xmlDecl+a};So.ObjTree.prototype.hash_to_xml=function(n,a){var i=[],u=[];for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o.charAt(0)!=this.attr_prefix?typeof l>"u"||l==null?i[i.length]="<"+o+" />":typeof l=="object"&&l.constructor==Array?i[i.length]=this.array_to_xml(o,l):typeof l=="object"?i[i.length]=this.hash_to_xml(o,l):i[i.length]=this.scalar_to_xml(o,l):u[u.length]=" "+o.substring(1)+'="'+this.xml_escape(l)+'"'}var c=u.join(""),h=i.join("");return typeof n>"u"||n==null||(i.length>0?h.match(/\n/)?h="<"+n+c+`>
`+h+"</"+n+`>
`:h="<"+n+c+">"+h+"</"+n+`>
`:h="<"+n+c+` />
`),h};So.ObjTree.prototype.array_to_xml=function(n,a){for(var i=[],u=0;u<a.length;u++){var o=a[u];typeof o>"u"||o==null?i[i.length]="<"+n+" />":typeof o=="object"&&o.constructor==Array?i[i.length]=this.array_to_xml(n,o):typeof o=="object"?i[i.length]=this.hash_to_xml(n,o):i[i.length]=this.scalar_to_xml(n,o)}return i.join("")};So.ObjTree.prototype.scalar_to_xml=function(n,a){return n=="#text"?this.xml_escape(a):"<"+n+">"+this.xml_escape(a)+"</"+n+`>
`};So.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Fv=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},ki;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow"})(ki||(ki={}));var qA=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"];function vb(n){var a={};return Object.entries(n).forEach(function(i){var u=Fv(i,2),o=u[0],l=u[1];typeof l!="object"?o.indexOf("-")===0?a[o]=l:a["-"+o]=l:a[o]=vb(l)}),a}function Lb(n){var a={};return Object.entries(n).forEach(function(i){var u=Fv(i,2),o=u[0],l=u[1];typeof l=="string"?o.indexOf("-")===0?a[o.substr(1)]=l:a[o]=l:typeof l=="object"?a[o]=Lb(l):a[o]=l}),a}function SB(n,a){var i=new Map;a.nodes.forEach(function(o){var l,c={"-id":o.id};if(!((l=o.text)===null||l===void 0)&&l.value&&(c["-name"]=o.text.value),o.properties){var h=vb(o.properties);Object.assign(c,h)}i.set(o.id,c),n[o.type]?Array.isArray(n[o.type])?n[o.type].push(c):n[o.type]=[n[o.type],c]:n[o.type]=c});var u=a.edges.map(function(o){var l,c,h=i.get(o.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(o.id):h["bpmn:incoming"]=[h["bpmn:incoming"],o.id]:h["bpmn:incoming"]=o.id;var p=i.get(o.sourceNodeId);p["bpmn:outgoing"]?Array.isArray(p["bpmn:outgoing"])?p["bpmn:outgoing"].push(o.id):p["bpmn:outgoing"]=[p["bpmn:outgoing"],o.id]:p["bpmn:outgoing"]=o.id;var m={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((l=o.text)===null||l===void 0)&&l.value&&(m["-name"]=(c=o.text)===null||c===void 0?void 0:c.value),o.properties){var y=vb(o.properties);Object.assign(m,y)}return m});n[ki.FLOW]=u}function xB(n,a){n["bpmndi:BPMNEdge"]=a.edges.map(function(i){var u,o=i.id,l=i.pointsList.map(function(h){var p=h.x,m=h.y;return{"-x":p,"-y":m}}),c={"-id":o+"_di","-bpmnElement":o,"di:waypoint":l};return!((u=i.text)===null||u===void 0)&&u.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),c}),n["bpmndi:BPMNShape"]=a.nodes.map(function(i){var u,o=i.id,l=100,c=80,h=i.x,p=i.y,m=hu.shapeConfigMap.get(i.type);m&&(l=m.width,c=m.height),h-=l/2,p-=c/2;var y={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":h,"-y":p,"-width":l,"-height":c}};return!((u=i.text)===null||u===void 0)&&u.value&&(y["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),y})}function TB(n){var a=[],i=[],u=n["bpmn:definitions"];if(u){var o=u["bpmn:process"];Object.keys(o).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=o[l];if(l===ki.FLOW){var h=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];i=PB(c,h)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];a=a.concat(AB(c,p,l))}}})}return{nodes:a,edges:i}}function AB(n,a,i){var u=[];if(Array.isArray(n))n.forEach(function(c){var h;Array.isArray(a)?h=a.find(function(m){return m["-bpmnElement"]===c["-id"]}):h=a;var p=uT(h,i,c);u.push(p)});else{var o=void 0;Array.isArray(a)?o=a.find(function(c){return c["-bpmnElement"]===n["-id"]}):o=a;var l=uT(o,i,n);u.push(l)}return u}function uT(n,a,i){var u=Number(n["dc:Bounds"]["-x"]),o=Number(n["dc:Bounds"]["-y"]),l=i["-name"],c=hu.shapeConfigMap.get(a);c&&(u+=c.width/2,o+=c.height/2);var h;Object.entries(i).forEach(function(S){var x=Fv(S,2),T=x[0],_=x[1];qA.indexOf(T)===-1&&(h||(h={}),h[T]=_)}),h&&(h=Lb(h));var p;if(l&&(p={x:u,y:o,value:l},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var m=n["bpmndi:BPMNLabel"]["dc:Bounds"];p.x=Number(m["-x"])+Number(m["-width"])/2,p.y=Number(m["-y"])+Number(m["-height"])/2}var y={id:n["-bpmnElement"],type:a,x:u,y:o,properties:h};return p&&(y.text=p),y}function PB(n,a){var i=[];if(Array.isArray(n))n.forEach(function(o){var l;Array.isArray(a)?l=a.find(function(c){return c["-bpmnElement"]===o["-id"]}):l=a,i.push(lT(l,o))});else{var u=void 0;Array.isArray(a)?u=a.find(function(o){return o["-bpmnElement"]===n["-id"]}):u=a,i.push(lT(u,n))}return i}function lT(n,a){var i,u=a["-name"];if(u){var o=n["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;u.split(`
`).forEach(function(p){l<p.length&&(l=p.length)}),i={value:u,x:Number(o["-x"])+l*10/2,y:Number(o["-y"])+7}}var c;Object.entries(a).forEach(function(p){var m=Fv(p,2),y=m[0],S=m[1];qA.indexOf(y)===-1&&(c||(c={}),c[y]=S)}),c&&(c=Lb(c));var h={id:a["-id"],type:ki.FLOW,pointsList:n["di:waypoint"].map(function(p){return{x:Number(p["-x"]),y:Number(p["-y"])}}),sourceNodeId:a["-sourceRef"],targetNodeId:a["-targetRef"],properties:c};return i&&(h.text=i),h}var hu={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,a){this.shapeConfigMap.set(n,a)},adapterOut:function(n){var a={"-id":"Process_"+sT(),"-isExecutable":"false"};SB(a,n);var i={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};xB(i,n);var u={"bpmn:definitions":{"-id":"Definitions_"+sT(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0","bpmn:process":a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":i}}};return u},adapterIn:function(n){if(n)return TB(n)}};hu.shapeConfigMap.set(ki.START,{width:rT.width,height:rT.height});hu.shapeConfigMap.set(ki.END,{width:nT.width,height:nT.height});hu.shapeConfigMap.set(ki.GATEWAY,{width:oT.width,height:oT.height});hu.shapeConfigMap.set(ki.SYSTEM,{width:iT.width,height:iT.height});hu.shapeConfigMap.set(ki.USER,{width:aT.width,height:aT.height});var fT=globalThis&&globalThis.__assign||function(){return fT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},fT.apply(this,arguments)};globalThis&&globalThis.__read;var Gl;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(Gl||(Gl={}));var wB=function(n,a,i,u){u===void 0&&(u=0);var o=NB(n,a,i);return o<=u};function cT(n){return n*n}function qm(n,a){return cT(n.x-a.x)+cT(n.y-a.y)}var _B=function(n,a,i){var u=qm(a,i);if(u===0)return qm(n,a);var o=((n.x-a.x)*(i.x-a.x)+(n.y-a.y)*(i.y-a.y))/u;return o=Math.max(0,Math.min(1,o)),qm(n,{x:a.x+o*(i.x-a.x),y:a.y+o*(i.y-a.y)})},NB=function(n,a,i){return Math.sqrt(_B(n,a,i))},MB=function(n){var a=n.x,i=n.y,u=n.width,o=n.height,l={minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2,x:a,y:i,width:u,height:o,centerX:a,centerY:i};return l},RB=function(n,a){var i;return n.x===a.x?i=Gl.VERTICAL:n.y===a.y&&(i=Gl.HORIZONTAL),i},IB=function(n,a,i){var u=MB(n),o=RB(a,i),l=Math.max(a.x,i.x),c=Math.min(a.x,i.x),h=Math.max(a.y,i.y),p=Math.min(a.y,i.y),m=n.x,y=n.y,S=n.width,x=n.height;if(o===Gl.HORIZONTAL){if(l>=u.maxX&&c<=u.minX)return{startCrossPoint:{x:a.x>i.x?m+S/2:m-S/2,y:a.y},endCrossPoint:{x:a.x>i.x?m-S/2:m+S/2,y:a.y}}}else if(o===Gl.VERTICAL&&h>=u.maxY&&p<=u.minY)return{startCrossPoint:{x:a.x,y:a.y>i.y?y+x/2:y-x/2},endCrossPoint:{x:a.x,y:a.y>i.y?y-x/2:y+x/2}}},DB=function(n,a,i){i===void 0&&(i=0);for(var u=n.x,o=n.y,l=a.pointsList,c=0;c<l.length-1;c++)if(wB({x:u,y:o},l[c],l[c+1],i)){var h=IB(n,l[c],l[c+1]);if(h)return{crossIndex:c+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},CB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},dT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(CB(arguments[a]));return n},LB=function(){function n(a){var i=a.lf;this._lf=i,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return n.prototype.eventHandler=function(){var a=this;this.dndAdd&&this._lf.on("node:dnd-add",function(i){var u=i.data;a.insetNode(u)}),this.dropAdd&&this._lf.on("node:drop",function(i){for(var u=i.data,o=a._lf.graphModel.edges,l=u.id,c=!0,h=0;h<o.length;h++)if(o[h].sourceNodeId===l||o[h].targetNodeId===l){c=!1;break}c&&a.insetNode(u)})},n.prototype.insetNode=function(a){for(var i=this._lf.graphModel.edges,u=this._lf.getNodeModelById(a.id),o=0;o<i.length;o++){var l=DB(u,i[o],this.deviation),c=l.crossIndex,h=l.crossPoints;if(c>=0){var p=i[o],m=p.sourceNodeId,y=p.targetNodeId,S=p.id,x=p.type,T=p.pointsList,_=dv(T[0]),N=dv(h.startCrossPoint);this._lf.addEdge({type:x,sourceNodeId:m,targetNodeId:a.id,startPoint:_,endPoint:N,pointsList:dT(T.slice(0,c),[h.startCrossPoint])}),this._lf.addEdge({type:x,sourceNodeId:a.id,targetNodeId:y,startPoint:dv(h.endCrossPoint),endPoint:dv(T[T.length-1]),pointsList:dT([h.endCrossPoint],T.slice(c))}),this._lf.deleteEdge(S);break}}},n.pluginName="insertNodeInPolyline",n}(),jB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},BB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(jB(arguments[a]));return n},FB=function(){function n(a){var i=this,u=a.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){i.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){i.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){i.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){i.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){i.lf.redo()}}],this.lf=u}return n.prototype.render=function(a,i){this.destroy();var u=this.getControlTool();this.toolEl=u,i.appendChild(u),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},n.prototype.addItem=function(a){this.controlItems.push(a)},n.prototype.removeItem=function(a){var i=this.controlItems.findIndex(function(u){return u.key===a});return this.controlItems.splice(i,1)[0]},n.prototype.getControlTool=function(){var a=this,i="lf-control-item",u="lf-control-item disabled",o=document.createElement("div"),l=[];return o.className="lf-control",this.controlItems.forEach(function(c){var h=document.createElement("div"),p=document.createElement("i"),m=document.createElement("span");switch(h.className=u,c.onClick&&(h.onclick=c.onClick.bind(null,a.lf)),c.onMouseEnter&&(h.onmouseenter=c.onMouseEnter.bind(null,a.lf)),c.onMouseLeave&&(h.onmouseleave=c.onMouseLeave.bind(null,a.lf)),p.className=c.iconClass,m.className="lf-control-text",m.title=c.title,m.innerText=c.text,h.append(p,m),c.text){case"上一步":a.lf.on("history:change",function(y){var S=y.data.undoAble;h.className=S?i:u});break;case"下一步":a.lf.on("history:change",function(y){var S=y.data.redoAble;h.className=S?i:u});break;default:h.className=i;break}l.push(h)}),o.append.apply(o,BB(l)),o},n.pluginName="control",n}(),GB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},kB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(GB(arguments[a]));return n},gc="lf:defaultNodeMenu",mc="lf:defaultEdgeMenu",bc="lf:defaultGraphMenu",hT="lf:defaultSelectionMenu",UB=function(){function n(a){var i=this,u=a.lf;this.__menuDOM=document.createElement("ul"),this.lf=u,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){i.setMenuConfig(o)},this.lf.addMenuConfig=function(o){i.addMenuConfig(o)},this.lf.setMenuByType=function(o){i.setMenuByType(o)}}return n.prototype.init=function(){var a=this,i=[{text:"删除",callback:function(l){a.lf.deleteNode(l.id)}},{text:"编辑文本",callback:function(l){a.lf.graphModel.editText(l.id)}},{text:"复制",callback:function(l){a.lf.cloneNode(l.id)}}];this.menuTypeMap.set(gc,i);var u=[{text:"删除",callback:function(l){a.lf.deleteEdge(l.id)}},{text:"编辑文本",callback:function(l){a.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(mc,u),this.menuTypeMap.set(bc,[]);var o=[{text:"删除",callback:function(l){a.lf.clearSelectElements(),l.edges.forEach(function(c){return a.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return a.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(hT,o)},n.prototype.render=function(a,i){var u=this;this.__container=i,this.__currentData=null,this.__menuDOM.className="lf-menu",i.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var l=o.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1?(l.onclickCallback(u.__currentData),u.__menuDOM.style.display="none",u.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,m=h.y,y=l.id,S=u.lf.graphModel.getNodeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(gc),u.__currentData=l,u.showMenu(p,m,x)}),this.lf.on("edge:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,m=h.y,y=l.id,S=u.lf.graphModel.getEdgeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(mc),u.__currentData=l,u.showMenu(p,m,x)}),this.lf.on("blank:contextmenu",function(o){var l=o.position,c=u.menuTypeMap.get(bc),h=l.domOverlayPosition,p=h.x,m=h.y;u.showMenu(p,m,c)}),this.lf.on("selection:contextmenu",function(o){var l=o.data,c=o.position,h=u.menuTypeMap.get(hT),p=c.domOverlayPosition,m=p.x,y=p.y;u.__currentData=l,u.showMenu(m,y,h)}),this.lf.on("node:mousedown",function(){u.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){u.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){u.__menuDOM.style.display="none"})},n.prototype.destroy=function(){var a;(a=this===null||this===void 0?void 0:this.__container)===null||a===void 0||a.removeChild(this.__menuDOM),this.__menuDOM=null},n.prototype.showMenu=function(a,i,u){if(!(!u||!u.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,kB(this.__getMenuDom(u))),o.children.length&&(o.style.display="block",o.style.top=i+"px",o.style.left=a+"px")}},n.prototype.setMenuByType=function(a){!a.type||!a.menu||this.menuTypeMap.set(a.type,a.menu)},n.prototype.__getMenuDom=function(a){var i=[];return a&&a.length>0&&a.forEach(function(u){var o=document.createElement("li");if(u.className?o.className="lf-menu-item "+u.className:o.className="lf-menu-item",u.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",o.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",u.text&&(c.innerText=u.text),o.appendChild(c),o.onclickCallback=u.callback,i.push(o)}),i},n.prototype.setMenuConfig=function(a){a&&(a.nodeMenu!==void 0&&this.menuTypeMap.set(gc,a.nodeMenu?a.nodeMenu:[]),a.edgeMenu!==void 0&&this.menuTypeMap.set(mc,a.edgeMenu?a.edgeMenu:[]),a.graphMenu!==void 0&&this.menuTypeMap.set(bc,a.graphMenu?a.graphMenu:[]))},n.prototype.addMenuConfig=function(a){if(a){if(Array.isArray(a.nodeMenu)){var i=this.menuTypeMap.get(gc);this.menuTypeMap.set(gc,i.concat(a.nodeMenu))}if(Array.isArray(a.edgeMenu)){var i=this.menuTypeMap.get(mc);this.menuTypeMap.set(mc,i.concat(a.edgeMenu))}if(Array.isArray(a.graphMenu)){var i=this.menuTypeMap.get(bc);this.menuTypeMap.set(bc,i.concat(a.graphMenu))}}},n.prototype.changeMenuItem=function(a,i){if(a==="add")this.addMenuConfig(i);else if(a==="reset")this.setMenuConfig(i);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},n.pluginName="menu",n}();globalThis&&globalThis.__read;var zB=function(){function n(a){var i=this,u=a.lf;this.lf=u,this.lf.setPatternItems=function(o){i.setPatternItems(o)}}return n.prototype.render=function(a,i){var u=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=i;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){u.panelEl.appendChild(u.createDndItem(o))}),i.appendChild(this.panelEl),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},n.prototype.setPatternItems=function(a){this.shapeList=a,this.domContainer&&this.render(this.lf,this.domContainer)},n.prototype.createDndItem=function(a){var i=this,u=document.createElement("div");u.className=a.className?"lf-dnd-item "+a.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",a.icon&&(o.style.backgroundImage="url("+a.icon+")"),u.appendChild(o),a.label){var l=document.createElement("div");l.innerText=a.label,l.className="lf-dnd-text",u.appendChild(l)}return u.onmousedown=function(){a.type&&i.lf.dnd.startDrag({type:a.type,properties:a.properties,text:a.text}),a.callback&&a.callback(i.lf,i.domContainer)},u.ondblclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:a})},u.onclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:a})},u.oncontextmenu=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:a})},u},n.pluginName="dndPanel",n}(),HB=function(){function n(a){var i=this,u=a.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=i.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,h=c.x,p=c.y;i.endPoint={x:h,y:p};var m=i.startPoint,y=m.x,S=m.y,x=i.wrapper.style,T=y,_=S,N=h-y,M=p-S;h<y&&(T=h,N=y-h),p<S&&(_=p,M=S-p),x.left=T+"px",x.top=_+"px",x.width=N+"px",x.height=M+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",i.__draw),document.removeEventListener("mouseup",i.__drawOff),i.wrapper.oncontextmenu=null,i.__domContainer.removeChild(i.wrapper);var l=i.startPoint,c=l.x,h=l.y,p=i.endPoint,m=p.x,y=p.y;if(!(Math.abs(m-c)<10&&Math.abs(y-h)<10)){var S=[Math.min(c,m),Math.min(h,y)],x=[Math.max(c,m),Math.max(h,y)],T=i.lf.graphModel.getAreaElement(S,x,i.isWholeEdge,i.isWholeNode,!0),_=i.lf.graphModel.group;T.forEach(function(N){(!_||!_.getNodeGroup(N.id))&&i.lf.selectElementById(N.id,!0)}),i.lf.emit("selection:selected",T)}},this.lf=u;var o=u.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,u.openSelectionSelect=function(){i.openSelectionSelect()},u.closeSelectionSelect=function(){i.closeSelectionSelect()}}return n.prototype.render=function(a,i){var u=this;this.__domContainer=i,a.on("blank:mousedown",function(o){var l=o.e,c=a.getEditConfig();if(!(!c.stopMoveGraph||u.__disabled)){var h=l.button===2;if(!h){var p=a.getPointByClient(l.clientX,l.clientY).domOverlayPosition,m=p.x,y=p.y;u.startPoint={x:m,y},u.endPoint={x:m,y};var S=document.createElement("div");S.className="lf-selection-select",S.oncontextmenu=function(T){T.preventDefault()},S.style.top=u.startPoint.y+"px",S.style.left=u.startPoint.x+"px",i.appendChild(S),u.wrapper=S,document.addEventListener("mousemove",u.__draw),document.addEventListener("mouseup",u.__drawOff)}}})},n.prototype.setSelectionSense=function(a,i){a===void 0&&(a=!0),i===void 0&&(i=!0),this.isWholeEdge=a,this.isWholeNode=i},n.prototype.openSelectionSelect=function(){var a=this.lf.getEditConfig().stopMoveGraph;a||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},n.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},n.prototype.open=function(){this.__disabled=!1},n.prototype.close=function(){this.__disabled=!0},n.pluginName="selectionSelect",n}(),XB=globalThis&&globalThis.__values||function(n){var a=typeof Symbol=="function"&&Symbol.iterator,i=a&&n[a],u=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&u>=n.length&&(n=void 0),{value:n&&n[u++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},$B=function(){function n(a){var i=this,u=a.lf,o=a.LogicFlow,l=a.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(c,h){i.setView(),i.isShow||i.createMiniMap(c,h),i.isShow=!0},this.hide=function(){i.isShow&&i.removeMiniMap(),i.isShow=!1},this.reset=function(){i.lf.resetTranslate(),i.lf.resetZoom(),i.hide(),i.show()},this.startDrag=function(c){document.addEventListener("mousemove",i.drag),document.addEventListener("mouseup",i.drop),i.startPosition={x:c.x,y:c.y}},this.moveViewport=function(c,h){var p=i.viewport.style;i.viewPortTop=c,i.viewPortLeft=h,p.top=i.viewPortTop+"px",p.left=i.viewPortLeft+"px"},this.drag=function(c){i.dragging=!0;var h=i.viewPortTop+c.y-i.startPosition.y,p=i.viewPortLeft+c.x-i.startPosition.x;i.moveViewport(h,p),i.startPosition={x:c.x,y:c.y};var m=(i.viewPortLeft+i.viewPortWidth/2)/i.viewPortScale,y=(i.viewPortTop+i.viewPortHeight/2)/i.viewPortScale;i.lf.focusOn({coordinate:{x:m+i.resetDataX,y:y+i.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.drop);var c=i.viewPortTop,h=i.viewPortLeft;i.viewPortLeft>i.width&&(h=i.width-i.viewPortWidth),i.viewPortTop>i.height&&(c=i.height-i.viewPortHeight),i.viewPortLeft<-i.width&&(h=0),i.viewPortTop<-i.height&&(c=0),i.moveViewport(c,h)},this.mapClick=function(c){if(i.dragging)i.dragging=!1;else{var h=c.layerX,p=c.layerY,m=h,y=p,S=i.lf.getGraphRawData(),x=i.getBounds(S),T=x.left,_=x.top,N=T+m/i.viewPortScale,M=_+y/i.viewPortScale;i.lf.focusOn({coordinate:{x:N,y:M}})}},this.lf=u,l&&l.MiniMap&&this.setOption(l),this.miniMapWidth=u.graphModel.width,this.miniMapHeight=u.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return n.prototype.render=function(a,i){var u=this;this.container=i,this.lf.on("history:change",function(){u.isShow&&u.setView()}),this.lf.on("graph:transform",aB(function(){u.isShow&&!u.dragging&&u.setView()},300))},n.prototype.init=function(a){this.disabledPlugins=this.disabledPlugins.concat(a.disabledPlugins||[])},n.prototype.setOption=function(a){var i=a.MiniMap,u=i.width,o=u===void 0?150:u,l=i.height,c=l===void 0?220:l,h=i.isShowHeader,p=h===void 0?!0:h,m=i.isShowCloseIcon,y=m===void 0?!0:m,S=i.leftPosition,x=S===void 0?0:S,T=i.topPosition,_=T===void 0?0:T,N=i.rightPosition,M=i.bottomPosition;this.width=o,this.height=c,this.isShowHeader=p,this.isShowCloseIcon=y,this.viewPortWidth=o,this.leftPosition=x,this.topPosition=_,this.rightPosition=N,this.bottomPosition=M},n.prototype.initMiniMap=function(){var a=document.createElement("div");a.className="lf-mini-map-graph",a.style.width=this.width+4+"px",a.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:a,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(i){return i},this.lfMap.adapterOut=function(i){return i},this.miniMapWrap=a,this.createViewPort(),a.addEventListener("click",this.mapClick)},n.prototype.createMiniMap=function(a,i){var u=document.createElement("div");u.appendChild(this.miniMapWrap),typeof a<"u"||typeof i<"u"?(u.style.left=(a||0)+"px",u.style.top=(i||0)+"px"):(typeof this.rightPosition<"u"?u.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(u.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?u.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(u.style.top=this.topPosition+"px")),u.style.position="absolute",u.className="lf-mini-map",this.isShowCloseIcon||u.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||u.classList.add("lf-mini-map-no-header"),this.container.appendChild(u),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=n.headerTitle,u.appendChild(o);var l=document.createElement("span");l.className="lf-mini-map-close",l.addEventListener("click",this.hide),u.appendChild(l),this.miniMapContainer=u},n.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},n.prototype.getBounds=function(a){var i=0,u=this.miniMapWidth,o=0,l=this.miniMapHeight,c=a.nodes;return c&&c.length>0&&c.forEach(function(h){var p=h.x,m=h.y,y=h.width,S=y===void 0?200:y,x=h.height,T=x===void 0?200:x,_=p-S/2,N=p+S/2,M=m-T/2,D=m+T/2;i=_<i?_:i,u=N>u?N:u,o=M<o?M:o,l=D>l?D:l}),{left:i,top:o,bottom:l,right:u}},n.prototype.resetData=function(a){var i=a.nodes,u=a.edges,o=0,l=0;return i&&i.length>0&&(i.forEach(function(c){var h=c.x,p=c.y,m=c.width,y=m===void 0?200:m,S=c.height,x=S===void 0?200:S,T=h-y/2,_=p-x/2;o=T<o?T:o,l=_<l?_:l}),(o<0||l<0)&&(this.resetDataX=o,this.resetDataY=l,i.forEach(function(c){c.x=c.x-o,c.y=c.y-l,c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l)}),u.forEach(function(c){c.startPoint&&(c.startPoint.x=c.startPoint.x-o,c.startPoint.y=c.startPoint.y-l),c.endPoint&&(c.endPoint.x=c.endPoint.x-o,c.endPoint.y=c.endPoint.y-l),c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l),c.pointsList&&c.pointsList.forEach(function(h){h.x=h.x-o,h.y=h.y-l})}))),a},n.prototype.setView=function(){var a,i,u=this.lf.getGraphRawData(),o=this.resetData(u),l=this.lf.viewMap,c=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var p=XB(l.keys()),m=p.next();!m.done;m=p.next()){var y=m.value;h.has(y)||(this.lfMap.setView(y,l.get(y)),this.lfMap.graphModel.modelMap.set(y,c.get(y)))}}catch(Oe){a={error:Oe}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}this.lfMap.render(o);var S=this.getBounds(o),x=S.left,T=S.top,_=S.right,N=S.bottom,M=this.width/(_-x),D=this.height/(N-T),W=this.miniMapWrap.firstChild.style,$=Math.min(M,D);W.transform="matrix("+$+", 0, 0, "+$+", 0, 0)",W.transformOrigin="left top",W.height=N-Math.min(T,0)+"px",W.width=_-Math.min(x,0)+"px",this.viewPortScale=$,this.setViewPort($,{left:x,top:T,right:_,bottom:N})},n.prototype.setViewPort=function(a,i){var u=i.left,o=i.right;i.top,i.bottom;var l=this.viewport.style;l.width=this.viewPortWidth+"px",l.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var c=this.lf.getTransform(),h=c.TRANSLATE_X,p=c.TRANSLATE_Y,m=c.SCALE_X,y=c.SCALE_Y,S=o-u,x=this.width/(S/this.lf.graphModel.width),T=this.width*(x/this.width),_=this.lf.graphModel.width/this.lf.graphModel.height,N=T/_,M=this.lf.getGraphRawData(),D=this.getBounds(M),W=D.left,$=D.top,Oe=W,ge=$;Oe+=h/m,ge+=p/y,this.viewPortTop=ge>0?0:-ge*a,this.viewPortLeft=Oe>0?0:-Oe*a,this.viewPortWidth=T,this.viewPortHeight=N,l.top=this.viewPortTop+"px",l.left=this.viewPortLeft+"px",l.width=T/m+"px",l.height=N/y+"px"},n.prototype.createViewPort=function(){var a=document.createElement("div");a.className="lf-minimap-viewport",a.addEventListener("mousedown",this.startDrag),this.viewport=a},n.pluginName="miniMap",n.width=150,n.height=220,n.viewPortWidth=150,n.viewPortHeight=75,n.isShowHeader=!0,n.isShowCloseIcon=!0,n.leftPosition=0,n.topPosition=0,n.rightPosition=null,n.bottomPosition=null,n.headerTitle="导航",n}();function VB(n){if(n.length<=1)return!1;for(var a=0,i=n.length-1;a!==i&&a+1!==i&&i-1!==a;)a++,i--;return a===i?[--a,i]:[a,i]}var eP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Il=globalThis&&globalThis.__assign||function(){return Il=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Il.apply(this,arguments)},Sa=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};(function(n){eP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.pointFilter=function(i){for(var u=i,o=1;o<u.length-1;){var l=Sa(u[o-1],2),c=l[0],h=l[1],p=Sa(u[o],2),m=p[0],y=p[1],S=Sa(u[o+1],2),x=S[0],T=S[1];c===m&&m===x||h===y&&y===T?u.splice(o,1):o++}return u},a.prototype.getEdge=function(){var i=this.props.model,u=i.points,o=i.isAnimation,l=i.arrowConfig,c=i.radius,h=c===void 0?5:c,p=i.getEdgeStyle(),m=i.getEdgeAnimationStyle(),y=this.pointFilter(u.split(" ").map(function(Ct){return Ct.split(",").map(function(Ge){return Number(Ge)})})),S=VB(y);if(S){var x=Sa(S,2),T=x[0],_=x[1],N=y[T],M=y[_],D=N.some(function(Ct,Ge){return Ct===M[Ge]});if(!D){var W=(M[1]-N[1])/2,$=[M[0],M[1]-W],Oe=[N[0],N[1]+W];y.splice(T+1,0,Oe,$)}}for(var ge=Sa(y[0],2),de=ge[0],ce=ge[1],Me="M"+de+" "+ce,j=1;j<y.length-1;j++){var Q=Sa(y[j-1],2),U=Q[0],I=Q[1],k=Sa(y[j],2),te=k[0],V=k[1],Z=Sa(y[j+1],2),le=Z[0],Te=Z[1];if(te===U&&V!==I){var Re=V>I?V-h:V+h;Me=Me+" L "+te+" "+Re}if(V===I&&te!==U){var Pe=te>U?te-h:te+h;Me=Me+" L "+Pe+" "+V}if(Me=Me+" Q "+te+" "+V,te===le&&V!==Te){var Re=V>Te?V-h:V+h;Me=Me+" "+te+" "+Re}if(V===Te&&te!==le){var Pe=te>le?te-h:te+h;Me=Me+" "+Pe+" "+V}}var Ke=Sa(y[y.length-1],2),gt=Ke[0],Nt=Ke[1];Me=Me+" L "+gt+" "+Nt;var Vt=Il(Il(Il({d:Me,style:o?m:{}},p),l),{fill:"none"});return $t.h("path",Il({d:Me},Vt))},a})($t.PolylineEdge);(function(n){eP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a})($t.PolylineEdgeModel);var jb,_n,tP,Mc,pT,rP={},nP=[],WB=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Os(n,a){for(var i in a)n[i]=a[i];return n}function oP(n){var a=n.parentNode;a&&a.removeChild(n)}function Rc(n,a,i){var u,o,l,c={};for(l in a)l=="key"?u=a[l]:l=="ref"?o=a[l]:c[l]=a[l];if(arguments.length>2&&(c.children=arguments.length>3?jb.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)c[l]===void 0&&(c[l]=n.defaultProps[l]);return mv(n,c,u,o,null)}function mv(n,a,i,u,o){var l={type:n,props:a,key:i,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++tP};return o==null&&_n.vnode!=null&&_n.vnode(l),l}function Bb(n){return n.children}function Cl(n,a){this.props=n,this.context=a}function Dc(n,a){if(a==null)return n.__?Dc(n.__,n.__.__k.indexOf(n)+1):null;for(var i;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?Dc(n):null}function iP(n){var a,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,a=0;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return iP(n)}}function vT(n){(!n.__d&&(n.__d=!0)&&Mc.push(n)&&!Av.__r++||pT!==_n.debounceRendering)&&((pT=_n.debounceRendering)||setTimeout)(Av)}function Av(){for(var n;Av.__r=Mc.length;)n=Mc.sort(function(a,i){return a.__v.__b-i.__v.__b}),Mc=[],n.some(function(a){var i,u,o,l,c,h;a.__d&&(c=(l=(i=a).__v).__e,(h=i.__P)&&(u=[],(o=Os({},l)).__v=l.__v+1,lP(h,l,o,i.__n,h.ownerSVGElement!==void 0,l.__h!=null?[c]:null,u,c??Dc(l),l.__h),KB(u,l),l.__e!=c&&iP(l)))})}function aP(n,a,i,u,o,l,c,h,p,m){var y,S,x,T,_,N,M,D=u&&u.__k||nP,W=D.length;for(i.__k=[],y=0;y<a.length;y++)if((T=i.__k[y]=(T=a[y])==null||typeof T=="boolean"?null:typeof T=="string"||typeof T=="number"||typeof T=="bigint"?mv(null,T,null,null,T):Array.isArray(T)?mv(Bb,{children:T},null,null,null):T.__b>0?mv(T.type,T.props,T.key,T.ref?T.ref:null,T.__v):T)!=null){if(T.__=i,T.__b=i.__b+1,(x=D[y])===null||x&&T.key==x.key&&T.type===x.type)D[y]=void 0;else for(S=0;S<W;S++){if((x=D[S])&&T.key==x.key&&T.type===x.type){D[S]=void 0;break}x=null}lP(n,T,x=x||rP,o,l,c,h,p,m),_=T.__e,(S=T.ref)&&x.ref!=S&&(M||(M=[]),x.ref&&M.push(x.ref,null,T),M.push(S,T.__c||_,T)),_!=null?(N==null&&(N=_),typeof T.type=="function"&&T.__k===x.__k?T.__d=p=sP(T,p,n):p=uP(n,T,x,D,_,p),typeof i.type=="function"&&(i.__d=p)):p&&x.__e==p&&p.parentNode!=n&&(p=Dc(x))}for(i.__e=N,y=W;y--;)D[y]!=null&&cP(D[y],D[y]);if(M)for(y=0;y<M.length;y++)fP(M[y],M[++y],M[++y])}function sP(n,a,i){for(var u,o=n.__k,l=0;o&&l<o.length;l++)(u=o[l])&&(u.__=n,a=typeof u.type=="function"?sP(u,a,i):uP(i,u,u,o,u.__e,a));return a}function uP(n,a,i,u,o,l){var c,h,p;if(a.__d!==void 0)c=a.__d,a.__d=void 0;else if(i==null||o!=l||o.parentNode==null)e:if(l==null||l.parentNode!==n)n.appendChild(o),c=null;else{for(h=l,p=0;(h=h.nextSibling)&&p<u.length;p+=2)if(h==o)break e;n.insertBefore(o,l),c=l}return c!==void 0?c:o.nextSibling}function YB(n,a,i,u,o){var l;for(l in i)l==="children"||l==="key"||l in a||Pv(n,l,null,i[l],u);for(l in a)o&&typeof a[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||i[l]===a[l]||Pv(n,l,a[l],i[l],u)}function yT(n,a,i){a[0]==="-"?n.setProperty(a,i):n[a]=i==null?"":typeof i!="number"||WB.test(a)?i:i+"px"}function Pv(n,a,i,u,o){var l;e:if(a==="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof u=="string"&&(n.style.cssText=u=""),u)for(a in u)i&&a in i||yT(n.style,a,"");if(i)for(a in i)u&&i[a]===u[a]||yT(n.style,a,i[a])}else if(a[0]==="o"&&a[1]==="n")l=a!==(a=a.replace(/Capture$/,"")),a=a.toLowerCase()in n?a.toLowerCase().slice(2):a.slice(2),n.l||(n.l={}),n.l[a+l]=i,i?u||n.addEventListener(a,l?mT:gT,l):n.removeEventListener(a,l?mT:gT,l);else if(a!=="dangerouslySetInnerHTML"){if(o)a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!=="href"&&a!=="list"&&a!=="form"&&a!=="tabIndex"&&a!=="download"&&a in n)try{n[a]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&a.indexOf("-")==-1?n.removeAttribute(a):n.setAttribute(a,i))}}function gT(n){this.l[n.type+!1](_n.event?_n.event(n):n)}function mT(n){this.l[n.type+!0](_n.event?_n.event(n):n)}function lP(n,a,i,u,o,l,c,h,p){var m,y,S,x,T,_,N,M,D,W,$,Oe,ge,de=a.type;if(a.constructor!==void 0)return null;i.__h!=null&&(p=i.__h,h=a.__e=i.__e,a.__h=null,l=[h]),(m=_n.__b)&&m(a);try{e:if(typeof de=="function"){for(M=a.props,D=(m=de.contextType)&&u[m.__c],W=m?D?D.props.value:m.__:u,i.__c?N=(y=a.__c=i.__c).__=y.__E:("prototype"in de&&de.prototype.render?a.__c=y=new de(M,W):(a.__c=y=new Cl(M,W),y.constructor=de,y.render=JB),D&&D.sub(y),y.props=M,y.state||(y.state={}),y.context=W,y.__n=u,S=y.__d=!0,y.__h=[],y._sb=[]),y.__s==null&&(y.__s=y.state),de.getDerivedStateFromProps!=null&&(y.__s==y.state&&(y.__s=Os({},y.__s)),Os(y.__s,de.getDerivedStateFromProps(M,y.__s))),x=y.props,T=y.state,m=0;m<y._sb.length;m++)y.__h.push(y._sb[m]),y._sb=[];if(S)de.getDerivedStateFromProps==null&&y.componentWillMount!=null&&y.componentWillMount(),y.componentDidMount!=null&&y.__h.push(y.componentDidMount);else{if(de.getDerivedStateFromProps==null&&M!==x&&y.componentWillReceiveProps!=null&&y.componentWillReceiveProps(M,W),!y.__e&&y.shouldComponentUpdate!=null&&y.shouldComponentUpdate(M,y.__s,W)===!1||a.__v===i.__v){y.props=M,y.state=y.__s,a.__v!==i.__v&&(y.__d=!1),y.__v=a,a.__e=i.__e,a.__k=i.__k,a.__k.forEach(function(ce){ce&&(ce.__=a)}),y.__h.length&&c.push(y);break e}y.componentWillUpdate!=null&&y.componentWillUpdate(M,y.__s,W),y.componentDidUpdate!=null&&y.__h.push(function(){y.componentDidUpdate(x,T,_)})}if(y.context=W,y.props=M,y.__v=a,y.__P=n,$=_n.__r,Oe=0,"prototype"in de&&de.prototype.render)y.state=y.__s,y.__d=!1,$&&$(a),m=y.render(y.props,y.state,y.context);else do y.__d=!1,$&&$(a),m=y.render(y.props,y.state,y.context),y.state=y.__s;while(y.__d&&++Oe<25);y.state=y.__s,y.getChildContext!=null&&(u=Os(Os({},u),y.getChildContext())),S||y.getSnapshotBeforeUpdate==null||(_=y.getSnapshotBeforeUpdate(x,T)),ge=m!=null&&m.type===Bb&&m.key==null?m.props.children:m,aP(n,Array.isArray(ge)?ge:[ge],a,i,u,o,l,c,h,p),y.base=a.__e,a.__h=null,y.__h.length&&c.push(y),N&&(y.__E=y.__=null),y.__e=!1}else l==null&&a.__v===i.__v?(a.__k=i.__k,a.__e=i.__e):a.__e=ZB(i.__e,a,i,u,o,l,c,p);(m=_n.diffed)&&m(a)}catch(ce){a.__v=null,(p||l!=null)&&(a.__e=h,a.__h=!!p,l[l.indexOf(h)]=null),_n.__e(ce,a,i)}}function KB(n,a){_n.__c&&_n.__c(a,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(u){u.call(i)})}catch(u){_n.__e(u,i.__v)}})}function ZB(n,a,i,u,o,l,c,h){var p,m,y,S=i.props,x=a.props,T=a.type,_=0;if(T==="svg"&&(o=!0),l!=null){for(;_<l.length;_++)if((p=l[_])&&"setAttribute"in p==!!T&&(T?p.localName===T:p.nodeType===3)){n=p,l[_]=null;break}}if(n==null){if(T===null)return document.createTextNode(x);n=o?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,x.is&&x),l=null,h=!1}if(T===null)S===x||h&&n.data===x||(n.data=x);else{if(l=l&&jb.call(n.childNodes),m=(S=i.props||rP).dangerouslySetInnerHTML,y=x.dangerouslySetInnerHTML,!h){if(l!=null)for(S={},_=0;_<n.attributes.length;_++)S[n.attributes[_].name]=n.attributes[_].value;(y||m)&&(y&&(m&&y.__html==m.__html||y.__html===n.innerHTML)||(n.innerHTML=y&&y.__html||""))}if(YB(n,x,S,o,h),y)a.__k=[];else if(_=a.props.children,aP(n,Array.isArray(_)?_:[_],a,i,u,o&&T!=="foreignObject",l,c,l?l[0]:i.__k&&Dc(i,0),h),l!=null)for(_=l.length;_--;)l[_]!=null&&oP(l[_]);h||("value"in x&&(_=x.value)!==void 0&&(_!==n.value||T==="progress"&&!_||T==="option"&&_!==S.value)&&Pv(n,"value",_,S.value,!1),"checked"in x&&(_=x.checked)!==void 0&&_!==n.checked&&Pv(n,"checked",_,S.checked,!1))}return n}function fP(n,a,i){try{typeof n=="function"?n(a):n.current=a}catch(u){_n.__e(u,i)}}function cP(n,a,i){var u,o;if(_n.unmount&&_n.unmount(n),(u=n.ref)&&(u.current&&u.current!==n.__e||fP(u,null,a)),(u=n.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(l){_n.__e(l,a)}u.base=u.__P=null,n.__c=void 0}if(u=n.__k)for(o=0;o<u.length;o++)u[o]&&cP(u[o],a,i||typeof n.type!="function");i||n.__e==null||oP(n.__e),n.__=n.__e=n.__d=void 0}function JB(n,a,i){return this.constructor(n,i)}jb=nP.slice,_n={__e:function(n,a,i,u){for(var o,l,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(n)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,u||{}),c=o.__d),c)return o.__E=o}catch(h){n=h}throw n}},tP=0,Cl.prototype.setState=function(n,a){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Os({},this.state),typeof n=="function"&&(n=n(Os({},i),this.props)),n&&Os(i,n),n!=null&&this.__v&&(a&&this._sb.push(a),vT(this))},Cl.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),vT(this))},Cl.prototype.render=Bb,Mc=[],Av.__r=0;var Ic=globalThis&&globalThis.__assign||function(){return Ic=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Ic.apply(this,arguments)};function Fb(n){var a=n.x,i=n.y,u=n.width,o=n.height,l=n.radius,c=n.className,h=a-u/2,p=i-o/2,m=Ic(Ic({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},n),{x:h,y:p});return $t.h("rect",Ic({},m))}Fb.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Dl;(function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.HTML_NODE="html-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"})(Dl||(Dl={}));function bv(n){var a=n.x,i=n.y,u=n.width,o=n.height;return{minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2}}function bT(n){var a=bv(n),i=n.radius,u=a.minX,o=a.minY,l=a.maxX,c=a.maxY;return[{x:u+i,y:o+i},{x:l-i,y:o+i},{x:l-i,y:c-i},{x:u+i,y:c-i}]}function ET(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a.x,l=a.y,c={x:o,y:l},h=i.radius,p=bv(i),m=bv(u);if(o===p.minX){c.x=m.minX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(o===p.maxX){c.x=m.maxX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(l===p.minY){c.y=m.minY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else if(l===p.maxY){c.y=m.maxY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else{var S=bT(i),x=bT(u),T=bv(i),_=T.minX,N=T.minY,M=T.maxX,D=T.maxY,W=-1;if(o-_<h&&l-N<h?W=0:M-o<h&&l-N<h?W=1:M-o<h&&D-l<h?W=2:o-_<h&&N-l<h&&(W=3),W>-1){var $=Math.atan2(l-S[W].y,o-S[W].x);c.x=x[W].x+h*Math.cos($),c.y=x[W].y+h*Math.sin($)}}return c}function OT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=u.rx,l=u.ry,c=a,h=(a.y-i.y)/(a.x-i.x),p=o,m=l,y,S;return h>=1/0?(y=0,S=m):h<=-1/0?(y=0,S=-m):a.x-i.x>0?(y=p*m/Math.sqrt(m*m+p*p*h*h),S=p*m*h/Math.sqrt(m*m+p*p*h*h)):(y=-(p*m)/Math.sqrt(m*m+p*p*h*h),S=-(p*m*h)/Math.sqrt(m*m+p*p*h*h)),c={x:y+u.x,y:S+u.y},c}function ST(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a,l,c,h=a.x-i.x,p=a.y-i.y,m=i.rx,y=i.ry,S=Math.sqrt((m-Math.abs(h))*(m-Math.abs(h))+p*p)/Math.sqrt(m*m+y*y),x=u.rx,T=u.ry,_=Math.sqrt((x*x+T*T)*S*S*(x*x/(x*x+T*T))),N=_*(T/x);return h>=0?l=x-_:l=_-x,p>0?c=N:c=-N,o={x:l+u.x,y:c+u.y},o}var QB=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),lu=globalThis&&globalThis.__assign||function(){return lu=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},lu.apply(this,arguments)},qB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},e3=$t.LogicFlowUtil.StepDrag,t3=function(n){QB(a,n);function a(i){var u=n.call(this)||this;return u.updatePosition=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.x,m=h.y;u.nodeModel.x=p+l/2,u.nodeModel.y=m+c/2,u.nodeModel.moveText(l/2,c/2)},u.getResize=function(o){var l=o.index,c=o.deltaX,h=o.deltaY,p=o.width,m=o.height,y=o.PCTResizeInfo,S=o.pct,x=S===void 0?1:S,T={width:p,height:m,deltaX:c,deltaY:h};if(y){var _=4,N=0,M=0;switch(l){case 0:M=(c*-1-h)/_;break;case 1:M=(c-h)/_;break;case 2:M=(c+h)/_;break;case 3:M=(c*-1+h)/_;break}M!==0&&(N=Math.round(M/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.hightPCT=Math.max(Math.min(y.ResizePCT.hightPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var D=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),W=Math.round(y.ResizePCT.hightPCT*y.ResizeBasis.basisHeight/100);switch(l){case 0:c=p-D,h=m-W;break;case 1:c=D-p,h=m-W;break;case 2:c=D-p,h=W-m;break;case 3:c=p-D,h=W-m;break}return T.width=D,T.height=W,T.deltaX=c/x,T.deltaY=h/x,T}switch(l){case 0:T.width=p-c*x,T.height=m-h*x;break;case 1:T.width=p+c*x,T.height=m-h*x;break;case 2:T.width=p+c*x,T.height=m+h*x;break;case 3:T.width=p-c*x,T.height=m+h*x;break}return T},u.updateRect=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.x,y=h.y,S=h.width,x=h.height,T=h.radius,_=h.PCTResizeInfo,N=u.index,M=u.getResize({index:N,deltaX:l,deltaY:c,width:S,height:x,PCTResizeInfo:_,pct:1}),D=u.nodeModel,W=D.minWidth,$=D.minHeight,Oe=D.maxWidth,ge=D.maxHeight;if(M.width<W||M.width>Oe||M.height<$||M.height>ge){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:M.deltaX,deltaY:M.deltaY}),u.nodeModel.width=M.width,u.nodeModel.height=M.height,u.nodeModel.setProperties({nodeSize:{width:M.width,height:M.height}});var de=u.getNodeEdges(p),ce={x:m,y,width:S,height:x,radius:T},Me={x:u.nodeModel.x,y:u.nodeModel.y,width:u.nodeModel.width,height:u.nodeModel.height,radius:T},j={point:"",beforeNode:ce,afterNode:Me},Q;de.sourceEdges.forEach(function(U){j.point=U.startPoint,Q=ET(j),U.updateStartPoint(Q)}),de.targetEdges.forEach(function(U){j.point=U.endPoint,Q=ET(j),U.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:Me})},u.updateEllipse=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,_=u.index,N=m,M=y,D=u.getResize({index:_,deltaX:l,deltaY:c,width:N,height:M,PCTResizeInfo:T,pct:1/2}),W=u.nodeModel,$=W.minWidth,Oe=W.minHeight,ge=W.maxWidth,de=W.maxHeight;if(D.width<$/2||D.width>ge/2||D.height<Oe/2||D.height>de/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),u.nodeModel.rx=D.width,u.nodeModel.ry=D.height,u.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ce=u.getNodeEdges(p),Me={x:S,y:x},j={rx:D.width,ry:D.height,x:u.nodeModel.x,y:u.nodeModel.y},Q={point:{},beforeNode:Me,afterNode:j},U;ce.sourceEdges.forEach(function(I){Q.point=I.startPoint,U=OT(Q),I.updateStartPoint(U)}),ce.targetEdges.forEach(function(I){Q.point=I.endPoint,U=OT(Q),I.updateEndPoint(U)}),u.eventEmit({beforeNode:lu(lu({},Me),{rx:m,ry:y}),afterNode:j})},u.updateDiamond=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,_=u.index,N=m,M=y,D=u.getResize({index:_,deltaX:l,deltaY:c,width:N,height:M,PCTResizeInfo:T,pct:1/2}),W=u.nodeModel,$=W.minWidth,Oe=W.minHeight,ge=W.maxWidth,de=W.maxHeight;if(D.width<$/2||D.width>ge/2||D.height<Oe/2||D.height>de/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),u.nodeModel.rx=D.width,u.nodeModel.ry=D.height,u.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ce={x:S,y:x,rx:m,ry:y},Me={rx:D.width,ry:D.height,x:u.nodeModel.x,y:u.nodeModel.y},j={point:{},beforeNode:ce,afterNode:Me},Q,U=u.getNodeEdges(p);U.sourceEdges.forEach(function(I){j.point=I.startPoint,Q=ST(j),I.updateStartPoint(Q)}),U.targetEdges.forEach(function(I){j.point=I.endPoint,Q=ST(j),I.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:Me})},u.eventEmit=function(o){var l=o.beforeNode,c=o.afterNode,h=u.nodeModel,p=h.id,m=h.modelType,y=h.type,S=lu({id:p,modelType:m,type:y},l),x=lu({id:p,modelType:m,type:y},c);u.graphModel.eventCenter.emit("node:resize",{oldNodeSize:S,newNodeSize:x})},u.onDragging=function(o){var l,c=o.deltaX,h=o.deltaY,p=u.graphModel.transformModel,m=u.nodeModel.modelType;l=qB(p.fixDeltaXY(c,h),2),c=l[0],h=l[1],m===Dl.RECT_NODE||m===Dl.HTML_NODE?u.updateRect({deltaX:c,deltaY:h}):m===Dl.ELLIPSE_NODE?u.updateEllipse({deltaX:c,deltaY:h}):m===Dl.DIAMOND_NODE&&u.updateDiamond({deltaX:c,deltaY:h})},u.onDragEnd=function(){var o=u.graphModel.gridSize,l=o===void 0?1:o,c=l*Math.round(u.nodeModel.x/l),h=l*Math.round(u.nodeModel.y/l);u.nodeModel.moveTo(c,h)},u.index=i.index,u.nodeModel=i.model,u.graphModel=i.graphModel,u.state={},u.dragHandler=new e3({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:1}),u}return a.prototype.getNodeEdges=function(i){for(var u=this.graphModel,o=u.edges,l=[],c=[],h=0;h<o.length;h++){var p=o[h];p.sourceNodeId===i?l.push(p):o[h].targetNodeId===i&&c.push(p)}return{sourceEdges:l,targetEdges:c}},a.prototype.render=function(){var i=this.props,u=i.x,o=i.y,l=i.index,c=i.model,h=c.getControlPointStyle();return Rc("g",{className:"lf-resize-control-"+l},Rc(Fb,lu({className:"lf-node-control"},{x:u,y:o},h,{onMouseDown:this.dragHandler.handleMouseDown})))},a}(Cl),r3=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),wv=globalThis&&globalThis.__assign||function(){return wv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},wv.apply(this,arguments)},Gv=function(n){r3(a,n);function a(){var i=n.call(this)||this;return i.state={},i}return a.prototype.getResizeControl=function(){var i=this.props,u=i.model,o=i.graphModel,l=u.x,c=u.y,h=u.width,p=u.height,m={minX:l-h/2,minY:c-p/2,maxX:l+h/2,maxY:c+p/2},y=m.minX,S=m.minY,x=m.maxX,T=m.maxY,_=[{x:y,y:S},{x,y:S},{x,y:T},{x:y,y:T}];return _.map(function(N,M){return Rc(t3,wv({index:M},N,{model:u,graphModel:o}))})},a.prototype.getGroupSolid=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getResizeOutlineStyle();return Rc(Fb,wv({fill:"none"},h,{x:u,y:o,width:l,height:c}))},a.prototype.render=function(){return Rc("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},a}(Cl),dP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),n3=function(n){dP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.resize=function(i,u){console.log(i,u)},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a}($t.RectNodeModel),o3=function(n){dP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a}($t.RectNode),kv={type:"rect",view:o3,model:n3},hP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){hP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.EllipseNodeModel);(function(n){hP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u.isSelected&&!o?this.getControlGroup():"")},a})($t.EllipseNode);var yb=globalThis&&globalThis.__assign||function(){return yb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},yb.apply(this,arguments)};function i3(n){var a=n.fillOpacity,i=a===void 0?1:a,u=n.strokeWidth,o=u===void 0?1:u,l=n.strokeOpacity,c=l===void 0?1:l,h=n.fill,p=h===void 0?"transparent":h,m=n.stroke,y=m===void 0?"#000":m,S=n.points,x=n.className,T=x===void 0?"lf-basic-shape":x,_={fill:p,fillOpacity:i,strokeWidth:o,stroke:y,strokeOpacity:c,points:"",className:T};return _.points=S.map(function(N){return N.join(",")}).join(" "),$t.h("polygon",yb({},_))}var pP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),gb=globalThis&&globalThis.__assign||function(){return gb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},gb.apply(this,arguments)};(function(n){pP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.DiamondNodeModel);(function(n){pP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){var i=this.props.model,u=i.points,o=i.getNodeStyle();return $t.h("g",null,$t.h(i3,gb({},o,{points:u})))},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.DiamondNode);var vP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){vP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.HtmlNodeModel);(function(n){vP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.HtmlNode);var yP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),_v=globalThis&&globalThis.__assign||function(){return _v=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},_v.apply(this,arguments)},a3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},xT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(a3(arguments[a]));return n},TT=500,AT=300,s3=-1e4,u3=function(n){yP(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.isGroup=!0,i.unfoldedWidth=TT,i.unfoldedHight=AT,i}return a.prototype.initNodeData=function(i){var u=this;n.prototype.initNodeData.call(this,i);var o=[];Array.isArray(i.children)&&(o=i.children),this.children=new Set(o),this.width=TT,this.height=AT,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=s3,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){u.isFolded&&u.foldGroup(u.isFolded)})},a.prototype.getResizeOutlineStyle=function(){var i=n.prototype.getResizeOutlineStyle.call(this);return i.stroke="none",i},a.prototype.foldGroup=function(i){var u=this;this.setProperty("isFolded",i),this.isFolded=i,i?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=u.graphModel.getElement(l);c.isGroup&&!c.isFolded&&c.foldGroup(i),c.visible=!i,o=o.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(i,o)},a.prototype.getAnchorStyle=function(i){var u=n.prototype.getAnchorStyle.call(this,i);return u.stroke="transparent",u.fill="transparent",u.hover.fill="transparent",u.hover.stroke="transparent",u},a.prototype.foldEdge=function(i,u){var o=this;u.forEach(function(l,c){var h=l.id,p=l.sourceNodeId,m=l.targetNodeId,y=l.startPoint,S=l.endPoint,x=l.type,T=l.properties,_=l.text,N={id:h+"__"+c,sourceNodeId:p,targetNodeId:m,startPoint:y,endPoint:S,type:x,properties:T,text:_==null?void 0:_.value};l.virtual&&o.graphModel.deleteEdgeById(l.id);var M=o.graphModel.group.getNodeGroup(m);M||(M=o.graphModel.getNodeModelById(m));var D=o.graphModel.group.getNodeGroup(p);D||(D=o.graphModel.getNodeModelById(p)),i&&l.visible!==!1&&(o.children.has(p)||o.id===p?(N.startPoint=void 0,N.sourceNodeId=o.id):(N.endPoint=void 0,N.targetNodeId=o.id),(M.id!==o.id||D.id!==o.id)&&o.createVirtualEdge(N),l.visible=!1),!i&&l.visible===!1&&(M&&M.isGroup&&M.isFolded?(N.targetNodeId=M.id,N.endPoint=void 0,o.createVirtualEdge(N)):D&&D.isGroup&&D.isFolded?(N.sourceNodeId=D.id,N.startPoint=void 0,o.createVirtualEdge(N)):l.visible=!0)})},a.prototype.createVirtualEdge=function(i){i.pointsList=void 0;var u=this.graphModel.addEdge(i);u.virtual=!0,u.text.editable=!1,u.isFoldedEdge=!0},a.prototype.isInRange=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return u>=this.x-this.width/2&&l<=this.x+this.width/2&&o>=this.y-this.height/2&&c<=this.y+this.height/2},a.prototype.isAllowMoveTo=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return{x:u>=this.x-this.width/2&&l<=this.x+this.width/2,y:o>=this.y-this.height/2&&c<=this.y+this.height/2}},a.prototype.setAllowAppendChild=function(i){this.setProperty("groupAddable",i)},a.prototype.addChild=function(i){this.children.add(i)},a.prototype.removeChild=function(i){this.children.delete(i)},a.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},a.prototype.getData=function(){var i=n.prototype.getData.call(this);i.children=xT(this.children);var u=i.properties;return delete u.groupAddable,delete u.isFolded,i},a.prototype.getHistoryData=function(){var i=n.prototype.getData.call(this);i.children=xT(this.children),i.isGroup=!0;var u=i.properties;return delete u.groupAddable,u.isFolded&&(i.x=i.x+this.unfoldedWidth/2-this.foldedWidth/2,i.y=i.y+this.unfoldedHight/2-this.foldedHeight/2),i},a.prototype.isAllowAppendIn=function(i){return!0},a.prototype.toBack=function(){this.zIndex--},a}(kv.model),l3=function(n){yP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props.model,u=i.resizable,o=i.properties;return u&&!o.isFolded?n.prototype.getControlGroup.call(this):null},a.prototype.getAddableShape=function(){var i=this.props.model,u=i.width,o=i.height,l=i.x,c=i.y,h=i.radius,p=i.properties;if(!p.groupAddable)return null;var m=this.props.model.getNodeStyle().strokeWidth,y=this.props.model.getAddableOutlineStyle(),S=u+m+8,x=o+m+8;return $t.h("rect",_v(_v({},y),{width:S,height:x,x:l-S/2,y:c-x/2,rx:h,ry:h}))},a.prototype.getFoldIcon=function(){var i=this.props.model,u=i.x-i.width/2+5,o=i.y-i.height/2+5;if(!i.foldable)return null;var l=$t.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:i.properties.isFolded?"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" M"+(u+7)+","+(o+2)+" "+(u+7)+","+(o+10):"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" "});return $t.h("g",{},[$t.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:i.x-i.width/2+5,y:i.y-i.height/2+5,onClick:function(){i.foldGroup(!i.properties.isFolded)}}),l])},a.prototype.getResizeShape=function(){return $t.h("g",{},[this.getAddableShape(),n.prototype.getResizeShape.call(this),this.getFoldIcon()])},a}(kv.view);const Gb={type:"group",view:l3,model:u3};var f3=-1e3,PT=-1e4,c3=function(){function n(a){var i=this,u=a.lf;this.topGroupZIndex=PT,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(l){l.children&&l.children.forEach(function(c){i.nodeGroupMap.set(c,l.id)})})},this.appendNodeToGroup=function(o){var l=o.data,c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id),h.setAllowAppendChild(!1)}var p=i.lf.getNodeModelById(l.id),m=p.getBounds(),y=i.getGroup(m,l);if(y){var S=y.isAllowAppendIn(l);if(!S){i.lf.emit("group:not-allowed",{group:y.getData(),node:l});return}y.addChild(l.id),i.nodeGroupMap.set(l.id,y.id),y.setAllowAppendChild(!1),p.isGroup&&(l.children.forEach(function(x){i.nodeGroupMap.set(x,l.id)}),i.nodeSelected({data:l,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var l=o.data;l.children&&l.children.forEach(function(p){i.nodeGroupMap.delete(p),i.lf.deleteNode(p)});var c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id)}},this.setActiveGroup=function(o){var l=o.data,c=i.lf.getNodeModelById(l.id),h=c.getBounds(),p=i.getGroup(h,l);if(i.activeGroup&&i.activeGroup.setAllowAppendChild(!1),!(!p||c.isGroup&&p.id===l.id)){var m=p.isAllowAppendIn(l);m&&(i.activeGroup=p,i.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var l=o.data,c=o.isMultiple,h=o.isSelected,p=i.lf.getNodeModelById(l.id);if(i.toFrontGroup(p),i.topGroupZIndex>f3){i.topGroupZIndex=PT;for(var m=i.lf.graphModel.nodes.filter(function(N){return N.isGroup}).sort(function(N,M){return N.zIndex-M.zIndex}),y=0,S=0;S<m.length;S++){var x=m[S];x.zIndex!==y&&(i.topGroupZIndex++,y=x.zIndex),x.setZIndex(i.topGroupZIndex)}}if(c&&h)if(p.isGroup)p.children.forEach(function(N){var M=i.lf.graphModel.getElement(N);M.setSelected(!1)});else{var T=i.nodeGroupMap.get(l.id);if(T){var _=i.lf.getNodeModelById(T);_.isSelected&&p.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(i.topGroupZIndex++,o.setZIndex(i.topGroupZIndex),o.children&&o.children.forEach(function(l){var c=i.lf.getNodeModelById(l);i.toFrontGroup(c)}))},u.register(Gb),this.lf=u,u.graphModel.addNodeMoveRules(function(o,l,c){if(o.isGroup){var h=i.getNodeAllChild(o);return u.graphModel.moveNodes(h,l,c,!0),!0}var p=u.getNodeModelById(i.nodeGroupMap.get(o.id));if(p&&p.isRestrict){var m=o.getBounds(),y=m.x1,S=m.y1,x=m.x2,T=m.y2,_=p.isAllowMoveTo({x1:y+l,y1:S+c,x2:x+l,y2:T+c});return _}return!0}),u.graphModel.group=this,u.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),u.on("node:delete",this.deleteGroupChild),u.on("node:dnd-drag,node:drag",this.setActiveGroup),u.on("node:click",this.nodeSelected),u.on("graph:rendered",this.graphRendered)}return n.prototype.getNodeAllChild=function(a){var i=this,u=[];return a.children&&a.children.forEach(function(o){u.push(o);var l=i.lf.getNodeModelById(o);l.isGroup&&(u=u.concat(i.getNodeAllChild(l)))}),u},n.prototype.getGroup=function(a,i){var u=this.lf.graphModel.nodes,o=u.filter(function(h){return h.isGroup&&h.isInRange(a)&&h.id!==i.id});if(o.length!==0){if(o.length===1)return o[0];for(var l=o[o.length-1],c=o.length-2;c>=0;c--)o[c].zIndex>l.zIndex&&(l=o[c]);return l}},n.prototype.getNodeGroup=function(a){var i=this.nodeGroupMap.get(a);if(i)return this.lf.getNodeModelById(i)},n.pluginName="group",n}(),d3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var wT=globalThis&&globalThis.__assign||function(){return wT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},wT.apply(this,arguments)},_T=globalThis&&globalThis.__assign||function(){return _T=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},_T.apply(this,arguments)},h3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;class p3 extends $t.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class v3 extends $t.HtmlNode{}class y3 extends cB{}class g3 extends dB{}class m3 extends hB{}class b3 extends pB{getShape(){const a=this.props.model,i=a.getNodeStyle(),{x:u,y:o,r:l}=a;return $t.h("circle",{...i,cx:u,cy:o,r:l,strokeWidth:5})}}class E3 extends vB{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${Ui()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class O3 extends yB{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),$t.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class S3 extends $t.PolygonNodeModel{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${Ui()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class x3 extends $t.PolygonNode{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),$t.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class T3 extends gB{}class A3 extends mB{}class P3 extends bB{isAllowConnectedAsSource(){return!1}}class w3 extends EB{}class _3 extends JA{getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class N3 extends QA{}const M3=kv.model;class R3 extends M3{createId(){return"Note_"+Ui()}initNodeData(a){super.initNodeData(a),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const a=super.getNodeStyle();return a.strokeDasharray="3 3",a.fill="transparent",a}}class I3 extends kv.view{}class D3 extends JA{getEdgeStyle(){const a=super.getEdgeStyle();return a.strokeDasharray="3 3",a}getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class C3 extends QA{}const L3=Gb.model;class j3 extends L3{createId(){return"Group_"+Ui()}initNodeData(a){super.initNodeData(a),this.resizable=!0,this.foldable=!0}addChild(a){var i,u;super.addChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.setProperty("groupKey",this.id)}removeChild(a){var i,u;super.removeChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.deleteProperty("groupKey")}}class B3 extends Gb.view{}class gP extends c3{constructor({lf:a}){super({lf:a}),a.register({type:"group",model:j3,view:B3}),a.off("node:delete",this.deleteGroupChild),a.on("node:delete",({data:i})=>{i.children&&i.children.forEach(u=>{this.nodeGroupMap.delete(u),this.lf.deleteNode(u)})})}}const F3=[{type:"process",model:p3,view:v3},{type:"startEvent",model:y3,view:g3},{type:"endEvent",model:m3,view:b3},{type:"exclusiveGateway",model:E3,view:O3},{type:"parallelGateway",model:S3,view:x3},{type:"userTask",model:T3,view:A3},{type:"serviceTask",model:P3,view:w3},{type:"sequenceFlow",model:_3,view:N3},{type:"note",model:R3,view:I3},{type:"noteFlow",model:D3,view:C3}];class kb{constructor({lf:a}){a.batchRegister(F3),a.setDefaultEdgeType("sequenceFlow")}}Pl(kb,"pluginName","bpmnExtend");class G3 extends FB{constructor({lf:a}){super({lf:a}),this.addItem({key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>a.clearData()}),this.addItem({key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>a.emit("custom:edit-click",{})}),this.addItem({key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:i,show:u,hide:o}=a.extension.miniMap??{};i?o():u()}})}}class k3{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(a){return this.init(a),this.execute(!0)}init(a){this.nodes=a.nodes||[],this.edges=a.edges||[],this.combos=a.combos||[],this.comboEdges=a.comboEdges||[],this.hiddenNodes=a.hiddenNodes||[],this.hiddenEdges=a.hiddenEdges||[],this.hiddenCombos=a.hiddenCombos||[],this.vedges=a.vedges||[]}execute(a){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(a){a&&Object.assign(this,a)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const U3=n=>typeof n=="string",NT=Array.isArray,Nv=n=>typeof n=="number",mP=n=>n!==null&&typeof n=="object",Mv=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const a=[];return n.forEach(i=>{a.push(i)}),a.map(i=>Mv(i))}if(typeof n=="object"&&Object.keys(n).length){const a=Object.assign({},n);return Object.keys(a).forEach(i=>{a[i]=Mv(a[i])}),a}return n},wl=(n,a)=>{const i=n[a];return mP(i)?i.cell:i},MT=(n,a,i)=>{let u;return i?u=i:Nv(n)?u=()=>n:u=()=>a,u},z3=(n,a)=>{if(n!=="next"&&n!=="prev")return a},RT=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};let H3=class{constructor(){const a={};a.prev=a,a.next=a.prev,this.shortcut=a}dequeue(){const a=this.shortcut,i=a.prev;if(i&&i!==a)return RT(i),i}enqueue(a){const i=this.shortcut;a.prev&&a.next&&RT(a),a.next=i.next,i.next.prev=a,i.next=a,a.prev=i}toString(){const a=[],i=this.shortcut;let u=i.prev;for(;u!==i;)a.push(JSON.stringify(u,z3)),u=u==null?void 0:u.prev;return`[${a.join(", ")}]`}};var Ll;(function(n){n.DEFAULT_EDGE_NAME="\0",n.GRAPH_NODE="\0",n.EDGE_KEY_DELIM=""})(Ll||(Ll={}));function IT(n,a){var i=n.get(a)||0;n.set(a,i+1)}function DT(n,a){var i=n.get(a);i!==void 0&&(i=i-1,i>0?n.set(a,i):n.delete(a))}function bP(n,a,i,u){var o=String(a),l=String(i);if(!n&&o>l){var c=o;o=l,l=c}return o+Ll.EDGE_KEY_DELIM+l+Ll.EDGE_KEY_DELIM+(u===void 0?Ll.DEFAULT_EDGE_NAME:u)}function CT(n,a,i,u){var o=String(a),l=String(i),c={v:a,w:i};if(!n&&o>l){var h=c.v;c.v=c.w,c.w=h}return u!==void 0&&(c.name=u),c}function eb(n,a){return bP(n,a.v,a.w,a.name)}function LT(n){return typeof n=="function"}var X3=function(a){return a.nodes().map(function(i){var u=a.node(i),o=a.parent(i),l={id:i,value:u,parent:o};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},$3=function(a){return a.edges().map(function(i){var u=a.edge(i),o={v:i.v,w:i.w,value:u,name:i.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},V3=function(a){var i={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:X3(a),edges:$3(a),value:a.graph()};return i.value===void 0&&delete i.value,i},W3=function(a){var i=new zl(a.options);return a.value!==void 0&&i.setGraph(a.value),a.nodes.forEach(function(u){i.setNode(u.id,u.value),u.parent&&i.setParent(u.id,u.parent)}),a.edges.forEach(function(u){i.setEdge(u.v,u.w,u.value,u.name)}),i};function jT(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);a&&(u=u.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,u)}return i}function BT(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?jT(Object(i),!0).forEach(function(u){Y3(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):jT(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function Y3(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function K3(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function FT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Z3(n,a,i){return a&&FT(n.prototype,a),i&&FT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}var J3={compound:!1,multigraph:!1,directed:!0},zl=function(){function n(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K3(this,n),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Ll.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return a.directed},this.isMultigraph=function(){return a.multigraph},this.isCompound=function(){return a.compound},this.setGraph=function(o){return a.label=o,a},this.graph=function(){return a.label},this.setDefaultNodeLabel=function(o){return LT(o)?a.defaultNodeLabelFn=o:a.defaultNodeLabelFn=function(){return o},a},this.nodeCount=function(){return a.nodeCountNum},this.node=function(o){return a.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(a.nodesLabelMap.keys())},this.sources=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.inEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.sinks=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.outEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.setNodes=function(o,l){return o.map(function(c){return a.setNode(c,l)}),a},this.hasNode=function(o){return a.nodesLabelMap.has(o)},this.checkCompound=function(){if(!a.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(a.isCompound()){var l,c=(l=a.parentMap)===null||l===void 0?void 0:l.get(o);if(c!==a.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(o){var l=a.parentMap.get(o);a.childrenMap.get(l).delete(o)},this.setParent=function(o,l){var c,h;a.checkCompound();for(var p=l===void 0?a.GRAPH_NODE:l,m=a.parent(p);m;){if(o===m)throw new Error("Setting "+l+" as parent of "+o+" would create a cycle");m=a.parent(m)}l&&a.setNode(l),a.setNode(o),a.removeFromParentsChildList(o),(c=a.parentMap)===null||c===void 0||c.set(o,p);var y=a.childrenMap.get(p);return y.set(o,!0),(h=a.childrenMap)===null||h===void 0||h.set(p,y),a},this.children=function(o){var l=o===void 0?a.GRAPH_NODE:o;if(a.isCompound()){var c,h=(c=a.childrenMap)===null||c===void 0?void 0:c.get(l);return h?Array.from(h.keys()):void 0}if(l===a.GRAPH_NODE)return a.nodes();if(o&&a.hasNode(o))return[]},this.predecessors=function(o){var l=a.predecessorsMap.get(o);return l?Array.from(l.keys()):void 0},this.successors=function(o){var l=a.successorsMap.get(o);return l?Array.from(l.keys()):void 0},this.neighbors=function(o){var l;if(a.hasNode(o))return Array.from(new Set((l=a.predecessors(o))===null||l===void 0?void 0:l.concat(a.successors(o))))},this.isLeaf=function(o){var l;if(a.isDirected()){var c;return!(!((c=a.successors(o))===null||c===void 0)&&c.length)}return!(!((l=a.neighbors(o))===null||l===void 0)&&l.length)},this.filterNodes=function(o){var l=a.directed,c=a.multigraph,h=a.compound,p=new n({directed:l,multigraph:c,compound:h});if(p.setGraph(a.graph()),a.nodes().forEach(function(y){o(y)&&p.setNode(y,a.node(y))}),a.edges().forEach(function(y){p.hasNode(y.v)&&p.hasNode(y.w)&&p.setEdgeObj(y,a.edge(y))}),h){var m=function(S){for(var x=a.parent(S);x!==void 0&&!p.hasNode(x);)x=a.parent(x);return x};p.nodes().forEach(function(y){p.setParent(y,m(y))})}return p},this.setDefaultEdgeLabel=function(o){return LT(o)?a.defaultEdgeLabelFn=o:a.defaultEdgeLabelFn=function(){return o},a},this.edgeCount=function(){return a.edgeCountNum},this.setEdgeObj=function(o,l){return a.setEdge(o.v,o.w,l,o.name)},this.setPath=function(o,l){return o.reduce(function(c,h){return a.setEdge(c,h,l),h}),a},this.edgeFromArgs=function(o,l,c){return a.edge({v:o,w:l,name:c})},this.edge=function(o){return a.edgesLabelsMap.get(eb(a.isDirected(),o))},this.hasEdge=function(o,l,c){return a.edgesLabelsMap.has(eb(a.isDirected(),{v:o,w:l,name:c}))},this.removeEdgeObj=function(o){var l=o.v,c=o.w,h=o.name;return a.removeEdge(l,c,h)},this.edges=function(){return Array.from(a.edgesMap.values())},this.inEdges=function(o,l){var c=a.inEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.v===l})},this.outEdges=function(o,l){var c=a.outEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.w===l})},this.nodeEdges=function(o,l){var c;if(a.hasNode(o))return(c=a.inEdges(o,l))===null||c===void 0?void 0:c.concat(a.outEdges(o,l))},this.toJSON=function(){return V3(a)},this.nodeInDegree=function(o){var l=a.inEdgesMap.get(o);return l?l.size:0},this.nodeOutDegree=function(o){var l=a.outEdgesMap.get(o);return l?l.size:0},this.nodeDegree=function(o){return a.nodeInDegree(o)+a.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var u=BT(BT({},J3),i);this.compound=u.compound,this.directed=u.directed,this.multigraph=u.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return Z3(n,[{key:"setNode",value:function(i,u){var o=this.nodesLabelMap,l=this.defaultNodeLabelFn,c=this.isCompound,h=this.parentMap,p=this.childrenMap,m=this.inEdgesMap,y=this.outEdgesMap,S=this.predecessorsMap,x=this.successorsMap;if(o.has(i))return u!==void 0&&o.set(i,u),this;if(o.set(i,u||l(i)),c()){var T;h==null||h.set(i,this.GRAPH_NODE),p==null||p.set(i,new Map),p!=null&&p.has(this.GRAPH_NODE)||p==null||p.set(this.GRAPH_NODE,new Map),p==null||(T=p.get(this.GRAPH_NODE))===null||T===void 0||T.set(i,!0)}return[m,y,S,x].forEach(function(_){return _.set(i,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(i){var u=this;if(this.hasNode(i)){var o=function(M){u.removeEdge(M.v,M.w,M.name)},l=this.inEdgesMap,c=this.outEdgesMap,h=this.predecessorsMap,p=this.successorsMap,m=this.nodesLabelMap;if(this.isCompound()){var y,S,x;this.removeFromParentsChildList(i),(y=this.parentMap)===null||y===void 0||y.delete(i),(S=this.children(i))===null||S===void 0||S.forEach(function(N){return u.setParent(N)}),(x=this.childrenMap)===null||x===void 0||x.delete(i)}var T=l.get(i),_=c.get(i);Array.from(T.values()).forEach(function(N){return o(N)}),Array.from(_.values()).forEach(function(N){return o(N)}),m.delete(i),l.delete(i),c.delete(i),h.delete(i),p.delete(i),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(i,u,o,l){var c,h,p=CT(this.isDirected(),i,u,l),m=eb(this.isDirected(),p),y=p.v,S=p.w;if(this.edgesLabelsMap.has(m))return this.edgesLabelsMap.set(m,o),this;if(l!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(y),this.setNode(S),this.edgesLabelsMap.set(m,o||this.defaultEdgeLabelFn(y,S,l)),Object.freeze(p),this.edgesMap.set(m,p);var x=this.predecessorsMap.get(S),T=this.successorsMap.get(y);return IT(x,y),IT(T,S),(c=this.inEdgesMap.get(S))===null||c===void 0||c.set(m,p),(h=this.outEdgesMap.get(y))===null||h===void 0||h.set(m,p),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(i,u,o){var l=bP(this.isDirected(),i,u,o),c=this.edgesMap.get(l);if(c){var h=CT(this.isDirected(),i,u,o),p=h.v,m=h.w;this.edgesLabelsMap.delete(l),this.edgesMap.delete(l);var y=this.predecessorsMap.get(m),S=this.successorsMap.get(p);DT(y,p),DT(S,m),this.inEdgesMap.get(m).delete(l),this.outEdgesMap.get(p).delete(l),this.edgeCountNum-=1}return this}}]),n}();zl.fromJSON=W3;function GT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function Q3(n,a,i){return a&&GT(n.prototype,a),i&&GT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function q3(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var EP=Q3(function n(){var a=this;q3(this,n),this.arr=[],this.keyIndice=new Map,this.size=function(){return a.arr.length},this.keys=function(){return a.arr.map(function(i){return i.key})},this.has=function(i){return a.keyIndice.has(i)},this.priority=function(i){var u=a.keyIndice.get(i);if(u!==void 0)return a.arr[u].priority},this.swap=function(i,u){var o=a.arr,l=a.keyIndice,c=[o[i],o[u]],h=c[0],p=c[1];o[i]=p,o[u]=h,l.set(h.key,u),l.set(p.key,i)},this.innerDecrease=function(i){for(var u=a.arr,o=u[i].priority,l,c=i;c!==0;){var h;if(l=c>>1,((h=u[l])===null||h===void 0?void 0:h.priority)<o)break;a.swap(c,l),c=l}},this.heapify=function(i){var u=a.arr,o=i<<1,l=o+1,c=i;o<u.length&&(c=u[o].priority<u[c].priority?o:c,l<u.length&&(c=u[l].priority<u[c].priority?l:c),c!==i&&(a.swap(i,c),a.heapify(c)))},this.min=function(){if(a.size()===0)throw new Error("Queue underflow");return a.arr[0].key},this.add=function(i,u){var o=a.keyIndice,l=a.arr;if(!o.has(i)){var c=l.length;return o.set(i,c),l.push({key:i,priority:u}),a.innerDecrease(c),!0}return!1},this.removeMin=function(){a.swap(0,a.arr.length-1);var i=a.arr.pop();return a.keyIndice.delete(i.key),a.heapify(0),i.key},this.decrease=function(i,u){if(!a.has(i))throw new Error("There's no key named ".concat(i));var o=a.keyIndice.get(i);if(u>a.arr[o].priority)throw new Error("New priority is greater than current priority.Key: ".concat(i," Old: + ").concat(a.arr[o].priority," New: ").concat(u));a.arr[o].priority=u,a.innerDecrease(o)}}),eF=function(a,i){var u=new zl,o=new Map,l=new EP,c;function h(y){var S=y.v===c?y.w:y.v,x=l.priority(S);if(x!==void 0){var T=i(y);T<x&&(o.set(S,c),l.decrease(S,T))}}if(a.nodeCount()===0)return u;a.nodes().forEach(function(y){l.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),l.decrease(a.nodes()[0],0);for(var p=!1;l.size()>0;){var m;if(c=l.removeMin(),o.has(c))u.setEdge(c,o.get(c));else{if(p)throw new Error("Input graph is not connected: "+a.graph());p=!0}(m=a.nodeEdges(c))===null||m===void 0||m.forEach(h)}return u},tF=function(a){var i=new Set,u=[],o=a.nodes();return o.forEach(function(l){for(var c=[],h=[l];h.length>0;){var p=h.pop();if(!i.has(p)){var m,y;i.add(p),c.push(p),(m=a.successors(p))===null||m===void 0||m.forEach(function(S){return h.push(S)}),(y=a.predecessors(p))===null||y===void 0||y.forEach(function(S){return h.push(S)})}}c.length&&u.push(c)}),u},rF=function n(a,i,u,o,l,c){o.includes(i)||(o.push(i),u||c.push(i),l(i).forEach(function(h){return n(a,h,u,o,l,c)}),u&&c.push(i))},Ub=function(a,i,u){var o=Array.isArray(i)?i:[i],l=function(m){return a.isDirected()?a.successors(m):a.neighbors(m)},c=[],h=[];return o.forEach(function(p){if(a.hasNode(p))rF(a,p,u==="post",h,l,c);else throw new Error("Graph does not have node: "+p)}),c};function nF(n,a){return sF(n)||aF(n,a)||iF(n,a)||oF()}function oF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iF(n,a){if(n){if(typeof n=="string")return kT(n,a);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return kT(n,a)}}function kT(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,u=new Array(a);i<a;i++)u[i]=n[i];return u}function aF(n,a){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var u=[],o=!0,l=!1,c,h;try{for(i=i.call(n);!(o=(c=i.next()).done)&&(u.push(c.value),!(a&&u.length===a));o=!0);}catch(p){l=!0,h=p}finally{try{!o&&i.return!=null&&i.return()}finally{if(l)throw h}}return u}}function sF(n){if(Array.isArray(n))return n}var uF=function(){return 1},OP=function(a,i,u,o){return lF(a,i,u||uF,o||function(l){return a.outEdges(l)})},lF=function(a,i,u,o){var l=new Map,c=new EP,h,p,m=function(x){var T=x.v!==h?x.v:x.w,_=l.get(T),N=u(x),M=p.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+N);M<_.distance&&(_.distance=M,_.predecessor=h,c.decrease(T,M))};for(a.nodes().forEach(function(S){var x=S===i?0:Number.POSITIVE_INFINITY;l.set(S,{distance:x}),c.add(S,x)});c.size()>0&&(h=c.removeMin(),p=l.get(h),!(p&&p.distance===Number.POSITIVE_INFINITY));)o(h).forEach(m);var y={};return Array.from(l.entries()).forEach(function(S){var x=nF(S,2),T=x[0],_=x[1];return y[String(T)]=_,y}),y},fF=function(a,i,u){var o={};return a.nodes().forEach(function(l){return o[String(l)]=OP(a,l,i,u),o}),o},SP=function(a){var i=0,u=[],o=new Map,l=[];function c(h){var p,m={onStack:!0,lowlink:i,index:i};if(o.set(h,m),i+=1,u.push(h),(p=a.successors(h))===null||p===void 0||p.forEach(function(T){var _;if(o.has(T)){if(!((_=o.get(T))===null||_===void 0)&&_.onStack){var M=o.get(T);m.lowlink=Math.min(m.lowlink,M.index)}}else{c(T);var N=o.get(T);m.lowlink=Math.min(m.lowlink,N.lowlink)}}),m.lowlink===m.index){var y=[],S;do{S=u.pop();var x=o.get(S);x.onStack=!1,y.push(S)}while(h!==S);l.push(y)}}return a.nodes().forEach(function(h){o.has(h)||c(h)}),l},cF=function(a){return SP(a).filter(function(i){return i.length>1||i.length===1&&a.hasEdge(i[0],i[0])})};function mb(n){return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},mb(n)}function UT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function dF(n,a,i){return a&&UT(n.prototype,a),i&&UT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function hF(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function pF(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&Cc(n,a)}function vF(n){var a=xP();return function(){var u=Lc(n),o;if(a){var l=Lc(this).constructor;o=Reflect.construct(u,arguments,l)}else o=u.apply(this,arguments);return yF(this,o)}}function yF(n,a){if(a&&(mb(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gF(n)}function gF(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function bb(n){var a=typeof Map=="function"?new Map:void 0;return bb=function(u){if(u===null||!mF(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(u))return a.get(u);a.set(u,o)}function o(){return Ev(u,arguments,Lc(this).constructor)}return o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Cc(o,u)},bb(n)}function Ev(n,a,i){return xP()?Ev=Reflect.construct:Ev=function(o,l,c){var h=[null];h.push.apply(h,l);var p=Function.bind.apply(o,h),m=new p;return c&&Cc(m,c.prototype),m},Ev.apply(null,arguments)}function xP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mF(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Cc(n,a){return Cc=Object.setPrototypeOf||function(u,o){return u.__proto__=o,u},Cc(n,a)}function Lc(n){return Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lc(n)}var Eb=function(n){pF(i,n);var a=vF(i);function i(){return hF(this,i),a.apply(this,arguments)}return dF(i)}(bb(Error));function TP(n){var a=new Set,i=new Set,u=[];function o(l){if(i.has(l))throw new Eb;if(!a.has(l)){var c;i.add(l),a.add(l),(c=n.predecessors(l))===null||c===void 0||c.forEach(o),i.delete(l),u.push(l)}}if(n.sinks().forEach(o),a.size!==n.nodeCount())throw new Eb;return u}var bF=function(a){try{TP(a)}catch(i){if(i instanceof Eb)return!1;throw i}return!0},EF=function(a,i){return Ub(a,i,"post")},OF=function(a,i){return Ub(a,i,"pre")},SF=function(){return 1};function xF(n,a,i){return TF(n,a||SF,i||function(u){return n.outEdges(u)})}function TF(n,a,i){var u={},o=n.nodes();return o.forEach(function(l){var c=String(l);u[c]={},u[c][c]={distance:0},o.forEach(function(h){l!==h&&(u[c][String(h)]={distance:Number.POSITIVE_INFINITY})}),i(l).forEach(function(h){var p=h.v===l?h.w:h.v,m=a(h);u[c][String(p)]={distance:m,predecessor:l}})}),o.forEach(function(l){var c=String(l),h=u[c];o.forEach(function(p){var m=String(p),y=u[m];o.forEach(function(S){var x=String(S),T=y[c],_=h[x],N=y[x],M=T.distance+_.distance;M<N.distance&&(N.distance=M,N.predecessor=_.predecessor)})})}),u}const AF=Object.freeze(Object.defineProperty({__proto__:null,components:tF,dfs:Ub,dijkstra:OP,dijkstraAll:fF,findCycles:cF,floydWarshall:xF,isAcyclic:bF,postorder:EF,preorder:OF,prim:eF,tarjan:SP,topsort:TP},Symbol.toStringTag,{value:"Module"}));class PF extends H3{}class wF extends zl{}const _F=()=>1,NF=(n,a)=>{var i;if(n.nodeCount()<=1)return[];const u=RF(n,a||_F);return(i=MF(u.graph,u.buckets,u.zeroIdx).map(l=>n.outEdges(l.v,l.w)))===null||i===void 0?void 0:i.flat()},MF=(n,a,i)=>{let u=[];const o=a[a.length-1],l=a[0];let c;for(;n.nodeCount();){for(;c=l.dequeue();)tb(n,a,i,c);for(;c=o.dequeue();)tb(n,a,i,c);if(n.nodeCount()){for(let h=a.length-2;h>0;--h)if(c=a[h].dequeue(),c){u=u.concat(tb(n,a,i,c,!0));break}}}return u},tb=(n,a,i,u,o)=>{var l,c;const h=[];return(l=n.inEdges(u.v))===null||l===void 0||l.forEach(p=>{const m=n.edge(p),y=n.node(p.v);o&&h.push({v:p.v,w:p.w,in:0,out:0}),y.out===void 0&&(y.out=0),y.out-=m,Ob(a,i,y)}),(c=n.outEdges(u.v))===null||c===void 0||c.forEach(p=>{const m=n.edge(p),y=p.w,S=n.node(y);S.in===void 0&&(S.in=0),S.in-=m,Ob(a,i,S)}),n.removeNode(u.v),o?h:void 0},RF=(n,a)=>{const i=new wF;let u=0,o=0;n.nodes().forEach(p=>{i.setNode(p,{v:p,in:0,out:0})}),n.edges().forEach(p=>{const m=i.edge(p)||0,y=(a==null?void 0:a(p))||1,S=m+y;i.setEdge(p.v,p.w,S),o=Math.max(o,i.node(p.v).out+=y),u=Math.max(u,i.node(p.w).in+=y)});const l=[],c=o+u+3;for(let p=0;p<c;p++)l.push(new PF);const h=u+1;return i.nodes().forEach(p=>{Ob(l,h,i.node(p))}),{buckets:l,zeroIdx:h,graph:i}},Ob=(n,a,i)=>{i.out?i.in?n[i.out-i.in+a].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)},IF=n=>{const a=u=>o=>{var l;return((l=u.edge(o))===null||l===void 0?void 0:l.weight)||1},i=n.graph().acyclicer==="greedy"?NF(n,a(n)):DF(n);i==null||i.forEach(u=>{const o=n.edge(u);n.removeEdgeObj(u),o.forwardName=u.name,o.reversed=!0,n.setEdge(u.w,u.v,o,`rev-${Math.random()}`)})},DF=n=>{const a=[],i={},u={},o=l=>{var c;u[l]||(u[l]=!0,i[l]=!0,(c=n.outEdges(l))===null||c===void 0||c.forEach(h=>{i[h.w]?a.push(h):o(h.w)}),delete i[l])};return n.nodes().forEach(o),a},CF=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.reversed){n.removeEdgeObj(a);const u=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(a.w,a.v,i,u)}})},zT={run:IF,undo:CF};class Aa extends zl{}const LF=(n,a)=>Number(n)-Number(a),Hl=(n,a,i,u)=>{let o;do o=`${u}${Math.random()}`;while(n.hasNode(o));return i.dummy=a,n.setNode(o,i),o},jF=n=>{const a=new Aa().setGraph(n.graph());return n.nodes().forEach(i=>{a.setNode(i,n.node(i))}),n.edges().forEach(i=>{const u=a.edgeFromArgs(i.v,i.w)||{weight:0,minlen:1},o=n.edge(i);a.setEdge(i.v,i.w,{weight:u.weight+o.weight,minlen:Math.max(u.minlen,o.minlen)})}),a},AP=n=>{const a=new Aa({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var u;!((u=n.children(i))===null||u===void 0)&&u.length||a.setNode(i,n.node(i))}),n.edges().forEach(i=>{a.setEdgeObj(i,n.edge(i))}),a},BF=(n,a)=>n==null?void 0:n.reduce((i,u,o)=>(i[u]=a[o],i),{}),HT=(n,a)=>{const i=Number(n.x),u=Number(n.y),o=Number(a.x)-i,l=Number(a.y)-u;let c=Number(n.width)/2,h=Number(n.height)/2;if(!o&&!l)return{x:0,y:0};let p,m;return Math.abs(l)*c>Math.abs(o)*h?(l<0&&(h=-h),p=h*o/l,m=h):(o<0&&(c=-c),p=c,m=c*l/o),{x:i+p,y:u+m}},jc=n=>{const a=[],i=PP(n)+1;for(let u=0;u<i;u++)a.push([]);n.nodes().forEach(u=>{const o=n.node(u);if(!o)return;const l=o.rank;l!==void 0&&a[l]&&a[l].push(u)});for(let u=0;u<i;u++)a[u]=a[u].sort((o,l)=>{var c,h;return LF((c=n.node(o))===null||c===void 0?void 0:c.order,(h=n.node(l))===null||h===void 0?void 0:h.order)});return a},FF=n=>{const a=n.nodes().filter(u=>{var o;return((o=n.node(u))===null||o===void 0?void 0:o.rank)!==void 0}).map(u=>n.node(u).rank),i=Math.min(...a);n.nodes().forEach(u=>{const o=n.node(u);o.hasOwnProperty("rank")&&i!==1/0&&(o.rank-=i)})},GF=n=>{const a=n.nodes(),i=a.filter(h=>{var p;return((p=n.node(h))===null||p===void 0?void 0:p.rank)!==void 0}).map(h=>n.node(h).rank),u=Math.min(...i),o=[];a.forEach(h=>{var p;const m=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-u;o[m]||(o[m]=[]),o[m].push(h)});let l=0;const c=n.graph().nodeRankFactor||0;for(let h=0;h<o.length;h++){const p=o[h];p===void 0?h%c!==0&&(l-=1):l&&(p==null||p.forEach(m=>{const y=n.node(m);y&&(y.rank=y.rank||0,y.rank+=l)}))}},XT=(n,a,i,u)=>{const o={width:0,height:0};return Nv(i)&&Nv(u)&&(o.rank=i,o.order=u),Hl(n,"border",o,a)},PP=n=>{let a;return n.nodes().forEach(i=>{var u;const o=(u=n.node(i))===null||u===void 0?void 0:u.rank;o!==void 0&&(a===void 0||o>a)&&(a=o)}),a||(a=0),a},kF=(n,a)=>{const i={lhs:[],rhs:[]};return n==null||n.forEach(u=>{a(u)?i.lhs.push(u):i.rhs.push(u)}),i},wP=(n,a)=>{const i=Date.now();try{return a()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},_P=(n,a)=>a(),zb=(n,a)=>n.reduce((i,u)=>{const o=a(i),l=a(u);return o>l?u:i}),UF=n=>{n.graph().dummyChains=[],n.edges().forEach(a=>zF(n,a))},zF=(n,a)=>{let i=a.v,u=n.node(i).rank;const o=a.w,l=n.node(o).rank,c=a.name,h=n.edge(a),p=h.labelRank;if(l===u+1)return;n.removeEdgeObj(a);const m=n.graph();let y,S,x;for(x=0,++u;u<l;++x,++u)h.points=[],S={edgeLabel:h,width:0,height:0,edgeObj:a,rank:u},y=Hl(n,"edge",S,"_d"),u===p&&(S.width=h.width,S.height=h.height,S.dummy="edge-label",S.labelpos=h.labelpos),n.setEdge(i,y,{weight:h.weight},c),x===0&&(m.dummyChains||(m.dummyChains=[]),m.dummyChains.push(y)),i=y;n.setEdge(i,o,{weight:h.weight},c)},HF=n=>{var a;(a=n.graph().dummyChains)===null||a===void 0||a.forEach(i=>{let u=n.node(i);const o=u.edgeLabel;let l;u.edgeObj&&n.setEdgeObj(u.edgeObj,o);let c=i;for(;u.dummy;)l=n.successors(c)[0],n.removeNode(c),o.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(o.x=u.x,o.y=u.y,o.width=u.width,o.height=u.height),c=l,u=n.node(c)})},$T={run:UF,undo:HF},NP=n=>{var a;const i={},u=o=>{var l;const c=n.node(o);if(!c)return 0;if(i[o])return c.rank;i[o]=!0;let h;return(l=n.outEdges(o))===null||l===void 0||l.forEach(p=>{const m=u(p.w),y=n.edge(p).minlen,S=m-y;S&&(h===void 0||S<h)&&(h=S)}),h||(h=0),c.rank=h,h};(a=n.sources())===null||a===void 0||a.forEach(o=>u(o))},XF=n=>{var a;const i={};let u;const o=h=>{var p;const m=n.node(h);if(!m)return 0;if(i[h])return m.rank;i[h]=!0;let y;return(p=n.outEdges(h))===null||p===void 0||p.forEach(S=>{const x=o(S.w),T=n.edge(S).minlen,_=x-T;_&&(y===void 0||_<y)&&(y=_)}),y||(y=0),(u===void 0||y<u)&&(u=y),m.rank=y,y};(a=n.sources())===null||a===void 0||a.forEach(h=>{n.node(h)&&o(h)}),u===void 0&&(u=0);const l={},c=(h,p)=>{var m;const y=n.node(h),S=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<S)&&(y.rank=S),!l[h]&&(l[h]=!0,(m=n.outEdges(h))===null||m===void 0||m.map(x=>{c(x.w,S+n.edge(x).minlen)}))};n.nodes().forEach(h=>{const p=n.node(h);p&&(isNaN(p.layer)?p.rank-=u:c(h,p.layer))})},Ss=(n,a)=>n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen,$F=n=>{const a=new Aa({directed:!1}),i=n.nodes()[0],u=n.nodeCount();a.setNode(i,{});let o,l;for(;VF(a,n)<u;)o=MP(a,n),l=a.hasNode(o.v)?Ss(n,o):-Ss(n,o),RP(a,n,l);return a},VF=(n,a)=>{const i=u=>{a.nodeEdges(u).forEach(o=>{const l=o.v,c=u===l?o.w:l;!n.hasNode(c)&&!Ss(a,o)&&(n.setNode(c,{}),n.setEdge(u,c,{}),i(c))})};return n.nodes().forEach(i),n.nodeCount()},WF=n=>{const a=new Aa({directed:!1}),i=n.nodes()[0],u=n.nodes().filter(c=>!!n.node(c)).length;a.setNode(i,{});let o,l;for(;YF(a,n)<u;)o=MP(a,n),l=a.hasNode(o.v)?Ss(n,o):-Ss(n,o),RP(a,n,l);return a},YF=(n,a)=>{const i=u=>{var o;(o=a.nodeEdges(u))===null||o===void 0||o.forEach(l=>{const c=l.v,h=u===c?l.w:c;!n.hasNode(h)&&(a.node(h).layer!==void 0||!Ss(a,l))&&(n.setNode(h,{}),n.setEdge(u,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},MP=(n,a)=>zb(a.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?Ss(a,i):1/0),RP=(n,a,i)=>{n.nodes().forEach(u=>{a.node(u).rank||(a.node(u).rank=0),a.node(u).rank+=i})},{preorder:KF,postorder:ZF}=AF,JF=n=>{const a=jF(n);NP(a);const i=$F(a);DP(i),IP(i,a);let u,o;for(;u=e4(i);)o=t4(i,a,u),r4(i,a,u,o)},IP=(n,a)=>{let i=ZF(n,n.nodes());i=i==null?void 0:i.slice(0,(i==null?void 0:i.length)-1),i==null||i.forEach(u=>{QF(n,a,u)})},QF=(n,a,i)=>{const o=n.node(i).parent;n.edgeFromArgs(i,o).cutvalue=qF(n,a,i)},qF=(n,a,i)=>{var u;const l=n.node(i).parent;let c=!0,h=a.edgeFromArgs(i,l),p=0;return h||(c=!1,h=a.edgeFromArgs(l,i)),p=h.weight,(u=a.nodeEdges(i))===null||u===void 0||u.forEach(m=>{const y=m.v===i,S=y?m.w:m.v;if(S!==l){const x=y===c,T=a.edge(m).weight;if(p+=x?T:-T,o4(n,i,S)){const _=n.edgeFromArgs(i,S).cutvalue;p+=x?-_:_}}}),p},DP=(n,a=n.nodes()[0])=>{CP(n,{},1,a)},CP=(n,a,i,u,o)=>{var l;const c=i;let h=i;const p=n.node(u);return a[u]=!0,(l=n.neighbors(u))===null||l===void 0||l.forEach(m=>{a[m]||(h=CP(n,a,h,m,u))}),p.low=c,p.lim=h++,o?p.parent=o:delete p.parent,h},e4=n=>n.edges().find(a=>n.edge(a).cutvalue<0),t4=(n,a,i)=>{let u=i.v,o=i.w;a.hasEdge(u,o)||(u=i.w,o=i.v);const l=n.node(u),c=n.node(o);let h=l,p=!1;l.lim>c.lim&&(h=c,p=!0);const m=a.edges().filter(y=>p===VT(n,n.node(y.v),h)&&p!==VT(n,n.node(y.w),h));return zb(m,y=>Ss(a,y))},r4=(n,a,i,u)=>{const o=i.v,l=i.w;n.removeEdge(o,l),n.setEdge(u.v,u.w,{}),DP(n),IP(n,a),n4(n,a)},n4=(n,a)=>{const i=n.nodes().find(o=>{var l;return!(!((l=a.node(o))===null||l===void 0)&&l.parent)});let u=KF(n,i);u=u==null?void 0:u.slice(1),u==null||u.forEach(o=>{const l=n.node(o).parent;let c=a.edgeFromArgs(o,l),h=!1;c||(c=a.edgeFromArgs(l,o),h=!0),a.node(o).rank=a.node(l).rank+(h?c.minlen:-c.minlen)})},o4=(n,a,i)=>n.hasEdge(a,i),VT=(n,a,i)=>i.low<=a.lim&&a.lim<=i.lim,i4=n=>{switch(n.graph().ranker){case"network-simplex":s4(n);break;case"tight-tree":WT(n);break;case"longest-path":a4(n);break;default:WT(n)}},a4=NP,WT=n=>{XF(n),WF(n)},s4=n=>{JF(n)},u4=n=>{var a;const i={};let u=0;const o=l=>{var c;const h=u;(c=n.children(l))===null||c===void 0||c.forEach(o),i[l]={low:h,lim:u++}};return(a=n.children())===null||a===void 0||a.forEach(o),i},l4=(n,a,i,u)=>{const o=[],l=[],c=Math.min(a[i].low,a[u].low),h=Math.max(a[i].lim,a[u].lim);let p,m;p=i;do p=n.parent(p),o.push(p);while(p&&(a[p].low>c||h>a[p].lim));for(m=p,p=u;p&&p!==m;)l.push(p),p=n.parent(p);return{lca:m,path:o.concat(l.reverse())}},f4=n=>{var a;const i=u4(n);(a=n.graph().dummyChains)===null||a===void 0||a.forEach(u=>{var o,l;let c=u,h=n.node(c);const p=h.edgeObj;if(!p)return;const m=l4(n,i,p.v,p.w),y=m.path,S=m.lca;let x=0,T=y[x],_=!0;for(;c!==p.w;){if(h=n.node(c),_){for(;T!==S&&((o=n.node(T))===null||o===void 0?void 0:o.maxRank)<h.rank;)x++,T=y[x];T===S&&(_=!1)}if(!_){for(;x<y.length-1&&((l=n.node(y[x+1]))===null||l===void 0?void 0:l.minRank)<=h.rank;)x++;T=y[x]}n.setParent(c,T),c=n.successors(c)[0]}})},c4=n=>{var a;const i=Hl(n,"root",{},"_root"),u=d4(n);let o=Math.max(...Object.values(u));Math.abs(o)===1/0&&(o=1);const l=o-1,c=2*l+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=c});const h=h4(n)+1;(a=n.children())===null||a===void 0||a.forEach(p=>{LP(n,i,c,h,l,u,p)}),n.graph().nodeRankFactor=c},LP=(n,a,i,u,o,l,c)=>{const h=n.children(c);if(!(h!=null&&h.length)){c!==a&&n.setEdge(a,c,{weight:0,minlen:i});return}const p=XT(n,"_bt"),m=XT(n,"_bb"),y=n.node(c);n.setParent(p,c),y.borderTop=p,n.setParent(m,c),y.borderBottom=m,h==null||h.forEach(S=>{LP(n,a,i,u,o,l,S);const x=n.node(S),T=x.borderTop?x.borderTop:S,_=x.borderBottom?x.borderBottom:S,N=x.borderTop?u:2*u,M=T!==_?1:o-l[c]+1;n.setEdge(p,T,{minlen:M,weight:N,nestingEdge:!0}),n.setEdge(_,m,{minlen:M,weight:N,nestingEdge:!0})}),n.parent(c)||n.setEdge(a,p,{weight:0,minlen:o+l[c]})},d4=n=>{var a;const i={},u=(o,l)=>{const c=n.children(o);c==null||c.forEach(h=>u(h,l+1)),i[o]=l};return(a=n.children())===null||a===void 0||a.forEach(o=>u(o,1)),i},h4=n=>{let a=0;return n.edges().forEach(i=>{a+=n.edge(i).weight}),a},p4=n=>{const a=n.graph();a.nestingRoot&&n.removeNode(a.nestingRoot),delete a.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdgeObj(i)})},YT={run:c4,cleanup:p4},v4=n=>{var a;const i=u=>{const o=n.children(u),l=n.node(u);if(o!=null&&o.length&&o.forEach(c=>i(c)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let c=l.minRank,h=l.maxRank+1;c<h;c+=1)KT(n,"borderLeft","_bl",u,l,c),KT(n,"borderRight","_br",u,l,c)}};(a=n.children())===null||a===void 0||a.forEach(u=>i(u))},KT=(n,a,i,u,o,l)=>{const c={rank:l,borderType:a,width:0,height:0},h=o[a][l-1],p=Hl(n,"border",c,i);o[a][l]=p,n.setParent(p,u),h&&n.setEdge(h,p,{weight:1})},y4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="lr"||i==="rl")&&jP(n)},g4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="bt"||i==="rl")&&m4(n),(i==="lr"||i==="rl")&&(b4(n),jP(n))},jP=n=>{n.nodes().forEach(a=>{ZT(n.node(a))}),n.edges().forEach(a=>{ZT(n.edge(a))})},ZT=n=>{const a=n.width;n.width=n.height,n.height=a},m4=n=>{n.nodes().forEach(a=>{rb(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>rb(o)),u.hasOwnProperty("y")&&rb(u)})},rb=n=>{n!=null&&n.y&&(n.y=-n.y)},b4=n=>{n.nodes().forEach(a=>{nb(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>nb(o)),u.hasOwnProperty("x")&&nb(u)})},nb=n=>{const a=n.x;n.x=n.y,n.y=a},JT={adjust:y4,undo:g4},QT=n=>{const a={},i=n.nodes().filter(y=>{var S;return!(!((S=n.children(y))===null||S===void 0)&&S.length)}),u=i.map(y=>n.node(y).rank),o=Math.max(...u),l=[];for(let y=0;y<o+1;y++)l.push([]);const c=y=>{var S;if(a.hasOwnProperty(y))return;a[y]=!0;const x=n.node(y);isNaN(x.rank)||l[x.rank].push(y),(S=n.successors(y))===null||S===void 0||S.forEach(T=>c(T))},h=i.sort((y,S)=>n.node(y).rank-n.node(S).rank),m=h.filter(y=>n.node(y).fixorder!==void 0).sort((y,S)=>n.node(y).fixorder-n.node(S).fixorder);return m==null||m.forEach(y=>{isNaN(n.node(y).rank)||l[n.node(y).rank].push(y),a[y]=!0}),h==null||h.forEach(c),l},E4=(n,a,i)=>{const u=BF(i,i.map((y,S)=>S)),l=a.map(y=>{var S;const x=(S=n.outEdges(y))===null||S===void 0?void 0:S.map(T=>({pos:u[T.w]||0,weight:n.edge(T).weight}));return x==null?void 0:x.sort((T,_)=>T.pos-_.pos)}).flat().filter(y=>y!==void 0);let c=1;for(;c<i.length;)c<<=1;const h=2*c-1;c-=1;const p=Array(h).fill(0,0,h);let m=0;return l==null||l.forEach(y=>{if(y){let S=y.pos+c;p[S]+=y.weight;let x=0;for(;S>0;)S%2&&(x+=p[S+1]),S=S-1>>1,p[S]+=y.weight;m+=y.weight*x}}),m},qT=(n,a)=>{let i=0;for(let u=1;u<(a==null?void 0:a.length);u+=1)i+=E4(n,a[u-1],a[u]);return i},O4=(n,a,i)=>{const u=S4(n),o=new Aa({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(l=>n.node(l));return n.nodes().forEach(l=>{var c;const h=n.node(l),p=n.parent(l);(h.rank===a||h.minRank<=a&&a<=h.maxRank)&&(o.setNode(l),o.setParent(l,p||u),(c=n[i](l))===null||c===void 0||c.forEach(m=>{const y=m.v===l?m.w:m.v,S=o.edgeFromArgs(y,l),x=S!==void 0?S.weight:0;o.setEdge(y,l,{weight:n.edge(m).weight+x})}),h.hasOwnProperty("minRank")&&o.setNode(l,{borderLeft:h.borderLeft[a],borderRight:h.borderRight[a]}))}),o},S4=n=>{let a;for(;n.hasNode(a=`_root${Math.random()}`););return a},x4=(n,a,i)=>{const u={};let o;i==null||i.forEach(l=>{let c=n.parent(l),h,p;for(;c;){if(h=n.parent(c),h?(p=u[h],u[h]=c):(p=o,o=c),p&&p!==c){a.setEdge(p,c);return}c=h}})},T4=(n,a)=>a.map(i=>{const u=n.inEdges(i);if(!(u!=null&&u.length))return{v:i};{const o={sum:0,weight:0};return u==null||u.forEach(l=>{const c=n.edge(l),h=n.node(l.v);o.sum+=c.weight*h.order,o.weight+=c.weight}),{v:i,barycenter:o.sum/o.weight,weight:o.weight}}}),A4=(n,a)=>{var i,u,o;const l={};n==null||n.forEach((h,p)=>{l[h.v]={i:p,indegree:0,in:[],out:[],vs:[h.v]};const m=l[h.v];h.barycenter!==void 0&&(m.barycenter=h.barycenter,m.weight=h.weight)}),(i=a.edges())===null||i===void 0||i.forEach(h=>{const p=l[h.v],m=l[h.w];p!==void 0&&m!==void 0&&(m.indegree++,p.out.push(l[h.w]))});const c=(o=(u=Object.values(l)).filter)===null||o===void 0?void 0:o.call(u,h=>!h.indegree);return P4(c)},P4=n=>{var a,i;const u=[],o=p=>m=>{m.merged||(m.barycenter===void 0||p.barycenter===void 0||m.barycenter>=p.barycenter)&&w4(p,m)},l=p=>m=>{m.in.push(p),--m.indegree===0&&n.push(m)};for(;n!=null&&n.length;){const p=n.pop();u.push(p),(a=p.in.reverse())===null||a===void 0||a.forEach(m=>o(p)(m)),(i=p.out)===null||i===void 0||i.forEach(m=>l(p)(m))}const c=u.filter(p=>!p.merged),h=["vs","i","barycenter","weight"];return c.map(p=>{const m={};return h==null||h.forEach(y=>{p[y]!==void 0&&(m[y]=p[y])}),m})},w4=(n,a)=>{var i;let u=0,o=0;n.weight&&(u+=n.barycenter*n.weight,o+=n.weight),a.weight&&(u+=a.barycenter*a.weight,o+=a.weight),n.vs=(i=a.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=u/o,n.weight=o,n.i=Math.min(a.i,n.i),a.merged=!0},_4=(n,a,i,u)=>{const o=kF(n,x=>{const T=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return u?!T&&x.hasOwnProperty("barycenter"):T||x.hasOwnProperty("barycenter")}),l=o.lhs,c=o.rhs.sort((x,T)=>-x.i- -T.i),h=[];let p=0,m=0,y=0;l==null||l.sort(N4(!!a,!!i)),y=eA(h,c,y),l==null||l.forEach(x=>{var T;y+=(T=x.vs)===null||T===void 0?void 0:T.length,h.push(x.vs),p+=x.barycenter*x.weight,m+=x.weight,y=eA(h,c,y)});const S={vs:h.flat()};return m&&(S.barycenter=p/m,S.weight=m),S},eA=(n,a,i)=>{let u=i,o;for(;a.length&&(o=a[a.length-1]).i<=u;)a.pop(),n==null||n.push(o.vs),u++;return u},N4=(n,a)=>(i,u)=>{if(i.fixorder!==void 0&&u.fixorder!==void 0)return i.fixorder-u.fixorder;if(i.barycenter<u.barycenter)return-1;if(i.barycenter>u.barycenter)return 1;if(a&&i.order!==void 0&&u.order!==void 0){if(i.order<u.order)return-1;if(i.order>u.order)return 1}return n?u.i-i.i:i.i-u.i},BP=(n,a,i,u,o,l)=>{var c,h,p,m;let y=n.children(a);const S=n.node(a),x=S?S.borderLeft:void 0,T=S?S.borderRight:void 0,_={};x&&(y=y==null?void 0:y.filter(W=>W!==x&&W!==T));const N=T4(n,y||[]);N==null||N.forEach(W=>{var $;if(!(($=n.children(W.v))===null||$===void 0)&&$.length){const Oe=BP(n,W.v,i,u,l);_[W.v]=Oe,Oe.hasOwnProperty("barycenter")&&R4(W,Oe)}});const M=A4(N,i);M4(M,_),(c=M.filter(W=>W.vs.length>0))===null||c===void 0||c.forEach(W=>{const $=n.node(W.vs[0]);$&&(W.fixorder=$.fixorder,W.order=$.order)});const D=_4(M,u,o,l);if(x&&(D.vs=[x,D.vs,T].flat(),!((h=n.predecessors(x))===null||h===void 0)&&h.length)){const W=n.node(((p=n.predecessors(x))===null||p===void 0?void 0:p[0])||""),$=n.node(((m=n.predecessors(T))===null||m===void 0?void 0:m[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+W.order+$.order)/(D.weight+2),D.weight+=2}return D},M4=(n,a)=>{n==null||n.forEach(i=>{var u;const o=(u=i.vs)===null||u===void 0?void 0:u.map(l=>a[l]?a[l].vs:l);i.vs=o.flat()})},R4=(n,a)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+a.barycenter*a.weight)/(n.weight+a.weight),n.weight+=a.weight):(n.barycenter=a.barycenter,n.weight=a.weight)},I4=(n,a)=>{const i=PP(n),u=[],o=[];for(let y=1;y<i+1;y++)u.push(y);for(let y=i-1;y>-1;y--)o.push(y);const l=tA(n,u,"inEdges"),c=tA(n,o,"outEdges");let h=QT(n);ob(n,h);let p=Number.POSITIVE_INFINITY,m;for(let y=0,S=0;S<4;++y,++S){rA(y%2?l:c,y%4>=2,!1,a),h=jc(n);const x=qT(n,h);x<p&&(S=0,m=Mv(h),p=x)}h=QT(n),ob(n,h);for(let y=0,S=0;S<4;++y,++S){rA(y%2?l:c,y%4>=2,!0,a),h=jc(n);const x=qT(n,h);x<p&&(S=0,m=Mv(h),p=x)}ob(n,m)},tA=(n,a,i)=>a.map(u=>O4(n,u,i)),rA=(n,a,i,u)=>{const o=new Aa;n==null||n.forEach(l=>{var c;const h=l.graph().root,p=BP(l,h,o,a,i,u);for(let m=0;m<((c=p.vs)===null||c===void 0?void 0:c.length);m++){const y=l.node(p.vs[m]);y&&(y.order=m)}x4(l,o,p.vs)})},ob=(n,a)=>{a==null||a.forEach(i=>{i==null||i.forEach((u,o)=>{n.node(u).order=o})})};class D4 extends zl{}const C4=(n,a)=>{const i={},u=(o,l)=>{let c=0,h=0;const p=o.length,m=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((y,S)=>{var x;const T=j4(n,y),_=T?n.node(T).order:p;(T||y===m)&&((x=l.slice(h,S+1))===null||x===void 0||x.forEach(N=>{var M;(M=n.predecessors(N))===null||M===void 0||M.forEach(D=>{var W;const $=n.node(D),Oe=$.order;(Oe<c||_<Oe)&&!($.dummy&&(!((W=n.node(N))===null||W===void 0)&&W.dummy))&&FP(i,D,N)})}),h=S+1,c=_)}),l};return a!=null&&a.length&&a.reduce(u),i},L4=(n,a)=>{const i={};function u(h,p,m,y,S){var x,T;let _;for(let N=p;N<m;N++)_=h[N],!((x=n.node(_))===null||x===void 0)&&x.dummy&&((T=n.predecessors(_))===null||T===void 0||T.forEach(M=>{const D=n.node(M);D.dummy&&(D.order<y||D.order>S)&&FP(i,M,_)}))}function o(h){return JSON.stringify(h.slice(1))}function l(h,p){const m=o(h);p.get(m)||(u(...h),p.set(m,!0))}const c=(h,p)=>{let m=-1,y,S=0;const x=new Map;return p==null||p.forEach((T,_)=>{var N;if(((N=n.node(T))===null||N===void 0?void 0:N.dummy)==="border"){const M=n.predecessors(T)||[];M.length&&(y=n.node(M[0]).order,l([p,S,_,m,y],x),S=_,m=y)}l([p,S,p.length,y,h.length],x)}),p};return a!=null&&a.length&&a.reduce(c),i},j4=(n,a)=>{var i,u;if(!((i=n.node(a))===null||i===void 0)&&i.dummy)return(u=n.predecessors(a))===null||u===void 0?void 0:u.find(o=>n.node(o).dummy)},FP=(n,a,i)=>{let u=a,o=i;if(u>o){const c=u;u=o,o=c}let l=n[u];l||(n[u]=l={}),l[o]=!0},B4=(n,a,i)=>{let u=a,o=i;if(u>o){const l=a;u=o,o=l}return!!n[u]},F4=(n,a,i,u)=>{const o={},l={},c={};return a==null||a.forEach(h=>{h==null||h.forEach((p,m)=>{o[p]=p,l[p]=p,c[p]=m})}),a==null||a.forEach(h=>{let p=-1;h==null||h.forEach(m=>{let y=u(m);if(y.length){y=y.sort((x,T)=>c[x]-c[T]);const S=(y.length-1)/2;for(let x=Math.floor(S),T=Math.ceil(S);x<=T;++x){const _=y[x];l[m]===m&&p<c[_]&&!B4(i,m,_)&&(l[_]=m,l[m]=o[m]=o[_],p=c[_])}}})}),{root:o,align:l}},G4=(n,a,i,u,o)=>{var l;const c={},h=k4(n,a,i,o),p=o?"borderLeft":"borderRight",m=(x,T)=>{let _=h.nodes(),N=_.pop();const M={};for(;N;)M[N]?x(N):(M[N]=!0,_.push(N),_=_.concat(T(N))),N=_.pop()},y=x=>{c[x]=(h.inEdges(x)||[]).reduce((T,_)=>Math.max(T,(c[_.v]||0)+h.edge(_)),0)},S=x=>{const T=(h.outEdges(x)||[]).reduce((N,M)=>Math.min(N,(c[M.w]||0)-h.edge(M)),Number.POSITIVE_INFINITY),_=n.node(x);T!==Number.POSITIVE_INFINITY&&_.borderType!==p&&(c[x]=Math.max(c[x],T))};return m(y,h.predecessors.bind(h)),m(S,h.successors.bind(h)),(l=Object.values(u))===null||l===void 0||l.forEach(x=>{c[x]=c[i[x]]}),c},k4=(n,a,i,u)=>{const o=new D4,l=n.graph(),c=X4(l.nodesep,l.edgesep,u);return a==null||a.forEach(h=>{let p;h==null||h.forEach(m=>{const y=i[m];if(o.setNode(y),p){const S=i[p],x=o.edgeFromArgs(S,y);o.setEdge(S,y,Math.max(c(n,m,p),x||0))}p=m})}),o},U4=(n,a)=>zb(Object.values(a),i=>{var u;let o=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(u=Object.keys(i))===null||u===void 0||u.forEach(c=>{const h=i[c],p=$4(n,c)/2;o=Math.max(h+p,o),l=Math.min(h-p,l)}),o-l});function z4(n,a){const i=Object.values(a),u=Math.min(...i),o=Math.max(...i);["u","d"].forEach(l=>{["l","r"].forEach(c=>{const h=l+c,p=n[h];let m;if(p===a)return;const y=Object.values(p);m=c==="l"?u-Math.min(...y):o-Math.max(...y),m&&(n[h]={},Object.keys(p).forEach(S=>{n[h][S]=p[S]+m}))})})}const H4=(n,a)=>{const i={};return Object.keys(n.ul).forEach(u=>{if(a)i[u]=n[a.toLowerCase()][u];else{const o=Object.values(n).map(l=>l[u]);i[u]=(o[0]+o[1])/2}}),i},X4=(n,a,i)=>(u,o,l)=>{const c=u.node(o),h=u.node(l);let p=0,m;if(p+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":m=-c.width/2;break;case"r":m=c.width/2;break}if(m&&(p+=i?m:-m),m=0,p+=(c.dummy?a:n)/2,p+=(h.dummy?a:n)/2,p+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":m=h.width/2;break;case"r":m=-h.width/2;break}return m&&(p+=i?m:-m),m=0,p},$4=(n,a)=>n.node(a).width||0,V4=n=>{const a=jc(n),i=n.graph().ranksep;let u=0;a==null||a.forEach(o=>{const l=o.map(h=>n.node(h).height),c=Math.max(...l,0);o==null||o.forEach(h=>{n.node(h).y=u+c/2}),u+=c+i})},W4=n=>{const a=jc(n),i=Object.assign(C4(n,a),L4(n,a)),u={};let o=[];["u","d"].forEach(c=>{o=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(h=>{h==="r"&&(o=o.map(S=>Object.values(S).reverse()));const p=(c==="u"?n.predecessors:n.successors).bind(n),m=F4(n,o,i,p),y=G4(n,o,m.root,m.align,h==="r");h==="r"&&Object.keys(y).forEach(S=>y[S]=-y[S]),u[c+h]=y})});const l=U4(n,u);return l&&z4(u,l),H4(u,n.graph().align)},Y4=n=>{var a;const i=AP(n);V4(i);const u=W4(i);(a=Object.keys(u))===null||a===void 0||a.forEach(o=>{i.node(o).x=u[o]})},K4=(n,a)=>{const u=n.nodes().filter(c=>{var h;return!(!((h=n.children(c))===null||h===void 0)&&h.length)}).map(c=>n.node(c).rank),o=Math.max(...u),l=[];for(let c=0;c<o+1;c++)l[c]=[];a==null||a.forEach(c=>{const h=n.node(c);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=l[h.rank].length,l[h.rank].push(c))})},Z4=(n,a)=>{const i=a&&a.debugTiming?wP:_P;i("layout",()=>{a&&!a.keepNodeOrder&&a.prevGraph&&i("  inheritOrder",()=>{Q4(n,a.prevGraph)});const u=i("  buildLayoutGraph",()=>aG(n));a&&a.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{sG(u)});try{i("  runLayout",()=>{J4(u,i,a)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}i("  updateInputGraph",()=>{q4(n,u)})})},J4=(n,a,i)=>{a("    removeSelfEdges",()=>{yG(n)}),a("    acyclic",()=>{zT.run(n)}),a("    nestingGraph.run",()=>{YT.run(n)}),a("    rank",()=>{i4(AP(n))}),a("    injectEdgeLabelProxies",()=>{uG(n)}),a("    removeEmptyRanks",()=>{GF(n)}),a("    nestingGraph.cleanup",()=>{YT.cleanup(n)}),a("    normalizeRanks",()=>{FF(n)}),a("    assignRankMinMax",()=>{lG(n)}),a("    removeEdgeLabelProxies",()=>{fG(n)}),a("    normalize.run",()=>{$T.run(n)}),a("    parentDummyChains",()=>{f4(n)}),a("    addBorderSegments",()=>{v4(n)}),i&&i.keepNodeOrder&&a("    initDataOrder",()=>{K4(n,i.nodeOrder)}),a("    order",()=>{I4(n,i==null?void 0:i.keepNodeOrder)}),a("    insertSelfEdges",()=>{gG(n)}),a("    adjustCoordinateSystem",()=>{JT.adjust(n)}),a("    position",()=>{Y4(n)}),a("    positionSelfEdges",()=>{mG(n)}),a("    removeBorderNodes",()=>{vG(n)}),a("    normalize.undo",()=>{$T.undo(n)}),a("    fixupEdgeLabelCoords",()=>{hG(n)}),a("    undoCoordinateSystem",()=>{JT.undo(n)}),a("    translateGraph",()=>{cG(n)}),a("    assignNodeIntersects",()=>{dG(n)}),a("    reversePoints",()=>{pG(n)}),a("    acyclic.undo",()=>{zT.undo(n)})},Q4=(n,a)=>{n.nodes().forEach(i=>{const u=n.node(i),o=a.node(i);o!==void 0?(u.fixorder=o._order,delete o._order):delete u.fixorder})},q4=(n,a)=>{n.nodes().forEach(i=>{var u;const o=n.node(i);if(o){const l=a.node(i);o.x=l.x,o.y=l.y,o._order=l.order,o._rank=l.rank,!((u=a.children(i))===null||u===void 0)&&u.length&&(o.width=l.width,o.height=l.height)}}),n.edges().forEach(i=>{const u=n.edge(i),o=a.edge(i);u.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(u.x=o.x,u.y=o.y)}),n.graph().width=a.graph().width,n.graph().height=a.graph().height},eG=["nodesep","edgesep","ranksep","marginx","marginy"],tG={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ib=["acyclicer","ranker","rankdir","align"],rG=["width","height","layer","fixorder"],nG={width:0,height:0},oG=["minlen","weight","width","height","labeloffset"],iG={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ab=["labelpos"],aG=n=>{const a=new Aa({multigraph:!0,compound:!0}),i=ub(n.graph()),u={};return ib==null||ib.forEach(o=>{i[o]!==void 0&&(u[o]=i[o])}),a.setGraph(Object.assign({},tG,sb(i,eG),u)),n.nodes().forEach(o=>{const l=ub(n.node(o)),c=Object.assign(Object.assign({},nG),l),h=sb(c,rG);a.setNode(o,h),a.setParent(o,n.parent(o))}),n.edges().forEach(o=>{const l=ub(n.edge(o)),c={};ab==null||ab.forEach(h=>{l[h]!==void 0&&(c[h]=l[h])}),a.setEdgeObj(o,Object.assign({},iG,sb(l,oG),c))}),a},sG=n=>{const a=n.graph();a.ranksep||(a.ranksep=0),a.ranksep/=2,n.nodes().forEach(i=>{const u=n.node(i);isNaN(u.layer)||u.layer||(u.layer=0)}),n.edges().forEach(i=>{var u;const o=n.edge(i);o.minlen*=2,((u=o.labelpos)===null||u===void 0?void 0:u.toLowerCase())!=="c"&&(a.rankdir==="TB"||a.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},uG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.width&&i.height){const u=n.node(a.v),o=n.node(a.w),l={e:a,rank:(o.rank-u.rank)/2+u.rank};Hl(n,"edge-proxy",l,"_ep")}})},lG=n=>{let a=0;n.nodes().forEach(i=>{var u,o;const l=n.node(i);l.borderTop&&(l.minRank=(u=n.node(l.borderTop))===null||u===void 0?void 0:u.rank,l.maxRank=(o=n.node(l.borderBottom))===null||o===void 0?void 0:o.rank,a=Math.max(a,l.maxRank||-1/0))}),n.graph().maxRank=a},fG=n=>{n.nodes().forEach(a=>{const i=n.node(a);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(a))})},cG=n=>{let a,i=0,u,o=0;const l=n.graph(),c=l.marginx||0,h=l.marginy||0,p=m=>{if(!m)return;const y=m.x,S=m.y,x=m.width,T=m.height;!isNaN(y)&&!isNaN(x)&&(a===void 0&&(a=y-x/2),a=Math.min(a,y-x/2),i=Math.max(i,y+x/2)),!isNaN(S)&&!isNaN(T)&&(u===void 0&&(u=S-T/2),u=Math.min(u,S-T/2),o=Math.max(o,S+T/2))};n.nodes().forEach(m=>{p(n.node(m))}),n.edges().forEach(m=>{const y=n.edge(m);y!=null&&y.hasOwnProperty("x")&&p(y)}),a-=c,u-=h,n.nodes().forEach(m=>{const y=n.node(m);y&&(y.x-=a,y.y-=u)}),n.edges().forEach(m=>{var y;const S=n.edge(m);(y=S.points)===null||y===void 0||y.forEach(x=>{x.x-=a,x.y-=u}),S.hasOwnProperty("x")&&(S.x-=a),S.hasOwnProperty("y")&&(S.y-=u)}),l.width=i-a+c,l.height=o-u+h},dG=n=>{n.edges().forEach(a=>{const i=n.edge(a),u=n.node(a.v),o=n.node(a.w);let l,c;i.points?(l=i.points[0],c=i.points[i.points.length-1]):(i.points=[],l=o,c=u),i.points.unshift(HT(u,l)),i.points.push(HT(o,c))})},hG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i!=null&&i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},pG=n=>{n.edges().forEach(a=>{var i;const u=n.edge(a);u.reversed&&((i=u.points)===null||i===void 0||i.reverse())})},vG=n=>{n.nodes().forEach(a=>{var i,u,o;if(!((i=n.children(a))===null||i===void 0)&&i.length){const l=n.node(a),c=n.node(l.borderTop),h=n.node(l.borderBottom),p=n.node(l.borderLeft[((u=l.borderLeft)===null||u===void 0?void 0:u.length)-1]),m=n.node(l.borderRight[((o=l.borderRight)===null||o===void 0?void 0:o.length)-1]);l.width=Math.abs((m==null?void 0:m.x)-(p==null?void 0:p.x))||10,l.height=Math.abs((h==null?void 0:h.y)-(c==null?void 0:c.y))||10,l.x=((p==null?void 0:p.x)||0)+l.width/2,l.y=((c==null?void 0:c.y)||0)+l.height/2}}),n.nodes().forEach(a=>{var i;((i=n.node(a))===null||i===void 0?void 0:i.dummy)==="border"&&n.removeNode(a)})},yG=n=>{n.edges().forEach(a=>{if(a.v===a.w){const i=n.node(a.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:a,label:n.edge(a)}),n.removeEdgeObj(a)}})},gG=n=>{const a=jc(n);a==null||a.forEach(i=>{let u=0;i==null||i.forEach((o,l)=>{var c;const h=n.node(o);h.order=l+u,(c=h.selfEdges)===null||c===void 0||c.forEach(p=>{Hl(n,"selfedge",{width:p.label.width,height:p.label.height,rank:h.rank,order:l+ ++u,e:p.e,label:p.label},"_se")}),delete h.selfEdges})})},mG=n=>{n.nodes().forEach(a=>{const i=n.node(a);if(i.dummy==="selfedge"){const u=n.node(i.e.v),o=u.x+u.width/2,l=u.y,c=i.x-o,h=u.height/2;n.setEdgeObj(i.e,i.label),n.removeNode(a),i.label.points=[{x:o+2*c/3,y:l-h},{x:o+5*c/6,y:l-h},{y:l,x:o+c},{x:o+5*c/6,y:l+h},{x:o+2*c/3,y:l+h}],i.label.x=i.x,i.label.y=i.y}})},sb=(n,a)=>{const i={};return a==null||a.forEach(u=>{n[u]!==void 0&&(i[u]=+n[u])}),i},ub=(n={})=>{const a={};return Object.keys(n).forEach(i=>{a[i.toLowerCase()]=n[i]}),a},bG={layout:Z4,util:{time:wP,notime:_P}};class EG extends k3{constructor(a){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const u=this,{nodes:o}=u,l=o.find(c=>c.id===i);return l?l.layout!==!1:!0},this.updateCfg(a)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var a,i,u;const o=this,{nodes:l,nodeSize:c,rankdir:h,combos:p,begin:m,radial:y,comboEdges:S=[],vedges:x=[]}=o;if(!l)return;const T=o.edges||[],_=new Aa({multigraph:!0,compound:!0});o.nodeMap={};const N={};l.forEach(j=>{o.nodeMap[j.id]=j,j.comboId&&(N[j.comboId]=N[j.comboId]||[],N[j.comboId].push(j.id))});let M;c?NT(c)?M=()=>c:M=()=>[c,c]:M=j=>j.size?NT(j.size)?j.size:mP(j.size)?[j.size.width||40,j.size.height||40]:[j.size,j.size]:[40,40];const D=MT(o.ranksep,50,o.ranksepFunc),W=MT(o.nodesep,50,o.nodesepFunc);let $=W,Oe=D;(h==="LR"||h==="RL")&&($=D,Oe=W),_.setDefaultEdgeLabel(()=>({})),_.setGraph(o);const ge={};this.sortByCombo&&p&&p.forEach(j=>{if(ge[j.id]=j,j.collapsed){const Q=M(j),U=Oe(j),I=$(j),k=Q[0]+2*I,te=Q[1]+2*U;_.setNode(j.id,{width:k,height:te})}j.parentId&&(ge[j.parentId]||_.setNode(j.parentId,{}),_.setParent(j.id,j.parentId))}),l.filter(j=>j.layout!==!1).forEach(j=>{const Q=M(j),U=Oe(j),I=$(j),k=Q[0]+2*I,te=Q[1]+2*U,V=j.layer;Nv(V)?_.setNode(j.id,{width:k,height:te,layer:V}):_.setNode(j.id,{width:k,height:te}),this.sortByCombo&&j.comboId&&(ge[j.comboId]||(ge[j.comboId]={id:j.comboId},_.setNode(j.comboId,{})),_.setParent(j.id,j.comboId))}),T.forEach(j=>{const Q=wl(j,"source"),U=wl(j,"target");this.layoutNode(Q)&&this.layoutNode(U)&&_.setEdge(Q,U,{weight:j.weight||1})}),(a=S==null?void 0:S.concat(x||[]))===null||a===void 0||a.forEach(j=>{var Q,U;const{source:I,target:k}=j,te=!((Q=ge[I])===null||Q===void 0)&&Q.collapsed?[I]:N[I]||[I],V=!((U=ge[k])===null||U===void 0)&&U.collapsed?[k]:N[k]||[k];te.forEach(Z=>{V.forEach(le=>{_.setEdge(Z,le,{weight:j.weight||1})})})});let de;!((i=o.preset)===null||i===void 0)&&i.nodes&&(de=new Aa({multigraph:!0,compound:!0}),o.preset.nodes.forEach(j=>{de==null||de.setNode(j.id,j)})),bG.layout(_,{prevGraph:de,edgeLabelSpace:o.edgeLabelSpace,keepNodeOrder:!!o.nodeOrder,nodeOrder:o.nodeOrder});const ce=[0,0];if(m){let j=1/0,Q=1/0;_.nodes().forEach(U=>{const I=_.node(U);j>I.x&&(j=I.x),Q>I.y&&(Q=I.y)}),_.edges().forEach(U=>{var I;(I=_.edge(U).points)===null||I===void 0||I.forEach(te=>{j>te.x&&(j=te.x),Q>te.y&&(Q=te.y)})}),ce[0]=m[0]-j,ce[1]=m[1]-Q}const Me=h==="LR"||h==="RL";if(y){const{focusNode:j,ranksep:Q,getRadialPos:U}=this,I=U3(j)?j:j==null?void 0:j.id,k=I?(u=_.node(I))===null||u===void 0?void 0:u._rank:0,te=[],V=Me?"y":"x",Z=Me?"height":"width";let le=1/0,Te=-1/0;_.nodes().forEach(Ge=>{const bt=_.node(Ge),Ut=l.findIndex(Ue=>Ue.id===Ge);if(!l[Ut])return;const ee=W(l[Ut]);if(k===0)te[bt._rank]||(te[bt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),te[bt._rank].nodes.push(Ge),te[bt._rank].totalWidth+=ee*2+bt[Z],te[bt._rank].maxSize<Math.max(bt.width,bt.height)&&(te[bt._rank].maxSize=Math.max(bt.width,bt.height));else{const Ue=bt._rank-k;if(Ue===0)te[Ue]||(te[Ue]={nodes:[],totalWidth:0,maxSize:-1/0}),te[Ue].nodes.push(Ge),te[Ue].totalWidth+=ee*2+bt[Z],te[Ue].maxSize<Math.max(bt.width,bt.height)&&(te[Ue].maxSize=Math.max(bt.width,bt.height));else{const tt=Math.abs(Ue);te[tt]||(te[tt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),te[tt].totalWidth+=ee*2+bt[Z],te[tt].maxSize<Math.max(bt.width,bt.height)&&(te[tt].maxSize=Math.max(bt.width,bt.height)),Ue<0?te[tt].left.push(Ge):te[tt].right.push(Ge)}}const se=bt[V]-bt[Z]/2-ee,me=bt[V]+bt[Z]/2+ee;se<le&&(le=se),me>Te&&(Te=me)});let Re=Q||50;const Pe={},Ke=(Te-le)/.9,gt=[(le+Te-Ke)*.5,(le+Te+Ke)*.5],Nt=(Ge,bt,Ut=-1/0,ee=[0,1])=>{let se=Ut;return Ge.forEach(me=>{const Ue=_.node(me);Pe[me]=bt;const{x:tt,y:He}=U(Ue[V],gt,Ke,bt,ee),Lt=l.findIndex(tr=>tr.id===me);if(!l[Lt])return;l[Lt].x=tt+ce[0],l[Lt].y=He+ce[1],l[Lt]._order=Ue._order;const nr=D(l[Lt]);se<nr&&(se=nr)}),se};let Vt=!0;const Ct=0;te.forEach(Ge=>{var bt,Ut,ee,se,me,Ue,tt;if(!(!((bt=Ge==null?void 0:Ge.nodes)===null||bt===void 0)&&bt.length)&&!(!((Ut=Ge==null?void 0:Ge.left)===null||Ut===void 0)&&Ut.length)&&!(!((ee=Ge==null?void 0:Ge.right)===null||ee===void 0)&&ee.length))return;if(Vt&&Ge.nodes.length===1){const Lt=l.findIndex(nr=>nr.id===Ge.nodes[0]);if(Lt<=-1)return;l[Lt].x=ce[0],l[Lt].y=ce[1],Pe[Ge.nodes[0]]=0,Re=D(l[Lt]),Vt=!1;return}Re=Math.max(Re,Ge.totalWidth/(2*Math.PI));let He=-1/0;if(k===0||!((se=Ge.nodes)===null||se===void 0)&&se.length)He=Nt(Ge.nodes,Re,He,[0,1]);else{const Lt=((me=Ge.left)===null||me===void 0?void 0:me.length)/(((Ue=Ge.left)===null||Ue===void 0?void 0:Ue.length)+((tt=Ge.right)===null||tt===void 0?void 0:tt.length));He=Nt(Ge.left,Re,He,[0,Lt]),He=Nt(Ge.right,Re,He,[Lt+.05,1])}Re+=He,Vt=!1,Ct-Ge.maxSize}),_.edges().forEach(Ge=>{var bt,Ut,ee;const se=_.edge(Ge),me=T.findIndex(Ue=>{const tt=wl(Ue,"source"),He=wl(Ue,"target");return tt===Ge.v&&He===Ge.w});if(!(me<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[me].type!=="loop"){const Ue=V==="x"?"y":"x",tt=(bt=se==null?void 0:se.points)===null||bt===void 0?void 0:bt.slice(1,se.points.length-1),He=[],Lt=(Ut=_.node(Ge.v))===null||Ut===void 0?void 0:Ut[Ue],nr=Lt-((ee=_.node(Ge.w))===null||ee===void 0?void 0:ee[Ue]),tr=Pe[Ge.v],Jt=tr-Pe[Ge.w];tt==null||tt.forEach(rt=>{const Er=(rt[Ue]-Lt)/nr*Jt+tr,ur=U(rt[V],gt,Ke,Er);He.push({x:ur.x+ce[0],y:ur.y+ce[1]})}),T[me].controlPoints=He}})}else{const j=new Set,U=h==="BT"||h==="RL"?(V,Z)=>Z-V:(V,Z)=>V-Z;_.nodes().forEach(V=>{const Z=_.node(V);if(!Z)return;let le=this.nodeMap[V];le||(le=p==null?void 0:p.find(Te=>Te.id===V)),le&&(le.x=Z.x+ce[0],le.y=Z.y+ce[1],le._order=Z._order,j.add(Me?le.x:le.y))});const I=Array.from(j).sort(U),k=Me?(V,Z)=>V.x!==Z.x:(V,Z)=>V.y!==Z.y,te=Me?(V,Z,le)=>{const Te=Math.max(Z.y,le.y),Re=Math.min(Z.y,le.y);return V.filter(Pe=>Pe.y<=Te&&Pe.y>=Re)}:(V,Z,le)=>{const Te=Math.max(Z.x,le.x),Re=Math.min(Z.x,le.x);return V.filter(Pe=>Pe.x<=Te&&Pe.x>=Re)};_.edges().forEach(V=>{const Z=_.edge(V),le=T.findIndex(Te=>{const Re=wl(Te,"source"),Pe=wl(Te,"target");return Re===V.v&&Pe===V.w});if(!(le<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[le].type!=="loop"){const Te=o.nodeMap[V.v],Re=o.nodeMap[V.w];T[le].controlPoints=OG(Z==null?void 0:Z.points,Te,Re,I,Me,k,te),T[le].controlPoints.forEach(Pe=>{Pe.x+=ce[0],Pe.y+=ce[1]})}})}return o.onLayoutEnd&&o.onLayoutEnd(),{nodes:l,edges:T}}getRadialPos(a,i,u,o,l=[0,1]){let c=(a-i[0])/u;c=c*(l[1]-l[0])+l[0];const h=c*2*Math.PI;return{x:Math.cos(h)*o,y:Math.sin(h)*o}}getType(){return"dagre"}}const OG=(n,a,i,u,o,l,c)=>{let h=(n==null?void 0:n.slice(1,n.length-1))||[];if(a&&i){let{x:p,y:m}=a,{x:y,y:S}=i;if(o&&(p=a.y,m=a.x,y=i.y,S=i.x),S!==m&&p!==y){const x=u.indexOf(m),T=u[x+1];if(T){const M=h[0],D=o?{x:(m+T)/2,y:(M==null?void 0:M.y)||y}:{x:(M==null?void 0:M.x)||y,y:(m+T)/2};(!M||l(M,D))&&h.unshift(D)}const _=u.indexOf(S),N=Math.abs(_-x);if(N===1)h=c(h,a,i),h.length||h.push(o?{x:(m+S)/2,y:p}:{x:p,y:(m+S)/2});else if(N>1){const M=u[_-1];if(M){const D=h[h.length-1],W=o?{x:(S+M)/2,y:(D==null?void 0:D.y)||y}:{x:(D==null?void 0:D.x)||p,y:(S+M)/2};(!D||l(D,W))&&h.push(W)}}}}return h};var nA,oA,iA,aA;(function(n){n[n.META=0]="META",n[n.NODE=1]="NODE",n[n.BRIDGE=2]="BRIDGE"})(nA||(nA={})),function(n){n[n.INCLUDE=0]="INCLUDE",n[n.EXCLUDE=1]="EXCLUDE",n[n.UNSPECIFIED=2]="UNSPECIFIED"}(oA||(oA={})),function(n){n[n.META=0]="META",n[n.CORE=1]="CORE",n[n.BRIDGE=2]="BRIDGE"}(iA||(iA={})),function(n){n[n.META=0]="META",n[n.OP=1]="OP",n[n.SERIES=2]="SERIES"}(aA||(aA={}));var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hb(n,a){return n(a={exports:{}},a.exports),a.exports}var SG=function(){this.__data__=[],this.size=0},Xl=function(n,a){return n===a||n!=n&&a!=a},Uv=function(n,a){for(var i=n.length;i--;)if(Xl(n[i][0],a))return i;return-1},xG=Array.prototype.splice,TG=function(n){var a=this.__data__,i=Uv(a,n);return!(i<0)&&(i==a.length-1?a.pop():xG.call(a,i,1),--this.size,!0)},AG=function(n){var a=this.__data__,i=Uv(a,n);return i<0?void 0:a[i][1]},PG=function(n){return Uv(this.__data__,n)>-1},wG=function(n,a){var i=this.__data__,u=Uv(i,n);return u<0?(++this.size,i.push([n,a])):i[u][1]=a,this};function _l(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}_l.prototype.clear=SG,_l.prototype.delete=TG,_l.prototype.get=AG,_l.prototype.has=PG,_l.prototype.set=wG;var zv=_l,_G=function(){this.__data__=new zv,this.size=0},NG=function(n){var a=this.__data__,i=a.delete(n);return this.size=a.size,i},MG=function(n){return this.__data__.get(n)},RG=function(n){return this.__data__.has(n)},GP=typeof hv=="object"&&hv&&hv.Object===Object&&hv,IG=typeof self=="object"&&self&&self.Object===Object&&self,li=GP||IG||Function("return this")(),$o=li.Symbol,kP=Object.prototype,DG=kP.hasOwnProperty,CG=kP.toString,Ec=$o?$o.toStringTag:void 0,LG=function(n){var a=DG.call(n,Ec),i=n[Ec];try{n[Ec]=void 0;var u=!0}catch{}var o=CG.call(n);return u&&(a?n[Ec]=i:delete n[Ec]),o},jG=Object.prototype.toString,BG=function(n){return jG.call(n)},sA=$o?$o.toStringTag:void 0,xs=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":sA&&sA in Object(n)?LG(n):BG(n)},Oo=function(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")},uA,Uc=function(n){if(!Oo(n))return!1;var a=xs(n);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"},lb=li["__core-js_shared__"],lA=(uA=/[^.]+$/.exec(lb&&lb.keys&&lb.keys.IE_PROTO||""))?"Symbol(src)_1."+uA:"",FG=function(n){return!!lA&&lA in n},GG=Function.prototype.toString,pu=function(n){if(n!=null){try{return GG.call(n)}catch{}try{return n+""}catch{}}return""},kG=/^\[object .+?Constructor\]$/,UG=Function.prototype,zG=Object.prototype,HG=UG.toString,XG=zG.hasOwnProperty,$G=RegExp("^"+HG.call(XG).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),VG=function(n){return!(!Oo(n)||FG(n))&&(Uc(n)?$G:kG).test(pu(n))},WG=function(n,a){return n==null?void 0:n[a]},vu=function(n,a){var i=WG(n,a);return VG(i)?i:void 0},Bc=vu(li,"Map"),Fc=vu(Object,"create"),YG=function(){this.__data__=Fc?Fc(null):{},this.size=0},KG=function(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a},ZG=Object.prototype.hasOwnProperty,JG=function(n){var a=this.__data__;if(Fc){var i=a[n];return i==="__lodash_hash_undefined__"?void 0:i}return ZG.call(a,n)?a[n]:void 0},QG=Object.prototype.hasOwnProperty,qG=function(n){var a=this.__data__;return Fc?a[n]!==void 0:QG.call(a,n)},e5=function(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=Fc&&a===void 0?"__lodash_hash_undefined__":a,this};function Nl(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Nl.prototype.clear=YG,Nl.prototype.delete=KG,Nl.prototype.get=JG,Nl.prototype.has=qG,Nl.prototype.set=e5;var fA=Nl,t5=function(){this.size=0,this.__data__={hash:new fA,map:new(Bc||zv),string:new fA}},r5=function(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null},Hv=function(n,a){var i=n.__data__;return r5(a)?i[typeof a=="string"?"string":"hash"]:i.map},n5=function(n){var a=Hv(this,n).delete(n);return this.size-=a?1:0,a},o5=function(n){return Hv(this,n).get(n)},i5=function(n){return Hv(this,n).has(n)},a5=function(n,a){var i=Hv(this,n),u=i.size;return i.set(n,a),this.size+=i.size==u?0:1,this};function Ml(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Ml.prototype.clear=t5,Ml.prototype.delete=n5,Ml.prototype.get=o5,Ml.prototype.has=i5,Ml.prototype.set=a5;var Xv=Ml,s5=function(n,a){var i=this.__data__;if(i instanceof zv){var u=i.__data__;if(!Bc||u.length<199)return u.push([n,a]),this.size=++i.size,this;i=this.__data__=new Xv(u)}return i.set(n,a),this.size=i.size,this};function Rl(n){var a=this.__data__=new zv(n);this.size=a.size}Rl.prototype.clear=_G,Rl.prototype.delete=NG,Rl.prototype.get=MG,Rl.prototype.has=RG,Rl.prototype.set=s5;var jl=Rl,Xb=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u&&a(n[i],i,n)!==!1;);return n},Rv=function(){try{var n=vu(Object,"defineProperty");return n({},"",{}),n}catch{}}(),$v=function(n,a,i){a=="__proto__"&&Rv?Rv(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i},u5=Object.prototype.hasOwnProperty,Vv=function(n,a,i){var u=n[a];u5.call(n,a)&&Xl(u,i)&&(i!==void 0||a in n)||$v(n,a,i)},zc=function(n,a,i,u){var o=!i;i||(i={});for(var l=-1,c=a.length;++l<c;){var h=a[l],p=u?u(i[h],n[h],h,i,n):void 0;p===void 0&&(p=n[h]),o?$v(i,h,p):Vv(i,h,p)}return i},l5=function(n,a){for(var i=-1,u=Array(n);++i<n;)u[i]=a(i);return u},ui=function(n){return n!=null&&typeof n=="object"},cA=function(n){return ui(n)&&xs(n)=="[object Arguments]"},UP=Object.prototype,f5=UP.hasOwnProperty,c5=UP.propertyIsEnumerable,kl=cA(function(){return arguments}())?cA:function(n){return ui(n)&&f5.call(n,"callee")&&!c5.call(n,"callee")},mn=Array.isArray,d5=function(){return!1},fu=Hb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?li.Buffer:void 0,l=(o?o.isBuffer:void 0)||d5;n.exports=l}),h5=/^(?:0|[1-9]\d*)$/,Wv=function(n,a){var i=typeof n;return!!(a=a??9007199254740991)&&(i=="number"||i!="symbol"&&h5.test(n))&&n>-1&&n%1==0&&n<a},$b=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},sn={};sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object Boolean]"]=sn["[object DataView]"]=sn["[object Date]"]=sn["[object Error]"]=sn["[object Function]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object WeakMap]"]=!1;var p5=function(n){return ui(n)&&$b(n.length)&&!!sn[xs(n)]},Yv=function(n){return function(a){return n(a)}},Ul=Hb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i&&GP.process,l=function(){try{var c=u&&u.require&&u.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();n.exports=l}),dA=Ul&&Ul.isTypedArray,Hc=dA?Yv(dA):p5,v5=Object.prototype.hasOwnProperty,zP=function(n,a){var i=mn(n),u=!i&&kl(n),o=!i&&!u&&fu(n),l=!i&&!u&&!o&&Hc(n),c=i||u||o||l,h=c?l5(n.length,String):[],p=h.length;for(var m in n)!a&&!v5.call(n,m)||c&&(m=="length"||o&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Wv(m,p))||h.push(m);return h},y5=Object.prototype,Kv=function(n){var a=n&&n.constructor;return n===(typeof a=="function"&&a.prototype||y5)},HP=function(n,a){return function(i){return n(a(i))}},g5=HP(Object.keys,Object),m5=Object.prototype.hasOwnProperty,Vb=function(n){if(!Kv(n))return g5(n);var a=[];for(var i in Object(n))m5.call(n,i)&&i!="constructor"&&a.push(i);return a},Pa=function(n){return n!=null&&$b(n.length)&&!Uc(n)},Ts=function(n){return Pa(n)?zP(n):Vb(n)},b5=function(n,a){return n&&zc(a,Ts(a),n)},E5=function(n){var a=[];if(n!=null)for(var i in Object(n))a.push(i);return a},O5=Object.prototype.hasOwnProperty,S5=function(n){if(!Oo(n))return E5(n);var a=Kv(n),i=[];for(var u in n)(u!="constructor"||!a&&O5.call(n,u))&&i.push(u);return i},yu=function(n){return Pa(n)?zP(n,!0):S5(n)},x5=function(n,a){return n&&zc(a,yu(a),n)},XP=Hb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?li.Buffer:void 0,l=o?o.allocUnsafe:void 0;n.exports=function(c,h){if(h)return c.slice();var p=c.length,m=l?l(p):new c.constructor(p);return c.copy(m),m}}),$P=function(n,a){var i=-1,u=n.length;for(a||(a=Array(u));++i<u;)a[i]=n[i];return a},VP=function(n,a){for(var i=-1,u=n==null?0:n.length,o=0,l=[];++i<u;){var c=n[i];a(c,i,n)&&(l[o++]=c)}return l},WP=function(){return[]},T5=Object.prototype.propertyIsEnumerable,hA=Object.getOwnPropertySymbols,Wb=hA?function(n){return n==null?[]:(n=Object(n),VP(hA(n),function(a){return T5.call(n,a)}))}:WP,A5=function(n,a){return zc(n,Wb(n),a)},Yb=function(n,a){for(var i=-1,u=a.length,o=n.length;++i<u;)n[o+i]=a[i];return n},Zv=HP(Object.getPrototypeOf,Object),YP=Object.getOwnPropertySymbols?function(n){for(var a=[];n;)Yb(a,Wb(n)),n=Zv(n);return a}:WP,P5=function(n,a){return zc(n,YP(n),a)},KP=function(n,a,i){var u=a(n);return mn(n)?u:Yb(u,i(n))},Sb=function(n){return KP(n,Ts,Wb)},w5=function(n){return KP(n,yu,YP)},xb=vu(li,"DataView"),Tb=vu(li,"Promise"),Bl=vu(li,"Set"),Ab=vu(li,"WeakMap"),_5=pu(xb),N5=pu(Bc),M5=pu(Tb),R5=pu(Bl),I5=pu(Ab),uu=xs;(xb&&uu(new xb(new ArrayBuffer(1)))!="[object DataView]"||Bc&&uu(new Bc)!="[object Map]"||Tb&&uu(Tb.resolve())!="[object Promise]"||Bl&&uu(new Bl)!="[object Set]"||Ab&&uu(new Ab)!="[object WeakMap]")&&(uu=function(n){var a=xs(n),i=a=="[object Object]"?n.constructor:void 0,u=i?pu(i):"";if(u)switch(u){case _5:return"[object DataView]";case N5:return"[object Map]";case M5:return"[object Promise]";case R5:return"[object Set]";case I5:return"[object WeakMap]"}return a});var cu=uu,D5=Object.prototype.hasOwnProperty,C5=function(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&D5.call(n,"index")&&(i.index=n.index,i.input=n.input),i},Iv=li.Uint8Array,Kb=function(n){var a=new n.constructor(n.byteLength);return new Iv(a).set(new Iv(n)),a},L5=function(n,a){var i=a?Kb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)},j5=/\w*$/,B5=function(n){var a=new n.constructor(n.source,j5.exec(n));return a.lastIndex=n.lastIndex,a},pA=$o?$o.prototype:void 0,vA=pA?pA.valueOf:void 0,F5=function(n){return vA?Object(vA.call(n)):{}},ZP=function(n,a){var i=a?Kb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)},G5=function(n,a,i){var u=n.constructor;switch(a){case"[object ArrayBuffer]":return Kb(n);case"[object Boolean]":case"[object Date]":return new u(+n);case"[object DataView]":return L5(n,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ZP(n,i);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(n);case"[object RegExp]":return B5(n);case"[object Set]":return new u;case"[object Symbol]":return F5(n)}},yA=Object.create,JP=function(){function n(){}return function(a){if(!Oo(a))return{};if(yA)return yA(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}(),QP=function(n){return typeof n.constructor!="function"||Kv(n)?{}:JP(Zv(n))},k5=function(n){return ui(n)&&cu(n)=="[object Map]"},gA=Ul&&Ul.isMap,U5=gA?Yv(gA):k5,z5=function(n){return ui(n)&&cu(n)=="[object Set]"},mA=Ul&&Ul.isSet,H5=mA?Yv(mA):z5,rn={};rn["[object Arguments]"]=rn["[object Array]"]=rn["[object ArrayBuffer]"]=rn["[object DataView]"]=rn["[object Boolean]"]=rn["[object Date]"]=rn["[object Float32Array]"]=rn["[object Float64Array]"]=rn["[object Int8Array]"]=rn["[object Int16Array]"]=rn["[object Int32Array]"]=rn["[object Map]"]=rn["[object Number]"]=rn["[object Object]"]=rn["[object RegExp]"]=rn["[object Set]"]=rn["[object String]"]=rn["[object Symbol]"]=rn["[object Uint8Array]"]=rn["[object Uint8ClampedArray]"]=rn["[object Uint16Array]"]=rn["[object Uint32Array]"]=!0,rn["[object Error]"]=rn["[object Function]"]=rn["[object WeakMap]"]=!1;var qP=function n(a,i,u,o,l,c){var h,p=1&i,m=2&i,y=4&i;if(u&&(h=l?u(a,o,l,c):u(a)),h!==void 0)return h;if(!Oo(a))return a;var S=mn(a);if(S){if(h=C5(a),!p)return $P(a,h)}else{var x=cu(a),T=x=="[object Function]"||x=="[object GeneratorFunction]";if(fu(a))return XP(a,p);if(x=="[object Object]"||x=="[object Arguments]"||T&&!l){if(h=m||T?{}:QP(a),!p)return m?P5(a,x5(h,a)):A5(a,b5(h,a))}else{if(!rn[x])return l?a:{};h=G5(a,x,p)}}c||(c=new jl);var _=c.get(a);if(_)return _;c.set(a,h),H5(a)?a.forEach(function(M){h.add(n(M,i,u,M,a,c))}):U5(a)&&a.forEach(function(M,D){h.set(D,n(M,i,u,D,a,c))});var N=S?void 0:(y?m?w5:Sb:m?yu:Ts)(a);return Xb(N||a,function(M,D){N&&(M=a[D=M]),Vv(h,D,n(M,i,u,D,a,c))}),h},X5=function(n){return qP(n,4)},Zb=function(n){return function(){return n}},Jb=function(n){return function(a,i,u){for(var o=-1,l=Object(a),c=u(a),h=c.length;h--;){var p=c[n?h:++o];if(i(l[p],p,l)===!1)break}return a}}(),Qb=function(n,a){return n&&Jb(n,a,Ts)},Jv=function(n,a){return function(i,u){if(i==null)return i;if(!Pa(i))return n(i,u);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&u(c[l],l,c)!==!1;);return i}}(Qb),gu=function(n){return n},ew=function(n){return typeof n=="function"?n:gu},tw=function(n,a){return(mn(n)?Xb:Jv)(n,ew(a))},rw=tw,$5=function(n,a){var i=[];return Jv(n,function(u,o,l){a(u,o,l)&&i.push(u)}),i},V5=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},W5=function(n){return this.__data__.has(n)};function Ov(n){var a=-1,i=n==null?0:n.length;for(this.__data__=new Xv;++a<i;)this.add(n[a])}Ov.prototype.add=Ov.prototype.push=V5,Ov.prototype.has=W5;var nw=Ov,Y5=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u;)if(a(n[i],i,n))return!0;return!1},ow=function(n,a){return n.has(a)},iw=function(n,a,i,u,o,l){var c=1&i,h=n.length,p=a.length;if(h!=p&&!(c&&p>h))return!1;var m=l.get(n),y=l.get(a);if(m&&y)return m==a&&y==n;var S=-1,x=!0,T=2&i?new nw:void 0;for(l.set(n,a),l.set(a,n);++S<h;){var _=n[S],N=a[S];if(u)var M=c?u(N,_,S,a,n,l):u(_,N,S,n,a,l);if(M!==void 0){if(M)continue;x=!1;break}if(T){if(!Y5(a,function(D,W){if(!ow(T,W)&&(_===D||o(_,D,i,u,l)))return T.push(W)})){x=!1;break}}else if(_!==N&&!o(_,N,i,u,l)){x=!1;break}}return l.delete(n),l.delete(a),x},K5=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u,o){i[++a]=[o,u]}),i},qb=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u){i[++a]=u}),i},bA=$o?$o.prototype:void 0,fb=bA?bA.valueOf:void 0,Z5=function(n,a,i,u,o,l,c){switch(i){case"[object DataView]":if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=a.byteLength||!l(new Iv(n),new Iv(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Xl(+n,+a);case"[object Error]":return n.name==a.name&&n.message==a.message;case"[object RegExp]":case"[object String]":return n==a+"";case"[object Map]":var h=K5;case"[object Set]":var p=1&u;if(h||(h=qb),n.size!=a.size&&!p)return!1;var m=c.get(n);if(m)return m==a;u|=2,c.set(n,a);var y=iw(h(n),h(a),u,o,l,c);return c.delete(n),y;case"[object Symbol]":if(fb)return fb.call(n)==fb.call(a)}return!1},J5=Object.prototype.hasOwnProperty,Q5=function(n,a,i,u,o,l){var c=1&i,h=Sb(n),p=h.length;if(p!=Sb(a).length&&!c)return!1;for(var m=p;m--;){var y=h[m];if(!(c?y in a:J5.call(a,y)))return!1}var S=l.get(n),x=l.get(a);if(S&&x)return S==a&&x==n;var T=!0;l.set(n,a),l.set(a,n);for(var _=c;++m<p;){var N=n[y=h[m]],M=a[y];if(u)var D=c?u(M,N,y,a,n,l):u(N,M,y,n,a,l);if(!(D===void 0?N===M||o(N,M,i,u,l):D)){T=!1;break}_||(_=y=="constructor")}if(T&&!_){var W=n.constructor,$=a.constructor;W==$||!("constructor"in n)||!("constructor"in a)||typeof W=="function"&&W instanceof W&&typeof $=="function"&&$ instanceof $||(T=!1)}return l.delete(n),l.delete(a),T},EA=Object.prototype.hasOwnProperty,q5=function(n,a,i,u,o,l){var c=mn(n),h=mn(a),p=c?"[object Array]":cu(n),m=h?"[object Array]":cu(a),y=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]",S=(m=m=="[object Arguments]"?"[object Object]":m)=="[object Object]",x=p==m;if(x&&fu(n)){if(!fu(a))return!1;c=!0,y=!1}if(x&&!y)return l||(l=new jl),c||Hc(n)?iw(n,a,i,u,o,l):Z5(n,a,p,i,u,o,l);if(!(1&i)){var T=y&&EA.call(n,"__wrapped__"),_=S&&EA.call(a,"__wrapped__");if(T||_){var N=T?n.value():n,M=_?a.value():a;return l||(l=new jl),o(N,M,i,u,l)}}return!!x&&(l||(l=new jl),Q5(n,a,i,u,o,l))},aw=function n(a,i,u,o,l){return a===i||(a==null||i==null||!ui(a)&&!ui(i)?a!=a&&i!=i:q5(a,i,u,o,n,l))},e8=function(n,a,i,u){var o=i.length,l=o,c=!u;if(n==null)return!l;for(n=Object(n);o--;){var h=i[o];if(c&&h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++o<l;){var p=(h=i[o])[0],m=n[p],y=h[1];if(c&&h[2]){if(m===void 0&&!(p in n))return!1}else{var S=new jl;if(u)var x=u(m,y,p,n,a,S);if(!(x===void 0?aw(y,m,3,u,S):x))return!1}}return!0},sw=function(n){return n==n&&!Oo(n)},t8=function(n){for(var a=Ts(n),i=a.length;i--;){var u=a[i],o=n[u];a[i]=[u,o,sw(o)]}return a},uw=function(n,a){return function(i){return i!=null&&i[n]===a&&(a!==void 0||n in Object(i))}},r8=function(n){var a=t8(n);return a.length==1&&a[0][2]?uw(a[0][0],a[0][1]):function(i){return i===n||e8(i,n,a)}},du=function(n){return typeof n=="symbol"||ui(n)&&xs(n)=="[object Symbol]"},n8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o8=/^\w*$/,eE=function(n,a){if(mn(n))return!1;var i=typeof n;return!(i!="number"&&i!="symbol"&&i!="boolean"&&n!=null&&!du(n))||o8.test(n)||!n8.test(n)||a!=null&&n in Object(a)};function tE(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError("Expected a function");var i=function(){var u=arguments,o=a?a.apply(this,u):u[0],l=i.cache;if(l.has(o))return l.get(o);var c=n.apply(this,u);return i.cache=l.set(o,c)||l,c};return i.cache=new(tE.Cache||Xv),i}tE.Cache=Xv;var i8=tE,a8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s8=/\\(\\)?/g,u8=function(n){var a=i8(n,function(u){return i.size===500&&i.clear(),u}),i=a.cache;return a}(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(a8,function(i,u,o,l){a.push(o?l.replace(s8,"$1"):u||i)}),a}),Fl=function(n,a){for(var i=-1,u=n==null?0:n.length,o=Array(u);++i<u;)o[i]=a(n[i],i,n);return o},OA=$o?$o.prototype:void 0,SA=OA?OA.toString:void 0,l8=function n(a){if(typeof a=="string")return a;if(mn(a))return Fl(a,n)+"";if(du(a))return SA?SA.call(a):"";var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},lw=function(n){return n==null?"":l8(n)},Qv=function(n,a){return mn(n)?n:eE(n,a)?[n]:u8(lw(n))},Xc=function(n){if(typeof n=="string"||du(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a},qv=function(n,a){for(var i=0,u=(a=Qv(a,n)).length;n!=null&&i<u;)n=n[Xc(a[i++])];return i&&i==u?n:void 0},f8=function(n,a,i){var u=n==null?void 0:qv(n,a);return u===void 0?i:u},c8=function(n,a){return n!=null&&a in Object(n)},fw=function(n,a,i){for(var u=-1,o=(a=Qv(a,n)).length,l=!1;++u<o;){var c=Xc(a[u]);if(!(l=n!=null&&i(n,c)))break;n=n[c]}return l||++u!=o?l:!!(o=n==null?0:n.length)&&$b(o)&&Wv(c,o)&&(mn(n)||kl(n))},cw=function(n,a){return n!=null&&fw(n,a,c8)},d8=function(n,a){return eE(n)&&sw(a)?uw(Xc(n),a):function(i){var u=f8(i,n);return u===void 0&&u===a?cw(i,n):aw(a,u,3)}},dw=function(n){return function(a){return a==null?void 0:a[n]}},h8=function(n){return function(a){return qv(a,n)}},p8=function(n){return eE(n)?dw(Xc(n)):h8(n)},wa=function(n){return typeof n=="function"?n:n==null?gu:typeof n=="object"?mn(n)?d8(n[0],n[1]):r8(n):p8(n)},hw=function(n,a){return(mn(n)?VP:$5)(n,wa(a))},v8=Object.prototype.hasOwnProperty,y8=function(n,a){return n!=null&&v8.call(n,a)},pw=function(n,a){return n!=null&&fw(n,a,y8)},g8=Object.prototype.hasOwnProperty,m8=function(n){if(n==null)return!0;if(Pa(n)&&(mn(n)||typeof n=="string"||typeof n.splice=="function"||fu(n)||Hc(n)||kl(n)))return!n.length;var a=cu(n);if(a=="[object Map]"||a=="[object Set]")return!n.size;if(Kv(n))return!Vb(n).length;for(var i in n)if(g8.call(n,i))return!1;return!0},vw=function(n){return n===void 0},yw=function(n,a){var i=-1,u=Pa(n)?Array(n.length):[];return Jv(n,function(o,l,c){u[++i]=a(o,l,c)}),u},gw=function(n,a){return(mn(n)?Fl:yw)(n,wa(a))},b8=function(n,a,i,u){var o=-1,l=n==null?0:n.length;for(u&&l&&(i=n[++o]);++o<l;)i=a(i,n[o],o,n);return i},E8=function(n,a,i,u,o){return o(n,function(l,c,h){i=u?(u=!1,l):a(i,l,c,h)}),i},mw=function(n,a,i){var u=mn(n)?b8:E8,o=arguments.length<3;return u(n,wa(a),i,o,Jv)},O8=function(n){return typeof n=="string"||!mn(n)&&ui(n)&&xs(n)=="[object String]"},S8=dw("length"),x8=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),T8=function(n){return x8.test(n)},A8="[\\ud800-\\udfff]",Pb="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",wb="\\ud83c[\\udffb-\\udfff]",bw="[^\\ud800-\\udfff]",Ew="(?:\\ud83c[\\udde6-\\uddff]){2}",Ow="[\\ud800-\\udbff][\\udc00-\\udfff]",xA="(?:"+Pb+"|"+wb+")?",P8="[\\ufe0e\\ufe0f]?"+xA+("(?:\\u200d(?:"+[bw,Ew,Ow].join("|")+")[\\ufe0e\\ufe0f]?"+xA+")*"),w8="(?:"+[bw+Pb+"?",Pb,Ew,Ow,A8].join("|")+")",TA=RegExp(wb+"(?="+wb+")|"+w8+P8,"g"),_8=function(n){for(var a=TA.lastIndex=0;TA.test(n);)++a;return a},N8=function(n){return T8(n)?_8(n):S8(n)},M8=function(n){if(n==null)return 0;if(Pa(n))return O8(n)?N8(n):n.length;var a=cu(n);return a=="[object Map]"||a=="[object Set]"?n.size:Vb(n).length},R8=function(n,a,i){var u=mn(n),o=u||fu(n)||Hc(n);if(a=wa(a),i==null){var l=n&&n.constructor;i=o?u?new l:[]:Oo(n)&&Uc(l)?JP(Zv(n)):{}}return(o?Xb:Qb)(n,function(c,h,p){return a(i,c,h,p)}),i},AA=$o?$o.isConcatSpreadable:void 0,I8=function(n){return mn(n)||kl(n)||!!(AA&&n&&n[AA])},rE=function n(a,i,u,o,l){var c=-1,h=a.length;for(u||(u=I8),l||(l=[]);++c<h;){var p=a[c];i>0&&u(p)?i>1?n(p,i-1,u,o,l):Yb(l,p):o||(l[l.length]=p)}return l},D8=function(n,a,i){switch(i.length){case 0:return n.call(a);case 1:return n.call(a,i[0]);case 2:return n.call(a,i[0],i[1]);case 3:return n.call(a,i[0],i[1],i[2])}return n.apply(a,i)},PA=Math.max,Sw=function(n,a,i){return a=PA(a===void 0?n.length-1:a,0),function(){for(var u=arguments,o=-1,l=PA(u.length-a,0),c=Array(l);++o<l;)c[o]=u[a+o];o=-1;for(var h=Array(a+1);++o<a;)h[o]=u[o];return h[a]=i(c),D8(n,this,h)}},C8=Rv?function(n,a){return Rv(n,"toString",{configurable:!0,enumerable:!1,value:Zb(a),writable:!0})}:gu,L8=Date.now,xw=function(n){var a=0,i=0;return function(){var u=L8(),o=16-(u-i);if(i=u,o>0){if(++a>=800)return arguments[0]}else a=0;return n.apply(void 0,arguments)}}(C8),ey=function(n,a){return xw(Sw(n,a,gu),n+"")},Tw=function(n,a,i,u){for(var o=n.length,l=i+(u?1:-1);u?l--:++l<o;)if(a(n[l],l,n))return l;return-1},j8=function(n){return n!=n},B8=function(n,a,i){for(var u=i-1,o=n.length;++u<o;)if(n[u]===a)return u;return-1},F8=function(n,a,i){return a==a?B8(n,a,i):Tw(n,j8,i)},G8=function(n,a){return!!(n!=null&&n.length)&&F8(n,a,0)>-1},k8=function(n,a,i){for(var u=-1,o=n==null?0:n.length;++u<o;)if(i(a,n[u]))return!0;return!1},U8=function(){},z8=Bl&&1/qb(new Bl([,-0]))[1]==1/0?function(n){return new Bl(n)}:U8,H8=function(n,a,i){var u=-1,o=G8,l=n.length,c=!0,h=[],p=h;if(i)c=!1,o=k8;else if(l>=200){var m=a?null:z8(n);if(m)return qb(m);c=!1,o=ow,p=new nw}else p=a?[]:h;e:for(;++u<l;){var y=n[u],S=a?a(y):y;if(y=i||y!==0?y:0,c&&S==S){for(var x=p.length;x--;)if(p[x]===S)continue e;a&&p.push(S),h.push(y)}else o(p,S,i)||(p!==h&&p.push(S),h.push(y))}return h},Aw=function(n){return ui(n)&&Pa(n)},X8=ey(function(n){return H8(rE(n,1,Aw,!0))}),$8=function(n,a){return Fl(a,function(i){return n[i]})},Dv,Pw=function(n){return n==null?[]:$8(n,Ts(n))};try{Dv={clone:X5,constant:Zb,each:rw,filter:hw,has:pw,isArray:mn,isEmpty:m8,isFunction:Uc,isUndefined:vw,keys:Ts,map:gw,reduce:mw,size:M8,transform:R8,union:X8,values:Pw}}catch{}Dv||(Dv=window._);var zt=Dv,nE=Lr;function Lr(n){this._isDirected=!zt.has(n,"directed")||n.directed,this._isMultigraph=!!zt.has(n,"multigraph")&&n.multigraph,this._isCompound=!!zt.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=zt.constant(void 0),this._defaultEdgeLabelFn=zt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function wA(n,a){n[a]?n[a]++:n[a]=1}function _A(n,a){--n[a]||delete n[a]}function Ac(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}return o+""+l+""+(zt.isUndefined(u)?"\0":u)}function V8(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}var h={v:o,w:l};return u&&(h.name=u),h}function cb(n,a){return Ac(n,a.v,a.w,a.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(n){return this._label=n,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultNodeLabelFn=n,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return zt.keys(this._nodes)},Lr.prototype.sources=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._in[a])})},Lr.prototype.sinks=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._out[a])})},Lr.prototype.setNodes=function(n,a){var i=arguments,u=this;return zt.each(n,function(o){i.length>1?u.setNode(o,a):u.setNode(o)}),this},Lr.prototype.setNode=function(n,a){return zt.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=a),this):(this._nodes[n]=arguments.length>1?a:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},Lr.prototype.node=function(n){return this._nodes[n]},Lr.prototype.hasNode=function(n){return zt.has(this._nodes,n)},Lr.prototype.removeNode=function(n){var a=this;if(zt.has(this._nodes,n)){var i=function(u){a.removeEdge(a._edgeObjs[u])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],zt.each(this.children(n),function(u){a.setParent(u)}),delete this._children[n]),zt.each(zt.keys(this._in[n]),i),delete this._in[n],delete this._preds[n],zt.each(zt.keys(this._out[n]),i),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},Lr.prototype.setParent=function(n,a){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(zt.isUndefined(a))a="\0";else{for(var i=a+="";!zt.isUndefined(i);i=this.parent(i))if(i===n)throw new Error("Setting "+a+" as parent of "+n+" would create a cycle");this.setNode(a)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=a,this._children[a][n]=!0,this},Lr.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},Lr.prototype.parent=function(n){if(this._isCompound){var a=this._parent[n];if(a!=="\0")return a}},Lr.prototype.children=function(n){if(zt.isUndefined(n)&&(n="\0"),this._isCompound){var a=this._children[n];if(a)return zt.keys(a)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},Lr.prototype.predecessors=function(n){var a=this._preds[n];if(a)return zt.keys(a)},Lr.prototype.successors=function(n){var a=this._sucs[n];if(a)return zt.keys(a)},Lr.prototype.neighbors=function(n){var a=this.predecessors(n);if(a)return zt.union(a,this.successors(n))},Lr.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},Lr.prototype.filterNodes=function(n){var a=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});a.setGraph(this.graph());var i=this;zt.each(this._nodes,function(l,c){n(c)&&a.setNode(c,l)}),zt.each(this._edgeObjs,function(l){a.hasNode(l.v)&&a.hasNode(l.w)&&a.setEdge(l,i.edge(l))});var u={};function o(l){var c=i.parent(l);return c===void 0||a.hasNode(c)?(u[l]=c,c):c in u?u[c]:o(c)}return this._isCompound&&zt.each(a.nodes(),function(l){a.setParent(l,o(l))}),a},Lr.prototype.setDefaultEdgeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultEdgeLabelFn=n,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return zt.values(this._edgeObjs)},Lr.prototype.setPath=function(n,a){var i=this,u=arguments;return zt.reduce(n,function(o,l){return u.length>1?i.setEdge(o,l,a):i.setEdge(o,l),l}),this},Lr.prototype.setEdge=function(){var n,a,i,u,o=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(n=l.v,a=l.w,i=l.name,arguments.length===2&&(u=arguments[1],o=!0)):(n=l,a=arguments[1],i=arguments[3],arguments.length>2&&(u=arguments[2],o=!0)),n=""+n,a=""+a,zt.isUndefined(i)||(i=""+i);var c=Ac(this._isDirected,n,a,i);if(zt.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=u),this;if(!zt.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(a),this._edgeLabels[c]=o?u:this._defaultEdgeLabelFn(n,a,i);var h=V8(this._isDirected,n,a,i);return n=h.v,a=h.w,Object.freeze(h),this._edgeObjs[c]=h,wA(this._preds[a],n),wA(this._sucs[n],a),this._in[a][c]=h,this._out[n][c]=h,this._edgeCount++,this},Lr.prototype.edge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Ac(this._isDirected,n,a,i);return this._edgeLabels[u]},Lr.prototype.hasEdge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Ac(this._isDirected,n,a,i);return zt.has(this._edgeLabels,u)},Lr.prototype.removeEdge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Ac(this._isDirected,n,a,i),o=this._edgeObjs[u];return o&&(n=o.v,a=o.w,delete this._edgeLabels[u],delete this._edgeObjs[u],_A(this._preds[a],n),_A(this._sucs[n],a),delete this._in[a][u],delete this._out[n][u],this._edgeCount--),this},Lr.prototype.inEdges=function(n,a){var i=this._in[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.v===a}):u}},Lr.prototype.outEdges=function(n,a){var i=this._out[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.w===a}):u}},Lr.prototype.nodeEdges=function(n,a){var i=this.inEdges(n,a);if(i)return i.concat(this.outEdges(n,a))};var NA={Graph:nE,version:"2.1.8"},W8={write:function(n){var a={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:Y8(n),edges:K8(n)};return zt.isUndefined(n.graph())||(a.value=zt.clone(n.graph())),a},read:function(n){var a=new nE(n.options).setGraph(n.value);return zt.each(n.nodes,function(i){a.setNode(i.v,i.value),i.parent&&a.setParent(i.v,i.parent)}),zt.each(n.edges,function(i){a.setEdge({v:i.v,w:i.w,name:i.name},i.value)}),a}};function Y8(n){return zt.map(n.nodes(),function(a){var i=n.node(a),u=n.parent(a),o={v:a};return zt.isUndefined(i)||(o.value=i),zt.isUndefined(u)||(o.parent=u),o})}function K8(n){return zt.map(n.edges(),function(a){var i=n.edge(a),u={v:a.v,w:a.w};return zt.isUndefined(a.name)||(u.name=a.name),zt.isUndefined(i)||(u.value=i),u})}var Z8=function(n){var a,i={},u=[];function o(l){zt.has(i,l)||(i[l]=!0,a.push(l),zt.each(n.successors(l),o),zt.each(n.predecessors(l),o))}return zt.each(n.nodes(),function(l){a=[],o(l),a.length&&u.push(a)}),u},ww=Xo;function Xo(){this._arr=[],this._keyIndices={}}Xo.prototype.size=function(){return this._arr.length},Xo.prototype.keys=function(){return this._arr.map(function(n){return n.key})},Xo.prototype.has=function(n){return zt.has(this._keyIndices,n)},Xo.prototype.priority=function(n){var a=this._keyIndices[n];if(a!==void 0)return this._arr[a].priority},Xo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Xo.prototype.add=function(n,a){var i=this._keyIndices;if(n=String(n),!zt.has(i,n)){var u=this._arr,o=u.length;return i[n]=o,u.push({key:n,priority:a}),this._decrease(o),!0}return!1},Xo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},Xo.prototype.decrease=function(n,a){var i=this._keyIndices[n];if(a>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+a);this._arr[i].priority=a,this._decrease(i)},Xo.prototype._heapify=function(n){var a=this._arr,i=2*n,u=i+1,o=n;i<a.length&&(o=a[i].priority<a[o].priority?i:o,u<a.length&&(o=a[u].priority<a[o].priority?u:o),o!==n&&(this._swap(n,o),this._heapify(o)))},Xo.prototype._decrease=function(n){for(var a,i=this._arr,u=i[n].priority;n!==0&&!(i[a=n>>1].priority<u);)this._swap(n,a),n=a},Xo.prototype._swap=function(n,a){var i=this._arr,u=this._keyIndices,o=i[n],l=i[a];i[n]=l,i[a]=o,u[l.key]=n,u[o.key]=a};var _w=function(n,a,i,u){return function(o,l,c,h){var p,m,y={},S=new ww,x=function(T){var _=T.v!==p?T.v:T.w,N=y[_],M=c(T),D=m.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+M);D<N.distance&&(N.distance=D,N.predecessor=p,S.decrease(_,D))};for(o.nodes().forEach(function(T){var _=T===l?0:Number.POSITIVE_INFINITY;y[T]={distance:_},S.add(T,_)});S.size()>0&&(p=S.removeMin(),(m=y[p]).distance!==Number.POSITIVE_INFINITY);)h(p).forEach(x);return y}(n,String(a),i||J8,u||function(o){return n.outEdges(o)})},J8=zt.constant(1),Q8=function(n,a,i){return zt.transform(n.nodes(),function(u,o){u[o]=_w(n,o,a,i)},{})},Nw=function(n){var a=0,i=[],u={},o=[];function l(c){var h=u[c]={onStack:!0,lowlink:a,index:a++};if(i.push(c),n.successors(c).forEach(function(y){zt.has(u,y)?u[y].onStack&&(h.lowlink=Math.min(h.lowlink,u[y].index)):(l(y),h.lowlink=Math.min(h.lowlink,u[y].lowlink))}),h.lowlink===h.index){var p,m=[];do p=i.pop(),u[p].onStack=!1,m.push(p);while(c!==p);o.push(m)}}return n.nodes().forEach(function(c){zt.has(u,c)||l(c)}),o},q8=function(n){return zt.filter(Nw(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})},e6=function(n,a,i){return function(u,o,l){var c={},h=u.nodes();return h.forEach(function(p){c[p]={},c[p][p]={distance:0},h.forEach(function(m){p!==m&&(c[p][m]={distance:Number.POSITIVE_INFINITY})}),l(p).forEach(function(m){var y=m.v===p?m.w:m.v,S=o(m);c[p][y]={distance:S,predecessor:p}})}),h.forEach(function(p){var m=c[p];h.forEach(function(y){var S=c[y];h.forEach(function(x){var T=S[p],_=m[x],N=S[x],M=T.distance+_.distance;M<N.distance&&(N.distance=M,N.predecessor=_.predecessor)})})}),c}(n,a||t6,i||function(u){return n.outEdges(u)})},t6=zt.constant(1),db=Mw;function Mw(n){var a={},i={},u=[];if(zt.each(n.sinks(),function o(l){if(zt.has(i,l))throw new Cv;zt.has(a,l)||(i[l]=!0,a[l]=!0,zt.each(n.predecessors(l),o),delete i[l],u.push(l))}),zt.size(a)!==n.nodeCount())throw new Cv;return u}function Cv(){}Mw.CycleException=Cv,Cv.prototype=new Error;var MA=function(n,a,i){zt.isArray(a)||(a=[a]);var u=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],l={};return zt.each(a,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);Rw(n,c,i==="post",l,u,o)}),o};function Rw(n,a,i,u,o,l){zt.has(u,a)||(u[a]=!0,i||l.push(a),zt.each(o(a),function(c){Rw(n,c,i,u,o,l)}),i&&l.push(a))}var Lv,r6={Graph:NA.Graph,json:W8,alg:{components:Z8,dijkstra:_w,dijkstraAll:Q8,findCycles:q8,floydWarshall:e6,isAcyclic:function(n){try{db(n)}catch(a){if(a instanceof db.CycleException)return!1;throw a}return!0},postorder:function(n,a){return MA(n,a,"post")},preorder:function(n,a){return MA(n,a,"pre")},prim:function(n,a){var i,u=new nE,o={},l=new ww;function c(p){var m=p.v===i?p.w:p.v,y=l.priority(m);if(y!==void 0){var S=a(p);S<y&&(o[m]=i,l.decrease(m,S))}}if(n.nodeCount()===0)return u;zt.each(n.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),u.setNode(p)}),l.decrease(n.nodes()[0],0);for(var h=!1;l.size()>0;){if(i=l.removeMin(),zt.has(o,i))u.setEdge(i,o[i]);else{if(h)throw new Error("Input graph is not connected: "+n);h=!0}n.nodeEdges(i).forEach(c)}return u},tarjan:Nw,topsort:db},version:NA.version};try{Lv=r6}catch{}Lv||(Lv=window.graphlib);var zi=Lv,n6=function(n){return qP(n,5)},Gc=function(n,a,i){if(!Oo(i))return!1;var u=typeof a;return!!(u=="number"?Pa(i)&&Wv(a,i.length):u=="string"&&a in i)&&Xl(i[a],n)},Iw=Object.prototype,o6=Iw.hasOwnProperty,i6=ey(function(n,a){n=Object(n);var i=-1,u=a.length,o=u>2?a[2]:void 0;for(o&&Gc(a[0],a[1],o)&&(u=1);++i<u;)for(var l=a[i],c=yu(l),h=-1,p=c.length;++h<p;){var m=c[h],y=n[m];(y===void 0||Xl(y,Iw[m])&&!o6.call(n,m))&&(n[m]=l[m])}return n}),a6=function(n){return function(a,i,u){var o=Object(a);if(!Pa(a)){var l=wa(i);a=Ts(a),i=function(h){return l(o[h],h,o)}}var c=n(a,i,u);return c>-1?o[l?a[c]:c]:void 0}},s6=/^\s+|\s+$/g,u6=/^[-+]0x[0-9a-f]+$/i,l6=/^0b[01]+$/i,f6=/^0o[0-7]+$/i,c6=parseInt,d6=function(n){if(typeof n=="number")return n;if(du(n))return NaN;if(Oo(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Oo(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=n.replace(s6,"");var i=l6.test(n);return i||f6.test(n)?c6(n.slice(2),i?2:8):u6.test(n)?NaN:+n},Sv=function(n){return n?(n=d6(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:n===0?n:0},h6=function(n){var a=Sv(n),i=a%1;return a==a?i?a-i:a:0},p6=Math.max,v6=a6(function(n,a,i){var u=n==null?0:n.length;if(!u)return-1;var o=i==null?0:h6(i);return o<0&&(o=p6(u+o,0)),Tw(n,wa(a),o)}),Dw=function(n){return n!=null&&n.length?rE(n,1):[]},y6=function(n,a){return n==null?n:Jb(n,ew(a),yu)},g6=function(n){var a=n==null?0:n.length;return a?n[a-1]:void 0},m6=function(n,a){var i={};return a=wa(a),Qb(n,function(u,o,l){$v(i,o,a(u,o,l))}),i},oE=function(n,a,i){for(var u=-1,o=n.length;++u<o;){var l=n[u],c=a(l);if(c!=null&&(h===void 0?c==c&&!du(c):i(c,h)))var h=c,p=l}return p},b6=function(n,a){return n>a},E6=function(n){return n&&n.length?oE(n,gu,b6):void 0},_b=function(n,a,i){(i!==void 0&&!Xl(n[a],i)||i===void 0&&!(a in n))&&$v(n,a,i)},O6=Function.prototype,S6=Object.prototype,Cw=O6.toString,x6=S6.hasOwnProperty,T6=Cw.call(Object),A6=function(n){if(!ui(n)||xs(n)!="[object Object]")return!1;var a=Zv(n);if(a===null)return!0;var i=x6.call(a,"constructor")&&a.constructor;return typeof i=="function"&&i instanceof i&&Cw.call(i)==T6},Nb=function(n,a){if((a!=="constructor"||typeof n[a]!="function")&&a!="__proto__")return n[a]},P6=function(n){return zc(n,yu(n))},w6=function(n,a,i,u,o,l,c){var h=Nb(n,i),p=Nb(a,i),m=c.get(p);if(m)_b(n,i,m);else{var y=l?l(h,p,i+"",n,a,c):void 0,S=y===void 0;if(S){var x=mn(p),T=!x&&fu(p),_=!x&&!T&&Hc(p);y=p,x||T||_?mn(h)?y=h:Aw(h)?y=$P(h):T?(S=!1,y=XP(p,!0)):_?(S=!1,y=ZP(p,!0)):y=[]:A6(p)||kl(p)?(y=h,kl(h)?y=P6(h):Oo(h)&&!Uc(h)||(y=QP(p))):S=!1}S&&(c.set(p,y),o(y,p,u,l,c),c.delete(p)),_b(n,i,y)}},_6=function n(a,i,u,o,l){a!==i&&Jb(i,function(c,h){if(l||(l=new jl),Oo(c))w6(a,i,h,u,n,o,l);else{var p=o?o(Nb(a,h),c,h+"",a,i,l):void 0;p===void 0&&(p=c),_b(a,h,p)}},yu)},N6=function(n){return ey(function(a,i){var u=-1,o=i.length,l=o>1?i[o-1]:void 0,c=o>2?i[2]:void 0;for(l=n.length>3&&typeof l=="function"?(o--,l):void 0,c&&Gc(i[0],i[1],c)&&(l=o<3?void 0:l,o=1),a=Object(a);++u<o;){var h=i[u];h&&n(a,h,u,l)}return a})}(function(n,a,i){_6(n,a,i)}),Lw=function(n,a){return n<a},M6=function(n){return n&&n.length?oE(n,gu,Lw):void 0},R6=function(n,a){return n&&n.length?oE(n,wa(a),Lw):void 0},I6=function(){return li.Date.now()},D6=function(n,a,i,u){if(!Oo(n))return n;for(var o=-1,l=(a=Qv(a,n)).length,c=l-1,h=n;h!=null&&++o<l;){var p=Xc(a[o]),m=i;if(p==="__proto__"||p==="constructor"||p==="prototype")return n;if(o!=c){var y=h[p];(m=u?u(y,p,h):void 0)===void 0&&(m=Oo(y)?y:Wv(a[o+1])?[]:{})}Vv(h,p,m),h=h[p]}return n},C6=function(n,a,i){for(var u=-1,o=a.length,l={};++u<o;){var c=a[u],h=qv(n,c);i(h,c)&&D6(l,Qv(c,n),h)}return l},L6=function(n,a){return C6(n,a,function(i,u){return cw(n,u)})},j6=function(n){return xw(Sw(n,void 0,Dw),n+"")}(function(n,a){return n==null?{}:L6(n,a)}),B6=Math.ceil,F6=Math.max,G6=function(n,a,i,u){for(var o=-1,l=F6(B6((a-n)/(i||1)),0),c=Array(l);l--;)c[u?l:++o]=n,n+=i;return c},k6=function(n){return function(a,i,u){return u&&typeof u!="number"&&Gc(a,i,u)&&(i=u=void 0),a=Sv(a),i===void 0?(i=a,a=0):i=Sv(i),u=u===void 0?a<i?1:-1:Sv(u),G6(a,i,u,n)}}(),U6=function(n,a){var i=n.length;for(n.sort(a);i--;)n[i]=n[i].value;return n},z6=function(n,a){if(n!==a){var i=n!==void 0,u=n===null,o=n==n,l=du(n),c=a!==void 0,h=a===null,p=a==a,m=du(a);if(!h&&!m&&!l&&n>a||l&&c&&p&&!h&&!m||u&&c&&p||!i&&p||!o)return 1;if(!u&&!l&&!m&&n<a||m&&i&&o&&!u&&!l||h&&i&&o||!c&&o||!p)return-1}return 0},H6=function(n,a,i){for(var u=-1,o=n.criteria,l=a.criteria,c=o.length,h=i.length;++u<c;){var p=z6(o[u],l[u]);if(p)return u>=h?p:p*(i[u]=="desc"?-1:1)}return n.index-a.index},X6=function(n,a,i){a=a.length?Fl(a,function(l){return mn(l)?function(c){return qv(c,l.length===1?l[0]:l)}:l}):[gu];var u=-1;a=Fl(a,Yv(wa));var o=yw(n,function(l,c,h){return{criteria:Fl(a,function(p){return p(l)}),index:++u,value:l}});return U6(o,function(l,c){return H6(l,c,i)})},$6=ey(function(n,a){if(n==null)return[];var i=a.length;return i>1&&Gc(n,a[0],a[1])?a=[]:i>2&&Gc(a[0],a[1],a[2])&&(a=[a[0]]),X6(n,rE(a,1),[])}),V6=0,W6=function(n){var a=++V6;return lw(n)+a},Y6=function(n,a,i){for(var u=-1,o=n.length,l=a.length,c={};++u<o;){var h=u<l?a[u]:void 0;i(c,n[u],h)}return c},jv,K6=function(n,a){return Y6(n||[],a||[],Vv)};try{jv={cloneDeep:n6,constant:Zb,defaults:i6,each:rw,filter:hw,find:v6,flatten:Dw,forEach:tw,forIn:y6,has:pw,isUndefined:vw,last:g6,map:gw,mapValues:m6,max:E6,merge:N6,min:M6,minBy:R6,now:I6,pick:j6,range:k6,reduce:mw,sortBy:$6,uniqueId:W6,values:Pw,zipObject:K6}}catch{}jv||(jv=window._);var Z6=jv;zi.Graph;Z6.constant(1);zi.Graph;zi.Graph;zi.alg.preorder;zi.alg.postorder;zi.Graph;zi.Graph;zi.Graph;zi.Graph;zi.Graph;function kc(n){return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},kc(n)}function J6(n,a){if(kc(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var u=i.call(n,a||"default");if(kc(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function Q6(n){var a=J6(n,"string");return kc(a)==="symbol"?a:String(a)}function jt(n,a,i){return a=Q6(a),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}var q6=typeof Tc=="object"&&Tc&&Tc.Object===Object&&Tc,jw=q6,ek=jw,tk=typeof self=="object"&&self&&self.Object===Object&&self,rk=ek||tk||Function("return this")(),nk=rk,ok=nk,ik=ok.Symbol,Bw=ik,RA=Bw;RA&&RA.toStringTag;var IA=Bw;IA&&IA.toStringTag;var Bv={},ak={get exports(){return Bv},set exports(n){Bv=n}};(function(n,a){var i=jw,u=a&&!a.nodeType&&a,o=u&&!0&&n&&!n.nodeType&&n,l=o&&o.exports===u,c=l&&i.process,h=function(){try{var p=o&&o.require&&o.require("util").types;return p||c&&c.binding&&c.binding("util")}catch{}}();n.exports=h})(ak,Bv);var DA=Bv;DA&&DA.isTypedArray;var Mb={},sk={get exports(){return Mb},set exports(n){Mb=n}},Rb={},uk={get exports(){return Rb},set exports(n){Rb=n}};(function(n){function a(i){return n.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n.exports.__esModule=!0,n.exports.default=n.exports,a(i)}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports})(uk);(function(n){var a=Rb.default;function i(){n.exports=i=function(){return u},n.exports.__esModule=!0,n.exports.default=n.exports;var u={},o=Object.prototype,l=o.hasOwnProperty,c=Object.defineProperty||function(V,Z,le){V[Z]=le.value},h=typeof Symbol=="function"?Symbol:{},p=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",y=h.toStringTag||"@@toStringTag";function S(V,Z,le){return Object.defineProperty(V,Z,{value:le,enumerable:!0,configurable:!0,writable:!0}),V[Z]}try{S({},"")}catch{S=function(le,Te,Re){return le[Te]=Re}}function x(V,Z,le,Te){var Re=Z&&Z.prototype instanceof N?Z:N,Pe=Object.create(Re.prototype),Ke=new I(Te||[]);return c(Pe,"_invoke",{value:Me(V,le,Ke)}),Pe}function T(V,Z,le){try{return{type:"normal",arg:V.call(Z,le)}}catch(Te){return{type:"throw",arg:Te}}}u.wrap=x;var _={};function N(){}function M(){}function D(){}var W={};S(W,p,function(){return this});var $=Object.getPrototypeOf,Oe=$&&$($(k([])));Oe&&Oe!==o&&l.call(Oe,p)&&(W=Oe);var ge=D.prototype=N.prototype=Object.create(W);function de(V){["next","throw","return"].forEach(function(Z){S(V,Z,function(le){return this._invoke(Z,le)})})}function ce(V,Z){function le(Re,Pe,Ke,gt){var Nt=T(V[Re],V,Pe);if(Nt.type!=="throw"){var Vt=Nt.arg,Ct=Vt.value;return Ct&&a(Ct)=="object"&&l.call(Ct,"__await")?Z.resolve(Ct.__await).then(function(Ge){le("next",Ge,Ke,gt)},function(Ge){le("throw",Ge,Ke,gt)}):Z.resolve(Ct).then(function(Ge){Vt.value=Ge,Ke(Vt)},function(Ge){return le("throw",Ge,Ke,gt)})}gt(Nt.arg)}var Te;c(this,"_invoke",{value:function(Pe,Ke){function gt(){return new Z(function(Nt,Vt){le(Pe,Ke,Nt,Vt)})}return Te=Te?Te.then(gt,gt):gt()}})}function Me(V,Z,le){var Te="suspendedStart";return function(Re,Pe){if(Te==="executing")throw new Error("Generator is already running");if(Te==="completed"){if(Re==="throw")throw Pe;return te()}for(le.method=Re,le.arg=Pe;;){var Ke=le.delegate;if(Ke){var gt=j(Ke,le);if(gt){if(gt===_)continue;return gt}}if(le.method==="next")le.sent=le._sent=le.arg;else if(le.method==="throw"){if(Te==="suspendedStart")throw Te="completed",le.arg;le.dispatchException(le.arg)}else le.method==="return"&&le.abrupt("return",le.arg);Te="executing";var Nt=T(V,Z,le);if(Nt.type==="normal"){if(Te=le.done?"completed":"suspendedYield",Nt.arg===_)continue;return{value:Nt.arg,done:le.done}}Nt.type==="throw"&&(Te="completed",le.method="throw",le.arg=Nt.arg)}}}function j(V,Z){var le=Z.method,Te=V.iterator[le];if(Te===void 0)return Z.delegate=null,le==="throw"&&V.iterator.return&&(Z.method="return",Z.arg=void 0,j(V,Z),Z.method==="throw")||le!=="return"&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+le+"' method")),_;var Re=T(Te,V.iterator,Z.arg);if(Re.type==="throw")return Z.method="throw",Z.arg=Re.arg,Z.delegate=null,_;var Pe=Re.arg;return Pe?Pe.done?(Z[V.resultName]=Pe.value,Z.next=V.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=void 0),Z.delegate=null,_):Pe:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,_)}function Q(V){var Z={tryLoc:V[0]};1 in V&&(Z.catchLoc=V[1]),2 in V&&(Z.finallyLoc=V[2],Z.afterLoc=V[3]),this.tryEntries.push(Z)}function U(V){var Z=V.completion||{};Z.type="normal",delete Z.arg,V.completion=Z}function I(V){this.tryEntries=[{tryLoc:"root"}],V.forEach(Q,this),this.reset(!0)}function k(V){if(V){var Z=V[p];if(Z)return Z.call(V);if(typeof V.next=="function")return V;if(!isNaN(V.length)){var le=-1,Te=function Re(){for(;++le<V.length;)if(l.call(V,le))return Re.value=V[le],Re.done=!1,Re;return Re.value=void 0,Re.done=!0,Re};return Te.next=Te}}return{next:te}}function te(){return{value:void 0,done:!0}}return M.prototype=D,c(ge,"constructor",{value:D,configurable:!0}),c(D,"constructor",{value:M,configurable:!0}),M.displayName=S(D,y,"GeneratorFunction"),u.isGeneratorFunction=function(V){var Z=typeof V=="function"&&V.constructor;return!!Z&&(Z===M||(Z.displayName||Z.name)==="GeneratorFunction")},u.mark=function(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,D):(V.__proto__=D,S(V,y,"GeneratorFunction")),V.prototype=Object.create(ge),V},u.awrap=function(V){return{__await:V}},de(ce.prototype),S(ce.prototype,m,function(){return this}),u.AsyncIterator=ce,u.async=function(V,Z,le,Te,Re){Re===void 0&&(Re=Promise);var Pe=new ce(x(V,Z,le,Te),Re);return u.isGeneratorFunction(Z)?Pe:Pe.next().then(function(Ke){return Ke.done?Ke.value:Pe.next()})},de(ge),S(ge,y,"Generator"),S(ge,p,function(){return this}),S(ge,"toString",function(){return"[object Generator]"}),u.keys=function(V){var Z=Object(V),le=[];for(var Te in Z)le.push(Te);return le.reverse(),function Re(){for(;le.length;){var Pe=le.pop();if(Pe in Z)return Re.value=Pe,Re.done=!1,Re}return Re.done=!0,Re}},u.values=k,I.prototype={constructor:I,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!Z)for(var le in this)le.charAt(0)==="t"&&l.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=void 0)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var le=this;function Te(Vt,Ct){return Ke.type="throw",Ke.arg=Z,le.next=Vt,Ct&&(le.method="next",le.arg=void 0),!!Ct}for(var Re=this.tryEntries.length-1;Re>=0;--Re){var Pe=this.tryEntries[Re],Ke=Pe.completion;if(Pe.tryLoc==="root")return Te("end");if(Pe.tryLoc<=this.prev){var gt=l.call(Pe,"catchLoc"),Nt=l.call(Pe,"finallyLoc");if(gt&&Nt){if(this.prev<Pe.catchLoc)return Te(Pe.catchLoc,!0);if(this.prev<Pe.finallyLoc)return Te(Pe.finallyLoc)}else if(gt){if(this.prev<Pe.catchLoc)return Te(Pe.catchLoc,!0)}else{if(!Nt)throw new Error("try statement without catch or finally");if(this.prev<Pe.finallyLoc)return Te(Pe.finallyLoc)}}}},abrupt:function(Z,le){for(var Te=this.tryEntries.length-1;Te>=0;--Te){var Re=this.tryEntries[Te];if(Re.tryLoc<=this.prev&&l.call(Re,"finallyLoc")&&this.prev<Re.finallyLoc){var Pe=Re;break}}Pe&&(Z==="break"||Z==="continue")&&Pe.tryLoc<=le&&le<=Pe.finallyLoc&&(Pe=null);var Ke=Pe?Pe.completion:{};return Ke.type=Z,Ke.arg=le,Pe?(this.method="next",this.next=Pe.finallyLoc,_):this.complete(Ke)},complete:function(Z,le){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&le&&(this.next=le),_},finish:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Te=this.tryEntries[le];if(Te.finallyLoc===Z)return this.complete(Te.completion,Te.afterLoc),U(Te),_}},catch:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Te=this.tryEntries[le];if(Te.tryLoc===Z){var Re=Te.completion;if(Re.type==="throw"){var Pe=Re.arg;U(Te)}return Pe}}throw new Error("illegal catch attempt")},delegateYield:function(Z,le,Te){return this.delegate={iterator:k(Z),resultName:le,nextLoc:Te},this.method==="next"&&(this.arg=void 0),_}},u}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(sk);var hb=Mb();try{regeneratorRuntime=hb}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=hb:Function("r","regeneratorRuntime = r")(hb)}var Dt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Dt||(Dt={}));var CA;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(CA||(CA={}));var LA;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(LA||(LA={}));var jA;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(jA||(jA={}));var BA;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(BA||(BA={}));var FA={},lk={get exports(){return FA},set exports(n){FA=n}};(function(n,a){(function(i,u){n.exports=u()})(Tc,function(){var i=function(w){return w instanceof Uint8Array||w instanceof Uint16Array||w instanceof Uint32Array||w instanceof Int8Array||w instanceof Int16Array||w instanceof Int32Array||w instanceof Float32Array||w instanceof Float64Array||w instanceof Uint8ClampedArray},u=function(w,G){for(var q=Object.keys(G),Ce=0;Ce<q.length;++Ce)w[q[Ce]]=G[q[Ce]];return w},o=`
`;function l(w){return typeof atob<"u"?atob(w):"base64:"+w}function c(w){var G=new Error("(regl) "+w);throw console.error(G),G}function h(w,G){w||c(G)}function p(w){return w?": "+w:""}function m(w,G,q){w in G||c("unknown parameter ("+w+")"+p(q)+". possible values: "+Object.keys(G).join())}function y(w,G){i(w)||c("invalid parameter type"+p(G)+". must be a typed array")}function S(w,G){switch(G){case"number":return typeof w=="number";case"object":return typeof w=="object";case"string":return typeof w=="string";case"boolean":return typeof w=="boolean";case"function":return typeof w=="function";case"undefined":return typeof w>"u";case"symbol":return typeof w=="symbol"}}function x(w,G,q){S(w,G)||c("invalid parameter type"+p(q)+". expected "+G+", got "+typeof w)}function T(w,G){w>=0&&(w|0)===w||c("invalid parameter type, ("+w+")"+p(G)+". must be a nonnegative integer")}function _(w,G,q){G.indexOf(w)<0&&c("invalid value"+p(q)+". must be one of: "+G)}var N=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(w){Object.keys(w).forEach(function(G){N.indexOf(G)<0&&c('invalid regl constructor argument "'+G+'". must be one of '+N)})}function D(w,G){for(w=w+"";w.length<G;)w=" "+w;return w}function W(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function $(w,G){this.number=w,this.line=G,this.errors=[]}function Oe(w,G,q){this.file=w,this.line=G,this.message=q}function ge(){var w=new Error,G=(w.stack||w).toString(),q=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(G);return Ce?Ce[1]:"unknown"}function de(){var w=new Error,G=(w.stack||w).toString(),q=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(G);return Ce?Ce[1]:"unknown"}function ce(w,G){var q=w.split(`
`),Ce=1,Je=0,Ie={unknown:new W,0:new W};Ie.unknown.name=Ie[0].name=G||ge(),Ie.unknown.lines.push(new $(0,""));for(var ke=0;ke<q.length;++ke){var at=q[ke],lt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(at);if(lt)switch(lt[1]){case"line":var vt=/(\d+)(\s+\d+)?/.exec(lt[2]);vt&&(Ce=vt[1]|0,vt[2]&&(Je=vt[2]|0,Je in Ie||(Ie[Je]=new W)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec(lt[2]);ft&&(Ie[Je].name=ft[1]?l(ft[2]):ft[2]);break}Ie[Je].lines.push(new $(Ce++,at))}return Object.keys(Ie).forEach(function(it){var St=Ie[it];St.lines.forEach(function(st){St.index[st.number]=st})}),Ie}function Me(w){var G=[];return w.split(`
`).forEach(function(q){if(!(q.length<5)){var Ce=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(q);Ce?G.push(new Oe(Ce[1]|0,Ce[2]|0,Ce[3].trim())):q.length>0&&G.push(new Oe("unknown",0,q))}}),G}function j(w,G){G.forEach(function(q){var Ce=w[q.file];if(Ce){var Je=Ce.index[q.line];if(Je){Je.errors.push(q),Ce.hasErrors=!0;return}}w.unknown.hasErrors=!0,w.unknown.lines[0].errors.push(q)})}function Q(w,G,q,Ce,Je){if(!w.getShaderParameter(G,w.COMPILE_STATUS)){var Ie=w.getShaderInfoLog(G),ke=Ce===w.FRAGMENT_SHADER?"fragment":"vertex";le(q,"string",ke+" shader source must be a string",Je);var at=ce(q,Je),lt=Me(Ie);j(at,lt),Object.keys(at).forEach(function(vt){var ft=at[vt];if(!ft.hasErrors)return;var it=[""],St=[""];function st(Ot,be){it.push(Ot),St.push(be||"")}st("file number "+vt+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Ot){if(Ot.errors.length>0){st(D(Ot.number,4)+"|  ","background-color:yellow; font-weight:bold"),st(Ot.line+o,"color:red; background-color:yellow; font-weight:bold");var be=0;Ot.errors.forEach(function(Ne){var yt=Ne.message,xt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yt);if(xt){var nt=xt[1];switch(yt=xt[2],nt){case"assign":nt="=";break}be=Math.max(Ot.line.indexOf(nt,be),0)}else be=0;st(D("| ",6)),st(D("^^^",be+3)+o,"font-weight:bold"),st(D("| ",6)),st(yt+o,"font-weight:bold")}),st(D("| ",6)+o)}else st(D(Ot.number,4)+"|  "),st(Ot.line+o,"color:red")}),typeof document<"u"&&!window.chrome?(St[0]=it.join("%c"),console.log.apply(console,St)):console.log(it.join(""))}),h.raise("Error compiling "+ke+" shader, "+at[0].name)}}function U(w,G,q,Ce,Je){if(!w.getProgramParameter(G,w.LINK_STATUS)){var Ie=w.getProgramInfoLog(G),ke=ce(q,Je),at=ce(Ce,Je),lt='Error linking program with vertex shader, "'+at[0].name+'", and fragment shader "'+ke[0].name+'"';typeof document<"u"?console.log("%c"+lt+o+"%c"+Ie,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(lt+o+Ie),h.raise(lt)}}function I(w){w._commandRef=ge()}function k(w,G,q,Ce){I(w);function Je(lt){return lt?Ce.id(lt):0}w._fragId=Je(w.static.frag),w._vertId=Je(w.static.vert);function Ie(lt,vt){Object.keys(vt).forEach(function(ft){lt[Ce.id(ft)]=!0})}var ke=w._uniformSet={};Ie(ke,G.static),Ie(ke,G.dynamic);var at=w._attributeSet={};Ie(at,q.static),Ie(at,q.dynamic),w._hasCount="count"in w.static||"count"in w.dynamic||"elements"in w.static||"elements"in w.dynamic}function te(w,G){var q=de();c(w+" in command "+(G||ge())+(q==="unknown"?"":" called from "+q))}function V(w,G,q){w||te(G,q||ge())}function Z(w,G,q,Ce){w in G||te("unknown parameter ("+w+")"+p(q)+". possible values: "+Object.keys(G).join(),Ce||ge())}function le(w,G,q,Ce){S(w,G)||te("invalid parameter type"+p(q)+". expected "+G+", got "+typeof w,Ce||ge())}function Te(w){w()}function Re(w,G,q){w.texture?_(w.texture._texture.internalformat,G,"unsupported texture format for attachment"):_(w.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")}var Pe=33071,Ke=9728,gt=9984,Nt=9985,Vt=9986,Ct=9987,Ge=5120,bt=5121,Ut=5122,ee=5123,se=5124,me=5125,Ue=5126,tt=32819,He=32820,Lt=33635,nr=34042,tr=36193,Jt={};Jt[Ge]=Jt[bt]=1,Jt[Ut]=Jt[ee]=Jt[tr]=Jt[Lt]=Jt[tt]=Jt[He]=2,Jt[se]=Jt[me]=Jt[Ue]=Jt[nr]=4;function rt(w,G){return w===He||w===tt||w===Lt?2:w===nr?4:Jt[w]*G}function Er(w){return!(w&w-1)&&!!w}function ur(w,G,q){var Ce,Je=G.width,Ie=G.height,ke=G.channels;h(Je>0&&Je<=q.maxTextureSize&&Ie>0&&Ie<=q.maxTextureSize,"invalid texture shape"),(w.wrapS!==Pe||w.wrapT!==Pe)&&h(Er(Je)&&Er(Ie),"incompatible wrap mode for texture, both width and height must be power of 2"),G.mipmask===1?Je!==1&&Ie!==1&&h(w.minFilter!==gt&&w.minFilter!==Vt&&w.minFilter!==Nt&&w.minFilter!==Ct,"min filter requires mipmap"):(h(Er(Je)&&Er(Ie),"texture must be a square power of 2 to support mipmapping"),h(G.mipmask===(Je<<1)-1,"missing or incomplete mipmap data")),G.type===Ue&&(q.extensions.indexOf("oes_texture_float_linear")<0&&h(w.minFilter===Ke&&w.magFilter===Ke,"filter not supported, must enable oes_texture_float_linear"),h(!w.genMipmaps,"mipmap generation not supported with float textures"));var at=G.images;for(Ce=0;Ce<16;++Ce)if(at[Ce]){var lt=Je>>Ce,vt=Ie>>Ce;h(G.mipmask&1<<Ce,"missing mipmap data");var ft=at[Ce];if(h(ft.width===lt&&ft.height===vt,"invalid shape for mip images"),h(ft.format===G.format&&ft.internalformat===G.internalformat&&ft.type===G.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var it=Math.ceil(rt(ft.type,ke)*lt/ft.unpackAlignment)*ft.unpackAlignment;h(ft.data.byteLength===it*vt,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else w.genMipmaps||h((G.mipmask&1<<Ce)===0,"extra mipmap data");G.compressed&&h(!w.genMipmaps,"mipmap generation for compressed images not supported")}function Xt(w,G,q,Ce){var Je=w.width,Ie=w.height,ke=w.channels;h(Je>0&&Je<=Ce.maxTextureSize&&Ie>0&&Ie<=Ce.maxTextureSize,"invalid texture shape"),h(Je===Ie,"cube map must be square"),h(G.wrapS===Pe&&G.wrapT===Pe,"wrap mode not supported by cube map");for(var at=0;at<q.length;++at){var lt=q[at];h(lt.width===Je&&lt.height===Ie,"inconsistent cube map face shape"),G.genMipmaps&&(h(!lt.compressed,"can not generate mipmap for compressed textures"),h(lt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var vt=lt.images,ft=0;ft<16;++ft){var it=vt[ft];if(it){var St=Je>>ft,st=Ie>>ft;h(lt.mipmask&1<<ft,"missing mipmap data"),h(it.width===St&&it.height===st,"invalid shape for mip images"),h(it.format===w.format&&it.internalformat===w.internalformat&&it.type===w.type,"incompatible type for mip image"),it.compressed||(it.data?h(it.data.byteLength===St*st*Math.max(rt(it.type,ke),it.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):it.element||it.copy)}}}}var L=u(h,{optional:Te,raise:c,commandRaise:te,command:V,parameter:m,commandParameter:Z,constructor:M,type:x,commandType:le,isTypedArray:y,nni:T,oneOf:_,shaderError:Q,linkError:U,callSite:de,saveCommandRef:I,saveDrawInfo:k,framebufferFormat:Re,guessCommand:ge,texture2D:ur,textureCube:Xt}),Qr=0,Rr=0,kr=5,Be=6;function Xr(w,G){this.id=Qr++,this.type=w,this.data=G}function zr(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ir(w){if(w.length===0)return[];var G=w.charAt(0),q=w.charAt(w.length-1);if(w.length>1&&G===q&&(G==='"'||G==="'"))return['"'+zr(w.substr(1,w.length-2))+'"'];var Ce=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(w);if(Ce)return Ir(w.substr(0,Ce.index)).concat(Ir(Ce[1])).concat(Ir(w.substr(Ce.index+Ce[0].length)));var Je=w.split(".");if(Je.length===1)return['"'+zr(w)+'"'];for(var Ie=[],ke=0;ke<Je.length;++ke)Ie=Ie.concat(Ir(Je[ke]));return Ie}function On(w){return"["+Ir(w).join("][")+"]"}function eo(w,G){return new Xr(w,On(G+""))}function In(w){return typeof w=="function"&&!w._reglType||w instanceof Xr}function to(w,G){if(typeof w=="function")return new Xr(Rr,w);if(typeof w=="number"||typeof w=="boolean")return new Xr(kr,w);if(Array.isArray(w))return new Xr(Be,w.map((q,Ce)=>to(q,G+"["+Ce+"]")));if(w instanceof Xr)return w;L(!1,"invalid option type in uniform "+G)}var Qt={DynamicVariable:Xr,define:eo,isDynamic:In,unbox:to,accessor:On},$r={next:typeof requestAnimationFrame=="function"?function(w){return requestAnimationFrame(w)}:function(w){return setTimeout(w,16)},cancel:typeof cancelAnimationFrame=="function"?function(w){return cancelAnimationFrame(w)}:clearTimeout},Dn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Mt(){var w={"":0},G=[""];return{id:function(q){var Ce=w[q];return Ce||(Ce=w[q]=G.length,G.push(q),Ce)},str:function(q){return G[q]}}}function or(w,G,q){var Ce=document.createElement("canvas");u(Ce.style,{border:0,margin:0,padding:0,top:0,left:0}),w.appendChild(Ce),w===document.body&&(Ce.style.position="absolute",u(w.style,{margin:0,padding:0}));function Je(){var at=window.innerWidth,lt=window.innerHeight;if(w!==document.body){var vt=w.getBoundingClientRect();at=vt.right-vt.left,lt=vt.bottom-vt.top}Ce.width=q*at,Ce.height=q*lt,u(Ce.style,{width:at+"px",height:lt+"px"})}var Ie;w!==document.body&&typeof ResizeObserver=="function"?(Ie=new ResizeObserver(function(){setTimeout(Je)}),Ie.observe(w)):window.addEventListener("resize",Je,!1);function ke(){Ie?Ie.disconnect():window.removeEventListener("resize",Je),w.removeChild(Ce)}return Je(),{canvas:Ce,onDestroy:ke}}function vr(w,G){function q(Ce){try{return w.getContext(Ce,G)}catch{return null}}return q("webgl")||q("experimental-webgl")||q("webgl-experimental")}function fr(w){return typeof w.nodeName=="string"&&typeof w.appendChild=="function"&&typeof w.getBoundingClientRect=="function"}function wr(w){return typeof w.drawArrays=="function"||typeof w.drawElements=="function"}function re(w){return typeof w=="string"?w.split():(L(Array.isArray(w),"invalid extension array"),w)}function Ee(w){return typeof w=="string"?(L(typeof document<"u","not supported outside of DOM"),document.querySelector(w)):w}function we(w){var G=w||{},q,Ce,Je,Ie,ke={},at=[],lt=[],vt=typeof window>"u"?1:window.devicePixelRatio,ft=!1,it=function(Ot){Ot&&L.raise(Ot)},St=function(){};if(typeof G=="string"?(L(typeof document<"u","selector queries only supported in DOM enviroments"),q=document.querySelector(G),L(q,"invalid query string for element")):typeof G=="object"?fr(G)?q=G:wr(G)?(Ie=G,Je=Ie.canvas):(L.constructor(G),"gl"in G?Ie=G.gl:"canvas"in G?Je=Ee(G.canvas):"container"in G&&(Ce=Ee(G.container)),"attributes"in G&&(ke=G.attributes,L.type(ke,"object","invalid context attributes")),"extensions"in G&&(at=re(G.extensions)),"optionalExtensions"in G&&(lt=re(G.optionalExtensions)),"onDone"in G&&(L.type(G.onDone,"function","invalid or missing onDone callback"),it=G.onDone),"profile"in G&&(ft=!!G.profile),"pixelRatio"in G&&(vt=+G.pixelRatio,L(vt>0,"invalid pixel ratio"))):L.raise("invalid arguments to regl"),q&&(q.nodeName.toLowerCase()==="canvas"?Je=q:Ce=q),!Ie){if(!Je){L(typeof document<"u","must manually specify webgl context outside of DOM environments");var st=or(Ce||document.body,it,vt);if(!st)return null;Je=st.canvas,St=st.onDestroy}ke.premultipliedAlpha===void 0&&(ke.premultipliedAlpha=!0),Ie=vr(Je,ke)}return Ie?{gl:Ie,canvas:Je,container:Ce,extensions:at,optionalExtensions:lt,pixelRatio:vt,profile:ft,onDone:it,onDestroy:St}:(St(),it("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _e(w,G){var q={};function Ce(ke){L.type(ke,"string","extension name must be string");var at=ke.toLowerCase(),lt;try{lt=q[at]=w.getExtension(at)}catch{}return!!lt}for(var Je=0;Je<G.extensions.length;++Je){var Ie=G.extensions[Je];if(!Ce(Ie))return G.onDestroy(),G.onDone('"'+Ie+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return G.optionalExtensions.forEach(Ce),{extensions:q,restore:function(){Object.keys(q).forEach(function(ke){if(q[ke]&&!Ce(ke))throw new Error("(regl): error restoring extension "+ke)})}}}function ht(w,G){for(var q=Array(w),Ce=0;Ce<w;++Ce)q[Ce]=G(Ce);return q}var wt=5120,Kt=5121,Br=5122,Cn=5123,Ln=5124,Hi=5125,No=5126;function mu(w){for(var G=16;G<=1<<28;G*=16)if(w<=G)return G;return 0}function ro(w){var G,q;return G=(w>65535)<<4,w>>>=G,q=(w>255)<<3,w>>>=q,G|=q,q=(w>15)<<2,w>>>=q,G|=q,q=(w>3)<<1,w>>>=q,G|=q,G|w>>1}function As(){var w=ht(8,function(){return[]});function G(Ie){var ke=mu(Ie),at=w[ro(ke)>>2];return at.length>0?at.pop():new ArrayBuffer(ke)}function q(Ie){w[ro(Ie.byteLength)>>2].push(Ie)}function Ce(Ie,ke){var at=null;switch(Ie){case wt:at=new Int8Array(G(ke),0,ke);break;case Kt:at=new Uint8Array(G(ke),0,ke);break;case Br:at=new Int16Array(G(2*ke),0,ke);break;case Cn:at=new Uint16Array(G(2*ke),0,ke);break;case Ln:at=new Int32Array(G(4*ke),0,ke);break;case Hi:at=new Uint32Array(G(4*ke),0,ke);break;case No:at=new Float32Array(G(4*ke),0,ke);break;default:return null}return at.length!==ke?at.subarray(0,ke):at}function Je(Ie){q(Ie.buffer)}return{alloc:G,free:q,allocType:Ce,freeType:Je}}var jr=As();jr.zero=As();var fi=3408,Xi=3410,Vo=3411,$i=3412,ci=3413,di=3414,_a=3415,$l=33901,Na=33902,Ma=3379,bu=3386,Wt=34921,Eu=36347,Vl=36348,Mo=35661,Ou=35660,Kr=34930,no=36349,Su=34076,Wl=34024,Yl=7936,Kl=7937,Ra=7938,xu=35724,Wo=34047,Ps=36063,ws=34852,Vi=3553,Tu=34067,Ia=34069,Zl=33984,Zr=6408,Au=5126,Jl=5121,Pu=36160,wu=36053,Ql=36064,_u=16384,ql=function(w,G){var q=1;G.ext_texture_filter_anisotropic&&(q=w.getParameter(Wo));var Ce=1,Je=1;G.webgl_draw_buffers&&(Ce=w.getParameter(ws),Je=w.getParameter(Ps));var Ie=!!G.oes_texture_float;if(Ie){var ke=w.createTexture();w.bindTexture(Vi,ke),w.texImage2D(Vi,0,Zr,1,1,0,Zr,Au,null);var at=w.createFramebuffer();if(w.bindFramebuffer(Pu,at),w.framebufferTexture2D(Pu,Ql,Vi,ke,0),w.bindTexture(Vi,null),w.checkFramebufferStatus(Pu)!==wu)Ie=!1;else{w.viewport(0,0,1,1),w.clearColor(1,0,0,1),w.clear(_u);var lt=jr.allocType(Au,4);w.readPixels(0,0,1,1,Zr,Au,lt),w.getError()?Ie=!1:(w.deleteFramebuffer(at),w.deleteTexture(ke),Ie=lt[0]===1),jr.freeType(lt)}}var vt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!vt){var it=w.createTexture(),St=jr.allocType(Jl,36);w.activeTexture(Zl),w.bindTexture(Tu,it),w.texImage2D(Ia,0,Zr,3,3,0,Zr,Jl,St),jr.freeType(St),w.bindTexture(Tu,null),w.deleteTexture(it),ft=!w.getError()}return{colorBits:[w.getParameter(Xi),w.getParameter(Vo),w.getParameter($i),w.getParameter(ci)],depthBits:w.getParameter(di),stencilBits:w.getParameter(_a),subpixelBits:w.getParameter(fi),extensions:Object.keys(G).filter(function(st){return!!G[st]}),maxAnisotropic:q,maxDrawbuffers:Ce,maxColorAttachments:Je,pointSizeDims:w.getParameter($l),lineWidthDims:w.getParameter(Na),maxViewportDims:w.getParameter(bu),maxCombinedTextureUnits:w.getParameter(Mo),maxCubeMapSize:w.getParameter(Su),maxRenderbufferSize:w.getParameter(Wl),maxTextureUnits:w.getParameter(Kr),maxTextureSize:w.getParameter(Ma),maxAttributes:w.getParameter(Wt),maxVertexUniforms:w.getParameter(Eu),maxVertexTextureUnits:w.getParameter(Ou),maxVaryingVectors:w.getParameter(Vl),maxFragmentUniforms:w.getParameter(no),glsl:w.getParameter(xu),renderer:w.getParameter(Kl),vendor:w.getParameter(Yl),version:w.getParameter(Ra),readFloat:Ie,npotTextureCube:ft}};function oo(w){return!!w&&typeof w=="object"&&Array.isArray(w.shape)&&Array.isArray(w.stride)&&typeof w.offset=="number"&&w.shape.length===w.stride.length&&(Array.isArray(w.data)||i(w.data))}var un=function(w){return Object.keys(w).map(function(G){return w[G]})},Da={shape:tf,flatten:hi};function ef(w,G,q){for(var Ce=0;Ce<G;++Ce)q[Ce]=w[Ce]}function _s(w,G,q,Ce){for(var Je=0,Ie=0;Ie<G;++Ie)for(var ke=w[Ie],at=0;at<q;++at)Ce[Je++]=ke[at]}function co(w,G,q,Ce,Je,Ie){for(var ke=Ie,at=0;at<G;++at)for(var lt=w[at],vt=0;vt<q;++vt)for(var ft=lt[vt],it=0;it<Ce;++it)Je[ke++]=ft[it]}function Nu(w,G,q,Ce,Je){for(var Ie=1,ke=q+1;ke<G.length;++ke)Ie*=G[ke];var at=G[q];if(G.length-q===4){var lt=G[q+1],vt=G[q+2],ft=G[q+3];for(ke=0;ke<at;++ke)co(w[ke],lt,vt,ft,Ce,Je),Je+=Ie}else for(ke=0;ke<at;++ke)Nu(w[ke],G,q+1,Ce,Je),Je+=Ie}function hi(w,G,q,Ce){var Je=1;if(G.length)for(var Ie=0;Ie<G.length;++Ie)Je*=G[Ie];else Je=0;var ke=Ce||jr.allocType(q,Je);switch(G.length){case 0:break;case 1:ef(w,G[0],ke);break;case 2:_s(w,G[0],G[1],ke);break;case 3:co(w,G[0],G[1],G[2],ke,0);break;default:Nu(w,G,0,ke,0)}return ke}function tf(w){for(var G=[],q=w;q.length;q=q[0])G.push(q.length);return G}var Yo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},rf=5120,Ns=5122,Mu=5124,nf=5121,Ms=5123,Ru=5125,Iu=5126,Du=5126,Ro={int8:rf,int16:Ns,int32:Mu,uint8:nf,uint16:Ms,uint32:Ru,float:Iu,float32:Du},of=35048,Cu=35040,Ca={dynamic:of,stream:Cu,static:35044},La=Da.flatten,Rs=Da.shape,Lu=35044,af=35040,Io=5121,Do=5126,Gn=[];Gn[5120]=1,Gn[5122]=2,Gn[5124]=4,Gn[5121]=1,Gn[5123]=2,Gn[5125]=4,Gn[5126]=4;function ja(w){return Yo[Object.prototype.toString.call(w)]|0}function ju(w,G){for(var q=0;q<G.length;++q)w[q]=G[q]}function Is(w,G,q,Ce,Je,Ie,ke){for(var at=0,lt=0;lt<q;++lt)for(var vt=0;vt<Ce;++vt)w[at++]=G[Je*lt+Ie*vt+ke]}function sf(w,G,q,Ce){var Je=0,Ie={};function ke(be){this.id=Je++,this.buffer=w.createBuffer(),this.type=be,this.usage=Lu,this.byteLength=0,this.dimension=1,this.dtype=Io,this.persistentData=null,q.profile&&(this.stats={size:0})}ke.prototype.bind=function(){w.bindBuffer(this.type,this.buffer)},ke.prototype.destroy=function(){St(this)};var at=[];function lt(be,Ne){var yt=at.pop();return yt||(yt=new ke(be)),yt.bind(),it(yt,Ne,af,0,1,!1),yt}function vt(be){at.push(be)}function ft(be,Ne,yt){be.byteLength=Ne.byteLength,w.bufferData(be.type,Ne,yt)}function it(be,Ne,yt,xt,nt,ct){var ot;if(be.usage=yt,Array.isArray(Ne)){if(be.dtype=xt||Do,Ne.length>0){var Ze;if(Array.isArray(Ne[0])){ot=Rs(Ne);for(var Ve=1,ze=1;ze<ot.length;++ze)Ve*=ot[ze];be.dimension=Ve,Ze=La(Ne,ot,be.dtype),ft(be,Ze,yt),ct?be.persistentData=Ze:jr.freeType(Ze)}else if(typeof Ne[0]=="number"){be.dimension=nt;var At=jr.allocType(be.dtype,Ne.length);ju(At,Ne),ft(be,At,yt),ct?be.persistentData=At:jr.freeType(At)}else i(Ne[0])?(be.dimension=Ne[0].length,be.dtype=xt||ja(Ne[0])||Do,Ze=La(Ne,[Ne.length,Ne[0].length],be.dtype),ft(be,Ze,yt),ct?be.persistentData=Ze:jr.freeType(Ze)):L.raise("invalid buffer data")}}else if(i(Ne))be.dtype=xt||ja(Ne),be.dimension=nt,ft(be,Ne,yt),ct&&(be.persistentData=new Uint8Array(new Uint8Array(Ne.buffer)));else if(oo(Ne)){ot=Ne.shape;var ir=Ne.stride,mt=Ne.offset,et=0,qe=0,rr=0,cr=0;ot.length===1?(et=ot[0],qe=1,rr=ir[0],cr=0):ot.length===2?(et=ot[0],qe=ot[1],rr=ir[0],cr=ir[1]):L.raise("invalid shape"),be.dtype=xt||ja(Ne.data)||Do,be.dimension=qe;var Gt=jr.allocType(be.dtype,et*qe);Is(Gt,Ne.data,et,qe,rr,cr,mt),ft(be,Gt,yt),ct?be.persistentData=Gt:jr.freeType(Gt)}else Ne instanceof ArrayBuffer?(be.dtype=Io,be.dimension=nt,ft(be,Ne,yt),ct&&(be.persistentData=new Uint8Array(new Uint8Array(Ne)))):L.raise("invalid buffer data")}function St(be){G.bufferCount--,Ce(be);var Ne=be.buffer;L(Ne,"buffer must not be deleted already"),w.deleteBuffer(Ne),be.buffer=null,delete Ie[be.id]}function st(be,Ne,yt,xt){G.bufferCount++;var nt=new ke(Ne);Ie[nt.id]=nt;function ct(Ve){var ze=Lu,At=null,ir=0,mt=0,et=1;return Array.isArray(Ve)||i(Ve)||oo(Ve)||Ve instanceof ArrayBuffer?At=Ve:typeof Ve=="number"?ir=Ve|0:Ve&&(L.type(Ve,"object","buffer arguments must be an object, a number or an array"),"data"in Ve&&(L(At===null||Array.isArray(At)||i(At)||oo(At),"invalid data for buffer"),At=Ve.data),"usage"in Ve&&(L.parameter(Ve.usage,Ca,"invalid buffer usage"),ze=Ca[Ve.usage]),"type"in Ve&&(L.parameter(Ve.type,Ro,"invalid buffer type"),mt=Ro[Ve.type]),"dimension"in Ve&&(L.type(Ve.dimension,"number","invalid dimension"),et=Ve.dimension|0),"length"in Ve&&(L.nni(ir,"buffer length must be a nonnegative integer"),ir=Ve.length|0)),nt.bind(),At?it(nt,At,ze,mt,et,xt):(ir&&w.bufferData(nt.type,ir,ze),nt.dtype=mt||Io,nt.usage=ze,nt.dimension=et,nt.byteLength=ir),q.profile&&(nt.stats.size=nt.byteLength*Gn[nt.dtype]),ct}function ot(Ve,ze){L(ze+Ve.byteLength<=nt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ve.byteLength+" starting from offset "+ze+" to a buffer of size "+nt.byteLength),w.bufferSubData(nt.type,ze,Ve)}function Ze(Ve,ze){var At=(ze||0)|0,ir;if(nt.bind(),i(Ve)||Ve instanceof ArrayBuffer)ot(Ve,At);else if(Array.isArray(Ve)){if(Ve.length>0)if(typeof Ve[0]=="number"){var mt=jr.allocType(nt.dtype,Ve.length);ju(mt,Ve),ot(mt,At),jr.freeType(mt)}else if(Array.isArray(Ve[0])||i(Ve[0])){ir=Rs(Ve);var et=La(Ve,ir,nt.dtype);ot(et,At),jr.freeType(et)}else L.raise("invalid buffer data")}else if(oo(Ve)){ir=Ve.shape;var qe=Ve.stride,rr=0,cr=0,Gt=0,mr=0;ir.length===1?(rr=ir[0],cr=1,Gt=qe[0],mr=0):ir.length===2?(rr=ir[0],cr=ir[1],Gt=qe[0],mr=qe[1]):L.raise("invalid shape");var ar=Array.isArray(Ve.data)?nt.dtype:ja(Ve.data),yr=jr.allocType(ar,rr*cr);Is(yr,Ve.data,rr,cr,Gt,mr,Ve.offset),ot(yr,At),jr.freeType(yr)}else L.raise("invalid data for buffer subdata");return ct}return yt||ct(be),ct._reglType="buffer",ct._buffer=nt,ct.subdata=Ze,q.profile&&(ct.stats=nt.stats),ct.destroy=function(){St(nt)},ct}function Ot(){un(Ie).forEach(function(be){be.buffer=w.createBuffer(),w.bindBuffer(be.type,be.buffer),w.bufferData(be.type,be.persistentData||be.byteLength,be.usage)})}return q.profile&&(G.getTotalBufferSize=function(){var be=0;return Object.keys(Ie).forEach(function(Ne){be+=Ie[Ne].stats.size}),be}),{create:st,createStream:lt,destroyStream:vt,clear:function(){un(Ie).forEach(St),at.forEach(St)},getBuffer:function(be){return be&&be._buffer instanceof ke?be._buffer:null},restore:Ot,_initBuffer:it}}var Ba=0,uf=0,lf=1,pi=1,Co=4,ff=4,vi={points:Ba,point:uf,lines:lf,line:pi,triangles:Co,triangle:ff,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},cf=0,ho=1,po=4,Wi=5120,yi=5121,Yi=5122,xo=5123,Ko=5124,$n=5125,Vn=34963,Ki=35040,vo=35044;function io(w,G,q,Ce){var Je={},Ie=0,ke={uint8:yi,uint16:xo};G.oes_element_index_uint&&(ke.uint32=$n);function at(Ot){this.id=Ie++,Je[this.id]=this,this.buffer=Ot,this.primType=po,this.vertCount=0,this.type=0}at.prototype.bind=function(){this.buffer.bind()};var lt=[];function vt(Ot){var be=lt.pop();return be||(be=new at(q.create(null,Vn,!0,!1)._buffer)),it(be,Ot,Ki,-1,-1,0,0),be}function ft(Ot){lt.push(Ot)}function it(Ot,be,Ne,yt,xt,nt,ct){Ot.buffer.bind();var ot;if(be){var Ze=ct;!ct&&(!i(be)||oo(be)&&!i(be.data))&&(Ze=G.oes_element_index_uint?$n:xo),q._initBuffer(Ot.buffer,be,Ne,Ze,3)}else w.bufferData(Vn,nt,Ne),Ot.buffer.dtype=ot||yi,Ot.buffer.usage=Ne,Ot.buffer.dimension=3,Ot.buffer.byteLength=nt;if(ot=ct,!ct){switch(Ot.buffer.dtype){case yi:case Wi:ot=yi;break;case xo:case Yi:ot=xo;break;case $n:case Ko:ot=$n;break;default:L.raise("unsupported type for element array")}Ot.buffer.dtype=ot}Ot.type=ot,L(ot!==$n||!!G.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ve=xt;Ve<0&&(Ve=Ot.buffer.byteLength,ot===xo?Ve>>=1:ot===$n&&(Ve>>=2)),Ot.vertCount=Ve;var ze=yt;if(yt<0){ze=po;var At=Ot.buffer.dimension;At===1&&(ze=cf),At===2&&(ze=ho),At===3&&(ze=po)}Ot.primType=ze}function St(Ot){Ce.elementsCount--,L(Ot.buffer!==null,"must not double destroy elements"),delete Je[Ot.id],Ot.buffer.destroy(),Ot.buffer=null}function st(Ot,be){var Ne=q.create(null,Vn,!0),yt=new at(Ne._buffer);Ce.elementsCount++;function xt(nt){if(!nt)Ne(),yt.primType=po,yt.vertCount=0,yt.type=yi;else if(typeof nt=="number")Ne(nt),yt.primType=po,yt.vertCount=nt|0,yt.type=yi;else{var ct=null,ot=vo,Ze=-1,Ve=-1,ze=0,At=0;Array.isArray(nt)||i(nt)||oo(nt)?ct=nt:(L.type(nt,"object","invalid arguments for elements"),"data"in nt&&(ct=nt.data,L(Array.isArray(ct)||i(ct)||oo(ct),"invalid data for element buffer")),"usage"in nt&&(L.parameter(nt.usage,Ca,"invalid element buffer usage"),ot=Ca[nt.usage]),"primitive"in nt&&(L.parameter(nt.primitive,vi,"invalid element buffer primitive"),Ze=vi[nt.primitive]),"count"in nt&&(L(typeof nt.count=="number"&&nt.count>=0,"invalid vertex count for elements"),Ve=nt.count|0),"type"in nt&&(L.parameter(nt.type,ke,"invalid buffer type"),At=ke[nt.type]),"length"in nt?ze=nt.length|0:(ze=Ve,At===xo||At===Yi?ze*=2:(At===$n||At===Ko)&&(ze*=4))),it(yt,ct,ot,Ze,Ve,ze,At)}return xt}return xt(Ot),xt._reglType="elements",xt._elements=yt,xt.subdata=function(nt,ct){return Ne.subdata(nt,ct),xt},xt.destroy=function(){St(yt)},xt}return{create:st,createStream:vt,destroyStream:ft,getElements:function(Ot){return typeof Ot=="function"&&Ot._elements instanceof at?Ot._elements:null},clear:function(){un(Je).forEach(St)}}}var gi=new Float32Array(1),jn=new Uint32Array(gi.buffer),df=5123;function Bu(w){for(var G=jr.allocType(df,w.length),q=0;q<w.length;++q)if(isNaN(w[q]))G[q]=65535;else if(w[q]===1/0)G[q]=31744;else if(w[q]===-1/0)G[q]=64512;else{gi[0]=w[q];var Ce=jn[0],Je=Ce>>>31<<15,Ie=(Ce<<1>>>24)-127,ke=Ce>>13&(1<<10)-1;if(Ie<-24)G[q]=Je;else if(Ie<-14){var at=-14-Ie;G[q]=Je+(ke+(1<<10)>>at)}else Ie>15?G[q]=Je+31744:G[q]=Je+(Ie+15<<10)+ke}return G}function qr(w){return Array.isArray(w)||i(w)}var Ds=function(w){return!(w&w-1)&&!!w},To=34467,yo=3553,ao=34067,Zi=34069,Lo=6408,Ji=6406,dn=6407,mi=6409,Fa=6410,Cs=32854,Bn=32855,Ls=36194,js=32819,Fu=32820,Gu=33635,hf=34042,Ga=6402,ka=34041,Bs=35904,kn=35906,Nn=36193,Zo=33776,Fs=33777,Ua=33778,bi=33779,Ei=35986,Gs=35987,ku=34798,Qi=35840,za=35841,ks=35842,g=35843,E=36196,A=5121,B=5123,J=5125,pe=5126,Xe=10242,Et=10243,Yt=10497,Tr=33071,_r=33648,Ur=10240,Hr=10241,nn=9728,Sn=9729,Vr=9984,Wn=9985,Jo=9986,Ha=9987,Uu=33170,qi=4352,zu=4353,Us=4354,Oi=34046,Qo=3317,ty=37440,ry=37441,ny=37443,zs=37444,Hs=33984,oy=[Vr,Jo,Wn,Ha],Xa=[0,mi,Fa,dn,Lo],go={};go[mi]=go[Ji]=go[Ga]=1,go[ka]=go[Fa]=2,go[dn]=go[Bs]=3,go[Lo]=go[kn]=4;function $a(w){return"[object "+w+"]"}var $c=$a("HTMLCanvasElement"),Vc=$a("OffscreenCanvas"),Wc=$a("CanvasRenderingContext2D"),Yc=$a("ImageBitmap"),Kc=$a("HTMLImageElement"),Zc=$a("HTMLVideoElement"),iy=Object.keys(Yo).concat([$c,Vc,Wc,Yc,Kc,Zc]),Va=[];Va[A]=1,Va[pe]=4,Va[Nn]=2,Va[B]=2,Va[J]=4;var xn=[];xn[Cs]=2,xn[Bn]=2,xn[Ls]=2,xn[ka]=4,xn[Zo]=.5,xn[Fs]=.5,xn[Ua]=1,xn[bi]=1,xn[Ei]=.5,xn[Gs]=1,xn[ku]=1,xn[Qi]=.5,xn[za]=.25,xn[ks]=.5,xn[g]=.25,xn[E]=.5;function Jc(w){return Array.isArray(w)&&(w.length===0||typeof w[0]=="number")}function Qc(w){if(!Array.isArray(w))return!1;var G=w.length;return!(G===0||!qr(w[0]))}function ea(w){return Object.prototype.toString.call(w)}function qc(w){return ea(w)===$c}function ed(w){return ea(w)===Vc}function ay(w){return ea(w)===Wc}function sy(w){return ea(w)===Yc}function uy(w){return ea(w)===Kc}function ly(w){return ea(w)===Zc}function pf(w){if(!w)return!1;var G=ea(w);return iy.indexOf(G)>=0?!0:Jc(w)||Qc(w)||oo(w)}function td(w){return Yo[Object.prototype.toString.call(w)]|0}function fy(w,G){var q=G.length;switch(w.type){case A:case B:case J:case pe:var Ce=jr.allocType(w.type,q);Ce.set(G),w.data=Ce;break;case Nn:w.data=Bu(G);break;default:L.raise("unsupported texture type, must specify a typed array")}}function rd(w,G){return jr.allocType(w.type===Nn?pe:w.type,G)}function Jr(w,G){w.type===Nn?(w.data=Bu(G),jr.freeType(G)):w.data=G}function cy(w,G,q,Ce,Je,Ie){for(var ke=w.width,at=w.height,lt=w.channels,vt=ke*at*lt,ft=rd(w,vt),it=0,St=0;St<at;++St)for(var st=0;st<ke;++st)for(var Ot=0;Ot<lt;++Ot)ft[it++]=G[q*st+Ce*St+Je*Ot+Ie];Jr(w,ft)}function Hu(w,G,q,Ce,Je,Ie){var ke;if(typeof xn[w]<"u"?ke=xn[w]:ke=go[w]*Va[G],Ie&&(ke*=6),Je){for(var at=0,lt=q;lt>=1;)at+=ke*lt*lt,lt/=2;return at}else return ke*q*Ce}function dy(w,G,q,Ce,Je,Ie,ke){var at={"don't care":qi,"dont care":qi,nice:Us,fast:zu},lt={repeat:Yt,clamp:Tr,mirror:_r},vt={nearest:nn,linear:Sn},ft=u({mipmap:Ha,"nearest mipmap nearest":Vr,"linear mipmap nearest":Wn,"nearest mipmap linear":Jo,"linear mipmap linear":Ha},vt),it={none:0,browser:zs},St={uint8:A,rgba4:js,rgb565:Gu,"rgb5 a1":Fu},st={alpha:Ji,luminance:mi,"luminance alpha":Fa,rgb:dn,rgba:Lo,rgba4:Cs,"rgb5 a1":Bn,rgb565:Ls},Ot={};G.ext_srgb&&(st.srgb=Bs,st.srgba=kn),G.oes_texture_float&&(St.float32=St.float=pe),G.oes_texture_half_float&&(St.float16=St["half float"]=Nn),G.webgl_depth_texture&&(u(st,{depth:Ga,"depth stencil":ka}),u(St,{uint16:B,uint32:J,"depth stencil":hf})),G.webgl_compressed_texture_s3tc&&u(Ot,{"rgb s3tc dxt1":Zo,"rgba s3tc dxt1":Fs,"rgba s3tc dxt3":Ua,"rgba s3tc dxt5":bi}),G.webgl_compressed_texture_atc&&u(Ot,{"rgb atc":Ei,"rgba atc explicit alpha":Gs,"rgba atc interpolated alpha":ku}),G.webgl_compressed_texture_pvrtc&&u(Ot,{"rgb pvrtc 4bppv1":Qi,"rgb pvrtc 2bppv1":za,"rgba pvrtc 4bppv1":ks,"rgba pvrtc 2bppv1":g}),G.webgl_compressed_texture_etc1&&(Ot["rgb etc1"]=E);var be=Array.prototype.slice.call(w.getParameter(To));Object.keys(Ot).forEach(function(K){var je=Ot[K];be.indexOf(je)>=0&&(st[K]=je)});var Ne=Object.keys(st);q.textureFormats=Ne;var yt=[];Object.keys(st).forEach(function(K){var je=st[K];yt[je]=K});var xt=[];Object.keys(St).forEach(function(K){var je=St[K];xt[je]=K});var nt=[];Object.keys(vt).forEach(function(K){var je=vt[K];nt[je]=K});var ct=[];Object.keys(ft).forEach(function(K){var je=ft[K];ct[je]=K});var ot=[];Object.keys(lt).forEach(function(K){var je=lt[K];ot[je]=K});var Ze=Ne.reduce(function(K,je){var Ae=st[je];return Ae===mi||Ae===Ji||Ae===mi||Ae===Fa||Ae===Ga||Ae===ka||G.ext_srgb&&(Ae===Bs||Ae===kn)?K[Ae]=Ae:Ae===Bn||je.indexOf("rgba")>=0?K[Ae]=Lo:K[Ae]=dn,K},{});function Ve(){this.internalformat=Lo,this.format=Lo,this.type=A,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=zs,this.width=0,this.height=0,this.channels=0}function ze(K,je){K.internalformat=je.internalformat,K.format=je.format,K.type=je.type,K.compressed=je.compressed,K.premultiplyAlpha=je.premultiplyAlpha,K.flipY=je.flipY,K.unpackAlignment=je.unpackAlignment,K.colorSpace=je.colorSpace,K.width=je.width,K.height=je.height,K.channels=je.channels}function At(K,je){if(!(typeof je!="object"||!je)){if("premultiplyAlpha"in je&&(L.type(je.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),K.premultiplyAlpha=je.premultiplyAlpha),"flipY"in je&&(L.type(je.flipY,"boolean","invalid texture flip"),K.flipY=je.flipY),"alignment"in je&&(L.oneOf(je.alignment,[1,2,4,8],"invalid texture unpack alignment"),K.unpackAlignment=je.alignment),"colorSpace"in je&&(L.parameter(je.colorSpace,it,"invalid colorSpace"),K.colorSpace=it[je.colorSpace]),"type"in je){var Ae=je.type;L(G.oes_texture_float||!(Ae==="float"||Ae==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),L(G.oes_texture_half_float||!(Ae==="half float"||Ae==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),L(G.webgl_depth_texture||!(Ae==="uint16"||Ae==="uint32"||Ae==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(Ae,St,"invalid texture type"),K.type=St[Ae]}var Rt=K.width,br=K.height,H=K.channels,C=!1;"shape"in je?(L(Array.isArray(je.shape)&&je.shape.length>=2,"shape must be an array"),Rt=je.shape[0],br=je.shape[1],je.shape.length===3&&(H=je.shape[2],L(H>0&&H<=4,"invalid number of channels"),C=!0),L(Rt>=0&&Rt<=q.maxTextureSize,"invalid width"),L(br>=0&&br<=q.maxTextureSize,"invalid height")):("radius"in je&&(Rt=br=je.radius,L(Rt>=0&&Rt<=q.maxTextureSize,"invalid radius")),"width"in je&&(Rt=je.width,L(Rt>=0&&Rt<=q.maxTextureSize,"invalid width")),"height"in je&&(br=je.height,L(br>=0&&br<=q.maxTextureSize,"invalid height")),"channels"in je&&(H=je.channels,L(H>0&&H<=4,"invalid number of channels"),C=!0)),K.width=Rt|0,K.height=br|0,K.channels=H|0;var ie=!1;if("format"in je){var ye=je.format;L(G.webgl_depth_texture||!(ye==="depth"||ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(ye,st,"invalid texture format");var Se=K.internalformat=st[ye];K.format=Ze[Se],ye in St&&("type"in je||(K.type=St[ye])),ye in Ot&&(K.compressed=!0),ie=!0}!C&&ie?K.channels=go[K.format]:C&&!ie?K.channels!==Xa[K.format]&&(K.format=K.internalformat=Xa[K.channels]):ie&&C&&L(K.channels===go[K.format],"number of channels inconsistent with specified format")}}function ir(K){w.pixelStorei(ty,K.flipY),w.pixelStorei(ry,K.premultiplyAlpha),w.pixelStorei(ny,K.colorSpace),w.pixelStorei(Qo,K.unpackAlignment)}function mt(){Ve.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function et(K,je){var Ae=null;if(pf(je)?Ae=je:je&&(L.type(je,"object","invalid pixel data type"),At(K,je),"x"in je&&(K.xOffset=je.x|0),"y"in je&&(K.yOffset=je.y|0),pf(je.data)&&(Ae=je.data)),L(!K.compressed||Ae instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),je.copy){L(!Ae,"can not specify copy and data field for the same texture");var Rt=Je.viewportWidth,br=Je.viewportHeight;K.width=K.width||Rt-K.xOffset,K.height=K.height||br-K.yOffset,K.needsCopy=!0,L(K.xOffset>=0&&K.xOffset<Rt&&K.yOffset>=0&&K.yOffset<br&&K.width>0&&K.width<=Rt&&K.height>0&&K.height<=br,"copy texture read out of bounds")}else if(!Ae)K.width=K.width||1,K.height=K.height||1,K.channels=K.channels||4;else if(i(Ae))K.channels=K.channels||4,K.data=Ae,!("type"in je)&&K.type===A&&(K.type=td(Ae));else if(Jc(Ae))K.channels=K.channels||4,fy(K,Ae),K.alignment=1,K.needsFree=!0;else if(oo(Ae)){var H=Ae.data;!Array.isArray(H)&&K.type===A&&(K.type=td(H));var C=Ae.shape,ie=Ae.stride,ye,Se,ue,ae,fe,X;C.length===3?(ue=C[2],X=ie[2]):(L(C.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ue=1,X=1),ye=C[0],Se=C[1],ae=ie[0],fe=ie[1],K.alignment=1,K.width=ye,K.height=Se,K.channels=ue,K.format=K.internalformat=Xa[ue],K.needsFree=!0,cy(K,H,ae,fe,X,Ae.offset)}else if(qc(Ae)||ed(Ae)||ay(Ae))qc(Ae)||ed(Ae)?K.element=Ae:K.element=Ae.canvas,K.width=K.element.width,K.height=K.element.height,K.channels=4;else if(sy(Ae))K.element=Ae,K.width=Ae.width,K.height=Ae.height,K.channels=4;else if(uy(Ae))K.element=Ae,K.width=Ae.naturalWidth,K.height=Ae.naturalHeight,K.channels=4;else if(ly(Ae))K.element=Ae,K.width=Ae.videoWidth,K.height=Ae.videoHeight,K.channels=4;else if(Qc(Ae)){var oe=K.width||Ae[0].length,z=K.height||Ae.length,he=K.channels;qr(Ae[0][0])?he=he||Ae[0][0].length:he=he||1;for(var xe=Da.shape(Ae),Ye=1,Qe=0;Qe<xe.length;++Qe)Ye*=xe[Qe];var $e=rd(K,Ye);Da.flatten(Ae,xe,"",$e),Jr(K,$e),K.alignment=1,K.width=oe,K.height=z,K.channels=he,K.format=K.internalformat=Xa[he],K.needsFree=!0}K.type===pe?L(q.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):K.type===Nn&&L(q.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qe(K,je,Ae){var Rt=K.element,br=K.data,H=K.internalformat,C=K.format,ie=K.type,ye=K.width,Se=K.height;ir(K),Rt?w.texImage2D(je,Ae,C,C,ie,Rt):K.compressed?w.compressedTexImage2D(je,Ae,H,ye,Se,0,br):K.needsCopy?(Ce(),w.copyTexImage2D(je,Ae,C,K.xOffset,K.yOffset,ye,Se,0)):w.texImage2D(je,Ae,C,ye,Se,0,C,ie,br||null)}function rr(K,je,Ae,Rt,br){var H=K.element,C=K.data,ie=K.internalformat,ye=K.format,Se=K.type,ue=K.width,ae=K.height;ir(K),H?w.texSubImage2D(je,br,Ae,Rt,ye,Se,H):K.compressed?w.compressedTexSubImage2D(je,br,Ae,Rt,ie,ue,ae,C):K.needsCopy?(Ce(),w.copyTexSubImage2D(je,br,Ae,Rt,K.xOffset,K.yOffset,ue,ae)):w.texSubImage2D(je,br,Ae,Rt,ue,ae,ye,Se,C)}var cr=[];function Gt(){return cr.pop()||new mt}function mr(K){K.needsFree&&jr.freeType(K.data),mt.call(K),cr.push(K)}function ar(){Ve.call(this),this.genMipmaps=!1,this.mipmapHint=qi,this.mipmask=0,this.images=Array(16)}function yr(K,je,Ae){var Rt=K.images[0]=Gt();K.mipmask=1,Rt.width=K.width=je,Rt.height=K.height=Ae,Rt.channels=K.channels=4}function Ar(K,je){var Ae=null;if(pf(je))Ae=K.images[0]=Gt(),ze(Ae,K),et(Ae,je),K.mipmask=1;else if(At(K,je),Array.isArray(je.mipmap))for(var Rt=je.mipmap,br=0;br<Rt.length;++br)Ae=K.images[br]=Gt(),ze(Ae,K),Ae.width>>=br,Ae.height>>=br,et(Ae,Rt[br]),K.mipmask|=1<<br;else Ae=K.images[0]=Gt(),ze(Ae,K),et(Ae,je),K.mipmask=1;ze(K,K.images[0]),K.compressed&&(K.internalformat===Zo||K.internalformat===Fs||K.internalformat===Ua||K.internalformat===bi)&&L(K.width%4===0&&K.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function fn(K,je){for(var Ae=K.images,Rt=0;Rt<Ae.length;++Rt){if(!Ae[Rt])return;qe(Ae[Rt],je,Rt)}}var vn=[];function Or(){var K=vn.pop()||new ar;Ve.call(K),K.mipmask=0;for(var je=0;je<16;++je)K.images[je]=null;return K}function hn(K){for(var je=K.images,Ae=0;Ae<je.length;++Ae)je[Ae]&&mr(je[Ae]),je[Ae]=null;vn.push(K)}function Wr(){this.minFilter=nn,this.magFilter=nn,this.wrapS=Tr,this.wrapT=Tr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=qi}function Yr(K,je){if("min"in je){var Ae=je.min;L.parameter(Ae,ft),K.minFilter=ft[Ae],oy.indexOf(K.minFilter)>=0&&!("faces"in je)&&(K.genMipmaps=!0)}if("mag"in je){var Rt=je.mag;L.parameter(Rt,vt),K.magFilter=vt[Rt]}var br=K.wrapS,H=K.wrapT;if("wrap"in je){var C=je.wrap;typeof C=="string"?(L.parameter(C,lt),br=H=lt[C]):Array.isArray(C)&&(L.parameter(C[0],lt),L.parameter(C[1],lt),br=lt[C[0]],H=lt[C[1]])}else{if("wrapS"in je){var ie=je.wrapS;L.parameter(ie,lt),br=lt[ie]}if("wrapT"in je){var ye=je.wrapT;L.parameter(ye,lt),H=lt[ye]}}if(K.wrapS=br,K.wrapT=H,"anisotropic"in je){var Se=je.anisotropic;L(typeof Se=="number"&&Se>=1&&Se<=q.maxAnisotropic,"aniso samples must be between 1 and "),K.anisotropic=je.anisotropic}if("mipmap"in je){var ue=!1;switch(typeof je.mipmap){case"string":L.parameter(je.mipmap,at,"invalid mipmap hint"),K.mipmapHint=at[je.mipmap],K.genMipmaps=!0,ue=!0;break;case"boolean":ue=K.genMipmaps=je.mipmap;break;case"object":L(Array.isArray(je.mipmap),"invalid mipmap type"),K.genMipmaps=!1,ue=!0;break;default:L.raise("invalid mipmap type")}ue&&!("min"in je)&&(K.minFilter=Vr)}}function pn(K,je){w.texParameteri(je,Hr,K.minFilter),w.texParameteri(je,Ur,K.magFilter),w.texParameteri(je,Xe,K.wrapS),w.texParameteri(je,Et,K.wrapT),G.ext_texture_filter_anisotropic&&w.texParameteri(je,Oi,K.anisotropic),K.genMipmaps&&(w.hint(Uu,K.mipmapHint),w.generateMipmap(je))}var cn=0,bn={},yn=q.maxTextureUnits,Fr=Array(yn).map(function(){return null});function dr(K){Ve.call(this),this.mipmask=0,this.internalformat=Lo,this.id=cn++,this.refCount=1,this.target=K,this.texture=w.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,ke.profile&&(this.stats={size:0})}function Tn(K){w.activeTexture(Hs),w.bindTexture(K.target,K.texture)}function Dr(){var K=Fr[0];K?w.bindTexture(K.target,K.texture):w.bindTexture(yo,null)}function qt(K){var je=K.texture;L(je,"must not double destroy texture");var Ae=K.unit,Rt=K.target;Ae>=0&&(w.activeTexture(Hs+Ae),w.bindTexture(Rt,null),Fr[Ae]=null),w.deleteTexture(je),K.texture=null,K.params=null,K.pixels=null,K.refCount=0,delete bn[K.id],Ie.textureCount--}u(dr.prototype,{bind:function(){var K=this;K.bindCount+=1;var je=K.unit;if(je<0){for(var Ae=0;Ae<yn;++Ae){var Rt=Fr[Ae];if(Rt){if(Rt.bindCount>0)continue;Rt.unit=-1}Fr[Ae]=K,je=Ae;break}je>=yn&&L.raise("insufficient number of texture units"),ke.profile&&Ie.maxTextureUnits<je+1&&(Ie.maxTextureUnits=je+1),K.unit=je,w.activeTexture(Hs+je),w.bindTexture(K.target,K.texture)}return je},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&qt(this)}});function Sr(K,je){var Ae=new dr(yo);bn[Ae.id]=Ae,Ie.textureCount++;function Rt(C,ie){var ye=Ae.texInfo;Wr.call(ye);var Se=Or();return typeof C=="number"?typeof ie=="number"?yr(Se,C|0,ie|0):yr(Se,C|0,C|0):C?(L.type(C,"object","invalid arguments to regl.texture"),Yr(ye,C),Ar(Se,C)):yr(Se,1,1),ye.genMipmaps&&(Se.mipmask=(Se.width<<1)-1),Ae.mipmask=Se.mipmask,ze(Ae,Se),L.texture2D(ye,Se,q),Ae.internalformat=Se.internalformat,Rt.width=Se.width,Rt.height=Se.height,Tn(Ae),fn(Se,yo),pn(ye,yo),Dr(),hn(Se),ke.profile&&(Ae.stats.size=Hu(Ae.internalformat,Ae.type,Se.width,Se.height,ye.genMipmaps,!1)),Rt.format=yt[Ae.internalformat],Rt.type=xt[Ae.type],Rt.mag=nt[ye.magFilter],Rt.min=ct[ye.minFilter],Rt.wrapS=ot[ye.wrapS],Rt.wrapT=ot[ye.wrapT],Rt}function br(C,ie,ye,Se){L(!!C,"must specify image data");var ue=ie|0,ae=ye|0,fe=Se|0,X=Gt();return ze(X,Ae),X.width=0,X.height=0,et(X,C),X.width=X.width||(Ae.width>>fe)-ue,X.height=X.height||(Ae.height>>fe)-ae,L(Ae.type===X.type&&Ae.format===X.format&&Ae.internalformat===X.internalformat,"incompatible format for texture.subimage"),L(ue>=0&&ae>=0&&ue+X.width<=Ae.width&&ae+X.height<=Ae.height,"texture.subimage write out of bounds"),L(Ae.mipmask&1<<fe,"missing mipmap data"),L(X.data||X.element||X.needsCopy,"missing image data"),Tn(Ae),rr(X,yo,ue,ae,fe),Dr(),mr(X),Rt}function H(C,ie){var ye=C|0,Se=ie|0||ye;if(ye===Ae.width&&Se===Ae.height)return Rt;Rt.width=Ae.width=ye,Rt.height=Ae.height=Se,Tn(Ae);for(var ue=0;Ae.mipmask>>ue;++ue){var ae=ye>>ue,fe=Se>>ue;if(!ae||!fe)break;w.texImage2D(yo,ue,Ae.format,ae,fe,0,Ae.format,Ae.type,null)}return Dr(),ke.profile&&(Ae.stats.size=Hu(Ae.internalformat,Ae.type,ye,Se,!1,!1)),Rt}return Rt(K,je),Rt.subimage=br,Rt.resize=H,Rt._reglType="texture2d",Rt._texture=Ae,ke.profile&&(Rt.stats=Ae.stats),Rt.destroy=function(){Ae.decRef()},Rt}function Pr(K,je,Ae,Rt,br,H){var C=new dr(ao);bn[C.id]=C,Ie.cubeCount++;var ie=new Array(6);function ye(ae,fe,X,oe,z,he){var xe,Ye=C.texInfo;for(Wr.call(Ye),xe=0;xe<6;++xe)ie[xe]=Or();if(typeof ae=="number"||!ae){var Qe=ae|0||1;for(xe=0;xe<6;++xe)yr(ie[xe],Qe,Qe)}else if(typeof ae=="object")if(fe)Ar(ie[0],ae),Ar(ie[1],fe),Ar(ie[2],X),Ar(ie[3],oe),Ar(ie[4],z),Ar(ie[5],he);else if(Yr(Ye,ae),At(C,ae),"faces"in ae){var $e=ae.faces;for(L(Array.isArray($e)&&$e.length===6,"cube faces must be a length 6 array"),xe=0;xe<6;++xe)L(typeof $e[xe]=="object"&&!!$e[xe],"invalid input for cube map face"),ze(ie[xe],C),Ar(ie[xe],$e[xe])}else for(xe=0;xe<6;++xe)Ar(ie[xe],ae);else L.raise("invalid arguments to cube map");for(ze(C,ie[0]),q.npotTextureCube||L(Ds(C.width)&&Ds(C.height),"your browser does not support non power or two texture dimensions"),Ye.genMipmaps?C.mipmask=(ie[0].width<<1)-1:C.mipmask=ie[0].mipmask,L.textureCube(C,Ye,ie,q),C.internalformat=ie[0].internalformat,ye.width=ie[0].width,ye.height=ie[0].height,Tn(C),xe=0;xe<6;++xe)fn(ie[xe],Zi+xe);for(pn(Ye,ao),Dr(),ke.profile&&(C.stats.size=Hu(C.internalformat,C.type,ye.width,ye.height,Ye.genMipmaps,!0)),ye.format=yt[C.internalformat],ye.type=xt[C.type],ye.mag=nt[Ye.magFilter],ye.min=ct[Ye.minFilter],ye.wrapS=ot[Ye.wrapS],ye.wrapT=ot[Ye.wrapT],xe=0;xe<6;++xe)hn(ie[xe]);return ye}function Se(ae,fe,X,oe,z){L(!!fe,"must specify image data"),L(typeof ae=="number"&&ae===(ae|0)&&ae>=0&&ae<6,"invalid face");var he=X|0,xe=oe|0,Ye=z|0,Qe=Gt();return ze(Qe,C),Qe.width=0,Qe.height=0,et(Qe,fe),Qe.width=Qe.width||(C.width>>Ye)-he,Qe.height=Qe.height||(C.height>>Ye)-xe,L(C.type===Qe.type&&C.format===Qe.format&&C.internalformat===Qe.internalformat,"incompatible format for texture.subimage"),L(he>=0&&xe>=0&&he+Qe.width<=C.width&&xe+Qe.height<=C.height,"texture.subimage write out of bounds"),L(C.mipmask&1<<Ye,"missing mipmap data"),L(Qe.data||Qe.element||Qe.needsCopy,"missing image data"),Tn(C),rr(Qe,Zi+ae,he,xe,Ye),Dr(),mr(Qe),ye}function ue(ae){var fe=ae|0;if(fe!==C.width){ye.width=C.width=fe,ye.height=C.height=fe,Tn(C);for(var X=0;X<6;++X)for(var oe=0;C.mipmask>>oe;++oe)w.texImage2D(Zi+X,oe,C.format,fe>>oe,fe>>oe,0,C.format,C.type,null);return Dr(),ke.profile&&(C.stats.size=Hu(C.internalformat,C.type,ye.width,ye.height,!1,!0)),ye}}return ye(K,je,Ae,Rt,br,H),ye.subimage=Se,ye.resize=ue,ye._reglType="textureCube",ye._texture=C,ke.profile&&(ye.stats=C.stats),ye.destroy=function(){C.decRef()},ye}function an(){for(var K=0;K<yn;++K)w.activeTexture(Hs+K),w.bindTexture(yo,null),Fr[K]=null;un(bn).forEach(qt),Ie.cubeCount=0,Ie.textureCount=0}ke.profile&&(Ie.getTotalTextureSize=function(){var K=0;return Object.keys(bn).forEach(function(je){K+=bn[je].stats.size}),K});function Fo(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null)}un(bn).forEach(function(Ae){Ae.texture=w.createTexture(),w.bindTexture(Ae.target,Ae.texture);for(var Rt=0;Rt<32;++Rt)if(Ae.mipmask&1<<Rt)if(Ae.target===yo)w.texImage2D(yo,Rt,Ae.internalformat,Ae.width>>Rt,Ae.height>>Rt,0,Ae.internalformat,Ae.type,null);else for(var br=0;br<6;++br)w.texImage2D(Zi+br,Rt,Ae.internalformat,Ae.width>>Rt,Ae.height>>Rt,0,Ae.internalformat,Ae.type,null);pn(Ae.texInfo,Ae.target)})}function da(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null),w.activeTexture(Hs+K),w.bindTexture(yo,null),w.bindTexture(ao,null)}}return{create2D:Sr,createCube:Pr,clear:an,getTexture:function(K){return null},restore:Fo,refresh:da}}var jo=36161,qo=32854,vf=32855,nd=36194,Xu=33189,od=36168,id=34041,ad=35907,yf=34836,sd=34842,ud=34843,Yn=[];Yn[qo]=2,Yn[vf]=2,Yn[nd]=2,Yn[Xu]=2,Yn[od]=1,Yn[id]=4,Yn[ad]=4,Yn[yf]=16,Yn[sd]=8,Yn[ud]=6;function ld(w,G,q){return Yn[w]*G*q}var fd=function(w,G,q,Ce,Je){var Ie={rgba4:qo,rgb565:nd,"rgb5 a1":vf,depth:Xu,stencil:od,"depth stencil":id};G.ext_srgb&&(Ie.srgba=ad),G.ext_color_buffer_half_float&&(Ie.rgba16f=sd,Ie.rgb16f=ud),G.webgl_color_buffer_float&&(Ie.rgba32f=yf);var ke=[];Object.keys(Ie).forEach(function(st){var Ot=Ie[st];ke[Ot]=st});var at=0,lt={};function vt(st){this.id=at++,this.refCount=1,this.renderbuffer=st,this.format=qo,this.width=0,this.height=0,Je.profile&&(this.stats={size:0})}vt.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(st){var Ot=st.renderbuffer;L(Ot,"must not double destroy renderbuffer"),w.bindRenderbuffer(jo,null),w.deleteRenderbuffer(Ot),st.renderbuffer=null,st.refCount=0,delete lt[st.id],Ce.renderbufferCount--}function it(st,Ot){var be=new vt(w.createRenderbuffer());lt[be.id]=be,Ce.renderbufferCount++;function Ne(xt,nt){var ct=0,ot=0,Ze=qo;if(typeof xt=="object"&&xt){var Ve=xt;if("shape"in Ve){var ze=Ve.shape;L(Array.isArray(ze)&&ze.length>=2,"invalid renderbuffer shape"),ct=ze[0]|0,ot=ze[1]|0}else"radius"in Ve&&(ct=ot=Ve.radius|0),"width"in Ve&&(ct=Ve.width|0),"height"in Ve&&(ot=Ve.height|0);"format"in Ve&&(L.parameter(Ve.format,Ie,"invalid renderbuffer format"),Ze=Ie[Ve.format])}else typeof xt=="number"?(ct=xt|0,typeof nt=="number"?ot=nt|0:ot=ct):xt?L.raise("invalid arguments to renderbuffer constructor"):ct=ot=1;if(L(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),!(ct===be.width&&ot===be.height&&Ze===be.format))return Ne.width=be.width=ct,Ne.height=be.height=ot,be.format=Ze,w.bindRenderbuffer(jo,be.renderbuffer),w.renderbufferStorage(jo,Ze,ct,ot),L(w.getError()===0,"invalid render buffer format"),Je.profile&&(be.stats.size=ld(be.format,be.width,be.height)),Ne.format=ke[be.format],Ne}function yt(xt,nt){var ct=xt|0,ot=nt|0||ct;return ct===be.width&&ot===be.height||(L(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),Ne.width=be.width=ct,Ne.height=be.height=ot,w.bindRenderbuffer(jo,be.renderbuffer),w.renderbufferStorage(jo,be.format,ct,ot),L(w.getError()===0,"invalid render buffer format"),Je.profile&&(be.stats.size=ld(be.format,be.width,be.height))),Ne}return Ne(st,Ot),Ne.resize=yt,Ne._reglType="renderbuffer",Ne._renderbuffer=be,Je.profile&&(Ne.stats=be.stats),Ne.destroy=function(){be.decRef()},Ne}Je.profile&&(Ce.getTotalRenderbufferSize=function(){var st=0;return Object.keys(lt).forEach(function(Ot){st+=lt[Ot].stats.size}),st});function St(){un(lt).forEach(function(st){st.renderbuffer=w.createRenderbuffer(),w.bindRenderbuffer(jo,st.renderbuffer),w.renderbufferStorage(jo,st.format,st.width,st.height)}),w.bindRenderbuffer(jo,null)}return{create:it,clear:function(){un(lt).forEach(ft)},restore:St}},ei=36160,gf=36161,ta=3553,$u=34069,cd=36064,dd=36096,hd=36128,Si=33306,pd=36053,Wa=36054,hy=36055,mf=36057,py=36061,vy=36193,yy=5121,gy=5126,vd=6407,yd=6408,bf=6402,my=[vd,yd],Xs=[];Xs[yd]=4,Xs[vd]=3;var Vu=[];Vu[yy]=1,Vu[gy]=4,Vu[vy]=2;var Ef=32854,by=32855,Of=36194,gd=33189,Ey=36168,Sf=34041,md=35907,bd=34836,Ed=34842,Oy=34843,Sy=[Ef,by,Of,md,Ed,Oy,bd],Ya={};Ya[pd]="complete",Ya[Wa]="incomplete attachment",Ya[mf]="incomplete dimensions",Ya[hy]="incomplete, missing attachment",Ya[py]="unsupported";function xy(w,G,q,Ce,Je,Ie){var ke={cur:null,next:null,dirty:!1,setFBO:null},at=["rgba"],lt=["rgba4","rgb565","rgb5 a1"];G.ext_srgb&&lt.push("srgba"),G.ext_color_buffer_half_float&&lt.push("rgba16f","rgb16f"),G.webgl_color_buffer_float&&lt.push("rgba32f");var vt=["uint8"];G.oes_texture_half_float&&vt.push("half float","float16"),G.oes_texture_float&&vt.push("float","float32");function ft(mt,et,qe){this.target=mt,this.texture=et,this.renderbuffer=qe;var rr=0,cr=0;et?(rr=et.width,cr=et.height):qe&&(rr=qe.width,cr=qe.height),this.width=rr,this.height=cr}function it(mt){mt&&(mt.texture&&mt.texture._texture.decRef(),mt.renderbuffer&&mt.renderbuffer._renderbuffer.decRef())}function St(mt,et,qe){if(mt)if(mt.texture){var rr=mt.texture._texture,cr=Math.max(1,rr.width),Gt=Math.max(1,rr.height);L(cr===et&&Gt===qe,"inconsistent width/height for supplied texture"),rr.refCount+=1}else{var mr=mt.renderbuffer._renderbuffer;L(mr.width===et&&mr.height===qe,"inconsistent width/height for renderbuffer"),mr.refCount+=1}}function st(mt,et){et&&(et.texture?w.framebufferTexture2D(ei,mt,et.target,et.texture._texture.texture,0):w.framebufferRenderbuffer(ei,mt,gf,et.renderbuffer._renderbuffer.renderbuffer))}function Ot(mt){var et=ta,qe=null,rr=null,cr=mt;typeof mt=="object"&&(cr=mt.data,"target"in mt&&(et=mt.target|0)),L.type(cr,"function","invalid attachment data");var Gt=cr._reglType;return Gt==="texture2d"?(qe=cr,L(et===ta)):Gt==="textureCube"?(qe=cr,L(et>=$u&&et<$u+6,"invalid cube map target")):Gt==="renderbuffer"?(rr=cr,et=gf):L.raise("invalid regl object for attachment"),new ft(et,qe,rr)}function be(mt,et,qe,rr,cr){if(qe){var Gt=Ce.create2D({width:mt,height:et,format:rr,type:cr});return Gt._texture.refCount=0,new ft(ta,Gt,null)}else{var mr=Je.create({width:mt,height:et,format:rr});return mr._renderbuffer.refCount=0,new ft(gf,null,mr)}}function Ne(mt){return mt&&(mt.texture||mt.renderbuffer)}function yt(mt,et,qe){mt&&(mt.texture?mt.texture.resize(et,qe):mt.renderbuffer&&mt.renderbuffer.resize(et,qe),mt.width=et,mt.height=qe)}var xt=0,nt={};function ct(){this.id=xt++,nt[this.id]=this,this.framebuffer=w.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ot(mt){mt.colorAttachments.forEach(it),it(mt.depthAttachment),it(mt.stencilAttachment),it(mt.depthStencilAttachment)}function Ze(mt){var et=mt.framebuffer;L(et,"must not double destroy framebuffer"),w.deleteFramebuffer(et),mt.framebuffer=null,Ie.framebufferCount--,delete nt[mt.id]}function Ve(mt){var et;w.bindFramebuffer(ei,mt.framebuffer);var qe=mt.colorAttachments;for(et=0;et<qe.length;++et)st(cd+et,qe[et]);for(et=qe.length;et<q.maxColorAttachments;++et)w.framebufferTexture2D(ei,cd+et,ta,null,0);w.framebufferTexture2D(ei,Si,ta,null,0),w.framebufferTexture2D(ei,dd,ta,null,0),w.framebufferTexture2D(ei,hd,ta,null,0),st(dd,mt.depthAttachment),st(hd,mt.stencilAttachment),st(Si,mt.depthStencilAttachment);var rr=w.checkFramebufferStatus(ei);!w.isContextLost()&&rr!==pd&&L.raise("framebuffer configuration not supported, status = "+Ya[rr]),w.bindFramebuffer(ei,ke.next?ke.next.framebuffer:null),ke.cur=ke.next,w.getError()}function ze(mt,et){var qe=new ct;Ie.framebufferCount++;function rr(Gt,mr){var ar;L(ke.next!==qe,"can not update framebuffer which is currently in use");var yr=0,Ar=0,fn=!0,vn=!0,Or=null,hn=!0,Wr="rgba",Yr="uint8",pn=1,cn=null,bn=null,yn=null,Fr=!1;if(typeof Gt=="number")yr=Gt|0,Ar=mr|0||yr;else if(!Gt)yr=Ar=1;else{L.type(Gt,"object","invalid arguments for framebuffer");var dr=Gt;if("shape"in dr){var Tn=dr.shape;L(Array.isArray(Tn)&&Tn.length>=2,"invalid shape for framebuffer"),yr=Tn[0],Ar=Tn[1]}else"radius"in dr&&(yr=Ar=dr.radius),"width"in dr&&(yr=dr.width),"height"in dr&&(Ar=dr.height);("color"in dr||"colors"in dr)&&(Or=dr.color||dr.colors,Array.isArray(Or)&&L(Or.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),Or||("colorCount"in dr&&(pn=dr.colorCount|0,L(pn>0,"invalid color buffer count")),"colorTexture"in dr&&(hn=!!dr.colorTexture,Wr="rgba4"),"colorType"in dr&&(Yr=dr.colorType,hn?(L(G.oes_texture_float||!(Yr==="float"||Yr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),L(G.oes_texture_half_float||!(Yr==="half float"||Yr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yr==="half float"||Yr==="float16"?(L(G.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(Yr==="float"||Yr==="float32")&&(L(G.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),L.oneOf(Yr,vt,"invalid color type")),"colorFormat"in dr&&(Wr=dr.colorFormat,at.indexOf(Wr)>=0?hn=!0:lt.indexOf(Wr)>=0?hn=!1:hn?L.oneOf(dr.colorFormat,at,"invalid color format for texture"):L.oneOf(dr.colorFormat,lt,"invalid color format for renderbuffer"))),("depthTexture"in dr||"depthStencilTexture"in dr)&&(Fr=!!(dr.depthTexture||dr.depthStencilTexture),L(!Fr||G.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in dr&&(typeof dr.depth=="boolean"?fn=dr.depth:(cn=dr.depth,vn=!1)),"stencil"in dr&&(typeof dr.stencil=="boolean"?vn=dr.stencil:(bn=dr.stencil,fn=!1)),"depthStencil"in dr&&(typeof dr.depthStencil=="boolean"?fn=vn=dr.depthStencil:(yn=dr.depthStencil,fn=!1,vn=!1))}var Dr=null,qt=null,Sr=null,Pr=null;if(Array.isArray(Or))Dr=Or.map(Ot);else if(Or)Dr=[Ot(Or)];else for(Dr=new Array(pn),ar=0;ar<pn;++ar)Dr[ar]=be(yr,Ar,hn,Wr,Yr);L(G.webgl_draw_buffers||Dr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),L(Dr.length<=q.maxColorAttachments,"too many color attachments, not supported"),yr=yr||Dr[0].width,Ar=Ar||Dr[0].height,cn?qt=Ot(cn):fn&&!vn&&(qt=be(yr,Ar,Fr,"depth","uint32")),bn?Sr=Ot(bn):vn&&!fn&&(Sr=be(yr,Ar,!1,"stencil","uint8")),yn?Pr=Ot(yn):!cn&&!bn&&vn&&fn&&(Pr=be(yr,Ar,Fr,"depth stencil","depth stencil")),L(!!cn+!!bn+!!yn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var an=null;for(ar=0;ar<Dr.length;++ar)if(St(Dr[ar],yr,Ar),L(!Dr[ar]||Dr[ar].texture&&my.indexOf(Dr[ar].texture._texture.format)>=0||Dr[ar].renderbuffer&&Sy.indexOf(Dr[ar].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ar+" is invalid"),Dr[ar]&&Dr[ar].texture){var Fo=Xs[Dr[ar].texture._texture.format]*Vu[Dr[ar].texture._texture.type];an===null?an=Fo:L(an===Fo,"all color attachments much have the same number of bits per pixel.")}return St(qt,yr,Ar),L(!qt||qt.texture&&qt.texture._texture.format===bf||qt.renderbuffer&&qt.renderbuffer._renderbuffer.format===gd,"invalid depth attachment for framebuffer object"),St(Sr,yr,Ar),L(!Sr||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Ey,"invalid stencil attachment for framebuffer object"),St(Pr,yr,Ar),L(!Pr||Pr.texture&&Pr.texture._texture.format===Sf||Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.format===Sf,"invalid depth-stencil attachment for framebuffer object"),ot(qe),qe.width=yr,qe.height=Ar,qe.colorAttachments=Dr,qe.depthAttachment=qt,qe.stencilAttachment=Sr,qe.depthStencilAttachment=Pr,rr.color=Dr.map(Ne),rr.depth=Ne(qt),rr.stencil=Ne(Sr),rr.depthStencil=Ne(Pr),rr.width=qe.width,rr.height=qe.height,Ve(qe),rr}function cr(Gt,mr){L(ke.next!==qe,"can not resize a framebuffer which is currently in use");var ar=Math.max(Gt|0,1),yr=Math.max(mr|0||ar,1);if(ar===qe.width&&yr===qe.height)return rr;for(var Ar=qe.colorAttachments,fn=0;fn<Ar.length;++fn)yt(Ar[fn],ar,yr);return yt(qe.depthAttachment,ar,yr),yt(qe.stencilAttachment,ar,yr),yt(qe.depthStencilAttachment,ar,yr),qe.width=rr.width=ar,qe.height=rr.height=yr,Ve(qe),rr}return rr(mt,et),u(rr,{resize:cr,_reglType:"framebuffer",_framebuffer:qe,destroy:function(){Ze(qe),ot(qe)},use:function(Gt){ke.setFBO({framebuffer:rr},Gt)}})}function At(mt){var et=Array(6);function qe(cr){var Gt;L(et.indexOf(ke.next)<0,"can not update framebuffer which is currently in use");var mr={color:null},ar=0,yr=null,Ar="rgba",fn="uint8",vn=1;if(typeof cr=="number")ar=cr|0;else if(!cr)ar=1;else{L.type(cr,"object","invalid arguments for framebuffer");var Or=cr;if("shape"in Or){var hn=Or.shape;L(Array.isArray(hn)&&hn.length>=2,"invalid shape for framebuffer"),L(hn[0]===hn[1],"cube framebuffer must be square"),ar=hn[0]}else"radius"in Or&&(ar=Or.radius|0),"width"in Or?(ar=Or.width|0,"height"in Or&&L(Or.height===ar,"must be square")):"height"in Or&&(ar=Or.height|0);("color"in Or||"colors"in Or)&&(yr=Or.color||Or.colors,Array.isArray(yr)&&L(yr.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),yr||("colorCount"in Or&&(vn=Or.colorCount|0,L(vn>0,"invalid color buffer count")),"colorType"in Or&&(L.oneOf(Or.colorType,vt,"invalid color type"),fn=Or.colorType),"colorFormat"in Or&&(Ar=Or.colorFormat,L.oneOf(Or.colorFormat,at,"invalid color format for texture"))),"depth"in Or&&(mr.depth=Or.depth),"stencil"in Or&&(mr.stencil=Or.stencil),"depthStencil"in Or&&(mr.depthStencil=Or.depthStencil)}var Wr;if(yr)if(Array.isArray(yr))for(Wr=[],Gt=0;Gt<yr.length;++Gt)Wr[Gt]=yr[Gt];else Wr=[yr];else{Wr=Array(vn);var Yr={radius:ar,format:Ar,type:fn};for(Gt=0;Gt<vn;++Gt)Wr[Gt]=Ce.createCube(Yr)}for(mr.color=Array(Wr.length),Gt=0;Gt<Wr.length;++Gt){var pn=Wr[Gt];L(typeof pn=="function"&&pn._reglType==="textureCube","invalid cube map"),ar=ar||pn.width,L(pn.width===ar&&pn.height===ar,"invalid cube map shape"),mr.color[Gt]={target:$u,data:Wr[Gt]}}for(Gt=0;Gt<6;++Gt){for(var cn=0;cn<Wr.length;++cn)mr.color[cn].target=$u+Gt;Gt>0&&(mr.depth=et[0].depth,mr.stencil=et[0].stencil,mr.depthStencil=et[0].depthStencil),et[Gt]?et[Gt](mr):et[Gt]=ze(mr)}return u(qe,{width:ar,height:ar,color:Wr})}function rr(cr){var Gt,mr=cr|0;if(L(mr>0&&mr<=q.maxCubeMapSize,"invalid radius for cube fbo"),mr===qe.width)return qe;var ar=qe.color;for(Gt=0;Gt<ar.length;++Gt)ar[Gt].resize(mr);for(Gt=0;Gt<6;++Gt)et[Gt].resize(mr);return qe.width=qe.height=mr,qe}return qe(mt),u(qe,{faces:et,resize:rr,_reglType:"framebufferCube",destroy:function(){et.forEach(function(cr){cr.destroy()})}})}function ir(){ke.cur=null,ke.next=null,ke.dirty=!0,un(nt).forEach(function(mt){mt.framebuffer=w.createFramebuffer(),Ve(mt)})}return u(ke,{getFramebuffer:function(mt){if(typeof mt=="function"&&mt._reglType==="framebuffer"){var et=mt._framebuffer;if(et instanceof ct)return et}return null},create:ze,createCube:At,clear:function(){un(nt).forEach(Ze)},restore:ir})}var Ty=5126,xi=34962;function ra(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ty,this.offset=0,this.stride=0,this.divisor=0}function Ay(w,G,q,Ce,Je){for(var Ie=q.maxAttributes,ke=new Array(Ie),at=0;at<Ie;++at)ke[at]=new ra;var lt=0,vt={},ft={Record:ra,scope:{},state:ke,currentVAO:null,targetVAO:null,restore:St()?nt:function(){},createVAO:ct,getVAO:Ot,destroyBuffer:it,setVAO:St()?be:Ne,clear:St()?yt:function(){}};function it(ot){for(var Ze=0;Ze<ke.length;++Ze){var Ve=ke[Ze];Ve.buffer===ot&&(w.disableVertexAttribArray(Ze),Ve.buffer=null)}}function St(){return G.oes_vertex_array_object}function st(){return G.angle_instanced_arrays}function Ot(ot){return typeof ot=="function"&&ot._vao?ot._vao:null}function be(ot){if(ot!==ft.currentVAO){var Ze=St();ot?Ze.bindVertexArrayOES(ot.vao):Ze.bindVertexArrayOES(null),ft.currentVAO=ot}}function Ne(ot){if(ot!==ft.currentVAO){if(ot)ot.bindAttrs();else for(var Ze=st(),Ve=0;Ve<ke.length;++Ve){var ze=ke[Ve];ze.buffer?(w.enableVertexAttribArray(Ve),w.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offfset),Ze&&ze.divisor&&Ze.vertexAttribDivisorANGLE(Ve,ze.divisor)):(w.disableVertexAttribArray(Ve),w.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}ft.currentVAO=ot}}function yt(){un(vt).forEach(function(ot){ot.destroy()})}function xt(){this.id=++lt,this.attributes=[];var ot=St();ot?this.vao=ot.createVertexArrayOES():this.vao=null,vt[this.id]=this,this.buffers=[]}xt.prototype.bindAttrs=function(){for(var ot=st(),Ze=this.attributes,Ve=0;Ve<Ze.length;++Ve){var ze=Ze[Ve];ze.buffer?(w.enableVertexAttribArray(Ve),w.bindBuffer(xi,ze.buffer.buffer),w.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offset),ot&&ze.divisor&&ot.vertexAttribDivisorANGLE(Ve,ze.divisor)):(w.disableVertexAttribArray(Ve),w.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}for(var At=Ze.length;At<Ie;++At)w.disableVertexAttribArray(At)},xt.prototype.refresh=function(){var ot=St();ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},xt.prototype.destroy=function(){if(this.vao){var ot=St();this===ft.currentVAO&&(ft.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}vt[this.id]&&(delete vt[this.id],Ce.vaoCount-=1)};function nt(){var ot=St();ot&&un(vt).forEach(function(Ze){Ze.refresh()})}function ct(ot){var Ze=new xt;Ce.vaoCount+=1;function Ve(ze){L(Array.isArray(ze),"arguments to vertex array constructor must be an array"),L(ze.length<Ie,"too many attributes"),L(ze.length>0,"must specify at least one attribute");var At={},ir=Ze.attributes;ir.length=ze.length;for(var mt=0;mt<ze.length;++mt){var et=ze[mt],qe=ir[mt]=new ra,rr=et.data||et;if(Array.isArray(rr)||i(rr)||oo(rr)){var cr;Ze.buffers[mt]&&(cr=Ze.buffers[mt],i(rr)&&cr._buffer.byteLength>=rr.byteLength?cr.subdata(rr):(cr.destroy(),Ze.buffers[mt]=null)),Ze.buffers[mt]||(cr=Ze.buffers[mt]=Je.create(et,xi,!1,!0)),qe.buffer=Je.getBuffer(cr),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1,At[mt]=1}else Je.getBuffer(et)?(qe.buffer=Je.getBuffer(et),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1):Je.getBuffer(et.buffer)?(qe.buffer=Je.getBuffer(et.buffer),qe.size=(+et.size||qe.buffer.dimension)|0,qe.normalized=!!et.normalized||!1,"type"in et?(L.parameter(et.type,Ro,"invalid buffer type"),qe.type=Ro[et.type]):qe.type=qe.buffer.dtype,qe.offset=(et.offset||0)|0,qe.stride=(et.stride||0)|0,qe.divisor=(et.divisor||0)|0,qe.state=1,L(qe.size>=1&&qe.size<=4,"size must be between 1 and 4"),L(qe.offset>=0,"invalid offset"),L(qe.stride>=0&&qe.stride<=255,"stride must be between 0 and 255"),L(qe.divisor>=0,"divisor must be positive"),L(!qe.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in et?(L(mt>0,"first attribute must not be a constant"),qe.x=+et.x||0,qe.y=+et.y||0,qe.z=+et.z||0,qe.w=+et.w||0,qe.state=2):L(!1,"invalid attribute spec for location "+mt)}for(var Gt=0;Gt<Ze.buffers.length;++Gt)!At[Gt]&&Ze.buffers[Gt]&&(Ze.buffers[Gt].destroy(),Ze.buffers[Gt]=null);return Ze.refresh(),Ve}return Ve.destroy=function(){for(var ze=0;ze<Ze.buffers.length;++ze)Ze.buffers[ze]&&Ze.buffers[ze].destroy();Ze.buffers.length=0,Ze.destroy()},Ve._vao=Ze,Ve._reglType="vao",Ve(ot)}return ft}var xf=35632,Od=35633,Wu=35718,Py=35721;function Sd(w,G,q,Ce){var Je={},Ie={};function ke(be,Ne,yt,xt){this.name=be,this.id=Ne,this.location=yt,this.info=xt}function at(be,Ne){for(var yt=0;yt<be.length;++yt)if(be[yt].id===Ne.id){be[yt].location=Ne.location;return}be.push(Ne)}function lt(be,Ne,yt){var xt=be===xf?Je:Ie,nt=xt[Ne];if(!nt){var ct=G.str(Ne);nt=w.createShader(be),w.shaderSource(nt,ct),w.compileShader(nt),L.shaderError(w,nt,ct,be,yt),xt[Ne]=nt}return nt}var vt={},ft=[],it=0;function St(be,Ne){this.id=it++,this.fragId=be,this.vertId=Ne,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ce.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function st(be,Ne,yt){var xt,nt,ct=lt(xf,be.fragId),ot=lt(Od,be.vertId),Ze=be.program=w.createProgram();if(w.attachShader(Ze,ct),w.attachShader(Ze,ot),yt)for(xt=0;xt<yt.length;++xt){var Ve=yt[xt];w.bindAttribLocation(Ze,Ve[0],Ve[1])}w.linkProgram(Ze),L.linkError(w,Ze,G.str(be.fragId),G.str(be.vertId),Ne);var ze=w.getProgramParameter(Ze,Wu);Ce.profile&&(be.stats.uniformsCount=ze);var At=be.uniforms;for(xt=0;xt<ze;++xt)if(nt=w.getActiveUniform(Ze,xt),nt)if(nt.size>1)for(var ir=0;ir<nt.size;++ir){var mt=nt.name.replace("[0]","["+ir+"]");at(At,new ke(mt,G.id(mt),w.getUniformLocation(Ze,mt),nt))}else at(At,new ke(nt.name,G.id(nt.name),w.getUniformLocation(Ze,nt.name),nt));var et=w.getProgramParameter(Ze,Py);Ce.profile&&(be.stats.attributesCount=et);var qe=be.attributes;for(xt=0;xt<et;++xt)nt=w.getActiveAttrib(Ze,xt),nt&&at(qe,new ke(nt.name,G.id(nt.name),w.getAttribLocation(Ze,nt.name),nt))}Ce.profile&&(q.getMaxUniformsCount=function(){var be=0;return ft.forEach(function(Ne){Ne.stats.uniformsCount>be&&(be=Ne.stats.uniformsCount)}),be},q.getMaxAttributesCount=function(){var be=0;return ft.forEach(function(Ne){Ne.stats.attributesCount>be&&(be=Ne.stats.attributesCount)}),be});function Ot(){Je={},Ie={};for(var be=0;be<ft.length;++be)st(ft[be],null,ft[be].attributes.map(function(Ne){return[Ne.location,Ne.name]}))}return{clear:function(){var be=w.deleteShader.bind(w);un(Je).forEach(be),Je={},un(Ie).forEach(be),Ie={},ft.forEach(function(Ne){w.deleteProgram(Ne.program)}),ft.length=0,vt={},q.shaderCount=0},program:function(be,Ne,yt,xt){L.command(be>=0,"missing vertex shader",yt),L.command(Ne>=0,"missing fragment shader",yt);var nt=vt[Ne];nt||(nt=vt[Ne]={});var ct=nt[be];if(ct&&(ct.refCount++,!xt))return ct;var ot=new St(Ne,be);return q.shaderCount++,st(ot,yt,xt),ct||(nt[be]=ot),ft.push(ot),u(ot,{destroy:function(){if(ot.refCount--,ot.refCount<=0){w.deleteProgram(ot.program);var Ze=ft.indexOf(ot);ft.splice(Ze,1),q.shaderCount--}nt[ot.vertId].refCount<=0&&(w.deleteShader(Ie[ot.vertId]),delete Ie[ot.vertId],delete vt[ot.fragId][ot.vertId]),Object.keys(vt[ot.fragId]).length||(w.deleteShader(Je[ot.fragId]),delete Je[ot.fragId],delete vt[ot.fragId])}})},restore:Ot,shader:lt,frag:-1,vert:-1}}var wy=6408,$s=5121,xd=3333,Ka=5126;function _y(w,G,q,Ce,Je,Ie,ke){function at(ft){var it;G.next===null?(L(Je.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),it=$s):(L(G.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),it=G.next.colorAttachments[0].texture._texture.type,Ie.oes_texture_float?(L(it===$s||it===Ka,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),it===Ka&&L(ke.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):L(it===$s,"Reading from a framebuffer is only allowed for the type 'uint8'"));var St=0,st=0,Ot=Ce.framebufferWidth,be=Ce.framebufferHeight,Ne=null;i(ft)?Ne=ft:ft&&(L.type(ft,"object","invalid arguments to regl.read()"),St=ft.x|0,st=ft.y|0,L(St>=0&&St<Ce.framebufferWidth,"invalid x offset for regl.read"),L(st>=0&&st<Ce.framebufferHeight,"invalid y offset for regl.read"),Ot=(ft.width||Ce.framebufferWidth-St)|0,be=(ft.height||Ce.framebufferHeight-st)|0,Ne=ft.data||null),Ne&&(it===$s?L(Ne instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):it===Ka&&L(Ne instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),L(Ot>0&&Ot+St<=Ce.framebufferWidth,"invalid width for read pixels"),L(be>0&&be+st<=Ce.framebufferHeight,"invalid height for read pixels"),q();var yt=Ot*be*4;return Ne||(it===$s?Ne=new Uint8Array(yt):it===Ka&&(Ne=Ne||new Float32Array(yt))),L.isTypedArray(Ne,"data buffer for regl.read() must be a typedarray"),L(Ne.byteLength>=yt,"data buffer for regl.read() too small"),w.pixelStorei(xd,4),w.readPixels(St,st,Ot,be,wy,it,Ne),Ne}function lt(ft){var it;return G.setFBO({framebuffer:ft.framebuffer},function(){it=at(ft)}),it}function vt(ft){return!ft||!("framebuffer"in ft)?at(ft):lt(ft)}return vt}function Za(w){return Array.prototype.slice.call(w)}function Ja(w){return Za(w).join("")}function Ny(){var w=0,G=[],q=[];function Ce(it){for(var St=0;St<q.length;++St)if(q[St]===it)return G[St];var st="g"+w++;return G.push(st),q.push(it),st}function Je(){var it=[];function St(){it.push.apply(it,Za(arguments))}var st=[];function Ot(){var be="v"+w++;return st.push(be),arguments.length>0&&(it.push(be,"="),it.push.apply(it,Za(arguments)),it.push(";")),be}return u(St,{def:Ot,toString:function(){return Ja([st.length>0?"var "+st.join(",")+";":"",Ja(it)])}})}function Ie(){var it=Je(),St=Je(),st=it.toString,Ot=St.toString;function be(Ne,yt){St(Ne,yt,"=",it.def(Ne,yt),";")}return u(function(){it.apply(it,Za(arguments))},{def:it.def,entry:it,exit:St,save:be,set:function(Ne,yt,xt){be(Ne,yt),it(Ne,yt,"=",xt,";")},toString:function(){return st()+Ot()}})}function ke(){var it=Ja(arguments),St=Ie(),st=Ie(),Ot=St.toString,be=st.toString;return u(St,{then:function(){return St.apply(St,Za(arguments)),this},else:function(){return st.apply(st,Za(arguments)),this},toString:function(){var Ne=be();return Ne&&(Ne="else{"+Ne+"}"),Ja(["if(",it,"){",Ot(),"}",Ne])}})}var at=Je(),lt={};function vt(it,St){var st=[];function Ot(){var nt="a"+st.length;return st.push(nt),nt}St=St||0;for(var be=0;be<St;++be)Ot();var Ne=Ie(),yt=Ne.toString,xt=lt[it]=u(Ne,{arg:Ot,toString:function(){return Ja(["function(",st.join(),"){",yt(),"}"])}});return xt}function ft(){var it=['"use strict";',at,"return {"];Object.keys(lt).forEach(function(Ot){it.push('"',Ot,'":',lt[Ot].toString(),",")}),it.push("}");var St=Ja(it).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),st=Function.apply(null,G.concat(St));return st.apply(null,q)}return{global:at,link:Ce,block:Je,proc:vt,scope:Ie,cond:ke,compile:ft}}var Qa="xyzw".split(""),Tf=5121,qa=1,Af=2,Pf=0,Yu=1,wf=2,_f=3,Ku=4,Td=5,Vs=6,Ad="dither",Pd="blend.enable",wd="blend.color",Ws="blend.equation",Nf="blend.func",Zu="depth.enable",_d="depth.func",Nd="depth.range",Md="depth.mask",Mf="colorMask",Rd="cull.enable",Id="cull.face",Rf="frontFace",If="lineWidth",Dd="polygonOffset.enable",Ju="polygonOffset.offset",Df="sample.alpha",Cf="sample.enable",Lf="sample.coverage",Cd="stencil.enable",Ld="stencil.mask",jf="stencil.func",es="stencil.opFront",Ys="stencil.opBack",jd="scissor.enable",Ti="scissor.box",ti="viewport",na="profile",oa="framebuffer",ts="vert",Ks="frag",ia="elements",aa="primitive",sa="count",Qu="offset",Zs="instances",Js="vao",Bf="Width",Ff="Height",rs=oa+Bf,ns=oa+Ff,Gf=ti+Bf,My=ti+Ff,Bd="drawingBuffer",Fd=Bd+Bf,Gd=Bd+Ff,Ry=[Nf,Ws,jf,es,Ys,Lf,ti,Ti,Ju],os=34962,Iy=34963,Dy=35632,Cy=35633,kd=3553,Ly=34067,Ud=2884,jy=3042,By=3024,Fy=2960,Gy=2929,ky=3089,Uy=32823,zy=32926,Hy=32928,kf=5126,ua=35664,qu=35665,la=35666,Uf=5124,is=35667,el=35668,tl=35669,zf=35670,fa=35671,rl=35672,ri=35673,Qs=35674,qs=35675,as=35676,eu=35678,ss=35680,zd=4,tu=1028,ca=1029,Hd=2304,Hf=2305,Xy=32775,$y=32776,Vy=519,Ai=7680,Xd=0,Xf=1,$d=32774,Wy=513,Vd=36160,Yy=36064,Bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},$f=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],us={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wd={frag:Dy,vert:Cy},Mn={cw:Hd,ccw:Hf};function nl(w){return Array.isArray(w)||i(w)||oo(w)}function Yd(w){return w.sort(function(G,q){return G===ti?-1:q===ti?1:G<q?-1:1})}function Un(w,G,q,Ce){this.thisDep=w,this.contextDep=G,this.propDep=q,this.append=Ce}function wi(w){return w&&!(w.thisDep||w.contextDep||w.propDep)}function ln(w){return new Un(!1,!1,!1,w)}function Kn(w,G){var q=w.type;if(q===Pf){var Ce=w.data.length;return new Un(!0,Ce>=1,Ce>=2,G)}else if(q===Ku){var Je=w.data;return new Un(Je.thisDep,Je.contextDep,Je.propDep,G)}else{if(q===Td)return new Un(!1,!1,!1,G);if(q===Vs){for(var Ie=!1,ke=!1,at=!1,lt=0;lt<w.data.length;++lt){var vt=w.data[lt];if(vt.type===Yu)at=!0;else if(vt.type===wf)ke=!0;else if(vt.type===_f)Ie=!0;else if(vt.type===Pf){Ie=!0;var ft=vt.data;ft>=1&&(ke=!0),ft>=2&&(at=!0)}else vt.type===Ku&&(Ie=Ie||vt.data.thisDep,ke=ke||vt.data.contextDep,at=at||vt.data.propDep)}return new Un(Ie,ke,at,G)}else return new Un(q===_f,q===wf,q===Yu,G)}}var Vf=new Un(!1,!1,!1,function(){});function Ky(w,G,q,Ce,Je,Ie,ke,at,lt,vt,ft,it,St,st,Ot){var be=vt.Record,Ne={add:32774,subtract:32778,"reverse subtract":32779};q.ext_blend_minmax&&(Ne.min=Xy,Ne.max=$y);var yt=q.angle_instanced_arrays,xt=q.webgl_draw_buffers,nt={dirty:!0,profile:Ot.profile},ct={},ot=[],Ze={},Ve={};function ze(H){return H.replace(".","_")}function At(H,C,ie){var ye=ze(H);ot.push(H),ct[ye]=nt[ye]=!!ie,Ze[ye]=C}function ir(H,C,ie){var ye=ze(H);ot.push(H),Array.isArray(ie)?(nt[ye]=ie.slice(),ct[ye]=ie.slice()):nt[ye]=ct[ye]=ie,Ve[ye]=C}At(Ad,By),At(Pd,jy),ir(wd,"blendColor",[0,0,0,0]),ir(Ws,"blendEquationSeparate",[$d,$d]),ir(Nf,"blendFuncSeparate",[Xf,Xd,Xf,Xd]),At(Zu,Gy,!0),ir(_d,"depthFunc",Wy),ir(Nd,"depthRange",[0,1]),ir(Md,"depthMask",!0),ir(Mf,Mf,[!0,!0,!0,!0]),At(Rd,Ud),ir(Id,"cullFace",ca),ir(Rf,Rf,Hf),ir(If,If,1),At(Dd,Uy),ir(Ju,"polygonOffset",[0,0]),At(Df,zy),At(Cf,Hy),ir(Lf,"sampleCoverage",[1,!1]),At(Cd,Fy),ir(Ld,"stencilMask",-1),ir(jf,"stencilFunc",[Vy,0,-1]),ir(es,"stencilOpSeparate",[tu,Ai,Ai,Ai]),ir(Ys,"stencilOpSeparate",[ca,Ai,Ai,Ai]),At(jd,ky),ir(Ti,"scissor",[0,0,w.drawingBufferWidth,w.drawingBufferHeight]),ir(ti,ti,[0,0,w.drawingBufferWidth,w.drawingBufferHeight]);var mt={gl:w,context:St,strings:G,next:ct,current:nt,draw:it,elements:Ie,buffer:Je,shader:ft,attributes:vt.state,vao:vt,uniforms:lt,framebuffer:at,extensions:q,timer:st,isBufferArgs:nl},et={primTypes:vi,compareFuncs:us,blendFuncs:Bo,blendEquations:Ne,stencilOps:Pi,glTypes:Ro,orientationType:Mn};L.optional(function(){mt.isArrayLike=qr}),xt&&(et.backBuffer=[ca],et.drawBuffer=ht(Ce.maxDrawbuffers,function(H){return H===0?[0]:ht(H,function(C){return Yy+C})}));var qe=0;function rr(){var H=Ny(),C=H.link,ie=H.global;H.id=qe++,H.batchId="0";var ye=C(mt),Se=H.shared={props:"a0"};Object.keys(mt).forEach(function(oe){Se[oe]=ie.def(ye,".",oe)}),L.optional(function(){H.CHECK=C(L),H.commandStr=L.guessCommand(),H.command=C(H.commandStr),H.assert=function(oe,z,he){oe("if(!(",z,"))",this.CHECK,".commandRaise(",C(he),",",this.command,");")},et.invalidBlendCombinations=$f});var ue=H.next={},ae=H.current={};Object.keys(Ve).forEach(function(oe){Array.isArray(nt[oe])&&(ue[oe]=ie.def(Se.next,".",oe),ae[oe]=ie.def(Se.current,".",oe))});var fe=H.constants={};Object.keys(et).forEach(function(oe){fe[oe]=ie.def(JSON.stringify(et[oe]))}),H.invoke=function(oe,z){switch(z.type){case Pf:var he=["this",Se.context,Se.props,H.batchId];return oe.def(C(z.data),".call(",he.slice(0,Math.max(z.data.length+1,4)),")");case Yu:return oe.def(Se.props,z.data);case wf:return oe.def(Se.context,z.data);case _f:return oe.def("this",z.data);case Ku:return z.data.append(H,oe),z.data.ref;case Td:return z.data.toString();case Vs:return z.data.map(function(xe){return H.invoke(oe,xe)})}},H.attribCache={};var X={};return H.scopeAttrib=function(oe){var z=G.id(oe);if(z in X)return X[z];var he=vt.scope[z];he||(he=vt.scope[z]=new be);var xe=X[z]=C(he);return xe},H}function cr(H){var C=H.static,ie=H.dynamic,ye;if(na in C){var Se=!!C[na];ye=ln(function(ae,fe){return Se}),ye.enable=Se}else if(na in ie){var ue=ie[na];ye=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}return ye}function Gt(H,C){var ie=H.static,ye=H.dynamic;if(oa in ie){var Se=ie[oa];return Se?(Se=at.getFramebuffer(Se),L.command(Se,"invalid framebuffer object"),ln(function(ae,fe){var X=ae.link(Se),oe=ae.shared;fe.set(oe.framebuffer,".next",X);var z=oe.context;return fe.set(z,"."+rs,X+".width"),fe.set(z,"."+ns,X+".height"),X})):ln(function(ae,fe){var X=ae.shared;fe.set(X.framebuffer,".next","null");var oe=X.context;return fe.set(oe,"."+rs,oe+"."+Fd),fe.set(oe,"."+ns,oe+"."+Gd),"null"})}else if(oa in ye){var ue=ye[oa];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue),oe=ae.shared,z=oe.framebuffer,he=fe.def(z,".getFramebuffer(",X,")");L.optional(function(){ae.assert(fe,"!"+X+"||"+he,"invalid framebuffer object")}),fe.set(z,".next",he);var xe=oe.context;return fe.set(xe,"."+rs,he+"?"+he+".width:"+xe+"."+Fd),fe.set(xe,"."+ns,he+"?"+he+".height:"+xe+"."+Gd),he})}else return null}function mr(H,C,ie){var ye=H.static,Se=H.dynamic;function ue(X){if(X in ye){var oe=ye[X];L.commandType(oe,"object","invalid "+X,ie.commandStr);var z=!0,he=oe.x|0,xe=oe.y|0,Ye,Qe;return"width"in oe?(Ye=oe.width|0,L.command(Ye>=0,"invalid "+X,ie.commandStr)):z=!1,"height"in oe?(Qe=oe.height|0,L.command(Qe>=0,"invalid "+X,ie.commandStr)):z=!1,new Un(!z&&C&&C.thisDep,!z&&C&&C.contextDep,!z&&C&&C.propDep,function(Ht,hr){var kt=Ht.shared.context,Zt=Ye;"width"in oe||(Zt=hr.def(kt,".",rs,"-",he));var lr=Qe;return"height"in oe||(lr=hr.def(kt,".",ns,"-",xe)),[he,xe,Zt,lr]})}else if(X in Se){var $e=Se[X],pt=Kn($e,function(Ht,hr){var kt=Ht.invoke(hr,$e);L.optional(function(){Ht.assert(hr,kt+"&&typeof "+kt+'==="object"',"invalid "+X)});var Zt=Ht.shared.context,lr=hr.def(kt,".x|0"),Nr=hr.def(kt,".y|0"),en=hr.def('"width" in ',kt,"?",kt,".width|0:","(",Zt,".",rs,"-",lr,")"),zn=hr.def('"height" in ',kt,"?",kt,".height|0:","(",Zt,".",ns,"-",Nr,")");return L.optional(function(){Ht.assert(hr,en+">=0&&"+zn+">=0","invalid "+X)}),[lr,Nr,en,zn]});return C&&(pt.thisDep=pt.thisDep||C.thisDep,pt.contextDep=pt.contextDep||C.contextDep,pt.propDep=pt.propDep||C.propDep),pt}else return C?new Un(C.thisDep,C.contextDep,C.propDep,function(Ht,hr){var kt=Ht.shared.context;return[0,0,hr.def(kt,".",rs),hr.def(kt,".",ns)]}):null}var ae=ue(ti);if(ae){var fe=ae;ae=new Un(ae.thisDep,ae.contextDep,ae.propDep,function(X,oe){var z=fe.append(X,oe),he=X.shared.context;return oe.set(he,"."+Gf,z[2]),oe.set(he,"."+My,z[3]),z})}return{viewport:ae,scissor_box:ue(Ti)}}function ar(H,C){var ie=H.static,ye=typeof ie[Ks]=="string"&&typeof ie[ts]=="string";if(ye){if(Object.keys(C.dynamic).length>0)return null;var Se=C.static,ue=Object.keys(Se);if(ue.length>0&&typeof Se[ue[0]]=="number"){for(var ae=[],fe=0;fe<ue.length;++fe)L(typeof Se[ue[fe]]=="number","must specify all vertex attribute locations when using vaos"),ae.push([Se[ue[fe]]|0,ue[fe]]);return ae}}return null}function yr(H,C,ie){var ye=H.static,Se=H.dynamic;function ue(z){if(z in ye){var he=G.id(ye[z]);L.optional(function(){ft.shader(Wd[z],he,L.guessCommand())});var xe=ln(function(){return he});return xe.id=he,xe}else if(z in Se){var Ye=Se[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye),Ht=$e.def(Qe.shared.strings,".id(",pt,")");return L.optional(function(){$e(Qe.shared.shader,".shader(",Wd[z],",",Ht,",",Qe.command,");")}),Ht})}return null}var ae=ue(Ks),fe=ue(ts),X=null,oe;return wi(ae)&&wi(fe)?(X=ft.program(fe.id,ae.id,null,ie),oe=ln(function(z,he){return z.link(X)})):oe=new Un(ae&&ae.thisDep||fe&&fe.thisDep,ae&&ae.contextDep||fe&&fe.contextDep,ae&&ae.propDep||fe&&fe.propDep,function(z,he){var xe=z.shared.shader,Ye;ae?Ye=ae.append(z,he):Ye=he.def(xe,".",Ks);var Qe;fe?Qe=fe.append(z,he):Qe=he.def(xe,".",ts);var $e=xe+".program("+Qe+","+Ye;return L.optional(function(){$e+=","+z.command}),he.def($e+")")}),{frag:ae,vert:fe,progVar:oe,program:X}}function Ar(H,C){var ie=H.static,ye=H.dynamic;function Se(){if(ia in ie){var z=ie[ia];nl(z)?z=Ie.getElements(Ie.create(z,!0)):z&&(z=Ie.getElements(z),L.command(z,"invalid elements",C.commandStr));var he=ln(function(Ye,Qe){if(z){var $e=Ye.link(z);return Ye.ELEMENTS=$e,$e}return Ye.ELEMENTS=null,null});return he.value=z,he}else if(ia in ye){var xe=ye[ia];return Kn(xe,function(Ye,Qe){var $e=Ye.shared,pt=$e.isBufferArgs,Ht=$e.elements,hr=Ye.invoke(Qe,xe),kt=Qe.def("null"),Zt=Qe.def(pt,"(",hr,")"),lr=Ye.cond(Zt).then(kt,"=",Ht,".createStream(",hr,");").else(kt,"=",Ht,".getElements(",hr,");");return L.optional(function(){Ye.assert(lr.else,"!"+hr+"||"+kt,"invalid elements")}),Qe.entry(lr),Qe.exit(Ye.cond(Zt).then(Ht,".destroyStream(",kt,");")),Ye.ELEMENTS=kt,kt})}return null}var ue=Se();function ae(){if(aa in ie){var z=ie[aa];return L.commandParameter(z,vi,"invalid primitve",C.commandStr),ln(function(xe,Ye){return vi[z]})}else if(aa in ye){var he=ye[aa];return Kn(he,function(xe,Ye){var Qe=xe.constants.primTypes,$e=xe.invoke(Ye,he);return L.optional(function(){xe.assert(Ye,$e+" in "+Qe,"invalid primitive, must be one of "+Object.keys(vi))}),Ye.def(Qe,"[",$e,"]")})}else if(ue)return wi(ue)?ue.value?ln(function(xe,Ye){return Ye.def(xe.ELEMENTS,".primType")}):ln(function(){return zd}):new Un(ue.thisDep,ue.contextDep,ue.propDep,function(xe,Ye){var Qe=xe.ELEMENTS;return Ye.def(Qe,"?",Qe,".primType:",zd)});return null}function fe(z,he){if(z in ie){var xe=ie[z]|0;return L.command(!he||xe>=0,"invalid "+z,C.commandStr),ln(function(Qe,$e){return he&&(Qe.OFFSET=xe),xe})}else if(z in ye){var Ye=ye[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye);return he&&(Qe.OFFSET=pt,L.optional(function(){Qe.assert($e,pt+">=0","invalid "+z)})),pt})}else if(he&&ue)return ln(function(Qe,$e){return Qe.OFFSET="0",0});return null}var X=fe(Qu,!0);function oe(){if(sa in ie){var z=ie[sa]|0;return L.command(typeof z=="number"&&z>=0,"invalid vertex count",C.commandStr),ln(function(){return z})}else if(sa in ye){var he=ye[sa];return Kn(he,function(Qe,$e){var pt=Qe.invoke($e,he);return L.optional(function(){Qe.assert($e,"typeof "+pt+'==="number"&&'+pt+">=0&&"+pt+"===("+pt+"|0)","invalid vertex count")}),pt})}else if(ue)if(wi(ue)){if(ue)return X?new Un(X.thisDep,X.contextDep,X.propDep,function(Qe,$e){var pt=$e.def(Qe.ELEMENTS,".vertCount-",Qe.OFFSET);return L.optional(function(){Qe.assert($e,pt+">=0","invalid vertex offset/element buffer too small")}),pt}):ln(function(Qe,$e){return $e.def(Qe.ELEMENTS,".vertCount")});var xe=ln(function(){return-1});return L.optional(function(){xe.MISSING=!0}),xe}else{var Ye=new Un(ue.thisDep||X.thisDep,ue.contextDep||X.contextDep,ue.propDep||X.propDep,function(Qe,$e){var pt=Qe.ELEMENTS;return Qe.OFFSET?$e.def(pt,"?",pt,".vertCount-",Qe.OFFSET,":-1"):$e.def(pt,"?",pt,".vertCount:-1")});return L.optional(function(){Ye.DYNAMIC=!0}),Ye}return null}return{elements:ue,primitive:ae(),count:oe(),instances:fe(Zs,!1),offset:X}}function fn(H,C){var ie=H.static,ye=H.dynamic,Se={};return ot.forEach(function(ue){var ae=ze(ue);function fe(X,oe){if(ue in ie){var z=X(ie[ue]);Se[ae]=ln(function(){return z})}else if(ue in ye){var he=ye[ue];Se[ae]=Kn(he,function(xe,Ye){return oe(xe,Ye,xe.invoke(Ye,he))})}}switch(ue){case Rd:case Pd:case Ad:case Cd:case Zu:case jd:case Dd:case Df:case Cf:case Md:return fe(function(X){return L.commandType(X,"boolean",ue,C.commandStr),X},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="boolean"',"invalid flag "+ue,X.commandStr)}),z});case _d:return fe(function(X){return L.commandParameter(X,us,"invalid "+ue,C.commandStr),us[X]},function(X,oe,z){var he=X.constants.compareFuncs;return L.optional(function(){X.assert(oe,z+" in "+he,"invalid "+ue+", must be one of "+Object.keys(us))}),oe.def(he,"[",z,"]")});case Nd:return fe(function(X){return L.command(qr(X)&&X.length===2&&typeof X[0]=="number"&&typeof X[1]=="number"&&X[0]<=X[1],"depth range is 2d array",C.commandStr),X},function(X,oe,z){L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===2&&typeof "+z+'[0]==="number"&&typeof '+z+'[1]==="number"&&'+z+"[0]<="+z+"[1]","depth range must be a 2d array")});var he=oe.def("+",z,"[0]"),xe=oe.def("+",z,"[1]");return[he,xe]});case Nf:return fe(function(X){L.commandType(X,"object","blend.func",C.commandStr);var oe="srcRGB"in X?X.srcRGB:X.src,z="srcAlpha"in X?X.srcAlpha:X.src,he="dstRGB"in X?X.dstRGB:X.dst,xe="dstAlpha"in X?X.dstAlpha:X.dst;return L.commandParameter(oe,Bo,ae+".srcRGB",C.commandStr),L.commandParameter(z,Bo,ae+".srcAlpha",C.commandStr),L.commandParameter(he,Bo,ae+".dstRGB",C.commandStr),L.commandParameter(xe,Bo,ae+".dstAlpha",C.commandStr),L.command($f.indexOf(oe+", "+he)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+oe+", "+he+")",C.commandStr),[Bo[oe],Bo[he],Bo[z],Bo[xe]]},function(X,oe,z){var he=X.constants.blendFuncs;L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid blend func, must be an object")});function xe(kt,Zt){var lr=oe.def('"',kt,Zt,'" in ',z,"?",z,".",kt,Zt,":",z,".",kt);return L.optional(function(){X.assert(oe,lr+" in "+he,"invalid "+ue+"."+kt+Zt+", must be one of "+Object.keys(Bo))}),lr}var Ye=xe("src","RGB"),Qe=xe("dst","RGB");L.optional(function(){var kt=X.constants.invalidBlendCombinations;X.assert(oe,kt+".indexOf("+Ye+'+", "+'+Qe+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var $e=oe.def(he,"[",Ye,"]"),pt=oe.def(he,"[",xe("src","Alpha"),"]"),Ht=oe.def(he,"[",Qe,"]"),hr=oe.def(he,"[",xe("dst","Alpha"),"]");return[$e,Ht,pt,hr]});case Ws:return fe(function(X){if(typeof X=="string")return L.commandParameter(X,Ne,"invalid "+ue,C.commandStr),[Ne[X],Ne[X]];if(typeof X=="object")return L.commandParameter(X.rgb,Ne,ue+".rgb",C.commandStr),L.commandParameter(X.alpha,Ne,ue+".alpha",C.commandStr),[Ne[X.rgb],Ne[X.alpha]];L.commandRaise("invalid blend.equation",C.commandStr)},function(X,oe,z){var he=X.constants.blendEquations,xe=oe.def(),Ye=oe.def(),Qe=X.cond("typeof ",z,'==="string"');return L.optional(function(){function $e(pt,Ht,hr){X.assert(pt,hr+" in "+he,"invalid "+Ht+", must be one of "+Object.keys(Ne))}$e(Qe.then,ue,z),X.assert(Qe.else,z+"&&typeof "+z+'==="object"',"invalid "+ue),$e(Qe.else,ue+".rgb",z+".rgb"),$e(Qe.else,ue+".alpha",z+".alpha")}),Qe.then(xe,"=",Ye,"=",he,"[",z,"];"),Qe.else(xe,"=",he,"[",z,".rgb];",Ye,"=",he,"[",z,".alpha];"),oe(Qe),[xe,Ye]});case wd:return fe(function(X){return L.command(qr(X)&&X.length===4,"blend.color must be a 4d array",C.commandStr),ht(4,function(oe){return+X[oe]})},function(X,oe,z){return L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","blend.color must be a 4d array")}),ht(4,function(he){return oe.def("+",z,"[",he,"]")})});case Ld:return fe(function(X){return L.commandType(X,"number",ae,C.commandStr),X|0},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="number"',"invalid stencil.mask")}),oe.def(z,"|0")});case jf:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.cmp||"keep",z=X.ref||0,he="mask"in X?X.mask:-1;return L.commandParameter(oe,us,ue+".cmp",C.commandStr),L.commandType(z,"number",ue+".ref",C.commandStr),L.commandType(he,"number",ue+".mask",C.commandStr),[us[oe],z,he]},function(X,oe,z){var he=X.constants.compareFuncs;L.optional(function(){function $e(){X.assert(oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}$e(z+"&&typeof ",z,'==="object"'),$e('!("cmp" in ',z,")||(",z,".cmp in ",he,")")});var xe=oe.def('"cmp" in ',z,"?",he,"[",z,".cmp]",":",Ai),Ye=oe.def(z,".ref|0"),Qe=oe.def('"mask" in ',z,"?",z,".mask|0:-1");return[xe,Ye,Qe]});case es:case Ys:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.fail||"keep",z=X.zfail||"keep",he=X.zpass||"keep";return L.commandParameter(oe,Pi,ue+".fail",C.commandStr),L.commandParameter(z,Pi,ue+".zfail",C.commandStr),L.commandParameter(he,Pi,ue+".zpass",C.commandStr),[ue===Ys?ca:tu,Pi[oe],Pi[z],Pi[he]]},function(X,oe,z){var he=X.constants.stencilOps;L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});function xe(Ye){return L.optional(function(){X.assert(oe,'!("'+Ye+'" in '+z+")||("+z+"."+Ye+" in "+he+")","invalid "+ue+"."+Ye+", must be one of "+Object.keys(Pi))}),oe.def('"',Ye,'" in ',z,"?",he,"[",z,".",Ye,"]:",Ai)}return[ue===Ys?ca:tu,xe("fail"),xe("zfail"),xe("zpass")]});case Ju:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.factor|0,z=X.units|0;return L.commandType(oe,"number",ae+".factor",C.commandStr),L.commandType(z,"number",ae+".units",C.commandStr),[oe,z]},function(X,oe,z){L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});var he=oe.def(z,".factor|0"),xe=oe.def(z,".units|0");return[he,xe]});case Id:return fe(function(X){var oe=0;return X==="front"?oe=tu:X==="back"&&(oe=ca),L.command(!!oe,ae,C.commandStr),oe},function(X,oe,z){return L.optional(function(){X.assert(oe,z+'==="front"||'+z+'==="back"',"invalid cull.face")}),oe.def(z,'==="front"?',tu,":",ca)});case If:return fe(function(X){return L.command(typeof X=="number"&&X>=Ce.lineWidthDims[0]&&X<=Ce.lineWidthDims[1],"invalid line width, must be a positive number between "+Ce.lineWidthDims[0]+" and "+Ce.lineWidthDims[1],C.commandStr),X},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="number"&&'+z+">="+Ce.lineWidthDims[0]+"&&"+z+"<="+Ce.lineWidthDims[1],"invalid line width")}),z});case Rf:return fe(function(X){return L.commandParameter(X,Mn,ae,C.commandStr),Mn[X]},function(X,oe,z){return L.optional(function(){X.assert(oe,z+'==="cw"||'+z+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),oe.def(z+'==="cw"?'+Hd+":"+Hf)});case Mf:return fe(function(X){return L.command(qr(X)&&X.length===4,"color.mask must be length 4 array",C.commandStr),X.map(function(oe){return!!oe})},function(X,oe,z){return L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","invalid color.mask")}),ht(4,function(he){return"!!"+z+"["+he+"]"})});case Lf:return fe(function(X){L.command(typeof X=="object"&&X,ae,C.commandStr);var oe="value"in X?X.value:1,z=!!X.invert;return L.command(typeof oe=="number"&&oe>=0&&oe<=1,"sample.coverage.value must be a number between 0 and 1",C.commandStr),[oe,z]},function(X,oe,z){L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid sample.coverage")});var he=oe.def('"value" in ',z,"?+",z,".value:1"),xe=oe.def("!!",z,".invert");return[he,xe]})}}),Se}function vn(H,C){var ie=H.static,ye=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe;if(typeof ae=="number"||typeof ae=="boolean")fe=ln(function(){return ae});else if(typeof ae=="function"){var X=ae._reglType;X==="texture2d"||X==="textureCube"?fe=ln(function(oe){return oe.link(ae)}):X==="framebuffer"||X==="framebufferCube"?(L.command(ae.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ue+'"',C.commandStr),fe=ln(function(oe){return oe.link(ae.color[0])})):L.commandRaise('invalid data for uniform "'+ue+'"',C.commandStr)}else qr(ae)?fe=ln(function(oe){var z=oe.global.def("[",ht(ae.length,function(he){return L.command(typeof ae[he]=="number"||typeof ae[he]=="boolean","invalid uniform "+ue,oe.commandStr),ae[he]}),"]");return z}):L.commandRaise('invalid or missing data for uniform "'+ue+'"',C.commandStr);fe.value=ae,Se[ue]=fe}),Object.keys(ye).forEach(function(ue){var ae=ye[ue];Se[ue]=Kn(ae,function(fe,X){return fe.invoke(X,ae)})}),Se}function Or(H,C){var ie=H.static,ye=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe=G.id(ue),X=new be;if(nl(ae))X.state=qa,X.buffer=Je.getBuffer(Je.create(ae,os,!1,!0)),X.type=0;else{var oe=Je.getBuffer(ae);if(oe)X.state=qa,X.buffer=oe,X.type=0;else if(L.command(typeof ae=="object"&&ae,"invalid data for attribute "+ue,C.commandStr),"constant"in ae){var z=ae.constant;X.buffer="null",X.state=Af,typeof z=="number"?X.x=z:(L.command(qr(z)&&z.length>0&&z.length<=4,"invalid constant for attribute "+ue,C.commandStr),Qa.forEach(function(Ht,hr){hr<z.length&&(X[Ht]=z[hr])}))}else{nl(ae.buffer)?oe=Je.getBuffer(Je.create(ae.buffer,os,!1,!0)):oe=Je.getBuffer(ae.buffer),L.command(!!oe,'missing buffer for attribute "'+ue+'"',C.commandStr);var he=ae.offset|0;L.command(he>=0,'invalid offset for attribute "'+ue+'"',C.commandStr);var xe=ae.stride|0;L.command(xe>=0&&xe<256,'invalid stride for attribute "'+ue+'", must be integer betweeen [0, 255]',C.commandStr);var Ye=ae.size|0;L.command(!("size"in ae)||Ye>0&&Ye<=4,'invalid size for attribute "'+ue+'", must be 1,2,3,4',C.commandStr);var Qe=!!ae.normalized,$e=0;"type"in ae&&(L.commandParameter(ae.type,Ro,"invalid type for attribute "+ue,C.commandStr),$e=Ro[ae.type]);var pt=ae.divisor|0;"divisor"in ae&&(L.command(pt===0||yt,'cannot specify divisor for attribute "'+ue+'", instancing not supported',C.commandStr),L.command(pt>=0,'invalid divisor for attribute "'+ue+'"',C.commandStr)),L.optional(function(){var Ht=C.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ae).forEach(function(kt){L.command(hr.indexOf(kt)>=0,'unknown parameter "'+kt+'" for attribute pointer "'+ue+'" (valid parameters are '+hr+")",Ht)})}),X.buffer=oe,X.state=qa,X.size=Ye,X.normalized=Qe,X.type=$e||oe.dtype,X.offset=he,X.stride=xe,X.divisor=pt}}Se[ue]=ln(function(Ht,hr){var kt=Ht.attribCache;if(fe in kt)return kt[fe];var Zt={isStream:!1};return Object.keys(X).forEach(function(lr){Zt[lr]=X[lr]}),X.buffer&&(Zt.buffer=Ht.link(X.buffer),Zt.type=Zt.type||Zt.buffer+".dtype"),kt[fe]=Zt,Zt})}),Object.keys(ye).forEach(function(ue){var ae=ye[ue];function fe(X,oe){var z=X.invoke(oe,ae),he=X.shared,xe=X.constants,Ye=he.isBufferArgs,Qe=he.buffer;L.optional(function(){X.assert(oe,z+"&&(typeof "+z+'==="object"||typeof '+z+'==="function")&&('+Ye+"("+z+")||"+Qe+".getBuffer("+z+")||"+Qe+".getBuffer("+z+".buffer)||"+Ye+"("+z+'.buffer)||("constant" in '+z+"&&(typeof "+z+'.constant==="number"||'+he.isArrayLike+"("+z+".constant))))",'invalid dynamic attribute "'+ue+'"')});var $e={isStream:oe.def(!1)},pt=new be;pt.state=qa,Object.keys(pt).forEach(function(Zt){$e[Zt]=oe.def(""+pt[Zt])});var Ht=$e.buffer,hr=$e.type;oe("if(",Ye,"(",z,")){",$e.isStream,"=true;",Ht,"=",Qe,".createStream(",os,",",z,");",hr,"=",Ht,".dtype;","}else{",Ht,"=",Qe,".getBuffer(",z,");","if(",Ht,"){",hr,"=",Ht,".dtype;",'}else if("constant" in ',z,"){",$e.state,"=",Af,";","if(typeof "+z+'.constant === "number"){',$e[Qa[0]],"=",z,".constant;",Qa.slice(1).map(function(Zt){return $e[Zt]}).join("="),"=0;","}else{",Qa.map(function(Zt,lr){return $e[Zt]+"="+z+".constant.length>"+lr+"?"+z+".constant["+lr+"]:0;"}).join(""),"}}else{","if(",Ye,"(",z,".buffer)){",Ht,"=",Qe,".createStream(",os,",",z,".buffer);","}else{",Ht,"=",Qe,".getBuffer(",z,".buffer);","}",hr,'="type" in ',z,"?",xe.glTypes,"[",z,".type]:",Ht,".dtype;",$e.normalized,"=!!",z,".normalized;");function kt(Zt){oe($e[Zt],"=",z,".",Zt,"|0;")}return kt("size"),kt("offset"),kt("stride"),kt("divisor"),oe("}}"),oe.exit("if(",$e.isStream,"){",Qe,".destroyStream(",Ht,");","}"),$e}Se[ue]=Kn(ae,fe)}),Se}function hn(H,C){var ie=H.static,ye=H.dynamic;if(Js in ie){var Se=ie[Js];return Se!==null&&vt.getVAO(Se)===null&&(Se=vt.createVAO(Se)),ln(function(ae){return ae.link(vt.getVAO(Se))})}else if(Js in ye){var ue=ye[Js];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue);return fe.def(ae.shared.vao+".getVAO("+X+")")})}return null}function Wr(H){var C=H.static,ie=H.dynamic,ye={};return Object.keys(C).forEach(function(Se){var ue=C[Se];ye[Se]=ln(function(ae,fe){return typeof ue=="number"||typeof ue=="boolean"?""+ue:ae.link(ue)})}),Object.keys(ie).forEach(function(Se){var ue=ie[Se];ye[Se]=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}),ye}function Yr(H,C,ie,ye,Se){var ue=H.static,ae=H.dynamic;L.optional(function(){var kt=[oa,ts,Ks,ia,aa,Qu,sa,Zs,na,Js].concat(ot);function Zt(lr){Object.keys(lr).forEach(function(Nr){L.command(kt.indexOf(Nr)>=0,'unknown parameter "'+Nr+'"',Se.commandStr)})}Zt(ue),Zt(ae)});var fe=ar(H,C),X=Gt(H),oe=mr(H,X,Se),z=Ar(H,Se),he=fn(H,Se),xe=yr(H,Se,fe);function Ye(kt){var Zt=oe[kt];Zt&&(he[kt]=Zt)}Ye(ti),Ye(ze(Ti));var Qe=Object.keys(he).length>0,$e={framebuffer:X,draw:z,shader:xe,state:he,dirty:Qe,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if($e.profile=cr(H),$e.uniforms=vn(ie,Se),$e.drawVAO=$e.scopeVAO=hn(H),!$e.drawVAO&&xe.program&&!fe&&q.angle_instanced_arrays){var pt=!0,Ht=xe.program.attributes.map(function(kt){var Zt=C.static[kt];return pt=pt&&!!Zt,Zt});if(pt&&Ht.length>0){var hr=vt.getVAO(vt.createVAO(Ht));$e.drawVAO=new Un(null,null,null,function(kt,Zt){return kt.link(hr)}),$e.useVAO=!0}}return fe?$e.useVAO=!0:$e.attributes=Or(C,Se),$e.context=Wr(ye),$e}function pn(H,C,ie){var ye=H.shared,Se=ye.context,ue=H.scope();Object.keys(ie).forEach(function(ae){C.save(Se,"."+ae);var fe=ie[ae],X=fe.append(H,C);Array.isArray(X)?ue(Se,".",ae,"=[",X.join(),"];"):ue(Se,".",ae,"=",X,";")}),C(ue)}function cn(H,C,ie,ye){var Se=H.shared,ue=Se.gl,ae=Se.framebuffer,fe;xt&&(fe=C.def(Se.extensions,".webgl_draw_buffers"));var X=H.constants,oe=X.drawBuffer,z=X.backBuffer,he;ie?he=ie.append(H,C):he=C.def(ae,".next"),ye||C("if(",he,"!==",ae,".cur){"),C("if(",he,"){",ue,".bindFramebuffer(",Vd,",",he,".framebuffer);"),xt&&C(fe,".drawBuffersWEBGL(",oe,"[",he,".colorAttachments.length]);"),C("}else{",ue,".bindFramebuffer(",Vd,",null);"),xt&&C(fe,".drawBuffersWEBGL(",z,");"),C("}",ae,".cur=",he,";"),ye||C("}")}function bn(H,C,ie){var ye=H.shared,Se=ye.gl,ue=H.current,ae=H.next,fe=ye.current,X=ye.next,oe=H.cond(fe,".dirty");ot.forEach(function(z){var he=ze(z);if(!(he in ie.state)){var xe,Ye;if(he in ae){xe=ae[he],Ye=ue[he];var Qe=ht(nt[he].length,function(pt){return oe.def(xe,"[",pt,"]")});oe(H.cond(Qe.map(function(pt,Ht){return pt+"!=="+Ye+"["+Ht+"]"}).join("||")).then(Se,".",Ve[he],"(",Qe,");",Qe.map(function(pt,Ht){return Ye+"["+Ht+"]="+pt}).join(";"),";"))}else{xe=oe.def(X,".",he);var $e=H.cond(xe,"!==",fe,".",he);oe($e),he in Ze?$e(H.cond(xe).then(Se,".enable(",Ze[he],");").else(Se,".disable(",Ze[he],");"),fe,".",he,"=",xe,";"):$e(Se,".",Ve[he],"(",xe,");",fe,".",he,"=",xe,";")}}}),Object.keys(ie.state).length===0&&oe(fe,".dirty=false;"),C(oe)}function yn(H,C,ie,ye){var Se=H.shared,ue=H.current,ae=Se.current,fe=Se.gl;Yd(Object.keys(ie)).forEach(function(X){var oe=ie[X];if(!(ye&&!ye(oe))){var z=oe.append(H,C);if(Ze[X]){var he=Ze[X];wi(oe)?z?C(fe,".enable(",he,");"):C(fe,".disable(",he,");"):C(H.cond(z).then(fe,".enable(",he,");").else(fe,".disable(",he,");")),C(ae,".",X,"=",z,";")}else if(qr(z)){var xe=ue[X];C(fe,".",Ve[X],"(",z,");",z.map(function(Ye,Qe){return xe+"["+Qe+"]="+Ye}).join(";"),";")}else C(fe,".",Ve[X],"(",z,");",ae,".",X,"=",z,";")}})}function Fr(H,C){yt&&(H.instancing=C.def(H.shared.extensions,".angle_instanced_arrays"))}function dr(H,C,ie,ye,Se){var ue=H.shared,ae=H.stats,fe=ue.current,X=ue.timer,oe=ie.profile;function z(){return typeof performance>"u"?"Date.now()":"performance.now()"}var he,xe;function Ye(kt){he=C.def(),kt(he,"=",z(),";"),typeof Se=="string"?kt(ae,".count+=",Se,";"):kt(ae,".count++;"),st&&(ye?(xe=C.def(),kt(xe,"=",X,".getNumPendingQueries();")):kt(X,".beginQuery(",ae,");"))}function Qe(kt){kt(ae,".cpuTime+=",z(),"-",he,";"),st&&(ye?kt(X,".pushScopeStats(",xe,",",X,".getNumPendingQueries(),",ae,");"):kt(X,".endQuery();"))}function $e(kt){var Zt=C.def(fe,".profile");C(fe,".profile=",kt,";"),C.exit(fe,".profile=",Zt,";")}var pt;if(oe){if(wi(oe)){oe.enable?(Ye(C),Qe(C.exit),$e("true")):$e("false");return}pt=oe.append(H,C),$e(pt)}else pt=C.def(fe,".profile");var Ht=H.block();Ye(Ht),C("if(",pt,"){",Ht,"}");var hr=H.block();Qe(hr),C.exit("if(",pt,"){",hr,"}")}function Tn(H,C,ie,ye,Se){var ue=H.shared;function ae(X){switch(X){case ua:case is:case fa:return 2;case qu:case el:case rl:return 3;case la:case tl:case ri:return 4;default:return 1}}function fe(X,oe,z){var he=ue.gl,xe=C.def(X,".location"),Ye=C.def(ue.attributes,"[",xe,"]"),Qe=z.state,$e=z.buffer,pt=[z.x,z.y,z.z,z.w],Ht=["buffer","normalized","offset","stride"];function hr(){C("if(!",Ye,".buffer){",he,".enableVertexAttribArray(",xe,");}");var Zt=z.type,lr;if(z.size?lr=C.def(z.size,"||",oe):lr=oe,C("if(",Ye,".type!==",Zt,"||",Ye,".size!==",lr,"||",Ht.map(function(en){return Ye+"."+en+"!=="+z[en]}).join("||"),"){",he,".bindBuffer(",os,",",$e,".buffer);",he,".vertexAttribPointer(",[xe,lr,Zt,z.normalized,z.stride,z.offset],");",Ye,".type=",Zt,";",Ye,".size=",lr,";",Ht.map(function(en){return Ye+"."+en+"="+z[en]+";"}).join(""),"}"),yt){var Nr=z.divisor;C("if(",Ye,".divisor!==",Nr,"){",H.instancing,".vertexAttribDivisorANGLE(",[xe,Nr],");",Ye,".divisor=",Nr,";}")}}function kt(){C("if(",Ye,".buffer){",he,".disableVertexAttribArray(",xe,");",Ye,".buffer=null;","}if(",Qa.map(function(Zt,lr){return Ye+"."+Zt+"!=="+pt[lr]}).join("||"),"){",he,".vertexAttrib4f(",xe,",",pt,");",Qa.map(function(Zt,lr){return Ye+"."+Zt+"="+pt[lr]+";"}).join(""),"}")}Qe===qa?hr():Qe===Af?kt():(C("if(",Qe,"===",qa,"){"),hr(),C("}else{"),kt(),C("}"))}ye.forEach(function(X){var oe=X.name,z=ie.attributes[oe],he;if(z){if(!Se(z))return;he=z.append(H,C)}else{if(!Se(Vf))return;var xe=H.scopeAttrib(oe);L.optional(function(){H.assert(C,xe+".state","missing attribute "+oe)}),he={},Object.keys(new be).forEach(function(Ye){he[Ye]=C.def(xe,".",Ye)})}fe(H.link(X),ae(X.info.type),he)})}function Dr(H,C,ie,ye,Se){for(var ue=H.shared,ae=ue.gl,fe,X=0;X<ye.length;++X){var oe=ye[X],z=oe.name,he=oe.info.type,xe=ie.uniforms[z],Ye=H.link(oe),Qe=Ye+".location",$e;if(xe){if(!Se(xe))continue;if(wi(xe)){var pt=xe.value;if(L.command(pt!==null&&typeof pt<"u",'missing uniform "'+z+'"',H.commandStr),he===eu||he===ss){L.command(typeof pt=="function"&&(he===eu&&(pt._reglType==="texture2d"||pt._reglType==="framebuffer")||he===ss&&(pt._reglType==="textureCube"||pt._reglType==="framebufferCube")),"invalid texture for uniform "+z,H.commandStr);var Ht=H.link(pt._texture||pt.color[0]._texture);C(ae,".uniform1i(",Qe,",",Ht+".bind());"),C.exit(Ht,".unbind();")}else if(he===Qs||he===qs||he===as){L.optional(function(){L.command(qr(pt),"invalid matrix for uniform "+z,H.commandStr),L.command(he===Qs&&pt.length===4||he===qs&&pt.length===9||he===as&&pt.length===16,"invalid length for matrix uniform "+z,H.commandStr)});var hr=H.global.def("new Float32Array(["+Array.prototype.slice.call(pt)+"])"),kt=2;he===qs?kt=3:he===as&&(kt=4),C(ae,".uniformMatrix",kt,"fv(",Qe,",false,",hr,");")}else{switch(he){case kf:L.commandType(pt,"number","uniform "+z,H.commandStr),fe="1f";break;case ua:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2f";break;case qu:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3f";break;case la:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4f";break;case zf:L.commandType(pt,"boolean","uniform "+z,H.commandStr),fe="1i";break;case Uf:L.commandType(pt,"number","uniform "+z,H.commandStr),fe="1i";break;case fa:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case is:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case rl:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case el:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case ri:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break;case tl:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break}C(ae,".uniform",fe,"(",Qe,",",qr(pt)?Array.prototype.slice.call(pt):pt,");")}continue}else $e=xe.append(H,C)}else{if(!Se(Vf))continue;$e=C.def(ue.uniforms,"[",G.id(z),"]")}he===eu?(L(!Array.isArray($e),"must specify a scalar prop for textures"),C("if(",$e,"&&",$e,'._reglType==="framebuffer"){',$e,"=",$e,".color[0];","}")):he===ss&&(L(!Array.isArray($e),"must specify a scalar prop for cube maps"),C("if(",$e,"&&",$e,'._reglType==="framebufferCube"){',$e,"=",$e,".color[0];","}")),L.optional(function(){function zn(Ao,eh){H.assert(C,Ao,'bad data or missing for uniform "'+z+'".  '+eh)}function Zf(Ao){L(!Array.isArray($e),"must not specify an array type for uniform"),zn("typeof "+$e+'==="'+Ao+'"',"invalid type, expected "+Ao)}function so(Ao,eh){Array.isArray($e)?L($e.length===Ao,"must have length "+Ao):zn(ue.isArrayLike+"("+$e+")&&"+$e+".length==="+Ao,"invalid vector, should have length "+Ao,H.commandStr)}function Jf(Ao){L(!Array.isArray($e),"must not specify a value type"),zn("typeof "+$e+'==="function"&&'+$e+'._reglType==="texture'+(Ao===kd?"2d":"Cube")+'"',"invalid texture type",H.commandStr)}switch(he){case Uf:Zf("number");break;case is:so(2);break;case el:so(3);break;case tl:so(4);break;case kf:Zf("number");break;case ua:so(2);break;case qu:so(3);break;case la:so(4);break;case zf:Zf("boolean");break;case fa:so(2);break;case rl:so(3);break;case ri:so(4);break;case Qs:so(4);break;case qs:so(9);break;case as:so(16);break;case eu:Jf(kd);break;case ss:Jf(Ly);break}});var Zt=1;switch(he){case eu:case ss:var lr=C.def($e,"._texture");C(ae,".uniform1i(",Qe,",",lr,".bind());"),C.exit(lr,".unbind();");continue;case Uf:case zf:fe="1i";break;case is:case fa:fe="2i",Zt=2;break;case el:case rl:fe="3i",Zt=3;break;case tl:case ri:fe="4i",Zt=4;break;case kf:fe="1f";break;case ua:fe="2f",Zt=2;break;case qu:fe="3f",Zt=3;break;case la:fe="4f",Zt=4;break;case Qs:fe="Matrix2fv";break;case qs:fe="Matrix3fv";break;case as:fe="Matrix4fv";break}if(C(ae,".uniform",fe,"(",Qe,","),fe.charAt(0)==="M"){var Nr=Math.pow(he-Qs+2,2),en=H.global.def("new Float32Array(",Nr,")");Array.isArray($e)?C("false,(",ht(Nr,function(zn){return en+"["+zn+"]="+$e[zn]}),",",en,")"):C("false,(Array.isArray(",$e,")||",$e," instanceof Float32Array)?",$e,":(",ht(Nr,function(zn){return en+"["+zn+"]="+$e+"["+zn+"]"}),",",en,")")}else Zt>1?C(ht(Zt,function(zn){return Array.isArray($e)?$e[zn]:$e+"["+zn+"]"})):(L(!Array.isArray($e),"uniform value must not be an array"),C($e));C(");")}}function qt(H,C,ie,ye){var Se=H.shared,ue=Se.gl,ae=Se.draw,fe=ye.draw;function X(){var lr=fe.elements,Nr,en=C;return lr?((lr.contextDep&&ye.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en)):Nr=en.def(ae,".",ia),Nr&&en("if("+Nr+")"+ue+".bindBuffer("+Iy+","+Nr+".buffer.buffer);"),Nr}function oe(){var lr=fe.count,Nr,en=C;return lr?((lr.contextDep&&ye.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en),L.optional(function(){lr.MISSING&&H.assert(C,"false","missing vertex count"),lr.DYNAMIC&&H.assert(en,Nr+">=0","missing vertex count")})):(Nr=en.def(ae,".",sa),L.optional(function(){H.assert(en,Nr+">=0","missing vertex count")})),Nr}var z=X();function he(lr){var Nr=fe[lr];return Nr?Nr.contextDep&&ye.contextDynamic||Nr.propDep?Nr.append(H,ie):Nr.append(H,C):C.def(ae,".",lr)}var xe=he(aa),Ye=he(Qu),Qe=oe();if(typeof Qe=="number"){if(Qe===0)return}else ie("if(",Qe,"){"),ie.exit("}");var $e,pt;yt&&($e=he(Zs),pt=H.instancing);var Ht=z+".type",hr=fe.elements&&wi(fe.elements);function kt(){function lr(){ie(pt,".drawElementsInstancedANGLE(",[xe,Qe,Ht,Ye+"<<(("+Ht+"-"+Tf+")>>1)",$e],");")}function Nr(){ie(pt,".drawArraysInstancedANGLE(",[xe,Ye,Qe,$e],");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}function Zt(){function lr(){ie(ue+".drawElements("+[xe,Qe,Ht,Ye+"<<(("+Ht+"-"+Tf+")>>1)"]+");")}function Nr(){ie(ue+".drawArrays("+[xe,Ye,Qe]+");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}yt&&(typeof $e!="number"||$e>=0)?typeof $e=="string"?(ie("if(",$e,">0){"),kt(),ie("}else if(",$e,"<0){"),Zt(),ie("}")):kt():Zt()}function Sr(H,C,ie,ye,Se){var ue=rr(),ae=ue.proc("body",Se);return L.optional(function(){ue.commandStr=C.commandStr,ue.command=ue.link(C.commandStr)}),yt&&(ue.instancing=ae.def(ue.shared.extensions,".angle_instanced_arrays")),H(ue,ae,ie,ye),ue.compile().body}function Pr(H,C,ie,ye){Fr(H,C),ie.useVAO?ie.drawVAO?C(H.shared.vao,".setVAO(",ie.drawVAO.append(H,C),");"):C(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(C(H.shared.vao,".setVAO(null);"),Tn(H,C,ie,ye.attributes,function(){return!0})),Dr(H,C,ie,ye.uniforms,function(){return!0}),qt(H,C,C,ie)}function an(H,C){var ie=H.proc("draw",1);Fr(H,ie),pn(H,ie,C.context),cn(H,ie,C.framebuffer),bn(H,ie,C),yn(H,ie,C.state),dr(H,ie,C,!1,!0);var ye=C.shader.progVar.append(H,ie);if(ie(H.shared.gl,".useProgram(",ye,".program);"),C.shader.program)Pr(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var Se=H.global.def("{}"),ue=ie.def(ye,".id"),ae=ie.def(Se,"[",ue,"]");ie(H.cond(ae).then(ae,".call(this,a0);").else(ae,"=",Se,"[",ue,"]=",H.link(function(fe){return Sr(Pr,H,C,fe,1)}),"(",ye,");",ae,".call(this,a0);"))}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function Fo(H,C,ie,ye){H.batchId="a1",Fr(H,C);function Se(){return!0}Tn(H,C,ie,ye.attributes,Se),Dr(H,C,ie,ye.uniforms,Se),qt(H,C,C,ie)}function da(H,C,ie,ye){Fr(H,C);var Se=ie.contextDep,ue=C.def(),ae="a0",fe="a1",X=C.def();H.shared.props=X,H.batchId=ue;var oe=H.scope(),z=H.scope();C(oe.entry,"for(",ue,"=0;",ue,"<",fe,";++",ue,"){",X,"=",ae,"[",ue,"];",z,"}",oe.exit);function he(Ht){return Ht.contextDep&&Se||Ht.propDep}function xe(Ht){return!he(Ht)}if(ie.needsContext&&pn(H,z,ie.context),ie.needsFramebuffer&&cn(H,z,ie.framebuffer),yn(H,z,ie.state,he),ie.profile&&he(ie.profile)&&dr(H,z,ie,!1,!0),ye)ie.useVAO?ie.drawVAO?he(ie.drawVAO)?z(H.shared.vao,".setVAO(",ie.drawVAO.append(H,z),");"):oe(H.shared.vao,".setVAO(",ie.drawVAO.append(H,oe),");"):oe(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(oe(H.shared.vao,".setVAO(null);"),Tn(H,oe,ie,ye.attributes,xe),Tn(H,z,ie,ye.attributes,he)),Dr(H,oe,ie,ye.uniforms,xe),Dr(H,z,ie,ye.uniforms,he),qt(H,oe,z,ie);else{var Ye=H.global.def("{}"),Qe=ie.shader.progVar.append(H,z),$e=z.def(Qe,".id"),pt=z.def(Ye,"[",$e,"]");z(H.shared.gl,".useProgram(",Qe,".program);","if(!",pt,"){",pt,"=",Ye,"[",$e,"]=",H.link(function(Ht){return Sr(Fo,H,ie,Ht,2)}),"(",Qe,");}",pt,".call(this,a0[",ue,"],",ue,");")}}function K(H,C){var ie=H.proc("batch",2);H.batchId="0",Fr(H,ie);var ye=!1,Se=!0;Object.keys(C.context).forEach(function(Ye){ye=ye||C.context[Ye].propDep}),ye||(pn(H,ie,C.context),Se=!1);var ue=C.framebuffer,ae=!1;ue?(ue.propDep?ye=ae=!0:ue.contextDep&&ye&&(ae=!0),ae||cn(H,ie,ue)):cn(H,ie,null),C.state.viewport&&C.state.viewport.propDep&&(ye=!0);function fe(Ye){return Ye.contextDep&&ye||Ye.propDep}bn(H,ie,C),yn(H,ie,C.state,function(Ye){return!fe(Ye)}),(!C.profile||!fe(C.profile))&&dr(H,ie,C,!1,"a1"),C.contextDep=ye,C.needsContext=Se,C.needsFramebuffer=ae;var X=C.shader.progVar;if(X.contextDep&&ye||X.propDep)da(H,ie,C,null);else{var oe=X.append(H,ie);if(ie(H.shared.gl,".useProgram(",oe,".program);"),C.shader.program)da(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var z=H.global.def("{}"),he=ie.def(oe,".id"),xe=ie.def(z,"[",he,"]");ie(H.cond(xe).then(xe,".call(this,a0,a1);").else(xe,"=",z,"[",he,"]=",H.link(function(Ye){return Sr(da,H,C,Ye,2)}),"(",oe,");",xe,".call(this,a0,a1);"))}}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function je(H,C){var ie=H.proc("scope",3);H.batchId="a2";var ye=H.shared,Se=ye.current;pn(H,ie,C.context),C.framebuffer&&C.framebuffer.append(H,ie),Yd(Object.keys(C.state)).forEach(function(ae){var fe=C.state[ae],X=fe.append(H,ie);qr(X)?X.forEach(function(oe,z){ie.set(H.next[ae],"["+z+"]",oe)}):ie.set(ye.next,"."+ae,X)}),dr(H,ie,C,!0,!0),[ia,Qu,sa,Zs,aa].forEach(function(ae){var fe=C.draw[ae];fe&&ie.set(ye.draw,"."+ae,""+fe.append(H,ie))}),Object.keys(C.uniforms).forEach(function(ae){var fe=C.uniforms[ae].append(H,ie);Array.isArray(fe)&&(fe="["+fe.join()+"]"),ie.set(ye.uniforms,"["+G.id(ae)+"]",fe)}),Object.keys(C.attributes).forEach(function(ae){var fe=C.attributes[ae].append(H,ie),X=H.scopeAttrib(ae);Object.keys(new be).forEach(function(oe){ie.set(X,"."+oe,fe[oe])})}),C.scopeVAO&&ie.set(ye.vao,".targetVAO",C.scopeVAO.append(H,ie));function ue(ae){var fe=C.shader[ae];fe&&ie.set(ye.shader,"."+ae,fe.append(H,ie))}ue(ts),ue(Ks),Object.keys(C.state).length>0&&(ie(Se,".dirty=true;"),ie.exit(Se,".dirty=true;")),ie("a1(",H.shared.context,",a0,",H.batchId,");")}function Ae(H){if(!(typeof H!="object"||qr(H))){for(var C=Object.keys(H),ie=0;ie<C.length;++ie)if(Qt.isDynamic(H[C[ie]]))return!0;return!1}}function Rt(H,C,ie){var ye=C.static[ie];if(!ye||!Ae(ye))return;var Se=H.global,ue=Object.keys(ye),ae=!1,fe=!1,X=!1,oe=H.global.def("{}");ue.forEach(function(he){var xe=ye[he];if(Qt.isDynamic(xe)){typeof xe=="function"&&(xe=ye[he]=Qt.unbox(xe));var Ye=Kn(xe,null);ae=ae||Ye.thisDep,X=X||Ye.propDep,fe=fe||Ye.contextDep}else{switch(Se(oe,".",he,"="),typeof xe){case"number":Se(xe);break;case"string":Se('"',xe,'"');break;case"object":Array.isArray(xe)&&Se("[",xe.join(),"]");break;default:Se(H.link(xe));break}Se(";")}});function z(he,xe){ue.forEach(function(Ye){var Qe=ye[Ye];if(Qt.isDynamic(Qe)){var $e=he.invoke(xe,Qe);xe(oe,".",Ye,"=",$e,";")}})}C.dynamic[ie]=new Qt.DynamicVariable(Ku,{thisDep:ae,contextDep:fe,propDep:X,ref:oe,append:z}),delete C.static[ie]}function br(H,C,ie,ye,Se){var ue=rr();ue.stats=ue.link(Se),Object.keys(C.static).forEach(function(fe){Rt(ue,C,fe)}),Ry.forEach(function(fe){Rt(ue,H,fe)});var ae=Yr(H,C,ie,ye,ue);return an(ue,ae),je(ue,ae),K(ue,ae),u(ue.compile(),{destroy:function(){ae.shader.program.destroy()}})}return{next:ct,current:nt,procs:function(){var H=rr(),C=H.proc("poll"),ie=H.proc("refresh"),ye=H.block();C(ye),ie(ye);var Se=H.shared,ue=Se.gl,ae=Se.next,fe=Se.current;ye(fe,".dirty=false;"),cn(H,C),cn(H,ie,null,!0);var X;yt&&(X=H.link(yt)),q.oes_vertex_array_object&&ie(H.link(q.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var oe=0;oe<Ce.maxAttributes;++oe){var z=ie.def(Se.attributes,"[",oe,"]"),he=H.cond(z,".buffer");he.then(ue,".enableVertexAttribArray(",oe,");",ue,".bindBuffer(",os,",",z,".buffer.buffer);",ue,".vertexAttribPointer(",oe,",",z,".size,",z,".type,",z,".normalized,",z,".stride,",z,".offset);").else(ue,".disableVertexAttribArray(",oe,");",ue,".vertexAttrib4f(",oe,",",z,".x,",z,".y,",z,".z,",z,".w);",z,".buffer=null;"),ie(he),yt&&ie(X,".vertexAttribDivisorANGLE(",oe,",",z,".divisor);")}return ie(H.shared.vao,".currentVAO=null;",H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"),Object.keys(Ze).forEach(function(xe){var Ye=Ze[xe],Qe=ye.def(ae,".",xe),$e=H.block();$e("if(",Qe,"){",ue,".enable(",Ye,")}else{",ue,".disable(",Ye,")}",fe,".",xe,"=",Qe,";"),ie($e),C("if(",Qe,"!==",fe,".",xe,"){",$e,"}")}),Object.keys(Ve).forEach(function(xe){var Ye=Ve[xe],Qe=nt[xe],$e,pt,Ht=H.block();if(Ht(ue,".",Ye,"("),qr(Qe)){var hr=Qe.length;$e=H.global.def(ae,".",xe),pt=H.global.def(fe,".",xe),Ht(ht(hr,function(kt){return $e+"["+kt+"]"}),");",ht(hr,function(kt){return pt+"["+kt+"]="+$e+"["+kt+"];"}).join("")),C("if(",ht(hr,function(kt){return $e+"["+kt+"]!=="+pt+"["+kt+"]"}).join("||"),"){",Ht,"}")}else $e=ye.def(ae,".",xe),pt=ye.def(fe,".",xe),Ht($e,");",fe,".",xe,"=",$e,";"),C("if(",$e,"!==",pt,"){",Ht,"}");ie(Ht)}),H.compile()}(),compile:br}}function Zy(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Kd=34918,Jy=34919,Zd=35007,Qy=function(w,G){if(!G.ext_disjoint_timer_query)return null;var q=[];function Ce(){return q.pop()||G.ext_disjoint_timer_query.createQueryEXT()}function Je(yt){q.push(yt)}var Ie=[];function ke(yt){var xt=Ce();G.ext_disjoint_timer_query.beginQueryEXT(Zd,xt),Ie.push(xt),st(Ie.length-1,Ie.length,yt)}function at(){G.ext_disjoint_timer_query.endQueryEXT(Zd)}function lt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var vt=[];function ft(){return vt.pop()||new lt}function it(yt){vt.push(yt)}var St=[];function st(yt,xt,nt){var ct=ft();ct.startQueryIndex=yt,ct.endQueryIndex=xt,ct.sum=0,ct.stats=nt,St.push(ct)}var Ot=[],be=[];function Ne(){var yt,xt,nt=Ie.length;if(nt!==0){be.length=Math.max(be.length,nt+1),Ot.length=Math.max(Ot.length,nt+1),Ot[0]=0,be[0]=0;var ct=0;for(yt=0,xt=0;xt<Ie.length;++xt){var ot=Ie[xt];G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Jy)?(ct+=G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Kd),Je(ot)):Ie[yt++]=ot,Ot[xt+1]=ct,be[xt+1]=yt}for(Ie.length=yt,yt=0,xt=0;xt<St.length;++xt){var Ze=St[xt],Ve=Ze.startQueryIndex,ze=Ze.endQueryIndex;Ze.sum+=Ot[ze]-Ot[Ve];var At=be[Ve],ir=be[ze];ir===At?(Ze.stats.gpuTime+=Ze.sum/1e6,it(Ze)):(Ze.startQueryIndex=At,Ze.endQueryIndex=ir,St[yt++]=Ze)}St.length=yt}}return{beginQuery:ke,endQuery:at,pushScopeStats:st,update:Ne,getNumPendingQueries:function(){return Ie.length},clear:function(){q.push.apply(q,Ie);for(var yt=0;yt<q.length;yt++)G.ext_disjoint_timer_query.deleteQueryEXT(q[yt]);Ie.length=0,q.length=0},restore:function(){Ie.length=0,q.length=0}}},qy=16384,eg=256,tg=1024,ru=34962,on="webglcontextlost",Wf="webglcontextrestored",Yf=1,Jd=2,Qd=3;function Kf(w,G){for(var q=0;q<w.length;++q)if(w[q]===G)return q;return-1}function qd(w){var G=we(w);if(!G)return null;var q=G.gl,Ce=q.getContextAttributes(),Je=q.isContextLost(),Ie=_e(q,G);if(!Ie)return null;var ke=Mt(),at=Zy(),lt=Ie.extensions,vt=Qy(q,lt),ft=Dn(),it=q.drawingBufferWidth,St=q.drawingBufferHeight,st={tick:0,time:0,viewportWidth:it,viewportHeight:St,framebufferWidth:it,framebufferHeight:St,drawingBufferWidth:it,drawingBufferHeight:St,pixelRatio:G.pixelRatio},Ot={},be={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ne=ql(q,lt),yt=sf(q,at,G,nt),xt=Ay(q,lt,Ne,at,yt);function nt(qt){return xt.destroyBuffer(qt)}var ct=io(q,lt,yt,at),ot=Sd(q,ke,at,G),Ze=dy(q,lt,Ne,function(){At.procs.poll()},st,at,G),Ve=fd(q,lt,Ne,at,G),ze=xy(q,lt,Ne,Ze,Ve,at),At=Ky(q,ke,lt,Ne,yt,ct,Ze,ze,Ot,xt,ot,be,st,vt,G),ir=_y(q,ze,At.procs.poll,st,Ce,lt,Ne),mt=At.next,et=q.canvas,qe=[],rr=[],cr=[],Gt=[G.onDestroy],mr=null;function ar(){if(qe.length===0){vt&&vt.update(),mr=null;return}mr=$r.next(ar),yn();for(var qt=qe.length-1;qt>=0;--qt){var Sr=qe[qt];Sr&&Sr(st,null,0)}q.flush(),vt&&vt.update()}function yr(){!mr&&qe.length>0&&(mr=$r.next(ar))}function Ar(){mr&&($r.cancel(ar),mr=null)}function fn(qt){qt.preventDefault(),Je=!0,Ar(),rr.forEach(function(Sr){Sr()})}function vn(qt){q.getError(),Je=!1,Ie.restore(),ot.restore(),yt.restore(),Ze.restore(),Ve.restore(),ze.restore(),xt.restore(),vt&&vt.restore(),At.procs.refresh(),yr(),cr.forEach(function(Sr){Sr()})}et&&(et.addEventListener(on,fn,!1),et.addEventListener(Wf,vn,!1));function Or(){qe.length=0,Ar(),et&&(et.removeEventListener(on,fn),et.removeEventListener(Wf,vn)),ot.clear(),ze.clear(),Ve.clear(),Ze.clear(),ct.clear(),yt.clear(),xt.clear(),vt&&vt.clear(),Gt.forEach(function(qt){qt()})}function hn(qt){L(!!qt,"invalid args to regl({...})"),L.type(qt,"object","invalid args to regl({...})");function Sr(Se){var ue=u({},Se);delete ue.uniforms,delete ue.attributes,delete ue.context,delete ue.vao,"stencil"in ue&&ue.stencil.op&&(ue.stencil.opBack=ue.stencil.opFront=ue.stencil.op,delete ue.stencil.op);function ae(fe){if(fe in ue){var X=ue[fe];delete ue[fe],Object.keys(X).forEach(function(oe){ue[fe+"."+oe]=X[oe]})}}return ae("blend"),ae("depth"),ae("cull"),ae("stencil"),ae("polygonOffset"),ae("scissor"),ae("sample"),"vao"in Se&&(ue.vao=Se.vao),ue}function Pr(Se,ue){var ae={},fe={};return Object.keys(Se).forEach(function(X){var oe=Se[X];if(Qt.isDynamic(oe)){fe[X]=Qt.unbox(oe,X);return}else if(ue&&Array.isArray(oe)){for(var z=0;z<oe.length;++z)if(Qt.isDynamic(oe[z])){fe[X]=Qt.unbox(oe,X);return}}ae[X]=oe}),{dynamic:fe,static:ae}}var an=Pr(qt.context||{},!0),Fo=Pr(qt.uniforms||{},!0),da=Pr(qt.attributes||{},!1),K=Pr(Sr(qt),!1),je={gpuTime:0,cpuTime:0,count:0},Ae=At.compile(K,da,Fo,an,je),Rt=Ae.draw,br=Ae.batch,H=Ae.scope,C=[];function ie(Se){for(;C.length<Se;)C.push(null);return C}function ye(Se,ue){var ae;if(Je&&L.raise("context lost"),typeof Se=="function")return H.call(this,null,Se,0);if(typeof ue=="function")if(typeof Se=="number")for(ae=0;ae<Se;++ae)H.call(this,null,ue,ae);else if(Array.isArray(Se))for(ae=0;ae<Se.length;++ae)H.call(this,Se[ae],ue,ae);else return H.call(this,Se,ue,0);else if(typeof Se=="number"){if(Se>0)return br.call(this,ie(Se|0),Se|0)}else if(Array.isArray(Se)){if(Se.length)return br.call(this,Se,Se.length)}else return Rt.call(this,Se)}return u(ye,{stats:je,destroy:function(){Ae.destroy()}})}var Wr=ze.setFBO=hn({framebuffer:Qt.define.call(null,Yf,"framebuffer")});function Yr(qt,Sr){var Pr=0;At.procs.poll();var an=Sr.color;an&&(q.clearColor(+an[0]||0,+an[1]||0,+an[2]||0,+an[3]||0),Pr|=qy),"depth"in Sr&&(q.clearDepth(+Sr.depth),Pr|=eg),"stencil"in Sr&&(q.clearStencil(Sr.stencil|0),Pr|=tg),L(!!Pr,"called regl.clear with no buffer specified"),q.clear(Pr)}function pn(qt){if(L(typeof qt=="object"&&qt,"regl.clear() takes an object as input"),"framebuffer"in qt)if(qt.framebuffer&&qt.framebuffer_reglType==="framebufferCube")for(var Sr=0;Sr<6;++Sr)Wr(u({framebuffer:qt.framebuffer.faces[Sr]},qt),Yr);else Wr(qt,Yr);else Yr(null,qt)}function cn(qt){L.type(qt,"function","regl.frame() callback must be a function"),qe.push(qt);function Sr(){var Pr=Kf(qe,qt);L(Pr>=0,"cannot cancel a frame twice");function an(){var Fo=Kf(qe,an);qe[Fo]=qe[qe.length-1],qe.length-=1,qe.length<=0&&Ar()}qe[Pr]=an}return yr(),{cancel:Sr}}function bn(){var qt=mt.viewport,Sr=mt.scissor_box;qt[0]=qt[1]=Sr[0]=Sr[1]=0,st.viewportWidth=st.framebufferWidth=st.drawingBufferWidth=qt[2]=Sr[2]=q.drawingBufferWidth,st.viewportHeight=st.framebufferHeight=st.drawingBufferHeight=qt[3]=Sr[3]=q.drawingBufferHeight}function yn(){st.tick+=1,st.time=dr(),bn(),At.procs.poll()}function Fr(){Ze.refresh(),bn(),At.procs.refresh(),vt&&vt.update()}function dr(){return(Dn()-ft)/1e3}Fr();function Tn(qt,Sr){L.type(Sr,"function","listener callback must be a function");var Pr;switch(qt){case"frame":return cn(Sr);case"lost":Pr=rr;break;case"restore":Pr=cr;break;case"destroy":Pr=Gt;break;default:L.raise("invalid event, must be one of frame,lost,restore,destroy")}return Pr.push(Sr),{cancel:function(){for(var an=0;an<Pr.length;++an)if(Pr[an]===Sr){Pr[an]=Pr[Pr.length-1],Pr.pop();return}}}}var Dr=u(hn,{clear:pn,prop:Qt.define.bind(null,Yf),context:Qt.define.bind(null,Jd),this:Qt.define.bind(null,Qd),draw:hn({}),buffer:function(qt){return yt.create(qt,ru,!1,!1)},elements:function(qt){return ct.create(qt,!1)},texture:Ze.create2D,cube:Ze.createCube,renderbuffer:Ve.create,framebuffer:ze.create,framebufferCube:ze.createCube,vao:xt.createVAO,attributes:Ce,frame:cn,on:Tn,limits:Ne,hasExtension:function(qt){return Ne.extensions.indexOf(qt.toLowerCase())>=0},read:ir,destroy:Or,_gl:q,_refresh:Fr,poll:function(){yn(),vt&&vt.update()},now:dr,stats:at});return G.onDone(null,Dr),Dr}return qd})})(lk);var xa,Oc,Ta,Ho,Sc,bs,xc,pv,Bi,su,Xn,Fi,Gi,vv;xa={},jt(xa,Dt.POINTS,"points"),jt(xa,Dt.LINES,"lines"),jt(xa,Dt.LINE_LOOP,"line loop"),jt(xa,Dt.LINE_STRIP,"line strip"),jt(xa,Dt.TRIANGLES,"triangles"),jt(xa,Dt.TRIANGLE_FAN,"triangle fan"),jt(xa,Dt.TRIANGLE_STRIP,"triangle strip");Oc={},jt(Oc,Dt.STATIC_DRAW,"static"),jt(Oc,Dt.DYNAMIC_DRAW,"dynamic"),jt(Oc,Dt.STREAM_DRAW,"stream");Ta={},jt(Ta,Dt.BYTE,"int8"),jt(Ta,Dt.UNSIGNED_INT,"int16"),jt(Ta,Dt.INT,"int32"),jt(Ta,Dt.UNSIGNED_BYTE,"uint8"),jt(Ta,Dt.UNSIGNED_SHORT,"uint16"),jt(Ta,Dt.UNSIGNED_INT,"uint32"),jt(Ta,Dt.FLOAT,"float");Ho={},jt(Ho,Dt.ALPHA,"alpha"),jt(Ho,Dt.LUMINANCE,"luminance"),jt(Ho,Dt.LUMINANCE_ALPHA,"luminance alpha"),jt(Ho,Dt.RGB,"rgb"),jt(Ho,Dt.RGBA,"rgba"),jt(Ho,Dt.RGBA4,"rgba4"),jt(Ho,Dt.RGB5_A1,"rgb5 a1"),jt(Ho,Dt.RGB565,"rgb565"),jt(Ho,Dt.DEPTH_COMPONENT,"depth"),jt(Ho,Dt.DEPTH_STENCIL,"depth stencil");Sc={},jt(Sc,Dt.DONT_CARE,"dont care"),jt(Sc,Dt.NICEST,"nice"),jt(Sc,Dt.FASTEST,"fast");bs={},jt(bs,Dt.NEAREST,"nearest"),jt(bs,Dt.LINEAR,"linear"),jt(bs,Dt.LINEAR_MIPMAP_LINEAR,"mipmap"),jt(bs,Dt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),jt(bs,Dt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),jt(bs,Dt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");xc={},jt(xc,Dt.REPEAT,"repeat"),jt(xc,Dt.CLAMP_TO_EDGE,"clamp"),jt(xc,Dt.MIRRORED_REPEAT,"mirror");pv={},jt(pv,Dt.NONE,"none"),jt(pv,Dt.BROWSER_DEFAULT_WEBGL,"browser");Bi={},jt(Bi,Dt.NEVER,"never"),jt(Bi,Dt.ALWAYS,"always"),jt(Bi,Dt.LESS,"less"),jt(Bi,Dt.LEQUAL,"lequal"),jt(Bi,Dt.GREATER,"greater"),jt(Bi,Dt.GEQUAL,"gequal"),jt(Bi,Dt.EQUAL,"equal"),jt(Bi,Dt.NOTEQUAL,"notequal");su={},jt(su,Dt.FUNC_ADD,"add"),jt(su,Dt.MIN_EXT,"min"),jt(su,Dt.MAX_EXT,"max"),jt(su,Dt.FUNC_SUBTRACT,"subtract"),jt(su,Dt.FUNC_REVERSE_SUBTRACT,"reverse subtract");Xn={},jt(Xn,Dt.ZERO,"zero"),jt(Xn,Dt.ONE,"one"),jt(Xn,Dt.SRC_COLOR,"src color"),jt(Xn,Dt.ONE_MINUS_SRC_COLOR,"one minus src color"),jt(Xn,Dt.SRC_ALPHA,"src alpha"),jt(Xn,Dt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),jt(Xn,Dt.DST_COLOR,"dst color"),jt(Xn,Dt.ONE_MINUS_DST_COLOR,"one minus dst color"),jt(Xn,Dt.DST_ALPHA,"dst alpha"),jt(Xn,Dt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),jt(Xn,Dt.CONSTANT_COLOR,"constant color"),jt(Xn,Dt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),jt(Xn,Dt.CONSTANT_ALPHA,"constant alpha"),jt(Xn,Dt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),jt(Xn,Dt.SRC_ALPHA_SATURATE,"src alpha saturate");Fi={},jt(Fi,Dt.NEVER,"never"),jt(Fi,Dt.ALWAYS,"always"),jt(Fi,Dt.LESS,"less"),jt(Fi,Dt.LEQUAL,"lequal"),jt(Fi,Dt.GREATER,"greater"),jt(Fi,Dt.GEQUAL,"gequal"),jt(Fi,Dt.EQUAL,"equal"),jt(Fi,Dt.NOTEQUAL,"notequal");Gi={},jt(Gi,Dt.ZERO,"zero"),jt(Gi,Dt.KEEP,"keep"),jt(Gi,Dt.REPLACE,"replace"),jt(Gi,Dt.INVERT,"invert"),jt(Gi,Dt.INCR,"increment"),jt(Gi,Dt.DECR,"decrement"),jt(Gi,Dt.INCR_WRAP,"increment wrap"),jt(Gi,Dt.DECR_WRAP,"decrement wrap");vv={},jt(vv,Dt.FRONT,"front"),jt(vv,Dt.BACK,"back");var fk=Function.prototype,ck=fk.toString;ck.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class Fw{constructor(){Pl(this,"lf");Pl(this,"option")}render(a){this.lf=a}getBytesLength(a){if(!a)return 0;let i=0;for(let u=0;u<a.length;u++){const o=a.charCodeAt(u);a.match(/[A-Z]/)?i+=1.5:o>=1&&o<=126||o>=65376&&o<=65439?i+=1:i+=2}return i}layout(a={}){const{nodes:i,edges:u,gridSize:o}=this.lf.graphModel;let l=40,c=40;o>20&&(l=o*2,c=o*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:l,ranksep:c,begin:[120,120],...a};const p=new EG(this.option).layout({nodes:i.map(y=>({id:y.id,size:{width:y.width,height:y.height},model:y})),edges:u.map(y=>({source:y.sourceNodeId,target:y.targetNodeId,model:y}))}),m={nodes:[],edges:[]};p.nodes.forEach(y=>{const{model:S}=y,x=S.getData();x.x=y.x,x.y=y.y,m.nodes.push(x)}),p.edges.forEach(y=>{const{model:S}=y,x=S.getData();if(x.pointsList=this.calcPointsList(S,m.nodes),x.pointsList){const T=x.pointsList[0],_=x.pointsList[x.pointsList.length-1];x.startPoint={x:T.x,y:T.y},x.endPoint={x:_.x,y:_.y},x.text&&x.text.value&&(x.text={x:_.x-this.getBytesLength(x.text.value)*6-10,y:_.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);m.edges.push(x)}),this.lf.renderRawData(m)}pointFilter(a){const i=a;let u=1;for(;u<i.length-1;){const o=i[u-1],l=i[u],c=i[u+1];o.x===l.x&&l.x===c.x||o.y===l.y&&l.y===c.y?i.splice(u,1):u++}return i}calcPointsList(a,i){const u=[];if(this.option.rankdir==="LR"&&a.modelType==="polyline-edge"){const o=this.lf.getNodeModelById(a.sourceNodeId),l=this.lf.getNodeModelById(a.targetNodeId),c=i.find(p=>p.id===a.sourceNodeId),h=i.find(p=>p.id===a.targetNodeId);if(c.x<h.x)return u.push({x:c.x+o.width/2,y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:h.y}),u.push({x:h.x-l.width/2,y:h.y}),this.pointFilter(u);if(c.x>h.x)return c.y>=h.y?(u.push({x:c.x,y:c.y+o.height/2}),u.push({x:c.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:h.y+l.height/2})):(u.push({x:c.x,y:c.y-o.height/2}),u.push({x:c.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:h.y-l.height/2})),this.pointFilter(u)}}}Pl(Fw,"pluginName","dagre");class dk extends UB{constructor({lf:a}){super({lf:a});const i={text:"复制",icon:!0,className:"lf-menu-copy",callback:$=>a.cloneNode($.id)},u={text:"删除",icon:!0,className:"lf-menu-delete",callback:$=>{a.deleteNode($.id),a.deleteEdge($.id)}},o={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:$=>a.graphModel.editText($.id)},l={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:$=>a.updateText($.id,"")},c={text:"框选",icon:!0,className:"lf-menu-select",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},h={text:"清空",icon:!0,className:"lf-menu-clear",callback(){a.clearData()}},p={text:"添加",icon:!0,className:"lf-menu-add",callback:$=>{console.log("🚀 ~ file: menu.ts:66 ~ Menu ~ constructor ~ ele:",$),["endEvent","serviceTask","note"].includes($.type)?M($,[m]):M($,W.nodeMenu)}},m={text:"",icon:!0,className:"lf-menu-back",callback:$=>{M($,D.nodeMenu)}},y={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"userTask",x:Oe+200,y:ge});a.addEdge({sourceNodeId:$.id,targetNodeId:de.id})}},S={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"serviceTask",x:Oe+200,y:ge});a.addEdge({type:"noteFlow",sourceNodeId:$.id,targetNodeId:de.id})}},x={text:"结束",icon:!0,className:"lf-menu-end-event",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"endEvent",x:Oe+150,y:ge});a.addEdge({sourceNodeId:$.id,targetNodeId:de.id})}},T={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"exclusiveGateway",x:Oe+150,y:ge});a.addEdge({sourceNodeId:$.id,targetNodeId:de.id})}},_={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"parallelGateway",x:Oe+150,y:ge});a.addEdge({sourceNodeId:$.id,targetNodeId:de.id})}},N={text:"注释",icon:!0,className:"lf-menu-note",callback:$=>{const{x:Oe,y:ge}=$,de=a.addNode({type:"note",x:Oe,y:ge-150});a.addEdge({type:"noteFlow",sourceNodeId:$.id,targetNodeId:de.id})}},M=($,Oe)=>{setTimeout(()=>{this.__currentData=$;const{left:ge,top:de}=this.__menuDOM.style;this.showMenu(ge,de,Oe)})},D={nodeMenu:[p,i,u,o,l],edgeMenu:[u,o,l],graphMenu:[c,h]},W={nodeMenu:[m,y,S,T,_,x,N]};this.setMenuConfig(D)}}class hk extends zB{constructor({lf:a}){super({lf:a}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const Gw={type:"process",key:"Process",properties:{}};function pk(n){const{id:a,type:i,x:u,y:o,properties:l,children:c,text:h}=n;return{incoming:[],outgoing:[],children:c,type:i,key:a,groupKey:l==null?void 0:l.groupKey,properties:{...l,name:Cb(h)?h:(h==null?void 0:h.value)??"",x:u,y:o,text:h}}}function vk(n){const{id:a,type:i,sourceNodeId:u,targetNodeId:o,startPoint:l,endPoint:c,pointsList:h,properties:p,text:m}=n;return{incoming:[u],outgoing:[o],type:i,key:a,groupKey:p==null?void 0:p.groupKey,properties:{...p,name:Cb(m)?m:(m==null?void 0:m.value)??"",text:m,startPoint:l,endPoint:c,pointsList:h}}}function yk(n){const{id:a,type:i,properties:u,text:o}=n;return{type:i,key:a,properties:{...u,name:Cb(o)?o:(o==null?void 0:o.value)??""}}}function gk(n){const a=new Map,i={processData:Gw,flowElementList:[]};return n.nodes.forEach(u=>{var o;if(u.type==="process")i.processData=yk(u);else{const l=pk(u);(o=i.flowElementList)==null||o.push(l),a.set(u.id,l)}}),n.edges.forEach(u=>{var h;const o=vk(u);a.get(u.sourceNodeId).outgoing.push(o.key),a.get(u.targetNodeId).incoming.push(o.key),(h=i.flowElementList)==null||h.push(o)}),i}function mk(n){const{incoming:a,outgoing:i,properties:u,key:o,type:l}=n,{text:c,name:h,startPoint:p,endPoint:m,pointsList:y}=u??{},S={id:o,type:l,sourceNodeId:(a==null?void 0:a[0])??"",targetNodeId:(i==null?void 0:i[0])??"",text:c||h,startPoint:p,endPoint:m,pointsList:y,properties:{}},x=["startPoint","endPoint","pointsList","text"];return S.properties=Db(u,x),S}function bk(n){const{properties:a,key:i,type:u,children:o}=n,{x:l,y:c,text:h,name:p}=a??{},m={id:i,type:u??"",x:l,y:c,text:h||p,children:o,properties:{}},y=["x","y","text"];return m.properties=Db(a,y),m}function Ek(n){const{properties:a,key:i,type:u}=n,{name:o}=a??{},l={id:i,type:u??"",text:o,x:0,y:0},c=["x","y","text"];return l.properties=Db(a,c),l}function Ok(n){const{flowElementList:a}=n,i=c=>["sequenceFlow","noteFlow"].includes(c),u=(a==null?void 0:a.filter(c=>!i(c.type)).map(bk))??[],o=(a==null?void 0:a.filter(c=>i(c.type)).map(mk))??[];return u.unshift(Ek(n.processData??Gw)),{nodes:u,edges:o}}class iE{constructor({lf:a}){a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut}adapterOut(a){return gk(a)}adapterIn(a){return Ok(a)}}Pl(iE,"pluginName","turboAdapter");const Sk=Qj("span",null,"编辑JSON",-1),xk=Ib({__name:"flow-editor",props:{modelValue:null,visible:{type:Boolean}},emits:["confirm"],setup(n,{emit:a}){const u=UA(n),{modelValue:o,visible:l}=u,c=Kj("");function h(){const p=JSON.parse(c.value);o.value=p,a("confirm",p),l.value=!1}return Zj(()=>{c.value=JSON.stringify(o.value,null,2)}),(p,m)=>{const y=Es("el-button"),S=Es("el-input"),x=Es("el-drawer");return Pc(),yv(x,{modelValue:si(l),"onUpdate:modelValue":m[1]||(m[1]=T=>gv(l)?l.value=T:null)},{header:wc(()=>[Sk,_c(y,{type:"primary",size:"default",onClick:h},{default:wc(()=>[Jj("确定")]),_:1})]),default:wc(()=>[_c(S,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=T=>c.value=T),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),Dk=Ib({__name:"index",props:{lf:null,initOptions:null,modelValue:null,elementData:null,formData:null,formOptions:null,formWidth:null},setup(n){const a=n,i=Wj(a),{lf:u,graphData:o,formData:l,formLoading:c,formOption:h,editorVisible:p,onUpdateFormData:m}=i,y=zA("container");return GA(()=>{var S;u.value=new XA({container:document.querySelector(`#${y}`),grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[G3,hk,HB,dk,$B,LB,kb,gP,iE,Fw],edgeGenerator:(x,T)=>{if(["note","serviceTask"].includes(T.type))return"noteFlow"},...a.initOptions}),(S=u.value)==null||S.setTheme(HA),lB(i),kA(o,x=>{var M,D,W;const T=JSON.stringify(x),_=JSON.stringify((M=u.value)==null?void 0:M.getGraphData());T!==_&&((D=u.value)==null||D.render(x),(W=u.value)==null||W.emit("element:click",{isForce:!0}))},{immediate:!0})}),(S,x)=>{const T=Es("el-main"),_=Es("el-empty"),N=Es("avue-form"),M=Es("el-aside"),D=Es("el-container");return Pc(),yv(D,{class:"lf-container"},{default:wc(()=>[_c(T,{id:si(y),class:"lf-main"},null,8,["id"]),_c(M,{width:n.formWidth,class:"lf-aside"},{default:wc(()=>{var W;return[(W=si(h).group)!=null&&W.length?si(c)?qj("",!0):(Pc(),yv(N,{key:1,modelValue:si(l),"onUpdate:modelValue":[x[0]||(x[0]=$=>gv(l)?l.value=$:null),si(m)],option:si(h)},null,8,["modelValue","option","onUpdate:modelValue"])):(Pc(),yv(_,{key:0,description:"选择元素以编辑数据"}))]}),_:1},8,["width"]),_c(xk,{modelValue:si(o),"onUpdate:modelValue":x[1]||(x[1]=W=>gv(o)?o.value=W:null),visible:si(p),"onUpdate:visible":x[2]||(x[2]=W=>gv(p)?p.value=W:null),onConfirm:x[3]||(x[3]=W=>{var $;return($=si(u))==null?void 0:$.render(W)})},null,8,["modelValue","visible"])]),_:1})}}}),Tk=["id"],Ck=Ib({__name:"index",props:{lf:null,initOptions:null,modelValue:null},setup(n){const i=UA(n,void 0,{passive:!0}),{lf:u,modelValue:o}=i,l=zA("container");return GA(()=>{var c;u.value=new XA({container:document.querySelector(`#${l}`),grid:{type:"dot",size:10},isSilentMode:!0,plugins:[kb,gP,iE]}),(c=u.value)==null||c.setTheme(HA),kA(o,h=>{var p;(p=u.value)==null||p.render(h)},{immediate:!0})}),(c,h)=>(Pc(),eB("div",{id:si(l),class:"lf-container"},null,8,Tk))}});export{kb as B,G3 as C,Fw as D,m3 as E,j3 as G,dk as M,R3 as N,p3 as P,y3 as S,iE as T,T3 as U,Dk as _,Ck as a,v3 as b,g3 as c,HA as d,b3 as e,E3 as f,O3 as g,S3 as h,x3 as i,A3 as j,P3 as k,w3 as l,_3 as m,N3 as n,I3 as o,D3 as p,C3 as q,B3 as r,gP as s,hk as t,gk as u,Ok as v};
