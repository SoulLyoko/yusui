import{u as K}from"./index.es.e5378d01.js";import"./index.288677a1.js";import{s as T}from"./index.386fc70b.js";import{c as p}from"./cloneDeep.72f77c29.js";import{u as A}from"./config.78667c97.js";import{g as q}from"./get.c8715fa2.js";import{h as N,g as D,l as P}from"./framework.f01dabf7.js";function Q(l,a={}){const{childrenKey:s="children",depth:r=0,returnDepth:i=!1,returnChildren:n=!1}=a;return p(l).map(e=>{var u;return i&&(e._depth=r),(u=e[s])!=null&&u.length?[e,Q(e[s],{...a,depth:r+1})]:e}).flat(Number.POSITIVE_INFINITY).map(e=>(!n&&delete e[s],e))}function I(l,a,s={}){const{childrenKey:r="children",flat:i=!0}=s,n=p(l);if(i){const t=[];for(const e of n)a(e)&&t.push(e),e[r]&&n.push(...e[r]);return t}else return n.filter(t=>{var u,d;const e=(u=t[r])==null?void 0:u.length;return t[r]=e&&I(t[r],a,s),a(t)||((d=t[r])==null?void 0:d.length)})}function U(l,a,s={}){const{childrenKey:r="children",returnChildren:i=!1}=s,n=p(l);for(const t of n){if(a(t))return!i&&delete t[r],t;t[r]&&n.push(...t[r])}return null}function F(l,a,s={}){const{childrenKey:r="children",parent:i=null,depth:n=0}=s;return l.map((e,u)=>{var m;const d=(m=e[r])==null?void 0:m.length,f=a(e,u,i,n)||e;return d?{...f,[r]:F(e[r],a,{...s,parent:e,depth:n+1})}:{...f}})}const M={label:"label",value:"value",children:"children",disabled:"disabled",res:"data"};function R(l){return{...M,...l}}function O(l={}){const a=A(l),s=R(l.props);function r(){const{request:c}=a,{dicQuery:o={},dicHeaders:h={},dicFormatter:v,dicMethod:C="get",dicData:g,dicUrl:y}=l;return g?Promise.resolve(P(g)):y&&c?c({url:y,method:C,params:o,data:o,headers:h}).then(b=>v?v(b.data):q(b.data,s.res,[])):Promise.resolve([])}const{dicUrl:i,dicQuery:n}=l,t=i?i+(n?`?${T(n)}`:""):void 0,e=K(r,{cacheKey:t}),{data:u}=e,d=N(),f=D(()=>{const c=P(d);return Array.isArray(c)?I(u.value??[],o=>c==null?void 0:c.some(h=>h===o[s.value])):U(u.value??[],o=>o[s.value]===c)}),m=D(()=>{var c,o;return Array.isArray(f.value)?(c=f.value)==null?void 0:c.map(h=>h[s.label]).join(","):(o=f.value)==null?void 0:o[s.label]});return{...e,dictValue:d,selectedItem:f,selectedLabel:m}}export{Q as a,I as b,U as f,R as m,F as t,O as u};
