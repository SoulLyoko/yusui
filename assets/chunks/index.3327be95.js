import{g as U,h as L,z as q,$ as De,S as $e,d as I,J as V,o as k,b as E,c as R,N as _,w as D,K as M,a as G,l as f,B,L as F,E as ve,R as Q,k as N,t as le,A as Ce,a3 as X,n as oe,O as Se,e as re,a7 as ye,at as ge,a5 as Oe,D as Le}from"./framework.a13ec59b.js";import{a as K,d as Ee,w as We}from"./index.f1ae53c3.js";import{d as ce,g as Ie,b as O,e as Re,f as Ue,p as Pe,s as Ae,h as ue,_ as T,a as Y,i as j,k as Me,l as je,m as ze,n as Be,o as He,q as Fe,r as Ne,t as qe,u as Ge,v as Ke,w as Je,x as Qe,y as Xe,z as Ye,A as Ze,B as et,C as tt,D as lt,E as ot,F as at,G as me,H as he,V as nt,c as pe,j as rt}from"./tree.9b5eb098.js";import{J as Hl,I as Fl}from"./tree.9b5eb098.js";import"./index.013eb64a.js";import{f as ut}from"./form.7fc4689d.js";import{c as A}from"./cloneDeep.0addb388.js";import{f as _e,a as pt,t as it}from"./index.d8aaa0c2.js";import{b as ae}from"./index.11c61ab2.js";import{i as Ve}from"./isEqual.3088a5af.js";import{m as ne}from"./merge.cdc37a6d.js";import{o as st,a as ct}from"./omitBy.3ba6179f.js";import{D as we}from"./vuedraggable.umd.34b59ae3.js";import{E as dt}from"./index.vue_vue_type_script_setup_true_lang.28a5e00c.js";import{u as mt}from"./Uint8Array.9b4f3e17.js";import{d as bt}from"./union.d42d3f09.js";import{s as be}from"./set.f28c7d85.js";import{g as ft}from"./get.8a71353d.js";import"./index.349087e2.js";import"./kebabCase.99797389.js";import"./createCompounder.39cbc467.js";import"./state-local.dd516420.js";import"./initCloneObject.bffa9b07.js";import"./getTag.bbaab4d0.js";import"./index.es.bd4305ee.js";import"./index.386fc70b.js";import"./config.ec43eb9b.js";import"./pick.d171649b.js";import"./basePickBy.d4166d32.js";import"./index.c3b49629.js";import"./pickBy.7042e009.js";import"./vue.runtime.esm-bundler.45c8764c.js";const vt=Object.freeze(Object.defineProperty({__proto__:null,get array(){return Me},get cascader(){return je},get checkbox(){return ze},get color(){return St},get date(){return Be},get daterange(){return He},get dates(){return Fe},get datetime(){return Ne},get datetimerange(){return qe},get dynamic(){return Ot},get form(){return ut},get group(){return Lt},get icon(){return Ge},get img(){return Ke},get input(){return Et},get month(){return Je},get monthrange(){return Qe},get number(){return Wt},get password(){return It},get radio(){return Xe},get rate(){return Rt},get select(){return Ye},get slider(){return Ut},get switch(){return Pt},get table(){return At},get textarea(){return Mt},get time(){return Ze},get timerange(){return et},get title(){return jt},get tree(){return tt},get upload(){return zt},get url(){return lt},get week(){return ot},get year(){return at}},Symbol.toStringTag,{value:"Module"}));function yt(l,a=[void 0,null],t=[]){if(typeof l!="object"||l===null)return l;const e={};for(const o in l){const r=a.every(u=>l[o]!==u),i=t.every(u=>!o.includes(u));r&&i&&(e[o]=l[o])}return e}function ie(l,a=[void 0,null],t=[]){if(typeof l!="object")return l;if(Array.isArray(l))return l.map(o=>ie(o,a,t));const e={};for(const o in l)if(l[o]&&typeof l[o]=="object")e[o]=ie(l[o],a,t);else{const r=a.every(u=>l[o]!==u),i=t.every(u=>!o.includes(u));r&&i&&(e[o]=l[o])}return e}function gt(l){var a;return((a=Object.prototype.toString.call(l).match(/\[object (.*)\]/))==null?void 0:a[1])??""}function te(l){return l.map(a=>{var o;const t=A(a);let e=[];return t.name=t.name||t.component||t.type,t.id=t.id||ce(t.name),t.name==="form"?e=te([...t.column??[],...t.group??[]]):t.name==="group"?e=te(t.column??[]):["dynamic","table"].includes(t.name)&&(e=te(((o=t.children)==null?void 0:o.column)??[])),{name:t.name,id:t.id,isRoot:t.isRoot,props:t,children:e}})}function se(l){return te([{isRoot:!0,name:"form",id:ce("form"),...l}])[0]}function ee(l){return l.map(a=>{var e,o,r;const t=A(a);if(t.props&&(t.props.prop=t.props.prop??t.id),t.name==="form"){const i=ee(((e=t.children)==null?void 0:e.filter(s=>s.name!=="group"))??[]),u=ee(((o=t.children)==null?void 0:o.filter(s=>s.name==="group"))??[]);return{...t.props,column:i.length?i:void 0,group:u.length?u:void 0}}if(t.name==="group"){const i=ee(t.children??[]);return{...t.props,column:i}}else if(["dynamic","table"].includes(t.name??"")){const i=ee(t.children??[]),u={...(r=t.props)==null?void 0:r.children,column:i};return{...t.props,children:u}}return{...t.props}})}function ke(l){return ee([l])[0]??{}}function de(l,a){const{parentWhiteList:t,parentBlackList:e}=(l==null?void 0:l.rules)??{},{childWhiteList:o,childBlackList:r}=(a==null?void 0:a.rules)??{},i=[];if(t&&a){const u=t.includes((a==null?void 0:a.name)??"");i.push(u)}if(e&&a){const u=e.includes((a==null?void 0:a.name)??"");i.push(!u)}if(o){const u=o.includes((l==null?void 0:l.name)??"");i.push(u)}if(r){const u=r.includes((l==null?void 0:l.name)??"");i.push(!u)}return i.every(u=>u)}const Te=Symbol("form-design-state");function ht(l,a){const t=K(l),{modelValue:e}=t,o=U(()=>l.groupList||Ie),r=U(()=>ne(A({...vt}),l.resources)),i=U(()=>ne(x(Ct),x(l.baseOption))),u=U(()=>ne(x(Dt),x(l.advanceOption))),s=L({}),c=L({}),m=L({}),d=U(()=>{var $;return st(($=s.value)==null?void 0:$.props,["column","group"])??{}}),n=L([]),p=L(0),y=L("design"),w=L("pc");q(e,$=>{Ve(s.value,se($||{}))||(s.value=se($||{}),Object.keys(c.value).length||C(),n.value.length||v("init"))},{immediate:!0,deep:!0}),q(s,()=>{e.value=ke(s.value)},{deep:!0});function h($){if($)return r.value[$]}function C($){c.value=$??s.value??{}}function x($){if(typeof $=="function"){const P={elementTree:s.value,activeElement:c.value};return A($(P)??[])}else return A($??[])}async function v($){n.value.push({type:$,timestamp:Date.now(),active:A(c.value),tree:A(s.value),option:A(e.value??{})}),p.value=n.value.length-1}function b($){const P=n.value.find((W,H)=>H===$);P&&(s.value=A(P.tree),c.value=A(P.active),p.value=$)}function g(){n.value=[],p.value=0,s.value={},c.value={},a("reset")}const S={groupList:o,resources:r,elementTree:s,activeElement:c,hoverElement:m,formOption:d,historyList:n,historyIndex:p,workType:y,deviceType:w,modelValue:e,baseOption:i,advanceOption:u,resolveSettings:x,setActiveElement:C,recordHistory:v,restoreHistory:b,resetHistory:g,getResource:h};return De(Te,S),S}function z(){return $e(Te)}const _t=I({__name:"property-select",props:{tableData:{},dic:{}},setup(l){const a=l,{elementTree:t,baseOption:e,resolveSettings:o,getResource:r}=z(),i=U(()=>{var c;const u=_e([t.value],m=>{var d,n,p;return((d=m.props)==null?void 0:d.prop)===((p=(n=a.tableData)==null?void 0:n.row)==null?void 0:p.field)}),s=((c=r(u==null?void 0:u.name))==null?void 0:c.settings)??[];return[...e.value,...o(s)].filter(m=>m.prop).map(m=>({label:m.label,value:m.prop,desc:m.prop}))});return(u,s)=>{const c=V("avue-select");return k(),E(c,{dic:i.value,"allow-create":"",filterable:"","default-first-option":""},null,8,["dic"])}}}),Vt=I({__name:"index",props:{modelValue:{}},setup(l){const t=K(l),{modelValue:e}=t,{elementTree:o}=z(),r=L(!1),i=L([]);q(e,()=>{var c,m,d;if(!e.value){i.value=[];return}try{const p=((d=(m=(c=Re(e.value,{ecmaVersion:"latest"}).body[0])==null?void 0:c.expression)==null?void 0:m.body)==null?void 0:d.properties)??[];p!=null&&p.length&&(i.value=p.map(y=>y.value.properties.map(w=>{const h=Ue(w.value);return{field:y.key.name,property:w.key.name,value:h}})).flat())}catch{}},{immediate:!0}),q(i,()=>{var d;if(!r.value)return;const m=`(val, form) => ({
    ${[...new Set((d=i.value)==null?void 0:d.map(n=>n.field))].map(n=>{var y;const p=(y=i.value)==null?void 0:y.filter(w=>w.field===n);return`${n}: { ${p==null?void 0:p.map(w=>`${w.property}: ${w.value}`).join(", ")} }`}).join(`,
    `)}
})`;e.value=m},{deep:!0});const u=U(()=>{var m;return pt(((m=o.value)==null?void 0:m.children)??[]).map(d=>{const{label:n,prop:p}=d.props??{};return{label:n,value:p,desc:p}})}),s=U(()=>({column:[{label:"受控字段",prop:"field",type:"select",dicData:u.value,rules:{required:!0}},{label:"受控属性",prop:"property",component:_t,rules:{required:!0}},{label:"表达式/值",prop:"value",component:O,tooltip:!0,rules:{required:!0}}]}));return(c,m)=>{const d=V("el-button"),n=V("avue-dynamic"),p=V("el-dialog");return k(),R(M,null,[_(d,{onClick:m[0]||(m[0]=y=>r.value=!0)},{default:D(()=>[G(" 编辑代码 ")]),_:1}),_(p,{modelValue:r.value,"onUpdate:modelValue":m[3]||(m[3]=y=>r.value=y),title:"控制字段属性"},{default:D(()=>[_(n,{modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=y=>i.value=y),children:s.value},null,8,["modelValue","children"]),G(" 代码： "),_(O,{modelValue:f(e),"onUpdate:modelValue":m[2]||(m[2]=y=>B(e)?e.value=y:null),"value-type":"function",height:"200px"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),Al=I({__name:"index",props:{modelValue:{},setterType:{}},setup(l){const t=K(l),{modelValue:e}=t,o={column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]},r={props:{value:"id"},formOption:{column:[{label:"名称",prop:"label"},{label:"值",prop:"value"}]}},i=L({});function u(d,n){d(),setTimeout(()=>{(n==="add"||n==="parentAdd")&&(i.value.id=ce())},100)}const s=(d,n,p)=>p(),c=(d,n,p)=>p(),m=(d,n)=>n();return(d,n)=>{const p=V("avue-tree"),y=V("avue-dynamic");return d.setterType=="tree"?(k(),E(p,{key:0,modelValue:i.value,"onUpdate:modelValue":n[0]||(n[0]=w=>i.value=w),data:f(e),option:r,"before-open":u,onSave:s,onUpdate:c,onDel:m},null,8,["modelValue","data"])):(k(),E(y,{key:1,children:o,"model-value":f(e)||[],"onUpdate:modelValue":n[1]||(n[1]=w=>e.value=w)},null,8,["model-value"]))}}}),wt=I({__name:"index",props:{modelValue:{},tableData:{}},setup(l){const a=l,t=K(a),{modelValue:e}=t,o=L(!1),r=L({});q(e,()=>{var u,s;e.value&&(r.value=((s=(u=a.tableData)==null?void 0:u.row)==null?void 0:s.onLoadData)??{})},{immediate:!0}),q(r,()=>{var w;if(!o.value||!((w=a.tableData)!=null&&w.row)||(a.tableData.row.onLoadData=r.value,r.value.codeMode))return;const{url:u,method:s,isPage:c,currentPageKey:m,pageSizeKey:d,totalPath:n,dataPath:p}=r.value,y=`({ page, value, data }, callback) => {
    const params = page && ${c} ? { ${m}: page.currentPage, ${d}: page.pageSize } : {};
    this.$axios({ url: "${u}", method: "${s}", params }).then(res => {
        const data = this.getAsVal({ res }, "${p}");
        const total = this.getAsVal({ res }, "${n}");
        callback({ data, total });
    });
}`;e.value=y},{deep:!0});const i={span:24,menuBtn:!1,labelWidth:100,column:[{label:"请求地址",prop:"url"},{label:"请求方法",prop:"method",type:"radio",button:!0,value:"get",dicData:[{label:"GET",value:"get"},{label:"POST",value:"post"}]},{label:"是否分页",prop:"isPage",type:"switch",value:!0},{label:"当前页键名",prop:"currentPageKey",value:"current"},{label:"每页条数键名",prop:"pageSizeKey",value:"size"},{label:"总条数路径",prop:"totalPath",value:"res.data.total"},{label:"返回数据路径",prop:"dataPath",value:"res.data.records"},{label:"编辑代码模式",prop:"codeMode",type:"switch",value:!1,span:4,tip:"关闭时，代码根据以上参数自动生成。开启时，可自由编辑代码"}]};return(u,s)=>{const c=V("el-button"),m=V("avue-form"),d=V("el-dialog");return k(),R(M,null,[_(c,{onClick:s[0]||(s[0]=n=>o.value=!0)},{default:D(()=>[G(" 编辑代码 ")]),_:1}),_(d,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=n=>o.value=n),title:"加载数据函数"},{default:D(()=>[_(m,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=n=>r.value=n),option:i},null,8,["modelValue"]),G(" 代码： "),_(O,{modelValue:f(e),"onUpdate:modelValue":s[2]||(s[2]=n=>B(e)?e.value=n:null),"value-type":"function",height:"200px",disabled:""},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),kt=I({__name:"index",props:{modelValue:{}},setup(l){const t=K(l),{modelValue:e}=t,o=L(!1),r=L(-1),i=U({get(){var n;return((n=e.value)==null?void 0:n[r.value])??{}},set(n){if(e.value&&r.value!==-1){const p=yt(n,[void 0,null,""],["$"]);e.value[r.value]=p}}});async function u(){var n;!e.value&&(e.value=[]),await ve(),(n=e.value)==null||n.push({})}function s(n,p){r.value=p,o.value=!0}function c(n,p){var y;(y=e.value)==null||y.splice(p,1)}const m=[{label:"否",value:!1},{label:"是",value:!0}],d={menuBtn:!1,span:24,labelWidth:100,column:[{label:"触发方式",prop:"trigger",type:"select",dicData:[{label:"值变化",value:"change"},{label:"聚焦时",value:"focus"},{label:"失焦时",value:"blur"}]},{label:"值类型",prop:"type",type:"select",dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"整数",value:"integer"},{label:"浮点数",value:"float"},{label:"日期",value:"date"},{label:"URL地址",value:"url"},{label:"十六进制",value:"hex"},{label:"邮箱",value:"email"},{label:"任意类型",value:"any"}]},{label:"是否必填",prop:"required",type:"radio",button:!0,dicData:m},{label:"错误消息",prop:"message"},{label:"正则表达式",prop:"pattern",prepend:"/",append:"/"},{label:"最小",prop:"min",type:"number"},{label:"最大",prop:"max",type:"number"},{label:"长度",prop:"len",type:"number"},{label:"禁止空白符",prop:"whitespace",type:"radio",button:!0,dicData:m},{label:"自定义校验函数",prop:"validator",labelWidth:120,component:O,tooltip:!0,width:"400px",defaultValue:`(rule, value, callback, source, options) => {

}`}]};return(n,p)=>{const y=V("avue-form"),w=V("el-drawer");return k(),R(M,null,[(k(!0),R(M,null,F(f(e),(h,C)=>(k(),R("div",{key:C},[_(f(ae),{icon:"el-icon-setting",onClick:x=>s(h,C)},{default:D(()=>[G(" 配置规则 ")]),_:2},1032,["onClick"]),_(f(ae),{text:"",icon:"el-icon-delete",onClick:x=>c(h,C)},null,8,["onClick"])]))),128)),_(f(ae),{icon:"el-icon-plus",onClick:u},{default:D(()=>[G(" 添加规则 ")]),_:1}),_(w,{modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=h=>o.value=h),title:"配置规则","append-to-body":"","destroy-on-close":""},{default:D(()=>[_(y,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=h=>i.value=h),option:d},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),Tt={style:{display:"flex"}},xt=I({__name:"index",props:{modelValue:{},tableData:{},prop:{},types:{},defaultValueType:{}},setup(l){const a=l,t=K(a),{modelValue:e}=t,o=L(a.defaultValueType??"string");q(e,c=>{c!==void 0&&(o.value=gt(c).toLowerCase())},{immediate:!0});function r(){e.value=void 0}const i=[{label:"str",value:"string"},{label:"num",value:"number"},{label:"boo",value:"boolean"},{label:"arr",value:"array"},{label:"obj",value:"object"}],u=U(()=>{var c;return(c=a.types)!=null&&c.length?i.filter(m=>{var d;return(d=a.types)==null?void 0:d.includes(m.value)}):i}),s=[{label:"true",value:!0},{label:"false",value:!1}];return(c,m)=>{const d=V("el-input"),n=V("el-input-number"),p=V("avue-select"),y=V("el-option"),w=V("el-select");return k(),R("div",Tt,[o.value==="string"?(k(),E(d,Q({key:0,modelValue:f(e),"onUpdate:modelValue":m[0]||(m[0]=h=>B(e)?e.value=h:null)},c.$attrs),null,16,["modelValue"])):o.value==="number"?(k(),E(n,Q({key:1,modelValue:f(e),"onUpdate:modelValue":m[1]||(m[1]=h=>B(e)?e.value=h:null),"controls-position":"right"},c.$attrs),null,16,["modelValue"])):o.value==="boolean"?(k(),E(p,Q({key:2,modelValue:f(e),"onUpdate:modelValue":m[2]||(m[2]=h=>B(e)?e.value=h:null)},c.$attrs,{dic:s}),null,16,["modelValue"])):(k(),E(O,Q({key:3,modelValue:f(e),"onUpdate:modelValue":m[3]||(m[3]=h=>B(e)?e.value=h:null),"value-type":o.value,tooltip:""},c.$attrs),null,16,["modelValue","value-type"])),_(w,{modelValue:o.value,"onUpdate:modelValue":m[4]||(m[4]=h=>o.value=h),clearable:!1,"suffix-icon":"",style:{width:"50px","flex-shrink":"0"},onChange:r},{default:D(()=>[(k(!0),R(M,null,F(u.value,h=>(k(),E(y,{key:h.value,label:h.label,value:h.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])}}}),Dt=[{label:"控制其它字段",prop:"control",component:Vt},{label:"值变化事件",prop:"change",component:O,tooltip:!0,defaultValue:"({ value, row }) => {}"},{label:"点击事件",prop:"click",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"获取焦点事件",prop:"focus",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"失去焦点事件",prop:"blur",component:O,tooltip:!0,defaultValue:"({ value, row  }) => {}"},{label:"其他属性",prop:"params",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"其他事件",prop:"event",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}],fe=[{label:"字段标识",prop:"prop"},{label:"标签标题",prop:"label"},{label:"标签宽度",prop:"labelWidth",labelTip:'"auto"或数字'},{label:"标签位置",prop:"labelPosition",type:"radio",button:!0,dicData:Pe},{label:"组件尺寸",prop:"size",type:"radio",button:!0,dicData:Ae},{label:"数据类型",prop:"dataType",type:"select",labelTip:'会将数据转换为对应选择的数据类型，如：[1,2,3]=>"1,2,3"',dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"数组",value:"array"}]},{label:"表单项栅格",prop:"span",type:"number",min:1,max:24},{label:"字段提示",prop:"tip"},{label:"字段提示位置",prop:"tipPlacement",type:"select",dicData:ue},{label:"标签提示",prop:"labelTip"},{label:"标签提示位置",prop:"labelTipPlacement",type:"select",dicData:ue},{label:"默认值",prop:"value",component:xt},{label:"占位内容",prop:"placeholder"},{label:"是否可清空",prop:"clearable",component:T,defaultValue:!0},{label:"详情模式",prop:"detail",component:T,defaultValue:!1},{label:"是否只读",prop:"readonly",component:T,defaultValue:!1},{label:"是否禁用",prop:"disabled",component:T,defaultValue:!1},{label:"是否可见",prop:"display",component:T,defaultValue:!0},{label:"校验规则",prop:"rules",component:kt}],$t=[{labelWidth:0,type:"title",modelValue:"子表单/表格属性"},{label:"宽度",prop:"width",type:"number"},{label:"最小宽度",prop:"minWidth",type:"number"},{label:"固定列",prop:"fixed",type:"radio",button:!0,dicData:[{label:"左",value:"left"},{label:"右",value:"right"}]},{label:"超长省略",prop:"overHidden",component:T,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"是否可搜索",prop:"search",component:T,defaultValue:!1},{label:"是否隐藏",prop:"hide",component:T,defaultValue:!1}],Ct=({elementTree:l,activeElement:a})=>{var o;const t=it([l],(r,i,u)=>({...r,parent:u})),e=_e(t,r=>r.id===a.id);return((o=e==null?void 0:e.parent)==null?void 0:o.name)==="dynamic"?[...fe,...$t]:fe},St={name:"color",title:"颜色",icon:"el-icon-brush",group:"表单组件",props:{type:"color",label:"颜色"},settings:[{label:"支持透明度选择",prop:"showAlpha",component:T,defaultValue:!1,labelWidth:120},{label:"颜色格式",prop:"colorFormat",type:"select",dicData:[{label:"hsl",value:"hsl"},{label:"hsv",value:"hsv"},{label:"hex",value:"hex"},{label:"rgb",value:"rgb"}]},{label:"预定义颜色",prop:"predefine",type:"array"}]},Ot={name:"dynamic",title:"子表单",icon:"el-icon-grid",group:"表单组件",isContainer:!0,rules:{parentWhiteList:["form","group"],childBlackList:["group","dynamic"]},designOption:l=>{const{label:a,prop:t}=l.props??{};return{column:[{label:a,prop:t,type:"text"}]}},props:{type:"dynamic",label:"子表单",children:{column:[]}},settings:[{prop:"children",labelWidth:0,component:"avue-form",option:{labelWidth:100,menuBtn:!1,span:24,column:[{label:"展示类型",prop:"type",type:"radio",button:!0,value:"crud",dicData:[{label:"表格",value:"crud"},{label:"表单",value:"form"}],control(l){const a=l==="form",t=l==="crud";return{showHeader:{display:t},stripe:{display:t},border:{display:t},headerAlign:{display:t},align:{display:t},span:{display:a}}}},{label:"显示新增按钮",prop:"addBtn",component:T,defaultValue:!0},{label:"显示删除按钮",prop:"delBtn",component:T,defaultValue:!0},{label:"显示序号",prop:"index",type:"switch",control(l,a){return a.type==="crud"&&typeof l=="boolean"&&(a.index=l?"":!1),{}}},{label:"显示表头",prop:"showHeader",component:T,defaultValue:!0},{label:"表格边框",prop:"border",component:T,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:T,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"表单项栅格",prop:"span",type:"number"},{label:"空数据文字",prop:"emptyText",type:"number"}]}}]},Lt={name:"group",title:"分组",icon:"el-icon-menu",group:"布局组件",isContainer:!0,rules:{parentWhiteList:["form"],childBlackList:["group"]},designOption:l=>{const{label:a,prop:t}=l.props??{};return{column:[{prop:t,labelWidth:0,type:"title",modelValue:a,styles:{fontWeight:500,fontSize:"16px"}}]}},props:{type:"group",label:"分组",column:[]},settings:[{label:"图标",prop:"icon",type:"icon",iconList:j},{label:"是否默认展开",prop:"collapse",component:T,defaultValue:!0},{label:"是否显示箭头",prop:"arrow",component:T,defaultValue:!0}]},Et={name:"input",title:"输入框",icon:"el-icon-chat-dot-square",group:"表单组件",props:{type:"input",label:"输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:T,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"前缀文字",prop:"prepend"},{label:"后缀文字",prop:"append"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:j},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:j},{label:"输入值格式化",prop:"formatter",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"返回值格式化",prop:"parser",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"输入框样式",prop:"inputStyle",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}]},Wt={name:"number",title:"数字输入框",icon:"el-icon-more",group:"表单组件",props:{type:"number",label:"数字输入框"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"计数器步长",prop:"step",type:"number"},{label:"只能输入步长倍数",prop:"stepStrictly",component:T,defaultValue:!1,labelWidth:130},{label:"数值精度",prop:"precision",type:"number"},{label:"是否使用控制按钮",prop:"controls",type:"switch",value:!0,labelWidth:130,control(l){return{controlsPosition:{display:!!l}}}},{label:"控制按钮位置",prop:"controlsPosition",type:"radio",button:!0,dicData:[{label:"两边",value:"default"},{label:"右",value:"right"}]},{label:"清空时显示值",prop:"valueOnClear",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"最小值",value:"min"},{label:"最大值",value:"max"}],control(l,a){return l&&!["min","max"].includes(l)&&(a.valueOnClear=Number(l)),{}}}]},It={name:"password",title:"密码输入框",icon:"el-icon-lock",group:"表单组件",props:{type:"password",label:"密码输入框"},settings:[{label:"最大长度",prop:"maxlength",type:"number"},{label:"前缀图标",prop:"prefixIcon",type:"icon",iconList:j},{label:"后缀图标",prop:"suffixIcon",type:"icon",iconList:j},{label:"是否显示切换密码",prop:"showPassword",component:T,defaultValue:!1,labelWidth:130}]},Rt={name:"rate",title:"评分",icon:"el-icon-star",group:"表单组件",props:{type:"rate",label:"评分",max:5,lowThreshold:2,highThreshold:4},settings:[{label:"是否允许半选",prop:"allowHalf",component:T,defaultValue:!1},{label:"最大分值",prop:"max",type:"number"},{label:"低分界限值",prop:"lowThreshold",type:"number",labelTip:"低分和中等分数的界限值，值本身被划分在低分中"},{label:"高分界限值",prop:"highThreshold",type:"number",labelTip:"高分和中等分数的界限值，值本身被划分在高分中"},{label:"颜色数组",prop:"colors",component:O,valueType:"object",tooltip:!0,defaultValue:"[]",labelTip:"若传入数组，共有 3 个元素，为 3 个分段所对应的颜色；若传入对象，可自定义分段，键名为分段的界限值，键值为对应的颜色"},{label:"未选中颜色",prop:"voidColor",type:"color"},{label:"未选颜色(禁用)",prop:"disabledVoidColor",type:"color",labelWidth:110},{label:"图标数组",prop:"icons",component:O,valueType:"object",tooltip:!0,defaultValue:"[]",labelTip:"若传入数组，则需要传入 3 个元素，分别为 3 个部分所对应的图标；若传入对象，则可自定义分段，键名为分段的界限值，键值为对应的图标"},{label:"未选中图标",prop:"voidIcon",type:"icon",iconList:j},{label:"未选图标(禁用)",prop:"disabledVoidIcon",type:"icon",iconList:j,labelWidth:110},{label:"显示辅助文字",prop:"showText",component:T,defaultValue:!1,labelWidth:120,labelTip:"是否显示辅助文字，若为是，则会从 辅助文字数组 中选取当前分数对应的文字内容"},{label:"辅助文字数组",prop:"texts",type:"array",labelWidth:120,labelTip:"通过设置辅助文字数组可以为每一个分值指定对应的辅助文字"},{label:"显示当前分数",prop:"showScore",component:T,defaultValue:!1,labelWidth:120,labelTip:"是否显示当前分数，当前分数 和 辅助文字 不能同时显示"},{label:"分数显示模板",prop:"scoreTemplate",labelWidth:120,labelTip:'模板为一个包含了 {value} 的字符串，{value} 会被替换为当前分值。如: "当前分数：{value}"'}]},Ut={name:"slider",title:"滑块",icon:"el-icon-operation",group:"表单组件",props:{type:"slider",label:"滑块"},settings:[{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"},{label:"步长",prop:"step",type:"number"},{label:"显示输入框",prop:"showInput",component:T,defaultValue:!1},{label:"输入控制按钮",prop:"showInputControls",component:T,defaultValue:!0},{label:"显示间断点",prop:"showStops",component:T,defaultValue:!1},{label:"显示提示信息",prop:"showTooltip",component:T,defaultValue:!0},{label:"提示信息类名",prop:"tooltipClase"},{label:"提示信息位置",prop:"placement",type:"select",dicData:ue},{label:"格式化提示",prop:"formatTooltip",component:O,valueType:"function",tooltip:!0,defaultValue:"(value) => value"},{label:"开启选择范围",prop:"range",component:T,defaultValue:!1},{label:"垂直模式",prop:"vertical",component:T,defaultValue:!1},{label:"滑块高度",prop:"height",type:"number",labelTip:"垂直模式必填"},{label:"标记",prop:"marks",component:O,valueType:"object",tooltip:!0,defaultValue:"{}",labelTip:"标记， key 的类型必须为 number 且取值在闭区间 [min, max] 内，每个标记可以单独设置样式"}]},Pt={name:"switch",title:"开关",icon:"el-icon-switch",group:"表单组件",props:{type:"switch",label:"开关"},settings:[{label:"开关数据",prop:"dicData",type:"dynamic",labelPosition:"top",children:{column:[{label:"_index",prop:"_index",hide:!0},{label:"文字",prop:"label"},{label:"值",prop:"value",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:[{label:"true",value:!0},{label:"false",value:!1}]}]},value:[{label:"",value:!1},{label:"",value:!0}]},{label:"开关宽度",prop:"len"},{label:"文字在点内",prop:"inlinePrompt",component:T,defaultValue:!1},{label:"开启时图标",prop:"activeIcon",type:"icon",iconList:j},{label:"关闭时图标",prop:"inactiveIcon",type:"icon",iconList:j},{label:"开启动作图标",prop:"activeActionIcon",type:"icon",iconList:j},{label:"关闭动作图标",prop:"inactiveActionIcon",type:"icon",iconList:j},{label:"改变前钩子",prop:"beforeChange",labelTip:"回调 false 则停止切换",component:O,tooltip:!0,defaultValue:"(cb) => cb(true)"}]},At={name:"table",title:"表格选择",icon:"el-icon-grid",group:"表单组件",isContainer:!0,props:{type:"table",label:"表格选择",children:{column:[]}},settings:[{label:"显示表头",prop:"showHeader",component:T,defaultValue:!0},{label:"斑马纹",prop:"stripe",component:T,defaultValue:!1},{label:"表格边框",prop:"border",component:T,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:Y},{label:"整体对齐方式",prop:"align",type:"radio",button:!0,dicData:Y},{label:"显示序号",prop:"index",type:"switch"},{label:"键值配置",prop:"props",component:O,valueType:"object",tooltip:!0,value:{label:"name",value:"id"}},{label:"格式化函数",prop:"formatter",component:O,valueType:"function",tooltip:!0,defaultValue:"(row) => row.name"},{label:"加载数据函数",prop:"onLoad",component:wt}]},Mt={name:"textarea",title:"文本域",icon:"el-icon-chat-line-square",group:"表单组件",props:{type:"textarea",label:"文本域"},settings:[{label:"最小行数",prop:"minRows",type:"number"},{label:"最大行数",prop:"maxRows",type:"number"},{label:"最大长度",prop:"maxlength",type:"number"},{label:"显示统计字数",prop:"showWordLimit",component:T,defaultValue:!1,tip:"仅在最大长度大于0时有效"},{label:"是否能被缩放",prop:"resize",type:"select",dicData:[{label:"不可缩放",value:"none"},{label:"可水平缩放",value:"horizontal"},{label:"可垂直缩放",value:"vertical"},{label:"可自由缩放",value:"both"}]},{label:"输入框样式",prop:"inputStyle",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"}]},jt={name:"title",title:"标题",icon:"el-icon-minus",group:"布局组件",props:{type:"title",labelWidth:0,modelValue:"标题",styles:{textAlign:"center"}},settings:[{label:"标题内容",prop:"modelValue",type:"textarea",labelPosition:"top"},{label:"样式",prop:"styles",component:O,valueType:"object",tooltip:!0}]},zt={name:"upload",title:"上传",icon:"el-icon-upload",group:"表单组件",props:{type:"upload",label:"上传"},settings:[{label:"上传地址",prop:"action"},{label:"请求头",prop:"headers",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"请求方法",prop:"method",type:"radio",button:!0,dicData:[{label:"POST",value:"post"},{label:"GET",value:"get"}]},{label:"是否支持多选",prop:"multiple",component:T,defaultValue:!1},{label:"额外参数",prop:"data",component:O,valueType:"object",tooltip:!0,defaultValue:"{}"},{label:"显示文件列表",prop:"showFileList",component:T,defaultValue:!0},{label:"拖拽排序",prop:"drag",component:T,defaultValue:!1},{label:"拖拽上传",prop:"dragFile",component:T,defaultValue:!1},{label:"接受上传类型",prop:"accept"},{label:"文件列表类型",prop:"listType",type:"select",dicData:[{label:"文本",value:"text"},{label:"图片",value:"picture"},{label:"图片卡片",value:"picture-card"},{label:"图片图片",value:"picture-img"}]},{label:"最大上传数量",prop:"limit",type:"number"},{label:"最大上传大小",prop:"fileSize",type:"number"},{label:"上传按钮文字",prop:"fileText"},{label:"上传等待文字",prop:"loadText"},{label:"上传请求配置",prop:"propsHttp",component:O,valueType:"object",tooltip:!0,defaultValue:`{
  home: "",
  res: "",
  url: "",
  name: "",
  fileName: "file"
}`},{label:"图片水印配置",prop:"canvasOption",component:O,valueType:"object",tooltip:!0,defaultValue:`{
  text: "",
  fontFamily: "microsoft yahei",
  color: "#999",
  fontSize: 16,
  opacity: 100,
  bottom: 10,
  right: 10,
  ratio: 1
}`}]},Bt={class:"resource-list"},Ht={class:"resource-item"},Ft=I({__name:"resource",setup(l){const{groupList:a,resources:t,elementTree:e,workType:o,setActiveElement:r,recordHistory:i,getResource:u}=z(),s=L(""),c=U(()=>{const n=Object.values(t.value).filter(p=>{const{name:y,title:w,keywords:h}=p,C=[y,w,h].filter(x=>x).join(",");return!p.disabled&&(C==null?void 0:C.includes(s.value))});return a.value.map(p=>({label:p,children:n.filter(y=>y.group===p).map((y,w)=>({...y,priority:y.priority??w})).sort((y,w)=>y.priority-w.priority)})).filter(p=>p.children.length)});function m(n){var y,w;if(o.value!=="design")return;const p=me(n);(w=(y=e.value)==null?void 0:y.children)==null||w.push(p),r(p),i("added")}function d({draggedContext:n,relatedContext:p}){var y;return de(u(n.element.name),u((y=p.component.componentData)==null?void 0:y.name))}return(n,p)=>{const y=V("el-input"),w=V("el-button"),h=V("el-collapse-item"),C=V("el-collapse");return k(),R("div",Bt,[_(y,{modelValue:s.value,"onUpdate:modelValue":p[0]||(p[0]=x=>s.value=x),"suffix-icon":"el-icon-search",placeholder:"搜索组件"},null,8,["modelValue"]),_(C,{"model-value":c.value.map(x=>x.label)},{default:D(()=>[(k(!0),R(M,null,F(c.value,x=>(k(),E(h,{key:x.label,title:x.label,name:x.label},{default:D(()=>[_(f(we),{list:x.children,group:{name:"components",pull:"clone",put:!1},clone:f(me),sort:!1,"item-key":"name",move:d},{item:D(({element:v})=>[N("div",Ht,[_(w,{icon:v.icon,onClick:b=>m(v)},{default:D(()=>[G(le(v.title),1)]),_:2},1032,["icon","onClick"])])]),_:2},1032,["list","clone"])]),_:2},1032,["title","name"]))),128))]),_:1},8,["model-value"])])}}}),Nt=["onMouseover"],qt={class:"item-label"},Gt={class:"item-actions"},Kt=I({__name:"tree",setup(l){const{elementTree:a,activeElement:t,hoverElement:e,setActiveElement:o,recordHistory:r,getResource:i}=z(),u=U(()=>[A(a.value)]);function s(v,b,g){return b.data.isRoot?!1:g==="inner"?de(i(v.data.name),i(b.data.name)):!0}const c=L();Ce(()=>{var v,b;(b=c.value)==null||b.setCurrentKey((v=t.value)==null?void 0:v.id)});function m(v){o(v)}function d(){a.value=u.value[0]}function n(v){var g;const b=he(v.data);(g=c.value)==null||g.append(b,v.parent),d(),o(b),r("added")}function p(v){var b;(b=c.value)==null||b.remove(v),d(),o(),r("removed")}function y(v){var b;(b=v.data.children)!=null&&b.length&&(v.data.children.forEach(g=>{var S;return(S=c.value)==null?void 0:S.remove(g)}),d(),o(v.data),r("clear"))}function w(){d(),r("moved")}const h=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:n},{name:"delete",type:"danger",icon:"el-icon-delete",handler:p},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:y}];function C(v){return h.filter(b=>x(v,b.name))}function x(v,b){const{disabledActions:g,isContainer:S}=i(v.name)??{},$=!(g!=null&&g.includes(b));return b==="clear"?S&&$:$}return(v,b)=>{const g=V("el-link");return k(),E(f(dt),{ref_key:"treeRef",ref:c,class:"component-tree","node-key":"id",data:u.value,"default-expand-all":"",draggable:"","expand-on-click-node":!1,"allow-drop":s,onNodeClick:m,onNodeDrop:w},{default:D(({node:S,data:$})=>{var P,W;return[N("div",{class:"tree-item",onMouseover:H=>e.value=$||{},onMouseleave:b[0]||(b[0]=H=>e.value={})},[N("div",qt,le(((P=$.props)==null?void 0:P.label)||((W=f(i)($.name))==null?void 0:W.title)),1),N("div",Gt,[(k(!0),R(M,null,F(C($),H=>(k(),E(g,Q({key:H.name,underline:!1},H,{onClick:X(J=>H.handler(S),["stop"])}),null,16,["onClick"]))),128))])],40,Nt)]}),_:1},8,["data"])}}}),Jt={init:"初始化",added:"添加组件",moved:"移动组件",removed:"删除组件",property:"修改属性",clear:"清空子组件"},Ml={copy:"复制",delete:"删除",clear:"清空"},Qt={class:"history-list"},Xt=["onClick"],Yt=I({__name:"history",setup(l){const{historyList:a,historyIndex:t,restoreHistory:e}=z(),o=Ee("history-show-source",!1),r={renderValidationDecorations:"off",readOnly:!0},i=U(()=>document.documentElement.className.includes("dark")?"vs-dark":"light");return(u,s)=>{const c=V("el-switch"),m=V("el-tooltip");return k(),R("div",Qt,[G(" 显示源码："),_(c,{modelValue:f(o),"onUpdate:modelValue":s[0]||(s[0]=d=>B(o)?o.value=d:null)},null,8,["modelValue"]),(k(!0),R(M,null,F(f(a),(d,n)=>(k(),E(m,{key:d.timestamp,disabled:!f(o),effect:"light",placement:"right"},{content:D(()=>[_(f(nt),{original:f(pe)(f(a)[n-1]),modified:f(pe)(d),theme:i.value,options:r,language:"javascript",width:"800px",height:"600px"},null,8,["original","modified","theme"])]),default:D(()=>[N("div",{class:oe(["history-item",{"is-active":n===f(t)}]),onClick:p=>f(e)(n)},[N("span",null,le(f(Jt)[d.type]),1),N("span",null,le(new Date(d.timestamp).toLocaleString()),1)],10,Xt)]),_:2},1032,["disabled"]))),128))])}}}),Zt=I({__name:"index",setup(l){const a=[{title:"组件",icon:"el-icon-menu",component:Ft},{title:"大纲",icon:"el-icon-operation",component:Kt},{title:"历史",icon:"el-icon-clock",component:Yt}];return(t,e)=>{const o=V("el-link"),r=V("el-tab-pane"),i=V("el-tabs");return k(),E(i,{"tab-position":"top",stretch:""},{default:D(()=>[(k(),R(M,null,F(a,u=>_(r,{key:u.title},{label:D(()=>[_(o,{title:u.title,icon:u.icon,underline:!1,style:{color:"inherit"}},null,8,["title","icon"])]),default:D(()=>[(k(),E(Se(u.component)))]),_:2},1024)),64))]),_:1})}}}),el={class:"item-actions"},xe=I({__name:"design",props:{list:{},componentData:{}},emits:["update:active","update:list"],setup(l,{emit:a}){const t=l,{list:e}=K(t,a,{passive:!0,deep:!0}),{activeElement:o,hoverElement:r,formOption:i,setActiveElement:u,recordHistory:s,getResource:c}=z();function m(b){const g={...A(i.value),span:24,menuBtn:!1},{designOption:S}=c(b.name)??{};if(typeof S=="object")return{...g,...S};if(typeof S=="function")return{...g,...S(b)};{const $=[];return b.props&&$.push({...ct(b.props,mt),span:24}),{...g,column:$}}}function d(b){var g,S;return(g=c(b.name))!=null&&g.isContainer?24:((S=b.props)==null?void 0:S.span)||i.value.span||24}function n(b){var S;const g=Object.keys(b)[0];g&&(u((S=b[g])==null?void 0:S.element),s(g))}function p(b){const g=he(b);e.value.push(g),u(g),s("added")}function y(b,g){e.value.splice(g,1),u(e.value[g]??e.value[g-1]),s("removed")}function w(b){var g;(g=b.children)!=null&&g.length&&(b.children=[],u(b),s("clear"))}function h({draggedContext:b,relatedContext:g}){var S;return de(c(b.element.name),c((S=g.component.componentData)==null?void 0:S.name))}const C=[{name:"copy",type:"primary",icon:"el-icon-copy-document",handler:p},{name:"delete",type:"danger",icon:"el-icon-delete",handler:y},{name:"clear",type:"warning",icon:"el-icon-folder-delete",handler:w}];function x(b){return C.filter(g=>v(b,g.name))}function v(b,g){const{disabledActions:S,isContainer:$}=c(b.name)??{},P=!(S!=null&&S.includes(g));return g==="clear"?$&&P:P}return(b,g)=>{const S=V("avue-form"),$=V("el-button"),P=V("el-col");return k(),E(f(we),{list:f(e),class:oe(["el-row draggable-list",{"is-empty":!f(e).length,"is-root":b.componentData.isRoot}]),group:{name:"components"},"component-data":b.componentData,"item-key":"id",move:h,onChange:n},{item:D(({element:W,index:H})=>[_(P,{class:oe(["draggable-item",{"is-active":f(o).id===W.id,"is-hover":f(r).name&&f(r).id===W.id}]),span:d(W),onClick:X(J=>f(u)(W),["stop"]),onMouseover:X(J=>r.value=W||{},["stop"]),onMouseleave:g[0]||(g[0]=X(J=>r.value={},["stop"]))},{default:D(()=>{var J;return[W.name!=="form"?(k(),E(S,{key:0,option:m(W)},null,8,["option"])):re("",!0),(J=f(c)(W.name))!=null&&J.isContainer?(k(),E(xe,{key:1,class:"is-container","component-data":W,list:W.children??[],"onUpdate:list":Z=>W.children=Z},null,8,["component-data","list","onUpdate:list"])):re("",!0),ye(N("div",el,[(k(!0),R(M,null,F(x(W),Z=>(k(),E($,Q({key:Z.name},Z,{circle:"",plain:"",onClick:X(rl=>Z.handler(W,H),["stop"])}),null,16,["onClick"]))),128))],512),[[ge,f(o).id===W.id]])]}),_:2},1032,["class","span","onClick","onMouseover"])]),_:1},8,["list","class","component-data"])}}}),tl=I({setup(){const{proxy:l}=Le(),{modelValue:a}=z(),t=L({}),e=L({}),o=U(()=>rt.bind(l)(pe(a.value))),r=L();function i(u,s){console.log(u),s==null||s()}return{form:t,defaults:e,option:o,formRef:r,onSubmit:i}},render(){return Oe(V("avue-form"),{ref:"formRef",modelValue:this.form,option:this.option,defaults:this.defaults,"onUpdate:modelValue":l=>this.form=l,"onUpdate:defaults":l=>this.defaults=l,onSubmit:this.onSubmit})}}),ll=I({__name:"source",setup(l){const{modelValue:a,setActiveElement:t}=z();return(e,o)=>(k(),E(f(O),{modelValue:f(a),"onUpdate:modelValue":[o[0]||(o[0]=r=>B(a)?a.value=r:null),o[1]||(o[1]=r=>f(t)())],"value-type":"object"},null,8,["modelValue"]))}}),ol=I({__name:"index",setup(l){const{elementTree:a,workType:t,setActiveElement:e}=z();return(o,r)=>f(t)==="preview"?(k(),E(tl,{key:0})):f(t)==="source"?(k(),E(ll,{key:1})):(k(),E(xe,{key:2,"component-data":f(a),list:f(a).children??[],"onUpdate:list":r[0]||(r[0]=i=>f(a).children=i),onClick:r[1]||(r[1]=X(i=>f(e)(),["stop"]))},null,8,["component-data","list"]))}}),al=I({__name:"index",setup(l){const a=z(),{elementTree:t,activeElement:e,baseOption:o,advanceOption:r,resolveSettings:i,recordHistory:u,getResource:s}=a,c=L(!1),m=L(""),d=L(0),n=L({}),p=L({labelPosition:"left",labelWidth:100,menuBtn:!1,span:24,tabs:!0,group:[]});q(()=>e.value.id,async()=>{c.value=!0,d.value=0,await ve();const{settings:h,disabledSettings:C}=s(e.value.name)??{},x={label:"基础",prop:"base",column:o.value},v={label:"属性",prop:"component",column:i(h)},b={label:"高级",prop:"advance",column:r.value},g=[x,v,b].filter(S=>!(C!=null&&C.includes(S.prop)));p.value.group=g,m.value=g[0].prop,n.value=A(e.value.props),c.value=!1},{immediate:!0});const y=bt(()=>u("property"),1e3);We(n,h=>{const C=ie(h,[void 0,null,""],["$"]);if(e.value.isRoot)be(t.value,"props",C);else{const x=w(t.value,e.value.id)??[];x.length&&!Ve(C,ft(t.value,x.concat("props")))&&be(t.value,x.concat("props"),C)}d.value&&y(),d.value++},{deep:!0,debounce:100});function w(h,C){if(h.id===C)return[];if(h.children)for(const x in h.children){const v=w(h.children[x],C);if(v)return["children",x].concat(v)}}return(h,C)=>{const x=V("avue-form");return c.value?re("",!0):(k(),E(x,{key:0,modelValue:n.value,"onUpdate:modelValue":C[0]||(C[0]=v=>n.value=v),class:"settings-form",option:p.value},null,8,["modelValue","option"]))}}}),nl=I({__name:"index",setup(l){const{elementTree:a,workType:t,deviceType:e,historyList:o,historyIndex:r,restoreHistory:i,resetHistory:u}=z(),s=[{label:"PC端",value:"pc",icon:"el-icon-monitor"},{label:"移动端",value:"mobile",icon:"el-icon-cellphone"}],c=[{label:"设计",value:"design",icon:"el-icon-brush"},{label:"源码",value:"source",icon:"el-icon-more"},{label:"预览",value:"preview",icon:"el-icon-view"}];return(m,d)=>{const n=V("el-button"),p=V("el-button-group"),y=V("el-col"),w=V("el-link"),h=V("el-radio-button"),C=V("el-radio-group"),x=V("el-row");return k(),E(x,{gutter:20},{default:D(()=>[_(y,{span:8,style:{"align-self":"center"}},{default:D(()=>[_(p,{size:"small"},{default:D(()=>{var v;return[_(n,{disabled:f(r)===0,title:"撤回",icon:"el-icon-arrow-left",onClick:d[0]||(d[0]=b=>f(i)(f(r)-1))},null,8,["disabled"]),_(n,{disabled:f(r)===f(o).length-1,title:"重做",icon:"el-icon-arrow-right",onClick:d[1]||(d[1]=b=>f(i)(f(r)+1))},null,8,["disabled"]),_(n,{disabled:!((v=f(a).children)!=null&&v.length),title:"清空",icon:"el-icon-delete",onClick:d[2]||(d[2]=b=>f(u)())},null,8,["disabled"])]}),_:1})]),_:1}),_(y,{span:8,style:{"text-align":"center"}},{default:D(()=>[_(C,{modelValue:f(e),"onUpdate:modelValue":d[3]||(d[3]=v=>B(e)?e.value=v:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(k(),R(M,null,F(s,v=>_(h,{key:v.value,label:v.value},{default:D(()=>[_(w,{title:v.label,icon:v.icon,underline:!1,style:{color:"inherit"},onClick:b=>e.value=v.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),_(y,{span:8,style:{"text-align":"right"}},{default:D(()=>[_(C,{modelValue:f(t),"onUpdate:modelValue":d[4]||(d[4]=v=>B(t)?t.value=v:null),size:"small",style:{"font-size":"unset"}},{default:D(()=>[(k(),R(M,null,F(c,v=>_(h,{key:v.value,label:v.value},{default:D(()=>[_(w,{title:v.label,icon:v.icon,underline:!1,style:{color:"inherit"},onClick:b=>t.value=v.value},null,8,["title","icon","onClick"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),jl=I({__name:"index",props:{modelValue:{},groupList:{},resources:{},baseOption:{},advanceOption:{},leftWidth:{},rightWidth:{},adapterIn:{type:Function,default:se},adapterOut:{type:Function,default:ke}},emits:["reset"],setup(l,{emit:a}){const t=l,{workType:e,deviceType:o}=ht(t,a);return(r,i)=>{const u=V("el-aside"),s=V("el-header"),c=V("el-main"),m=V("el-container");return k(),E(m,{class:"form-design"},{default:D(()=>[_(u,{class:"left-panel",width:r.leftWidth},{default:D(()=>[_(Zt)]),_:1},8,["width"]),_(m,null,{default:D(()=>[_(s,{class:"main-header",height:"auto"},{default:D(()=>[_(nl)]),_:1}),_(c,{class:"main-workspace"},{default:D(()=>[_(ol,{class:oe(`device-${f(o)}`)},null,8,["class"])]),_:1})]),_:1}),ye(_(u,{class:"right-panel",width:r.rightWidth},{default:D(()=>[_(al)]),_:1},8,["width"]),[[ge,f(e)=="design"]])]),_:1})}}});export{Vt as ControlSetter,Ml as DesignActionMap,Al as DicDataSetter,Hl as DicTreeSetter,O as EditorSetter,jl as FormDesign,Jt as HistoryTypeMap,wt as OnLoadSetter,kt as RulesSetter,T as SwitchSetter,xt as ValueSetter,se as adapterIn,ke as adapterOut,Dt as advance,Y as alignDic,Me as array,Ct as base,je as cascader,de as checkRules,ze as checkbox,me as cloneItem,St as color,he as copyItem,Be as date,He as daterange,Fe as dates,Ne as datetime,qe as datetimerange,Fl as dic,Ot as dynamic,ut as form,ce as getRandomId,Lt as group,Ie as groupList,Ge as icon,j as iconList,Ke as img,Et as input,rt as jsonParse,pe as jsonStringify,Je as month,Qe as monthrange,Wt as number,It as password,ue as placementDic,Pe as positionDic,Xe as radio,Rt as rate,Ye as select,Ae as sizeDic,Ut as slider,Pt as switch,At as table,Mt as textarea,Ze as time,et as timerange,jt as title,tt as tree,zt as upload,lt as url,ot as week,at as year};
