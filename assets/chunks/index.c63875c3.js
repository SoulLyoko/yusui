var ye=Object.defineProperty;var ve=(o,e,t)=>e in o?ye(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var T=(o,e,t)=>(ve(o,typeof e!="symbol"?e+"":e,t),t);import{a as fe,u as he}from"./index.861a3681.js";import{_ as oo,c as so,e as ao,f as no,g as lo,d as io,h as ro,j as co,i as uo,m as po,n as mo,p as yo,k as vo,s as fo,l as ho,o as go,b as bo,q as ko}from"./index.861a3681.js";import{g as ge,R as ie,l as U,u as be,p as ke,q as xe,r as oe,T as A,t as we,s as Ne,v as Te,w as Ee,x as _e,y as De,C as Me,M as Ve,D as Pe,z as Ce,A as Se,I as Fe}from"./data.3a7fc5d1.js";import{d as wo}from"./data.3a7fc5d1.js";import{S as Ie,N as Ge}from"./index.722b7181.js";import{B as To,C as Eo,t as _o,E as Do,d as Mo,e as Vo,f as Po,s as Co,G as So,r as Fo,p as Io,q as Go,n as Oo,o as Lo,g as Bo,h as qo,P as $o,a as Uo,l as Ro,m as Ao,j as Ko,k as jo,b as zo,c as Jo,U as Wo,i as Ho}from"./index.722b7181.js";import{a as Oe}from"./index.11c61ab2.js";import{i as H,u as Le}from"./zipWith.3aba0508.js";import{o as Q}from"./omitBy.3ba6179f.js";import{d as se}from"./theme.01a3663e.js";import{E as K,z as ae,d as re,h as Be,A as qe,J as E,o as S,b as B,w as F,r as j,N as $,a as $e,l as N,B as q,k as Ue,j as Re,c as Ae,ak as Ke}from"./framework.a13ec59b.js";import{a as je}from"./index.f1ae53c3.js";import"./Uint8Array.9b4f3e17.js";import"./cloneDeep.0addb388.js";import"./initCloneObject.bffa9b07.js";import"./getTag.bbaab4d0.js";import"./set.f28c7d85.js";import"./merge.cdc37a6d.js";import"./basePickBy.d4166d32.js";import"./pickBy.7042e009.js";import"./get.8a71353d.js";import"./union.d42d3f09.js";import"./pick.d171649b.js";import"./snakeCase.460e73b5.js";import"./createCompounder.39cbc467.js";import"./isEqual.3088a5af.js";import"./kebabCase.99797389.js";import"./index.c3b49629.js";import"./index.349087e2.js";const ze=[{label:"开始",value:"start"},{label:"任务",value:"task"},{label:"结束",value:"end"}],Je=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],We=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],Ht=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:ze},{label:"类型",prop:"eventType",type:"select",dicData:Je},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:We},{label:"值",prop:"fieldValue"}]}}]}}],He=[{label:"创建",value:"create"},{label:"指派",value:"assignment"},{label:"完成",value:"complete"},{label:"删除",value:"delete"},{label:"更新",value:"update"},{label:"超时",value:"timeout"}],Qe=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],Xe=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],Qt=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:He},{label:"类型",prop:"eventType",type:"select",dicData:Qe},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:Xe},{label:"值",prop:"fieldValue"}]}}]}}],Xt=[{label:"",labelWidth:0,prop:"timeLimit",type:"dynamic",children:{column:[{label:"名称",prop:"name"},{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"}]},value:[]}];function ne(o,e){return o.map(t=>{const a=e.find(c=>c.buttonKey===t.buttonKey),{name:n,buttonKey:l,display:r,approval:u}=t;return{name:n,buttonKey:l,display:r,approval:u,...a}})}function z(o,e){return o.map(t=>{var g,b;const a=e.find(m=>m.prop===t.prop),{label:n,prop:l,display:r=!0,disabled:u=!1,detail:i=!1,readonly:c=!1,rules:d}=t,f=(d==null?void 0:d.some(m=>m.required))??!1,x={label:n,prop:l,display:r,disabled:u,detail:i,readonly:c,required:f,...a};return t.type==="dynamic"&&((b=(g=t.children)==null?void 0:g.column)!=null&&b.length)&&(x.children=z(t.children.column,(a==null?void 0:a.children)??[])),x})}function le(o,e){return{...o,...e,plugins:[...(o==null?void 0:o.plugins)??[],...(e==null?void 0:e.plugins)??[]]}}function Ye({lf:o,graphData:e,elementData:t,formData:a,formLoading:n,formOption:l,formOptions:r,editorVisible:u,dataOptions:i,formRef:c,formDefaults:d}){var g,b,m,w,_,D,M,V,P;async function f({data:p,isForce:h}={data:{},isForce:!1}){var k,s,v,I,G,O,L;const y=(k=o.value)==null?void 0:k.graphModel.nodes.find(R=>R.type==="process");!p&&(y!=null&&y.id)&&(p=(s=o.value)==null?void 0:s.getNodeDataById(y.id)),!((p==null?void 0:p.id)===((v=t.value)==null?void 0:v.id)&&(p==null?void 0:p.type)===((I=t.value)==null?void 0:I.type)&&!h)&&(p.type!=="process"&&((G=o.value)==null||G.selectElementById(p.id)),n.value=!0,await K(),t.value=p,l.value={menuBtn:!1,span:24,labelPosition:"left",group:((O=r.value)==null?void 0:O[p.type])??fe},a.value={...p.properties,id:p.id,name:((L=p.text)==null?void 0:L.value)||""},n.value=!1,await K(),x())}async function x(){var I,G,O,L,R,X,Y;const{formPropertyList:p,buttonList:h,fieldsDic:y,flowButtonDisplayDic:k,flowButtonApprovalDic:s}=i.value??{},v=C=>{var Z,ee;return(ee=(Z=l.value)==null?void 0:Z.group)==null?void 0:ee.some(de=>{var te;return(te=de.column)==null?void 0:te.some(me=>me.prop===C)})};v("button")&&(a.value.button=ne(h||[],((I=a.value)==null?void 0:I.button)||[]),(L=(O=(G=d.value)==null?void 0:G.button.children)==null?void 0:O.column)==null||L.forEach(C=>{C.prop==="display"&&(C.dicData=k),C.prop==="approval"&&(C.dicData=s)})),v("formProperty")&&(a.value.formProperty=z(p||[],((R=a.value)==null?void 0:R.formProperty)||[])),v("priority")&&((X=c.value)==null||X.updateDic("priority",y)),v("formTitle")&&((Y=c.value)==null||Y.updateDic("formTitle",y))}(g=o.value)==null||g.on("element:click",f),(b=o.value)==null||b.on("blank:click",f),(m=o.value)==null||m.on("node:add",f),(w=o.value)==null||w.on("node:dnd-add",f),(_=o.value)==null||_.on("node:delete",()=>f()),(D=o.value)==null||D.on("history:change",()=>{var p;e.value=(p=o.value)==null?void 0:p.getGraphData()}),(M=o.value)==null||M.on("custom:edit-click",()=>{u.value=!0}),(V=o.value)==null||V.on("custom:reset-form-property",()=>{var p,h;(h=(p=e.value)==null?void 0:p.flowElementList)==null||h.forEach(y=>{var k,s;(k=y.properties)!=null&&k.formProperty&&(y.properties.formProperty=z(((s=i.value)==null?void 0:s.formPropertyList)||[],[]))}),e.value={...e.value}}),(P=o.value)==null||P.on("custom:reset-button",()=>{var p,h;(h=(p=e.value)==null?void 0:p.flowElementList)==null||h.forEach(y=>{var k,s;(k=y.properties)!=null&&k.button&&(y.properties.button=ne(((s=i.value)==null?void 0:s.buttonList)||[],[]))}),e.value={...e.value}})}const Ze=ie.model,et=ie.view;class tt extends Ze{createId(){return`Note_${ge()}`}initNodeData(e){super.initNodeData(e),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const e=super.getNodeStyle();return e.strokeDasharray="3 3",e.fill="transparent",e}}class ot extends et{}const st={type:"note",model:tt,view:ot};class at extends U.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class nt extends U.HtmlNode{}const lt={type:"process",model:at,view:nt};class J{constructor({lf:e}){e.definition={},e.useDefinition=be(e.definition),e.register(lt),new Ie({lf:e}),e.register({...ke(e),type:"startEvent"}),e.register({...xe(e),type:"endEvent"}),e.register(oe("exclusiveGateway",Te)),e.register(oe("parallelGateway",Ee)),e.register(A("userTask",_e)),e.register(A("serviceTask",De)),e.register(A("circulateTask",[U.h("path",{d:we,fill:"none",stroke:"black",transform:"scale(30)"})])),e.register({...Ne(),type:"sequenceFlow"}),e.register(st),e.register(Ge),e.setDefaultEdgeType("sequenceFlow")}}T(J,"pluginName","BpmnElements");class it extends Me{constructor({lf:e}){super({lf:e}),[{key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>e.clearData()},{key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>e.emit("custom:edit-click",{})},{key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:a,show:n,hide:l}=e.extension.miniMap??{};a?l():n()}},{key:"reset",iconClass:"lf-control-reset",title:"重置",text:"重置",onClick:()=>{Oe.confirm("选择重置的配置","提示",{confirmButtonText:"重置表单配置",cancelButtonText:"重置按钮配置"}).then(()=>{e.emit("custom:reset-form-property",{})}).catch(()=>{e.emit("custom:reset-button",{})})}}].forEach(a=>this.addItem(a))}}class Yt{}class rt extends Ve{constructor({lf:e}){super({lf:e});const t={text:"复制",icon:!0,className:"lf-menu-copy",callback:s=>e.cloneNode(s.id)},a={text:"删除",icon:!0,className:"lf-menu-delete",callback:s=>{e.deleteNode(s.id),e.deleteEdge(s.id)}},n={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:s=>e.graphModel.editText(s.id)},l={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:s=>e.updateText(s.id,"")},r={text:"框选",icon:!0,className:"lf-menu-select",callback(){e.openSelectionSelect(),e.once("selection:selected",e.closeSelectionSelect)}},u={text:"清空",icon:!0,className:"lf-menu-clear",callback:()=>e.clearData()},i={text:"",icon:!0,className:"lf-menu-back",callback:s=>this.changeMenuList(s,k.nodeMenu)},c={text:"添加",icon:!0,className:"lf-menu-add",callback:s=>{let v=[];switch(s.type){case"startEvent":case"userTask":case"exclusiveGateway":case"parallelGateway":case"circulateTask":v=[i,d,f,x,b,m,g,w];break;case"endEvent":case"sequenceFlow":case"group":case"serviceTask":v=[i,w];break;default:v=[i]}this.changeMenuList(s,v)}},d={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:s=>this.addNode(s,{type:"userTask",x:s.x+200,y:s.y})},f={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:s=>this.addNode(s,{type:"serviceTask",x:s.x+200,y:s.y})},x={text:"传阅任务",icon:!0,className:"lf-menu-circulate-task",callback:s=>this.addNode(s,{type:"circulateTask",x:s.x+200,y:s.y})},g={text:"结束",icon:!0,className:"lf-menu-end-event",callback:s=>this.addNode(s,{type:"endEvent",x:s.x+150,y:s.y})},b={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:s=>this.addNode(s,{type:"exclusiveGateway",x:s.x+150,y:s.y})},m={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:s=>this.addNode(s,{type:"parallelGateway",x:s.x+150,y:s.y})},w={text:"注释",icon:!0,className:"lf-menu-note",callback:s=>this.addNode(s,{type:"note",x:s.x,y:s.y-150})},_={text:"切换类型",icon:!0,className:"lf-menu-switch",callback:s=>{let v=[];switch(s.type){case"startEvent":v=[i,M];break;case"endEvent":v=[i,D];break;case"exclusiveGateway":v=[i,V];break;case"parallelGateway":v=[i,P];break;case"userTask":v=[i,h,y];break;case"serviceTask":v=[i,p,y];break;case"circulateTask":v=[i,p,h];break;default:v=[i]}this.changeMenuList(s,v)}},D={text:"开始",icon:!0,className:"lf-menu-start-event",callback:s=>this.changeNodeType(s,"startEvent")},M={text:"结束",icon:!0,className:"lf-menu-end-event",callback:s=>this.changeNodeType(s,"endEvent")},V={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:s=>this.changeNodeType(s,"parallelGateway")},P={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:s=>this.changeNodeType(s,"exclusiveGateway")},p={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:s=>this.changeNodeType(s,"userTask")},h={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:s=>this.changeNodeType(s,"serviceTask")},y={text:"传阅任务",icon:!0,className:"lf-menu-circulate-task",callback:s=>this.changeNodeType(s,"circulateTask")},k={nodeMenu:[c,t,a,_,n,l],edgeMenu:[a,n,l],graphMenu:[r,u]};this.setMenuConfig(k)}changeMenuList(e,t){setTimeout(()=>{this.__currentData=e;const{left:a,top:n}=this.__menuDOM.style;this.showMenu(a,n,t)})}addNode(e,t){const a=this.lf.addNode(t),n=["serviceTask","note"].includes(t.type);this.lf.addEdge({type:n?"noteFlow":void 0,sourceNodeId:e.id,targetNodeId:a.id})}changeNodeType(e,t){this.lf.changeNodeType(e.id,t),Object.keys(e.properties||{}).forEach(a=>this.lf.deleteProperty(e.id,a)),this.lf.emit("element:click",{data:{...e,type:t,properties:{}}})}}class ct extends Pe{constructor({lf:e}){super({lf:e}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){e.openSelectionSelect(),e.once("selection:selected",e.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"circulateTask",label:"传阅任务",icon:"https://api.iconify.design/bpmn/manual-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}class ce{constructor({lf:e}){T(this,"lf");this.lf=e}setStyles(e){e.forEach(({id:t,style:a})=>{var n,l;t&&((l=(n=this.lf)==null?void 0:n.graphModel)==null||l.updateAttributes(t,{style:a}))})}}T(ce,"pluginName","styles");class ue{constructor({lf:e}){T(this,"lf");T(this,"container");T(this,"__tooltipDOM");T(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltips",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=e}render(e,t){this.container=t,t.appendChild(this.__tooltipDOM),e.on("node:mouseenter,edge:mouseenter",({data:a,e:n})=>{var c;const l=(c=this.__tooltips.find(d=>d.id===a.id))==null?void 0:c.content;if(!l)return;this.__tooltipDOM.innerHTML=l;const r=e.getPointByClient(n.x,n.y),{domOverlayPosition:{x:u,y:i}}=r;this.__tooltipDOM.style.top=`${i+10}px`,this.__tooltipDOM.style.left=`${u+10}px`,this.__tooltipDOM.style.display="block"}),e.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(e){this.__tooltips=e}}T(ue,"pluginName","tooltips");const pe={type:"process",key:"Process",properties:{}};function ut(o){const{id:e,type:t,x:a,y:n,properties:l,children:r,text:u}=o;return{incoming:[],outgoing:[],children:r,type:t,key:e,groupKey:l==null?void 0:l.groupKey,properties:{...l,name:H(u)?u:(u==null?void 0:u.value)??"",x:a,y:n,text:u}}}function pt(o){const{id:e,type:t,sourceNodeId:a,targetNodeId:n,startPoint:l,endPoint:r,pointsList:u,properties:i,text:c}=o;return{incoming:[a],outgoing:[n],type:t,key:e,groupKey:i==null?void 0:i.groupKey,properties:{...i,name:H(c)?c:(c==null?void 0:c.value)??"",text:c,startPoint:l,endPoint:r,pointsList:u}}}function dt(o){const{id:e,type:t,properties:a,text:n}=o;return{type:t,key:e,properties:{...a,name:H(n)?n:(n==null?void 0:n.value)??""}}}function mt(o){const e=new Map,t={processData:pe,flowElementList:[]};return o.nodes.forEach(a=>{var n;if(a.type==="process")t.processData=dt(a);else{const l=ut(a);(n=t.flowElementList)==null||n.push(l),e.set(a.id,l)}}),o.edges.forEach(a=>{var u;const n=pt(a);e.get(a.sourceNodeId).outgoing.push(n.key),e.get(a.targetNodeId).incoming.push(n.key),(u=t.flowElementList)==null||u.push(n)}),t}function yt(o){const{incoming:e,outgoing:t,properties:a,key:n,type:l}=o,{text:r,name:u,startPoint:i,endPoint:c,pointsList:d}=a??{},f={id:n,type:l,sourceNodeId:(e==null?void 0:e[0])??"",targetNodeId:(t==null?void 0:t[0])??"",text:r||u,startPoint:i,endPoint:c,pointsList:d,properties:{}},x=["startPoint","endPoint","pointsList","text"];return f.properties=Q(a,x),f}function vt(o){const{properties:e,key:t,type:a,children:n}=o,{x:l,y:r,text:u,name:i}=e??{},c={id:t,type:a??"",x:l,y:r,text:u||i,children:n,properties:{}},d=["x","y","text"];return c.properties=Q(e,d),c}function ft(o){const{properties:e,key:t,type:a}=o,{name:n}=e??{},l={id:t,type:a??"",text:n,x:0,y:0},r=["x","y","text"];return l.properties=Q(e,r),l}function ht(o){const{flowElementList:e}=o,t=r=>["sequenceFlow","noteFlow"].includes(r),a=(e==null?void 0:e.filter(r=>!t(r.type)).map(vt))??[],n=(e==null?void 0:e.filter(r=>t(r.type)).map(yt))??[];return a.unshift(ft(o.processData??pe)),{nodes:a,edges:n}}class W{constructor({lf:e}){e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut}adapterOut(e){return mt(e)}adapterIn(e){return ht(e)}}T(W,"pluginName","turboAdapter");function gt({props:o,state:e}){const{lf:t,graphData:a}=e;function n(r){var i;const u=le({container:r,grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[it,ct,Ce,rt,Se,Fe,J,W],edgeGenerator:(c,d)=>{if(["note","serviceTask"].includes(d.type))return"noteFlow"}},o.initOptions);t.value=new U.LogicFlow(u),(i=t.value)==null||i.setTheme(se),Ye(e),ae(a,c=>{var g,b,m;const d=JSON.stringify(c),f=JSON.stringify((g=t.value)==null?void 0:g.getGraphData());d!==f&&((b=t.value)==null||b.render(c),(m=t.value)==null||m.emit("element:click",{isForce:!0}))},{immediate:!0})}function l(r){var i;const u=le({container:r,grid:{type:"dot",size:10},isSilentMode:!0,plugins:[J,W,ue,ce]},o.initOptions);t.value=new U.LogicFlow(u),(i=t.value)==null||i.setTheme(se),ae(()=>[a.value,o.styles,o.tooltips],async()=>{var c,d,f,x,g,b,m;(c=t.value)==null||c.render(a.value),await K(),(x=(f=(d=t.value)==null?void 0:d.extension)==null?void 0:f.styles)==null||x.setStyles(o.styles??[]),(m=(b=(g=t.value)==null?void 0:g.extension)==null?void 0:b.tooltips)==null||m.setTooltips(o.tooltips??[])},{immediate:!0})}return{initViewer:l,initModeler:n}}const bt=Ue("span",null,"编辑JSON",-1),kt=re({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(o,{emit:e}){const a=je(o),{modelValue:n,visible:l}=a,r=Be("");function u(){const i=JSON.parse(r.value);n.value=i,e("confirm",i),l.value=!1}return qe(()=>{r.value=JSON.stringify(n.value,null,2)}),(i,c)=>{const d=E("el-input"),f=E("el-button"),x=E("el-drawer");return S(),B(x,{modelValue:N(l),"onUpdate:modelValue":c[1]||(c[1]=g=>q(l)?l.value=g:null)},{header:F(()=>[bt,j(i.$slots,"header")]),default:F(()=>[$(d,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=g=>r.value=g),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"]),$(f,{class:"flow-editor__confirm-btn",type:"primary",onClick:u},{default:F(()=>[$e(" 确定 ")]),_:1})]),_:3},8,["modelValue"])}}}),xt=["id"],Zt=re({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},dataOptions:{},type:{},styles:{},tooltips:{}},setup(o){const e=o,t=he(e),{lf:a,graphData:n,formRef:l,formData:r,formOption:u,formDefaults:i,formLoading:c,editorVisible:d,onUpdateFormData:f}=t,{initModeler:x,initViewer:g}=gt({props:e,state:t}),b=Le("logicflow-container");return Re(()=>{const m=document.querySelector(`#${b}`);e.type==="viewer"?g(m):x(m)}),(m,w)=>{const _=E("el-main"),D=E("el-empty"),M=E("el-skeleton"),V=E("avue-form"),P=E("el-aside"),p=E("el-container");return m.type==="viewer"?(S(),Ae("div",{key:0,id:N(b),class:"lf-container"},null,8,xt)):(S(),B(p,{key:1,class:"lf-container"},{default:F(()=>[$(_,{id:N(b),class:"lf-main"},null,8,["id"]),$(P,{width:m.formWidth,class:"lf-aside"},{default:F(()=>{var h,y;return[j(m.$slots,"form-top"),(y=(h=N(u))==null?void 0:h.group)!=null&&y.length?N(c)?(S(),B(M,{key:1})):(S(),B(V,{key:2,ref_key:"formRef",ref:l,modelValue:N(r),"onUpdate:modelValue":[w[0]||(w[0]=k=>q(r)?r.value=k:null),N(f)],defaults:N(i),"onUpdate:defaults":w[1]||(w[1]=k=>q(i)?i.value=k:null),option:N(u)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(S(),B(D,{key:0,description:"选择元素以编辑数据"}))]}),_:3},8,["width"]),$(kt,{modelValue:N(n),"onUpdate:modelValue":w[2]||(w[2]=h=>q(n)?n.value=h:null),visible:N(d),"onUpdate:visible":w[3]||(w[3]=h=>q(d)?d.value=h:null),onConfirm:w[4]||(w[4]=h=>{var y;return(y=N(a))==null?void 0:y.render(h)})},Ke({_:2},[m.$slots["editor-header"]?{name:"header",fn:F(()=>[j(m.$slots,"editor-header")]),key:"0"}:void 0]),1032,["modelValue","visible"])]),_:3}))}}});export{J as BpmnElements,To as BpmnExtend,Eo as CirculateTaskModel,_o as CirculateTaskView,it as Control,Yt as Dagre,Do as EndEventModel,Mo as EndEventView,Vo as ExclusiveGatewayModel,Po as ExclusiveGatewayView,Zt as FlowDesign,oo as FlowNodeSelect,Co as Group,So as GroupModel,Fo as GroupView,rt as Menu,Io as NoteFlowModel,Go as NoteFlowView,Oo as NoteModel,Lo as NoteView,ct as Panel,Bo as ParallelGatewayModel,qo as ParallelGatewayView,$o as ProcessModel,Uo as ProcessView,Ro as SequenceFlowModel,Ao as SequenceFlowView,Ko as ServiceTaskModel,jo as ServiceTaskView,zo as StartEventModel,Jo as StartEventView,ce as Styles,ue as Tooltips,W as TurboAdapter,Wo as UserTaskModel,Ho as UserTaskView,so as assigneeColumn,ao as baseColumn,no as buttonColumn,lo as circulateColumn,wo as defaultGraphData,fe as defaultGroup,io as defaultOptions,se as defaultTheme,Ht as executionListenerColumn,ro as formPropertyColumn,co as gatewayColumn,uo as injectionKey,ne as mergeButton,z as mergeFormProperty,le as mergeInitOptions,po as multiInstanceColumn,mo as noteColumn,yo as processColumn,vo as propertyColumn,fo as sequenceFlowColumn,ho as serialColumn,go as serviceTaskColumn,Qt as taskListenerColumn,Xt as timeLimitColumn,ht as toLogicflowData,mt as toTurboData,gt as useInit,bo as useInjectState,Ye as useModelerListener,he as useProvideState,ko as userTaskColumn};
