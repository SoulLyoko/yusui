var jT=Object.defineProperty;var NT=(e,u,a)=>u in e?jT(e,u,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[u]=a;var r_=(e,u,a)=>(NT(e,typeof u!="symbol"?u+"":u,a),a);import{g as Vi,I as MT}from"./data.4cb21f02.js";import{aj as Ea}from"../composables_use-crud_index.md.79b7ceb4.js";var Bg={exports:{}};(function(e,u){(function(a,f){e.exports=f()})(window,function(){return function(a){var f={};function o(p){if(f[p])return f[p].exports;var d=f[p]={i:p,l:!1,exports:{}};return a[p].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=a,o.c=f,o.d=function(p,d,y){o.o(p,d)||Object.defineProperty(p,d,{enumerable:!0,get:y})},o.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},o.t=function(p,d){if(1&d&&(p=o(p)),8&d||4&d&&typeof p=="object"&&p&&p.__esModule)return p;var y=Object.create(null);if(o.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:p}),2&d&&typeof p!="string")for(var g in p)o.d(y,g,function(E){return p[E]}.bind(null,g));return y},o.n=function(p){var d=p&&p.__esModule?function(){return p.default}:function(){return p};return o.d(d,"a",d),d},o.o=function(p,d){return Object.prototype.hasOwnProperty.call(p,d)},o.p="",o(o.s=215)}([function(a,f,o){o.d(f,"a",function(){return ce}),o.d(f,"b",function(){return xe}),o.d(f,"c",function(){return xt}),o.d(f,"d",function(){return nr}),o.d(f,"e",function(){return G}),o.d(f,"f",function(){return de}),o.d(f,"g",function(){return G}),o.d(f,"h",function(){return bt}),o.d(f,"i",function(){return d}),o.d(f,"j",function(){return Wt}),o.d(f,"k",function(){return q});var p,d,y,g,E,_,T,P={},A=[],N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function M(ve,he){for(var Ce in he)ve[Ce]=he[Ce];return ve}function I(ve){var he=ve.parentNode;he&&he.removeChild(ve)}function G(ve,he,Ce){var ot,Tt,lt,rr={};for(lt in he)lt=="key"?ot=he[lt]:lt=="ref"?Tt=he[lt]:rr[lt]=he[lt];if(arguments.length>2&&(rr.children=arguments.length>3?p.call(arguments,2):Ce),typeof ve=="function"&&ve.defaultProps!=null)for(lt in ve.defaultProps)rr[lt]===void 0&&(rr[lt]=ve.defaultProps[lt]);return W(ve,rr,ot,Tt,null)}function W(ve,he,Ce,ot,Tt){var lt={type:ve,props:he,key:Ce,ref:ot,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Tt??++y};return Tt==null&&d.vnode!=null&&d.vnode(lt),lt}function de(){return{current:null}}function xe(ve){return ve.children}function ce(ve,he){this.props=ve,this.context=he}function ne(ve,he){if(he==null)return ve.__?ne(ve.__,ve.__.__k.indexOf(ve)+1):null;for(var Ce;he<ve.__k.length;he++)if((Ce=ve.__k[he])!=null&&Ce.__e!=null)return Ce.__e;return typeof ve.type=="function"?ne(ve):null}function ue(ve){var he,Ce;if((ve=ve.__)!=null&&ve.__c!=null){for(ve.__e=ve.__c.base=null,he=0;he<ve.__k.length;he++)if((Ce=ve.__k[he])!=null&&Ce.__e!=null){ve.__e=ve.__c.base=Ce.__e;break}return ue(ve)}}function $(ve){(!ve.__d&&(ve.__d=!0)&&g.push(ve)&&!B.__r++||_!==d.debounceRendering)&&((_=d.debounceRendering)||E)(B)}function B(){for(var ve;B.__r=g.length;)ve=g.sort(function(he,Ce){return he.__v.__b-Ce.__v.__b}),g=[],ve.some(function(he){var Ce,ot,Tt,lt,rr,pr;he.__d&&(rr=(lt=(Ce=he).__v).__e,(pr=Ce.__P)&&(ot=[],(Tt=M({},lt)).__v=lt.__v+1,Re(pr,lt,Tt,Ce.__n,pr.ownerSVGElement!==void 0,lt.__h!=null?[rr]:null,ot,rr??ne(lt),lt.__h),fe(ot,lt),lt.__e!=rr&&ue(lt)))})}function Y(ve,he,Ce,ot,Tt,lt,rr,pr,ar,Jt){var Ke,Xt,_e,Bt,_r,L,gr,Dr=ot&&ot.__k||A,Yr=Dr.length;for(Ce.__k=[],Ke=0;Ke<he.length;Ke++)if((Bt=Ce.__k[Ke]=(Bt=he[Ke])==null||typeof Bt=="boolean"?null:typeof Bt=="string"||typeof Bt=="number"||typeof Bt=="bigint"?W(null,Bt,null,null,Bt):Array.isArray(Bt)?W(xe,{children:Bt},null,null,null):Bt.__b>0?W(Bt.type,Bt.props,Bt.key,null,Bt.__v):Bt)!=null){if(Bt.__=Ce,Bt.__b=Ce.__b+1,(_e=Dr[Ke])===null||_e&&Bt.key==_e.key&&Bt.type===_e.type)Dr[Ke]=void 0;else for(Xt=0;Xt<Yr;Xt++){if((_e=Dr[Xt])&&Bt.key==_e.key&&Bt.type===_e.type){Dr[Xt]=void 0;break}_e=null}Re(ve,Bt,_e=_e||P,Tt,lt,rr,pr,ar,Jt),_r=Bt.__e,(Xt=Bt.ref)&&_e.ref!=Xt&&(gr||(gr=[]),_e.ref&&gr.push(_e.ref,null,Bt),gr.push(Xt,Bt.__c||_r,Bt)),_r!=null?(L==null&&(L=_r),typeof Bt.type=="function"&&Bt.__k===_e.__k?Bt.__d=ar=V(Bt,ar,ve):ar=Oe(ve,Bt,_e,Dr,_r,ar),typeof Ce.type=="function"&&(Ce.__d=ar)):ar&&_e.__e==ar&&ar.parentNode!=ve&&(ar=ne(_e))}for(Ce.__e=L,Ke=Yr;Ke--;)Dr[Ke]!=null&&(typeof Ce.type=="function"&&Dr[Ke].__e!=null&&Dr[Ke].__e==Ce.__d&&(Ce.__d=ne(ot,Ke+1)),ft(Dr[Ke],Dr[Ke]));if(gr)for(Ke=0;Ke<gr.length;Ke++)He(gr[Ke],gr[++Ke],gr[++Ke])}function V(ve,he,Ce){for(var ot,Tt=ve.__k,lt=0;Tt&&lt<Tt.length;lt++)(ot=Tt[lt])&&(ot.__=ve,he=typeof ot.type=="function"?V(ot,he,Ce):Oe(Ce,ot,ot,Tt,ot.__e,he));return he}function q(ve,he){return he=he||[],ve==null||typeof ve=="boolean"||(Array.isArray(ve)?ve.some(function(Ce){q(Ce,he)}):he.push(ve)),he}function Oe(ve,he,Ce,ot,Tt,lt){var rr,pr,ar;if(he.__d!==void 0)rr=he.__d,he.__d=void 0;else if(Ce==null||Tt!=lt||Tt.parentNode==null)e:if(lt==null||lt.parentNode!==ve)ve.appendChild(Tt),rr=null;else{for(pr=lt,ar=0;(pr=pr.nextSibling)&&ar<ot.length;ar+=2)if(pr==Tt)break e;ve.insertBefore(Tt,lt),rr=lt}return rr!==void 0?rr:Tt.nextSibling}function Ge(ve,he,Ce){he[0]==="-"?ve.setProperty(he,Ce):ve[he]=Ce==null?"":typeof Ce!="number"||N.test(he)?Ce:Ce+"px"}function ie(ve,he,Ce,ot,Tt){var lt;e:if(he==="style")if(typeof Ce=="string")ve.style.cssText=Ce;else{if(typeof ot=="string"&&(ve.style.cssText=ot=""),ot)for(he in ot)Ce&&he in Ce||Ge(ve.style,he,"");if(Ce)for(he in Ce)ot&&Ce[he]===ot[he]||Ge(ve.style,he,Ce[he])}else if(he[0]==="o"&&he[1]==="n")lt=he!==(he=he.replace(/Capture$/,"")),he=he.toLowerCase()in ve?he.toLowerCase().slice(2):he.slice(2),ve.l||(ve.l={}),ve.l[he+lt]=Ce,Ce?ot||ve.addEventListener(he,lt?Ne:se,lt):ve.removeEventListener(he,lt?Ne:se,lt);else if(he!=="dangerouslySetInnerHTML"){if(Tt)he=he.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(he!=="href"&&he!=="list"&&he!=="form"&&he!=="tabIndex"&&he!=="download"&&he in ve)try{ve[he]=Ce??"";break e}catch{}typeof Ce=="function"||(Ce!=null&&(Ce!==!1||he[0]==="a"&&he[1]==="r")?ve.setAttribute(he,Ce):ve.removeAttribute(he))}}function se(ve){this.l[ve.type+!1](d.event?d.event(ve):ve)}function Ne(ve){this.l[ve.type+!0](d.event?d.event(ve):ve)}function Re(ve,he,Ce,ot,Tt,lt,rr,pr,ar){var Jt,Ke,Xt,_e,Bt,_r,L,gr,Dr,Yr,Zr,ur=he.type;if(he.constructor!==void 0)return null;Ce.__h!=null&&(ar=Ce.__h,pr=he.__e=Ce.__e,he.__h=null,lt=[pr]),(Jt=d.__b)&&Jt(he);try{e:if(typeof ur=="function"){if(gr=he.props,Dr=(Jt=ur.contextType)&&ot[Jt.__c],Yr=Jt?Dr?Dr.props.value:Jt.__:ot,Ce.__c?L=(Ke=he.__c=Ce.__c).__=Ke.__E:("prototype"in ur&&ur.prototype.render?he.__c=Ke=new ur(gr,Yr):(he.__c=Ke=new ce(gr,Yr),Ke.constructor=ur,Ke.render=Pt),Dr&&Dr.sub(Ke),Ke.props=gr,Ke.state||(Ke.state={}),Ke.context=Yr,Ke.__n=ot,Xt=Ke.__d=!0,Ke.__h=[]),Ke.__s==null&&(Ke.__s=Ke.state),ur.getDerivedStateFromProps!=null&&(Ke.__s==Ke.state&&(Ke.__s=M({},Ke.__s)),M(Ke.__s,ur.getDerivedStateFromProps(gr,Ke.__s))),_e=Ke.props,Bt=Ke.state,Xt)ur.getDerivedStateFromProps==null&&Ke.componentWillMount!=null&&Ke.componentWillMount(),Ke.componentDidMount!=null&&Ke.__h.push(Ke.componentDidMount);else{if(ur.getDerivedStateFromProps==null&&gr!==_e&&Ke.componentWillReceiveProps!=null&&Ke.componentWillReceiveProps(gr,Yr),!Ke.__e&&Ke.shouldComponentUpdate!=null&&Ke.shouldComponentUpdate(gr,Ke.__s,Yr)===!1||he.__v===Ce.__v){Ke.props=gr,Ke.state=Ke.__s,he.__v!==Ce.__v&&(Ke.__d=!1),Ke.__v=he,he.__e=Ce.__e,he.__k=Ce.__k,he.__k.forEach(function(sn){sn&&(sn.__=he)}),Ke.__h.length&&rr.push(Ke);break e}Ke.componentWillUpdate!=null&&Ke.componentWillUpdate(gr,Ke.__s,Yr),Ke.componentDidUpdate!=null&&Ke.__h.push(function(){Ke.componentDidUpdate(_e,Bt,_r)})}Ke.context=Yr,Ke.props=gr,Ke.state=Ke.__s,(Jt=d.__r)&&Jt(he),Ke.__d=!1,Ke.__v=he,Ke.__P=ve,Jt=Ke.render(Ke.props,Ke.state,Ke.context),Ke.state=Ke.__s,Ke.getChildContext!=null&&(ot=M(M({},ot),Ke.getChildContext())),Xt||Ke.getSnapshotBeforeUpdate==null||(_r=Ke.getSnapshotBeforeUpdate(_e,Bt)),Zr=Jt!=null&&Jt.type===xe&&Jt.key==null?Jt.props.children:Jt,Y(ve,Array.isArray(Zr)?Zr:[Zr],he,Ce,ot,Tt,lt,rr,pr,ar),Ke.base=he.__e,he.__h=null,Ke.__h.length&&rr.push(Ke),L&&(Ke.__E=Ke.__=null),Ke.__e=!1}else lt==null&&he.__v===Ce.__v?(he.__k=Ce.__k,he.__e=Ce.__e):he.__e=je(Ce.__e,he,Ce,ot,Tt,lt,rr,ar);(Jt=d.diffed)&&Jt(he)}catch(sn){he.__v=null,(ar||lt!=null)&&(he.__e=pr,he.__h=!!ar,lt[lt.indexOf(pr)]=null),d.__e(sn,he,Ce)}}function fe(ve,he){d.__c&&d.__c(he,ve),ve.some(function(Ce){try{ve=Ce.__h,Ce.__h=[],ve.some(function(ot){ot.call(Ce)})}catch(ot){d.__e(ot,Ce.__v)}})}function je(ve,he,Ce,ot,Tt,lt,rr,pr){var ar,Jt,Ke,Xt=Ce.props,_e=he.props,Bt=he.type,_r=0;if(Bt==="svg"&&(Tt=!0),lt!=null){for(;_r<lt.length;_r++)if((ar=lt[_r])&&"setAttribute"in ar==!!Bt&&(Bt?ar.localName===Bt:ar.nodeType===3)){ve=ar,lt[_r]=null;break}}if(ve==null){if(Bt===null)return document.createTextNode(_e);ve=Tt?document.createElementNS("http://www.w3.org/2000/svg",Bt):document.createElement(Bt,_e.is&&_e),lt=null,pr=!1}if(Bt===null)Xt===_e||pr&&ve.data===_e||(ve.data=_e);else{if(lt=lt&&p.call(ve.childNodes),Jt=(Xt=Ce.props||P).dangerouslySetInnerHTML,Ke=_e.dangerouslySetInnerHTML,!pr){if(lt!=null)for(Xt={},_r=0;_r<ve.attributes.length;_r++)Xt[ve.attributes[_r].name]=ve.attributes[_r].value;(Ke||Jt)&&(Ke&&(Jt&&Ke.__html==Jt.__html||Ke.__html===ve.innerHTML)||(ve.innerHTML=Ke&&Ke.__html||""))}if(function(L,gr,Dr,Yr,Zr){var ur;for(ur in Dr)ur==="children"||ur==="key"||ur in gr||ie(L,ur,null,Dr[ur],Yr);for(ur in gr)Zr&&typeof gr[ur]!="function"||ur==="children"||ur==="key"||ur==="value"||ur==="checked"||Dr[ur]===gr[ur]||ie(L,ur,gr[ur],Dr[ur],Yr)}(ve,_e,Xt,Tt,pr),Ke)he.__k=[];else if(_r=he.props.children,Y(ve,Array.isArray(_r)?_r:[_r],he,Ce,ot,Tt&&Bt!=="foreignObject",lt,rr,lt?lt[0]:Ce.__k&&ne(Ce,0),pr),lt!=null)for(_r=lt.length;_r--;)lt[_r]!=null&&I(lt[_r]);pr||("value"in _e&&(_r=_e.value)!==void 0&&(_r!==Xt.value||_r!==ve.value||Bt==="progress"&&!_r)&&ie(ve,"value",_r,Xt.value,!1),"checked"in _e&&(_r=_e.checked)!==void 0&&_r!==ve.checked&&ie(ve,"checked",_r,Xt.checked,!1))}return ve}function He(ve,he,Ce){try{typeof ve=="function"?ve(he):ve.current=he}catch(ot){d.__e(ot,Ce)}}function ft(ve,he,Ce){var ot,Tt;if(d.unmount&&d.unmount(ve),(ot=ve.ref)&&(ot.current&&ot.current!==ve.__e||He(ot,null,he)),(ot=ve.__c)!=null){if(ot.componentWillUnmount)try{ot.componentWillUnmount()}catch(lt){d.__e(lt,he)}ot.base=ot.__P=null}if(ot=ve.__k)for(Tt=0;Tt<ot.length;Tt++)ot[Tt]&&ft(ot[Tt],he,typeof ve.type!="function");Ce||ve.__e==null||I(ve.__e),ve.__e=ve.__d=void 0}function Pt(ve,he,Ce){return this.constructor(ve,Ce)}function Wt(ve,he,Ce){var ot,Tt,lt;d.__&&d.__(ve,he),Tt=(ot=typeof Ce=="function")?null:Ce&&Ce.__k||he.__k,lt=[],Re(he,ve=(!ot&&Ce||he).__k=G(xe,null,[ve]),Tt||P,P,he.ownerSVGElement!==void 0,!ot&&Ce?[Ce]:Tt?null:he.firstChild?p.call(he.childNodes):null,lt,!ot&&Ce?Ce:Tt?Tt.__e:he.firstChild,ot),fe(lt,ve)}function bt(ve,he){Wt(ve,he,bt)}function xt(ve,he,Ce){var ot,Tt,lt,rr=M({},ve.props);for(lt in he)lt=="key"?ot=he[lt]:lt=="ref"?Tt=he[lt]:rr[lt]=he[lt];return arguments.length>2&&(rr.children=arguments.length>3?p.call(arguments,2):Ce),W(ve.type,rr,ot||ve.key,Tt||ve.ref,null)}function nr(ve,he){var Ce={__c:he="__cC"+T++,__:ve,Consumer:function(ot,Tt){return ot.children(Tt)},Provider:function(ot){var Tt,lt;return this.getChildContext||(Tt=[],(lt={})[he]=this,this.getChildContext=function(){return lt},this.shouldComponentUpdate=function(rr){this.props.value!==rr.value&&Tt.some($)},this.sub=function(rr){Tt.push(rr);var pr=rr.componentWillUnmount;rr.componentWillUnmount=function(){Tt.splice(Tt.indexOf(rr),1),pr&&pr.call(rr)}}),ot.children}};return Ce.Provider.__=Ce.Consumer.contextType=Ce}p=A.slice,d={__e:function(ve,he){for(var Ce,ot,Tt;he=he.__;)if((Ce=he.__c)&&!Ce.__)try{if((ot=Ce.constructor)&&ot.getDerivedStateFromError!=null&&(Ce.setState(ot.getDerivedStateFromError(ve)),Tt=Ce.__d),Ce.componentDidCatch!=null&&(Ce.componentDidCatch(ve),Tt=Ce.__d),Tt)return Ce.__E=Ce}catch(lt){ve=lt}throw ve}},y=0,ce.prototype.setState=function(ve,he){var Ce;Ce=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=M({},this.state),typeof ve=="function"&&(ve=ve(M({},Ce),this.props)),ve&&M(Ce,ve),ve!=null&&this.__v&&(he&&this.__h.push(he),$(this))},ce.prototype.forceUpdate=function(ve){this.__v&&(this.__e=!0,ve&&this.__h.push(ve),$(this))},ce.prototype.render=xe,g=[],E=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B.__r=0,T=0},function(a,f,o){(function(p,d){o.d(f,"a",function(){return $}),o.d(f,"b",function(){return Su}),o.d(f,"c",function(){return ko}),o.d(f,"d",function(){return lr}),o.d(f,"e",function(){return _t}),o.d(f,"f",function(){return jt}),o.d(f,"g",function(){return er}),o.d(f,"h",function(){return uo}),o.d(f,"i",function(){return Zr}),o.d(f,"j",function(){return Gt}),o.d(f,"k",function(){return Vo}),o.d(f,"l",function(){return mu}),o.d(f,"m",function(){return L}),o.d(f,"n",function(){return wi}),o.d(f,"o",function(){return V}),o.d(f,"p",function(){return Ms}),o.d(f,"q",function(){return yo}),o.d(f,"r",function(){return Pa}),o.d(f,"s",function(){return ao}),o.d(f,"t",function(){return Yi}),o.d(f,"u",function(){return Aa}),o.d(f,"v",function(){return af}),o.d(f,"w",function(){return Ns}),o.d(f,"x",function(){return jn}),o.d(f,"y",function(){return jo}),o.d(f,"z",function(){return On}),o.d(f,"A",function(){return Mn}),o.d(f,"B",function(){return vo}),o.d(f,"C",function(){return Jt}),o.d(f,"D",function(){return wu}),o.d(f,"E",function(){return Oi}),o.d(f,"F",function(){return Ei}),o.d(f,"G",function(){return nf}),o.d(f,"H",function(){return xs}),o.d(f,"I",function(){return sf}),o.d(f,"J",function(){return go}),o.d(f,"K",function(){return Se}),o.d(f,"L",function(){return zn}),o.d(f,"M",function(){return Rs});var y=[];Object.freeze(y);var g={};function E(){return++$t.mobxGuid}function _(m){throw T(!1,m),"X"}function T(m,b){if(!m)throw new Error("[mobx] "+(b||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(g);function P(m){var b=!1;return function(){if(!b)return b=!0,m.apply(this,arguments)}}var A=function(){};function N(m){return m!==null&&typeof m=="object"}function M(m){if(m===null||typeof m!="object")return!1;var b=Object.getPrototypeOf(m);return b===Object.prototype||b===null}function I(m,b,S){Object.defineProperty(m,b,{enumerable:!1,writable:!0,configurable:!0,value:S})}function G(m,b){var S="isMobX"+m;return b.prototype[S]=!0,function(D){return N(D)&&D[S]===!0}}function W(m){return m instanceof Map}function de(m){return m instanceof Set}function xe(m){var b=new Set;for(var S in m)b.add(S);return Object.getOwnPropertySymbols(m).forEach(function(D){Object.getOwnPropertyDescriptor(m,D).enumerable&&b.add(D)}),Array.from(b)}function ce(m){return m&&m.toString?m.toString():new String(m).toString()}function ne(m){return m===null?null:typeof m=="object"?""+m:m}var ue=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(m){return Object.getOwnPropertyNames(m).concat(Object.getOwnPropertySymbols(m))}:Object.getOwnPropertyNames,$=Symbol("mobx administration"),B=function(){function m(b){b===void 0&&(b="Atom@"+E()),this.name=b,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Xt.NOT_TRACKING}return m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},m.prototype.reportObserved=function(){return Os(this)},m.prototype.reportChanged=function(){po(),function(b){b.lowestObserverState!==Xt.STALE&&(b.lowestObserverState=Xt.STALE,b.observers.forEach(function(S){S.dependenciesState===Xt.UP_TO_DATE&&(S.isTracing!==_e.NONE&&Xo(S,b),S.onBecomeStale()),S.dependenciesState=Xt.STALE}))}(this),ho()},m.prototype.toString=function(){return this.name},m}(),Y=G("Atom",B);function V(m,b,S){b===void 0&&(b=A),S===void 0&&(S=A);var D,K=new B(m);return b!==A&&As("onBecomeObserved",K,b,D),S!==A&&Oi(K,S),K}var q={identity:function(m,b){return m===b},structural:function(m,b){return Au(m,b)},default:function(m,b){return Object.is(m,b)},shallow:function(m,b){return Au(m,b,1)}},Oe=function(m,b){return Oe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,D){S.__proto__=D}||function(S,D){for(var K in D)D.hasOwnProperty(K)&&(S[K]=D[K])},Oe(m,b)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var Ge=function(){return Ge=Object.assign||function(m){for(var b,S=1,D=arguments.length;S<D;S++)for(var K in b=arguments[S])Object.prototype.hasOwnProperty.call(b,K)&&(m[K]=b[K]);return m},Ge.apply(this,arguments)};function ie(m){var b=typeof Symbol=="function"&&m[Symbol.iterator],S=0;return b?b.call(m):{next:function(){return m&&S>=m.length&&(m=void 0),{value:m&&m[S++],done:!m}}}}function se(m,b){var S=typeof Symbol=="function"&&m[Symbol.iterator];if(!S)return m;var D,K,Ee=S.call(m),ze=[];try{for(;(b===void 0||b-- >0)&&!(D=Ee.next()).done;)ze.push(D.value)}catch(vt){K={error:vt}}finally{try{D&&!D.done&&(S=Ee.return)&&S.call(Ee)}finally{if(K)throw K.error}}return ze}function Ne(){for(var m=[],b=0;b<arguments.length;b++)m=m.concat(se(arguments[b]));return m}var Re=Symbol("mobx did run lazy initializers"),fe=Symbol("mobx pending decorators"),je={},He={};function ft(m,b){var S=b?je:He;return S[m]||(S[m]={configurable:!0,enumerable:b,get:function(){return Pt(this),this[m]},set:function(D){Pt(this),this[m]=D}})}function Pt(m){var b,S;if(m[Re]!==!0){var D=m[fe];if(D){I(m,Re,!0);var K=Ne(Object.getOwnPropertySymbols(D),Object.keys(D));try{for(var Ee=ie(K),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=D[ze.value];vt.propertyCreator(m,vt.prop,vt.descriptor,vt.decoratorTarget,vt.decoratorArguments)}}catch(Ut){b={error:Ut}}finally{try{ze&&!ze.done&&(S=Ee.return)&&S.call(Ee)}finally{if(b)throw b.error}}}}}function Wt(m,b){return function(){var S,D=function(K,Ee,ze,vt){if(vt===!0)return b(K,Ee,ze,K,S),null;if(!Object.prototype.hasOwnProperty.call(K,fe)){var Ut=K[fe];I(K,fe,Ge({},Ut))}return K[fe][Ee]={prop:Ee,propertyCreator:b,descriptor:ze,decoratorTarget:K,decoratorArguments:S},ft(Ee,m)};return bt(arguments)?(S=y,D.apply(null,arguments)):(S=Array.prototype.slice.call(arguments),D)}}function bt(m){return(m.length===2||m.length===3)&&(typeof m[1]=="string"||typeof m[1]=="symbol")||m.length===4&&m[3]===!0}function xt(m,b,S){return jn(m)?m:Array.isArray(m)?Jt.array(m,{name:S}):M(m)?Jt.object(m,void 0,{name:S}):W(m)?Jt.map(m,{name:S}):de(m)?Jt.set(m,{name:S}):m}function nr(m){return m}function ve(m){T(m);var b=Wt(!0,function(D,K,Ee,ze,vt){var Ut=Ee?Ee.initializer?Ee.initializer.call(D):Ee.value:void 0;Ji(D).addObservableProp(K,Ut,m)}),S=(p!==void 0&&p.env,b);return S.enhancer=m,S}var he={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Ce(m){return m==null?he:typeof m=="string"?{name:m,deep:!0,proxy:!0}:m}Object.freeze(he);var ot=ve(xt),Tt=ve(function(m,b,S){return m==null||Mn(m)||jo(m)||On(m)||Nn(m)?m:Array.isArray(m)?Jt.array(m,{name:S,deep:!1}):M(m)?Jt.object(m,void 0,{name:S,deep:!1}):W(m)?Jt.map(m,{name:S,deep:!1}):de(m)?Jt.set(m,{name:S,deep:!1}):_(!1)}),lt=ve(nr),rr=ve(function(m,b,S){return Au(m,b)?b:m});function pr(m){return m.defaultDecorator?m.defaultDecorator.enhancer:m.deep===!1?nr:xt}var ar={box:function(m,b){arguments.length>2&&Ke("box");var S=Ce(b);return new Ir(m,pr(S),S.name,!0,S.equals)},array:function(m,b){arguments.length>2&&Ke("array");var S=Ce(b);return qi(m,pr(S),S.name)},map:function(m,b){arguments.length>2&&Ke("map");var S=Ce(b);return new Su(m,pr(S),S.name)},set:function(m,b){arguments.length>2&&Ke("set");var S=Ce(b);return new Ma(m,pr(S),S.name)},object:function(m,b,S){typeof arguments[1]=="string"&&Ke("object");var D=Ce(S);if(D.proxy===!1)return yo({},m,b,D);var K=bu(D),Ee=yo({},void 0,void 0,D),ze=ff(Ee);return Ps(ze,m,b,K),ze},ref:lt,shallow:Tt,deep:ot,struct:rr},Jt=function(m,b,S){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return ot.apply(null,arguments);if(jn(m))return m;var D=M(m)?Jt.object(m,b,S):Array.isArray(m)?Jt.array(m,b):W(m)?Jt.map(m,b):de(m)?Jt.set(m,b):m;if(D!==m)return D;_(!1)};function Ke(m){_("Expected one or two arguments to observable."+m+". Did you accidentally try to use observable."+m+" as decorator?")}Object.keys(ar).forEach(function(m){return Jt[m]=ar[m]});var Xt,_e,Bt=Wt(!1,function(m,b,S,D,K){var Ee=S.get,ze=S.set,vt=K[0]||{};Ji(m).addComputedProp(m,b,Ge({get:Ee,set:ze,context:m},vt))}),_r=Bt({equals:q.structural}),L=function(m,b,S){if(typeof b=="string"||m!==null&&typeof m=="object"&&arguments.length===1)return Bt.apply(null,arguments);var D=typeof b=="object"?b:{};return D.get=m,D.set=typeof b=="function"?b:D.set,D.name=D.name||m.name||"",new zo(D)};L.struct=_r,function(m){m[m.NOT_TRACKING=-1]="NOT_TRACKING",m[m.UP_TO_DATE=0]="UP_TO_DATE",m[m.POSSIBLY_STALE=1]="POSSIBLY_STALE",m[m.STALE=2]="STALE"}(Xt||(Xt={})),function(m){m[m.NONE=0]="NONE",m[m.LOG=1]="LOG",m[m.BREAK=2]="BREAK"}(_e||(_e={}));var gr=function(m){this.cause=m};function Dr(m){return m instanceof gr}function Yr(m){switch(m.dependenciesState){case Xt.UP_TO_DATE:return!1;case Xt.NOT_TRACKING:case Xt.STALE:return!0;case Xt.POSSIBLY_STALE:for(var b=jt(!0),S=ae(),D=m.observing,K=D.length,Ee=0;Ee<K;Ee++){var ze=D[Ee];if(Ho(ze)){if($t.disableErrorBoundaries)ze.get();else try{ze.get()}catch{return Le(S),_t(b),!0}if(m.dependenciesState===Xt.STALE)return Le(S),_t(b),!0}}return Vt(m),Le(S),_t(b),!1}}function Zr(){return $t.trackingDerivation!==null}function ur(m){var b=m.observers.size>0;$t.computationDepth>0&&b&&_(!1),$t.allowStateChanges||!b&&$t.enforceActions!=="strict"||_(!1)}function sn(m,b,S){var D=jt(!0);Vt(m),m.newObserving=new Array(m.observing.length+100),m.unboundDepsCount=0,m.runId=++$t.runId;var K,Ee=$t.trackingDerivation;if($t.trackingDerivation=m,$t.disableErrorBoundaries===!0)K=b.call(S);else try{K=b.call(S)}catch(ze){K=new gr(ze)}return $t.trackingDerivation=Ee,function(ze){for(var vt=ze.observing,Ut=ze.observing=ze.newObserving,Ar=Xt.UP_TO_DATE,sr=0,Gr=ze.unboundDepsCount,Or=0;Or<Gr;Or++)(Ur=Ut[Or]).diffValue===0&&(Ur.diffValue=1,sr!==Or&&(Ut[sr]=Ur),sr++),Ur.dependenciesState>Ar&&(Ar=Ur.dependenciesState);for(Ut.length=sr,ze.newObserving=null,Gr=vt.length;Gr--;)(Ur=vt[Gr]).diffValue===0&&tn(Ur,ze),Ur.diffValue=0;for(;sr--;){var Ur;(Ur=Ut[sr]).diffValue===1&&(Ur.diffValue=0,_s(Ur,ze))}Ar!==Xt.UP_TO_DATE&&(ze.dependenciesState=Ar,ze.onBecomeStale())}(m),_t(D),K}function J(m){var b=m.observing;m.observing=[];for(var S=b.length;S--;)tn(b[S],m);m.dependenciesState=Xt.NOT_TRACKING}function Se(m){var b=ae();try{return m()}finally{Le(b)}}function ae(){var m=$t.trackingDerivation;return $t.trackingDerivation=null,m}function Le(m){$t.trackingDerivation=m}function jt(m){var b=$t.allowStateReads;return $t.allowStateReads=m,b}function _t(m){$t.allowStateReads=m}function Vt(m){if(m.dependenciesState!==Xt.UP_TO_DATE){m.dependenciesState=Xt.UP_TO_DATE;for(var b=m.observing,S=b.length;S--;)b[S].lowestObserverState=Xt.UP_TO_DATE}}var Tr=0,xn=1,Fn=Object.getOwnPropertyDescriptor(function(){},"name");Fn&&Fn.configurable;function hn(m,b,S){var D=function(){return En(m,b,S||this,arguments)};return D.isMobxAction=!0,D}function En(m,b,S,D){var K=Gt();try{return b.apply(S,D)}catch(Ee){throw K.error=Ee,Ee}finally{er(K)}}function Gt(m,b,S){var D=0,K=ae();po();var Ee={prevDerivation:K,prevAllowStateChanges:yr(!0),prevAllowStateReads:jt(!0),notifySpy:!1,startTime:D,actionId:xn++,parentActionId:Tr};return Tr=Ee.actionId,Ee}function er(m){Tr!==m.actionId&&_("invalid action stack. did you forget to finish an action?"),Tr=m.parentActionId,m.error!==void 0&&($t.suppressReactionErrors=!0),Xr(m.prevAllowStateChanges),_t(m.prevAllowStateReads),ho(),Le(m.prevDerivation),m.notifySpy,$t.suppressReactionErrors=!1}function lr(m,b){var S,D=yr(m);try{S=b()}finally{Xr(D)}return S}function yr(m){var b=$t.allowStateChanges;return $t.allowStateChanges=m,b}function Xr(m){$t.allowStateChanges=m}var Ir=function(m){function b(S,D,K,Ee,ze){K===void 0&&(K="ObservableValue@"+E()),ze===void 0&&(ze=q.default);var vt=m.call(this,K)||this;return vt.enhancer=D,vt.name=K,vt.equals=ze,vt.hasUnreportedChange=!1,vt.value=D(S,void 0,K),vt}return function(S,D){function K(){this.constructor=S}Oe(S,D),S.prototype=D===null?Object.create(D):(K.prototype=D.prototype,new K)}(b,m),b.prototype.dehanceValue=function(S){return this.dehancer!==void 0?this.dehancer(S):S},b.prototype.set=function(S){this.value,(S=this.prepareNewValue(S))!==$t.UNCHANGED&&this.setNewValue(S)},b.prototype.prepareNewValue=function(S){if(ur(this),qn(this)){var D=Rr(this,{object:this,type:"update",newValue:S});if(!D)return $t.UNCHANGED;S=D.newValue}return S=this.enhancer(S,this.value,this.name),this.equals(this.value,S)?$t.UNCHANGED:S},b.prototype.setNewValue=function(S){var D=this.value;this.value=S,this.reportChanged(),io(this)&&Bn(this,{type:"update",object:this,newValue:S,oldValue:D})},b.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},b.prototype.intercept=function(S){return Po(this,S)},b.prototype.observe=function(S,D){return D&&S({object:this,type:"update",newValue:this.value,oldValue:void 0}),Wo(this,S)},b.prototype.toJSON=function(){return this.get()},b.prototype.toString=function(){return this.name+"["+this.value+"]"},b.prototype.valueOf=function(){return ne(this.get())},b.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},b}(B),ai=G("ObservableValue",Ir),zo=function(){function m(b){this.dependenciesState=Xt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Xt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+E(),this.value=new gr(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=_e.NONE,T(b.get,"missing option for computed: get"),this.derivation=b.get,this.name=b.name||"ComputedValue@"+E(),b.set&&(this.setter=hn(this.name+"-setter",b.set)),this.equals=b.equals||(b.compareStructural||b.struct?q.structural:q.default),this.scope=b.context,this.requiresReaction=!!b.requiresReaction,this.keepAlive=!!b.keepAlive}return m.prototype.onBecomeStale=function(){(function(b){b.lowestObserverState===Xt.UP_TO_DATE&&(b.lowestObserverState=Xt.POSSIBLY_STALE,b.observers.forEach(function(S){S.dependenciesState===Xt.UP_TO_DATE&&(S.dependenciesState=Xt.POSSIBLY_STALE,S.isTracing!==_e.NONE&&Xo(S,b),S.onBecomeStale())}))})(this)},m.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},m.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},m.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),$t.inBatch!==0||this.observers.size!==0||this.keepAlive?(Os(this),Yr(this)&&this.trackAndCompute()&&function(S){S.lowestObserverState!==Xt.STALE&&(S.lowestObserverState=Xt.STALE,S.observers.forEach(function(D){D.dependenciesState===Xt.POSSIBLY_STALE?D.dependenciesState=Xt.STALE:D.dependenciesState===Xt.UP_TO_DATE&&(S.lowestObserverState=Xt.UP_TO_DATE)}))}(this)):Yr(this)&&(this.warnAboutUntrackedRead(),po(),this.value=this.computeValue(!1),ho());var b=this.value;if(Dr(b))throw b.cause;return b},m.prototype.peek=function(){var b=this.computeValue(!1);if(Dr(b))throw b.cause;return b},m.prototype.set=function(b){if(this.setter){T(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,b)}finally{this.isRunningSetter=!1}}else T(!1,!1)},m.prototype.trackAndCompute=function(){var b=this.value,S=this.dependenciesState===Xt.NOT_TRACKING,D=this.computeValue(!0),K=S||Dr(b)||Dr(D)||!this.equals(b,D);return K&&(this.value=D),K},m.prototype.computeValue=function(b){var S;if(this.isComputing=!0,$t.computationDepth++,b)S=sn(this,this.derivation,this.scope);else if($t.disableErrorBoundaries===!0)S=this.derivation.call(this.scope);else try{S=this.derivation.call(this.scope)}catch(D){S=new gr(D)}return $t.computationDepth--,this.isComputing=!1,S},m.prototype.suspend=function(){this.keepAlive||(J(this),this.value=void 0)},m.prototype.observe=function(b,S){var D=this,K=!0,Ee=void 0;return mu(function(){var ze=D.get();if(!K||S){var vt=ae();b({type:"update",object:D,newValue:ze,oldValue:Ee}),Le(vt)}K=!1,Ee=ze})},m.prototype.warnAboutUntrackedRead=function(){},m.prototype.toJSON=function(){return this.get()},m.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},m.prototype.valueOf=function(){return ne(this.get())},m.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},m}(),Ho=G("ComputedValue",zo),Wi=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Qc={};function yu(){return typeof window<"u"?window:d!==void 0?d:typeof self<"u"?self:Qc}var To=!0,bs=!1,$t=function(){var m=yu();return m.__mobxInstanceCount>0&&!m.__mobxGlobals&&(To=!1),m.__mobxGlobals&&m.__mobxGlobals.version!==new Wi().version&&(To=!1),To?m.__mobxGlobals?(m.__mobxInstanceCount+=1,m.__mobxGlobals.UNCHANGED||(m.__mobxGlobals.UNCHANGED={}),m.__mobxGlobals):(m.__mobxInstanceCount=1,m.__mobxGlobals=new Wi):(setTimeout(function(){bs||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Wi)}();function _s(m,b){m.observers.add(b),m.lowestObserverState>b.dependenciesState&&(m.lowestObserverState=b.dependenciesState)}function tn(m,b){m.observers.delete(b),m.observers.size===0&&Es(m)}function Es(m){m.isPendingUnobservation===!1&&(m.isPendingUnobservation=!0,$t.pendingUnobservations.push(m))}function po(){$t.inBatch++}function ho(){if(--$t.inBatch==0){ws();for(var m=$t.pendingUnobservations,b=0;b<m.length;b++){var S=m[b];S.isPendingUnobservation=!1,S.observers.size===0&&(S.isBeingObserved&&(S.isBeingObserved=!1,S.onBecomeUnobserved()),S instanceof zo&&S.suspend())}$t.pendingUnobservations=[]}}function Os(m){var b=$t.trackingDerivation;return b!==null?(b.runId!==m.lastAccessedBy&&(m.lastAccessedBy=b.runId,b.newObserving[b.unboundDepsCount++]=m,m.isBeingObserved||(m.isBeingObserved=!0,m.onBecomeObserved())),!0):(m.observers.size===0&&$t.inBatch>0&&Es(m),!1)}function Xo(m,b){if(m.isTracing===_e.BREAK){var S=[];_i(Yi(m),S,1),new Function(`debugger;
/*
Tracing '`+m.name+`'

You are entering this break point because derivation '`+m.name+"' is being traced and '"+b.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(m instanceof zo?m.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+S.join(`
`)+`
*/
    `)()}}function _i(m,b,S){b.length>=1e3?b.push("(and many more)"):(b.push(""+new Array(S).join("	")+m.name),m.dependencies&&m.dependencies.forEach(function(D){return _i(D,b,S+1)}))}var ko=function(){function m(b,S,D,K){b===void 0&&(b="Reaction@"+E()),K===void 0&&(K=!1),this.name=b,this.onInvalidate=S,this.errorHandler=D,this.requiresObservable=K,this.observing=[],this.newObserving=[],this.dependenciesState=Xt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+E(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=_e.NONE}return m.prototype.onBecomeStale=function(){this.schedule()},m.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,$t.pendingReactions.push(this),ws())},m.prototype.isScheduled=function(){return this._isScheduled},m.prototype.runReaction=function(){if(!this.isDisposed){if(po(),this._isScheduled=!1,Yr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(b){this.reportExceptionInDerivation(b)}}ho()}},m.prototype.track=function(b){if(!this.isDisposed){po(),this._isRunning=!0;var S=sn(this,b,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&J(this),Dr(S)&&this.reportExceptionInDerivation(S.cause),ho()}},m.prototype.reportExceptionInDerivation=function(b){var S=this;if(this.errorHandler)this.errorHandler(b,this);else{if($t.disableErrorBoundaries)throw b;$t.suppressReactionErrors,$t.globalReactionErrorHandlers.forEach(function(D){return D(b,S)})}},m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(po(),J(this),ho()))},m.prototype.getDisposer=function(){var b=this.dispose.bind(this);return b[$]=this,b},m.prototype.toString=function(){return"Reaction["+this.name+"]"},m.prototype.trace=function(b){b===void 0&&(b=!1),function(){for(var S=[],D=0;D<arguments.length;D++)S[D]=arguments[D];var K=!1;typeof S[S.length-1]=="boolean"&&(K=S.pop());var Ee=Ao(S);if(!Ee)return _(!1);Ee.isTracing,_e.NONE,Ee.isTracing=K?_e.BREAK:_e.LOG}(this,b)},m}(),vu=function(m){return m()};function ws(){$t.inBatch>0||$t.isRunningReactions||vu(ef)}function ef(){$t.isRunningReactions=!0;for(var m=$t.pendingReactions,b=0;m.length>0;){++b==100&&m.splice(0);for(var S=m.splice(0),D=0,K=S.length;D<K;D++)S[D].runReaction()}$t.isRunningReactions=!1}var Ta=G("Reaction",ko);function tf(m){var b=vu;vu=function(S){return m(function(){return b(S)})}}function xs(m){return function(){}}function rf(){_(!1)}function ui(m){return function(b,S,D){if(D){if(D.value)return{value:hn(m,D.value),enumerable:!1,configurable:!0,writable:!0};var K=D.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return hn(m,K.call(this))}}}return Ss(m).apply(this,arguments)}}function Ss(m){return function(b,S,D){Object.defineProperty(b,S,{configurable:!0,enumerable:!1,get:function(){},set:function(K){I(this,S,Vo(m,K))}})}}var Vo=function(m,b,S,D){return arguments.length===1&&typeof m=="function"?hn(m.name||"<unnamed action>",m):arguments.length===2&&typeof b=="function"?hn(m,b):arguments.length===1&&typeof m=="string"?ui(m):D!==!0?ui(b).apply(null,arguments):void I(m,b,hn(m.name||b,S.value,this))};function nf(m,b){return En(typeof m=="string"?m:m.name||"<unnamed action>",typeof m=="function"?m:b,this,void 0)}function Aa(m){return typeof m=="function"&&m.isMobxAction===!0}function gu(m,b,S){I(m,b,hn(b,S.bind(m)))}function mu(m,b){b===void 0&&(b=g);var S,D=b&&b.name||m.name||"Autorun@"+E();if(!b.scheduler&&!b.delay)S=new ko(D,function(){this.track(ze)},b.onError,b.requiresObservable);else{var K=Ts(b),Ee=!1;S=new ko(D,function(){Ee||(Ee=!0,K(function(){Ee=!1,S.isDisposed||S.track(ze)}))},b.onError,b.requiresObservable)}function ze(){m(S)}return S.schedule(),S.getDisposer()}Vo.bound=function(m,b,S,D){return D===!0?(gu(m,b,S.value),null):S?{configurable:!0,enumerable:!1,get:function(){return gu(this,b,S.value||S.initializer.call(this)),this[b]},set:rf}:{enumerable:!1,configurable:!0,set:function(K){gu(this,b,K)},get:function(){}}};var of=function(m){return m()};function Ts(m){return m.scheduler?m.scheduler:m.delay?function(b){return setTimeout(b,m.delay)}:of}function Ei(m,b,S){S===void 0&&(S=g);var D,K,Ee,ze=S.name||"Reaction@"+E(),vt=Vo(ze,S.onError?(D=S.onError,K=b,function(){try{return K.apply(this,arguments)}catch(rn){D.call(this,rn)}}):b),Ut=!S.scheduler&&!S.delay,Ar=Ts(S),sr=!0,Gr=!1,Or=S.compareStructural?q.structural:S.equals||q.default,Ur=new ko(ze,function(){sr||Ut?so():Gr||(Gr=!0,Ar(so))},S.onError,S.requiresObservable);function so(){if(Gr=!1,!Ur.isDisposed){var rn=!1;Ur.track(function(){var Jn=m(Ur);rn=sr||!Or(Ee,Jn),Ee=Jn}),sr&&S.fireImmediately&&vt(Ee,Ur),sr||rn!==!0||vt(Ee,Ur),sr&&(sr=!1)}}return Ur.schedule(),Ur.getDisposer()}function Oi(m,b,S){return As("onBecomeUnobserved",m,b,S)}function As(m,b,S,D){var K=typeof D=="function"?ao(b,S):ao(b),Ee=typeof D=="function"?D:S,ze=m+"Listeners";return K[ze]?K[ze].add(Ee):K[ze]=new Set([Ee]),typeof K[m]!="function"?_(!1):function(){var vt=K[ze];vt&&(vt.delete(Ee),vt.size===0&&delete K[ze])}}function wi(m){var b=m.enforceActions,S=m.computedRequiresReaction,D=m.computedConfigurable,K=m.disableErrorBoundaries,Ee=m.reactionScheduler,ze=m.reactionRequiresObservable,vt=m.observableRequiresReaction;if(m.isolateGlobalState===!0&&(($t.pendingReactions.length||$t.inBatch||$t.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),bs=!0,To&&(--yu().__mobxInstanceCount==0&&(yu().__mobxGlobals=void 0),$t=new Wi)),b!==void 0){var Ut=void 0;switch(b){case!0:case"observed":Ut=!0;break;case!1:case"never":Ut=!1;break;case"strict":case"always":Ut="strict";break;default:_("Invalid value for 'enforceActions': '"+b+"', expected 'never', 'always' or 'observed'")}$t.enforceActions=Ut,$t.allowStateChanges=Ut!==!0&&Ut!=="strict"}S!==void 0&&($t.computedRequiresReaction=!!S),ze!==void 0&&($t.reactionRequiresObservable=!!ze),vt!==void 0&&($t.observableRequiresReaction=!!vt,$t.allowStateReads=!$t.observableRequiresReaction),D!==void 0&&($t.computedConfigurable=!!D),K!==void 0&&($t.disableErrorBoundaries=!!K),Ee&&tf(Ee)}function yo(m,b,S,D){var K=bu(D=Ce(D));return Pt(m),Ji(m,D.name,K.enhancer),b&&Ps(m,b,S,K),m}function bu(m){return m.defaultDecorator||(m.deep===!1?lt:ot)}function Ps(m,b,S,D){var K,Ee;po();try{var ze=ue(b);try{for(var vt=ie(ze),Ut=vt.next();!Ut.done;Ut=vt.next()){var Ar=Ut.value,sr=Object.getOwnPropertyDescriptor(b,Ar),Gr=(S&&Ar in S?S[Ar]:sr.get?Bt:D)(m,Ar,sr,!0);Gr&&Object.defineProperty(m,Ar,Gr)}}catch(Or){K={error:Or}}finally{try{Ut&&!Ut.done&&(Ee=vt.return)&&Ee.call(vt)}finally{if(K)throw K.error}}}finally{ho()}}function Yi(m,b){return xi(ao(m,b))}function xi(m){var b,S,D={name:m.name};return m.observing&&m.observing.length>0&&(D.dependencies=(b=m.observing,S=[],b.forEach(function(K){S.indexOf(K)===-1&&S.push(K)}),S).map(xi)),D}var _u=0;function Eu(){this.message="FLOW_CANCELLED"}function Pa(m){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var b=m.name||"<unnamed flow>";return function(){var S,D=this,K=arguments,Ee=++_u,ze=Vo(b+" - runid: "+Ee+" - init",m).apply(D,K),vt=void 0,Ut=new Promise(function(Ar,sr){var Gr=0;function Or(rn){var Jn;vt=void 0;try{Jn=Vo(b+" - runid: "+Ee+" - yield "+Gr++,ze.next).call(ze,rn)}catch(ea){return sr(ea)}so(Jn)}function Ur(rn){var Jn;vt=void 0;try{Jn=Vo(b+" - runid: "+Ee+" - yield "+Gr++,ze.throw).call(ze,rn)}catch(ea){return sr(ea)}so(Jn)}function so(rn){if(!rn||typeof rn.then!="function")return rn.done?Ar(rn.value):(vt=Promise.resolve(rn.value)).then(Or,Ur);rn.then(so,sr)}S=sr,Or(void 0)});return Ut.cancel=Vo(b+" - runid: "+Ee+" - cancel",function(){try{vt&&Ki(vt);var Ar=ze.return(void 0),sr=Promise.resolve(Ar.value);sr.then(A,A),Ki(sr),S(new Eu)}catch(Gr){S(Gr)}}),Ut}}function Ki(m){typeof m.cancel=="function"&&m.cancel()}function js(m,b){if(m==null)return!1;if(b!==void 0){if(Mn(m)===!1||!m[$].values.has(b))return!1;var S=ao(m,b);return Ho(S)}return Ho(m)}function af(m){return arguments.length>1?_(!1):js(m)}function Ns(m,b){return typeof b!="string"?_(!1):js(m,b)}function Kn(m,b){return m!=null&&(b!==void 0?!!Mn(m)&&m[$].values.has(b):Mn(m)||!!m[$]||Y(m)||Ta(m)||Ho(m))}function jn(m){return arguments.length!==1&&_(!1),Kn(m)}function vo(m){return Mn(m)?m[$].getKeys():On(m)||Nn(m)?Array.from(m.keys()):jo(m)?m.map(function(b,S){return S}):_(!1)}function zn(m){return Mn(m)?vo(m).map(function(b){return m[b]}):On(m)?vo(m).map(function(b){return m.get(b)}):Nn(m)?Array.from(m.values()):jo(m)?m.slice():_(!1)}function Ms(m){return Mn(m)?vo(m).map(function(b){return[b,m[b]]}):On(m)?vo(m).map(function(b){return[b,m.get(b)]}):Nn(m)?Array.from(m.entries()):jo(m)?m.map(function(b,S){return[S,b]}):_(!1)}function Ou(m,b,S){if(arguments.length!==2||Nn(m))if(Mn(m)){var D=m[$],K=D.values.get(b);K?D.write(b,S):D.addObservableProp(b,S,D.defaultEnhancer)}else if(On(m))m.set(b,S);else if(Nn(m))m.add(b);else{if(!jo(m))return _(!1);typeof b!="number"&&(b=parseInt(b,10)),T(b>=0,"Not a valid index: '"+b+"'"),po(),b>=m.length&&(m.length=b+1),m[b]=S,ho()}else{po();var Ee=b;try{for(var ze in Ee)Ou(m,ze,Ee[ze])}finally{ho()}}}function wu(m,b,S,D){return typeof S=="function"?function(K,Ee,ze,vt){return uo(K,Ee).observe(ze,vt)}(m,b,S,D):function(K,Ee,ze){return uo(K).observe(Ee,ze)}(m,b,S)}Eu.prototype=Object.create(Error.prototype);var uf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function si(m,b,S,D){return D.detectCycles&&m.set(b,S),S}function oo(m,b,S){if(!b.recurseEverything&&!jn(m)||typeof m!="object")return m;if(m===null)return null;if(m instanceof Date)return m;if(ai(m))return oo(m.get(),b,S);if(jn(m)&&vo(m),b.detectCycles===!0&&m!==null&&S.has(m))return S.get(m);if(jo(m)||Array.isArray(m)){var D=si(S,m,[],b),K=m.map(function(Or){return oo(Or,b,S)});D.length=K.length;for(var Ee=0,ze=K.length;Ee<ze;Ee++)D[Ee]=K[Ee];return D}if(Nn(m)||Object.getPrototypeOf(m)===Set.prototype){if(b.exportMapsAsObjects===!1){var vt=si(S,m,new Set,b);return m.forEach(function(Or){vt.add(oo(Or,b,S))}),vt}var Ut=si(S,m,[],b);return m.forEach(function(Or){Ut.push(oo(Or,b,S))}),Ut}if(On(m)||Object.getPrototypeOf(m)===Map.prototype){if(b.exportMapsAsObjects===!1){var Ar=si(S,m,new Map,b);return m.forEach(function(Or,Ur){Ar.set(Ur,oo(Or,b,S))}),Ar}var sr=si(S,m,{},b);return m.forEach(function(Or,Ur){sr[Ur]=oo(Or,b,S)}),sr}var Gr=si(S,m,{},b);return xe(m).forEach(function(Or){Gr[Or]=oo(m[Or],b,S)}),Gr}function sf(m,b){var S;return typeof b=="boolean"&&(b={detectCycles:b}),b||(b=uf),b.detectCycles=b.detectCycles===void 0?b.recurseEverything===!0:b.detectCycles===!0,b.detectCycles&&(S=new Map),oo(m,b,S)}function Ao(m){switch(m.length){case 0:return $t.trackingDerivation;case 1:return ao(m[0]);case 2:return ao(m[0],m[1])}}function go(m,b){b===void 0&&(b=void 0),po();try{return m.apply(b)}finally{ho()}}function Rs(m,b,S){return arguments.length===1||b&&typeof b=="object"?cf(m,b):Cs(m,b,S||{})}function Cs(m,b,S){var D;typeof S.timeout=="number"&&(D=setTimeout(function(){if(!Ee[$].isDisposed){Ee();var ze=new Error("WHEN_TIMEOUT");if(!S.onError)throw ze;S.onError(ze)}},S.timeout)),S.name=S.name||"When@"+E();var K=hn(S.name+"-effect",b),Ee=mu(function(ze){m()&&(ze.dispose(),D&&clearTimeout(D),K())},S);return Ee}function cf(m,b){var S,D=new Promise(function(K,Ee){var ze=Cs(m,K,Ge(Ge({},b),{onError:Ee}));S=function(){ze(),Ee("WHEN_CANCELLED")}});return D.cancel=S,D}function ja(m){return m[$]}function $o(m){return typeof m=="string"||typeof m=="number"||typeof m=="symbol"}var mo={has:function(m,b){if(b===$||b==="constructor"||b===Re)return!0;var S=ja(m);return $o(b)?S.has(b):b in m},get:function(m,b){if(b===$||b==="constructor"||b===Re)return m[b];var S=ja(m),D=S.values.get(b);if(D instanceof B){var K=D.get();return K===void 0&&S.has(b),K}return $o(b)&&S.has(b),m[b]},set:function(m,b,S){return!!$o(b)&&(Ou(m,b,S),!0)},deleteProperty:function(m,b){return!!$o(b)&&(ja(m).remove(b),!0)},ownKeys:function(m){return ja(m).keysAtom.reportObserved(),Reflect.ownKeys(m)},preventExtensions:function(m){return _("Dynamic observable objects cannot be frozen"),!1}};function ff(m){var b=new Proxy(m,mo);return m[$].proxy=b,b}function qn(m){return m.interceptors!==void 0&&m.interceptors.length>0}function Po(m,b){var S=m.interceptors||(m.interceptors=[]);return S.push(b),P(function(){var D=S.indexOf(b);D!==-1&&S.splice(D,1)})}function Rr(m,b){var S=ae();try{for(var D=Ne(m.interceptors||[]),K=0,Ee=D.length;K<Ee&&(T(!(b=D[K](b))||b.type,"Intercept handlers should return nothing or a change object"),b);K++);return b}finally{Le(S)}}function io(m){return m.changeListeners!==void 0&&m.changeListeners.length>0}function Wo(m,b){var S=m.changeListeners||(m.changeListeners=[]);return S.push(b),P(function(){var D=S.indexOf(b);D!==-1&&S.splice(D,1)})}function Bn(m,b){var S=ae(),D=m.changeListeners;if(D){for(var K=0,Ee=(D=D.slice()).length;K<Ee;K++)D[K](b);Le(S)}}var Na={get:function(m,b){return b===$?m[$]:b==="length"?m[$].getArrayLength():typeof b=="number"?Zn.get.call(m,b):typeof b!="string"||isNaN(b)?Zn.hasOwnProperty(b)?Zn[b]:m[b]:Zn.get.call(m,parseInt(b))},set:function(m,b,S){return b==="length"&&m[$].setArrayLength(S),typeof b=="number"&&Zn.set.call(m,b,S),typeof b=="symbol"||isNaN(b)?m[b]=S:Zn.set.call(m,parseInt(b),S),!0},preventExtensions:function(m){return _("Observable arrays cannot be frozen"),!1}};function qi(m,b,S,D){S===void 0&&(S="ObservableArray@"+E()),D===void 0&&(D=!1);var K,Ee,ze,vt=new Lo(S,b,D);K=vt.values,Ee=$,ze=vt,Object.defineProperty(K,Ee,{enumerable:!1,writable:!1,configurable:!0,value:ze});var Ut=new Proxy(vt.values,Na);if(vt.proxy=Ut,m&&m.length){var Ar=yr(!0);vt.spliceWithArray(0,0,m),Xr(Ar)}return Ut}var Lo=function(){function m(b,S,D){this.owned=D,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new B(b||"ObservableArray@"+E()),this.enhancer=function(K,Ee){return S(K,Ee,b+"[..]")}}return m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.dehanceValues=function(b){return this.dehancer!==void 0&&b.length>0?b.map(this.dehancer):b},m.prototype.intercept=function(b){return Po(this,b)},m.prototype.observe=function(b,S){return S===void 0&&(S=!1),S&&b({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Wo(this,b)},m.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},m.prototype.setArrayLength=function(b){if(typeof b!="number"||b<0)throw new Error("[mobx.array] Out of range: "+b);var S=this.values.length;if(b!==S)if(b>S){for(var D=new Array(b-S),K=0;K<b-S;K++)D[K]=void 0;this.spliceWithArray(S,0,D)}else this.spliceWithArray(b,S-b)},m.prototype.updateArrayLength=function(b,S){if(b!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=S},m.prototype.spliceWithArray=function(b,S,D){var K=this;ur(this.atom);var Ee=this.values.length;if(b===void 0?b=0:b>Ee?b=Ee:b<0&&(b=Math.max(0,Ee+b)),S=arguments.length===1?Ee-b:S==null?0:Math.max(0,Math.min(S,Ee-b)),D===void 0&&(D=y),qn(this)){var ze=Rr(this,{object:this.proxy,type:"splice",index:b,removedCount:S,added:D});if(!ze)return y;S=ze.removedCount,D=ze.added}D=D.length===0?D:D.map(function(Ut){return K.enhancer(Ut,void 0)});var vt=this.spliceItemsIntoValues(b,S,D);return S===0&&D.length===0||this.notifyArraySplice(b,D,vt),this.dehanceValues(vt)},m.prototype.spliceItemsIntoValues=function(b,S,D){var K;if(D.length<1e4)return(K=this.values).splice.apply(K,Ne([b,S],D));var Ee=this.values.slice(b,b+S);return this.values=this.values.slice(0,b).concat(D,this.values.slice(b+S)),Ee},m.prototype.notifyArrayChildUpdate=function(b,S,D){var K=!this.owned&&!1,Ee=io(this),ze=Ee||K?{object:this.proxy,type:"update",index:b,newValue:S,oldValue:D}:null;this.atom.reportChanged(),Ee&&Bn(this,ze)},m.prototype.notifyArraySplice=function(b,S,D){var K=!this.owned&&!1,Ee=io(this),ze=Ee||K?{object:this.proxy,type:"splice",index:b,removed:D,added:S,removedCount:D.length,addedCount:S.length}:null;this.atom.reportChanged(),Ee&&Bn(this,ze)},m}(),Zn={intercept:function(m){return this[$].intercept(m)},observe:function(m,b){return b===void 0&&(b=!1),this[$].observe(m,b)},clear:function(){return this.splice(0)},replace:function(m){var b=this[$];return b.spliceWithArray(0,b.values.length,m)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(m,b){for(var S=[],D=2;D<arguments.length;D++)S[D-2]=arguments[D];var K=this[$];switch(arguments.length){case 0:return[];case 1:return K.spliceWithArray(m);case 2:return K.spliceWithArray(m,b)}return K.spliceWithArray(m,b,S)},spliceWithArray:function(m,b,S){return this[$].spliceWithArray(m,b,S)},push:function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var S=this[$];return S.spliceWithArray(S.values.length,0,m),S.values.length},pop:function(){return this.splice(Math.max(this[$].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];var S=this[$];return S.spliceWithArray(0,0,m),S.values.length},reverse:function(){var m=this.slice();return m.reverse.apply(m,arguments)},sort:function(m){var b=this.slice();return b.sort.apply(b,arguments)},remove:function(m){var b=this[$],S=b.dehanceValues(b.values).indexOf(m);return S>-1&&(this.splice(S,1),!0)},get:function(m){var b=this[$];if(b&&m<b.values.length)return b.atom.reportObserved(),b.dehanceValue(b.values[m])},set:function(m,b){var S=this[$],D=S.values;if(m<D.length){ur(S.atom);var K=D[m];if(qn(S)){var Ee=Rr(S,{type:"update",object:S.proxy,index:m,newValue:b});if(!Ee)return;b=Ee.newValue}(b=S.enhancer(b,K))!==K&&(D[m]=b,S.notifyArrayChildUpdate(m,b,K))}else{if(m!==D.length)throw new Error("[mobx.array] Index out of bounds, "+m+" is larger than "+D.length);S.spliceWithArray(m,0,[b])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(m){typeof Array.prototype[m]=="function"&&(Zn[m]=function(){var b=this[$];b.atom.reportObserved();var S=b.dehanceValues(b.values);return S[m].apply(S,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(m){typeof Array.prototype[m]=="function"&&(Zn[m]=function(b,S){var D=this,K=this[$];return K.atom.reportObserved(),K.dehanceValues(K.values)[m](function(Ee,ze){return b.call(S,Ee,ze,D)},S)})}),["reduce","reduceRight"].forEach(function(m){Zn[m]=function(){var b=this,S=this[$];S.atom.reportObserved();var D=arguments[0];return arguments[0]=function(K,Ee,ze){return Ee=S.dehanceValue(Ee),D(K,Ee,ze,b)},S.values[m].apply(S.values,arguments)}});var xu,Zi=G("ObservableArrayAdministration",Lo);function jo(m){return N(m)&&Zi(m[$])}var Ds,lf={},Su=function(){function m(b,S,D){if(S===void 0&&(S=xt),D===void 0&&(D="ObservableMap@"+E()),this.enhancer=S,this.name=D,this[xu]=lf,this._keysAtom=V(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(b)}return m.prototype._has=function(b){return this._data.has(b)},m.prototype.has=function(b){var S=this;if(!$t.trackingDerivation)return this._has(b);var D=this._hasMap.get(b);if(!D){var K=D=new Ir(this._has(b),nr,this.name+"."+ce(b)+"?",!1);this._hasMap.set(b,K),Oi(K,function(){return S._hasMap.delete(b)})}return D.get()},m.prototype.set=function(b,S){var D=this._has(b);if(qn(this)){var K=Rr(this,{type:D?"update":"add",object:this,newValue:S,name:b});if(!K)return this;S=K.newValue}return D?this._updateValue(b,S):this._addValue(b,S),this},m.prototype.delete=function(b){var S=this;if(ur(this._keysAtom),qn(this)&&!(K=Rr(this,{type:"delete",object:this,name:b})))return!1;if(this._has(b)){var D=io(this),K=D?{type:"delete",object:this,oldValue:this._data.get(b).value,name:b}:null;return go(function(){S._keysAtom.reportChanged(),S._updateHasMapEntry(b,!1),S._data.get(b).setNewValue(void 0),S._data.delete(b)}),D&&Bn(this,K),!0}return!1},m.prototype._updateHasMapEntry=function(b,S){var D=this._hasMap.get(b);D&&D.setNewValue(S)},m.prototype._updateValue=function(b,S){var D=this._data.get(b);if((S=D.prepareNewValue(S))!==$t.UNCHANGED){var K=io(this),Ee=K?{type:"update",object:this,oldValue:D.value,name:b,newValue:S}:null;D.setNewValue(S),K&&Bn(this,Ee)}},m.prototype._addValue=function(b,S){var D=this;ur(this._keysAtom),go(function(){var ze=new Ir(S,D.enhancer,D.name+"."+ce(b),!1);D._data.set(b,ze),S=ze.value,D._updateHasMapEntry(b,!0),D._keysAtom.reportChanged()});var K=io(this),Ee=K?{type:"add",object:this,name:b,newValue:S}:null;K&&Bn(this,Ee)},m.prototype.get=function(b){return this.has(b)?this.dehanceValue(this._data.get(b).get()):this.dehanceValue(void 0)},m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},m.prototype.values=function(){var b=this,S=this.keys();return Ca({next:function(){var D=S.next(),K=D.done,Ee=D.value;return{done:K,value:K?void 0:b.get(Ee)}}})},m.prototype.entries=function(){var b=this,S=this.keys();return Ca({next:function(){var D=S.next(),K=D.done,Ee=D.value;return{done:K,value:K?void 0:[Ee,b.get(Ee)]}}})},m.prototype[xu=$,Symbol.iterator]=function(){return this.entries()},m.prototype.forEach=function(b,S){var D,K;try{for(var Ee=ie(this),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=se(ze.value,2),Ut=vt[0],Ar=vt[1];b.call(S,Ar,Ut,this)}}catch(sr){D={error:sr}}finally{try{ze&&!ze.done&&(K=Ee.return)&&K.call(Ee)}finally{if(D)throw D.error}}},m.prototype.merge=function(b){var S=this;return On(b)&&(b=b.toJS()),go(function(){var D=yr(!0);try{M(b)?xe(b).forEach(function(K){return S.set(K,b[K])}):Array.isArray(b)?b.forEach(function(K){var Ee=se(K,2),ze=Ee[0],vt=Ee[1];return S.set(ze,vt)}):W(b)?(b.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+b.constructor.name),b.forEach(function(K,Ee){return S.set(Ee,K)})):b!=null&&_("Cannot initialize map from "+b)}finally{Xr(D)}}),this},m.prototype.clear=function(){var b=this;go(function(){Se(function(){var S,D;try{for(var K=ie(b.keys()),Ee=K.next();!Ee.done;Ee=K.next()){var ze=Ee.value;b.delete(ze)}}catch(vt){S={error:vt}}finally{try{Ee&&!Ee.done&&(D=K.return)&&D.call(K)}finally{if(S)throw S.error}}})})},m.prototype.replace=function(b){var S=this;return go(function(){var D,K,Ee,ze,vt=function(Sn){if(W(Sn)||On(Sn))return Sn;if(Array.isArray(Sn))return new Map(Sn);if(M(Sn)){var Ia=new Map;for(var fi in Sn)Ia.set(fi,Sn[fi]);return Ia}return _("Cannot convert to map from '"+Sn+"'")}(b),Ut=new Map,Ar=!1;try{for(var sr=ie(S._data.keys()),Gr=sr.next();!Gr.done;Gr=sr.next()){var Or=Gr.value;if(!vt.has(Or))if(S.delete(Or))Ar=!0;else{var Ur=S._data.get(Or);Ut.set(Or,Ur)}}}catch(Sn){D={error:Sn}}finally{try{Gr&&!Gr.done&&(K=sr.return)&&K.call(sr)}finally{if(D)throw D.error}}try{for(var so=ie(vt.entries()),rn=so.next();!rn.done;rn=so.next()){var Jn=se(rn.value,2),ea=(Or=Jn[0],Ur=Jn[1],S._data.has(Or));if(S.set(Or,Ur),S._data.has(Or)){var pf=S._data.get(Or);Ut.set(Or,pf),ea||(Ar=!0)}}}catch(Sn){Ee={error:Sn}}finally{try{rn&&!rn.done&&(ze=so.return)&&ze.call(so)}finally{if(Ee)throw Ee.error}}if(!Ar)if(S._data.size!==Ut.size)S._keysAtom.reportChanged();else for(var Da=S._data.keys(),ta=Ut.keys(),Ti=Da.next(),ra=ta.next();!Ti.done;){if(Ti.value!==ra.value){S._keysAtom.reportChanged();break}Ti=Da.next(),ra=ta.next()}S._data=Ut}),this},Object.defineProperty(m.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.toPOJO=function(){var b,S,D={};try{for(var K=ie(this),Ee=K.next();!Ee.done;Ee=K.next()){var ze=se(Ee.value,2),vt=ze[0],Ut=ze[1];D[typeof vt=="symbol"?vt:ce(vt)]=Ut}}catch(Ar){b={error:Ar}}finally{try{Ee&&!Ee.done&&(S=K.return)&&S.call(K)}finally{if(b)throw b.error}}return D},m.prototype.toJS=function(){return new Map(this)},m.prototype.toJSON=function(){return this.toPOJO()},m.prototype.toString=function(){var b=this;return this.name+"[{ "+Array.from(this.keys()).map(function(S){return ce(S)+": "+b.get(S)}).join(", ")+" }]"},m.prototype.observe=function(b,S){return Wo(this,b)},m.prototype.intercept=function(b){return Po(this,b)},m}(),On=G("ObservableMap",Su),Si={},Ma=function(){function m(b,S,D){if(S===void 0&&(S=xt),D===void 0&&(D="ObservableSet@"+E()),this.name=D,this[Ds]=Si,this._data=new Set,this._atom=V(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(K,Ee){return S(K,Ee,D)},b&&this.replace(b)}return m.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},m.prototype.clear=function(){var b=this;go(function(){Se(function(){var S,D;try{for(var K=ie(b._data.values()),Ee=K.next();!Ee.done;Ee=K.next()){var ze=Ee.value;b.delete(ze)}}catch(vt){S={error:vt}}finally{try{Ee&&!Ee.done&&(D=K.return)&&D.call(K)}finally{if(S)throw S.error}}})})},m.prototype.forEach=function(b,S){var D,K;try{for(var Ee=ie(this),ze=Ee.next();!ze.done;ze=Ee.next()){var vt=ze.value;b.call(S,vt,vt,this)}}catch(Ut){D={error:Ut}}finally{try{ze&&!ze.done&&(K=Ee.return)&&K.call(Ee)}finally{if(D)throw D.error}}},Object.defineProperty(m.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),m.prototype.add=function(b){var S=this;if(ur(this._atom),qn(this)&&!(K=Rr(this,{type:"add",object:this,newValue:b})))return this;if(!this.has(b)){go(function(){S._data.add(S.enhancer(b,void 0)),S._atom.reportChanged()});var D=io(this),K=D?{type:"add",object:this,newValue:b}:null;D&&Bn(this,K)}return this},m.prototype.delete=function(b){var S=this;if(qn(this)&&!(K=Rr(this,{type:"delete",object:this,oldValue:b})))return!1;if(this.has(b)){var D=io(this),K=D?{type:"delete",object:this,oldValue:b}:null;return go(function(){S._atom.reportChanged(),S._data.delete(b)}),D&&Bn(this,K),!0}return!1},m.prototype.has=function(b){return this._atom.reportObserved(),this._data.has(this.dehanceValue(b))},m.prototype.entries=function(){var b=0,S=Array.from(this.keys()),D=Array.from(this.values());return Ca({next:function(){var K=b;return b+=1,K<D.length?{value:[S[K],D[K]],done:!1}:{done:!0}}})},m.prototype.keys=function(){return this.values()},m.prototype.values=function(){this._atom.reportObserved();var b=this,S=0,D=Array.from(this._data.values());return Ca({next:function(){return S<D.length?{value:b.dehanceValue(D[S++]),done:!1}:{done:!0}}})},m.prototype.replace=function(b){var S=this;return Nn(b)&&(b=b.toJS()),go(function(){var D=yr(!0);try{Array.isArray(b)||de(b)?(S.clear(),b.forEach(function(K){return S.add(K)})):b!=null&&_("Cannot initialize set from "+b)}finally{Xr(D)}}),this},m.prototype.observe=function(b,S){return Wo(this,b)},m.prototype.intercept=function(b){return Po(this,b)},m.prototype.toJS=function(){return new Set(this)},m.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},m.prototype[Ds=$,Symbol.iterator]=function(){return this.values()},m}(),Nn=G("ObservableSet",Ma),Is=function(){function m(b,S,D,K){S===void 0&&(S=new Map),this.target=b,this.values=S,this.name=D,this.defaultEnhancer=K,this.keysAtom=new B(D+".keys")}return m.prototype.read=function(b){return this.values.get(b).get()},m.prototype.write=function(b,S){var D=this.target,K=this.values.get(b);if(K instanceof zo)K.set(S);else{if(qn(this)){if(!(ze=Rr(this,{type:"update",object:this.proxy||D,name:b,newValue:S})))return;S=ze.newValue}if((S=K.prepareNewValue(S))!==$t.UNCHANGED){var Ee=io(this),ze=Ee?{type:"update",object:this.proxy||D,oldValue:K.value,name:b,newValue:S}:null;K.setNewValue(S),Ee&&Bn(this,ze)}}},m.prototype.has=function(b){var S=this.pendingKeys||(this.pendingKeys=new Map),D=S.get(b);if(D)return D.get();var K=!!this.values.get(b);return D=new Ir(K,nr,this.name+"."+ce(b)+"?",!1),S.set(b,D),D.get()},m.prototype.addObservableProp=function(b,S,D){D===void 0&&(D=this.defaultEnhancer);var K=this.target;if(qn(this)){var Ee=Rr(this,{object:this.proxy||K,name:b,type:"add",newValue:S});if(!Ee)return;S=Ee.newValue}var ze=new Ir(S,D,this.name+"."+ce(b),!1);this.values.set(b,ze),S=ze.value,Object.defineProperty(K,b,function(vt){return Yo[vt]||(Yo[vt]={configurable:!0,enumerable:!0,get:function(){return this[$].read(vt)},set:function(Ut){this[$].write(vt,Ut)}})}(b)),this.notifyPropertyAddition(b,S)},m.prototype.addComputedProp=function(b,S,D){var K,Ee,ze,vt=this.target;D.name=D.name||this.name+"."+ce(S),this.values.set(S,new zo(D)),(b===vt||(K=b,Ee=S,!(ze=Object.getOwnPropertyDescriptor(K,Ee))||ze.configurable!==!1&&ze.writable!==!1))&&Object.defineProperty(b,S,function(Ut){return Ra[Ut]||(Ra[Ut]={configurable:$t.computedConfigurable,enumerable:!1,get:function(){return Fo(this).read(Ut)},set:function(Ar){Fo(this).write(Ut,Ar)}})}(S))},m.prototype.remove=function(b){if(this.values.has(b)){var S=this.target;if(qn(this)&&!(Ut=Rr(this,{object:this.proxy||S,name:b,type:"remove"})))return;try{po();var D=io(this),K=!1,Ee=this.values.get(b),ze=Ee&&Ee.get();if(Ee&&Ee.set(void 0),this.keysAtom.reportChanged(),this.values.delete(b),this.pendingKeys){var vt=this.pendingKeys.get(b);vt&&vt.set(!1)}delete this.target[b];var Ut=D?{type:"remove",object:this.proxy||S,oldValue:ze,name:b}:null;D&&Bn(this,Ut)}finally{ho()}}},m.prototype.illegalAccess=function(b,S){},m.prototype.observe=function(b,S){return Wo(this,b)},m.prototype.intercept=function(b){return Po(this,b)},m.prototype.notifyPropertyAddition=function(b,S){var D=io(this),K=D?{type:"add",object:this.proxy||this.target,name:b,newValue:S}:null;if(D&&Bn(this,K),this.pendingKeys){var Ee=this.pendingKeys.get(b);Ee&&Ee.set(!0)}this.keysAtom.reportChanged()},m.prototype.getKeys=function(){var b,S;this.keysAtom.reportObserved();var D=[];try{for(var K=ie(this.values),Ee=K.next();!Ee.done;Ee=K.next()){var ze=se(Ee.value,2),vt=ze[0];ze[1]instanceof Ir&&D.push(vt)}}catch(Ut){b={error:Ut}}finally{try{Ee&&!Ee.done&&(S=K.return)&&S.call(K)}finally{if(b)throw b.error}}return D},m}();function Ji(m,b,S){if(b===void 0&&(b=""),S===void 0&&(S=xt),Object.prototype.hasOwnProperty.call(m,$))return m[$];M(m)||(b=(m.constructor.name||"ObservableObject")+"@"+E()),b||(b="ObservableObject@"+E());var D=new Is(m,new Map,ce(b),S);return I(m,$,D),D}var Yo=Object.create(null),Ra=Object.create(null);function Fo(m){var b=m[$];return b||(Pt(m),m[$])}var Tu=G("ObservableObjectAdministration",Is);function Mn(m){return!!N(m)&&(Pt(m),Tu(m[$]))}function ao(m,b){if(typeof m=="object"&&m!==null){if(jo(m))return b!==void 0&&_(!1),m[$].atom;if(Nn(m))return m[$];if(On(m)){var S=m;return b===void 0?S._keysAtom:((D=S._data.get(b)||S._hasMap.get(b))||_(!1),D)}var D;if(Pt(m),b&&!m[$]&&m[b],Mn(m))return b?((D=m[$].values.get(b))||_(!1),D):_(!1);if(Y(m)||Ho(m)||Ta(m))return m}else if(typeof m=="function"&&Ta(m[$]))return m[$];return _(!1)}function uo(m,b){return m||_("Expecting some object"),b!==void 0?uo(ao(m,b)):Y(m)||Ho(m)||Ta(m)||On(m)||Nn(m)?m:(Pt(m),m[$]?m[$]:void _(!1))}var Qi=Object.prototype.toString;function Au(m,b,S){return S===void 0&&(S=-1),Pu(m,b,S)}function Pu(m,b,S,D,K){if(m===b)return m!==0||1/m==1/b;if(m==null||b==null)return!1;if(m!=m)return b!=b;var Ee=typeof m;if(Ee!=="function"&&Ee!=="object"&&typeof b!="object")return!1;var ze=Qi.call(m);if(ze!==Qi.call(b))return!1;switch(ze){case"[object RegExp]":case"[object String]":return""+m==""+b;case"[object Number]":return+m!=+m?+b!=+b:+m==0?1/+m==1/b:+m==+b;case"[object Date]":case"[object Boolean]":return+m==+b;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(m)===Symbol.valueOf.call(b);case"[object Map]":case"[object Set]":S>=0&&S++}m=ks(m),b=ks(b);var vt=ze==="[object Array]";if(!vt){if(typeof m!="object"||typeof b!="object")return!1;var Ut=m.constructor,Ar=b.constructor;if(Ut!==Ar&&!(typeof Ut=="function"&&Ut instanceof Ut&&typeof Ar=="function"&&Ar instanceof Ar)&&"constructor"in m&&"constructor"in b)return!1}if(S===0)return!1;S<0&&(S=-1),K=K||[];for(var sr=(D=D||[]).length;sr--;)if(D[sr]===m)return K[sr]===b;if(D.push(m),K.push(b),vt){if((sr=m.length)!==b.length)return!1;for(;sr--;)if(!Pu(m[sr],b[sr],S-1,D,K))return!1}else{var Gr=Object.keys(m),Or=void 0;if(sr=Gr.length,Object.keys(b).length!==sr)return!1;for(;sr--;)if(!Ls(b,Or=Gr[sr])||!Pu(m[Or],b[Or],S-1,D,K))return!1}return D.pop(),K.pop(),!0}function ks(m){return jo(m)?m.slice():W(m)||On(m)||de(m)||Nn(m)?Array.from(m.entries()):m}function Ls(m,b){return Object.prototype.hasOwnProperty.call(m,b)}function Ca(m){return m[Symbol.iterator]=ci,m}function ci(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:xs,extras:{getDebugName:function(m,b){return(b!==void 0?ao(m,b):Mn(m)||On(m)||Nn(m)?uo(m):ao(m)).name}},$mobx:$})}).call(this,o(155),o(82))},function(a,f,o){var p=o(116),d=o(44),y=o(179);p||d(Object.prototype,"toString",y,{unsafe:!0})},function(a,f,o){var p=o(40),d=o(83),y=o(70),g=o(56),E=o(111),_="Array Iterator",T=g.set,P=g.getterFor(_);a.exports=E(Array,"Array",function(A,N){T(this,{type:_,target:p(A),index:0,kind:N})},function(){var A=P(this),N=A.target,M=A.kind,I=A.index++;return!N||I>=N.length?(A.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:I,done:!1}:M=="values"?{value:N[I],done:!1}:{value:[I,N[I]],done:!1}},"values"),y.Arguments=y.Array,d("keys"),d("values"),d("entries")},function(a,f,o){var p=o(7),d=o(147),y=o(148),g=o(3),E=o(57),_=o(27),T=_("iterator"),P=_("toStringTag"),A=g.values,N=function(I,G){if(I){if(I[T]!==A)try{E(I,T,A)}catch{I[T]=A}if(I[P]||E(I,P,G),d[G]){for(var W in g)if(I[W]!==g[W])try{E(I,W,g[W])}catch{I[W]=g[W]}}}};for(var M in d)N(p[M]&&p[M].prototype,M);N(y,"DOMTokenList")},function(a,f,o){var p=o(17),d=o(7),y=o(46),g=o(76),E=o(35),_=o(15),T=o(64),P=o(36),A=o(109),N=o(19),M=o(34),I=o(99),G=o(28),W=o(33),de=o(58),xe=o(88),ce=o(32),ne=o(38),ue=o(40),$=o(87),B=o(41),Y=o(71),V=o(54),q=o(66),Oe=o(72),Ge=o(139),ie=o(112),se=o(51),Ne=o(37),Re=o(93),fe=o(101),je=o(44),He=o(84),ft=o(91),Pt=o(69),Wt=o(85),bt=o(27),xt=o(149),nr=o(150),ve=o(73),he=o(56),Ce=o(74).forEach,ot=ft("hidden"),Tt="Symbol",lt=bt("toPrimitive"),rr=he.set,pr=he.getterFor(Tt),ar=Object.prototype,Jt=d.Symbol,Ke=Jt&&Jt.prototype,Xt=d.TypeError,_e=d.QObject,Bt=y("JSON","stringify"),_r=se.f,L=Ne.f,gr=Ge.f,Dr=Re.f,Yr=_([].push),Zr=He("symbols"),ur=He("op-symbols"),sn=He("string-to-symbol-registry"),J=He("symbol-to-string-registry"),Se=He("wks"),ae=!_e||!_e.prototype||!_e.prototype.findChild,Le=P&&N(function(){return V(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a!=7})?function(Gt,er,lr){var yr=_r(ar,er);yr&&delete ar[er],L(Gt,er,lr),yr&&Gt!==ar&&L(ar,er,yr)}:L,jt=function(Gt,er){var lr=Zr[Gt]=V(Ke);return rr(lr,{type:Tt,tag:Gt,description:er}),P||(lr.description=er),lr},_t=function(Gt,er,lr){Gt===ar&&_t(ur,er,lr),ce(Gt);var yr=$(er);return ce(lr),M(Zr,yr)?(lr.enumerable?(M(Gt,ot)&&Gt[ot][yr]&&(Gt[ot][yr]=!1),lr=V(lr,{enumerable:Y(0,!1)})):(M(Gt,ot)||L(Gt,ot,Y(1,{})),Gt[ot][yr]=!0),Le(Gt,yr,lr)):L(Gt,yr,lr)},Vt=function(Gt,er){ce(Gt);var lr=ue(er),yr=q(lr).concat(hn(lr));return Ce(yr,function(Xr){P&&!E(Tr,lr,Xr)||_t(Gt,Xr,lr[Xr])}),Gt},Tr=function(Gt){var er=$(Gt),lr=E(Dr,this,er);return!(this===ar&&M(Zr,er)&&!M(ur,er))&&(!(lr||!M(this,er)||!M(Zr,er)||M(this,ot)&&this[ot][er])||lr)},xn=function(Gt,er){var lr=ue(Gt),yr=$(er);if(lr!==ar||!M(Zr,yr)||M(ur,yr)){var Xr=_r(lr,yr);return!Xr||!M(Zr,yr)||M(lr,ot)&&lr[ot][yr]||(Xr.enumerable=!0),Xr}},Fn=function(Gt){var er=gr(ue(Gt)),lr=[];return Ce(er,function(yr){M(Zr,yr)||M(Pt,yr)||Yr(lr,yr)}),lr},hn=function(Gt){var er=Gt===ar,lr=gr(er?ur:ue(Gt)),yr=[];return Ce(lr,function(Xr){!M(Zr,Xr)||er&&!M(ar,Xr)||Yr(yr,Zr[Xr])}),yr};if(A||(Jt=function(){if(de(Ke,this))throw Xt("Symbol is not a constructor");var Gt=arguments.length&&arguments[0]!==void 0?B(arguments[0]):void 0,er=Wt(Gt),lr=function(yr){this===ar&&E(lr,ur,yr),M(this,ot)&&M(this[ot],er)&&(this[ot][er]=!1),Le(this,er,Y(1,yr))};return P&&ae&&Le(ar,er,{configurable:!0,set:lr}),jt(er,Gt)},je(Ke=Jt.prototype,"toString",function(){return pr(this).tag}),je(Jt,"withoutSetter",function(Gt){return jt(Wt(Gt),Gt)}),Re.f=Tr,Ne.f=_t,se.f=xn,Oe.f=Ge.f=Fn,ie.f=hn,xt.f=function(Gt){return jt(bt(Gt),Gt)},P&&(L(Ke,"description",{configurable:!0,get:function(){return pr(this).description}}),T||je(ar,"propertyIsEnumerable",Tr,{unsafe:!0}))),p({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Jt}),Ce(q(Se),function(Gt){nr(Gt)}),p({target:Tt,stat:!0,forced:!A},{for:function(Gt){var er=B(Gt);if(M(sn,er))return sn[er];var lr=Jt(er);return sn[er]=lr,J[lr]=er,lr},keyFor:function(Gt){if(!xe(Gt))throw Xt(Gt+" is not a symbol");if(M(J,Gt))return J[Gt]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),p({target:"Object",stat:!0,forced:!A,sham:!P},{create:function(Gt,er){return er===void 0?V(Gt):Vt(V(Gt),er)},defineProperty:_t,defineProperties:Vt,getOwnPropertyDescriptor:xn}),p({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:Fn,getOwnPropertySymbols:hn}),p({target:"Object",stat:!0,forced:N(function(){ie.f(1)})},{getOwnPropertySymbols:function(Gt){return ie.f(ne(Gt))}}),Bt&&p({target:"JSON",stat:!0,forced:!A||N(function(){var Gt=Jt();return Bt([Gt])!="[null]"||Bt({a:Gt})!="{}"||Bt(Object(Gt))!="{}"})},{stringify:function(Gt,er,lr){var yr=fe(arguments),Xr=er;if((W(er)||Gt!==void 0)&&!xe(Gt))return I(er)||(er=function(Ir,ai){if(G(Xr)&&(ai=E(Xr,this,Ir,ai)),!xe(ai))return ai}),yr[1]=er,g(Bt,null,yr)}}),!Ke[lt]){var En=Ke.valueOf;je(Ke,lt,function(Gt){return E(En,this)})}ve(Jt,Tt),Pt[ot]=!0},function(a,f,o){var p=o(146).charAt,d=o(41),y=o(56),g=o(111),E="String Iterator",_=y.set,T=y.getterFor(E);g(String,"String",function(P){_(this,{type:E,string:d(P),index:0})},function(){var P,A=T(this),N=A.string,M=A.index;return M>=N.length?{value:void 0,done:!0}:(P=p(N,M),A.index+=P.length,{value:P,done:!1})})},function(a,f,o){(function(p){var d=function(y){return y&&y.Math==Math&&y};a.exports=d(typeof globalThis=="object"&&globalThis)||d(typeof window=="object"&&window)||d(typeof self=="object"&&self)||d(typeof p=="object"&&p)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(a,f,o){var p=o(17),d=o(36),y=o(7),g=o(15),E=o(34),_=o(28),T=o(58),P=o(41),A=o(37).f,N=o(134),M=y.Symbol,I=M&&M.prototype;if(d&&_(M)&&(!("description"in I)||M().description!==void 0)){var G={},W=function(){var B=arguments.length<1||arguments[0]===void 0?void 0:P(arguments[0]),Y=T(I,this)?new M(B):B===void 0?M():M(B);return B===""&&(G[Y]=!0),Y};N(W,M),W.prototype=I,I.constructor=W;var de=String(M("test"))=="Symbol(test)",xe=g(I.toString),ce=g(I.valueOf),ne=/^Symbol\((.*)\)[^)]+$/,ue=g("".replace),$=g("".slice);A(I,"description",{configurable:!0,get:function(){var B=ce(this),Y=xe(B);if(E(G,B))return"";var V=de?$(Y,7,-1):ue(Y,ne,"$1");return V===""?void 0:V}}),p({global:!0,forced:!0},{Symbol:W})}},function(a,f,o){o(150)("iterator")},function(a,f,o){o.d(f,"a",function(){return g.a}),o.d(f,"c",function(){return g.e}),o.d(f,"h",function(){return ne}),o.d(f,"i",function(){return de}),o.d(f,"j",function(){return G}),o.d(f,"b",function(){return se}),o.d(f,"e",function(){return je}),o.d(f,"f",function(){return Ne}),o.d(f,"g",function(){return Zr});var p,d,y,g=o(0),E=0,_=[],T=g.i.__b,P=g.i.__r,A=g.i.diffed,N=g.i.__c,M=g.i.unmount;function I(J,Se){g.i.__h&&g.i.__h(d,J,E||Se),E=0;var ae=d.__H||(d.__H={__:[],__h:[]});return J>=ae.__.length&&ae.__.push({}),ae.__[J]}function G(J){return E=1,W(Oe,J)}function W(J,Se,ae){var Le=I(p++,2);return Le.t=J,Le.__c||(Le.__=[ae?ae(Se):Oe(void 0,Se),function(jt){var _t=Le.t(Le.__[0],jt);Le.__[0]!==_t&&(Le.__=[_t,Le.__[1]],Le.__c.setState({}))}],Le.__c=d),Le.__}function de(J,Se){var ae=I(p++,3);!g.i.__s&&q(ae.__H,Se)&&(ae.__=J,ae.__H=Se,d.__H.__h.push(ae))}function xe(J,Se){var ae=I(p++,4);!g.i.__s&&q(ae.__H,Se)&&(ae.__=J,ae.__H=Se,d.__h.push(ae))}function ce(J,Se){var ae=I(p++,7);return q(ae.__H,Se)&&(ae.__=J(),ae.__H=Se,ae.__h=J),ae.__}function ne(J,Se){return E=8,ce(function(){return J},Se)}function ue(){var J;for(_.sort(function(Se,ae){return Se.__v.__b-ae.__v.__b});J=_.pop();)if(J.__P)try{J.__H.__h.forEach(Y),J.__H.__h.forEach(V),J.__H.__h=[]}catch(Se){J.__H.__h=[],g.i.__e(Se,J.__v)}}g.i.__b=function(J){d=null,T&&T(J)},g.i.__r=function(J){P&&P(J),p=0;var Se=(d=J.__c).__H;Se&&(Se.__h.forEach(Y),Se.__h.forEach(V),Se.__h=[])},g.i.diffed=function(J){A&&A(J);var Se=J.__c;Se&&Se.__H&&Se.__H.__h.length&&(_.push(Se)!==1&&y===g.i.requestAnimationFrame||((y=g.i.requestAnimationFrame)||B)(ue)),d=null},g.i.__c=function(J,Se){Se.some(function(ae){try{ae.__h.forEach(Y),ae.__h=ae.__h.filter(function(Le){return!Le.__||V(Le)})}catch(Le){Se.some(function(jt){jt.__h&&(jt.__h=[])}),Se=[],g.i.__e(Le,ae.__v)}}),N&&N(J,Se)},g.i.unmount=function(J){M&&M(J);var Se,ae=J.__c;ae&&ae.__H&&(ae.__H.__.forEach(function(Le){try{Y(Le)}catch(jt){Se=jt}}),Se&&g.i.__e(Se,ae.__v))};var $=typeof requestAnimationFrame=="function";function B(J){var Se,ae=function(){clearTimeout(Le),$&&cancelAnimationFrame(Se),setTimeout(J)},Le=setTimeout(ae,100);$&&(Se=requestAnimationFrame(ae))}function Y(J){var Se=d,ae=J.__c;typeof ae=="function"&&(J.__c=void 0,ae()),d=Se}function V(J){var Se=d;J.__c=J.__(),d=Se}function q(J,Se){return!J||J.length!==Se.length||Se.some(function(ae,Le){return ae!==J[Le]})}function Oe(J,Se){return typeof Se=="function"?Se(J):Se}function Ge(J,Se){for(var ae in Se)J[ae]=Se[ae];return J}function ie(J,Se){for(var ae in J)if(ae!=="__source"&&!(ae in Se))return!0;for(var Le in Se)if(Le!=="__source"&&J[Le]!==Se[Le])return!0;return!1}function se(J){this.props=J}function Ne(J,Se){function ae(jt){var _t=this.props.ref,Vt=_t==jt.ref;return!Vt&&_t&&(_t.call?_t(null):_t.current=null),Se?!Se(this.props,jt)||!Vt:ie(this.props,jt)}function Le(jt){return this.shouldComponentUpdate=ae,Object(g.e)(J,jt)}return Le.displayName="Memo("+(J.displayName||J.name)+")",Le.prototype.isReactComponent=!0,Le.__f=!0,Le}(se.prototype=new g.a).isPureReactComponent=!0,se.prototype.shouldComponentUpdate=function(J,Se){return ie(this.props,J)||ie(this.state,Se)};var Re=g.i.__b;g.i.__b=function(J){J.type&&J.type.__f&&J.ref&&(J.props.ref=J.ref,J.ref=null),Re&&Re(J)};var fe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function je(J){function Se(ae,Le){var jt=Ge({},ae);return delete jt.ref,J(jt,!(Le=ae.ref||Le)||typeof Le=="object"&&!("current"in Le)?null:Le)}return Se.$$typeof=fe,Se.render=Se,Se.prototype.isReactComponent=Se.__f=!0,Se.displayName="ForwardRef("+(J.displayName||J.name)+")",Se}var He=function(J,Se){return J==null?null:Object(g.k)(Object(g.k)(J).map(Se))},ft={map:He,forEach:He,count:function(J){return J?Object(g.k)(J).length:0},only:function(J){var Se=Object(g.k)(J);if(Se.length!==1)throw"Children.only";return Se[0]},toArray:g.k},Pt=g.i.__e;g.i.__e=function(J,Se,ae){if(J.then){for(var Le,jt=Se;jt=jt.__;)if((Le=jt.__c)&&Le.__c)return Se.__e==null&&(Se.__e=ae.__e,Se.__k=ae.__k),Le.__c(J,Se)}Pt(J,Se,ae)};var Wt=g.i.unmount;function bt(J,Se,ae){return J&&(J.__c&&J.__c.__H&&(J.__c.__H.__.forEach(function(Le){typeof Le.__c=="function"&&Le.__c()}),J.__c.__H=null),(J=Ge({},J)).__c!=null&&(J.__c.__P===ae&&(J.__c.__P=Se),J.__c=null),J.__k=J.__k&&J.__k.map(function(Le){return bt(Le,Se,ae)})),J}function xt(J,Se,ae){return J&&(J.__v=null,J.__k=J.__k&&J.__k.map(function(Le){return xt(Le,Se,ae)}),J.__c&&J.__c.__P===Se&&(J.__e&&ae.insertBefore(J.__e,J.__d),J.__c.__e=!0,J.__c.__P=ae)),J}function nr(){this.__u=0,this.t=null,this.__b=null}function ve(J){var Se=J.__.__c;return Se&&Se.__e&&Se.__e(J)}function he(){this.u=null,this.o=null}g.i.unmount=function(J){var Se=J.__c;Se&&Se.__R&&Se.__R(),Se&&J.__h===!0&&(J.type=null),Wt&&Wt(J)},(nr.prototype=new g.a).__c=function(J,Se){var ae=Se.__c,Le=this;Le.t==null&&(Le.t=[]),Le.t.push(ae);var jt=ve(Le.__v),_t=!1,Vt=function(){_t||(_t=!0,ae.__R=null,jt?jt(Tr):Tr())};ae.__R=Vt;var Tr=function(){if(!--Le.__u){if(Le.state.__e){var Fn=Le.state.__e;Le.__v.__k[0]=xt(Fn,Fn.__c.__P,Fn.__c.__O)}var hn;for(Le.setState({__e:Le.__b=null});hn=Le.t.pop();)hn.forceUpdate()}},xn=Se.__h===!0;Le.__u++||xn||Le.setState({__e:Le.__b=Le.__v.__k[0]}),J.then(Vt,Vt)},nr.prototype.componentWillUnmount=function(){this.t=[]},nr.prototype.render=function(J,Se){if(this.__b){if(this.__v.__k){var ae=document.createElement("div"),Le=this.__v.__k[0].__c;this.__v.__k[0]=bt(this.__b,ae,Le.__O=Le.__P)}this.__b=null}var jt=Se.__e&&Object(g.e)(g.b,null,J.fallback);return jt&&(jt.__h=null),[Object(g.e)(g.b,null,Se.__e?null:J.children),jt]};var Ce=function(J,Se,ae){if(++ae[1]===ae[0]&&J.o.delete(Se),J.props.revealOrder&&(J.props.revealOrder[0]!=="t"||!J.o.size))for(ae=J.u;ae;){for(;ae.length>3;)ae.pop()();if(ae[1]<ae[0])break;J.u=ae=ae[2]}};function ot(J){return this.getChildContext=function(){return J.context},J.children}function Tt(J){var Se=this,ae=J.i;Se.componentWillUnmount=function(){Object(g.j)(null,Se.l),Se.l=null,Se.i=null},Se.i&&Se.i!==ae&&Se.componentWillUnmount(),J.__v?(Se.l||(Se.i=ae,Se.l={nodeType:1,parentNode:ae,childNodes:[],appendChild:function(Le){this.childNodes.push(Le),Se.i.appendChild(Le)},insertBefore:function(Le,jt){this.childNodes.push(Le),Se.i.appendChild(Le)},removeChild:function(Le){this.childNodes.splice(this.childNodes.indexOf(Le)>>>1,1),Se.i.removeChild(Le)}}),Object(g.j)(Object(g.e)(ot,{context:Se.context},J.__v),Se.l)):Se.l&&Se.componentWillUnmount()}(he.prototype=new g.a).__e=function(J){var Se=this,ae=ve(Se.__v),Le=Se.o.get(J);return Le[0]++,function(jt){var _t=function(){Se.props.revealOrder?(Le.push(jt),Ce(Se,J,Le)):jt()};ae?ae(_t):_t()}},he.prototype.render=function(J){this.u=null,this.o=new Map;var Se=Object(g.k)(J.children);J.revealOrder&&J.revealOrder[0]==="b"&&Se.reverse();for(var ae=Se.length;ae--;)this.o.set(Se[ae],this.u=[1,0,this.u]);return J.children},he.prototype.componentDidUpdate=he.prototype.componentDidMount=function(){var J=this;this.o.forEach(function(Se,ae){Ce(J,ae,Se)})};var lt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pr=typeof document<"u",ar=function(J){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(J)};g.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(J){Object.defineProperty(g.a.prototype,J,{configurable:!0,get:function(){return this["UNSAFE_"+J]},set:function(Se){Object.defineProperty(this,J,{configurable:!0,writable:!0,value:Se})}})});var Jt=g.i.event;function Ke(){}function Xt(){return this.cancelBubble}function _e(){return this.defaultPrevented}g.i.event=function(J){return Jt&&(J=Jt(J)),J.persist=Ke,J.isPropagationStopped=Xt,J.isDefaultPrevented=_e,J.nativeEvent=J};var Bt,_r={configurable:!0,get:function(){return this.class}},L=g.i.vnode;g.i.vnode=function(J){var Se=J.type,ae=J.props,Le=ae;if(typeof Se=="string"){var jt=Se.indexOf("-")===-1;for(var _t in Le={},ae){var Vt=ae[_t];pr&&_t==="children"&&Se==="noscript"||_t==="value"&&"defaultValue"in ae&&Vt==null||(_t==="defaultValue"&&"value"in ae&&ae.value==null?_t="value":_t==="download"&&Vt===!0?Vt="":/ondoubleclick/i.test(_t)?_t="ondblclick":/^onchange(textarea|input)/i.test(_t+Se)&&!ar(ae.type)?_t="oninput":/^onfocus$/i.test(_t)?_t="onfocusin":/^onblur$/i.test(_t)?_t="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(_t)?_t=_t.toLowerCase():jt&&rr.test(_t)?_t=_t.replace(/[A-Z0-9]/,"-$&").toLowerCase():Vt===null&&(Vt=void 0),Le[_t]=Vt)}Se=="select"&&Le.multiple&&Array.isArray(Le.value)&&(Le.value=Object(g.k)(ae.children).forEach(function(Tr){Tr.props.selected=Le.value.indexOf(Tr.props.value)!=-1})),Se=="select"&&Le.defaultValue!=null&&(Le.value=Object(g.k)(ae.children).forEach(function(Tr){Tr.props.selected=Le.multiple?Le.defaultValue.indexOf(Tr.props.value)!=-1:Le.defaultValue==Tr.props.value})),J.props=Le,ae.class!=ae.className&&(_r.enumerable="className"in ae,ae.className!=null&&(Le.class=ae.className),Object.defineProperty(Le,"className",_r))}J.$$typeof=lt,L&&L(J)};var gr=g.i.__r;g.i.__r=function(J){gr&&gr(J),Bt=J.__c};var Dr={ReactCurrentDispatcher:{current:{readContext:function(J){return Bt.__n[J.__c].props.value}}}};function Yr(J){return!!J&&J.$$typeof===lt}var Zr=function(J,Se){return J(Se)},ur=g.b,sn={useState:G,useReducer:W,useEffect:de,useLayoutEffect:xe,useRef:function(J){return E=5,ce(function(){return{current:J}},[])},useImperativeHandle:function(J,Se,ae){E=6,xe(function(){typeof J=="function"?J(Se()):J&&(J.current=Se())},ae==null?ae:ae.concat(J))},useMemo:ce,useCallback:ne,useContext:function(J){var Se=d.context[J.__c],ae=I(p++,9);return ae.c=J,Se?(ae.__==null&&(ae.__=!0,Se.sub(d)),Se.props.value):J.__},useDebugValue:function(J,Se){g.i.useDebugValue&&g.i.useDebugValue(Se?Se(J):J)},version:"17.0.2",Children:ft,render:function(J,Se,ae){return Se.__k==null&&(Se.textContent=""),Object(g.j)(J,Se),typeof ae=="function"&&ae(),J?J.__c:null},hydrate:function(J,Se,ae){return Object(g.h)(J,Se),typeof ae=="function"&&ae(),J?J.__c:null},unmountComponentAtNode:function(J){return!!J.__k&&(Object(g.j)(null,J),!0)},createPortal:function(J,Se){return Object(g.e)(Tt,{__v:J,i:Se})},createElement:g.e,createContext:g.d,createFactory:function(J){return g.e.bind(null,J)},cloneElement:function(J){return Yr(J)?g.c.apply(null,arguments):J},createRef:g.f,Fragment:g.b,isValidElement:Yr,findDOMNode:function(J){return J&&(J.base||J.nodeType===1&&J)||null},Component:g.a,PureComponent:se,memo:Ne,forwardRef:je,flushSync:function(J,Se){return J(Se)},unstable_batchedUpdates:Zr,StrictMode:ur,Suspense:nr,SuspenseList:he,lazy:function(J){var Se,ae,Le;function jt(_t){if(Se||(Se=J()).then(function(Vt){ae=Vt.default||Vt},function(Vt){Le=Vt}),Le)throw Le;if(!ae)throw Se;return Object(g.e)(ae,_t)}return jt.displayName="Lazy",jt.__f=!0,jt},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Dr};f.d=sn},function(a,f,o){var p=o(7),d=o(147),y=o(148),g=o(180),E=o(57),_=function(P){if(P&&P.forEach!==g)try{E(P,"forEach",g)}catch{P.forEach=g}};for(var T in d)d[T]&&_(p[T]&&p[T].prototype);_(y)},function(a,f,o){o(17)({target:"Object",stat:!0},{setPrototypeOf:o(97)})},function(a,f,o){var p=o(17),d=o(19),y=o(38),g=o(96),E=o(137);p({target:"Object",stat:!0,forced:d(function(){g(1)}),sham:!E},{getPrototypeOf:function(_){return g(y(_))}})},function(a,f,o){var p=o(17),d=o(46),y=o(76),g=o(200),E=o(157),_=o(32),T=o(33),P=o(54),A=o(19),N=d("Reflect","construct"),M=Object.prototype,I=[].push,G=A(function(){function xe(){}return!(N(function(){},[],xe)instanceof xe)}),W=!A(function(){N(function(){})}),de=G||W;p({target:"Reflect",stat:!0,forced:de,sham:de},{construct:function(xe,ce){E(xe),_(ce);var ne=arguments.length<3?xe:E(arguments[2]);if(W&&!G)return N(xe,ce,ne);if(xe==ne){switch(ce.length){case 0:return new xe;case 1:return new xe(ce[0]);case 2:return new xe(ce[0],ce[1]);case 3:return new xe(ce[0],ce[1],ce[2]);case 4:return new xe(ce[0],ce[1],ce[2],ce[3])}var ue=[null];return y(I,ue,ce),new(y(g,xe,ue))}var $=ne.prototype,B=P(T($)?$:M),Y=y(xe,B,ce);return T(Y)?Y:B}})},function(a,f){var o=Function.prototype,p=o.bind,d=o.call,y=p&&p.bind(d);a.exports=p?function(g){return g&&y(d,g)}:function(g){return g&&function(){return d.apply(g,arguments)}}},function(a,f,o){var p=o(17),d=o(7),y=o(99),g=o(100),E=o(33),_=o(67),T=o(43),P=o(40),A=o(61),N=o(27),M=o(75),I=o(101),G=M("slice"),W=N("species"),de=d.Array,xe=Math.max;p({target:"Array",proto:!0,forced:!G},{slice:function(ce,ne){var ue,$,B,Y=P(this),V=T(Y),q=_(ce,V),Oe=_(ne===void 0?V:ne,V);if(y(Y)&&(ue=Y.constructor,(g(ue)&&(ue===de||y(ue.prototype))||E(ue)&&(ue=ue[W])===null)&&(ue=void 0),ue===de||ue===void 0))return I(Y,q,Oe);for($=new(ue===void 0?de:ue)(xe(Oe-q,0)),B=0;q<Oe;q++,B++)q in Y&&A($,B,Y[q]);return $.length=B,$}})},function(a,f,o){var p=o(7),d=o(51).f,y=o(57),g=o(44),E=o(108),_=o(134),T=o(95);a.exports=function(P,A){var N,M,I,G,W,de=P.target,xe=P.global,ce=P.stat;if(N=xe?p:ce?p[de]||E(de,{}):(p[de]||{}).prototype)for(M in A){if(G=A[M],I=P.noTargetGet?(W=d(N,M))&&W.value:N[M],!T(xe?M:de+(ce?".":"#")+M,P.forced)&&I!==void 0){if(typeof G==typeof I)continue;_(G,I)}(P.sham||I&&I.sham)&&y(G,"sham",!0),g(N,M,G,P)}}},function(a,f,o){var p=o(17),d=o(102);p({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},function(a,f){a.exports=function(o){try{return!!o()}catch{return!0}}},function(a,f,o){var p=o(17),d=o(38),y=o(66);p({target:"Object",stat:!0,forced:o(19)(function(){y(1)})},{keys:function(g){return y(d(g))}})},function(a,f,o){var p=o(17),d=o(19),y=o(40),g=o(51).f,E=o(36),_=d(function(){g(1)});p({target:"Object",stat:!0,forced:!E||_,sham:!E},{getOwnPropertyDescriptor:function(T,P){return g(y(T),P)}})},function(a,f,o){var p=o(36),d=o(94).EXISTS,y=o(15),g=o(37).f,E=Function.prototype,_=y(E.toString),T=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,P=y(T.exec);p&&!d&&g(E,"name",{configurable:!0,get:function(){try{return P(T,_(this))[1]}catch{return""}}})},function(a,f,o){var p=o(17),d=o(74).filter;p({target:"Array",proto:!0,forced:!o(75)("filter")},{filter:function(y){return d(this,y,arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(17),d=o(183);p({target:"Array",stat:!0,forced:!o(118)(function(y){Array.from(y)})},{from:d})},function(a,f,o){var p=o(17),d=o(36),y=o(135),g=o(40),E=o(51),_=o(61);p({target:"Object",stat:!0,sham:!d},{getOwnPropertyDescriptors:function(T){for(var P,A,N=g(T),M=E.f,I=y(N),G={},W=0;I.length>W;)(A=M(N,P=I[W++]))!==void 0&&_(G,P,A);return G}})},,function(a,f,o){var p=o(7),d=o(84),y=o(34),g=o(85),E=o(109),_=o(128),T=d("wks"),P=p.Symbol,A=P&&P.for,N=_?P:P&&P.withoutSetter||g;a.exports=function(M){if(!y(T,M)||!E&&typeof T[M]!="string"){var I="Symbol."+M;E&&y(P,M)?T[M]=P[M]:T[M]=_&&A?A(I):N(I)}return T[M]}},function(a,f){a.exports=function(o){return typeof o=="function"}},function(a,f,o){var p=o(17),d=o(7),y=o(19),g=o(99),E=o(33),_=o(38),T=o(43),P=o(61),A=o(119),N=o(75),M=o(27),I=o(65),G=M("isConcatSpreadable"),W=9007199254740991,de="Maximum allowed index exceeded",xe=d.TypeError,ce=I>=51||!y(function(){var $=[];return $[G]=!1,$.concat()[0]!==$}),ne=N("concat"),ue=function($){if(!E($))return!1;var B=$[G];return B!==void 0?!!B:g($)};p({target:"Array",proto:!0,forced:!ce||!ne},{concat:function($){var B,Y,V,q,Oe,Ge=_(this),ie=A(Ge,0),se=0;for(B=-1,V=arguments.length;B<V;B++)if(ue(Oe=B===-1?Ge:arguments[B])){if(se+(q=T(Oe))>W)throw xe(de);for(Y=0;Y<q;Y++,se++)Y in Oe&&P(ie,se,Oe[Y])}else{if(se>=W)throw xe(de);P(ie,se++,Oe)}return ie.length=se,ie}})},function(a,f,o){var p=o(17),d=o(199);p({target:"Object",stat:!0,forced:Object.assign!==d},{assign:d})},function(a,f,o){var p=o(105),d=typeof self=="object"&&self&&self.Object===Object&&self,y=p.a||d||Function("return this")();f.a=y},function(a,f,o){var p=o(7),d=o(33),y=p.String,g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not an object")}},function(a,f,o){var p=o(28);a.exports=function(d){return typeof d=="object"?d!==null:p(d)}},function(a,f,o){var p=o(15),d=o(38),y=p({}.hasOwnProperty);a.exports=Object.hasOwn||function(g,E){return y(d(g),E)}},function(a,f){var o=Function.prototype.call;a.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(a,f,o){var p=o(19);a.exports=!p(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(a,f,o){var p=o(7),d=o(36),y=o(129),g=o(32),E=o(87),_=p.TypeError,T=Object.defineProperty;f.f=d?T:function(P,A,N){if(g(P),A=E(A),g(N),y)try{return T(P,A,N)}catch{}if("get"in N||"set"in N)throw _("Accessors not supported");return"value"in N&&(P[A]=N.value),P}},function(a,f,o){var p=o(7),d=o(45),y=p.Object;a.exports=function(g){return y(d(g))}},function(a,f,o){var p=o(17),d=o(74).map;p({target:"Array",proto:!0,forced:!o(75)("map")},{map:function(y){return d(this,y,arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(81),d=o(45);a.exports=function(y){return p(d(y))}},function(a,f,o){var p=o(7),d=o(98),y=p.String;a.exports=function(g){if(d(g)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return y(g)}},function(a,f,o){(function(p){o.d(f,"d",function(){return g}),o.d(f,"c",function(){return E}),o.d(f,"b",function(){return _}),o.d(f,"a",function(){return P});var d=o(10),y=function(A,N){var M=typeof Symbol=="function"&&A[Symbol.iterator];if(!M)return A;var I,G,W=M.call(A),de=[];try{for(;(N===void 0||N-- >0)&&!(I=W.next()).done;)de.push(I.value)}catch(xe){G={error:xe}}finally{try{I&&!I.done&&(M=W.return)&&M.call(W)}finally{if(G)throw G.error}}return de};function g(){var A=y(Object(d.j)(0),2)[1];return Object(d.h)(function(){A(function(N){return N+1})},[])}function E(A){if(!A||typeof A!="object")return!1;var N=Object.getPrototypeOf(A);return!N||N===Object.prototype}function _(A){return typeof Symbol=="function"?Symbol.for(A):"__$mobx-react "+A+"__"}var T={};function P(){return typeof window<"u"?window:p!==void 0?p:typeof self<"u"?self:T}}).call(this,o(82))},function(a,f,o){var p=o(90);a.exports=function(d){return p(d.length)}},function(a,f,o){var p=o(7),d=o(28),y=o(34),g=o(57),E=o(108),_=o(92),T=o(56),P=o(94).CONFIGURABLE,A=T.get,N=T.enforce,M=String(String).split("String");(a.exports=function(I,G,W,de){var xe,ce=!!de&&!!de.unsafe,ne=!!de&&!!de.enumerable,ue=!!de&&!!de.noTargetGet,$=de&&de.name!==void 0?de.name:G;d(W)&&(String($).slice(0,7)==="Symbol("&&($="["+String($).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!y(W,"name")||P&&W.name!==$)&&g(W,"name",$),(xe=N(W)).source||(xe.source=M.join(typeof $=="string"?$:""))),I!==p?(ce?!ue&&I[G]&&(ne=!0):delete I[G],ne?I[G]=W:g(I,G,W)):ne?I[G]=W:E(G,W)})(Function.prototype,"toString",function(){return d(this)&&A(this).source||_(this)})},function(a,f,o){var p=o(7).TypeError;a.exports=function(d){if(d==null)throw p("Can't call method on "+d);return d}},function(a,f,o){var p=o(7),d=o(28),y=function(g){return d(g)?g:void 0};a.exports=function(g,E){return arguments.length<2?y(p[g]):p[g]&&p[g][E]}},function(a,f,o){var p=o(17),d=o(35),y=o(33),g=o(32),E=o(201),_=o(51),T=o(96);p({target:"Reflect",stat:!0},{get:function P(A,N){var M,I,G=arguments.length<3?A:arguments[2];return g(A)===G?A[N]:(M=_.f(A,N))?E(M)?M.value:M.get===void 0?void 0:d(M.get,G):y(I=T(A))?P(I,N,G):void 0}})},function(a,f,o){(function(p){var d=o(31),y=o(166),g=u&&!u.nodeType&&u,E=g&&typeof p=="object"&&p&&!p.nodeType&&p,_=E&&E.exports===g?d.a.Buffer:void 0,T=(_?_.isBuffer:void 0)||y.a;f.a=T}).call(this,o(121)(a))},function(a,f,o){(function(p){var d=o(105),y=u&&!u.nodeType&&u,g=y&&typeof p=="object"&&p&&!p.nodeType&&p,E=g&&g.exports===y&&d.a.process,_=function(){try{var T=g&&g.require&&g.require("util").types;return T||E&&E.binding&&E.binding("util")}catch{}}();f.a=_}).call(this,o(121)(a))},function(a,f,o){var p=o(15),d=p({}.toString),y=p("".slice);a.exports=function(g){return y(d(g),8,-1)}},function(a,f,o){var p=o(36),d=o(35),y=o(93),g=o(71),E=o(40),_=o(87),T=o(34),P=o(129),A=Object.getOwnPropertyDescriptor;f.f=p?A:function(N,M){if(N=E(N),M=_(M),P)try{return A(N,M)}catch{}if(T(N,M))return g(!d(y.f,N,M),N[M])}},function(a,f,o){var p=o(17),d=o(213).entries;p({target:"Object",stat:!0},{entries:function(y){return d(y)}})},function(a,f,o){var p=o(46);a.exports=p("navigator","userAgent")||""},function(a,f,o){var p,d=o(32),y=o(169),g=o(110),E=o(69),_=o(133),T=o(86),P=o(91),A=P("IE_PROTO"),N=function(){},M=function(W){return"<script>"+W+"<\/script>"},I=function(W){W.write(M("")),W.close();var de=W.parentWindow.Object;return W=null,de},G=function(){try{p=new ActiveXObject("htmlfile")}catch{}var W,de;G=typeof document<"u"?document.domain&&p?I(p):((de=T("iframe")).style.display="none",_.appendChild(de),de.src="javascript:",(W=de.contentWindow.document).open(),W.write(M("document.F=Object")),W.close(),W.F):I(p);for(var xe=g.length;xe--;)delete G.prototype[g[xe]];return G()};E[A]=!0,a.exports=Object.create||function(W,de){var xe;return W!==null?(N.prototype=d(W),xe=new N,N.prototype=null,xe[A]=W):xe=G(),de===void 0?xe:y(xe,de)}},function(a,f,o){var p=o(7),d=o(28),y=o(89),g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not a function")}},function(a,f,o){var p,d,y,g=o(171),E=o(7),_=o(15),T=o(33),P=o(57),A=o(34),N=o(107),M=o(91),I=o(69),G="Object already initialized",W=E.TypeError,de=E.WeakMap;if(g||N.state){var xe=N.state||(N.state=new de),ce=_(xe.get),ne=_(xe.has),ue=_(xe.set);p=function(B,Y){if(ne(xe,B))throw new W(G);return Y.facade=B,ue(xe,B,Y),Y},d=function(B){return ce(xe,B)||{}},y=function(B){return ne(xe,B)}}else{var $=M("state");I[$]=!0,p=function(B,Y){if(A(B,$))throw new W(G);return Y.facade=B,P(B,$,Y),Y},d=function(B){return A(B,$)?B[$]:{}},y=function(B){return A(B,$)}}a.exports={set:p,get:d,has:y,enforce:function(B){return y(B)?d(B):p(B,{})},getterFor:function(B){return function(Y){var V;if(!T(Y)||(V=d(Y)).type!==B)throw W("Incompatible receiver, "+B+" required");return V}}}},function(a,f,o){var p=o(36),d=o(37),y=o(71);a.exports=p?function(g,E,_){return d.f(g,E,y(1,_))}:function(g,E,_){return g[E]=_,g}},function(a,f,o){var p=o(15);a.exports=p({}.isPrototypeOf)},function(a,f,o){var p=o(55);a.exports=function(d,y){var g=d[y];return g==null?void 0:p(g)}},function(a,f,o){o(174)("Map",function(p){return function(){return p(this,arguments.length?arguments[0]:void 0)}},o(178))},function(a,f,o){var p=o(87),d=o(37),y=o(71);a.exports=function(g,E,_){var T=p(E);T in g?d.f(g,T,y(0,_)):g[T]=_}},function(a,f,o){var p=o(15),d=o(55),y=p(p.bind);a.exports=function(g,E){return d(g),E===void 0?g:y?y(g,E):function(){return g.apply(E,arguments)}}},function(a,f,o){var p=o(17),d=o(15),y=o(81),g=o(40),E=o(120),_=d([].join),T=y!=Object,P=E("join",",");p({target:"Array",proto:!0,forced:T||!P},{join:function(A){return _(g(this),A===void 0?",":A)}})},function(a,f){a.exports=!1},function(a,f,o){var p,d,y=o(7),g=o(53),E=y.process,_=y.Deno,T=E&&E.versions||_&&_.version,P=T&&T.v8;P&&(d=(p=P.split("."))[0]>0&&p[0]<4?1:+(p[0]+p[1])),!d&&g&&(!(p=g.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=g.match(/Chrome\/(\d+)/))&&(d=+p[1]),a.exports=d},function(a,f,o){var p=o(131),d=o(110);a.exports=Object.keys||function(y){return p(y,d)}},function(a,f,o){var p=o(68),d=Math.max,y=Math.min;a.exports=function(g,E){var _=p(g);return _<0?d(_+E,0):y(_,E)}},function(a,f){var o=Math.ceil,p=Math.floor;a.exports=function(d){var y=+d;return y!=y||y===0?0:(y>0?p:o)(y)}},function(a,f){a.exports={}},function(a,f){a.exports={}},function(a,f){a.exports=function(o,p){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:p}}},function(a,f,o){var p=o(131),d=o(110).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(y){return p(y,d)}},function(a,f,o){var p=o(37).f,d=o(34),y=o(27)("toStringTag");a.exports=function(g,E,_){g&&!d(g=_?g:g.prototype,y)&&p(g,y,{configurable:!0,value:E})}},function(a,f,o){var p=o(62),d=o(15),y=o(81),g=o(38),E=o(43),_=o(119),T=d([].push),P=function(A){var N=A==1,M=A==2,I=A==3,G=A==4,W=A==6,de=A==7,xe=A==5||W;return function(ce,ne,ue,$){for(var B,Y,V=g(ce),q=y(V),Oe=p(ne,ue),Ge=E(q),ie=0,se=$||_,Ne=N?se(ce,Ge):M||de?se(ce,0):void 0;Ge>ie;ie++)if((xe||ie in q)&&(Y=Oe(B=q[ie],ie,V),A))if(N)Ne[ie]=Y;else if(Y)switch(A){case 3:return!0;case 5:return B;case 6:return ie;case 2:T(Ne,B)}else switch(A){case 4:return!1;case 7:T(Ne,B)}return W?-1:I||G?G:Ne}};a.exports={forEach:P(0),map:P(1),filter:P(2),some:P(3),every:P(4),find:P(5),findIndex:P(6),filterReject:P(7)}},function(a,f,o){var p=o(19),d=o(27),y=o(65),g=d("species");a.exports=function(E){return y>=51||!p(function(){var _=[];return(_.constructor={})[g]=function(){return{foo:1}},_[E](Boolean).foo!==1})}},function(a,f){var o=Function.prototype,p=o.apply,d=o.bind,y=o.call;a.exports=typeof Reflect=="object"&&Reflect.apply||(d?y.bind(p):function(){return y.apply(p,arguments)})},function(a,f,o){var p=o(76),d=o(35),y=o(15),g=o(122),E=o(154),_=o(32),T=o(45),P=o(156),A=o(123),N=o(90),M=o(41),I=o(59),G=o(113),W=o(124),de=o(102),xe=o(151),ce=o(19),ne=xe.UNSUPPORTED_Y,ue=4294967295,$=Math.min,B=[].push,Y=y(/./.exec),V=y(B),q=y("".slice),Oe=!ce(function(){var Ge=/(?:)/,ie=Ge.exec;Ge.exec=function(){return ie.apply(this,arguments)};var se="ab".split(Ge);return se.length!==2||se[0]!=="a"||se[1]!=="b"});g("split",function(Ge,ie,se){var Ne;return Ne="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(Re,fe){var je=M(T(this)),He=fe===void 0?ue:fe>>>0;if(He===0)return[];if(Re===void 0)return[je];if(!E(Re))return d(ie,je,Re,He);for(var ft,Pt,Wt,bt=[],xt=(Re.ignoreCase?"i":"")+(Re.multiline?"m":"")+(Re.unicode?"u":"")+(Re.sticky?"y":""),nr=0,ve=new RegExp(Re.source,xt+"g");(ft=d(de,ve,je))&&!((Pt=ve.lastIndex)>nr&&(V(bt,q(je,nr,ft.index)),ft.length>1&&ft.index<je.length&&p(B,bt,G(ft,1)),Wt=ft[0].length,nr=Pt,bt.length>=He));)ve.lastIndex===ft.index&&ve.lastIndex++;return nr===je.length?!Wt&&Y(ve,"")||V(bt,""):V(bt,q(je,nr)),bt.length>He?G(bt,0,He):bt}:"0".split(void 0,0).length?function(Re,fe){return Re===void 0&&fe===0?[]:d(ie,this,Re,fe)}:ie,[function(Re,fe){var je=T(this),He=Re==null?void 0:I(Re,Ge);return He?d(He,Re,je,fe):d(Ne,M(je),Re,fe)},function(Re,fe){var je=_(this),He=M(Re),ft=se(Ne,je,He,fe,Ne!==ie);if(ft.done)return ft.value;var Pt=P(je,RegExp),Wt=je.unicode,bt=(je.ignoreCase?"i":"")+(je.multiline?"m":"")+(je.unicode?"u":"")+(ne?"g":"y"),xt=new Pt(ne?"^(?:"+je.source+")":je,bt),nr=fe===void 0?ue:fe>>>0;if(nr===0)return[];if(He.length===0)return W(xt,He)===null?[He]:[];for(var ve=0,he=0,Ce=[];he<He.length;){xt.lastIndex=ne?0:he;var ot,Tt=W(xt,ne?q(He,he):He);if(Tt===null||(ot=$(N(xt.lastIndex+(ne?he:0)),He.length))===ve)he=A(He,he,Wt);else{if(V(Ce,q(He,ve,he)),Ce.length===nr)return Ce;for(var lt=1;lt<=Tt.length-1;lt++)if(V(Ce,Tt[lt]),Ce.length===nr)return Ce;he=ve=ot}}return V(Ce,q(He,ve)),Ce}]},!Oe,ne)},function(a,f,o){var p=o(36),d=o(7),y=o(15),g=o(95),E=o(44),_=o(34),T=o(143),P=o(58),A=o(88),N=o(130),M=o(19),I=o(72).f,G=o(51).f,W=o(37).f,de=o(197),xe=o(159).trim,ce="Number",ne=d.Number,ue=ne.prototype,$=d.TypeError,B=y("".slice),Y=y("".charCodeAt),V=function(Ne){var Re=N(Ne,"number");return typeof Re=="bigint"?Re:q(Re)},q=function(Ne){var Re,fe,je,He,ft,Pt,Wt,bt,xt=N(Ne,"number");if(A(xt))throw $("Cannot convert a Symbol value to a number");if(typeof xt=="string"&&xt.length>2){if(xt=xe(xt),(Re=Y(xt,0))===43||Re===45){if((fe=Y(xt,2))===88||fe===120)return NaN}else if(Re===48){switch(Y(xt,1)){case 66:case 98:je=2,He=49;break;case 79:case 111:je=8,He=55;break;default:return+xt}for(Pt=(ft=B(xt,2)).length,Wt=0;Wt<Pt;Wt++)if((bt=Y(ft,Wt))<48||bt>He)return NaN;return parseInt(ft,je)}}return+xt};if(g(ce,!ne(" 0o1")||!ne("0b1")||ne("+0x1"))){for(var Oe,Ge=function(Ne){var Re=arguments.length<1?0:ne(V(Ne)),fe=this;return P(ue,fe)&&M(function(){de(fe)})?T(Object(Re),fe,Ge):Re},ie=p?I(ne):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),se=0;ie.length>se;se++)_(ne,Oe=ie[se])&&!_(Ge,Oe)&&W(Ge,Oe,G(ne,Oe));Ge.prototype=ue,ue.constructor=Ge,E(d,ce,Ge)}},function(a,f,o){o(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(a,f,o){var p=o(17),d=o(214),y=o(83);p({target:"Array",proto:!0},{fill:d}),y("fill")},function(a,f,o){var p=o(7),d=o(15),y=o(19),g=o(50),E=p.Object,_=d("".split);a.exports=y(function(){return!E("z").propertyIsEnumerable(0)})?function(T){return g(T)=="String"?_(T,""):E(T)}:E},function(a,f){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}a.exports=o},function(a,f,o){var p=o(27),d=o(54),y=o(37),g=p("unscopables"),E=Array.prototype;E[g]==null&&y.f(E,g,{configurable:!0,value:d(null)}),a.exports=function(_){E[g][_]=!0}},function(a,f,o){var p=o(64),d=o(107);(a.exports=function(y,g){return d[y]||(d[y]=g!==void 0?g:{})})("versions",[]).push({version:"3.19.3",mode:p?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(a,f,o){var p=o(15),d=0,y=Math.random(),g=p(1 .toString);a.exports=function(E){return"Symbol("+(E===void 0?"":E)+")_"+g(++d+y,36)}},function(a,f,o){var p=o(7),d=o(33),y=p.document,g=d(y)&&d(y.createElement);a.exports=function(E){return g?y.createElement(E):{}}},function(a,f,o){var p=o(130),d=o(88);a.exports=function(y){var g=p(y,"string");return d(g)?g:g+""}},function(a,f,o){var p=o(7),d=o(46),y=o(28),g=o(58),E=o(128),_=p.Object;a.exports=E?function(T){return typeof T=="symbol"}:function(T){var P=d("Symbol");return y(P)&&g(P.prototype,_(T))}},function(a,f,o){var p=o(7).String;a.exports=function(d){try{return p(d)}catch{return"Object"}}},function(a,f,o){var p=o(68),d=Math.min;a.exports=function(y){return y>0?d(p(y),9007199254740991):0}},function(a,f,o){var p=o(84),d=o(85),y=p("keys");a.exports=function(g){return y[g]||(y[g]=d(g))}},function(a,f,o){var p=o(15),d=o(28),y=o(107),g=p(Function.toString);d(y.inspectSource)||(y.inspectSource=function(E){return g(E)}),a.exports=y.inspectSource},function(a,f,o){var p={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,y=d&&!p.call({1:2},1);f.f=y?function(g){var E=d(this,g);return!!E&&E.enumerable}:p},function(a,f,o){var p=o(36),d=o(34),y=Function.prototype,g=p&&Object.getOwnPropertyDescriptor,E=d(y,"name"),_=E&&function(){}.name==="something",T=E&&(!p||p&&g(y,"name").configurable);a.exports={EXISTS:E,PROPER:_,CONFIGURABLE:T}},function(a,f,o){var p=o(19),d=o(28),y=/#|\.prototype\./,g=function(A,N){var M=_[E(A)];return M==P||M!=T&&(d(N)?p(N):!!N)},E=g.normalize=function(A){return String(A).replace(y,".").toLowerCase()},_=g.data={},T=g.NATIVE="N",P=g.POLYFILL="P";a.exports=g},function(a,f,o){var p=o(7),d=o(34),y=o(28),g=o(38),E=o(91),_=o(137),T=E("IE_PROTO"),P=p.Object,A=P.prototype;a.exports=_?P.getPrototypeOf:function(N){var M=g(N);if(d(M,T))return M[T];var I=M.constructor;return y(I)&&M instanceof I?I.prototype:M instanceof P?A:null}},function(a,f,o){var p=o(15),d=o(32),y=o(173);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var g,E=!1,_={};try{(g=p(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),E=_ instanceof Array}catch{}return function(T,P){return d(T),y(P),E?g(T,P):T.__proto__=P,T}}():void 0)},function(a,f,o){var p=o(7),d=o(116),y=o(28),g=o(50),E=o(27)("toStringTag"),_=p.Object,T=g(function(){return arguments}())=="Arguments";a.exports=d?g:function(P){var A,N,M;return P===void 0?"Undefined":P===null?"Null":typeof(N=function(I,G){try{return I[G]}catch{}}(A=_(P),E))=="string"?N:T?g(A):(M=g(A))=="Object"&&y(A.callee)?"Arguments":M}},function(a,f,o){var p=o(50);a.exports=Array.isArray||function(d){return p(d)=="Array"}},function(a,f,o){var p=o(15),d=o(19),y=o(28),g=o(98),E=o(46),_=o(92),T=function(){},P=[],A=E("Reflect","construct"),N=/^\s*(?:class|function)\b/,M=p(N.exec),I=!N.exec(T),G=function(W){if(!y(W))return!1;try{return A(T,P,W),!0}catch{return!1}};a.exports=!A||d(function(){var W;return G(G.call)||!G(Object)||!G(function(){W=!0})||W})?function(W){if(!y(W))return!1;switch(g(W)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return I||!!M(N,_(W))}:G},function(a,f,o){var p=o(15);a.exports=p([].slice)},function(a,f,o){var p,d,y=o(35),g=o(15),E=o(41),_=o(185),T=o(151),P=o(84),A=o(54),N=o(56).get,M=o(186),I=o(187),G=P("native-string-replace",String.prototype.replace),W=RegExp.prototype.exec,de=W,xe=g("".charAt),ce=g("".indexOf),ne=g("".replace),ue=g("".slice),$=(d=/b*/g,y(W,p=/a/,"a"),y(W,d,"a"),p.lastIndex!==0||d.lastIndex!==0),B=T.BROKEN_CARET,Y=/()??/.exec("")[1]!==void 0;($||Y||B||M||I)&&(de=function(V){var q,Oe,Ge,ie,se,Ne,Re,fe=this,je=N(fe),He=E(V),ft=je.raw;if(ft)return ft.lastIndex=fe.lastIndex,q=y(de,ft,He),fe.lastIndex=ft.lastIndex,q;var Pt=je.groups,Wt=B&&fe.sticky,bt=y(_,fe),xt=fe.source,nr=0,ve=He;if(Wt&&(bt=ne(bt,"y",""),ce(bt,"g")===-1&&(bt+="g"),ve=ue(He,fe.lastIndex),fe.lastIndex>0&&(!fe.multiline||fe.multiline&&xe(He,fe.lastIndex-1)!==`
`)&&(xt="(?: "+xt+")",ve=" "+ve,nr++),Oe=new RegExp("^(?:"+xt+")",bt)),Y&&(Oe=new RegExp("^"+xt+"$(?!\\s)",bt)),$&&(Ge=fe.lastIndex),ie=y(W,Wt?Oe:fe,ve),Wt?ie?(ie.input=ue(ie.input,nr),ie[0]=ue(ie[0],nr),ie.index=fe.lastIndex,fe.lastIndex+=ie[0].length):fe.lastIndex=0:$&&ie&&(fe.lastIndex=fe.global?ie.index+ie[0].length:Ge),Y&&ie&&ie.length>1&&y(G,ie[0],Oe,function(){for(se=1;se<arguments.length-2;se++)arguments[se]===void 0&&(ie[se]=void 0)}),ie&&Pt)for(ie.groups=Ne=A(null),se=0;se<Pt.length;se++)Ne[(Re=Pt[se])[0]]=ie[Re[1]];return ie}),a.exports=de},function(a,f,o){var p=o(17),d=o(7),y=o(67),g=o(68),E=o(43),_=o(38),T=o(119),P=o(61),A=o(75)("splice"),N=d.TypeError,M=Math.max,I=Math.min,G=9007199254740991,W="Maximum allowed length exceeded";p({target:"Array",proto:!0,forced:!A},{splice:function(de,xe){var ce,ne,ue,$,B,Y,V=_(this),q=E(V),Oe=y(de,q),Ge=arguments.length;if(Ge===0?ce=ne=0:Ge===1?(ce=0,ne=q-Oe):(ce=Ge-2,ne=I(M(g(xe),0),q-Oe)),q+ce-ne>G)throw N(W);for(ue=T(V,ne),$=0;$<ne;$++)(B=Oe+$)in V&&P(ue,$,V[B]);if(ue.length=ne,ce<ne){for($=Oe;$<q-ne;$++)Y=$+ce,(B=$+ne)in V?V[Y]=V[B]:delete V[Y];for($=q;$>q-ne+ce;$--)delete V[$-1]}else if(ce>ne)for($=q-ne;$>Oe;$--)Y=$+ce-1,(B=$+ne-1)in V?V[Y]=V[B]:delete V[Y];for($=0;$<ce;$++)V[$+Oe]=arguments[$+2];return V.length=q-ne+ce,ue}})},function(a,f,o){var p=o(17),d=o(202);p({target:"String",proto:!0,forced:o(203)("anchor")},{anchor:function(y){return d(this,"a","name",y)}})},function(a,f,o){(function(p){var d=typeof p=="object"&&p&&p.Object===Object&&p;f.a=d}).call(this,o(82))},function(a,f,o){(function(p){var d=o(31),y=u&&!u.nodeType&&u,g=y&&typeof p=="object"&&p&&!p.nodeType&&p,E=g&&g.exports===y?d.a.Buffer:void 0,_=E?E.allocUnsafe:void 0;f.a=function(T,P){if(P)return T.slice();var A=T.length,N=_?_(A):new T.constructor(A);return T.copy(N),N}}).call(this,o(121)(a))},function(a,f,o){var p=o(7),d=o(108),y="__core-js_shared__",g=p[y]||d(y,{});a.exports=g},function(a,f,o){var p=o(7),d=Object.defineProperty;a.exports=function(y,g){try{d(p,y,{value:g,configurable:!0,writable:!0})}catch{p[y]=g}return g}},function(a,f,o){var p=o(65),d=o(19);a.exports=!!Object.getOwnPropertySymbols&&!d(function(){var y=Symbol();return!String(y)||!(Object(y)instanceof Symbol)||!Symbol.sham&&p&&p<41})},function(a,f){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(a,f,o){var p=o(17),d=o(35),y=o(64),g=o(94),E=o(28),_=o(172),T=o(96),P=o(97),A=o(73),N=o(57),M=o(44),I=o(27),G=o(70),W=o(136),de=g.PROPER,xe=g.CONFIGURABLE,ce=W.IteratorPrototype,ne=W.BUGGY_SAFARI_ITERATORS,ue=I("iterator"),$="keys",B="values",Y="entries",V=function(){return this};a.exports=function(q,Oe,Ge,ie,se,Ne,Re){_(Ge,Oe,ie);var fe,je,He,ft=function(he){if(he===se&&nr)return nr;if(!ne&&he in bt)return bt[he];switch(he){case $:case B:case Y:return function(){return new Ge(this,he)}}return function(){return new Ge(this)}},Pt=Oe+" Iterator",Wt=!1,bt=q.prototype,xt=bt[ue]||bt["@@iterator"]||se&&bt[se],nr=!ne&&xt||ft(se),ve=Oe=="Array"&&bt.entries||xt;if(ve&&(fe=T(ve.call(new q)))!==Object.prototype&&fe.next&&(y||T(fe)===ce||(P?P(fe,ce):E(fe[ue])||M(fe,ue,V)),A(fe,Pt,!0,!0),y&&(G[Pt]=V)),de&&se==B&&xt&&xt.name!==B&&(!y&&xe?N(bt,"name",B):(Wt=!0,nr=function(){return d(xt,this)})),se)if(je={values:ft(B),keys:Ne?nr:ft($),entries:ft(Y)},Re)for(He in je)(ne||Wt||!(He in bt))&&M(bt,He,je[He]);else p({target:Oe,proto:!0,forced:ne||Wt},je);return y&&!Re||bt[ue]===nr||M(bt,ue,nr,{name:se}),G[Oe]=nr,je}},function(a,f){f.f=Object.getOwnPropertySymbols},function(a,f,o){var p=o(7),d=o(67),y=o(43),g=o(61),E=p.Array,_=Math.max;a.exports=function(T,P,A){for(var N=y(T),M=d(P,N),I=d(A===void 0?N:A,N),G=E(_(I-M,0)),W=0;M<I;M++,W++)g(G,W,T[M]);return G.length=W,G}},function(a,f,o){var p=o(7),d=o(62),y=o(35),g=o(32),E=o(89),_=o(140),T=o(43),P=o(58),A=o(141),N=o(115),M=o(142),I=p.TypeError,G=function(de,xe){this.stopped=de,this.result=xe},W=G.prototype;a.exports=function(de,xe,ce){var ne,ue,$,B,Y,V,q,Oe=ce&&ce.that,Ge=!(!ce||!ce.AS_ENTRIES),ie=!(!ce||!ce.IS_ITERATOR),se=!(!ce||!ce.INTERRUPTED),Ne=d(xe,Oe),Re=function(je){return ne&&M(ne,"normal",je),new G(!0,je)},fe=function(je){return Ge?(g(je),se?Ne(je[0],je[1],Re):Ne(je[0],je[1])):se?Ne(je,Re):Ne(je)};if(ie)ne=de;else{if(!(ue=N(de)))throw I(E(de)+" is not iterable");if(_(ue)){for($=0,B=T(de);B>$;$++)if((Y=fe(de[$]))&&P(W,Y))return Y;return new G(!1)}ne=A(de,ue)}for(V=ne.next;!(q=y(V,ne)).done;){try{Y=fe(q.value)}catch(je){M(ne,"throw",je)}if(typeof Y=="object"&&Y&&P(W,Y))return Y}return new G(!1)}},function(a,f,o){var p=o(98),d=o(59),y=o(70),g=o(27)("iterator");a.exports=function(E){if(E!=null)return d(E,g)||d(E,"@@iterator")||y[p(E)]}},function(a,f,o){var p={};p[o(27)("toStringTag")]="z",a.exports=String(p)==="[object z]"},function(a,f,o){var p=o(7),d=o(58),y=p.TypeError;a.exports=function(g,E){if(d(E,g))return g;throw y("Incorrect invocation")}},function(a,f,o){var p=o(27)("iterator"),d=!1;try{var y=0,g={next:function(){return{done:!!y++}},return:function(){d=!0}};g[p]=function(){return this},Array.from(g,function(){throw 2})}catch{}a.exports=function(E,_){if(!_&&!d)return!1;var T=!1;try{var P={};P[p]=function(){return{next:function(){return{done:T=!0}}}},E(P)}catch{}return T}},function(a,f,o){var p=o(181);a.exports=function(d,y){return new(p(d))(y===0?0:y)}},function(a,f,o){var p=o(19);a.exports=function(d,y){var g=[][d];return!!g&&p(function(){g.call(null,y||function(){throw 1},1)})}},function(a,f){a.exports=function(o){if(!o.webpackPolyfill){var p=Object.create(o);p.children||(p.children=[]),Object.defineProperty(p,"loaded",{enumerable:!0,get:function(){return p.l}}),Object.defineProperty(p,"id",{enumerable:!0,get:function(){return p.i}}),Object.defineProperty(p,"exports",{enumerable:!0}),p.webpackPolyfill=1}return p}},function(a,f,o){o(18);var p=o(15),d=o(44),y=o(102),g=o(19),E=o(27),_=o(57),T=E("species"),P=RegExp.prototype;a.exports=function(A,N,M,I){var G=E(A),W=!g(function(){var ne={};return ne[G]=function(){return 7},""[A](ne)!=7}),de=W&&!g(function(){var ne=!1,ue=/a/;return A==="split"&&((ue={}).constructor={},ue.constructor[T]=function(){return ue},ue.flags="",ue[G]=/./[G]),ue.exec=function(){return ne=!0,null},ue[G](""),!ne});if(!W||!de||M){var xe=p(/./[G]),ce=N(G,""[A],function(ne,ue,$,B,Y){var V=p(ne),q=ue.exec;return q===y||q===P.exec?W&&!Y?{done:!0,value:xe(ue,$,B)}:{done:!0,value:V($,ue,B)}:{done:!1}});d(String.prototype,A,ce[0]),d(P,G,ce[1])}I&&_(P[G],"sham",!0)}},function(a,f,o){var p=o(146).charAt;a.exports=function(d,y,g){return y+(g?p(d,y).length:1)}},function(a,f,o){var p=o(7),d=o(35),y=o(32),g=o(28),E=o(50),_=o(102),T=p.TypeError;a.exports=function(P,A){var N=P.exec;if(g(N)){var M=d(N,P,A);return M!==null&&y(M),M}if(E(P)==="RegExp")return d(_,P,A);throw T("RegExp#exec called on incompatible receiver")}},function(a,f,o){var p=o(76),d=o(35),y=o(15),g=o(122),E=o(19),_=o(32),T=o(28),P=o(68),A=o(90),N=o(41),M=o(45),I=o(123),G=o(59),W=o(198),de=o(124),xe=o(27)("replace"),ce=Math.max,ne=Math.min,ue=y([].concat),$=y([].push),B=y("".indexOf),Y=y("".slice),V="a".replace(/./,"$0")==="$0",q=!!/./[xe]&&/./[xe]("a","$0")==="";g("replace",function(Oe,Ge,ie){var se=q?"$":"$0";return[function(Ne,Re){var fe=M(this),je=Ne==null?void 0:G(Ne,xe);return je?d(je,Ne,fe,Re):d(Ge,N(fe),Ne,Re)},function(Ne,Re){var fe=_(this),je=N(Ne);if(typeof Re=="string"&&B(Re,se)===-1&&B(Re,"$<")===-1){var He=ie(Ge,fe,je,Re);if(He.done)return He.value}var ft=T(Re);ft||(Re=N(Re));var Pt=fe.global;if(Pt){var Wt=fe.unicode;fe.lastIndex=0}for(var bt=[];;){var xt=de(fe,je);if(xt===null||($(bt,xt),!Pt))break;N(xt[0])===""&&(fe.lastIndex=I(je,A(fe.lastIndex),Wt))}for(var nr,ve="",he=0,Ce=0;Ce<bt.length;Ce++){for(var ot=N((xt=bt[Ce])[0]),Tt=ce(ne(P(xt.index),je.length),0),lt=[],rr=1;rr<xt.length;rr++)$(lt,(nr=xt[rr])===void 0?nr:String(nr));var pr=xt.groups;if(ft){var ar=ue([ot],lt,Tt,je);pr!==void 0&&$(ar,pr);var Jt=N(p(Re,void 0,ar))}else Jt=W(ot,je,Tt,lt,pr,Re);Tt>=he&&(ve+=Y(je,he,Tt)+Jt,he=Tt+ot.length)}return ve+Y(je,he)}]},!!E(function(){var Oe=/./;return Oe.exec=function(){var Ge=[];return Ge.groups={a:"7"},Ge},"".replace(Oe,"$<a>")!=="7"})||!V||q)},function(a,f,o){var p=o(50),d=o(7);a.exports=p(d.process)=="process"},function(a,f,o){o(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(a,f,o){var p=o(109);a.exports=p&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(a,f,o){var p=o(36),d=o(19),y=o(86);a.exports=!p&&!d(function(){return Object.defineProperty(y("div"),"a",{get:function(){return 7}}).a!=7})},function(a,f,o){var p=o(7),d=o(35),y=o(33),g=o(88),E=o(59),_=o(170),T=o(27),P=p.TypeError,A=T("toPrimitive");a.exports=function(N,M){if(!y(N)||g(N))return N;var I,G=E(N,A);if(G){if(M===void 0&&(M="default"),I=d(G,N,M),!y(I)||g(I))return I;throw P("Can't convert object to primitive value")}return M===void 0&&(M="number"),_(N,M)}},function(a,f,o){var p=o(15),d=o(34),y=o(40),g=o(132).indexOf,E=o(69),_=p([].push);a.exports=function(T,P){var A,N=y(T),M=0,I=[];for(A in N)!d(E,A)&&d(N,A)&&_(I,A);for(;P.length>M;)d(N,A=P[M++])&&(~g(I,A)||_(I,A));return I}},function(a,f,o){var p=o(40),d=o(67),y=o(43),g=function(E){return function(_,T,P){var A,N=p(_),M=y(N),I=d(P,M);if(E&&T!=T){for(;M>I;)if((A=N[I++])!=A)return!0}else for(;M>I;I++)if((E||I in N)&&N[I]===T)return E||I||0;return!E&&-1}};a.exports={includes:g(!0),indexOf:g(!1)}},function(a,f,o){var p=o(46);a.exports=p("document","documentElement")},function(a,f,o){var p=o(34),d=o(135),y=o(51),g=o(37);a.exports=function(E,_){for(var T=d(_),P=g.f,A=y.f,N=0;N<T.length;N++){var M=T[N];p(E,M)||P(E,M,A(_,M))}}},function(a,f,o){var p=o(46),d=o(15),y=o(72),g=o(112),E=o(32),_=d([].concat);a.exports=p("Reflect","ownKeys")||function(T){var P=y.f(E(T)),A=g.f;return A?_(P,A(T)):P}},function(a,f,o){var p,d,y,g=o(19),E=o(28),_=o(54),T=o(96),P=o(44),A=o(27),N=o(64),M=A("iterator"),I=!1;[].keys&&("next"in(y=[].keys())?(d=T(T(y)))!==Object.prototype&&(p=d):I=!0),p==null||g(function(){var G={};return p[M].call(G)!==G})?p={}:N&&(p=_(p)),E(p[M])||P(p,M,function(){return this}),a.exports={IteratorPrototype:p,BUGGY_SAFARI_ITERATORS:I}},function(a,f,o){var p=o(19);a.exports=!p(function(){function d(){}return d.prototype.constructor=null,Object.getPrototypeOf(new d)!==d.prototype})},function(a,f,o){var p=o(17),d=o(15),y=o(69),g=o(33),E=o(34),_=o(37).f,T=o(72),P=o(139),A=o(175),N=o(85),M=o(177),I=!1,G=N("meta"),W=0,de=function(ce){_(ce,G,{value:{objectID:"O"+W++,weakData:{}}})},xe=a.exports={enable:function(){xe.enable=function(){},I=!0;var ce=T.f,ne=d([].splice),ue={};ue[G]=1,ce(ue).length&&(T.f=function($){for(var B=ce($),Y=0,V=B.length;Y<V;Y++)if(B[Y]===G){ne(B,Y,1);break}return B},p({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:P.f}))},fastKey:function(ce,ne){if(!g(ce))return typeof ce=="symbol"?ce:(typeof ce=="string"?"S":"P")+ce;if(!E(ce,G)){if(!A(ce))return"F";if(!ne)return"E";de(ce)}return ce[G].objectID},getWeakData:function(ce,ne){if(!E(ce,G)){if(!A(ce))return!0;if(!ne)return!1;de(ce)}return ce[G].weakData},onFreeze:function(ce){return M&&I&&A(ce)&&!E(ce,G)&&de(ce),ce}};y[G]=!0},function(a,f,o){var p=o(50),d=o(40),y=o(72).f,g=o(113),E=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(_){return E&&p(_)=="Window"?function(T){try{return y(T)}catch{return g(E)}}(_):y(d(_))}},function(a,f,o){var p=o(27),d=o(70),y=p("iterator"),g=Array.prototype;a.exports=function(E){return E!==void 0&&(d.Array===E||g[y]===E)}},function(a,f,o){var p=o(7),d=o(35),y=o(55),g=o(32),E=o(89),_=o(115),T=p.TypeError;a.exports=function(P,A){var N=arguments.length<2?_(P):A;if(y(N))return g(d(N,P));throw T(E(P)+" is not iterable")}},function(a,f,o){var p=o(35),d=o(32),y=o(59);a.exports=function(g,E,_){var T,P;d(g);try{if(!(T=y(g,"return"))){if(E==="throw")throw _;return _}T=p(T,g)}catch(A){P=!0,T=A}if(E==="throw")throw _;if(P)throw T;return d(T),_}},function(a,f,o){var p=o(28),d=o(33),y=o(97);a.exports=function(g,E,_){var T,P;return y&&p(T=E.constructor)&&T!==_&&d(P=T.prototype)&&P!==_.prototype&&y(g,P),g}},function(a,f,o){var p=o(44);a.exports=function(d,y,g){for(var E in y)p(d,E,y[E],g);return d}},function(a,f,o){var p=o(46),d=o(37),y=o(27),g=o(36),E=y("species");a.exports=function(_){var T=p(_),P=d.f;g&&T&&!T[E]&&P(T,E,{configurable:!0,get:function(){return this}})}},function(a,f,o){var p=o(15),d=o(68),y=o(41),g=o(45),E=p("".charAt),_=p("".charCodeAt),T=p("".slice),P=function(A){return function(N,M){var I,G,W=y(g(N)),de=d(M),xe=W.length;return de<0||de>=xe?A?"":void 0:(I=_(W,de))<55296||I>56319||de+1===xe||(G=_(W,de+1))<56320||G>57343?A?E(W,de):I:A?T(W,de,de+2):G-56320+(I-55296<<10)+65536}};a.exports={codeAt:P(!1),charAt:P(!0)}},function(a,f){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(a,f,o){var p=o(86)("span").classList,d=p&&p.constructor&&p.constructor.prototype;a.exports=d===Object.prototype?void 0:d},function(a,f,o){var p=o(27);f.f=p},function(a,f,o){var p=o(182),d=o(34),y=o(149),g=o(37).f;a.exports=function(E){var _=p.Symbol||(p.Symbol={});d(_,E)||g(_,E,{value:y.f(E)})}},function(a,f,o){var p=o(19),d=o(7).RegExp,y=p(function(){var _=d("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),g=y||p(function(){return!d("a","y").sticky}),E=y||p(function(){var _=d("^r","gy");return _.lastIndex=2,_.exec("str")!=null});a.exports={BROKEN_CARET:E,MISSED_STICKY:g,UNSUPPORTED_Y:y}},function(a,f,o){var p=o(17),d=o(132).includes,y=o(83);p({target:"Array",proto:!0},{includes:function(g){return d(this,g,arguments.length>1?arguments[1]:void 0)}}),y("includes")},function(a,f,o){var p=o(17),d=o(15),y=o(194),g=o(45),E=o(41),_=o(195),T=d("".indexOf);p({target:"String",proto:!0,forced:!_("includes")},{includes:function(P){return!!~T(E(g(this)),E(y(P)),arguments.length>1?arguments[1]:void 0)}})},function(a,f,o){var p=o(33),d=o(50),y=o(27)("match");a.exports=function(g){var E;return p(g)&&((E=g[y])!==void 0?!!E:d(g)=="RegExp")}},function(a,f){var o,p,d=a.exports={};function y(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}function E(W){if(o===setTimeout)return setTimeout(W,0);if((o===y||!o)&&setTimeout)return o=setTimeout,setTimeout(W,0);try{return o(W,0)}catch{try{return o.call(null,W,0)}catch{return o.call(this,W,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:y}catch{o=y}try{p=typeof clearTimeout=="function"?clearTimeout:g}catch{p=g}})();var _,T=[],P=!1,A=-1;function N(){P&&_&&(P=!1,_.length?T=_.concat(T):A=-1,T.length&&M())}function M(){if(!P){var W=E(N);P=!0;for(var de=T.length;de;){for(_=T,T=[];++A<de;)_&&_[A].run();A=-1,de=T.length}_=null,P=!1,function(xe){if(p===clearTimeout)return clearTimeout(xe);if((p===g||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(xe);try{p(xe)}catch{try{return p.call(null,xe)}catch{return p.call(this,xe)}}}(W)}}function I(W,de){this.fun=W,this.array=de}function G(){}d.nextTick=function(W){var de=new Array(arguments.length-1);if(arguments.length>1)for(var xe=1;xe<arguments.length;xe++)de[xe-1]=arguments[xe];T.push(new I(W,de)),T.length!==1||P||E(M)},I.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=G,d.addListener=G,d.once=G,d.off=G,d.removeListener=G,d.removeAllListeners=G,d.emit=G,d.prependListener=G,d.prependOnceListener=G,d.listeners=function(W){return[]},d.binding=function(W){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(W){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(a,f,o){var p=o(32),d=o(157),y=o(27)("species");a.exports=function(g,E){var _,T=p(g).constructor;return T===void 0||(_=p(T)[y])==null?E:d(_)}},function(a,f,o){var p=o(7),d=o(100),y=o(89),g=p.TypeError;a.exports=function(E){if(d(E))return E;throw g(y(E)+" is not a constructor")}},function(a,f,o){var p=o(17),d=o(159).trim;p({target:"String",proto:!0,forced:o(196)("trim")},{trim:function(){return d(this)}})},function(a,f,o){var p=o(15),d=o(45),y=o(41),g=o(160),E=p("".replace),_="["+g+"]",T=RegExp("^"+_+_+"*"),P=RegExp(_+_+"*$"),A=function(N){return function(M){var I=y(d(M));return 1&N&&(I=E(I,T,"")),2&N&&(I=E(I,P,"")),I}};a.exports={start:A(1),end:A(2),trim:A(3)}},function(a,f){a.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(a,f,o){var p=o(35),d=o(122),y=o(32),g=o(90),E=o(41),_=o(45),T=o(59),P=o(123),A=o(124);d("match",function(N,M,I){return[function(G){var W=_(this),de=G==null?void 0:T(G,N);return de?p(de,G,W):new RegExp(G)[N](E(W))},function(G){var W=y(this),de=E(G),xe=I(M,W,de);if(xe.done)return xe.value;if(!W.global)return A(W,de);var ce=W.unicode;W.lastIndex=0;for(var ne,ue=[],$=0;(ne=A(W,de))!==null;){var B=E(ne[0]);ue[$]=B,B===""&&(W.lastIndex=P(de,g(W.lastIndex),ce)),$++}return $===0?null:ue}]})},function(a,f,o){var p=o(17),d=Math.hypot,y=Math.abs,g=Math.sqrt;p({target:"Math",stat:!0,forced:!!d&&d(1/0,NaN)!==1/0},{hypot:function(E,_){for(var T,P,A=0,N=0,M=arguments.length,I=0;N<M;)I<(T=y(arguments[N++]))?(A=A*(P=I/T)*P+1,I=T):A+=T>0?(P=T/I)*P:T;return I===1/0?1/0:I*g(A)}})},function(a,f,o){var p,d,y,g,E=o(7),_=o(76),T=o(62),P=o(28),A=o(34),N=o(19),M=o(133),I=o(101),G=o(86),W=o(164),de=o(126),xe=E.setImmediate,ce=E.clearImmediate,ne=E.process,ue=E.Dispatch,$=E.Function,B=E.MessageChannel,Y=E.String,V=0,q={},Oe="onreadystatechange";try{p=E.location}catch{}var Ge=function(Re){if(A(q,Re)){var fe=q[Re];delete q[Re],fe()}},ie=function(Re){return function(){Ge(Re)}},se=function(Re){Ge(Re.data)},Ne=function(Re){E.postMessage(Y(Re),p.protocol+"//"+p.host)};xe&&ce||(xe=function(Re){var fe=I(arguments,1);return q[++V]=function(){_(P(Re)?Re:$(Re),void 0,fe)},d(V),V},ce=function(Re){delete q[Re]},de?d=function(Re){ne.nextTick(ie(Re))}:ue&&ue.now?d=function(Re){ue.now(ie(Re))}:B&&!W?(g=(y=new B).port2,y.port1.onmessage=se,d=T(g.postMessage,g)):E.addEventListener&&P(E.postMessage)&&!E.importScripts&&p&&p.protocol!=="file:"&&!N(Ne)?(d=Ne,E.addEventListener("message",se,!1)):d=Oe in G("script")?function(Re){M.appendChild(G("script")).onreadystatechange=function(){M.removeChild(this),Ge(Re)}}:function(Re){setTimeout(ie(Re),0)}),a.exports={set:xe,clear:ce}},function(a,f,o){var p=o(53);a.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(p)},function(a,f,o){var p=o(55),d=function(y){var g,E;this.promise=new y(function(_,T){if(g!==void 0||E!==void 0)throw TypeError("Bad Promise constructor");g=_,E=T}),this.resolve=p(g),this.reject=p(E)};a.exports.f=function(y){return new d(y)}},function(a,f,o){f.a=function(){return!1}},function(a,f,o){(function(p){o.d(f,"a",function(){return ne});var d=o(1);function y(B){throw new Error("[mobx-utils] "+B)}function g(B,Y){Y===void 0&&(Y="Illegal state"),B||y(Y)}var E=function(B){return B&&B!==Object.prototype&&Object.getOwnPropertyNames(B).concat(E(Object.getPrototypeOf(B))||[])},_=function(B){return function(Y){var V=E(Y);return V.filter(function(q,Oe){return V.indexOf(q)===Oe})}(B).filter(function(Y){return Y!=="constructor"&&!~Y.indexOf("__")})},T="pending",P="fulfilled",A="rejected";function N(B){switch(this.state){case T:return B.pending&&B.pending(this.value);case A:return B.rejected&&B.rejected(this.value);case P:return B.fulfilled?B.fulfilled(this.value):this.value}}function M(B,Y){if(g(arguments.length<=2,"fromPromise expects up to two arguments"),g(typeof B=="function"||typeof B=="object"&&B&&typeof B.then=="function","Please pass a promise or function to fromPromise"),B.isPromiseBasedObservable===!0)return B;typeof B=="function"&&(B=new Promise(B));var V=B;B.then(Object(d.k)("observableFromPromise-resolve",function(Oe){V.value=Oe,V.state=P}),Object(d.k)("observableFromPromise-reject",function(Oe){V.value=Oe,V.state=A})),V.isPromiseBasedObservable=!0,V.case=N;var q=Y&&Y.state===P?Y.value:void 0;return Object(d.q)(V,{value:q,state:T},{},{deep:!1}),V}(function(B){B.reject=Object(d.k)("fromPromise.reject",function(Y){var V=B(Promise.reject(Y));return V.state=A,V.value=Y,V}),B.resolve=Object(d.k)("fromPromise.resolve",function(Y){Y===void 0&&(Y=void 0);var V=B(Promise.resolve(Y));return V.state=P,V.value=Y,V})})(M||(M={}));var I=function(B,Y,V,q){var Oe,Ge=arguments.length,ie=Ge<3?Y:q===null?q=Object.getOwnPropertyDescriptor(Y,V):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(B,Y,V,q);else for(var se=B.length-1;se>=0;se--)(Oe=B[se])&&(ie=(Ge<3?Oe(ie):Ge>3?Oe(Y,V,ie):Oe(Y,V))||ie);return Ge>3&&ie&&Object.defineProperty(Y,V,ie),ie};(function(){function B(Y,V){var q=this;Object(d.G)(function(){q.current=V,q.subscription=Y.subscribe(q)})}B.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},B.prototype.next=function(Y){this.current=Y},B.prototype.complete=function(){this.dispose()},B.prototype.error=function(Y){this.current=Y,this.dispose()},I([d.C.ref],B.prototype,"current",void 0),I([d.k.bound],B.prototype,"next",null),I([d.k.bound],B.prototype,"complete",null),I([d.k.bound],B.prototype,"error",null)})();var G=function(){return G=Object.assign||function(B){for(var Y,V=1,q=arguments.length;V<q;V++)for(var Oe in Y=arguments[V])Object.prototype.hasOwnProperty.call(Y,Oe)&&(B[Oe]=Y[Oe]);return B},G.apply(this,arguments)},W=function(B,Y,V,q){var Oe,Ge=arguments.length,ie=Ge<3?Y:q===null?q=Object.getOwnPropertyDescriptor(Y,V):q;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ie=Reflect.decorate(B,Y,V,q);else for(var se=B.length-1;se>=0;se--)(Oe=B[se])&&(ie=(Ge<3?Oe(ie):Ge>3?Oe(Y,V,ie):Oe(Y,V))||ie);return Ge>3&&ie&&Object.defineProperty(Y,V,ie),ie},de=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function B(Y){var V=this;this.model=Y,this.localValues=d.C.map({}),this.localComputedValues=d.C.map({}),this.isPropertyDirty=function(q){return V.localValues.has(q)},g(Object(d.A)(Y),"createViewModel expects an observable object"),_(Y).forEach(function(q){if(q!==d.a&&q!=="__mobxDidRunLazyInitializers"){if(g(de.indexOf(q)===-1,"The propertyname "+q+" is reserved and cannot be used with viewModels"),Object(d.w)(Y,q)){var Oe=Object(d.h)(Y,q).derivation;V.localComputedValues.set(q,Object(d.m)(Oe.bind(V)))}var Ge=Object.getOwnPropertyDescriptor(Y,q),ie=Ge?{enumerable:Ge.enumerable}:{};Object.defineProperty(V,q,G(G({},ie),{configurable:!0,get:function(){return Object(d.w)(Y,q)?V.localComputedValues.get(q).get():V.isPropertyDirty(q)?V.localValues.get(q):V.model[q]},set:Object(d.k)(function(se){se!==V.model[q]?V.localValues.set(q,se):V.localValues.delete(q)})}))}})}Object.defineProperty(B.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(B.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),B.prototype.submit=function(){var Y=this;Object(d.B)(this.localValues).forEach(function(V){var q=Y.localValues.get(V),Oe=Y.model[V];Object(d.y)(Oe)?Oe.replace(q):Object(d.z)(Oe)?(Oe.clear(),Oe.merge(q)):Object(d.v)(q)||(Y.model[V]=q)}),this.localValues.clear()},B.prototype.reset=function(){this.localValues.clear()},B.prototype.resetProperty=function(Y){this.localValues.delete(Y)},W([d.m],B.prototype,"isDirty",null),W([d.m],B.prototype,"changedValues",null),W([d.k.bound],B.prototype,"submit",null),W([d.k.bound],B.prototype,"reset",null),W([d.k.bound],B.prototype,"resetProperty",null)})();function xe(B){if(!B)return"ROOT";for(var Y=[];B.parent;)Y.push(B.path),B=B.parent;return Y.reverse().join("/")}function ce(B){return Object(d.A)(B)||Object(d.y)(B)||Object(d.z)(B)}function ne(B,Y){var V=new WeakMap;function q(ie){var se=V.get(ie.object);(function(Ne,Re){switch(Ne.type){case"add":Oe(Ne.newValue,Re,Ne.name);break;case"update":Ge(Ne.oldValue),Oe(Ne.newValue,Re,Ne.name||""+Ne.index);break;case"remove":case"delete":Ge(Ne.oldValue);break;case"splice":Ne.removed.map(Ge),Ne.added.forEach(function(He,ft){return Oe(He,Re,""+(Ne.index+ft))});for(var fe=Ne.index+Ne.addedCount;fe<Ne.object.length;fe++)if(ce(Ne.object[fe])){var je=V.get(Ne.object[fe]);je&&(je.path=""+fe)}}})(ie,se),Y(ie,xe(se),B)}function Oe(ie,se,Ne){if(ce(ie)){var Re=V.get(ie);if(Re){if(Re.parent!==se||Re.path!==Ne)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+xe(se)+"/"+Ne+"', but it already exists at '"+xe(Re.parent)+"/"+Re.path+"'")}else{var fe={parent:se,path:Ne,dispose:Object(d.D)(ie,q)};V.set(ie,fe),Object(d.p)(ie).forEach(function(je){var He=je[0];return Oe(je[1],fe,He)})}}}function Ge(ie){if(ce(ie)){var se=V.get(ie);if(!se)return;V.delete(ie),se.dispose(),Object(d.L)(ie).forEach(Ge)}}return Oe(B,void 0,""),function(){Ge(B)}}var ue,$=(ue=function(B,Y){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,q){V.__proto__=q}||function(V,q){for(var Oe in q)q.hasOwnProperty(Oe)&&(V[Oe]=q[Oe])},ue(B,Y)},function(B,Y){function V(){this.constructor=B}ue(B,Y),B.prototype=Y===null?Object.create(Y):(V.prototype=Y.prototype,new V)});(function(B){function Y(V,q,Oe){var Ge=Oe===void 0?{}:Oe,ie=Ge.name,se=ie===void 0?"ogm"+(1e3*Math.random()|0):ie,Ne=Ge.keyToName,Re=Ne===void 0?function(He){return""+He}:Ne,fe=B.call(this)||this;fe._keyToName=Re,fe._groupBy=q,fe._ogmInfoKey=Symbol("ogmInfo"+se),fe._base=V;for(var je=0;je<V.length;je++)fe._addItem(V[je]);return fe._disposeBaseObserver=Object(d.D)(fe._base,function(He){if(He.type==="splice")Object(d.J)(function(){for(var ft=0,Pt=He.removed;ft<Pt.length;ft++){var Wt=Pt[ft];fe._removeItem(Wt)}for(var bt=0,xt=He.added;bt<xt.length;bt++){var nr=xt[bt];fe._addItem(nr)}});else{if(He.type!=="update")throw new Error("illegal state");Object(d.J)(function(){fe._removeItem(He.oldValue),fe._addItem(He.newValue)})}}),fe}$(Y,B),Y.prototype.clear=function(){throw new Error("not supported")},Y.prototype.delete=function(V){throw new Error("not supported")},Y.prototype.set=function(V,q){throw new Error("not supported")},Y.prototype.dispose=function(){this._disposeBaseObserver();for(var V=0;V<this._base.length;V++){var q=this._base[V];q[this._ogmInfoKey].reaction(),delete q[this._ogmInfoKey]}},Y.prototype._getGroupArr=function(V){var q=B.prototype.get.call(this,V);return q===void 0&&(q=Object(d.C)([],{name:"GroupArray["+this._keyToName(V)+"]",deep:!1}),B.prototype.set.call(this,V,q)),q},Y.prototype._removeFromGroupArr=function(V,q){var Oe=B.prototype.get.call(this,V);Oe.length===1?B.prototype.delete.call(this,V):(q===Oe.length-1||(Oe[q]=Oe[Oe.length-1],Oe[q][this._ogmInfoKey].groupArrIndex=q),Oe.length--)},Y.prototype._addItem=function(V){var q=this,Oe=this._groupBy(V),Ge=this._getGroupArr(Oe),ie={groupByValue:Oe,groupArrIndex:Ge.length,reaction:Object(d.F)(function(){return q._groupBy(V)},function(se,Ne){var Re=V[q._ogmInfoKey];q._removeFromGroupArr(Re.groupByValue,Re.groupArrIndex);var fe=q._getGroupArr(se),je=fe.length;fe.push(V),Re.groupByValue=se,Re.groupArrIndex=je})};Object.defineProperty(V,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ie}),Ge.push(V)},Y.prototype._removeItem=function(V){var q=V[this._ogmInfoKey];this._removeFromGroupArr(q.groupByValue,q.groupArrIndex),q.reaction(),delete V[this._ogmInfoKey]}})(d.b),function(){function B(Y,V){this.base=Y,this.args=V,this.closestIdx=0,this.isDisposed=!1;for(var q=this.closest=this.root=Y,Oe=0;Oe<this.args.length-1&&(q=q.get(V[Oe]));Oe++)this.closest=q;this.closestIdx=Oe}return B.prototype.exists=function(){this.assertNotDisposed();var Y=this.args.length;return this.closestIdx>=Y-1&&this.closest.has(this.args[Y-1])},B.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},B.prototype.set=function(Y){this.assertNotDisposed();for(var V=this.args.length,q=this.closest,Oe=this.closestIdx;Oe<V-1;Oe++){var Ge=new Map;q.set(this.args[Oe],Ge),q=Ge}this.closestIdx=V-1,this.closest=q,q.set(this.args[V-1],Y)},B.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var Y=this.args.length;this.closest.delete(this.args[Y-1]);for(var V=this.root,q=[V],Oe=0;Oe<Y-1;Oe++)V=V.get(this.args[Oe]),q.push(V);for(Oe=q.length-1;Oe>0;Oe--)q[Oe].size===0&&q[Oe-1].delete(this.args[Oe-1]);this.isDisposed=!0},B.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},B}(),Promise.resolve(),typeof queueMicrotask<"u"||p!==void 0&&p.nextTick}).call(this,o(155))},function(a,f,o){var p;(function(d,y,g){if(d){for(var E,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},T={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},P={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},A={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},N=1;N<20;++N)_[111+N]="f"+N;for(N=0;N<=9;++N)_[N+96]=N.toString();ce.prototype.bind=function(ne,ue,$){var B=this;return ne=ne instanceof Array?ne:[ne],B._bindMultiple.call(B,ne,ue,$),B},ce.prototype.unbind=function(ne,ue){return this.bind.call(this,ne,function(){},ue)},ce.prototype.trigger=function(ne,ue){var $=this;return $._directMap[ne+":"+ue]&&$._directMap[ne+":"+ue]({},ne),$},ce.prototype.reset=function(){var ne=this;return ne._callbacks={},ne._directMap={},ne},ce.prototype.stopCallback=function(ne,ue){if((" "+ue.className+" ").indexOf(" mousetrap ")>-1||xe(ue,this.target))return!1;if("composedPath"in ne&&typeof ne.composedPath=="function"){var $=ne.composedPath()[0];$!==ne.target&&(ue=$)}return ue.tagName=="INPUT"||ue.tagName=="SELECT"||ue.tagName=="TEXTAREA"||ue.isContentEditable},ce.prototype.handleKey=function(){var ne=this;return ne._handleKey.apply(ne,arguments)},ce.addKeycodes=function(ne){for(var ue in ne)ne.hasOwnProperty(ue)&&(_[ue]=ne[ue]);E=null},ce.init=function(){var ne=ce(y);for(var ue in ne)ue.charAt(0)!=="_"&&(ce[ue]=function($){return function(){return ne[$].apply(ne,arguments)}}(ue))},ce.init(),d.Mousetrap=ce,a.exports&&(a.exports=ce),(p=function(){return ce}.call(f,o,f,a))===void 0||(a.exports=p)}function M(ne,ue,$){ne.addEventListener?ne.addEventListener(ue,$,!1):ne.attachEvent("on"+ue,$)}function I(ne){if(ne.type=="keypress"){var ue=String.fromCharCode(ne.which);return ne.shiftKey||(ue=ue.toLowerCase()),ue}return _[ne.which]?_[ne.which]:T[ne.which]?T[ne.which]:String.fromCharCode(ne.which).toLowerCase()}function G(ne){return ne=="shift"||ne=="ctrl"||ne=="alt"||ne=="meta"}function W(ne,ue,$){return $||($=function(){if(!E)for(var B in E={},_)B>95&&B<112||_.hasOwnProperty(B)&&(E[_[B]]=B);return E}()[ne]?"keydown":"keypress"),$=="keypress"&&ue.length&&($="keydown"),$}function de(ne,ue){var $,B,Y,V=[];for($=function(q){return q==="+"?["+"]:(q=q.replace(/\+{2}/g,"+plus")).split("+")}(ne),Y=0;Y<$.length;++Y)B=$[Y],A[B]&&(B=A[B]),ue&&ue!="keypress"&&P[B]&&(B=P[B],V.push("shift")),G(B)&&V.push(B);return{key:B,modifiers:V,action:ue=W(B,V,ue)}}function xe(ne,ue){return ne!==null&&ne!==y&&(ne===ue||xe(ne.parentNode,ue))}function ce(ne){var ue=this;if(ne=ne||y,!(ue instanceof ce))return new ce(ne);ue.target=ne,ue._callbacks={},ue._directMap={};var $,B={},Y=!1,V=!1,q=!1;function Oe(fe){fe=fe||{};var je,He=!1;for(je in B)fe[je]?He=!0:B[je]=0;He||(q=!1)}function Ge(fe,je,He,ft,Pt,Wt){var bt,xt,nr,ve,he=[],Ce=He.type;if(!ue._callbacks[fe])return[];for(Ce=="keyup"&&G(fe)&&(je=[fe]),bt=0;bt<ue._callbacks[fe].length;++bt)if(xt=ue._callbacks[fe][bt],(ft||!xt.seq||B[xt.seq]==xt.level)&&Ce==xt.action&&(Ce=="keypress"&&!He.metaKey&&!He.ctrlKey||(nr=je,ve=xt.modifiers,nr.sort().join(",")===ve.sort().join(",")))){var ot=!ft&&xt.combo==Pt,Tt=ft&&xt.seq==ft&&xt.level==Wt;(ot||Tt)&&ue._callbacks[fe].splice(bt,1),he.push(xt)}return he}function ie(fe,je,He,ft){ue.stopCallback(je,je.target||je.srcElement,He,ft)||fe(je,He)===!1&&(function(Pt){Pt.preventDefault?Pt.preventDefault():Pt.returnValue=!1}(je),function(Pt){Pt.stopPropagation?Pt.stopPropagation():Pt.cancelBubble=!0}(je))}function se(fe){typeof fe.which!="number"&&(fe.which=fe.keyCode);var je=I(fe);je&&(fe.type!="keyup"||Y!==je?ue.handleKey(je,function(He){var ft=[];return He.shiftKey&&ft.push("shift"),He.altKey&&ft.push("alt"),He.ctrlKey&&ft.push("ctrl"),He.metaKey&&ft.push("meta"),ft}(fe),fe):Y=!1)}function Ne(fe,je,He,ft){function Pt(nr){return function(){q=nr,++B[fe],clearTimeout($),$=setTimeout(Oe,1e3)}}function Wt(nr){ie(He,nr,fe),ft!=="keyup"&&(Y=I(nr)),setTimeout(Oe,10)}B[fe]=0;for(var bt=0;bt<je.length;++bt){var xt=bt+1===je.length?Wt:Pt(ft||de(je[bt+1]).action);Re(je[bt],xt,ft,fe,bt)}}function Re(fe,je,He,ft,Pt){ue._directMap[fe+":"+He]=je;var Wt,bt=(fe=fe.replace(/\s+/g," ")).split(" ");bt.length>1?Ne(fe,bt,je,He):(Wt=de(fe,He),ue._callbacks[Wt.key]=ue._callbacks[Wt.key]||[],Ge(Wt.key,Wt.modifiers,{type:Wt.action},ft,fe,Pt),ue._callbacks[Wt.key][ft?"unshift":"push"]({callback:je,modifiers:Wt.modifiers,action:Wt.action,seq:ft,level:Pt,combo:fe}))}ue._handleKey=function(fe,je,He){var ft,Pt=Ge(fe,je,He),Wt={},bt=0,xt=!1;for(ft=0;ft<Pt.length;++ft)Pt[ft].seq&&(bt=Math.max(bt,Pt[ft].level));for(ft=0;ft<Pt.length;++ft)if(Pt[ft].seq){if(Pt[ft].level!=bt)continue;xt=!0,Wt[Pt[ft].seq]=1,ie(Pt[ft].callback,He,Pt[ft].combo,Pt[ft].seq)}else xt||ie(Pt[ft].callback,He,Pt[ft].combo);var nr=He.type=="keypress"&&V;He.type!=q||G(fe)||nr||Oe(Wt),V=xt&&He.type=="keydown"},ue._bindMultiple=function(fe,je,He){for(var ft=0;ft<fe.length;++ft)Re(fe[ft],je,He)},M(ne,"keypress",se),M(ne,"keydown",se),M(ne,"keyup",se)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(a,f,o){var p=o(36),d=o(37),y=o(32),g=o(40),E=o(66);a.exports=p?Object.defineProperties:function(_,T){y(_);for(var P,A=g(T),N=E(T),M=N.length,I=0;M>I;)d.f(_,P=N[I++],A[P]);return _}},function(a,f,o){var p=o(7),d=o(35),y=o(28),g=o(33),E=p.TypeError;a.exports=function(_,T){var P,A;if(T==="string"&&y(P=_.toString)&&!g(A=d(P,_))||y(P=_.valueOf)&&!g(A=d(P,_))||T!=="string"&&y(P=_.toString)&&!g(A=d(P,_)))return A;throw E("Can't convert object to primitive value")}},function(a,f,o){var p=o(7),d=o(28),y=o(92),g=p.WeakMap;a.exports=d(g)&&/native code/.test(y(g))},function(a,f,o){var p=o(136).IteratorPrototype,d=o(54),y=o(71),g=o(73),E=o(70),_=function(){return this};a.exports=function(T,P,A,N){var M=P+" Iterator";return T.prototype=d(p,{next:y(+!N,A)}),g(T,M,!1,!0),E[M]=_,T}},function(a,f,o){var p=o(7),d=o(28),y=p.String,g=p.TypeError;a.exports=function(E){if(typeof E=="object"||d(E))return E;throw g("Can't set "+y(E)+" as a prototype")}},function(a,f,o){var p=o(17),d=o(7),y=o(15),g=o(95),E=o(44),_=o(138),T=o(114),P=o(117),A=o(28),N=o(33),M=o(19),I=o(118),G=o(73),W=o(143);a.exports=function(de,xe,ce){var ne=de.indexOf("Map")!==-1,ue=de.indexOf("Weak")!==-1,$=ne?"set":"add",B=d[de],Y=B&&B.prototype,V=B,q={},Oe=function(fe){var je=y(Y[fe]);E(Y,fe,fe=="add"?function(He){return je(this,He===0?0:He),this}:fe=="delete"?function(He){return!(ue&&!N(He))&&je(this,He===0?0:He)}:fe=="get"?function(He){return ue&&!N(He)?void 0:je(this,He===0?0:He)}:fe=="has"?function(He){return!(ue&&!N(He))&&je(this,He===0?0:He)}:function(He,ft){return je(this,He===0?0:He,ft),this})};if(g(de,!A(B)||!(ue||Y.forEach&&!M(function(){new B().entries().next()}))))V=ce.getConstructor(xe,de,ne,$),_.enable();else if(g(de,!0)){var Ge=new V,ie=Ge[$](ue?{}:-0,1)!=Ge,se=M(function(){Ge.has(1)}),Ne=I(function(fe){new B(fe)}),Re=!ue&&M(function(){for(var fe=new B,je=5;je--;)fe[$](je,je);return!fe.has(-0)});Ne||((V=xe(function(fe,je){P(fe,Y);var He=W(new B,fe,V);return je!=null&&T(je,He[$],{that:He,AS_ENTRIES:ne}),He})).prototype=Y,Y.constructor=V),(se||Re)&&(Oe("delete"),Oe("has"),ne&&Oe("get")),(Re||ie)&&Oe($),ue&&Y.clear&&delete Y.clear}return q[de]=V,p({global:!0,forced:V!=B},q),G(V,de),ue||ce.setStrong(V,de,ne),V}},function(a,f,o){var p=o(19),d=o(33),y=o(50),g=o(176),E=Object.isExtensible,_=p(function(){});a.exports=_||g?function(T){return!!d(T)&&(!g||y(T)!="ArrayBuffer")&&(!E||E(T))}:E},function(a,f,o){var p=o(19);a.exports=p(function(){if(typeof ArrayBuffer=="function"){var d=new ArrayBuffer(8);Object.isExtensible(d)&&Object.defineProperty(d,"a",{value:8})}})},function(a,f,o){var p=o(19);a.exports=!p(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(a,f,o){var p=o(37).f,d=o(54),y=o(144),g=o(62),E=o(117),_=o(114),T=o(111),P=o(145),A=o(36),N=o(138).fastKey,M=o(56),I=M.set,G=M.getterFor;a.exports={getConstructor:function(W,de,xe,ce){var ne=W(function(V,q){E(V,ue),I(V,{type:de,index:d(null),first:void 0,last:void 0,size:0}),A||(V.size=0),q!=null&&_(q,V[ce],{that:V,AS_ENTRIES:xe})}),ue=ne.prototype,$=G(de),B=function(V,q,Oe){var Ge,ie,se=$(V),Ne=Y(V,q);return Ne?Ne.value=Oe:(se.last=Ne={index:ie=N(q,!0),key:q,value:Oe,previous:Ge=se.last,next:void 0,removed:!1},se.first||(se.first=Ne),Ge&&(Ge.next=Ne),A?se.size++:V.size++,ie!=="F"&&(se.index[ie]=Ne)),V},Y=function(V,q){var Oe,Ge=$(V),ie=N(q);if(ie!=="F")return Ge.index[ie];for(Oe=Ge.first;Oe;Oe=Oe.next)if(Oe.key==q)return Oe};return y(ue,{clear:function(){for(var V=$(this),q=V.index,Oe=V.first;Oe;)Oe.removed=!0,Oe.previous&&(Oe.previous=Oe.previous.next=void 0),delete q[Oe.index],Oe=Oe.next;V.first=V.last=void 0,A?V.size=0:this.size=0},delete:function(V){var q=this,Oe=$(q),Ge=Y(q,V);if(Ge){var ie=Ge.next,se=Ge.previous;delete Oe.index[Ge.index],Ge.removed=!0,se&&(se.next=ie),ie&&(ie.previous=se),Oe.first==Ge&&(Oe.first=ie),Oe.last==Ge&&(Oe.last=se),A?Oe.size--:q.size--}return!!Ge},forEach:function(V){for(var q,Oe=$(this),Ge=g(V,arguments.length>1?arguments[1]:void 0);q=q?q.next:Oe.first;)for(Ge(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(V){return!!Y(this,V)}}),y(ue,xe?{get:function(V){var q=Y(this,V);return q&&q.value},set:function(V,q){return B(this,V===0?0:V,q)}}:{add:function(V){return B(this,V=V===0?0:V,V)}}),A&&p(ue,"size",{get:function(){return $(this).size}}),ne},setStrong:function(W,de,xe){var ce=de+" Iterator",ne=G(de),ue=G(ce);T(W,de,function($,B){I(this,{type:ce,target:$,state:ne($),kind:B,last:void 0})},function(){for(var $=ue(this),B=$.kind,Y=$.last;Y&&Y.removed;)Y=Y.previous;return $.target&&($.last=Y=Y?Y.next:$.state.first)?B=="keys"?{value:Y.key,done:!1}:B=="values"?{value:Y.value,done:!1}:{value:[Y.key,Y.value],done:!1}:($.target=void 0,{value:void 0,done:!0})},xe?"entries":"values",!xe,!0),P(de)}}},function(a,f,o){var p=o(116),d=o(98);a.exports=p?{}.toString:function(){return"[object "+d(this)+"]"}},function(a,f,o){var p=o(74).forEach,d=o(120)("forEach");a.exports=d?[].forEach:function(y){return p(this,y,arguments.length>1?arguments[1]:void 0)}},function(a,f,o){var p=o(7),d=o(99),y=o(100),g=o(33),E=o(27)("species"),_=p.Array;a.exports=function(T){var P;return d(T)&&(P=T.constructor,(y(P)&&(P===_||d(P.prototype))||g(P)&&(P=P[E])===null)&&(P=void 0)),P===void 0?_:P}},function(a,f,o){var p=o(7);a.exports=p},function(a,f,o){var p=o(7),d=o(62),y=o(35),g=o(38),E=o(184),_=o(140),T=o(100),P=o(43),A=o(61),N=o(141),M=o(115),I=p.Array;a.exports=function(G){var W=g(G),de=T(this),xe=arguments.length,ce=xe>1?arguments[1]:void 0,ne=ce!==void 0;ne&&(ce=d(ce,xe>2?arguments[2]:void 0));var ue,$,B,Y,V,q,Oe=M(W),Ge=0;if(!Oe||this==I&&_(Oe))for(ue=P(W),$=de?new this(ue):I(ue);ue>Ge;Ge++)q=ne?ce(W[Ge],Ge):W[Ge],A($,Ge,q);else for(V=(Y=N(W,Oe)).next,$=de?new this:[];!(B=y(V,Y)).done;Ge++)q=ne?E(Y,ce,[B.value,Ge],!0):B.value,A($,Ge,q);return $.length=Ge,$}},function(a,f,o){var p=o(32),d=o(142);a.exports=function(y,g,E,_){try{return _?g(p(E)[0],E[1]):g(E)}catch(T){d(y,"throw",T)}}},function(a,f,o){var p=o(32);a.exports=function(){var d=p(this),y="";return d.global&&(y+="g"),d.ignoreCase&&(y+="i"),d.multiline&&(y+="m"),d.dotAll&&(y+="s"),d.unicode&&(y+="u"),d.sticky&&(y+="y"),y}},function(a,f,o){var p=o(19),d=o(7).RegExp;a.exports=p(function(){var y=d(".","s");return!(y.dotAll&&y.exec(`
`)&&y.flags==="s")})},function(a,f,o){var p=o(19),d=o(7).RegExp;a.exports=p(function(){var y=d("(?<a>b)","g");return y.exec("b").groups.a!=="b"||"b".replace(y,"$<a>c")!=="bc"})},function(a,f,o){var p=o(17),d=o(15),y=o(55),g=o(38),E=o(43),_=o(41),T=o(19),P=o(189),A=o(120),N=o(190),M=o(191),I=o(65),G=o(192),W=[],de=d(W.sort),xe=d(W.push),ce=T(function(){W.sort(void 0)}),ne=T(function(){W.sort(null)}),ue=A("sort"),$=!T(function(){if(I)return I<70;if(!(N&&N>3)){if(M)return!0;if(G)return G<603;var B,Y,V,q,Oe="";for(B=65;B<76;B++){switch(Y=String.fromCharCode(B),B){case 66:case 69:case 70:case 72:V=3;break;case 68:case 71:V=4;break;default:V=2}for(q=0;q<47;q++)W.push({k:Y+q,v:V})}for(W.sort(function(Ge,ie){return ie.v-Ge.v}),q=0;q<W.length;q++)Y=W[q].k.charAt(0),Oe.charAt(Oe.length-1)!==Y&&(Oe+=Y);return Oe!=="DGBEFHACIJK"}});p({target:"Array",proto:!0,forced:ce||!ne||!ue||!$},{sort:function(B){B!==void 0&&y(B);var Y=g(this);if($)return B===void 0?de(Y):de(Y,B);var V,q,Oe=[],Ge=E(Y);for(q=0;q<Ge;q++)q in Y&&xe(Oe,Y[q]);for(P(Oe,function(ie){return function(se,Ne){return Ne===void 0?-1:se===void 0?1:ie!==void 0?+ie(se,Ne)||0:_(se)>_(Ne)?1:-1}}(B)),V=Oe.length,q=0;q<V;)Y[q]=Oe[q++];for(;q<Ge;)delete Y[q++];return Y}})},function(a,f,o){var p=o(113),d=Math.floor,y=function(_,T){var P=_.length,A=d(P/2);return P<8?g(_,T):E(_,y(p(_,0,A),T),y(p(_,A),T),T)},g=function(_,T){for(var P,A,N=_.length,M=1;M<N;){for(A=M,P=_[M];A&&T(_[A-1],P)>0;)_[A]=_[--A];A!==M++&&(_[A]=P)}return _},E=function(_,T,P,A){for(var N=T.length,M=P.length,I=0,G=0;I<N||G<M;)_[I+G]=I<N&&G<M?A(T[I],P[G])<=0?T[I++]:P[G++]:I<N?T[I++]:P[G++];return _};a.exports=y},function(a,f,o){var p=o(53).match(/firefox\/(\d+)/i);a.exports=!!p&&+p[1]},function(a,f,o){var p=o(53);a.exports=/MSIE|Trident/.test(p)},function(a,f,o){var p=o(53).match(/AppleWebKit\/(\d+)\./);a.exports=!!p&&+p[1]},function(a,f,o){var p=o(17),d=o(74).find,y=o(83),g="find",E=!0;g in[]&&Array(1).find(function(){E=!1}),p({target:"Array",proto:!0,forced:E},{find:function(_){return d(this,_,arguments.length>1?arguments[1]:void 0)}}),y(g)},function(a,f,o){var p=o(7),d=o(154),y=p.TypeError;a.exports=function(g){if(d(g))throw y("The method doesn't accept regular expressions");return g}},function(a,f,o){var p=o(27)("match");a.exports=function(d){var y=/./;try{"/./"[d](y)}catch{try{return y[p]=!1,"/./"[d](y)}catch{}}return!1}},function(a,f,o){var p=o(94).PROPER,d=o(19),y=o(160);a.exports=function(g){return d(function(){return!!y[g]()||"​᠎"[g]()!=="​᠎"||p&&y[g].name!==g})}},function(a,f,o){var p=o(15);a.exports=p(1 .valueOf)},function(a,f,o){var p=o(15),d=o(38),y=Math.floor,g=p("".charAt),E=p("".replace),_=p("".slice),T=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,P=/\$([$&'`]|\d{1,2})/g;a.exports=function(A,N,M,I,G,W){var de=M+A.length,xe=I.length,ce=P;return G!==void 0&&(G=d(G),ce=T),E(W,ce,function(ne,ue){var $;switch(g(ue,0)){case"$":return"$";case"&":return A;case"`":return _(N,0,M);case"'":return _(N,de);case"<":$=G[_(ue,1,-1)];break;default:var B=+ue;if(B===0)return ne;if(B>xe){var Y=y(B/10);return Y===0?ne:Y<=xe?I[Y-1]===void 0?g(ue,1):I[Y-1]+g(ue,1):ne}$=I[B-1]}return $===void 0?"":$})}},function(a,f,o){var p=o(36),d=o(15),y=o(35),g=o(19),E=o(66),_=o(112),T=o(93),P=o(38),A=o(81),N=Object.assign,M=Object.defineProperty,I=d([].concat);a.exports=!N||g(function(){if(p&&N({b:1},N(M({},"a",{enumerable:!0,get:function(){M(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var G={},W={},de=Symbol(),xe="abcdefghijklmnopqrst";return G[de]=7,xe.split("").forEach(function(ce){W[ce]=ce}),N({},G)[de]!=7||E(N({},W)).join("")!=xe})?function(G,W){for(var de=P(G),xe=arguments.length,ce=1,ne=_.f,ue=T.f;xe>ce;)for(var $,B=A(arguments[ce++]),Y=ne?I(E(B),ne(B)):E(B),V=Y.length,q=0;V>q;)$=Y[q++],p&&!y(ue,B,$)||(de[$]=B[$]);return de}:N},function(a,f,o){var p=o(7),d=o(15),y=o(55),g=o(33),E=o(34),_=o(101),T=p.Function,P=d([].concat),A=d([].join),N={},M=function(I,G,W){if(!E(N,G)){for(var de=[],xe=0;xe<G;xe++)de[xe]="a["+xe+"]";N[G]=T("C,a","return new C("+A(de,",")+")")}return N[G](I,W)};a.exports=T.bind||function(I){var G=y(this),W=G.prototype,de=_(arguments,1),xe=function(){var ce=P(de,_(arguments));return this instanceof xe?M(G,ce.length,ce):G.apply(I,ce)};return g(W)&&(xe.prototype=W),xe}},function(a,f,o){var p=o(34);a.exports=function(d){return d!==void 0&&(p(d,"value")||p(d,"writable"))}},function(a,f,o){var p=o(15),d=o(45),y=o(41),g=/"/g,E=p("".replace);a.exports=function(_,T,P,A){var N=y(d(_)),M="<"+T;return P!==""&&(M+=" "+P+'="'+E(y(A),g,"&quot;")+'"'),M+">"+N+"</"+T+">"}},function(a,f,o){var p=o(19);a.exports=function(d){return p(function(){var y=""[d]('"');return y!==y.toLowerCase()||y.split('"').length>3})}},function(a,f,o){var p,d,y,g,E=o(17),_=o(64),T=o(7),P=o(46),A=o(35),N=o(205),M=o(44),I=o(144),G=o(97),W=o(73),de=o(145),xe=o(55),ce=o(28),ne=o(33),ue=o(117),$=o(92),B=o(114),Y=o(118),V=o(156),q=o(163).set,Oe=o(206),Ge=o(209),ie=o(210),se=o(165),Ne=o(211),Re=o(56),fe=o(95),je=o(27),He=o(212),ft=o(126),Pt=o(65),Wt=je("species"),bt="Promise",xt=Re.getterFor(bt),nr=Re.set,ve=Re.getterFor(bt),he=N&&N.prototype,Ce=N,ot=he,Tt=T.TypeError,lt=T.document,rr=T.process,pr=se.f,ar=pr,Jt=!!(lt&&lt.createEvent&&T.dispatchEvent),Ke=ce(T.PromiseRejectionEvent),Xt="unhandledrejection",_e=!1,Bt=fe(bt,function(){var ae=$(Ce),Le=ae!==String(Ce);if(!Le&&Pt===66||_&&!ot.finally)return!0;if(Pt>=51&&/native code/.test(ae))return!1;var jt=new Ce(function(Vt){Vt(1)}),_t=function(Vt){Vt(function(){},function(){})};return(jt.constructor={})[Wt]=_t,!(_e=jt.then(function(){})instanceof _t)||!Le&&He&&!Ke}),_r=Bt||!Y(function(ae){Ce.all(ae).catch(function(){})}),L=function(ae){var Le;return!(!ne(ae)||!ce(Le=ae.then))&&Le},gr=function(ae,Le){if(!ae.notified){ae.notified=!0;var jt=ae.reactions;Oe(function(){for(var _t=ae.value,Vt=ae.state==1,Tr=0;jt.length>Tr;){var xn,Fn,hn,En=jt[Tr++],Gt=Vt?En.ok:En.fail,er=En.resolve,lr=En.reject,yr=En.domain;try{Gt?(Vt||(ae.rejection===2&&ur(ae),ae.rejection=1),Gt===!0?xn=_t:(yr&&yr.enter(),xn=Gt(_t),yr&&(yr.exit(),hn=!0)),xn===En.promise?lr(Tt("Promise-chain cycle")):(Fn=L(xn))?A(Fn,xn,er,lr):er(xn)):lr(_t)}catch(Xr){yr&&!hn&&yr.exit(),lr(Xr)}}ae.reactions=[],ae.notified=!1,Le&&!ae.rejection&&Yr(ae)})}},Dr=function(ae,Le,jt){var _t,Vt;Jt?((_t=lt.createEvent("Event")).promise=Le,_t.reason=jt,_t.initEvent(ae,!1,!0),T.dispatchEvent(_t)):_t={promise:Le,reason:jt},!Ke&&(Vt=T["on"+ae])?Vt(_t):ae===Xt&&ie("Unhandled promise rejection",jt)},Yr=function(ae){A(q,T,function(){var Le,jt=ae.facade,_t=ae.value;if(Zr(ae)&&(Le=Ne(function(){ft?rr.emit("unhandledRejection",_t,jt):Dr(Xt,jt,_t)}),ae.rejection=ft||Zr(ae)?2:1,Le.error))throw Le.value})},Zr=function(ae){return ae.rejection!==1&&!ae.parent},ur=function(ae){A(q,T,function(){var Le=ae.facade;ft?rr.emit("rejectionHandled",Le):Dr("rejectionhandled",Le,ae.value)})},sn=function(ae,Le,jt){return function(_t){ae(Le,_t,jt)}},J=function(ae,Le,jt){ae.done||(ae.done=!0,jt&&(ae=jt),ae.value=Le,ae.state=2,gr(ae,!0))},Se=function(ae,Le,jt){if(!ae.done){ae.done=!0,jt&&(ae=jt);try{if(ae.facade===Le)throw Tt("Promise can't be resolved itself");var _t=L(Le);_t?Oe(function(){var Vt={done:!1};try{A(_t,Le,sn(Se,Vt,ae),sn(J,Vt,ae))}catch(Tr){J(Vt,Tr,ae)}}):(ae.value=Le,ae.state=1,gr(ae,!1))}catch(Vt){J({done:!1},Vt,ae)}}};if(Bt&&(ot=(Ce=function(ae){ue(this,ot),xe(ae),A(p,this);var Le=xt(this);try{ae(sn(Se,Le),sn(J,Le))}catch(jt){J(Le,jt)}}).prototype,(p=function(ae){nr(this,{type:bt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=I(ot,{then:function(ae,Le){var jt=ve(this),_t=jt.reactions,Vt=pr(V(this,Ce));return Vt.ok=!ce(ae)||ae,Vt.fail=ce(Le)&&Le,Vt.domain=ft?rr.domain:void 0,jt.parent=!0,_t[_t.length]=Vt,jt.state!=0&&gr(jt,!1),Vt.promise},catch:function(ae){return this.then(void 0,ae)}}),d=function(){var ae=new p,Le=xt(ae);this.promise=ae,this.resolve=sn(Se,Le),this.reject=sn(J,Le)},se.f=pr=function(ae){return ae===Ce||ae===y?new d(ae):ar(ae)},!_&&ce(N)&&he!==Object.prototype)){g=he.then,_e||(M(he,"then",function(ae,Le){var jt=this;return new Ce(function(_t,Vt){A(g,jt,_t,Vt)}).then(ae,Le)},{unsafe:!0}),M(he,"catch",ot.catch,{unsafe:!0}));try{delete he.constructor}catch{}G&&G(he,ot)}E({global:!0,wrap:!0,forced:Bt},{Promise:Ce}),W(Ce,bt,!1,!0),de(bt),y=P(bt),E({target:bt,stat:!0,forced:Bt},{reject:function(ae){var Le=pr(this);return A(Le.reject,void 0,ae),Le.promise}}),E({target:bt,stat:!0,forced:_||Bt},{resolve:function(ae){return Ge(_&&this===y?Ce:this,ae)}}),E({target:bt,stat:!0,forced:_r},{all:function(ae){var Le=this,jt=pr(Le),_t=jt.resolve,Vt=jt.reject,Tr=Ne(function(){var xn=xe(Le.resolve),Fn=[],hn=0,En=1;B(ae,function(Gt){var er=hn++,lr=!1;En++,A(xn,Le,Gt).then(function(yr){lr||(lr=!0,Fn[er]=yr,--En||_t(Fn))},Vt)}),--En||_t(Fn)});return Tr.error&&Vt(Tr.value),jt.promise},race:function(ae){var Le=this,jt=pr(Le),_t=jt.reject,Vt=Ne(function(){var Tr=xe(Le.resolve);B(ae,function(xn){A(Tr,Le,xn).then(jt.resolve,_t)})});return Vt.error&&_t(Vt.value),jt.promise}})},function(a,f,o){var p=o(7);a.exports=p.Promise},function(a,f,o){var p,d,y,g,E,_,T,P,A=o(7),N=o(62),M=o(51).f,I=o(163).set,G=o(164),W=o(207),de=o(208),xe=o(126),ce=A.MutationObserver||A.WebKitMutationObserver,ne=A.document,ue=A.process,$=A.Promise,B=M(A,"queueMicrotask"),Y=B&&B.value;Y||(p=function(){var V,q;for(xe&&(V=ue.domain)&&V.exit();d;){q=d.fn,d=d.next;try{q()}catch(Oe){throw d?g():y=void 0,Oe}}y=void 0,V&&V.enter()},G||xe||de||!ce||!ne?!W&&$&&$.resolve?((T=$.resolve(void 0)).constructor=$,P=N(T.then,T),g=function(){P(p)}):xe?g=function(){ue.nextTick(p)}:(I=N(I,A),g=function(){I(p)}):(E=!0,_=ne.createTextNode(""),new ce(p).observe(_,{characterData:!0}),g=function(){_.data=E=!E})),a.exports=Y||function(V){var q={fn:V,next:void 0};y&&(y.next=q),d||(d=q,g()),y=q}},function(a,f,o){var p=o(53),d=o(7);a.exports=/ipad|iphone|ipod/i.test(p)&&d.Pebble!==void 0},function(a,f,o){var p=o(53);a.exports=/web0s(?!.*chrome)/i.test(p)},function(a,f,o){var p=o(32),d=o(33),y=o(165);a.exports=function(g,E){if(p(g),d(E)&&E.constructor===g)return E;var _=y.f(g);return(0,_.resolve)(E),_.promise}},function(a,f,o){var p=o(7);a.exports=function(d,y){var g=p.console;g&&g.error&&(arguments.length==1?g.error(d):g.error(d,y))}},function(a,f){a.exports=function(o){try{return{error:!1,value:o()}}catch(p){return{error:!0,value:p}}}},function(a,f){a.exports=typeof window=="object"},function(a,f,o){var p=o(36),d=o(15),y=o(66),g=o(40),E=d(o(93).f),_=d([].push),T=function(P){return function(A){for(var N,M=g(A),I=y(M),G=I.length,W=0,de=[];G>W;)N=I[W++],p&&!E(M,N)||_(de,P?[N,M[N]]:M[N]);return de}};a.exports={entries:T(!0),values:T(!1)}},function(a,f,o){var p=o(38),d=o(67),y=o(43);a.exports=function(g){for(var E=p(this),_=y(E),T=arguments.length,P=d(T>1?arguments[1]:void 0,_),A=T>2?arguments[2]:void 0,N=A===void 0?_:d(A,_);N>P;)E[P++]=g;return E}},function(a,f,o){o.r(f),o.d(f,"observer",function(){return vi}),o.d(f,"LogicFlow",function(){return Pg}),o.d(f,"h",function(){return _e.g}),o.d(f,"LogicFlowUtil",function(){return p}),o.d(f,"BaseNode",function(){return da}),o.d(f,"RectNode",function(){return Ev}),o.d(f,"CircleNode",function(){return Sv}),o.d(f,"PolygonNode",function(){return Nv}),o.d(f,"DiamondNode",function(){return Dv}),o.d(f,"EllipseNode",function(){return Bv}),o.d(f,"TextNode",function(){return zv}),o.d(f,"HtmlNode",function(){return $v}),o.d(f,"BaseEdge",function(){return hl}),o.d(f,"LineEdge",function(){return ag}),o.d(f,"PolylineEdge",function(){return lg}),o.d(f,"BezierEdge",function(){return yg}),o.d(f,"Arrow",function(){return ZS}),o.d(f,"BaseEdgeModel",function(){return $u}),o.d(f,"BezierEdgeModel",function(){return Ny}),o.d(f,"LineEdgeModel",function(){return qo}),o.d(f,"PolylineEdgeModel",function(){return Wn}),o.d(f,"BaseNodeModel",function(){return pa}),o.d(f,"CircleNodeModel",function(){return ky}),o.d(f,"DiamondNodeModel",function(){return Uy}),o.d(f,"EllipseNodeModel",function(){return Vy}),o.d(f,"PolygonNodeModel",function(){return Zy}),o.d(f,"RectNodeModel",function(){return tv}),o.d(f,"TextNodeModel",function(){return iv}),o.d(f,"HtmlNodeModel",function(){return sv}),o.d(f,"EditConfigModel",function(){return Pf}),o.d(f,"GraphModel",function(){return Nt}),o.d(f,"SnaplineModel",function(){return c0}),o.d(f,"Keyboard",function(){return K0}),o.d(f,"get",function(){return Qm}),o.d(f,"defaults",function(){return tb}),o.d(f,"ElementState",function(){return zr}),o.d(f,"ModelType",function(){return Pr}),o.d(f,"ElementType",function(){return Tn}),o.d(f,"EventType",function(){return tr}),o.d(f,"formateAnchorConnectValidateData",function(){return Xu});var p={};o.r(p),o.d(p,"createUuid",function(){return pi}),o.d(p,"refreshGraphId",function(){return jp}),o.d(p,"createDrag",function(){return Qt}),o.d(p,"StepDrag",function(){return Wr});var d=o(1),y=o(10);if(!y.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!d.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var g=o(42),E=Object(g.b)("observerBatching");function _(t){t()}var T=!1;function P(){return T}function A(t){return Object(d.t)(t)}var N,M=1e4,I=new Set;function G(){N===void 0&&(N=setTimeout(W,1e4))}function W(){N=void 0;var t=Date.now();I.forEach(function(r){var n=r.current;n&&t>=n.cleanAt&&(n.reaction.dispose(),r.current=null,I.delete(r))}),I.size>0&&G()}var de=!1,xe=[],ce={};function ne(t){return"observer"+t}function ue(t,r,n){r===void 0&&(r="observed"),n===void 0&&(n=ce),P();var i,c=function(O){return function(){de?xe.push(O):O()}}((n.useForceUpdate||g.d)()),s=y.d.useRef(null);if(!s.current){var l=new d.c(ne(r),function(){h.mounted?c():(l.dispose(),s.current=null)}),h=function(O){return{cleanAt:Date.now()+M,reaction:O}}(l);s.current=h,i=s,I.add(i),G()}var v=s.current.reaction;return y.d.useDebugValue(v,A),y.d.useEffect(function(){var O;return O=s,I.delete(O),s.current?s.current.mounted=!0:(s.current={reaction:new d.c(ne(r),function(){c()}),cleanAt:1/0},c()),function(){s.current.reaction.dispose(),s.current=null}},[]),function(O){de=!0,xe=[];try{var w=O();de=!1;var j=xe.length>0?xe:void 0;return y.d.useLayoutEffect(function(){j&&j.forEach(function(C){return C()})},[j]),w}finally{de=!1}}(function(){var O,w;if(v.track(function(){try{O=t()}catch(j){w=j}}),w)throw w;return O})}var $=function(){return $=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++)for(var c in r=arguments[n])Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c]);return t},$.apply(this,arguments)};function B(t,r){var n,i,c,s=$({forwardRef:!1},r),l=t.displayName||t.name,h=function(v,O){return ue(function(){return t(v,O)},l)};return h.displayName=l,n=s.forwardRef?Object(y.f)(Object(y.e)(h)):Object(y.f)(h),i=t,c=n,Object.keys(i).forEach(function(v){Y[v]||Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(i,v))}),n.displayName=l,n}var Y={$$typeof:!0,render:!0,compare:!0,type:!0};function V(t){var r=t.children,n=t.render,i=r||n;return typeof i!="function"?null:ue(i)}function q(t,r,n,i,c){var s=r==="children"?"render":"children",l=typeof t[r]=="function",h=typeof t[s]=="function";return l&&h?new Error("MobX Observer: Do not use children and render in the same time in`"+n):l||h?null:new Error("Invalid prop `"+c+"` of type `"+typeof t[r]+"` supplied to `"+n+"`, expected `function`.")}V.propTypes={children:q,render:q},V.displayName="Observer";var Oe;(Oe=y.g)||(Oe=_),Object(d.n)({reactionScheduler:Oe}),Object(g.a)()[E]=!0;var Ge=0,ie={};function se(t){return ie[t]||(ie[t]=function(r){if(typeof Symbol=="function")return Symbol(r);var n="__$mobx-react "+r+" ("+Ge+")";return Ge++,n}(t)),ie[t]}function Ne(t,r){if(Re(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var n=Object.keys(t),i=Object.keys(r);if(n.length!==i.length)return!1;for(var c=0;c<n.length;c++)if(!Object.hasOwnProperty.call(r,n[c])||!Re(t[n[c]],r[n[c]]))return!1;return!0}function Re(t,r){return t===r?t!==0||1/t==1/r:t!=t&&r!=r}function fe(t,r,n){Object.hasOwnProperty.call(t,r)?t[r]=n:Object.defineProperty(t,r,{enumerable:!1,configurable:!0,writable:!0,value:n})}var je=se("patchMixins"),He=se("patchedDefinition");function ft(t,r){for(var n=this,i=arguments.length,c=new Array(i>2?i-2:0),s=2;s<i;s++)c[s-2]=arguments[s];r.locks++;try{var l;return t!=null&&(l=t.apply(this,c)),l}finally{r.locks--,r.locks===0&&r.methods.forEach(function(h){h.apply(n,c)})}}function Pt(t,r){return function(){for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];ft.call.apply(ft,[this,t,r].concat(i))}}function Wt(t,r,n){var i=function(h,v){var O=h[je]=h[je]||{},w=O[v]=O[v]||{};return w.locks=w.locks||0,w.methods=w.methods||[],w}(t,r);i.methods.indexOf(n)<0&&i.methods.push(n);var c=Object.getOwnPropertyDescriptor(t,r);if(!c||!c[He]){var s=t[r],l=bt(t,r,c?c.enumerable:void 0,i,s);Object.defineProperty(t,r,l)}}function bt(t,r,n,i,c){var s,l=Pt(c,i);return(s={})[He]=!0,s.get=function(){return l},s.set=function(h){if(this===t)l=Pt(h,i);else{var v=bt(this,r,n,i,h);Object.defineProperty(this,r,v)}},s.configurable=!0,s.enumerable=n,s}var xt=d.a||"$mobx",nr=se("isMobXReactObserver"),ve=se("isUnmounted"),he=se("skipRender"),Ce=se("isForcingUpdate");function ot(t){var r=t.prototype;if(t[nr]?Tt(r):t[nr]=!0,r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==y.b)if(r.shouldComponentUpdate){if(r.shouldComponentUpdate!==rr)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else r.shouldComponentUpdate=rr;pr(r,"props"),pr(r,"state");var n=r.render;return r.render=function(){return lt.call(this,n)},Wt(r,"componentWillUnmount",function(){var i;(i=this.render[xt])===null||i===void 0||i.dispose(),this[ve]=!0,!this.render[xt]&&Tt(this)}),t}function Tt(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function lt(t){var r=this;fe(this,he,!1),fe(this,Ce,!1);var n=Tt(this),i=t.bind(this),c=!1,s=new d.c(n+".render()",function(){if(!c&&(c=!0,r[ve]!==!0)){var h=!0;try{fe(r,Ce,!0),r[he]||y.a.prototype.forceUpdate.call(r),h=!1}finally{fe(r,Ce,!1),h&&s.dispose()}}});function l(){c=!1;var h=void 0,v=void 0;if(s.track(function(){try{v=Object(d.d)(!1,i)}catch(O){h=O}}),h)throw h;return v}return s.reactComponent=this,l[xt]=s,this.render=l,l.call(this)}function rr(t,r){return this.state!==r||!Ne(this.props,t)}function pr(t,r){var n=se("reactProp_"+r+"_valueHolder"),i=se("reactProp_"+r+"_atomHolder");function c(){return this[i]||fe(this,i,Object(d.o)("reactive "+r)),this[i]}Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){var s=!1;return d.f&&d.e&&(s=Object(d.f)(!0)),c.call(this).reportObserved(),d.f&&d.e&&Object(d.e)(s),this[n]},set:function(s){this[Ce]||Ne(this[n],s)?fe(this,n,s):(fe(this,n,s),fe(this,he,!0),c.call(this).reportChanged(),fe(this,he,!1))}})}var ar=typeof Symbol=="function"&&Symbol.for,Jt=ar?Symbol.for("react.forward_ref"):typeof y.e=="function"&&Object(y.e)(function(t){return null}).$$typeof,Ke=ar?Symbol.for("react.memo"):typeof y.f=="function"&&Object(y.f)(function(t){return null}).$$typeof;function Xt(t){if(t.isMobxInjector,Ke&&t.$$typeof===Ke)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Jt&&t.$$typeof===Jt){var r=t.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(y.e)(function(){var n=arguments;return Object(y.c)(V,null,function(){return r.apply(void 0,n)})})}return typeof t!="function"||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(y.a,t)?ot(t):B(t)}if(!y.a)throw new Error("mobx-react requires React to be available");if(!d.C)throw new Error("mobx-react requires mobx to be available");var _e=o(0);o(3),o(60),o(2),o(6),o(4),o(11),o(39),o(29),o(22),o(20),o(5),o(23),o(21),o(25),o(8),o(9),o(16),o(24),o(18),o(188),o(193),o(103),o(152),o(153);var Bt=function(t,r){for(var n=-1,i=t==null?0:t.length,c=Array(i);++n<i;)c[n]=r(t[n],n,t);return c},_r=function(){this.__data__=[],this.size=0},L=function(t,r){return t===r||t!=t&&r!=r},gr=function(t,r){for(var n=t.length;n--;)if(L(t[n][0],r))return n;return-1},Dr=Array.prototype.splice,Yr=function(t){var r=this.__data__,n=gr(r,t);return!(n<0)&&(n==r.length-1?r.pop():Dr.call(r,n,1),--this.size,!0)},Zr=function(t){var r=this.__data__,n=gr(r,t);return n<0?void 0:r[n][1]},ur=function(t){return gr(this.__data__,t)>-1},sn=function(t,r){var n=this.__data__,i=gr(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this};function J(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}J.prototype.clear=_r,J.prototype.delete=Yr,J.prototype.get=Zr,J.prototype.has=ur,J.prototype.set=sn;var Se=J,ae=function(){this.__data__=new Se,this.size=0},Le=function(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n},jt=function(t){return this.__data__.get(t)},_t=function(t){return this.__data__.has(t)},Vt=o(31),Tr=Vt.a.Symbol,xn=Object.prototype,Fn=xn.hasOwnProperty,hn=xn.toString,En=Tr?Tr.toStringTag:void 0,Gt=function(t){var r=Fn.call(t,En),n=t[En];try{t[En]=void 0;var i=!0}catch{}var c=hn.call(t);return i&&(r?t[En]=n:delete t[En]),c},er=Object.prototype.toString,lr=function(t){return er.call(t)},yr=Tr?Tr.toStringTag:void 0,Xr=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":yr&&yr in Object(t)?Gt(t):lr(t)},Ir=function(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")},ai,zo=function(t){if(!Ir(t))return!1;var r=Xr(t);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},Ho=Vt.a["__core-js_shared__"],Wi=(ai=/[^.]+$/.exec(Ho&&Ho.keys&&Ho.keys.IE_PROTO||""))?"Symbol(src)_1."+ai:"",Qc=function(t){return!!Wi&&Wi in t},yu=Function.prototype.toString,To=function(t){if(t!=null){try{return yu.call(t)}catch{}try{return t+""}catch{}}return""},bs=/^\[object .+?Constructor\]$/,$t=Function.prototype,_s=Object.prototype,tn=$t.toString,Es=_s.hasOwnProperty,po=RegExp("^"+tn.call(Es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ho=function(t){return!(!Ir(t)||Qc(t))&&(zo(t)?po:bs).test(To(t))},Os=function(t,r){return t==null?void 0:t[r]},Xo=function(t,r){var n=Os(t,r);return ho(n)?n:void 0},_i=Xo(Vt.a,"Map"),ko=Xo(Object,"create"),vu=function(){this.__data__=ko?ko(null):{},this.size=0},ws=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r},ef=Object.prototype.hasOwnProperty,Ta=function(t){var r=this.__data__;if(ko){var n=r[t];return n==="__lodash_hash_undefined__"?void 0:n}return ef.call(r,t)?r[t]:void 0},tf=Object.prototype.hasOwnProperty,xs=function(t){var r=this.__data__;return ko?r[t]!==void 0:tf.call(r,t)},rf=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ko&&r===void 0?"__lodash_hash_undefined__":r,this};function ui(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}ui.prototype.clear=vu,ui.prototype.delete=ws,ui.prototype.get=Ta,ui.prototype.has=xs,ui.prototype.set=rf;var Ss=ui,Vo=function(){this.size=0,this.__data__={hash:new Ss,map:new(_i||Se),string:new Ss}},nf=function(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null},Aa=function(t,r){var n=t.__data__;return nf(r)?n[typeof r=="string"?"string":"hash"]:n.map},gu=function(t){var r=Aa(this,t).delete(t);return this.size-=r?1:0,r},mu=function(t){return Aa(this,t).get(t)},of=function(t){return Aa(this,t).has(t)},Ts=function(t,r){var n=Aa(this,t),i=n.size;return n.set(t,r),this.size+=n.size==i?0:1,this};function Ei(t){var r=-1,n=t==null?0:t.length;for(this.clear();++r<n;){var i=t[r];this.set(i[0],i[1])}}Ei.prototype.clear=Vo,Ei.prototype.delete=gu,Ei.prototype.get=mu,Ei.prototype.has=of,Ei.prototype.set=Ts;var Oi=Ei,As=function(t,r){var n=this.__data__;if(n instanceof Se){var i=n.__data__;if(!_i||i.length<199)return i.push([t,r]),this.size=++n.size,this;n=this.__data__=new Oi(i)}return n.set(t,r),this.size=n.size,this};function wi(t){var r=this.__data__=new Se(t);this.size=r.size}wi.prototype.clear=ae,wi.prototype.delete=Le,wi.prototype.get=jt,wi.prototype.has=_t,wi.prototype.set=As;var yo=wi,bu=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ps=function(t){return this.__data__.has(t)};function Yi(t){var r=-1,n=t==null?0:t.length;for(this.__data__=new Oi;++r<n;)this.add(t[r])}Yi.prototype.add=Yi.prototype.push=bu,Yi.prototype.has=Ps;var xi=Yi,_u=function(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1},Eu=function(t,r){return t.has(r)},Pa=function(t,r,n,i,c,s){var l=1&n,h=t.length,v=r.length;if(h!=v&&!(l&&v>h))return!1;var O=s.get(t),w=s.get(r);if(O&&w)return O==r&&w==t;var j=-1,C=!0,X=2&n?new xi:void 0;for(s.set(t,r),s.set(r,t);++j<h;){var te=t[j],le=r[j];if(i)var Te=l?i(le,te,j,r,t,s):i(te,le,j,t,r,s);if(Te!==void 0){if(Te)continue;C=!1;break}if(X){if(!_u(r,function(Pe,$e){if(!Eu(X,$e)&&(te===Pe||c(te,Pe,n,i,s)))return X.push($e)})){C=!1;break}}else if(te!==le&&!c(te,le,n,i,s)){C=!1;break}}return s.delete(t),s.delete(r),C},Ki=Vt.a.Uint8Array,js=function(t){var r=-1,n=Array(t.size);return t.forEach(function(i,c){n[++r]=[c,i]}),n},af=function(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n},Ns=Tr?Tr.prototype:void 0,Kn=Ns?Ns.valueOf:void 0,jn=function(t,r,n,i,c,s,l){switch(n){case"[object DataView]":if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=r.byteLength||!s(new Ki(t),new Ki(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return L(+t,+r);case"[object Error]":return t.name==r.name&&t.message==r.message;case"[object RegExp]":case"[object String]":return t==r+"";case"[object Map]":var h=js;case"[object Set]":var v=1&i;if(h||(h=af),t.size!=r.size&&!v)return!1;var O=l.get(t);if(O)return O==r;i|=2,l.set(t,r);var w=Pa(h(t),h(r),i,c,s,l);return l.delete(t),w;case"[object Symbol]":if(Kn)return Kn.call(t)==Kn.call(r)}return!1},vo=function(t,r){for(var n=-1,i=r.length,c=t.length;++n<i;)t[c+n]=r[n];return t},zn=Array.isArray,Ms=function(t,r,n){var i=r(t);return zn(t)?i:vo(i,n(t))},Ou=function(t,r){for(var n=-1,i=t==null?0:t.length,c=0,s=[];++n<i;){var l=t[n];r(l,n,t)&&(s[c++]=l)}return s},wu=function(){return[]},uf=Object.prototype.propertyIsEnumerable,si=Object.getOwnPropertySymbols,oo=si?function(t){return t==null?[]:(t=Object(t),Ou(si(t),function(r){return uf.call(t,r)}))}:wu,sf=function(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i},Ao=function(t){return t!=null&&typeof t=="object"},go=function(t){return Ao(t)&&Xr(t)=="[object Arguments]"},Rs=Object.prototype,Cs=Rs.hasOwnProperty,cf=Rs.propertyIsEnumerable,ja=go(function(){return arguments}())?go:function(t){return Ao(t)&&Cs.call(t,"callee")&&!cf.call(t,"callee")},$o=ja,mo=o(48),ff=/^(?:0|[1-9]\d*)$/,qn=function(t,r){var n=typeof t;return!!(r=r??9007199254740991)&&(n=="number"||n!="symbol"&&ff.test(t))&&t>-1&&t%1==0&&t<r},Po=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Rr={};Rr["[object Float32Array]"]=Rr["[object Float64Array]"]=Rr["[object Int8Array]"]=Rr["[object Int16Array]"]=Rr["[object Int32Array]"]=Rr["[object Uint8Array]"]=Rr["[object Uint8ClampedArray]"]=Rr["[object Uint16Array]"]=Rr["[object Uint32Array]"]=!0,Rr["[object Arguments]"]=Rr["[object Array]"]=Rr["[object ArrayBuffer]"]=Rr["[object Boolean]"]=Rr["[object DataView]"]=Rr["[object Date]"]=Rr["[object Error]"]=Rr["[object Function]"]=Rr["[object Map]"]=Rr["[object Number]"]=Rr["[object Object]"]=Rr["[object RegExp]"]=Rr["[object Set]"]=Rr["[object String]"]=Rr["[object WeakMap]"]=!1;var io=function(t){return Ao(t)&&Po(t.length)&&!!Rr[Xr(t)]},Wo=function(t){return function(r){return t(r)}},Bn=o(49),Na=Bn.a&&Bn.a.isTypedArray,qi=Na?Wo(Na):io,Lo=Object.prototype.hasOwnProperty,Zn=function(t,r){var n=zn(t),i=!n&&$o(t),c=!n&&!i&&Object(mo.a)(t),s=!n&&!i&&!c&&qi(t),l=n||i||c||s,h=l?sf(t.length,String):[],v=h.length;for(var O in t)!r&&!Lo.call(t,O)||l&&(O=="length"||c&&(O=="offset"||O=="parent")||s&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||qn(O,v))||h.push(O);return h},xu=Object.prototype,Zi=function(t){var r=t&&t.constructor;return t===(typeof r=="function"&&r.prototype||xu)},jo=function(t,r){return function(n){return t(r(n))}},Ds=jo(Object.keys,Object),lf=Object.prototype.hasOwnProperty,Su=function(t){if(!Zi(t))return Ds(t);var r=[];for(var n in Object(t))lf.call(t,n)&&n!="constructor"&&r.push(n);return r},On=function(t){return t!=null&&Po(t.length)&&!zo(t)},Si=function(t){return On(t)?Zn(t):Su(t)},Ma=function(t){return Ms(t,Si,oo)},Nn=Object.prototype.hasOwnProperty,Is=function(t,r,n,i,c,s){var l=1&n,h=Ma(t),v=h.length;if(v!=Ma(r).length&&!l)return!1;for(var O=v;O--;){var w=h[O];if(!(l?w in r:Nn.call(r,w)))return!1}var j=s.get(t),C=s.get(r);if(j&&C)return j==r&&C==t;var X=!0;s.set(t,r),s.set(r,t);for(var te=l;++O<v;){var le=t[w=h[O]],Te=r[w];if(i)var Pe=l?i(Te,le,w,r,t,s):i(le,Te,w,t,r,s);if(!(Pe===void 0?le===Te||c(le,Te,n,i,s):Pe)){X=!1;break}te||(te=w=="constructor")}if(X&&!te){var $e=t.constructor,st=r.constructor;$e==st||!("constructor"in t)||!("constructor"in r)||typeof $e=="function"&&$e instanceof $e&&typeof st=="function"&&st instanceof st||(X=!1)}return s.delete(t),s.delete(r),X},Ji=Xo(Vt.a,"DataView"),Yo=Xo(Vt.a,"Promise"),Ra=Xo(Vt.a,"Set"),Fo=Xo(Vt.a,"WeakMap"),Tu="[object Map]",Mn="[object Promise]",ao="[object Set]",uo="[object WeakMap]",Qi="[object DataView]",Au=To(Ji),Pu=To(_i),ks=To(Yo),Ls=To(Ra),Ca=To(Fo),ci=Xr;(Ji&&ci(new Ji(new ArrayBuffer(1)))!=Qi||_i&&ci(new _i)!=Tu||Yo&&ci(Yo.resolve())!=Mn||Ra&&ci(new Ra)!=ao||Fo&&ci(new Fo)!=uo)&&(ci=function(t){var r=Xr(t),n=r=="[object Object]"?t.constructor:void 0,i=n?To(n):"";if(i)switch(i){case Au:return Qi;case Pu:return Tu;case ks:return Mn;case Ls:return ao;case Ca:return uo}return r});var m=ci,b="[object Arguments]",S="[object Array]",D="[object Object]",K=Object.prototype.hasOwnProperty,Ee=function(t,r,n,i,c,s){var l=zn(t),h=zn(r),v=l?S:m(t),O=h?S:m(r),w=(v=v==b?D:v)==D,j=(O=O==b?D:O)==D,C=v==O;if(C&&Object(mo.a)(t)){if(!Object(mo.a)(r))return!1;l=!0,w=!1}if(C&&!w)return s||(s=new yo),l||qi(t)?Pa(t,r,n,i,c,s):jn(t,r,v,n,i,c,s);if(!(1&n)){var X=w&&K.call(t,"__wrapped__"),te=j&&K.call(r,"__wrapped__");if(X||te){var le=X?t.value():t,Te=te?r.value():r;return s||(s=new yo),c(le,Te,n,i,s)}}return!!C&&(s||(s=new yo),Is(t,r,n,i,c,s))},ze=function t(r,n,i,c,s){return r===n||(r==null||n==null||!Ao(r)&&!Ao(n)?r!=r&&n!=n:Ee(r,n,i,c,t,s))},vt=function(t,r,n,i){var c=n.length,s=c,l=!i;if(t==null)return!s;for(t=Object(t);c--;){var h=n[c];if(l&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++c<s;){var v=(h=n[c])[0],O=t[v],w=h[1];if(l&&h[2]){if(O===void 0&&!(v in t))return!1}else{var j=new yo;if(i)var C=i(O,w,v,t,r,j);if(!(C===void 0?ze(w,O,3,i,j):C))return!1}}return!0},Ut=function(t){return t==t&&!Ir(t)},Ar=function(t){for(var r=Si(t),n=r.length;n--;){var i=r[n],c=t[i];r[n]=[i,c,Ut(c)]}return r},sr=function(t,r){return function(n){return n!=null&&n[t]===r&&(r!==void 0||t in Object(n))}},Gr=function(t){var r=Ar(t);return r.length==1&&r[0][2]?sr(r[0][0],r[0][1]):function(n){return n===t||vt(n,t,r)}},Or=function(t){return typeof t=="symbol"||Ao(t)&&Xr(t)=="[object Symbol]"},Ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,so=/^\w*$/,rn=function(t,r){if(zn(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!Or(t))||so.test(t)||!Ur.test(t)||r!=null&&t in Object(r)};function Jn(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var n=function(){var i=arguments,c=r?r.apply(this,i):i[0],s=n.cache;if(s.has(c))return s.get(c);var l=t.apply(this,i);return n.cache=s.set(c,l)||s,l};return n.cache=new(Jn.Cache||Oi),n}Jn.Cache=Oi;var ea=Jn,pf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Da=/\\(\\)?/g,ta=function(t){var r=ea(t,function(i){return n.size===500&&n.clear(),i}),n=r.cache;return r}(function(t){var r=[];return t.charCodeAt(0)===46&&r.push(""),t.replace(pf,function(n,i,c,s){r.push(c?s.replace(Da,"$1"):i||n)}),r}),Ti=Tr?Tr.prototype:void 0,ra=Ti?Ti.toString:void 0,Sn=function t(r){if(typeof r=="string")return r;if(zn(r))return Bt(r,t)+"";if(Or(r))return ra?ra.call(r):"";var n=r+"";return n=="0"&&1/r==-1/0?"-0":n},Ia=function(t){return t==null?"":Sn(t)},fi=function(t,r){return zn(t)?t:rn(t,r)?[t]:ta(Ia(t))},na=function(t){if(typeof t=="string"||Or(t))return t;var r=t+"";return r=="0"&&1/t==-1/0?"-0":r},ju=function(t,r){for(var n=0,i=(r=fi(r,t)).length;t!=null&&n<i;)t=t[na(r[n++])];return n&&n==i?t:void 0},df=function(t,r,n){var i=t==null?void 0:ju(t,r);return i===void 0?n:i},Hl=function(t,r){return t!=null&&r in Object(t)},Xl=function(t,r,n){for(var i=-1,c=(r=fi(r,t)).length,s=!1;++i<c;){var l=na(r[i]);if(!(s=t!=null&&n(t,l)))break;t=t[l]}return s||++i!=c?s:!!(c=t==null?0:t.length)&&Po(c)&&qn(l,c)&&(zn(t)||$o(t))},hf=function(t,r){return t!=null&&Xl(t,r,Hl)},Vl=function(t,r){return rn(t)&&Ut(r)?sr(na(t),r):function(n){var i=df(n,t);return i===void 0&&i===r?hf(n,t):ze(r,i,3)}},Fs=function(t){return t},$l=function(t){return function(r){return r==null?void 0:r[t]}},Wl=function(t){return function(r){return ju(r,t)}},ka=function(t){return rn(t)?$l(na(t)):Wl(t)},yf=function(t){return typeof t=="function"?t:t==null?Fs:typeof t=="object"?zn(t)?Vl(t[0],t[1]):Gr(t):ka(t)},Bs=function(t){return function(r,n,i){for(var c=-1,s=Object(r),l=i(r),h=l.length;h--;){var v=l[t?h:++c];if(n(s[v],v,s)===!1)break}return r}}(),Nu=function(t,r){return function(n,i){if(n==null)return n;if(!On(n))return t(n,i);for(var c=n.length,s=r?c:-1,l=Object(n);(r?s--:++s<c)&&i(l[s],s,l)!==!1;);return n}}(function(t,r){return t&&Bs(t,r,Si)}),Rh=function(t,r){var n=-1,i=On(t)?Array(t.length):[];return Nu(t,function(c,s,l){i[++n]=r(c,s,l)}),i},Gs=function(t,r){return(zn(t)?Bt:Rh)(t,yf(r))};Object(d.n)({isolateGlobalState:!0});var Us=function(){try{var t=Xo(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Mu=function(t,r,n){r=="__proto__"&&Us?Us(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n},Ch=Object.prototype.hasOwnProperty,zs=function(t,r,n){var i=t[r];Ch.call(t,r)&&L(i,n)&&(n!==void 0||r in t)||Mu(t,r,n)},La=function(t,r,n,i){var c=!n;n||(n={});for(var s=-1,l=r.length;++s<l;){var h=r[s],v=i?i(n[h],t[h],h,n,t):void 0;v===void 0&&(v=t[h]),c?Mu(n,h,v):zs(n,h,v)}return n},vf=function(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)},Yl=Math.max,Hs=function(t,r,n){return r=Yl(r===void 0?t.length-1:r,0),function(){for(var i=arguments,c=-1,s=Yl(i.length-r,0),l=Array(s);++c<s;)l[c]=i[r+c];c=-1;for(var h=Array(r+1);++c<r;)h[c]=i[c];return h[r]=n(l),vf(t,this,h)}},Kl=function(t){return function(){return t}},ql=Us?function(t,r){return Us(t,"toString",{configurable:!0,enumerable:!1,value:Kl(r),writable:!0})}:Fs,gf=Date.now,Dh=function(t){var r=0,n=0;return function(){var i=gf(),c=16-(i-n);if(n=i,c>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}},Ru=Dh(ql),Ih=function(t,r){return Ru(Hs(t,r,Fs),t+"")},kh=function(t,r,n){if(!Ir(n))return!1;var i=typeof r;return!!(i=="number"?On(n)&&qn(r,n.length):i=="string"&&r in n)&&L(n[r],t)},Zl=function(t){return Ih(function(r,n){var i=-1,c=n.length,s=c>1?n[c-1]:void 0,l=c>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(c--,s):void 0,l&&kh(n[0],n[1],l)&&(s=c<3?void 0:s,c=1),r=Object(r);++i<c;){var h=n[i];h&&t(r,h,i,s)}return r})},Lh=Object.prototype.hasOwnProperty,Qn=Zl(function(t,r){if(Zi(r)||On(r))La(r,Si(r),t);else for(var n in r)Lh.call(r,n)&&zs(t,n,r[n])}),Fh=function(t,r,n,i){if(!Ir(t))return t;for(var c=-1,s=(r=fi(r,t)).length,l=s-1,h=t;h!=null&&++c<s;){var v=na(r[c]),O=n;if(v==="__proto__"||v==="constructor"||v==="prototype")return t;if(c!=l){var w=h[v];(O=i?i(w,v,h):void 0)===void 0&&(O=Ir(w)?w:qn(r[c+1])?[]:{})}zs(h,v,O),h=h[v]}return t},Bh=function(t,r,n){for(var i=-1,c=r.length,s={};++i<c;){var l=r[i],h=ju(t,l);n(h,l)&&Fh(s,fi(l,t),h)}return s},Jl=function(t,r){return Bh(t,r,function(n,i){return hf(t,i)})},Fa=Tr?Tr.isConcatSpreadable:void 0,Gh=function(t){return zn(t)||$o(t)||!!(Fa&&t&&t[Fa])},Xs=function t(r,n,i,c,s){var l=-1,h=r.length;for(i||(i=Gh),s||(s=[]);++l<h;){var v=r[l];n>0&&i(v)?n>1?t(v,n-1,i,c,s):vo(s,v):c||(s[s.length]=v)}return s},No=function(t){return t!=null&&t.length?Xs(t,1):[]},Jr,mf,bf,_f,Ef,Of,wf,Ql,oa,Rn,xf,Sf,Ai,Tf,Af,ep,tp,rp,Cu=function(t){return Ru(Hs(t,void 0,No),t+"")}(function(t,r){return t==null?{}:Jl(t,r)});function Cn(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function np(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function op(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Dn(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var zr,ip,Pr,Tn,tr,Kr,ap={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Vs=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Pf=(mf=Dn((Jr=function(){function t(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),Cn(this,"isSilentMode",mf,this),Cn(this,"stopZoomGraph",bf,this),Cn(this,"stopScrollGraph",_f,this),Cn(this,"stopMoveGraph",Ef,this),Cn(this,"adjustEdge",Of,this),Cn(this,"adjustEdgeMiddle",wf,this),Cn(this,"adjustEdgeStartAndEnd",Ql,this),Cn(this,"adjustNodePosition",oa,this),Cn(this,"hideAnchors",Rn,this),Cn(this,"hoverOutline",xf,this),Cn(this,"nodeSelectedOutline",Sf,this),Cn(this,"edgeSelectedOutline",Ai,this),Cn(this,"nodeTextEdit",Tf,this),Cn(this,"edgeTextEdit",Af,this),Cn(this,"nodeTextDraggable",ep,this),Cn(this,"edgeTextDraggable",tp,this),Cn(this,"autoExpand",rp,this),op(this,"multipleSelectKey",""),op(this,"defaultConfig",{}),Qn(this,this.getConfigDetail(i))}var r,n;return r=t,(n=[{key:"updateEditConfig",value:function(i){var c=this.getConfigDetail(i);Qn(this,c)}},{key:"getConfigDetail",value:function(i){var c=i.isSilentMode,s=i.textEdit,l={};if(c===!1&&Qn(l,this.defaultConfig),c===!0){var h=Cu(ap,Vs);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Qn(l,h)}s===!1&&Qn(l,{nodeTextEdit:!1,edgeTextEdit:!1});var v=Cu(i,Vs);return Qn(l,v)}},{key:"getConfig",value:function(){return Cu(this,Vs)}}])&&np(r.prototype,n),t}()).prototype,"isSilentMode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bf=Dn(Jr.prototype,"stopZoomGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_f=Dn(Jr.prototype,"stopScrollGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ef=Dn(Jr.prototype,"stopMoveGraph",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Of=Dn(Jr.prototype,"adjustEdge",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wf=Dn(Jr.prototype,"adjustEdgeMiddle",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ql=Dn(Jr.prototype,"adjustEdgeStartAndEnd",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oa=Dn(Jr.prototype,"adjustNodePosition",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rn=Dn(Jr.prototype,"hideAnchors",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xf=Dn(Jr.prototype,"hoverOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sf=Dn(Jr.prototype,"nodeSelectedOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ai=Dn(Jr.prototype,"edgeSelectedOutline",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tf=Dn(Jr.prototype,"nodeTextEdit",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Af=Dn(Jr.prototype,"edgeTextEdit",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ep=Dn(Jr.prototype,"nodeTextDraggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tp=Dn(Jr.prototype,"edgeTextDraggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),rp=Dn(Jr.prototype,"autoExpand",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dn(Jr.prototype,"updateEditConfig",[d.k],Object.getOwnPropertyDescriptor(Jr.prototype,"updateEditConfig"),Jr.prototype),Jr);o(63),function(t){t[t.DEFAULT=1]="DEFAULT",t[t.TEXT_EDIT=2]="TEXT_EDIT",t[t.SHOW_MENU=3]="SHOW_MENU",t[t.ALLOW_CONNECT=4]="ALLOW_CONNECT",t[t.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(zr||(zr={})),function(t){t.KEY="logic-flow",t.NODE_NAME="lf-node",t.EDGE_NAME="lf-edge"}(ip||(ip={})),function(t){t.NODE="node",t.CIRCLE_NODE="circle-node",t.POLYGON_NODE="polygon-node",t.RECT_NODE="rect-node",t.TEXT_NODE="text-node",t.ELLIPSE_NODE="ellipse-node",t.DIAMOND_NODE="diamond-node",t.HTML_NODE="html-node",t.EDGE="edge",t.LINE_EDGE="line-edge",t.POLYLINE_EDGE="polyline-edge",t.BEZIER_EDGE="bezier-edge",t.GRAPH="graph"}(Pr||(Pr={})),function(t){t.NODE="node",t.EDGE="edge",t.GRAPH="graph"}(Tn||(Tn={})),function(t){t.ELEMENT_CLICK="element:click",t.NODE_CLICK="node:click",t.NODE_DBCLICK="node:dbclick",t.NODE_DELETE="node:delete",t.NODE_ADD="node:add",t.NODE_DND_ADD="node:dnd-add",t.NODE_DND_DRAG="node:dnd-drag",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DROP="node:drop",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_CONTEXTMENU="node:contextmenu",t.EDGE_DELETE="edge:delete",t.EDGE_ADD="edge:add",t.EDGE_CLICK="edge:click",t.EDGE_DBCLICK="edge:dbclick",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_ADJUST="edge:adjust",t.EDGE_EXCHANGE_NODE="edge:exchange-node",t.ANCHOR_DRAGSTART="anchor:dragstart",t.ANCHOR_DRAG="anchor:drag",t.ANCHOR_DROP="anchor:drop",t.ANCHOR_DRAGEND="anchor:dragend",t.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",t.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",t.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",t.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",t.ADJUST_POINT_DRAG="adjustPoint:drag",t.ADJUST_POINT_DROP="adjustPoint:drop",t.ADJUST_POINT_DRAGEND="adjustPoint:dragend",t.BLANK_MOUSEDOWN="blank:mousedown",t.BLANK_DRAGSTART="blank:dragstart",t.BLANK_DRAG="blank:drag",t.BLANK_DROP="blank:drop",t.BLANK_MOUSEMOVE="blank:mousemove",t.BLANK_MOUSEUP="blank:mouseup",t.BLANK_CLICK="blank:click",t.BLANK_CONTEXTMENU="blank:contextmenu",t.SELECTION_MOUSEDOWN="selection:mousedown",t.SELECTION_DRAGSTART="selection:dragstart",t.SELECTION_DRAG="selection:drag",t.SELECTION_DROP="selection:drop",t.SELECTION_MOUSEMOVE="selection:mousemove",t.SELECTION_MOUSEUP="selection:mouseup",t.SELECTION_CONTEXTMENU="selection:contextmenu",t.CONNECTION_NOT_ALLOWED="connection:not-allowed",t.HISTORY_CHANGE="history:change",t.TEXT_UPDATE="text:update",t.GRAPH_TRANSFORM="graph:transform",t.GRAPH_RENDERED="graph:rendered"}(tr||(tr={})),function(t){t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Kr||(Kr={}));var co,yn,jf,Nf,Mf,Rf,Mo,Cf,up;function Ro(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return $s(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return $s(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $s(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function bo(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Ws(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ys(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Co(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.INCREASE=1]="INCREASE"})(co||(co={}));var sp=(yn=function(){function t(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),Ys(this,"MINI_SCALE_SIZE",.2),Ys(this,"MAX_SCALE_SIZE",16),bo(this,"SCALE_X",jf,this),bo(this,"SKEW_Y",Nf,this),bo(this,"SKEW_X",Mf,this),bo(this,"SCALE_Y",Rf,this),bo(this,"TRANSLATE_X",Mo,this),bo(this,"TRANSLATE_Y",Cf,this),bo(this,"ZOOM_SIZE",up,this),Ys(this,"eventCenter",void 0),this.eventCenter=i}var r,n;return r=t,n=[{key:"setZoomMiniSize",value:function(i){this.MINI_SCALE_SIZE=i}},{key:"setZoomMaxSize",value:function(i){this.MAX_SCALE_SIZE=i}},{key:"HtmlPointToCanvasPoint",value:function(i){var c=Ro(i,2),s=c[0],l=c[1];return[(s-this.TRANSLATE_X)/this.SCALE_X,(l-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(i){var c=Ro(i,2),s=c[0],l=c[1];return[s*this.SCALE_X+this.TRANSLATE_X,l*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(i,c,s){var l=Ro(i,2),h=l[0],v=l[1];return[h+c/this.SCALE_X,v+s/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(i,c){return[i/this.SCALE_X,c/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var i=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(i,")")}}},{key:"zoom",value:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],c=arguments.length>1?arguments[1]:void 0,s=this.SCALE_X,l=this.SCALE_Y;return i===!0?(s+=this.ZOOM_SIZE,l+=this.ZOOM_SIZE):i===!1?(s-=this.ZOOM_SIZE,l-=this.ZOOM_SIZE):typeof i=="number"&&(s=i,l=i),s<this.MINI_SCALE_SIZE||s>this.MAX_SCALE_SIZE||(c&&(this.TRANSLATE_X-=(s-this.SCALE_X)*c[0],this.TRANSLATE_Y-=(l-this.SCALE_Y)*c[1]),this.SCALE_X=s,this.SCALE_Y=l,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(i){this.eventCenter.emit(tr.GRAPH_TRANSFORM,{type:i,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(i,c){this.TRANSLATE_X+=i,this.TRANSLATE_Y+=c,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(i,c,s,l){var h=Ro(this.CanvasPointToHtmlPoint([i,c]),2),v=s/2-h[0],O=l/2-h[1];this.TRANSLATE_X+=v,this.TRANSLATE_Y+=O,this.emitGraphTransform("focusOn")}}],n&&Ws(r.prototype,n),t}(),jf=Co(yn.prototype,"SCALE_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Nf=Co(yn.prototype,"SKEW_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mf=Co(yn.prototype,"SKEW_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Rf=Co(yn.prototype,"SCALE_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Mo=Co(yn.prototype,"TRANSLATE_X",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Cf=Co(yn.prototype,"TRANSLATE_Y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),up=Co(yn.prototype,"ZOOM_SIZE",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Co(yn.prototype,"zoom",[d.k],Object.getOwnPropertyDescriptor(yn.prototype,"zoom"),yn.prototype),Co(yn.prototype,"resetZoom",[d.k],Object.getOwnPropertyDescriptor(yn.prototype,"resetZoom"),yn.prototype),Co(yn.prototype,"translate",[d.k],Object.getOwnPropertyDescriptor(yn.prototype,"translate"),yn.prototype),Co(yn.prototype,"focusOn",[d.k],Object.getOwnPropertyDescriptor(yn.prototype,"focusOn"),yn.prototype),yn),cp=function(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t},fp=function(t,r){return t&&La(r,Si(r),t)},Uh=function(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r},zh=Object.prototype.hasOwnProperty,Hh=function(t){if(!Ir(t))return Uh(t);var r=Zi(t),n=[];for(var i in t)(i!="constructor"||!r&&zh.call(t,i))&&n.push(i);return n},Du=function(t){return On(t)?Zn(t,!0):Hh(t)},Xh=function(t,r){return t&&La(r,Du(r),t)},lp=o(106),pp=function(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r},dp=function(t,r){return La(t,oo(t),r)},Ks=jo(Object.getPrototypeOf,Object),hp=Object.getOwnPropertySymbols?function(t){for(var r=[];t;)vo(r,oo(t)),t=Ks(t);return r}:wu,Vh=function(t,r){return La(t,hp(t),r)},Df=function(t){return Ms(t,Du,hp)},qs=Object.prototype.hasOwnProperty,$h=function(t){var r=t.length,n=new t.constructor(r);return r&&typeof t[0]=="string"&&qs.call(t,"index")&&(n.index=t.index,n.input=t.input),n},If=function(t){var r=new t.constructor(t.byteLength);return new Ki(r).set(new Ki(t)),r},Wh=function(t,r){var n=r?If(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},Yh=/\w*$/,Kh=function(t){var r=new t.constructor(t.source,Yh.exec(t));return r.lastIndex=t.lastIndex,r},kf=Tr?Tr.prototype:void 0,yp=kf?kf.valueOf:void 0,qh=function(t){return yp?Object(yp.call(t)):{}},vp=function(t,r){var n=r?If(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Zh=function(t,r,n){var i=t.constructor;switch(r){case"[object ArrayBuffer]":return If(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return Wh(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vp(t,n);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return Kh(t);case"[object Symbol]":return qh(t)}},gp=Object.create,Ba=function(){function t(){}return function(r){if(!Ir(r))return{};if(gp)return gp(r);t.prototype=r;var n=new t;return t.prototype=void 0,n}}(),mp=function(t){return typeof t.constructor!="function"||Zi(t)?{}:Ba(Ks(t))},Jh=function(t){return Ao(t)&&m(t)=="[object Map]"},Lf=Bn.a&&Bn.a.isMap,Ff=Lf?Wo(Lf):Jh,Qh=function(t){return Ao(t)&&m(t)=="[object Set]"},Bf=Bn.a&&Bn.a.isSet,ey=Bf?Wo(Bf):Qh,bp="[object Arguments]",_p="[object Function]",ty="[object Object]",Qr={};Qr[bp]=Qr["[object Array]"]=Qr["[object ArrayBuffer]"]=Qr["[object DataView]"]=Qr["[object Boolean]"]=Qr["[object Date]"]=Qr["[object Float32Array]"]=Qr["[object Float64Array]"]=Qr["[object Int8Array]"]=Qr["[object Int16Array]"]=Qr["[object Int32Array]"]=Qr["[object Map]"]=Qr["[object Number]"]=Qr["[object Object]"]=Qr["[object RegExp]"]=Qr["[object Set]"]=Qr["[object String]"]=Qr["[object Symbol]"]=Qr["[object Uint8Array]"]=Qr["[object Uint8ClampedArray]"]=Qr["[object Uint16Array]"]=Qr["[object Uint32Array]"]=!0,Qr["[object Error]"]=Qr[_p]=Qr["[object WeakMap]"]=!1;var Iu=function t(r,n,i,c,s,l){var h,v=1&n,O=2&n,w=4&n;if(i&&(h=s?i(r,c,s,l):i(r)),h!==void 0)return h;if(!Ir(r))return r;var j=zn(r);if(j){if(h=$h(r),!v)return pp(r,h)}else{var C=m(r),X=C==_p||C=="[object GeneratorFunction]";if(Object(mo.a)(r))return Object(lp.a)(r,v);if(C==ty||C==bp||X&&!s){if(h=O||X?{}:mp(r),!v)return O?Vh(r,Xh(h,r)):dp(r,fp(h,r))}else{if(!Qr[C])return s?r:{};h=Zh(r,C,v)}}l||(l=new yo);var te=l.get(r);if(te)return te;l.set(r,h),ey(r)?r.forEach(function(Te){h.add(t(Te,n,i,Te,r,l))}):Ff(r)&&r.forEach(function(Te,Pe){h.set(Pe,t(Te,n,i,Pe,r,l))});var le=j?void 0:(w?O?Df:Ma:O?Du:Si)(r);return cp(le||r,function(Te,Pe){le&&(Te=r[Pe=Te]),zs(h,Pe,t(Te,n,i,Pe,r,l))}),h},cn=function(t){return Iu(t,5)},Ga=function(t,r,n){(n!==void 0&&!L(t[r],n)||n===void 0&&!(r in t))&&Mu(t,r,n)},ry=function(t){return Ao(t)&&On(t)},Ua=Function.prototype,za=Object.prototype,Ep=Ua.toString,Ha=za.hasOwnProperty,Op=Ep.call(Object),Xa=function(t){if(!Ao(t)||Xr(t)!="[object Object]")return!1;var r=Ks(t);if(r===null)return!0;var n=Ha.call(r,"constructor")&&r.constructor;return typeof n=="function"&&n instanceof n&&Ep.call(n)==Op},ku=function(t,r){if((r!=="constructor"||typeof t[r]!="function")&&r!="__proto__")return t[r]},Gf=function(t){return La(t,Du(t))},Uf=function(t,r,n,i,c,s,l){var h=ku(t,n),v=ku(r,n),O=l.get(v);if(O)Ga(t,n,O);else{var w=s?s(h,v,n+"",t,r,l):void 0,j=w===void 0;if(j){var C=zn(v),X=!C&&Object(mo.a)(v),te=!C&&!X&&qi(v);w=v,C||X||te?zn(h)?w=h:ry(h)?w=pp(h):X?(j=!1,w=Object(lp.a)(v,!0)):te?(j=!1,w=vp(v,!0)):w=[]:Xa(v)||$o(v)?(w=h,$o(h)?w=Gf(h):Ir(h)&&!zo(h)||(w=mp(v))):j=!1}j&&(l.set(v,w),c(w,v,i,s,l),l.delete(v)),Ga(t,n,w)}},zf=function t(r,n,i,c,s){r!==n&&Bs(n,function(l,h){if(s||(s=new yo),Ir(l))Uf(r,n,h,i,t,c,s);else{var v=c?c(ku(r,h),l,h+"",r,n,s):void 0;v===void 0&&(v=l),Ga(r,h,v)}},Du)},Zs=Zl(function(t,r,n){zf(t,r,n)}),Js={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},Hf=function(t){var r=cn(Js);return t&&(r=Zs(r,t)),r};o(77),o(158);function wp(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var xp=function(){function t(){var i,c,s;(function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")})(this,t),s={},(c="_events")in(i=this)?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s}var r,n;return r=t,(n=[{key:"on",value:function(i,c,s){var l=this;return i==null||i.split(",").forEach(function(h){h=h.trim(),l._events[h]||(l._events[h]=[]),l._events[h].push({callback:c,once:!!s})}),this}},{key:"once",value:function(i,c){var s=this;i==null||i.split(",").forEach(function(l){return l=l.trim(),s.on(l,c,!0)})}},{key:"emit",value:function(i,c){var s=this;i==null||i.split(",").forEach(function(l){var h=s._events[l]||[],v=s._events["*"]||[],O=function(w){for(var j=w.length,C=0;C<j;C++)if(w[C]){var X=w[C],te=X.callback;X.once&&(w.splice(C,1),w.length===0&&delete s._events[l],j--,C--),te.apply(s,[c])}};O(h),O(v)})}},{key:"off",value:function(i,c){var s=this;return i||(this._events={}),i.split(",").forEach(function(l){if(c){for(var h=s._events[l]||[],v=h.length,O=0;O<v;O++)h[O].callback===c&&(h.splice(O,1),v--,O--);h.length===0&&delete s._events[l]}else delete s._events[l]}),this}},{key:"getEvents",value:function(){return this._events}}])&&wp(r.prototype,n),t}();function li(t,r){return r*Math.round(t/r)||t}function Xf(t,r){return t%r}function Lu(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Qs(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Qs(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qs(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}var ec,tc=function(t,r,n){var i=Lu(t,2),c=i[0],s=i[1],l=Lu(r,2),h=l[0],v=l[1],O=Lu(n,2),w=O[0],j=O[1];return c>h&&c<w&&s>v&&s<j},Vf=function(t,r){var n=!1;switch(r.multipleSelectKey){case"meta":n=t.metaKey;break;case"alt":n=t.altKey;break;case"shift":n=t.shiftKey;break;case"ctrl":n=t.ctrlKey;break;default:n=!1}return n},Sp=(o(78),o(161),o(125),o(79),o(30),o(12),o(13),o(14),o(47),new Uint8Array(16));function $f(){if(!ec&&!(ec=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ec(Sp)}for(var Tp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ap=function(t){return typeof t=="string"&&Tp.test(t)},In=[],Fu=0;Fu<256;++Fu)In.push((Fu+256).toString(16).substr(1));var Pp=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(In[t[r+0]]+In[t[r+1]]+In[t[r+2]]+In[t[r+3]]+"-"+In[t[r+4]]+In[t[r+5]]+"-"+In[t[r+6]]+In[t[r+7]]+"-"+In[t[r+8]]+In[t[r+9]]+"-"+In[t[r+10]]+In[t[r+11]]+In[t[r+12]]+In[t[r+13]]+In[t[r+14]]+In[t[r+15]]).toLowerCase();if(!Ap(n))throw TypeError("Stringified UUID is invalid");return n},Bu=function(t,r,n){var i=(t=t||{}).random||(t.rng||$f)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,r){n=n||0;for(var c=0;c<16;++c)r[n+c]=i[c];return r}return Pp(i)},pi=function(){return Bu()},jp=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=t.nodes.reduce(function(i,c){return i[c.id]=r+Bu(),c.id=i[c.id],i},{});return t.edges.forEach(function(i){i.id=r+Bu(),i.sourceNodeId=n[i.sourceNodeId],i.targetNodeId=n[i.targetNodeId]}),t},ia=(o(104),o(162),function(t,r,n){var i=t.x,c=t.y;return(i-r.x)*(i-n.x)<=0&&(c-r.y)*(c-n.y)<=0});function rc(t){return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rc(t)}function Wf(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function nc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Wf(Object(n),!0).forEach(function(i){Yf(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wf(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yf(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var et,Kf,Gu,Ko,Va,Pi,$a,Wa,ji,Ni,Mi,Uu,zu,Ya,oc,ic,aa,ua,Np,Mp,qf,ac=function(t){return t.anchors},Hu=function(t,r){for(var n,i=r.nodes,c=i.length-1;c>=0;c--){var s=i[c];if(oy(t,s)){var l=s.getTargetAnchor(t);if(l){var h={node:s,anchorIndex:l.index,anchor:l.anchor};n&&!ny(s,n.node,r)||(n=h)}}}return n},ny=function(t,r,n){return t.zIndex>r.zIndex||n.nodesMap[t.id].index>n.nodesMap[r.id].index},eo=function(t,r,n,i){return Math.hypot(t-n,r-i)},Ri=function(t,r){var n=!1,i=_o(r);return t.x>=i.minX-0&&t.x<=i.maxX+0&&t.y>=i.minY-0&&t.y<=i.maxY+0&&(n=!0),n},oy=function(t,r){var n=!1,i=_o(r);return t.x>=i.minX-5&&t.x<=i.maxX+5&&t.y>=i.minY-5&&t.y<=i.maxY+5&&(n=!0),n},_o=function(t){var r=t.x,n=t.y,i=t.width,c=t.height;return{minX:r-i/2,minY:n-c/2,maxX:r+i/2,maxY:n+c/2,x:r,y:n,width:i,height:c,centerX:r,centerY:n}},Zf=function(t,r,n){var i,c=function(l){var h=l,v=h.x,O=h.y,w=h.width,j=h.height,C=h.radius;return[{x:v-w/2+C,y:O-j/2+C,r:C},{x:v+w/2-C,y:O-j/2+C,r:C},{x:v-w/2+C,y:O+j/2-C,r:C},{x:v+w/2-C,y:O+j/2-C,r:C}]}(n),s=Number.MAX_SAFE_INTEGER;return c.forEach(function(l){var h=eo(t.x,t.y,l.x,l.y);h<s&&(s=h,i=l)}),Jf(t,r,i)},Jf=function(t,r,n){var i,c=n,s=c.x,l=c.y,h=c.r;if(r===Kr.HORIZONTAL){var v=s-Math.sqrt(h*h-(t.y-l)*(t.y-l)),O=s+Math.sqrt(h*h-(t.y-l)*(t.y-l));i={x:Math.abs(v-t.x)<Math.abs(O-t.x)?v:O,y:t.y}}else if(r===Kr.VERTICAL){var w=l-Math.sqrt(h*h-(t.x-s)*(t.x-s)),j=l+Math.sqrt(h*h-(t.x-s)*(t.x-s)),C=Math.abs(w-t.y)<Math.abs(j-t.y)?w:j;i={x:t.x,y:C}}return i},Rp=function(t,r){var n=r,i=!1,c=n.x-n.width/2+n.radius,s=n.x+n.width/2-n.radius,l=n.y-n.height/2+n.radius,h=n.y+n.height/2-n.radius,v=n.x,O=n.y,w=n.width,j=n.height;return t.y===O+j/2||t.y===O-j/2?i=t.x>c&&t.x<s:t.x!==v+w/2&&t.x!==v-w/2||(i=t.y>l&&t.y<h),i},Cp=function(t,r,n){var i,c=n,s=c.x,l=c.y,h=c.rx,v=c.ry;if(r===Kr.HORIZONTAL){var O=s-Math.sqrt(h*h-(t.y-l)*(t.y-l)*h*h/(v*v)),w=s+Math.sqrt(h*h-(t.y-l)*(t.y-l)*h*h/(v*v));i={x:Math.abs(O-t.x)<Math.abs(w-t.x)?O:w,y:t.y}}else if(r===Kr.VERTICAL){var j=l-Math.sqrt(v*v-(t.x-s)*(t.x-s)*v*v/(h*h)),C=l+Math.sqrt(v*v-(t.x-s)*(t.x-s)*v*v/(h*h)),X=Math.abs(j-t.y)<Math.abs(C-t.y)?j:C;i={x:t.x,y:X}}return i},Dp=function(t,r,n){for(var i,c=n.pointsPosition,s=Number.MAX_SAFE_INTEGER,l=[],h=0;h<c.length;h++)l.push({start:c[h],end:c[(h+1)%c.length]});return l.forEach(function(v){var O=v.start,w=v.end,j=O,C=w;O.x>w.x&&(j=w,C=O);var X={x:t.x,y:t.y};if(j.x===C.x&&r===Kr.HORIZONTAL&&(X={x:j.x,y:t.y}),j.y===C.y&&r===Kr.VERTICAL&&(X={x:t.x,y:j.y}),j.x!==C.x&&j.y!==C.y){var te=(C.y-j.y)/(C.x-j.x),le=(j.x*C.y-C.x*j.y)/(j.x-C.x);r===Kr.HORIZONTAL?X={x:(t.y-le)/te,y:t.y}:r===Kr.VERTICAL&&(X={x:t.x,y:te*t.x+le})}if(ia(X,O,w)){var Te=eo(X.x,X.y,t.x,t.y);Te<s&&(s=Te,i=X)}}),i},Ip=function(t,r,n,i){var c=t.x,s=t.y;return r.x>t.x?c=t.x+n/2:r.x<t.x&&(c=t.x-n/2),r.y>t.y?s=t.y+i/2:r.y<t.y&&(s=t.y-i/2),{x:c,y:s}},kp=function(t){var r=t.rows,n=t.style,i=t.rowsLength,c=t.className,s=document.createElement("div");s.style.fontSize=n.fontSize,s.style.width=n.width,s.className=c,s.style.lineHeight=n.lineHeight,s.style.padding=n.padding,n.fontFamily&&(s.style.fontFamily=n.fontFamily),i>1?r.forEach(function(h){var v=document.createElement("div");v.textContent=h,s.appendChild(v)}):s.textContent=r,document.body.appendChild(s);var l=s.clientHeight;return document.body.removeChild(s),l},Qf=function(t){var r=t.rows,n=t.rowsLength,i=t.fontSize,c=0;return r&&r.forEach(function(s){var l=Ot(s);c=l>c?l:c}),{width:Math.ceil(c/2)*i+i/4,height:n*(i+2)+i/4}},Xu=function(t){return rc(t)!=="object"?{isAllPass:!!t,msg:t?"":"不允许连接"}:t},$n=function(t){try{return JSON.parse(JSON.stringify(t))}catch{return t}},iy=1e3,el=999,Ka=function(){return++iy};function Vu(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Hn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Vu(Object(n),!0).forEach(function(i){to(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vn(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function uc(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function to(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function or(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var $u=(et=function(){function t(i,c){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),to(this,"id",""),vn(this,"type",Kf,this),vn(this,"sourceNodeId",Gu,this),vn(this,"targetNodeId",Ko,this),vn(this,"startPoint",Va,this),vn(this,"endPoint",Pi,this),vn(this,"text",$a,this),vn(this,"properties",Wa,this),vn(this,"points",ji,this),vn(this,"pointsList",Ni,this),vn(this,"isSelected",Mi,this),vn(this,"isHovered",Uu,this),vn(this,"isHitable",zu,this),vn(this,"draggable",Ya,this),vn(this,"visible",oc,this),to(this,"virtual",!1),vn(this,"isAnimation",ic,this),vn(this,"isShowAdjustPoint",aa,this),to(this,"graphModel",void 0),vn(this,"zIndex",ua,this),to(this,"BaseType",Tn.EDGE),to(this,"modelType",Pr.EDGE),vn(this,"state",Np,this),to(this,"additionStateData",void 0),to(this,"sourceAnchorId",""),to(this,"targetAnchorId",""),to(this,"menu",void 0),to(this,"customTextPosition",!1),vn(this,"style",Mp,this),vn(this,"arrowConfig",qf,this),this.graphModel=c,this.initEdgeData(i),this.setAttributes()}var r,n;return r=t,n=[{key:"initEdgeData",value:function(i){if(i.properties||(i.properties={}),!i.id){var c=this.graphModel.idGenerator,s=c&&c(i.type),l=this.createId();i.id=l||s||pi()}this.arrowConfig.markerEnd="url(#marker-end-".concat(i.id,")");var h=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=h,Qn(this,yt(i)),this.graphModel.overlapMode===co.INCREASE&&(this.zIndex=i.zIndex||Ka()),this.setAnchors(),this.initPoints(),this.formatText(i)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Hn(Hn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Hn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var i=this.graphModel.theme.edgeText;return cn(i)}},{key:"getEdgeAnimationStyle",value:function(){var i=this.graphModel.theme.edgeAnimation;return cn(i)}},{key:"getArrowStyle",value:function(){var i=this.getEdgeStyle(),c=this.getEdgeAnimationStyle(),s=this.graphModel.theme.arrow,l=this.isAnimation?c.stroke:i.stroke;return Hn(Hn({},i),{},{fill:l,stroke:l},s)}},{key:"getOutlineStyle",value:function(){var i=this.graphModel.theme.outline;return cn(i)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var i,c;return(i=this.graphModel)===null||i===void 0||(c=i.nodesMap[this.sourceNodeId])===null||c===void 0?void 0:c.model}},{key:"targetNode",get:function(){var i,c;return(i=this.graphModel)===null||i===void 0||(c=i.nodesMap[this.targetNodeId])===null||c===void 0?void 0:c.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(i,c){var s,l;return ac(i).forEach(function(h){var v=zt(h,c);(l===void 0||v<l)&&(l=v,s=h)}),s}},{key:"getEndAnchor",value:function(i){var c,s,l=this;return ac(i).forEach(function(h){var v=zt(h,l.startPoint);(s===void 0||v<s)&&(s=v,c=h)}),c}},{key:"getProperties",value:function(){return Object(d.I)(this.properties)}},{key:"getData",value:function(){var i=this.text,c=i.x,s=i.y,l=i.value,h={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(d.I)(this.properties)};return l&&(h.text={x:c,y:s,value:l}),this.graphModel.overlapMode===co.INCREASE&&(h.zIndex=this.zIndex),h}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(i,c){this.properties[i]=$n(c),this.setAttributes()}},{key:"deleteProperty",value:function(i){delete this.properties[i],this.setAttributes()}},{key:"setProperties",value:function(i){this.properties=Hn(Hn({},Object(d.I)(this.properties)),$n(i)),this.setAttributes()}},{key:"changeEdgeId",value:function(i){var c=this.arrowConfig,s=c.markerEnd,l=c.markerStart;l&&l==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(i,")")),s&&s==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(i,")")),this.id=i}},{key:"setStyle",value:function(i,c){this.style=Hn(Hn({},this.style),{},to({},i,$n(c)))}},{key:"setStyles",value:function(i){this.style=Hn(Hn({},this.style),$n(i))}},{key:"updateStyles",value:function(i){this.style=Hn({},$n(i))}},{key:"formatText",value:function(i){var c=this.textPosition,s=c.x,l=c.y;i.text&&typeof i.text!="string"?Object.prototype.toString.call(i.text)==="[object Object]"&&(this.text={x:i.text.x||s,y:i.text.y||l,value:i.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:i.text||"",x:s,y:l,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var i=this.textPosition,c=i.x,s=i.y;this.text.x=c,this.text.y=s}},{key:"moveText",value:function(i,c){if(this.text){var s=this.text,l=s.x,h=s.y,v=s.value,O=s.draggable,w=s.editable;this.text={value:v,draggable:O,x:l+i,y:h+c,editable:w}}}},{key:"setText",value:function(i){i&&Qn(this.text,i)}},{key:"updateText",value:function(i){this.text=Hn(Hn({},Object(d.I)(this.text)),{},{value:i})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var i=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:i.x,y:i.y}),this.sourceAnchorId||(this.sourceAnchorId=i.id)}if(!this.targetAnchorId||!this.endPoint){var c=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:c.x,y:c.y}),this.targetAnchorId||(this.targetAnchorId=c.id)}}},{key:"setSelected",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=i}},{key:"setHovered",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=i}},{key:"setHitable",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=i}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(i,c){this.state=i,this.additionStateData=c}},{key:"updateStartPoint",value:function(i){this.startPoint=i}},{key:"moveStartPoint",value:function(i,c){this.startPoint.x+=i,this.startPoint.y+=c}},{key:"updateEndPoint",value:function(i){this.endPoint=i}},{key:"moveEndPoint",value:function(i,c){this.endPoint.x+=i,this.endPoint.y+=c}},{key:"setZIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=i}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(i){Qn(this,i)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var c=i.startPoint,s=i.endPoint;this.updateStartPoint({x:c.x,y:c.y}),this.updateEndPoint({x:s.x,y:s.y})}}],n&&uc(r.prototype,n),t}(),Kf=or(et.prototype,"type",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Gu=or(et.prototype,"sourceNodeId",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ko=or(et.prototype,"targetNodeId",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Va=or(et.prototype,"startPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=or(et.prototype,"endPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$a=or(et.prototype,"text",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Wa=or(et.prototype,"properties",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ji=or(et.prototype,"points",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ni=or(et.prototype,"pointsList",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mi=or(et.prototype,"isSelected",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Uu=or(et.prototype,"isHovered",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zu=or(et.prototype,"isHitable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ya=or(et.prototype,"draggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oc=or(et.prototype,"visible",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ic=or(et.prototype,"isAnimation",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),aa=or(et.prototype,"isShowAdjustPoint",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ua=or(et.prototype,"zIndex",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Np=or(et.prototype,"state",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Mp=or(et.prototype,"style",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),qf=or(et.prototype,"arrowConfig",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),or(et.prototype,"sourceNode",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"sourceNode"),et.prototype),or(et.prototype,"targetNode",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"targetNode"),et.prototype),or(et.prototype,"textPosition",[d.m],Object.getOwnPropertyDescriptor(et.prototype,"textPosition"),et.prototype),or(et.prototype,"setProperty",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setProperty"),et.prototype),or(et.prototype,"deleteProperty",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"deleteProperty"),et.prototype),or(et.prototype,"setProperties",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setProperties"),et.prototype),or(et.prototype,"changeEdgeId",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"changeEdgeId"),et.prototype),or(et.prototype,"setStyle",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setStyle"),et.prototype),or(et.prototype,"setStyles",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setStyles"),et.prototype),or(et.prototype,"updateStyles",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateStyles"),et.prototype),or(et.prototype,"formatText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"formatText"),et.prototype),or(et.prototype,"resetTextPosition",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"resetTextPosition"),et.prototype),or(et.prototype,"moveText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveText"),et.prototype),or(et.prototype,"setText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setText"),et.prototype),or(et.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateText"),et.prototype),or(et.prototype,"setAnchors",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setAnchors"),et.prototype),or(et.prototype,"setSelected",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setSelected"),et.prototype),or(et.prototype,"setHovered",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setHovered"),et.prototype),or(et.prototype,"setHitable",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setHitable"),et.prototype),or(et.prototype,"openEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"openEdgeAnimation"),et.prototype),or(et.prototype,"closeEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"closeEdgeAnimation"),et.prototype),or(et.prototype,"setElementState",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setElementState"),et.prototype),or(et.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateStartPoint"),et.prototype),or(et.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveStartPoint"),et.prototype),or(et.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateEndPoint"),et.prototype),or(et.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"moveEndPoint"),et.prototype),or(et.prototype,"setZIndex",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"setZIndex"),et.prototype),or(et.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"initPoints"),et.prototype),or(et.prototype,"updateAttributes",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateAttributes"),et.prototype),or(et.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"getAdjustStart"),et.prototype),or(et.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"getAdjustEnd"),et.prototype),or(et.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(et.prototype,"updateAfterAdjustStartAndEnd"),et.prototype),et),qa=$u;function Za(t){return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Za(t)}function Wu(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Ja(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Wu(Object(n),!0).forEach(function(i){Lp(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wu(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Yu(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ku(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sa(){return sa=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=qu(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},sa.apply(this,arguments)}function qu(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ci(t))!==null;);return t}function sc(t,r){return sc=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},sc(t,r)}function Zu(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ci(t);if(r){var c=Ci(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ca(this,n)}}function ca(t,r){if(r&&(Za(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tl(t)}function tl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ci(t){return Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ci(t)}function Lp(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var wr,Fp,qo=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&sc(s,l)})(c,t);var r,n,i=Zu(c);function c(){var s;Yu(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Lp(tl(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.LINE_EDGE),s}return r=c,(n=[{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.line;return Ja(Ja({},sa(Ci(c.prototype),"getEdgeStyle",this).call(this)),cn(s))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Ku(r.prototype,n),c}(qa);function cc(t){return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cc(t)}function Bp(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return rl(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return rl(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rl(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Gp(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function nl(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Gp(Object(n),!0).forEach(function(i){Qo(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ay(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Zo(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Up(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Jo(){return Jo=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=Di(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},Jo.apply(this,arguments)}function Di(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=gn(t))!==null;);return t}function fc(t,r){return fc=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fc(t,r)}function ol(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=gn(t);if(r){var c=gn(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return lc(this,n)}}function lc(t,r){if(r&&(cc(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qa(t)}function Qa(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gn(t){return gn=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gn(t)}function Qo(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function kr(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var Wn=(wr=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&fc(s,l)})(c,t);var r,n,i=ol(c);function c(){var s;Zo(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Qo(Qa(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.POLYLINE_EDGE),Qo(Qa(s),"draggingPointList",void 0),ay(Qa(s),"dbClickPosition",Fp,Qa(s)),s}return r=c,(n=[{key:"initEdgeData",value:function(s){this.offset=30,Jo(gn(c.prototype),"initEdgeData",this).call(this,s)}},{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.polyline;return nl(nl({},Jo(gn(c.prototype),"getEdgeStyle",this).call(this)),cn(s))}},{key:"getTextPosition",value:function(){var s,l=(s=this.text)===null||s===void 0?void 0:s.value;if(this.dbClickPosition&&!l){var h=this.dbClickPosition;return{x:h.x,y:h.y}}var v=me(this.points),O=Bp(it(v),2),w=O[0],j=O[1];return{x:(w.x+j.x)/2,y:(w.y+j.y)/2}}},{key:"getAfterAnchor",value:function(s,l,h){var v,O;return h.forEach(function(w){var j;s===Kr.HORIZONTAL?j=Math.abs(l.y-w.y):s===Kr.VERTICAL&&(j=Math.abs(l.x-w.x)),(!O||O>j)&&(O=j,v=w)}),v}},{key:"getCrossPoint",value:function(s,l,h){var v;return s===Kr.HORIZONTAL?v={x:h.x,y:l.y}:s===Kr.VERTICAL&&(v={x:l.x,y:h.y}),v}},{key:"removeCrossPoints",value:function(s,l,h){var v=h.map(function(Pe){return Pe});if(s===1){var O=v[s],w=v[l],j=v[s-1];if(dt(j,O,this.sourceNode)){if(gt(O,w,this.sourceNode)){var C=rt(O,w,this.sourceNode);C&&(v[s]=C,v.splice(s-1,1),s--,l--)}}else this.sourceNode.anchors.forEach(function(Pe){(Pe.x===j.x&&Pe.x===O.x||Pe.y===j.y&&Pe.y===O.y)&&eo(Pe.x,Pe.y,O.x,O.y)<eo(j.x,j.y,O.x,O.y)&&(v[s-1]=Pe)})}if(l===h.length-2){var X=v[s],te=v[l],le=v[l+1];if(dt(te,le,this.targetNode)){if(gt(X,te,this.targetNode)){var Te=rt(X,te,this.targetNode);Te&&(v[l]=Te,v.splice(l+1,1))}}else this.targetNode.anchors.forEach(function(Pe){(Pe.x===le.x&&Pe.x===te.x||Pe.y===le.y&&Pe.y===te.y)&&eo(Pe.x,Pe.y,te.x,te.y)<eo(le.x,le.y,te.x,te.y)&&(v[l+1]=Pe)})}return v}},{key:"getDraggingPoints",value:function(s,l,h,v,O){var w=O.map(function(X){return X}),j=this.getAfterAnchor(s,h,v),C=this.getCrossPoint(s,h,j);return l==="start"?(w.unshift(C),w.unshift(j)):(w.push(C),w.push(j)),w}},{key:"updateCrossPoints",value:function(s){var l=s.map(function(st){return st}),h=s[0],v=s[1],O=s[l.length-2],w=s[l.length-1],j=this.sourceNode,C=this.targetNode,X=j.modelType,te=C.modelType,le=pt(h,v),Te=l[0];switch(X){case Pr.RECT_NODE:j.radius!==0&&(Rp(h,j)||(Te=Zf(h,le,j)));break;case Pr.CIRCLE_NODE:Te=Jf(h,le,j);break;case Pr.ELLIPSE_NODE:Te=Cp(h,le,j);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:Te=Dp(h,le,j)}l[0]=Te;var Pe=pt(O,w),$e=l[l.length-1];switch(te){case Pr.RECT_NODE:C.radius!==0&&(Rp(w,C)||($e=Zf(w,Pe,C)));break;case Pr.CIRCLE_NODE:$e=Jf(w,Pe,C);break;case Pr.ELLIPSE_NODE:$e=Cp(w,Pe,C);break;case Pr.DIAMOND_NODE:case Pr.POLYGON_NODE:$e=Dp(w,Pe,C)}return l[l.length-1]=$e,l}},{key:"getData",value:function(){var s=Jo(gn(c.prototype),"getData",this).call(this),l=this.pointsList.map(function(h){return{x:h.x,y:h.y}});return Object.assign({},s,{pointsList:l})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(s){return"".concat(s.x,",").concat(s.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var s=ct({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=s,this.points=s.map(function(l){return"".concat(l.x,",").concat(l.y)}).join(" ")}},{key:"updateStartPoint",value:function(s){this.startPoint=s,this.updatePoints()}},{key:"moveStartPoint",value:function(s,l){this.startPoint.x+=s,this.startPoint.y+=l,this.updatePoints()}},{key:"updateEndPoint",value:function(s){this.endPoint=s,this.updatePoints()}},{key:"moveEndPoint",value:function(s,l){this.endPoint.x+=s,this.endPoint.y+=l,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(s){return s})}},{key:"dragAppendSimple",value:function(s,l){this.isDragging=!0;var h=s.start,v=s.end,O=s.startIndex,w=s.endIndex,j=s.direction,C=this.pointsList,X=C;return j===Kr.HORIZONTAL?(C[O]={x:h.x,y:h.y+l.y},C[w]={x:v.x,y:v.y+l.y},X=this.pointsList.map(function(te){return te})):j===Kr.VERTICAL&&(C[O]={x:h.x+l.x,y:h.y},C[w]={x:v.x+l.x,y:v.y},X=this.pointsList.map(function(te){return te})),this.updatePointsAfterDrag(X),this.draggingPointList=X,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[O]),end:Object.assign({},C[w]),startIndex:O,endIndex:w,direction:j}}},{key:"dragAppend",value:function(s,l){this.isDragging=!0;var h=s.start,v=s.end,O=s.startIndex,w=s.endIndex,j=s.direction,C=this.pointsList;if(j===Kr.HORIZONTAL){C[O]={x:h.x,y:h.y+l.y},C[w]={x:v.x,y:v.y+l.y};var X=this.pointsList.map(function(Rt){return Rt});if(O!==0&&w!==this.pointsList.length-1&&(X=this.removeCrossPoints(O,w,X)),O===0){var te={x:h.x,y:h.y+l.y};if(!Ri(te,this.sourceNode)){var le=this.sourceNode.anchors;X=this.getDraggingPoints(j,"start",te,le,X)}}if(w===this.pointsList.length-1){var Te={x:v.x,y:v.y+l.y};if(!Ri(Te,this.targetNode)){var Pe=this.targetNode.anchors;X=this.getDraggingPoints(j,"end",Te,Pe,X)}}this.updatePointsAfterDrag(X),this.draggingPointList=X}else if(j===Kr.VERTICAL){C[O]={x:h.x+l.x,y:h.y},C[w]={x:v.x+l.x,y:v.y};var $e=this.pointsList.map(function(Rt){return Rt});if(O!==0&&w!==this.pointsList.length-1&&($e=this.removeCrossPoints(O,w,$e)),O===0){var st={x:h.x+l.x,y:h.y};if(!Ri(st,this.sourceNode)){var Dt=this.sourceNode.anchors;$e=this.getDraggingPoints(j,"start",st,Dt,$e)}}if(w===this.pointsList.length-1){var Et={x:v.x+l.x,y:v.y};if(!Ri(Et,this.targetNode)){var qt=this.targetNode.anchors;$e=this.getDraggingPoints(j,"end",Et,qt,$e)}}this.updatePointsAfterDrag($e),this.draggingPointList=$e}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},C[O]),end:Object.assign({},C[w]),startIndex:O,endIndex:w,direction:j}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var s=nt(me(this.points));this.pointsList=s.map(function(v){return v}),this.draggingPointList=[];var l=s[0];this.startPoint=Object.assign({},l);var h=s[s.length-1];this.endPoint=Object.assign({},h)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(s){var l=this.updateCrossPoints(s);this.points=l.map(function(h){return"".concat(h.x,",").concat(h.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var s=this.pointsList;return s[s.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var l=s.startPoint,h=s.endPoint,v=s.sourceNode,O=s.targetNode,w=ct({x:l.x,y:l.y},{x:h.x,y:h.y},v,O,this.offset||0);this.pointsList=w,this.initPoints()}}])&&Up(r.prototype,n),c}(qa),Fp=kr(wr.prototype,"dbClickPosition",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kr(wr.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"initPoints"),wr.prototype),kr(wr.prototype,"updatePoints",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePoints"),wr.prototype),kr(wr.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateStartPoint"),wr.prototype),kr(wr.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveStartPoint"),wr.prototype),kr(wr.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateEndPoint"),wr.prototype),kr(wr.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"moveEndPoint"),wr.prototype),kr(wr.prototype,"dragAppendStart",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendStart"),wr.prototype),kr(wr.prototype,"dragAppendSimple",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendSimple"),wr.prototype),kr(wr.prototype,"dragAppend",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppend"),wr.prototype),kr(wr.prototype,"dragAppendEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"dragAppendEnd"),wr.prototype),kr(wr.prototype,"updatePointsAfterDrag",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updatePointsAfterDrag"),wr.prototype),kr(wr.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustStart"),wr.prototype),kr(wr.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"getAdjustEnd"),wr.prototype),kr(wr.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(wr.prototype,"updateAfterAdjustStartAndEnd"),wr.prototype),wr),eu=function(t){var r=t.start,n=t.end,i=t.offset,c=t.verticalLength,s=t.type,l={leftX:0,leftY:0,rightX:0,rightY:0},h=Math.atan((n.y-r.y)/(n.x-r.x)),v=Math.atan(i/c),O=Math.sqrt(c*c+i*i);return s==="start"?n.x>=r.x?(l.leftX=r.x+O*Math.sin(h+v),l.leftY=r.y-O*Math.cos(h+v),l.rightX=r.x-O*Math.sin(h-v),l.rightY=r.y+O*Math.cos(h-v)):(l.leftX=r.x-O*Math.sin(h+v),l.leftY=r.y+O*Math.cos(h+v),l.rightX=r.x+O*Math.sin(h-v),l.rightY=r.y-O*Math.cos(h-v)):s==="end"&&(n.x>=r.x?(l.leftX=n.x+O*Math.sin(h-v),l.leftY=n.y-O*Math.cos(h-v),l.rightX=n.x-O*Math.sin(h+v),l.rightY=n.y+O*Math.cos(h+v)):(l.leftX=n.x-O*Math.sin(h-v),l.leftY=n.y+O*Math.cos(h-v),l.rightX=n.x+O*Math.sin(h+v),l.rightY=n.y-O*Math.cos(h+v))),l},uy={x:1,y:0,z:0};function zp(t){var r=Math.hypot(t.x,t.y);return{x:t.x/r,y:t.y/r,z:0}}function sy(t){return i=function(s,l){return s.x*l.y-s.y*l.x}(r=uy,n=t),c=Math.acos(function(s,l){var h=[s.x,s.y,s.z];return[l.x,l.y,l.z].reduce(function(v,O,w){return v+O*h[w]})}(zp(r),zp(n))),i>=0?c:-c;var r,n,i,c}function Hp(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Ju(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Hp(Object(n),!0).forEach(function(i){cy(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hp(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cy(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function fy(t){return function(r){if(Array.isArray(r))return dc(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Xp(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function il(t){return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},il(t)}function pc(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||Xp(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xp(t,r){if(t){if(typeof t=="string")return dc(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dc(t,r):void 0}}function dc(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}var hc=function(t){var r=[],n={};return t.forEach(function(i){var c="".concat(i.x,"-").concat(i.y);i.id=c,n[c]=i}),Object.keys(n).forEach(function(i){r.push(n[i])}),r},Qu=function(t,r){return t.width===0&&t.height===0?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-r,minY:t.minY-r,maxX:t.maxX+r,maxY:t.maxY+r,height:t.height+2*r,width:t.width+2*r}},yc=function(t,r){var n=function(i,c){var s=Math.abs(i.x-c.centerX),l=Math.abs(i.y-c.centerY);return s/c.width>l/c.height?Kr.HORIZONTAL:Kr.VERTICAL}(r,t);return n===Kr.HORIZONTAL?{x:r.x>t.centerX?t.maxX:t.minX,y:r.y}:{x:r.x,y:r.y>t.centerY?t.maxY:t.minY}},Vp=function(t,r){var n=Math.min(t.minX,r.minX),i=Math.min(t.minY,r.minY),c=Math.max(t.maxX,r.maxX),s=Math.max(t.maxY,r.maxY);return{centerX:(n+c)/2,centerY:(i+s)/2,minX:n,minY:i,maxX:c,maxY:s,height:s-i,width:c-n}},tu=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=[],i=[];t.forEach(function(w){n.push(w.x),i.push(w.y)});var c=Math.min.apply(Math,n),s=Math.max.apply(Math,n),l=Math.min.apply(Math,i),h=Math.max.apply(Math,i),v=s-c,O=h-l;return r&&(v+=r,O+=r),{centerX:(c+s)/2,centerY:(l+h)/2,maxX:s,maxY:h,minX:c,minY:l,x:(c+s)/2,y:(l+h)/2,height:O,width:v}},vc=function(t){var r=t.minX,n=t.minY,i=t.maxX,c=t.maxY;return[{x:r,y:n},{x:i,y:n},{x:i,y:c},{x:r,y:c}]},x=function(t,r){var n=t.x,i=t.y;return n<r.minX||n>r.maxX||i<r.minY||i>r.maxY},F=function(t,r){return Math.abs(t.x-r.x)+Math.abs(t.y-r.y)},Z=function(t,r,n,i,c){return F(t,r)+F(t,n)+function(s,l){var h=0;return l.forEach(function(v){v&&(s.x===v.x&&(h+=-2),s.y===v.y&&(h+=-2))}),h}(t,[r,n,i,c])},Ie=function t(r,n,i,c,s){s||(s=0),r.unshift(n[c]),i[c]&&i[c]!==c&&s<=100&&t(r,n,i,i[c],s+1)},Xe=function(t,r,n,i){var c=r.x-t.x,s=r.y-t.y,l=i.x-n.x,h=i.y-n.y,v=(-s*(t.x-n.x)+c*(t.y-n.y))/(-l*s+c*h),O=(l*(t.y-n.y)-h*(t.x-n.x))/(-l*s+c*h);return v>=0&&v<=1&&O>=0&&O<=1},De=function(t,r,n){if(n.width===0&&n.height===0)return!1;var i=pc(vc(n),4),c=i[0],s=i[1],l=i[2],h=i[3];return Xe(t,r,c,s)||Xe(t,r,c,h)||Xe(t,r,s,l)||Xe(t,r,l,h)},Fe=function(t,r,n,i,c,s,l){var h=[],v=[r],O={},w={},j={};w[r.id]=0,j[r.id]=Z(r,n,r);var C={};t.forEach(function(le){C[le.id]=le});for(var X=function(){var le,Te,Pe,$e=void 0,st=1/0;if(v.forEach(function(Et){j[Et.id]<st&&(st=j[Et.id],$e=Et)}),$e===n){var Dt=[];return Ie(Dt,C,O,n.id),{v:Dt}}Te=$e,(Pe=(le=v).indexOf(Te))>-1&&le.splice(Pe,1),h.push($e),function(Et,qt,Rt,wt){var hr=[];return Et.forEach(function(Fr){Fr!==qt&&(Fr.x!==qt.x&&Fr.y!==qt.y||De(Fr,qt,Rt)||De(Fr,qt,wt)||hr.push(Fr))}),hc(hr)}(t,$e,i,c).forEach(function(Et){if(h.indexOf(Et)===-1){v.indexOf(Et)===-1&&v.push(Et);var qt=j[$e.id]+F($e,Et);w[Et.id]&&qt>=w[Et.id]||(O[Et.id]=$e.id,w[Et.id]=qt,j[Et.id]=w[Et.id]+Z(Et,n,r,s,l))}})};v.length;){var te=X();if(il(te)==="object")return te.v}return[r,n]},tt=function(t){return _o(t)},nt=function(t){for(var r=1;r<t.length-1;){var n=t[r-1],i=t[r],c=t[r+1];n.x===i.x&&i.x===c.x||n.y===i.y&&i.y===c.y?t.splice(r,1):r++}return t},ct=function(t,r,n,i,c){var s,l,h=tt(n),v=tt(i),O=Qu(h,c),w=Qu(v,c),j=yc(O,t),C=yc(w,r);if(s=O,l=w,2*Math.abs(s.centerX-l.centerX)<s.width+l.width&&2*Math.abs(s.centerY-l.centerY)<s.height+l.height){var X=Be(t,r,j,C);return[t,j].concat(fy(X),[C,r])}var te=tu([j,C]),le=Vp(O,te),Te=Vp(w,te),Pe=[];Pe=(Pe=Pe.concat(vc(le))).concat(vc(Te));var $e={x:(t.x+r.x)/2,y:(t.y+r.y)/2};[te,le,Te].forEach(function(Dt){Pe=Pe.concat(function(Et,qt){return function(Rt,wt){return wt<Rt.minX||wt>Rt.maxX?[]:[{x:wt,y:Rt.minY},{x:wt,y:Rt.maxY}]}(Et,qt.x).concat(function(Rt,wt){return wt<Rt.minY||wt>Rt.maxY?[]:[{x:Rt.minX,y:wt},{x:Rt.maxX,y:wt}]}(Et,qt.y))}(Dt,$e).filter(function(Et){return x(Et,O)&&x(Et,w)}))}),[{x:j.x,y:C.y},{x:C.x,y:j.y}].forEach(function(Dt){x(Dt,O)&&x(Dt,w)&&Pe.push(Dt)}),Pe.unshift(j),Pe.push(C),Pe=hc(Pe);var st=Fe(Pe,j,C,h,v,t,r);return st.unshift(t),st.push(r),st.length>2&&(st=nt(st)),hc(st)},it=function(t){var r;if(t.length===1)r=[t[0],t[0]];else if(t.length>=2){for(var n=t[0],i=t[1],c=eo(n.x,n.y,i.x,i.y),s=1;s<t.length-1;s++){var l=t[s],h=t[s+1],v=eo(l.x,l.y,h.x,h.y);v>c&&(c=v,n=l,i=h)}r=[n,i]}return r},dt=function(t,r,n){var i=Ri(t,n),c=Ri(r,n);return i&&c},gt=function(t,r,n){var i=Ri(t,n),c=Ri(r,n);return!(i&&c)&&(i||c)},rt=function(t,r,n){for(var i,c,s=_o(n),l=vc(s),h=0;h<l.length;h++)Xe(t,r,l[h],l[(h+1)%l.length])&&(c=[l[h],l[(h+1)%l.length]]);return c&&(i=function(v,O,w,j){var C=(O.y-v.y)*(j.x-w.x)-(v.x-O.x)*(w.y-j.y);if(C===0)return!1;var X=((O.x-v.x)*(j.x-w.x)*(w.y-v.y)+(O.y-v.y)*(j.x-w.x)*v.x-(j.y-w.y)*(O.x-v.x)*w.x)/C,te=-((O.y-v.y)*(j.y-w.y)*(w.x-v.x)+(O.x-v.x)*(j.y-w.y)*v.y-(j.x-w.x)*(O.y-v.y)*w.y)/C;return(X-v.x)*(X-O.x)<=0&&(te-v.y)*(te-O.y)<=0&&(X-w.x)*(X-j.x)<=0&&(te-w.y)*(te-j.y)<=0&&{x:X,y:te}}(t,r,c[0],c[1])),i},pt=function(t,r){var n;return t.x===r.x?n=Kr.VERTICAL:t.y===r.y&&(n=Kr.HORIZONTAL),n},me=function(t){var r=t.split(" "),n=[];return r&&r.forEach(function(i){var c=pc(i.split(","),2),s=c[0],l=c[1];n.push({x:Number(s),y:Number(l)})}),n},Be=function(t,r,n,i){var c=[];if(pt(t,n)===pt(r,i))t.y===n.y?(c.push({x:n.x,y:(n.y+i.y)/2}),c.push({x:i.x,y:(n.y+i.y)/2})):(c.push({x:(n.x+i.x)/2,y:n.y}),c.push({x:(n.x+i.x)/2,y:i.y}));else{var s={x:n.x,y:i.y},l=ia(s,t,n),h=ia(s,r,i);if(l||h)s={x:i.x,y:n.y};else{var v=at(s,t,n),O=at(s,r,i);v&&O&&(s={x:i.x,y:n.y})}c.push(s)}return c},at=function(t,r,n){return t.x===r.x&&t.x===n.x||t.y===r.y&&t.y===n.y},Ot=function(t){if(!t)return 0;for(var r=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);t.match(/[A-Z]/)?r+=1.5:r+=i>=1&&i<=126||i>=65376&&i<=65439?1:2}return r},qe=function(t){var r=t.start,n=t.end,i=t.sourceNode,c=t.targetNode,s=t.offset,l=_o(i),h=_o(c),v=Qu(l,s),O=Qu(h,s);return{sNext:yc(v,r),ePre:yc(O,n)}},St=function(t){var r=t.replace(/M/g,"").replace(/C/g,",").split(",");return[Je(r[0]),Je(r[1]),Je(r[2]),Je(r[3])]},Je=function(t){var r=pc(t.replace(/(^\s*)/g,"").split(" "),2);return{x:+r[0],y:+r[1]}},ht=function(t){var r=St(t),n=pc(r,4),i=function(c,s,l,h){return function(v){if(v<0||v>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:c.x*Math.pow(1-v,3)+3*s.x*v*Math.pow(1-v,2)+3*l.x*Math.pow(v,2)*(1-v)+h.x*Math.pow(v,3),y:c.y*Math.pow(1-v,3)+3*s.y*v*Math.pow(1-v,2)+3*l.y*Math.pow(v,2)*(1-v)+h.y*Math.pow(v,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[i,r[3]]},Qe=function(t,r){for(var n,i=t.x,c=t.y,s=me(r),l=Number.MAX_SAFE_INTEGER,h=[],v=0;v<s.length;v++)h.push({start:s[v],end:s[(v+1)%s.length]});if(h.forEach(function(C){var X=C.start,te=C.end;if(X.x===te.x){var le={x:X.x,y:c};if(ia(le,X,te)){var Te=Math.abs(X.x-i);Te<l&&(l=Te,n=le)}}else if(X.y===te.y){var Pe={x:i,y:X.y};if(ia(Pe,X,te)){var $e=Math.abs(X.y-c);$e<l&&(l=$e,n=Pe)}}}),!n){var O=h[0],w=O.start,j=O.end;n={x:w.x+(j.x-w.x)/2,y:w.y+(j.y-w.y)/2}}return n},yt=function(t){return Cu(t,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},zt=function(t,r){return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))};o(204);var Zt=function(){};function mt(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ze(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var We=window.document;function Qt(t){var r=t.onDragStart,n=r===void 0?Zt:r,i=t.onDragging,c=i===void 0?Zt:i,s=t.onDragEnd,l=s===void 0?Zt:s,h=t.step,v=h===void 0?1:h,O=t.isStopPropagation,w=O===void 0||O,j=!1,C=!1,X=0,te=0,le=0,Te=0;function Pe(st){if(w&&st.stopPropagation(),C&&(j=!0,le+=st.clientX-X,Te+=st.clientY-te,X=st.clientX,te=st.clientY,Math.abs(le)>v||Math.abs(Te)>v)){var Dt=le%v,Et=Te%v,qt=le-Dt,Rt=Te-Et;le=Dt,Te=Et,c({deltaX:qt,deltaY:Rt,event:st})}}function $e(st){if(w&&st.stopPropagation(),C=!1,We.removeEventListener("mousemove",Pe,!1),We.removeEventListener("mouseup",$e,!1),j)return j=!1,l({event:st})}return function(st){if(st.button===0)return w&&st.stopPropagation(),C=!0,X=st.clientX,te=st.clientY,We.addEventListener("mousemove",Pe,!1),We.addEventListener("mouseup",$e,!1),n({event:st})}}var be,kt,mr,ir,vr,Mr,fn,wn,xr,mn,$r,ln,bn,Wr=function(){function t(i){var c=this,s=i.onDragStart,l=s===void 0?Zt:s,h=i.onDragging,v=h===void 0?Zt:h,O=i.onDragEnd,w=O===void 0?Zt:O,j=i.eventType,C=j===void 0?"":j,X=i.eventCenter,te=X===void 0?null:X,le=i.step,Te=le===void 0?1:le,Pe=i.isStopPropagation,$e=Pe===void 0||Pe,st=i.model,Dt=st===void 0?null:st,Et=i.data,qt=Et===void 0?null:Et;(function(Rt,wt){if(!(Rt instanceof wt))throw new TypeError("Cannot call a class as a function")})(this,t),Ze(this,"onDragStart",void 0),Ze(this,"onDragging",void 0),Ze(this,"onDragEnd",void 0),Ze(this,"step",void 0),Ze(this,"isStopPropagation",void 0),Ze(this,"isDragging",!1),Ze(this,"isStartDragging",!1),Ze(this,"startX",0),Ze(this,"startY",0),Ze(this,"sumDeltaX",0),Ze(this,"sumDeltaY",0),Ze(this,"eventType",void 0),Ze(this,"eventCenter",void 0),Ze(this,"model",void 0),Ze(this,"data",void 0),Ze(this,"startTime",void 0),Ze(this,"handleMouseDown",function(Rt){var wt,hr;if(Rt.button===0){c.isStopPropagation&&Rt.stopPropagation(),c.isStartDragging=!0,c.startX=Rt.clientX,c.startY=Rt.clientY,We.addEventListener("mousemove",c.handleMouseMove,!1),We.addEventListener("mouseup",c.handleMouseUp,!1);var Fr=(wt=c.model)===null||wt===void 0?void 0:wt.getData();(hr=c.eventCenter)===null||hr===void 0||hr.emit(tr["".concat(c.eventType,"_MOUSEDOWN")],{e:Rt,data:c.data||Fr}),c.startTime=new Date().getTime()}}),Ze(this,"handleMouseMove",function(Rt){if(c.isStopPropagation&&Rt.stopPropagation(),c.isStartDragging&&(c.sumDeltaX+=Rt.clientX-c.startX,c.sumDeltaY+=Rt.clientY-c.startY,c.startX=Rt.clientX,c.startY=Rt.clientY,c.step<=1||Math.abs(c.sumDeltaX)>c.step||Math.abs(c.sumDeltaY)>c.step)){var wt,hr=c.sumDeltaX%c.step,Fr=c.sumDeltaY%c.step,qr=c.sumDeltaX-hr,Vr=c.sumDeltaY-Fr;c.sumDeltaX=hr,c.sumDeltaY=Fr;var en,Ln=(wt=c.model)===null||wt===void 0?void 0:wt.getData();c.isDragging||((en=c.eventCenter)===null||en===void 0||en.emit(tr["".concat(c.eventType,"_DRAGSTART")],{e:Rt,data:c.data||Ln}),c.onDragStart({event:Rt})),c.isDragging=!0,Promise.resolve().then(function(){var Vn,Uo;c.onDragging({deltaX:qr,deltaY:Vr,event:Rt}),(Vn=c.eventCenter)===null||Vn===void 0||Vn.emit(tr["".concat(c.eventType,"_MOUSEMOVE")],{e:Rt,data:c.data||Ln}),(Uo=c.eventCenter)===null||Uo===void 0||Uo.emit(tr["".concat(c.eventType,"_DRAG")],{e:Rt,data:c.data||Ln})})}}),Ze(this,"handleMouseUp",function(Rt){c.isStartDragging=!1,c.isStopPropagation&&Rt.stopPropagation(),Promise.resolve().then(function(){var wt,hr,Fr;We.removeEventListener("mousemove",c.handleMouseMove,!1),We.removeEventListener("mouseup",c.handleMouseUp,!1);var qr=(wt=c.model)===null||wt===void 0?void 0:wt.getData();(hr=c.eventCenter)===null||hr===void 0||hr.emit(tr["".concat(c.eventType,"_MOUSEUP")],{e:Rt,data:c.data||qr}),c.isDragging&&(c.isDragging=!1,c.onDragEnd({event:Rt}),(Fr=c.eventCenter)===null||Fr===void 0||Fr.emit(tr["".concat(c.eventType,"_DROP")],{e:Rt,data:c.data||qr}))})}),Ze(this,"cancelDrag",function(){We.removeEventListener("mousemove",c.handleMouseMove,!1),We.removeEventListener("mouseup",c.handleMouseUp,!1),c.onDragEnd({event:null}),c.isDragging=!1}),this.onDragStart=l,this.onDragging=v,this.onDragEnd=w,this.step=Te,this.isStopPropagation=$e,this.eventType=C,this.eventCenter=te,this.model=Dt,this.data=qt}var r,n;return r=t,(n=[{key:"setStep",value:function(i){this.step=i}}])&&mt(r.prototype,n),t}(),An={node:!1,edge:!1},Gn={node:!0,edge:!0};function nn(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function cr(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nn(Object(n),!0).forEach(function(i){Yn(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _n(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||Yt(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jr(t){return function(r){if(Array.isArray(r))return br(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Yt(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yt(t,r){if(t){if(typeof t=="string")return br(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?br(t,r):void 0}}function br(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Sr(t){return Sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Sr(t)}function Br(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function ei(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yn(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function k(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var ke,Me=200,Nt=(be=function(){function t(i){(function(te,le){if(!(te instanceof le))throw new TypeError("Cannot call a class as a function")})(this,t),Yn(this,"rootEl",void 0),Br(this,"width",kt,this),Br(this,"height",mr,this),Yn(this,"theme",void 0),Yn(this,"eventCenter",void 0),Yn(this,"modelMap",new Map),Yn(this,"topElement",void 0),Yn(this,"animation",void 0),Yn(this,"idGenerator",void 0),Yn(this,"edgeGenerator",void 0),Yn(this,"nodeMoveRules",[]),Br(this,"edgeType",ir,this),Br(this,"nodes",vr,this),Br(this,"edges",Mr,this),Br(this,"overlapMode",fn,this),Br(this,"background",wn,this),Br(this,"transformModel",xr,this),Br(this,"editConfigModel",mn,this),Br(this,"gridSize",$r,this),Br(this,"partial",ln,this),Br(this,"fakerNode",bn,this);var c,s,l,h=i.container,v=i.background,O=v===void 0?{}:v,w=i.grid,j=i.idGenerator,C=i.edgeGenerator,X=i.animation;this.background=O,Sr(w)==="object"&&(this.gridSize=w.size),this.rootEl=h,this.editConfigModel=new Pf(i),this.eventCenter=new xp,this.transformModel=new sp(this.eventCenter),this.theme=Hf(i.style),this.edgeType=i.edgeType||"polyline",this.width=i.width,this.height=i.height,this.animation=(c=X)&&typeof c!="boolean"?Zs(cn(An),c):cn(c===!0?Gn:An),this.partial=i.partial,this.overlapMode=i.overlapMode||0,this.idGenerator=j,this.edgeGenerator=(s=this,typeof(l=C)!="function"?function(te,le,Te){return Object.assign({type:s.edgeType},Te)}:function(te,le,Te){var Pe=l(te,le,Te);return Pe?typeof Pe=="string"?Object.assign({},Te,{type:Pe}):Object.assign({type:Pe},Te):{type:s.edgeType}}),this.width=i.width||this.rootEl.getBoundingClientRect().width,this.height=i.height||this.rootEl.getBoundingClientRect().height,this.flowId=pi()}var r,n;return r=t,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(i,c,s){return i[c.id]={index:s,model:c},i},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(i,c,s){return i[c.id]={index:s,model:c},i},{})}},{key:"modelsMap",get:function(){return[].concat(jr(this.nodes),jr(this.edges)).reduce(function(i,c){return i[c.id]=c,i},{})}},{key:"sortElements",get:function(){var i=[];this.nodes.forEach(function(O){return i.push(O)}),this.edges.forEach(function(O){return i.push(O)}),i=i.sort(function(O,w){return O.zIndex-w.zIndex});for(var c=[],s=[-200,-200],l=[this.width+Me,this.height+Me],h=0;h<i.length;h++){var v=i[h];v.visible&&(!this.partial||v.isSelected||this.isElementInArea(v,s,l,!1,!1))&&c.push(v)}return c}},{key:"textEditElement",get:function(){var i=this.nodes.find(function(s){return s.state===zr.TEXT_EDIT}),c=this.edges.find(function(s){return s.state===zr.TEXT_EDIT});return i||c}},{key:"selectElements",get:function(){var i=new Map;return this.nodes.forEach(function(c){c.isSelected&&i.set(c.id,c)}),this.edges.forEach(function(c){c.isSelected&&i.set(c.id,c)}),i}},{key:"selectNodes",get:function(){var i=[];return this.nodes.forEach(function(c){c.isSelected&&i.push(c)}),i}},{key:"getAreaElement",value:function(i,c){var s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=arguments.length>4&&arguments[4]!==void 0&&arguments[4],v=[],O=[];this.nodes.forEach(function(C){return O.push(C)}),this.edges.forEach(function(C){return O.push(C)});for(var w=0;w<O.length;w++){var j=O[w];h&&!j.visible||!this.isElementInArea(j,i,c,s,l)||v.push(j)}return v}},{key:"getModel",value:function(i){return this.modelMap.get(i)}},{key:"getNodeModelById",value:function(i){var c;return this.fakerNode&&i===this.fakerNode.id?this.fakerNode:(c=this.nodesMap[i])===null||c===void 0?void 0:c.model}},{key:"getPointByClient",value:function(i){var c=i.x,s=i.y,l=this.rootEl.getBoundingClientRect(),h={x:c-l.left,y:s-l.top},v=_n(this.transformModel.HtmlPointToCanvasPoint([h.x,h.y]),2);return{domOverlayPosition:h,canvasOverlayPosition:{x:v[0],y:v[1]}}}},{key:"isElementInArea",value:function(i,c,s){var l=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(i.BaseType===Tn.NODE){for(var v=_o(i=i),O=v.minX,w=v.minY,j=v.maxX,C=v.maxY,X=[{x:O,y:w},{x:j,y:w},{x:j,y:C},{x:O,y:C}],te=h,le=0;le<X.length;le++){var Te=X[le],Pe=Te.x,$e=Te.y,st=this.transformModel.CanvasPointToHtmlPoint([Pe,$e]),Dt=_n(st,2);if(Pe=Dt[0],$e=Dt[1],tc([Pe,$e],c,s)!==h){te=!h;break}}return te}if(i.BaseType===Tn.EDGE){var Et=i=i,qt=Et.startPoint,Rt=Et.endPoint,wt=this.transformModel.CanvasPointToHtmlPoint([qt.x,qt.y]),hr=this.transformModel.CanvasPointToHtmlPoint([Rt.x,Rt.y]),Fr=tc(wt,c,s),qr=tc(hr,c,s);return l?Fr&&qr:Fr||qr}return!1}},{key:"graphDataToModel",value:function(i){var c=this;if(this.width&&this.height||this.resize(),!i)return this.nodes=[],void(this.edges=[]);i.nodes?this.nodes=Gs(i.nodes,function(s){var l=c.getModel(s.type);if(!l)throw new Error("找不到".concat(s.type,"对应的节点。"));var h=s.x,v=s.y;return h&&v&&(s.x=li(h,c.gridSize),s.y=li(v,c.gridSize),Sr(s.text)==="object"&&(s.text.x-=Xf(h,c.gridSize),s.text.y-=Xf(v,c.gridSize))),new l(s,c)}):this.nodes=[],i.edges?this.edges=Gs(i.edges,function(s){var l=c.getModel(s.type);if(!l)throw new Error("找不到".concat(s.type,"对应的边。"));return new l(s,c)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var i=[];this.edges.forEach(function(s){var l=s.getData();l&&!s.virtual&&i.push(l)});var c=[];return this.nodes.forEach(function(s){var l=s.getData();l&&!s.virtual&&c.push(l)}),{nodes:c,edges:i}}},{key:"modelToHistoryData",value:function(){for(var i=!1,c=[],s=0;s<this.nodes.length;s++){var l=this.nodes[s];if(l.isDragging){i=!0;break}c.push(l.getHistoryData())}if(i)return!1;for(var h=!1,v=[],O=0;O<this.edges.length;O++){var w=this.edges[O];if(w.isDragging){h=!0;break}v.push(w.getHistoryData())}return!h&&{nodes:c,edges:v}}},{key:"getEdgeModelById",value:function(i){var c;return(c=this.edgesMap[i])===null||c===void 0?void 0:c.model}},{key:"getElement",value:function(i){return this.modelsMap[i]}},{key:"getNodeEdges",value:function(i){for(var c=[],s=0;s<this.edges.length;s++){var l=this.edges[s],h=this.edges[s].sourceNodeId===i,v=this.edges[s].targetNodeId===i;(h||v)&&c.push(l)}return c}},{key:"getSelectElements",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],c=this.selectElements,s={nodes:[],edges:[]};return c.forEach(function(l){if(l.BaseType===Tn.NODE&&s.nodes.push(l.getData()),l.BaseType===Tn.EDGE){var h=l.getData(),v=c.get(h.sourceNodeId)&&c.get(h.targetNodeId);(i||v)&&s.edges.push(h)}}),s}},{key:"updateAttributes",value:function(i,c){this.getElement(i).updateAttributes(c)}},{key:"changeNodeId",value:function(i,c){return c||(c=pi()),this.nodesMap[c]?"":this.nodesMap[i]?(this.edges.forEach(function(s){s.sourceNodeId===i&&(s.sourceNodeId=c),s.targetNodeId===i&&(s.targetNodeId=c)}),this.nodesMap[i].model.id=c,this.nodesMap[c]=this.nodesMap[i],c):""}},{key:"changeEdgeId",value:function(i,c){return c||(c=pi()),this.edgesMap[c]?"":this.edgesMap[i]?(this.edges.forEach(function(s){s.id===i&&s.changeEdgeId(c)}),c):""}},{key:"setFakerNode",value:function(i){this.fakerNode=i}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(i,c){return this.modelMap.set(i,c)}},{key:"toFront",value:function(i){var c,s,l,h=((c=this.nodesMap[i])===null||c===void 0?void 0:c.model)||((s=this.edgesMap[i])===null||s===void 0?void 0:s.model);h&&(this.overlapMode===co.DEFAULT&&((l=this.topElement)===null||l===void 0||l.setZIndex(),h.setZIndex(9999),this.topElement=h),this.overlapMode===co.INCREASE&&this.setElementZIndex(i,"top"))}},{key:"setElementZIndex",value:function(i,c){var s,l,h,v=((s=this.nodesMap[i])===null||s===void 0?void 0:s.model)||((l=this.edgesMap[i])===null||l===void 0?void 0:l.model);v&&(typeof c=="number"&&(h=c),c==="top"&&(h=Ka()),c==="bottom"&&(h=--el),v.setZIndex(h))}},{key:"deleteNode",value:function(i){var c=this.nodesMap[i].model.getData();this.deleteEdgeBySource(i),this.deleteEdgeByTarget(i),this.nodes.splice(this.nodesMap[i].index,1),this.eventCenter.emit(tr.NODE_DELETE,{data:c})}},{key:"addNode",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr.NODE_ADD,s=$n(i);s.id&&this.nodesMap[i.id]&&delete s.id;var l=this.getModel(s.type);if(!l)throw new Error("找不到".concat(s.type,"对应的节点，请确认是否已注册此类型节点。"));s.x=li(s.x,this.gridSize),s.y=li(s.y,this.gridSize);var h=new l(s,this);this.nodes.push(h);var v=h.getData();return this.eventCenter.emit(c,{data:v}),h}},{key:"cloneNode",value:function(i){var c=this.getNodeModelById(i),s=c.getData();s.x+=30,s.y+=30,delete s.id,s.text&&(s.text.x+=30,s.text.y+=30);var l=this.addNode(s);return l.setSelected(!0),c.setSelected(!1),l.getData()}},{key:"moveNode",value:function(i,c,s){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=this.nodesMap[i];if(h){var v=h.model,O=v.getMoveDistance(c,s,l),w=_n(O,2);c=w[0],s=w[1],this.moveEdge(i,c,s)}}},{key:"moveNode2Coordinate",value:function(i,c,s){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=this.nodesMap[i];if(h){var v=h.model,O=v.x,w=v.y,j=c-O,C=s-w;this.moveNode(i,j,C,l)}}},{key:"editText",value:function(i){this.setElementStateById(i,zr.TEXT_EDIT)}},{key:"addEdge",value:function(i){var c=$n(i),s=c.type;s||(s=this.edgeType),c.id&&this.edgesMap[c.id]&&delete c.id;var l=this.getModel(s);if(!l)throw new Error("找不到".concat(s,"对应的边，请确认是否已注册此类型边。"));var h=new l(cr(cr({},c),{},{type:s}),this),v=h.getData();return this.edges.push(h),this.eventCenter.emit(tr.EDGE_ADD,{data:v}),h}},{key:"moveEdge",value:function(i,c,s){for(var l=0;l<this.edges.length;l++){var h,v=this.edges[l],O=v.textPosition,w=O.x,j=O.y,C=this.edges[l].sourceNodeId===i,X=this.edges[l].targetNodeId===i;if(C&&v.moveStartPoint(c,s),X&&v.moveEndPoint(c,s),C||X)if(v.customTextPosition===!0)v.resetTextPosition();else if(v.modelType===Pr.POLYLINE_EDGE&&(h=v.text)!==null&&h!==void 0&&h.value){var te=v.text,le=Qe(te,v.points);v.moveText(le.x-te.x,le.y-te.y)}else{var Te=v.textPosition,Pe=Te.x,$e=Te.y;v.moveText(Pe-w,$e-j)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(i,c){for(var s=0;s<this.edges.length;s++)if(this.edges[s].sourceNodeId===i&&this.edges[s].targetNodeId===c){var l=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(tr.EDGE_DELETE,{data:l})}}},{key:"deleteEdgeById",value:function(i){if(this.edgesMap[i]){var c=this.edgesMap[i].index,s=this.edgesMap[i].model.getData();this.edges.splice(c,1),this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"deleteEdgeBySource",value:function(i){for(var c=0;c<this.edges.length;c++)if(this.edges[c].sourceNodeId===i){var s=this.edges[c].getData();this.edges.splice(c,1),c--,this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"deleteEdgeByTarget",value:function(i){for(var c=0;c<this.edges.length;c++)if(this.edges[c].targetNodeId===i){var s=this.edges[c].getData();this.edges.splice(c,1),c--,this.eventCenter.emit(tr.EDGE_DELETE,{data:s})}}},{key:"setElementStateById",value:function(i,c,s){this.nodes.forEach(function(l){l.id===i?l.setElementState(c,s):l.setElementState(zr.DEFAULT)}),this.edges.forEach(function(l){l.id===i?l.setElementState(c,s):l.setElementState(zr.DEFAULT)})}},{key:"updateText",value:function(i,c){this.nodes.forEach(function(s){s.id===i&&s.updateText(c)}),this.edges.forEach(function(s){s.id===i&&s.updateText(c)})}},{key:"selectNodeById",value:function(i){var c,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s||this.clearSelectElements();var l=(c=this.nodesMap[i])===null||c===void 0?void 0:c.model;l==null||l.setSelected(!0)}},{key:"selectEdgeById",value:function(i){var c,s=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s||this.clearSelectElements();var l=(c=this.edgesMap[i])===null||c===void 0?void 0:c.model;l==null||l.setSelected(!0)}},{key:"selectElementById",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0&&arguments[1];c||this.clearSelectElements();var s=this.getElement(i);s==null||s.setSelected(!0)}},{key:"clearSelectElements",value:function(){var i;this.selectElements.forEach(function(c){c==null||c.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===co.DEFAULT&&((i=this.topElement)===null||i===void 0||i.setZIndex())}},{key:"moveNodes",value:function(i,c,s){for(var l=this,h=arguments.length>3&&arguments[3]!==void 0&&arguments[3],v=i.reduce(function(Pe,$e){var st=l.nodesMap[$e].model.getMoveDistance(c,s,h);return Pe[$e]=st,Pe},{}),O=0;O<this.edges.length;O++){var w=this.edges[O],j=v[w.sourceNodeId],C=void 0,X=void 0;if(j){var te=_n(j,2);C=te[0],X=te[1],w.moveStartPoint(C,X)}var le=v[w.targetNodeId];if(le){var Te=_n(le,2);C=Te[0],X=Te[1],w.moveEndPoint(C,X)}(j||le)&&w.moveText(C,X)}}},{key:"addNodeMoveRules",value:function(i){this.nodeMoveRules.includes(i)||this.nodeMoveRules.push(i)}},{key:"setDefaultEdgeType",value:function(i){this.edgeType=i}},{key:"changeNodeType",value:function(i,c){var s=this.getNodeModelById(i);if(s){var l=s.getData();l.type=c;var h=this.getModel(c);if(!h)throw new Error("找不到".concat(c,"对应的节点，请确认是否已注册此类型节点。"));var v=new h(l,this);this.nodes.splice(this.nodesMap[i].index,1,v),this.getNodeEdges(i).forEach(function(O){if(O.sourceNodeId===i){var w=Ip(v,O.startPoint,v.width,v.height);O.updateStartPoint(w)}if(O.targetNodeId===i){var j=Ip(v,O.endPoint,v.width,v.height);O.updateEndPoint(j)}})}}},{key:"changeEdgeType",value:function(i,c){var s=this.getEdgeModelById(i);if(s&&s.type!==c){var l=s.getData();l.type=c;var h=this.getModel(c);if(!h)throw new Error("找不到".concat(c,"对应的节点，请确认是否已注册此类型节点。"));delete l.pointsList;var v=new h(l,this);this.edges.splice(this.edgesMap[i].index,1,v)}}},{key:"getNodeIncomingEdge",value:function(i){var c=[];return this.edges.forEach(function(s){s.targetNodeId===i&&c.push(s)}),c}},{key:"getNodeOutgoingEdge",value:function(i){var c=[];return this.edges.forEach(function(s){s.sourceNodeId===i&&c.push(s)}),c}},{key:"getNodeIncomingNode",value:function(i){var c=this,s=[];return this.edges.forEach(function(l){l.targetNodeId===i&&s.push(c.nodesMap[l.sourceNodeId].model)}),s}},{key:"getNodeOutgoingNode",value:function(i){var c=this,s=[];return this.edges.forEach(function(l){l.sourceNodeId===i&&s.push(c.nodesMap[l.targetNodeId].model)}),s}},{key:"setTheme",value:function(i){this.theme=Hf(cr(cr({},this.theme),i))}},{key:"resize",value:function(i,c){this.width=i||this.rootEl.getBoundingClientRect().width,this.height=c||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var i=this.nodes,c=[],s=[];i.forEach(function(j){var C=j.x,X=j.y,te=j.width,le=j.height,Te=j.getNodeStyle().strokeWidth,Pe=Te===void 0?0:Te;c=c.concat([C+te/2+Pe,C-te/2-Pe]),s=s.concat([X+le/2+Pe,X-le/2-Pe])});var l=Math.min.apply(Math,jr(c)),h=Math.max.apply(Math,jr(c)),v=Math.min.apply(Math,jr(s)),O=h-l||0,w=Math.max.apply(Math,jr(s))-v||0;return{virtualRectWidth:O,virtualRectHeight:w,virtualRectCenterPositionX:l+O/2,virtualRectCenterPositionY:v+w/2}}},{key:"translateCenter",value:function(){var i=this.nodes,c=this.width,s=this.height,l=this.rootEl,h=this.transformModel;if(i.length){var v=c||l.clientWidth,O=s||l.clientHeight,w=this.getVirtualRectSize(),j=w.virtualRectCenterPositionX,C=w.virtualRectCenterPositionY;h.focusOn(j,C,v,O)}}},{key:"fitView",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,s=this.nodes,l=this.width,h=this.height,v=this.rootEl,O=this.transformModel;if(s.length){var w=l||v.clientWidth,j=h||v.clientHeight,C=this.getVirtualRectSize(),X=C.virtualRectWidth,te=C.virtualRectHeight,le=C.virtualRectCenterPositionX,Te=C.virtualRectCenterPositionY,Pe=(X+c)/w,$e=(te+i)/j,st=0;st=1/Math.max(Pe,$e);var Dt=[w/2,j/2];O.zoom(st,Dt),O.focusOn(le,Te,w,j)}}},{key:"openEdgeAnimation",value:function(i){this.getEdgeModelById(i).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(i){this.getEdgeModelById(i).closeEdgeAnimation()}}],n&&ei(r.prototype,n),t}(),kt=k(be.prototype,"width",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mr=k(be.prototype,"height",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ir=k(be.prototype,"edgeType",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vr=k(be.prototype,"nodes",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=k(be.prototype,"edges",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fn=k(be.prototype,"overlapMode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return co.DEFAULT}}),wn=k(be.prototype,"background",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xr=k(be.prototype,"transformModel",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mn=k(be.prototype,"editConfigModel",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r=k(be.prototype,"gridSize",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ln=k(be.prototype,"partial",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bn=k(be.prototype,"fakerNode",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k(be.prototype,"nodesMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"nodesMap"),be.prototype),k(be.prototype,"edgesMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"edgesMap"),be.prototype),k(be.prototype,"modelsMap",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"modelsMap"),be.prototype),k(be.prototype,"sortElements",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"sortElements"),be.prototype),k(be.prototype,"textEditElement",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"textEditElement"),be.prototype),k(be.prototype,"selectElements",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"selectElements"),be.prototype),k(be.prototype,"selectNodes",[d.m],Object.getOwnPropertyDescriptor(be.prototype,"selectNodes"),be.prototype),k(be.prototype,"setFakerNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setFakerNode"),be.prototype),k(be.prototype,"removeFakerNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"removeFakerNode"),be.prototype),k(be.prototype,"setModel",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setModel"),be.prototype),k(be.prototype,"toFront",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"toFront"),be.prototype),k(be.prototype,"setElementZIndex",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setElementZIndex"),be.prototype),k(be.prototype,"deleteNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteNode"),be.prototype),k(be.prototype,"addNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"addNode"),be.prototype),k(be.prototype,"cloneNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"cloneNode"),be.prototype),k(be.prototype,"moveNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNode"),be.prototype),k(be.prototype,"moveNode2Coordinate",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNode2Coordinate"),be.prototype),k(be.prototype,"editText",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"editText"),be.prototype),k(be.prototype,"addEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"addEdge"),be.prototype),k(be.prototype,"moveEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveEdge"),be.prototype),k(be.prototype,"deleteEdgeBySourceAndTarget",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeBySourceAndTarget"),be.prototype),k(be.prototype,"deleteEdgeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeById"),be.prototype),k(be.prototype,"deleteEdgeBySource",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeBySource"),be.prototype),k(be.prototype,"deleteEdgeByTarget",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteEdgeByTarget"),be.prototype),k(be.prototype,"setElementStateById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setElementStateById"),be.prototype),k(be.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"updateText"),be.prototype),k(be.prototype,"selectNodeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectNodeById"),be.prototype),k(be.prototype,"selectEdgeById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectEdgeById"),be.prototype),k(be.prototype,"selectElementById",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"selectElementById"),be.prototype),k(be.prototype,"clearSelectElements",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"clearSelectElements"),be.prototype),k(be.prototype,"moveNodes",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"moveNodes"),be.prototype),k(be.prototype,"setDefaultEdgeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setDefaultEdgeType"),be.prototype),k(be.prototype,"changeNodeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"changeNodeType"),be.prototype),k(be.prototype,"changeEdgeType",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"changeEdgeType"),be.prototype),k(be.prototype,"getNodeIncomingEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeIncomingEdge"),be.prototype),k(be.prototype,"getNodeOutgoingEdge",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeOutgoingEdge"),be.prototype),k(be.prototype,"getNodeIncomingNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeIncomingNode"),be.prototype),k(be.prototype,"getNodeOutgoingNode",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"getNodeOutgoingNode"),be.prototype),k(be.prototype,"setTheme",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"setTheme"),be.prototype),k(be.prototype,"resize",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"resize"),be.prototype),k(be.prototype,"clearData",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"clearData"),be.prototype),k(be.prototype,"translateCenter",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"translateCenter"),be.prototype),k(be.prototype,"fitView",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"fitView"),be.prototype),k(be.prototype,"openEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"openEdgeAnimation"),be.prototype),k(be.prototype,"closeEdgeAnimation",[d.k],Object.getOwnPropertyDescriptor(be.prototype,"closeEdgeAnimation"),be.prototype),be),Er=Nt;function H(t){return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},H(t)}function R(){return R=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},R.apply(this,arguments)}function re(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ge(t,r){return ge=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ge(t,r)}function we(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=pe(t);if(r){var c=pe(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return oe(this,n)}}function oe(t,r){if(r&&(H(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(t)}function ee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},pe(t)}function z(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Q,U=vi(ke=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ge(s,l)})(c,t);var r,n,i=we(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),z(ee(l=i.call(this)),"stepDrag",void 0),z(ee(l),"stepScrollX",0),z(ee(l),"stepScrollY",0),z(ee(l),"onDragging",function(w){var j=w.deltaX,C=w.deltaY;l.setState({isDragging:!0});var X=l.props.graphModel,te=X.transformModel;X.editConfigModel.stopMoveGraph||te.translate(j,C)}),z(ee(l),"onDragEnd",function(){l.setState({isDragging:!1})}),z(ee(l),"zoomHandler",function(w){var j=l.props,C=j.graphModel,X=C.editConfigModel,te=C.transformModel,le=C.gridSize,Te=j.graphModel,Pe=w.deltaX,$e=w.deltaY;if(X.stopScrollGraph||w.ctrlKey===!0){if(!X.stopZoomGraph){w.preventDefault();var st=Te.getPointByClient({x:w.clientX,y:w.clientY}).canvasOverlayPosition,Dt=st.x,Et=st.y;te.zoom(w.deltaY<0,[Dt,Et])}}else{if(w.preventDefault(),l.stepScrollX+=Pe,l.stepScrollY+=$e,Math.abs(l.stepScrollX)>=le){var qt=l.stepScrollX%le,Rt=l.stepScrollX-qt;te.translate(-Rt*te.SCALE_X,0),l.stepScrollX=qt}if(Math.abs(l.stepScrollY)>=le){var wt=l.stepScrollY%le,hr=l.stepScrollY-wt;te.translate(0,-hr*te.SCALE_Y),l.stepScrollY=wt}}}),z(ee(l),"clickHandler",function(w){if(w.target.getAttribute("name")==="canvas-overlay"){var j=l.props.graphModel;j.selectElements.size>0&&j.clearSelectElements(),j.eventCenter.emit(tr.BLANK_CLICK,{e:w})}}),z(ee(l),"handleContextMenu",function(w){if(w.target.getAttribute("name")==="canvas-overlay"){w.preventDefault();var j=l.props.graphModel,C=j.getPointByClient({x:w.clientX,y:w.clientY});j.eventCenter.emit(tr.BLANK_CONTEXTMENU,{e:w,position:C})}}),z(ee(l),"mouseDownHandler",function(w){var j=l.props.graphModel,C=j.eventCenter,X=j.editConfigModel,te=j.transformModel.SCALE_X,le=j.gridSize,Te=w.target,Pe=!X.adjustEdge&&!X.adjustNodePosition;(Te.getAttribute("name")==="canvas-overlay"||Pe)&&(X.stopMoveGraph?C.emit(tr.BLANK_MOUSEDOWN,{e:w}):(l.stepDrag.setStep(le*te),l.stepDrag.handleMouseDown(w)),l.clickHandler(w))});var h=s.graphModel,v=h.gridSize,O=h.eventCenter;return l.stepDrag=new Wr({onDragging:l.onDragging,onDragEnd:l.onDragEnd,step:v,eventType:"BLANK",isStopPropagation:!1,eventCenter:O,model:null}),l.state={isDragging:!1},l}return r=c,(n=[{key:"render",value:function(){var s=this.props.graphModel.transformModel.getTransformStyle().transform,l=this.props,h=l.children,v=l.dnd,O=this.state.isDragging;return Object(_e.g)("svg",R({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:O?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},v.eventMap()),Object(_e.g)("g",{transform:s},h))}}])&&re(r.prototype,n),c}(_e.a))||ke;function ye(t){return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ye(t)}function Ae(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Ve(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ye(t,r){return Ye=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ye(t,r)}function Ue(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ft(t);if(r){var c=Ft(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ut(this,n)}}function ut(t,r){if(r&&(ye(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Ft(t){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ft(t)}var dr=vi(Q=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ye(s,l)})(c,t);var r,n,i=Ue(c);function c(){return Ae(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var s=this.props,l=s.tool,h=s.graphModel,v=l.getTools().map(function(O){return Object(_e.g)(O,{graphModel:h,logicFlow:l.instance})});return l.components=v,v}},{key:"triggerToolRender",value:function(){var s=this.props,l=s.tool,h=s.graphModel,v=document.querySelector("#ToolOverlay_".concat(h.flowId)),O=l.getInstance();O.components.forEach(function(w){return w(O,v)}),O.components=[]}},{key:"render",value:function(){var s=this.props.graphModel;return Object(_e.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(s.flowId)},this.getTools())}}])&&Ve(r.prototype,n),c}(_e.a))||Q;function It(t){return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},It(t)}function Kt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fr(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nr(t,r){return Nr=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Nr(t,r)}function on(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ru(t);if(r){var c=ru(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ro(this,n)}}function ro(t,r){if(r&&(It(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function ru(t){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ru(t)}var Eo,$p=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Nr(s,l)})(c,t);var r,n,i=on(c);function c(){return Kt(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var s=this.props.background;return Object(_e.g)("div",{className:"lf-background"},Object(_e.g)("div",{style:s,className:"lf-background-area"}))}}])&&fr(r.prototype,n),c}(_e.a);function Oo(t){return Oo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oo(t)}function Wp(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function K1(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ly(t,r){return ly=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ly(t,r)}function q1(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Yp(t);if(r){var c=Yp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Z1(this,n)}}function Z1(t,r){if(r&&(Oo(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rm(t)}function Rm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yp(t){return Yp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Yp(t)}function J1(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Cm=vi(Eo=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ly(s,l)})(c,t);var r,n,i=q1(c);function c(){var s;Wp(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return J1(Rm(s=i.call.apply(i,[this].concat(h))),"id",pi()),s}return r=c,(n=[{key:"renderDot",value:function(){var s=this.props,l=s.config,h=l.color,v=l.thickness,O=v===void 0?2:v,w=s.size,j=s.visible,C=Math.min(Math.max(2,O),w/2),X=1;return j||(X=0),Object(_e.g)("rect",{width:C,height:C,rx:C/2,ry:C/2,fill:h,opacity:X})}},{key:"renderMesh",value:function(){var s=this.props,l=s.config,h=l.color,v=l.thickness,O=v===void 0?1:v,w=s.size,j=s.visible,C=Math.min(Math.max(1,O),w/2),X="M ".concat(w," 0 H0 M0 0 V0 ").concat(w),te=1;return j||(te=0),Object(_e.g)("path",{d:X,stroke:h,strokeWidth:C,opacity:te})}},{key:"render",value:function(){var s=this.props,l=s.type,h=s.size,v=s.graphModel.transformModel,O=[v.SCALE_X,v.SKEW_Y,v.SKEW_X,v.SCALE_Y,v.TRANSLATE_X,v.TRANSLATE_Y].join(","),w="matrix(".concat(O,")");return Object(_e.g)("div",{className:"lf-grid"},Object(_e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(_e.g)("defs",null,Object(_e.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:w,x:"0",y:"0",width:h,height:h},l==="dot"&&this.renderDot(),l==="mesh"&&this.renderMesh())),Object(_e.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&K1(r.prototype,n),c}(_e.a))||Eo;Cm.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function py(t){return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},py(t)}function Q1(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Dm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Dm(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dm(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}var Im,gc=function(t){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(t).forEach(function(n){var i=Q1(n,2),c=i[0],s=i[1];(c==="style"||py(s)!=="object")&&(r[c]=s)}),Object(_e.g)("line",r)};function dy(t){return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dy(t)}function km(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Kp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?km(Object(n),!0).forEach(function(i){ew(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):km(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ew(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function tw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function rw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function hy(t,r){return hy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},hy(t,r)}function nw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=qp(t);if(r){var c=qp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ow(this,n)}}function ow(t,r){if(r&&(dy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function qp(t){return qp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},qp(t)}var Lm,iw=vi(Im=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&hy(s,l)})(c,t);var r,n,i=nw(c);function c(){return tw(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var s=this.props.snaplineModel,l=s.position,h=s.isShowHorizontal,v=s.isShowVertical,O=s.getStyle(),w=l.x,j=w===void 0?0:w,C=l.y,X=C===void 0?0:C,te=Kp(Kp({x1:-1e5,y1:X,x2:1e5,y2:X},O),{},{stroke:h?O.stroke:"none"}),le=Kp(Kp({x1:j,y1:-1e5,x2:j,y2:1e5},O),{},{stroke:v?O.stroke:"none"});return Object(_e.g)("g",{className:"lf-snapline"},Object(_e.g)(gc,te),Object(_e.g)(gc,le))}}])&&rw(r.prototype,n),c}(_e.a))||Im;function yy(t){return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},yy(t)}function aw(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Fm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Fm(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fm(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function nu(t){var r=t.x,n=t.y,i=t.width,c=t.height,s=t.className,l=t.radius,h=r-i/2,v=n-c/2,O={};return Object.entries(t).forEach(function(w){var j=aw(w,2),C=j[0],X=j[1];yy(X)!=="object"&&(O[C]=X)}),O.className=s?"lf-basic-shape ".concat(s):"lf-basic-shape",l&&(O.rx=l,O.ry=l),O.x=h,O.y=v,Object(_e.g)("rect",O)}function vy(t){return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vy(t)}function mc(){return mc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mc.apply(this,arguments)}function Bm(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Gm(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Bm(Object(n),!0).forEach(function(i){uw(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function uw(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function sw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gy(t,r){return gy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},gy(t,r)}function fw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Zp(t);if(r){var c=Zp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return lw(this,n)}}function lw(t,r){if(r&&(vy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Zp(t){return Zp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Zp(t)}nu.defaultProps={className:"",radius:""};var Um,pw=vi(Lm=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&gy(s,l)})(c,t);var r,n,i=fw(c);function c(){return sw(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getNodesOutline",value:function(){var s=this.props.graphModel,l=s.nodes,h=s.editConfigModel,v=h.hoverOutline,O=h.nodeSelectedOutline,w=[];return l.forEach(function(j){if(j.isHovered||j.isSelected){var C=j.isHovered,X=j.isSelected,te=j.x,le=j.y,Te=j.width,Pe=j.height;if(O&&X||v&&C){var $e=j.getOutlineStyle(),st={};if(Object.keys($e).forEach(function(Et){Et!=="hover"&&(st[Et]=$e[Et])}),C){var Dt=$e.hover;st=Gm(Gm({},st),Dt)}w.push(Object(_e.g)(nu,mc({className:"lf-outline-node",x:te,y:le,width:Te+10,height:Pe+10},st)))}}}),w}},{key:"getEdgeOutline",value:function(){for(var s=this.props.graphModel,l=s.edges,h=s.editConfigModel,v=h.edgeSelectedOutline,O=h.hoverOutline,w=[],j=0;j<l.length;j++){var C=l[j];(v&&C.isSelected||O&&C.isHovered)&&(C.modelType===Pr.LINE_EDGE?w.push(this.getLineOutline(C)):C.modelType===Pr.POLYLINE_EDGE?w.push(this.getPolylineOutline(C)):C.modelType===Pr.BEZIER_EDGE&&w.push(this.getBezierOutline(C)))}return w}},{key:"getLineOutline",value:function(s){var l=s.startPoint,h=s.endPoint,v=(l.x+h.x)/2,O=(l.y+h.y)/2,w=Math.abs(l.x-h.x)+10,j=Math.abs(l.y-h.y)+10,C=s.getOutlineStyle();return Object(_e.g)(nu,mc({className:"lf-outline-edge",x:v,y:O,width:w,height:j},C))}},{key:"getPolylineOutline",value:function(s){var l=s.points,h=me(l),v=tu(h,8),O=v.x,w=v.y,j=v.width,C=v.height,X=s.getOutlineStyle();return Object(_e.g)(nu,mc({className:"lf-outline",x:O,y:w,width:j,height:C},X))}},{key:"getBezierOutline",value:function(s){var l=s.path,h=St(l),v=tu(h,8),O=v.x,w=v.y,j=v.width,C=v.height,X=s.getOutlineStyle();return Object(_e.g)(nu,mc({className:"lf-outline",x:O,y:w,width:j,height:C},X))}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&cw(r.prototype,n),c}(_e.a))||Lm;function my(t){return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},my(t)}function dw(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return zm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return zm(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zm(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function al(t){var r=t.x,n=r===void 0?0:r,i=t.y,c=i===void 0?0:i,s=t.r,l=s===void 0?4:s,h=t.className,v={cx:n,cy:c,r:l,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(O){var w=dw(O,2),j=w[0],C=w[1];my(C)!=="object"&&(v[j]=C)}),v.className=h?"lf-basic-shape ".concat(h):"lf-basic-shape",Object(_e.g)("circle",v)}function by(t){return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},by(t)}function hw(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Hm(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Hm(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hm(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function ul(){return ul=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ul.apply(this,arguments)}function Xm(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Vm(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $m(t,r,n){return r&&Vm(t.prototype,r),n&&Vm(t,n),t}function Wm(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&_y(t,r)}function _y(t,r){return _y=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_y(t,r)}function Ym(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Qp(t);if(r){var c=Qp(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return yw(this,n)}}function yw(t,r){if(r&&(by(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jp(t)}function Jp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qp(t){return Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Qp(t)}function Ey(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Km,qm=function(t){Wm(n,t);var r=Ym(n);function n(){var i;return Xm(this,n),Ey(Jp(i=r.call(this)),"dragHandler",void 0),Ey(Jp(i),"onDragging",function(c){var s=c.event,l=i.props,h=l.graphModel,v=l.bezierModel,O=l.type,w=h.getPointByClient({x:s.clientX,y:s.clientY}).canvasOverlayPosition,j=w.x,C=w.y;v.updateAdjustAnchor({x:j,y:C},O)}),Ey(Jp(i),"onDragEnd",function(){i.props.bezierModel.isDragging=!1}),i.dragHandler=new Wr({onDragging:i.onDragging,onDragEnd:i.onDragEnd}),i}return $m(n,[{key:"render",value:function(){var i=this,c=this.props.position,s=c.x,l=c.y,h=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(_e.g)(al,ul({className:"lf-bezier-adjust-anchor",x:s,y:l},h,{onMouseDown:function(v){i.dragHandler.handleMouseDown(v)}}))}}]),n}(_e.a),vw=vi(Um=function(t){Wm(n,t);var r=Ym(n);function n(){return Xm(this,n),r.apply(this,arguments)}return $m(n,[{key:"getBezierAdjust",value:function(i,c){var s=i.path,l=i.id,h=hw(St(s),4),v=h[0],O=h[1],w=h[2],j=h[3],C=i.getEdgeStyle().adjustLine,X=[];return X.push(Object(_e.g)(gc,ul({x1:v.x,y1:v.y,x2:O.x,y2:O.y},C))),X.push(Object(_e.g)(qm,{position:O,bezierModel:i,graphModel:c,key:"".concat(l,"_ePre"),type:"sNext"})),X.push(Object(_e.g)(gc,ul({x1:j.x,y1:j.y,x2:w.x,y2:w.y},C))),X.push(Object(_e.g)(qm,{position:w,bezierModel:i,graphModel:c,key:"".concat(l,"_sNext"),type:"ePre"})),X}},{key:"selectedBezierEdge",value:function(){for(var i=this.props.graphModel,c=i.edges,s=[],l=0;l<c.length;l++){var h=c[l];h.isSelected&&h.modelType===Pr.BEZIER_EDGE&&h.draggable&&s.push(this.getBezierAdjust(h,i))}return s}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(_e.a))||Um;function Oy(t){return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Oy(t)}function gw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function mw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wy(t,r){return wy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},wy(t,r)}function bw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ed(t);if(r){var c=ed(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _w(this,n)}}function _w(t,r){if(r&&(Oy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function ed(t){return ed=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ed(t)}var Zm,Ew=vi(Km=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&wy(s,l)})(c,t);var r,n,i=bw(c);function c(){return gw(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"render",value:function(){var s=this.props.graphModel.transformModel.getTransformStyle().transform,l=this.props.children;return Object(_e.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(_e.g)("g",{transform:s},l))}}])&&mw(r.prototype,n),c}(_e.a))||Km;function xy(t){return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xy(t)}function Sy(){return Sy=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sy.apply(this,arguments)}function Ow(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function ww(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ty(t,r){return Ty=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ty(t,r)}function xw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=td(t);if(r){var c=td(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Sw(this,n)}}function Sw(t,r){if(r&&(xy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function td(t){return td=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},td(t)}var Tw=vi(Zm=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ty(s,l)})(c,t);var r,n,i=xw(c);function c(){return Ow(this,c),i.apply(this,arguments)}return r=c,n=[{key:"getComponent",value:function(s,l){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",v=this.props.getView,O=v(s.type);return Object(_e.g)(O,{key:s.id,model:s,graphModel:l,overlay:h})}},{key:"render",value:function(){var s=this,l=this.props,h=l.graphModel,v=l.tool,O=l.options,w=l.dnd,j=l.snaplineModel,C={};O.width&&(C.width="".concat(h.width,"px")),O.height&&(C.height="".concat(h.height,"px"));var X=O.grid,te=h.fakerNode,le=h.editConfigModel.adjustEdge;return Object(_e.g)("div",{className:"lf-graph","flow-id":h.flowId,style:C},Object(_e.g)(U,{graphModel:h,dnd:w},Object(_e.g)("g",{className:"lf-base"},Gs(h.sortElements,function(Te){return s.getComponent(Te,h)})),te?this.getComponent(te,h):""),Object(_e.g)(Ew,{graphModel:h},Object(_e.g)(pw,{graphModel:h}),le?Object(_e.g)(vw,{graphModel:h}):"",O.snapline!==!1?Object(_e.g)(iw,{snaplineModel:j}):""),Object(_e.g)(dr,{graphModel:h,tool:v}),O.background&&Object(_e.g)($p,{background:O.background}),O.grid&&Object(_e.g)(Cm,Sy({},X,{graphModel:h})))}}],n&&ww(r.prototype,n),c}(_e.a))||Zm,Aw=Tw;function Jm(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function rd(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Jm(Object(n),!0).forEach(function(i){fa(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jm(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fa(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var jw=function(){function t(i){var c=this;(function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")})(this,t),fa(this,"nodeConfig",void 0),fa(this,"lf",void 0),fa(this,"fakerNode",void 0),fa(this,"stopDrag",function(){c.nodeConfig=null,window.document.removeEventListener("mouseup",c.stopDrag)}),fa(this,"dragEnter",function(l){c.nodeConfig&&!c.fakerNode&&(c.fakerNode=c.lf.createFakerNode(rd(rd({},c.nodeConfig),c.clientToLocalPoint({x:l.clientX,y:l.clientY}))))}),fa(this,"onDragOver",function(l){if(l.preventDefault(),c.fakerNode){var h=c.clientToLocalPoint({x:l.clientX,y:l.clientY}),v=h.x,O=h.y;c.fakerNode.moveTo(v,O);var w=c.fakerNode.getData();c.lf.setNodeSnapLine(w),c.lf.graphModel.eventCenter.emit(tr.NODE_DND_DRAG,{data:w})}return!1}),fa(this,"onDragLeave",function(){c.fakerNode&&(c.lf.removeNodeSnapLine(),c.lf.graphModel.removeFakerNode(),c.fakerNode=null)}),fa(this,"onDrop",function(l){if(c.lf.graphModel&&l&&c.nodeConfig){var h=c.lf.addNode(rd(rd({},c.nodeConfig),c.clientToLocalPoint({x:l.clientX,y:l.clientY})),tr.NODE_DND_ADD);l.preventDefault(),l.stopPropagation(),c.nodeConfig=null,c.lf.removeNodeSnapLine(),c.lf.graphModel.removeFakerNode(),c.fakerNode=null,h.getData()}});var s=i.lf;this.lf=s}var r,n;return r=t,(n=[{key:"clientToLocalPoint",value:function(i){var c=i.x,s=i.y,l=df(this.lf.options,["grid","size"]),h=this.lf.graphModel.getPointByClient({x:c,y:s}).canvasOverlayPosition,v=h.x,O=h.y;return{x:li(v,l),y:li(O,l)}}},{key:"startDrag",value:function(i){this.nodeConfig=i,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&Pw(r.prototype,n),t}();function Qm(t){var r=t.container,n=t.grid,i=t.width,c=t.height;if(!r)throw new Error("请检查 container 参数是否有效");if(typeof i=="string"||typeof c=="string")throw new Error("width或height不支持传入字符串，请传数字");return n&&(t.grid=Qn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),Qn({},tb,t)}var Hr,eb,tb={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function Ay(t){return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ay(t)}function Py(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return rb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return rb(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rb(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function nb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function nd(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?nb(Object(n),!0).forEach(function(i){ob(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Nw(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Mw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Rw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sl(){return sl=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=Cw(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},sl.apply(this,arguments)}function Cw(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=ou(t))!==null;);return t}function jy(t,r){return jy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},jy(t,r)}function Dw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=ou(t);if(r){var c=ou(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Iw(this,n)}}function Iw(t,r){if(r&&(Ay(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return od(t)}function od(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ou(t){return ou=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},ou(t)}function ob(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function di(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var Ny=(Hr=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&jy(s,l)})(c,t);var r,n,i=Dw(c);function c(){var s;Mw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return ob(od(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.BEZIER_EDGE),Nw(od(s),"path",eb,od(s)),s}return r=c,(n=[{key:"initEdgeData",value:function(s){this.offset=100,sl(ou(c.prototype),"initEdgeData",this).call(this,s)}},{key:"getEdgeStyle",value:function(){var s=this.graphModel.theme.bezier;return nd(nd({},sl(ou(c.prototype),"getEdgeStyle",this).call(this)),cn(s))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var s=0,l=0;return this.pointsList.forEach(function(h){var v=h.x,O=h.y;s+=v,l+=O}),{x:s/this.pointsList.length,y:l/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var s=sl(ou(c.prototype),"getData",this).call(this),l=this.pointsList.map(function(h){return{x:h.x,y:h.y}});return nd(nd({},s),{},{pointsList:l})}},{key:"getControls",value:function(){var s=this.startPoint,l=this.endPoint;return qe({start:s,end:l,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(s){var l=Py(s,4),h=l[0],v=l[1],O=l[2],w=l[3];return"M ".concat(h.x," ").concat(h.y,`
    C `).concat(v.x," ").concat(v.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(w.x," ").concat(w.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var s=this.getControls(),l=s.sNext,h=s.ePre;this.updatePath(l,h)}},{key:"updatePath",value:function(s,l){s=cn(s),l=cn(l);var h={x:this.startPoint.x,y:this.startPoint.y},v={x:this.endPoint.x,y:this.endPoint.y};if(!s||!l){var O=this.getControls();s=O.sNext,l=O.ePre}this.pointsList=[h,s,l,v],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(s){this.startPoint=s,this.updatePoints()}},{key:"updateEndPoint",value:function(s){this.endPoint=s,this.updatePoints()}},{key:"moveStartPoint",value:function(s,l){this.startPoint.x+=s,this.startPoint.y+=l;var h=Py(this.pointsList,3),v=h[1],O=h[2];v.x+=s,v.y+=l,this.updatePath(v,O)}},{key:"moveEndPoint",value:function(s,l){this.endPoint.x+=s,this.endPoint.y+=l;var h=Py(this.pointsList,3),v=h[1],O=h[2];O.x+=s,O.y+=l,this.updatePath(v,O)}},{key:"updateAdjustAnchor",value:function(s,l){l==="sNext"?this.pointsList[1]=s:l==="ePre"&&(this.pointsList[2]=s),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var s=this.pointsList;return s[s.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(s){var l=s.startPoint,h=s.endPoint,v=s.sourceNode,O=s.targetNode,w=qe({start:l,end:h,sourceNode:v,targetNode:O,offset:this.offset}),j=w.sNext,C=w.ePre;this.pointsList=[l,j,C,h],this.initPoints()}}])&&Rw(r.prototype,n),c}(qa),eb=di(Hr.prototype,"path",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),di(Hr.prototype,"initPoints",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"initPoints"),Hr.prototype),di(Hr.prototype,"updatePoints",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updatePoints"),Hr.prototype),di(Hr.prototype,"updateStartPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateStartPoint"),Hr.prototype),di(Hr.prototype,"updateEndPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateEndPoint"),Hr.prototype),di(Hr.prototype,"moveStartPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveStartPoint"),Hr.prototype),di(Hr.prototype,"moveEndPoint",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"moveEndPoint"),Hr.prototype),di(Hr.prototype,"updateAdjustAnchor",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAdjustAnchor"),Hr.prototype),di(Hr.prototype,"getAdjustStart",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustStart"),Hr.prototype),di(Hr.prototype,"getAdjustEnd",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"getAdjustEnd"),Hr.prototype),di(Hr.prototype,"updateAfterAdjustStartAndEnd",[d.k],Object.getOwnPropertyDescriptor(Hr.prototype,"updateAfterAdjustStartAndEnd"),Hr.prototype),Hr),Ct,ib,ab,ub,sb,cb,fb,lb,pb,db,hb,yb,vb,gb,mb,bb,_b,Eb,Ob,wb,kw=function(t){return t==null};function My(t){return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},My(t)}function Lw(t,r){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(v,O){if(v){if(typeof v=="string")return xb(v,O);var w=Object.prototype.toString.call(v).slice(8,-1);if(w==="Object"&&v.constructor&&(w=v.constructor.name),w==="Map"||w==="Set")return Array.from(v);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return xb(v,O)}}(t))||r&&t&&typeof t.length=="number"){n&&(t=n);var i=0,c=function(){};return{s:c,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(v){throw v},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,l=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var v=n.next();return l=v.done,v},e:function(v){h=!0,s=v},f:function(){try{l||n.return==null||n.return()}finally{if(h)throw s}}}}function xb(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Sb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function wo(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Sb(Object(n),!0).forEach(function(i){Do(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Xn(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Fw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Do(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Cr(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var la,Tb,pa=(Ct=function(){function t(i,c){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Do(this,"id",""),Xn(this,"type",ib,this),Xn(this,"x",ab,this),Xn(this,"y",ub,this),Xn(this,"text",sb,this),Xn(this,"properties",cb,this),Xn(this,"_width",fb,this),Xn(this,"_height",lb,this),Xn(this,"anchorsOffset",pb,this),Xn(this,"isSelected",db,this),Xn(this,"isHovered",hb,this),Xn(this,"isShowAnchor",yb,this),Xn(this,"isDragging",vb,this),Xn(this,"isHitable",gb,this),Xn(this,"draggable",mb,this),Xn(this,"visible",bb,this),Do(this,"virtual",!1),Do(this,"graphModel",void 0),Xn(this,"zIndex",_b,this),Xn(this,"state",Eb,this),Xn(this,"autoToFront",Ob,this),Xn(this,"style",wb,this),Do(this,"BaseType",Tn.NODE),Do(this,"modelType",Pr.NODE),Do(this,"additionStateData",void 0),Do(this,"targetRules",[]),Do(this,"sourceRules",[]),Do(this,"moveRules",[]),Do(this,"hasSetTargetRules",!1),Do(this,"hasSetSourceRules",!1),this.graphModel=c,this.initNodeData(i),this.setAttributes()}var r,n;return r=t,n=[{key:"width",get:function(){return this._width},set:function(i){this._width=i}},{key:"height",get:function(){return this._height},set:function(i){this._height=i}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(i){if(i.properties||(i.properties={}),!i.id){var c=this.graphModel.idGenerator,s=c&&c(i.type),l=this.createId();i.id=l||s||pi()}this.formatText(i),Qn(this,function(h){return Cu(h,["id","type","x","y","text","properties","virtual"])}(i)),this.graphModel.overlapMode===co.INCREASE&&(this.zIndex=i.zIndex||Ka())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(i){i.text||(i.text={value:"",x:i.x,y:i.y,draggable:!1,editable:!0}),i.text&&typeof i.text=="string"?i.text={value:i.text,x:i.x,y:i.y,draggable:!1,editable:!0}:i.text&&i.text.editable===void 0&&(i.text.editable=!0)}},{key:"getData",value:function(){var i=this.text,c=i.x,s=i.y,l=i.value,h=this.properties;Object(d.x)(h)&&(h=Object(d.I)(h));var v={id:this.id,type:this.type,x:this.x,y:this.y,properties:h};return this.graphModel.overlapMode===co.INCREASE&&(v.zIndex=this.zIndex),l&&(v.text={x:c,y:s,value:l}),v}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(d.I)(this.properties)}},{key:"getNodeStyle",value:function(){return wo(wo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var i=this.graphModel.theme.nodeText;return cn(i)}},{key:"getAnchorStyle",value:function(i){var c=this.graphModel.theme.anchor;return cn(c)}},{key:"getAnchorLineStyle",value:function(i){var c=this.graphModel.theme.anchorLine;return cn(c)}},{key:"getOutlineStyle",value:function(){var i=this.graphModel.theme.outline;return cn(i)}},{key:"isAllowConnectedAsSource",value:function(i,c,s,l){var h=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var v,O=!0,w=0;w<h.length;w++){var j=h[w];if(!j.validate.call(this,this,i,c,s,l)){O=!1,v=j.message;break}}return{isAllPass:O,msg:v}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(i,c,s,l){var h=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var v,O=!0,w=0;w<h.length;w++){var j=h[w];if(!j.validate.call(this,i,this,c,s,l)){O=!1,v=j.message;break}}return{isAllPass:O,msg:v}}},{key:"isAllowMoveNode",value:function(i,c){var s,l=!0,h=!0,v=Lw(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(v.s();!(s=v.n()).done;){var O=(0,s.value)(this,i,c);if(!O)return!1;if(My(O)==="object"){var w=O;if(w.x===!1&&w.y===!1)return!1;l=l&&w.x,h=h&&w.y}}}catch(j){v.e(j)}finally{v.f()}return{x:l,y:h}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var i=this.anchorsOffset,c=this.id,s=this.x,l=this.y;return i&&i.length>0?i.map(function(h,v){return h.length?(h=h,{id:"".concat(c,"_").concat(v),x:s+h[0],y:l+h[1]}):wo(wo({},h=h),{},{x:s+h.x,y:l+h.y,id:h.id||"".concat(c,"_").concat(v)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(i){return function(c,s){for(var l,h=ac(s),v=Number.MAX_SAFE_INTEGER,O=0;O<h.length;O++){var w=eo(c.x,c.y,h[O].x,h[O].y);w<v&&(v=w,l={index:O,anchor:nc(nc({},h[O]),{},{x:h[O].x,y:h[O].y,id:h[O].id})})}return l}(i,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(i){if(!kw(i))for(var c=0;c<this.anchors.length;c++){var s=this.anchors[c];if(s.id===i)return s}}},{key:"addNodeMoveRules",value:function(i){this.moveRules.includes(i)||this.moveRules.push(i)}},{key:"move",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=!1,h=!1;if(s)l=!0,h=!0;else{var v=this.isAllowMoveNode(i,c);typeof v=="boolean"?(l=v,h=v):(l=v.x,h=v.y)}if(l){var O=this.x+i;this.x=O,this.text&&this.moveText(i,0)}if(h){var w=this.y+c;this.y=w,this.text&&this.moveText(0,c)}return l||h}},{key:"getMoveDistance",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=!1,h=!1,v=0,O=0;if(s)l=!0,h=!0;else{var w=this.isAllowMoveNode(i,c);typeof w=="boolean"?(l=w,h=w):(l=w.x,h=w.y)}if(l&&i){var j=this.x+i;this.x=j,this.text&&this.moveText(i,0),v=i}if(h&&c){var C=this.y+c;this.y=C,this.text&&this.moveText(0,c),O=c}return[v,O]}},{key:"moveTo",value:function(i,c){var s=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=i-this.x,h=c-this.y;return!(!s&&!this.isAllowMoveNode(l,h)||(this.text&&this.text&&this.moveText(l,h),this.x=i,this.y=c,0))}},{key:"moveText",value:function(i,c){var s=this.text,l=s.x,h=s.y,v=s.value,O=s.draggable,w=s.editable;this.text={value:v,editable:w,draggable:O,x:l+i,y:h+c}}},{key:"updateText",value:function(i){this.text=wo(wo({},Object(d.I)(this.text)),{},{value:i})}},{key:"setSelected",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=i}},{key:"setHovered",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=i,this.setIsShowAnchor(i)}},{key:"setIsShowAnchor",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=i}},{key:"setHitable",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=i}},{key:"setElementState",value:function(i,c){this.state=i,this.additionStateData=c}},{key:"setProperty",value:function(i,c){this.properties=wo(wo({},Object(d.I)(this.properties)),{},Do({},i,$n(c))),this.setAttributes()}},{key:"setProperties",value:function(i){this.properties=wo(wo({},Object(d.I)(this.properties)),$n(i)),this.setAttributes()}},{key:"deleteProperty",value:function(i){delete this.properties[i],this.setAttributes()}},{key:"setStyle",value:function(i,c){this.style=wo(wo({},this.style),{},Do({},i,$n(c)))}},{key:"setStyles",value:function(i){this.style=wo(wo({},this.style),$n(i))}},{key:"updateStyles",value:function(i){this.style=wo({},$n(i))}},{key:"setZIndex",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=i}},{key:"updateAttributes",value:function(i){Qn(this,i)}}],n&&Fw(r.prototype,n),t}(),ib=Cr(Ct.prototype,"type",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ab=Cr(Ct.prototype,"x",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ub=Cr(Ct.prototype,"y",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sb=Cr(Ct.prototype,"text",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),cb=Cr(Ct.prototype,"properties",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),fb=Cr(Ct.prototype,"_width",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),lb=Cr(Ct.prototype,"_height",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),pb=Cr(Ct.prototype,"anchorsOffset",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),db=Cr(Ct.prototype,"isSelected",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hb=Cr(Ct.prototype,"isHovered",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yb=Cr(Ct.prototype,"isShowAnchor",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vb=Cr(Ct.prototype,"isDragging",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gb=Cr(Ct.prototype,"isHitable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),mb=Cr(Ct.prototype,"draggable",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bb=Cr(Ct.prototype,"visible",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_b=Cr(Ct.prototype,"zIndex",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Eb=Cr(Ct.prototype,"state",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ob=Cr(Ct.prototype,"autoToFront",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wb=Cr(Ct.prototype,"style",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Cr(Ct.prototype,"incoming",[d.m],Object.getOwnPropertyDescriptor(Ct.prototype,"incoming"),Ct.prototype),Cr(Ct.prototype,"outgoing",[d.m],Object.getOwnPropertyDescriptor(Ct.prototype,"outgoing"),Ct.prototype),Cr(Ct.prototype,"addNodeMoveRules",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"addNodeMoveRules"),Ct.prototype),Cr(Ct.prototype,"move",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"move"),Ct.prototype),Cr(Ct.prototype,"getMoveDistance",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"getMoveDistance"),Ct.prototype),Cr(Ct.prototype,"moveTo",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"moveTo"),Ct.prototype),Cr(Ct.prototype,"moveText",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"moveText"),Ct.prototype),Cr(Ct.prototype,"updateText",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"updateText"),Ct.prototype),Cr(Ct.prototype,"setSelected",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setSelected"),Ct.prototype),Cr(Ct.prototype,"setHovered",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setHovered"),Ct.prototype),Cr(Ct.prototype,"setIsShowAnchor",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setIsShowAnchor"),Ct.prototype),Cr(Ct.prototype,"setHitable",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setHitable"),Ct.prototype),Cr(Ct.prototype,"setElementState",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setElementState"),Ct.prototype),Cr(Ct.prototype,"setProperty",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setProperty"),Ct.prototype),Cr(Ct.prototype,"setProperties",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setProperties"),Ct.prototype),Cr(Ct.prototype,"deleteProperty",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"deleteProperty"),Ct.prototype),Cr(Ct.prototype,"setStyle",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setStyle"),Ct.prototype),Cr(Ct.prototype,"setStyles",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setStyles"),Ct.prototype),Cr(Ct.prototype,"updateStyles",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"updateStyles"),Ct.prototype),Cr(Ct.prototype,"setZIndex",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"setZIndex"),Ct.prototype),Cr(Ct.prototype,"updateAttributes",[d.k],Object.getOwnPropertyDescriptor(Ct.prototype,"updateAttributes"),Ct.prototype),Ct);function Ry(t){return Ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ry(t)}function Ab(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Pb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ab(Object(n),!0).forEach(function(i){jb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Bw(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Gw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Uw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cy(){return Cy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=zw(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},Cy.apply(this,arguments)}function zw(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=bc(t))!==null;);return t}function Dy(t,r){return Dy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Dy(t,r)}function Hw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=bc(t);if(r){var c=bc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Xw(this,n)}}function Xw(t,r){if(r&&(Ry(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return id(t)}function id(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(t){return bc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bc(t)}function jb(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Iy(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var fo,Nb,Mb,ky=(la=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Dy(s,l)})(c,t);var r,n,i=Hw(c);function c(){var s;Gw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return jb(id(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.CIRCLE_NODE),Bw(id(s),"r",Tb,id(s)),s}return r=c,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var s=Cy(bc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.circle;return Pb(Pb({},s),cn(l))}},{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.r;return[{x:s,y:l-h,id:"".concat(this.id,"_0")},{x:s+h,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+h,id:"".concat(this.id,"_2")},{x:s-h,y:l,id:"".concat(this.id,"_3")}]}}])&&Uw(r.prototype,n),c}(pa),Tb=Iy(la.prototype,"r",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Iy(la.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(la.prototype,"width"),la.prototype),Iy(la.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(la.prototype,"height"),la.prototype),la);o(127);function Ly(t){return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ly(t)}function Fy(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Rb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Rb(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rb(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Cb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Db(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Cb(Object(n),!0).forEach(function(i){kb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ib(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function Vw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function $w(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function By(){return By=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=Ww(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},By.apply(this,arguments)}function Ww(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ec(t))!==null;);return t}function Gy(t,r){return Gy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Gy(t,r)}function Yw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ec(t);if(r){var c=Ec(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Kw(this,n)}}function Kw(t,r){if(r&&(Ly(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _c(t)}function _c(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ec(t)}function kb(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Oc(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var Ii,Lb,Fb,Uy=(fo=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Gy(s,l)})(c,t);var r,n,i=Yw(c);function c(){var s;Vw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return kb(_c(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.DIAMOND_NODE),Ib(_c(s),"rx",Nb,_c(s)),Ib(_c(s),"ry",Mb,_c(s)),s}return r=c,(n=[{key:"getNodeStyle",value:function(){var s=By(Ec(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.diamond;return Db(Db({},s),cn(l))}},{key:"points",get:function(){var s=this.x,l=this.y,h=this.rx,v=this.ry;return[[s,l-v],[s+h,l],[s,l+v],[s-h,l]]}},{key:"pointsPosition",get:function(){return this.points.map(function(s){return{x:s[0],y:s[1]}})}},{key:"width",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=Fy(h,1)[0];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"height",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=Fy(h,2)[1];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"getDefaultAnchor",value:function(){var s=this;return this.points.map(function(l,h){var v=Fy(l,2);return{x:v[0],y:v[1],id:"".concat(s.id,"_").concat(h)}})}}])&&$w(r.prototype,n),c}(pa),Nb=Oc(fo.prototype,"rx",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Mb=Oc(fo.prototype,"ry",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Oc(fo.prototype,"points",[d.m],Object.getOwnPropertyDescriptor(fo.prototype,"points"),fo.prototype),Oc(fo.prototype,"pointsPosition",[d.m],Object.getOwnPropertyDescriptor(fo.prototype,"pointsPosition"),fo.prototype),Oc(fo.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(fo.prototype,"width"),fo.prototype),Oc(fo.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(fo.prototype,"height"),fo.prototype),fo);function zy(t){return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zy(t)}function Bb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Gb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Bb(Object(n),!0).forEach(function(i){zb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ub(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function qw(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Zw(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hy(){return Hy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=Jw(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},Hy.apply(this,arguments)}function Jw(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=xc(t))!==null;);return t}function Xy(t,r){return Xy=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Xy(t,r)}function Qw(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=xc(t);if(r){var c=xc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ex(this,n)}}function ex(t,r){if(r&&(zy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wc(t)}function wc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xc(t){return xc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},xc(t)}function zb(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ad(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var ti,Hb,Vy=(Ii=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Xy(s,l)})(c,t);var r,n,i=Qw(c);function c(){var s;qw(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return zb(wc(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.ELLIPSE_NODE),Ub(wc(s),"rx",Lb,wc(s)),Ub(wc(s),"ry",Fb,wc(s)),s}return r=c,(n=[{key:"getNodeStyle",value:function(){var s=Hy(xc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.ellipse;return Gb(Gb({},s),cn(l))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.rx,v=this.ry;return[{x:s,y:l-v,id:"".concat(this.id,"_0")},{x:s+h,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v,id:"".concat(this.id,"_2")},{x:s-h,y:l,id:"".concat(this.id,"_3")}]}}])&&Zw(r.prototype,n),c}(pa),Lb=ad(Ii.prototype,"rx",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Fb=ad(Ii.prototype,"ry",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),ad(Ii.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(Ii.prototype,"width"),Ii.prototype),ad(Ii.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(Ii.prototype,"height"),Ii.prototype),Ii);function $y(t){return $y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$y(t)}function Wy(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return Xb(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Xb(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xb(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Vb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function $b(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Vb(Object(n),!0).forEach(function(i){Wb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tx(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function rx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function nx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yy(){return Yy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=ox(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},Yy.apply(this,arguments)}function ox(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Sc(t))!==null;);return t}function Ky(t,r){return Ky=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Ky(t,r)}function ix(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Sc(t);if(r){var c=Sc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return ax(this,n)}}function ax(t,r){if(r&&($y(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ud(t)}function ud(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sc(t){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Sc(t)}function Wb(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function sd(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var qy,Yb,Zy=(ti=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Ky(s,l)})(c,t);var r,n,i=ix(c);function c(){var s;rx(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Wb(ud(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.POLYGON_NODE),tx(ud(s),"points",Hb,ud(s)),s}return r=c,(n=[{key:"getNodeStyle",value:function(){var s=Yy(Sc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.polygon;return $b($b({},s),cn(l))}},{key:"pointsPosition",get:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return this.points.map(function(O){return{x:O[0]+s-h/2,y:O[1]+l-v/2}})}},{key:"width",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=Wy(h,1)[0];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"height",get:function(){var s=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(h){var v=Wy(h,2)[1];v<s&&(s=v),v>l&&(l=v)}),l-s}},{key:"getDefaultAnchor",value:function(){var s=this,l=this.x,h=this.y,v=this.width,O=this.height;return this.points.map(function(w,j){var C=Wy(w,2),X=C[0],te=C[1];return{x:l+X-v/2,y:h+te-O/2,id:"".concat(s.id,"_").concat(j)}})}}])&&nx(r.prototype,n),c}(pa),Hb=sd(ti.prototype,"points",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),sd(ti.prototype,"pointsPosition",[d.m],Object.getOwnPropertyDescriptor(ti.prototype,"pointsPosition"),ti.prototype),sd(ti.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(ti.prototype,"width"),ti.prototype),sd(ti.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(ti.prototype,"height"),ti.prototype),ti);function Jy(t){return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jy(t)}function Kb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function qb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Kb(Object(n),!0).forEach(function(i){Zb(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ux(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function sx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function cx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qy(){return Qy=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=fx(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},Qy.apply(this,arguments)}function fx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Tc(t))!==null;);return t}function ev(t,r){return ev=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ev(t,r)}function lx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Tc(t);if(r){var c=Tc(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return px(this,n)}}function px(t,r){if(r&&(Jy(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cd(t)}function cd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tc(t){return Tc=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Tc(t)}function Zb(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var iu,tv=(qy=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ev(s,l)})(c,t);var r,n,i=lx(c);function c(){var s;sx(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Zb(cd(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.RECT_NODE),ux(cd(s),"radius",Yb,cd(s)),s}return r=c,(n=[{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return[{x:s,y:l-v/2,id:"".concat(this.id,"_0")},{x:s+h/2,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v/2,id:"".concat(this.id,"_2")},{x:s-h/2,y:l,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var s=Qy(Tc(c.prototype),"getNodeStyle",this).call(this),l=this.graphModel.theme.rect;return qb(qb({},s),cn(l))}}])&&cx(r.prototype,n),c}(pa),Yb=function(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}(qy.prototype,"radius",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qy);function rv(t){return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rv(t)}function Jb(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Qb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Jb(Object(n),!0).forEach(function(i){t0(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function hx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function nv(){return nv=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(t,r,n){var i=yx(t,r);if(i){var c=Object.getOwnPropertyDescriptor(i,r);return c.get?c.get.call(arguments.length<3?t:n):c.value}},nv.apply(this,arguments)}function yx(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&(t=Ac(t))!==null;);return t}function ov(t,r){return ov=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ov(t,r)}function vx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ac(t);if(r){var c=Ac(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return gx(this,n)}}function gx(t,r){if(r&&(rv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e0(t)}function e0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ac(t){return Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ac(t)}function t0(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function r0(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var iv=(iu=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ov(s,l)})(c,t);var r,n,i=vx(c);function c(){var s;dx(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return t0(e0(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.TEXT_NODE),s}return r=c,(n=[{key:"getTextStyle",value:function(){var s=nv(Ac(c.prototype),"getTextStyle",this).call(this),l=this.graphModel.theme.text;return Qb(Qb({},s),cn(l))}},{key:"width",get:function(){var s=String(this.text.value).split(/[\r\n]/g),l=this.getTextStyle().fontSize;return Qf({rows:s,fontSize:l,rowsLength:s.length}).width}},{key:"height",get:function(){var s=String(this.text.value).split(/[\r\n]/g),l=this.getTextStyle().fontSize;return Qf({rows:s,fontSize:l,rowsLength:s.length}).height}}])&&hx(r.prototype,n),c}(pa),r0(iu.prototype,"width",[d.m],Object.getOwnPropertyDescriptor(iu.prototype,"width"),iu.prototype),r0(iu.prototype,"height",[d.m],Object.getOwnPropertyDescriptor(iu.prototype,"height"),iu.prototype),iu);function av(t){return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},av(t)}function mx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function bx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uv(t,r){return uv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},uv(t,r)}function _x(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=fd(t);if(r){var c=fd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Ex(this,n)}}function Ex(t,r){if(r&&(av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n0(t)}function n0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fd(t){return fd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},fd(t)}function Ox(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var hi,o0,i0,a0,sv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&uv(s,l)})(c,t);var r,n,i=_x(c);function c(){var s;mx(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Ox(n0(s=i.call.apply(i,[this].concat(h))),"modelType",Pr.HTML_NODE),s}return r=c,(n=[{key:"getDefaultAnchor",value:function(){var s=this.x,l=this.y,h=this.width,v=this.height;return[{x:s,y:l-v/2,id:"".concat(this.id,"_0")},{x:s+h/2,y:l,id:"".concat(this.id,"_1")},{x:s,y:l+v/2,id:"".concat(this.id,"_2")},{x:s-h/2,y:l,id:"".concat(this.id,"_3")}]}}])&&bx(r.prototype,n),c}(pa);function u0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function cv(t,r,n,i){n&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function wx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s0(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function cl(t,r,n,i,c){var s={};return Object.keys(i).forEach(function(l){s[l]=i[l]}),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce(function(l,h){return h(t,r,l)||l},s),c&&s.initializer!==void 0&&(s.value=s.initializer?s.initializer.call(c):void 0,s.initializer=void 0),s.initializer===void 0&&(Object.defineProperty(t,r,s),s=null),s}var c0=(hi=function(){function t(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),s0(this,"graphModel",void 0),cv(this,"isShowHorizontal",o0,this),cv(this,"isShowVertical",i0,this),cv(this,"position",a0,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=i}var r,n;return r=t,n=[{key:"getStyle",value:function(){return function(i){for(var c=1;c<arguments.length;c++){var s=arguments[c]!=null?arguments[c]:{};c%2?u0(Object(s),!0).forEach(function(l){s0(i,l,s[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):u0(Object(s)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(s,l))})}return i}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(i,c){for(var s=i.x,l=i.y,h=!1,v=!1,O=0;O<c.length;O++){var w=c[O];if(w.id!==i.id&&(s===w.x&&(h=!0),l===w.y&&(v=!0),h&&v))break}return{isShowVertical:h,isShowHorizontal:v,position:{x:s,y:l}}}},{key:"getHorizontalSnapline",value:function(i,c){var s,l,h=!1,v=i.id;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)l=_o(O);else{var w=this.graphModel.getNodeModelById(v);l=_o(w)}}for(var j=0;j<c.length;j++){var C=c[j];if(C.id!==i.id){var X=_o(C);if(X.minY===l.minY||X.maxY===l.minY){h=!0,s=l.minY;break}if(X.minY===l.maxY||X.maxY===l.maxY){h=!0,s=l.maxY;break}}}return Qn({isShowHorizontal:h,position:{y:s}})}},{key:"getVerticalSnapline",value:function(i,c){var s,l,h=!1,v=i.id;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)l=_o(O);else{var w=this.graphModel.getNodeModelById(v);l=_o(w)}}for(var j=0;j<c.length;j++){var C=c[j];if(C.id!==i.id){var X=_o(C);if(X.minX===l.minX||X.maxX===l.minX){h=!0,s=l.minX;break}if(X.minX===l.maxX||X.maxX===l.maxX){h=!0,s=l.maxX;break}}}return Qn({isShowVertical:h,position:{x:s}})}},{key:"getSnapLinePosition",value:function(i,c){var s=this.getCenterSnapLine(i,c),l=s.isShowHorizontal,h=s.isShowVertical;if(!l){var v=this.getHorizontalSnapline(i,c);v.isShowHorizontal&&(s.isShowHorizontal=v.isShowHorizontal,s.position.y=v.position.y)}if(!h){var O=this.getVerticalSnapline(i,c);O.isShowVertical&&(s.isShowVertical=O.isShowVertical,s.position.x=O.position.x)}return s}},{key:"setSnaplineInfo",value:function(i){var c=i.isShowHorizontal,s=i.isShowVertical,l=i.position;this.position=l,this.isShowHorizontal=c,this.isShowVertical=s}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(i){var c=this.graphModel.nodes,s=this.getSnapLinePosition(i,c);this.setSnaplineInfo(s)}}],n&&wx(r.prototype,n),t}(),o0=cl(hi.prototype,"isShowHorizontal",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i0=cl(hi.prototype,"isShowVertical",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a0=cl(hi.prototype,"position",[d.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl(hi.prototype,"clearSnapline",[d.k],Object.getOwnPropertyDescriptor(hi.prototype,"clearSnapline"),hi.prototype),cl(hi.prototype,"setNodeSnapLine",[d.k],Object.getOwnPropertyDescriptor(hi.prototype,"setNodeSnapLine"),hi.prototype),hi),fl=new Map,f0=function(t){var r=pi(),n=window.requestAnimationFrame(function i(){if(t(),fl.get(r)){var c=window.requestAnimationFrame(i);fl.set(r,c)}});return fl.set(r,n),r},ld=function(t){var r=fl.get(t);r&&(window.cancelAnimationFrame(r),fl.delete(t))};function fv(t){return fv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fv(t)}function ll(){return ll=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ll.apply(this,arguments)}function l0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function pd(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?l0(Object(n),!0).forEach(function(i){Li(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function xx(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return p0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return p0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Sx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lv(t,r){return lv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},lv(t,r)}function Tx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=dd(t);if(r){var c=dd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Ax(this,n)}}function Ax(t,r){if(r&&(fv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ki(t)}function ki(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dd(t){return dd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},dd(t)}function Li(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Px=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&lv(s,l)})(c,t);var r,n,i=Tx(c);function c(){var s;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,c),Li(ki(s=i.call(this)),"preTargetNode",void 0),Li(ki(s),"sourceRuleResults",void 0),Li(ki(s),"targetRuleResults",void 0),Li(ki(s),"dragHandler",void 0),Li(ki(s),"t",void 0),Li(ki(s),"onDragStart",function(l){var h=l.event,v=s.props,O=v.anchorData,w=v.nodeModel,j=v.graphModel,C=j.overlapMode;j.selectNodeById(w.id),C!==co.INCREASE&&w.autoToFront&&j.toFront(w.id),j.eventCenter.emit(tr.ANCHOR_DRAGSTART,{data:O,e:h,nodeModel:w}),s.setState({startX:O.x,startY:O.y,endX:O.x,endY:O.y})}),Li(ki(s),"onDragging",function(l){var h=l.event,v=s.props,O=v.graphModel,w=v.nodeModel,j=v.anchorData,C=O.transformModel,X=O.eventCenter,te=O.width,le=O.height,Te=O.editConfigModel,Pe=Te.autoExpand,$e=Te.stopMoveGraph,st=h.clientX,Dt=h.clientY,Et=O.getPointByClient({x:st,y:Dt}),qt=Et.domOverlayPosition,Rt=qt.x,wt=qt.y,hr=Et.canvasOverlayPosition,Fr=hr.x,qr=hr.y;s.t&&ld(s.t);var Vr=[];Rt<10?Vr=[10,0]:Rt+10>te?Vr=[-10,0]:wt<10?Vr=[0,10]:wt+10>le&&(Vr=[0,-10]),s.setState({endX:Fr,endY:qr,dragging:!0}),s.moveAnchorEnd(Fr,qr),Vr.length>0&&!$e&&Pe&&(s.t=f0(function(){var en=xx(Vr,2),Ln=en[0],Vn=en[1];C.translate(Ln,Vn);var Uo=s.state,Gi=Uo.endX,ri=Uo.endY;s.setState({endX:Gi-Ln,endY:ri-Vn}),s.moveAnchorEnd(Gi-Ln,ri-Vn)})),X.emit(tr.ANCHOR_DRAG,{data:j,e:h,nodeModel:w})}),Li(ki(s),"onDragEnd",function(l){var h=l.event;s.t&&ld(s.t),s.checkEnd(h),s.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),s.sourceRuleResults.clear(),s.targetRuleResults.clear();var v=s.props,O=v.graphModel,w=v.nodeModel,j=v.anchorData;O.eventCenter.emit(tr.ANCHOR_DRAGEND,{data:j,e:h,nodeModel:w})}),Li(ki(s),"checkEnd",function(l){var h=s.props,v=h.graphModel,O=h.nodeModel,w=h.anchorData,j=w.x,C=w.y,X=w.id,te=(v.edgeType,s.state),le=te.endX,Te=te.endY,Pe=te.dragging,$e=Hu({x:le,y:Te},v);if(s.preTargetNode&&s.preTargetNode.state!==zr.DEFAULT&&s.preTargetNode.setElementState(zr.DEFAULT),Pe&&$e&&$e.node){var st=$e.node,Dt=$e.anchor.id,Et="".concat(O.id,"_").concat(st.id,"_").concat(Dt,"_").concat(X),qt=s.sourceRuleResults.get(Et)||{},Rt=qt.isAllPass,wt=qt.msg,hr=s.targetRuleResults.get(Et)||{},Fr=hr.isAllPass,qr=hr.msg;if(Rt&&Fr){st.setElementState(zr.DEFAULT);var Vr=v.edgeGenerator(O.getData(),v.getNodeModelById($e.node.id).getData()),en=v.addEdge(pd(pd({},Vr),{},{sourceNodeId:O.id,sourceAnchorId:X,startPoint:{x:j,y:C},targetNodeId:$e.node.id,targetAnchorId:$e.anchor.id,endPoint:{x:$e.anchor.x,y:$e.anchor.y}})),Ln=s.props.anchorData;v.eventCenter.emit(tr.ANCHOR_DROP,{data:Ln,e:l,nodeModel:O,edgeModel:en})}else{var Vn=st.getData();v.eventCenter.emit(tr.CONNECTION_NOT_ALLOWED,{data:Vn,msg:qr||wt})}}}),s.sourceRuleResults=new Map,s.targetRuleResults=new Map,s.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},s.dragHandler=new Wr({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return r=c,(n=[{key:"getAnchorShape",value:function(){var s=this.props,l=s.anchorData,h=s.style,v=s.node.getAnchorShape(l);if(v)return v;var O=l.x,w=l.y,j=pd(pd({},h),h.hover);return Object(_e.g)("g",null,Object(_e.g)(al,ll({className:"lf-node-anchor-hover"},j,{x:O,y:w})),Object(_e.g)(al,ll({className:"lf-node-anchor"},h,{x:O,y:w})))}},{key:"moveAnchorEnd",value:function(s,l){var h=this.props,v=h.graphModel,O=h.nodeModel,w=h.anchorData,j=Hu({x:s,y:l},v);if(j){var C=j.node,X=j.anchor.id;if(this.preTargetNode&&this.preTargetNode!==j.node&&this.preTargetNode.setElementState(zr.DEFAULT),w.id===X)return;this.preTargetNode=C;var te="".concat(O.id,"_").concat(C.id,"_").concat(X,"_").concat(w.id);if(!this.targetRuleResults.has(te)){var le=j.anchor,Te=O.isAllowConnectedAsSource(C,w,le),Pe=C.isAllowConnectedAsTarget(O,w,le);this.sourceRuleResults.set(te,Xu(Te)),this.targetRuleResults.set(te,Xu(Pe))}var $e=this.sourceRuleResults.get(te).isAllPass,st=this.targetRuleResults.get(te).isAllPass;$e&&st?C.setElementState(zr.ALLOW_CONNECT):C.setElementState(zr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==zr.DEFAULT&&this.preTargetNode.setElementState(zr.DEFAULT)}},{key:"isShowLine",value:function(){var s=this.state,l=s.startX,h=s.startY,v=s.endX,O=s.endY;return eo(l,h,v,O)>10}},{key:"render",value:function(){var s=this,l=this.state,h=l.startX,v=l.startY,O=l.endX,w=l.endY,j=this.props,C=j.anchorData.edgeAddable,X=j.edgeStyle;return Object(_e.g)("g",{className:"lf-anchor"},Object(_e.g)("g",{onMouseDown:function(te){C!==!1&&s.dragHandler.handleMouseDown(te)}},this.getAnchorShape()),this.isShowLine()&&Object(_e.g)(gc,ll({x1:h,y1:v,x2:O,y2:w},X,{"pointer-events":"none"})))}}])&&Sx(r.prototype,n),c}(_e.a);o(80);function d0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function jx(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?d0(Object(n),!0).forEach(function(i){Nx(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Nx(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function pv(t){return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pv(t)}function Mx(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return h0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return h0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function y0(t){var r=t.x,n=r===void 0?0:r,i=t.y,c=i===void 0?0:i,s=t.value,l=t.fontSize,h=t.fill,v=h===void 0?"currentColor":h,O=t.overflowMode,w=O===void 0?"default":O,j=t.textWidth,C=j===void 0?"":j,X=t.model,te={textAnchor:"middle","dominant-baseline":"middle",x:n,y:c,fill:v};if(Object.entries(t).forEach(function(Dt){var Et=Mx(Dt,2),qt=Et[0],Rt=Et[1];pv(Rt)!=="object"&&(te[qt]=Rt)}),s){var le=String(s).split(/[\r\n]/g),Te=le.length;if(w!=="default"){var Pe=X.BaseType,$e=X.modelType;if(Pe===Tn.NODE&&$e!==Pr.TEXT_NODE||Pe===Tn.EDGE&&C)return function(Dt){var Et=Dt.value,qt=Dt.fontSize,Rt=Dt.model,wt=Dt.fontFamily,hr=wt===void 0?"":wt,Fr=Dt.lineHeight,qr=Dt.wrapPadding,Vr=qr===void 0?"0, 0":qr,en=Dt.overflowMode,Ln=Dt.x,Vn=Dt.y,Uo=Rt.width,Gi=Rt.textHeight,ri=Dt.textWidth||Uo,Nc=String(Et).split(/[\r\n]/g),kd=Nc.length,Ld=kp({rows:Nc,style:{fontSize:"".concat(qt,"px"),width:"".concat(ri,"px"),fontFamily:hr,lineHeight:Fr,padding:Vr},rowsLength:kd,className:"lf-get-text-height"}),ns=Rt.height>Ld?Rt.height:Ld;Gi&&(ns=Gi);var su=en==="ellipsis";return su&&(ns=qt+2),Object(_e.g)("g",null,Object(_e.g)("foreignObject",{width:ri,height:ns,x:Ln-ri/2,y:Vn-ns/2},Object(_e.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:ns,width:ri,padding:Vr}},Object(_e.g)("div",{className:su?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:su?Nc.join(""):"",style:jx({},Dt)},Nc.map(function(cu){return Object(_e.g)("div",{className:"lf-node-text--auto-wrap-inner"},cu)})))))}(t)}if(Te>1){var st=le.map(function(Dt,Et){var qt=(Et-(Te-1)/2)*(l+2);return Object(_e.g)("tspan",{className:"lf-text-tspan",x:n,y:c+qt},Dt)});return Object(_e.g)("text",te,st)}return Object(_e.g)("text",te,s)}}function dv(t){return dv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},dv(t)}function hv(){return hv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hv.apply(this,arguments)}function Rx(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return v0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return v0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function v0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function Cx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yv(t,r){return yv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},yv(t,r)}function Dx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=hd(t);if(r){var c=hd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Ix(this,n)}}function Ix(t,r){if(r&&(dv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return au(t)}function au(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hd(t){return hd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},hd(t)}function es(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var g0=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&yv(s,l)})(c,t);var r,n,i=Dx(c);function c(s){var l;(function(O,w){if(!(O instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),es(au(l=i.call(this)),"dragHandler",void 0),es(au(l),"sumDeltaX",0),es(au(l),"sumDeltaY",0),es(au(l),"stepDrag",void 0),es(au(l),"onDragging",function(O){var w=O.deltaX,j=O.deltaY,C=l.props,X=C.model,te=Rx(C.graphModel.transformModel.fixDeltaXY(w,j),2),le=te[0],Te=te[1];X.moveText(le,Te)}),es(au(l),"dblClickHandler",function(){l.props.editable&&l.props.model.setElementState(zr.TEXT_EDIT)}),es(au(l),"mouseDownHandle",function(O){var w=l.props,j=w.draggable,C=w.graphModel.editConfigModel.nodeTextDraggable;(j||C)&&l.stepDrag.handleMouseDown(O)});var h=s.model,v=s.draggable;return l.stepDrag=new Wr({onDragging:l.onDragging,step:1,model:h,isStopPropagation:v}),l}return r=c,(n=[{key:"getShape",value:function(){var s=this.props,l=s.model,h=s.graphModel,v=l.text,O=h.editConfigModel,w=v.value,j=v.x,C=v.y,X=v.editable,te=v.draggable,le={x:j,y:C,className:"",value:w};X?le.className="lf-element-text":te||O.nodeTextDraggable?le.className="lf-text-draggable":le.className="lf-text-disabled";var Te=l.getTextStyle();return Object(_e.g)(y0,hv({},le,Te,{model:l}))}},{key:"render",value:function(){if(this.props.model.text)return Object(_e.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&Cx(r.prototype,n),c}(_e.a),kx=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function vv(t){return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vv(t)}function yd(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return m0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return m0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function b0(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gv(t,r){return gv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},gv(t,r)}function Lx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=vd(t);if(r){var c=vd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Fx(this,n)}}function Fx(t,r){if(r&&(vv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lo(t)}function lo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vd(t){return vd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},vd(t)}function xo(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var da=function(t){(function(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),h&&gv(l,h)})(s,t);var r,n,i,c=Lx(s);function s(l){var h;(function(C,X){if(!(C instanceof X))throw new TypeError("Cannot call a class as a function")})(this,s),xo(lo(h=c.call(this)),"t",void 0),xo(lo(h),"moveOffset",void 0),xo(lo(h),"stepDrag",void 0),xo(lo(h),"contextMenuTime",void 0),xo(lo(h),"startTime",void 0),xo(lo(h),"clickTimer",void 0),xo(lo(h),"onDragStart",function(C){var X=C.event,te=X.clientX,le=X.clientY,Te=h.props,Pe=Te.model,$e=Te.graphModel.getPointByClient({x:te,y:le}).canvasOverlayPosition,st=$e.x,Dt=$e.y;h.moveOffset={x:Pe.x-st,y:Pe.y-Dt}}),xo(lo(h),"onDragging",function(C){var X=C.event,te=h.props,le=te.model,Te=te.graphModel,Pe=Te.editConfigModel,$e=Pe.stopMoveGraph,st=Pe.autoExpand,Dt=Te.transformModel,Et=Te.selectNodes,qt=Te.width,Rt=Te.height,wt=Te.gridSize;le.isDragging=!0;var hr=X.clientX,Fr=X.clientY,qr=Te.getPointByClient({x:hr,y:Fr}).canvasOverlayPosition,Vr=qr.x,en=qr.y,Ln=yd(Dt.CanvasPointToHtmlPoint([Vr,en]),2),Vn=Ln[0],Uo=Ln[1];if(Vr+=h.moveOffset.x,en+=h.moveOffset.y,Vr=li(Vr,wt),en=li(en,wt),qt&&Rt){if(!st||$e||!(Vn<0||Uo<0||Vn>qt||Uo>Rt)){var Gi=yd(Dt.CanvasPointToHtmlPoint([Vr-le.width/2,en-le.height/2]),2),ri=Gi[0],Nc=Gi[1],kd=yd(Dt.CanvasPointToHtmlPoint([Vr+le.width/2,en+le.height/2]),2),Ld=kd[0],ns=kd[1],su=Math.max(wt,20),cu=[];ri<0?cu=[su,0]:Ld>Te.width?cu=[-su,0]:Nc<0?cu=[0,su]:ns>Te.height&&(cu=[0,-su]),h.t&&ld(h.t);var Fd=Et.map(function(Bd){return Bd.id});Fd.indexOf(le.id)===-1&&(Fd=[le.id]),cu.length>0&&!$e&&st?h.t=f0(function(){var Bd=yd(cu,2),e_=Bd[0],t_=Bd[1];Dt.translate(e_,t_);var AT=-e_/Dt.SCALE_X,PT=-t_/Dt.SCALE_X;Te.moveNodes(Fd,AT,PT)}):Te.moveNodes(Fd,Vr-le.x,en-le.y)}}else Te.moveNode2Coordinate(le.id,Vr,en)}),xo(lo(h),"onDragEnd",function(){h.t&&ld(h.t),h.props.model.isDragging=!1}),xo(lo(h),"handleClick",function(C){if(h.startTime&&!(new Date().getTime()-h.startTime>200)){var X=h.props,te=X.model,le=X.graphModel,Te={data:te.getData(),e:C,position:le.getPointByClient({x:C.clientX,y:C.clientY}),isSelected:!1,isMultiple:!1},Pe=C.button===2,$e=C.detail===2;if(!Pe){var st=le.editConfigModel,Dt=Vf(C,st);Te.isMultiple=Dt,te.isSelected&&!$e&&Dt?(Te.isSelected=!1,te.setSelected(!1)):(le.selectNodeById(te.id,Dt),Te.isSelected=!0,h.toFront()),$e?(st.nodeTextEdit&&te.text.editable&&(te.setSelected(!1),le.setElementStateById(te.id,zr.TEXT_EDIT)),le.eventCenter.emit(tr.NODE_DBCLICK,Te)):(le.eventCenter.emit(tr.ELEMENT_CLICK,Te),le.eventCenter.emit(tr.NODE_CLICK,Te))}}}),xo(lo(h),"handleContextMenu",function(C){C.preventDefault();var X=h.props,te=X.model,le=X.graphModel,Te=te.getData(),Pe=le.getPointByClient({x:C.clientX,y:C.clientY});le.setElementStateById(te.id,zr.SHOW_MENU,Pe.domOverlayPosition),te.isSelected||le.selectNodeById(te.id),le.eventCenter.emit(tr.NODE_CONTEXTMENU,{data:Te,e:C,position:Pe}),h.toFront()}),xo(lo(h),"handleMouseDown",function(C){var X=h.props,te=X.model,le=X.graphModel;h.startTime=new Date().getTime(),le.editConfigModel.adjustNodePosition&&te.draggable&&h.stepDrag&&h.stepDrag.handleMouseDown(C)}),xo(lo(h),"setHoverON",function(C){var X=h.props,te=X.model,le=X.graphModel;if(!te.isHovered){var Te=te.getData();te.setHovered(!0),le.eventCenter.emit(tr.NODE_MOUSEENTER,{data:Te,e:C})}}),xo(lo(h),"setHoverOFF",function(C){var X=h.props,te=X.model,le=X.graphModel,Te=te.getData();te.isHovered&&(te.setHovered(!1),le.eventCenter.emit(tr.NODE_MOUSELEAVE,{data:Te,e:C}))}),xo(lo(h),"onMouseOut",function(C){kx&&h.setHoverOFF(C)});var v=l.graphModel,O=v.gridSize,w=v.eventCenter,j=l.model;return h.stepDrag=new Wr({onDragStart:h.onDragStart,onDragging:h.onDragging,onDragEnd:h.onDragEnd,step:O,eventType:"NODE",isStopPropagation:!1,eventCenter:w,model:j}),h}return r=s,i=[{key:"getModel",value:function(l){return l}}],(n=[{key:"getAnchorShape",value:function(l){return null}},{key:"getAnchors",value:function(){var l=this,h=this.props,v=h.model,O=h.graphModel,w=v.isSelected,j=v.isHitable,C=v.isDragging,X=v.isShowAnchor;return j&&(w||X)&&!C?Gs(v.anchors,function(te,le){var Te=v.getAnchorLineStyle(te),Pe=v.getAnchorStyle(te);return Object(_e.g)(Px,{anchorData:te,node:l,style:Pe,edgeStyle:Te,anchorIndex:le,nodeModel:v,graphModel:O,setHoverOFF:l.setHoverOFF})}):[]}},{key:"getText",value:function(){var l=this.props,h=l.model,v=l.graphModel;if(h.state===zr.TEXT_EDIT)return"";if(h.text){var O=v.editConfigModel,w=!1;return(h.text.draggable||O.nodeTextDraggable)&&(w=!0),Object(_e.g)(g0,{editable:O.nodeTextEdit&&h.text.editable,model:h,graphModel:v,draggable:w})}}},{key:"getStateClassName",value:function(){var l=this.props.model,h=l.state,v=l.isDragging,O=l.isSelected,w="lf-node";switch(h){case zr.ALLOW_CONNECT:w+=" lf-node-allow";break;case zr.NOT_ALLOW_CONNECT:w+=" lf-node-not-allow";break;default:w+=" lf-node-default"}return v&&(w+=" lf-isDragging"),O&&(w+=" lf-node-selected"),w}},{key:"toFront",value:function(){var l=this.props,h=l.model,v=l.graphModel;v.overlapMode!==co.INCREASE&&h.autoToFront&&v.toFront(h.id)}},{key:"render",value:function(){var l,h=this.props,v=h.model,O=h.graphModel,w=O.editConfigModel,j=w.hideAnchors,C=w.adjustNodePosition,X=O.gridSize,te=O.transformModel.SCALE_X,le=v.isHitable,Te=v.draggable,Pe=Object(_e.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),j?null:this.getAnchors());return le?(C&&Te&&this.stepDrag.setStep(X*te),l=Object(_e.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},Pe)):l=Object(_e.g)("g",{className:this.getStateClassName()},Pe),l}}])&&b0(r.prototype,n),i&&b0(r,i),s}(_e.a);function mv(t){return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},mv(t)}function bv(){return bv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bv.apply(this,arguments)}function Bx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Gx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _v(t,r){return _v=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_v(t,r)}function Ux(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=gd(t);if(r){var c=gd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return zx(this,n)}}function zx(t,r){if(r&&(mv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function gd(t){return gd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},gd(t)}var Ev=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&_v(s,l)})(c,t);var r,n,i=Ux(c);function c(){return Bx(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)(nu,bv({},l,{x:s.x,y:s.y,width:s.width,height:s.height,radius:s.radius}))}}])&&Gx(r.prototype,n),c}(da);function Ov(t){return Ov=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ov(t)}function wv(){return wv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wv.apply(this,arguments)}function Hx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Xx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xv(t,r){return xv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},xv(t,r)}function Vx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=md(t);if(r){var c=md(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return $x(this,n)}}function $x(t,r){if(r&&(Ov(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function md(t){return md=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},md(t)}var Sv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&xv(s,l)})(c,t);var r,n,i=Vx(c);function c(){return Hx(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.r,O=s.getNodeStyle();return Object(_e.g)(al,wv({},O,{x:l,y:h,r:v}))}}])&&Xx(r.prototype,n),c}(da);function Tv(t){return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Tv(t)}function Wx(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return _0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function E0(t){var r=t.points,n=t.className,i={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(t).forEach(function(c){var s=Wx(c,2),l=s[0],h=s[1];Tv(h)!=="object"&&(i[l]=h)}),i.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",i.points=r.map(function(c){return c.join(",")}).join(" "),Object(_e.g)("polygon",i)}function Av(t){return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Av(t)}function Pv(){return Pv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Pv.apply(this,arguments)}function Yx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Kx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jv(t,r){return jv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},jv(t,r)}function qx(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=bd(t);if(r){var c=bd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return Zx(this,n)}}function Zx(t,r){if(r&&(Av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function bd(t){return bd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bd(t)}var Nv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&jv(s,l)})(c,t);var r,n,i=qx(c);function c(){return Yx(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.width,O=s.height,w=s.points,j=s.getNodeStyle(),C={transform:"matrix(1 0 0 1 ".concat(l-v/2," ").concat(h-O/2,")")};return Object(_e.g)("g",C,Object(_e.g)(E0,Pv({},j,{points:w,x:l,y:h})))}}])&&Kx(r.prototype,n),c}(da);function Mv(t){return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Mv(t)}function Rv(){return Rv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Rv.apply(this,arguments)}function Jx(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Qx(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Cv(t,r){return Cv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Cv(t,r)}function eS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=_d(t);if(r){var c=_d(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return tS(this,n)}}function tS(t,r){if(r&&(Mv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function _d(t){return _d=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},_d(t)}var Dv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Cv(s,l)})(c,t);var r,n,i=eS(c);function c(){return Jx(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)("g",null,Object(_e.g)(E0,Rv({},l,{points:s.points,x:s.x,y:s.y})))}}])&&Qx(r.prototype,n),c}(da);function Iv(t){return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Iv(t)}function rS(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return O0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return O0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function nS(t){var r=t.x,n=r===void 0?0:r,i=t.y,c=i===void 0?0:i,s=t.rx,l=s===void 0?4:s,h=t.ry,v=h===void 0?4:h,O=t.className,w={cx:n,cy:c,rx:l,ry:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(t).forEach(function(j){var C=rS(j,2),X=C[0],te=C[1];Iv(te)!=="object"&&(w[X]=te)}),w.className=O?"lf-basic-shape ".concat(O):"lf-basic-shape",Object(_e.g)("ellipse",w)}function kv(t){return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kv(t)}function Lv(){return Lv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lv.apply(this,arguments)}function oS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function iS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fv(t,r){return Fv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Fv(t,r)}function aS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ed(t);if(r){var c=Ed(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return uS(this,n)}}function uS(t,r){if(r&&(kv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Ed(t){return Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ed(t)}var Bv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Fv(s,l)})(c,t);var r,n,i=aS(c);function c(){return oS(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getShape",value:function(){var s=this.props.model,l=s.getNodeStyle();return Object(_e.g)(nS,Lv({},l,{x:s.x,y:s.y,rx:s.rx,ry:s.ry}))}}])&&iS(r.prototype,n),c}(da);function Gv(t){return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gv(t)}function w0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function x0(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?w0(Object(n),!0).forEach(function(i){sS(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function sS(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function cS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function fS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Uv(t,r){return Uv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Uv(t,r)}function lS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Od(t);if(r){var c=Od(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return pS(this,n)}}function pS(t,r){if(r&&(Gv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Od(t){return Od=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Od(t)}var zv=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Uv(s,l)})(c,t);var r,n,i=lS(c);function c(){return cS(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getBackground",value:function(){var s=this.props.model,l=s.getTextStyle(),h=s.width,v=s.height,O=s.x,w=s.y,j=x0(x0({},l.background),{},{x:O,y:w-1,width:h,height:v});return Object(_e.g)(nu,j)}},{key:"getShape",value:function(){return Object(_e.g)("g",null,this.getBackground())}}])&&fS(r.prototype,n),c}(da);function Hv(t){return Hv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Hv(t)}function Xv(){return Xv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xv.apply(this,arguments)}function dS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function hS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Vv(t,r){return Vv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Vv(t,r)}function yS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=wd(t);if(r){var c=wd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return vS(this,n)}}function vS(t,r){if(r&&(Hv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pl(t)}function pl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wd(t){return wd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},wd(t)}function xd(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var $v=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Vv(s,l)})(c,t);var r,n,i=yS(c);function c(){var s;dS(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return xd(pl(s=i.call.apply(i,[this].concat(h))),"ref",void 0),xd(pl(s),"currentProperties",void 0),xd(pl(s),"preProperties",void 0),xd(pl(s),"setRef",function(O){s.ref=O}),s}return r=c,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(s){s.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var s=this.props.model,l=s.x,h=s.y,v=s.height,O=s.width,w=s.getNodeStyle();return this.currentProperties=JSON.stringify(s.properties),Object(_e.g)("foreignObject",Xv({},w,{x:l-O/2,y:h-v/2,width:O,height:v,ref:this.setRef}))}}])&&hS(r.prototype,n),c}(da);function Wv(t){return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Wv(t)}function Yv(){return Yv=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yv.apply(this,arguments)}function S0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function ts(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S0(Object(n),!0).forEach(function(i){Zv(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Kv(t,r){return Kv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Kv(t,r)}function mS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Sd(t);if(r){var c=Sd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return bS(this,n)}}function bS(t,r){if(r&&(Wv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qv(t)}function qv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sd(t){return Sd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Sd(t)}function Zv(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Fi,_S=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Kv(s,l)})(c,t);var r,n,i=mS(c);function c(s){var l;return function(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}(this,c),Zv(qv(l=i.call(this,s)),"setHoverON",function(){l.setState({isHovered:!0})}),Zv(qv(l),"setHoverOFF",function(){l.setState({isHovered:!1})}),l.state={isHovered:!1},l}return r=c,(n=[{key:"getBackground",value:function(){var s=this.props.model,l=s.getTextStyle(),h=s.text,v=l.background||{};if(this.state.isHovered&&l.hover&&l.hover.background&&(v=ts(ts({},v),l.hover.background)),h&&h.value&&v.fill!=="transparent"){var O,w=l.fontSize,j=l.overflowMode,C=l.lineHeight,X=l.wrapPadding,te=l.textWidth,le=h.value,Te=h.x,Pe=h.y,$e=String(le).split(/[\r\n]/g),st=$e.length;if(j==="autoWrap"&&te){var Dt=kp({rows:$e,style:{fontSize:"".concat(w,"px"),width:"".concat(te,"px"),lineHeight:C,padding:X},rowsLength:st,className:"lf-get-text-height"});O=ts(ts({},v),{},{x:Te-1,y:Pe-1,width:te,height:Dt})}else{$e&&$e.forEach(function(hr){Ot(hr)});var Et=Qf({rows:$e,fontSize:w,rowsLength:st}),qt=Et.width,Rt=Et.height;if(typeof v.wrapPadding=="string"){var wt=v.wrapPadding.split(",").filter(function(hr){return hr.trim()}).map(function(hr){return parseFloat(hr.trim())});wt.length>0&&wt.length<=4&&(wt.length===1?wt=[wt[0],wt[0],wt[0],wt[0]]:wt.length===2?wt=[wt[0],wt[1],wt[0],wt[1]]:wt.length===3&&(wt=[wt[0],wt[1],wt[2],wt[1]]),qt+=wt[1]+wt[3],Rt+=wt[0]+wt[2],Te+=(wt[1]-wt[3])/2,Pe+=(wt[2]-wt[0])/2)}O=ts(ts({},v),{},{x:Te-1,y:Pe-1,width:qt,height:Rt})}return Object(_e.g)(nu,O)}}},{key:"getShape",value:function(){var s=this.props.model,l=s.text,h=l.value,v=l.x,O=l.y;if(h){var w=ts({x:v,y:O,className:"lf-element-text",value:h},s.getTextStyle());return Object(_e.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(_e.g)(y0,Yv({},w,{model:s})))}}}])&&gS(r.prototype,n),c}(g0);function Jv(t){return Jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jv(t)}function T0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function ha(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?T0(Object(n),!0).forEach(function(i){Go(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function ES(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return A0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return A0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function OS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qv(t,r){return Qv=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Qv(t,r)}function wS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Td(t);if(r){var c=Td(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return xS(this,n)}}function xS(t,r){if(r&&(Jv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bo(t)}function Bo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Td(t){return Td=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Td(t)}function Go(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Fi||(Fi={}));var P0=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&Qv(s,l)})(c,t);var r,n,i=wS(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),Go(Bo(l=i.call(this)),"stepDragData",void 0),Go(Bo(l),"stepDrag",void 0),Go(Bo(l),"oldEdge",void 0),Go(Bo(l),"preTargetNode",void 0),Go(Bo(l),"targetRuleResults",void 0),Go(Bo(l),"sourceRuleResults",void 0),Go(Bo(l),"handleMouseDown",function(w){l.stepDrag&&l.stepDrag.handleMouseDown(w)}),Go(Bo(l),"onDragStart",function(){var w=l.props,j=w.x,C=w.y,X=w.edgeModel,te=X.startPoint,le=X.endPoint,Te=X.pointsList;l.oldEdge={startPoint:te,endPoint:le,pointsList:Te},l.setState({endX:j,endY:C,dragging:!0})}),Go(Bo(l),"onDragging",function(w){var j=w.deltaX,C=w.deltaY,X=l.state,te=X.endX,le=X.endY,Te=l.props,Pe=Te.graphModel,$e=Te.type,st=Pe.transformModel,Dt=Pe.editConfigModel,Et=ES(st.moveCanvasPointByHtml([te,le],j,C),2),qt=Et[0],Rt=Et[1];l.setState({endX:qt,endY:Rt,dragging:!0});var wt=l.props.edgeModel,hr=Hu({x:te,y:le},Pe);if(hr&&hr.node&&l.isAllowAdjust(hr).pass){var Fr,qr=wt.startPoint,Vr=wt.endPoint,en=wt.sourceNode,Ln=wt.targetNode;$e===Fi.SOURCE?Fr={startPoint:{x:hr.anchor.x,y:hr.anchor.y},endPoint:{x:Vr.x,y:Vr.y},sourceNode:hr.node,targetNode:Ln}:$e===Fi.TARGET&&(Fr={startPoint:{x:qr.x,y:qr.y},endPoint:{x:hr.anchor.x,y:hr.anchor.y},sourceNode:en,targetNode:hr.node}),wt.updateAfterAdjustStartAndEnd(Fr)}else $e===Fi.SOURCE?wt.updateStartPoint({x:qt,y:Rt}):$e===Fi.TARGET&&wt.updateEndPoint({x:qt,y:Rt});wt.text.value&&Dt.adjustEdge&&wt.setText(Object.assign({},wt.text,wt.textPosition))}),Go(Bo(l),"onDragEnd",function(w){var j=w.event;try{var C;l.setState({dragging:!1});var X=l.props,te=X.graphModel,le=X.edgeModel,Te=X.type,Pe=l.state,$e=Pe.endX,st=Pe.endY,Dt=Pe.dragging,Et=Hu({x:$e,y:st},te);if(!Dt)return;var qt,Rt=!1;if(Et&&Et.node){var wt=l.isAllowAdjust(Et),hr=wt.pass,Fr=wt.msg,qr=wt.newTargetNode;if(hr){var Vr,en=le.getData();qt=ha(ha({},en),{},{sourceAnchorId:"",targetAnchorId:"",text:(en==null||(Vr=en.text)===null||Vr===void 0?void 0:Vr.value)||""}),Te===Fi.SOURCE?(qt=ha(ha({},te.edgeGenerator(te.getNodeModelById(Et.node.id).getData(),te.getNodeModelById(le.targetNodeId).getData(),qt)),{},{sourceNodeId:Et.node.id,sourceAnchorId:Et.anchor.id,startPoint:{x:Et.anchor.x,y:Et.anchor.y},targetNodeId:le.targetNodeId,endPoint:ha({},le.endPoint)}),le.sourceNodeId===Et.node.id&&le.sourceAnchorId===Et.anchor.id&&(Rt=!0)):Te===Fi.TARGET&&(qt=ha(ha({},te.edgeGenerator(te.getNodeModelById(le.sourceNodeId).getData(),te.getNodeModelById(Et.node.id).getData(),qt)),{},{sourceNodeId:le.sourceNodeId,startPoint:ha({},le.startPoint),targetNodeId:Et.node.id,targetAnchorId:Et.anchor.id,endPoint:{x:Et.anchor.x,y:Et.anchor.y}}),le.targetNodeId===Et.node.id&&le.targetAnchorId===Et.anchor.id&&(Rt=!0))}else{Rt=!0;var Ln=qr.getData();te.eventCenter.emit(tr.CONNECTION_NOT_ALLOWED,{data:Ln,msg:Fr})}}else Rt=!0;if(Rt)l.recoveryEdge();else{te.deleteEdgeById(le.id);var Vn=te.addEdge(ha({},qt));te.eventCenter.emit(tr.EDGE_EXCHANGE_NODE,{data:{newEdge:Vn.getData(),oldEdge:le.getData()}})}(C=l.preTargetNode)===null||C===void 0||C.setElementState(zr.DEFAULT)}finally{l.props.graphModel.eventCenter.emit(tr.ADJUST_POINT_DRAGEND,{e:j,data:l.stepDragData})}}),Go(Bo(l),"recoveryEdge",function(){var w=l.props.edgeModel,j=l.oldEdge,C=j.startPoint,X=j.endPoint,te=j.pointsList;w.updateStartPoint(C),w.updateEndPoint(X),w.modelType!==Pr.LINE_EDGE&&(w.pointsList=te,w.initPoints())}),Go(Bo(l),"getAdjustPointStyle",function(){var w=l.props,j=w.graphModel.theme;return w.edgeModel,j.edgeAdjust}),l.state={dragging:!1,endX:0,endY:0},l.targetRuleResults=new Map,l.sourceRuleResults=new Map;var h=s.type,v=s.edgeModel,O=s.graphModel.eventCenter;return l.stepDragData={type:h,edgeData:v.getData()},l.stepDrag=new Wr({onDragStart:l.onDragStart,onDragging:l.onDragging,onDragEnd:l.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:l.stepDragData}),l}return r=c,(n=[{key:"isAllowAdjust",value:function(s){var l=this.props,h=l.edgeModel,v=h.id,O=h.sourceNode,w=h.targetNode,j=h.sourceAnchorId,C=h.targetAnchorId,X=l.type,te=null,le=null,Te=null,Pe=null;if(X===Fi.SOURCE?(te=s.node,le=w,Te=s.anchor,Pe=w.getAnchorInfo(C)):(te=O,le=s.node,Pe=s.anchor,Te=O.getAnchorInfo(j)),this.preTargetNode&&this.preTargetNode!==s.node&&this.preTargetNode.setElementState(zr.DEFAULT),this.preTargetNode=s.node,Pe.id===Te.id)return{pass:!1,msg:"",newTargetNode:le};var $e="".concat(te.id,"_").concat(le.id,"_").concat(Te.id,"_").concat(Pe.id);if(!this.targetRuleResults.has($e)){var st=te.isAllowConnectedAsSource(le,Te,Pe,v),Dt=le.isAllowConnectedAsTarget(te,Te,Pe,v);this.sourceRuleResults.set($e,Xu(st)),this.targetRuleResults.set($e,Xu(Dt))}var Et=this.sourceRuleResults.get($e),qt=Et.isAllPass,Rt=Et.msg,wt=this.targetRuleResults.get($e),hr=wt.isAllPass,Fr=wt.msg,qr=qt&&hr?zr.ALLOW_CONNECT:zr.NOT_ALLOW_CONNECT;return X===Fi.SOURCE?te.setElementState(qr):le.setElementState(qr),{pass:qt&&hr,msg:Fr||Rt,newTargetNode:le}}},{key:"render",value:function(){var s=this.props,l=s.x,h=s.y,v=s.getAdjustPointShape,O=s.edgeModel,w=this.state.dragging;return Object(_e.g)("g",{pointerEvents:w?"none":"",onMouseDown:this.handleMouseDown},w?"":v(l,h,O))}}])&&OS(r.prototype,n),c}(_e.a);function eg(t){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},eg(t)}function dl(){return dl=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dl.apply(this,arguments)}function SS(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return j0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return j0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function j0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function TS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function AS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function tg(t,r){return tg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},tg(t,r)}function PS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Ad(t);if(r){var c=Ad(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return jS(this,n)}}function jS(t,r){if(r&&(eg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yi(t)}function yi(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ad(t){return Ad=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ad(t)}function Bi(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var hl=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&tg(s,l)})(c,t);var r,n,i=PS(c);function c(){var s;TS(this,c);for(var l=arguments.length,h=new Array(l),v=0;v<l;v++)h[v]=arguments[v];return Bi(yi(s=i.call.apply(i,[this].concat(h))),"startTime",void 0),Bi(yi(s),"contextMenuTime",void 0),Bi(yi(s),"clickTimer",void 0),Bi(yi(s),"textRef",Object(_e.f)()),Bi(yi(s),"handleHover",function(O,w){var j=s.props,C=j.model,X=j.graphModel.eventCenter;C.setHovered(O);var te=O?tr.EDGE_MOUSEENTER:tr.EDGE_MOUSELEAVE,le=C.getData();X.emit(te,{data:le,e:w})}),Bi(yi(s),"setHoverON",function(O){s.props.model.isHovered||(s.textRef&&s.textRef.current&&s.textRef.current.setHoverON(),s.handleHover(!0,O))}),Bi(yi(s),"setHoverOFF",function(O){s.props.model.isHovered&&(s.textRef&&s.textRef.current&&s.textRef.current.setHoverOFF(),s.handleHover(!1,O))}),Bi(yi(s),"handleContextMenu",function(O){O.preventDefault(),s.contextMenuTime=new Date().getTime(),s.clickTimer&&clearTimeout(s.clickTimer);var w=s.props,j=w.model,C=w.graphModel,X=C.getPointByClient({x:O.clientX,y:O.clientY});C.setElementStateById(j.id,zr.SHOW_MENU,X.domOverlayPosition),s.toFront(),j.isSelected||C.selectEdgeById(j.id);var te=j==null?void 0:j.getData();C.eventCenter.emit(tr.EDGE_CONTEXTMENU,{data:te,e:O,position:X})}),Bi(yi(s),"handleMouseDown",function(O){O.stopPropagation(),s.startTime=new Date().getTime()}),Bi(yi(s),"handleMouseUp",function(O){if(s.startTime&&!(new Date().getTime()-s.startTime>200||O.button===2)){var w=O.detail===2,j=s.props,C=j.model,X=j.graphModel,te=C==null?void 0:C.getData(),le=X.getPointByClient({x:O.clientX,y:O.clientY});if(w){var Te=X.editConfigModel,Pe=X.textEditElement;if(Pe&&Pe.id===C.id&&X.setElementStateById(C.id,zr.DEFAULT),Te.edgeTextEdit&&C.text.editable&&X.setElementStateById(C.id,zr.TEXT_EDIT),C.modelType===Pr.POLYLINE_EDGE){var $e=C,st=X.getPointByClient({x:O.x,y:O.y}).canvasOverlayPosition,Dt=st.x,Et=st.y,qt=Qe({x:Dt,y:Et},$e.points);$e.dbClickPosition=qt}X.eventCenter.emit(tr.EDGE_DBCLICK,{data:te,e:O,position:le})}else X.eventCenter.emit(tr.ELEMENT_CLICK,{data:te,e:O,position:le}),X.eventCenter.emit(tr.EDGE_CLICK,{data:te,e:O,position:le});var Rt=X.editConfigModel;X.selectEdgeById(C.id,Vf(O,Rt)),s.toFront()}}),s}return r=c,(n=[{key:"getShape",value:function(){return Object(_e.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var s=this.props,l=s.model,h=s.graphModel;if(l.state===zr.TEXT_EDIT)return null;var v=!1,O=h.editConfigModel;return(l.text.draggable||O.edgeTextDraggable)&&(v=!0),Object(_e.g)(_S,{ref:this.textRef,editable:O.edgeTextEdit&&l.text.editable,model:l,graphModel:h,draggable:v})}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=s.startPoint,h=s.endPoint,v=s.isSelected;return{start:l,end:h,hover:this.state.hover,isSelected:v}}},{key:"getLastTwoPoints",value:function(){var s=this.props.model;return[s.startPoint,s.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var s=this.props.model,l=s.id,h=s.getArrowStyle(),v=h.refY,O=v===void 0?0:v,w=h.refX,j=w===void 0?2:w,C=SS(this.getLastTwoPoints(),2),X=C[0],te=C[1],le="auto";return X!==null&&te!==null&&(le=sy({x:te.x-X.x,y:te.y-X.y,z:0})*(180/Math.PI)),Object(_e.g)("g",null,Object(_e.g)("defs",null,Object(_e.g)("marker",{id:"marker-start-".concat(l),refX:-j,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(_e.g)("marker",{id:"marker-end-".concat(l),refX:j,refY:O,overflow:"visible",orient:le,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var s=this.props.model.getArrowStyle(),l=s.stroke,h=s.strokeWidth,v=s.offset,O=s.verticalLength;return Object(_e.g)("path",{stroke:l,fill:l,strokeWidth:h,d:"M 0 0 L ".concat(v," -").concat(O," L ").concat(v," ").concat(O," Z")})}},{key:"getEndArrow",value:function(){var s=this.props.model.getArrowStyle(),l=s.stroke,h=s.strokeWidth,v=s.offset,O=s.verticalLength;return Object(_e.g)("path",{stroke:l,fill:l,strokeWidth:h,transform:"rotate(180)",d:"M 0 0 L ".concat(v," -").concat(O," L ").concat(v," ").concat(O," Z")})}},{key:"getAdjustPointShape",value:function(s,l,h){var v=h.getAdjustPointStyle();return Object(_e.g)(al,dl({className:"lf-edge-adjust-point"},v,{x:s,y:l}))}},{key:"getAdjustPoints",value:function(){var s=this.props,l=s.model,h=s.graphModel,v=l.getAdjustStart(),O=l.getAdjustEnd();return Object(_e.g)("g",null,Object(_e.g)(P0,dl({type:"SOURCE"},v,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:l,graphModel:h})),Object(_e.g)(P0,dl({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:l,graphModel:h})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(_e.g)("g",null)}},{key:"getAppend",value:function(){return Object(_e.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var s=this.props,l=s.graphModel,h=s.model;l.overlapMode!==co.INCREASE&&l.toFront(h.id)}},{key:"render",value:function(){var s=this.props,l=s.model,h=l.isSelected,v=l.isHitable,O=l.isShowAdjustPoint;return s.graphModel.animation,Object(_e.g)("g",null,Object(_e.g)("g",{className:["lf-edge",!v&&"pointer-none",h&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&h?this.getAdjustPoints():"")}}])&&AS(r.prototype,n),c}(_e.a);function rg(t){return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rg(t)}function NS(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return N0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return N0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function N0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}var yl=function(t){var r={d:""};return Object.entries(t).forEach(function(n){var i=NS(n,2),c=i[0],s=i[1],l=rg(s);c!=="style"&&l==="object"||(r[c]=s)}),Object(_e.g)("path",r)};function ng(t){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ng(t)}function og(){return og=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},og.apply(this,arguments)}function MS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function RS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ig(t,r){return ig=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ig(t,r)}function CS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Pd(t);if(r){var c=Pd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return DS(this,n)}}function DS(t,r){if(r&&(ng(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Pd(t){return Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Pd(t)}var ag=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&ig(s,l)})(c,t);var r,n,i=CS(c);function c(){return MS(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.startPoint,h=s.endPoint,v=s.isAnimation,O=s.arrowConfig,w=s.getEdgeStyle(),j=s.getEdgeAnimationStyle(),C=j.strokeDasharray,X=j.stroke,te=j.strokeDashoffset,le=j.animationName,Te=j.animationDuration,Pe=j.animationIterationCount,$e=j.animationTimingFunction,st=j.animationDirection;return Object(_e.g)(gc,og({},w,{x1:l.x,y1:l.y,x2:h.x,y2:h.y},O,v?{strokeDasharray:C,stroke:X,style:{strokeDashoffset:te,animationName:le,animationDuration:Te,animationIterationCount:Pe,animationTimingFunction:$e,animationDirection:st}}:{}))}},{key:"getAppendWidth",value:function(){var s=this.props.model,l=function(C){var X,te=C.start,le=C.end;if(te.x===le.x&&te.y===le.y)X="";else{var Te={start:te,end:le,offset:10,verticalLength:5},Pe=eu(Ju(Ju({},Te),{},{type:"start"})),$e=eu(Ju(Ju({},Te),{},{type:"end"}));X="M".concat(Pe.leftX," ").concat(Pe.leftY,` 
    L`).concat(Pe.rightX," ").concat(Pe.rightY,` 
    L`).concat($e.rightX," ").concat($e.rightY,`
    L`).concat($e.leftX," ").concat($e.leftY," z")}return{d:X,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:s.startPoint,end:s.endPoint}),h=l.d,v=l.strokeWidth,O=l.fill,w=l.strokeDasharray,j=l.stroke;return Object(_e.g)(yl,{d:h,fill:O,strokeWidth:v,stroke:j,strokeDasharray:w})}}])&&RS(r.prototype,n),c}(hl);function ug(t){return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ug(t)}function IS(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return M0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return M0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}var kS=function(t){var r={points:"",fill:"none"};return Object.entries(t).forEach(function(n){var i=IS(n,2),c=i[0],s=i[1];(c==="style"||ug(s)!=="object")&&(r[c]=s)}),Object(_e.g)("polyline",r)};function sg(t){return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sg(t)}function R0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function jd(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?R0(Object(n),!0).forEach(function(i){va(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function cg(){return cg=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cg.apply(this,arguments)}function LS(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return C0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return C0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function C0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function FS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fg(t,r){return fg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},fg(t,r)}function BS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Nd(t);if(r){var c=Nd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return GS(this,n)}}function GS(t,r){if(r&&(sg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ya(t)}function ya(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nd(t){return Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Nd(t)}function va(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var lg=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&fg(s,l)})(c,t);var r,n,i=BS(c);function c(){var s;return function(l,h){if(!(l instanceof h))throw new TypeError("Cannot call a class as a function")}(this,c),va(ya(s=i.call(this)),"drag",void 0),va(ya(s),"isDragging",void 0),va(ya(s),"isShowAdjustPointTemp",void 0),va(ya(s),"appendInfo",void 0),va(ya(s),"onDragStart",function(){var l=s.props.model;l.dragAppendStart(),s.isShowAdjustPointTemp=l.isShowAdjustPoint,l.isShowAdjustPoint=!1}),va(ya(s),"onDragging",function(l){var h=l.deltaX,v=l.deltaY,O=s.props,w=O.model,j=O.graphModel;s.isDragging=!0;var C=j.transformModel,X=j.editConfigModel,te=LS(C.fixDeltaXY(h,v),2),le=te[0],Te=te[1],Pe=w,$e=X.adjustEdgeMiddle;s.appendInfo=$e?Pe.dragAppendSimple(s.appendInfo,{x:le,y:Te}):Pe.dragAppend(s.appendInfo,{x:le,y:Te})}),va(ya(s),"onDragEnd",function(){var l=s.props,h=l.model,v=l.graphModel.eventCenter,O=h;O.dragAppendEnd(),s.isDragging=!1,O.isShowAdjustPoint=s.isShowAdjustPointTemp,s.appendInfo=void 0,v.emit(tr.EDGE_ADJUST,{data:O.getData()})}),va(ya(s),"beforeDragStart",function(l,h){h.dragAble&&s.drag.handleMouseDown(l),s.appendInfo=h}),s.drag=new Wr({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd,isStopPropagation:!1}),s}return r=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.points,h=s.isAnimation,v=s.arrowConfig,O=s.getEdgeStyle(),w=s.getEdgeAnimationStyle(),j=w.strokeDasharray,C=w.stroke,X=w.strokeDashoffset,te=w.animationName,le=w.animationDuration,Te=w.animationIterationCount,Pe=w.animationTimingFunction,$e=w.animationDirection;return Object(_e.g)(kS,cg({points:l},O,v,h?{strokeDasharray:j,stroke:C,style:{strokeDashoffset:X,animationName:te,animationDuration:le,animationIterationCount:Te,animationTimingFunction:Pe,animationDirection:$e}}:{}))}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=s.points,h=s.isSelected,v={start:null,end:null,hover:this.state.hover,isSelected:h},O=me(l);return O.length>=2&&(v.start=O[O.length-2],v.end=O[O.length-1]),v}},{key:"getLastTwoPoints",value:function(){var s=this.props.model.points,l=me(s);return l.length>=2?[l[l.length-2],l[l.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(s){var l,h=s.start,v=s.end;if(h.x===v.x&&h.y===v.y)l="";else{var O={start:h,end:v,offset:10,verticalLength:5},w=eu(jd(jd({},O),{},{type:"start"})),j=eu(jd(jd({},O),{},{type:"end"}));l="M".concat(w.leftX," ").concat(w.leftY,` 
      L`).concat(w.rightX," ").concat(w.rightY,` 
      L`).concat(j.rightX," ").concat(j.rightY,`
      L`).concat(j.leftX," ").concat(j.leftY," z")}return{d:l,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(s){var l=this.getAppendAttributes(s),h=l.d,v=l.strokeWidth,O=l.fill,w=l.strokeDasharray,j=l.stroke;return Object(_e.g)(yl,{d:h,fill:O,strokeWidth:v,stroke:j,strokeDasharray:w})}},{key:"getAppendWidth",value:function(){for(var s=this,l=this.props,h=l.model,v=l.graphModel,O=h.pointsList,w=h.draggable,j=[],C=O.length,X=function(le){var Te="lf-polyline-append",Pe={start:{x:O[le].x,y:O[le].y},end:{x:O[le+1].x,y:O[le+1].y},startIndex:le,endIndex:le+1,direction:"",dragAble:!0},$e=Object(_e.g)("g",{className:Te},s.getAppendShape(Pe)),st=v.editConfigModel,Dt=st.adjustEdge,Et=st.adjustEdgeMiddle;if(Dt&&w){var qt=Pe.startIndex,Rt=Pe.endIndex,wt=Et&&(qt===0||Rt===C-1);Pe.dragAble=!wt,Pe.start.x===Pe.end.x?(Pe.dragAble&&(Te+="-ew-resize"),Pe.direction=Kr.VERTICAL):Pe.start.y===Pe.end.y&&(Pe.dragAble&&(Te+="-ns-resize"),Pe.direction=Kr.HORIZONTAL),$e=Object(_e.g)("g",{className:s.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(hr){return s.beforeDragStart(hr,Pe)}},Object(_e.g)("g",{className:Te},s.getAppendShape(Pe)))}j.push($e)},te=0;te<C-1;te++)X(te);return Object(_e.g)("g",null,j)}}])&&FS(r.prototype,n),c}(hl);function pg(t){return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pg(t)}function US(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return D0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return D0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function D0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function dg(){return dg=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dg.apply(this,arguments)}function zS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function HS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function hg(t,r){return hg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},hg(t,r)}function XS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Md(t);if(r){var c=Md(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return VS(this,n)}}function VS(t,r){if(r&&(pg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Md(t){return Md=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Md(t)}var yg=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&hg(s,l)})(c,t);var r,n,i=XS(c);function c(){return zS(this,c),i.apply(this,arguments)}return r=c,(n=[{key:"getEdge",value:function(){var s=this.props.model,l=s.getEdgeStyle(),h=s.path,v=s.isAnimation,O=s.arrowConfig,w=s.getEdgeAnimationStyle(),j=w.strokeDasharray,C=w.stroke,X=w.strokeDashoffset,te=w.animationName,le=w.animationDuration,Te=w.animationIterationCount,Pe=w.animationTimingFunction,$e=w.animationDirection;return Object(_e.g)(yl,dg({d:h},l,O,v?{strokeDasharray:j,stroke:C,style:{strokeDashoffset:X,animationName:te,animationDuration:le,animationIterationCount:Te,animationTimingFunction:Pe,animationDirection:$e}}:{}))}},{key:"getAppendWidth",value:function(){var s=this.props.model.path;return Object(_e.g)(yl,{d:s,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var s=this.props.model,l=this.state.hover,h=s,v=h.path,O=h.isSelected,w=US(ht(v),2);return{start:w[0],end:w[1],hover:l,isSelected:O}}},{key:"getLastTwoPoints",value:function(){var s=this.props.model.path;return ht(s)}}])&&HS(r.prototype,n),c}(hl);function vg(t){return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},vg(t)}function I0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function $S(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function WS(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function YS(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gg(t,r){return gg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},gg(t,r)}function KS(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Rd(t);if(r){var c=Rd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return qS(this,n)}}function qS(t,r){if(r&&(vg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function Rd(t){return Rd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Rd(t)}var ZS=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&gg(s,l)})(c,t);var r,n,i=KS(c);function c(){return WS(this,c),i.apply(this,arguments)}return r=c,n=[{key:"getArrowAttributes",value:function(){var s=this.props,l=s.arrowInfo,h=s.style,v=l.start,O=l.end,w={start:v,end:O,offset:h.offset,verticalLength:h.verticalLength,type:"end"},j=eu(w),C=j.leftX,X=j.leftY,te=j.rightX,le=j.rightY;return function(Te){for(var Pe=1;Pe<arguments.length;Pe++){var $e=arguments[Pe]!=null?arguments[Pe]:{};Pe%2?I0(Object($e),!0).forEach(function(st){$S(Te,st,$e[st])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Te,Object.getOwnPropertyDescriptors($e)):I0(Object($e)).forEach(function(st){Object.defineProperty(Te,st,Object.getOwnPropertyDescriptor($e,st))})}return Te}({d:"M".concat(C," ").concat(X," L").concat(O.x," ").concat(O.y," L").concat(te," ").concat(le," z")},h)}},{key:"getShape",value:function(){var s=this.getArrowAttributes(),l=s.d,h=s.strokeWidth,v=s.stroke,O=s.fill;return Object(_e.g)(yl,{d:l,fill:O,strokeWidth:h,stroke:v})}},{key:"render",value:function(){return Object(_e.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&YS(r.prototype,n),c}(_e.a),k0=function(t,r){return ze(t,r)},JS=function(t){var r=t==null?0:t.length;return r?t[r-1]:void 0},mg=function(){return Vt.a.Date.now()},QS=/\s/,eT=function(t){for(var r=t.length;r--&&QS.test(t.charAt(r)););return r},tT=/^\s+/,rT=function(t){return t&&t.slice(0,eT(t)+1).replace(tT,"")},nT=/^[-+]0x[0-9a-f]+$/i,oT=/^0b[01]+$/i,iT=/^0o[0-7]+$/i,aT=parseInt,L0=function(t){if(typeof t=="number")return t;if(Or(t))return NaN;if(Ir(t)){var r=typeof t.valueOf=="function"?t.valueOf():t;t=Ir(r)?r+"":r}if(typeof t!="string")return t===0?t:+t;t=rT(t);var n=oT.test(t);return n||iT.test(t)?aT(t.slice(2),n?2:8):nT.test(t)?NaN:+t},uT=Math.max,sT=Math.min,cT=function(t,r,n){var i,c,s,l,h,v,O=0,w=!1,j=!1,C=!0;if(typeof t!="function")throw new TypeError("Expected a function");function X(st){var Dt=i,Et=c;return i=c=void 0,O=st,l=t.apply(Et,Dt)}function te(st){return O=st,h=setTimeout(Te,r),w?X(st):l}function le(st){var Dt=st-v;return v===void 0||Dt>=r||Dt<0||j&&st-O>=s}function Te(){var st=mg();if(le(st))return Pe(st);h=setTimeout(Te,function(Dt){var Et=r-(Dt-v);return j?sT(Et,s-(Dt-O)):Et}(st))}function Pe(st){return h=void 0,C&&i?X(st):(i=c=void 0,l)}function $e(){var st=mg(),Dt=le(st);if(i=arguments,c=this,v=st,Dt){if(h===void 0)return te(v);if(j)return clearTimeout(h),h=setTimeout(Te,r),X(v)}return h===void 0&&(h=setTimeout(Te,r)),l}return r=L0(r)||0,Ir(n)&&(w=!!n.leading,s=(j="maxWait"in n)?uT(L0(n.maxWait)||0,r):s,C="trailing"in n?!!n.trailing:C),$e.cancel=function(){h!==void 0&&clearTimeout(h),O=0,i=v=c=h=void 0},$e.flush=function(){return h===void 0?l:Pe(mg())},$e},fT=o(167);function lT(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function uu(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var F0,B0,G0,pT=function(){function t(i){(function(c,s){if(!(c instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),uu(this,"undos",[]),uu(this,"redos",[]),uu(this,"callbacks",[]),uu(this,"stopWatch",null),uu(this,"curData",null),uu(this,"maxSize",50),uu(this,"waitTime",100),uu(this,"eventCenter",void 0),this.eventCenter=i}var r,n;return r=t,(n=[{key:"add",value:function(i){k0(JS(this.undos),i)||(this.undos.push(i),k0(this.curData,i)||(this.redos=[]),this.eventCenter.emit(tr.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var i=this.undos.pop();this.redos.push(i);var c=this.undos.pop();return this.curData=cn(c),c}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var i=this.redos.pop();return this.curData=cn(i),i}}},{key:"watch",value:function(i){var c=this;this.stopWatch&&this.stopWatch(),this.undos.push(i.modelToGraphData()),this.stopWatch=Object(fT.a)(i,cT(function(){var s=i.modelToHistoryData();s&&c.add(s)},this.waitTime))}}])&&lT(r.prototype,n),t}();function bg(t){return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bg(t)}function dT(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||function(n,i){if(n){if(typeof n=="string")return U0(n,i);var c=Object.prototype.toString.call(n).slice(8,-1);if(c==="Object"&&n.constructor&&(c=n.constructor.name),c==="Map"||c==="Set")return Array.from(n);if(c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return U0(n,i)}}(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U0(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function z0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function Pc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?z0(Object(n),!0).forEach(function(i){rs(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function H0(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _g(t,r){return _g=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_g(t,r)}function hT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Cd(t);if(r){var c=Cd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return yT(this,n)}}function yT(t,r){if(r&&(bg(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jc(t)}function jc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cd(t){return Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Cd(t)}function rs(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var X0,V0,$0,Eg=vi((G0=B0=function(t){(function(l,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(h&&h.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),h&&_g(l,h)})(s,t);var r,n,i,c=hT(s);function s(){var l;return function(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}(this,s),rs(jc(l=c.call(this)),"ref",Object(_e.f)()),rs(jc(l),"__prevText",{type:"",text:"",id:""}),rs(jc(l),"keyupHandler",function(h){var v=l.props.graphModel.textEditElement;h.key==="Enter"&&h.altKey&&v.setElementState(0)}),rs(jc(l),"inputHandler",function(h){var v=h.target.innerText,O=l.props.graphModel.textEditElement;l.__prevText={type:O.type,text:v.replace(/(\r\n)+$|(\n)+$/,""),id:O.id}}),rs(jc(l),"keydownHandler",function(h){h.stopPropagation()}),l.state={style:{left:0,top:0}},l}return r=s,i=[{key:"getDerivedStateFromProps",value:function(l){var h,v=l.graphModel,O=v.transformModel,w=v.theme,j=v.textEditElement;if(j){var C;if((C=j.text)===null||C===void 0||!C.value)if(j.BaseType===Tn.EDGE){var X=(j=j).text,te=j.textPosition,le=te.x,Te=te.y;X.x=le,X.y=Te,j.setText(X)}else j=j;var Pe={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(j.BaseType===Tn.EDGE){var $e=w.edgeText,st=$e.overflowMode,Dt=$e.lineHeight,Et=$e.wrapPadding,qt=$e.textWidth;qt&&st==="autoWrap"&&(h=Pc(Pc({},Pe),{},{width:qt,minWidth:qt,lineHeight:Dt,padding:Et}))}else if(j.BaseType===Tn.NODE){var Rt=w.nodeText,wt=Rt.overflowMode,hr=Rt.lineHeight,Fr=Rt.wrapPadding,qr=Rt.textWidth,Vr=j,en=Vr.width,Ln=Vr.modelType;(Ln!==Pr.TEXT_NODE&&wt==="autoWrap"||Ln===Pr.TEXT_NODE&&qr)&&(h=Pc(Pc({},Pe),{},{width:qr||en,minWidth:qr||en,lineHeight:hr,padding:Fr}))}var Vn=j.text,Uo=Vn.x,Gi=Vn.y,ri=dT(O.CanvasPointToHtmlPoint([Uo,Gi]),2);return{style:Pc({left:ri[0],top:ri[1]},h)}}}}],(n=[{key:"componentDidUpdate",value:function(){var l=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var h=this.__prevText,v=h.text,O=h.id;l.updateText(O,v),l.eventCenter.emit(tr.TEXT_UPDATE,Pc({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(l){if(window.getSelection!==void 0&&document.createRange!==void 0){var h=document.createRange();h.selectNodeContents(l),h.collapse(!1);var v=window.getSelection();v.removeAllRanges(),v.addRange(h)}}},{key:"render",value:function(){var l,h=this.props.graphModel.textEditElement,v=this.state.style;return h?Object(_e.g)("div",{contentEditable:!0,className:"lf-text-input",style:v,ref:this.ref,key:h.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(l=h.text)===null||l===void 0?void 0:l.value):null}}])&&H0(r.prototype,n),i&&H0(r,i),s}(_e.a),rs(B0,"toolName","textEdit"),F0=G0))||F0,vT=function(t){return t.modelType===Pr.LINE_EDGE?function(r){var n=r.startPoint,i=r.endPoint,c=(n.x+i.x)/2,s=(n.y+i.y)/2,l=Math.abs(n.x-i.x)+10,h=Math.abs(n.y-i.y)+10;return{x:c-l/2,y:s-h/2,x1:c+l/2,y1:s+h/2}}(t):t.modelType===Pr.POLYLINE_EDGE?function(r){var n=r.points,i=me(n),c=tu(i,8),s=c.x,l=c.y,h=c.width,v=c.height;return{x:s-h/2,y:l-v/2,x1:s+h/2,y1:l+v/2}}(t):t.modelType===Pr.BEZIER_EDGE?function(r){var n=r.path,i=St(n),c=tu(i,8),s=c.x,l=c.y,h=c.width,v=c.height;return{x:s-h/2,y:l-v/2,x1:s+h/2,y1:l+v/2}}(t):void 0};function Og(t){return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Og(t)}function W0(t,r){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var c=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(c!=null){var s,l,h=[],v=!0,O=!1;try{for(c=c.call(n);!(v=(s=c.next()).done)&&(h.push(s.value),!i||h.length!==i);v=!0);}catch(w){O=!0,l=w}finally{try{v||c.return==null||c.return()}finally{if(O)throw l}}return h}}(t,r)||Y0(t,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gT(t){return function(r){if(Array.isArray(r))return wg(r)}(t)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(t)||Y0(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y0(t,r){if(t){if(typeof t=="string")return wg(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wg(t,r):void 0}}function wg(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,i=new Array(r);n<r;n++)i[n]=t[n];return i}function mT(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xg(t,r){return xg=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},xg(t,r)}function bT(t){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Dd(t);if(r){var c=Dd(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _T(this,n)}}function _T(t,r){if(r&&(Og(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vl(t)}function vl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dd(t){return Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Dd(t)}function gl(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Sg=vi(($0=V0=function(t){(function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),l&&xg(s,l)})(c,t);var r,n,i=bT(c);function c(s){var l;(function(w,j){if(!(w instanceof j))throw new TypeError("Cannot call a class as a function")})(this,c),gl(vl(l=i.call(this)),"stepDrag",void 0),gl(vl(l),"handleMouseDown",function(w){l.stepDrag.handleMouseDown(w)}),gl(vl(l),"onDragging",function(w){var j=w.deltaX,C=w.deltaY,X=l.props.graphModel,te=X.getSelectElements(!0);X.moveNodes(te.nodes.map(function(le){return le.id}),j,C)}),gl(vl(l),"handleContextMenu",function(w){w.preventDefault();var j=l.props,C=j.graphModel,X=j.graphModel,te=X.eventCenter,le=X.selectElements,Te=C.getPointByClient({x:w.clientX,y:w.clientY}),Pe={nodes:[],edges:[]};gT(le.values()).forEach(function($e){$e.BaseType===Tn.NODE&&Pe.nodes.push($e.getData()),$e.BaseType===Tn.EDGE&&Pe.edges.push($e.getData())}),te.emit(tr.SELECTION_CONTEXTMENU,{data:Pe,e:w,position:Te})});var h=s.graphModel,v=h.gridSize,O=h.eventCenter;return l.stepDrag=new Wr({onDragging:l.onDragging,step:v,eventType:"SELECTION",eventCenter:O}),l}return r=c,(n=[{key:"render",value:function(){var s=this.props.graphModel,l=s.selectElements,h=s.transformModel;if(!(l.size<=1)){var v=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,w=Number.MIN_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER;l.forEach(function(le){var Te={x:0,y:0,x1:0,y1:0};le.BaseType===Tn.NODE&&(Te=function(Pe){var $e=Pe.x,st=Pe.y,Dt=Pe.width,Et=Pe.height;return{x:$e-Dt/2,y:st-Et/2,x1:$e+Dt/2,y1:st+Et/2}}(le)),le.BaseType===Tn.EDGE&&(Te=vT(le)),v=Math.min(v,Te.x),O=Math.min(O,Te.y),w=Math.max(w,Te.x1),j=Math.max(j,Te.y1)});var C=W0(h.CanvasPointToHtmlPoint([v,O]),2);v=C[0],O=C[1];var X=W0(h.CanvasPointToHtmlPoint([w,j]),2);w=X[0],j=X[1];var te={left:"".concat(v-10,"px"),top:"".concat(O-10,"px"),width:"".concat(w-v+20,"px"),height:"".concat(j-O+20,"px")};return Object(_e.g)("div",{className:"lf-multiple-select",style:te,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&mT(r.prototype,n),c}(_e.a),gl(V0,"toolName","multipleSelect"),X0=$0))||X0;function ET(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Id(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var OT=function(){function t(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Id(this,"tools",void 0),Id(this,"components",void 0),Id(this,"toolMap",new Map),Id(this,"instance",void 0),this.instance=i,this.isDisabledTool(Eg.toolName)||this.registerTool(Eg.toolName,Eg),this.isDisabledTool(Sg.toolName)||this.registerTool(Sg.toolName,Sg);var c=i.graphModel;c.eventCenter.on("".concat(tr.GRAPH_TRANSFORM,",").concat(tr.NODE_CLICK,",").concat(tr.BLANK_CLICK," "),function(){var s=c.textEditElement,l=c.editConfigModel,h=l.edgeTextEdit,v=l.nodeTextEdit;(h||v)&&s&&c.textEditElement.setElementState(zr.DEFAULT)})}var r,n;return r=t,(n=[{key:"isDisabledTool",value:function(i){return this.instance.options.disabledTools.indexOf(i)!==-1}},{key:"registerTool",value:function(i,c){this.toolMap.set(i,c)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&ET(r.prototype,n),t}(),wT=o(168),xT=o.n(wT);function ST(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Tg(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var K0=function(){function t(i){(function(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),Tg(this,"mousetrap",void 0),Tg(this,"options",void 0),Tg(this,"target",void 0),i.keyboard||(i.keyboard={enabled:!1}),this.options=i;var c=i.lf;this.target=c.container,this.mousetrap=new xT.a(this.target),i.keyboard.enabled&&this.enable(!0)}var r,n;return r=t,(n=[{key:"initShortcuts",value:function(){var i=this,c=this.options.keyboard.shortcuts;if(c)if(zn(c))c.forEach(function(v){var O=v.keys,w=v.callback,j=v.action;return i.on(O,w,j)});else{var s=c.keys,l=c.callback,h=c.action;this.on(s,l,h)}}},{key:"on",value:function(i,c,s){this.mousetrap.bind(this.getKeys(i),c,s)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(i,c){this.mousetrap.unbind(this.getKeys(i),c)}},{key:"enable",value:function(i){(this.disabled||i)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(i){var c=this;return(Array.isArray(i)?i:[i]).map(function(s){return c.formatKey(s)})}},{key:"formatKey",value:function(i){return i.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&ST(r.prototype,n),t}(),TT=K0,ga=null;function q0(t,r){return t.x+=r,t.y+=r,t.text&&(t.text.x+=r,t.text.y+=r),t}function Z0(t,r){return t.startPoint&&(t.startPoint.x+=r,t.startPoint.y+=r),t.endPoint&&(t.endPoint.x+=r,t.endPoint.y+=r),t.pointsList&&t.pointsList.length>0&&t.pointsList.forEach(function(n){n.x+=r,n.y+=r}),t.text&&(t.text.x+=r,t.text.y+=r),t}function Ag(t){return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ag(t)}function J0(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);r&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(t,c).enumerable})),n.push.apply(n,i)}return n}function ml(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J0(Object(n),!0).forEach(function(i){kn(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J0(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Q0(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kn(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var Pg=function(){function t(c){var s,l,h=this;(function(v,O){if(!(v instanceof O))throw new TypeError("Cannot call a class as a function")})(this,t),kn(this,"container",void 0),kn(this,"width",void 0),kn(this,"height",void 0),kn(this,"graphModel",void 0),kn(this,"history",void 0),kn(this,"viewMap",new Map),kn(this,"tool",void 0),kn(this,"keyboard",void 0),kn(this,"dnd",void 0),kn(this,"options",void 0),kn(this,"snaplineModel",void 0),kn(this,"components",[]),kn(this,"plugins",void 0),kn(this,"extension",{}),kn(this,"adapterIn",void 0),kn(this,"adapterOut",void 0),kn(this,"getView",function(v){return h.viewMap.get(v)}),c=Qm(c),this.options=c,this.container=this.initContainer(c.container),this.plugins=c.plugins,this.graphModel=new Er(ml({},c)),this.tool=new OT(this),this.history=new pT(this.graphModel.eventCenter),this.dnd=new jw({lf:this}),this.keyboard=new TT({lf:this,keyboard:c.keyboard}),c.snapline!==!1&&(this.snaplineModel=new c0(this.graphModel),s=this.graphModel.eventCenter,l=this.snaplineModel,s.on("node:mousemove",function(v){var O=v.data;l.setNodeSnapLine(O)}),s.on("node:mouseup",function(){l.clearSnapline()})),function(v,O){var w=v.keyboard,j=w.options.keyboard;w.on(["cmd + c","ctrl + c"],function(){if(!j.enabled||O.textEditElement)return!0;var C=v.options.guards,X=O.getSelectElements(!1);return C&&C.beforeClone&&!C.beforeClone(X)||X.nodes.length===0&&X.edges.length===0?(ga=null,!0):((ga=X).nodes.forEach(function(te){return q0(te,40)}),ga.edges.forEach(function(te){return Z0(te,40)}),!1)}),w.on(["cmd + v","ctrl + v"],function(){if(!j.enabled||O.textEditElement)return!0;if(ga&&(ga.nodes||ga.edges)){v.clearSelectElements();var C=v.addElements(ga);if(!C)return!0;C.nodes.forEach(function(X){return v.selectElementById(X.id,!0)}),C.edges.forEach(function(X){return v.selectElementById(X.id,!0)}),ga.nodes.forEach(function(X){return q0(X,40)}),ga.edges.forEach(function(X){return Z0(X,40)})}return!1}),w.on(["cmd + z","ctrl + z"],function(){return!j.enabled||!!O.textEditElement||(v.undo(),!1)}),w.on(["cmd + y","ctrl + y"],function(){return!j.enabled||!!O.textEditElement||(v.redo(),!1)}),w.on(["backspace"],function(){if(!j.enabled||O.textEditElement)return!0;var C=O.getSelectElements(!0);return v.clearSelectElements(),C.edges.forEach(function(X){return v.deleteEdge(X.id)}),C.nodes.forEach(function(X){return v.deleteNode(X.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(c.disabledPlugins)}var r,n,i;return r=t,n=[{key:"register",value:function(c,s){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof c=="string"){var h={BaseEdge:hl,BaseEdgeModel:$u,BaseNode:da,BaseNodeModel:pa,RectNode:Ev,RectNodeModel:tv,CircleNode:Sv,CircleNodeModel:ky,PolygonNode:Nv,PolygonNodeModel:Zy,TextNode:zv,TextNodeModel:iv,LineEdge:ag,LineEdgeModel:qo,DiamondNode:Dv,DiamondNodeModel:Uy,PolylineEdge:lg,PolylineEdgeModel:Wn,BezierEdge:yg,BezierEdgeModel:Ny,EllipseNode:Bv,EllipseNodeModel:Vy,HtmlNode:$v,HtmlNodeModel:sv,h:_e.g,type:c};this.viewMap.forEach(function(C){var X=C.extendKey;X&&(h[X]=C)}),this.graphModel.modelMap.forEach(function(C){var X=C.extendKey;X&&(h[X]=C)});var v=s(h),O=v.view,w=v.model,j=O;l&&!j.isObervered&&(j.isObervered=!0,j=Xt(j)),this.setView(c,j),this.graphModel.setModel(c,w)}else this.registerElement(c)}},{key:"registerElement",value:function(c){var s=c.view;c.isObserverView===!1||s.isObervered||(s.isObervered=!0,s=Xt(s)),this.setView(c.type,s),this.graphModel.setModel(c.type,c.model)}},{key:"batchRegister",value:function(){var c=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(l){c.registerElement(l)})}},{key:"defaultRegister",value:function(){this.registerElement({view:Ev,model:tv,type:"rect"}),this.registerElement({type:"circle",view:Sv,model:ky}),this.registerElement({type:"polygon",view:Nv,model:Zy}),this.registerElement({type:"line",view:ag,model:qo}),this.registerElement({type:"polyline",view:lg,model:Wn}),this.registerElement({type:"bezier",view:yg,model:Ny}),this.registerElement({type:"text",view:zv,model:iv}),this.registerElement({type:"ellipse",view:Bv,model:Vy}),this.registerElement({type:"diamond",view:Dv,model:Uy}),this.registerElement({type:"html",view:$v,model:sv})}},{key:"selectElementById",value:function(c){var s=arguments.length>1&&arguments[1]!==void 0&&arguments[1],l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(c,s),!s&&l&&this.graphModel.toFront(c)}},{key:"focusOn",value:function(c){var s=this.graphModel.transformModel,l=c.coordinate,h=c.id;if(!l){var v=this.getNodeModelById(h);v&&(l=v.getData());var O=this.getEdgeModelById(h);O&&(l=O.textPosition)}var w=l,j=w.x,C=w.y;s.focusOn(j,C,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(c){this.graphModel.setTheme(c)}},{key:"resize",value:function(c,s){this.graphModel.resize(c,s),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(c){this.graphModel.setDefaultEdgeType(c)}},{key:"updateText",value:function(c,s){this.graphModel.updateText(c,s)}},{key:"deleteElement",value:function(c){var s,l,h,v=this.getModelById(c);return!!v&&(l=(h=(kn(s={},Tn.NODE,this.deleteNode),kn(s,Tn.EDGE,this.deleteEdge),s)[v.BaseType])===null||h===void 0?void 0:h.call(this,c))!==null&&l!==void 0&&l}},{key:"getModelById",value:function(c){return this.graphModel.getElement(c)}},{key:"getDataById",value:function(c){var s;return(s=this.graphModel.getElement(c))===null||s===void 0?void 0:s.getData()}},{key:"changeNodeType",value:function(c,s){this.graphModel.changeNodeType(c,s)}},{key:"changeEdgeType",value:function(c,s){this.graphModel.changeEdgeType(c,s)}},{key:"getNodeEdges",value:function(c){return this.graphModel.getNodeEdges(c)}},{key:"addNode",value:function(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tr.NODE_ADD;return this.graphModel.addNode(c,s)}},{key:"deleteNode",value:function(c){var s=this.graphModel.getNodeModelById(c);if(!s)return!1;var l=s.getData(),h=this.options.guards,v=!h||!h.beforeDelete||h.beforeDelete(l);return v&&this.graphModel.deleteNode(c),v}},{key:"cloneNode",value:function(c){var s=this.graphModel.getNodeModelById(c).getData(),l=this.options.guards;if(!l||!l.beforeClone||l.beforeClone(s))return this.graphModel.cloneNode(c)}},{key:"changeNodeId",value:function(c,s){return this.graphModel.changeNodeId(c,s)}},{key:"getNodeModelById",value:function(c){return this.graphModel.getNodeModelById(c)}},{key:"getNodeDataById",value:function(c){var s;return(s=this.graphModel.getNodeModelById(c))===null||s===void 0?void 0:s.getData()}},{key:"addEdge",value:function(c){return this.graphModel.addEdge(c)}},{key:"deleteEdge",value:function(c){var s=this.options.guards,l=this.graphModel.edgesMap[c];if(!l)return!1;var h=l.model.getData(),v=!s||!s.beforeDelete||s.beforeDelete(h);return v&&this.graphModel.deleteEdgeById(c),v}},{key:"deleteEdgeByNodeId",value:function(c){var s=c.sourceNodeId,l=c.targetNodeId;s&&l?this.graphModel.deleteEdgeBySourceAndTarget(s,l):s?this.graphModel.deleteEdgeBySource(s):l&&this.graphModel.deleteEdgeByTarget(l)}},{key:"changeEdgeId",value:function(c,s){return this.graphModel.changeEdgeId(c,s)}},{key:"getEdgeModelById",value:function(c){var s;return(s=this.graphModel.edgesMap[c])===null||s===void 0?void 0:s.model}},{key:"getEdgeModels",value:function(c){var s=this.graphModel.edges,l=c.sourceNodeId,h=c.targetNodeId;if(l&&h){var v=[];return s.forEach(function(j){j.sourceNodeId===l&&j.targetNodeId===h&&v.push(j)}),v}if(l){var O=[];return s.forEach(function(j){j.sourceNodeId===l&&O.push(j)}),O}if(h){var w=[];return s.forEach(function(j){j.targetNodeId===h&&w.push(j)}),w}return[]}},{key:"getEdgeDataById",value:function(c){var s;return(s=this.getEdgeModelById(c))===null||s===void 0?void 0:s.getData()}},{key:"getNodeIncomingEdge",value:function(c){return this.graphModel.getNodeIncomingEdge(c)}},{key:"getNodeOutgoingEdge",value:function(c){return this.graphModel.getNodeOutgoingEdge(c)}},{key:"getNodeIncomingNode",value:function(c){return this.graphModel.getNodeIncomingNode(c)}},{key:"getNodeOutgoingNode",value:function(c){return this.graphModel.getNodeOutgoingNode(c)}},{key:"editText",value:function(c){this.graphModel.editText(c)}},{key:"setProperties",value:function(c,s){var l;(l=this.graphModel.getElement(c))===null||l===void 0||l.setProperties($n(s))}},{key:"deleteProperty",value:function(c,s){var l;(l=this.graphModel.getElement(c))===null||l===void 0||l.deleteProperty(s)}},{key:"getProperties",value:function(c){var s;return(s=this.graphModel.getElement(c))===null||s===void 0?void 0:s.getProperties()}},{key:"toFront",value:function(c){this.graphModel.toFront(c)}},{key:"setElementZIndex",value:function(c,s){return this.graphModel.setElementZIndex(c,s)}},{key:"addElements",value:function(c){for(var s=this,l=c.nodes,h=c.edges,v={},O={nodes:[],edges:[]},w=0;w<l.length;w++){var j=l[w],C=j.id,X=this.addNode(j);if(!X)return;C&&(v[C]=X.id),O.nodes.push(X)}return h.forEach(function(te){var le=te.sourceNodeId,Te=te.targetNodeId;v[le]&&(le=v[le]),v[Te]&&(Te=v[Te]);var Pe=s.graphModel.addEdge(ml(ml({},te),{},{sourceNodeId:le,targetNodeId:Te}));O.edges.push(Pe)}),O}},{key:"getAreaElement",value:function(c,s){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],h=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],v=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(c,s,l,h,v).map(function(O){return O.getData()})}},{key:"getSelectElements",value:function(){var c=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(c)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var c=this.graphModel.modelToGraphData();if(this.adapterOut){for(var s=arguments.length,l=new Array(s),h=0;h<s;h++)l[h]=arguments[h];return this.adapterOut.apply(this,[c].concat(l))}return c}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(c){this.graphModel.editConfigModel.updateEditConfig(c)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(c,s){return this.graphModel.getPointByClient({x:c,y:s})}},{key:"undo",value:function(){if(this.history.undoAble()){var c=$n(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(c)}}},{key:"redo",value:function(){if(this.history.redoAble()){var c=$n(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(c)}}},{key:"zoom",value:function(c,s){return this.graphModel.transformModel.zoom(c,s)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(c){this.graphModel.transformModel.setZoomMiniSize(c)}},{key:"setZoomMaxSize",value:function(c){this.graphModel.transformModel.setZoomMaxSize(c)}},{key:"getTransform",value:function(){var c=this.graphModel.transformModel;return{SCALE_X:c.SCALE_X,SCALE_Y:c.SCALE_Y,TRANSLATE_X:c.TRANSLATE_X,TRANSLATE_Y:c.TRANSLATE_Y}}},{key:"translate",value:function(c,s){this.graphModel.transformModel.translate(c,s)}},{key:"resetTranslate",value:function(){var c=this.graphModel.transformModel,s=c.TRANSLATE_X,l=c.TRANSLATE_Y;this.translate(-s,-l)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(c,s){s===void 0&&(s=c),this.graphModel.fitView(c,s)}},{key:"openEdgeAnimation",value:function(c){this.graphModel.openEdgeAnimation(c)}},{key:"closeEdgeAnimation",value:function(c){this.graphModel.closeEdgeAnimation(c)}},{key:"on",value:function(c,s){this.graphModel.eventCenter.on(c,s)}},{key:"off",value:function(c,s){this.graphModel.eventCenter.off(c,s)}},{key:"once",value:function(c,s){this.graphModel.eventCenter.once(c,s)}},{key:"emit",value:function(c,s){this.graphModel.eventCenter.emit(c,s)}},{key:"initContainer",value:function(c){var s=document.createElement("div");return s.style.position="relative",s.style.width="100%",s.style.height="100%",c.innerHTML="",c.appendChild(s),s}},{key:"installPlugins",value:function(){var c,s=this,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],h=(c=this.plugins)!==null&&c!==void 0?c:t.extensions;h.forEach(function(v){var O=v.pluginName||v.name;l.indexOf(O)===-1&&s.installPlugin(v)})}},{key:"installPlugin",value:function(c){if(Ag(c)==="object"){var s=c.install,l=c.render;return s&&s.call(c,this,t),l&&this.components.push(l.bind(c)),void(this.extension[c.pluginName]=c)}var h=c,v=new h({lf:this,LogicFlow:t,options:this.options.pluginsOptions});v.render&&this.components.push(v.render.bind(v)),this.extension[h.pluginName]=v}},{key:"updateAttributes",value:function(c,s){this.graphModel.updateAttributes(c,s)}},{key:"createFakerNode",value:function(c){var s=this.graphModel.modelMap.get(c.type);if(s){var l=new s(ml(ml({},c),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(l),l}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(c){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(c)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(c,s){this.viewMap.set(c,s)}},{key:"renderRawData",value:function(c){this.graphModel.graphDataToModel($n(c)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(_e.j)(Object(_e.g)(Aw,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tr.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(c=this.adapterIn(c)),this.renderRawData(c)}}],i=[{key:"use",value:function(c){var s=c.pluginName;s||(s=c.name);var l=this.extensions.get(s);l&&l.destroy&&l.destroy(),this.extensions.set(s,c)}}],n&&Q0(r.prototype,n),i&&Q0(r,i),t}();function vi(t){return Xt(t)}kn(Pg,"extensions",new Map),f.default=Pg}])})})(Bg,Bg.exports);var Ht=Bg.exports,$E=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),RT=function(e){$E(u,e);function u(a,f){var o=this;return a.id||(a.id="Event_"+Vi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=e.call(this,a,f)||this,o}return u.prototype.setAttributes=function(){this.r=18},u.prototype.getConnectedTargetRules=function(){var a=e.prototype.getConnectedTargetRules.call(this),f={message:"起始节点不能作为边的终点",validate:function(){return!1}};return a.push(f),a},u.extendKey="StartEventModel",u}(Ht.CircleNodeModel),CT=function(e){$E(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.extendKey="StartEventNode",u}(Ht.CircleNode),WE=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),qd=globalThis&&globalThis.__assign||function(){return qd=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},qd.apply(this,arguments)},DT=function(e){WE(u,e);function u(a,f){var o=this;return a.id||(a.id="Event_"+Vi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=e.call(this,a,f)||this,o}return u.prototype.setAttributes=function(){this.r=18},u.prototype.getConnectedSourceRules=function(){var a=e.prototype.getConnectedSourceRules.call(this),f={message:"结束节点不能作为边的起点",validate:function(){return!1}};return a.push(f),a},u.extendKey="EndEventModel",u}(Ht.CircleNodeModel),IT=function(e){WE(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},u.prototype.getShape=function(){var a=this.props.model,f=a.getNodeStyle(),o=a.x,p=a.y,d=a.r,y=e.prototype.getShape.call(this);return Ht.h("g",{},y,Ht.h("circle",qd(qd({},f),{cx:o,cy:p,r:d-5})))},u.extendKey="EndEventView",u}(Ht.CircleNode),YE=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Pl=globalThis&&globalThis.__assign||function(){return Pl=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Pl.apply(this,arguments)},kT=function(e){YE(u,e);function u(a,f){var o=this;return a.id||(a.id="Gateway_"+Vi()),a.text||(a.text=""),a.text&&typeof a.text=="string"&&(a.text={value:a.text,x:a.x,y:a.y+40}),o=e.call(this,a,f)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return u.extendKey="ExclusiveGatewayModel",u}(Ht.PolygonNodeModel),LT=function(e){YE(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.points,g=a.getNodeStyle();return Ht.h("g",{transform:"matrix(1 0 0 1 "+(f-p/2)+" "+(o-d/2)+")"},Ht.h("polygon",Pl(Pl({},g),{x:f,y:o,points:y})),Ht.h("path",Pl({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},g)))},u.extendKey="ExclusiveGatewayNode",u}(Ht.PolygonNode),KE=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Zd=globalThis&&globalThis.__assign||function(){return Zd=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Zd.apply(this,arguments)},FT=function(e){KE(u,e);function u(a,f){var o=this;return a.id||(a.id="Activity_"+Vi()),o=e.call(this,a,f)||this,o}return u.extendKey="UserTaskModel",u}(Ht.RectNodeModel),BT=function(e){KE(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getLabelShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getNodeStyle();return Ht.h("svg",{x:f-p/2+5,y:o-d/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Ht.h("path",{fill:y.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.radius,g=a.getNodeStyle();return Ht.h("g",{},[Ht.h("rect",Zd(Zd({},g),{x:f-p/2,y:o-d/2,rx:y,ry:y,width:p,height:d})),this.getLabelShape()])},u.extendKey="UserTaskNode",u}(Ht.RectNode),qE=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Gg=globalThis&&globalThis.__assign||function(){return Gg=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Gg.apply(this,arguments)},GT=function(e){qE(u,e);function u(a,f){var o=this;return a.id||(a.id="Activity_"+Vi()),o=e.call(this,a,f)||this,o}return u.extendKey="ServiceTaskModel",u}(Ht.RectNodeModel),UT=function(e){qE(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getLabelShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getNodeStyle();return Ht.h("svg",{x:f-p/2+5,y:o-d/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Ht.h("path",{fill:y.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},u.prototype.getShape=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.radius,g=a.getNodeStyle();return Ht.h("g",{},[Ht.h("rect",Gg({x:f-p/2,y:o-d/2,rx:y,ry:y,width:p,height:d},g)),this.getLabelShape()])},u.extendKey="ServiceTaskNode",u}(Ht.RectNode),ZE=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),JE=function(e){ZE(u,e);function u(a,f){var o=this;return a.id||(a.id="Flow_"+Vi()),o=e.call(this,a,f)||this,o}return u.extendKey="SequenceFlowModel",u}(Ht.PolylineEdgeModel),QE=function(e){ZE(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.extendKey="SequenceFlowEdge",u}(Ht.PolylineEdge),n_={width:40,height:40},o_={width:40,height:40},i_={width:40,height:40},a_={width:100,height:80},u_={width:100,height:80},zT=new MT([32,32,1]);function s_(){return zT.next()}function eO(e){return Object.prototype.toString.call(e)}function HT(e){return"  ".repeat(e)}function Jd(e){var u=e;return eO(e)==="[object Object]"?(u={},Object.keys(e).forEach(function(a){var f=a;a.charAt(0)==="-"&&(f=a.substring(1)),u[f]=Jd(e[a])})):Array.isArray(e)&&(u=[],e.forEach(function(a,f){u[f]=Jd(a)})),u}function XT(e){var u=e;try{typeof u!="string"&&(u=JSON.parse(e))}catch{u=JSON.stringify(Jd(e)).replace(/"/g,"'")}return u}var Mc=`	
`;function Xd(e,u,a){var f=HT(a),o="";if(u==="#text")return Mc+f+e;if(u==="#cdata-section")return Mc+f+"<![CDATA["+e+"]]>";if(u==="#comment")return Mc+f+"<!--"+e+"-->";if((""+u).charAt(0)==="-")return" "+u.substring(1)+'="'+XT(e)+'"';if(Array.isArray(e))e.forEach(function(g){o+=Xd(g,u,a+1)});else if(eO(e)==="[object Object]"){var p=Object.keys(e),d="",y="";o+=(a===0?"":Mc+f)+"<"+u,p.forEach(function(g){g.charAt(0)==="-"?d+=Xd(e[g],g,a+1):y+=Xd(e[g],g,a+1)}),o+=d+(y!==""?">"+y+(Mc+f)+"</"+u+">":" />")}else o+=Mc+f+("<"+u+">"+e.toString()+"</"+u+">");return o}function VT(e){var u=`<LogicFlow>	
`;for(var a in e)u+=Xd(e[a],a,0);return u+`	
</LogicFlow>`}var So=function(){};So.ObjTree=function(){return this};So.ObjTree.VERSION="0.23";So.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;So.ObjTree.prototype.attr_prefix="-";So.ObjTree.prototype.parseXML=function(e){var u;if(window.DOMParser){var a=new DOMParser,f=a.parseFromString(e,"application/xml");if(!f)return;u=f.documentElement}else window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLDOM"),a.async=!1,a.loadXML(e),u=a.documentElement);if(u)return this.parseDOM(u)};So.ObjTree.prototype.parseHTTP=function(e,u,a){var f={};for(var o in u)f[o]=u[o];if(f.method||(typeof f.postBody>"u"&&typeof f.postbody>"u"&&typeof f.parameters>"u"?f.method="get":f.method="post"),a){f.asynchronous=!0;var p=this,d=a,y=f.onComplete;f.onComplete=function(_){var T;_&&_.responseXML&&_.responseXML.documentElement&&(T=p.parseDOM(_.responseXML.documentElement)),d(T,_),y&&y(_)}}else f.asynchronous=!1;var g;if(typeof HTTP<"u"&&HTTP.Request){f.uri=e;var E=new HTTP.Request(f);E&&(g=E.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var E=new Ajax.Request(e,f);E&&(g=E.transport)}if(a)return g;if(g&&g.responseXML&&g.responseXML.documentElement)return this.parseDOM(g.responseXML.documentElement)};So.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var u=0;u<this.force_array.length;u++)this.__force_array[this.force_array[u]]=1;var a=this.parseElement(e);if(this.__force_array[e.nodeName]&&(a=[a]),e.nodeType!=11){var f={};f[e.nodeName]=a,a=f}return a.LogicFlow}};So.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var u=e.nodeValue.match(/[^\x00-\x20]/);return u==null?void 0:e.nodeValue}var a=null,f={};if(e.attributes&&e.attributes.length){a={};for(var o=0;o<e.attributes.length;o++){var p=e.attributes[o].nodeName;if(typeof p=="string"){var d=e.attributes[o].nodeValue;try{d=JSON.parse(e.attributes[o].nodeValue.replace(/'/g,'"'))}catch{d=e.attributes[o].nodeValue}d&&(p=this.attr_prefix+p,typeof f[p]>"u"&&(f[p]=0),f[p]++,this.addNode(a,p,f[p],d))}}}if(e.childNodes&&e.childNodes.length){var y=!0;a&&(y=!1);for(var o=0;o<e.childNodes.length&&y;o++){var g=e.childNodes[o].nodeType;g==3||g==4||g==8||(y=!1)}if(y){a||(a="");for(var o=0;o<e.childNodes.length;o++)a+=e.childNodes[o].nodeValue}else{a||(a={});for(var o=0;o<e.childNodes.length;o++){var p=e.childNodes[o].nodeName;if(typeof p=="string"){var d=this.parseElement(e.childNodes[o]);d&&(typeof f[p]>"u"&&(f[p]=0),f[p]++,this.addNode(a,p,f[p],d))}}}}else a===null&&(a={});return a}};So.ObjTree.prototype.addNode=function(e,u,a,f){this.__force_array[u]?(a==1&&(e[u]=[]),e[u][e[u].length]=f):a==1?e[u]=f:a==2?e[u]=[e[u],f]:e[u][e[u].length]=f};So.ObjTree.prototype.writeXML=function(e){var u=this.hash_to_xml(null,e);return this.xmlDecl+u};So.ObjTree.prototype.hash_to_xml=function(e,u){var a=[],f=[];for(var o in u)if(u.hasOwnProperty(o)){var p=u[o];o.charAt(0)!=this.attr_prefix?typeof p>"u"||p==null?a[a.length]="<"+o+" />":typeof p=="object"&&p.constructor==Array?a[a.length]=this.array_to_xml(o,p):typeof p=="object"?a[a.length]=this.hash_to_xml(o,p):a[a.length]=this.scalar_to_xml(o,p):f[f.length]=" "+o.substring(1)+'="'+this.xml_escape(p)+'"'}var d=f.join(""),y=a.join("");return typeof e>"u"||e==null||(a.length>0?y.match(/\n/)?y="<"+e+d+`>
`+y+"</"+e+`>
`:y="<"+e+d+">"+y+"</"+e+`>
`:y="<"+e+d+` />
`),y};So.ObjTree.prototype.array_to_xml=function(e,u){for(var a=[],f=0;f<u.length;f++){var o=u[f];typeof o>"u"||o==null?a[a.length]="<"+e+" />":typeof o=="object"&&o.constructor==Array?a[a.length]=this.array_to_xml(e,o):typeof o=="object"?a[a.length]=this.hash_to_xml(e,o):a[a.length]=this.scalar_to_xml(e,o)}return a.join("")};So.ObjTree.prototype.scalar_to_xml=function(e,u){return e=="#text"?this.xml_escape(u):"<"+e+">"+this.xml_escape(u)+"</"+e+`>
`};So.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var $T=function(e){return new So.ObjTree().parseXML(e)},WT=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Ug=globalThis&&globalThis.__assign||function(){return Ug=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Ug.apply(this,arguments)},ph=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},Xi;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(Xi||(Xi={}));var tO=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],c_=["properties","startPoint","endPoint","pointsList"];function f_(e){var u=e?c_.concat(e):c_;return function(a){function f(o){var p={};return typeof o=="string"?o:Array.isArray(o)?o.map(function(d){return f(d)}):(Object.entries(o).forEach(function(d){var y=ph(d,2),g=y[0],E=y[1];typeof E!="object"?g.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(g)?p[g]=E:p["-"+g]=E:u.includes(g)?p["-"+g]=f(E):p[g]=f(E)}),p)}return f(a)}}function Qd(e){var u={};return Object.entries(e).forEach(function(a){var f=ph(a,2),o=f[0],p=f[1];o.indexOf("-")===0?u[o.substring(1)]=Jd(p):typeof p=="string"?u[o]=p:Object.prototype.toString.call(p)==="[object Object]"?u[o]=Qd(p):Array.isArray(p)?u[o]=p.map(function(d){return Qd(d)}):u[o]=p}),u}function YT(e,u,a){var f=new Map;u.nodes.forEach(function(p){var d,y={"-id":p.id};if(!((d=p.text)===null||d===void 0)&&d.value&&(y["-name"]=p.text.value),p.properties){var g=f_(a)(p.properties);Object.assign(y,g)}f.set(p.id,y),e[p.type]?Array.isArray(e[p.type])?e[p.type].push(y):e[p.type]=[e[p.type],y]:e[p.type]=y});var o=u.edges.map(function(p){var d,y,g=f.get(p.targetNodeId);g["bpmn:incoming"]?Array.isArray(g["bpmn:incoming"])?g["bpmn:incoming"].push(p.id):g["bpmn:incoming"]=[g["bpmn:incoming"],p.id]:g["bpmn:incoming"]=p.id;var E={"-id":p.id,"-sourceRef":p.sourceNodeId,"-targetRef":p.targetNodeId};if(!((d=p.text)===null||d===void 0)&&d.value&&(E["-name"]=(y=p.text)===null||y===void 0?void 0:y.value),p.properties){var _=f_(a)(p.properties);Object.assign(E,_)}return E});u.edges.forEach(function(p){var d=f.get(p.sourceNodeId);d["bpmn:outgoing"]?Array.isArray(d["bpmn:outgoing"])?d["bpmn:outgoing"].push(p.id):d["bpmn:outgoing"]=[d["bpmn:outgoing"],p.id]:d["bpmn:outgoing"]=p.id}),e[Xi.FLOW]=o}function KT(e,u){e["bpmndi:BPMNEdge"]=u.edges.map(function(a){var f,o=a.id,p=a.pointsList.map(function(y){var g=y.x,E=y.y;return{"-x":g,"-y":E}}),d={"-id":o+"_di","-bpmnElement":o,"di:waypoint":p};return!((f=a.text)===null||f===void 0)&&f.value&&(d["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":a.text.x-a.text.value.length*10/2,"-y":a.text.y-7,"-width":a.text.value.length*10,"-height":14}}),d}),e["bpmndi:BPMNShape"]=u.nodes.map(function(a){var f,o=a.id,p=100,d=80,y=a.x,g=a.y,E=pu.shapeConfigMap.get(a.type);E&&(p=E.width,d=E.height),y-=p/2,g-=d/2;var _={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":y,"-y":g,"-width":p,"-height":d}};return!((f=a.text)===null||f===void 0)&&f.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":a.text.x-a.text.value.length*10/2,"-y":a.text.y-7,"-width":a.text.value.length*10,"-height":14}}),_})}function qT(e){var u=[],a=[],f=e["bpmn:definitions"];if(f){var o=f["bpmn:process"];Object.keys(o).forEach(function(p){if(p.indexOf("bpmn:")===0){var d=o[p];if(p===Xi.FLOW){var y=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];a=JT(d,y)}else{var g=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];u=u.concat(ZT(d,g,p))}}})}return{nodes:u,edges:a}}function ZT(e,u,a){var f=[];if(Array.isArray(e))e.forEach(function(d){var y;Array.isArray(u)?y=u.find(function(E){return E["-bpmnElement"]===d["-id"]}):y=u;var g=l_(y,a,d);f.push(g)});else{var o=void 0;Array.isArray(u)?o=u.find(function(d){return d["-bpmnElement"]===e["-id"]}):o=u;var p=l_(o,a,e);f.push(p)}return f}function l_(e,u,a){var f=Number(e["dc:Bounds"]["-x"]),o=Number(e["dc:Bounds"]["-y"]),p=a["-name"],d=pu.shapeConfigMap.get(u);d&&(f+=d.width/2,o+=d.height/2);var y;Object.entries(a).forEach(function(T){var P=ph(T,2),A=P[0],N=P[1];tO.indexOf(A)===-1&&(y||(y={}),y[A]=N)}),y&&(y=Qd(y));var g;if(p&&(g={x:f,y:o,value:p},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var E=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(E["-x"])+Number(E["-width"])/2,g.y=Number(E["-y"])+Number(E["-height"])/2}var _={id:e["-bpmnElement"],type:u,x:f,y:o,properties:y};return g&&(_.text=g),_}function JT(e,u){var a=[];if(Array.isArray(e))e.forEach(function(o){var p;Array.isArray(u)?p=u.find(function(d){return d["-bpmnElement"]===o["-id"]}):p=u,a.push(p_(p,o))});else{var f=void 0;Array.isArray(u)?f=u.find(function(o){return o["-bpmnElement"]===e["-id"]}):f=u,a.push(p_(f,e))}return a}function p_(e,u){var a,f=u["-name"];if(f){var o=e["bpmndi:BPMNLabel"]["dc:Bounds"],p=0;f.split(`
`).forEach(function(g){p<g.length&&(p=g.length)}),a={value:f,x:Number(o["-x"])+p*10/2,y:Number(o["-y"])+7}}var d;Object.entries(u).forEach(function(g){var E=ph(g,2),_=E[0],T=E[1];tO.indexOf(_)===-1&&(d||(d={}),d[_]=T)}),d&&(d=Qd(d));var y={id:u["-id"],type:Xi.FLOW,pointsList:e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),sourceNodeId:u["-sourceRef"],targetNodeId:u["-targetRef"],properties:d};return a&&(y.text=a),y}var pu=function(){function e(u){var a=this,f=u.lf;this.adapterOut=function(o,p){var d=Ug({},a.processAttributes);YT(d,o,p);var y={"-id":"BPMNPlane_1","-bpmnElement":d["-id"]};KT(y,o);var g=a.definitionAttributes;g["bpmn:process"]=d,g["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":y};var E={"bpmn:definitions":g};return E},this.adapterIn=function(o){if(o)return qT(o)},f.adapterIn=function(o){return a.adapterIn(o)},f.adapterOut=function(o,p){return a.adapterOut(o,p)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+s_()},this.definitionAttributes={"-id":"Definitions_"+s_(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(u,a){e.shapeConfigMap.set(u,a)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();pu.shapeConfigMap.set(Xi.START,{width:n_.width,height:n_.height});pu.shapeConfigMap.set(Xi.END,{width:o_.width,height:o_.height});pu.shapeConfigMap.set(Xi.GATEWAY,{width:i_.width,height:i_.height});pu.shapeConfigMap.set(Xi.SYSTEM,{width:a_.width,height:a_.height});pu.shapeConfigMap.set(Xi.USER,{width:u_.width,height:u_.height});(function(e){WT(u,e);function u(a){var f=e.call(this,a)||this;f.adapterXmlIn=function(p){var d=$T(p);return f.adapterIn(d)},f.adapterXmlOut=function(p,d){var y=f.adapterOut(p,d);return VT(y)};var o=a.lf;return o.adapterIn=f.adapterXmlIn,o.adapterOut=f.adapterXmlOut,f}return u.pluginName="bpmnXmlAdapter",u})(pu);var d_=globalThis&&globalThis.__assign||function(){return d_=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},d_.apply(this,arguments)};globalThis&&globalThis.__read;var QT=typeof global=="object"&&global&&global.Object===Object&&global;const rO=QT;var eA=typeof self=="object"&&self&&self.Object===Object&&self,tA=rO||eA||Function("return this")();const mi=tA;var rA=mi.Symbol;const Hc=rA;var nO=Object.prototype,nA=nO.hasOwnProperty,oA=nO.toString,bl=Hc?Hc.toStringTag:void 0;function iA(e){var u=nA.call(e,bl),a=e[bl];try{e[bl]=void 0;var f=!0}catch{}var o=oA.call(e);return f&&(u?e[bl]=a:delete e[bl]),o}var aA=Object.prototype,uA=aA.toString;function sA(e){return uA.call(e)}var cA="[object Null]",fA="[object Undefined]",h_=Hc?Hc.toStringTag:void 0;function Yc(e){return e==null?e===void 0?fA:cA:h_&&h_ in Object(e)?iA(e):sA(e)}function Kc(e){return e!=null&&typeof e=="object"}var lA="[object Symbol]";function pA(e){return typeof e=="symbol"||Kc(e)&&Yc(e)==lA}var dA=Array.isArray;const nm=dA;var hA=/\s/;function yA(e){for(var u=e.length;u--&&hA.test(e.charAt(u)););return u}var vA=/^\s+/;function gA(e){return e&&e.slice(0,yA(e)+1).replace(vA,"")}function Oa(e){var u=typeof e;return e!=null&&(u=="object"||u=="function")}var y_=0/0,mA=/^[-+]0x[0-9a-f]+$/i,bA=/^0b[01]+$/i,_A=/^0o[0-7]+$/i,EA=parseInt;function v_(e){if(typeof e=="number")return e;if(pA(e))return y_;if(Oa(e)){var u=typeof e.valueOf=="function"?e.valueOf():e;e=Oa(u)?u+"":u}if(typeof e!="string")return e===0?e:+e;e=gA(e);var a=bA.test(e);return a||_A.test(e)?EA(e.slice(2),a?2:8):mA.test(e)?y_:+e}var OA="[object AsyncFunction]",wA="[object Function]",xA="[object GeneratorFunction]",SA="[object Proxy]";function oO(e){if(!Oa(e))return!1;var u=Yc(e);return u==wA||u==xA||u==OA||u==SA}var TA=mi["__core-js_shared__"];const jg=TA;var g_=function(){var e=/[^.]+$/.exec(jg&&jg.keys&&jg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function AA(e){return!!g_&&g_ in e}var PA=Function.prototype,jA=PA.toString;function ds(e){if(e!=null){try{return jA.call(e)}catch{}try{return e+""}catch{}}return""}var NA=/[\\^$.*+?()[\]{}|]/g,MA=/^\[object .+?Constructor\]$/,RA=Function.prototype,CA=Object.prototype,DA=RA.toString,IA=CA.hasOwnProperty,kA=RegExp("^"+DA.call(IA).replace(NA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function LA(e){if(!Oa(e)||AA(e))return!1;var u=oO(e)?kA:MA;return u.test(ds(e))}function FA(e,u){return e==null?void 0:e[u]}function hs(e,u){var a=FA(e,u);return LA(a)?a:void 0}var BA=hs(mi,"WeakMap");const zg=BA;var m_=Object.create,GA=function(){function e(){}return function(u){if(!Oa(u))return{};if(m_)return m_(u);e.prototype=u;var a=new e;return e.prototype=void 0,a}}();const UA=GA;function zA(e,u){var a=-1,f=e.length;for(u||(u=Array(f));++a<f;)u[a]=e[a];return u}var HA=function(){try{var e=hs(Object,"defineProperty");return e({},"",{}),e}catch{}}();const b_=HA;function XA(e,u){for(var a=-1,f=e==null?0:e.length;++a<f&&u(e[a],a,e)!==!1;);return e}var VA=9007199254740991,$A=/^(?:0|[1-9]\d*)$/;function WA(e,u){var a=typeof e;return u=u??VA,!!u&&(a=="number"||a!="symbol"&&$A.test(e))&&e>-1&&e%1==0&&e<u}function iO(e,u,a){u=="__proto__"&&b_?b_(e,u,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[u]=a}function aO(e,u){return e===u||e!==e&&u!==u}var YA=Object.prototype,KA=YA.hasOwnProperty;function uO(e,u,a){var f=e[u];(!(KA.call(e,u)&&aO(f,a))||a===void 0&&!(u in e))&&iO(e,u,a)}function dh(e,u,a,f){var o=!a;a||(a={});for(var p=-1,d=u.length;++p<d;){var y=u[p],g=f?f(a[y],e[y],y,a,e):void 0;g===void 0&&(g=e[y]),o?iO(a,y,g):uO(a,y,g)}return a}var qA=9007199254740991;function sO(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qA}function cO(e){return e!=null&&sO(e.length)&&!oO(e)}var ZA=Object.prototype;function om(e){var u=e&&e.constructor,a=typeof u=="function"&&u.prototype||ZA;return e===a}function JA(e,u){for(var a=-1,f=Array(e);++a<e;)f[a]=u(a);return f}var QA="[object Arguments]";function __(e){return Kc(e)&&Yc(e)==QA}var fO=Object.prototype,eP=fO.hasOwnProperty,tP=fO.propertyIsEnumerable,rP=__(function(){return arguments}())?__:function(e){return Kc(e)&&eP.call(e,"callee")&&!tP.call(e,"callee")};const nP=rP;function oP(){return!1}var lO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E_=lO&&typeof module=="object"&&module&&!module.nodeType&&module,iP=E_&&E_.exports===lO,O_=iP?mi.Buffer:void 0,aP=O_?O_.isBuffer:void 0,uP=aP||oP;const pO=uP;var sP="[object Arguments]",cP="[object Array]",fP="[object Boolean]",lP="[object Date]",pP="[object Error]",dP="[object Function]",hP="[object Map]",yP="[object Number]",vP="[object Object]",gP="[object RegExp]",mP="[object Set]",bP="[object String]",_P="[object WeakMap]",EP="[object ArrayBuffer]",OP="[object DataView]",wP="[object Float32Array]",xP="[object Float64Array]",SP="[object Int8Array]",TP="[object Int16Array]",AP="[object Int32Array]",PP="[object Uint8Array]",jP="[object Uint8ClampedArray]",NP="[object Uint16Array]",MP="[object Uint32Array]",dn={};dn[wP]=dn[xP]=dn[SP]=dn[TP]=dn[AP]=dn[PP]=dn[jP]=dn[NP]=dn[MP]=!0;dn[sP]=dn[cP]=dn[EP]=dn[fP]=dn[OP]=dn[lP]=dn[pP]=dn[dP]=dn[hP]=dn[yP]=dn[vP]=dn[gP]=dn[mP]=dn[bP]=dn[_P]=!1;function RP(e){return Kc(e)&&sO(e.length)&&!!dn[Yc(e)]}function im(e){return function(u){return e(u)}}var dO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jl=dO&&typeof module=="object"&&module&&!module.nodeType&&module,CP=jl&&jl.exports===dO,Ng=CP&&rO.process,DP=function(){try{var e=jl&&jl.require&&jl.require("util").types;return e||Ng&&Ng.binding&&Ng.binding("util")}catch{}}();const Xc=DP;var w_=Xc&&Xc.isTypedArray,IP=w_?im(w_):RP;const kP=IP;var LP=Object.prototype,FP=LP.hasOwnProperty;function hO(e,u){var a=nm(e),f=!a&&nP(e),o=!a&&!f&&pO(e),p=!a&&!f&&!o&&kP(e),d=a||f||o||p,y=d?JA(e.length,String):[],g=y.length;for(var E in e)(u||FP.call(e,E))&&!(d&&(E=="length"||o&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||WA(E,g)))&&y.push(E);return y}function yO(e,u){return function(a){return e(u(a))}}var BP=yO(Object.keys,Object);const GP=BP;var UP=Object.prototype,zP=UP.hasOwnProperty;function HP(e){if(!om(e))return GP(e);var u=[];for(var a in Object(e))zP.call(e,a)&&a!="constructor"&&u.push(a);return u}function am(e){return cO(e)?hO(e):HP(e)}function XP(e){var u=[];if(e!=null)for(var a in Object(e))u.push(a);return u}var VP=Object.prototype,$P=VP.hasOwnProperty;function WP(e){if(!Oa(e))return XP(e);var u=om(e),a=[];for(var f in e)f=="constructor"&&(u||!$P.call(e,f))||a.push(f);return a}function um(e){return cO(e)?hO(e,!0):WP(e)}var YP=hs(Object,"create");const Rl=YP;function KP(){this.__data__=Rl?Rl(null):{},this.size=0}function qP(e){var u=this.has(e)&&delete this.__data__[e];return this.size-=u?1:0,u}var ZP="__lodash_hash_undefined__",JP=Object.prototype,QP=JP.hasOwnProperty;function ej(e){var u=this.__data__;if(Rl){var a=u[e];return a===ZP?void 0:a}return QP.call(u,e)?u[e]:void 0}var tj=Object.prototype,rj=tj.hasOwnProperty;function nj(e){var u=this.__data__;return Rl?u[e]!==void 0:rj.call(u,e)}var oj="__lodash_hash_undefined__";function ij(e,u){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Rl&&u===void 0?oj:u,this}function cs(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}cs.prototype.clear=KP;cs.prototype.delete=qP;cs.prototype.get=ej;cs.prototype.has=nj;cs.prototype.set=ij;function aj(){this.__data__=[],this.size=0}function hh(e,u){for(var a=e.length;a--;)if(aO(e[a][0],u))return a;return-1}var uj=Array.prototype,sj=uj.splice;function cj(e){var u=this.__data__,a=hh(u,e);if(a<0)return!1;var f=u.length-1;return a==f?u.pop():sj.call(u,a,1),--this.size,!0}function fj(e){var u=this.__data__,a=hh(u,e);return a<0?void 0:u[a][1]}function lj(e){return hh(this.__data__,e)>-1}function pj(e,u){var a=this.__data__,f=hh(a,e);return f<0?(++this.size,a.push([e,u])):a[f][1]=u,this}function wa(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}wa.prototype.clear=aj;wa.prototype.delete=cj;wa.prototype.get=fj;wa.prototype.has=lj;wa.prototype.set=pj;var dj=hs(mi,"Map");const Cl=dj;function hj(){this.size=0,this.__data__={hash:new cs,map:new(Cl||wa),string:new cs}}function yj(e){var u=typeof e;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?e!=="__proto__":e===null}function yh(e,u){var a=e.__data__;return yj(u)?a[typeof u=="string"?"string":"hash"]:a.map}function vj(e){var u=yh(this,e).delete(e);return this.size-=u?1:0,u}function gj(e){return yh(this,e).get(e)}function mj(e){return yh(this,e).has(e)}function bj(e,u){var a=yh(this,e),f=a.size;return a.set(e,u),this.size+=a.size==f?0:1,this}function qc(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}qc.prototype.clear=hj;qc.prototype.delete=vj;qc.prototype.get=gj;qc.prototype.has=mj;qc.prototype.set=bj;function vO(e,u){for(var a=-1,f=u.length,o=e.length;++a<f;)e[o+a]=u[a];return e}var _j=yO(Object.getPrototypeOf,Object);const gO=_j;function Ej(){this.__data__=new wa,this.size=0}function Oj(e){var u=this.__data__,a=u.delete(e);return this.size=u.size,a}function wj(e){return this.__data__.get(e)}function xj(e){return this.__data__.has(e)}var Sj=200;function Tj(e,u){var a=this.__data__;if(a instanceof wa){var f=a.__data__;if(!Cl||f.length<Sj-1)return f.push([e,u]),this.size=++a.size,this;a=this.__data__=new qc(f)}return a.set(e,u),this.size=a.size,this}function Zc(e){var u=this.__data__=new wa(e);this.size=u.size}Zc.prototype.clear=Ej;Zc.prototype.delete=Oj;Zc.prototype.get=wj;Zc.prototype.has=xj;Zc.prototype.set=Tj;function Aj(e,u){return e&&dh(u,am(u),e)}function Pj(e,u){return e&&dh(u,um(u),e)}var mO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,x_=mO&&typeof module=="object"&&module&&!module.nodeType&&module,jj=x_&&x_.exports===mO,S_=jj?mi.Buffer:void 0,T_=S_?S_.allocUnsafe:void 0;function Nj(e,u){if(u)return e.slice();var a=e.length,f=T_?T_(a):new e.constructor(a);return e.copy(f),f}function Mj(e,u){for(var a=-1,f=e==null?0:e.length,o=0,p=[];++a<f;){var d=e[a];u(d,a,e)&&(p[o++]=d)}return p}function bO(){return[]}var Rj=Object.prototype,Cj=Rj.propertyIsEnumerable,A_=Object.getOwnPropertySymbols,Dj=A_?function(e){return e==null?[]:(e=Object(e),Mj(A_(e),function(u){return Cj.call(e,u)}))}:bO;const sm=Dj;function Ij(e,u){return dh(e,sm(e),u)}var kj=Object.getOwnPropertySymbols,Lj=kj?function(e){for(var u=[];e;)vO(u,sm(e)),e=gO(e);return u}:bO;const _O=Lj;function Fj(e,u){return dh(e,_O(e),u)}function EO(e,u,a){var f=u(e);return nm(e)?f:vO(f,a(e))}function Bj(e){return EO(e,am,sm)}function Gj(e){return EO(e,um,_O)}var Uj=hs(mi,"DataView");const Hg=Uj;var zj=hs(mi,"Promise");const Xg=zj;var Hj=hs(mi,"Set");const Vg=Hj;var P_="[object Map]",Xj="[object Object]",j_="[object Promise]",N_="[object Set]",M_="[object WeakMap]",R_="[object DataView]",Vj=ds(Hg),$j=ds(Cl),Wj=ds(Xg),Yj=ds(Vg),Kj=ds(zg),is=Yc;(Hg&&is(new Hg(new ArrayBuffer(1)))!=R_||Cl&&is(new Cl)!=P_||Xg&&is(Xg.resolve())!=j_||Vg&&is(new Vg)!=N_||zg&&is(new zg)!=M_)&&(is=function(e){var u=Yc(e),a=u==Xj?e.constructor:void 0,f=a?ds(a):"";if(f)switch(f){case Vj:return R_;case $j:return P_;case Wj:return j_;case Yj:return N_;case Kj:return M_}return u});const cm=is;var qj=Object.prototype,Zj=qj.hasOwnProperty;function Jj(e){var u=e.length,a=new e.constructor(u);return u&&typeof e[0]=="string"&&Zj.call(e,"index")&&(a.index=e.index,a.input=e.input),a}var Qj=mi.Uint8Array;const C_=Qj;function fm(e){var u=new e.constructor(e.byteLength);return new C_(u).set(new C_(e)),u}function eN(e,u){var a=u?fm(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}var tN=/\w*$/;function rN(e){var u=new e.constructor(e.source,tN.exec(e));return u.lastIndex=e.lastIndex,u}var D_=Hc?Hc.prototype:void 0,I_=D_?D_.valueOf:void 0;function nN(e){return I_?Object(I_.call(e)):{}}function oN(e,u){var a=u?fm(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var iN="[object Boolean]",aN="[object Date]",uN="[object Map]",sN="[object Number]",cN="[object RegExp]",fN="[object Set]",lN="[object String]",pN="[object Symbol]",dN="[object ArrayBuffer]",hN="[object DataView]",yN="[object Float32Array]",vN="[object Float64Array]",gN="[object Int8Array]",mN="[object Int16Array]",bN="[object Int32Array]",_N="[object Uint8Array]",EN="[object Uint8ClampedArray]",ON="[object Uint16Array]",wN="[object Uint32Array]";function xN(e,u,a){var f=e.constructor;switch(u){case dN:return fm(e);case iN:case aN:return new f(+e);case hN:return eN(e,a);case yN:case vN:case gN:case mN:case bN:case _N:case EN:case ON:case wN:return oN(e,a);case uN:return new f;case sN:case lN:return new f(e);case cN:return rN(e);case fN:return new f;case pN:return nN(e)}}function SN(e){return typeof e.constructor=="function"&&!om(e)?UA(gO(e)):{}}var TN="[object Map]";function AN(e){return Kc(e)&&cm(e)==TN}var k_=Xc&&Xc.isMap,PN=k_?im(k_):AN;const jN=PN;var NN="[object Set]";function MN(e){return Kc(e)&&cm(e)==NN}var L_=Xc&&Xc.isSet,RN=L_?im(L_):MN;const CN=RN;var DN=1,IN=2,kN=4,OO="[object Arguments]",LN="[object Array]",FN="[object Boolean]",BN="[object Date]",GN="[object Error]",wO="[object Function]",UN="[object GeneratorFunction]",zN="[object Map]",HN="[object Number]",xO="[object Object]",XN="[object RegExp]",VN="[object Set]",$N="[object String]",WN="[object Symbol]",YN="[object WeakMap]",KN="[object ArrayBuffer]",qN="[object DataView]",ZN="[object Float32Array]",JN="[object Float64Array]",QN="[object Int8Array]",eM="[object Int16Array]",tM="[object Int32Array]",rM="[object Uint8Array]",nM="[object Uint8ClampedArray]",oM="[object Uint16Array]",iM="[object Uint32Array]",un={};un[OO]=un[LN]=un[KN]=un[qN]=un[FN]=un[BN]=un[ZN]=un[JN]=un[QN]=un[eM]=un[tM]=un[zN]=un[HN]=un[xO]=un[XN]=un[VN]=un[$N]=un[WN]=un[rM]=un[nM]=un[oM]=un[iM]=!0;un[GN]=un[wO]=un[YN]=!1;function Vd(e,u,a,f,o,p){var d,y=u&DN,g=u&IN,E=u&kN;if(a&&(d=o?a(e,f,o,p):a(e)),d!==void 0)return d;if(!Oa(e))return e;var _=nm(e);if(_){if(d=Jj(e),!y)return zA(e,d)}else{var T=cm(e),P=T==wO||T==UN;if(pO(e))return Nj(e,y);if(T==xO||T==OO||P&&!o){if(d=g||P?{}:SN(e),!y)return g?Fj(e,Pj(d,e)):Ij(e,Aj(d,e))}else{if(!un[T])return o?e:{};d=xN(e,T,y)}}p||(p=new Zc);var A=p.get(e);if(A)return A;p.set(e,d),CN(e)?e.forEach(function(I){d.add(Vd(I,u,a,I,e,p))}):jN(e)&&e.forEach(function(I,G){d.set(G,Vd(I,u,a,G,e,p))});var N=E?g?Gj:Bj:g?um:am,M=_?void 0:N(e);return XA(M||e,function(I,G){M&&(G=I,I=e[G]),uO(d,G,Vd(I,u,a,G,e,p))}),d}var aM=1,uM=4;function Gd(e){return Vd(e,aM|uM)}var sM=function(){return mi.Date.now()};const Mg=sM;var cM="Expected a function",fM=Math.max,lM=Math.min;function pM(e,u,a){var f,o,p,d,y,g,E=0,_=!1,T=!1,P=!0;if(typeof e!="function")throw new TypeError(cM);u=v_(u)||0,Oa(a)&&(_=!!a.leading,T="maxWait"in a,p=T?fM(v_(a.maxWait)||0,u):p,P="trailing"in a?!!a.trailing:P);function A(ne){var ue=f,$=o;return f=o=void 0,E=ne,d=e.apply($,ue),d}function N(ne){return E=ne,y=setTimeout(G,u),_?A(ne):d}function M(ne){var ue=ne-g,$=ne-E,B=u-ue;return T?lM(B,p-$):B}function I(ne){var ue=ne-g,$=ne-E;return g===void 0||ue>=u||ue<0||T&&$>=p}function G(){var ne=Mg();if(I(ne))return W(ne);y=setTimeout(G,M(ne))}function W(ne){return y=void 0,P&&f?A(ne):(f=o=void 0,d)}function de(){y!==void 0&&clearTimeout(y),E=0,f=g=o=y=void 0}function xe(){return y===void 0?d:W(Mg())}function ce(){var ne=Mg(),ue=I(ne);if(f=arguments,o=this,g=ne,ue){if(y===void 0)return N(g);if(T)return clearTimeout(y),y=setTimeout(G,u),A(g)}return y===void 0&&(y=setTimeout(G,u)),d}return ce.cancel=de,ce.flush=xe,ce}var dM="Expected a function";function hM(e,u,a){var f=!0,o=!0;if(typeof e!="function")throw new TypeError(dM);return Oa(a)&&(f="leading"in a?!!a.leading:f,o="trailing"in a?!!a.trailing:o),pM(e,u,{leading:f,maxWait:u,trailing:o})}var Vc;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(Vc||(Vc={}));var yM=function(e,u,a,f){f===void 0&&(f=0);var o=gM(e,u,a);return o<=f};function F_(e){return e*e}function Rg(e,u){return F_(e.x-u.x)+F_(e.y-u.y)}var vM=function(e,u,a){var f=Rg(u,a);if(f===0)return Rg(e,u);var o=((e.x-u.x)*(a.x-u.x)+(e.y-u.y)*(a.y-u.y))/f;return o=Math.max(0,Math.min(1,o)),Rg(e,{x:u.x+o*(a.x-u.x),y:u.y+o*(a.y-u.y)})},gM=function(e,u,a){return Math.sqrt(vM(e,u,a))},mM=function(e){var u=e.x,a=e.y,f=e.width,o=e.height,p={minX:u-f/2,minY:a-o/2,maxX:u+f/2,maxY:a+o/2,x:u,y:a,width:f,height:o,centerX:u,centerY:a};return p},bM=function(e,u){var a;return e.x===u.x?a=Vc.VERTICAL:e.y===u.y&&(a=Vc.HORIZONTAL),a},_M=function(e,u,a){var f=mM(e),o=bM(u,a),p=Math.max(u.x,a.x),d=Math.min(u.x,a.x),y=Math.max(u.y,a.y),g=Math.min(u.y,a.y),E=e.x,_=e.y,T=e.width,P=e.height;if(o===Vc.HORIZONTAL){if(p>=f.maxX&&d<=f.minX)return{startCrossPoint:{x:u.x>a.x?E+T/2:E-T/2,y:u.y},endCrossPoint:{x:u.x>a.x?E-T/2:E+T/2,y:u.y}}}else if(o===Vc.VERTICAL&&y>=f.maxY&&g<=f.minY)return{startCrossPoint:{x:u.x,y:u.y>a.y?_+P/2:_-P/2},endCrossPoint:{x:u.x,y:u.y>a.y?_-P/2:_+P/2}}},EM=function(e,u,a){a===void 0&&(a=0);for(var f=e.x,o=e.y,p=u.pointsList,d=0;d<p.length-1;d++)if(yM({x:f,y:o},p[d],p[d+1],a)){var y=_M(e,p[d],p[d+1]);if(y)return{crossIndex:d+1,crossPoints:y}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},OM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},B_=globalThis&&globalThis.__spread||function(){for(var e=[],u=0;u<arguments.length;u++)e=e.concat(OM(arguments[u]));return e},CI=function(){function e(u){var a=u.lf;this._lf=a,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return e.prototype.eventHandler=function(){var u=this;this.dndAdd&&this._lf.on("node:dnd-add",function(a){var f=a.data;u.insetNode(f)}),this.dropAdd&&this._lf.on("node:drop",function(a){for(var f=a.data,o=u._lf.graphModel.edges,p=f.id,d=!0,y=0;y<o.length;y++)if(o[y].sourceNodeId===p||o[y].targetNodeId===p){d=!1;break}d&&u.insetNode(f)})},e.prototype.checkRuleBeforeInsetNode=function(u,a,f,o,p){var d=this._lf.getNodeModelById(u),y=this._lf.getNodeModelById(a),g=d.getAnchorInfo(f),E=y.getAnchorInfo(o),_=d.isAllowConnectedAsSource(p,g,E),T=y.isAllowConnectedAsTarget(p,g,E),P=Ht.formateAnchorConnectValidateData(_),A=P.isAllPass,N=P.msg,M=Ht.formateAnchorConnectValidateData(T),I=M.isAllPass,G=M.msg;return{isPass:A&&I,sourceMsg:N,targetMsg:G}},e.prototype.insetNode=function(u){for(var a=this,f=this._lf.graphModel.edges,o=this._lf.getNodeModelById(u.id),p=0;p<f.length;p++){var d=EM(o,f[p],this.deviation),y=d.crossIndex,g=d.crossPoints;if(y>=0){var E=f[p],_=E.sourceNodeId,T=E.targetNodeId,P=E.id,A=E.type,N=E.pointsList,M=E.sourceAnchorId,I=E.targetAnchorId,G=Gd(N[0]),W=Gd(g.startCrossPoint);this._lf.deleteEdge(P);var de=this.checkRuleBeforeInsetNode(_,T,M,I,u);if(this._lf.addEdge({type:A,sourceNodeId:_,targetNodeId:u.id,startPoint:G,endPoint:W,pointsList:B_(N.slice(0,y),[g.startCrossPoint])}),this._lf.addEdge({type:A,sourceNodeId:u.id,targetNodeId:T,startPoint:Gd(g.endCrossPoint),endPoint:Gd(N[N.length-1]),pointsList:B_([g.endCrossPoint],N.slice(y))}),de.isPass)break;this._lf.graphModel.eventCenter.emit(Ht.EventType.CONNECTION_NOT_ALLOWED,{data:u,msg:de.targetMsg||de.sourceMsg}),setTimeout(function(){a._lf.undo()},200);break}}},e.pluginName="insertNodeInPolyline",e}(),wM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},xM=globalThis&&globalThis.__spread||function(){for(var e=[],u=0;u<arguments.length;u++)e=e.concat(wM(arguments[u]));return e},DI=function(){function e(u){var a=this,f=u.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){a.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){a.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){a.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){a.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){a.lf.redo()}}],this.lf=f}return e.prototype.render=function(u,a){this.destroy();var f=this.getControlTool();this.toolEl=f,a.appendChild(f),this.domContainer=a},e.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},e.prototype.addItem=function(u){this.controlItems.push(u)},e.prototype.removeItem=function(u){var a=this.controlItems.findIndex(function(f){return f.key===u});return this.controlItems.splice(a,1)[0]},e.prototype.getControlTool=function(){var u=this,a="lf-control-item",f="lf-control-item disabled",o=document.createElement("div"),p=[];return o.className="lf-control",this.controlItems.forEach(function(d){var y=document.createElement("div"),g=document.createElement("i"),E=document.createElement("span");switch(y.className=f,d.onClick&&(y.onclick=d.onClick.bind(null,u.lf)),d.onMouseEnter&&(y.onmouseenter=d.onMouseEnter.bind(null,u.lf)),d.onMouseLeave&&(y.onmouseleave=d.onMouseLeave.bind(null,u.lf)),g.className=d.iconClass,E.className="lf-control-text",E.title=d.title,E.innerText=d.text,y.append(g,E),d.text){case"上一步":u.lf.on("history:change",function(_){var T=_.data.undoAble;y.className=T?a:f});break;case"下一步":u.lf.on("history:change",function(_){var T=_.data.redoAble;y.className=T?a:f});break;default:y.className=a;break}p.push(y)}),o.append.apply(o,xM(p)),o},e.pluginName="control",e}(),SM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},TM=globalThis&&globalThis.__spread||function(){for(var e=[],u=0;u<arguments.length;u++)e=e.concat(SM(arguments[u]));return e},_l="lf:defaultNodeMenu",El="lf:defaultEdgeMenu",Ol="lf:defaultGraphMenu",G_="lf:defaultSelectionMenu",II=function(){function e(u){var a=this,f=u.lf;this.__menuDOM=document.createElement("ul"),this.lf=f,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){a.setMenuConfig(o)},this.lf.addMenuConfig=function(o){a.addMenuConfig(o)},this.lf.setMenuByType=function(o){a.setMenuByType(o)}}return e.prototype.init=function(){var u=this,a=[{text:"删除",callback:function(p){u.lf.deleteNode(p.id)}},{text:"编辑文本",callback:function(p){u.lf.graphModel.editText(p.id)}},{text:"复制",callback:function(p){u.lf.cloneNode(p.id)}}];this.menuTypeMap.set(_l,a);var f=[{text:"删除",callback:function(p){u.lf.deleteEdge(p.id)}},{text:"编辑文本",callback:function(p){u.lf.graphModel.editText(p.id)}}];this.menuTypeMap.set(El,f),this.menuTypeMap.set(Ol,[]);var o=[{text:"删除",callback:function(p){u.lf.clearSelectElements(),p.edges.forEach(function(d){return u.lf.deleteEdge(d.id)}),p.nodes.forEach(function(d){return u.lf.deleteNode(d.id)})}}];this.menuTypeMap.set(G_,o)},e.prototype.render=function(u,a){var f=this;this.__container=a,this.__currentData=null,this.__menuDOM.className="lf-menu",a.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var p=o.target;Array.from(p.classList).indexOf("lf-menu-item")===-1&&Array.from(p.classList).indexOf("lf-menu")===-1;)p=p.parentElement;Array.from(p.classList).indexOf("lf-menu-item")>-1?(p.onclickCallback(f.__currentData),f.__menuDOM.style.display="none",f.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(o){var p=o.data,d=o.position,y=d.domOverlayPosition,g=y.x,E=y.y,_=p.id,T=f.lf.graphModel.getNodeModelById(_),P=[],A=f.menuTypeMap.get(T.type);T&&T.menu&&Array.isArray(T.menu)?P=T.menu:A?P=A:P=f.menuTypeMap.get(_l),f.__currentData=p,f.showMenu(g,E,P)}),this.lf.on("edge:contextmenu",function(o){var p=o.data,d=o.position,y=d.domOverlayPosition,g=y.x,E=y.y,_=p.id,T=f.lf.graphModel.getEdgeModelById(_),P=[],A=f.menuTypeMap.get(T.type);T&&T.menu&&Array.isArray(T.menu)?P=T.menu:A?P=A:P=f.menuTypeMap.get(El),f.__currentData=p,f.showMenu(g,E,P)}),this.lf.on("blank:contextmenu",function(o){var p=o.position,d=f.menuTypeMap.get(Ol),y=p.domOverlayPosition,g=y.x,E=y.y;f.showMenu(g,E,d)}),this.lf.on("selection:contextmenu",function(o){var p=o.data,d=o.position,y=f.menuTypeMap.get(G_),g=d.domOverlayPosition,E=g.x,_=g.y;f.__currentData=p,f.showMenu(E,_,y)}),this.lf.on("node:mousedown",function(){f.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){f.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){f.__menuDOM.style.display="none"})},e.prototype.destroy=function(){var u;(u=this===null||this===void 0?void 0:this.__container)===null||u===void 0||u.removeChild(this.__menuDOM),this.__menuDOM=null},e.prototype.showMenu=function(u,a,f){if(!(!f||!f.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,TM(this.__getMenuDom(f))),o.children.length&&(o.style.display="block",o.style.top=a+"px",o.style.left=u+"px")}},e.prototype.setMenuByType=function(u){!u.type||!u.menu||this.menuTypeMap.set(u.type,u.menu)},e.prototype.__getMenuDom=function(u){var a=[];return u&&u.length>0&&u.forEach(function(f){var o=document.createElement("li");if(f.className?o.className="lf-menu-item "+f.className:o.className="lf-menu-item",f.icon===!0){var p=document.createElement("span");p.className="lf-menu-item-icon",o.appendChild(p)}var d=document.createElement("span");d.className="lf-menu-item-text",f.text&&(d.innerText=f.text),o.appendChild(d),o.onclickCallback=f.callback,a.push(o)}),a},e.prototype.setMenuConfig=function(u){u&&(u.nodeMenu!==void 0&&this.menuTypeMap.set(_l,u.nodeMenu?u.nodeMenu:[]),u.edgeMenu!==void 0&&this.menuTypeMap.set(El,u.edgeMenu?u.edgeMenu:[]),u.graphMenu!==void 0&&this.menuTypeMap.set(Ol,u.graphMenu?u.graphMenu:[]))},e.prototype.addMenuConfig=function(u){if(u){if(Array.isArray(u.nodeMenu)){var a=this.menuTypeMap.get(_l);this.menuTypeMap.set(_l,a.concat(u.nodeMenu))}if(Array.isArray(u.edgeMenu)){var a=this.menuTypeMap.get(El);this.menuTypeMap.set(El,a.concat(u.edgeMenu))}if(Array.isArray(u.graphMenu)){var a=this.menuTypeMap.get(Ol);this.menuTypeMap.set(Ol,a.concat(u.graphMenu))}}},e.prototype.changeMenuItem=function(u,a){if(u==="add")this.addMenuConfig(a);else if(u==="reset")this.setMenuConfig(a);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},e.pluginName="menu",e}();globalThis&&globalThis.__read;var kI=function(){function e(u){var a=this,f=u.lf;this.lf=f,this.lf.setPatternItems=function(o){a.setPatternItems(o)}}return e.prototype.render=function(u,a){var f=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=a;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){f.panelEl.appendChild(f.createDndItem(o))}),a.appendChild(this.panelEl),this.domContainer=a},e.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},e.prototype.setPatternItems=function(u){this.shapeList=u,this.domContainer&&this.render(this.lf,this.domContainer)},e.prototype.createDndItem=function(u){var a=this,f=document.createElement("div");f.className=u.className?"lf-dnd-item "+u.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",u.icon&&(o.style.backgroundImage="url("+u.icon+")"),f.appendChild(o),u.label){var p=document.createElement("div");p.innerText=u.label,p.className="lf-dnd-text",f.appendChild(p)}return f.onmousedown=function(){u.type&&a.lf.dnd.startDrag({type:u.type,properties:u.properties,text:u.text}),u.callback&&u.callback(a.lf,a.domContainer)},f.ondblclick=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:d,data:u})},f.onclick=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:d,data:u})},f.oncontextmenu=function(d){a.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:d,data:u})},f},e.pluginName="dndPanel",e}(),LI=function(){function e(u){var a=this,f=u.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(p){var d=a.lf.getPointByClient(p.clientX,p.clientY).domOverlayPosition,y=d.x,g=d.y;a.endPoint={x:y,y:g};var E=a.startPoint,_=E.x,T=E.y,P=a.wrapper.style,A=_,N=T,M=y-_,I=g-T;y<_&&(A=y,M=_-y),g<T&&(N=g,I=T-g),P.left=A+"px",P.top=N+"px",P.width=M+"px",P.height=I+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",a.__draw),document.removeEventListener("mouseup",a.__drawOff),a.wrapper.oncontextmenu=null,a.__domContainer.removeChild(a.wrapper);var p=a.startPoint,d=p.x,y=p.y,g=a.endPoint,E=g.x,_=g.y;if(!(Math.abs(E-d)<10&&Math.abs(_-y)<10)){var T=[Math.min(d,E),Math.min(y,_)],P=[Math.max(d,E),Math.max(y,_)],A=a.lf.graphModel.getAreaElement(T,P,a.isWholeEdge,a.isWholeNode,!0),N=a.lf.graphModel.group;A.forEach(function(M){(!N||!N.getNodeGroup(M.id))&&a.lf.selectElementById(M.id,!0)}),a.lf.emit("selection:selected",A)}},this.lf=f;var o=f.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,f.openSelectionSelect=function(){a.openSelectionSelect()},f.closeSelectionSelect=function(){a.closeSelectionSelect()}}return e.prototype.render=function(u,a){var f=this;this.__domContainer=a,u.on("blank:mousedown",function(o){var p=o.e,d=u.getEditConfig();if(!(!d.stopMoveGraph||f.__disabled)){var y=p.button===2;if(!y){var g=u.getPointByClient(p.clientX,p.clientY).domOverlayPosition,E=g.x,_=g.y;f.startPoint={x:E,y:_},f.endPoint={x:E,y:_};var T=document.createElement("div");T.className="lf-selection-select",T.oncontextmenu=function(A){A.preventDefault()},T.style.top=f.startPoint.y+"px",T.style.left=f.startPoint.x+"px",a.appendChild(T),f.wrapper=T,document.addEventListener("mousemove",f.__draw),document.addEventListener("mouseup",f.__drawOff)}}})},e.prototype.setSelectionSense=function(u,a){u===void 0&&(u=!0),a===void 0&&(a=!0),this.isWholeEdge=u,this.isWholeNode=a},e.prototype.openSelectionSelect=function(){var u=this.lf.getEditConfig().stopMoveGraph;u||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},e.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},e.prototype.open=function(){this.__disabled=!1},e.prototype.close=function(){this.__disabled=!0},e.pluginName="selectionSelect",e}(),AM=globalThis&&globalThis.__values||function(e){var u=typeof Symbol=="function"&&Symbol.iterator,a=u&&e[u],f=0;if(a)return a.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&f>=e.length&&(e=void 0),{value:e&&e[f++],done:!e}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},FI=function(){function e(u){var a=this,f=u.lf,o=u.LogicFlow,p=u.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(d,y){a.setView(),a.isShow||a.createMiniMap(d,y),a.isShow=!0},this.hide=function(){a.isShow&&a.removeMiniMap(),a.isShow=!1},this.reset=function(){a.lf.resetTranslate(),a.lf.resetZoom(),a.hide(),a.show()},this.startDrag=function(d){document.addEventListener("mousemove",a.drag),document.addEventListener("mouseup",a.drop),a.startPosition={x:d.x,y:d.y}},this.moveViewport=function(d,y){var g=a.viewport.style;a.viewPortTop=d,a.viewPortLeft=y,g.top=a.viewPortTop+"px",g.left=a.viewPortLeft+"px"},this.drag=function(d){a.dragging=!0;var y=a.viewPortTop+d.y-a.startPosition.y,g=a.viewPortLeft+d.x-a.startPosition.x;a.moveViewport(y,g),a.startPosition={x:d.x,y:d.y};var E=(a.viewPortLeft+a.viewPortWidth/2)/a.viewPortScale,_=(a.viewPortTop+a.viewPortHeight/2)/a.viewPortScale;a.lf.focusOn({coordinate:{x:E+a.resetDataX,y:_+a.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",a.drag),document.removeEventListener("mouseup",a.drop);var d=a.viewPortTop,y=a.viewPortLeft;a.viewPortLeft>a.width&&(y=a.width-a.viewPortWidth),a.viewPortTop>a.height&&(d=a.height-a.viewPortHeight),a.viewPortLeft<-a.width&&(y=0),a.viewPortTop<-a.height&&(d=0),a.moveViewport(d,y)},this.mapClick=function(d){if(a.dragging)a.dragging=!1;else{var y=d.layerX,g=d.layerY,E=y,_=g,T=a.lf.getGraphRawData(),P=a.getBounds(T),A=P.left,N=P.top,M=A+E/a.viewPortScale,I=N+_/a.viewPortScale;a.lf.focusOn({coordinate:{x:M,y:I}})}},this.lf=f,p&&p.MiniMap&&this.setOption(p),this.miniMapWidth=f.graphModel.width,this.miniMapHeight=f.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return e.prototype.render=function(u,a){var f=this;this.container=a,this.lf.on("history:change",function(){f.isShow&&f.setView()}),this.lf.on("graph:transform",hM(function(){f.isShow&&!f.dragging&&f.setView()},300))},e.prototype.init=function(u){this.disabledPlugins=this.disabledPlugins.concat(u.disabledPlugins||[])},e.prototype.setOption=function(u){var a=u.MiniMap,f=a.width,o=f===void 0?150:f,p=a.height,d=p===void 0?220:p,y=a.isShowHeader,g=y===void 0?!0:y,E=a.isShowCloseIcon,_=E===void 0?!0:E,T=a.leftPosition,P=T===void 0?0:T,A=a.topPosition,N=A===void 0?0:A,M=a.rightPosition,I=a.bottomPosition;this.width=o,this.height=d,this.isShowHeader=g,this.isShowCloseIcon=_,this.viewPortWidth=o,this.leftPosition=P,this.topPosition=N,this.rightPosition=M,this.bottomPosition=I},e.prototype.initMiniMap=function(){var u=document.createElement("div");u.className="lf-mini-map-graph",u.style.width=this.width+4+"px",u.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:u,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(a){return a},this.lfMap.adapterOut=function(a){return a},this.miniMapWrap=u,this.createViewPort(),u.addEventListener("click",this.mapClick)},e.prototype.createMiniMap=function(u,a){var f=document.createElement("div");f.appendChild(this.miniMapWrap),typeof u<"u"||typeof a<"u"?(f.style.left=(u||0)+"px",f.style.top=(a||0)+"px"):(typeof this.rightPosition<"u"?f.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(f.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?f.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(f.style.top=this.topPosition+"px")),f.style.position="absolute",f.className="lf-mini-map",this.isShowCloseIcon||f.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||f.classList.add("lf-mini-map-no-header"),this.container.appendChild(f),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=e.headerTitle,f.appendChild(o);var p=document.createElement("span");p.className="lf-mini-map-close",p.addEventListener("click",this.hide),f.appendChild(p),this.miniMapContainer=f},e.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},e.prototype.getBounds=function(u){var a=0,f=this.miniMapWidth,o=0,p=this.miniMapHeight,d=u.nodes;return d&&d.length>0&&d.forEach(function(y){var g=y.x,E=y.y,_=y.width,T=_===void 0?200:_,P=y.height,A=P===void 0?200:P,N=g-T/2,M=g+T/2,I=E-A/2,G=E+A/2;a=N<a?N:a,f=M>f?M:f,o=I<o?I:o,p=G>p?G:p}),{left:a,top:o,bottom:p,right:f}},e.prototype.resetData=function(u){var a=u.nodes,f=u.edges,o=0,p=0;return a&&a.length>0&&(a.forEach(function(d){var y=d.x,g=d.y,E=d.width,_=E===void 0?200:E,T=d.height,P=T===void 0?200:T,A=y-_/2,N=g-P/2;o=A<o?A:o,p=N<p?N:p}),(o<0||p<0)&&(this.resetDataX=o,this.resetDataY=p,a.forEach(function(d){d.x=d.x-o,d.y=d.y-p,d.text&&(d.text.x=d.text.x-o,d.text.y=d.text.y-p)}),f.forEach(function(d){d.startPoint&&(d.startPoint.x=d.startPoint.x-o,d.startPoint.y=d.startPoint.y-p),d.endPoint&&(d.endPoint.x=d.endPoint.x-o,d.endPoint.y=d.endPoint.y-p),d.text&&(d.text.x=d.text.x-o,d.text.y=d.text.y-p),d.pointsList&&d.pointsList.forEach(function(y){y.x=y.x-o,y.y=y.y-p})}))),u},e.prototype.setView=function(){var u,a,f=this.lf.getGraphRawData(),o=this.resetData(f),p=this.lf.viewMap,d=this.lf.graphModel.modelMap,y=this.lfMap.viewMap;try{for(var g=AM(p.keys()),E=g.next();!E.done;E=g.next()){var _=E.value;y.has(_)||(this.lfMap.setView(_,p.get(_)),this.lfMap.graphModel.modelMap.set(_,d.get(_)))}}catch(xe){u={error:xe}}finally{try{E&&!E.done&&(a=g.return)&&a.call(g)}finally{if(u)throw u.error}}this.lfMap.render(o);var T=this.getBounds(o),P=T.left,A=T.top,N=T.right,M=T.bottom,I=this.width/(N-P),G=this.height/(M-A),W=this.miniMapWrap.firstChild.style,de=Math.min(I,G);W.transform="matrix("+de+", 0, 0, "+de+", 0, 0)",W.transformOrigin="left top",W.height=M-Math.min(A,0)+"px",W.width=N-Math.min(P,0)+"px",this.viewPortScale=de,this.setViewPort(de,{left:P,top:A,right:N,bottom:M})},e.prototype.setViewPort=function(u,a){var f=a.left,o=a.right;a.top,a.bottom;var p=this.viewport.style;p.width=this.viewPortWidth+"px",p.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var d=this.lf.getTransform(),y=d.TRANSLATE_X,g=d.TRANSLATE_Y,E=d.SCALE_X,_=d.SCALE_Y,T=o-f,P=this.width/(T/this.lf.graphModel.width),A=this.width*(P/this.width),N=this.lf.graphModel.width/this.lf.graphModel.height,M=A/N,I=this.lf.getGraphRawData(),G=this.getBounds(I),W=G.left,de=G.top,xe=W,ce=de;xe+=y/E,ce+=g/_,this.viewPortTop=ce>0?0:-ce*u,this.viewPortLeft=xe>0?0:-xe*u,this.viewPortWidth=A,this.viewPortHeight=M,p.top=this.viewPortTop+"px",p.left=this.viewPortLeft+"px",p.width=A/E+"px",p.height=M/_+"px"},e.prototype.createViewPort=function(){var u=document.createElement("div");u.className="lf-minimap-viewport",u.addEventListener("mousedown",this.startDrag),this.viewport=u},e.pluginName="miniMap",e.width=150,e.height=220,e.viewPortWidth=150,e.viewPortHeight=75,e.isShowHeader=!0,e.isShowCloseIcon=!0,e.leftPosition=0,e.topPosition=0,e.rightPosition=null,e.bottomPosition=null,e.headerTitle="导航",e}();function PM(e){if(e.length<=1)return!1;for(var u=0,a=e.length-1;u!==a&&u+1!==a&&a-1!==u;)u++,a--;return u===a?[--u,a]:[u,a]}var SO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),kc=globalThis&&globalThis.__assign||function(){return kc=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},kc.apply(this,arguments)},ma=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};(function(e){SO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.pointFilter=function(a){for(var f=a,o=1;o<f.length-1;){var p=ma(f[o-1],2),d=p[0],y=p[1],g=ma(f[o],2),E=g[0],_=g[1],T=ma(f[o+1],2),P=T[0],A=T[1];d===E&&E===P||y===_&&_===A?f.splice(o,1):o++}return f},u.prototype.getEdge=function(){var a=this.props.model,f=a.points,o=a.isAnimation,p=a.arrowConfig,d=a.radius,y=d===void 0?5:d,g=a.getEdgeStyle(),E=a.getEdgeAnimationStyle(),_=this.pointFilter(f.split(" ").map(function(bt){return bt.split(",").map(function(xt){return Number(xt)})})),T=PM(_);if(T){var P=ma(T,2),A=P[0],N=P[1],M=_[A],I=_[N],G=M.some(function(bt,xt){return bt===I[xt]});if(!G){var W=(I[1]-M[1])/2,de=[I[0],I[1]-W],xe=[M[0],M[1]+W];_.splice(A+1,0,xe,de)}}for(var ce=ma(_[0],2),ne=ce[0],ue=ce[1],$="M"+ne+" "+ue,B=1;B<_.length-1;B++){var Y=ma(_[B-1],2),V=Y[0],q=Y[1],Oe=ma(_[B],2),Ge=Oe[0],ie=Oe[1],se=ma(_[B+1],2),Ne=se[0],Re=se[1];if(Ge===V&&ie!==q){var fe=ie>q?ie-y:ie+y;$=$+" L "+Ge+" "+fe}if(ie===q&&Ge!==V){var je=Ge>V?Ge-y:Ge+y;$=$+" L "+je+" "+ie}if($=$+" Q "+Ge+" "+ie,Ge===Ne&&ie!==Re){var fe=ie>Re?ie-y:ie+y;$=$+" "+Ge+" "+fe}if(ie===Re&&Ge!==Ne){var je=Ge>Ne?Ge-y:Ge+y;$=$+" "+je+" "+ie}}var He=ma(_[_.length-1],2),ft=He[0],Pt=He[1];$=$+" L "+ft+" "+Pt;var Wt=kc(kc(kc({d:$,style:o?E:{}},g),p),{fill:"none"});return Ht.h("path",kc({d:$},Wt))},u})(Ht.PolylineEdge);(function(e){SO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u})(Ht.PolylineEdgeModel);var lm,Un,TO,us,U_,AO,$g,PO={},jO=[],jM=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pm=Array.isArray;function lu(e,u){for(var a in u)e[a]=u[a];return e}function NO(e){var u=e.parentNode;u&&u.removeChild(e)}function Nl(e,u,a){var f,o,p,d={};for(p in u)p=="key"?f=u[p]:p=="ref"?o=u[p]:d[p]=u[p];if(arguments.length>2&&(d.children=arguments.length>3?lm.call(arguments,2):a),typeof e=="function"&&e.defaultProps!=null)for(p in e.defaultProps)d[p]===void 0&&(d[p]=e.defaultProps[p]);return $d(e,d,f,o,null)}function $d(e,u,a,f,o){var p={type:e,props:u,key:a,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++TO};return o==null&&Un.vnode!=null&&Un.vnode(p),p}function dm(e){return e.children}function Fc(e,u){this.props=e,this.context=u}function Dl(e,u){if(u==null)return e.__?Dl(e.__,e.__.__k.indexOf(e)+1):null;for(var a;u<e.__k.length;u++)if((a=e.__k[u])!=null&&a.__e!=null)return a.__e;return typeof e.type=="function"?Dl(e):null}function MO(e){var u,a;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,u=0;u<e.__k.length;u++)if((a=e.__k[u])!=null&&a.__e!=null){e.__e=e.__c.base=a.__e;break}return MO(e)}}function z_(e){(!e.__d&&(e.__d=!0)&&us.push(e)&&!eh.__r++||U_!==Un.debounceRendering)&&((U_=Un.debounceRendering)||AO)(eh)}function eh(){var e,u,a,f,o,p,d,y;for(us.sort($g);e=us.shift();)e.__d&&(u=us.length,f=void 0,o=void 0,d=(p=(a=e).__v).__e,(y=a.__P)&&(f=[],(o=lu({},p)).__v=p.__v+1,kO(y,p,o,a.__n,y.ownerSVGElement!==void 0,p.__h!=null?[d]:null,f,d??Dl(p),p.__h),MM(f,p),p.__e!=d&&MO(p)),us.length>u&&us.sort($g));eh.__r=0}function RO(e,u,a,f,o,p,d,y,g,E){var _,T,P,A,N,M,I,G=f&&f.__k||jO,W=G.length;for(a.__k=[],_=0;_<u.length;_++)if((A=a.__k[_]=(A=u[_])==null||typeof A=="boolean"||typeof A=="function"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?$d(null,A,null,null,A):pm(A)?$d(dm,{children:A},null,null,null):A.__b>0?$d(A.type,A.props,A.key,A.ref?A.ref:null,A.__v):A)!=null){if(A.__=a,A.__b=a.__b+1,(P=G[_])===null||P&&A.key==P.key&&A.type===P.type)G[_]=void 0;else for(T=0;T<W;T++){if((P=G[T])&&A.key==P.key&&A.type===P.type){G[T]=void 0;break}P=null}kO(e,A,P=P||PO,o,p,d,y,g,E),N=A.__e,(T=A.ref)&&P.ref!=T&&(I||(I=[]),P.ref&&I.push(P.ref,null,A),I.push(T,A.__c||N,A)),N!=null?(M==null&&(M=N),typeof A.type=="function"&&A.__k===P.__k?A.__d=g=CO(A,g,e):g=DO(e,A,P,G,N,g),typeof a.type=="function"&&(a.__d=g)):g&&P.__e==g&&g.parentNode!=e&&(g=Dl(P))}for(a.__e=M,_=W;_--;)G[_]!=null&&(typeof a.type=="function"&&G[_].__e!=null&&G[_].__e==a.__d&&(a.__d=IO(f).nextSibling),FO(G[_],G[_]));if(I)for(_=0;_<I.length;_++)LO(I[_],I[++_],I[++_])}function CO(e,u,a){for(var f,o=e.__k,p=0;o&&p<o.length;p++)(f=o[p])&&(f.__=e,u=typeof f.type=="function"?CO(f,u,a):DO(a,f,f,o,f.__e,u));return u}function DO(e,u,a,f,o,p){var d,y,g;if(u.__d!==void 0)d=u.__d,u.__d=void 0;else if(a==null||o!=p||o.parentNode==null)e:if(p==null||p.parentNode!==e)e.appendChild(o),d=null;else{for(y=p,g=0;(y=y.nextSibling)&&g<f.length;g+=1)if(y==o)break e;e.insertBefore(o,p),d=p}return d!==void 0?d:o.nextSibling}function IO(e){var u,a,f;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(u=e.__k.length-1;u>=0;u--)if((a=e.__k[u])&&(f=IO(a)))return f}return null}function NM(e,u,a,f,o){var p;for(p in a)p==="children"||p==="key"||p in u||th(e,p,null,a[p],f);for(p in u)o&&typeof u[p]!="function"||p==="children"||p==="key"||p==="value"||p==="checked"||a[p]===u[p]||th(e,p,u[p],a[p],f)}function H_(e,u,a){u[0]==="-"?e.setProperty(u,a??""):e[u]=a==null?"":typeof a!="number"||jM.test(u)?a:a+"px"}function th(e,u,a,f,o){var p;e:if(u==="style")if(typeof a=="string")e.style.cssText=a;else{if(typeof f=="string"&&(e.style.cssText=f=""),f)for(u in f)a&&u in a||H_(e.style,u,"");if(a)for(u in a)f&&a[u]===f[u]||H_(e.style,u,a[u])}else if(u[0]==="o"&&u[1]==="n")p=u!==(u=u.replace(/Capture$/,"")),u=u.toLowerCase()in e?u.toLowerCase().slice(2):u.slice(2),e.l||(e.l={}),e.l[u+p]=a,a?f||e.addEventListener(u,p?V_:X_,p):e.removeEventListener(u,p?V_:X_,p);else if(u!=="dangerouslySetInnerHTML"){if(o)u=u.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(u!=="width"&&u!=="height"&&u!=="href"&&u!=="list"&&u!=="form"&&u!=="tabIndex"&&u!=="download"&&u!=="rowSpan"&&u!=="colSpan"&&u in e)try{e[u]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&u[4]!=="-"?e.removeAttribute(u):e.setAttribute(u,a))}}function X_(e){return this.l[e.type+!1](Un.event?Un.event(e):e)}function V_(e){return this.l[e.type+!0](Un.event?Un.event(e):e)}function kO(e,u,a,f,o,p,d,y,g){var E,_,T,P,A,N,M,I,G,W,de,xe,ce,ne,ue,$=u.type;if(u.constructor!==void 0)return null;a.__h!=null&&(g=a.__h,y=u.__e=a.__e,u.__h=null,p=[y]),(E=Un.__b)&&E(u);try{e:if(typeof $=="function"){if(I=u.props,G=(E=$.contextType)&&f[E.__c],W=E?G?G.props.value:E.__:f,a.__c?M=(_=u.__c=a.__c).__=_.__E:("prototype"in $&&$.prototype.render?u.__c=_=new $(I,W):(u.__c=_=new Fc(I,W),_.constructor=$,_.render=CM),G&&G.sub(_),_.props=I,_.state||(_.state={}),_.context=W,_.__n=f,T=_.__d=!0,_.__h=[],_._sb=[]),_.__s==null&&(_.__s=_.state),$.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=lu({},_.__s)),lu(_.__s,$.getDerivedStateFromProps(I,_.__s))),P=_.props,A=_.state,_.__v=u,T)$.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if($.getDerivedStateFromProps==null&&I!==P&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(I,W),!_.__e&&_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(I,_.__s,W)===!1||u.__v===a.__v){for(u.__v!==a.__v&&(_.props=I,_.state=_.__s,_.__d=!1),_.__e=!1,u.__e=a.__e,u.__k=a.__k,u.__k.forEach(function(B){B&&(B.__=u)}),de=0;de<_._sb.length;de++)_.__h.push(_._sb[de]);_._sb=[],_.__h.length&&d.push(_);break e}_.componentWillUpdate!=null&&_.componentWillUpdate(I,_.__s,W),_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(P,A,N)})}if(_.context=W,_.props=I,_.__P=e,xe=Un.__r,ce=0,"prototype"in $&&$.prototype.render){for(_.state=_.__s,_.__d=!1,xe&&xe(u),E=_.render(_.props,_.state,_.context),ne=0;ne<_._sb.length;ne++)_.__h.push(_._sb[ne]);_._sb=[]}else do _.__d=!1,xe&&xe(u),E=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++ce<25);_.state=_.__s,_.getChildContext!=null&&(f=lu(lu({},f),_.getChildContext())),T||_.getSnapshotBeforeUpdate==null||(N=_.getSnapshotBeforeUpdate(P,A)),RO(e,pm(ue=E!=null&&E.type===dm&&E.key==null?E.props.children:E)?ue:[ue],u,a,f,o,p,d,y,g),_.base=u.__e,u.__h=null,_.__h.length&&d.push(_),M&&(_.__E=_.__=null),_.__e=!1}else p==null&&u.__v===a.__v?(u.__k=a.__k,u.__e=a.__e):u.__e=RM(a.__e,u,a,f,o,p,d,g);(E=Un.diffed)&&E(u)}catch(B){u.__v=null,(g||p!=null)&&(u.__e=y,u.__h=!!g,p[p.indexOf(y)]=null),Un.__e(B,u,a)}}function MM(e,u){Un.__c&&Un.__c(u,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(f){f.call(a)})}catch(f){Un.__e(f,a.__v)}})}function RM(e,u,a,f,o,p,d,y){var g,E,_,T=a.props,P=u.props,A=u.type,N=0;if(A==="svg"&&(o=!0),p!=null){for(;N<p.length;N++)if((g=p[N])&&"setAttribute"in g==!!A&&(A?g.localName===A:g.nodeType===3)){e=g,p[N]=null;break}}if(e==null){if(A===null)return document.createTextNode(P);e=o?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,P.is&&P),p=null,y=!1}if(A===null)T===P||y&&e.data===P||(e.data=P);else{if(p=p&&lm.call(e.childNodes),E=(T=a.props||PO).dangerouslySetInnerHTML,_=P.dangerouslySetInnerHTML,!y){if(p!=null)for(T={},N=0;N<e.attributes.length;N++)T[e.attributes[N].name]=e.attributes[N].value;(_||E)&&(_&&(E&&_.__html==E.__html||_.__html===e.innerHTML)||(e.innerHTML=_&&_.__html||""))}if(NM(e,P,T,o,y),_)u.__k=[];else if(RO(e,pm(N=u.props.children)?N:[N],u,a,f,o&&A!=="foreignObject",p,d,p?p[0]:a.__k&&Dl(a,0),y),p!=null)for(N=p.length;N--;)p[N]!=null&&NO(p[N]);y||("value"in P&&(N=P.value)!==void 0&&(N!==e.value||A==="progress"&&!N||A==="option"&&N!==T.value)&&th(e,"value",N,T.value,!1),"checked"in P&&(N=P.checked)!==void 0&&N!==e.checked&&th(e,"checked",N,T.checked,!1))}return e}function LO(e,u,a){try{typeof e=="function"?e(u):e.current=u}catch(f){Un.__e(f,a)}}function FO(e,u,a){var f,o;if(Un.unmount&&Un.unmount(e),(f=e.ref)&&(f.current&&f.current!==e.__e||LO(f,null,u)),(f=e.__c)!=null){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(p){Un.__e(p,u)}f.base=f.__P=null,e.__c=void 0}if(f=e.__k)for(o=0;o<f.length;o++)f[o]&&FO(f[o],u,a||typeof e.type!="function");a||e.__e==null||NO(e.__e),e.__=e.__e=e.__d=void 0}function CM(e,u,a){return this.constructor(e,a)}lm=jO.slice,Un={__e:function(e,u,a,f){for(var o,p,d;u=u.__;)if((o=u.__c)&&!o.__)try{if((p=o.constructor)&&p.getDerivedStateFromError!=null&&(o.setState(p.getDerivedStateFromError(e)),d=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,f||{}),d=o.__d),d)return o.__E=o}catch(y){e=y}throw e}},TO=0,Fc.prototype.setState=function(e,u){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=lu({},this.state),typeof e=="function"&&(e=e(lu({},a),this.props)),e&&lu(a,e),e!=null&&this.__v&&(u&&this._sb.push(u),z_(this))},Fc.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),z_(this))},Fc.prototype.render=dm,us=[],AO=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$g=function(e,u){return e.__v.__b-u.__v.__b},eh.__r=0;var Ml=globalThis&&globalThis.__assign||function(){return Ml=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Ml.apply(this,arguments)};function hm(e){var u=e.x,a=e.y,f=e.width,o=e.height,p=e.radius,d=e.className,y=u-f/2,g=a-o/2,E=Ml(Ml({width:10,height:10,cx:0,cy:0,rx:p||0,ry:p||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+d},e),{x:y,y:g});return Ht.h("rect",Ml({},E))}hm.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Lc;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Lc||(Lc={}));function Wd(e){var u=e.x,a=e.y,f=e.width,o=e.height;return{minX:u-f/2,minY:a-o/2,maxX:u+f/2,maxY:a+o/2}}function $_(e){var u=Wd(e),a=e.radius,f=u.minX,o=u.minY,p=u.maxX,d=u.maxY;return[{x:f+a,y:o+a},{x:p-a,y:o+a},{x:p-a,y:d-a},{x:f+a,y:d-a}]}function W_(e){var u=e.point,a=e.beforeNode,f=e.afterNode,o=u.x,p=u.y,d={x:o,y:p},y=a.radius,g=Wd(a),E=Wd(f);if(o===g.minX){d.x=E.minX;var _=(p-a.y)/(a.height/2-y);_?d.y=f.y+(f.height/2-y)*_:d.y=f.y}else if(o===g.maxX){d.x=E.maxX;var _=(p-a.y)/(a.height/2-y);_?d.y=f.y+(f.height/2-y)*_:d.y=f.y}else if(p===g.minY){d.y=E.minY;var _=(o-a.x)/(a.width/2-y);_?d.x=f.x+(f.width/2-y)*_:d.x=f.x}else if(p===g.maxY){d.y=E.maxY;var _=(o-a.x)/(a.width/2-y);_?d.x=f.x+(f.width/2-y)*_:d.x=f.x}else{var T=$_(a),P=$_(f),A=Wd(a),N=A.minX,M=A.minY,I=A.maxX,G=A.maxY,W=-1;if(o-N<y&&p-M<y?W=0:I-o<y&&p-M<y?W=1:I-o<y&&G-p<y?W=2:o-N<y&&M-p<y&&(W=3),W>-1){var de=Math.atan2(p-T[W].y,o-T[W].x);d.x=P[W].x+y*Math.cos(de),d.y=P[W].y+y*Math.sin(de)}}return d}function Y_(e){var u=e.point,a=e.beforeNode,f=e.afterNode,o=f.rx,p=f.ry,d=u,y=(u.y-a.y)/(u.x-a.x),g=o,E=p,_,T;return y>=1/0?(_=0,T=E):y<=-1/0?(_=0,T=-E):u.x-a.x>0?(_=g*E/Math.sqrt(E*E+g*g*y*y),T=g*E*y/Math.sqrt(E*E+g*g*y*y)):(_=-(g*E)/Math.sqrt(E*E+g*g*y*y),T=-(g*E*y)/Math.sqrt(E*E+g*g*y*y)),d={x:_+f.x,y:T+f.y},d}function K_(e){var u=e.point,a=e.beforeNode,f=e.afterNode,o=u,p,d,y=u.x-a.x,g=u.y-a.y,E=a.rx,_=a.ry,T=Math.sqrt((E-Math.abs(y))*(E-Math.abs(y))+g*g)/Math.sqrt(E*E+_*_),P=f.rx,A=f.ry,N=Math.sqrt((P*P+A*A)*T*T*(P*P/(P*P+A*A))),M=N*(A/P);return y>=0?p=P-N:p=N-P,g>0?d=M:d=-M,o={x:p+f.x,y:d+f.y},o}var DM=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),ss=globalThis&&globalThis.__assign||function(){return ss=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},ss.apply(this,arguments)},IM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},kM=Ht.LogicFlowUtil.StepDrag,LM=function(e){DM(u,e);function u(a){var f=e.call(this)||this;return f.updatePosition=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.x,E=y.y;f.nodeModel.x=g+p/2,f.nodeModel.y=E+d/2,f.nodeModel.moveText(p/2,d/2)},f.getResize=function(o){var p=o.index,d=o.deltaX,y=o.deltaY,g=o.width,E=o.height,_=o.PCTResizeInfo,T=o.pct,P=T===void 0?1:T,A={width:g,height:E,deltaX:d,deltaY:y};if(_){var N=4,M=0,I=0;switch(p){case 0:I=(d*-1-y)/N;break;case 1:I=(d-y)/N;break;case 2:I=(d+y)/N;break;case 3:I=(d*-1+y)/N;break}I!==0&&(M=Math.round(I/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+M,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+M,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var G=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),W=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(p){case 0:d=g-G,y=E-W;break;case 1:d=G-g,y=E-W;break;case 2:d=G-g,y=W-E;break;case 3:d=g-G,y=W-E;break}return A.width=G,A.height=W,A.deltaX=d/P,A.deltaY=y/P,A}switch(p){case 0:A.width=g-d*P,A.height=E-y*P;break;case 1:A.width=g+d*P,A.height=E-y*P;break;case 2:A.width=g+d*P,A.height=E+y*P;break;case 3:A.width=g-d*P,A.height=E+y*P;break}return A},f.updateRect=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.x,_=y.y,T=y.width,P=y.height,A=y.radius,N=y.PCTResizeInfo,M=f.index,I=f.getResize({index:M,deltaX:p,deltaY:d,width:T,height:P,PCTResizeInfo:N,pct:1}),G=f.nodeModel,W=G.minWidth,de=G.minHeight,xe=G.maxWidth,ce=G.maxHeight;if(I.width<W||I.width>xe||I.height<de||I.height>ce){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),f.nodeModel.width=I.width,f.nodeModel.height=I.height,f.nodeModel.setProperties({nodeSize:{width:I.width,height:I.height}});var ne=f.getNodeEdges(g),ue={x:E,y:_,width:T,height:P,radius:A},$={x:f.nodeModel.x,y:f.nodeModel.y,width:f.nodeModel.width,height:f.nodeModel.height,radius:A},B={point:"",beforeNode:ue,afterNode:$},Y;ne.sourceEdges.forEach(function(V){B.point=V.startPoint,Y=W_(B),V.updateStartPoint(Y)}),ne.targetEdges.forEach(function(V){B.point=V.endPoint,Y=W_(B),V.updateEndPoint(Y)}),f.eventEmit({beforeNode:ue,afterNode:$})},f.updateEllipse=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.rx,_=y.ry,T=y.x,P=y.y,A=y.PCTResizeInfo,N=f.index,M=E,I=_,G=f.getResize({index:N,deltaX:p,deltaY:d,width:M,height:I,PCTResizeInfo:A,pct:1/2}),W=f.nodeModel,de=W.minWidth,xe=W.minHeight,ce=W.maxWidth,ne=W.maxHeight;if(G.width<de/2||G.width>ce/2||G.height<xe/2||G.height>ne/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:G.deltaX,deltaY:G.deltaY}),f.nodeModel.rx=G.width,f.nodeModel.ry=G.height,f.nodeModel.setProperties({nodeSize:{rx:G.width,ry:G.height}});var ue=f.getNodeEdges(g),$={x:T,y:P},B={rx:G.width,ry:G.height,x:f.nodeModel.x,y:f.nodeModel.y},Y={point:{},beforeNode:$,afterNode:B},V;ue.sourceEdges.forEach(function(q){Y.point=q.startPoint,V=Y_(Y),q.updateStartPoint(V)}),ue.targetEdges.forEach(function(q){Y.point=q.endPoint,V=Y_(Y),q.updateEndPoint(V)}),f.eventEmit({beforeNode:ss(ss({},$),{rx:E,ry:_}),afterNode:B})},f.updateDiamond=function(o){var p=o.deltaX,d=o.deltaY,y=f.nodeModel,g=y.id,E=y.rx,_=y.ry,T=y.x,P=y.y,A=y.PCTResizeInfo,N=f.index,M=E,I=_,G=f.getResize({index:N,deltaX:p,deltaY:d,width:M,height:I,PCTResizeInfo:A,pct:1/2}),W=f.nodeModel,de=W.minWidth,xe=W.minHeight,ce=W.maxWidth,ne=W.maxHeight;if(G.width<de/2||G.width>ce/2||G.height<xe/2||G.height>ne/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:G.deltaX,deltaY:G.deltaY}),f.nodeModel.rx=G.width,f.nodeModel.ry=G.height,f.nodeModel.setProperties({nodeSize:{rx:G.width,ry:G.height}});var ue={x:T,y:P,rx:E,ry:_},$={rx:G.width,ry:G.height,x:f.nodeModel.x,y:f.nodeModel.y},B={point:{},beforeNode:ue,afterNode:$},Y,V=f.getNodeEdges(g);V.sourceEdges.forEach(function(q){B.point=q.startPoint,Y=K_(B),q.updateStartPoint(Y)}),V.targetEdges.forEach(function(q){B.point=q.endPoint,Y=K_(B),q.updateEndPoint(Y)}),f.eventEmit({beforeNode:ue,afterNode:$})},f.eventEmit=function(o){var p=o.beforeNode,d=o.afterNode,y=f.nodeModel,g=y.id,E=y.modelType,_=y.type,T=ss({id:g,modelType:E,type:_},p),P=ss({id:g,modelType:E,type:_},d);f.graphModel.eventCenter.emit("node:resize",{oldNodeSize:T,newNodeSize:P})},f.onDragging=function(o){var p,d=o.deltaX,y=o.deltaY,g=f.graphModel.transformModel,E=f.nodeModel.modelType;p=IM(g.fixDeltaXY(d,y),2),d=p[0],y=p[1],E===Lc.RECT_NODE||E===Lc.HTML_NODE?f.updateRect({deltaX:d,deltaY:y}):E===Lc.ELLIPSE_NODE?f.updateEllipse({deltaX:d,deltaY:y}):E===Lc.DIAMOND_NODE&&f.updateDiamond({deltaX:d,deltaY:y})},f.onDragEnd=function(){var o=f.graphModel.gridSize,p=o===void 0?1:o,d=p*Math.round(f.nodeModel.x/p),y=p*Math.round(f.nodeModel.y/p);f.nodeModel.moveTo(d,y)},f.index=a.index,f.nodeModel=a.model,f.graphModel=a.graphModel,f.state={},f.dragHandler=new kM({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:1}),f}return u.prototype.getNodeEdges=function(a){for(var f=this.graphModel,o=f.edges,p=[],d=[],y=0;y<o.length;y++){var g=o[y];g.sourceNodeId===a?p.push(g):o[y].targetNodeId===a&&d.push(g)}return{sourceEdges:p,targetEdges:d}},u.prototype.render=function(){var a=this.props,f=a.x,o=a.y,p=a.index,d=a.model,y=d.getControlPointStyle();return Nl("g",{className:"lf-resize-control-"+p},Nl(hm,ss({className:"lf-node-control"},{x:f,y:o},y,{onMouseDown:this.dragHandler.handleMouseDown})))},u}(Fc),FM=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),rh=globalThis&&globalThis.__assign||function(){return rh=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},rh.apply(this,arguments)},vh=function(e){FM(u,e);function u(){var a=e.call(this)||this;return a.state={},a}return u.prototype.getResizeControl=function(){var a=this.props,f=a.model,o=a.graphModel,p=f.x,d=f.y,y=f.width,g=f.height,E={minX:p-y/2,minY:d-g/2,maxX:p+y/2,maxY:d+g/2},_=E.minX,T=E.minY,P=E.maxX,A=E.maxY,N=[{x:_,y:T},{x:P,y:T},{x:P,y:A},{x:_,y:A}];return N.map(function(M,I){return Nl(LM,rh({index:I},M,{model:f,graphModel:o}))})},u.prototype.getGroupSolid=function(){var a=this.props.model,f=a.x,o=a.y,p=a.width,d=a.height,y=a.getResizeOutlineStyle();return Nl(hm,rh({fill:"none"},y,{x:f,y:o,width:p,height:d}))},u.prototype.render=function(){return Nl("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},u}(Fc),BO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),BM=function(e){BO(u,e);function u(a,f){var o=e.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.width=p.width,o.height=p.height),o}return u.prototype.initNodeData=function(a){e.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=e.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.resize=function(a,f){console.log(a,f)},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},p={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u}(Ht.RectNodeModel),GM=function(e){BO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(vh,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u}(Ht.RectNode),gh={type:"rect",view:GM,model:BM},GO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(e){GO(u,e);function u(a,f){var o=e.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.rx=p.rx,o.ry=p.ry),o}return u.prototype.initNodeData=function(a){e.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=e.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},p={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.EllipseNodeModel);(function(e){GO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(vh,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f.isSelected&&!o?this.getControlGroup():"")},u})(Ht.EllipseNode);var Wg=globalThis&&globalThis.__assign||function(){return Wg=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Wg.apply(this,arguments)};function UM(e){var u=e.fillOpacity,a=u===void 0?1:u,f=e.strokeWidth,o=f===void 0?1:f,p=e.strokeOpacity,d=p===void 0?1:p,y=e.fill,g=y===void 0?"transparent":y,E=e.stroke,_=E===void 0?"#000":E,T=e.points,P=e.className,A=P===void 0?"lf-basic-shape":P,N={fill:g,fillOpacity:a,strokeWidth:o,stroke:_,strokeOpacity:d,points:"",className:A};return N.points=T.map(function(M){return M.join(",")}).join(" "),Ht.h("polygon",Wg({},N))}var UO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),Yg=globalThis&&globalThis.__assign||function(){return Yg=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Yg.apply(this,arguments)};(function(e){UO(u,e);function u(a,f){var o=e.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.rx=p.rx,o.ry=p.ry),o}return u.prototype.initNodeData=function(a){e.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},u.prototype.getOutlineStyle=function(){var a=e.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},p={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.DiamondNodeModel);(function(e){UO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(vh,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){var a=this.props.model,f=a.points,o=a.getNodeStyle();return Ht.h("g",null,Ht.h(UM,Yg({},o,{points:f})))},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u})(Ht.DiamondNode);var zO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();(function(e){zO(u,e);function u(a,f){var o=e.call(this,a,f)||this,p=o.properties.nodeSize;return p&&(o.width=p.width,o.height=p.height),o}return u.prototype.initNodeData=function(a){e.prototype.initNodeData.call(this,a),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},u.prototype.getOutlineStyle=function(){var a=e.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(a.stroke="none",a.hover&&(a.hover.stroke="none")),a},u.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},u.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},u.prototype.enableProportionResize=function(a){if(a===void 0&&(a=!0),a){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},p={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:p}}else delete this.PCTResizeInfo},u})(Ht.HtmlNodeModel);(function(e){zO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props,f=a.model,o=a.graphModel;return Ht.h(vh,{model:f,graphModel:o})},u.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},u.prototype.getShape=function(){var a=this.props,f=a.model.isSelected,o=a.graphModel.editConfigModel.isSilentMode;return Ht.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},u})(Ht.HtmlNode);var HO=globalThis&&globalThis.__extends||function(){var e=function(u,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var p in o)o.hasOwnProperty(p)&&(f[p]=o[p])},e(u,a)};return function(u,a){e(u,a);function f(){this.constructor=u}u.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}(),nh=globalThis&&globalThis.__assign||function(){return nh=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},nh.apply(this,arguments)},zM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p},HM=globalThis&&globalThis.__spread||function(){for(var e=[],u=0;u<arguments.length;u++)e=e.concat(zM(arguments[u]));return e},q_=500,Z_=300,XM=-1e4,VM=function(e){HO(u,e);function u(){var a=e!==null&&e.apply(this,arguments)||this;return a.isGroup=!0,a.unfoldedWidth=q_,a.unfoldedHight=Z_,a}return u.prototype.initNodeData=function(a){var f=this;e.prototype.initNodeData.call(this,a);var o=[];Array.isArray(a.children)&&(o=a.children),this.children=new Set(o),this.width=q_,this.height=Z_,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=XM,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){f.isFolded&&f.foldGroup(f.isFolded)})},u.prototype.getResizeOutlineStyle=function(){var a=e.prototype.getResizeOutlineStyle.call(this);return a.stroke="none",a},u.prototype.foldGroup=function(a){var f=this;this.setProperty("isFolded",a),this.isFolded=a,a?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(p){var d=f.graphModel.getElement(p);d.isGroup&&!d.isFolded&&d.foldGroup(a),d.visible=!a,o=o.concat(d.incoming.edges.concat(d.outgoing.edges))}),this.foldEdge(a,o)},u.prototype.getAnchorStyle=function(a){var f=e.prototype.getAnchorStyle.call(this,a);return f.stroke="transparent",f.fill="transparent",f.hover.fill="transparent",f.hover.stroke="transparent",f},u.prototype.foldEdge=function(a,f){var o=this;f.forEach(function(p,d){var y=p.id,g=p.sourceNodeId,E=p.targetNodeId,_=p.startPoint,T=p.endPoint,P=p.type,A=p.text,N=p.getProperties(),M={id:y+"__"+d,sourceNodeId:g,targetNodeId:E,startPoint:_,endPoint:T,type:P,properties:N,text:A==null?void 0:A.value};p.virtual&&o.graphModel.deleteEdgeById(p.id);var I=o.graphModel.group.getNodeGroup(E);I||(I=o.graphModel.getNodeModelById(E));var G=o.graphModel.group.getNodeGroup(g);G||(G=o.graphModel.getNodeModelById(g)),a&&p.visible!==!1&&(o.children.has(g)||o.id===g?(M.startPoint=void 0,M.sourceNodeId=o.id):(M.endPoint=void 0,M.targetNodeId=o.id),(I.id!==o.id||G.id!==o.id)&&o.createVirtualEdge(M),p.visible=!1),!a&&p.visible===!1&&(I&&I.isGroup&&I.isFolded?(M.targetNodeId=I.id,M.endPoint=void 0,o.createVirtualEdge(M)):G&&G.isGroup&&G.isFolded?(M.sourceNodeId=G.id,M.startPoint=void 0,o.createVirtualEdge(M)):p.visible=!0)})},u.prototype.createVirtualEdge=function(a){a.pointsList=void 0;var f=this.graphModel.addEdge(a);f.virtual=!0,f.text.editable=!1,f.isFoldedEdge=!0},u.prototype.isInRange=function(a){var f=a.x1,o=a.y1,p=a.x2,d=a.y2;return f>=this.x-this.width/2&&p<=this.x+this.width/2&&o>=this.y-this.height/2&&d<=this.y+this.height/2},u.prototype.isAllowMoveTo=function(a){var f=a.x1,o=a.y1,p=a.x2,d=a.y2;return{x:f>=this.x-this.width/2&&p<=this.x+this.width/2,y:o>=this.y-this.height/2&&d<=this.y+this.height/2}},u.prototype.setAllowAppendChild=function(a){this.setProperty("groupAddable",a)},u.prototype.addChild=function(a){this.children.add(a)},u.prototype.removeChild=function(a){this.children.delete(a)},u.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},u.prototype.getData=function(){var a=this,f=e.prototype.getData.call(this);f.children=[],this.children.forEach(function(p){var d=a.graphModel.getNodeModelById(p);d&&!d.virtual&&f.children.push(p)});var o=f.properties;return delete o.groupAddable,delete o.isFolded,f},u.prototype.getHistoryData=function(){var a=e.prototype.getData.call(this);a.children=HM(this.children),a.isGroup=!0;var f=a.properties;return delete f.groupAddable,f.isFolded&&(a.x=a.x+this.unfoldedWidth/2-this.foldedWidth/2,a.y=a.y+this.unfoldedHight/2-this.foldedHeight/2),a},u.prototype.isAllowAppendIn=function(a){return!0},u.prototype.toBack=function(){this.zIndex--},u}(gh.model),$M=function(e){HO(u,e);function u(){return e!==null&&e.apply(this,arguments)||this}return u.prototype.getControlGroup=function(){var a=this.props.model,f=a.resizable,o=a.properties;return f&&!o.isFolded?e.prototype.getControlGroup.call(this):null},u.prototype.getAddableShape=function(){var a=this.props.model,f=a.width,o=a.height,p=a.x,d=a.y,y=a.radius,g=a.properties;if(!g.groupAddable)return null;var E=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),T=f+E+8,P=o+E+8;return Ht.h("rect",nh(nh({},_),{width:T,height:P,x:p-T/2,y:d-P/2,rx:y,ry:y}))},u.prototype.getFoldIcon=function(){var a=this.props.model,f=a.x-a.width/2+5,o=a.y-a.height/2+5;if(!a.foldable)return null;var p=Ht.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:a.properties.isFolded?"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" M"+(f+7)+","+(o+2)+" "+(f+7)+","+(o+10):"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" "});return Ht.h("g",{},[Ht.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:a.x-a.width/2+5,y:a.y-a.height/2+5,onClick:function(){a.foldGroup(!a.properties.isFolded)}}),p])},u.prototype.getResizeShape=function(){return Ht.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},u}(gh.view);const ym={type:"group",view:$M,model:VM};var WM=-1e3,J_=-1e4,YM=function(){function e(u){var a=this,f=u.lf;this.topGroupZIndex=J_,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(p){p.children&&p.children.forEach(function(d){a.nodeGroupMap.set(d,p.id)})})},this.appendNodeToGroup=function(o){var p=o.data,d=a.nodeGroupMap.get(p.id);if(d){var y=a.lf.getNodeModelById(d);y.removeChild(p.id),a.nodeGroupMap.delete(p.id),y.setAllowAppendChild(!1)}var g=a.lf.getNodeModelById(p.id),E=g.getBounds(),_=a.getGroup(E,p);if(_){var T=_.isAllowAppendIn(p);if(!T){a.lf.emit("group:not-allowed",{group:_.getData(),node:p});return}_.addChild(p.id),a.nodeGroupMap.set(p.id,_.id),_.setAllowAppendChild(!1),g.isGroup&&(p.children.forEach(function(P){a.nodeGroupMap.set(P,p.id)}),a.nodeSelected({data:p,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var p=o.data;p.children&&p.children.forEach(function(g){a.nodeGroupMap.delete(g),a.lf.deleteNode(g)});var d=a.nodeGroupMap.get(p.id);if(d){var y=a.lf.getNodeModelById(d);y.removeChild(p.id),a.nodeGroupMap.delete(p.id)}},this.setActiveGroup=function(o){var p=o.data,d=a.lf.getNodeModelById(p.id),y=d.getBounds(),g=a.getGroup(y,p);if(a.activeGroup&&a.activeGroup.setAllowAppendChild(!1),!(!g||d.isGroup&&g.id===p.id)){var E=g.isAllowAppendIn(p);E&&(a.activeGroup=g,a.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var p=o.data,d=o.isMultiple,y=o.isSelected,g=a.lf.getNodeModelById(p.id);if(a.toFrontGroup(g),a.topGroupZIndex>WM){a.topGroupZIndex=J_;for(var E=a.lf.graphModel.nodes.filter(function(M){return M.isGroup}).sort(function(M,I){return M.zIndex-I.zIndex}),_=0,T=0;T<E.length;T++){var P=E[T];P.zIndex!==_&&(a.topGroupZIndex++,_=P.zIndex),P.setZIndex(a.topGroupZIndex)}}if(d&&y)if(g.isGroup)g.children.forEach(function(M){var I=a.lf.graphModel.getElement(M);I.setSelected(!1)});else{var A=a.nodeGroupMap.get(p.id);if(A){var N=a.lf.getNodeModelById(A);N.isSelected&&g.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(a.topGroupZIndex++,o.setZIndex(a.topGroupZIndex),o.children&&o.children.forEach(function(p){var d=a.lf.getNodeModelById(p);a.toFrontGroup(d)}))},f.register(ym),this.lf=f,f.graphModel.addNodeMoveRules(function(o,p,d){if(o.isGroup){var y=a.getNodeAllChild(o);return f.graphModel.moveNodes(y,p,d,!0),!0}var g=f.getNodeModelById(a.nodeGroupMap.get(o.id));if(g&&g.isRestrict){var E=o.getBounds(),_=E.x1,T=E.y1,P=E.x2,A=E.y2,N=g.isAllowMoveTo({x1:_+p,y1:T+d,x2:P+p,y2:A+d});return N}return!0}),f.graphModel.group=this,f.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),f.on("node:delete",this.deleteGroupChild),f.on("node:dnd-drag,node:drag",this.setActiveGroup),f.on("node:click",this.nodeSelected),f.on("graph:rendered",this.graphRendered)}return e.prototype.getNodeAllChild=function(u){var a=this,f=[];return u.children&&u.children.forEach(function(o){f.push(o);var p=a.lf.getNodeModelById(o);p.isGroup&&(f=f.concat(a.getNodeAllChild(p)))}),f},e.prototype.getGroup=function(u,a){var f=this.lf.graphModel.nodes,o=f.filter(function(y){return y.isGroup&&y.isInRange(u)&&y.id!==a.id});if(o.length!==0){if(o.length===1)return o[0];for(var p=o[o.length-1],d=o.length-2;d>=0;d--)o[d].zIndex>p.zIndex&&(p=o[d]);return p}},e.prototype.getNodeGroup=function(u){var a=this.nodeGroupMap.get(u);if(a)return this.lf.getNodeModelById(a)},e.pluginName="group",e}(),KM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};globalThis&&globalThis.__spread;var Q_=globalThis&&globalThis.__assign||function(){return Q_=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},Q_.apply(this,arguments)},eE=globalThis&&globalThis.__assign||function(){return eE=Object.assign||function(e){for(var u,a=1,f=arguments.length;a<f;a++){u=arguments[a];for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o])}return e},eE.apply(this,arguments)},qM=globalThis&&globalThis.__read||function(e,u){var a=typeof Symbol=="function"&&e[Symbol.iterator];if(!a)return e;var f=a.call(e),o,p=[],d;try{for(;(u===void 0||u-- >0)&&!(o=f.next()).done;)p.push(o.value)}catch(y){d={error:y}}finally{try{o&&!o.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}return p};globalThis&&globalThis.__spread;class ZM extends Ht.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class JM extends Ht.HtmlNode{}class QM extends RT{}class eR extends CT{}class tR extends DT{}class rR extends IT{getShape(){const u=this.props.model,a=u.getNodeStyle(),{x:f,y:o,r:p}=u;return Ht.h("circle",{...a,cx:f,cy:o,r:p,strokeWidth:5})}}class nR extends kT{constructor(u,a){const{id:f,text:o,x:p,y:d}=u;u.id=f||`Gateway_${Vi()}`,u.text=o||{value:o||"",x:p,y:d+40},super(u,a),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class oR extends LT{getShape(){const{model:u}=this.props,{x:a,y:f,width:o,height:p,points:d}=u,y=u.getNodeStyle();return Ht.h("g",{transform:`matrix(1 0 0 1 ${a-o/2} ${f-p/2})`},Ht.h("polygon",{...y,x:a,y:f,points:d}),Ht.h("line",{...y,x1:15,y1:15,x2:35,y2:35}),Ht.h("line",{...y,x1:35,y1:15,x2:15,y2:35}))}}class iR extends Ht.PolygonNodeModel{constructor(u,a){const{id:f,text:o,x:p,y:d}=u;u.id=f||`Gateway_${Vi()}`,u.text=o||{value:o||"",x:p,y:d+40},super(u,a),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class aR extends Ht.PolygonNode{getShape(){const{model:u}=this.props,{x:a,y:f,width:o,height:p,points:d}=u,y=u.getNodeStyle();return Ht.h("g",{transform:`matrix(1 0 0 1 ${a-o/2} ${f-p/2})`},Ht.h("polygon",{...y,x:a,y:f,points:d}),Ht.h("line",{...y,x1:10,y1:25,x2:40,y2:25}),Ht.h("line",{...y,x1:25,y1:10,x2:25,y2:40}))}}class uR extends FT{}class sR extends BT{}class cR extends GT{isAllowConnectedAsSource(){return!1}}class fR extends UT{}class lR extends JE{getTextPosition(){const{x:u,y:a}=this.text;return u&&a?{x:u,y:a}:this.dbClickPosition||{x:0,y:0}}}class pR extends QE{}const dR=gh.model,hR=gh.view;class yR extends dR{createId(){return`Note_${Vi()}`}initNodeData(u){super.initNodeData(u),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const u=super.getNodeStyle();return u.strokeDasharray="3 3",u.fill="transparent",u}}class vR extends hR{}class gR extends JE{getEdgeStyle(){const u=super.getEdgeStyle();return u.strokeDasharray="3 3",u}getTextPosition(){const{x:u,y:a}=this.text;return u&&a?{x:u,y:a}:this.dbClickPosition||{x:0,y:0}}}class mR extends QE{}const bR=ym.model;class _R extends bR{createId(){return`Group_${Vi()}`}initNodeData(u){super.initNodeData(u),this.resizable=!0,this.foldable=!0}addChild(u){var a,f;super.addChild(u),(f=(a=this.graphModel.nodesMap[u])==null?void 0:a.model)==null||f.setProperty("groupKey",this.id)}removeChild(u){var a,f;super.removeChild(u),(f=(a=this.graphModel.nodesMap[u])==null?void 0:a.model)==null||f.deleteProperty("groupKey")}}class ER extends ym.view{}class BI extends YM{constructor({lf:u}){super({lf:u}),u.register({type:"group",model:_R,view:ER}),u.off("node:delete",this.deleteGroupChild),u.on("node:delete",({data:a})=>{a.children&&a.children.forEach(f=>{this.nodeGroupMap.delete(f),this.lf.deleteNode(f)})})}}const OR=[{type:"process",model:ZM,view:JM},{type:"startEvent",model:QM,view:eR},{type:"endEvent",model:tR,view:rR},{type:"exclusiveGateway",model:nR,view:oR},{type:"parallelGateway",model:iR,view:aR},{type:"userTask",model:uR,view:sR},{type:"serviceTask",model:cR,view:fR},{type:"sequenceFlow",model:lR,view:pR},{type:"note",model:yR,view:vR},{type:"noteFlow",model:gR,view:mR}];class wR{constructor({lf:u}){u.batchRegister(OR),u.setDefaultEdgeType("sequenceFlow")}}r_(wR,"pluginName","bpmnExtend");var Bc;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(Bc||(Bc={}));function tE(e,u){var a=e.get(u)||0;e.set(u,a+1)}function rE(e,u){var a=e.get(u);a!==void 0&&(a=a-1,a>0?e.set(u,a):e.delete(u))}function XO(e,u,a,f){var o=String(u),p=String(a);if(!e&&o>p){var d=o;o=p,p=d}return o+Bc.EDGE_KEY_DELIM+p+Bc.EDGE_KEY_DELIM+(f===void 0?Bc.DEFAULT_EDGE_NAME:f)}function nE(e,u,a,f){var o=String(u),p=String(a),d={v:u,w:a};if(!e&&o>p){var y=d.v;d.v=d.w,d.w=y}return f!==void 0&&(d.name=f),d}function Cg(e,u){return XO(e,u.v,u.w,u.name)}function oE(e){return typeof e=="function"}var xR=function(u){return u.nodes().map(function(a){var f=u.node(a),o=u.parent(a),p={id:a,value:f,parent:o};return p.value===void 0&&delete p.value,p.parent===void 0&&delete p.parent,p})},SR=function(u){return u.edges().map(function(a){var f=u.edge(a),o={v:a.v,w:a.w,value:f,name:a.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},TR=function(u){var a={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:xR(u),edges:SR(u),value:u.graph()};return a.value===void 0&&delete a.value,a},AR=function(u){var a=new VO(u.options);return u.value!==void 0&&a.setGraph(u.value),u.nodes.forEach(function(f){a.setNode(f.id,f.value),f.parent&&a.setParent(f.id,f.parent)}),u.edges.forEach(function(f){a.setEdge(f.v,f.w,f.value,f.name)}),a};function iE(e,u){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);u&&(f=f.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,f)}return a}function aE(e){for(var u=1;u<arguments.length;u++){var a=arguments[u]!=null?arguments[u]:{};u%2?iE(Object(a),!0).forEach(function(f){PR(e,f,a[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):iE(Object(a)).forEach(function(f){Object.defineProperty(e,f,Object.getOwnPropertyDescriptor(a,f))})}return e}function PR(e,u,a){return u in e?Object.defineProperty(e,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[u]=a,e}function jR(e,u){if(!(e instanceof u))throw new TypeError("Cannot call a class as a function")}function uE(e,u){for(var a=0;a<u.length;a++){var f=u[a];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(e,f.key,f)}}function NR(e,u,a){return u&&uE(e.prototype,u),a&&uE(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}var MR={compound:!1,multigraph:!1,directed:!0},VO=function(){function e(){var u=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jR(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Bc.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return u.directed},this.isMultigraph=function(){return u.multigraph},this.isCompound=function(){return u.compound},this.setGraph=function(o){return u.label=o,u},this.graph=function(){return u.label},this.setDefaultNodeLabel=function(o){return oE(o)?u.defaultNodeLabelFn=o:u.defaultNodeLabelFn=function(){return o},u},this.nodeCount=function(){return u.nodeCountNum},this.node=function(o){return u.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(u.nodesLabelMap.keys())},this.sources=function(){return u.nodes().filter(function(o){var p;return!(!((p=u.inEdgesMap.get(o))===null||p===void 0)&&p.size)})},this.sinks=function(){return u.nodes().filter(function(o){var p;return!(!((p=u.outEdgesMap.get(o))===null||p===void 0)&&p.size)})},this.setNodes=function(o,p){return o.map(function(d){return u.setNode(d,p)}),u},this.hasNode=function(o){return u.nodesLabelMap.has(o)},this.checkCompound=function(){if(!u.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(u.isCompound()){var p,d=(p=u.parentMap)===null||p===void 0?void 0:p.get(o);if(d!==u.GRAPH_NODE)return d}},this.removeFromParentsChildList=function(o){var p=u.parentMap.get(o);u.childrenMap.get(p).delete(o)},this.setParent=function(o,p){var d,y;u.checkCompound();for(var g=p===void 0?u.GRAPH_NODE:p,E=u.parent(g);E;){if(o===E)throw new Error("Setting "+p+" as parent of "+o+" would create a cycle");E=u.parent(E)}p&&u.setNode(p),u.setNode(o),u.removeFromParentsChildList(o),(d=u.parentMap)===null||d===void 0||d.set(o,g);var _=u.childrenMap.get(g);return _.set(o,!0),(y=u.childrenMap)===null||y===void 0||y.set(g,_),u},this.children=function(o){var p=o===void 0?u.GRAPH_NODE:o;if(u.isCompound()){var d,y=(d=u.childrenMap)===null||d===void 0?void 0:d.get(p);return y?Array.from(y.keys()):void 0}if(p===u.GRAPH_NODE)return u.nodes();if(o&&u.hasNode(o))return[]},this.predecessors=function(o){var p=u.predecessorsMap.get(o);return p?Array.from(p.keys()):void 0},this.successors=function(o){var p=u.successorsMap.get(o);return p?Array.from(p.keys()):void 0},this.neighbors=function(o){var p;if(u.hasNode(o))return Array.from(new Set((p=u.predecessors(o))===null||p===void 0?void 0:p.concat(u.successors(o))))},this.isLeaf=function(o){var p;if(u.isDirected()){var d;return!(!((d=u.successors(o))===null||d===void 0)&&d.length)}return!(!((p=u.neighbors(o))===null||p===void 0)&&p.length)},this.filterNodes=function(o){var p=u.directed,d=u.multigraph,y=u.compound,g=new e({directed:p,multigraph:d,compound:y});if(g.setGraph(u.graph()),u.nodes().forEach(function(_){o(_)&&g.setNode(_,u.node(_))}),u.edges().forEach(function(_){g.hasNode(_.v)&&g.hasNode(_.w)&&g.setEdgeObj(_,u.edge(_))}),y){var E=function(T){for(var P=u.parent(T);P!==void 0&&!g.hasNode(P);)P=u.parent(P);return P};g.nodes().forEach(function(_){g.setParent(_,E(_))})}return g},this.setDefaultEdgeLabel=function(o){return oE(o)?u.defaultEdgeLabelFn=o:u.defaultEdgeLabelFn=function(){return o},u},this.edgeCount=function(){return u.edgeCountNum},this.setEdgeObj=function(o,p){return u.setEdge(o.v,o.w,p,o.name)},this.setPath=function(o,p){return o.reduce(function(d,y){return u.setEdge(d,y,p),y}),u},this.edgeFromArgs=function(o,p,d){return u.edge({v:o,w:p,name:d})},this.edge=function(o){return u.edgesLabelsMap.get(Cg(u.isDirected(),o))},this.hasEdge=function(o,p,d){return u.edgesLabelsMap.has(Cg(u.isDirected(),{v:o,w:p,name:d}))},this.removeEdgeObj=function(o){var p=o.v,d=o.w,y=o.name;return u.removeEdge(p,d,y)},this.edges=function(){return Array.from(u.edgesMap.values())},this.inEdges=function(o,p){var d=u.inEdgesMap.get(o);if(d)return Array.from(d.values()).filter(function(y){return!p||y.v===p})},this.outEdges=function(o,p){var d=u.outEdgesMap.get(o);if(d)return Array.from(d.values()).filter(function(y){return!p||y.w===p})},this.nodeEdges=function(o,p){var d;if(u.hasNode(o))return(d=u.inEdges(o,p))===null||d===void 0?void 0:d.concat(u.outEdges(o,p))},this.toJSON=function(){return TR(u)},this.nodeInDegree=function(o){var p=u.inEdgesMap.get(o);return p?p.size:0},this.nodeOutDegree=function(o){var p=u.outEdgesMap.get(o);return p?p.size:0},this.nodeDegree=function(o){return u.nodeInDegree(o)+u.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var f=aE(aE({},MR),a);this.compound=f.compound,this.directed=f.directed,this.multigraph=f.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return NR(e,[{key:"setNode",value:function(a,f){var o=this.nodesLabelMap,p=this.defaultNodeLabelFn,d=this.isCompound,y=this.parentMap,g=this.childrenMap,E=this.inEdgesMap,_=this.outEdgesMap,T=this.predecessorsMap,P=this.successorsMap;if(o.has(a))return f!==void 0&&o.set(a,f),this;if(o.set(a,f||p(a)),d()){var A;y==null||y.set(a,this.GRAPH_NODE),g==null||g.set(a,new Map),g!=null&&g.has(this.GRAPH_NODE)||g==null||g.set(this.GRAPH_NODE,new Map),g==null||(A=g.get(this.GRAPH_NODE))===null||A===void 0||A.set(a,!0)}return[E,_,T,P].forEach(function(N){return N.set(a,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(a){var f=this;if(this.hasNode(a)){var o=function(I){f.removeEdge(I.v,I.w,I.name)},p=this.inEdgesMap,d=this.outEdgesMap,y=this.predecessorsMap,g=this.successorsMap,E=this.nodesLabelMap;if(this.isCompound()){var _,T,P;this.removeFromParentsChildList(a),(_=this.parentMap)===null||_===void 0||_.delete(a),(T=this.children(a))===null||T===void 0||T.forEach(function(M){return f.setParent(M)}),(P=this.childrenMap)===null||P===void 0||P.delete(a)}var A=p.get(a),N=d.get(a);Array.from(A.values()).forEach(function(M){return o(M)}),Array.from(N.values()).forEach(function(M){return o(M)}),E.delete(a),p.delete(a),d.delete(a),y.delete(a),g.delete(a),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(a,f,o,p){var d,y,g=nE(this.isDirected(),a,f,p),E=Cg(this.isDirected(),g),_=g.v,T=g.w;if(this.edgesLabelsMap.has(E))return this.edgesLabelsMap.set(E,o),this;if(p!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(T),this.edgesLabelsMap.set(E,o||this.defaultEdgeLabelFn(_,T,p)),Object.freeze(g),this.edgesMap.set(E,g);var P=this.predecessorsMap.get(T),A=this.successorsMap.get(_);return tE(P,_),tE(A,T),(d=this.inEdgesMap.get(T))===null||d===void 0||d.set(E,g),(y=this.outEdgesMap.get(_))===null||y===void 0||y.set(E,g),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(a,f,o){var p=XO(this.isDirected(),a,f,o),d=this.edgesMap.get(p);if(d){var y=nE(this.isDirected(),a,f,o),g=y.v,E=y.w;this.edgesLabelsMap.delete(p),this.edgesMap.delete(p);var _=this.predecessorsMap.get(E),T=this.successorsMap.get(g);rE(_,g),rE(T,E),this.inEdgesMap.get(E).delete(p),this.outEdgesMap.get(g).delete(p),this.edgeCountNum-=1}return this}}]),e}();VO.fromJSON=AR;var sE,cE,fE,lE;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(sE||(sE={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(cE||(cE={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(fE||(fE={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(lE||(lE={}));var Ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vm(e,u){return e(u={exports:{}},u.exports),u.exports}var RR=function(){this.__data__=[],this.size=0},Jc=function(e,u){return e===u||e!=e&&u!=u},mh=function(e,u){for(var a=e.length;a--;)if(Jc(e[a][0],u))return a;return-1},CR=Array.prototype.splice,DR=function(e){var u=this.__data__,a=mh(u,e);return!(a<0)&&(a==u.length-1?u.pop():CR.call(u,a,1),--this.size,!0)},IR=function(e){var u=this.__data__,a=mh(u,e);return a<0?void 0:u[a][1]},kR=function(e){return mh(this.__data__,e)>-1},LR=function(e,u){var a=this.__data__,f=mh(a,e);return f<0?(++this.size,a.push([e,u])):a[f][1]=u,this};function Rc(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}Rc.prototype.clear=RR,Rc.prototype.delete=DR,Rc.prototype.get=IR,Rc.prototype.has=kR,Rc.prototype.set=LR;var bh=Rc,FR=function(){this.__data__=new bh,this.size=0},BR=function(e){var u=this.__data__,a=u.delete(e);return this.size=u.size,a},GR=function(e){return this.__data__.get(e)},UR=function(e){return this.__data__.has(e)},$O=typeof Ud=="object"&&Ud&&Ud.Object===Object&&Ud,zR=typeof self=="object"&&self&&self.Object===Object&&self,bi=$O||zR||Function("return this")(),ii=bi.Symbol,WO=Object.prototype,HR=WO.hasOwnProperty,XR=WO.toString,wl=ii?ii.toStringTag:void 0,VR=function(e){var u=HR.call(e,wl),a=e[wl];try{e[wl]=void 0;var f=!0}catch{}var o=XR.call(e);return f&&(u?e[wl]=a:delete e[wl]),o},$R=Object.prototype.toString,WR=function(e){return $R.call(e)},pE=ii?ii.toStringTag:void 0,du=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":pE&&pE in Object(e)?VR(e):WR(e)},Io=function(e){var u=typeof e;return e!=null&&(u=="object"||u=="function")},dE,Bl=function(e){if(!Io(e))return!1;var u=du(e);return u=="[object Function]"||u=="[object GeneratorFunction]"||u=="[object AsyncFunction]"||u=="[object Proxy]"},Dg=bi["__core-js_shared__"],hE=(dE=/[^.]+$/.exec(Dg&&Dg.keys&&Dg.keys.IE_PROTO||""))?"Symbol(src)_1."+dE:"",YR=function(e){return!!hE&&hE in e},KR=Function.prototype.toString,ys=function(e){if(e!=null){try{return KR.call(e)}catch{}try{return e+""}catch{}}return""},qR=/^\[object .+?Constructor\]$/,ZR=Function.prototype,JR=Object.prototype,QR=ZR.toString,eC=JR.hasOwnProperty,tC=RegExp("^"+QR.call(eC).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rC=function(e){return!(!Io(e)||YR(e))&&(Bl(e)?tC:qR).test(ys(e))},nC=function(e,u){return e==null?void 0:e[u]},vs=function(e,u){var a=nC(e,u);return rC(a)?a:void 0},Il=vs(bi,"Map"),kl=vs(Object,"create"),oC=function(){this.__data__=kl?kl(null):{},this.size=0},iC=function(e){var u=this.has(e)&&delete this.__data__[e];return this.size-=u?1:0,u},aC=Object.prototype.hasOwnProperty,uC=function(e){var u=this.__data__;if(kl){var a=u[e];return a==="__lodash_hash_undefined__"?void 0:a}return aC.call(u,e)?u[e]:void 0},sC=Object.prototype.hasOwnProperty,cC=function(e){var u=this.__data__;return kl?u[e]!==void 0:sC.call(u,e)},fC=function(e,u){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=kl&&u===void 0?"__lodash_hash_undefined__":u,this};function Cc(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}Cc.prototype.clear=oC,Cc.prototype.delete=iC,Cc.prototype.get=uC,Cc.prototype.has=cC,Cc.prototype.set=fC;var yE=Cc,lC=function(){this.size=0,this.__data__={hash:new yE,map:new(Il||bh),string:new yE}},pC=function(e){var u=typeof e;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?e!=="__proto__":e===null},_h=function(e,u){var a=e.__data__;return pC(u)?a[typeof u=="string"?"string":"hash"]:a.map},dC=function(e){var u=_h(this,e).delete(e);return this.size-=u?1:0,u},hC=function(e){return _h(this,e).get(e)},yC=function(e){return _h(this,e).has(e)},vC=function(e,u){var a=_h(this,e),f=a.size;return a.set(e,u),this.size+=a.size==f?0:1,this};function Dc(e){var u=-1,a=e==null?0:e.length;for(this.clear();++u<a;){var f=e[u];this.set(f[0],f[1])}}Dc.prototype.clear=lC,Dc.prototype.delete=dC,Dc.prototype.get=hC,Dc.prototype.has=yC,Dc.prototype.set=vC;var Eh=Dc,gC=function(e,u){var a=this.__data__;if(a instanceof bh){var f=a.__data__;if(!Il||f.length<199)return f.push([e,u]),this.size=++a.size,this;a=this.__data__=new Eh(f)}return a.set(e,u),this.size=a.size,this};function Ic(e){var u=this.__data__=new bh(e);this.size=u.size}Ic.prototype.clear=FR,Ic.prototype.delete=BR,Ic.prototype.get=GR,Ic.prototype.has=UR,Ic.prototype.set=gC;var Gc=Ic,gm=function(e,u){for(var a=-1,f=e==null?0:e.length;++a<f&&u(e[a],a,e)!==!1;);return e},oh=function(){try{var e=vs(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Oh=function(e,u,a){u=="__proto__"&&oh?oh(e,u,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[u]=a},mC=Object.prototype.hasOwnProperty,wh=function(e,u,a){var f=e[u];mC.call(e,u)&&Jc(f,a)&&(a!==void 0||u in e)||Oh(e,u,a)},Gl=function(e,u,a,f){var o=!a;a||(a={});for(var p=-1,d=u.length;++p<d;){var y=u[p],g=f?f(a[y],e[y],y,a,e):void 0;g===void 0&&(g=e[y]),o?Oh(a,y,g):wh(a,y,g)}return a},bC=function(e,u){for(var a=-1,f=Array(e);++a<e;)f[a]=u(a);return f},gi=function(e){return e!=null&&typeof e=="object"},vE=function(e){return gi(e)&&du(e)=="[object Arguments]"},YO=Object.prototype,_C=YO.hasOwnProperty,EC=YO.propertyIsEnumerable,$c=vE(function(){return arguments}())?vE:function(e){return gi(e)&&_C.call(e,"callee")&&!EC.call(e,"callee")},Pn=Array.isArray,OC=function(){return!1},fs=vm(function(e,u){var a=u&&!u.nodeType&&u,f=a&&e&&!e.nodeType&&e,o=f&&f.exports===a?bi.Buffer:void 0,p=(o?o.isBuffer:void 0)||OC;e.exports=p}),wC=/^(?:0|[1-9]\d*)$/,xh=function(e,u){var a=typeof e;return!!(u=u??9007199254740991)&&(a=="number"||a!="symbol"&&wC.test(e))&&e>-1&&e%1==0&&e<u},mm=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},pn={};pn["[object Float32Array]"]=pn["[object Float64Array]"]=pn["[object Int8Array]"]=pn["[object Int16Array]"]=pn["[object Int32Array]"]=pn["[object Uint8Array]"]=pn["[object Uint8ClampedArray]"]=pn["[object Uint16Array]"]=pn["[object Uint32Array]"]=!0,pn["[object Arguments]"]=pn["[object Array]"]=pn["[object ArrayBuffer]"]=pn["[object Boolean]"]=pn["[object DataView]"]=pn["[object Date]"]=pn["[object Error]"]=pn["[object Function]"]=pn["[object Map]"]=pn["[object Number]"]=pn["[object Object]"]=pn["[object RegExp]"]=pn["[object Set]"]=pn["[object String]"]=pn["[object WeakMap]"]=!1;var xC=function(e){return gi(e)&&mm(e.length)&&!!pn[du(e)]},Sh=function(e){return function(u){return e(u)}},Wc=vm(function(e,u){var a=u&&!u.nodeType&&u,f=a&&e&&!e.nodeType&&e,o=f&&f.exports===a&&$O.process,p=function(){try{var d=f&&f.require&&f.require("util").types;return d||o&&o.binding&&o.binding("util")}catch{}}();e.exports=p}),gE=Wc&&Wc.isTypedArray,Ul=gE?Sh(gE):xC,SC=Object.prototype.hasOwnProperty,KO=function(e,u){var a=Pn(e),f=!a&&$c(e),o=!a&&!f&&fs(e),p=!a&&!f&&!o&&Ul(e),d=a||f||o||p,y=d?bC(e.length,String):[],g=y.length;for(var E in e)!u&&!SC.call(e,E)||d&&(E=="length"||o&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||xh(E,g))||y.push(E);return y},TC=Object.prototype,Th=function(e){var u=e&&e.constructor;return e===(typeof u=="function"&&u.prototype||TC)},qO=function(e,u){return function(a){return e(u(a))}},AC=qO(Object.keys,Object),PC=Object.prototype.hasOwnProperty,bm=function(e){if(!Th(e))return AC(e);var u=[];for(var a in Object(e))PC.call(e,a)&&a!="constructor"&&u.push(a);return u},xa=function(e){return e!=null&&mm(e.length)&&!Bl(e)},hu=function(e){return xa(e)?KO(e):bm(e)},jC=function(e,u){return e&&Gl(u,hu(u),e)},NC=function(e){var u=[];if(e!=null)for(var a in Object(e))u.push(a);return u},MC=Object.prototype.hasOwnProperty,RC=function(e){if(!Io(e))return NC(e);var u=Th(e),a=[];for(var f in e)(f!="constructor"||!u&&MC.call(e,f))&&a.push(f);return a},gs=function(e){return xa(e)?KO(e,!0):RC(e)},CC=function(e,u){return e&&Gl(u,gs(u),e)},ZO=vm(function(e,u){var a=u&&!u.nodeType&&u,f=a&&e&&!e.nodeType&&e,o=f&&f.exports===a?bi.Buffer:void 0,p=o?o.allocUnsafe:void 0;e.exports=function(d,y){if(y)return d.slice();var g=d.length,E=p?p(g):new d.constructor(g);return d.copy(E),E}}),JO=function(e,u){var a=-1,f=e.length;for(u||(u=Array(f));++a<f;)u[a]=e[a];return u},QO=function(e,u){for(var a=-1,f=e==null?0:e.length,o=0,p=[];++a<f;){var d=e[a];u(d,a,e)&&(p[o++]=d)}return p},e1=function(){return[]},DC=Object.prototype.propertyIsEnumerable,mE=Object.getOwnPropertySymbols,_m=mE?function(e){return e==null?[]:(e=Object(e),QO(mE(e),function(u){return DC.call(e,u)}))}:e1,IC=function(e,u){return Gl(e,_m(e),u)},Em=function(e,u){for(var a=-1,f=u.length,o=e.length;++a<f;)e[o+a]=u[a];return e},Ah=qO(Object.getPrototypeOf,Object),t1=Object.getOwnPropertySymbols?function(e){for(var u=[];e;)Em(u,_m(e)),e=Ah(e);return u}:e1,kC=function(e,u){return Gl(e,t1(e),u)},r1=function(e,u,a){var f=u(e);return Pn(e)?f:Em(f,a(e))},Kg=function(e){return r1(e,hu,_m)},LC=function(e){return r1(e,gs,t1)},qg=vs(bi,"DataView"),Zg=vs(bi,"Promise"),Uc=vs(bi,"Set"),Jg=vs(bi,"WeakMap"),FC=ys(qg),BC=ys(Il),GC=ys(Zg),UC=ys(Uc),zC=ys(Jg),as=du;(qg&&as(new qg(new ArrayBuffer(1)))!="[object DataView]"||Il&&as(new Il)!="[object Map]"||Zg&&as(Zg.resolve())!="[object Promise]"||Uc&&as(new Uc)!="[object Set]"||Jg&&as(new Jg)!="[object WeakMap]")&&(as=function(e){var u=du(e),a=u=="[object Object]"?e.constructor:void 0,f=a?ys(a):"";if(f)switch(f){case FC:return"[object DataView]";case BC:return"[object Map]";case GC:return"[object Promise]";case UC:return"[object Set]";case zC:return"[object WeakMap]"}return u});var ls=as,HC=Object.prototype.hasOwnProperty,XC=function(e){var u=e.length,a=new e.constructor(u);return u&&typeof e[0]=="string"&&HC.call(e,"index")&&(a.index=e.index,a.input=e.input),a},ih=bi.Uint8Array,Om=function(e){var u=new e.constructor(e.byteLength);return new ih(u).set(new ih(e)),u},VC=function(e,u){var a=u?Om(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)},$C=/\w*$/,WC=function(e){var u=new e.constructor(e.source,$C.exec(e));return u.lastIndex=e.lastIndex,u},bE=ii?ii.prototype:void 0,_E=bE?bE.valueOf:void 0,YC=function(e){return _E?Object(_E.call(e)):{}},n1=function(e,u){var a=u?Om(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)},KC=function(e,u,a){var f=e.constructor;switch(u){case"[object ArrayBuffer]":return Om(e);case"[object Boolean]":case"[object Date]":return new f(+e);case"[object DataView]":return VC(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return n1(e,a);case"[object Map]":return new f;case"[object Number]":case"[object String]":return new f(e);case"[object RegExp]":return WC(e);case"[object Set]":return new f;case"[object Symbol]":return YC(e)}},EE=Object.create,o1=function(){function e(){}return function(u){if(!Io(u))return{};if(EE)return EE(u);e.prototype=u;var a=new e;return e.prototype=void 0,a}}(),i1=function(e){return typeof e.constructor!="function"||Th(e)?{}:o1(Ah(e))},qC=function(e){return gi(e)&&ls(e)=="[object Map]"},OE=Wc&&Wc.isMap,ZC=OE?Sh(OE):qC,JC=function(e){return gi(e)&&ls(e)=="[object Set]"},wE=Wc&&Wc.isSet,QC=wE?Sh(wE):JC,an={};an["[object Arguments]"]=an["[object Array]"]=an["[object ArrayBuffer]"]=an["[object DataView]"]=an["[object Boolean]"]=an["[object Date]"]=an["[object Float32Array]"]=an["[object Float64Array]"]=an["[object Int8Array]"]=an["[object Int16Array]"]=an["[object Int32Array]"]=an["[object Map]"]=an["[object Number]"]=an["[object Object]"]=an["[object RegExp]"]=an["[object Set]"]=an["[object String]"]=an["[object Symbol]"]=an["[object Uint8Array]"]=an["[object Uint8ClampedArray]"]=an["[object Uint16Array]"]=an["[object Uint32Array]"]=!0,an["[object Error]"]=an["[object Function]"]=an["[object WeakMap]"]=!1;var a1=function e(u,a,f,o,p,d){var y,g=1&a,E=2&a,_=4&a;if(f&&(y=p?f(u,o,p,d):f(u)),y!==void 0)return y;if(!Io(u))return u;var T=Pn(u);if(T){if(y=XC(u),!g)return JO(u,y)}else{var P=ls(u),A=P=="[object Function]"||P=="[object GeneratorFunction]";if(fs(u))return ZO(u,g);if(P=="[object Object]"||P=="[object Arguments]"||A&&!p){if(y=E||A?{}:i1(u),!g)return E?kC(u,CC(y,u)):IC(u,jC(y,u))}else{if(!an[P])return p?u:{};y=KC(u,P,g)}}d||(d=new Gc);var N=d.get(u);if(N)return N;d.set(u,y),QC(u)?u.forEach(function(I){y.add(e(I,a,f,I,u,d))}):ZC(u)&&u.forEach(function(I,G){y.set(G,e(I,a,f,G,u,d))});var M=T?void 0:(_?E?LC:Kg:E?gs:hu)(u);return gm(M||u,function(I,G){M&&(I=u[G=I]),wh(y,G,e(I,a,f,G,u,d))}),y},eD=function(e){return a1(e,4)},wm=function(e){return function(){return e}},xm=function(e){return function(u,a,f){for(var o=-1,p=Object(u),d=f(u),y=d.length;y--;){var g=d[e?y:++o];if(a(p[g],g,p)===!1)break}return u}}(),Sm=function(e,u){return e&&xm(e,u,hu)},Ph=function(e,u){return function(a,f){if(a==null)return a;if(!xa(a))return e(a,f);for(var o=a.length,p=u?o:-1,d=Object(a);(u?p--:++p<o)&&f(d[p],p,d)!==!1;);return a}}(Sm),ms=function(e){return e},u1=function(e){return typeof e=="function"?e:ms},s1=function(e,u){return(Pn(e)?gm:Ph)(e,u1(u))},c1=s1,tD=function(e,u){var a=[];return Ph(e,function(f,o,p){u(f,o,p)&&a.push(f)}),a},rD=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},nD=function(e){return this.__data__.has(e)};function Yd(e){var u=-1,a=e==null?0:e.length;for(this.__data__=new Eh;++u<a;)this.add(e[u])}Yd.prototype.add=Yd.prototype.push=rD,Yd.prototype.has=nD;var f1=Yd,oD=function(e,u){for(var a=-1,f=e==null?0:e.length;++a<f;)if(u(e[a],a,e))return!0;return!1},l1=function(e,u){return e.has(u)},p1=function(e,u,a,f,o,p){var d=1&a,y=e.length,g=u.length;if(y!=g&&!(d&&g>y))return!1;var E=p.get(e),_=p.get(u);if(E&&_)return E==u&&_==e;var T=-1,P=!0,A=2&a?new f1:void 0;for(p.set(e,u),p.set(u,e);++T<y;){var N=e[T],M=u[T];if(f)var I=d?f(M,N,T,u,e,p):f(N,M,T,e,u,p);if(I!==void 0){if(I)continue;P=!1;break}if(A){if(!oD(u,function(G,W){if(!l1(A,W)&&(N===G||o(N,G,a,f,p)))return A.push(W)})){P=!1;break}}else if(N!==M&&!o(N,M,a,f,p)){P=!1;break}}return p.delete(e),p.delete(u),P},iD=function(e){var u=-1,a=Array(e.size);return e.forEach(function(f,o){a[++u]=[o,f]}),a},Tm=function(e){var u=-1,a=Array(e.size);return e.forEach(function(f){a[++u]=f}),a},xE=ii?ii.prototype:void 0,Ig=xE?xE.valueOf:void 0,aD=function(e,u,a,f,o,p,d){switch(a){case"[object DataView]":if(e.byteLength!=u.byteLength||e.byteOffset!=u.byteOffset)return!1;e=e.buffer,u=u.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=u.byteLength||!p(new ih(e),new ih(u)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Jc(+e,+u);case"[object Error]":return e.name==u.name&&e.message==u.message;case"[object RegExp]":case"[object String]":return e==u+"";case"[object Map]":var y=iD;case"[object Set]":var g=1&f;if(y||(y=Tm),e.size!=u.size&&!g)return!1;var E=d.get(e);if(E)return E==u;f|=2,d.set(e,u);var _=p1(y(e),y(u),f,o,p,d);return d.delete(e),_;case"[object Symbol]":if(Ig)return Ig.call(e)==Ig.call(u)}return!1},uD=Object.prototype.hasOwnProperty,sD=function(e,u,a,f,o,p){var d=1&a,y=Kg(e),g=y.length;if(g!=Kg(u).length&&!d)return!1;for(var E=g;E--;){var _=y[E];if(!(d?_ in u:uD.call(u,_)))return!1}var T=p.get(e),P=p.get(u);if(T&&P)return T==u&&P==e;var A=!0;p.set(e,u),p.set(u,e);for(var N=d;++E<g;){var M=e[_=y[E]],I=u[_];if(f)var G=d?f(I,M,_,u,e,p):f(M,I,_,e,u,p);if(!(G===void 0?M===I||o(M,I,a,f,p):G)){A=!1;break}N||(N=_=="constructor")}if(A&&!N){var W=e.constructor,de=u.constructor;W==de||!("constructor"in e)||!("constructor"in u)||typeof W=="function"&&W instanceof W&&typeof de=="function"&&de instanceof de||(A=!1)}return p.delete(e),p.delete(u),A},SE=Object.prototype.hasOwnProperty,cD=function(e,u,a,f,o,p){var d=Pn(e),y=Pn(u),g=d?"[object Array]":ls(e),E=y?"[object Array]":ls(u),_=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",T=(E=E=="[object Arguments]"?"[object Object]":E)=="[object Object]",P=g==E;if(P&&fs(e)){if(!fs(u))return!1;d=!0,_=!1}if(P&&!_)return p||(p=new Gc),d||Ul(e)?p1(e,u,a,f,o,p):aD(e,u,g,a,f,o,p);if(!(1&a)){var A=_&&SE.call(e,"__wrapped__"),N=T&&SE.call(u,"__wrapped__");if(A||N){var M=A?e.value():e,I=N?u.value():u;return p||(p=new Gc),o(M,I,a,f,p)}}return!!P&&(p||(p=new Gc),sD(e,u,a,f,o,p))},d1=function e(u,a,f,o,p){return u===a||(u==null||a==null||!gi(u)&&!gi(a)?u!=u&&a!=a:cD(u,a,f,o,e,p))},fD=function(e,u,a,f){var o=a.length,p=o,d=!f;if(e==null)return!p;for(e=Object(e);o--;){var y=a[o];if(d&&y[2]?y[1]!==e[y[0]]:!(y[0]in e))return!1}for(;++o<p;){var g=(y=a[o])[0],E=e[g],_=y[1];if(d&&y[2]){if(E===void 0&&!(g in e))return!1}else{var T=new Gc;if(f)var P=f(E,_,g,e,u,T);if(!(P===void 0?d1(_,E,3,f,T):P))return!1}}return!0},h1=function(e){return e==e&&!Io(e)},lD=function(e){for(var u=hu(e),a=u.length;a--;){var f=u[a],o=e[f];u[a]=[f,o,h1(o)]}return u},y1=function(e,u){return function(a){return a!=null&&a[e]===u&&(u!==void 0||e in Object(a))}},pD=function(e){var u=lD(e);return u.length==1&&u[0][2]?y1(u[0][0],u[0][1]):function(a){return a===e||fD(a,e,u)}},ps=function(e){return typeof e=="symbol"||gi(e)&&du(e)=="[object Symbol]"},dD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hD=/^\w*$/,Am=function(e,u){if(Pn(e))return!1;var a=typeof e;return!(a!="number"&&a!="symbol"&&a!="boolean"&&e!=null&&!ps(e))||hD.test(e)||!dD.test(e)||u!=null&&e in Object(u)};function Pm(e,u){if(typeof e!="function"||u!=null&&typeof u!="function")throw new TypeError("Expected a function");var a=function(){var f=arguments,o=u?u.apply(this,f):f[0],p=a.cache;if(p.has(o))return p.get(o);var d=e.apply(this,f);return a.cache=p.set(o,d)||p,d};return a.cache=new(Pm.Cache||Eh),a}Pm.Cache=Eh;var yD=Pm,vD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gD=/\\(\\)?/g,mD=function(e){var u=yD(e,function(f){return a.size===500&&a.clear(),f}),a=u.cache;return u}(function(e){var u=[];return e.charCodeAt(0)===46&&u.push(""),e.replace(vD,function(a,f,o,p){u.push(o?p.replace(gD,"$1"):f||a)}),u}),zc=function(e,u){for(var a=-1,f=e==null?0:e.length,o=Array(f);++a<f;)o[a]=u(e[a],a,e);return o},TE=ii?ii.prototype:void 0,AE=TE?TE.toString:void 0,bD=function e(u){if(typeof u=="string")return u;if(Pn(u))return zc(u,e)+"";if(ps(u))return AE?AE.call(u):"";var a=u+"";return a=="0"&&1/u==-1/0?"-0":a},v1=function(e){return e==null?"":bD(e)},jh=function(e,u){return Pn(e)?e:Am(e,u)?[e]:mD(v1(e))},zl=function(e){if(typeof e=="string"||ps(e))return e;var u=e+"";return u=="0"&&1/e==-1/0?"-0":u},Nh=function(e,u){for(var a=0,f=(u=jh(u,e)).length;e!=null&&a<f;)e=e[zl(u[a++])];return a&&a==f?e:void 0},_D=function(e,u,a){var f=e==null?void 0:Nh(e,u);return f===void 0?a:f},ED=function(e,u){return e!=null&&u in Object(e)},g1=function(e,u,a){for(var f=-1,o=(u=jh(u,e)).length,p=!1;++f<o;){var d=zl(u[f]);if(!(p=e!=null&&a(e,d)))break;e=e[d]}return p||++f!=o?p:!!(o=e==null?0:e.length)&&mm(o)&&xh(d,o)&&(Pn(e)||$c(e))},m1=function(e,u){return e!=null&&g1(e,u,ED)},OD=function(e,u){return Am(e)&&h1(u)?y1(zl(e),u):function(a){var f=_D(a,e);return f===void 0&&f===u?m1(a,e):d1(u,f,3)}},b1=function(e){return function(u){return u==null?void 0:u[e]}},wD=function(e){return function(u){return Nh(u,e)}},xD=function(e){return Am(e)?b1(zl(e)):wD(e)},Sa=function(e){return typeof e=="function"?e:e==null?ms:typeof e=="object"?Pn(e)?OD(e[0],e[1]):pD(e):xD(e)},_1=function(e,u){return(Pn(e)?QO:tD)(e,Sa(u))},SD=Object.prototype.hasOwnProperty,TD=function(e,u){return e!=null&&SD.call(e,u)},E1=function(e,u){return e!=null&&g1(e,u,TD)},AD=Object.prototype.hasOwnProperty,PD=function(e){if(e==null)return!0;if(xa(e)&&(Pn(e)||typeof e=="string"||typeof e.splice=="function"||fs(e)||Ul(e)||$c(e)))return!e.length;var u=ls(e);if(u=="[object Map]"||u=="[object Set]")return!e.size;if(Th(e))return!bm(e).length;for(var a in e)if(AD.call(e,a))return!1;return!0},O1=function(e){return e===void 0},w1=function(e,u){var a=-1,f=xa(e)?Array(e.length):[];return Ph(e,function(o,p,d){f[++a]=u(o,p,d)}),f},x1=function(e,u){return(Pn(e)?zc:w1)(e,Sa(u))},jD=function(e,u,a,f){var o=-1,p=e==null?0:e.length;for(f&&p&&(a=e[++o]);++o<p;)a=u(a,e[o],o,e);return a},ND=function(e,u,a,f,o){return o(e,function(p,d,y){a=f?(f=!1,p):u(a,p,d,y)}),a},S1=function(e,u,a){var f=Pn(e)?jD:ND,o=arguments.length<3;return f(e,Sa(u),a,o,Ph)},MD=function(e){return typeof e=="string"||!Pn(e)&&gi(e)&&du(e)=="[object String]"},RD=b1("length"),CD=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),DD=function(e){return CD.test(e)},ID="[\\ud800-\\udfff]",Qg="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",em="\\ud83c[\\udffb-\\udfff]",T1="[^\\ud800-\\udfff]",A1="(?:\\ud83c[\\udde6-\\uddff]){2}",P1="[\\ud800-\\udbff][\\udc00-\\udfff]",PE="(?:"+Qg+"|"+em+")?",kD="[\\ufe0e\\ufe0f]?"+PE+("(?:\\u200d(?:"+[T1,A1,P1].join("|")+")[\\ufe0e\\ufe0f]?"+PE+")*"),LD="(?:"+[T1+Qg+"?",Qg,A1,P1,ID].join("|")+")",jE=RegExp(em+"(?="+em+")|"+LD+kD,"g"),FD=function(e){for(var u=jE.lastIndex=0;jE.test(e);)++u;return u},BD=function(e){return DD(e)?FD(e):RD(e)},GD=function(e){if(e==null)return 0;if(xa(e))return MD(e)?BD(e):e.length;var u=ls(e);return u=="[object Map]"||u=="[object Set]"?e.size:bm(e).length},UD=function(e,u,a){var f=Pn(e),o=f||fs(e)||Ul(e);if(u=Sa(u),a==null){var p=e&&e.constructor;a=o?f?new p:[]:Io(e)&&Bl(p)?o1(Ah(e)):{}}return(o?gm:Sm)(e,function(d,y,g){return u(a,d,y,g)}),a},NE=ii?ii.isConcatSpreadable:void 0,zD=function(e){return Pn(e)||$c(e)||!!(NE&&e&&e[NE])},jm=function e(u,a,f,o,p){var d=-1,y=u.length;for(f||(f=zD),p||(p=[]);++d<y;){var g=u[d];a>0&&f(g)?a>1?e(g,a-1,f,o,p):Em(p,g):o||(p[p.length]=g)}return p},HD=function(e,u,a){switch(a.length){case 0:return e.call(u);case 1:return e.call(u,a[0]);case 2:return e.call(u,a[0],a[1]);case 3:return e.call(u,a[0],a[1],a[2])}return e.apply(u,a)},ME=Math.max,j1=function(e,u,a){return u=ME(u===void 0?e.length-1:u,0),function(){for(var f=arguments,o=-1,p=ME(f.length-u,0),d=Array(p);++o<p;)d[o]=f[u+o];o=-1;for(var y=Array(u+1);++o<u;)y[o]=f[o];return y[u]=a(d),HD(e,this,y)}},XD=oh?function(e,u){return oh(e,"toString",{configurable:!0,enumerable:!1,value:wm(u),writable:!0})}:ms,VD=Date.now,N1=function(e){var u=0,a=0;return function(){var f=VD(),o=16-(f-a);if(a=f,o>0){if(++u>=800)return arguments[0]}else u=0;return e.apply(void 0,arguments)}}(XD),Mh=function(e,u){return N1(j1(e,u,ms),e+"")},M1=function(e,u,a,f){for(var o=e.length,p=a+(f?1:-1);f?p--:++p<o;)if(u(e[p],p,e))return p;return-1},$D=function(e){return e!=e},WD=function(e,u,a){for(var f=a-1,o=e.length;++f<o;)if(e[f]===u)return f;return-1},YD=function(e,u,a){return u==u?WD(e,u,a):M1(e,$D,a)},KD=function(e,u){return!!(e!=null&&e.length)&&YD(e,u,0)>-1},qD=function(e,u,a){for(var f=-1,o=e==null?0:e.length;++f<o;)if(a(u,e[f]))return!0;return!1},ZD=function(){},JD=Uc&&1/Tm(new Uc([,-0]))[1]==1/0?function(e){return new Uc(e)}:ZD,QD=function(e,u,a){var f=-1,o=KD,p=e.length,d=!0,y=[],g=y;if(a)d=!1,o=qD;else if(p>=200){var E=u?null:JD(e);if(E)return Tm(E);d=!1,o=l1,g=new f1}else g=u?[]:y;e:for(;++f<p;){var _=e[f],T=u?u(_):_;if(_=a||_!==0?_:0,d&&T==T){for(var P=g.length;P--;)if(g[P]===T)continue e;u&&g.push(T),y.push(_)}else o(g,T,a)||(g!==y&&g.push(T),y.push(_))}return y},R1=function(e){return gi(e)&&xa(e)},e2=Mh(function(e){return QD(jm(e,1,R1,!0))}),t2=function(e,u){return zc(u,function(a){return e[a]})},ah,C1=function(e){return e==null?[]:t2(e,hu(e))};try{ah={clone:eD,constant:wm,each:c1,filter:_1,has:E1,isArray:Pn,isEmpty:PD,isFunction:Bl,isUndefined:O1,keys:hu,map:x1,reduce:S1,size:GD,transform:UD,union:e2,values:C1}}catch{}ah||(ah=window._);var Lt=ah,Nm=Lr;function Lr(e){this._isDirected=!Lt.has(e,"directed")||e.directed,this._isMultigraph=!!Lt.has(e,"multigraph")&&e.multigraph,this._isCompound=!!Lt.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=Lt.constant(void 0),this._defaultEdgeLabelFn=Lt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function RE(e,u){e[u]?e[u]++:e[u]=1}function CE(e,u){--e[u]||delete e[u]}function Al(e,u,a,f){var o=""+u,p=""+a;if(!e&&o>p){var d=o;o=p,p=d}return o+""+p+""+(Lt.isUndefined(f)?"\0":f)}function r2(e,u,a,f){var o=""+u,p=""+a;if(!e&&o>p){var d=o;o=p,p=d}var y={v:o,w:p};return f&&(y.name=f),y}function kg(e,u){return Al(e,u.v,u.w,u.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(e){return this._label=e,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(e){return Lt.isFunction(e)||(e=Lt.constant(e)),this._defaultNodeLabelFn=e,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return Lt.keys(this._nodes)},Lr.prototype.sources=function(){var e=this;return Lt.filter(this.nodes(),function(u){return Lt.isEmpty(e._in[u])})},Lr.prototype.sinks=function(){var e=this;return Lt.filter(this.nodes(),function(u){return Lt.isEmpty(e._out[u])})},Lr.prototype.setNodes=function(e,u){var a=arguments,f=this;return Lt.each(e,function(o){a.length>1?f.setNode(o,u):f.setNode(o)}),this},Lr.prototype.setNode=function(e,u){return Lt.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=u),this):(this._nodes[e]=arguments.length>1?u:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Lr.prototype.node=function(e){return this._nodes[e]},Lr.prototype.hasNode=function(e){return Lt.has(this._nodes,e)},Lr.prototype.removeNode=function(e){var u=this;if(Lt.has(this._nodes,e)){var a=function(f){u.removeEdge(u._edgeObjs[f])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],Lt.each(this.children(e),function(f){u.setParent(f)}),delete this._children[e]),Lt.each(Lt.keys(this._in[e]),a),delete this._in[e],delete this._preds[e],Lt.each(Lt.keys(this._out[e]),a),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Lr.prototype.setParent=function(e,u){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Lt.isUndefined(u))u="\0";else{for(var a=u+="";!Lt.isUndefined(a);a=this.parent(a))if(a===e)throw new Error("Setting "+u+" as parent of "+e+" would create a cycle");this.setNode(u)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=u,this._children[u][e]=!0,this},Lr.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Lr.prototype.parent=function(e){if(this._isCompound){var u=this._parent[e];if(u!=="\0")return u}},Lr.prototype.children=function(e){if(Lt.isUndefined(e)&&(e="\0"),this._isCompound){var u=this._children[e];if(u)return Lt.keys(u)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Lr.prototype.predecessors=function(e){var u=this._preds[e];if(u)return Lt.keys(u)},Lr.prototype.successors=function(e){var u=this._sucs[e];if(u)return Lt.keys(u)},Lr.prototype.neighbors=function(e){var u=this.predecessors(e);if(u)return Lt.union(u,this.successors(e))},Lr.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Lr.prototype.filterNodes=function(e){var u=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});u.setGraph(this.graph());var a=this;Lt.each(this._nodes,function(p,d){e(d)&&u.setNode(d,p)}),Lt.each(this._edgeObjs,function(p){u.hasNode(p.v)&&u.hasNode(p.w)&&u.setEdge(p,a.edge(p))});var f={};function o(p){var d=a.parent(p);return d===void 0||u.hasNode(d)?(f[p]=d,d):d in f?f[d]:o(d)}return this._isCompound&&Lt.each(u.nodes(),function(p){u.setParent(p,o(p))}),u},Lr.prototype.setDefaultEdgeLabel=function(e){return Lt.isFunction(e)||(e=Lt.constant(e)),this._defaultEdgeLabelFn=e,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return Lt.values(this._edgeObjs)},Lr.prototype.setPath=function(e,u){var a=this,f=arguments;return Lt.reduce(e,function(o,p){return f.length>1?a.setEdge(o,p,u):a.setEdge(o,p),p}),this},Lr.prototype.setEdge=function(){var e,u,a,f,o=!1,p=arguments[0];typeof p=="object"&&p!==null&&"v"in p?(e=p.v,u=p.w,a=p.name,arguments.length===2&&(f=arguments[1],o=!0)):(e=p,u=arguments[1],a=arguments[3],arguments.length>2&&(f=arguments[2],o=!0)),e=""+e,u=""+u,Lt.isUndefined(a)||(a=""+a);var d=Al(this._isDirected,e,u,a);if(Lt.has(this._edgeLabels,d))return o&&(this._edgeLabels[d]=f),this;if(!Lt.isUndefined(a)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(u),this._edgeLabels[d]=o?f:this._defaultEdgeLabelFn(e,u,a);var y=r2(this._isDirected,e,u,a);return e=y.v,u=y.w,Object.freeze(y),this._edgeObjs[d]=y,RE(this._preds[u],e),RE(this._sucs[e],u),this._in[u][d]=y,this._out[e][d]=y,this._edgeCount++,this},Lr.prototype.edge=function(e,u,a){var f=arguments.length===1?kg(this._isDirected,arguments[0]):Al(this._isDirected,e,u,a);return this._edgeLabels[f]},Lr.prototype.hasEdge=function(e,u,a){var f=arguments.length===1?kg(this._isDirected,arguments[0]):Al(this._isDirected,e,u,a);return Lt.has(this._edgeLabels,f)},Lr.prototype.removeEdge=function(e,u,a){var f=arguments.length===1?kg(this._isDirected,arguments[0]):Al(this._isDirected,e,u,a),o=this._edgeObjs[f];return o&&(e=o.v,u=o.w,delete this._edgeLabels[f],delete this._edgeObjs[f],CE(this._preds[u],e),CE(this._sucs[e],u),delete this._in[u][f],delete this._out[e][f],this._edgeCount--),this},Lr.prototype.inEdges=function(e,u){var a=this._in[e];if(a){var f=Lt.values(a);return u?Lt.filter(f,function(o){return o.v===u}):f}},Lr.prototype.outEdges=function(e,u){var a=this._out[e];if(a){var f=Lt.values(a);return u?Lt.filter(f,function(o){return o.w===u}):f}},Lr.prototype.nodeEdges=function(e,u){var a=this.inEdges(e,u);if(a)return a.concat(this.outEdges(e,u))};var DE={Graph:Nm,version:"2.1.8"},n2={write:function(e){var u={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:o2(e),edges:i2(e)};return Lt.isUndefined(e.graph())||(u.value=Lt.clone(e.graph())),u},read:function(e){var u=new Nm(e.options).setGraph(e.value);return Lt.each(e.nodes,function(a){u.setNode(a.v,a.value),a.parent&&u.setParent(a.v,a.parent)}),Lt.each(e.edges,function(a){u.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),u}};function o2(e){return Lt.map(e.nodes(),function(u){var a=e.node(u),f=e.parent(u),o={v:u};return Lt.isUndefined(a)||(o.value=a),Lt.isUndefined(f)||(o.parent=f),o})}function i2(e){return Lt.map(e.edges(),function(u){var a=e.edge(u),f={v:u.v,w:u.w};return Lt.isUndefined(u.name)||(f.name=u.name),Lt.isUndefined(a)||(f.value=a),f})}var a2=function(e){var u,a={},f=[];function o(p){Lt.has(a,p)||(a[p]=!0,u.push(p),Lt.each(e.successors(p),o),Lt.each(e.predecessors(p),o))}return Lt.each(e.nodes(),function(p){u=[],o(p),u.length&&f.push(u)}),f},D1=oi;function oi(){this._arr=[],this._keyIndices={}}oi.prototype.size=function(){return this._arr.length},oi.prototype.keys=function(){return this._arr.map(function(e){return e.key})},oi.prototype.has=function(e){return Lt.has(this._keyIndices,e)},oi.prototype.priority=function(e){var u=this._keyIndices[e];if(u!==void 0)return this._arr[u].priority},oi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},oi.prototype.add=function(e,u){var a=this._keyIndices;if(e=String(e),!Lt.has(a,e)){var f=this._arr,o=f.length;return a[e]=o,f.push({key:e,priority:u}),this._decrease(o),!0}return!1},oi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},oi.prototype.decrease=function(e,u){var a=this._keyIndices[e];if(u>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[a].priority+" New: "+u);this._arr[a].priority=u,this._decrease(a)},oi.prototype._heapify=function(e){var u=this._arr,a=2*e,f=a+1,o=e;a<u.length&&(o=u[a].priority<u[o].priority?a:o,f<u.length&&(o=u[f].priority<u[o].priority?f:o),o!==e&&(this._swap(e,o),this._heapify(o)))},oi.prototype._decrease=function(e){for(var u,a=this._arr,f=a[e].priority;e!==0&&!(a[u=e>>1].priority<f);)this._swap(e,u),e=u},oi.prototype._swap=function(e,u){var a=this._arr,f=this._keyIndices,o=a[e],p=a[u];a[e]=p,a[u]=o,f[p.key]=e,f[o.key]=u};var I1=function(e,u,a,f){return function(o,p,d,y){var g,E,_={},T=new D1,P=function(A){var N=A.v!==g?A.v:A.w,M=_[N],I=d(A),G=E.distance+I;if(I<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+A+" Weight: "+I);G<M.distance&&(M.distance=G,M.predecessor=g,T.decrease(N,G))};for(o.nodes().forEach(function(A){var N=A===p?0:Number.POSITIVE_INFINITY;_[A]={distance:N},T.add(A,N)});T.size()>0&&(g=T.removeMin(),(E=_[g]).distance!==Number.POSITIVE_INFINITY);)y(g).forEach(P);return _}(e,String(u),a||u2,f||function(o){return e.outEdges(o)})},u2=Lt.constant(1),s2=function(e,u,a){return Lt.transform(e.nodes(),function(f,o){f[o]=I1(e,o,u,a)},{})},k1=function(e){var u=0,a=[],f={},o=[];function p(d){var y=f[d]={onStack:!0,lowlink:u,index:u++};if(a.push(d),e.successors(d).forEach(function(_){Lt.has(f,_)?f[_].onStack&&(y.lowlink=Math.min(y.lowlink,f[_].index)):(p(_),y.lowlink=Math.min(y.lowlink,f[_].lowlink))}),y.lowlink===y.index){var g,E=[];do g=a.pop(),f[g].onStack=!1,E.push(g);while(d!==g);o.push(E)}}return e.nodes().forEach(function(d){Lt.has(f,d)||p(d)}),o},c2=function(e){return Lt.filter(k1(e),function(u){return u.length>1||u.length===1&&e.hasEdge(u[0],u[0])})},f2=function(e,u,a){return function(f,o,p){var d={},y=f.nodes();return y.forEach(function(g){d[g]={},d[g][g]={distance:0},y.forEach(function(E){g!==E&&(d[g][E]={distance:Number.POSITIVE_INFINITY})}),p(g).forEach(function(E){var _=E.v===g?E.w:E.v,T=o(E);d[g][_]={distance:T,predecessor:g}})}),y.forEach(function(g){var E=d[g];y.forEach(function(_){var T=d[_];y.forEach(function(P){var A=T[g],N=E[P],M=T[P],I=A.distance+N.distance;I<M.distance&&(M.distance=I,M.predecessor=N.predecessor)})})}),d}(e,u||l2,a||function(f){return e.outEdges(f)})},l2=Lt.constant(1),Lg=L1;function L1(e){var u={},a={},f=[];if(Lt.each(e.sinks(),function o(p){if(Lt.has(a,p))throw new uh;Lt.has(u,p)||(a[p]=!0,u[p]=!0,Lt.each(e.predecessors(p),o),delete a[p],f.push(p))}),Lt.size(u)!==e.nodeCount())throw new uh;return f}function uh(){}L1.CycleException=uh,uh.prototype=new Error;var IE=function(e,u,a){Lt.isArray(u)||(u=[u]);var f=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],p={};return Lt.each(u,function(d){if(!e.hasNode(d))throw new Error("Graph does not have node: "+d);F1(e,d,a==="post",p,f,o)}),o};function F1(e,u,a,f,o,p){Lt.has(f,u)||(f[u]=!0,a||p.push(u),Lt.each(o(u),function(d){F1(e,d,a,f,o,p)}),a&&p.push(u))}var sh,p2={Graph:DE.Graph,json:n2,alg:{components:a2,dijkstra:I1,dijkstraAll:s2,findCycles:c2,floydWarshall:f2,isAcyclic:function(e){try{Lg(e)}catch(u){if(u instanceof Lg.CycleException)return!1;throw u}return!0},postorder:function(e,u){return IE(e,u,"post")},preorder:function(e,u){return IE(e,u,"pre")},prim:function(e,u){var a,f=new Nm,o={},p=new D1;function d(g){var E=g.v===a?g.w:g.v,_=p.priority(E);if(_!==void 0){var T=u(g);T<_&&(o[E]=a,p.decrease(E,T))}}if(e.nodeCount()===0)return f;Lt.each(e.nodes(),function(g){p.add(g,Number.POSITIVE_INFINITY),f.setNode(g)}),p.decrease(e.nodes()[0],0);for(var y=!1;p.size()>0;){if(a=p.removeMin(),Lt.has(o,a))f.setEdge(a,o[a]);else{if(y)throw new Error("Input graph is not connected: "+e);y=!0}e.nodeEdges(a).forEach(d)}return f},tarjan:k1,topsort:Lg},version:DE.version};try{sh=p2}catch{}sh||(sh=window.graphlib);var $i=sh,d2=function(e){return a1(e,5)},Ll=function(e,u,a){if(!Io(a))return!1;var f=typeof u;return!!(f=="number"?xa(a)&&xh(u,a.length):f=="string"&&u in a)&&Jc(a[u],e)},B1=Object.prototype,h2=B1.hasOwnProperty,y2=Mh(function(e,u){e=Object(e);var a=-1,f=u.length,o=f>2?u[2]:void 0;for(o&&Ll(u[0],u[1],o)&&(f=1);++a<f;)for(var p=u[a],d=gs(p),y=-1,g=d.length;++y<g;){var E=d[y],_=e[E];(_===void 0||Jc(_,B1[E])&&!h2.call(e,E))&&(e[E]=p[E])}return e}),v2=function(e){return function(u,a,f){var o=Object(u);if(!xa(u)){var p=Sa(a);u=hu(u),a=function(y){return p(o[y],y,o)}}var d=e(u,a,f);return d>-1?o[p?u[d]:d]:void 0}},g2=/^\s+|\s+$/g,m2=/^[-+]0x[0-9a-f]+$/i,b2=/^0b[01]+$/i,_2=/^0o[0-7]+$/i,E2=parseInt,O2=function(e){if(typeof e=="number")return e;if(ps(e))return NaN;if(Io(e)){var u=typeof e.valueOf=="function"?e.valueOf():e;e=Io(u)?u+"":u}if(typeof e!="string")return e===0?e:+e;e=e.replace(g2,"");var a=b2.test(e);return a||_2.test(e)?E2(e.slice(2),a?2:8):m2.test(e)?NaN:+e},Kd=function(e){return e?(e=O2(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},w2=function(e){var u=Kd(e),a=u%1;return u==u?a?u-a:u:0},x2=Math.max,S2=v2(function(e,u,a){var f=e==null?0:e.length;if(!f)return-1;var o=a==null?0:w2(a);return o<0&&(o=x2(f+o,0)),M1(e,Sa(u),o)}),G1=function(e){return e!=null&&e.length?jm(e,1):[]},T2=function(e,u){return e==null?e:xm(e,u1(u),gs)},A2=function(e){var u=e==null?0:e.length;return u?e[u-1]:void 0},P2=function(e,u){var a={};return u=Sa(u),Sm(e,function(f,o,p){Oh(a,o,u(f,o,p))}),a},Mm=function(e,u,a){for(var f=-1,o=e.length;++f<o;){var p=e[f],d=u(p);if(d!=null&&(y===void 0?d==d&&!ps(d):a(d,y)))var y=d,g=p}return g},j2=function(e,u){return e>u},N2=function(e){return e&&e.length?Mm(e,ms,j2):void 0},tm=function(e,u,a){(a!==void 0&&!Jc(e[u],a)||a===void 0&&!(u in e))&&Oh(e,u,a)},M2=Function.prototype,R2=Object.prototype,U1=M2.toString,C2=R2.hasOwnProperty,D2=U1.call(Object),I2=function(e){if(!gi(e)||du(e)!="[object Object]")return!1;var u=Ah(e);if(u===null)return!0;var a=C2.call(u,"constructor")&&u.constructor;return typeof a=="function"&&a instanceof a&&U1.call(a)==D2},rm=function(e,u){if((u!=="constructor"||typeof e[u]!="function")&&u!="__proto__")return e[u]},k2=function(e){return Gl(e,gs(e))},L2=function(e,u,a,f,o,p,d){var y=rm(e,a),g=rm(u,a),E=d.get(g);if(E)tm(e,a,E);else{var _=p?p(y,g,a+"",e,u,d):void 0,T=_===void 0;if(T){var P=Pn(g),A=!P&&fs(g),N=!P&&!A&&Ul(g);_=g,P||A||N?Pn(y)?_=y:R1(y)?_=JO(y):A?(T=!1,_=ZO(g,!0)):N?(T=!1,_=n1(g,!0)):_=[]:I2(g)||$c(g)?(_=y,$c(y)?_=k2(y):Io(y)&&!Bl(y)||(_=i1(g))):T=!1}T&&(d.set(g,_),o(_,g,f,p,d),d.delete(g)),tm(e,a,_)}},F2=function e(u,a,f,o,p){u!==a&&xm(a,function(d,y){if(p||(p=new Gc),Io(d))L2(u,a,y,f,e,o,p);else{var g=o?o(rm(u,y),d,y+"",u,a,p):void 0;g===void 0&&(g=d),tm(u,y,g)}},gs)},B2=function(e){return Mh(function(u,a){var f=-1,o=a.length,p=o>1?a[o-1]:void 0,d=o>2?a[2]:void 0;for(p=e.length>3&&typeof p=="function"?(o--,p):void 0,d&&Ll(a[0],a[1],d)&&(p=o<3?void 0:p,o=1),u=Object(u);++f<o;){var y=a[f];y&&e(u,y,f,p)}return u})}(function(e,u,a){F2(e,u,a)}),z1=function(e,u){return e<u},G2=function(e){return e&&e.length?Mm(e,ms,z1):void 0},U2=function(e,u){return e&&e.length?Mm(e,Sa(u),z1):void 0},z2=function(){return bi.Date.now()},H2=function(e,u,a,f){if(!Io(e))return e;for(var o=-1,p=(u=jh(u,e)).length,d=p-1,y=e;y!=null&&++o<p;){var g=zl(u[o]),E=a;if(g==="__proto__"||g==="constructor"||g==="prototype")return e;if(o!=d){var _=y[g];(E=f?f(_,g,y):void 0)===void 0&&(E=Io(_)?_:xh(u[o+1])?[]:{})}wh(y,g,E),y=y[g]}return e},X2=function(e,u,a){for(var f=-1,o=u.length,p={};++f<o;){var d=u[f],y=Nh(e,d);a(y,d)&&H2(p,jh(d,e),y)}return p},V2=function(e,u){return X2(e,u,function(a,f){return m1(e,f)})},$2=function(e){return N1(j1(e,void 0,G1),e+"")}(function(e,u){return e==null?{}:V2(e,u)}),W2=Math.ceil,Y2=Math.max,K2=function(e,u,a,f){for(var o=-1,p=Y2(W2((u-e)/(a||1)),0),d=Array(p);p--;)d[f?p:++o]=e,e+=a;return d},q2=function(e){return function(u,a,f){return f&&typeof f!="number"&&Ll(u,a,f)&&(a=f=void 0),u=Kd(u),a===void 0?(a=u,u=0):a=Kd(a),f=f===void 0?u<a?1:-1:Kd(f),K2(u,a,f,e)}}(),Z2=function(e,u){var a=e.length;for(e.sort(u);a--;)e[a]=e[a].value;return e},J2=function(e,u){if(e!==u){var a=e!==void 0,f=e===null,o=e==e,p=ps(e),d=u!==void 0,y=u===null,g=u==u,E=ps(u);if(!y&&!E&&!p&&e>u||p&&d&&g&&!y&&!E||f&&d&&g||!a&&g||!o)return 1;if(!f&&!p&&!E&&e<u||E&&a&&o&&!f&&!p||y&&a&&o||!d&&o||!g)return-1}return 0},Q2=function(e,u,a){for(var f=-1,o=e.criteria,p=u.criteria,d=o.length,y=a.length;++f<d;){var g=J2(o[f],p[f]);if(g)return f>=y?g:g*(a[f]=="desc"?-1:1)}return e.index-u.index},eI=function(e,u,a){u=u.length?zc(u,function(p){return Pn(p)?function(d){return Nh(d,p.length===1?p[0]:p)}:p}):[ms];var f=-1;u=zc(u,Sh(Sa));var o=w1(e,function(p,d,y){return{criteria:zc(u,function(g){return g(p)}),index:++f,value:p}});return Z2(o,function(p,d){return Q2(p,d,a)})},tI=Mh(function(e,u){if(e==null)return[];var a=u.length;return a>1&&Ll(e,u[0],u[1])?u=[]:a>2&&Ll(u[0],u[1],u[2])&&(u=[u[0]]),eI(e,jm(u,1),[])}),rI=0,nI=function(e){var u=++rI;return v1(e)+u},oI=function(e,u,a){for(var f=-1,o=e.length,p=u.length,d={};++f<o;){var y=f<p?u[f]:void 0;a(d,e[f],y)}return d},ch,iI=function(e,u){return oI(e||[],u||[],wh)};try{ch={cloneDeep:d2,constant:wm,defaults:y2,each:c1,filter:_1,find:S2,flatten:G1,forEach:s1,forIn:T2,has:E1,isUndefined:O1,last:A2,map:x1,mapValues:P2,max:N2,merge:B2,min:G2,minBy:U2,now:z2,pick:$2,range:q2,reduce:S1,sortBy:tI,uniqueId:nI,values:C1,zipObject:iI}}catch{}ch||(ch=window._);var aI=ch;$i.Graph;aI.constant(1);$i.Graph;$i.Graph;$i.alg.preorder;$i.alg.postorder;$i.Graph;$i.Graph;$i.Graph;$i.Graph;$i.Graph;function Fl(e){return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},Fl(e)}function uI(e,u){if(Fl(e)!=="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var f=a.call(e,u||"default");if(Fl(f)!=="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(e)}function sI(e){var u=uI(e,"string");return Fl(u)==="symbol"?u:String(u)}function Mt(e,u,a){return u=sI(u),u in e?Object.defineProperty(e,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[u]=a,e}var cI=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,H1=cI,fI=H1,lI=typeof self=="object"&&self&&self.Object===Object&&self,pI=fI||lI||Function("return this")(),dI=pI,hI=dI,yI=hI.Symbol,X1=yI,kE=X1;kE&&kE.toStringTag;var LE=X1;LE&&LE.toStringTag;var fh={exports:{}};fh.exports;(function(e,u){var a=H1,f=u&&!u.nodeType&&u,o=f&&!0&&e&&!e.nodeType&&e,p=o&&o.exports===f,d=p&&a.process,y=function(){try{var g=o&&o.require&&o.require("util").types;return g||d&&d.binding&&d.binding("util")}catch{}}();e.exports=y})(fh,fh.exports);var vI=fh.exports,FE=vI;FE&&FE.isTypedArray;var V1={exports:{}},$1={exports:{}};(function(e){function u(a){return e.exports=u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},e.exports.__esModule=!0,e.exports.default=e.exports,u(a)}e.exports=u,e.exports.__esModule=!0,e.exports.default=e.exports})($1);var gI=$1.exports;(function(e){var u=gI.default;function a(){e.exports=a=function(){return f},e.exports.__esModule=!0,e.exports.default=e.exports;var f={},o=Object.prototype,p=o.hasOwnProperty,d=Object.defineProperty||function(ie,se,Ne){ie[se]=Ne.value},y=typeof Symbol=="function"?Symbol:{},g=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",_=y.toStringTag||"@@toStringTag";function T(ie,se,Ne){return Object.defineProperty(ie,se,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),ie[se]}try{T({},"")}catch{T=function(Ne,Re,fe){return Ne[Re]=fe}}function P(ie,se,Ne,Re){var fe=se&&se.prototype instanceof M?se:M,je=Object.create(fe.prototype),He=new q(Re||[]);return d(je,"_invoke",{value:$(ie,Ne,He)}),je}function A(ie,se,Ne){try{return{type:"normal",arg:ie.call(se,Ne)}}catch(Re){return{type:"throw",arg:Re}}}f.wrap=P;var N={};function M(){}function I(){}function G(){}var W={};T(W,g,function(){return this});var de=Object.getPrototypeOf,xe=de&&de(de(Oe([])));xe&&xe!==o&&p.call(xe,g)&&(W=xe);var ce=G.prototype=M.prototype=Object.create(W);function ne(ie){["next","throw","return"].forEach(function(se){T(ie,se,function(Ne){return this._invoke(se,Ne)})})}function ue(ie,se){function Ne(fe,je,He,ft){var Pt=A(ie[fe],ie,je);if(Pt.type!=="throw"){var Wt=Pt.arg,bt=Wt.value;return bt&&u(bt)=="object"&&p.call(bt,"__await")?se.resolve(bt.__await).then(function(xt){Ne("next",xt,He,ft)},function(xt){Ne("throw",xt,He,ft)}):se.resolve(bt).then(function(xt){Wt.value=xt,He(Wt)},function(xt){return Ne("throw",xt,He,ft)})}ft(Pt.arg)}var Re;d(this,"_invoke",{value:function(je,He){function ft(){return new se(function(Pt,Wt){Ne(je,He,Pt,Wt)})}return Re=Re?Re.then(ft,ft):ft()}})}function $(ie,se,Ne){var Re="suspendedStart";return function(fe,je){if(Re==="executing")throw new Error("Generator is already running");if(Re==="completed"){if(fe==="throw")throw je;return Ge()}for(Ne.method=fe,Ne.arg=je;;){var He=Ne.delegate;if(He){var ft=B(He,Ne);if(ft){if(ft===N)continue;return ft}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(Re==="suspendedStart")throw Re="completed",Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);Re="executing";var Pt=A(ie,se,Ne);if(Pt.type==="normal"){if(Re=Ne.done?"completed":"suspendedYield",Pt.arg===N)continue;return{value:Pt.arg,done:Ne.done}}Pt.type==="throw"&&(Re="completed",Ne.method="throw",Ne.arg=Pt.arg)}}}function B(ie,se){var Ne=se.method,Re=ie.iterator[Ne];if(Re===void 0)return se.delegate=null,Ne==="throw"&&ie.iterator.return&&(se.method="return",se.arg=void 0,B(ie,se),se.method==="throw")||Ne!=="return"&&(se.method="throw",se.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),N;var fe=A(Re,ie.iterator,se.arg);if(fe.type==="throw")return se.method="throw",se.arg=fe.arg,se.delegate=null,N;var je=fe.arg;return je?je.done?(se[ie.resultName]=je.value,se.next=ie.nextLoc,se.method!=="return"&&(se.method="next",se.arg=void 0),se.delegate=null,N):je:(se.method="throw",se.arg=new TypeError("iterator result is not an object"),se.delegate=null,N)}function Y(ie){var se={tryLoc:ie[0]};1 in ie&&(se.catchLoc=ie[1]),2 in ie&&(se.finallyLoc=ie[2],se.afterLoc=ie[3]),this.tryEntries.push(se)}function V(ie){var se=ie.completion||{};se.type="normal",delete se.arg,ie.completion=se}function q(ie){this.tryEntries=[{tryLoc:"root"}],ie.forEach(Y,this),this.reset(!0)}function Oe(ie){if(ie){var se=ie[g];if(se)return se.call(ie);if(typeof ie.next=="function")return ie;if(!isNaN(ie.length)){var Ne=-1,Re=function fe(){for(;++Ne<ie.length;)if(p.call(ie,Ne))return fe.value=ie[Ne],fe.done=!1,fe;return fe.value=void 0,fe.done=!0,fe};return Re.next=Re}}return{next:Ge}}function Ge(){return{value:void 0,done:!0}}return I.prototype=G,d(ce,"constructor",{value:G,configurable:!0}),d(G,"constructor",{value:I,configurable:!0}),I.displayName=T(G,_,"GeneratorFunction"),f.isGeneratorFunction=function(ie){var se=typeof ie=="function"&&ie.constructor;return!!se&&(se===I||(se.displayName||se.name)==="GeneratorFunction")},f.mark=function(ie){return Object.setPrototypeOf?Object.setPrototypeOf(ie,G):(ie.__proto__=G,T(ie,_,"GeneratorFunction")),ie.prototype=Object.create(ce),ie},f.awrap=function(ie){return{__await:ie}},ne(ue.prototype),T(ue.prototype,E,function(){return this}),f.AsyncIterator=ue,f.async=function(ie,se,Ne,Re,fe){fe===void 0&&(fe=Promise);var je=new ue(P(ie,se,Ne,Re),fe);return f.isGeneratorFunction(se)?je:je.next().then(function(He){return He.done?He.value:je.next()})},ne(ce),T(ce,_,"Generator"),T(ce,g,function(){return this}),T(ce,"toString",function(){return"[object Generator]"}),f.keys=function(ie){var se=Object(ie),Ne=[];for(var Re in se)Ne.push(Re);return Ne.reverse(),function fe(){for(;Ne.length;){var je=Ne.pop();if(je in se)return fe.value=je,fe.done=!1,fe}return fe.done=!0,fe}},f.values=Oe,q.prototype={constructor:q,reset:function(se){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(V),!se)for(var Ne in this)Ne.charAt(0)==="t"&&p.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=void 0)},stop:function(){this.done=!0;var se=this.tryEntries[0].completion;if(se.type==="throw")throw se.arg;return this.rval},dispatchException:function(se){if(this.done)throw se;var Ne=this;function Re(Wt,bt){return He.type="throw",He.arg=se,Ne.next=Wt,bt&&(Ne.method="next",Ne.arg=void 0),!!bt}for(var fe=this.tryEntries.length-1;fe>=0;--fe){var je=this.tryEntries[fe],He=je.completion;if(je.tryLoc==="root")return Re("end");if(je.tryLoc<=this.prev){var ft=p.call(je,"catchLoc"),Pt=p.call(je,"finallyLoc");if(ft&&Pt){if(this.prev<je.catchLoc)return Re(je.catchLoc,!0);if(this.prev<je.finallyLoc)return Re(je.finallyLoc)}else if(ft){if(this.prev<je.catchLoc)return Re(je.catchLoc,!0)}else{if(!Pt)throw new Error("try statement without catch or finally");if(this.prev<je.finallyLoc)return Re(je.finallyLoc)}}}},abrupt:function(se,Ne){for(var Re=this.tryEntries.length-1;Re>=0;--Re){var fe=this.tryEntries[Re];if(fe.tryLoc<=this.prev&&p.call(fe,"finallyLoc")&&this.prev<fe.finallyLoc){var je=fe;break}}je&&(se==="break"||se==="continue")&&je.tryLoc<=Ne&&Ne<=je.finallyLoc&&(je=null);var He=je?je.completion:{};return He.type=se,He.arg=Ne,je?(this.method="next",this.next=je.finallyLoc,N):this.complete(He)},complete:function(se,Ne){if(se.type==="throw")throw se.arg;return se.type==="break"||se.type==="continue"?this.next=se.arg:se.type==="return"?(this.rval=this.arg=se.arg,this.method="return",this.next="end"):se.type==="normal"&&Ne&&(this.next=Ne),N},finish:function(se){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Re=this.tryEntries[Ne];if(Re.finallyLoc===se)return this.complete(Re.completion,Re.afterLoc),V(Re),N}},catch:function(se){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var Re=this.tryEntries[Ne];if(Re.tryLoc===se){var fe=Re.completion;if(fe.type==="throw"){var je=fe.arg;V(Re)}return je}}throw new Error("illegal catch attempt")},delegateYield:function(se,Ne,Re){return this.delegate={iterator:Oe(se),resultName:Ne,nextLoc:Re},this.method==="next"&&(this.arg=void 0),N}},f}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(V1);var mI=V1.exports,Fg=mI();try{regeneratorRuntime=Fg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Fg:Function("r","regeneratorRuntime = r")(Fg)}var At;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(At||(At={}));var BE;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(BE||(BE={}));var GE;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(GE||(GE={}));var UE;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(UE||(UE={}));var zE;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(zE||(zE={}));var bI={exports:{}};(function(e,u){(function(a,f){e.exports=f()})(Ea,function(){var a=function(x){return x instanceof Uint8Array||x instanceof Uint16Array||x instanceof Uint32Array||x instanceof Int8Array||x instanceof Int16Array||x instanceof Int32Array||x instanceof Float32Array||x instanceof Float64Array||x instanceof Uint8ClampedArray},f=function(x,F){for(var Z=Object.keys(F),Ie=0;Ie<Z.length;++Ie)x[Z[Ie]]=F[Z[Ie]];return x},o=`
`;function p(x){return typeof atob<"u"?atob(x):"base64:"+x}function d(x){var F=new Error("(regl) "+x);throw console.error(F),F}function y(x,F){x||d(F)}function g(x){return x?": "+x:""}function E(x,F,Z){x in F||d("unknown parameter ("+x+")"+g(Z)+". possible values: "+Object.keys(F).join())}function _(x,F){a(x)||d("invalid parameter type"+g(F)+". must be a typed array")}function T(x,F){switch(F){case"number":return typeof x=="number";case"object":return typeof x=="object";case"string":return typeof x=="string";case"boolean":return typeof x=="boolean";case"function":return typeof x=="function";case"undefined":return typeof x>"u";case"symbol":return typeof x=="symbol"}}function P(x,F,Z){T(x,F)||d("invalid parameter type"+g(Z)+". expected "+F+", got "+typeof x)}function A(x,F){x>=0&&(x|0)===x||d("invalid parameter type, ("+x+")"+g(F)+". must be a nonnegative integer")}function N(x,F,Z){F.indexOf(x)<0&&d("invalid value"+g(Z)+". must be one of: "+F)}var M=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function I(x){Object.keys(x).forEach(function(F){M.indexOf(F)<0&&d('invalid regl constructor argument "'+F+'". must be one of '+M)})}function G(x,F){for(x=x+"";x.length<F;)x=" "+x;return x}function W(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function de(x,F){this.number=x,this.line=F,this.errors=[]}function xe(x,F,Z){this.file=x,this.line=F,this.message=Z}function ce(){var x=new Error,F=(x.stack||x).toString(),Z=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(F);if(Z)return Z[1];var Ie=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(F);return Ie?Ie[1]:"unknown"}function ne(){var x=new Error,F=(x.stack||x).toString(),Z=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(F);if(Z)return Z[1];var Ie=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(F);return Ie?Ie[1]:"unknown"}function ue(x,F){var Z=x.split(`
`),Ie=1,Xe=0,De={unknown:new W,0:new W};De.unknown.name=De[0].name=F||ce(),De.unknown.lines.push(new de(0,""));for(var Fe=0;Fe<Z.length;++Fe){var tt=Z[Fe],nt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(tt);if(nt)switch(nt[1]){case"line":var ct=/(\d+)(\s+\d+)?/.exec(nt[2]);ct&&(Ie=ct[1]|0,ct[2]&&(Xe=ct[2]|0,Xe in De||(De[Xe]=new W)));break;case"define":var it=/SHADER_NAME(_B64)?\s+(.*)$/.exec(nt[2]);it&&(De[Xe].name=it[1]?p(it[2]):it[2]);break}De[Xe].lines.push(new de(Ie++,tt))}return Object.keys(De).forEach(function(dt){var gt=De[dt];gt.lines.forEach(function(rt){gt.index[rt.number]=rt})}),De}function $(x){var F=[];return x.split(`
`).forEach(function(Z){if(!(Z.length<5)){var Ie=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Z);Ie?F.push(new xe(Ie[1]|0,Ie[2]|0,Ie[3].trim())):Z.length>0&&F.push(new xe("unknown",0,Z))}}),F}function B(x,F){F.forEach(function(Z){var Ie=x[Z.file];if(Ie){var Xe=Ie.index[Z.line];if(Xe){Xe.errors.push(Z),Ie.hasErrors=!0;return}}x.unknown.hasErrors=!0,x.unknown.lines[0].errors.push(Z)})}function Y(x,F,Z,Ie,Xe){if(!x.getShaderParameter(F,x.COMPILE_STATUS)){var De=x.getShaderInfoLog(F),Fe=Ie===x.FRAGMENT_SHADER?"fragment":"vertex";Ne(Z,"string",Fe+" shader source must be a string",Xe);var tt=ue(Z,Xe),nt=$(De);B(tt,nt),Object.keys(tt).forEach(function(ct){var it=tt[ct];if(!it.hasErrors)return;var dt=[""],gt=[""];function rt(pt,me){dt.push(pt),gt.push(me||"")}rt("file number "+ct+": "+it.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),it.lines.forEach(function(pt){if(pt.errors.length>0){rt(G(pt.number,4)+"|  ","background-color:yellow; font-weight:bold"),rt(pt.line+o,"color:red; background-color:yellow; font-weight:bold");var me=0;pt.errors.forEach(function(Be){var at=Be.message,Ot=/^\s*'(.*)'\s*:\s*(.*)$/.exec(at);if(Ot){var qe=Ot[1];switch(at=Ot[2],qe){case"assign":qe="=";break}me=Math.max(pt.line.indexOf(qe,me),0)}else me=0;rt(G("| ",6)),rt(G("^^^",me+3)+o,"font-weight:bold"),rt(G("| ",6)),rt(at+o,"font-weight:bold")}),rt(G("| ",6)+o)}else rt(G(pt.number,4)+"|  "),rt(pt.line+o,"color:red")}),typeof document<"u"&&!window.chrome?(gt[0]=dt.join("%c"),console.log.apply(console,gt)):console.log(dt.join(""))}),y.raise("Error compiling "+Fe+" shader, "+tt[0].name)}}function V(x,F,Z,Ie,Xe){if(!x.getProgramParameter(F,x.LINK_STATUS)){var De=x.getProgramInfoLog(F),Fe=ue(Z,Xe),tt=ue(Ie,Xe),nt='Error linking program with vertex shader, "'+tt[0].name+'", and fragment shader "'+Fe[0].name+'"';typeof document<"u"?console.log("%c"+nt+o+"%c"+De,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(nt+o+De),y.raise(nt)}}function q(x){x._commandRef=ce()}function Oe(x,F,Z,Ie){q(x);function Xe(nt){return nt?Ie.id(nt):0}x._fragId=Xe(x.static.frag),x._vertId=Xe(x.static.vert);function De(nt,ct){Object.keys(ct).forEach(function(it){nt[Ie.id(it)]=!0})}var Fe=x._uniformSet={};De(Fe,F.static),De(Fe,F.dynamic);var tt=x._attributeSet={};De(tt,Z.static),De(tt,Z.dynamic),x._hasCount="count"in x.static||"count"in x.dynamic||"elements"in x.static||"elements"in x.dynamic}function Ge(x,F){var Z=ne();d(x+" in command "+(F||ce())+(Z==="unknown"?"":" called from "+Z))}function ie(x,F,Z){x||Ge(F,Z||ce())}function se(x,F,Z,Ie){x in F||Ge("unknown parameter ("+x+")"+g(Z)+". possible values: "+Object.keys(F).join(),Ie||ce())}function Ne(x,F,Z,Ie){T(x,F)||Ge("invalid parameter type"+g(Z)+". expected "+F+", got "+typeof x,Ie||ce())}function Re(x){x()}function fe(x,F,Z){x.texture?N(x.texture._texture.internalformat,F,"unsupported texture format for attachment"):N(x.renderbuffer._renderbuffer.format,Z,"unsupported renderbuffer format for attachment")}var je=33071,He=9728,ft=9984,Pt=9985,Wt=9986,bt=9987,xt=5120,nr=5121,ve=5122,he=5123,Ce=5124,ot=5125,Tt=5126,lt=32819,rr=32820,pr=33635,ar=34042,Jt=36193,Ke={};Ke[xt]=Ke[nr]=1,Ke[ve]=Ke[he]=Ke[Jt]=Ke[pr]=Ke[lt]=Ke[rr]=2,Ke[Ce]=Ke[ot]=Ke[Tt]=Ke[ar]=4;function Xt(x,F){return x===rr||x===lt||x===pr?2:x===ar?4:Ke[x]*F}function _e(x){return!(x&x-1)&&!!x}function Bt(x,F,Z){var Ie,Xe=F.width,De=F.height,Fe=F.channels;y(Xe>0&&Xe<=Z.maxTextureSize&&De>0&&De<=Z.maxTextureSize,"invalid texture shape"),(x.wrapS!==je||x.wrapT!==je)&&y(_e(Xe)&&_e(De),"incompatible wrap mode for texture, both width and height must be power of 2"),F.mipmask===1?Xe!==1&&De!==1&&y(x.minFilter!==ft&&x.minFilter!==Wt&&x.minFilter!==Pt&&x.minFilter!==bt,"min filter requires mipmap"):(y(_e(Xe)&&_e(De),"texture must be a square power of 2 to support mipmapping"),y(F.mipmask===(Xe<<1)-1,"missing or incomplete mipmap data")),F.type===Tt&&(Z.extensions.indexOf("oes_texture_float_linear")<0&&y(x.minFilter===He&&x.magFilter===He,"filter not supported, must enable oes_texture_float_linear"),y(!x.genMipmaps,"mipmap generation not supported with float textures"));var tt=F.images;for(Ie=0;Ie<16;++Ie)if(tt[Ie]){var nt=Xe>>Ie,ct=De>>Ie;y(F.mipmask&1<<Ie,"missing mipmap data");var it=tt[Ie];if(y(it.width===nt&&it.height===ct,"invalid shape for mip images"),y(it.format===F.format&&it.internalformat===F.internalformat&&it.type===F.type,"incompatible type for mip image"),!it.compressed)if(it.data){var dt=Math.ceil(Xt(it.type,Fe)*nt/it.unpackAlignment)*it.unpackAlignment;y(it.data.byteLength===dt*ct,"invalid data for image, buffer size is inconsistent with image format")}else it.element||it.copy}else x.genMipmaps||y((F.mipmask&1<<Ie)===0,"extra mipmap data");F.compressed&&y(!x.genMipmaps,"mipmap generation for compressed images not supported")}function _r(x,F,Z,Ie){var Xe=x.width,De=x.height,Fe=x.channels;y(Xe>0&&Xe<=Ie.maxTextureSize&&De>0&&De<=Ie.maxTextureSize,"invalid texture shape"),y(Xe===De,"cube map must be square"),y(F.wrapS===je&&F.wrapT===je,"wrap mode not supported by cube map");for(var tt=0;tt<Z.length;++tt){var nt=Z[tt];y(nt.width===Xe&&nt.height===De,"inconsistent cube map face shape"),F.genMipmaps&&(y(!nt.compressed,"can not generate mipmap for compressed textures"),y(nt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ct=nt.images,it=0;it<16;++it){var dt=ct[it];if(dt){var gt=Xe>>it,rt=De>>it;y(nt.mipmask&1<<it,"missing mipmap data"),y(dt.width===gt&&dt.height===rt,"invalid shape for mip images"),y(dt.format===x.format&&dt.internalformat===x.internalformat&&dt.type===x.type,"incompatible type for mip image"),dt.compressed||(dt.data?y(dt.data.byteLength===gt*rt*Math.max(Xt(dt.type,Fe),dt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):dt.element||dt.copy)}}}}var L=f(y,{optional:Re,raise:d,commandRaise:Ge,command:ie,parameter:E,commandParameter:se,constructor:I,type:P,commandType:Ne,isTypedArray:_,nni:A,oneOf:N,shaderError:Y,linkError:V,callSite:ne,saveCommandRef:q,saveDrawInfo:Oe,framebufferFormat:fe,guessCommand:ce,texture2D:Bt,textureCube:_r}),gr=0,Dr=0,Yr=5,Zr=6;function ur(x,F){this.id=gr++,this.type=x,this.data=F}function sn(x){return x.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function J(x){if(x.length===0)return[];var F=x.charAt(0),Z=x.charAt(x.length-1);if(x.length>1&&F===Z&&(F==='"'||F==="'"))return['"'+sn(x.substr(1,x.length-2))+'"'];var Ie=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(x);if(Ie)return J(x.substr(0,Ie.index)).concat(J(Ie[1])).concat(J(x.substr(Ie.index+Ie[0].length)));var Xe=x.split(".");if(Xe.length===1)return['"'+sn(x)+'"'];for(var De=[],Fe=0;Fe<Xe.length;++Fe)De=De.concat(J(Xe[Fe]));return De}function Se(x){return"["+J(x).join("][")+"]"}function ae(x,F){return new ur(x,Se(F+""))}function Le(x){return typeof x=="function"&&!x._reglType||x instanceof ur}function jt(x,F){if(typeof x=="function")return new ur(Dr,x);if(typeof x=="number"||typeof x=="boolean")return new ur(Yr,x);if(Array.isArray(x))return new ur(Zr,x.map((Z,Ie)=>jt(Z,F+"["+Ie+"]")));if(x instanceof ur)return x;L(!1,"invalid option type in uniform "+F)}var _t={DynamicVariable:ur,define:ae,isDynamic:Le,unbox:jt,accessor:Se},Vt={next:typeof requestAnimationFrame=="function"?function(x){return requestAnimationFrame(x)}:function(x){return setTimeout(x,16)},cancel:typeof cancelAnimationFrame=="function"?function(x){return cancelAnimationFrame(x)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function xn(){var x={"":0},F=[""];return{id:function(Z){var Ie=x[Z];return Ie||(Ie=x[Z]=F.length,F.push(Z),Ie)},str:function(Z){return F[Z]}}}function Fn(x,F,Z){var Ie=document.createElement("canvas");f(Ie.style,{border:0,margin:0,padding:0,top:0,left:0}),x.appendChild(Ie),x===document.body&&(Ie.style.position="absolute",f(x.style,{margin:0,padding:0}));function Xe(){var tt=window.innerWidth,nt=window.innerHeight;if(x!==document.body){var ct=x.getBoundingClientRect();tt=ct.right-ct.left,nt=ct.bottom-ct.top}Ie.width=Z*tt,Ie.height=Z*nt,f(Ie.style,{width:tt+"px",height:nt+"px"})}var De;x!==document.body&&typeof ResizeObserver=="function"?(De=new ResizeObserver(function(){setTimeout(Xe)}),De.observe(x)):window.addEventListener("resize",Xe,!1);function Fe(){De?De.disconnect():window.removeEventListener("resize",Xe),x.removeChild(Ie)}return Xe(),{canvas:Ie,onDestroy:Fe}}function hn(x,F){function Z(Ie){try{return x.getContext(Ie,F)}catch{return null}}return Z("webgl")||Z("experimental-webgl")||Z("webgl-experimental")}function En(x){return typeof x.nodeName=="string"&&typeof x.appendChild=="function"&&typeof x.getBoundingClientRect=="function"}function Gt(x){return typeof x.drawArrays=="function"||typeof x.drawElements=="function"}function er(x){return typeof x=="string"?x.split():(L(Array.isArray(x),"invalid extension array"),x)}function lr(x){return typeof x=="string"?(L(typeof document<"u","not supported outside of DOM"),document.querySelector(x)):x}function yr(x){var F=x||{},Z,Ie,Xe,De,Fe={},tt=[],nt=[],ct=typeof window>"u"?1:window.devicePixelRatio,it=!1,dt=function(pt){pt&&L.raise(pt)},gt=function(){};if(typeof F=="string"?(L(typeof document<"u","selector queries only supported in DOM enviroments"),Z=document.querySelector(F),L(Z,"invalid query string for element")):typeof F=="object"?En(F)?Z=F:Gt(F)?(De=F,Xe=De.canvas):(L.constructor(F),"gl"in F?De=F.gl:"canvas"in F?Xe=lr(F.canvas):"container"in F&&(Ie=lr(F.container)),"attributes"in F&&(Fe=F.attributes,L.type(Fe,"object","invalid context attributes")),"extensions"in F&&(tt=er(F.extensions)),"optionalExtensions"in F&&(nt=er(F.optionalExtensions)),"onDone"in F&&(L.type(F.onDone,"function","invalid or missing onDone callback"),dt=F.onDone),"profile"in F&&(it=!!F.profile),"pixelRatio"in F&&(ct=+F.pixelRatio,L(ct>0,"invalid pixel ratio"))):L.raise("invalid arguments to regl"),Z&&(Z.nodeName.toLowerCase()==="canvas"?Xe=Z:Ie=Z),!De){if(!Xe){L(typeof document<"u","must manually specify webgl context outside of DOM environments");var rt=Fn(Ie||document.body,dt,ct);if(!rt)return null;Xe=rt.canvas,gt=rt.onDestroy}Fe.premultipliedAlpha===void 0&&(Fe.premultipliedAlpha=!0),De=hn(Xe,Fe)}return De?{gl:De,canvas:Xe,container:Ie,extensions:tt,optionalExtensions:nt,pixelRatio:ct,profile:it,onDone:dt,onDestroy:gt}:(gt(),dt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Xr(x,F){var Z={};function Ie(Fe){L.type(Fe,"string","extension name must be string");var tt=Fe.toLowerCase(),nt;try{nt=Z[tt]=x.getExtension(tt)}catch{}return!!nt}for(var Xe=0;Xe<F.extensions.length;++Xe){var De=F.extensions[Xe];if(!Ie(De))return F.onDestroy(),F.onDone('"'+De+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return F.optionalExtensions.forEach(Ie),{extensions:Z,restore:function(){Object.keys(Z).forEach(function(Fe){if(Z[Fe]&&!Ie(Fe))throw new Error("(regl): error restoring extension "+Fe)})}}}function Ir(x,F){for(var Z=Array(x),Ie=0;Ie<x;++Ie)Z[Ie]=F(Ie);return Z}var ai=5120,zo=5121,Ho=5122,Wi=5123,Qc=5124,yu=5125,To=5126;function bs(x){for(var F=16;F<=1<<28;F*=16)if(x<=F)return F;return 0}function $t(x){var F,Z;return F=(x>65535)<<4,x>>>=F,Z=(x>255)<<3,x>>>=Z,F|=Z,Z=(x>15)<<2,x>>>=Z,F|=Z,Z=(x>3)<<1,x>>>=Z,F|=Z,F|x>>1}function _s(){var x=Ir(8,function(){return[]});function F(De){var Fe=bs(De),tt=x[$t(Fe)>>2];return tt.length>0?tt.pop():new ArrayBuffer(Fe)}function Z(De){x[$t(De.byteLength)>>2].push(De)}function Ie(De,Fe){var tt=null;switch(De){case ai:tt=new Int8Array(F(Fe),0,Fe);break;case zo:tt=new Uint8Array(F(Fe),0,Fe);break;case Ho:tt=new Int16Array(F(2*Fe),0,Fe);break;case Wi:tt=new Uint16Array(F(2*Fe),0,Fe);break;case Qc:tt=new Int32Array(F(4*Fe),0,Fe);break;case yu:tt=new Uint32Array(F(4*Fe),0,Fe);break;case To:tt=new Float32Array(F(4*Fe),0,Fe);break;default:return null}return tt.length!==Fe?tt.subarray(0,Fe):tt}function Xe(De){Z(De.buffer)}return{alloc:F,free:Z,allocType:Ie,freeType:Xe}}var tn=_s();tn.zero=_s();var Es=3408,po=3410,ho=3411,Os=3412,Xo=3413,_i=3414,ko=3415,vu=33901,ws=33902,ef=3379,Ta=3386,tf=34921,xs=36347,rf=36348,ui=35661,Ss=35660,Vo=34930,nf=36349,Aa=34076,gu=34024,mu=7936,of=7937,Ts=7938,Ei=35724,Oi=34047,As=36063,wi=34852,yo=3553,bu=34067,Ps=34069,Yi=33984,xi=6408,_u=5126,Eu=5121,Pa=36160,Ki=36053,js=36064,af=16384,Ns=function(x,F){var Z=1;F.ext_texture_filter_anisotropic&&(Z=x.getParameter(Oi));var Ie=1,Xe=1;F.webgl_draw_buffers&&(Ie=x.getParameter(wi),Xe=x.getParameter(As));var De=!!F.oes_texture_float;if(De){var Fe=x.createTexture();x.bindTexture(yo,Fe),x.texImage2D(yo,0,xi,1,1,0,xi,_u,null);var tt=x.createFramebuffer();if(x.bindFramebuffer(Pa,tt),x.framebufferTexture2D(Pa,js,yo,Fe,0),x.bindTexture(yo,null),x.checkFramebufferStatus(Pa)!==Ki)De=!1;else{x.viewport(0,0,1,1),x.clearColor(1,0,0,1),x.clear(af);var nt=tn.allocType(_u,4);x.readPixels(0,0,1,1,xi,_u,nt),x.getError()?De=!1:(x.deleteFramebuffer(tt),x.deleteTexture(Fe),De=nt[0]===1),tn.freeType(nt)}}var ct=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),it=!0;if(!ct){var dt=x.createTexture(),gt=tn.allocType(Eu,36);x.activeTexture(Yi),x.bindTexture(bu,dt),x.texImage2D(Ps,0,xi,3,3,0,xi,Eu,gt),tn.freeType(gt),x.bindTexture(bu,null),x.deleteTexture(dt),it=!x.getError()}return{colorBits:[x.getParameter(po),x.getParameter(ho),x.getParameter(Os),x.getParameter(Xo)],depthBits:x.getParameter(_i),stencilBits:x.getParameter(ko),subpixelBits:x.getParameter(Es),extensions:Object.keys(F).filter(function(rt){return!!F[rt]}),maxAnisotropic:Z,maxDrawbuffers:Ie,maxColorAttachments:Xe,pointSizeDims:x.getParameter(vu),lineWidthDims:x.getParameter(ws),maxViewportDims:x.getParameter(Ta),maxCombinedTextureUnits:x.getParameter(ui),maxCubeMapSize:x.getParameter(Aa),maxRenderbufferSize:x.getParameter(gu),maxTextureUnits:x.getParameter(Vo),maxTextureSize:x.getParameter(ef),maxAttributes:x.getParameter(tf),maxVertexUniforms:x.getParameter(xs),maxVertexTextureUnits:x.getParameter(Ss),maxVaryingVectors:x.getParameter(rf),maxFragmentUniforms:x.getParameter(nf),glsl:x.getParameter(Ei),renderer:x.getParameter(of),vendor:x.getParameter(mu),version:x.getParameter(Ts),readFloat:De,npotTextureCube:it}};function Kn(x){return!!x&&typeof x=="object"&&Array.isArray(x.shape)&&Array.isArray(x.stride)&&typeof x.offset=="number"&&x.shape.length===x.stride.length&&(Array.isArray(x.data)||a(x.data))}var jn=function(x){return Object.keys(x).map(function(F){return x[F]})},vo={shape:si,flatten:uf};function zn(x,F,Z){for(var Ie=0;Ie<F;++Ie)Z[Ie]=x[Ie]}function Ms(x,F,Z,Ie){for(var Xe=0,De=0;De<F;++De)for(var Fe=x[De],tt=0;tt<Z;++tt)Ie[Xe++]=Fe[tt]}function Ou(x,F,Z,Ie,Xe,De){for(var Fe=De,tt=0;tt<F;++tt)for(var nt=x[tt],ct=0;ct<Z;++ct)for(var it=nt[ct],dt=0;dt<Ie;++dt)Xe[Fe++]=it[dt]}function wu(x,F,Z,Ie,Xe){for(var De=1,Fe=Z+1;Fe<F.length;++Fe)De*=F[Fe];var tt=F[Z];if(F.length-Z===4){var nt=F[Z+1],ct=F[Z+2],it=F[Z+3];for(Fe=0;Fe<tt;++Fe)Ou(x[Fe],nt,ct,it,Ie,Xe),Xe+=De}else for(Fe=0;Fe<tt;++Fe)wu(x[Fe],F,Z+1,Ie,Xe),Xe+=De}function uf(x,F,Z,Ie){var Xe=1;if(F.length)for(var De=0;De<F.length;++De)Xe*=F[De];else Xe=0;var Fe=Ie||tn.allocType(Z,Xe);switch(F.length){case 0:break;case 1:zn(x,F[0],Fe);break;case 2:Ms(x,F[0],F[1],Fe);break;case 3:Ou(x,F[0],F[1],F[2],Fe,0);break;default:wu(x,F,0,Fe,0)}return Fe}function si(x){for(var F=[],Z=x;Z.length;Z=Z[0])F.push(Z.length);return F}var oo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},sf=5120,Ao=5122,go=5124,Rs=5121,Cs=5123,cf=5125,ja=5126,$o=5126,mo={int8:sf,int16:Ao,int32:go,uint8:Rs,uint16:Cs,uint32:cf,float:ja,float32:$o},ff=35048,qn=35040,Po={dynamic:ff,stream:qn,static:35044},Rr=vo.flatten,io=vo.shape,Wo=35044,Bn=35040,Na=5121,qi=5126,Lo=[];Lo[5120]=1,Lo[5122]=2,Lo[5124]=4,Lo[5121]=1,Lo[5123]=2,Lo[5125]=4,Lo[5126]=4;function Zn(x){return oo[Object.prototype.toString.call(x)]|0}function xu(x,F){for(var Z=0;Z<F.length;++Z)x[Z]=F[Z]}function Zi(x,F,Z,Ie,Xe,De,Fe){for(var tt=0,nt=0;nt<Z;++nt)for(var ct=0;ct<Ie;++ct)x[tt++]=F[Xe*nt+De*ct+Fe]}function jo(x,F,Z,Ie){var Xe=0,De={};function Fe(me){this.id=Xe++,this.buffer=x.createBuffer(),this.type=me,this.usage=Wo,this.byteLength=0,this.dimension=1,this.dtype=Na,this.persistentData=null,Z.profile&&(this.stats={size:0})}Fe.prototype.bind=function(){x.bindBuffer(this.type,this.buffer)},Fe.prototype.destroy=function(){gt(this)};var tt=[];function nt(me,Be){var at=tt.pop();return at||(at=new Fe(me)),at.bind(),dt(at,Be,Bn,0,1,!1),at}function ct(me){tt.push(me)}function it(me,Be,at){me.byteLength=Be.byteLength,x.bufferData(me.type,Be,at)}function dt(me,Be,at,Ot,qe,St){var Je;if(me.usage=at,Array.isArray(Be)){if(me.dtype=Ot||qi,Be.length>0){var ht;if(Array.isArray(Be[0])){Je=io(Be);for(var Qe=1,yt=1;yt<Je.length;++yt)Qe*=Je[yt];me.dimension=Qe,ht=Rr(Be,Je,me.dtype),it(me,ht,at),St?me.persistentData=ht:tn.freeType(ht)}else if(typeof Be[0]=="number"){me.dimension=qe;var zt=tn.allocType(me.dtype,Be.length);xu(zt,Be),it(me,zt,at),St?me.persistentData=zt:tn.freeType(zt)}else a(Be[0])?(me.dimension=Be[0].length,me.dtype=Ot||Zn(Be[0])||qi,ht=Rr(Be,[Be.length,Be[0].length],me.dtype),it(me,ht,at),St?me.persistentData=ht:tn.freeType(ht)):L.raise("invalid buffer data")}}else if(a(Be))me.dtype=Ot||Zn(Be),me.dimension=qe,it(me,Be,at),St&&(me.persistentData=new Uint8Array(new Uint8Array(Be.buffer)));else if(Kn(Be)){Je=Be.shape;var Zt=Be.stride,mt=Be.offset,Ze=0,We=0,Qt=0,be=0;Je.length===1?(Ze=Je[0],We=1,Qt=Zt[0],be=0):Je.length===2?(Ze=Je[0],We=Je[1],Qt=Zt[0],be=Zt[1]):L.raise("invalid shape"),me.dtype=Ot||Zn(Be.data)||qi,me.dimension=We;var kt=tn.allocType(me.dtype,Ze*We);Zi(kt,Be.data,Ze,We,Qt,be,mt),it(me,kt,at),St?me.persistentData=kt:tn.freeType(kt)}else Be instanceof ArrayBuffer?(me.dtype=Na,me.dimension=qe,it(me,Be,at),St&&(me.persistentData=new Uint8Array(new Uint8Array(Be)))):L.raise("invalid buffer data")}function gt(me){F.bufferCount--,Ie(me);var Be=me.buffer;L(Be,"buffer must not be deleted already"),x.deleteBuffer(Be),me.buffer=null,delete De[me.id]}function rt(me,Be,at,Ot){F.bufferCount++;var qe=new Fe(Be);De[qe.id]=qe;function St(Qe){var yt=Wo,zt=null,Zt=0,mt=0,Ze=1;return Array.isArray(Qe)||a(Qe)||Kn(Qe)||Qe instanceof ArrayBuffer?zt=Qe:typeof Qe=="number"?Zt=Qe|0:Qe&&(L.type(Qe,"object","buffer arguments must be an object, a number or an array"),"data"in Qe&&(L(zt===null||Array.isArray(zt)||a(zt)||Kn(zt),"invalid data for buffer"),zt=Qe.data),"usage"in Qe&&(L.parameter(Qe.usage,Po,"invalid buffer usage"),yt=Po[Qe.usage]),"type"in Qe&&(L.parameter(Qe.type,mo,"invalid buffer type"),mt=mo[Qe.type]),"dimension"in Qe&&(L.type(Qe.dimension,"number","invalid dimension"),Ze=Qe.dimension|0),"length"in Qe&&(L.nni(Zt,"buffer length must be a nonnegative integer"),Zt=Qe.length|0)),qe.bind(),zt?dt(qe,zt,yt,mt,Ze,Ot):(Zt&&x.bufferData(qe.type,Zt,yt),qe.dtype=mt||Na,qe.usage=yt,qe.dimension=Ze,qe.byteLength=Zt),Z.profile&&(qe.stats.size=qe.byteLength*Lo[qe.dtype]),St}function Je(Qe,yt){L(yt+Qe.byteLength<=qe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qe.byteLength+" starting from offset "+yt+" to a buffer of size "+qe.byteLength),x.bufferSubData(qe.type,yt,Qe)}function ht(Qe,yt){var zt=(yt||0)|0,Zt;if(qe.bind(),a(Qe)||Qe instanceof ArrayBuffer)Je(Qe,zt);else if(Array.isArray(Qe)){if(Qe.length>0)if(typeof Qe[0]=="number"){var mt=tn.allocType(qe.dtype,Qe.length);xu(mt,Qe),Je(mt,zt),tn.freeType(mt)}else if(Array.isArray(Qe[0])||a(Qe[0])){Zt=io(Qe);var Ze=Rr(Qe,Zt,qe.dtype);Je(Ze,zt),tn.freeType(Ze)}else L.raise("invalid buffer data")}else if(Kn(Qe)){Zt=Qe.shape;var We=Qe.stride,Qt=0,be=0,kt=0,mr=0;Zt.length===1?(Qt=Zt[0],be=1,kt=We[0],mr=0):Zt.length===2?(Qt=Zt[0],be=Zt[1],kt=We[0],mr=We[1]):L.raise("invalid shape");var ir=Array.isArray(Qe.data)?qe.dtype:Zn(Qe.data),vr=tn.allocType(ir,Qt*be);Zi(vr,Qe.data,Qt,be,kt,mr,Qe.offset),Je(vr,zt),tn.freeType(vr)}else L.raise("invalid data for buffer subdata");return St}return at||St(me),St._reglType="buffer",St._buffer=qe,St.subdata=ht,Z.profile&&(St.stats=qe.stats),St.destroy=function(){gt(qe)},St}function pt(){jn(De).forEach(function(me){me.buffer=x.createBuffer(),x.bindBuffer(me.type,me.buffer),x.bufferData(me.type,me.persistentData||me.byteLength,me.usage)})}return Z.profile&&(F.getTotalBufferSize=function(){var me=0;return Object.keys(De).forEach(function(Be){me+=De[Be].stats.size}),me}),{create:rt,createStream:nt,destroyStream:ct,clear:function(){jn(De).forEach(gt),tt.forEach(gt)},getBuffer:function(me){return me&&me._buffer instanceof Fe?me._buffer:null},restore:pt,_initBuffer:dt}}var Ds=0,lf=0,Su=1,On=1,Si=4,Ma=4,Nn={points:Ds,point:lf,lines:Su,line:On,triangles:Si,triangle:Ma,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Is=0,Ji=1,Yo=4,Ra=5120,Fo=5121,Tu=5122,Mn=5123,ao=5124,uo=5125,Qi=34963,Au=35040,Pu=35044;function ks(x,F,Z,Ie){var Xe={},De=0,Fe={uint8:Fo,uint16:Mn};F.oes_element_index_uint&&(Fe.uint32=uo);function tt(pt){this.id=De++,Xe[this.id]=this,this.buffer=pt,this.primType=Yo,this.vertCount=0,this.type=0}tt.prototype.bind=function(){this.buffer.bind()};var nt=[];function ct(pt){var me=nt.pop();return me||(me=new tt(Z.create(null,Qi,!0,!1)._buffer)),dt(me,pt,Au,-1,-1,0,0),me}function it(pt){nt.push(pt)}function dt(pt,me,Be,at,Ot,qe,St){pt.buffer.bind();var Je;if(me){var ht=St;!St&&(!a(me)||Kn(me)&&!a(me.data))&&(ht=F.oes_element_index_uint?uo:Mn),Z._initBuffer(pt.buffer,me,Be,ht,3)}else x.bufferData(Qi,qe,Be),pt.buffer.dtype=Je||Fo,pt.buffer.usage=Be,pt.buffer.dimension=3,pt.buffer.byteLength=qe;if(Je=St,!St){switch(pt.buffer.dtype){case Fo:case Ra:Je=Fo;break;case Mn:case Tu:Je=Mn;break;case uo:case ao:Je=uo;break;default:L.raise("unsupported type for element array")}pt.buffer.dtype=Je}pt.type=Je,L(Je!==uo||!!F.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qe=Ot;Qe<0&&(Qe=pt.buffer.byteLength,Je===Mn?Qe>>=1:Je===uo&&(Qe>>=2)),pt.vertCount=Qe;var yt=at;if(at<0){yt=Yo;var zt=pt.buffer.dimension;zt===1&&(yt=Is),zt===2&&(yt=Ji),zt===3&&(yt=Yo)}pt.primType=yt}function gt(pt){Ie.elementsCount--,L(pt.buffer!==null,"must not double destroy elements"),delete Xe[pt.id],pt.buffer.destroy(),pt.buffer=null}function rt(pt,me){var Be=Z.create(null,Qi,!0),at=new tt(Be._buffer);Ie.elementsCount++;function Ot(qe){if(!qe)Be(),at.primType=Yo,at.vertCount=0,at.type=Fo;else if(typeof qe=="number")Be(qe),at.primType=Yo,at.vertCount=qe|0,at.type=Fo;else{var St=null,Je=Pu,ht=-1,Qe=-1,yt=0,zt=0;Array.isArray(qe)||a(qe)||Kn(qe)?St=qe:(L.type(qe,"object","invalid arguments for elements"),"data"in qe&&(St=qe.data,L(Array.isArray(St)||a(St)||Kn(St),"invalid data for element buffer")),"usage"in qe&&(L.parameter(qe.usage,Po,"invalid element buffer usage"),Je=Po[qe.usage]),"primitive"in qe&&(L.parameter(qe.primitive,Nn,"invalid element buffer primitive"),ht=Nn[qe.primitive]),"count"in qe&&(L(typeof qe.count=="number"&&qe.count>=0,"invalid vertex count for elements"),Qe=qe.count|0),"type"in qe&&(L.parameter(qe.type,Fe,"invalid buffer type"),zt=Fe[qe.type]),"length"in qe?yt=qe.length|0:(yt=Qe,zt===Mn||zt===Tu?yt*=2:(zt===uo||zt===ao)&&(yt*=4))),dt(at,St,Je,ht,Qe,yt,zt)}return Ot}return Ot(pt),Ot._reglType="elements",Ot._elements=at,Ot.subdata=function(qe,St){return Be.subdata(qe,St),Ot},Ot.destroy=function(){gt(at)},Ot}return{create:rt,createStream:ct,destroyStream:it,getElements:function(pt){return typeof pt=="function"&&pt._elements instanceof tt?pt._elements:null},clear:function(){jn(Xe).forEach(gt)}}}var Ls=new Float32Array(1),Ca=new Uint32Array(Ls.buffer),ci=5123;function m(x){for(var F=tn.allocType(ci,x.length),Z=0;Z<x.length;++Z)if(isNaN(x[Z]))F[Z]=65535;else if(x[Z]===1/0)F[Z]=31744;else if(x[Z]===-1/0)F[Z]=64512;else{Ls[0]=x[Z];var Ie=Ca[0],Xe=Ie>>>31<<15,De=(Ie<<1>>>24)-127,Fe=Ie>>13&(1<<10)-1;if(De<-24)F[Z]=Xe;else if(De<-14){var tt=-14-De;F[Z]=Xe+(Fe+(1<<10)>>tt)}else De>15?F[Z]=Xe+31744:F[Z]=Xe+(De+15<<10)+Fe}return F}function b(x){return Array.isArray(x)||a(x)}var S=function(x){return!(x&x-1)&&!!x},D=34467,K=3553,Ee=34067,ze=34069,vt=6408,Ut=6406,Ar=6407,sr=6409,Gr=6410,Or=32854,Ur=32855,so=36194,rn=32819,Jn=32820,ea=33635,pf=34042,Da=6402,ta=34041,Ti=35904,ra=35906,Sn=36193,Ia=33776,fi=33777,na=33778,ju=33779,df=35986,Hl=35987,Xl=34798,hf=35840,Vl=35841,Fs=35842,$l=35843,Wl=36196,ka=5121,yf=5123,Bs=5125,Nu=5126,Rh=10242,Gs=10243,Us=10497,Mu=33071,Ch=33648,zs=10240,La=10241,vf=9728,Yl=9729,Hs=9984,Kl=9985,ql=9986,gf=9987,Dh=33170,Ru=4352,Ih=4353,kh=4354,Zl=34046,Lh=3317,Qn=37440,Fh=37441,Bh=37443,Jl=37444,Fa=33984,Gh=[Hs,ql,Kl,gf],Xs=[0,sr,Gr,Ar,vt],No={};No[sr]=No[Ut]=No[Da]=1,No[ta]=No[Gr]=2,No[Ar]=No[Ti]=3,No[vt]=No[ra]=4;function Jr(x){return"[object "+x+"]"}var mf=Jr("HTMLCanvasElement"),bf=Jr("OffscreenCanvas"),_f=Jr("CanvasRenderingContext2D"),Ef=Jr("ImageBitmap"),Of=Jr("HTMLImageElement"),wf=Jr("HTMLVideoElement"),Ql=Object.keys(oo).concat([mf,bf,_f,Ef,Of,wf]),oa=[];oa[ka]=1,oa[Nu]=4,oa[Sn]=2,oa[yf]=2,oa[Bs]=4;var Rn=[];Rn[Or]=2,Rn[Ur]=2,Rn[so]=2,Rn[ta]=4,Rn[Ia]=.5,Rn[fi]=.5,Rn[na]=1,Rn[ju]=1,Rn[df]=.5,Rn[Hl]=1,Rn[Xl]=1,Rn[hf]=.5,Rn[Vl]=.25,Rn[Fs]=.5,Rn[$l]=.25,Rn[Wl]=.5;function xf(x){return Array.isArray(x)&&(x.length===0||typeof x[0]=="number")}function Sf(x){if(!Array.isArray(x))return!1;var F=x.length;return!(F===0||!b(x[0]))}function Ai(x){return Object.prototype.toString.call(x)}function Tf(x){return Ai(x)===mf}function Af(x){return Ai(x)===bf}function ep(x){return Ai(x)===_f}function tp(x){return Ai(x)===Ef}function rp(x){return Ai(x)===Of}function Cu(x){return Ai(x)===wf}function Cn(x){if(!x)return!1;var F=Ai(x);return Ql.indexOf(F)>=0?!0:xf(x)||Sf(x)||Kn(x)}function np(x){return oo[Object.prototype.toString.call(x)]|0}function op(x,F){var Z=F.length;switch(x.type){case ka:case yf:case Bs:case Nu:var Ie=tn.allocType(x.type,Z);Ie.set(F),x.data=Ie;break;case Sn:x.data=m(F);break;default:L.raise("unsupported texture type, must specify a typed array")}}function Dn(x,F){return tn.allocType(x.type===Sn?Nu:x.type,F)}function zr(x,F){x.type===Sn?(x.data=m(F),tn.freeType(F)):x.data=F}function ip(x,F,Z,Ie,Xe,De){for(var Fe=x.width,tt=x.height,nt=x.channels,ct=Fe*tt*nt,it=Dn(x,ct),dt=0,gt=0;gt<tt;++gt)for(var rt=0;rt<Fe;++rt)for(var pt=0;pt<nt;++pt)it[dt++]=F[Z*rt+Ie*gt+Xe*pt+De];zr(x,it)}function Pr(x,F,Z,Ie,Xe,De){var Fe;if(typeof Rn[x]<"u"?Fe=Rn[x]:Fe=No[x]*oa[F],De&&(Fe*=6),Xe){for(var tt=0,nt=Z;nt>=1;)tt+=Fe*nt*nt,nt/=2;return tt}else return Fe*Z*Ie}function Tn(x,F,Z,Ie,Xe,De,Fe){var tt={"don't care":Ru,"dont care":Ru,nice:kh,fast:Ih},nt={repeat:Us,clamp:Mu,mirror:Ch},ct={nearest:vf,linear:Yl},it=f({mipmap:gf,"nearest mipmap nearest":Hs,"linear mipmap nearest":Kl,"nearest mipmap linear":ql,"linear mipmap linear":gf},ct),dt={none:0,browser:Jl},gt={uint8:ka,rgba4:rn,rgb565:ea,"rgb5 a1":Jn},rt={alpha:Ut,luminance:sr,"luminance alpha":Gr,rgb:Ar,rgba:vt,rgba4:Or,"rgb5 a1":Ur,rgb565:so},pt={};F.ext_srgb&&(rt.srgb=Ti,rt.srgba=ra),F.oes_texture_float&&(gt.float32=gt.float=Nu),F.oes_texture_half_float&&(gt.float16=gt["half float"]=Sn),F.webgl_depth_texture&&(f(rt,{depth:Da,"depth stencil":ta}),f(gt,{uint16:yf,uint32:Bs,"depth stencil":pf})),F.webgl_compressed_texture_s3tc&&f(pt,{"rgb s3tc dxt1":Ia,"rgba s3tc dxt1":fi,"rgba s3tc dxt3":na,"rgba s3tc dxt5":ju}),F.webgl_compressed_texture_atc&&f(pt,{"rgb atc":df,"rgba atc explicit alpha":Hl,"rgba atc interpolated alpha":Xl}),F.webgl_compressed_texture_pvrtc&&f(pt,{"rgb pvrtc 4bppv1":hf,"rgb pvrtc 2bppv1":Vl,"rgba pvrtc 4bppv1":Fs,"rgba pvrtc 2bppv1":$l}),F.webgl_compressed_texture_etc1&&(pt["rgb etc1"]=Wl);var me=Array.prototype.slice.call(x.getParameter(D));Object.keys(pt).forEach(function(k){var ke=pt[k];me.indexOf(ke)>=0&&(rt[k]=ke)});var Be=Object.keys(rt);Z.textureFormats=Be;var at=[];Object.keys(rt).forEach(function(k){var ke=rt[k];at[ke]=k});var Ot=[];Object.keys(gt).forEach(function(k){var ke=gt[k];Ot[ke]=k});var qe=[];Object.keys(ct).forEach(function(k){var ke=ct[k];qe[ke]=k});var St=[];Object.keys(it).forEach(function(k){var ke=it[k];St[ke]=k});var Je=[];Object.keys(nt).forEach(function(k){var ke=nt[k];Je[ke]=k});var ht=Be.reduce(function(k,ke){var Me=rt[ke];return Me===sr||Me===Ut||Me===sr||Me===Gr||Me===Da||Me===ta||F.ext_srgb&&(Me===Ti||Me===ra)?k[Me]=Me:Me===Ur||ke.indexOf("rgba")>=0?k[Me]=vt:k[Me]=Ar,k},{});function Qe(){this.internalformat=vt,this.format=vt,this.type=ka,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Jl,this.width=0,this.height=0,this.channels=0}function yt(k,ke){k.internalformat=ke.internalformat,k.format=ke.format,k.type=ke.type,k.compressed=ke.compressed,k.premultiplyAlpha=ke.premultiplyAlpha,k.flipY=ke.flipY,k.unpackAlignment=ke.unpackAlignment,k.colorSpace=ke.colorSpace,k.width=ke.width,k.height=ke.height,k.channels=ke.channels}function zt(k,ke){if(!(typeof ke!="object"||!ke)){if("premultiplyAlpha"in ke&&(L.type(ke.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),k.premultiplyAlpha=ke.premultiplyAlpha),"flipY"in ke&&(L.type(ke.flipY,"boolean","invalid texture flip"),k.flipY=ke.flipY),"alignment"in ke&&(L.oneOf(ke.alignment,[1,2,4,8],"invalid texture unpack alignment"),k.unpackAlignment=ke.alignment),"colorSpace"in ke&&(L.parameter(ke.colorSpace,dt,"invalid colorSpace"),k.colorSpace=dt[ke.colorSpace]),"type"in ke){var Me=ke.type;L(F.oes_texture_float||!(Me==="float"||Me==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),L(F.oes_texture_half_float||!(Me==="half float"||Me==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),L(F.webgl_depth_texture||!(Me==="uint16"||Me==="uint32"||Me==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(Me,gt,"invalid texture type"),k.type=gt[Me]}var Nt=k.width,Er=k.height,H=k.channels,R=!1;"shape"in ke?(L(Array.isArray(ke.shape)&&ke.shape.length>=2,"shape must be an array"),Nt=ke.shape[0],Er=ke.shape[1],ke.shape.length===3&&(H=ke.shape[2],L(H>0&&H<=4,"invalid number of channels"),R=!0),L(Nt>=0&&Nt<=Z.maxTextureSize,"invalid width"),L(Er>=0&&Er<=Z.maxTextureSize,"invalid height")):("radius"in ke&&(Nt=Er=ke.radius,L(Nt>=0&&Nt<=Z.maxTextureSize,"invalid radius")),"width"in ke&&(Nt=ke.width,L(Nt>=0&&Nt<=Z.maxTextureSize,"invalid width")),"height"in ke&&(Er=ke.height,L(Er>=0&&Er<=Z.maxTextureSize,"invalid height")),"channels"in ke&&(H=ke.channels,L(H>0&&H<=4,"invalid number of channels"),R=!0)),k.width=Nt|0,k.height=Er|0,k.channels=H|0;var re=!1;if("format"in ke){var ge=ke.format;L(F.webgl_depth_texture||!(ge==="depth"||ge==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(ge,rt,"invalid texture format");var we=k.internalformat=rt[ge];k.format=ht[we],ge in gt&&("type"in ke||(k.type=gt[ge])),ge in pt&&(k.compressed=!0),re=!0}!R&&re?k.channels=No[k.format]:R&&!re?k.channels!==Xs[k.format]&&(k.format=k.internalformat=Xs[k.channels]):re&&R&&L(k.channels===No[k.format],"number of channels inconsistent with specified format")}}function Zt(k){x.pixelStorei(Qn,k.flipY),x.pixelStorei(Fh,k.premultiplyAlpha),x.pixelStorei(Bh,k.colorSpace),x.pixelStorei(Lh,k.unpackAlignment)}function mt(){Qe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ze(k,ke){var Me=null;if(Cn(ke)?Me=ke:ke&&(L.type(ke,"object","invalid pixel data type"),zt(k,ke),"x"in ke&&(k.xOffset=ke.x|0),"y"in ke&&(k.yOffset=ke.y|0),Cn(ke.data)&&(Me=ke.data)),L(!k.compressed||Me instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),ke.copy){L(!Me,"can not specify copy and data field for the same texture");var Nt=Xe.viewportWidth,Er=Xe.viewportHeight;k.width=k.width||Nt-k.xOffset,k.height=k.height||Er-k.yOffset,k.needsCopy=!0,L(k.xOffset>=0&&k.xOffset<Nt&&k.yOffset>=0&&k.yOffset<Er&&k.width>0&&k.width<=Nt&&k.height>0&&k.height<=Er,"copy texture read out of bounds")}else if(!Me)k.width=k.width||1,k.height=k.height||1,k.channels=k.channels||4;else if(a(Me))k.channels=k.channels||4,k.data=Me,!("type"in ke)&&k.type===ka&&(k.type=np(Me));else if(xf(Me))k.channels=k.channels||4,op(k,Me),k.alignment=1,k.needsFree=!0;else if(Kn(Me)){var H=Me.data;!Array.isArray(H)&&k.type===ka&&(k.type=np(H));var R=Me.shape,re=Me.stride,ge,we,oe,ee,pe,z;R.length===3?(oe=R[2],z=re[2]):(L(R.length===2,"invalid ndarray pixel data, must be 2 or 3D"),oe=1,z=1),ge=R[0],we=R[1],ee=re[0],pe=re[1],k.alignment=1,k.width=ge,k.height=we,k.channels=oe,k.format=k.internalformat=Xs[oe],k.needsFree=!0,ip(k,H,ee,pe,z,Me.offset)}else if(Tf(Me)||Af(Me)||ep(Me))Tf(Me)||Af(Me)?k.element=Me:k.element=Me.canvas,k.width=k.element.width,k.height=k.element.height,k.channels=4;else if(tp(Me))k.element=Me,k.width=Me.width,k.height=Me.height,k.channels=4;else if(rp(Me))k.element=Me,k.width=Me.naturalWidth,k.height=Me.naturalHeight,k.channels=4;else if(Cu(Me))k.element=Me,k.width=Me.videoWidth,k.height=Me.videoHeight,k.channels=4;else if(Sf(Me)){var Q=k.width||Me[0].length,U=k.height||Me.length,ye=k.channels;b(Me[0][0])?ye=ye||Me[0][0].length:ye=ye||1;for(var Ae=vo.shape(Me),Ve=1,Ye=0;Ye<Ae.length;++Ye)Ve*=Ae[Ye];var Ue=Dn(k,Ve);vo.flatten(Me,Ae,"",Ue),zr(k,Ue),k.alignment=1,k.width=Q,k.height=U,k.channels=ye,k.format=k.internalformat=Xs[ye],k.needsFree=!0}k.type===Nu?L(Z.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):k.type===Sn&&L(Z.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function We(k,ke,Me){var Nt=k.element,Er=k.data,H=k.internalformat,R=k.format,re=k.type,ge=k.width,we=k.height;Zt(k),Nt?x.texImage2D(ke,Me,R,R,re,Nt):k.compressed?x.compressedTexImage2D(ke,Me,H,ge,we,0,Er):k.needsCopy?(Ie(),x.copyTexImage2D(ke,Me,R,k.xOffset,k.yOffset,ge,we,0)):x.texImage2D(ke,Me,R,ge,we,0,R,re,Er||null)}function Qt(k,ke,Me,Nt,Er){var H=k.element,R=k.data,re=k.internalformat,ge=k.format,we=k.type,oe=k.width,ee=k.height;Zt(k),H?x.texSubImage2D(ke,Er,Me,Nt,ge,we,H):k.compressed?x.compressedTexSubImage2D(ke,Er,Me,Nt,re,oe,ee,R):k.needsCopy?(Ie(),x.copyTexSubImage2D(ke,Er,Me,Nt,k.xOffset,k.yOffset,oe,ee)):x.texSubImage2D(ke,Er,Me,Nt,oe,ee,ge,we,R)}var be=[];function kt(){return be.pop()||new mt}function mr(k){k.needsFree&&tn.freeType(k.data),mt.call(k),be.push(k)}function ir(){Qe.call(this),this.genMipmaps=!1,this.mipmapHint=Ru,this.mipmask=0,this.images=Array(16)}function vr(k,ke,Me){var Nt=k.images[0]=kt();k.mipmask=1,Nt.width=k.width=ke,Nt.height=k.height=Me,Nt.channels=k.channels=4}function Mr(k,ke){var Me=null;if(Cn(ke))Me=k.images[0]=kt(),yt(Me,k),Ze(Me,ke),k.mipmask=1;else if(zt(k,ke),Array.isArray(ke.mipmap))for(var Nt=ke.mipmap,Er=0;Er<Nt.length;++Er)Me=k.images[Er]=kt(),yt(Me,k),Me.width>>=Er,Me.height>>=Er,Ze(Me,Nt[Er]),k.mipmask|=1<<Er;else Me=k.images[0]=kt(),yt(Me,k),Ze(Me,ke),k.mipmask=1;yt(k,k.images[0]),k.compressed&&(k.internalformat===Ia||k.internalformat===fi||k.internalformat===na||k.internalformat===ju)&&L(k.width%4===0&&k.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function fn(k,ke){for(var Me=k.images,Nt=0;Nt<Me.length;++Nt){if(!Me[Nt])return;We(Me[Nt],ke,Nt)}}var wn=[];function xr(){var k=wn.pop()||new ir;Qe.call(k),k.mipmask=0;for(var ke=0;ke<16;++ke)k.images[ke]=null;return k}function mn(k){for(var ke=k.images,Me=0;Me<ke.length;++Me)ke[Me]&&mr(ke[Me]),ke[Me]=null;wn.push(k)}function $r(){this.minFilter=vf,this.magFilter=vf,this.wrapS=Mu,this.wrapT=Mu,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ru}function ln(k,ke){if("min"in ke){var Me=ke.min;L.parameter(Me,it),k.minFilter=it[Me],Gh.indexOf(k.minFilter)>=0&&!("faces"in ke)&&(k.genMipmaps=!0)}if("mag"in ke){var Nt=ke.mag;L.parameter(Nt,ct),k.magFilter=ct[Nt]}var Er=k.wrapS,H=k.wrapT;if("wrap"in ke){var R=ke.wrap;typeof R=="string"?(L.parameter(R,nt),Er=H=nt[R]):Array.isArray(R)&&(L.parameter(R[0],nt),L.parameter(R[1],nt),Er=nt[R[0]],H=nt[R[1]])}else{if("wrapS"in ke){var re=ke.wrapS;L.parameter(re,nt),Er=nt[re]}if("wrapT"in ke){var ge=ke.wrapT;L.parameter(ge,nt),H=nt[ge]}}if(k.wrapS=Er,k.wrapT=H,"anisotropic"in ke){var we=ke.anisotropic;L(typeof we=="number"&&we>=1&&we<=Z.maxAnisotropic,"aniso samples must be between 1 and "),k.anisotropic=ke.anisotropic}if("mipmap"in ke){var oe=!1;switch(typeof ke.mipmap){case"string":L.parameter(ke.mipmap,tt,"invalid mipmap hint"),k.mipmapHint=tt[ke.mipmap],k.genMipmaps=!0,oe=!0;break;case"boolean":oe=k.genMipmaps=ke.mipmap;break;case"object":L(Array.isArray(ke.mipmap),"invalid mipmap type"),k.genMipmaps=!1,oe=!0;break;default:L.raise("invalid mipmap type")}oe&&!("min"in ke)&&(k.minFilter=Hs)}}function bn(k,ke){x.texParameteri(ke,La,k.minFilter),x.texParameteri(ke,zs,k.magFilter),x.texParameteri(ke,Rh,k.wrapS),x.texParameteri(ke,Gs,k.wrapT),F.ext_texture_filter_anisotropic&&x.texParameteri(ke,Zl,k.anisotropic),k.genMipmaps&&(x.hint(Dh,k.mipmapHint),x.generateMipmap(ke))}var Wr=0,An={},Gn=Z.maxTextureUnits,nn=Array(Gn).map(function(){return null});function cr(k){Qe.call(this),this.mipmask=0,this.internalformat=vt,this.id=Wr++,this.refCount=1,this.target=k,this.texture=x.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new $r,Fe.profile&&(this.stats={size:0})}function _n(k){x.activeTexture(Fa),x.bindTexture(k.target,k.texture)}function jr(){var k=nn[0];k?x.bindTexture(k.target,k.texture):x.bindTexture(K,null)}function Yt(k){var ke=k.texture;L(ke,"must not double destroy texture");var Me=k.unit,Nt=k.target;Me>=0&&(x.activeTexture(Fa+Me),x.bindTexture(Nt,null),nn[Me]=null),x.deleteTexture(ke),k.texture=null,k.params=null,k.pixels=null,k.refCount=0,delete An[k.id],De.textureCount--}f(cr.prototype,{bind:function(){var k=this;k.bindCount+=1;var ke=k.unit;if(ke<0){for(var Me=0;Me<Gn;++Me){var Nt=nn[Me];if(Nt){if(Nt.bindCount>0)continue;Nt.unit=-1}nn[Me]=k,ke=Me;break}ke>=Gn&&L.raise("insufficient number of texture units"),Fe.profile&&De.maxTextureUnits<ke+1&&(De.maxTextureUnits=ke+1),k.unit=ke,x.activeTexture(Fa+ke),x.bindTexture(k.target,k.texture)}return ke},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Yt(this)}});function br(k,ke){var Me=new cr(K);An[Me.id]=Me,De.textureCount++;function Nt(R,re){var ge=Me.texInfo;$r.call(ge);var we=xr();return typeof R=="number"?typeof re=="number"?vr(we,R|0,re|0):vr(we,R|0,R|0):R?(L.type(R,"object","invalid arguments to regl.texture"),ln(ge,R),Mr(we,R)):vr(we,1,1),ge.genMipmaps&&(we.mipmask=(we.width<<1)-1),Me.mipmask=we.mipmask,yt(Me,we),L.texture2D(ge,we,Z),Me.internalformat=we.internalformat,Nt.width=we.width,Nt.height=we.height,_n(Me),fn(we,K),bn(ge,K),jr(),mn(we),Fe.profile&&(Me.stats.size=Pr(Me.internalformat,Me.type,we.width,we.height,ge.genMipmaps,!1)),Nt.format=at[Me.internalformat],Nt.type=Ot[Me.type],Nt.mag=qe[ge.magFilter],Nt.min=St[ge.minFilter],Nt.wrapS=Je[ge.wrapS],Nt.wrapT=Je[ge.wrapT],Nt}function Er(R,re,ge,we){L(!!R,"must specify image data");var oe=re|0,ee=ge|0,pe=we|0,z=kt();return yt(z,Me),z.width=0,z.height=0,Ze(z,R),z.width=z.width||(Me.width>>pe)-oe,z.height=z.height||(Me.height>>pe)-ee,L(Me.type===z.type&&Me.format===z.format&&Me.internalformat===z.internalformat,"incompatible format for texture.subimage"),L(oe>=0&&ee>=0&&oe+z.width<=Me.width&&ee+z.height<=Me.height,"texture.subimage write out of bounds"),L(Me.mipmask&1<<pe,"missing mipmap data"),L(z.data||z.element||z.needsCopy,"missing image data"),_n(Me),Qt(z,K,oe,ee,pe),jr(),mr(z),Nt}function H(R,re){var ge=R|0,we=re|0||ge;if(ge===Me.width&&we===Me.height)return Nt;Nt.width=Me.width=ge,Nt.height=Me.height=we,_n(Me);for(var oe=0;Me.mipmask>>oe;++oe){var ee=ge>>oe,pe=we>>oe;if(!ee||!pe)break;x.texImage2D(K,oe,Me.format,ee,pe,0,Me.format,Me.type,null)}return jr(),Fe.profile&&(Me.stats.size=Pr(Me.internalformat,Me.type,ge,we,!1,!1)),Nt}return Nt(k,ke),Nt.subimage=Er,Nt.resize=H,Nt._reglType="texture2d",Nt._texture=Me,Fe.profile&&(Nt.stats=Me.stats),Nt.destroy=function(){Me.decRef()},Nt}function Sr(k,ke,Me,Nt,Er,H){var R=new cr(Ee);An[R.id]=R,De.cubeCount++;var re=new Array(6);function ge(ee,pe,z,Q,U,ye){var Ae,Ve=R.texInfo;for($r.call(Ve),Ae=0;Ae<6;++Ae)re[Ae]=xr();if(typeof ee=="number"||!ee){var Ye=ee|0||1;for(Ae=0;Ae<6;++Ae)vr(re[Ae],Ye,Ye)}else if(typeof ee=="object")if(pe)Mr(re[0],ee),Mr(re[1],pe),Mr(re[2],z),Mr(re[3],Q),Mr(re[4],U),Mr(re[5],ye);else if(ln(Ve,ee),zt(R,ee),"faces"in ee){var Ue=ee.faces;for(L(Array.isArray(Ue)&&Ue.length===6,"cube faces must be a length 6 array"),Ae=0;Ae<6;++Ae)L(typeof Ue[Ae]=="object"&&!!Ue[Ae],"invalid input for cube map face"),yt(re[Ae],R),Mr(re[Ae],Ue[Ae])}else for(Ae=0;Ae<6;++Ae)Mr(re[Ae],ee);else L.raise("invalid arguments to cube map");for(yt(R,re[0]),Z.npotTextureCube||L(S(R.width)&&S(R.height),"your browser does not support non power or two texture dimensions"),Ve.genMipmaps?R.mipmask=(re[0].width<<1)-1:R.mipmask=re[0].mipmask,L.textureCube(R,Ve,re,Z),R.internalformat=re[0].internalformat,ge.width=re[0].width,ge.height=re[0].height,_n(R),Ae=0;Ae<6;++Ae)fn(re[Ae],ze+Ae);for(bn(Ve,Ee),jr(),Fe.profile&&(R.stats.size=Pr(R.internalformat,R.type,ge.width,ge.height,Ve.genMipmaps,!0)),ge.format=at[R.internalformat],ge.type=Ot[R.type],ge.mag=qe[Ve.magFilter],ge.min=St[Ve.minFilter],ge.wrapS=Je[Ve.wrapS],ge.wrapT=Je[Ve.wrapT],Ae=0;Ae<6;++Ae)mn(re[Ae]);return ge}function we(ee,pe,z,Q,U){L(!!pe,"must specify image data"),L(typeof ee=="number"&&ee===(ee|0)&&ee>=0&&ee<6,"invalid face");var ye=z|0,Ae=Q|0,Ve=U|0,Ye=kt();return yt(Ye,R),Ye.width=0,Ye.height=0,Ze(Ye,pe),Ye.width=Ye.width||(R.width>>Ve)-ye,Ye.height=Ye.height||(R.height>>Ve)-Ae,L(R.type===Ye.type&&R.format===Ye.format&&R.internalformat===Ye.internalformat,"incompatible format for texture.subimage"),L(ye>=0&&Ae>=0&&ye+Ye.width<=R.width&&Ae+Ye.height<=R.height,"texture.subimage write out of bounds"),L(R.mipmask&1<<Ve,"missing mipmap data"),L(Ye.data||Ye.element||Ye.needsCopy,"missing image data"),_n(R),Qt(Ye,ze+ee,ye,Ae,Ve),jr(),mr(Ye),ge}function oe(ee){var pe=ee|0;if(pe!==R.width){ge.width=R.width=pe,ge.height=R.height=pe,_n(R);for(var z=0;z<6;++z)for(var Q=0;R.mipmask>>Q;++Q)x.texImage2D(ze+z,Q,R.format,pe>>Q,pe>>Q,0,R.format,R.type,null);return jr(),Fe.profile&&(R.stats.size=Pr(R.internalformat,R.type,ge.width,ge.height,!1,!0)),ge}}return ge(k,ke,Me,Nt,Er,H),ge.subimage=we,ge.resize=oe,ge._reglType="textureCube",ge._texture=R,Fe.profile&&(ge.stats=R.stats),ge.destroy=function(){R.decRef()},ge}function Br(){for(var k=0;k<Gn;++k)x.activeTexture(Fa+k),x.bindTexture(K,null),nn[k]=null;jn(An).forEach(Yt),De.cubeCount=0,De.textureCount=0}Fe.profile&&(De.getTotalTextureSize=function(){var k=0;return Object.keys(An).forEach(function(ke){k+=An[ke].stats.size}),k});function ei(){for(var k=0;k<Gn;++k){var ke=nn[k];ke&&(ke.bindCount=0,ke.unit=-1,nn[k]=null)}jn(An).forEach(function(Me){Me.texture=x.createTexture(),x.bindTexture(Me.target,Me.texture);for(var Nt=0;Nt<32;++Nt)if(Me.mipmask&1<<Nt)if(Me.target===K)x.texImage2D(K,Nt,Me.internalformat,Me.width>>Nt,Me.height>>Nt,0,Me.internalformat,Me.type,null);else for(var Er=0;Er<6;++Er)x.texImage2D(ze+Er,Nt,Me.internalformat,Me.width>>Nt,Me.height>>Nt,0,Me.internalformat,Me.type,null);bn(Me.texInfo,Me.target)})}function Yn(){for(var k=0;k<Gn;++k){var ke=nn[k];ke&&(ke.bindCount=0,ke.unit=-1,nn[k]=null),x.activeTexture(Fa+k),x.bindTexture(K,null),x.bindTexture(Ee,null)}}return{create2D:br,createCube:Sr,clear:Br,getTexture:function(k){return null},restore:ei,refresh:Yn}}var tr=36161,Kr=32854,ap=32855,Vs=36194,Pf=33189,co=36168,yn=34041,jf=35907,Nf=34836,Mf=34842,Rf=34843,Mo=[];Mo[Kr]=2,Mo[ap]=2,Mo[Vs]=2,Mo[Pf]=2,Mo[co]=1,Mo[yn]=4,Mo[jf]=4,Mo[Nf]=16,Mo[Mf]=8,Mo[Rf]=6;function Cf(x,F,Z){return Mo[x]*F*Z}var up=function(x,F,Z,Ie,Xe){var De={rgba4:Kr,rgb565:Vs,"rgb5 a1":ap,depth:Pf,stencil:co,"depth stencil":yn};F.ext_srgb&&(De.srgba=jf),F.ext_color_buffer_half_float&&(De.rgba16f=Mf,De.rgb16f=Rf),F.webgl_color_buffer_float&&(De.rgba32f=Nf);var Fe=[];Object.keys(De).forEach(function(rt){var pt=De[rt];Fe[pt]=rt});var tt=0,nt={};function ct(rt){this.id=tt++,this.refCount=1,this.renderbuffer=rt,this.format=Kr,this.width=0,this.height=0,Xe.profile&&(this.stats={size:0})}ct.prototype.decRef=function(){--this.refCount<=0&&it(this)};function it(rt){var pt=rt.renderbuffer;L(pt,"must not double destroy renderbuffer"),x.bindRenderbuffer(tr,null),x.deleteRenderbuffer(pt),rt.renderbuffer=null,rt.refCount=0,delete nt[rt.id],Ie.renderbufferCount--}function dt(rt,pt){var me=new ct(x.createRenderbuffer());nt[me.id]=me,Ie.renderbufferCount++;function Be(Ot,qe){var St=0,Je=0,ht=Kr;if(typeof Ot=="object"&&Ot){var Qe=Ot;if("shape"in Qe){var yt=Qe.shape;L(Array.isArray(yt)&&yt.length>=2,"invalid renderbuffer shape"),St=yt[0]|0,Je=yt[1]|0}else"radius"in Qe&&(St=Je=Qe.radius|0),"width"in Qe&&(St=Qe.width|0),"height"in Qe&&(Je=Qe.height|0);"format"in Qe&&(L.parameter(Qe.format,De,"invalid renderbuffer format"),ht=De[Qe.format])}else typeof Ot=="number"?(St=Ot|0,typeof qe=="number"?Je=qe|0:Je=St):Ot?L.raise("invalid arguments to renderbuffer constructor"):St=Je=1;if(L(St>0&&Je>0&&St<=Z.maxRenderbufferSize&&Je<=Z.maxRenderbufferSize,"invalid renderbuffer size"),!(St===me.width&&Je===me.height&&ht===me.format))return Be.width=me.width=St,Be.height=me.height=Je,me.format=ht,x.bindRenderbuffer(tr,me.renderbuffer),x.renderbufferStorage(tr,ht,St,Je),L(x.getError()===0,"invalid render buffer format"),Xe.profile&&(me.stats.size=Cf(me.format,me.width,me.height)),Be.format=Fe[me.format],Be}function at(Ot,qe){var St=Ot|0,Je=qe|0||St;return St===me.width&&Je===me.height||(L(St>0&&Je>0&&St<=Z.maxRenderbufferSize&&Je<=Z.maxRenderbufferSize,"invalid renderbuffer size"),Be.width=me.width=St,Be.height=me.height=Je,x.bindRenderbuffer(tr,me.renderbuffer),x.renderbufferStorage(tr,me.format,St,Je),L(x.getError()===0,"invalid render buffer format"),Xe.profile&&(me.stats.size=Cf(me.format,me.width,me.height))),Be}return Be(rt,pt),Be.resize=at,Be._reglType="renderbuffer",Be._renderbuffer=me,Xe.profile&&(Be.stats=me.stats),Be.destroy=function(){me.decRef()},Be}Xe.profile&&(Ie.getTotalRenderbufferSize=function(){var rt=0;return Object.keys(nt).forEach(function(pt){rt+=nt[pt].stats.size}),rt});function gt(){jn(nt).forEach(function(rt){rt.renderbuffer=x.createRenderbuffer(),x.bindRenderbuffer(tr,rt.renderbuffer),x.renderbufferStorage(tr,rt.format,rt.width,rt.height)}),x.bindRenderbuffer(tr,null)}return{create:dt,clear:function(){jn(nt).forEach(it)},restore:gt}},Ro=36160,$s=36161,bo=3553,Ws=34069,Ys=36064,Co=36096,sp=36128,cp=33306,fp=36053,Uh=36054,zh=36055,Hh=36057,Du=36061,Xh=36193,lp=5121,pp=5126,dp=6407,Ks=6408,hp=6402,Vh=[dp,Ks],Df=[];Df[Ks]=4,Df[dp]=3;var qs=[];qs[lp]=1,qs[pp]=4,qs[Xh]=2;var $h=32854,If=32855,Wh=36194,Yh=33189,Kh=36168,kf=34041,yp=35907,qh=34836,vp=34842,Zh=34843,gp=[$h,If,Wh,yp,vp,Zh,qh],Ba={};Ba[fp]="complete",Ba[Uh]="incomplete attachment",Ba[Hh]="incomplete dimensions",Ba[zh]="incomplete, missing attachment",Ba[Du]="unsupported";function mp(x,F,Z,Ie,Xe,De){var Fe={cur:null,next:null,dirty:!1,setFBO:null},tt=["rgba"],nt=["rgba4","rgb565","rgb5 a1"];F.ext_srgb&&nt.push("srgba"),F.ext_color_buffer_half_float&&nt.push("rgba16f","rgb16f"),F.webgl_color_buffer_float&&nt.push("rgba32f");var ct=["uint8"];F.oes_texture_half_float&&ct.push("half float","float16"),F.oes_texture_float&&ct.push("float","float32");function it(mt,Ze,We){this.target=mt,this.texture=Ze,this.renderbuffer=We;var Qt=0,be=0;Ze?(Qt=Ze.width,be=Ze.height):We&&(Qt=We.width,be=We.height),this.width=Qt,this.height=be}function dt(mt){mt&&(mt.texture&&mt.texture._texture.decRef(),mt.renderbuffer&&mt.renderbuffer._renderbuffer.decRef())}function gt(mt,Ze,We){if(mt)if(mt.texture){var Qt=mt.texture._texture,be=Math.max(1,Qt.width),kt=Math.max(1,Qt.height);L(be===Ze&&kt===We,"inconsistent width/height for supplied texture"),Qt.refCount+=1}else{var mr=mt.renderbuffer._renderbuffer;L(mr.width===Ze&&mr.height===We,"inconsistent width/height for renderbuffer"),mr.refCount+=1}}function rt(mt,Ze){Ze&&(Ze.texture?x.framebufferTexture2D(Ro,mt,Ze.target,Ze.texture._texture.texture,0):x.framebufferRenderbuffer(Ro,mt,$s,Ze.renderbuffer._renderbuffer.renderbuffer))}function pt(mt){var Ze=bo,We=null,Qt=null,be=mt;typeof mt=="object"&&(be=mt.data,"target"in mt&&(Ze=mt.target|0)),L.type(be,"function","invalid attachment data");var kt=be._reglType;return kt==="texture2d"?(We=be,L(Ze===bo)):kt==="textureCube"?(We=be,L(Ze>=Ws&&Ze<Ws+6,"invalid cube map target")):kt==="renderbuffer"?(Qt=be,Ze=$s):L.raise("invalid regl object for attachment"),new it(Ze,We,Qt)}function me(mt,Ze,We,Qt,be){if(We){var kt=Ie.create2D({width:mt,height:Ze,format:Qt,type:be});return kt._texture.refCount=0,new it(bo,kt,null)}else{var mr=Xe.create({width:mt,height:Ze,format:Qt});return mr._renderbuffer.refCount=0,new it($s,null,mr)}}function Be(mt){return mt&&(mt.texture||mt.renderbuffer)}function at(mt,Ze,We){mt&&(mt.texture?mt.texture.resize(Ze,We):mt.renderbuffer&&mt.renderbuffer.resize(Ze,We),mt.width=Ze,mt.height=We)}var Ot=0,qe={};function St(){this.id=Ot++,qe[this.id]=this,this.framebuffer=x.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Je(mt){mt.colorAttachments.forEach(dt),dt(mt.depthAttachment),dt(mt.stencilAttachment),dt(mt.depthStencilAttachment)}function ht(mt){var Ze=mt.framebuffer;L(Ze,"must not double destroy framebuffer"),x.deleteFramebuffer(Ze),mt.framebuffer=null,De.framebufferCount--,delete qe[mt.id]}function Qe(mt){var Ze;x.bindFramebuffer(Ro,mt.framebuffer);var We=mt.colorAttachments;for(Ze=0;Ze<We.length;++Ze)rt(Ys+Ze,We[Ze]);for(Ze=We.length;Ze<Z.maxColorAttachments;++Ze)x.framebufferTexture2D(Ro,Ys+Ze,bo,null,0);x.framebufferTexture2D(Ro,cp,bo,null,0),x.framebufferTexture2D(Ro,Co,bo,null,0),x.framebufferTexture2D(Ro,sp,bo,null,0),rt(Co,mt.depthAttachment),rt(sp,mt.stencilAttachment),rt(cp,mt.depthStencilAttachment);var Qt=x.checkFramebufferStatus(Ro);!x.isContextLost()&&Qt!==fp&&L.raise("framebuffer configuration not supported, status = "+Ba[Qt]),x.bindFramebuffer(Ro,Fe.next?Fe.next.framebuffer:null),Fe.cur=Fe.next,x.getError()}function yt(mt,Ze){var We=new St;De.framebufferCount++;function Qt(kt,mr){var ir;L(Fe.next!==We,"can not update framebuffer which is currently in use");var vr=0,Mr=0,fn=!0,wn=!0,xr=null,mn=!0,$r="rgba",ln="uint8",bn=1,Wr=null,An=null,Gn=null,nn=!1;if(typeof kt=="number")vr=kt|0,Mr=mr|0||vr;else if(!kt)vr=Mr=1;else{L.type(kt,"object","invalid arguments for framebuffer");var cr=kt;if("shape"in cr){var _n=cr.shape;L(Array.isArray(_n)&&_n.length>=2,"invalid shape for framebuffer"),vr=_n[0],Mr=_n[1]}else"radius"in cr&&(vr=Mr=cr.radius),"width"in cr&&(vr=cr.width),"height"in cr&&(Mr=cr.height);("color"in cr||"colors"in cr)&&(xr=cr.color||cr.colors,Array.isArray(xr)&&L(xr.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),xr||("colorCount"in cr&&(bn=cr.colorCount|0,L(bn>0,"invalid color buffer count")),"colorTexture"in cr&&(mn=!!cr.colorTexture,$r="rgba4"),"colorType"in cr&&(ln=cr.colorType,mn?(L(F.oes_texture_float||!(ln==="float"||ln==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),L(F.oes_texture_half_float||!(ln==="half float"||ln==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ln==="half float"||ln==="float16"?(L(F.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),$r="rgba16f"):(ln==="float"||ln==="float32")&&(L(F.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),$r="rgba32f"),L.oneOf(ln,ct,"invalid color type")),"colorFormat"in cr&&($r=cr.colorFormat,tt.indexOf($r)>=0?mn=!0:nt.indexOf($r)>=0?mn=!1:mn?L.oneOf(cr.colorFormat,tt,"invalid color format for texture"):L.oneOf(cr.colorFormat,nt,"invalid color format for renderbuffer"))),("depthTexture"in cr||"depthStencilTexture"in cr)&&(nn=!!(cr.depthTexture||cr.depthStencilTexture),L(!nn||F.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in cr&&(typeof cr.depth=="boolean"?fn=cr.depth:(Wr=cr.depth,wn=!1)),"stencil"in cr&&(typeof cr.stencil=="boolean"?wn=cr.stencil:(An=cr.stencil,fn=!1)),"depthStencil"in cr&&(typeof cr.depthStencil=="boolean"?fn=wn=cr.depthStencil:(Gn=cr.depthStencil,fn=!1,wn=!1))}var jr=null,Yt=null,br=null,Sr=null;if(Array.isArray(xr))jr=xr.map(pt);else if(xr)jr=[pt(xr)];else for(jr=new Array(bn),ir=0;ir<bn;++ir)jr[ir]=me(vr,Mr,mn,$r,ln);L(F.webgl_draw_buffers||jr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),L(jr.length<=Z.maxColorAttachments,"too many color attachments, not supported"),vr=vr||jr[0].width,Mr=Mr||jr[0].height,Wr?Yt=pt(Wr):fn&&!wn&&(Yt=me(vr,Mr,nn,"depth","uint32")),An?br=pt(An):wn&&!fn&&(br=me(vr,Mr,!1,"stencil","uint8")),Gn?Sr=pt(Gn):!Wr&&!An&&wn&&fn&&(Sr=me(vr,Mr,nn,"depth stencil","depth stencil")),L(!!Wr+!!An+!!Gn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Br=null;for(ir=0;ir<jr.length;++ir)if(gt(jr[ir],vr,Mr),L(!jr[ir]||jr[ir].texture&&Vh.indexOf(jr[ir].texture._texture.format)>=0||jr[ir].renderbuffer&&gp.indexOf(jr[ir].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ir+" is invalid"),jr[ir]&&jr[ir].texture){var ei=Df[jr[ir].texture._texture.format]*qs[jr[ir].texture._texture.type];Br===null?Br=ei:L(Br===ei,"all color attachments much have the same number of bits per pixel.")}return gt(Yt,vr,Mr),L(!Yt||Yt.texture&&Yt.texture._texture.format===hp||Yt.renderbuffer&&Yt.renderbuffer._renderbuffer.format===Yh,"invalid depth attachment for framebuffer object"),gt(br,vr,Mr),L(!br||br.renderbuffer&&br.renderbuffer._renderbuffer.format===Kh,"invalid stencil attachment for framebuffer object"),gt(Sr,vr,Mr),L(!Sr||Sr.texture&&Sr.texture._texture.format===kf||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===kf,"invalid depth-stencil attachment for framebuffer object"),Je(We),We.width=vr,We.height=Mr,We.colorAttachments=jr,We.depthAttachment=Yt,We.stencilAttachment=br,We.depthStencilAttachment=Sr,Qt.color=jr.map(Be),Qt.depth=Be(Yt),Qt.stencil=Be(br),Qt.depthStencil=Be(Sr),Qt.width=We.width,Qt.height=We.height,Qe(We),Qt}function be(kt,mr){L(Fe.next!==We,"can not resize a framebuffer which is currently in use");var ir=Math.max(kt|0,1),vr=Math.max(mr|0||ir,1);if(ir===We.width&&vr===We.height)return Qt;for(var Mr=We.colorAttachments,fn=0;fn<Mr.length;++fn)at(Mr[fn],ir,vr);return at(We.depthAttachment,ir,vr),at(We.stencilAttachment,ir,vr),at(We.depthStencilAttachment,ir,vr),We.width=Qt.width=ir,We.height=Qt.height=vr,Qe(We),Qt}return Qt(mt,Ze),f(Qt,{resize:be,_reglType:"framebuffer",_framebuffer:We,destroy:function(){ht(We),Je(We)},use:function(kt){Fe.setFBO({framebuffer:Qt},kt)}})}function zt(mt){var Ze=Array(6);function We(be){var kt;L(Ze.indexOf(Fe.next)<0,"can not update framebuffer which is currently in use");var mr={color:null},ir=0,vr=null,Mr="rgba",fn="uint8",wn=1;if(typeof be=="number")ir=be|0;else if(!be)ir=1;else{L.type(be,"object","invalid arguments for framebuffer");var xr=be;if("shape"in xr){var mn=xr.shape;L(Array.isArray(mn)&&mn.length>=2,"invalid shape for framebuffer"),L(mn[0]===mn[1],"cube framebuffer must be square"),ir=mn[0]}else"radius"in xr&&(ir=xr.radius|0),"width"in xr?(ir=xr.width|0,"height"in xr&&L(xr.height===ir,"must be square")):"height"in xr&&(ir=xr.height|0);("color"in xr||"colors"in xr)&&(vr=xr.color||xr.colors,Array.isArray(vr)&&L(vr.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),vr||("colorCount"in xr&&(wn=xr.colorCount|0,L(wn>0,"invalid color buffer count")),"colorType"in xr&&(L.oneOf(xr.colorType,ct,"invalid color type"),fn=xr.colorType),"colorFormat"in xr&&(Mr=xr.colorFormat,L.oneOf(xr.colorFormat,tt,"invalid color format for texture"))),"depth"in xr&&(mr.depth=xr.depth),"stencil"in xr&&(mr.stencil=xr.stencil),"depthStencil"in xr&&(mr.depthStencil=xr.depthStencil)}var $r;if(vr)if(Array.isArray(vr))for($r=[],kt=0;kt<vr.length;++kt)$r[kt]=vr[kt];else $r=[vr];else{$r=Array(wn);var ln={radius:ir,format:Mr,type:fn};for(kt=0;kt<wn;++kt)$r[kt]=Ie.createCube(ln)}for(mr.color=Array($r.length),kt=0;kt<$r.length;++kt){var bn=$r[kt];L(typeof bn=="function"&&bn._reglType==="textureCube","invalid cube map"),ir=ir||bn.width,L(bn.width===ir&&bn.height===ir,"invalid cube map shape"),mr.color[kt]={target:Ws,data:$r[kt]}}for(kt=0;kt<6;++kt){for(var Wr=0;Wr<$r.length;++Wr)mr.color[Wr].target=Ws+kt;kt>0&&(mr.depth=Ze[0].depth,mr.stencil=Ze[0].stencil,mr.depthStencil=Ze[0].depthStencil),Ze[kt]?Ze[kt](mr):Ze[kt]=yt(mr)}return f(We,{width:ir,height:ir,color:$r})}function Qt(be){var kt,mr=be|0;if(L(mr>0&&mr<=Z.maxCubeMapSize,"invalid radius for cube fbo"),mr===We.width)return We;var ir=We.color;for(kt=0;kt<ir.length;++kt)ir[kt].resize(mr);for(kt=0;kt<6;++kt)Ze[kt].resize(mr);return We.width=We.height=mr,We}return We(mt),f(We,{faces:Ze,resize:Qt,_reglType:"framebufferCube",destroy:function(){Ze.forEach(function(be){be.destroy()})}})}function Zt(){Fe.cur=null,Fe.next=null,Fe.dirty=!0,jn(qe).forEach(function(mt){mt.framebuffer=x.createFramebuffer(),Qe(mt)})}return f(Fe,{getFramebuffer:function(mt){if(typeof mt=="function"&&mt._reglType==="framebuffer"){var Ze=mt._framebuffer;if(Ze instanceof St)return Ze}return null},create:yt,createCube:zt,clear:function(){jn(qe).forEach(ht)},restore:Zt})}var Jh=5126,Lf=34962;function Ff(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Jh,this.offset=0,this.stride=0,this.divisor=0}function Qh(x,F,Z,Ie,Xe){for(var De=Z.maxAttributes,Fe=new Array(De),tt=0;tt<De;++tt)Fe[tt]=new Ff;var nt=0,ct={},it={Record:Ff,scope:{},state:Fe,currentVAO:null,targetVAO:null,restore:gt()?qe:function(){},createVAO:St,getVAO:pt,destroyBuffer:dt,setVAO:gt()?me:Be,clear:gt()?at:function(){}};function dt(Je){for(var ht=0;ht<Fe.length;++ht){var Qe=Fe[ht];Qe.buffer===Je&&(x.disableVertexAttribArray(ht),Qe.buffer=null)}}function gt(){return F.oes_vertex_array_object}function rt(){return F.angle_instanced_arrays}function pt(Je){return typeof Je=="function"&&Je._vao?Je._vao:null}function me(Je){if(Je!==it.currentVAO){var ht=gt();Je?ht.bindVertexArrayOES(Je.vao):ht.bindVertexArrayOES(null),it.currentVAO=Je}}function Be(Je){if(Je!==it.currentVAO){if(Je)Je.bindAttrs();else for(var ht=rt(),Qe=0;Qe<Fe.length;++Qe){var yt=Fe[Qe];yt.buffer?(x.enableVertexAttribArray(Qe),x.vertexAttribPointer(Qe,yt.size,yt.type,yt.normalized,yt.stride,yt.offfset),ht&&yt.divisor&&ht.vertexAttribDivisorANGLE(Qe,yt.divisor)):(x.disableVertexAttribArray(Qe),x.vertexAttrib4f(Qe,yt.x,yt.y,yt.z,yt.w))}it.currentVAO=Je}}function at(){jn(ct).forEach(function(Je){Je.destroy()})}function Ot(){this.id=++nt,this.attributes=[];var Je=gt();Je?this.vao=Je.createVertexArrayOES():this.vao=null,ct[this.id]=this,this.buffers=[]}Ot.prototype.bindAttrs=function(){for(var Je=rt(),ht=this.attributes,Qe=0;Qe<ht.length;++Qe){var yt=ht[Qe];yt.buffer?(x.enableVertexAttribArray(Qe),x.bindBuffer(Lf,yt.buffer.buffer),x.vertexAttribPointer(Qe,yt.size,yt.type,yt.normalized,yt.stride,yt.offset),Je&&yt.divisor&&Je.vertexAttribDivisorANGLE(Qe,yt.divisor)):(x.disableVertexAttribArray(Qe),x.vertexAttrib4f(Qe,yt.x,yt.y,yt.z,yt.w))}for(var zt=ht.length;zt<De;++zt)x.disableVertexAttribArray(zt)},Ot.prototype.refresh=function(){var Je=gt();Je&&(Je.bindVertexArrayOES(this.vao),this.bindAttrs(),it.currentVAO=this)},Ot.prototype.destroy=function(){if(this.vao){var Je=gt();this===it.currentVAO&&(it.currentVAO=null,Je.bindVertexArrayOES(null)),Je.deleteVertexArrayOES(this.vao),this.vao=null}ct[this.id]&&(delete ct[this.id],Ie.vaoCount-=1)};function qe(){var Je=gt();Je&&jn(ct).forEach(function(ht){ht.refresh()})}function St(Je){var ht=new Ot;Ie.vaoCount+=1;function Qe(yt){L(Array.isArray(yt),"arguments to vertex array constructor must be an array"),L(yt.length<De,"too many attributes"),L(yt.length>0,"must specify at least one attribute");var zt={},Zt=ht.attributes;Zt.length=yt.length;for(var mt=0;mt<yt.length;++mt){var Ze=yt[mt],We=Zt[mt]=new Ff,Qt=Ze.data||Ze;if(Array.isArray(Qt)||a(Qt)||Kn(Qt)){var be;ht.buffers[mt]&&(be=ht.buffers[mt],a(Qt)&&be._buffer.byteLength>=Qt.byteLength?be.subdata(Qt):(be.destroy(),ht.buffers[mt]=null)),ht.buffers[mt]||(be=ht.buffers[mt]=Xe.create(Ze,Lf,!1,!0)),We.buffer=Xe.getBuffer(be),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1,zt[mt]=1}else Xe.getBuffer(Ze)?(We.buffer=Xe.getBuffer(Ze),We.size=We.buffer.dimension|0,We.normalized=!1,We.type=We.buffer.dtype,We.offset=0,We.stride=0,We.divisor=0,We.state=1):Xe.getBuffer(Ze.buffer)?(We.buffer=Xe.getBuffer(Ze.buffer),We.size=(+Ze.size||We.buffer.dimension)|0,We.normalized=!!Ze.normalized||!1,"type"in Ze?(L.parameter(Ze.type,mo,"invalid buffer type"),We.type=mo[Ze.type]):We.type=We.buffer.dtype,We.offset=(Ze.offset||0)|0,We.stride=(Ze.stride||0)|0,We.divisor=(Ze.divisor||0)|0,We.state=1,L(We.size>=1&&We.size<=4,"size must be between 1 and 4"),L(We.offset>=0,"invalid offset"),L(We.stride>=0&&We.stride<=255,"stride must be between 0 and 255"),L(We.divisor>=0,"divisor must be positive"),L(!We.divisor||!!F.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in Ze?(L(mt>0,"first attribute must not be a constant"),We.x=+Ze.x||0,We.y=+Ze.y||0,We.z=+Ze.z||0,We.w=+Ze.w||0,We.state=2):L(!1,"invalid attribute spec for location "+mt)}for(var kt=0;kt<ht.buffers.length;++kt)!zt[kt]&&ht.buffers[kt]&&(ht.buffers[kt].destroy(),ht.buffers[kt]=null);return ht.refresh(),Qe}return Qe.destroy=function(){for(var yt=0;yt<ht.buffers.length;++yt)ht.buffers[yt]&&ht.buffers[yt].destroy();ht.buffers.length=0,ht.destroy()},Qe._vao=ht,Qe._reglType="vao",Qe(Je)}return it}var Bf=35632,ey=35633,bp=35718,_p=35721;function ty(x,F,Z,Ie){var Xe={},De={};function Fe(me,Be,at,Ot){this.name=me,this.id=Be,this.location=at,this.info=Ot}function tt(me,Be){for(var at=0;at<me.length;++at)if(me[at].id===Be.id){me[at].location=Be.location;return}me.push(Be)}function nt(me,Be,at){var Ot=me===Bf?Xe:De,qe=Ot[Be];if(!qe){var St=F.str(Be);qe=x.createShader(me),x.shaderSource(qe,St),x.compileShader(qe),L.shaderError(x,qe,St,me,at),Ot[Be]=qe}return qe}var ct={},it=[],dt=0;function gt(me,Be){this.id=dt++,this.fragId=me,this.vertId=Be,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ie.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function rt(me,Be,at){var Ot,qe,St=nt(Bf,me.fragId),Je=nt(ey,me.vertId),ht=me.program=x.createProgram();if(x.attachShader(ht,St),x.attachShader(ht,Je),at)for(Ot=0;Ot<at.length;++Ot){var Qe=at[Ot];x.bindAttribLocation(ht,Qe[0],Qe[1])}x.linkProgram(ht),L.linkError(x,ht,F.str(me.fragId),F.str(me.vertId),Be);var yt=x.getProgramParameter(ht,bp);Ie.profile&&(me.stats.uniformsCount=yt);var zt=me.uniforms;for(Ot=0;Ot<yt;++Ot)if(qe=x.getActiveUniform(ht,Ot),qe)if(qe.size>1)for(var Zt=0;Zt<qe.size;++Zt){var mt=qe.name.replace("[0]","["+Zt+"]");tt(zt,new Fe(mt,F.id(mt),x.getUniformLocation(ht,mt),qe))}else tt(zt,new Fe(qe.name,F.id(qe.name),x.getUniformLocation(ht,qe.name),qe));var Ze=x.getProgramParameter(ht,_p);Ie.profile&&(me.stats.attributesCount=Ze);var We=me.attributes;for(Ot=0;Ot<Ze;++Ot)qe=x.getActiveAttrib(ht,Ot),qe&&tt(We,new Fe(qe.name,F.id(qe.name),x.getAttribLocation(ht,qe.name),qe))}Ie.profile&&(Z.getMaxUniformsCount=function(){var me=0;return it.forEach(function(Be){Be.stats.uniformsCount>me&&(me=Be.stats.uniformsCount)}),me},Z.getMaxAttributesCount=function(){var me=0;return it.forEach(function(Be){Be.stats.attributesCount>me&&(me=Be.stats.attributesCount)}),me});function pt(){Xe={},De={};for(var me=0;me<it.length;++me)rt(it[me],null,it[me].attributes.map(function(Be){return[Be.location,Be.name]}))}return{clear:function(){var me=x.deleteShader.bind(x);jn(Xe).forEach(me),Xe={},jn(De).forEach(me),De={},it.forEach(function(Be){x.deleteProgram(Be.program)}),it.length=0,ct={},Z.shaderCount=0},program:function(me,Be,at,Ot){L.command(me>=0,"missing vertex shader",at),L.command(Be>=0,"missing fragment shader",at);var qe=ct[Be];qe||(qe=ct[Be]={});var St=qe[me];if(St&&(St.refCount++,!Ot))return St;var Je=new gt(Be,me);return Z.shaderCount++,rt(Je,at,Ot),St||(qe[me]=Je),it.push(Je),f(Je,{destroy:function(){if(Je.refCount--,Je.refCount<=0){x.deleteProgram(Je.program);var ht=it.indexOf(Je);it.splice(ht,1),Z.shaderCount--}qe[Je.vertId].refCount<=0&&(x.deleteShader(De[Je.vertId]),delete De[Je.vertId],delete ct[Je.fragId][Je.vertId]),Object.keys(ct[Je.fragId]).length||(x.deleteShader(Xe[Je.fragId]),delete Xe[Je.fragId],delete ct[Je.fragId])}})},restore:pt,shader:nt,frag:-1,vert:-1}}var Qr=6408,Iu=5121,cn=3333,Ga=5126;function ry(x,F,Z,Ie,Xe,De,Fe){function tt(it){var dt;F.next===null?(L(Xe.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),dt=Iu):(L(F.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),dt=F.next.colorAttachments[0].texture._texture.type,De.oes_texture_float?(L(dt===Iu||dt===Ga,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),dt===Ga&&L(Fe.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):L(dt===Iu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var gt=0,rt=0,pt=Ie.framebufferWidth,me=Ie.framebufferHeight,Be=null;a(it)?Be=it:it&&(L.type(it,"object","invalid arguments to regl.read()"),gt=it.x|0,rt=it.y|0,L(gt>=0&&gt<Ie.framebufferWidth,"invalid x offset for regl.read"),L(rt>=0&&rt<Ie.framebufferHeight,"invalid y offset for regl.read"),pt=(it.width||Ie.framebufferWidth-gt)|0,me=(it.height||Ie.framebufferHeight-rt)|0,Be=it.data||null),Be&&(dt===Iu?L(Be instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):dt===Ga&&L(Be instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),L(pt>0&&pt+gt<=Ie.framebufferWidth,"invalid width for read pixels"),L(me>0&&me+rt<=Ie.framebufferHeight,"invalid height for read pixels"),Z();var at=pt*me*4;return Be||(dt===Iu?Be=new Uint8Array(at):dt===Ga&&(Be=Be||new Float32Array(at))),L.isTypedArray(Be,"data buffer for regl.read() must be a typedarray"),L(Be.byteLength>=at,"data buffer for regl.read() too small"),x.pixelStorei(cn,4),x.readPixels(gt,rt,pt,me,Qr,dt,Be),Be}function nt(it){var dt;return F.setFBO({framebuffer:it.framebuffer},function(){dt=tt(it)}),dt}function ct(it){return!it||!("framebuffer"in it)?tt(it):nt(it)}return ct}function Ua(x){return Array.prototype.slice.call(x)}function za(x){return Ua(x).join("")}function Ep(){var x=0,F=[],Z=[];function Ie(dt){for(var gt=0;gt<Z.length;++gt)if(Z[gt]===dt)return F[gt];var rt="g"+x++;return F.push(rt),Z.push(dt),rt}function Xe(){var dt=[];function gt(){dt.push.apply(dt,Ua(arguments))}var rt=[];function pt(){var me="v"+x++;return rt.push(me),arguments.length>0&&(dt.push(me,"="),dt.push.apply(dt,Ua(arguments)),dt.push(";")),me}return f(gt,{def:pt,toString:function(){return za([rt.length>0?"var "+rt.join(",")+";":"",za(dt)])}})}function De(){var dt=Xe(),gt=Xe(),rt=dt.toString,pt=gt.toString;function me(Be,at){gt(Be,at,"=",dt.def(Be,at),";")}return f(function(){dt.apply(dt,Ua(arguments))},{def:dt.def,entry:dt,exit:gt,save:me,set:function(Be,at,Ot){me(Be,at),dt(Be,at,"=",Ot,";")},toString:function(){return rt()+pt()}})}function Fe(){var dt=za(arguments),gt=De(),rt=De(),pt=gt.toString,me=rt.toString;return f(gt,{then:function(){return gt.apply(gt,Ua(arguments)),this},else:function(){return rt.apply(rt,Ua(arguments)),this},toString:function(){var Be=me();return Be&&(Be="else{"+Be+"}"),za(["if(",dt,"){",pt(),"}",Be])}})}var tt=Xe(),nt={};function ct(dt,gt){var rt=[];function pt(){var qe="a"+rt.length;return rt.push(qe),qe}gt=gt||0;for(var me=0;me<gt;++me)pt();var Be=De(),at=Be.toString,Ot=nt[dt]=f(Be,{arg:pt,toString:function(){return za(["function(",rt.join(),"){",at(),"}"])}});return Ot}function it(){var dt=['"use strict";',tt,"return {"];Object.keys(nt).forEach(function(pt){dt.push('"',pt,'":',nt[pt].toString(),",")}),dt.push("}");var gt=za(dt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),rt=Function.apply(null,F.concat(gt));return rt.apply(null,Z)}return{global:tt,link:Ie,block:Xe,proc:ct,scope:De,cond:Fe,compile:it}}var Ha="xyzw".split(""),Op=5121,Xa=1,ku=2,Gf=0,Uf=1,zf=2,Zs=3,Js=4,Hf=5,wp=6,xp="dither",li="blend.enable",Xf="blend.color",Lu="blend.equation",Qs="blend.func",ec="depth.enable",tc="depth.func",Vf="depth.range",Sp="depth.mask",$f="colorMask",Tp="cull.enable",Ap="cull.face",In="frontFace",Fu="lineWidth",Pp="polygonOffset.enable",Bu="polygonOffset.offset",pi="sample.alpha",jp="sample.enable",ia="sample.coverage",rc="stencil.enable",Wf="stencil.mask",nc="stencil.func",Yf="stencil.opFront",et="stencil.opBack",Kf="scissor.enable",Gu="scissor.box",Ko="viewport",Va="profile",Pi="framebuffer",$a="vert",Wa="frag",ji="elements",Ni="primitive",Mi="count",Uu="offset",zu="instances",Ya="vao",oc="Width",ic="Height",aa=Pi+oc,ua=Pi+ic,Np=Ko+oc,Mp=Ko+ic,qf="drawingBuffer",ac=qf+oc,Hu=qf+ic,ny=[Qs,Lu,nc,Yf,et,ia,Ko,Gu,Bu],eo=34962,Ri=34963,oy=35632,_o=35633,Zf=3553,Jf=34067,Rp=2884,Cp=3042,Dp=3024,Ip=2960,kp=2929,Qf=3089,Xu=32823,$n=32926,iy=32928,el=5126,Ka=35664,Vu=35665,Hn=35666,vn=5124,uc=35667,to=35668,or=35669,$u=35670,qa=35671,Za=35672,Wu=35673,Ja=35674,Yu=35675,Ku=35676,sa=35678,qu=35680,sc=4,Zu=1028,ca=1029,tl=2304,Ci=2305,Lp=32775,wr=32776,Fp=519,qo=7680,cc=0,Bp=1,rl=32774,Gp=513,nl=36160,ay=36064,Zo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Up=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jo={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Di={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},fc={frag:oy,vert:_o},ol={cw:tl,ccw:Ci};function lc(x){return Array.isArray(x)||a(x)||Kn(x)}function Qa(x){return x.sort(function(F,Z){return F===Ko?-1:Z===Ko?1:F<Z?-1:1})}function gn(x,F,Z,Ie){this.thisDep=x,this.contextDep=F,this.propDep=Z,this.append=Ie}function Qo(x){return x&&!(x.thisDep||x.contextDep||x.propDep)}function kr(x){return new gn(!1,!1,!1,x)}function Wn(x,F){var Z=x.type;if(Z===Gf){var Ie=x.data.length;return new gn(!0,Ie>=1,Ie>=2,F)}else if(Z===Js){var Xe=x.data;return new gn(Xe.thisDep,Xe.contextDep,Xe.propDep,F)}else{if(Z===Hf)return new gn(!1,!1,!1,F);if(Z===wp){for(var De=!1,Fe=!1,tt=!1,nt=0;nt<x.data.length;++nt){var ct=x.data[nt];if(ct.type===Uf)tt=!0;else if(ct.type===zf)Fe=!0;else if(ct.type===Zs)De=!0;else if(ct.type===Gf){De=!0;var it=ct.data;it>=1&&(Fe=!0),it>=2&&(tt=!0)}else ct.type===Js&&(De=De||ct.data.thisDep,Fe=Fe||ct.data.contextDep,tt=tt||ct.data.propDep)}return new gn(De,Fe,tt,F)}else return new gn(Z===Zs,Z===zf,Z===Uf,F)}}var eu=new gn(!1,!1,!1,function(){});function uy(x,F,Z,Ie,Xe,De,Fe,tt,nt,ct,it,dt,gt,rt,pt){var me=ct.Record,Be={add:32774,subtract:32778,"reverse subtract":32779};Z.ext_blend_minmax&&(Be.min=Lp,Be.max=wr);var at=Z.angle_instanced_arrays,Ot=Z.webgl_draw_buffers,qe={dirty:!0,profile:pt.profile},St={},Je=[],ht={},Qe={};function yt(H){return H.replace(".","_")}function zt(H,R,re){var ge=yt(H);Je.push(H),St[ge]=qe[ge]=!!re,ht[ge]=R}function Zt(H,R,re){var ge=yt(H);Je.push(H),Array.isArray(re)?(qe[ge]=re.slice(),St[ge]=re.slice()):qe[ge]=St[ge]=re,Qe[ge]=R}zt(xp,Dp),zt(li,Cp),Zt(Xf,"blendColor",[0,0,0,0]),Zt(Lu,"blendEquationSeparate",[rl,rl]),Zt(Qs,"blendFuncSeparate",[Bp,cc,Bp,cc]),zt(ec,kp,!0),Zt(tc,"depthFunc",Gp),Zt(Vf,"depthRange",[0,1]),Zt(Sp,"depthMask",!0),Zt($f,$f,[!0,!0,!0,!0]),zt(Tp,Rp),Zt(Ap,"cullFace",ca),Zt(In,In,Ci),Zt(Fu,Fu,1),zt(Pp,Xu),Zt(Bu,"polygonOffset",[0,0]),zt(pi,$n),zt(jp,iy),Zt(ia,"sampleCoverage",[1,!1]),zt(rc,Ip),Zt(Wf,"stencilMask",-1),Zt(nc,"stencilFunc",[Fp,0,-1]),Zt(Yf,"stencilOpSeparate",[Zu,qo,qo,qo]),Zt(et,"stencilOpSeparate",[ca,qo,qo,qo]),zt(Kf,Qf),Zt(Gu,"scissor",[0,0,x.drawingBufferWidth,x.drawingBufferHeight]),Zt(Ko,Ko,[0,0,x.drawingBufferWidth,x.drawingBufferHeight]);var mt={gl:x,context:gt,strings:F,next:St,current:qe,draw:dt,elements:De,buffer:Xe,shader:it,attributes:ct.state,vao:ct,uniforms:nt,framebuffer:tt,extensions:Z,timer:rt,isBufferArgs:lc},Ze={primTypes:Nn,compareFuncs:Jo,blendFuncs:Zo,blendEquations:Be,stencilOps:Di,glTypes:mo,orientationType:ol};L.optional(function(){mt.isArrayLike=b}),Ot&&(Ze.backBuffer=[ca],Ze.drawBuffer=Ir(Ie.maxDrawbuffers,function(H){return H===0?[0]:Ir(H,function(R){return ay+R})}));var We=0;function Qt(){var H=Ep(),R=H.link,re=H.global;H.id=We++,H.batchId="0";var ge=R(mt),we=H.shared={props:"a0"};Object.keys(mt).forEach(function(Q){we[Q]=re.def(ge,".",Q)}),L.optional(function(){H.CHECK=R(L),H.commandStr=L.guessCommand(),H.command=R(H.commandStr),H.assert=function(Q,U,ye){Q("if(!(",U,"))",this.CHECK,".commandRaise(",R(ye),",",this.command,");")},Ze.invalidBlendCombinations=Up});var oe=H.next={},ee=H.current={};Object.keys(Qe).forEach(function(Q){Array.isArray(qe[Q])&&(oe[Q]=re.def(we.next,".",Q),ee[Q]=re.def(we.current,".",Q))});var pe=H.constants={};Object.keys(Ze).forEach(function(Q){pe[Q]=re.def(JSON.stringify(Ze[Q]))}),H.invoke=function(Q,U){switch(U.type){case Gf:var ye=["this",we.context,we.props,H.batchId];return Q.def(R(U.data),".call(",ye.slice(0,Math.max(U.data.length+1,4)),")");case Uf:return Q.def(we.props,U.data);case zf:return Q.def(we.context,U.data);case Zs:return Q.def("this",U.data);case Js:return U.data.append(H,Q),U.data.ref;case Hf:return U.data.toString();case wp:return U.data.map(function(Ae){return H.invoke(Q,Ae)})}},H.attribCache={};var z={};return H.scopeAttrib=function(Q){var U=F.id(Q);if(U in z)return z[U];var ye=ct.scope[U];ye||(ye=ct.scope[U]=new me);var Ae=z[U]=R(ye);return Ae},H}function be(H){var R=H.static,re=H.dynamic,ge;if(Va in R){var we=!!R[Va];ge=kr(function(ee,pe){return we}),ge.enable=we}else if(Va in re){var oe=re[Va];ge=Wn(oe,function(ee,pe){return ee.invoke(pe,oe)})}return ge}function kt(H,R){var re=H.static,ge=H.dynamic;if(Pi in re){var we=re[Pi];return we?(we=tt.getFramebuffer(we),L.command(we,"invalid framebuffer object"),kr(function(ee,pe){var z=ee.link(we),Q=ee.shared;pe.set(Q.framebuffer,".next",z);var U=Q.context;return pe.set(U,"."+aa,z+".width"),pe.set(U,"."+ua,z+".height"),z})):kr(function(ee,pe){var z=ee.shared;pe.set(z.framebuffer,".next","null");var Q=z.context;return pe.set(Q,"."+aa,Q+"."+ac),pe.set(Q,"."+ua,Q+"."+Hu),"null"})}else if(Pi in ge){var oe=ge[Pi];return Wn(oe,function(ee,pe){var z=ee.invoke(pe,oe),Q=ee.shared,U=Q.framebuffer,ye=pe.def(U,".getFramebuffer(",z,")");L.optional(function(){ee.assert(pe,"!"+z+"||"+ye,"invalid framebuffer object")}),pe.set(U,".next",ye);var Ae=Q.context;return pe.set(Ae,"."+aa,ye+"?"+ye+".width:"+Ae+"."+ac),pe.set(Ae,"."+ua,ye+"?"+ye+".height:"+Ae+"."+Hu),ye})}else return null}function mr(H,R,re){var ge=H.static,we=H.dynamic;function oe(z){if(z in ge){var Q=ge[z];L.commandType(Q,"object","invalid "+z,re.commandStr);var U=!0,ye=Q.x|0,Ae=Q.y|0,Ve,Ye;return"width"in Q?(Ve=Q.width|0,L.command(Ve>=0,"invalid "+z,re.commandStr)):U=!1,"height"in Q?(Ye=Q.height|0,L.command(Ye>=0,"invalid "+z,re.commandStr)):U=!1,new gn(!U&&R&&R.thisDep,!U&&R&&R.contextDep,!U&&R&&R.propDep,function(Ft,dr){var It=Ft.shared.context,Kt=Ve;"width"in Q||(Kt=dr.def(It,".",aa,"-",ye));var fr=Ye;return"height"in Q||(fr=dr.def(It,".",ua,"-",Ae)),[ye,Ae,Kt,fr]})}else if(z in we){var Ue=we[z],ut=Wn(Ue,function(Ft,dr){var It=Ft.invoke(dr,Ue);L.optional(function(){Ft.assert(dr,It+"&&typeof "+It+'==="object"',"invalid "+z)});var Kt=Ft.shared.context,fr=dr.def(It,".x|0"),Nr=dr.def(It,".y|0"),on=dr.def('"width" in ',It,"?",It,".width|0:","(",Kt,".",aa,"-",fr,")"),ro=dr.def('"height" in ',It,"?",It,".height|0:","(",Kt,".",ua,"-",Nr,")");return L.optional(function(){Ft.assert(dr,on+">=0&&"+ro+">=0","invalid "+z)}),[fr,Nr,on,ro]});return R&&(ut.thisDep=ut.thisDep||R.thisDep,ut.contextDep=ut.contextDep||R.contextDep,ut.propDep=ut.propDep||R.propDep),ut}else return R?new gn(R.thisDep,R.contextDep,R.propDep,function(Ft,dr){var It=Ft.shared.context;return[0,0,dr.def(It,".",aa),dr.def(It,".",ua)]}):null}var ee=oe(Ko);if(ee){var pe=ee;ee=new gn(ee.thisDep,ee.contextDep,ee.propDep,function(z,Q){var U=pe.append(z,Q),ye=z.shared.context;return Q.set(ye,"."+Np,U[2]),Q.set(ye,"."+Mp,U[3]),U})}return{viewport:ee,scissor_box:oe(Gu)}}function ir(H,R){var re=H.static,ge=typeof re[Wa]=="string"&&typeof re[$a]=="string";if(ge){if(Object.keys(R.dynamic).length>0)return null;var we=R.static,oe=Object.keys(we);if(oe.length>0&&typeof we[oe[0]]=="number"){for(var ee=[],pe=0;pe<oe.length;++pe)L(typeof we[oe[pe]]=="number","must specify all vertex attribute locations when using vaos"),ee.push([we[oe[pe]]|0,oe[pe]]);return ee}}return null}function vr(H,R,re){var ge=H.static,we=H.dynamic;function oe(U){if(U in ge){var ye=F.id(ge[U]);L.optional(function(){it.shader(fc[U],ye,L.guessCommand())});var Ae=kr(function(){return ye});return Ae.id=ye,Ae}else if(U in we){var Ve=we[U];return Wn(Ve,function(Ye,Ue){var ut=Ye.invoke(Ue,Ve),Ft=Ue.def(Ye.shared.strings,".id(",ut,")");return L.optional(function(){Ue(Ye.shared.shader,".shader(",fc[U],",",Ft,",",Ye.command,");")}),Ft})}return null}var ee=oe(Wa),pe=oe($a),z=null,Q;return Qo(ee)&&Qo(pe)?(z=it.program(pe.id,ee.id,null,re),Q=kr(function(U,ye){return U.link(z)})):Q=new gn(ee&&ee.thisDep||pe&&pe.thisDep,ee&&ee.contextDep||pe&&pe.contextDep,ee&&ee.propDep||pe&&pe.propDep,function(U,ye){var Ae=U.shared.shader,Ve;ee?Ve=ee.append(U,ye):Ve=ye.def(Ae,".",Wa);var Ye;pe?Ye=pe.append(U,ye):Ye=ye.def(Ae,".",$a);var Ue=Ae+".program("+Ye+","+Ve;return L.optional(function(){Ue+=","+U.command}),ye.def(Ue+")")}),{frag:ee,vert:pe,progVar:Q,program:z}}function Mr(H,R){var re=H.static,ge=H.dynamic;function we(){if(ji in re){var U=re[ji];lc(U)?U=De.getElements(De.create(U,!0)):U&&(U=De.getElements(U),L.command(U,"invalid elements",R.commandStr));var ye=kr(function(Ve,Ye){if(U){var Ue=Ve.link(U);return Ve.ELEMENTS=Ue,Ue}return Ve.ELEMENTS=null,null});return ye.value=U,ye}else if(ji in ge){var Ae=ge[ji];return Wn(Ae,function(Ve,Ye){var Ue=Ve.shared,ut=Ue.isBufferArgs,Ft=Ue.elements,dr=Ve.invoke(Ye,Ae),It=Ye.def("null"),Kt=Ye.def(ut,"(",dr,")"),fr=Ve.cond(Kt).then(It,"=",Ft,".createStream(",dr,");").else(It,"=",Ft,".getElements(",dr,");");return L.optional(function(){Ve.assert(fr.else,"!"+dr+"||"+It,"invalid elements")}),Ye.entry(fr),Ye.exit(Ve.cond(Kt).then(Ft,".destroyStream(",It,");")),Ve.ELEMENTS=It,It})}return null}var oe=we();function ee(){if(Ni in re){var U=re[Ni];return L.commandParameter(U,Nn,"invalid primitve",R.commandStr),kr(function(Ae,Ve){return Nn[U]})}else if(Ni in ge){var ye=ge[Ni];return Wn(ye,function(Ae,Ve){var Ye=Ae.constants.primTypes,Ue=Ae.invoke(Ve,ye);return L.optional(function(){Ae.assert(Ve,Ue+" in "+Ye,"invalid primitive, must be one of "+Object.keys(Nn))}),Ve.def(Ye,"[",Ue,"]")})}else if(oe)return Qo(oe)?oe.value?kr(function(Ae,Ve){return Ve.def(Ae.ELEMENTS,".primType")}):kr(function(){return sc}):new gn(oe.thisDep,oe.contextDep,oe.propDep,function(Ae,Ve){var Ye=Ae.ELEMENTS;return Ve.def(Ye,"?",Ye,".primType:",sc)});return null}function pe(U,ye){if(U in re){var Ae=re[U]|0;return L.command(!ye||Ae>=0,"invalid "+U,R.commandStr),kr(function(Ye,Ue){return ye&&(Ye.OFFSET=Ae),Ae})}else if(U in ge){var Ve=ge[U];return Wn(Ve,function(Ye,Ue){var ut=Ye.invoke(Ue,Ve);return ye&&(Ye.OFFSET=ut,L.optional(function(){Ye.assert(Ue,ut+">=0","invalid "+U)})),ut})}else if(ye&&oe)return kr(function(Ye,Ue){return Ye.OFFSET="0",0});return null}var z=pe(Uu,!0);function Q(){if(Mi in re){var U=re[Mi]|0;return L.command(typeof U=="number"&&U>=0,"invalid vertex count",R.commandStr),kr(function(){return U})}else if(Mi in ge){var ye=ge[Mi];return Wn(ye,function(Ye,Ue){var ut=Ye.invoke(Ue,ye);return L.optional(function(){Ye.assert(Ue,"typeof "+ut+'==="number"&&'+ut+">=0&&"+ut+"===("+ut+"|0)","invalid vertex count")}),ut})}else if(oe)if(Qo(oe)){if(oe)return z?new gn(z.thisDep,z.contextDep,z.propDep,function(Ye,Ue){var ut=Ue.def(Ye.ELEMENTS,".vertCount-",Ye.OFFSET);return L.optional(function(){Ye.assert(Ue,ut+">=0","invalid vertex offset/element buffer too small")}),ut}):kr(function(Ye,Ue){return Ue.def(Ye.ELEMENTS,".vertCount")});var Ae=kr(function(){return-1});return L.optional(function(){Ae.MISSING=!0}),Ae}else{var Ve=new gn(oe.thisDep||z.thisDep,oe.contextDep||z.contextDep,oe.propDep||z.propDep,function(Ye,Ue){var ut=Ye.ELEMENTS;return Ye.OFFSET?Ue.def(ut,"?",ut,".vertCount-",Ye.OFFSET,":-1"):Ue.def(ut,"?",ut,".vertCount:-1")});return L.optional(function(){Ve.DYNAMIC=!0}),Ve}return null}return{elements:oe,primitive:ee(),count:Q(),instances:pe(zu,!1),offset:z}}function fn(H,R){var re=H.static,ge=H.dynamic,we={};return Je.forEach(function(oe){var ee=yt(oe);function pe(z,Q){if(oe in re){var U=z(re[oe]);we[ee]=kr(function(){return U})}else if(oe in ge){var ye=ge[oe];we[ee]=Wn(ye,function(Ae,Ve){return Q(Ae,Ve,Ae.invoke(Ve,ye))})}}switch(oe){case Tp:case li:case xp:case rc:case ec:case Kf:case Pp:case pi:case jp:case Sp:return pe(function(z){return L.commandType(z,"boolean",oe,R.commandStr),z},function(z,Q,U){return L.optional(function(){z.assert(Q,"typeof "+U+'==="boolean"',"invalid flag "+oe,z.commandStr)}),U});case tc:return pe(function(z){return L.commandParameter(z,Jo,"invalid "+oe,R.commandStr),Jo[z]},function(z,Q,U){var ye=z.constants.compareFuncs;return L.optional(function(){z.assert(Q,U+" in "+ye,"invalid "+oe+", must be one of "+Object.keys(Jo))}),Q.def(ye,"[",U,"]")});case Vf:return pe(function(z){return L.command(b(z)&&z.length===2&&typeof z[0]=="number"&&typeof z[1]=="number"&&z[0]<=z[1],"depth range is 2d array",R.commandStr),z},function(z,Q,U){L.optional(function(){z.assert(Q,z.shared.isArrayLike+"("+U+")&&"+U+".length===2&&typeof "+U+'[0]==="number"&&typeof '+U+'[1]==="number"&&'+U+"[0]<="+U+"[1]","depth range must be a 2d array")});var ye=Q.def("+",U,"[0]"),Ae=Q.def("+",U,"[1]");return[ye,Ae]});case Qs:return pe(function(z){L.commandType(z,"object","blend.func",R.commandStr);var Q="srcRGB"in z?z.srcRGB:z.src,U="srcAlpha"in z?z.srcAlpha:z.src,ye="dstRGB"in z?z.dstRGB:z.dst,Ae="dstAlpha"in z?z.dstAlpha:z.dst;return L.commandParameter(Q,Zo,ee+".srcRGB",R.commandStr),L.commandParameter(U,Zo,ee+".srcAlpha",R.commandStr),L.commandParameter(ye,Zo,ee+".dstRGB",R.commandStr),L.commandParameter(Ae,Zo,ee+".dstAlpha",R.commandStr),L.command(Up.indexOf(Q+", "+ye)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Q+", "+ye+")",R.commandStr),[Zo[Q],Zo[ye],Zo[U],Zo[Ae]]},function(z,Q,U){var ye=z.constants.blendFuncs;L.optional(function(){z.assert(Q,U+"&&typeof "+U+'==="object"',"invalid blend func, must be an object")});function Ae(It,Kt){var fr=Q.def('"',It,Kt,'" in ',U,"?",U,".",It,Kt,":",U,".",It);return L.optional(function(){z.assert(Q,fr+" in "+ye,"invalid "+oe+"."+It+Kt+", must be one of "+Object.keys(Zo))}),fr}var Ve=Ae("src","RGB"),Ye=Ae("dst","RGB");L.optional(function(){var It=z.constants.invalidBlendCombinations;z.assert(Q,It+".indexOf("+Ve+'+", "+'+Ye+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ue=Q.def(ye,"[",Ve,"]"),ut=Q.def(ye,"[",Ae("src","Alpha"),"]"),Ft=Q.def(ye,"[",Ye,"]"),dr=Q.def(ye,"[",Ae("dst","Alpha"),"]");return[Ue,Ft,ut,dr]});case Lu:return pe(function(z){if(typeof z=="string")return L.commandParameter(z,Be,"invalid "+oe,R.commandStr),[Be[z],Be[z]];if(typeof z=="object")return L.commandParameter(z.rgb,Be,oe+".rgb",R.commandStr),L.commandParameter(z.alpha,Be,oe+".alpha",R.commandStr),[Be[z.rgb],Be[z.alpha]];L.commandRaise("invalid blend.equation",R.commandStr)},function(z,Q,U){var ye=z.constants.blendEquations,Ae=Q.def(),Ve=Q.def(),Ye=z.cond("typeof ",U,'==="string"');return L.optional(function(){function Ue(ut,Ft,dr){z.assert(ut,dr+" in "+ye,"invalid "+Ft+", must be one of "+Object.keys(Be))}Ue(Ye.then,oe,U),z.assert(Ye.else,U+"&&typeof "+U+'==="object"',"invalid "+oe),Ue(Ye.else,oe+".rgb",U+".rgb"),Ue(Ye.else,oe+".alpha",U+".alpha")}),Ye.then(Ae,"=",Ve,"=",ye,"[",U,"];"),Ye.else(Ae,"=",ye,"[",U,".rgb];",Ve,"=",ye,"[",U,".alpha];"),Q(Ye),[Ae,Ve]});case Xf:return pe(function(z){return L.command(b(z)&&z.length===4,"blend.color must be a 4d array",R.commandStr),Ir(4,function(Q){return+z[Q]})},function(z,Q,U){return L.optional(function(){z.assert(Q,z.shared.isArrayLike+"("+U+")&&"+U+".length===4","blend.color must be a 4d array")}),Ir(4,function(ye){return Q.def("+",U,"[",ye,"]")})});case Wf:return pe(function(z){return L.commandType(z,"number",ee,R.commandStr),z|0},function(z,Q,U){return L.optional(function(){z.assert(Q,"typeof "+U+'==="number"',"invalid stencil.mask")}),Q.def(U,"|0")});case nc:return pe(function(z){L.commandType(z,"object",ee,R.commandStr);var Q=z.cmp||"keep",U=z.ref||0,ye="mask"in z?z.mask:-1;return L.commandParameter(Q,Jo,oe+".cmp",R.commandStr),L.commandType(U,"number",oe+".ref",R.commandStr),L.commandType(ye,"number",oe+".mask",R.commandStr),[Jo[Q],U,ye]},function(z,Q,U){var ye=z.constants.compareFuncs;L.optional(function(){function Ue(){z.assert(Q,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ue(U+"&&typeof ",U,'==="object"'),Ue('!("cmp" in ',U,")||(",U,".cmp in ",ye,")")});var Ae=Q.def('"cmp" in ',U,"?",ye,"[",U,".cmp]",":",qo),Ve=Q.def(U,".ref|0"),Ye=Q.def('"mask" in ',U,"?",U,".mask|0:-1");return[Ae,Ve,Ye]});case Yf:case et:return pe(function(z){L.commandType(z,"object",ee,R.commandStr);var Q=z.fail||"keep",U=z.zfail||"keep",ye=z.zpass||"keep";return L.commandParameter(Q,Di,oe+".fail",R.commandStr),L.commandParameter(U,Di,oe+".zfail",R.commandStr),L.commandParameter(ye,Di,oe+".zpass",R.commandStr),[oe===et?ca:Zu,Di[Q],Di[U],Di[ye]]},function(z,Q,U){var ye=z.constants.stencilOps;L.optional(function(){z.assert(Q,U+"&&typeof "+U+'==="object"',"invalid "+oe)});function Ae(Ve){return L.optional(function(){z.assert(Q,'!("'+Ve+'" in '+U+")||("+U+"."+Ve+" in "+ye+")","invalid "+oe+"."+Ve+", must be one of "+Object.keys(Di))}),Q.def('"',Ve,'" in ',U,"?",ye,"[",U,".",Ve,"]:",qo)}return[oe===et?ca:Zu,Ae("fail"),Ae("zfail"),Ae("zpass")]});case Bu:return pe(function(z){L.commandType(z,"object",ee,R.commandStr);var Q=z.factor|0,U=z.units|0;return L.commandType(Q,"number",ee+".factor",R.commandStr),L.commandType(U,"number",ee+".units",R.commandStr),[Q,U]},function(z,Q,U){L.optional(function(){z.assert(Q,U+"&&typeof "+U+'==="object"',"invalid "+oe)});var ye=Q.def(U,".factor|0"),Ae=Q.def(U,".units|0");return[ye,Ae]});case Ap:return pe(function(z){var Q=0;return z==="front"?Q=Zu:z==="back"&&(Q=ca),L.command(!!Q,ee,R.commandStr),Q},function(z,Q,U){return L.optional(function(){z.assert(Q,U+'==="front"||'+U+'==="back"',"invalid cull.face")}),Q.def(U,'==="front"?',Zu,":",ca)});case Fu:return pe(function(z){return L.command(typeof z=="number"&&z>=Ie.lineWidthDims[0]&&z<=Ie.lineWidthDims[1],"invalid line width, must be a positive number between "+Ie.lineWidthDims[0]+" and "+Ie.lineWidthDims[1],R.commandStr),z},function(z,Q,U){return L.optional(function(){z.assert(Q,"typeof "+U+'==="number"&&'+U+">="+Ie.lineWidthDims[0]+"&&"+U+"<="+Ie.lineWidthDims[1],"invalid line width")}),U});case In:return pe(function(z){return L.commandParameter(z,ol,ee,R.commandStr),ol[z]},function(z,Q,U){return L.optional(function(){z.assert(Q,U+'==="cw"||'+U+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Q.def(U+'==="cw"?'+tl+":"+Ci)});case $f:return pe(function(z){return L.command(b(z)&&z.length===4,"color.mask must be length 4 array",R.commandStr),z.map(function(Q){return!!Q})},function(z,Q,U){return L.optional(function(){z.assert(Q,z.shared.isArrayLike+"("+U+")&&"+U+".length===4","invalid color.mask")}),Ir(4,function(ye){return"!!"+U+"["+ye+"]"})});case ia:return pe(function(z){L.command(typeof z=="object"&&z,ee,R.commandStr);var Q="value"in z?z.value:1,U=!!z.invert;return L.command(typeof Q=="number"&&Q>=0&&Q<=1,"sample.coverage.value must be a number between 0 and 1",R.commandStr),[Q,U]},function(z,Q,U){L.optional(function(){z.assert(Q,U+"&&typeof "+U+'==="object"',"invalid sample.coverage")});var ye=Q.def('"value" in ',U,"?+",U,".value:1"),Ae=Q.def("!!",U,".invert");return[ye,Ae]})}}),we}function wn(H,R){var re=H.static,ge=H.dynamic,we={};return Object.keys(re).forEach(function(oe){var ee=re[oe],pe;if(typeof ee=="number"||typeof ee=="boolean")pe=kr(function(){return ee});else if(typeof ee=="function"){var z=ee._reglType;z==="texture2d"||z==="textureCube"?pe=kr(function(Q){return Q.link(ee)}):z==="framebuffer"||z==="framebufferCube"?(L.command(ee.color.length>0,'missing color attachment for framebuffer sent to uniform "'+oe+'"',R.commandStr),pe=kr(function(Q){return Q.link(ee.color[0])})):L.commandRaise('invalid data for uniform "'+oe+'"',R.commandStr)}else b(ee)?pe=kr(function(Q){var U=Q.global.def("[",Ir(ee.length,function(ye){return L.command(typeof ee[ye]=="number"||typeof ee[ye]=="boolean","invalid uniform "+oe,Q.commandStr),ee[ye]}),"]");return U}):L.commandRaise('invalid or missing data for uniform "'+oe+'"',R.commandStr);pe.value=ee,we[oe]=pe}),Object.keys(ge).forEach(function(oe){var ee=ge[oe];we[oe]=Wn(ee,function(pe,z){return pe.invoke(z,ee)})}),we}function xr(H,R){var re=H.static,ge=H.dynamic,we={};return Object.keys(re).forEach(function(oe){var ee=re[oe],pe=F.id(oe),z=new me;if(lc(ee))z.state=Xa,z.buffer=Xe.getBuffer(Xe.create(ee,eo,!1,!0)),z.type=0;else{var Q=Xe.getBuffer(ee);if(Q)z.state=Xa,z.buffer=Q,z.type=0;else if(L.command(typeof ee=="object"&&ee,"invalid data for attribute "+oe,R.commandStr),"constant"in ee){var U=ee.constant;z.buffer="null",z.state=ku,typeof U=="number"?z.x=U:(L.command(b(U)&&U.length>0&&U.length<=4,"invalid constant for attribute "+oe,R.commandStr),Ha.forEach(function(Ft,dr){dr<U.length&&(z[Ft]=U[dr])}))}else{lc(ee.buffer)?Q=Xe.getBuffer(Xe.create(ee.buffer,eo,!1,!0)):Q=Xe.getBuffer(ee.buffer),L.command(!!Q,'missing buffer for attribute "'+oe+'"',R.commandStr);var ye=ee.offset|0;L.command(ye>=0,'invalid offset for attribute "'+oe+'"',R.commandStr);var Ae=ee.stride|0;L.command(Ae>=0&&Ae<256,'invalid stride for attribute "'+oe+'", must be integer betweeen [0, 255]',R.commandStr);var Ve=ee.size|0;L.command(!("size"in ee)||Ve>0&&Ve<=4,'invalid size for attribute "'+oe+'", must be 1,2,3,4',R.commandStr);var Ye=!!ee.normalized,Ue=0;"type"in ee&&(L.commandParameter(ee.type,mo,"invalid type for attribute "+oe,R.commandStr),Ue=mo[ee.type]);var ut=ee.divisor|0;"divisor"in ee&&(L.command(ut===0||at,'cannot specify divisor for attribute "'+oe+'", instancing not supported',R.commandStr),L.command(ut>=0,'invalid divisor for attribute "'+oe+'"',R.commandStr)),L.optional(function(){var Ft=R.commandStr,dr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ee).forEach(function(It){L.command(dr.indexOf(It)>=0,'unknown parameter "'+It+'" for attribute pointer "'+oe+'" (valid parameters are '+dr+")",Ft)})}),z.buffer=Q,z.state=Xa,z.size=Ve,z.normalized=Ye,z.type=Ue||Q.dtype,z.offset=ye,z.stride=Ae,z.divisor=ut}}we[oe]=kr(function(Ft,dr){var It=Ft.attribCache;if(pe in It)return It[pe];var Kt={isStream:!1};return Object.keys(z).forEach(function(fr){Kt[fr]=z[fr]}),z.buffer&&(Kt.buffer=Ft.link(z.buffer),Kt.type=Kt.type||Kt.buffer+".dtype"),It[pe]=Kt,Kt})}),Object.keys(ge).forEach(function(oe){var ee=ge[oe];function pe(z,Q){var U=z.invoke(Q,ee),ye=z.shared,Ae=z.constants,Ve=ye.isBufferArgs,Ye=ye.buffer;L.optional(function(){z.assert(Q,U+"&&(typeof "+U+'==="object"||typeof '+U+'==="function")&&('+Ve+"("+U+")||"+Ye+".getBuffer("+U+")||"+Ye+".getBuffer("+U+".buffer)||"+Ve+"("+U+'.buffer)||("constant" in '+U+"&&(typeof "+U+'.constant==="number"||'+ye.isArrayLike+"("+U+".constant))))",'invalid dynamic attribute "'+oe+'"')});var Ue={isStream:Q.def(!1)},ut=new me;ut.state=Xa,Object.keys(ut).forEach(function(Kt){Ue[Kt]=Q.def(""+ut[Kt])});var Ft=Ue.buffer,dr=Ue.type;Q("if(",Ve,"(",U,")){",Ue.isStream,"=true;",Ft,"=",Ye,".createStream(",eo,",",U,");",dr,"=",Ft,".dtype;","}else{",Ft,"=",Ye,".getBuffer(",U,");","if(",Ft,"){",dr,"=",Ft,".dtype;",'}else if("constant" in ',U,"){",Ue.state,"=",ku,";","if(typeof "+U+'.constant === "number"){',Ue[Ha[0]],"=",U,".constant;",Ha.slice(1).map(function(Kt){return Ue[Kt]}).join("="),"=0;","}else{",Ha.map(function(Kt,fr){return Ue[Kt]+"="+U+".constant.length>"+fr+"?"+U+".constant["+fr+"]:0;"}).join(""),"}}else{","if(",Ve,"(",U,".buffer)){",Ft,"=",Ye,".createStream(",eo,",",U,".buffer);","}else{",Ft,"=",Ye,".getBuffer(",U,".buffer);","}",dr,'="type" in ',U,"?",Ae.glTypes,"[",U,".type]:",Ft,".dtype;",Ue.normalized,"=!!",U,".normalized;");function It(Kt){Q(Ue[Kt],"=",U,".",Kt,"|0;")}return It("size"),It("offset"),It("stride"),It("divisor"),Q("}}"),Q.exit("if(",Ue.isStream,"){",Ye,".destroyStream(",Ft,");","}"),Ue}we[oe]=Wn(ee,pe)}),we}function mn(H,R){var re=H.static,ge=H.dynamic;if(Ya in re){var we=re[Ya];return we!==null&&ct.getVAO(we)===null&&(we=ct.createVAO(we)),kr(function(ee){return ee.link(ct.getVAO(we))})}else if(Ya in ge){var oe=ge[Ya];return Wn(oe,function(ee,pe){var z=ee.invoke(pe,oe);return pe.def(ee.shared.vao+".getVAO("+z+")")})}return null}function $r(H){var R=H.static,re=H.dynamic,ge={};return Object.keys(R).forEach(function(we){var oe=R[we];ge[we]=kr(function(ee,pe){return typeof oe=="number"||typeof oe=="boolean"?""+oe:ee.link(oe)})}),Object.keys(re).forEach(function(we){var oe=re[we];ge[we]=Wn(oe,function(ee,pe){return ee.invoke(pe,oe)})}),ge}function ln(H,R,re,ge,we){var oe=H.static,ee=H.dynamic;L.optional(function(){var It=[Pi,$a,Wa,ji,Ni,Uu,Mi,zu,Va,Ya].concat(Je);function Kt(fr){Object.keys(fr).forEach(function(Nr){L.command(It.indexOf(Nr)>=0,'unknown parameter "'+Nr+'"',we.commandStr)})}Kt(oe),Kt(ee)});var pe=ir(H,R),z=kt(H),Q=mr(H,z,we),U=Mr(H,we),ye=fn(H,we),Ae=vr(H,we,pe);function Ve(It){var Kt=Q[It];Kt&&(ye[It]=Kt)}Ve(Ko),Ve(yt(Gu));var Ye=Object.keys(ye).length>0,Ue={framebuffer:z,draw:U,shader:Ae,state:ye,dirty:Ye,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ue.profile=be(H),Ue.uniforms=wn(re,we),Ue.drawVAO=Ue.scopeVAO=mn(H),!Ue.drawVAO&&Ae.program&&!pe&&Z.angle_instanced_arrays){var ut=!0,Ft=Ae.program.attributes.map(function(It){var Kt=R.static[It];return ut=ut&&!!Kt,Kt});if(ut&&Ft.length>0){var dr=ct.getVAO(ct.createVAO(Ft));Ue.drawVAO=new gn(null,null,null,function(It,Kt){return It.link(dr)}),Ue.useVAO=!0}}return pe?Ue.useVAO=!0:Ue.attributes=xr(R,we),Ue.context=$r(ge),Ue}function bn(H,R,re){var ge=H.shared,we=ge.context,oe=H.scope();Object.keys(re).forEach(function(ee){R.save(we,"."+ee);var pe=re[ee],z=pe.append(H,R);Array.isArray(z)?oe(we,".",ee,"=[",z.join(),"];"):oe(we,".",ee,"=",z,";")}),R(oe)}function Wr(H,R,re,ge){var we=H.shared,oe=we.gl,ee=we.framebuffer,pe;Ot&&(pe=R.def(we.extensions,".webgl_draw_buffers"));var z=H.constants,Q=z.drawBuffer,U=z.backBuffer,ye;re?ye=re.append(H,R):ye=R.def(ee,".next"),ge||R("if(",ye,"!==",ee,".cur){"),R("if(",ye,"){",oe,".bindFramebuffer(",nl,",",ye,".framebuffer);"),Ot&&R(pe,".drawBuffersWEBGL(",Q,"[",ye,".colorAttachments.length]);"),R("}else{",oe,".bindFramebuffer(",nl,",null);"),Ot&&R(pe,".drawBuffersWEBGL(",U,");"),R("}",ee,".cur=",ye,";"),ge||R("}")}function An(H,R,re){var ge=H.shared,we=ge.gl,oe=H.current,ee=H.next,pe=ge.current,z=ge.next,Q=H.cond(pe,".dirty");Je.forEach(function(U){var ye=yt(U);if(!(ye in re.state)){var Ae,Ve;if(ye in ee){Ae=ee[ye],Ve=oe[ye];var Ye=Ir(qe[ye].length,function(ut){return Q.def(Ae,"[",ut,"]")});Q(H.cond(Ye.map(function(ut,Ft){return ut+"!=="+Ve+"["+Ft+"]"}).join("||")).then(we,".",Qe[ye],"(",Ye,");",Ye.map(function(ut,Ft){return Ve+"["+Ft+"]="+ut}).join(";"),";"))}else{Ae=Q.def(z,".",ye);var Ue=H.cond(Ae,"!==",pe,".",ye);Q(Ue),ye in ht?Ue(H.cond(Ae).then(we,".enable(",ht[ye],");").else(we,".disable(",ht[ye],");"),pe,".",ye,"=",Ae,";"):Ue(we,".",Qe[ye],"(",Ae,");",pe,".",ye,"=",Ae,";")}}}),Object.keys(re.state).length===0&&Q(pe,".dirty=false;"),R(Q)}function Gn(H,R,re,ge){var we=H.shared,oe=H.current,ee=we.current,pe=we.gl;Qa(Object.keys(re)).forEach(function(z){var Q=re[z];if(!(ge&&!ge(Q))){var U=Q.append(H,R);if(ht[z]){var ye=ht[z];Qo(Q)?U?R(pe,".enable(",ye,");"):R(pe,".disable(",ye,");"):R(H.cond(U).then(pe,".enable(",ye,");").else(pe,".disable(",ye,");")),R(ee,".",z,"=",U,";")}else if(b(U)){var Ae=oe[z];R(pe,".",Qe[z],"(",U,");",U.map(function(Ve,Ye){return Ae+"["+Ye+"]="+Ve}).join(";"),";")}else R(pe,".",Qe[z],"(",U,");",ee,".",z,"=",U,";")}})}function nn(H,R){at&&(H.instancing=R.def(H.shared.extensions,".angle_instanced_arrays"))}function cr(H,R,re,ge,we){var oe=H.shared,ee=H.stats,pe=oe.current,z=oe.timer,Q=re.profile;function U(){return typeof performance>"u"?"Date.now()":"performance.now()"}var ye,Ae;function Ve(It){ye=R.def(),It(ye,"=",U(),";"),typeof we=="string"?It(ee,".count+=",we,";"):It(ee,".count++;"),rt&&(ge?(Ae=R.def(),It(Ae,"=",z,".getNumPendingQueries();")):It(z,".beginQuery(",ee,");"))}function Ye(It){It(ee,".cpuTime+=",U(),"-",ye,";"),rt&&(ge?It(z,".pushScopeStats(",Ae,",",z,".getNumPendingQueries(),",ee,");"):It(z,".endQuery();"))}function Ue(It){var Kt=R.def(pe,".profile");R(pe,".profile=",It,";"),R.exit(pe,".profile=",Kt,";")}var ut;if(Q){if(Qo(Q)){Q.enable?(Ve(R),Ye(R.exit),Ue("true")):Ue("false");return}ut=Q.append(H,R),Ue(ut)}else ut=R.def(pe,".profile");var Ft=H.block();Ve(Ft),R("if(",ut,"){",Ft,"}");var dr=H.block();Ye(dr),R.exit("if(",ut,"){",dr,"}")}function _n(H,R,re,ge,we){var oe=H.shared;function ee(z){switch(z){case Ka:case uc:case qa:return 2;case Vu:case to:case Za:return 3;case Hn:case or:case Wu:return 4;default:return 1}}function pe(z,Q,U){var ye=oe.gl,Ae=R.def(z,".location"),Ve=R.def(oe.attributes,"[",Ae,"]"),Ye=U.state,Ue=U.buffer,ut=[U.x,U.y,U.z,U.w],Ft=["buffer","normalized","offset","stride"];function dr(){R("if(!",Ve,".buffer){",ye,".enableVertexAttribArray(",Ae,");}");var Kt=U.type,fr;if(U.size?fr=R.def(U.size,"||",Q):fr=Q,R("if(",Ve,".type!==",Kt,"||",Ve,".size!==",fr,"||",Ft.map(function(on){return Ve+"."+on+"!=="+U[on]}).join("||"),"){",ye,".bindBuffer(",eo,",",Ue,".buffer);",ye,".vertexAttribPointer(",[Ae,fr,Kt,U.normalized,U.stride,U.offset],");",Ve,".type=",Kt,";",Ve,".size=",fr,";",Ft.map(function(on){return Ve+"."+on+"="+U[on]+";"}).join(""),"}"),at){var Nr=U.divisor;R("if(",Ve,".divisor!==",Nr,"){",H.instancing,".vertexAttribDivisorANGLE(",[Ae,Nr],");",Ve,".divisor=",Nr,";}")}}function It(){R("if(",Ve,".buffer){",ye,".disableVertexAttribArray(",Ae,");",Ve,".buffer=null;","}if(",Ha.map(function(Kt,fr){return Ve+"."+Kt+"!=="+ut[fr]}).join("||"),"){",ye,".vertexAttrib4f(",Ae,",",ut,");",Ha.map(function(Kt,fr){return Ve+"."+Kt+"="+ut[fr]+";"}).join(""),"}")}Ye===Xa?dr():Ye===ku?It():(R("if(",Ye,"===",Xa,"){"),dr(),R("}else{"),It(),R("}"))}ge.forEach(function(z){var Q=z.name,U=re.attributes[Q],ye;if(U){if(!we(U))return;ye=U.append(H,R)}else{if(!we(eu))return;var Ae=H.scopeAttrib(Q);L.optional(function(){H.assert(R,Ae+".state","missing attribute "+Q)}),ye={},Object.keys(new me).forEach(function(Ve){ye[Ve]=R.def(Ae,".",Ve)})}pe(H.link(z),ee(z.info.type),ye)})}function jr(H,R,re,ge,we){for(var oe=H.shared,ee=oe.gl,pe,z=0;z<ge.length;++z){var Q=ge[z],U=Q.name,ye=Q.info.type,Ae=re.uniforms[U],Ve=H.link(Q),Ye=Ve+".location",Ue;if(Ae){if(!we(Ae))continue;if(Qo(Ae)){var ut=Ae.value;if(L.command(ut!==null&&typeof ut<"u",'missing uniform "'+U+'"',H.commandStr),ye===sa||ye===qu){L.command(typeof ut=="function"&&(ye===sa&&(ut._reglType==="texture2d"||ut._reglType==="framebuffer")||ye===qu&&(ut._reglType==="textureCube"||ut._reglType==="framebufferCube")),"invalid texture for uniform "+U,H.commandStr);var Ft=H.link(ut._texture||ut.color[0]._texture);R(ee,".uniform1i(",Ye,",",Ft+".bind());"),R.exit(Ft,".unbind();")}else if(ye===Ja||ye===Yu||ye===Ku){L.optional(function(){L.command(b(ut),"invalid matrix for uniform "+U,H.commandStr),L.command(ye===Ja&&ut.length===4||ye===Yu&&ut.length===9||ye===Ku&&ut.length===16,"invalid length for matrix uniform "+U,H.commandStr)});var dr=H.global.def("new Float32Array(["+Array.prototype.slice.call(ut)+"])"),It=2;ye===Yu?It=3:ye===Ku&&(It=4),R(ee,".uniformMatrix",It,"fv(",Ye,",false,",dr,");")}else{switch(ye){case el:L.commandType(ut,"number","uniform "+U,H.commandStr),pe="1f";break;case Ka:L.command(b(ut)&&ut.length===2,"uniform "+U,H.commandStr),pe="2f";break;case Vu:L.command(b(ut)&&ut.length===3,"uniform "+U,H.commandStr),pe="3f";break;case Hn:L.command(b(ut)&&ut.length===4,"uniform "+U,H.commandStr),pe="4f";break;case $u:L.commandType(ut,"boolean","uniform "+U,H.commandStr),pe="1i";break;case vn:L.commandType(ut,"number","uniform "+U,H.commandStr),pe="1i";break;case qa:L.command(b(ut)&&ut.length===2,"uniform "+U,H.commandStr),pe="2i";break;case uc:L.command(b(ut)&&ut.length===2,"uniform "+U,H.commandStr),pe="2i";break;case Za:L.command(b(ut)&&ut.length===3,"uniform "+U,H.commandStr),pe="3i";break;case to:L.command(b(ut)&&ut.length===3,"uniform "+U,H.commandStr),pe="3i";break;case Wu:L.command(b(ut)&&ut.length===4,"uniform "+U,H.commandStr),pe="4i";break;case or:L.command(b(ut)&&ut.length===4,"uniform "+U,H.commandStr),pe="4i";break}R(ee,".uniform",pe,"(",Ye,",",b(ut)?Array.prototype.slice.call(ut):ut,");")}continue}else Ue=Ae.append(H,R)}else{if(!we(eu))continue;Ue=R.def(oe.uniforms,"[",F.id(U),"]")}ye===sa?(L(!Array.isArray(Ue),"must specify a scalar prop for textures"),R("if(",Ue,"&&",Ue,'._reglType==="framebuffer"){',Ue,"=",Ue,".color[0];","}")):ye===qu&&(L(!Array.isArray(Ue),"must specify a scalar prop for cube maps"),R("if(",Ue,"&&",Ue,'._reglType==="framebufferCube"){',Ue,"=",Ue,".color[0];","}")),L.optional(function(){function ro(Oo,Wp){H.assert(R,Oo,'bad data or missing for uniform "'+U+'".  '+Wp)}function ru(Oo){L(!Array.isArray(Ue),"must not specify an array type for uniform"),ro("typeof "+Ue+'==="'+Oo+'"',"invalid type, expected "+Oo)}function Eo(Oo,Wp){Array.isArray(Ue)?L(Ue.length===Oo,"must have length "+Oo):ro(oe.isArrayLike+"("+Ue+")&&"+Ue+".length==="+Oo,"invalid vector, should have length "+Oo,H.commandStr)}function $p(Oo){L(!Array.isArray(Ue),"must not specify a value type"),ro("typeof "+Ue+'==="function"&&'+Ue+'._reglType==="texture'+(Oo===Zf?"2d":"Cube")+'"',"invalid texture type",H.commandStr)}switch(ye){case vn:ru("number");break;case uc:Eo(2);break;case to:Eo(3);break;case or:Eo(4);break;case el:ru("number");break;case Ka:Eo(2);break;case Vu:Eo(3);break;case Hn:Eo(4);break;case $u:ru("boolean");break;case qa:Eo(2);break;case Za:Eo(3);break;case Wu:Eo(4);break;case Ja:Eo(4);break;case Yu:Eo(9);break;case Ku:Eo(16);break;case sa:$p(Zf);break;case qu:$p(Jf);break}});var Kt=1;switch(ye){case sa:case qu:var fr=R.def(Ue,"._texture");R(ee,".uniform1i(",Ye,",",fr,".bind());"),R.exit(fr,".unbind();");continue;case vn:case $u:pe="1i";break;case uc:case qa:pe="2i",Kt=2;break;case to:case Za:pe="3i",Kt=3;break;case or:case Wu:pe="4i",Kt=4;break;case el:pe="1f";break;case Ka:pe="2f",Kt=2;break;case Vu:pe="3f",Kt=3;break;case Hn:pe="4f",Kt=4;break;case Ja:pe="Matrix2fv";break;case Yu:pe="Matrix3fv";break;case Ku:pe="Matrix4fv";break}if(R(ee,".uniform",pe,"(",Ye,","),pe.charAt(0)==="M"){var Nr=Math.pow(ye-Ja+2,2),on=H.global.def("new Float32Array(",Nr,")");Array.isArray(Ue)?R("false,(",Ir(Nr,function(ro){return on+"["+ro+"]="+Ue[ro]}),",",on,")"):R("false,(Array.isArray(",Ue,")||",Ue," instanceof Float32Array)?",Ue,":(",Ir(Nr,function(ro){return on+"["+ro+"]="+Ue+"["+ro+"]"}),",",on,")")}else Kt>1?R(Ir(Kt,function(ro){return Array.isArray(Ue)?Ue[ro]:Ue+"["+ro+"]"})):(L(!Array.isArray(Ue),"uniform value must not be an array"),R(Ue));R(");")}}function Yt(H,R,re,ge){var we=H.shared,oe=we.gl,ee=we.draw,pe=ge.draw;function z(){var fr=pe.elements,Nr,on=R;return fr?((fr.contextDep&&ge.contextDynamic||fr.propDep)&&(on=re),Nr=fr.append(H,on)):Nr=on.def(ee,".",ji),Nr&&on("if("+Nr+")"+oe+".bindBuffer("+Ri+","+Nr+".buffer.buffer);"),Nr}function Q(){var fr=pe.count,Nr,on=R;return fr?((fr.contextDep&&ge.contextDynamic||fr.propDep)&&(on=re),Nr=fr.append(H,on),L.optional(function(){fr.MISSING&&H.assert(R,"false","missing vertex count"),fr.DYNAMIC&&H.assert(on,Nr+">=0","missing vertex count")})):(Nr=on.def(ee,".",Mi),L.optional(function(){H.assert(on,Nr+">=0","missing vertex count")})),Nr}var U=z();function ye(fr){var Nr=pe[fr];return Nr?Nr.contextDep&&ge.contextDynamic||Nr.propDep?Nr.append(H,re):Nr.append(H,R):R.def(ee,".",fr)}var Ae=ye(Ni),Ve=ye(Uu),Ye=Q();if(typeof Ye=="number"){if(Ye===0)return}else re("if(",Ye,"){"),re.exit("}");var Ue,ut;at&&(Ue=ye(zu),ut=H.instancing);var Ft=U+".type",dr=pe.elements&&Qo(pe.elements);function It(){function fr(){re(ut,".drawElementsInstancedANGLE(",[Ae,Ye,Ft,Ve+"<<(("+Ft+"-"+Op+")>>1)",Ue],");")}function Nr(){re(ut,".drawArraysInstancedANGLE(",[Ae,Ve,Ye,Ue],");")}U?dr?fr():(re("if(",U,"){"),fr(),re("}else{"),Nr(),re("}")):Nr()}function Kt(){function fr(){re(oe+".drawElements("+[Ae,Ye,Ft,Ve+"<<(("+Ft+"-"+Op+")>>1)"]+");")}function Nr(){re(oe+".drawArrays("+[Ae,Ve,Ye]+");")}U?dr?fr():(re("if(",U,"){"),fr(),re("}else{"),Nr(),re("}")):Nr()}at&&(typeof Ue!="number"||Ue>=0)?typeof Ue=="string"?(re("if(",Ue,">0){"),It(),re("}else if(",Ue,"<0){"),Kt(),re("}")):It():Kt()}function br(H,R,re,ge,we){var oe=Qt(),ee=oe.proc("body",we);return L.optional(function(){oe.commandStr=R.commandStr,oe.command=oe.link(R.commandStr)}),at&&(oe.instancing=ee.def(oe.shared.extensions,".angle_instanced_arrays")),H(oe,ee,re,ge),oe.compile().body}function Sr(H,R,re,ge){nn(H,R),re.useVAO?re.drawVAO?R(H.shared.vao,".setVAO(",re.drawVAO.append(H,R),");"):R(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(R(H.shared.vao,".setVAO(null);"),_n(H,R,re,ge.attributes,function(){return!0})),jr(H,R,re,ge.uniforms,function(){return!0}),Yt(H,R,R,re)}function Br(H,R){var re=H.proc("draw",1);nn(H,re),bn(H,re,R.context),Wr(H,re,R.framebuffer),An(H,re,R),Gn(H,re,R.state),cr(H,re,R,!1,!0);var ge=R.shader.progVar.append(H,re);if(re(H.shared.gl,".useProgram(",ge,".program);"),R.shader.program)Sr(H,re,R,R.shader.program);else{re(H.shared.vao,".setVAO(null);");var we=H.global.def("{}"),oe=re.def(ge,".id"),ee=re.def(we,"[",oe,"]");re(H.cond(ee).then(ee,".call(this,a0);").else(ee,"=",we,"[",oe,"]=",H.link(function(pe){return br(Sr,H,R,pe,1)}),"(",ge,");",ee,".call(this,a0);"))}Object.keys(R.state).length>0&&re(H.shared.current,".dirty=true;")}function ei(H,R,re,ge){H.batchId="a1",nn(H,R);function we(){return!0}_n(H,R,re,ge.attributes,we),jr(H,R,re,ge.uniforms,we),Yt(H,R,R,re)}function Yn(H,R,re,ge){nn(H,R);var we=re.contextDep,oe=R.def(),ee="a0",pe="a1",z=R.def();H.shared.props=z,H.batchId=oe;var Q=H.scope(),U=H.scope();R(Q.entry,"for(",oe,"=0;",oe,"<",pe,";++",oe,"){",z,"=",ee,"[",oe,"];",U,"}",Q.exit);function ye(Ft){return Ft.contextDep&&we||Ft.propDep}function Ae(Ft){return!ye(Ft)}if(re.needsContext&&bn(H,U,re.context),re.needsFramebuffer&&Wr(H,U,re.framebuffer),Gn(H,U,re.state,ye),re.profile&&ye(re.profile)&&cr(H,U,re,!1,!0),ge)re.useVAO?re.drawVAO?ye(re.drawVAO)?U(H.shared.vao,".setVAO(",re.drawVAO.append(H,U),");"):Q(H.shared.vao,".setVAO(",re.drawVAO.append(H,Q),");"):Q(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(Q(H.shared.vao,".setVAO(null);"),_n(H,Q,re,ge.attributes,Ae),_n(H,U,re,ge.attributes,ye)),jr(H,Q,re,ge.uniforms,Ae),jr(H,U,re,ge.uniforms,ye),Yt(H,Q,U,re);else{var Ve=H.global.def("{}"),Ye=re.shader.progVar.append(H,U),Ue=U.def(Ye,".id"),ut=U.def(Ve,"[",Ue,"]");U(H.shared.gl,".useProgram(",Ye,".program);","if(!",ut,"){",ut,"=",Ve,"[",Ue,"]=",H.link(function(Ft){return br(ei,H,re,Ft,2)}),"(",Ye,");}",ut,".call(this,a0[",oe,"],",oe,");")}}function k(H,R){var re=H.proc("batch",2);H.batchId="0",nn(H,re);var ge=!1,we=!0;Object.keys(R.context).forEach(function(Ve){ge=ge||R.context[Ve].propDep}),ge||(bn(H,re,R.context),we=!1);var oe=R.framebuffer,ee=!1;oe?(oe.propDep?ge=ee=!0:oe.contextDep&&ge&&(ee=!0),ee||Wr(H,re,oe)):Wr(H,re,null),R.state.viewport&&R.state.viewport.propDep&&(ge=!0);function pe(Ve){return Ve.contextDep&&ge||Ve.propDep}An(H,re,R),Gn(H,re,R.state,function(Ve){return!pe(Ve)}),(!R.profile||!pe(R.profile))&&cr(H,re,R,!1,"a1"),R.contextDep=ge,R.needsContext=we,R.needsFramebuffer=ee;var z=R.shader.progVar;if(z.contextDep&&ge||z.propDep)Yn(H,re,R,null);else{var Q=z.append(H,re);if(re(H.shared.gl,".useProgram(",Q,".program);"),R.shader.program)Yn(H,re,R,R.shader.program);else{re(H.shared.vao,".setVAO(null);");var U=H.global.def("{}"),ye=re.def(Q,".id"),Ae=re.def(U,"[",ye,"]");re(H.cond(Ae).then(Ae,".call(this,a0,a1);").else(Ae,"=",U,"[",ye,"]=",H.link(function(Ve){return br(Yn,H,R,Ve,2)}),"(",Q,");",Ae,".call(this,a0,a1);"))}}Object.keys(R.state).length>0&&re(H.shared.current,".dirty=true;")}function ke(H,R){var re=H.proc("scope",3);H.batchId="a2";var ge=H.shared,we=ge.current;bn(H,re,R.context),R.framebuffer&&R.framebuffer.append(H,re),Qa(Object.keys(R.state)).forEach(function(ee){var pe=R.state[ee],z=pe.append(H,re);b(z)?z.forEach(function(Q,U){re.set(H.next[ee],"["+U+"]",Q)}):re.set(ge.next,"."+ee,z)}),cr(H,re,R,!0,!0),[ji,Uu,Mi,zu,Ni].forEach(function(ee){var pe=R.draw[ee];pe&&re.set(ge.draw,"."+ee,""+pe.append(H,re))}),Object.keys(R.uniforms).forEach(function(ee){var pe=R.uniforms[ee].append(H,re);Array.isArray(pe)&&(pe="["+pe.join()+"]"),re.set(ge.uniforms,"["+F.id(ee)+"]",pe)}),Object.keys(R.attributes).forEach(function(ee){var pe=R.attributes[ee].append(H,re),z=H.scopeAttrib(ee);Object.keys(new me).forEach(function(Q){re.set(z,"."+Q,pe[Q])})}),R.scopeVAO&&re.set(ge.vao,".targetVAO",R.scopeVAO.append(H,re));function oe(ee){var pe=R.shader[ee];pe&&re.set(ge.shader,"."+ee,pe.append(H,re))}oe($a),oe(Wa),Object.keys(R.state).length>0&&(re(we,".dirty=true;"),re.exit(we,".dirty=true;")),re("a1(",H.shared.context,",a0,",H.batchId,");")}function Me(H){if(!(typeof H!="object"||b(H))){for(var R=Object.keys(H),re=0;re<R.length;++re)if(_t.isDynamic(H[R[re]]))return!0;return!1}}function Nt(H,R,re){var ge=R.static[re];if(!ge||!Me(ge))return;var we=H.global,oe=Object.keys(ge),ee=!1,pe=!1,z=!1,Q=H.global.def("{}");oe.forEach(function(ye){var Ae=ge[ye];if(_t.isDynamic(Ae)){typeof Ae=="function"&&(Ae=ge[ye]=_t.unbox(Ae));var Ve=Wn(Ae,null);ee=ee||Ve.thisDep,z=z||Ve.propDep,pe=pe||Ve.contextDep}else{switch(we(Q,".",ye,"="),typeof Ae){case"number":we(Ae);break;case"string":we('"',Ae,'"');break;case"object":Array.isArray(Ae)&&we("[",Ae.join(),"]");break;default:we(H.link(Ae));break}we(";")}});function U(ye,Ae){oe.forEach(function(Ve){var Ye=ge[Ve];if(_t.isDynamic(Ye)){var Ue=ye.invoke(Ae,Ye);Ae(Q,".",Ve,"=",Ue,";")}})}R.dynamic[re]=new _t.DynamicVariable(Js,{thisDep:ee,contextDep:pe,propDep:z,ref:Q,append:U}),delete R.static[re]}function Er(H,R,re,ge,we){var oe=Qt();oe.stats=oe.link(we),Object.keys(R.static).forEach(function(pe){Nt(oe,R,pe)}),ny.forEach(function(pe){Nt(oe,H,pe)});var ee=ln(H,R,re,ge,oe);return Br(oe,ee),ke(oe,ee),k(oe,ee),f(oe.compile(),{destroy:function(){ee.shader.program.destroy()}})}return{next:St,current:qe,procs:function(){var H=Qt(),R=H.proc("poll"),re=H.proc("refresh"),ge=H.block();R(ge),re(ge);var we=H.shared,oe=we.gl,ee=we.next,pe=we.current;ge(pe,".dirty=false;"),Wr(H,R),Wr(H,re,null,!0);var z;at&&(z=H.link(at)),Z.oes_vertex_array_object&&re(H.link(Z.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Q=0;Q<Ie.maxAttributes;++Q){var U=re.def(we.attributes,"[",Q,"]"),ye=H.cond(U,".buffer");ye.then(oe,".enableVertexAttribArray(",Q,");",oe,".bindBuffer(",eo,",",U,".buffer.buffer);",oe,".vertexAttribPointer(",Q,",",U,".size,",U,".type,",U,".normalized,",U,".stride,",U,".offset);").else(oe,".disableVertexAttribArray(",Q,");",oe,".vertexAttrib4f(",Q,",",U,".x,",U,".y,",U,".z,",U,".w);",U,".buffer=null;"),re(ye),at&&re(z,".vertexAttribDivisorANGLE(",Q,",",U,".divisor);")}return re(H.shared.vao,".currentVAO=null;",H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"),Object.keys(ht).forEach(function(Ae){var Ve=ht[Ae],Ye=ge.def(ee,".",Ae),Ue=H.block();Ue("if(",Ye,"){",oe,".enable(",Ve,")}else{",oe,".disable(",Ve,")}",pe,".",Ae,"=",Ye,";"),re(Ue),R("if(",Ye,"!==",pe,".",Ae,"){",Ue,"}")}),Object.keys(Qe).forEach(function(Ae){var Ve=Qe[Ae],Ye=qe[Ae],Ue,ut,Ft=H.block();if(Ft(oe,".",Ve,"("),b(Ye)){var dr=Ye.length;Ue=H.global.def(ee,".",Ae),ut=H.global.def(pe,".",Ae),Ft(Ir(dr,function(It){return Ue+"["+It+"]"}),");",Ir(dr,function(It){return ut+"["+It+"]="+Ue+"["+It+"];"}).join("")),R("if(",Ir(dr,function(It){return Ue+"["+It+"]!=="+ut+"["+It+"]"}).join("||"),"){",Ft,"}")}else Ue=ge.def(ee,".",Ae),ut=ge.def(pe,".",Ae),Ft(Ue,");",pe,".",Ae,"=",Ue,";"),R("if(",Ue,"!==",ut,"){",Ft,"}");re(Ft)}),H.compile()}(),compile:Er}}function zp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var sy=34918,Hp=34919,Ju=35007,cy=function(x,F){if(!F.ext_disjoint_timer_query)return null;var Z=[];function Ie(){return Z.pop()||F.ext_disjoint_timer_query.createQueryEXT()}function Xe(at){Z.push(at)}var De=[];function Fe(at){var Ot=Ie();F.ext_disjoint_timer_query.beginQueryEXT(Ju,Ot),De.push(Ot),rt(De.length-1,De.length,at)}function tt(){F.ext_disjoint_timer_query.endQueryEXT(Ju)}function nt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var ct=[];function it(){return ct.pop()||new nt}function dt(at){ct.push(at)}var gt=[];function rt(at,Ot,qe){var St=it();St.startQueryIndex=at,St.endQueryIndex=Ot,St.sum=0,St.stats=qe,gt.push(St)}var pt=[],me=[];function Be(){var at,Ot,qe=De.length;if(qe!==0){me.length=Math.max(me.length,qe+1),pt.length=Math.max(pt.length,qe+1),pt[0]=0,me[0]=0;var St=0;for(at=0,Ot=0;Ot<De.length;++Ot){var Je=De[Ot];F.ext_disjoint_timer_query.getQueryObjectEXT(Je,Hp)?(St+=F.ext_disjoint_timer_query.getQueryObjectEXT(Je,sy),Xe(Je)):De[at++]=Je,pt[Ot+1]=St,me[Ot+1]=at}for(De.length=at,at=0,Ot=0;Ot<gt.length;++Ot){var ht=gt[Ot],Qe=ht.startQueryIndex,yt=ht.endQueryIndex;ht.sum+=pt[yt]-pt[Qe];var zt=me[Qe],Zt=me[yt];Zt===zt?(ht.stats.gpuTime+=ht.sum/1e6,dt(ht)):(ht.startQueryIndex=zt,ht.endQueryIndex=Zt,gt[at++]=ht)}gt.length=at}}return{beginQuery:Fe,endQuery:tt,pushScopeStats:rt,update:Be,getNumPendingQueries:function(){return De.length},clear:function(){Z.push.apply(Z,De);for(var at=0;at<Z.length;at++)F.ext_disjoint_timer_query.deleteQueryEXT(Z[at]);De.length=0,Z.length=0},restore:function(){De.length=0,Z.length=0}}},fy=16384,il=256,pc=1024,Xp=34962,dc="webglcontextlost",hc="webglcontextrestored",Qu=1,yc=2,Vp=3;function tu(x,F){for(var Z=0;Z<x.length;++Z)if(x[Z]===F)return Z;return-1}function vc(x){var F=yr(x);if(!F)return null;var Z=F.gl,Ie=Z.getContextAttributes(),Xe=Z.isContextLost(),De=Xr(Z,F);if(!De)return null;var Fe=xn(),tt=zp(),nt=De.extensions,ct=cy(Z,nt),it=Tr(),dt=Z.drawingBufferWidth,gt=Z.drawingBufferHeight,rt={tick:0,time:0,viewportWidth:dt,viewportHeight:gt,framebufferWidth:dt,framebufferHeight:gt,drawingBufferWidth:dt,drawingBufferHeight:gt,pixelRatio:F.pixelRatio},pt={},me={elements:null,primitive:4,count:-1,offset:0,instances:-1},Be=Ns(Z,nt),at=jo(Z,tt,F,qe),Ot=Qh(Z,nt,Be,tt,at);function qe(Yt){return Ot.destroyBuffer(Yt)}var St=ks(Z,nt,at,tt),Je=ty(Z,Fe,tt,F),ht=Tn(Z,nt,Be,function(){zt.procs.poll()},rt,tt,F),Qe=up(Z,nt,Be,tt,F),yt=mp(Z,nt,Be,ht,Qe,tt),zt=uy(Z,Fe,nt,Be,at,St,ht,yt,pt,Ot,Je,me,rt,ct,F),Zt=ry(Z,yt,zt.procs.poll,rt,Ie,nt,Be),mt=zt.next,Ze=Z.canvas,We=[],Qt=[],be=[],kt=[F.onDestroy],mr=null;function ir(){if(We.length===0){ct&&ct.update(),mr=null;return}mr=Vt.next(ir),Gn();for(var Yt=We.length-1;Yt>=0;--Yt){var br=We[Yt];br&&br(rt,null,0)}Z.flush(),ct&&ct.update()}function vr(){!mr&&We.length>0&&(mr=Vt.next(ir))}function Mr(){mr&&(Vt.cancel(ir),mr=null)}function fn(Yt){Yt.preventDefault(),Xe=!0,Mr(),Qt.forEach(function(br){br()})}function wn(Yt){Z.getError(),Xe=!1,De.restore(),Je.restore(),at.restore(),ht.restore(),Qe.restore(),yt.restore(),Ot.restore(),ct&&ct.restore(),zt.procs.refresh(),vr(),be.forEach(function(br){br()})}Ze&&(Ze.addEventListener(dc,fn,!1),Ze.addEventListener(hc,wn,!1));function xr(){We.length=0,Mr(),Ze&&(Ze.removeEventListener(dc,fn),Ze.removeEventListener(hc,wn)),Je.clear(),yt.clear(),Qe.clear(),ht.clear(),St.clear(),at.clear(),Ot.clear(),ct&&ct.clear(),kt.forEach(function(Yt){Yt()})}function mn(Yt){L(!!Yt,"invalid args to regl({...})"),L.type(Yt,"object","invalid args to regl({...})");function br(we){var oe=f({},we);delete oe.uniforms,delete oe.attributes,delete oe.context,delete oe.vao,"stencil"in oe&&oe.stencil.op&&(oe.stencil.opBack=oe.stencil.opFront=oe.stencil.op,delete oe.stencil.op);function ee(pe){if(pe in oe){var z=oe[pe];delete oe[pe],Object.keys(z).forEach(function(Q){oe[pe+"."+Q]=z[Q]})}}return ee("blend"),ee("depth"),ee("cull"),ee("stencil"),ee("polygonOffset"),ee("scissor"),ee("sample"),"vao"in we&&(oe.vao=we.vao),oe}function Sr(we,oe){var ee={},pe={};return Object.keys(we).forEach(function(z){var Q=we[z];if(_t.isDynamic(Q)){pe[z]=_t.unbox(Q,z);return}else if(oe&&Array.isArray(Q)){for(var U=0;U<Q.length;++U)if(_t.isDynamic(Q[U])){pe[z]=_t.unbox(Q,z);return}}ee[z]=Q}),{dynamic:pe,static:ee}}var Br=Sr(Yt.context||{},!0),ei=Sr(Yt.uniforms||{},!0),Yn=Sr(Yt.attributes||{},!1),k=Sr(br(Yt),!1),ke={gpuTime:0,cpuTime:0,count:0},Me=zt.compile(k,Yn,ei,Br,ke),Nt=Me.draw,Er=Me.batch,H=Me.scope,R=[];function re(we){for(;R.length<we;)R.push(null);return R}function ge(we,oe){var ee;if(Xe&&L.raise("context lost"),typeof we=="function")return H.call(this,null,we,0);if(typeof oe=="function")if(typeof we=="number")for(ee=0;ee<we;++ee)H.call(this,null,oe,ee);else if(Array.isArray(we))for(ee=0;ee<we.length;++ee)H.call(this,we[ee],oe,ee);else return H.call(this,we,oe,0);else if(typeof we=="number"){if(we>0)return Er.call(this,re(we|0),we|0)}else if(Array.isArray(we)){if(we.length)return Er.call(this,we,we.length)}else return Nt.call(this,we)}return f(ge,{stats:ke,destroy:function(){Me.destroy()}})}var $r=yt.setFBO=mn({framebuffer:_t.define.call(null,Qu,"framebuffer")});function ln(Yt,br){var Sr=0;zt.procs.poll();var Br=br.color;Br&&(Z.clearColor(+Br[0]||0,+Br[1]||0,+Br[2]||0,+Br[3]||0),Sr|=fy),"depth"in br&&(Z.clearDepth(+br.depth),Sr|=il),"stencil"in br&&(Z.clearStencil(br.stencil|0),Sr|=pc),L(!!Sr,"called regl.clear with no buffer specified"),Z.clear(Sr)}function bn(Yt){if(L(typeof Yt=="object"&&Yt,"regl.clear() takes an object as input"),"framebuffer"in Yt)if(Yt.framebuffer&&Yt.framebuffer_reglType==="framebufferCube")for(var br=0;br<6;++br)$r(f({framebuffer:Yt.framebuffer.faces[br]},Yt),ln);else $r(Yt,ln);else ln(null,Yt)}function Wr(Yt){L.type(Yt,"function","regl.frame() callback must be a function"),We.push(Yt);function br(){var Sr=tu(We,Yt);L(Sr>=0,"cannot cancel a frame twice");function Br(){var ei=tu(We,Br);We[ei]=We[We.length-1],We.length-=1,We.length<=0&&Mr()}We[Sr]=Br}return vr(),{cancel:br}}function An(){var Yt=mt.viewport,br=mt.scissor_box;Yt[0]=Yt[1]=br[0]=br[1]=0,rt.viewportWidth=rt.framebufferWidth=rt.drawingBufferWidth=Yt[2]=br[2]=Z.drawingBufferWidth,rt.viewportHeight=rt.framebufferHeight=rt.drawingBufferHeight=Yt[3]=br[3]=Z.drawingBufferHeight}function Gn(){rt.tick+=1,rt.time=cr(),An(),zt.procs.poll()}function nn(){ht.refresh(),An(),zt.procs.refresh(),ct&&ct.update()}function cr(){return(Tr()-it)/1e3}nn();function _n(Yt,br){L.type(br,"function","listener callback must be a function");var Sr;switch(Yt){case"frame":return Wr(br);case"lost":Sr=Qt;break;case"restore":Sr=be;break;case"destroy":Sr=kt;break;default:L.raise("invalid event, must be one of frame,lost,restore,destroy")}return Sr.push(br),{cancel:function(){for(var Br=0;Br<Sr.length;++Br)if(Sr[Br]===br){Sr[Br]=Sr[Sr.length-1],Sr.pop();return}}}}var jr=f(mn,{clear:bn,prop:_t.define.bind(null,Qu),context:_t.define.bind(null,yc),this:_t.define.bind(null,Vp),draw:mn({}),buffer:function(Yt){return at.create(Yt,Xp,!1,!1)},elements:function(Yt){return St.create(Yt,!1)},texture:ht.create2D,cube:ht.createCube,renderbuffer:Qe.create,framebuffer:yt.create,framebufferCube:yt.createCube,vao:Ot.createVAO,attributes:Ie,frame:Wr,on:_n,limits:Be,hasExtension:function(Yt){return Be.extensions.indexOf(Yt.toLowerCase())>=0},read:Zt,destroy:xr,_gl:Z,_refresh:nn,poll:function(){Gn(),ct&&ct.update()},now:cr,stats:tt});return F.onDone(null,jr),jr}return vc})})(bI);var ba,xl,_a,ni,Sl,fu,Tl,zd,Ui,os,no,zi,Hi,Hd;ba={},Mt(ba,At.POINTS,"points"),Mt(ba,At.LINES,"lines"),Mt(ba,At.LINE_LOOP,"line loop"),Mt(ba,At.LINE_STRIP,"line strip"),Mt(ba,At.TRIANGLES,"triangles"),Mt(ba,At.TRIANGLE_FAN,"triangle fan"),Mt(ba,At.TRIANGLE_STRIP,"triangle strip");xl={},Mt(xl,At.STATIC_DRAW,"static"),Mt(xl,At.DYNAMIC_DRAW,"dynamic"),Mt(xl,At.STREAM_DRAW,"stream");_a={},Mt(_a,At.BYTE,"int8"),Mt(_a,At.UNSIGNED_INT,"int16"),Mt(_a,At.INT,"int32"),Mt(_a,At.UNSIGNED_BYTE,"uint8"),Mt(_a,At.UNSIGNED_SHORT,"uint16"),Mt(_a,At.UNSIGNED_INT,"uint32"),Mt(_a,At.FLOAT,"float");ni={},Mt(ni,At.ALPHA,"alpha"),Mt(ni,At.LUMINANCE,"luminance"),Mt(ni,At.LUMINANCE_ALPHA,"luminance alpha"),Mt(ni,At.RGB,"rgb"),Mt(ni,At.RGBA,"rgba"),Mt(ni,At.RGBA4,"rgba4"),Mt(ni,At.RGB5_A1,"rgb5 a1"),Mt(ni,At.RGB565,"rgb565"),Mt(ni,At.DEPTH_COMPONENT,"depth"),Mt(ni,At.DEPTH_STENCIL,"depth stencil");Sl={},Mt(Sl,At.DONT_CARE,"dont care"),Mt(Sl,At.NICEST,"nice"),Mt(Sl,At.FASTEST,"fast");fu={},Mt(fu,At.NEAREST,"nearest"),Mt(fu,At.LINEAR,"linear"),Mt(fu,At.LINEAR_MIPMAP_LINEAR,"mipmap"),Mt(fu,At.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Mt(fu,At.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Mt(fu,At.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");Tl={},Mt(Tl,At.REPEAT,"repeat"),Mt(Tl,At.CLAMP_TO_EDGE,"clamp"),Mt(Tl,At.MIRRORED_REPEAT,"mirror");zd={},Mt(zd,At.NONE,"none"),Mt(zd,At.BROWSER_DEFAULT_WEBGL,"browser");Ui={},Mt(Ui,At.NEVER,"never"),Mt(Ui,At.ALWAYS,"always"),Mt(Ui,At.LESS,"less"),Mt(Ui,At.LEQUAL,"lequal"),Mt(Ui,At.GREATER,"greater"),Mt(Ui,At.GEQUAL,"gequal"),Mt(Ui,At.EQUAL,"equal"),Mt(Ui,At.NOTEQUAL,"notequal");os={},Mt(os,At.FUNC_ADD,"add"),Mt(os,At.MIN_EXT,"min"),Mt(os,At.MAX_EXT,"max"),Mt(os,At.FUNC_SUBTRACT,"subtract"),Mt(os,At.FUNC_REVERSE_SUBTRACT,"reverse subtract");no={},Mt(no,At.ZERO,"zero"),Mt(no,At.ONE,"one"),Mt(no,At.SRC_COLOR,"src color"),Mt(no,At.ONE_MINUS_SRC_COLOR,"one minus src color"),Mt(no,At.SRC_ALPHA,"src alpha"),Mt(no,At.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Mt(no,At.DST_COLOR,"dst color"),Mt(no,At.ONE_MINUS_DST_COLOR,"one minus dst color"),Mt(no,At.DST_ALPHA,"dst alpha"),Mt(no,At.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Mt(no,At.CONSTANT_COLOR,"constant color"),Mt(no,At.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Mt(no,At.CONSTANT_ALPHA,"constant alpha"),Mt(no,At.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Mt(no,At.SRC_ALPHA_SATURATE,"src alpha saturate");zi={},Mt(zi,At.NEVER,"never"),Mt(zi,At.ALWAYS,"always"),Mt(zi,At.LESS,"less"),Mt(zi,At.LEQUAL,"lequal"),Mt(zi,At.GREATER,"greater"),Mt(zi,At.GEQUAL,"gequal"),Mt(zi,At.EQUAL,"equal"),Mt(zi,At.NOTEQUAL,"notequal");Hi={},Mt(Hi,At.ZERO,"zero"),Mt(Hi,At.KEEP,"keep"),Mt(Hi,At.REPLACE,"replace"),Mt(Hi,At.INVERT,"invert"),Mt(Hi,At.INCR,"increment"),Mt(Hi,At.DECR,"decrement"),Mt(Hi,At.INCR_WRAP,"increment wrap"),Mt(Hi,At.DECR_WRAP,"decrement wrap");Hd={},Mt(Hd,At.FRONT,"front"),Mt(Hd,At.BACK,"back");var _I=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,W1=_I,EI=W1,OI=typeof self=="object"&&self&&self.Object===Object&&self,wI=EI||OI||Function("return this")(),xI=wI,SI=xI,TI=SI.Symbol,Y1=TI,HE=Y1;HE&&HE.toStringTag;var XE=Y1;XE&&XE.toStringTag;var lh={exports:{}};lh.exports;(function(e,u){var a=W1,f=u&&!u.nodeType&&u,o=f&&!0&&e&&!e.nodeType&&e,p=o&&o.exports===f,d=p&&a.process,y=function(){try{var g=o&&o.require&&o.require("util").types;return g||d&&d.binding&&d.binding("util")}catch{}}();e.exports=y})(lh,lh.exports);var AI=lh.exports,VE=AI;VE&&VE.isTypedArray;var PI=Function.prototype,jI=PI.toString;jI.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;export{wR as B,DI as C,kI as D,tR as E,VO as G,CI as I,II as M,yR as N,ZM as P,LI as S,uR as U,FI as a,BI as b,JM as c,QM as d,eR as e,rR as f,nR as g,oR as h,iR as i,aR as j,sR as k,Ht as l,cR as m,fR as n,lR as o,pR as p,vR as q,gR as r,mR as s,_R as t,ER as u};
