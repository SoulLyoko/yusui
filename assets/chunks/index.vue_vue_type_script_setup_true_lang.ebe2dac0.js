var yw=Object.defineProperty;var vw=(y,d,s)=>d in y?yw(y,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):y[d]=s;var Xr=(y,d,s)=>(vw(y,typeof d!="symbol"?d+"":d,s),s);import{c as gw,v as ur,I as mw,u as bw}from"../flow-design_demo.md.dd48f6fb.js";import{q as xu,R as _w,ak as bf}from"../composables_use-crud_index.md.78467a23.js";import{r as Ow}from"../app.859caabe.js";import{i as _f,u as ww}from"./uniqueId.3d52e0a8.js";import{n as sf,w as gv,h as Kv,r as xw,e as Ew,H as Sr,j as zo,D as Mi,E as Ho,l as cf,J as Ti,p as Sw,u as In,i as ki,C as jw,f as Pw,k as Mw,aG as kw}from"./framework.19abbf41.js";import{u as Tw}from"./theme.df9598b1.js";const mv={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function bv(y,d){return y.map(s=>{const l=d.find(w=>w.buttonKey===s.buttonKey),{name:o,buttonKey:f,display:c,approval:v}=s;return{name:o,buttonKey:f,display:c,approval:v,...l}})}function lf(y,d){return y.map(s=>{var j,k;const l=d.find(A=>A.prop===s.prop),{label:o,prop:f,display:c=!0,disabled:v=!1,detail:b=!1,readonly:w=!1,rules:O}=s,S=(O==null?void 0:O.some(A=>A.required))??!1,P={label:o,prop:f,display:c,disabled:v,detail:b,readonly:w,required:S,...l};return s.type==="dynamic"&&((k=(j=s.children)==null?void 0:j.column)!=null&&k.length)&&(P.children=lf(s.children.column,(l==null?void 0:l.children)??[])),P})}function Aw({lf:y,graphData:d,elementData:s,formData:l,formLoading:o,formOption:f,formOptions:c,editorVisible:v,dataOptions:b,formRef:w,formDefaults:O}){var j,k,A,C,z,F,Z,oe,q;async function S({data:R,isForce:Y}={data:{},isForce:!1}){var D,G,B,H,Q,le,se;const I=(D=y.value)==null?void 0:D.graphModel.nodes.find(ye=>ye.type==="process");!R&&(I!=null&&I.id)&&(R=(G=y.value)==null?void 0:G.getNodeDataById(I.id)),!((R==null?void 0:R.id)===((B=s.value)==null?void 0:B.id)&&(R==null?void 0:R.type)===((H=s.value)==null?void 0:H.type)&&!Y)&&(R.type!=="process"&&((Q=y.value)==null||Q.selectElementById(R.id)),o.value=!0,await sf(),s.value=R,f.value={menuBtn:!1,span:24,labelPosition:"left",group:((le=c.value)==null?void 0:le[R.type])??gw},l.value={...R.properties,id:R.id,name:((se=R.text)==null?void 0:se.value)||""},o.value=!1,await sf(),P())}async function P(){var H,Q,le,se,ye,xe,ve;const{formPropertyList:R,buttonList:Y,fieldsDic:I,flowButtonDisplayDic:D,flowButtonApprovalDic:G}=b.value??{},B=ae=>{var he,ge;return(ge=(he=f.value)==null?void 0:he.group)==null?void 0:ge.some(Ee=>{var Ie;return(Ie=Ee.column)==null?void 0:Ie.some(Ye=>Ye.prop===ae)})};B("button")&&(l.value.button=bv(Y||[],((H=l.value)==null?void 0:H.button)||[]),(se=(le=(Q=O.value)==null?void 0:Q.button.children)==null?void 0:le.column)==null||se.forEach(ae=>{ae.prop==="display"&&(ae.dicData=D),ae.prop==="approval"&&(ae.dicData=G)})),B("formProperty")&&(l.value.formProperty=lf(R||[],((ye=l.value)==null?void 0:ye.formProperty)||[])),B("priority")&&((xe=w.value)==null||xe.updateDic("priority",I)),B("formTitle")&&((ve=w.value)==null||ve.updateDic("formTitle",I))}(j=y.value)==null||j.on("element:click",S),(k=y.value)==null||k.on("blank:click",S),(A=y.value)==null||A.on("node:add",S),(C=y.value)==null||C.on("node:dnd-add",S),(z=y.value)==null||z.on("node:delete",()=>S()),(F=y.value)==null||F.on("history:change",()=>{var R;d.value=(R=y.value)==null?void 0:R.getGraphData()}),(Z=y.value)==null||Z.on("custom:edit-click",()=>{v.value=!0}),(oe=y.value)==null||oe.on("custom:reset-form-property",()=>{var R,Y;(Y=(R=d.value)==null?void 0:R.flowElementList)==null||Y.forEach(I=>{var D,G;(D=I.properties)!=null&&D.formProperty&&(I.properties.formProperty=lf(((G=b.value)==null?void 0:G.formPropertyList)||[],[]))}),d.value={...d.value}}),(q=y.value)==null||q.on("custom:reset-button",()=>{var R,Y;(Y=(R=d.value)==null?void 0:R.flowElementList)==null||Y.forEach(I=>{var D,G;(D=I.properties)!=null&&D.button&&(I.properties.button=bv(((G=b.value)==null?void 0:G.buttonList)||[],[]))}),d.value={...d.value}})}var ff={exports:{}};(function(y,d){(function(s,l){y.exports=l()})(window,function(){return function(s){var l={};function o(f){if(l[f])return l[f].exports;var c=l[f]={i:f,l:!1,exports:{}};return s[f].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=s,o.c=l,o.d=function(f,c,v){o.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:v})},o.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},o.t=function(f,c){if(1&c&&(f=o(f)),8&c||4&c&&typeof f=="object"&&f&&f.__esModule)return f;var v=Object.create(null);if(o.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:f}),2&c&&typeof f!="string")for(var b in f)o.d(v,b,function(w){return f[w]}.bind(null,b));return v},o.n=function(f){var c=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(c,"a",c),c},o.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},o.p="",o(o.s=215)}([function(s,l,o){o.d(l,"a",function(){return q}),o.d(l,"b",function(){return oe}),o.d(l,"c",function(){return Re}),o.d(l,"d",function(){return Ke}),o.d(l,"e",function(){return z}),o.d(l,"f",function(){return Z}),o.d(l,"g",function(){return z}),o.d(l,"h",function(){return Me}),o.d(l,"i",function(){return c}),o.d(l,"j",function(){return Ye}),o.d(l,"k",function(){return H});var f,c,v,b,w,O,S,P={},j=[],k=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(J,K){for(var ue in K)J[ue]=K[ue];return J}function C(J){var K=J.parentNode;K&&K.removeChild(J)}function z(J,K,ue){var _e,ke,we,qe={};for(we in K)we=="key"?_e=K[we]:we=="ref"?ke=K[we]:qe[we]=K[we];if(arguments.length>2&&(qe.children=arguments.length>3?f.call(arguments,2):ue),typeof J=="function"&&J.defaultProps!=null)for(we in J.defaultProps)qe[we]===void 0&&(qe[we]=J.defaultProps[we]);return F(J,qe,_e,ke,null)}function F(J,K,ue,_e,ke){var we={type:J,props:K,key:ue,ref:_e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:ke??++v};return ke==null&&c.vnode!=null&&c.vnode(we),we}function Z(){return{current:null}}function oe(J){return J.children}function q(J,K){this.props=J,this.context=K}function R(J,K){if(K==null)return J.__?R(J.__,J.__.__k.indexOf(J)+1):null;for(var ue;K<J.__k.length;K++)if((ue=J.__k[K])!=null&&ue.__e!=null)return ue.__e;return typeof J.type=="function"?R(J):null}function Y(J){var K,ue;if((J=J.__)!=null&&J.__c!=null){for(J.__e=J.__c.base=null,K=0;K<J.__k.length;K++)if((ue=J.__k[K])!=null&&ue.__e!=null){J.__e=J.__c.base=ue.__e;break}return Y(J)}}function I(J){(!J.__d&&(J.__d=!0)&&b.push(J)&&!D.__r++||O!==c.debounceRendering)&&((O=c.debounceRendering)||w)(D)}function D(){for(var J;D.__r=b.length;)J=b.sort(function(K,ue){return K.__v.__b-ue.__v.__b}),b=[],J.some(function(K){var ue,_e,ke,we,qe,nt;K.__d&&(qe=(we=(ue=K).__v).__e,(nt=ue.__P)&&(_e=[],(ke=A({},we)).__v=we.__v+1,ve(nt,we,ke,ue.__n,nt.ownerSVGElement!==void 0,we.__h!=null?[qe]:null,_e,qe??R(we),we.__h),ae(_e,we),we.__e!=qe&&Y(we)))})}function G(J,K,ue,_e,ke,we,qe,nt,Ze,Ve){var me,He,te,ze,ut,gt,it,ht=_e&&_e.__k||j,St=ht.length;for(ue.__k=[],me=0;me<K.length;me++)if((ze=ue.__k[me]=(ze=K[me])==null||typeof ze=="boolean"?null:typeof ze=="string"||typeof ze=="number"||typeof ze=="bigint"?F(null,ze,null,null,ze):Array.isArray(ze)?F(oe,{children:ze},null,null,null):ze.__b>0?F(ze.type,ze.props,ze.key,null,ze.__v):ze)!=null){if(ze.__=ue,ze.__b=ue.__b+1,(te=ht[me])===null||te&&ze.key==te.key&&ze.type===te.type)ht[me]=void 0;else for(He=0;He<St;He++){if((te=ht[He])&&ze.key==te.key&&ze.type===te.type){ht[He]=void 0;break}te=null}ve(J,ze,te=te||P,ke,we,qe,nt,Ze,Ve),ut=ze.__e,(He=ze.ref)&&te.ref!=He&&(it||(it=[]),te.ref&&it.push(te.ref,null,ze),it.push(He,ze.__c||ut,ze)),ut!=null?(gt==null&&(gt=ut),typeof ze.type=="function"&&ze.__k===te.__k?ze.__d=Ze=B(ze,Ze,J):Ze=Q(J,ze,te,ht,ut,Ze),typeof ue.type=="function"&&(ue.__d=Ze)):Ze&&te.__e==Ze&&Ze.parentNode!=J&&(Ze=R(te))}for(ue.__e=gt,me=St;me--;)ht[me]!=null&&(typeof ue.type=="function"&&ht[me].__e!=null&&ht[me].__e==ue.__d&&(ue.__d=R(_e,me+1)),Ee(ht[me],ht[me]));if(it)for(me=0;me<it.length;me++)ge(it[me],it[++me],it[++me])}function B(J,K,ue){for(var _e,ke=J.__k,we=0;ke&&we<ke.length;we++)(_e=ke[we])&&(_e.__=J,K=typeof _e.type=="function"?B(_e,K,ue):Q(ue,_e,_e,ke,_e.__e,K));return K}function H(J,K){return K=K||[],J==null||typeof J=="boolean"||(Array.isArray(J)?J.some(function(ue){H(ue,K)}):K.push(J)),K}function Q(J,K,ue,_e,ke,we){var qe,nt,Ze;if(K.__d!==void 0)qe=K.__d,K.__d=void 0;else if(ue==null||ke!=we||ke.parentNode==null)e:if(we==null||we.parentNode!==J)J.appendChild(ke),qe=null;else{for(nt=we,Ze=0;(nt=nt.nextSibling)&&Ze<_e.length;Ze+=2)if(nt==ke)break e;J.insertBefore(ke,we),qe=we}return qe!==void 0?qe:ke.nextSibling}function le(J,K,ue){K[0]==="-"?J.setProperty(K,ue):J[K]=ue==null?"":typeof ue!="number"||k.test(K)?ue:ue+"px"}function se(J,K,ue,_e,ke){var we;e:if(K==="style")if(typeof ue=="string")J.style.cssText=ue;else{if(typeof _e=="string"&&(J.style.cssText=_e=""),_e)for(K in _e)ue&&K in ue||le(J.style,K,"");if(ue)for(K in ue)_e&&ue[K]===_e[K]||le(J.style,K,ue[K])}else if(K[0]==="o"&&K[1]==="n")we=K!==(K=K.replace(/Capture$/,"")),K=K.toLowerCase()in J?K.toLowerCase().slice(2):K.slice(2),J.l||(J.l={}),J.l[K+we]=ue,ue?_e||J.addEventListener(K,we?xe:ye,we):J.removeEventListener(K,we?xe:ye,we);else if(K!=="dangerouslySetInnerHTML"){if(ke)K=K.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(K!=="href"&&K!=="list"&&K!=="form"&&K!=="tabIndex"&&K!=="download"&&K in J)try{J[K]=ue??"";break e}catch{}typeof ue=="function"||(ue!=null&&(ue!==!1||K[0]==="a"&&K[1]==="r")?J.setAttribute(K,ue):J.removeAttribute(K))}}function ye(J){this.l[J.type+!1](c.event?c.event(J):J)}function xe(J){this.l[J.type+!0](c.event?c.event(J):J)}function ve(J,K,ue,_e,ke,we,qe,nt,Ze){var Ve,me,He,te,ze,ut,gt,it,ht,St,Pt,at=K.type;if(K.constructor!==void 0)return null;ue.__h!=null&&(Ze=ue.__h,nt=K.__e=ue.__e,K.__h=null,we=[nt]),(Ve=c.__b)&&Ve(K);try{e:if(typeof at=="function"){if(it=K.props,ht=(Ve=at.contextType)&&_e[Ve.__c],St=Ve?ht?ht.props.value:Ve.__:_e,ue.__c?gt=(me=K.__c=ue.__c).__=me.__E:("prototype"in at&&at.prototype.render?K.__c=me=new at(it,St):(K.__c=me=new q(it,St),me.constructor=at,me.render=Ie),ht&&ht.sub(me),me.props=it,me.state||(me.state={}),me.context=St,me.__n=_e,He=me.__d=!0,me.__h=[]),me.__s==null&&(me.__s=me.state),at.getDerivedStateFromProps!=null&&(me.__s==me.state&&(me.__s=A({},me.__s)),A(me.__s,at.getDerivedStateFromProps(it,me.__s))),te=me.props,ze=me.state,He)at.getDerivedStateFromProps==null&&me.componentWillMount!=null&&me.componentWillMount(),me.componentDidMount!=null&&me.__h.push(me.componentDidMount);else{if(at.getDerivedStateFromProps==null&&it!==te&&me.componentWillReceiveProps!=null&&me.componentWillReceiveProps(it,St),!me.__e&&me.shouldComponentUpdate!=null&&me.shouldComponentUpdate(it,me.__s,St)===!1||K.__v===ue.__v){me.props=it,me.state=me.__s,K.__v!==ue.__v&&(me.__d=!1),me.__v=K,K.__e=ue.__e,K.__k=ue.__k,K.__k.forEach(function(Dt){Dt&&(Dt.__=K)}),me.__h.length&&qe.push(me);break e}me.componentWillUpdate!=null&&me.componentWillUpdate(it,me.__s,St),me.componentDidUpdate!=null&&me.__h.push(function(){me.componentDidUpdate(te,ze,ut)})}me.context=St,me.props=it,me.state=me.__s,(Ve=c.__r)&&Ve(K),me.__d=!1,me.__v=K,me.__P=J,Ve=me.render(me.props,me.state,me.context),me.state=me.__s,me.getChildContext!=null&&(_e=A(A({},_e),me.getChildContext())),He||me.getSnapshotBeforeUpdate==null||(ut=me.getSnapshotBeforeUpdate(te,ze)),Pt=Ve!=null&&Ve.type===oe&&Ve.key==null?Ve.props.children:Ve,G(J,Array.isArray(Pt)?Pt:[Pt],K,ue,_e,ke,we,qe,nt,Ze),me.base=K.__e,K.__h=null,me.__h.length&&qe.push(me),gt&&(me.__E=me.__=null),me.__e=!1}else we==null&&K.__v===ue.__v?(K.__k=ue.__k,K.__e=ue.__e):K.__e=he(ue.__e,K,ue,_e,ke,we,qe,Ze);(Ve=c.diffed)&&Ve(K)}catch(Dt){K.__v=null,(Ze||we!=null)&&(K.__e=nt,K.__h=!!Ze,we[we.indexOf(nt)]=null),c.__e(Dt,K,ue)}}function ae(J,K){c.__c&&c.__c(K,J),J.some(function(ue){try{J=ue.__h,ue.__h=[],J.some(function(_e){_e.call(ue)})}catch(_e){c.__e(_e,ue.__v)}})}function he(J,K,ue,_e,ke,we,qe,nt){var Ze,Ve,me,He=ue.props,te=K.props,ze=K.type,ut=0;if(ze==="svg"&&(ke=!0),we!=null){for(;ut<we.length;ut++)if((Ze=we[ut])&&"setAttribute"in Ze==!!ze&&(ze?Ze.localName===ze:Ze.nodeType===3)){J=Ze,we[ut]=null;break}}if(J==null){if(ze===null)return document.createTextNode(te);J=ke?document.createElementNS("http://www.w3.org/2000/svg",ze):document.createElement(ze,te.is&&te),we=null,nt=!1}if(ze===null)He===te||nt&&J.data===te||(J.data=te);else{if(we=we&&f.call(J.childNodes),Ve=(He=ue.props||P).dangerouslySetInnerHTML,me=te.dangerouslySetInnerHTML,!nt){if(we!=null)for(He={},ut=0;ut<J.attributes.length;ut++)He[J.attributes[ut].name]=J.attributes[ut].value;(me||Ve)&&(me&&(Ve&&me.__html==Ve.__html||me.__html===J.innerHTML)||(J.innerHTML=me&&me.__html||""))}if(function(gt,it,ht,St,Pt){var at;for(at in ht)at==="children"||at==="key"||at in it||se(gt,at,null,ht[at],St);for(at in it)Pt&&typeof it[at]!="function"||at==="children"||at==="key"||at==="value"||at==="checked"||ht[at]===it[at]||se(gt,at,it[at],ht[at],St)}(J,te,He,ke,nt),me)K.__k=[];else if(ut=K.props.children,G(J,Array.isArray(ut)?ut:[ut],K,ue,_e,ke&&ze!=="foreignObject",we,qe,we?we[0]:ue.__k&&R(ue,0),nt),we!=null)for(ut=we.length;ut--;)we[ut]!=null&&C(we[ut]);nt||("value"in te&&(ut=te.value)!==void 0&&(ut!==He.value||ut!==J.value||ze==="progress"&&!ut)&&se(J,"value",ut,He.value,!1),"checked"in te&&(ut=te.checked)!==void 0&&ut!==J.checked&&se(J,"checked",ut,He.checked,!1))}return J}function ge(J,K,ue){try{typeof J=="function"?J(K):J.current=K}catch(_e){c.__e(_e,ue)}}function Ee(J,K,ue){var _e,ke;if(c.unmount&&c.unmount(J),(_e=J.ref)&&(_e.current&&_e.current!==J.__e||ge(_e,null,K)),(_e=J.__c)!=null){if(_e.componentWillUnmount)try{_e.componentWillUnmount()}catch(we){c.__e(we,K)}_e.base=_e.__P=null}if(_e=J.__k)for(ke=0;ke<_e.length;ke++)_e[ke]&&Ee(_e[ke],K,typeof J.type!="function");ue||J.__e==null||C(J.__e),J.__e=J.__d=void 0}function Ie(J,K,ue){return this.constructor(J,ue)}function Ye(J,K,ue){var _e,ke,we;c.__&&c.__(J,K),ke=(_e=typeof ue=="function")?null:ue&&ue.__k||K.__k,we=[],ve(K,J=(!_e&&ue||K).__k=z(oe,null,[J]),ke||P,P,K.ownerSVGElement!==void 0,!_e&&ue?[ue]:ke?null:K.firstChild?f.call(K.childNodes):null,we,!_e&&ue?ue:ke?ke.__e:K.firstChild,_e),ae(we,J)}function Me(J,K){Ye(J,K,Me)}function Re(J,K,ue){var _e,ke,we,qe=A({},J.props);for(we in K)we=="key"?_e=K[we]:we=="ref"?ke=K[we]:qe[we]=K[we];return arguments.length>2&&(qe.children=arguments.length>3?f.call(arguments,2):ue),F(J.type,qe,_e||J.key,ke||J.ref,null)}function Ke(J,K){var ue={__c:K="__cC"+S++,__:J,Consumer:function(_e,ke){return _e.children(ke)},Provider:function(_e){var ke,we;return this.getChildContext||(ke=[],(we={})[K]=this,this.getChildContext=function(){return we},this.shouldComponentUpdate=function(qe){this.props.value!==qe.value&&ke.some(I)},this.sub=function(qe){ke.push(qe);var nt=qe.componentWillUnmount;qe.componentWillUnmount=function(){ke.splice(ke.indexOf(qe),1),nt&&nt.call(qe)}}),_e.children}};return ue.Provider.__=ue.Consumer.contextType=ue}f=j.slice,c={__e:function(J,K){for(var ue,_e,ke;K=K.__;)if((ue=K.__c)&&!ue.__)try{if((_e=ue.constructor)&&_e.getDerivedStateFromError!=null&&(ue.setState(_e.getDerivedStateFromError(J)),ke=ue.__d),ue.componentDidCatch!=null&&(ue.componentDidCatch(J),ke=ue.__d),ke)return ue.__E=ue}catch(we){J=we}throw J}},v=0,q.prototype.setState=function(J,K){var ue;ue=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof J=="function"&&(J=J(A({},ue),this.props)),J&&A(ue,J),J!=null&&this.__v&&(K&&this.__h.push(K),I(this))},q.prototype.forceUpdate=function(J){this.__v&&(this.__e=!0,J&&this.__h.push(J),I(this))},q.prototype.render=oe,b=[],w=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,D.__r=0,S=0},function(s,l,o){(function(f,c){o.d(l,"a",function(){return I}),o.d(l,"b",function(){return qo}),o.d(l,"c",function(){return Ln}),o.d(l,"d",function(){return et}),o.d(l,"e",function(){return Ne}),o.d(l,"f",function(){return Ae}),o.d(l,"g",function(){return We}),o.d(l,"h",function(){return Ar}),o.d(l,"i",function(){return Pt}),o.d(l,"j",function(){return Be}),o.d(l,"k",function(){return Yn}),o.d(l,"l",function(){return Wo}),o.d(l,"m",function(){return gt}),o.d(l,"n",function(){return kr}),o.d(l,"o",function(){return B}),o.d(l,"p",function(){return Zi}),o.d(l,"q",function(){return Wn}),o.d(l,"r",function(){return $i}),o.d(l,"s",function(){return On}),o.d(l,"t",function(){return Wr}),o.d(l,"u",function(){return co}),o.d(l,"v",function(){return Yu}),o.d(l,"w",function(){return qi}),o.d(l,"x",function(){return Kr}),o.d(l,"y",function(){return An}),o.d(l,"z",function(){return It}),o.d(l,"A",function(){return hn}),o.d(l,"B",function(){return $n}),o.d(l,"C",function(){return Ve}),o.d(l,"D",function(){return Qi}),o.d(l,"E",function(){return Mr}),o.d(l,"F",function(){return Pr}),o.d(l,"G",function(){return Xu}),o.d(l,"H",function(){return Gi}),o.d(l,"I",function(){return $u}),o.d(l,"J",function(){return bn}),o.d(l,"K",function(){return ie}),o.d(l,"L",function(){return Zt}),o.d(l,"M",function(){return ea});var v=[];Object.freeze(v);var b={};function w(){return++Fe.mobxGuid}function O(g){throw S(!1,g),"X"}function S(g,m){if(!g)throw new Error("[mobx] "+(m||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(b);function P(g){var m=!1;return function(){if(!m)return m=!0,g.apply(this,arguments)}}var j=function(){};function k(g){return g!==null&&typeof g=="object"}function A(g){if(g===null||typeof g!="object")return!1;var m=Object.getPrototypeOf(g);return m===Object.prototype||m===null}function C(g,m,E){Object.defineProperty(g,m,{enumerable:!1,writable:!0,configurable:!0,value:E})}function z(g,m){var E="isMobX"+g;return m.prototype[E]=!0,function(N){return k(N)&&N[E]===!0}}function F(g){return g instanceof Map}function Z(g){return g instanceof Set}function oe(g){var m=new Set;for(var E in g)m.add(E);return Object.getOwnPropertySymbols(g).forEach(function(N){Object.getOwnPropertyDescriptor(g,N).enumerable&&m.add(N)}),Array.from(m)}function q(g){return g&&g.toString?g.toString():new String(g).toString()}function R(g){return g===null?null:typeof g=="object"?""+g:g}var Y=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:Object.getOwnPropertyNames,I=Symbol("mobx administration"),D=function(){function g(m){m===void 0&&(m="Atom@"+w()),this.name=m,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=He.NOT_TRACKING}return g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(m){return m()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(m){return m()})},g.prototype.reportObserved=function(){return zi(this)},g.prototype.reportChanged=function(){gn(),function(m){m.lowestObserverState!==He.STALE&&(m.lowestObserverState=He.STALE,m.observers.forEach(function(E){E.dependenciesState===He.UP_TO_DATE&&(E.isTracing!==te.NONE&&Vn(E,m),E.onBecomeStale()),E.dependenciesState=He.STALE}))}(this),mn()},g.prototype.toString=function(){return this.name},g}(),G=z("Atom",D);function B(g,m,E){m===void 0&&(m=j),E===void 0&&(E=j);var N,X=new D(g);return m!==j&&Xi("onBecomeObserved",X,m,N),E!==j&&Mr(X,E),X}var H={identity:function(g,m){return g===m},structural:function(g,m){return Jo(g,m)},default:function(g,m){return Object.is(g,m)},shallow:function(g,m){return Jo(g,m,1)}},Q=function(g,m){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,N){E.__proto__=N}||function(E,N){for(var X in N)N.hasOwnProperty(X)&&(E[X]=N[X])},Q(g,m)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var le=function(){return le=Object.assign||function(g){for(var m,E=1,N=arguments.length;E<N;E++)for(var X in m=arguments[E])Object.prototype.hasOwnProperty.call(m,X)&&(g[X]=m[X]);return g},le.apply(this,arguments)};function se(g){var m=typeof Symbol=="function"&&g[Symbol.iterator],E=0;return m?m.call(g):{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}}}function ye(g,m){var E=typeof Symbol=="function"&&g[Symbol.iterator];if(!E)return g;var N,X,ee=E.call(g),pe=[];try{for(;(m===void 0||m-- >0)&&!(N=ee.next()).done;)pe.push(N.value)}catch(je){X={error:je}}finally{try{N&&!N.done&&(E=ee.return)&&E.call(ee)}finally{if(X)throw X.error}}return pe}function xe(){for(var g=[],m=0;m<arguments.length;m++)g=g.concat(ye(arguments[m]));return g}var ve=Symbol("mobx did run lazy initializers"),ae=Symbol("mobx pending decorators"),he={},ge={};function Ee(g,m){var E=m?he:ge;return E[g]||(E[g]={configurable:!0,enumerable:m,get:function(){return Ie(this),this[g]},set:function(N){Ie(this),this[g]=N}})}function Ie(g){var m,E;if(g[ve]!==!0){var N=g[ae];if(N){C(g,ve,!0);var X=xe(Object.getOwnPropertySymbols(N),Object.keys(N));try{for(var ee=se(X),pe=ee.next();!pe.done;pe=ee.next()){var je=N[pe.value];je.propertyCreator(g,je.prop,je.descriptor,je.decoratorTarget,je.decoratorArguments)}}catch(Ge){m={error:Ge}}finally{try{pe&&!pe.done&&(E=ee.return)&&E.call(ee)}finally{if(m)throw m.error}}}}}function Ye(g,m){return function(){var E,N=function(X,ee,pe,je){if(je===!0)return m(X,ee,pe,X,E),null;if(!Object.prototype.hasOwnProperty.call(X,ae)){var Ge=X[ae];C(X,ae,le({},Ge))}return X[ae][ee]={prop:ee,propertyCreator:m,descriptor:pe,decoratorTarget:X,decoratorArguments:E},Ee(ee,g)};return Me(arguments)?(E=v,N.apply(null,arguments)):(E=Array.prototype.slice.call(arguments),N)}}function Me(g){return(g.length===2||g.length===3)&&(typeof g[1]=="string"||typeof g[1]=="symbol")||g.length===4&&g[3]===!0}function Re(g,m,E){return Kr(g)?g:Array.isArray(g)?Ve.array(g,{name:E}):A(g)?Ve.object(g,void 0,{name:E}):F(g)?Ve.map(g,{name:E}):Z(g)?Ve.set(g,{name:E}):g}function Ke(g){return g}function J(g){S(g);var m=Ye(!0,function(N,X,ee,pe,je){var Ge=ee?ee.initializer?ee.initializer.call(N):ee.value:void 0;Zr(N).addObservableProp(X,Ge,g)}),E=(f!==void 0&&f.env,m);return E.enhancer=g,E}var K={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ue(g){return g==null?K:typeof g=="string"?{name:g,deep:!0,proxy:!0}:g}Object.freeze(K);var _e=J(Re),ke=J(function(g,m,E){return g==null||hn(g)||An(g)||It(g)||dn(g)?g:Array.isArray(g)?Ve.array(g,{name:E,deep:!1}):A(g)?Ve.object(g,void 0,{name:E,deep:!1}):F(g)?Ve.map(g,{name:E,deep:!1}):Z(g)?Ve.set(g,{name:E,deep:!1}):O(!1)}),we=J(Ke),qe=J(function(g,m,E){return Jo(g,m)?m:g});function nt(g){return g.defaultDecorator?g.defaultDecorator.enhancer:g.deep===!1?Ke:Re}var Ze={box:function(g,m){arguments.length>2&&me("box");var E=ue(m);return new At(g,nt(E),E.name,!0,E.equals)},array:function(g,m){arguments.length>2&&me("array");var E=ue(m);return Ko(g,nt(E),E.name)},map:function(g,m){arguments.length>2&&me("map");var E=ue(m);return new qo(g,nt(E),E.name)},set:function(g,m){arguments.length>2&&me("set");var E=ue(m);return new po(g,nt(E),E.name)},object:function(g,m,E){typeof arguments[1]=="string"&&me("object");var N=ue(E);if(N.proxy===!1)return Wn({},g,m,N);var X=Ui(N),ee=Wn({},void 0,void 0,N),pe=qu(ee);return Vi(pe,g,m,X),pe},ref:we,shallow:ke,deep:_e,struct:qe},Ve=function(g,m,E){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return _e.apply(null,arguments);if(Kr(g))return g;var N=A(g)?Ve.object(g,m,E):Array.isArray(g)?Ve.array(g,m):F(g)?Ve.map(g,m):Z(g)?Ve.set(g,m):g;if(N!==g)return N;O(!1)};function me(g){O("Expected one or two arguments to observable."+g+". Did you accidentally try to use observable."+g+" as decorator?")}Object.keys(Ze).forEach(function(g){return Ve[g]=Ze[g]});var He,te,ze=Ye(!1,function(g,m,E,N,X){var ee=E.get,pe=E.set,je=X[0]||{};Zr(g).addComputedProp(g,m,le({get:ee,set:pe,context:g},je))}),ut=ze({equals:H.structural}),gt=function(g,m,E){if(typeof m=="string"||g!==null&&typeof g=="object"&&arguments.length===1)return ze.apply(null,arguments);var N=typeof m=="object"?m:{};return N.get=g,N.set=typeof m=="function"?m:N.set,N.name=N.name||g.name||"",new Xn(N)};gt.struct=ut,function(g){g[g.NOT_TRACKING=-1]="NOT_TRACKING",g[g.UP_TO_DATE=0]="UP_TO_DATE",g[g.POSSIBLY_STALE=1]="POSSIBLY_STALE",g[g.STALE=2]="STALE"}(He||(He={})),function(g){g[g.NONE=0]="NONE",g[g.LOG=1]="LOG",g[g.BREAK=2]="BREAK"}(te||(te={}));var it=function(g){this.cause=g};function ht(g){return g instanceof it}function St(g){switch(g.dependenciesState){case He.UP_TO_DATE:return!1;case He.NOT_TRACKING:case He.STALE:return!0;case He.POSSIBLY_STALE:for(var m=Ae(!0),E=W(),N=g.observing,X=N.length,ee=0;ee<X;ee++){var pe=N[ee];if(Un(pe)){if(Fe.disableErrorBoundaries)pe.get();else try{pe.get()}catch{return ce(E),Ne(m),!0}if(g.dependenciesState===He.STALE)return ce(E),Ne(m),!0}}return Xe(g),ce(E),Ne(m),!1}}function Pt(){return Fe.trackingDerivation!==null}function at(g){var m=g.observers.size>0;Fe.computationDepth>0&&m&&O(!1),Fe.allowStateChanges||!m&&Fe.enforceActions!=="strict"||O(!1)}function Dt(g,m,E){var N=Ae(!0);Xe(g),g.newObserving=new Array(g.observing.length+100),g.unboundDepsCount=0,g.runId=++Fe.runId;var X,ee=Fe.trackingDerivation;if(Fe.trackingDerivation=g,Fe.disableErrorBoundaries===!0)X=m.call(E);else try{X=m.call(E)}catch(pe){X=new it(pe)}return Fe.trackingDerivation=ee,function(pe){for(var je=pe.observing,Ge=pe.observing=pe.newObserving,pt=He.UP_TO_DATE,ot=0,xt=pe.unboundDepsCount,ct=0;ct<xt;ct++)(_t=Ge[ct]).diffValue===0&&(_t.diffValue=1,ot!==ct&&(Ge[ot]=_t),ot++),_t.dependenciesState>pt&&(pt=_t.dependenciesState);for(Ge.length=ot,pe.newObserving=null,xt=je.length;xt--;)(_t=je[xt]).diffValue===0&&Ii(_t,pe),_t.diffValue=0;for(;ot--;){var _t;(_t=Ge[ot]).diffValue===1&&(_t.diffValue=0,Bu(_t,pe))}pt!==He.UP_TO_DATE&&(pe.dependenciesState=pt,pe.onBecomeStale())}(g),Ne(N),X}function U(g){var m=g.observing;g.observing=[];for(var E=m.length;E--;)Ii(m[E],g);g.dependenciesState=He.NOT_TRACKING}function ie(g){var m=W();try{return g()}finally{ce(m)}}function W(){var g=Fe.trackingDerivation;return Fe.trackingDerivation=null,g}function ce(g){Fe.trackingDerivation=g}function Ae(g){var m=Fe.allowStateReads;return Fe.allowStateReads=g,m}function Ne(g){Fe.allowStateReads=g}function Xe(g){if(g.dependenciesState!==He.UP_TO_DATE){g.dependenciesState=He.UP_TO_DATE;for(var m=g.observing,E=m.length;E--;)m[E].lowestObserverState=He.UP_TO_DATE}}var lt=0,Ht=1,$t=Object.getOwnPropertyDescriptor(function(){},"name");$t&&$t.configurable;function Ct(g,m,E){var N=function(){return Rt(g,m,E||this,arguments)};return N.isMobxAction=!0,N}function Rt(g,m,E,N){var X=Be();try{return m.apply(E,N)}catch(ee){throw X.error=ee,ee}finally{We(X)}}function Be(g,m,E){var N=0,X=W();gn();var ee={prevDerivation:X,prevAllowStateChanges:rt(!0),prevAllowStateReads:Ae(!0),notifySpy:!1,startTime:N,actionId:Ht++,parentActionId:lt};return lt=ee.actionId,ee}function We(g){lt!==g.actionId&&O("invalid action stack. did you forget to finish an action?"),lt=g.parentActionId,g.error!==void 0&&(Fe.suppressReactionErrors=!0),wt(g.prevAllowStateChanges),Ne(g.prevAllowStateReads),mn(),ce(g.prevDerivation),g.notifySpy,Fe.suppressReactionErrors=!1}function et(g,m){var E,N=rt(g);try{E=m()}finally{wt(N)}return E}function rt(g){var m=Fe.allowStateChanges;return Fe.allowStateChanges=g,m}function wt(g){Fe.allowStateChanges=g}var At=function(g){function m(E,N,X,ee,pe){X===void 0&&(X="ObservableValue@"+w()),pe===void 0&&(pe=H.default);var je=g.call(this,X)||this;return je.enhancer=N,je.name=X,je.equals=pe,je.hasUnreportedChange=!1,je.value=N(E,void 0,X),je}return function(E,N){function X(){this.constructor=E}Q(E,N),E.prototype=N===null?Object.create(N):(X.prototype=N.prototype,new X)}(m,g),m.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},m.prototype.set=function(E){this.value,(E=this.prepareNewValue(E))!==Fe.UNCHANGED&&this.setNewValue(E)},m.prototype.prepareNewValue=function(E){if(at(this),rn(this)){var N=vt(this,{object:this,type:"update",newValue:E});if(!N)return Fe.UNCHANGED;E=N.newValue}return E=this.enhancer(E,this.value,this.name),this.equals(this.value,E)?Fe.UNCHANGED:E},m.prototype.setNewValue=function(E){var N=this.value;this.value=E,this.reportChanged(),_n(this)&&Kt(this,{type:"update",object:this,newValue:E,oldValue:N})},m.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},m.prototype.intercept=function(E){return fr(this,E)},m.prototype.observe=function(E,N){return N&&E({object:this,type:"update",newValue:this.value,oldValue:void 0}),pr(this,E)},m.prototype.toJSON=function(){return this.get()},m.prototype.toString=function(){return this.name+"["+this.value+"]"},m.prototype.valueOf=function(){return R(this.get())},m.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},m}(D),sr=z("ObservableValue",At),Xn=function(){function g(m){this.dependenciesState=He.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=He.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+w(),this.value=new it(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=te.NONE,S(m.get,"missing option for computed: get"),this.derivation=m.get,this.name=m.name||"ComputedValue@"+w(),m.set&&(this.setter=Ct(this.name+"-setter",m.set)),this.equals=m.equals||(m.compareStructural||m.struct?H.structural:H.default),this.scope=m.context,this.requiresReaction=!!m.requiresReaction,this.keepAlive=!!m.keepAlive}return g.prototype.onBecomeStale=function(){(function(m){m.lowestObserverState===He.UP_TO_DATE&&(m.lowestObserverState=He.POSSIBLY_STALE,m.observers.forEach(function(E){E.dependenciesState===He.UP_TO_DATE&&(E.dependenciesState=He.POSSIBLY_STALE,E.isTracing!==te.NONE&&Vn(E,m),E.onBecomeStale())}))})(this)},g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(m){return m()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(m){return m()})},g.prototype.get=function(){this.isComputing&&O("Cycle detected in computation "+this.name+": "+this.derivation),Fe.inBatch!==0||this.observers.size!==0||this.keepAlive?(zi(this),St(this)&&this.trackAndCompute()&&function(E){E.lowestObserverState!==He.STALE&&(E.lowestObserverState=He.STALE,E.observers.forEach(function(N){N.dependenciesState===He.POSSIBLY_STALE?N.dependenciesState=He.STALE:N.dependenciesState===He.UP_TO_DATE&&(E.lowestObserverState=He.UP_TO_DATE)}))}(this)):St(this)&&(this.warnAboutUntrackedRead(),gn(),this.value=this.computeValue(!1),mn());var m=this.value;if(ht(m))throw m.cause;return m},g.prototype.peek=function(){var m=this.computeValue(!1);if(ht(m))throw m.cause;return m},g.prototype.set=function(m){if(this.setter){S(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,m)}finally{this.isRunningSetter=!1}}else S(!1,!1)},g.prototype.trackAndCompute=function(){var m=this.value,E=this.dependenciesState===He.NOT_TRACKING,N=this.computeValue(!0),X=E||ht(m)||ht(N)||!this.equals(m,N);return X&&(this.value=N),X},g.prototype.computeValue=function(m){var E;if(this.isComputing=!0,Fe.computationDepth++,m)E=Dt(this,this.derivation,this.scope);else if(Fe.disableErrorBoundaries===!0)E=this.derivation.call(this.scope);else try{E=this.derivation.call(this.scope)}catch(N){E=new it(N)}return Fe.computationDepth--,this.isComputing=!1,E},g.prototype.suspend=function(){this.keepAlive||(U(this),this.value=void 0)},g.prototype.observe=function(m,E){var N=this,X=!0,ee=void 0;return Wo(function(){var pe=N.get();if(!X||E){var je=W();m({type:"update",object:N,newValue:pe,oldValue:ee}),ce(je)}X=!1,ee=pe})},g.prototype.warnAboutUntrackedRead=function(){},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},g.prototype.valueOf=function(){return R(this.get())},g.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},g}(),Un=z("ComputedValue",Xn),Yr=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},zu={};function Uo(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:zu}var Pn=!0,Ri=!1,Fe=function(){var g=Uo();return g.__mobxInstanceCount>0&&!g.__mobxGlobals&&(Pn=!1),g.__mobxGlobals&&g.__mobxGlobals.version!==new Yr().version&&(Pn=!1),Pn?g.__mobxGlobals?(g.__mobxInstanceCount+=1,g.__mobxGlobals.UNCHANGED||(g.__mobxGlobals.UNCHANGED={}),g.__mobxGlobals):(g.__mobxInstanceCount=1,g.__mobxGlobals=new Yr):(setTimeout(function(){Ri||O("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Yr)}();function Bu(g,m){g.observers.add(m),g.lowestObserverState>m.dependenciesState&&(g.lowestObserverState=m.dependenciesState)}function Ii(g,m){g.observers.delete(m),g.observers.size===0&&Li(g)}function Li(g){g.isPendingUnobservation===!1&&(g.isPendingUnobservation=!0,Fe.pendingUnobservations.push(g))}function gn(){Fe.inBatch++}function mn(){if(--Fe.inBatch==0){Bi();for(var g=Fe.pendingUnobservations,m=0;m<g.length;m++){var E=g[m];E.isPendingUnobservation=!1,E.observers.size===0&&(E.isBeingObserved&&(E.isBeingObserved=!1,E.onBecomeUnobserved()),E instanceof Xn&&E.suspend())}Fe.pendingUnobservations=[]}}function zi(g){var m=Fe.trackingDerivation;return m!==null?(m.runId!==g.lastAccessedBy&&(g.lastAccessedBy=m.runId,m.newObserving[m.unboundDepsCount++]=g,g.isBeingObserved||(g.isBeingObserved=!0,g.onBecomeObserved())),!0):(g.observers.size===0&&Fe.inBatch>0&&Li(g),!1)}function Vn(g,m){if(g.isTracing===te.BREAK){var E=[];jr(Wr(g),E,1),new Function(`debugger;
/*
Tracing '`+g.name+`'

You are entering this break point because derivation '`+g.name+"' is being traced and '"+m.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(g instanceof Xn?g.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+E.join(`
`)+`
*/
    `)()}}function jr(g,m,E){m.length>=1e3?m.push("(and many more)"):(m.push(""+new Array(E).join("	")+g.name),g.dependencies&&g.dependencies.forEach(function(N){return jr(N,m,E+1)}))}var Ln=function(){function g(m,E,N,X){m===void 0&&(m="Reaction@"+w()),X===void 0&&(X=!1),this.name=m,this.onInvalidate=E,this.errorHandler=N,this.requiresObservable=X,this.observing=[],this.newObserving=[],this.dependenciesState=He.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+w(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=te.NONE}return g.prototype.onBecomeStale=function(){this.schedule()},g.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Fe.pendingReactions.push(this),Bi())},g.prototype.isScheduled=function(){return this._isScheduled},g.prototype.runReaction=function(){if(!this.isDisposed){if(gn(),this._isScheduled=!1,St(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(m){this.reportExceptionInDerivation(m)}}mn()}},g.prototype.track=function(m){if(!this.isDisposed){gn(),this._isRunning=!0;var E=Dt(this,m,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&U(this),ht(E)&&this.reportExceptionInDerivation(E.cause),mn()}},g.prototype.reportExceptionInDerivation=function(m){var E=this;if(this.errorHandler)this.errorHandler(m,this);else{if(Fe.disableErrorBoundaries)throw m;Fe.suppressReactionErrors,Fe.globalReactionErrorHandlers.forEach(function(N){return N(m,E)})}},g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(gn(),U(this),mn()))},g.prototype.getDisposer=function(){var m=this.dispose.bind(this);return m[I]=this,m},g.prototype.toString=function(){return"Reaction["+this.name+"]"},g.prototype.trace=function(m){m===void 0&&(m=!1),function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];var X=!1;typeof E[E.length-1]=="boolean"&&(X=E.pop());var ee=kn(E);if(!ee)return O(!1);ee.isTracing,te.NONE,ee.isTracing=X?te.BREAK:te.LOG}(this,m)},g}(),Vo=function(g){return g()};function Bi(){Fe.inBatch>0||Fe.isRunningReactions||Vo(Gu)}function Gu(){Fe.isRunningReactions=!0;for(var g=Fe.pendingReactions,m=0;g.length>0;){++m==100&&g.splice(0);for(var E=g.splice(0),N=0,X=E.length;N<X;N++)E[N].runReaction()}Fe.isRunningReactions=!1}var so=z("Reaction",Ln);function Hu(g){var m=Vo;Vo=function(E){return g(function(){return m(E)})}}function Gi(g){return function(){}}function Fu(){O(!1)}function cr(g){return function(m,E,N){if(N){if(N.value)return{value:Ct(g,N.value),enumerable:!1,configurable:!0,writable:!0};var X=N.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ct(g,X.call(this))}}}return Hi(g).apply(this,arguments)}}function Hi(g){return function(m,E,N){Object.defineProperty(m,E,{configurable:!0,enumerable:!1,get:function(){},set:function(X){C(this,E,Yn(g,X))}})}}var Yn=function(g,m,E,N){return arguments.length===1&&typeof g=="function"?Ct(g.name||"<unnamed action>",g):arguments.length===2&&typeof m=="function"?Ct(g,m):arguments.length===1&&typeof g=="string"?cr(g):N!==!0?cr(m).apply(null,arguments):void C(g,m,Ct(g.name||m,E.value,this))};function Xu(g,m){return Rt(typeof g=="string"?g:g.name||"<unnamed action>",typeof g=="function"?g:m,this,void 0)}function co(g){return typeof g=="function"&&g.isMobxAction===!0}function Yo(g,m,E){C(g,m,Ct(m,E.bind(g)))}function Wo(g,m){m===void 0&&(m=b);var E,N=m&&m.name||g.name||"Autorun@"+w();if(!m.scheduler&&!m.delay)E=new Ln(N,function(){this.track(pe)},m.onError,m.requiresObservable);else{var X=Fi(m),ee=!1;E=new Ln(N,function(){ee||(ee=!0,X(function(){ee=!1,E.isDisposed||E.track(pe)}))},m.onError,m.requiresObservable)}function pe(){g(E)}return E.schedule(),E.getDisposer()}Yn.bound=function(g,m,E,N){return N===!0?(Yo(g,m,E.value),null):E?{configurable:!0,enumerable:!1,get:function(){return Yo(this,m,E.value||E.initializer.call(this)),this[m]},set:Fu}:{enumerable:!1,configurable:!0,set:function(X){Yo(this,m,X)},get:function(){}}};var Uu=function(g){return g()};function Fi(g){return g.scheduler?g.scheduler:g.delay?function(m){return setTimeout(m,g.delay)}:Uu}function Pr(g,m,E){E===void 0&&(E=b);var N,X,ee,pe=E.name||"Reaction@"+w(),je=Yn(pe,E.onError?(N=E.onError,X=m,function(){try{return X.apply(this,arguments)}catch(kt){N.call(this,kt)}}):m),Ge=!E.scheduler&&!E.delay,pt=Fi(E),ot=!0,xt=!1,ct=E.compareStructural?H.structural:E.equals||H.default,_t=new Ln(pe,function(){ot||Ge?wn():xt||(xt=!0,pt(wn))},E.onError,E.requiresObservable);function wn(){if(xt=!1,!_t.isDisposed){var kt=!1;_t.track(function(){var on=g(_t);kt=ot||!ct(ee,on),ee=on}),ot&&E.fireImmediately&&je(ee,_t),ot||kt!==!0||je(ee,_t),ot&&(ot=!1)}}return _t.schedule(),_t.getDisposer()}function Mr(g,m,E){return Xi("onBecomeUnobserved",g,m,E)}function Xi(g,m,E,N){var X=typeof N=="function"?On(m,E):On(m),ee=typeof N=="function"?N:E,pe=g+"Listeners";return X[pe]?X[pe].add(ee):X[pe]=new Set([ee]),typeof X[g]!="function"?O(!1):function(){var je=X[pe];je&&(je.delete(ee),je.size===0&&delete X[pe])}}function kr(g){var m=g.enforceActions,E=g.computedRequiresReaction,N=g.computedConfigurable,X=g.disableErrorBoundaries,ee=g.reactionScheduler,pe=g.reactionRequiresObservable,je=g.observableRequiresReaction;if(g.isolateGlobalState===!0&&((Fe.pendingReactions.length||Fe.inBatch||Fe.isRunningReactions)&&O("isolateGlobalState should be called before MobX is running any reactions"),Ri=!0,Pn&&(--Uo().__mobxInstanceCount==0&&(Uo().__mobxGlobals=void 0),Fe=new Yr)),m!==void 0){var Ge=void 0;switch(m){case!0:case"observed":Ge=!0;break;case!1:case"never":Ge=!1;break;case"strict":case"always":Ge="strict";break;default:O("Invalid value for 'enforceActions': '"+m+"', expected 'never', 'always' or 'observed'")}Fe.enforceActions=Ge,Fe.allowStateChanges=Ge!==!0&&Ge!=="strict"}E!==void 0&&(Fe.computedRequiresReaction=!!E),pe!==void 0&&(Fe.reactionRequiresObservable=!!pe),je!==void 0&&(Fe.observableRequiresReaction=!!je,Fe.allowStateReads=!Fe.observableRequiresReaction),N!==void 0&&(Fe.computedConfigurable=!!N),X!==void 0&&(Fe.disableErrorBoundaries=!!X),ee&&Hu(ee)}function Wn(g,m,E,N){var X=Ui(N=ue(N));return Ie(g),Zr(g,N.name,X.enhancer),m&&Vi(g,m,E,X),g}function Ui(g){return g.defaultDecorator||(g.deep===!1?we:_e)}function Vi(g,m,E,N){var X,ee;gn();try{var pe=Y(m);try{for(var je=se(pe),Ge=je.next();!Ge.done;Ge=je.next()){var pt=Ge.value,ot=Object.getOwnPropertyDescriptor(m,pt),xt=(E&&pt in E?E[pt]:ot.get?ze:N)(g,pt,ot,!0);xt&&Object.defineProperty(g,pt,xt)}}catch(ct){X={error:ct}}finally{try{Ge&&!Ge.done&&(ee=je.return)&&ee.call(je)}finally{if(X)throw X.error}}}finally{mn()}}function Wr(g,m){return Yi(On(g,m))}function Yi(g){var m,E,N={name:g.name};return g.observing&&g.observing.length>0&&(N.dependencies=(m=g.observing,E=[],m.forEach(function(X){E.indexOf(X)===-1&&E.push(X)}),E).map(Yi)),N}var Vu=0;function Wi(){this.message="FLOW_CANCELLED"}function $i(g){arguments.length!==1&&O("Flow expects 1 argument and cannot be used as decorator");var m=g.name||"<unnamed flow>";return function(){var E,N=this,X=arguments,ee=++Vu,pe=Yn(m+" - runid: "+ee+" - init",g).apply(N,X),je=void 0,Ge=new Promise(function(pt,ot){var xt=0;function ct(kt){var on;je=void 0;try{on=Yn(m+" - runid: "+ee+" - yield "+xt++,pe.next).call(pe,kt)}catch(Jr){return ot(Jr)}wn(on)}function _t(kt){var on;je=void 0;try{on=Yn(m+" - runid: "+ee+" - yield "+xt++,pe.throw).call(pe,kt)}catch(Jr){return ot(Jr)}wn(on)}function wn(kt){if(!kt||typeof kt.then!="function")return kt.done?pt(kt.value):(je=Promise.resolve(kt.value)).then(ct,_t);kt.then(wn,ot)}E=ot,ct(void 0)});return Ge.cancel=Yn(m+" - runid: "+ee+" - cancel",function(){try{je&&$r(je);var pt=pe.return(void 0),ot=Promise.resolve(pt.value);ot.then(j,j),$r(ot),E(new Wi)}catch(xt){E(xt)}}),Ge}}function $r(g){typeof g.cancel=="function"&&g.cancel()}function Ki(g,m){if(g==null)return!1;if(m!==void 0){if(hn(g)===!1||!g[I].values.has(m))return!1;var E=On(g,m);return Un(E)}return Un(g)}function Yu(g){return arguments.length>1?O(!1):Ki(g)}function qi(g,m){return typeof m!="string"?O(!1):Ki(g,m)}function $o(g,m){return g!=null&&(m!==void 0?!!hn(g)&&g[I].values.has(m):hn(g)||!!g[I]||G(g)||so(g)||Un(g))}function Kr(g){return arguments.length!==1&&O(!1),$o(g)}function $n(g){return hn(g)?g[I].getKeys():It(g)||dn(g)?Array.from(g.keys()):An(g)?g.map(function(m,E){return E}):O(!1)}function Zt(g){return hn(g)?$n(g).map(function(m){return g[m]}):It(g)?$n(g).map(function(m){return g.get(m)}):dn(g)?Array.from(g.values()):An(g)?g.slice():O(!1)}function Zi(g){return hn(g)?$n(g).map(function(m){return[m,g[m]]}):It(g)?$n(g).map(function(m){return[m,g.get(m)]}):dn(g)?Array.from(g.entries()):An(g)?g.map(function(m,E){return[E,m]}):O(!1)}function Ji(g,m,E){if(arguments.length!==2||dn(g))if(hn(g)){var N=g[I],X=N.values.get(m);X?N.write(m,E):N.addObservableProp(m,E,N.defaultEnhancer)}else if(It(g))g.set(m,E);else if(dn(g))g.add(m);else{if(!An(g))return O(!1);typeof m!="number"&&(m=parseInt(m,10)),S(m>=0,"Not a valid index: '"+m+"'"),gn(),m>=g.length&&(g.length=m+1),g[m]=E,mn()}else{gn();var ee=m;try{for(var pe in ee)Ji(g,pe,ee[pe])}finally{mn()}}}function Qi(g,m,E,N){return typeof E=="function"?function(X,ee,pe,je){return Ar(X,ee).observe(pe,je)}(g,m,E,N):function(X,ee,pe){return Ar(X).observe(ee,pe)}(g,m,E)}Wi.prototype=Object.create(Error.prototype);var Wu={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function lr(g,m,E,N){return N.detectCycles&&g.set(m,E),E}function Mn(g,m,E){if(!m.recurseEverything&&!Kr(g)||typeof g!="object")return g;if(g===null)return null;if(g instanceof Date)return g;if(sr(g))return Mn(g.get(),m,E);if(Kr(g)&&$n(g),m.detectCycles===!0&&g!==null&&E.has(g))return E.get(g);if(An(g)||Array.isArray(g)){var N=lr(E,g,[],m),X=g.map(function(ct){return Mn(ct,m,E)});N.length=X.length;for(var ee=0,pe=X.length;ee<pe;ee++)N[ee]=X[ee];return N}if(dn(g)||Object.getPrototypeOf(g)===Set.prototype){if(m.exportMapsAsObjects===!1){var je=lr(E,g,new Set,m);return g.forEach(function(ct){je.add(Mn(ct,m,E))}),je}var Ge=lr(E,g,[],m);return g.forEach(function(ct){Ge.push(Mn(ct,m,E))}),Ge}if(It(g)||Object.getPrototypeOf(g)===Map.prototype){if(m.exportMapsAsObjects===!1){var pt=lr(E,g,new Map,m);return g.forEach(function(ct,_t){pt.set(_t,Mn(ct,m,E))}),pt}var ot=lr(E,g,{},m);return g.forEach(function(ct,_t){ot[_t]=Mn(ct,m,E)}),ot}var xt=lr(E,g,{},m);return oe(g).forEach(function(ct){xt[ct]=Mn(g[ct],m,E)}),xt}function $u(g,m){var E;return typeof m=="boolean"&&(m={detectCycles:m}),m||(m=Wu),m.detectCycles=m.detectCycles===void 0?m.recurseEverything===!0:m.detectCycles===!0,m.detectCycles&&(E=new Map),Mn(g,m,E)}function kn(g){switch(g.length){case 0:return Fe.trackingDerivation;case 1:return On(g[0]);case 2:return On(g[0],g[1])}}function bn(g,m){m===void 0&&(m=void 0),gn();try{return g.apply(m)}finally{mn()}}function ea(g,m,E){return arguments.length===1||m&&typeof m=="object"?Ku(g,m):ta(g,m,E||{})}function ta(g,m,E){var N;typeof E.timeout=="number"&&(N=setTimeout(function(){if(!ee[I].isDisposed){ee();var pe=new Error("WHEN_TIMEOUT");if(!E.onError)throw pe;E.onError(pe)}},E.timeout)),E.name=E.name||"When@"+w();var X=Ct(E.name+"-effect",m),ee=Wo(function(pe){g()&&(pe.dispose(),N&&clearTimeout(N),X())},E);return ee}function Ku(g,m){var E,N=new Promise(function(X,ee){var pe=ta(g,X,le(le({},m),{onError:ee}));E=function(){pe(),ee("WHEN_CANCELLED")}});return N.cancel=E,N}function lo(g){return g[I]}function Kn(g){return typeof g=="string"||typeof g=="number"||typeof g=="symbol"}var qr={has:function(g,m){if(m===I||m==="constructor"||m===ve)return!0;var E=lo(g);return Kn(m)?E.has(m):m in g},get:function(g,m){if(m===I||m==="constructor"||m===ve)return g[m];var E=lo(g),N=E.values.get(m);if(N instanceof D){var X=N.get();return X===void 0&&E.has(m),X}return Kn(m)&&E.has(m),g[m]},set:function(g,m,E){return!!Kn(m)&&(Ji(g,m,E),!0)},deleteProperty:function(g,m){return!!Kn(m)&&(lo(g).remove(m),!0)},ownKeys:function(g){return lo(g).keysAtom.reportObserved(),Reflect.ownKeys(g)},preventExtensions:function(g){return O("Dynamic observable objects cannot be frozen"),!1}};function qu(g){var m=new Proxy(g,qr);return g[I].proxy=m,m}function rn(g){return g.interceptors!==void 0&&g.interceptors.length>0}function fr(g,m){var E=g.interceptors||(g.interceptors=[]);return E.push(m),P(function(){var N=E.indexOf(m);N!==-1&&E.splice(N,1)})}function vt(g,m){var E=W();try{for(var N=xe(g.interceptors||[]),X=0,ee=N.length;X<ee&&(S(!(m=N[X](m))||m.type,"Intercept handlers should return nothing or a change object"),m);X++);return m}finally{ce(E)}}function _n(g){return g.changeListeners!==void 0&&g.changeListeners.length>0}function pr(g,m){var E=g.changeListeners||(g.changeListeners=[]);return E.push(m),P(function(){var N=E.indexOf(m);N!==-1&&E.splice(N,1)})}function Kt(g,m){var E=W(),N=g.changeListeners;if(N){for(var X=0,ee=(N=N.slice()).length;X<ee;X++)N[X](m);ce(E)}}var na={get:function(g,m){return m===I?g[I]:m==="length"?g[I].getArrayLength():typeof m=="number"?Tn.get.call(g,m):typeof m!="string"||isNaN(m)?Tn.hasOwnProperty(m)?Tn[m]:g[m]:Tn.get.call(g,parseInt(m))},set:function(g,m,E){return m==="length"&&g[I].setArrayLength(E),typeof m=="number"&&Tn.set.call(g,m,E),typeof m=="symbol"||isNaN(m)?g[m]=E:Tn.set.call(g,parseInt(m),E),!0},preventExtensions:function(g){return O("Observable arrays cannot be frozen"),!1}};function Ko(g,m,E,N){E===void 0&&(E="ObservableArray@"+w()),N===void 0&&(N=!1);var X,ee,pe,je=new ra(E,m,N);X=je.values,ee=I,pe=je,Object.defineProperty(X,ee,{enumerable:!1,writable:!1,configurable:!0,value:pe});var Ge=new Proxy(je.values,na);if(je.proxy=Ge,g&&g.length){var pt=rt(!0);je.spliceWithArray(0,0,g),wt(pt)}return Ge}var ra=function(){function g(m,E,N){this.owned=N,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new D(m||"ObservableArray@"+w()),this.enhancer=function(X,ee){return E(X,ee,m+"[..]")}}return g.prototype.dehanceValue=function(m){return this.dehancer!==void 0?this.dehancer(m):m},g.prototype.dehanceValues=function(m){return this.dehancer!==void 0&&m.length>0?m.map(this.dehancer):m},g.prototype.intercept=function(m){return fr(this,m)},g.prototype.observe=function(m,E){return E===void 0&&(E=!1),E&&m({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),pr(this,m)},g.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},g.prototype.setArrayLength=function(m){if(typeof m!="number"||m<0)throw new Error("[mobx.array] Out of range: "+m);var E=this.values.length;if(m!==E)if(m>E){for(var N=new Array(m-E),X=0;X<m-E;X++)N[X]=void 0;this.spliceWithArray(E,0,N)}else this.spliceWithArray(m,E-m)},g.prototype.updateArrayLength=function(m,E){if(m!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=E},g.prototype.spliceWithArray=function(m,E,N){var X=this;at(this.atom);var ee=this.values.length;if(m===void 0?m=0:m>ee?m=ee:m<0&&(m=Math.max(0,ee+m)),E=arguments.length===1?ee-m:E==null?0:Math.max(0,Math.min(E,ee-m)),N===void 0&&(N=v),rn(this)){var pe=vt(this,{object:this.proxy,type:"splice",index:m,removedCount:E,added:N});if(!pe)return v;E=pe.removedCount,N=pe.added}N=N.length===0?N:N.map(function(Ge){return X.enhancer(Ge,void 0)});var je=this.spliceItemsIntoValues(m,E,N);return E===0&&N.length===0||this.notifyArraySplice(m,N,je),this.dehanceValues(je)},g.prototype.spliceItemsIntoValues=function(m,E,N){var X;if(N.length<1e4)return(X=this.values).splice.apply(X,xe([m,E],N));var ee=this.values.slice(m,m+E);return this.values=this.values.slice(0,m).concat(N,this.values.slice(m+E)),ee},g.prototype.notifyArrayChildUpdate=function(m,E,N){var X=!this.owned&&!1,ee=_n(this),pe=ee||X?{object:this.proxy,type:"update",index:m,newValue:E,oldValue:N}:null;this.atom.reportChanged(),ee&&Kt(this,pe)},g.prototype.notifyArraySplice=function(m,E,N){var X=!this.owned&&!1,ee=_n(this),pe=ee||X?{object:this.proxy,type:"splice",index:m,removed:N,added:E,removedCount:N.length,addedCount:E.length}:null;this.atom.reportChanged(),ee&&Kt(this,pe)},g}(),Tn={intercept:function(g){return this[I].intercept(g)},observe:function(g,m){return m===void 0&&(m=!1),this[I].observe(g,m)},clear:function(){return this.splice(0)},replace:function(g){var m=this[I];return m.spliceWithArray(0,m.values.length,g)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(g,m){for(var E=[],N=2;N<arguments.length;N++)E[N-2]=arguments[N];var X=this[I];switch(arguments.length){case 0:return[];case 1:return X.spliceWithArray(g);case 2:return X.spliceWithArray(g,m)}return X.spliceWithArray(g,m,E)},spliceWithArray:function(g,m,E){return this[I].spliceWithArray(g,m,E)},push:function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];var E=this[I];return E.spliceWithArray(E.values.length,0,g),E.values.length},pop:function(){return this.splice(Math.max(this[I].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var g=[],m=0;m<arguments.length;m++)g[m]=arguments[m];var E=this[I];return E.spliceWithArray(0,0,g),E.values.length},reverse:function(){var g=this.slice();return g.reverse.apply(g,arguments)},sort:function(g){var m=this.slice();return m.sort.apply(m,arguments)},remove:function(g){var m=this[I],E=m.dehanceValues(m.values).indexOf(g);return E>-1&&(this.splice(E,1),!0)},get:function(g){var m=this[I];if(m&&g<m.values.length)return m.atom.reportObserved(),m.dehanceValue(m.values[g])},set:function(g,m){var E=this[I],N=E.values;if(g<N.length){at(E.atom);var X=N[g];if(rn(E)){var ee=vt(E,{type:"update",object:E.proxy,index:g,newValue:m});if(!ee)return;m=ee.newValue}(m=E.enhancer(m,X))!==X&&(N[g]=m,E.notifyArrayChildUpdate(g,m,X))}else{if(g!==N.length)throw new Error("[mobx.array] Index out of bounds, "+g+" is larger than "+N.length);E.spliceWithArray(g,0,[m])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(g){typeof Array.prototype[g]=="function"&&(Tn[g]=function(){var m=this[I];m.atom.reportObserved();var E=m.dehanceValues(m.values);return E[g].apply(E,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(g){typeof Array.prototype[g]=="function"&&(Tn[g]=function(m,E){var N=this,X=this[I];return X.atom.reportObserved(),X.dehanceValues(X.values)[g](function(ee,pe){return m.call(E,ee,pe,N)},E)})}),["reduce","reduceRight"].forEach(function(g){Tn[g]=function(){var m=this,E=this[I];E.atom.reportObserved();var N=arguments[0];return arguments[0]=function(X,ee,pe){return ee=E.dehanceValue(ee),N(X,ee,pe,m)},E.values[g].apply(E.values,arguments)}});var oa,fo=z("ObservableArrayAdministration",ra);function An(g){return k(g)&&fo(g[I])}var ia,Zu={},qo=function(){function g(m,E,N){if(E===void 0&&(E=Re),N===void 0&&(N="ObservableMap@"+w()),this.enhancer=E,this.name=N,this[oa]=Zu,this._keysAtom=B(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(m)}return g.prototype._has=function(m){return this._data.has(m)},g.prototype.has=function(m){var E=this;if(!Fe.trackingDerivation)return this._has(m);var N=this._hasMap.get(m);if(!N){var X=N=new At(this._has(m),Ke,this.name+"."+q(m)+"?",!1);this._hasMap.set(m,X),Mr(X,function(){return E._hasMap.delete(m)})}return N.get()},g.prototype.set=function(m,E){var N=this._has(m);if(rn(this)){var X=vt(this,{type:N?"update":"add",object:this,newValue:E,name:m});if(!X)return this;E=X.newValue}return N?this._updateValue(m,E):this._addValue(m,E),this},g.prototype.delete=function(m){var E=this;if(at(this._keysAtom),rn(this)&&!(X=vt(this,{type:"delete",object:this,name:m})))return!1;if(this._has(m)){var N=_n(this),X=N?{type:"delete",object:this,oldValue:this._data.get(m).value,name:m}:null;return bn(function(){E._keysAtom.reportChanged(),E._updateHasMapEntry(m,!1),E._data.get(m).setNewValue(void 0),E._data.delete(m)}),N&&Kt(this,X),!0}return!1},g.prototype._updateHasMapEntry=function(m,E){var N=this._hasMap.get(m);N&&N.setNewValue(E)},g.prototype._updateValue=function(m,E){var N=this._data.get(m);if((E=N.prepareNewValue(E))!==Fe.UNCHANGED){var X=_n(this),ee=X?{type:"update",object:this,oldValue:N.value,name:m,newValue:E}:null;N.setNewValue(E),X&&Kt(this,ee)}},g.prototype._addValue=function(m,E){var N=this;at(this._keysAtom),bn(function(){var pe=new At(E,N.enhancer,N.name+"."+q(m),!1);N._data.set(m,pe),E=pe.value,N._updateHasMapEntry(m,!0),N._keysAtom.reportChanged()});var X=_n(this),ee=X?{type:"add",object:this,name:m,newValue:E}:null;X&&Kt(this,ee)},g.prototype.get=function(m){return this.has(m)?this.dehanceValue(this._data.get(m).get()):this.dehanceValue(void 0)},g.prototype.dehanceValue=function(m){return this.dehancer!==void 0?this.dehancer(m):m},g.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},g.prototype.values=function(){var m=this,E=this.keys();return go({next:function(){var N=E.next(),X=N.done,ee=N.value;return{done:X,value:X?void 0:m.get(ee)}}})},g.prototype.entries=function(){var m=this,E=this.keys();return go({next:function(){var N=E.next(),X=N.done,ee=N.value;return{done:X,value:X?void 0:[ee,m.get(ee)]}}})},g.prototype[oa=I,Symbol.iterator]=function(){return this.entries()},g.prototype.forEach=function(m,E){var N,X;try{for(var ee=se(this),pe=ee.next();!pe.done;pe=ee.next()){var je=ye(pe.value,2),Ge=je[0],pt=je[1];m.call(E,pt,Ge,this)}}catch(ot){N={error:ot}}finally{try{pe&&!pe.done&&(X=ee.return)&&X.call(ee)}finally{if(N)throw N.error}}},g.prototype.merge=function(m){var E=this;return It(m)&&(m=m.toJS()),bn(function(){var N=rt(!0);try{A(m)?oe(m).forEach(function(X){return E.set(X,m[X])}):Array.isArray(m)?m.forEach(function(X){var ee=ye(X,2),pe=ee[0],je=ee[1];return E.set(pe,je)}):F(m)?(m.constructor!==Map&&O("Cannot initialize from classes that inherit from Map: "+m.constructor.name),m.forEach(function(X,ee){return E.set(ee,X)})):m!=null&&O("Cannot initialize map from "+m)}finally{wt(N)}}),this},g.prototype.clear=function(){var m=this;bn(function(){ie(function(){var E,N;try{for(var X=se(m.keys()),ee=X.next();!ee.done;ee=X.next()){var pe=ee.value;m.delete(pe)}}catch(je){E={error:je}}finally{try{ee&&!ee.done&&(N=X.return)&&N.call(X)}finally{if(E)throw E.error}}})})},g.prototype.replace=function(m){var E=this;return bn(function(){var N,X,ee,pe,je=function(an){if(F(an)||It(an))return an;if(Array.isArray(an))return new Map(an);if(A(an)){var fa=new Map;for(var Qr in an)fa.set(Qr,an[Qr]);return fa}return O("Cannot convert to map from '"+an+"'")}(m),Ge=new Map,pt=!1;try{for(var ot=se(E._data.keys()),xt=ot.next();!xt.done;xt=ot.next()){var ct=xt.value;if(!je.has(ct))if(E.delete(ct))pt=!0;else{var _t=E._data.get(ct);Ge.set(ct,_t)}}}catch(an){N={error:an}}finally{try{xt&&!xt.done&&(X=ot.return)&&X.call(ot)}finally{if(N)throw N.error}}try{for(var wn=se(je.entries()),kt=wn.next();!kt.done;kt=wn.next()){var on=ye(kt.value,2),Jr=(ct=on[0],_t=on[1],E._data.has(ct));if(E.set(ct,_t),E._data.has(ct)){var Qu=E._data.get(ct);Ge.set(ct,Qu),Jr||(pt=!0)}}}catch(an){ee={error:an}}finally{try{kt&&!kt.done&&(pe=wn.return)&&pe.call(wn)}finally{if(ee)throw ee.error}}if(!pt)if(E._data.size!==Ge.size)E._keysAtom.reportChanged();else for(var ca=E._data.keys(),la=Ge.keys(),mo=ca.next(),ei=la.next();!mo.done;){if(mo.value!==ei.value){E._keysAtom.reportChanged();break}mo=ca.next(),ei=la.next()}E._data=Ge}),this},Object.defineProperty(g.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.toPOJO=function(){var m,E,N={};try{for(var X=se(this),ee=X.next();!ee.done;ee=X.next()){var pe=ye(ee.value,2),je=pe[0],Ge=pe[1];N[typeof je=="symbol"?je:q(je)]=Ge}}catch(pt){m={error:pt}}finally{try{ee&&!ee.done&&(E=X.return)&&E.call(X)}finally{if(m)throw m.error}}return N},g.prototype.toJS=function(){return new Map(this)},g.prototype.toJSON=function(){return this.toPOJO()},g.prototype.toString=function(){var m=this;return this.name+"[{ "+Array.from(this.keys()).map(function(E){return q(E)+": "+m.get(E)}).join(", ")+" }]"},g.prototype.observe=function(m,E){return pr(this,m)},g.prototype.intercept=function(m){return fr(this,m)},g}(),It=z("ObservableMap",qo),Tr={},po=function(){function g(m,E,N){if(E===void 0&&(E=Re),N===void 0&&(N="ObservableSet@"+w()),this.name=N,this[ia]=Tr,this._data=new Set,this._atom=B(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(X,ee){return E(X,ee,N)},m&&this.replace(m)}return g.prototype.dehanceValue=function(m){return this.dehancer!==void 0?this.dehancer(m):m},g.prototype.clear=function(){var m=this;bn(function(){ie(function(){var E,N;try{for(var X=se(m._data.values()),ee=X.next();!ee.done;ee=X.next()){var pe=ee.value;m.delete(pe)}}catch(je){E={error:je}}finally{try{ee&&!ee.done&&(N=X.return)&&N.call(X)}finally{if(E)throw E.error}}})})},g.prototype.forEach=function(m,E){var N,X;try{for(var ee=se(this),pe=ee.next();!pe.done;pe=ee.next()){var je=pe.value;m.call(E,je,je,this)}}catch(Ge){N={error:Ge}}finally{try{pe&&!pe.done&&(X=ee.return)&&X.call(ee)}finally{if(N)throw N.error}}},Object.defineProperty(g.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.add=function(m){var E=this;if(at(this._atom),rn(this)&&!(X=vt(this,{type:"add",object:this,newValue:m})))return this;if(!this.has(m)){bn(function(){E._data.add(E.enhancer(m,void 0)),E._atom.reportChanged()});var N=_n(this),X=N?{type:"add",object:this,newValue:m}:null;N&&Kt(this,X)}return this},g.prototype.delete=function(m){var E=this;if(rn(this)&&!(X=vt(this,{type:"delete",object:this,oldValue:m})))return!1;if(this.has(m)){var N=_n(this),X=N?{type:"delete",object:this,oldValue:m}:null;return bn(function(){E._atom.reportChanged(),E._data.delete(m)}),N&&Kt(this,X),!0}return!1},g.prototype.has=function(m){return this._atom.reportObserved(),this._data.has(this.dehanceValue(m))},g.prototype.entries=function(){var m=0,E=Array.from(this.keys()),N=Array.from(this.values());return go({next:function(){var X=m;return m+=1,X<N.length?{value:[E[X],N[X]],done:!1}:{done:!0}}})},g.prototype.keys=function(){return this.values()},g.prototype.values=function(){this._atom.reportObserved();var m=this,E=0,N=Array.from(this._data.values());return go({next:function(){return E<N.length?{value:m.dehanceValue(N[E++]),done:!1}:{done:!0}}})},g.prototype.replace=function(m){var E=this;return dn(m)&&(m=m.toJS()),bn(function(){var N=rt(!0);try{Array.isArray(m)||Z(m)?(E.clear(),m.forEach(function(X){return E.add(X)})):m!=null&&O("Cannot initialize set from "+m)}finally{wt(N)}}),this},g.prototype.observe=function(m,E){return pr(this,m)},g.prototype.intercept=function(m){return fr(this,m)},g.prototype.toJS=function(){return new Set(this)},g.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},g.prototype[ia=I,Symbol.iterator]=function(){return this.values()},g}(),dn=z("ObservableSet",po),aa=function(){function g(m,E,N,X){E===void 0&&(E=new Map),this.target=m,this.values=E,this.name=N,this.defaultEnhancer=X,this.keysAtom=new D(N+".keys")}return g.prototype.read=function(m){return this.values.get(m).get()},g.prototype.write=function(m,E){var N=this.target,X=this.values.get(m);if(X instanceof Xn)X.set(E);else{if(rn(this)){if(!(pe=vt(this,{type:"update",object:this.proxy||N,name:m,newValue:E})))return;E=pe.newValue}if((E=X.prepareNewValue(E))!==Fe.UNCHANGED){var ee=_n(this),pe=ee?{type:"update",object:this.proxy||N,oldValue:X.value,name:m,newValue:E}:null;X.setNewValue(E),ee&&Kt(this,pe)}}},g.prototype.has=function(m){var E=this.pendingKeys||(this.pendingKeys=new Map),N=E.get(m);if(N)return N.get();var X=!!this.values.get(m);return N=new At(X,Ke,this.name+"."+q(m)+"?",!1),E.set(m,N),N.get()},g.prototype.addObservableProp=function(m,E,N){N===void 0&&(N=this.defaultEnhancer);var X=this.target;if(rn(this)){var ee=vt(this,{object:this.proxy||X,name:m,type:"add",newValue:E});if(!ee)return;E=ee.newValue}var pe=new At(E,N,this.name+"."+q(m),!1);this.values.set(m,pe),E=pe.value,Object.defineProperty(X,m,function(je){return ho[je]||(ho[je]={configurable:!0,enumerable:!0,get:function(){return this[I].read(je)},set:function(Ge){this[I].write(je,Ge)}})}(m)),this.notifyPropertyAddition(m,E)},g.prototype.addComputedProp=function(m,E,N){var X,ee,pe,je=this.target;N.name=N.name||this.name+"."+q(E),this.values.set(E,new Xn(N)),(m===je||(X=m,ee=E,!(pe=Object.getOwnPropertyDescriptor(X,ee))||pe.configurable!==!1&&pe.writable!==!1))&&Object.defineProperty(m,E,function(Ge){return yo[Ge]||(yo[Ge]={configurable:Fe.computedConfigurable,enumerable:!1,get:function(){return vo(this).read(Ge)},set:function(pt){vo(this).write(Ge,pt)}})}(E))},g.prototype.remove=function(m){if(this.values.has(m)){var E=this.target;if(rn(this)&&!(Ge=vt(this,{object:this.proxy||E,name:m,type:"remove"})))return;try{gn();var N=_n(this),X=!1,ee=this.values.get(m),pe=ee&&ee.get();if(ee&&ee.set(void 0),this.keysAtom.reportChanged(),this.values.delete(m),this.pendingKeys){var je=this.pendingKeys.get(m);je&&je.set(!1)}delete this.target[m];var Ge=N?{type:"remove",object:this.proxy||E,oldValue:pe,name:m}:null;N&&Kt(this,Ge)}finally{mn()}}},g.prototype.illegalAccess=function(m,E){},g.prototype.observe=function(m,E){return pr(this,m)},g.prototype.intercept=function(m){return fr(this,m)},g.prototype.notifyPropertyAddition=function(m,E){var N=_n(this),X=N?{type:"add",object:this.proxy||this.target,name:m,newValue:E}:null;if(N&&Kt(this,X),this.pendingKeys){var ee=this.pendingKeys.get(m);ee&&ee.set(!0)}this.keysAtom.reportChanged()},g.prototype.getKeys=function(){var m,E;this.keysAtom.reportObserved();var N=[];try{for(var X=se(this.values),ee=X.next();!ee.done;ee=X.next()){var pe=ye(ee.value,2),je=pe[0];pe[1]instanceof At&&N.push(je)}}catch(Ge){m={error:Ge}}finally{try{ee&&!ee.done&&(E=X.return)&&E.call(X)}finally{if(m)throw m.error}}return N},g}();function Zr(g,m,E){if(m===void 0&&(m=""),E===void 0&&(E=Re),Object.prototype.hasOwnProperty.call(g,I))return g[I];A(g)||(m=(g.constructor.name||"ObservableObject")+"@"+w()),m||(m="ObservableObject@"+w());var N=new aa(g,new Map,q(m),E);return C(g,I,N),N}var ho=Object.create(null),yo=Object.create(null);function vo(g){var m=g[I];return m||(Ie(g),g[I])}var ua=z("ObservableObjectAdministration",aa);function hn(g){return!!k(g)&&(Ie(g),ua(g[I]))}function On(g,m){if(typeof g=="object"&&g!==null){if(An(g))return m!==void 0&&O(!1),g[I].atom;if(dn(g))return g[I];if(It(g)){var E=g;return m===void 0?E._keysAtom:((N=E._data.get(m)||E._hasMap.get(m))||O(!1),N)}var N;if(Ie(g),m&&!g[I]&&g[m],hn(g))return m?((N=g[I].values.get(m))||O(!1),N):O(!1);if(G(g)||Un(g)||so(g))return g}else if(typeof g=="function"&&so(g[I]))return g[I];return O(!1)}function Ar(g,m){return g||O("Expecting some object"),m!==void 0?Ar(On(g,m)):G(g)||Un(g)||so(g)||It(g)||dn(g)?g:(Ie(g),g[I]?g[I]:void O(!1))}var Zo=Object.prototype.toString;function Jo(g,m,E){return E===void 0&&(E=-1),Qo(g,m,E)}function Qo(g,m,E,N,X){if(g===m)return g!==0||1/g==1/m;if(g==null||m==null)return!1;if(g!=g)return m!=m;var ee=typeof g;if(ee!=="function"&&ee!=="object"&&typeof m!="object")return!1;var pe=Zo.call(g);if(pe!==Zo.call(m))return!1;switch(pe){case"[object RegExp]":case"[object String]":return""+g==""+m;case"[object Number]":return+g!=+g?+m!=+m:+g==0?1/+g==1/m:+g==+m;case"[object Date]":case"[object Boolean]":return+g==+m;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(g)===Symbol.valueOf.call(m);case"[object Map]":case"[object Set]":E>=0&&E++}g=sa(g),m=sa(m);var je=pe==="[object Array]";if(!je){if(typeof g!="object"||typeof m!="object")return!1;var Ge=g.constructor,pt=m.constructor;if(Ge!==pt&&!(typeof Ge=="function"&&Ge instanceof Ge&&typeof pt=="function"&&pt instanceof pt)&&"constructor"in g&&"constructor"in m)return!1}if(E===0)return!1;E<0&&(E=-1),X=X||[];for(var ot=(N=N||[]).length;ot--;)if(N[ot]===g)return X[ot]===m;if(N.push(g),X.push(m),je){if((ot=g.length)!==m.length)return!1;for(;ot--;)if(!Qo(g[ot],m[ot],E-1,N,X))return!1}else{var xt=Object.keys(g),ct=void 0;if(ot=xt.length,Object.keys(m).length!==ot)return!1;for(;ot--;)if(!Ju(m,ct=xt[ot])||!Qo(g[ct],m[ct],E-1,N,X))return!1}return N.pop(),X.pop(),!0}function sa(g){return An(g)?g.slice():F(g)||It(g)||Z(g)||dn(g)?Array.from(g.entries()):g}function Ju(g,m){return Object.prototype.hasOwnProperty.call(g,m)}function go(g){return g[Symbol.iterator]=dr,g}function dr(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Gi,extras:{getDebugName:function(g,m){return(m!==void 0?On(g,m):hn(g)||It(g)||dn(g)?Ar(g):On(g)).name}},$mobx:I})}).call(this,o(155),o(82))},function(s,l,o){var f=o(116),c=o(44),v=o(179);f||c(Object.prototype,"toString",v,{unsafe:!0})},function(s,l,o){var f=o(40),c=o(83),v=o(70),b=o(56),w=o(111),O="Array Iterator",S=b.set,P=b.getterFor(O);s.exports=w(Array,"Array",function(j,k){S(this,{type:O,target:f(j),index:0,kind:k})},function(){var j=P(this),k=j.target,A=j.kind,C=j.index++;return!k||C>=k.length?(j.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:C,done:!1}:A=="values"?{value:k[C],done:!1}:{value:[C,k[C]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(s,l,o){var f=o(7),c=o(147),v=o(148),b=o(3),w=o(57),O=o(27),S=O("iterator"),P=O("toStringTag"),j=b.values,k=function(C,z){if(C){if(C[S]!==j)try{w(C,S,j)}catch{C[S]=j}if(C[P]||w(C,P,z),c[z]){for(var F in b)if(C[F]!==b[F])try{w(C,F,b[F])}catch{C[F]=b[F]}}}};for(var A in c)k(f[A]&&f[A].prototype,A);k(v,"DOMTokenList")},function(s,l,o){var f=o(17),c=o(7),v=o(46),b=o(76),w=o(35),O=o(15),S=o(64),P=o(36),j=o(109),k=o(19),A=o(34),C=o(99),z=o(28),F=o(33),Z=o(58),oe=o(88),q=o(32),R=o(38),Y=o(40),I=o(87),D=o(41),G=o(71),B=o(54),H=o(66),Q=o(72),le=o(139),se=o(112),ye=o(51),xe=o(37),ve=o(93),ae=o(101),he=o(44),ge=o(84),Ee=o(91),Ie=o(69),Ye=o(85),Me=o(27),Re=o(149),Ke=o(150),J=o(73),K=o(56),ue=o(74).forEach,_e=Ee("hidden"),ke="Symbol",we=Me("toPrimitive"),qe=K.set,nt=K.getterFor(ke),Ze=Object.prototype,Ve=c.Symbol,me=Ve&&Ve.prototype,He=c.TypeError,te=c.QObject,ze=v("JSON","stringify"),ut=ye.f,gt=xe.f,it=le.f,ht=ve.f,St=O([].push),Pt=ge("symbols"),at=ge("op-symbols"),Dt=ge("string-to-symbol-registry"),U=ge("symbol-to-string-registry"),ie=ge("wks"),W=!te||!te.prototype||!te.prototype.findChild,ce=P&&k(function(){return B(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(Be,We,et){var rt=ut(Ze,We);rt&&delete Ze[We],gt(Be,We,et),rt&&Be!==Ze&&gt(Ze,We,rt)}:gt,Ae=function(Be,We){var et=Pt[Be]=B(me);return qe(et,{type:ke,tag:Be,description:We}),P||(et.description=We),et},Ne=function(Be,We,et){Be===Ze&&Ne(at,We,et),q(Be);var rt=I(We);return q(et),A(Pt,rt)?(et.enumerable?(A(Be,_e)&&Be[_e][rt]&&(Be[_e][rt]=!1),et=B(et,{enumerable:G(0,!1)})):(A(Be,_e)||gt(Be,_e,G(1,{})),Be[_e][rt]=!0),ce(Be,rt,et)):gt(Be,rt,et)},Xe=function(Be,We){q(Be);var et=Y(We),rt=H(et).concat(Ct(et));return ue(rt,function(wt){P&&!w(lt,et,wt)||Ne(Be,wt,et[wt])}),Be},lt=function(Be){var We=I(Be),et=w(ht,this,We);return!(this===Ze&&A(Pt,We)&&!A(at,We))&&(!(et||!A(this,We)||!A(Pt,We)||A(this,_e)&&this[_e][We])||et)},Ht=function(Be,We){var et=Y(Be),rt=I(We);if(et!==Ze||!A(Pt,rt)||A(at,rt)){var wt=ut(et,rt);return!wt||!A(Pt,rt)||A(et,_e)&&et[_e][rt]||(wt.enumerable=!0),wt}},$t=function(Be){var We=it(Y(Be)),et=[];return ue(We,function(rt){A(Pt,rt)||A(Ie,rt)||St(et,rt)}),et},Ct=function(Be){var We=Be===Ze,et=it(We?at:Y(Be)),rt=[];return ue(et,function(wt){!A(Pt,wt)||We&&!A(Ze,wt)||St(rt,Pt[wt])}),rt};if(j||(Ve=function(){if(Z(me,this))throw He("Symbol is not a constructor");var Be=arguments.length&&arguments[0]!==void 0?D(arguments[0]):void 0,We=Ye(Be),et=function(rt){this===Ze&&w(et,at,rt),A(this,_e)&&A(this[_e],We)&&(this[_e][We]=!1),ce(this,We,G(1,rt))};return P&&W&&ce(Ze,We,{configurable:!0,set:et}),Ae(We,Be)},he(me=Ve.prototype,"toString",function(){return nt(this).tag}),he(Ve,"withoutSetter",function(Be){return Ae(Ye(Be),Be)}),ve.f=lt,xe.f=Ne,ye.f=Ht,Q.f=le.f=$t,se.f=Ct,Re.f=function(Be){return Ae(Me(Be),Be)},P&&(gt(me,"description",{configurable:!0,get:function(){return nt(this).description}}),S||he(Ze,"propertyIsEnumerable",lt,{unsafe:!0}))),f({global:!0,wrap:!0,forced:!j,sham:!j},{Symbol:Ve}),ue(H(ie),function(Be){Ke(Be)}),f({target:ke,stat:!0,forced:!j},{for:function(Be){var We=D(Be);if(A(Dt,We))return Dt[We];var et=Ve(We);return Dt[We]=et,U[et]=We,et},keyFor:function(Be){if(!oe(Be))throw He(Be+" is not a symbol");if(A(U,Be))return U[Be]},useSetter:function(){W=!0},useSimple:function(){W=!1}}),f({target:"Object",stat:!0,forced:!j,sham:!P},{create:function(Be,We){return We===void 0?B(Be):Xe(B(Be),We)},defineProperty:Ne,defineProperties:Xe,getOwnPropertyDescriptor:Ht}),f({target:"Object",stat:!0,forced:!j},{getOwnPropertyNames:$t,getOwnPropertySymbols:Ct}),f({target:"Object",stat:!0,forced:k(function(){se.f(1)})},{getOwnPropertySymbols:function(Be){return se.f(R(Be))}}),ze&&f({target:"JSON",stat:!0,forced:!j||k(function(){var Be=Ve();return ze([Be])!="[null]"||ze({a:Be})!="{}"||ze(Object(Be))!="{}"})},{stringify:function(Be,We,et){var rt=ae(arguments),wt=We;if((F(We)||Be!==void 0)&&!oe(Be))return C(We)||(We=function(At,sr){if(z(wt)&&(sr=w(wt,this,At,sr)),!oe(sr))return sr}),rt[1]=We,b(ze,null,rt)}}),!me[we]){var Rt=me.valueOf;he(me,we,function(Be){return w(Rt,this)})}J(Ve,ke),Ie[_e]=!0},function(s,l,o){var f=o(146).charAt,c=o(41),v=o(56),b=o(111),w="String Iterator",O=v.set,S=v.getterFor(w);b(String,"String",function(P){O(this,{type:w,string:c(P),index:0})},function(){var P,j=S(this),k=j.string,A=j.index;return A>=k.length?{value:void 0,done:!0}:(P=f(k,A),j.index+=P.length,{value:P,done:!1})})},function(s,l,o){(function(f){var c=function(v){return v&&v.Math==Math&&v};s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof f=="object"&&f)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(s,l,o){var f=o(17),c=o(36),v=o(7),b=o(15),w=o(34),O=o(28),S=o(58),P=o(41),j=o(37).f,k=o(134),A=v.Symbol,C=A&&A.prototype;if(c&&O(A)&&(!("description"in C)||A().description!==void 0)){var z={},F=function(){var D=arguments.length<1||arguments[0]===void 0?void 0:P(arguments[0]),G=S(C,this)?new A(D):D===void 0?A():A(D);return D===""&&(z[G]=!0),G};k(F,A),F.prototype=C,C.constructor=F;var Z=String(A("test"))=="Symbol(test)",oe=b(C.toString),q=b(C.valueOf),R=/^Symbol\((.*)\)[^)]+$/,Y=b("".replace),I=b("".slice);j(C,"description",{configurable:!0,get:function(){var D=q(this),G=oe(D);if(w(z,D))return"";var B=Z?I(G,7,-1):Y(G,R,"$1");return B===""?void 0:B}}),f({global:!0,forced:!0},{Symbol:F})}},function(s,l,o){o(150)("iterator")},function(s,l,o){o.d(l,"a",function(){return b.a}),o.d(l,"c",function(){return b.e}),o.d(l,"h",function(){return R}),o.d(l,"i",function(){return Z}),o.d(l,"j",function(){return z}),o.d(l,"b",function(){return ye}),o.d(l,"e",function(){return he}),o.d(l,"f",function(){return xe}),o.d(l,"g",function(){return Pt});var f,c,v,b=o(0),w=0,O=[],S=b.i.__b,P=b.i.__r,j=b.i.diffed,k=b.i.__c,A=b.i.unmount;function C(U,ie){b.i.__h&&b.i.__h(c,U,w||ie),w=0;var W=c.__H||(c.__H={__:[],__h:[]});return U>=W.__.length&&W.__.push({}),W.__[U]}function z(U){return w=1,F(Q,U)}function F(U,ie,W){var ce=C(f++,2);return ce.t=U,ce.__c||(ce.__=[W?W(ie):Q(void 0,ie),function(Ae){var Ne=ce.t(ce.__[0],Ae);ce.__[0]!==Ne&&(ce.__=[Ne,ce.__[1]],ce.__c.setState({}))}],ce.__c=c),ce.__}function Z(U,ie){var W=C(f++,3);!b.i.__s&&H(W.__H,ie)&&(W.__=U,W.__H=ie,c.__H.__h.push(W))}function oe(U,ie){var W=C(f++,4);!b.i.__s&&H(W.__H,ie)&&(W.__=U,W.__H=ie,c.__h.push(W))}function q(U,ie){var W=C(f++,7);return H(W.__H,ie)&&(W.__=U(),W.__H=ie,W.__h=U),W.__}function R(U,ie){return w=8,q(function(){return U},ie)}function Y(){var U;for(O.sort(function(ie,W){return ie.__v.__b-W.__v.__b});U=O.pop();)if(U.__P)try{U.__H.__h.forEach(G),U.__H.__h.forEach(B),U.__H.__h=[]}catch(ie){U.__H.__h=[],b.i.__e(ie,U.__v)}}b.i.__b=function(U){c=null,S&&S(U)},b.i.__r=function(U){P&&P(U),f=0;var ie=(c=U.__c).__H;ie&&(ie.__h.forEach(G),ie.__h.forEach(B),ie.__h=[])},b.i.diffed=function(U){j&&j(U);var ie=U.__c;ie&&ie.__H&&ie.__H.__h.length&&(O.push(ie)!==1&&v===b.i.requestAnimationFrame||((v=b.i.requestAnimationFrame)||D)(Y)),c=null},b.i.__c=function(U,ie){ie.some(function(W){try{W.__h.forEach(G),W.__h=W.__h.filter(function(ce){return!ce.__||B(ce)})}catch(ce){ie.some(function(Ae){Ae.__h&&(Ae.__h=[])}),ie=[],b.i.__e(ce,W.__v)}}),k&&k(U,ie)},b.i.unmount=function(U){A&&A(U);var ie,W=U.__c;W&&W.__H&&(W.__H.__.forEach(function(ce){try{G(ce)}catch(Ae){ie=Ae}}),ie&&b.i.__e(ie,W.__v))};var I=typeof requestAnimationFrame=="function";function D(U){var ie,W=function(){clearTimeout(ce),I&&cancelAnimationFrame(ie),setTimeout(U)},ce=setTimeout(W,100);I&&(ie=requestAnimationFrame(W))}function G(U){var ie=c,W=U.__c;typeof W=="function"&&(U.__c=void 0,W()),c=ie}function B(U){var ie=c;U.__c=U.__(),c=ie}function H(U,ie){return!U||U.length!==ie.length||ie.some(function(W,ce){return W!==U[ce]})}function Q(U,ie){return typeof ie=="function"?ie(U):ie}function le(U,ie){for(var W in ie)U[W]=ie[W];return U}function se(U,ie){for(var W in U)if(W!=="__source"&&!(W in ie))return!0;for(var ce in ie)if(ce!=="__source"&&U[ce]!==ie[ce])return!0;return!1}function ye(U){this.props=U}function xe(U,ie){function W(Ae){var Ne=this.props.ref,Xe=Ne==Ae.ref;return!Xe&&Ne&&(Ne.call?Ne(null):Ne.current=null),ie?!ie(this.props,Ae)||!Xe:se(this.props,Ae)}function ce(Ae){return this.shouldComponentUpdate=W,Object(b.e)(U,Ae)}return ce.displayName="Memo("+(U.displayName||U.name)+")",ce.prototype.isReactComponent=!0,ce.__f=!0,ce}(ye.prototype=new b.a).isPureReactComponent=!0,ye.prototype.shouldComponentUpdate=function(U,ie){return se(this.props,U)||se(this.state,ie)};var ve=b.i.__b;b.i.__b=function(U){U.type&&U.type.__f&&U.ref&&(U.props.ref=U.ref,U.ref=null),ve&&ve(U)};var ae=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(U){function ie(W,ce){var Ae=le({},W);return delete Ae.ref,U(Ae,!(ce=W.ref||ce)||typeof ce=="object"&&!("current"in ce)?null:ce)}return ie.$$typeof=ae,ie.render=ie,ie.prototype.isReactComponent=ie.__f=!0,ie.displayName="ForwardRef("+(U.displayName||U.name)+")",ie}var ge=function(U,ie){return U==null?null:Object(b.k)(Object(b.k)(U).map(ie))},Ee={map:ge,forEach:ge,count:function(U){return U?Object(b.k)(U).length:0},only:function(U){var ie=Object(b.k)(U);if(ie.length!==1)throw"Children.only";return ie[0]},toArray:b.k},Ie=b.i.__e;b.i.__e=function(U,ie,W){if(U.then){for(var ce,Ae=ie;Ae=Ae.__;)if((ce=Ae.__c)&&ce.__c)return ie.__e==null&&(ie.__e=W.__e,ie.__k=W.__k),ce.__c(U,ie)}Ie(U,ie,W)};var Ye=b.i.unmount;function Me(U,ie,W){return U&&(U.__c&&U.__c.__H&&(U.__c.__H.__.forEach(function(ce){typeof ce.__c=="function"&&ce.__c()}),U.__c.__H=null),(U=le({},U)).__c!=null&&(U.__c.__P===W&&(U.__c.__P=ie),U.__c=null),U.__k=U.__k&&U.__k.map(function(ce){return Me(ce,ie,W)})),U}function Re(U,ie,W){return U&&(U.__v=null,U.__k=U.__k&&U.__k.map(function(ce){return Re(ce,ie,W)}),U.__c&&U.__c.__P===ie&&(U.__e&&W.insertBefore(U.__e,U.__d),U.__c.__e=!0,U.__c.__P=W)),U}function Ke(){this.__u=0,this.t=null,this.__b=null}function J(U){var ie=U.__.__c;return ie&&ie.__e&&ie.__e(U)}function K(){this.u=null,this.o=null}b.i.unmount=function(U){var ie=U.__c;ie&&ie.__R&&ie.__R(),ie&&U.__h===!0&&(U.type=null),Ye&&Ye(U)},(Ke.prototype=new b.a).__c=function(U,ie){var W=ie.__c,ce=this;ce.t==null&&(ce.t=[]),ce.t.push(W);var Ae=J(ce.__v),Ne=!1,Xe=function(){Ne||(Ne=!0,W.__R=null,Ae?Ae(lt):lt())};W.__R=Xe;var lt=function(){if(!--ce.__u){if(ce.state.__e){var $t=ce.state.__e;ce.__v.__k[0]=Re($t,$t.__c.__P,$t.__c.__O)}var Ct;for(ce.setState({__e:ce.__b=null});Ct=ce.t.pop();)Ct.forceUpdate()}},Ht=ie.__h===!0;ce.__u++||Ht||ce.setState({__e:ce.__b=ce.__v.__k[0]}),U.then(Xe,Xe)},Ke.prototype.componentWillUnmount=function(){this.t=[]},Ke.prototype.render=function(U,ie){if(this.__b){if(this.__v.__k){var W=document.createElement("div"),ce=this.__v.__k[0].__c;this.__v.__k[0]=Me(this.__b,W,ce.__O=ce.__P)}this.__b=null}var Ae=ie.__e&&Object(b.e)(b.b,null,U.fallback);return Ae&&(Ae.__h=null),[Object(b.e)(b.b,null,ie.__e?null:U.children),Ae]};var ue=function(U,ie,W){if(++W[1]===W[0]&&U.o.delete(ie),U.props.revealOrder&&(U.props.revealOrder[0]!=="t"||!U.o.size))for(W=U.u;W;){for(;W.length>3;)W.pop()();if(W[1]<W[0])break;U.u=W=W[2]}};function _e(U){return this.getChildContext=function(){return U.context},U.children}function ke(U){var ie=this,W=U.i;ie.componentWillUnmount=function(){Object(b.j)(null,ie.l),ie.l=null,ie.i=null},ie.i&&ie.i!==W&&ie.componentWillUnmount(),U.__v?(ie.l||(ie.i=W,ie.l={nodeType:1,parentNode:W,childNodes:[],appendChild:function(ce){this.childNodes.push(ce),ie.i.appendChild(ce)},insertBefore:function(ce,Ae){this.childNodes.push(ce),ie.i.appendChild(ce)},removeChild:function(ce){this.childNodes.splice(this.childNodes.indexOf(ce)>>>1,1),ie.i.removeChild(ce)}}),Object(b.j)(Object(b.e)(_e,{context:ie.context},U.__v),ie.l)):ie.l&&ie.componentWillUnmount()}(K.prototype=new b.a).__e=function(U){var ie=this,W=J(ie.__v),ce=ie.o.get(U);return ce[0]++,function(Ae){var Ne=function(){ie.props.revealOrder?(ce.push(Ae),ue(ie,U,ce)):Ae()};W?W(Ne):Ne()}},K.prototype.render=function(U){this.u=null,this.o=new Map;var ie=Object(b.k)(U.children);U.revealOrder&&U.revealOrder[0]==="b"&&ie.reverse();for(var W=ie.length;W--;)this.o.set(ie[W],this.u=[1,0,this.u]);return U.children},K.prototype.componentDidUpdate=K.prototype.componentDidMount=function(){var U=this;this.o.forEach(function(ie,W){ue(U,W,ie)})};var we=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nt=typeof document<"u",Ze=function(U){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(U)};b.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(U){Object.defineProperty(b.a.prototype,U,{configurable:!0,get:function(){return this["UNSAFE_"+U]},set:function(ie){Object.defineProperty(this,U,{configurable:!0,writable:!0,value:ie})}})});var Ve=b.i.event;function me(){}function He(){return this.cancelBubble}function te(){return this.defaultPrevented}b.i.event=function(U){return Ve&&(U=Ve(U)),U.persist=me,U.isPropagationStopped=He,U.isDefaultPrevented=te,U.nativeEvent=U};var ze,ut={configurable:!0,get:function(){return this.class}},gt=b.i.vnode;b.i.vnode=function(U){var ie=U.type,W=U.props,ce=W;if(typeof ie=="string"){var Ae=ie.indexOf("-")===-1;for(var Ne in ce={},W){var Xe=W[Ne];nt&&Ne==="children"&&ie==="noscript"||Ne==="value"&&"defaultValue"in W&&Xe==null||(Ne==="defaultValue"&&"value"in W&&W.value==null?Ne="value":Ne==="download"&&Xe===!0?Xe="":/ondoubleclick/i.test(Ne)?Ne="ondblclick":/^onchange(textarea|input)/i.test(Ne+ie)&&!Ze(W.type)?Ne="oninput":/^onfocus$/i.test(Ne)?Ne="onfocusin":/^onblur$/i.test(Ne)?Ne="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Ne)?Ne=Ne.toLowerCase():Ae&&qe.test(Ne)?Ne=Ne.replace(/[A-Z0-9]/,"-$&").toLowerCase():Xe===null&&(Xe=void 0),ce[Ne]=Xe)}ie=="select"&&ce.multiple&&Array.isArray(ce.value)&&(ce.value=Object(b.k)(W.children).forEach(function(lt){lt.props.selected=ce.value.indexOf(lt.props.value)!=-1})),ie=="select"&&ce.defaultValue!=null&&(ce.value=Object(b.k)(W.children).forEach(function(lt){lt.props.selected=ce.multiple?ce.defaultValue.indexOf(lt.props.value)!=-1:ce.defaultValue==lt.props.value})),U.props=ce,W.class!=W.className&&(ut.enumerable="className"in W,W.className!=null&&(ce.class=W.className),Object.defineProperty(ce,"className",ut))}U.$$typeof=we,gt&&gt(U)};var it=b.i.__r;b.i.__r=function(U){it&&it(U),ze=U.__c};var ht={ReactCurrentDispatcher:{current:{readContext:function(U){return ze.__n[U.__c].props.value}}}};function St(U){return!!U&&U.$$typeof===we}var Pt=function(U,ie){return U(ie)},at=b.b,Dt={useState:z,useReducer:F,useEffect:Z,useLayoutEffect:oe,useRef:function(U){return w=5,q(function(){return{current:U}},[])},useImperativeHandle:function(U,ie,W){w=6,oe(function(){typeof U=="function"?U(ie()):U&&(U.current=ie())},W==null?W:W.concat(U))},useMemo:q,useCallback:R,useContext:function(U){var ie=c.context[U.__c],W=C(f++,9);return W.c=U,ie?(W.__==null&&(W.__=!0,ie.sub(c)),ie.props.value):U.__},useDebugValue:function(U,ie){b.i.useDebugValue&&b.i.useDebugValue(ie?ie(U):U)},version:"17.0.2",Children:Ee,render:function(U,ie,W){return ie.__k==null&&(ie.textContent=""),Object(b.j)(U,ie),typeof W=="function"&&W(),U?U.__c:null},hydrate:function(U,ie,W){return Object(b.h)(U,ie),typeof W=="function"&&W(),U?U.__c:null},unmountComponentAtNode:function(U){return!!U.__k&&(Object(b.j)(null,U),!0)},createPortal:function(U,ie){return Object(b.e)(ke,{__v:U,i:ie})},createElement:b.e,createContext:b.d,createFactory:function(U){return b.e.bind(null,U)},cloneElement:function(U){return St(U)?b.c.apply(null,arguments):U},createRef:b.f,Fragment:b.b,isValidElement:St,findDOMNode:function(U){return U&&(U.base||U.nodeType===1&&U)||null},Component:b.a,PureComponent:ye,memo:xe,forwardRef:he,flushSync:function(U,ie){return U(ie)},unstable_batchedUpdates:Pt,StrictMode:at,Suspense:Ke,SuspenseList:K,lazy:function(U){var ie,W,ce;function Ae(Ne){if(ie||(ie=U()).then(function(Xe){W=Xe.default||Xe},function(Xe){ce=Xe}),ce)throw ce;if(!W)throw ie;return Object(b.e)(W,Ne)}return Ae.displayName="Lazy",Ae.__f=!0,Ae},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ht};l.d=Dt},function(s,l,o){var f=o(7),c=o(147),v=o(148),b=o(180),w=o(57),O=function(P){if(P&&P.forEach!==b)try{w(P,"forEach",b)}catch{P.forEach=b}};for(var S in c)c[S]&&O(f[S]&&f[S].prototype);O(v)},function(s,l,o){o(17)({target:"Object",stat:!0},{setPrototypeOf:o(97)})},function(s,l,o){var f=o(17),c=o(19),v=o(38),b=o(96),w=o(137);f({target:"Object",stat:!0,forced:c(function(){b(1)}),sham:!w},{getPrototypeOf:function(O){return b(v(O))}})},function(s,l,o){var f=o(17),c=o(46),v=o(76),b=o(200),w=o(157),O=o(32),S=o(33),P=o(54),j=o(19),k=c("Reflect","construct"),A=Object.prototype,C=[].push,z=j(function(){function oe(){}return!(k(function(){},[],oe)instanceof oe)}),F=!j(function(){k(function(){})}),Z=z||F;f({target:"Reflect",stat:!0,forced:Z,sham:Z},{construct:function(oe,q){w(oe),O(q);var R=arguments.length<3?oe:w(arguments[2]);if(F&&!z)return k(oe,q,R);if(oe==R){switch(q.length){case 0:return new oe;case 1:return new oe(q[0]);case 2:return new oe(q[0],q[1]);case 3:return new oe(q[0],q[1],q[2]);case 4:return new oe(q[0],q[1],q[2],q[3])}var Y=[null];return v(C,Y,q),new(v(b,oe,Y))}var I=R.prototype,D=P(S(I)?I:A),G=v(oe,D,q);return S(G)?G:D}})},function(s,l){var o=Function.prototype,f=o.bind,c=o.call,v=f&&f.bind(c);s.exports=f?function(b){return b&&v(c,b)}:function(b){return b&&function(){return c.apply(b,arguments)}}},function(s,l,o){var f=o(17),c=o(7),v=o(99),b=o(100),w=o(33),O=o(67),S=o(43),P=o(40),j=o(61),k=o(27),A=o(75),C=o(101),z=A("slice"),F=k("species"),Z=c.Array,oe=Math.max;f({target:"Array",proto:!0,forced:!z},{slice:function(q,R){var Y,I,D,G=P(this),B=S(G),H=O(q,B),Q=O(R===void 0?B:R,B);if(v(G)&&(Y=G.constructor,(b(Y)&&(Y===Z||v(Y.prototype))||w(Y)&&(Y=Y[F])===null)&&(Y=void 0),Y===Z||Y===void 0))return C(G,H,Q);for(I=new(Y===void 0?Z:Y)(oe(Q-H,0)),D=0;H<Q;H++,D++)H in G&&j(I,D,G[H]);return I.length=D,I}})},function(s,l,o){var f=o(7),c=o(51).f,v=o(57),b=o(44),w=o(108),O=o(134),S=o(95);s.exports=function(P,j){var k,A,C,z,F,Z=P.target,oe=P.global,q=P.stat;if(k=oe?f:q?f[Z]||w(Z,{}):(f[Z]||{}).prototype)for(A in j){if(z=j[A],C=P.noTargetGet?(F=c(k,A))&&F.value:k[A],!S(oe?A:Z+(q?".":"#")+A,P.forced)&&C!==void 0){if(typeof z==typeof C)continue;O(z,C)}(P.sham||C&&C.sham)&&v(z,"sham",!0),b(k,A,z,P)}}},function(s,l,o){var f=o(17),c=o(102);f({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(s,l){s.exports=function(o){try{return!!o()}catch{return!0}}},function(s,l,o){var f=o(17),c=o(38),v=o(66);f({target:"Object",stat:!0,forced:o(19)(function(){v(1)})},{keys:function(b){return v(c(b))}})},function(s,l,o){var f=o(17),c=o(19),v=o(40),b=o(51).f,w=o(36),O=c(function(){b(1)});f({target:"Object",stat:!0,forced:!w||O,sham:!w},{getOwnPropertyDescriptor:function(S,P){return b(v(S),P)}})},function(s,l,o){var f=o(36),c=o(94).EXISTS,v=o(15),b=o(37).f,w=Function.prototype,O=v(w.toString),S=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,P=v(S.exec);f&&!c&&b(w,"name",{configurable:!0,get:function(){try{return P(S,O(this))[1]}catch{return""}}})},function(s,l,o){var f=o(17),c=o(74).filter;f({target:"Array",proto:!0,forced:!o(75)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(s,l,o){var f=o(17),c=o(183);f({target:"Array",stat:!0,forced:!o(118)(function(v){Array.from(v)})},{from:c})},function(s,l,o){var f=o(17),c=o(36),v=o(135),b=o(40),w=o(51),O=o(61);f({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(S){for(var P,j,k=b(S),A=w.f,C=v(k),z={},F=0;C.length>F;)(j=A(k,P=C[F++]))!==void 0&&O(z,P,j);return z}})},,function(s,l,o){var f=o(7),c=o(84),v=o(34),b=o(85),w=o(109),O=o(128),S=c("wks"),P=f.Symbol,j=P&&P.for,k=O?P:P&&P.withoutSetter||b;s.exports=function(A){if(!v(S,A)||!w&&typeof S[A]!="string"){var C="Symbol."+A;w&&v(P,A)?S[A]=P[A]:S[A]=O&&j?j(C):k(C)}return S[A]}},function(s,l){s.exports=function(o){return typeof o=="function"}},function(s,l,o){var f=o(17),c=o(7),v=o(19),b=o(99),w=o(33),O=o(38),S=o(43),P=o(61),j=o(119),k=o(75),A=o(27),C=o(65),z=A("isConcatSpreadable"),F=9007199254740991,Z="Maximum allowed index exceeded",oe=c.TypeError,q=C>=51||!v(function(){var I=[];return I[z]=!1,I.concat()[0]!==I}),R=k("concat"),Y=function(I){if(!w(I))return!1;var D=I[z];return D!==void 0?!!D:b(I)};f({target:"Array",proto:!0,forced:!q||!R},{concat:function(I){var D,G,B,H,Q,le=O(this),se=j(le,0),ye=0;for(D=-1,B=arguments.length;D<B;D++)if(Y(Q=D===-1?le:arguments[D])){if(ye+(H=S(Q))>F)throw oe(Z);for(G=0;G<H;G++,ye++)G in Q&&P(se,ye,Q[G])}else{if(ye>=F)throw oe(Z);P(se,ye++,Q)}return se.length=ye,se}})},function(s,l,o){var f=o(17),c=o(199);f({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(s,l,o){var f=o(105),c=typeof self=="object"&&self&&self.Object===Object&&self,v=f.a||c||Function("return this")();l.a=v},function(s,l,o){var f=o(7),c=o(33),v=f.String,b=f.TypeError;s.exports=function(w){if(c(w))return w;throw b(v(w)+" is not an object")}},function(s,l,o){var f=o(28);s.exports=function(c){return typeof c=="object"?c!==null:f(c)}},function(s,l,o){var f=o(15),c=o(38),v=f({}.hasOwnProperty);s.exports=Object.hasOwn||function(b,w){return v(c(b),w)}},function(s,l){var o=Function.prototype.call;s.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(s,l,o){var f=o(19);s.exports=!f(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(s,l,o){var f=o(7),c=o(36),v=o(129),b=o(32),w=o(87),O=f.TypeError,S=Object.defineProperty;l.f=c?S:function(P,j,k){if(b(P),j=w(j),b(k),v)try{return S(P,j,k)}catch{}if("get"in k||"set"in k)throw O("Accessors not supported");return"value"in k&&(P[j]=k.value),P}},function(s,l,o){var f=o(7),c=o(45),v=f.Object;s.exports=function(b){return v(c(b))}},function(s,l,o){var f=o(17),c=o(74).map;f({target:"Array",proto:!0,forced:!o(75)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(s,l,o){var f=o(81),c=o(45);s.exports=function(v){return f(c(v))}},function(s,l,o){var f=o(7),c=o(98),v=f.String;s.exports=function(b){if(c(b)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(b)}},function(s,l,o){(function(f){o.d(l,"d",function(){return b}),o.d(l,"c",function(){return w}),o.d(l,"b",function(){return O}),o.d(l,"a",function(){return P});var c=o(10),v=function(j,k){var A=typeof Symbol=="function"&&j[Symbol.iterator];if(!A)return j;var C,z,F=A.call(j),Z=[];try{for(;(k===void 0||k-- >0)&&!(C=F.next()).done;)Z.push(C.value)}catch(oe){z={error:oe}}finally{try{C&&!C.done&&(A=F.return)&&A.call(F)}finally{if(z)throw z.error}}return Z};function b(){var j=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){j(function(k){return k+1})},[])}function w(j){if(!j||typeof j!="object")return!1;var k=Object.getPrototypeOf(j);return!k||k===Object.prototype}function O(j){return typeof Symbol=="function"?Symbol.for(j):"__$mobx-react "+j+"__"}var S={};function P(){return typeof window<"u"?window:f!==void 0?f:typeof self<"u"?self:S}}).call(this,o(82))},function(s,l,o){var f=o(90);s.exports=function(c){return f(c.length)}},function(s,l,o){var f=o(7),c=o(28),v=o(34),b=o(57),w=o(108),O=o(92),S=o(56),P=o(94).CONFIGURABLE,j=S.get,k=S.enforce,A=String(String).split("String");(s.exports=function(C,z,F,Z){var oe,q=!!Z&&!!Z.unsafe,R=!!Z&&!!Z.enumerable,Y=!!Z&&!!Z.noTargetGet,I=Z&&Z.name!==void 0?Z.name:z;c(F)&&(String(I).slice(0,7)==="Symbol("&&(I="["+String(I).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(F,"name")||P&&F.name!==I)&&b(F,"name",I),(oe=k(F)).source||(oe.source=A.join(typeof I=="string"?I:""))),C!==f?(q?!Y&&C[z]&&(R=!0):delete C[z],R?C[z]=F:b(C,z,F)):R?C[z]=F:w(z,F)})(Function.prototype,"toString",function(){return c(this)&&j(this).source||O(this)})},function(s,l,o){var f=o(7).TypeError;s.exports=function(c){if(c==null)throw f("Can't call method on "+c);return c}},function(s,l,o){var f=o(7),c=o(28),v=function(b){return c(b)?b:void 0};s.exports=function(b,w){return arguments.length<2?v(f[b]):f[b]&&f[b][w]}},function(s,l,o){var f=o(17),c=o(35),v=o(33),b=o(32),w=o(201),O=o(51),S=o(96);f({target:"Reflect",stat:!0},{get:function P(j,k){var A,C,z=arguments.length<3?j:arguments[2];return b(j)===z?j[k]:(A=O.f(j,k))?w(A)?A.value:A.get===void 0?void 0:c(A.get,z):v(C=S(j))?P(C,k,z):void 0}})},function(s,l,o){(function(f){var c=o(31),v=o(166),b=d&&!d.nodeType&&d,w=b&&typeof f=="object"&&f&&!f.nodeType&&f,O=w&&w.exports===b?c.a.Buffer:void 0,S=(O?O.isBuffer:void 0)||v.a;l.a=S}).call(this,o(121)(s))},function(s,l,o){(function(f){var c=o(105),v=d&&!d.nodeType&&d,b=v&&typeof f=="object"&&f&&!f.nodeType&&f,w=b&&b.exports===v&&c.a.process,O=function(){try{var S=b&&b.require&&b.require("util").types;return S||w&&w.binding&&w.binding("util")}catch{}}();l.a=O}).call(this,o(121)(s))},function(s,l,o){var f=o(15),c=f({}.toString),v=f("".slice);s.exports=function(b){return v(c(b),8,-1)}},function(s,l,o){var f=o(36),c=o(35),v=o(93),b=o(71),w=o(40),O=o(87),S=o(34),P=o(129),j=Object.getOwnPropertyDescriptor;l.f=f?j:function(k,A){if(k=w(k),A=O(A),P)try{return j(k,A)}catch{}if(S(k,A))return b(!c(v.f,k,A),k[A])}},function(s,l,o){var f=o(17),c=o(213).entries;f({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(s,l,o){var f=o(46);s.exports=f("navigator","userAgent")||""},function(s,l,o){var f,c=o(32),v=o(169),b=o(110),w=o(69),O=o(133),S=o(86),P=o(91),j=P("IE_PROTO"),k=function(){},A=function(F){return"<script>"+F+"<\/script>"},C=function(F){F.write(A("")),F.close();var Z=F.parentWindow.Object;return F=null,Z},z=function(){try{f=new ActiveXObject("htmlfile")}catch{}var F,Z;z=typeof document<"u"?document.domain&&f?C(f):((Z=S("iframe")).style.display="none",O.appendChild(Z),Z.src="javascript:",(F=Z.contentWindow.document).open(),F.write(A("document.F=Object")),F.close(),F.F):C(f);for(var oe=b.length;oe--;)delete z.prototype[b[oe]];return z()};w[j]=!0,s.exports=Object.create||function(F,Z){var oe;return F!==null?(k.prototype=c(F),oe=new k,k.prototype=null,oe[j]=F):oe=z(),Z===void 0?oe:v(oe,Z)}},function(s,l,o){var f=o(7),c=o(28),v=o(89),b=f.TypeError;s.exports=function(w){if(c(w))return w;throw b(v(w)+" is not a function")}},function(s,l,o){var f,c,v,b=o(171),w=o(7),O=o(15),S=o(33),P=o(57),j=o(34),k=o(107),A=o(91),C=o(69),z="Object already initialized",F=w.TypeError,Z=w.WeakMap;if(b||k.state){var oe=k.state||(k.state=new Z),q=O(oe.get),R=O(oe.has),Y=O(oe.set);f=function(D,G){if(R(oe,D))throw new F(z);return G.facade=D,Y(oe,D,G),G},c=function(D){return q(oe,D)||{}},v=function(D){return R(oe,D)}}else{var I=A("state");C[I]=!0,f=function(D,G){if(j(D,I))throw new F(z);return G.facade=D,P(D,I,G),G},c=function(D){return j(D,I)?D[I]:{}},v=function(D){return j(D,I)}}s.exports={set:f,get:c,has:v,enforce:function(D){return v(D)?c(D):f(D,{})},getterFor:function(D){return function(G){var B;if(!S(G)||(B=c(G)).type!==D)throw F("Incompatible receiver, "+D+" required");return B}}}},function(s,l,o){var f=o(36),c=o(37),v=o(71);s.exports=f?function(b,w,O){return c.f(b,w,v(1,O))}:function(b,w,O){return b[w]=O,b}},function(s,l,o){var f=o(15);s.exports=f({}.isPrototypeOf)},function(s,l,o){var f=o(55);s.exports=function(c,v){var b=c[v];return b==null?void 0:f(b)}},function(s,l,o){o(174)("Map",function(f){return function(){return f(this,arguments.length?arguments[0]:void 0)}},o(178))},function(s,l,o){var f=o(87),c=o(37),v=o(71);s.exports=function(b,w,O){var S=f(w);S in b?c.f(b,S,v(0,O)):b[S]=O}},function(s,l,o){var f=o(15),c=o(55),v=f(f.bind);s.exports=function(b,w){return c(b),w===void 0?b:v?v(b,w):function(){return b.apply(w,arguments)}}},function(s,l,o){var f=o(17),c=o(15),v=o(81),b=o(40),w=o(120),O=c([].join),S=v!=Object,P=w("join",",");f({target:"Array",proto:!0,forced:S||!P},{join:function(j){return O(b(this),j===void 0?",":j)}})},function(s,l){s.exports=!1},function(s,l,o){var f,c,v=o(7),b=o(53),w=v.process,O=v.Deno,S=w&&w.versions||O&&O.version,P=S&&S.v8;P&&(c=(f=P.split("."))[0]>0&&f[0]<4?1:+(f[0]+f[1])),!c&&b&&(!(f=b.match(/Edge\/(\d+)/))||f[1]>=74)&&(f=b.match(/Chrome\/(\d+)/))&&(c=+f[1]),s.exports=c},function(s,l,o){var f=o(131),c=o(110);s.exports=Object.keys||function(v){return f(v,c)}},function(s,l,o){var f=o(68),c=Math.max,v=Math.min;s.exports=function(b,w){var O=f(b);return O<0?c(O+w,0):v(O,w)}},function(s,l){var o=Math.ceil,f=Math.floor;s.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?f:o)(v)}},function(s,l){s.exports={}},function(s,l){s.exports={}},function(s,l){s.exports=function(o,f){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:f}}},function(s,l,o){var f=o(131),c=o(110).concat("length","prototype");l.f=Object.getOwnPropertyNames||function(v){return f(v,c)}},function(s,l,o){var f=o(37).f,c=o(34),v=o(27)("toStringTag");s.exports=function(b,w,O){b&&!c(b=O?b:b.prototype,v)&&f(b,v,{configurable:!0,value:w})}},function(s,l,o){var f=o(62),c=o(15),v=o(81),b=o(38),w=o(43),O=o(119),S=c([].push),P=function(j){var k=j==1,A=j==2,C=j==3,z=j==4,F=j==6,Z=j==7,oe=j==5||F;return function(q,R,Y,I){for(var D,G,B=b(q),H=v(B),Q=f(R,Y),le=w(H),se=0,ye=I||O,xe=k?ye(q,le):A||Z?ye(q,0):void 0;le>se;se++)if((oe||se in H)&&(G=Q(D=H[se],se,B),j))if(k)xe[se]=G;else if(G)switch(j){case 3:return!0;case 5:return D;case 6:return se;case 2:S(xe,D)}else switch(j){case 4:return!1;case 7:S(xe,D)}return F?-1:C||z?z:xe}};s.exports={forEach:P(0),map:P(1),filter:P(2),some:P(3),every:P(4),find:P(5),findIndex:P(6),filterReject:P(7)}},function(s,l,o){var f=o(19),c=o(27),v=o(65),b=c("species");s.exports=function(w){return v>=51||!f(function(){var O=[];return(O.constructor={})[b]=function(){return{foo:1}},O[w](Boolean).foo!==1})}},function(s,l){var o=Function.prototype,f=o.apply,c=o.bind,v=o.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(f):function(){return v.apply(f,arguments)})},function(s,l,o){var f=o(76),c=o(35),v=o(15),b=o(122),w=o(154),O=o(32),S=o(45),P=o(156),j=o(123),k=o(90),A=o(41),C=o(59),z=o(113),F=o(124),Z=o(102),oe=o(151),q=o(19),R=oe.UNSUPPORTED_Y,Y=4294967295,I=Math.min,D=[].push,G=v(/./.exec),B=v(D),H=v("".slice),Q=!q(function(){var le=/(?:)/,se=le.exec;le.exec=function(){return se.apply(this,arguments)};var ye="ab".split(le);return ye.length!==2||ye[0]!=="a"||ye[1]!=="b"});b("split",function(le,se,ye){var xe;return xe="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ve,ae){var he=A(S(this)),ge=ae===void 0?Y:ae>>>0;if(ge===0)return[];if(ve===void 0)return[he];if(!w(ve))return c(se,he,ve,ge);for(var Ee,Ie,Ye,Me=[],Re=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(ve.sticky?"y":""),Ke=0,J=new RegExp(ve.source,Re+"g");(Ee=c(Z,J,he))&&!((Ie=J.lastIndex)>Ke&&(B(Me,H(he,Ke,Ee.index)),Ee.length>1&&Ee.index<he.length&&f(D,Me,z(Ee,1)),Ye=Ee[0].length,Ke=Ie,Me.length>=ge));)J.lastIndex===Ee.index&&J.lastIndex++;return Ke===he.length?!Ye&&G(J,"")||B(Me,""):B(Me,H(he,Ke)),Me.length>ge?z(Me,0,ge):Me}:"0".split(void 0,0).length?function(ve,ae){return ve===void 0&&ae===0?[]:c(se,this,ve,ae)}:se,[function(ve,ae){var he=S(this),ge=ve==null?void 0:C(ve,le);return ge?c(ge,ve,he,ae):c(xe,A(he),ve,ae)},function(ve,ae){var he=O(this),ge=A(ve),Ee=ye(xe,he,ge,ae,xe!==se);if(Ee.done)return Ee.value;var Ie=P(he,RegExp),Ye=he.unicode,Me=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(R?"g":"y"),Re=new Ie(R?"^(?:"+he.source+")":he,Me),Ke=ae===void 0?Y:ae>>>0;if(Ke===0)return[];if(ge.length===0)return F(Re,ge)===null?[ge]:[];for(var J=0,K=0,ue=[];K<ge.length;){Re.lastIndex=R?0:K;var _e,ke=F(Re,R?H(ge,K):ge);if(ke===null||(_e=I(k(Re.lastIndex+(R?K:0)),ge.length))===J)K=j(ge,K,Ye);else{if(B(ue,H(ge,J,K)),ue.length===Ke)return ue;for(var we=1;we<=ke.length-1;we++)if(B(ue,ke[we]),ue.length===Ke)return ue;K=J=_e}}return B(ue,H(ge,J)),ue}]},!Q,R)},function(s,l,o){var f=o(36),c=o(7),v=o(15),b=o(95),w=o(44),O=o(34),S=o(143),P=o(58),j=o(88),k=o(130),A=o(19),C=o(72).f,z=o(51).f,F=o(37).f,Z=o(197),oe=o(159).trim,q="Number",R=c.Number,Y=R.prototype,I=c.TypeError,D=v("".slice),G=v("".charCodeAt),B=function(xe){var ve=k(xe,"number");return typeof ve=="bigint"?ve:H(ve)},H=function(xe){var ve,ae,he,ge,Ee,Ie,Ye,Me,Re=k(xe,"number");if(j(Re))throw I("Cannot convert a Symbol value to a number");if(typeof Re=="string"&&Re.length>2){if(Re=oe(Re),(ve=G(Re,0))===43||ve===45){if((ae=G(Re,2))===88||ae===120)return NaN}else if(ve===48){switch(G(Re,1)){case 66:case 98:he=2,ge=49;break;case 79:case 111:he=8,ge=55;break;default:return+Re}for(Ie=(Ee=D(Re,2)).length,Ye=0;Ye<Ie;Ye++)if((Me=G(Ee,Ye))<48||Me>ge)return NaN;return parseInt(Ee,he)}}return+Re};if(b(q,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var Q,le=function(xe){var ve=arguments.length<1?0:R(B(xe)),ae=this;return P(Y,ae)&&A(function(){Z(ae)})?S(Object(ve),ae,le):ve},se=f?C(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ye=0;se.length>ye;ye++)O(R,Q=se[ye])&&!O(le,Q)&&F(le,Q,z(R,Q));le.prototype=Y,Y.constructor=le,w(c,q,le)}},function(s,l,o){o(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(s,l,o){var f=o(17),c=o(214),v=o(83);f({target:"Array",proto:!0},{fill:c}),v("fill")},function(s,l,o){var f=o(7),c=o(15),v=o(19),b=o(50),w=f.Object,O=c("".split);s.exports=v(function(){return!w("z").propertyIsEnumerable(0)})?function(S){return b(S)=="String"?O(S,""):w(S)}:w},function(s,l){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o},function(s,l,o){var f=o(27),c=o(54),v=o(37),b=f("unscopables"),w=Array.prototype;w[b]==null&&v.f(w,b,{configurable:!0,value:c(null)}),s.exports=function(O){w[b][O]=!0}},function(s,l,o){var f=o(64),c=o(107);(s.exports=function(v,b){return c[v]||(c[v]=b!==void 0?b:{})})("versions",[]).push({version:"3.19.3",mode:f?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(s,l,o){var f=o(15),c=0,v=Math.random(),b=f(1 .toString);s.exports=function(w){return"Symbol("+(w===void 0?"":w)+")_"+b(++c+v,36)}},function(s,l,o){var f=o(7),c=o(33),v=f.document,b=c(v)&&c(v.createElement);s.exports=function(w){return b?v.createElement(w):{}}},function(s,l,o){var f=o(130),c=o(88);s.exports=function(v){var b=f(v,"string");return c(b)?b:b+""}},function(s,l,o){var f=o(7),c=o(46),v=o(28),b=o(58),w=o(128),O=f.Object;s.exports=w?function(S){return typeof S=="symbol"}:function(S){var P=c("Symbol");return v(P)&&b(P.prototype,O(S))}},function(s,l,o){var f=o(7).String;s.exports=function(c){try{return f(c)}catch{return"Object"}}},function(s,l,o){var f=o(68),c=Math.min;s.exports=function(v){return v>0?c(f(v),9007199254740991):0}},function(s,l,o){var f=o(84),c=o(85),v=f("keys");s.exports=function(b){return v[b]||(v[b]=c(b))}},function(s,l,o){var f=o(15),c=o(28),v=o(107),b=f(Function.toString);c(v.inspectSource)||(v.inspectSource=function(w){return b(w)}),s.exports=v.inspectSource},function(s,l,o){var f={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!f.call({1:2},1);l.f=v?function(b){var w=c(this,b);return!!w&&w.enumerable}:f},function(s,l,o){var f=o(36),c=o(34),v=Function.prototype,b=f&&Object.getOwnPropertyDescriptor,w=c(v,"name"),O=w&&function(){}.name==="something",S=w&&(!f||f&&b(v,"name").configurable);s.exports={EXISTS:w,PROPER:O,CONFIGURABLE:S}},function(s,l,o){var f=o(19),c=o(28),v=/#|\.prototype\./,b=function(j,k){var A=O[w(j)];return A==P||A!=S&&(c(k)?f(k):!!k)},w=b.normalize=function(j){return String(j).replace(v,".").toLowerCase()},O=b.data={},S=b.NATIVE="N",P=b.POLYFILL="P";s.exports=b},function(s,l,o){var f=o(7),c=o(34),v=o(28),b=o(38),w=o(91),O=o(137),S=w("IE_PROTO"),P=f.Object,j=P.prototype;s.exports=O?P.getPrototypeOf:function(k){var A=b(k);if(c(A,S))return A[S];var C=A.constructor;return v(C)&&A instanceof C?C.prototype:A instanceof P?j:null}},function(s,l,o){var f=o(15),c=o(32),v=o(173);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var b,w=!1,O={};try{(b=f(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(O,[]),w=O instanceof Array}catch{}return function(S,P){return c(S),v(P),w?b(S,P):S.__proto__=P,S}}():void 0)},function(s,l,o){var f=o(7),c=o(116),v=o(28),b=o(50),w=o(27)("toStringTag"),O=f.Object,S=b(function(){return arguments}())=="Arguments";s.exports=c?b:function(P){var j,k,A;return P===void 0?"Undefined":P===null?"Null":typeof(k=function(C,z){try{return C[z]}catch{}}(j=O(P),w))=="string"?k:S?b(j):(A=b(j))=="Object"&&v(j.callee)?"Arguments":A}},function(s,l,o){var f=o(50);s.exports=Array.isArray||function(c){return f(c)=="Array"}},function(s,l,o){var f=o(15),c=o(19),v=o(28),b=o(98),w=o(46),O=o(92),S=function(){},P=[],j=w("Reflect","construct"),k=/^\s*(?:class|function)\b/,A=f(k.exec),C=!k.exec(S),z=function(F){if(!v(F))return!1;try{return j(S,P,F),!0}catch{return!1}};s.exports=!j||c(function(){var F;return z(z.call)||!z(Object)||!z(function(){F=!0})||F})?function(F){if(!v(F))return!1;switch(b(F)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return C||!!A(k,O(F))}:z},function(s,l,o){var f=o(15);s.exports=f([].slice)},function(s,l,o){var f,c,v=o(35),b=o(15),w=o(41),O=o(185),S=o(151),P=o(84),j=o(54),k=o(56).get,A=o(186),C=o(187),z=P("native-string-replace",String.prototype.replace),F=RegExp.prototype.exec,Z=F,oe=b("".charAt),q=b("".indexOf),R=b("".replace),Y=b("".slice),I=(c=/b*/g,v(F,f=/a/,"a"),v(F,c,"a"),f.lastIndex!==0||c.lastIndex!==0),D=S.BROKEN_CARET,G=/()??/.exec("")[1]!==void 0;(I||G||D||A||C)&&(Z=function(B){var H,Q,le,se,ye,xe,ve,ae=this,he=k(ae),ge=w(B),Ee=he.raw;if(Ee)return Ee.lastIndex=ae.lastIndex,H=v(Z,Ee,ge),ae.lastIndex=Ee.lastIndex,H;var Ie=he.groups,Ye=D&&ae.sticky,Me=v(O,ae),Re=ae.source,Ke=0,J=ge;if(Ye&&(Me=R(Me,"y",""),q(Me,"g")===-1&&(Me+="g"),J=Y(ge,ae.lastIndex),ae.lastIndex>0&&(!ae.multiline||ae.multiline&&oe(ge,ae.lastIndex-1)!==`
`)&&(Re="(?: "+Re+")",J=" "+J,Ke++),Q=new RegExp("^(?:"+Re+")",Me)),G&&(Q=new RegExp("^"+Re+"$(?!\\s)",Me)),I&&(le=ae.lastIndex),se=v(F,Ye?Q:ae,J),Ye?se?(se.input=Y(se.input,Ke),se[0]=Y(se[0],Ke),se.index=ae.lastIndex,ae.lastIndex+=se[0].length):ae.lastIndex=0:I&&se&&(ae.lastIndex=ae.global?se.index+se[0].length:le),G&&se&&se.length>1&&v(z,se[0],Q,function(){for(ye=1;ye<arguments.length-2;ye++)arguments[ye]===void 0&&(se[ye]=void 0)}),se&&Ie)for(se.groups=xe=j(null),ye=0;ye<Ie.length;ye++)xe[(ve=Ie[ye])[0]]=se[ve[1]];return se}),s.exports=Z},function(s,l,o){var f=o(17),c=o(7),v=o(67),b=o(68),w=o(43),O=o(38),S=o(119),P=o(61),j=o(75)("splice"),k=c.TypeError,A=Math.max,C=Math.min,z=9007199254740991,F="Maximum allowed length exceeded";f({target:"Array",proto:!0,forced:!j},{splice:function(Z,oe){var q,R,Y,I,D,G,B=O(this),H=w(B),Q=v(Z,H),le=arguments.length;if(le===0?q=R=0:le===1?(q=0,R=H-Q):(q=le-2,R=C(A(b(oe),0),H-Q)),H+q-R>z)throw k(F);for(Y=S(B,R),I=0;I<R;I++)(D=Q+I)in B&&P(Y,I,B[D]);if(Y.length=R,q<R){for(I=Q;I<H-R;I++)G=I+q,(D=I+R)in B?B[G]=B[D]:delete B[G];for(I=H;I>H-R+q;I--)delete B[I-1]}else if(q>R)for(I=H-R;I>Q;I--)G=I+q-1,(D=I+R-1)in B?B[G]=B[D]:delete B[G];for(I=0;I<q;I++)B[I+Q]=arguments[I+2];return B.length=H-R+q,Y}})},function(s,l,o){var f=o(17),c=o(202);f({target:"String",proto:!0,forced:o(203)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(s,l,o){(function(f){var c=typeof f=="object"&&f&&f.Object===Object&&f;l.a=c}).call(this,o(82))},function(s,l,o){(function(f){var c=o(31),v=d&&!d.nodeType&&d,b=v&&typeof f=="object"&&f&&!f.nodeType&&f,w=b&&b.exports===v?c.a.Buffer:void 0,O=w?w.allocUnsafe:void 0;l.a=function(S,P){if(P)return S.slice();var j=S.length,k=O?O(j):new S.constructor(j);return S.copy(k),k}}).call(this,o(121)(s))},function(s,l,o){var f=o(7),c=o(108),v="__core-js_shared__",b=f[v]||c(v,{});s.exports=b},function(s,l,o){var f=o(7),c=Object.defineProperty;s.exports=function(v,b){try{c(f,v,{value:b,configurable:!0,writable:!0})}catch{f[v]=b}return b}},function(s,l,o){var f=o(65),c=o(19);s.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&f&&f<41})},function(s,l){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(s,l,o){var f=o(17),c=o(35),v=o(64),b=o(94),w=o(28),O=o(172),S=o(96),P=o(97),j=o(73),k=o(57),A=o(44),C=o(27),z=o(70),F=o(136),Z=b.PROPER,oe=b.CONFIGURABLE,q=F.IteratorPrototype,R=F.BUGGY_SAFARI_ITERATORS,Y=C("iterator"),I="keys",D="values",G="entries",B=function(){return this};s.exports=function(H,Q,le,se,ye,xe,ve){O(le,Q,se);var ae,he,ge,Ee=function(K){if(K===ye&&Ke)return Ke;if(!R&&K in Me)return Me[K];switch(K){case I:case D:case G:return function(){return new le(this,K)}}return function(){return new le(this)}},Ie=Q+" Iterator",Ye=!1,Me=H.prototype,Re=Me[Y]||Me["@@iterator"]||ye&&Me[ye],Ke=!R&&Re||Ee(ye),J=Q=="Array"&&Me.entries||Re;if(J&&(ae=S(J.call(new H)))!==Object.prototype&&ae.next&&(v||S(ae)===q||(P?P(ae,q):w(ae[Y])||A(ae,Y,B)),j(ae,Ie,!0,!0),v&&(z[Ie]=B)),Z&&ye==D&&Re&&Re.name!==D&&(!v&&oe?k(Me,"name",D):(Ye=!0,Ke=function(){return c(Re,this)})),ye)if(he={values:Ee(D),keys:xe?Ke:Ee(I),entries:Ee(G)},ve)for(ge in he)(R||Ye||!(ge in Me))&&A(Me,ge,he[ge]);else f({target:Q,proto:!0,forced:R||Ye},he);return v&&!ve||Me[Y]===Ke||A(Me,Y,Ke,{name:ye}),z[Q]=Ke,he}},function(s,l){l.f=Object.getOwnPropertySymbols},function(s,l,o){var f=o(7),c=o(67),v=o(43),b=o(61),w=f.Array,O=Math.max;s.exports=function(S,P,j){for(var k=v(S),A=c(P,k),C=c(j===void 0?k:j,k),z=w(O(C-A,0)),F=0;A<C;A++,F++)b(z,F,S[A]);return z.length=F,z}},function(s,l,o){var f=o(7),c=o(62),v=o(35),b=o(32),w=o(89),O=o(140),S=o(43),P=o(58),j=o(141),k=o(115),A=o(142),C=f.TypeError,z=function(Z,oe){this.stopped=Z,this.result=oe},F=z.prototype;s.exports=function(Z,oe,q){var R,Y,I,D,G,B,H,Q=q&&q.that,le=!(!q||!q.AS_ENTRIES),se=!(!q||!q.IS_ITERATOR),ye=!(!q||!q.INTERRUPTED),xe=c(oe,Q),ve=function(he){return R&&A(R,"normal",he),new z(!0,he)},ae=function(he){return le?(b(he),ye?xe(he[0],he[1],ve):xe(he[0],he[1])):ye?xe(he,ve):xe(he)};if(se)R=Z;else{if(!(Y=k(Z)))throw C(w(Z)+" is not iterable");if(O(Y)){for(I=0,D=S(Z);D>I;I++)if((G=ae(Z[I]))&&P(F,G))return G;return new z(!1)}R=j(Z,Y)}for(B=R.next;!(H=v(B,R)).done;){try{G=ae(H.value)}catch(he){A(R,"throw",he)}if(typeof G=="object"&&G&&P(F,G))return G}return new z(!1)}},function(s,l,o){var f=o(98),c=o(59),v=o(70),b=o(27)("iterator");s.exports=function(w){if(w!=null)return c(w,b)||c(w,"@@iterator")||v[f(w)]}},function(s,l,o){var f={};f[o(27)("toStringTag")]="z",s.exports=String(f)==="[object z]"},function(s,l,o){var f=o(7),c=o(58),v=f.TypeError;s.exports=function(b,w){if(c(w,b))return b;throw v("Incorrect invocation")}},function(s,l,o){var f=o(27)("iterator"),c=!1;try{var v=0,b={next:function(){return{done:!!v++}},return:function(){c=!0}};b[f]=function(){return this},Array.from(b,function(){throw 2})}catch{}s.exports=function(w,O){if(!O&&!c)return!1;var S=!1;try{var P={};P[f]=function(){return{next:function(){return{done:S=!0}}}},w(P)}catch{}return S}},function(s,l,o){var f=o(181);s.exports=function(c,v){return new(f(c))(v===0?0:v)}},function(s,l,o){var f=o(19);s.exports=function(c,v){var b=[][c];return!!b&&f(function(){b.call(null,v||function(){throw 1},1)})}},function(s,l){s.exports=function(o){if(!o.webpackPolyfill){var f=Object.create(o);f.children||(f.children=[]),Object.defineProperty(f,"loaded",{enumerable:!0,get:function(){return f.l}}),Object.defineProperty(f,"id",{enumerable:!0,get:function(){return f.i}}),Object.defineProperty(f,"exports",{enumerable:!0}),f.webpackPolyfill=1}return f}},function(s,l,o){o(18);var f=o(15),c=o(44),v=o(102),b=o(19),w=o(27),O=o(57),S=w("species"),P=RegExp.prototype;s.exports=function(j,k,A,C){var z=w(j),F=!b(function(){var R={};return R[z]=function(){return 7},""[j](R)!=7}),Z=F&&!b(function(){var R=!1,Y=/a/;return j==="split"&&((Y={}).constructor={},Y.constructor[S]=function(){return Y},Y.flags="",Y[z]=/./[z]),Y.exec=function(){return R=!0,null},Y[z](""),!R});if(!F||!Z||A){var oe=f(/./[z]),q=k(z,""[j],function(R,Y,I,D,G){var B=f(R),H=Y.exec;return H===v||H===P.exec?F&&!G?{done:!0,value:oe(Y,I,D)}:{done:!0,value:B(I,Y,D)}:{done:!1}});c(String.prototype,j,q[0]),c(P,z,q[1])}C&&O(P[z],"sham",!0)}},function(s,l,o){var f=o(146).charAt;s.exports=function(c,v,b){return v+(b?f(c,v).length:1)}},function(s,l,o){var f=o(7),c=o(35),v=o(32),b=o(28),w=o(50),O=o(102),S=f.TypeError;s.exports=function(P,j){var k=P.exec;if(b(k)){var A=c(k,P,j);return A!==null&&v(A),A}if(w(P)==="RegExp")return c(O,P,j);throw S("RegExp#exec called on incompatible receiver")}},function(s,l,o){var f=o(76),c=o(35),v=o(15),b=o(122),w=o(19),O=o(32),S=o(28),P=o(68),j=o(90),k=o(41),A=o(45),C=o(123),z=o(59),F=o(198),Z=o(124),oe=o(27)("replace"),q=Math.max,R=Math.min,Y=v([].concat),I=v([].push),D=v("".indexOf),G=v("".slice),B="a".replace(/./,"$0")==="$0",H=!!/./[oe]&&/./[oe]("a","$0")==="";b("replace",function(Q,le,se){var ye=H?"$":"$0";return[function(xe,ve){var ae=A(this),he=xe==null?void 0:z(xe,oe);return he?c(he,xe,ae,ve):c(le,k(ae),xe,ve)},function(xe,ve){var ae=O(this),he=k(xe);if(typeof ve=="string"&&D(ve,ye)===-1&&D(ve,"$<")===-1){var ge=se(le,ae,he,ve);if(ge.done)return ge.value}var Ee=S(ve);Ee||(ve=k(ve));var Ie=ae.global;if(Ie){var Ye=ae.unicode;ae.lastIndex=0}for(var Me=[];;){var Re=Z(ae,he);if(Re===null||(I(Me,Re),!Ie))break;k(Re[0])===""&&(ae.lastIndex=C(he,j(ae.lastIndex),Ye))}for(var Ke,J="",K=0,ue=0;ue<Me.length;ue++){for(var _e=k((Re=Me[ue])[0]),ke=q(R(P(Re.index),he.length),0),we=[],qe=1;qe<Re.length;qe++)I(we,(Ke=Re[qe])===void 0?Ke:String(Ke));var nt=Re.groups;if(Ee){var Ze=Y([_e],we,ke,he);nt!==void 0&&I(Ze,nt);var Ve=k(f(ve,void 0,Ze))}else Ve=F(_e,he,ke,we,nt,ve);ke>=K&&(J+=G(he,K,ke)+Ve,K=ke+_e.length)}return J+G(he,K)}]},!!w(function(){var Q=/./;return Q.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(Q,"$<a>")!=="7"})||!B||H)},function(s,l,o){var f=o(50),c=o(7);s.exports=f(c.process)=="process"},function(s,l,o){o(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(s,l,o){var f=o(109);s.exports=f&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(s,l,o){var f=o(36),c=o(19),v=o(86);s.exports=!f&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(s,l,o){var f=o(7),c=o(35),v=o(33),b=o(88),w=o(59),O=o(170),S=o(27),P=f.TypeError,j=S("toPrimitive");s.exports=function(k,A){if(!v(k)||b(k))return k;var C,z=w(k,j);if(z){if(A===void 0&&(A="default"),C=c(z,k,A),!v(C)||b(C))return C;throw P("Can't convert object to primitive value")}return A===void 0&&(A="number"),O(k,A)}},function(s,l,o){var f=o(15),c=o(34),v=o(40),b=o(132).indexOf,w=o(69),O=f([].push);s.exports=function(S,P){var j,k=v(S),A=0,C=[];for(j in k)!c(w,j)&&c(k,j)&&O(C,j);for(;P.length>A;)c(k,j=P[A++])&&(~b(C,j)||O(C,j));return C}},function(s,l,o){var f=o(40),c=o(67),v=o(43),b=function(w){return function(O,S,P){var j,k=f(O),A=v(k),C=c(P,A);if(w&&S!=S){for(;A>C;)if((j=k[C++])!=j)return!0}else for(;A>C;C++)if((w||C in k)&&k[C]===S)return w||C||0;return!w&&-1}};s.exports={includes:b(!0),indexOf:b(!1)}},function(s,l,o){var f=o(46);s.exports=f("document","documentElement")},function(s,l,o){var f=o(34),c=o(135),v=o(51),b=o(37);s.exports=function(w,O){for(var S=c(O),P=b.f,j=v.f,k=0;k<S.length;k++){var A=S[k];f(w,A)||P(w,A,j(O,A))}}},function(s,l,o){var f=o(46),c=o(15),v=o(72),b=o(112),w=o(32),O=c([].concat);s.exports=f("Reflect","ownKeys")||function(S){var P=v.f(w(S)),j=b.f;return j?O(P,j(S)):P}},function(s,l,o){var f,c,v,b=o(19),w=o(28),O=o(54),S=o(96),P=o(44),j=o(27),k=o(64),A=j("iterator"),C=!1;[].keys&&("next"in(v=[].keys())?(c=S(S(v)))!==Object.prototype&&(f=c):C=!0),f==null||b(function(){var z={};return f[A].call(z)!==z})?f={}:k&&(f=O(f)),w(f[A])||P(f,A,function(){return this}),s.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:C}},function(s,l,o){var f=o(19);s.exports=!f(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(s,l,o){var f=o(17),c=o(15),v=o(69),b=o(33),w=o(34),O=o(37).f,S=o(72),P=o(139),j=o(175),k=o(85),A=o(177),C=!1,z=k("meta"),F=0,Z=function(q){O(q,z,{value:{objectID:"O"+F++,weakData:{}}})},oe=s.exports={enable:function(){oe.enable=function(){},C=!0;var q=S.f,R=c([].splice),Y={};Y[z]=1,q(Y).length&&(S.f=function(I){for(var D=q(I),G=0,B=D.length;G<B;G++)if(D[G]===z){R(D,G,1);break}return D},f({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:P.f}))},fastKey:function(q,R){if(!b(q))return typeof q=="symbol"?q:(typeof q=="string"?"S":"P")+q;if(!w(q,z)){if(!j(q))return"F";if(!R)return"E";Z(q)}return q[z].objectID},getWeakData:function(q,R){if(!w(q,z)){if(!j(q))return!0;if(!R)return!1;Z(q)}return q[z].weakData},onFreeze:function(q){return A&&C&&j(q)&&!w(q,z)&&Z(q),q}};v[z]=!0},function(s,l,o){var f=o(50),c=o(40),v=o(72).f,b=o(113),w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(O){return w&&f(O)=="Window"?function(S){try{return v(S)}catch{return b(w)}}(O):v(c(O))}},function(s,l,o){var f=o(27),c=o(70),v=f("iterator"),b=Array.prototype;s.exports=function(w){return w!==void 0&&(c.Array===w||b[v]===w)}},function(s,l,o){var f=o(7),c=o(35),v=o(55),b=o(32),w=o(89),O=o(115),S=f.TypeError;s.exports=function(P,j){var k=arguments.length<2?O(P):j;if(v(k))return b(c(k,P));throw S(w(P)+" is not iterable")}},function(s,l,o){var f=o(35),c=o(32),v=o(59);s.exports=function(b,w,O){var S,P;c(b);try{if(!(S=v(b,"return"))){if(w==="throw")throw O;return O}S=f(S,b)}catch(j){P=!0,S=j}if(w==="throw")throw O;if(P)throw S;return c(S),O}},function(s,l,o){var f=o(28),c=o(33),v=o(97);s.exports=function(b,w,O){var S,P;return v&&f(S=w.constructor)&&S!==O&&c(P=S.prototype)&&P!==O.prototype&&v(b,P),b}},function(s,l,o){var f=o(44);s.exports=function(c,v,b){for(var w in v)f(c,w,v[w],b);return c}},function(s,l,o){var f=o(46),c=o(37),v=o(27),b=o(36),w=v("species");s.exports=function(O){var S=f(O),P=c.f;b&&S&&!S[w]&&P(S,w,{configurable:!0,get:function(){return this}})}},function(s,l,o){var f=o(15),c=o(68),v=o(41),b=o(45),w=f("".charAt),O=f("".charCodeAt),S=f("".slice),P=function(j){return function(k,A){var C,z,F=v(b(k)),Z=c(A),oe=F.length;return Z<0||Z>=oe?j?"":void 0:(C=O(F,Z))<55296||C>56319||Z+1===oe||(z=O(F,Z+1))<56320||z>57343?j?w(F,Z):C:j?S(F,Z,Z+2):z-56320+(C-55296<<10)+65536}};s.exports={codeAt:P(!1),charAt:P(!0)}},function(s,l){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(s,l,o){var f=o(86)("span").classList,c=f&&f.constructor&&f.constructor.prototype;s.exports=c===Object.prototype?void 0:c},function(s,l,o){var f=o(27);l.f=f},function(s,l,o){var f=o(182),c=o(34),v=o(149),b=o(37).f;s.exports=function(w){var O=f.Symbol||(f.Symbol={});c(O,w)||b(O,w,{value:v.f(w)})}},function(s,l,o){var f=o(19),c=o(7).RegExp,v=f(function(){var O=c("a","y");return O.lastIndex=2,O.exec("abcd")!=null}),b=v||f(function(){return!c("a","y").sticky}),w=v||f(function(){var O=c("^r","gy");return O.lastIndex=2,O.exec("str")!=null});s.exports={BROKEN_CARET:w,MISSED_STICKY:b,UNSUPPORTED_Y:v}},function(s,l,o){var f=o(17),c=o(132).includes,v=o(83);f({target:"Array",proto:!0},{includes:function(b){return c(this,b,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(s,l,o){var f=o(17),c=o(15),v=o(194),b=o(45),w=o(41),O=o(195),S=c("".indexOf);f({target:"String",proto:!0,forced:!O("includes")},{includes:function(P){return!!~S(w(b(this)),w(v(P)),arguments.length>1?arguments[1]:void 0)}})},function(s,l,o){var f=o(33),c=o(50),v=o(27)("match");s.exports=function(b){var w;return f(b)&&((w=b[v])!==void 0?!!w:c(b)=="RegExp")}},function(s,l){var o,f,c=s.exports={};function v(){throw new Error("setTimeout has not been defined")}function b(){throw new Error("clearTimeout has not been defined")}function w(F){if(o===setTimeout)return setTimeout(F,0);if((o===v||!o)&&setTimeout)return o=setTimeout,setTimeout(F,0);try{return o(F,0)}catch{try{return o.call(null,F,0)}catch{return o.call(this,F,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:v}catch{o=v}try{f=typeof clearTimeout=="function"?clearTimeout:b}catch{f=b}})();var O,S=[],P=!1,j=-1;function k(){P&&O&&(P=!1,O.length?S=O.concat(S):j=-1,S.length&&A())}function A(){if(!P){var F=w(k);P=!0;for(var Z=S.length;Z;){for(O=S,S=[];++j<Z;)O&&O[j].run();j=-1,Z=S.length}O=null,P=!1,function(oe){if(f===clearTimeout)return clearTimeout(oe);if((f===b||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(oe);try{f(oe)}catch{try{return f.call(null,oe)}catch{return f.call(this,oe)}}}(F)}}function C(F,Z){this.fun=F,this.array=Z}function z(){}c.nextTick=function(F){var Z=new Array(arguments.length-1);if(arguments.length>1)for(var oe=1;oe<arguments.length;oe++)Z[oe-1]=arguments[oe];S.push(new C(F,Z)),S.length!==1||P||w(A)},C.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=z,c.addListener=z,c.once=z,c.off=z,c.removeListener=z,c.removeAllListeners=z,c.emit=z,c.prependListener=z,c.prependOnceListener=z,c.listeners=function(F){return[]},c.binding=function(F){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(F){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(s,l,o){var f=o(32),c=o(157),v=o(27)("species");s.exports=function(b,w){var O,S=f(b).constructor;return S===void 0||(O=f(S)[v])==null?w:c(O)}},function(s,l,o){var f=o(7),c=o(100),v=o(89),b=f.TypeError;s.exports=function(w){if(c(w))return w;throw b(v(w)+" is not a constructor")}},function(s,l,o){var f=o(17),c=o(159).trim;f({target:"String",proto:!0,forced:o(196)("trim")},{trim:function(){return c(this)}})},function(s,l,o){var f=o(15),c=o(45),v=o(41),b=o(160),w=f("".replace),O="["+b+"]",S=RegExp("^"+O+O+"*"),P=RegExp(O+O+"*$"),j=function(k){return function(A){var C=v(c(A));return 1&k&&(C=w(C,S,"")),2&k&&(C=w(C,P,"")),C}};s.exports={start:j(1),end:j(2),trim:j(3)}},function(s,l){s.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(s,l,o){var f=o(35),c=o(122),v=o(32),b=o(90),w=o(41),O=o(45),S=o(59),P=o(123),j=o(124);c("match",function(k,A,C){return[function(z){var F=O(this),Z=z==null?void 0:S(z,k);return Z?f(Z,z,F):new RegExp(z)[k](w(F))},function(z){var F=v(this),Z=w(z),oe=C(A,F,Z);if(oe.done)return oe.value;if(!F.global)return j(F,Z);var q=F.unicode;F.lastIndex=0;for(var R,Y=[],I=0;(R=j(F,Z))!==null;){var D=w(R[0]);Y[I]=D,D===""&&(F.lastIndex=P(Z,b(F.lastIndex),q)),I++}return I===0?null:Y}]})},function(s,l,o){var f=o(17),c=Math.hypot,v=Math.abs,b=Math.sqrt;f({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(w,O){for(var S,P,j=0,k=0,A=arguments.length,C=0;k<A;)C<(S=v(arguments[k++]))?(j=j*(P=C/S)*P+1,C=S):j+=S>0?(P=S/C)*P:S;return C===1/0?1/0:C*b(j)}})},function(s,l,o){var f,c,v,b,w=o(7),O=o(76),S=o(62),P=o(28),j=o(34),k=o(19),A=o(133),C=o(101),z=o(86),F=o(164),Z=o(126),oe=w.setImmediate,q=w.clearImmediate,R=w.process,Y=w.Dispatch,I=w.Function,D=w.MessageChannel,G=w.String,B=0,H={},Q="onreadystatechange";try{f=w.location}catch{}var le=function(ve){if(j(H,ve)){var ae=H[ve];delete H[ve],ae()}},se=function(ve){return function(){le(ve)}},ye=function(ve){le(ve.data)},xe=function(ve){w.postMessage(G(ve),f.protocol+"//"+f.host)};oe&&q||(oe=function(ve){var ae=C(arguments,1);return H[++B]=function(){O(P(ve)?ve:I(ve),void 0,ae)},c(B),B},q=function(ve){delete H[ve]},Z?c=function(ve){R.nextTick(se(ve))}:Y&&Y.now?c=function(ve){Y.now(se(ve))}:D&&!F?(b=(v=new D).port2,v.port1.onmessage=ye,c=S(b.postMessage,b)):w.addEventListener&&P(w.postMessage)&&!w.importScripts&&f&&f.protocol!=="file:"&&!k(xe)?(c=xe,w.addEventListener("message",ye,!1)):c=Q in z("script")?function(ve){A.appendChild(z("script")).onreadystatechange=function(){A.removeChild(this),le(ve)}}:function(ve){setTimeout(se(ve),0)}),s.exports={set:oe,clear:q}},function(s,l,o){var f=o(53);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(f)},function(s,l,o){var f=o(55),c=function(v){var b,w;this.promise=new v(function(O,S){if(b!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");b=O,w=S}),this.resolve=f(b),this.reject=f(w)};s.exports.f=function(v){return new c(v)}},function(s,l,o){l.a=function(){return!1}},function(s,l,o){(function(f){o.d(l,"a",function(){return R});var c=o(1);function v(D){throw new Error("[mobx-utils] "+D)}function b(D,G){G===void 0&&(G="Illegal state"),D||v(G)}var w=function(D){return D&&D!==Object.prototype&&Object.getOwnPropertyNames(D).concat(w(Object.getPrototypeOf(D))||[])},O=function(D){return function(G){var B=w(G);return B.filter(function(H,Q){return B.indexOf(H)===Q})}(D).filter(function(G){return G!=="constructor"&&!~G.indexOf("__")})},S="pending",P="fulfilled",j="rejected";function k(D){switch(this.state){case S:return D.pending&&D.pending(this.value);case j:return D.rejected&&D.rejected(this.value);case P:return D.fulfilled?D.fulfilled(this.value):this.value}}function A(D,G){if(b(arguments.length<=2,"fromPromise expects up to two arguments"),b(typeof D=="function"||typeof D=="object"&&D&&typeof D.then=="function","Please pass a promise or function to fromPromise"),D.isPromiseBasedObservable===!0)return D;typeof D=="function"&&(D=new Promise(D));var B=D;D.then(Object(c.k)("observableFromPromise-resolve",function(Q){B.value=Q,B.state=P}),Object(c.k)("observableFromPromise-reject",function(Q){B.value=Q,B.state=j})),B.isPromiseBasedObservable=!0,B.case=k;var H=G&&G.state===P?G.value:void 0;return Object(c.q)(B,{value:H,state:S},{},{deep:!1}),B}(function(D){D.reject=Object(c.k)("fromPromise.reject",function(G){var B=D(Promise.reject(G));return B.state=j,B.value=G,B}),D.resolve=Object(c.k)("fromPromise.resolve",function(G){G===void 0&&(G=void 0);var B=D(Promise.resolve(G));return B.state=P,B.value=G,B})})(A||(A={}));var C=function(D,G,B,H){var Q,le=arguments.length,se=le<3?G:H===null?H=Object.getOwnPropertyDescriptor(G,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(D,G,B,H);else for(var ye=D.length-1;ye>=0;ye--)(Q=D[ye])&&(se=(le<3?Q(se):le>3?Q(G,B,se):Q(G,B))||se);return le>3&&se&&Object.defineProperty(G,B,se),se};(function(){function D(G,B){var H=this;Object(c.G)(function(){H.current=B,H.subscription=G.subscribe(H)})}D.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},D.prototype.next=function(G){this.current=G},D.prototype.complete=function(){this.dispose()},D.prototype.error=function(G){this.current=G,this.dispose()},C([c.C.ref],D.prototype,"current",void 0),C([c.k.bound],D.prototype,"next",null),C([c.k.bound],D.prototype,"complete",null),C([c.k.bound],D.prototype,"error",null)})();var z=function(){return z=Object.assign||function(D){for(var G,B=1,H=arguments.length;B<H;B++)for(var Q in G=arguments[B])Object.prototype.hasOwnProperty.call(G,Q)&&(D[Q]=G[Q]);return D},z.apply(this,arguments)},F=function(D,G,B,H){var Q,le=arguments.length,se=le<3?G:H===null?H=Object.getOwnPropertyDescriptor(G,B):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")se=Reflect.decorate(D,G,B,H);else for(var ye=D.length-1;ye>=0;ye--)(Q=D[ye])&&(se=(le<3?Q(se):le>3?Q(G,B,se):Q(G,B))||se);return le>3&&se&&Object.defineProperty(G,B,se),se},Z=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function D(G){var B=this;this.model=G,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(H){return B.localValues.has(H)},b(Object(c.A)(G),"createViewModel expects an observable object"),O(G).forEach(function(H){if(H!==c.a&&H!=="__mobxDidRunLazyInitializers"){if(b(Z.indexOf(H)===-1,"The propertyname "+H+" is reserved and cannot be used with viewModels"),Object(c.w)(G,H)){var Q=Object(c.h)(G,H).derivation;B.localComputedValues.set(H,Object(c.m)(Q.bind(B)))}var le=Object.getOwnPropertyDescriptor(G,H),se=le?{enumerable:le.enumerable}:{};Object.defineProperty(B,H,z(z({},se),{configurable:!0,get:function(){return Object(c.w)(G,H)?B.localComputedValues.get(H).get():B.isPropertyDirty(H)?B.localValues.get(H):B.model[H]},set:Object(c.k)(function(ye){ye!==B.model[H]?B.localValues.set(H,ye):B.localValues.delete(H)})}))}})}Object.defineProperty(D.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),D.prototype.submit=function(){var G=this;Object(c.B)(this.localValues).forEach(function(B){var H=G.localValues.get(B),Q=G.model[B];Object(c.y)(Q)?Q.replace(H):Object(c.z)(Q)?(Q.clear(),Q.merge(H)):Object(c.v)(H)||(G.model[B]=H)}),this.localValues.clear()},D.prototype.reset=function(){this.localValues.clear()},D.prototype.resetProperty=function(G){this.localValues.delete(G)},F([c.m],D.prototype,"isDirty",null),F([c.m],D.prototype,"changedValues",null),F([c.k.bound],D.prototype,"submit",null),F([c.k.bound],D.prototype,"reset",null),F([c.k.bound],D.prototype,"resetProperty",null)})();function oe(D){if(!D)return"ROOT";for(var G=[];D.parent;)G.push(D.path),D=D.parent;return G.reverse().join("/")}function q(D){return Object(c.A)(D)||Object(c.y)(D)||Object(c.z)(D)}function R(D,G){var B=new WeakMap;function H(se){var ye=B.get(se.object);(function(xe,ve){switch(xe.type){case"add":Q(xe.newValue,ve,xe.name);break;case"update":le(xe.oldValue),Q(xe.newValue,ve,xe.name||""+xe.index);break;case"remove":case"delete":le(xe.oldValue);break;case"splice":xe.removed.map(le),xe.added.forEach(function(ge,Ee){return Q(ge,ve,""+(xe.index+Ee))});for(var ae=xe.index+xe.addedCount;ae<xe.object.length;ae++)if(q(xe.object[ae])){var he=B.get(xe.object[ae]);he&&(he.path=""+ae)}}})(se,ye),G(se,oe(ye),D)}function Q(se,ye,xe){if(q(se)){var ve=B.get(se);if(ve){if(ve.parent!==ye||ve.path!==xe)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+oe(ye)+"/"+xe+"', but it already exists at '"+oe(ve.parent)+"/"+ve.path+"'")}else{var ae={parent:ye,path:xe,dispose:Object(c.D)(se,H)};B.set(se,ae),Object(c.p)(se).forEach(function(he){var ge=he[0];return Q(he[1],ae,ge)})}}}function le(se){if(q(se)){var ye=B.get(se);if(!ye)return;B.delete(se),ye.dispose(),Object(c.L)(se).forEach(le)}}return Q(D,void 0,""),function(){le(D)}}var Y,I=(Y=function(D,G){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,H){B.__proto__=H}||function(B,H){for(var Q in H)H.hasOwnProperty(Q)&&(B[Q]=H[Q])},Y(D,G)},function(D,G){function B(){this.constructor=D}Y(D,G),D.prototype=G===null?Object.create(G):(B.prototype=G.prototype,new B)});(function(D){function G(B,H,Q){var le=Q===void 0?{}:Q,se=le.name,ye=se===void 0?"ogm"+(1e3*Math.random()|0):se,xe=le.keyToName,ve=xe===void 0?function(ge){return""+ge}:xe,ae=D.call(this)||this;ae._keyToName=ve,ae._groupBy=H,ae._ogmInfoKey=Symbol("ogmInfo"+ye),ae._base=B;for(var he=0;he<B.length;he++)ae._addItem(B[he]);return ae._disposeBaseObserver=Object(c.D)(ae._base,function(ge){if(ge.type==="splice")Object(c.J)(function(){for(var Ee=0,Ie=ge.removed;Ee<Ie.length;Ee++){var Ye=Ie[Ee];ae._removeItem(Ye)}for(var Me=0,Re=ge.added;Me<Re.length;Me++){var Ke=Re[Me];ae._addItem(Ke)}});else{if(ge.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ae._removeItem(ge.oldValue),ae._addItem(ge.newValue)})}}),ae}I(G,D),G.prototype.clear=function(){throw new Error("not supported")},G.prototype.delete=function(B){throw new Error("not supported")},G.prototype.set=function(B,H){throw new Error("not supported")},G.prototype.dispose=function(){this._disposeBaseObserver();for(var B=0;B<this._base.length;B++){var H=this._base[B];H[this._ogmInfoKey].reaction(),delete H[this._ogmInfoKey]}},G.prototype._getGroupArr=function(B){var H=D.prototype.get.call(this,B);return H===void 0&&(H=Object(c.C)([],{name:"GroupArray["+this._keyToName(B)+"]",deep:!1}),D.prototype.set.call(this,B,H)),H},G.prototype._removeFromGroupArr=function(B,H){var Q=D.prototype.get.call(this,B);Q.length===1?D.prototype.delete.call(this,B):(H===Q.length-1||(Q[H]=Q[Q.length-1],Q[H][this._ogmInfoKey].groupArrIndex=H),Q.length--)},G.prototype._addItem=function(B){var H=this,Q=this._groupBy(B),le=this._getGroupArr(Q),se={groupByValue:Q,groupArrIndex:le.length,reaction:Object(c.F)(function(){return H._groupBy(B)},function(ye,xe){var ve=B[H._ogmInfoKey];H._removeFromGroupArr(ve.groupByValue,ve.groupArrIndex);var ae=H._getGroupArr(ye),he=ae.length;ae.push(B),ve.groupByValue=ye,ve.groupArrIndex=he})};Object.defineProperty(B,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:se}),le.push(B)},G.prototype._removeItem=function(B){var H=B[this._ogmInfoKey];this._removeFromGroupArr(H.groupByValue,H.groupArrIndex),H.reaction(),delete B[this._ogmInfoKey]}})(c.b),function(){function D(G,B){this.base=G,this.args=B,this.closestIdx=0,this.isDisposed=!1;for(var H=this.closest=this.root=G,Q=0;Q<this.args.length-1&&(H=H.get(B[Q]));Q++)this.closest=H;this.closestIdx=Q}return D.prototype.exists=function(){this.assertNotDisposed();var G=this.args.length;return this.closestIdx>=G-1&&this.closest.has(this.args[G-1])},D.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},D.prototype.set=function(G){this.assertNotDisposed();for(var B=this.args.length,H=this.closest,Q=this.closestIdx;Q<B-1;Q++){var le=new Map;H.set(this.args[Q],le),H=le}this.closestIdx=B-1,this.closest=H,H.set(this.args[B-1],G)},D.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var G=this.args.length;this.closest.delete(this.args[G-1]);for(var B=this.root,H=[B],Q=0;Q<G-1;Q++)B=B.get(this.args[Q]),H.push(B);for(Q=H.length-1;Q>0;Q--)H[Q].size===0&&H[Q-1].delete(this.args[Q-1]);this.isDisposed=!0},D.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},D}(),Promise.resolve(),typeof queueMicrotask<"u"||f!==void 0&&f.nextTick}).call(this,o(155))},function(s,l,o){var f;(function(c,v,b){if(c){for(var w,O={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},S={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},P={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},j={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},k=1;k<20;++k)O[111+k]="f"+k;for(k=0;k<=9;++k)O[k+96]=k.toString();q.prototype.bind=function(R,Y,I){var D=this;return R=R instanceof Array?R:[R],D._bindMultiple.call(D,R,Y,I),D},q.prototype.unbind=function(R,Y){return this.bind.call(this,R,function(){},Y)},q.prototype.trigger=function(R,Y){var I=this;return I._directMap[R+":"+Y]&&I._directMap[R+":"+Y]({},R),I},q.prototype.reset=function(){var R=this;return R._callbacks={},R._directMap={},R},q.prototype.stopCallback=function(R,Y){if((" "+Y.className+" ").indexOf(" mousetrap ")>-1||oe(Y,this.target))return!1;if("composedPath"in R&&typeof R.composedPath=="function"){var I=R.composedPath()[0];I!==R.target&&(Y=I)}return Y.tagName=="INPUT"||Y.tagName=="SELECT"||Y.tagName=="TEXTAREA"||Y.isContentEditable},q.prototype.handleKey=function(){var R=this;return R._handleKey.apply(R,arguments)},q.addKeycodes=function(R){for(var Y in R)R.hasOwnProperty(Y)&&(O[Y]=R[Y]);w=null},q.init=function(){var R=q(v);for(var Y in R)Y.charAt(0)!=="_"&&(q[Y]=function(I){return function(){return R[I].apply(R,arguments)}}(Y))},q.init(),c.Mousetrap=q,s.exports&&(s.exports=q),(f=function(){return q}.call(l,o,l,s))===void 0||(s.exports=f)}function A(R,Y,I){R.addEventListener?R.addEventListener(Y,I,!1):R.attachEvent("on"+Y,I)}function C(R){if(R.type=="keypress"){var Y=String.fromCharCode(R.which);return R.shiftKey||(Y=Y.toLowerCase()),Y}return O[R.which]?O[R.which]:S[R.which]?S[R.which]:String.fromCharCode(R.which).toLowerCase()}function z(R){return R=="shift"||R=="ctrl"||R=="alt"||R=="meta"}function F(R,Y,I){return I||(I=function(){if(!w)for(var D in w={},O)D>95&&D<112||O.hasOwnProperty(D)&&(w[O[D]]=D);return w}()[R]?"keydown":"keypress"),I=="keypress"&&Y.length&&(I="keydown"),I}function Z(R,Y){var I,D,G,B=[];for(I=function(H){return H==="+"?["+"]:(H=H.replace(/\+{2}/g,"+plus")).split("+")}(R),G=0;G<I.length;++G)D=I[G],j[D]&&(D=j[D]),Y&&Y!="keypress"&&P[D]&&(D=P[D],B.push("shift")),z(D)&&B.push(D);return{key:D,modifiers:B,action:Y=F(D,B,Y)}}function oe(R,Y){return R!==null&&R!==v&&(R===Y||oe(R.parentNode,Y))}function q(R){var Y=this;if(R=R||v,!(Y instanceof q))return new q(R);Y.target=R,Y._callbacks={},Y._directMap={};var I,D={},G=!1,B=!1,H=!1;function Q(ae){ae=ae||{};var he,ge=!1;for(he in D)ae[he]?ge=!0:D[he]=0;ge||(H=!1)}function le(ae,he,ge,Ee,Ie,Ye){var Me,Re,Ke,J,K=[],ue=ge.type;if(!Y._callbacks[ae])return[];for(ue=="keyup"&&z(ae)&&(he=[ae]),Me=0;Me<Y._callbacks[ae].length;++Me)if(Re=Y._callbacks[ae][Me],(Ee||!Re.seq||D[Re.seq]==Re.level)&&ue==Re.action&&(ue=="keypress"&&!ge.metaKey&&!ge.ctrlKey||(Ke=he,J=Re.modifiers,Ke.sort().join(",")===J.sort().join(",")))){var _e=!Ee&&Re.combo==Ie,ke=Ee&&Re.seq==Ee&&Re.level==Ye;(_e||ke)&&Y._callbacks[ae].splice(Me,1),K.push(Re)}return K}function se(ae,he,ge,Ee){Y.stopCallback(he,he.target||he.srcElement,ge,Ee)||ae(he,ge)===!1&&(function(Ie){Ie.preventDefault?Ie.preventDefault():Ie.returnValue=!1}(he),function(Ie){Ie.stopPropagation?Ie.stopPropagation():Ie.cancelBubble=!0}(he))}function ye(ae){typeof ae.which!="number"&&(ae.which=ae.keyCode);var he=C(ae);he&&(ae.type!="keyup"||G!==he?Y.handleKey(he,function(ge){var Ee=[];return ge.shiftKey&&Ee.push("shift"),ge.altKey&&Ee.push("alt"),ge.ctrlKey&&Ee.push("ctrl"),ge.metaKey&&Ee.push("meta"),Ee}(ae),ae):G=!1)}function xe(ae,he,ge,Ee){function Ie(Ke){return function(){H=Ke,++D[ae],clearTimeout(I),I=setTimeout(Q,1e3)}}function Ye(Ke){se(ge,Ke,ae),Ee!=="keyup"&&(G=C(Ke)),setTimeout(Q,10)}D[ae]=0;for(var Me=0;Me<he.length;++Me){var Re=Me+1===he.length?Ye:Ie(Ee||Z(he[Me+1]).action);ve(he[Me],Re,Ee,ae,Me)}}function ve(ae,he,ge,Ee,Ie){Y._directMap[ae+":"+ge]=he;var Ye,Me=(ae=ae.replace(/\s+/g," ")).split(" ");Me.length>1?xe(ae,Me,he,ge):(Ye=Z(ae,ge),Y._callbacks[Ye.key]=Y._callbacks[Ye.key]||[],le(Ye.key,Ye.modifiers,{type:Ye.action},Ee,ae,Ie),Y._callbacks[Ye.key][Ee?"unshift":"push"]({callback:he,modifiers:Ye.modifiers,action:Ye.action,seq:Ee,level:Ie,combo:ae}))}Y._handleKey=function(ae,he,ge){var Ee,Ie=le(ae,he,ge),Ye={},Me=0,Re=!1;for(Ee=0;Ee<Ie.length;++Ee)Ie[Ee].seq&&(Me=Math.max(Me,Ie[Ee].level));for(Ee=0;Ee<Ie.length;++Ee)if(Ie[Ee].seq){if(Ie[Ee].level!=Me)continue;Re=!0,Ye[Ie[Ee].seq]=1,se(Ie[Ee].callback,ge,Ie[Ee].combo,Ie[Ee].seq)}else Re||se(Ie[Ee].callback,ge,Ie[Ee].combo);var Ke=ge.type=="keypress"&&B;ge.type!=H||z(ae)||Ke||Q(Ye),B=Re&&ge.type=="keydown"},Y._bindMultiple=function(ae,he,ge){for(var Ee=0;Ee<ae.length;++Ee)ve(ae[Ee],he,ge)},A(R,"keypress",ye),A(R,"keydown",ye),A(R,"keyup",ye)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(s,l,o){var f=o(36),c=o(37),v=o(32),b=o(40),w=o(66);s.exports=f?Object.defineProperties:function(O,S){v(O);for(var P,j=b(S),k=w(S),A=k.length,C=0;A>C;)c.f(O,P=k[C++],j[P]);return O}},function(s,l,o){var f=o(7),c=o(35),v=o(28),b=o(33),w=f.TypeError;s.exports=function(O,S){var P,j;if(S==="string"&&v(P=O.toString)&&!b(j=c(P,O))||v(P=O.valueOf)&&!b(j=c(P,O))||S!=="string"&&v(P=O.toString)&&!b(j=c(P,O)))return j;throw w("Can't convert object to primitive value")}},function(s,l,o){var f=o(7),c=o(28),v=o(92),b=f.WeakMap;s.exports=c(b)&&/native code/.test(v(b))},function(s,l,o){var f=o(136).IteratorPrototype,c=o(54),v=o(71),b=o(73),w=o(70),O=function(){return this};s.exports=function(S,P,j,k){var A=P+" Iterator";return S.prototype=c(f,{next:v(+!k,j)}),b(S,A,!1,!0),w[A]=O,S}},function(s,l,o){var f=o(7),c=o(28),v=f.String,b=f.TypeError;s.exports=function(w){if(typeof w=="object"||c(w))return w;throw b("Can't set "+v(w)+" as a prototype")}},function(s,l,o){var f=o(17),c=o(7),v=o(15),b=o(95),w=o(44),O=o(138),S=o(114),P=o(117),j=o(28),k=o(33),A=o(19),C=o(118),z=o(73),F=o(143);s.exports=function(Z,oe,q){var R=Z.indexOf("Map")!==-1,Y=Z.indexOf("Weak")!==-1,I=R?"set":"add",D=c[Z],G=D&&D.prototype,B=D,H={},Q=function(ae){var he=v(G[ae]);w(G,ae,ae=="add"?function(ge){return he(this,ge===0?0:ge),this}:ae=="delete"?function(ge){return!(Y&&!k(ge))&&he(this,ge===0?0:ge)}:ae=="get"?function(ge){return Y&&!k(ge)?void 0:he(this,ge===0?0:ge)}:ae=="has"?function(ge){return!(Y&&!k(ge))&&he(this,ge===0?0:ge)}:function(ge,Ee){return he(this,ge===0?0:ge,Ee),this})};if(b(Z,!j(D)||!(Y||G.forEach&&!A(function(){new D().entries().next()}))))B=q.getConstructor(oe,Z,R,I),O.enable();else if(b(Z,!0)){var le=new B,se=le[I](Y?{}:-0,1)!=le,ye=A(function(){le.has(1)}),xe=C(function(ae){new D(ae)}),ve=!Y&&A(function(){for(var ae=new D,he=5;he--;)ae[I](he,he);return!ae.has(-0)});xe||((B=oe(function(ae,he){P(ae,G);var ge=F(new D,ae,B);return he!=null&&S(he,ge[I],{that:ge,AS_ENTRIES:R}),ge})).prototype=G,G.constructor=B),(ye||ve)&&(Q("delete"),Q("has"),R&&Q("get")),(ve||se)&&Q(I),Y&&G.clear&&delete G.clear}return H[Z]=B,f({global:!0,forced:B!=D},H),z(B,Z),Y||q.setStrong(B,Z,R),B}},function(s,l,o){var f=o(19),c=o(33),v=o(50),b=o(176),w=Object.isExtensible,O=f(function(){});s.exports=O||b?function(S){return!!c(S)&&(!b||v(S)!="ArrayBuffer")&&(!w||w(S))}:w},function(s,l,o){var f=o(19);s.exports=f(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(s,l,o){var f=o(19);s.exports=!f(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(s,l,o){var f=o(37).f,c=o(54),v=o(144),b=o(62),w=o(117),O=o(114),S=o(111),P=o(145),j=o(36),k=o(138).fastKey,A=o(56),C=A.set,z=A.getterFor;s.exports={getConstructor:function(F,Z,oe,q){var R=F(function(B,H){w(B,Y),C(B,{type:Z,index:c(null),first:void 0,last:void 0,size:0}),j||(B.size=0),H!=null&&O(H,B[q],{that:B,AS_ENTRIES:oe})}),Y=R.prototype,I=z(Z),D=function(B,H,Q){var le,se,ye=I(B),xe=G(B,H);return xe?xe.value=Q:(ye.last=xe={index:se=k(H,!0),key:H,value:Q,previous:le=ye.last,next:void 0,removed:!1},ye.first||(ye.first=xe),le&&(le.next=xe),j?ye.size++:B.size++,se!=="F"&&(ye.index[se]=xe)),B},G=function(B,H){var Q,le=I(B),se=k(H);if(se!=="F")return le.index[se];for(Q=le.first;Q;Q=Q.next)if(Q.key==H)return Q};return v(Y,{clear:function(){for(var B=I(this),H=B.index,Q=B.first;Q;)Q.removed=!0,Q.previous&&(Q.previous=Q.previous.next=void 0),delete H[Q.index],Q=Q.next;B.first=B.last=void 0,j?B.size=0:this.size=0},delete:function(B){var H=this,Q=I(H),le=G(H,B);if(le){var se=le.next,ye=le.previous;delete Q.index[le.index],le.removed=!0,ye&&(ye.next=se),se&&(se.previous=ye),Q.first==le&&(Q.first=se),Q.last==le&&(Q.last=ye),j?Q.size--:H.size--}return!!le},forEach:function(B){for(var H,Q=I(this),le=b(B,arguments.length>1?arguments[1]:void 0);H=H?H.next:Q.first;)for(le(H.value,H.key,this);H&&H.removed;)H=H.previous},has:function(B){return!!G(this,B)}}),v(Y,oe?{get:function(B){var H=G(this,B);return H&&H.value},set:function(B,H){return D(this,B===0?0:B,H)}}:{add:function(B){return D(this,B=B===0?0:B,B)}}),j&&f(Y,"size",{get:function(){return I(this).size}}),R},setStrong:function(F,Z,oe){var q=Z+" Iterator",R=z(Z),Y=z(q);S(F,Z,function(I,D){C(this,{type:q,target:I,state:R(I),kind:D,last:void 0})},function(){for(var I=Y(this),D=I.kind,G=I.last;G&&G.removed;)G=G.previous;return I.target&&(I.last=G=G?G.next:I.state.first)?D=="keys"?{value:G.key,done:!1}:D=="values"?{value:G.value,done:!1}:{value:[G.key,G.value],done:!1}:(I.target=void 0,{value:void 0,done:!0})},oe?"entries":"values",!oe,!0),P(Z)}}},function(s,l,o){var f=o(116),c=o(98);s.exports=f?{}.toString:function(){return"[object "+c(this)+"]"}},function(s,l,o){var f=o(74).forEach,c=o(120)("forEach");s.exports=c?[].forEach:function(v){return f(this,v,arguments.length>1?arguments[1]:void 0)}},function(s,l,o){var f=o(7),c=o(99),v=o(100),b=o(33),w=o(27)("species"),O=f.Array;s.exports=function(S){var P;return c(S)&&(P=S.constructor,(v(P)&&(P===O||c(P.prototype))||b(P)&&(P=P[w])===null)&&(P=void 0)),P===void 0?O:P}},function(s,l,o){var f=o(7);s.exports=f},function(s,l,o){var f=o(7),c=o(62),v=o(35),b=o(38),w=o(184),O=o(140),S=o(100),P=o(43),j=o(61),k=o(141),A=o(115),C=f.Array;s.exports=function(z){var F=b(z),Z=S(this),oe=arguments.length,q=oe>1?arguments[1]:void 0,R=q!==void 0;R&&(q=c(q,oe>2?arguments[2]:void 0));var Y,I,D,G,B,H,Q=A(F),le=0;if(!Q||this==C&&O(Q))for(Y=P(F),I=Z?new this(Y):C(Y);Y>le;le++)H=R?q(F[le],le):F[le],j(I,le,H);else for(B=(G=k(F,Q)).next,I=Z?new this:[];!(D=v(B,G)).done;le++)H=R?w(G,q,[D.value,le],!0):D.value,j(I,le,H);return I.length=le,I}},function(s,l,o){var f=o(32),c=o(142);s.exports=function(v,b,w,O){try{return O?b(f(w)[0],w[1]):b(w)}catch(S){c(v,"throw",S)}}},function(s,l,o){var f=o(32);s.exports=function(){var c=f(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(s,l,o){var f=o(19),c=o(7).RegExp;s.exports=f(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(s,l,o){var f=o(19),c=o(7).RegExp;s.exports=f(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(s,l,o){var f=o(17),c=o(15),v=o(55),b=o(38),w=o(43),O=o(41),S=o(19),P=o(189),j=o(120),k=o(190),A=o(191),C=o(65),z=o(192),F=[],Z=c(F.sort),oe=c(F.push),q=S(function(){F.sort(void 0)}),R=S(function(){F.sort(null)}),Y=j("sort"),I=!S(function(){if(C)return C<70;if(!(k&&k>3)){if(A)return!0;if(z)return z<603;var D,G,B,H,Q="";for(D=65;D<76;D++){switch(G=String.fromCharCode(D),D){case 66:case 69:case 70:case 72:B=3;break;case 68:case 71:B=4;break;default:B=2}for(H=0;H<47;H++)F.push({k:G+H,v:B})}for(F.sort(function(le,se){return se.v-le.v}),H=0;H<F.length;H++)G=F[H].k.charAt(0),Q.charAt(Q.length-1)!==G&&(Q+=G);return Q!=="DGBEFHACIJK"}});f({target:"Array",proto:!0,forced:q||!R||!Y||!I},{sort:function(D){D!==void 0&&v(D);var G=b(this);if(I)return D===void 0?Z(G):Z(G,D);var B,H,Q=[],le=w(G);for(H=0;H<le;H++)H in G&&oe(Q,G[H]);for(P(Q,function(se){return function(ye,xe){return xe===void 0?-1:ye===void 0?1:se!==void 0?+se(ye,xe)||0:O(ye)>O(xe)?1:-1}}(D)),B=Q.length,H=0;H<B;)G[H]=Q[H++];for(;H<le;)delete G[H++];return G}})},function(s,l,o){var f=o(113),c=Math.floor,v=function(O,S){var P=O.length,j=c(P/2);return P<8?b(O,S):w(O,v(f(O,0,j),S),v(f(O,j),S),S)},b=function(O,S){for(var P,j,k=O.length,A=1;A<k;){for(j=A,P=O[A];j&&S(O[j-1],P)>0;)O[j]=O[--j];j!==A++&&(O[j]=P)}return O},w=function(O,S,P,j){for(var k=S.length,A=P.length,C=0,z=0;C<k||z<A;)O[C+z]=C<k&&z<A?j(S[C],P[z])<=0?S[C++]:P[z++]:C<k?S[C++]:P[z++];return O};s.exports=v},function(s,l,o){var f=o(53).match(/firefox\/(\d+)/i);s.exports=!!f&&+f[1]},function(s,l,o){var f=o(53);s.exports=/MSIE|Trident/.test(f)},function(s,l,o){var f=o(53).match(/AppleWebKit\/(\d+)\./);s.exports=!!f&&+f[1]},function(s,l,o){var f=o(17),c=o(74).find,v=o(83),b="find",w=!0;b in[]&&Array(1).find(function(){w=!1}),f({target:"Array",proto:!0,forced:w},{find:function(O){return c(this,O,arguments.length>1?arguments[1]:void 0)}}),v(b)},function(s,l,o){var f=o(7),c=o(154),v=f.TypeError;s.exports=function(b){if(c(b))throw v("The method doesn't accept regular expressions");return b}},function(s,l,o){var f=o(27)("match");s.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[f]=!1,"/./"[c](v)}catch{}}return!1}},function(s,l,o){var f=o(94).PROPER,c=o(19),v=o(160);s.exports=function(b){return c(function(){return!!v[b]()||"​᠎"[b]()!=="​᠎"||f&&v[b].name!==b})}},function(s,l,o){var f=o(15);s.exports=f(1 .valueOf)},function(s,l,o){var f=o(15),c=o(38),v=Math.floor,b=f("".charAt),w=f("".replace),O=f("".slice),S=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,P=/\$([$&'`]|\d{1,2})/g;s.exports=function(j,k,A,C,z,F){var Z=A+j.length,oe=C.length,q=P;return z!==void 0&&(z=c(z),q=S),w(F,q,function(R,Y){var I;switch(b(Y,0)){case"$":return"$";case"&":return j;case"`":return O(k,0,A);case"'":return O(k,Z);case"<":I=z[O(Y,1,-1)];break;default:var D=+Y;if(D===0)return R;if(D>oe){var G=v(D/10);return G===0?R:G<=oe?C[G-1]===void 0?b(Y,1):C[G-1]+b(Y,1):R}I=C[D-1]}return I===void 0?"":I})}},function(s,l,o){var f=o(36),c=o(15),v=o(35),b=o(19),w=o(66),O=o(112),S=o(93),P=o(38),j=o(81),k=Object.assign,A=Object.defineProperty,C=c([].concat);s.exports=!k||b(function(){if(f&&k({b:1},k(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var z={},F={},Z=Symbol(),oe="abcdefghijklmnopqrst";return z[Z]=7,oe.split("").forEach(function(q){F[q]=q}),k({},z)[Z]!=7||w(k({},F)).join("")!=oe})?function(z,F){for(var Z=P(z),oe=arguments.length,q=1,R=O.f,Y=S.f;oe>q;)for(var I,D=j(arguments[q++]),G=R?C(w(D),R(D)):w(D),B=G.length,H=0;B>H;)I=G[H++],f&&!v(Y,D,I)||(Z[I]=D[I]);return Z}:k},function(s,l,o){var f=o(7),c=o(15),v=o(55),b=o(33),w=o(34),O=o(101),S=f.Function,P=c([].concat),j=c([].join),k={},A=function(C,z,F){if(!w(k,z)){for(var Z=[],oe=0;oe<z;oe++)Z[oe]="a["+oe+"]";k[z]=S("C,a","return new C("+j(Z,",")+")")}return k[z](C,F)};s.exports=S.bind||function(C){var z=v(this),F=z.prototype,Z=O(arguments,1),oe=function(){var q=P(Z,O(arguments));return this instanceof oe?A(z,q.length,q):z.apply(C,q)};return b(F)&&(oe.prototype=F),oe}},function(s,l,o){var f=o(34);s.exports=function(c){return c!==void 0&&(f(c,"value")||f(c,"writable"))}},function(s,l,o){var f=o(15),c=o(45),v=o(41),b=/"/g,w=f("".replace);s.exports=function(O,S,P,j){var k=v(c(O)),A="<"+S;return P!==""&&(A+=" "+P+'="'+w(v(j),b,"&quot;")+'"'),A+">"+k+"</"+S+">"}},function(s,l,o){var f=o(19);s.exports=function(c){return f(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(s,l,o){var f,c,v,b,w=o(17),O=o(64),S=o(7),P=o(46),j=o(35),k=o(205),A=o(44),C=o(144),z=o(97),F=o(73),Z=o(145),oe=o(55),q=o(28),R=o(33),Y=o(117),I=o(92),D=o(114),G=o(118),B=o(156),H=o(163).set,Q=o(206),le=o(209),se=o(210),ye=o(165),xe=o(211),ve=o(56),ae=o(95),he=o(27),ge=o(212),Ee=o(126),Ie=o(65),Ye=he("species"),Me="Promise",Re=ve.getterFor(Me),Ke=ve.set,J=ve.getterFor(Me),K=k&&k.prototype,ue=k,_e=K,ke=S.TypeError,we=S.document,qe=S.process,nt=ye.f,Ze=nt,Ve=!!(we&&we.createEvent&&S.dispatchEvent),me=q(S.PromiseRejectionEvent),He="unhandledrejection",te=!1,ze=ae(Me,function(){var W=I(ue),ce=W!==String(ue);if(!ce&&Ie===66||O&&!_e.finally)return!0;if(Ie>=51&&/native code/.test(W))return!1;var Ae=new ue(function(Xe){Xe(1)}),Ne=function(Xe){Xe(function(){},function(){})};return(Ae.constructor={})[Ye]=Ne,!(te=Ae.then(function(){})instanceof Ne)||!ce&&ge&&!me}),ut=ze||!G(function(W){ue.all(W).catch(function(){})}),gt=function(W){var ce;return!(!R(W)||!q(ce=W.then))&&ce},it=function(W,ce){if(!W.notified){W.notified=!0;var Ae=W.reactions;Q(function(){for(var Ne=W.value,Xe=W.state==1,lt=0;Ae.length>lt;){var Ht,$t,Ct,Rt=Ae[lt++],Be=Xe?Rt.ok:Rt.fail,We=Rt.resolve,et=Rt.reject,rt=Rt.domain;try{Be?(Xe||(W.rejection===2&&at(W),W.rejection=1),Be===!0?Ht=Ne:(rt&&rt.enter(),Ht=Be(Ne),rt&&(rt.exit(),Ct=!0)),Ht===Rt.promise?et(ke("Promise-chain cycle")):($t=gt(Ht))?j($t,Ht,We,et):We(Ht)):et(Ne)}catch(wt){rt&&!Ct&&rt.exit(),et(wt)}}W.reactions=[],W.notified=!1,ce&&!W.rejection&&St(W)})}},ht=function(W,ce,Ae){var Ne,Xe;Ve?((Ne=we.createEvent("Event")).promise=ce,Ne.reason=Ae,Ne.initEvent(W,!1,!0),S.dispatchEvent(Ne)):Ne={promise:ce,reason:Ae},!me&&(Xe=S["on"+W])?Xe(Ne):W===He&&se("Unhandled promise rejection",Ae)},St=function(W){j(H,S,function(){var ce,Ae=W.facade,Ne=W.value;if(Pt(W)&&(ce=xe(function(){Ee?qe.emit("unhandledRejection",Ne,Ae):ht(He,Ae,Ne)}),W.rejection=Ee||Pt(W)?2:1,ce.error))throw ce.value})},Pt=function(W){return W.rejection!==1&&!W.parent},at=function(W){j(H,S,function(){var ce=W.facade;Ee?qe.emit("rejectionHandled",ce):ht("rejectionhandled",ce,W.value)})},Dt=function(W,ce,Ae){return function(Ne){W(ce,Ne,Ae)}},U=function(W,ce,Ae){W.done||(W.done=!0,Ae&&(W=Ae),W.value=ce,W.state=2,it(W,!0))},ie=function(W,ce,Ae){if(!W.done){W.done=!0,Ae&&(W=Ae);try{if(W.facade===ce)throw ke("Promise can't be resolved itself");var Ne=gt(ce);Ne?Q(function(){var Xe={done:!1};try{j(Ne,ce,Dt(ie,Xe,W),Dt(U,Xe,W))}catch(lt){U(Xe,lt,W)}}):(W.value=ce,W.state=1,it(W,!1))}catch(Xe){U({done:!1},Xe,W)}}};if(ze&&(_e=(ue=function(W){Y(this,_e),oe(W),j(f,this);var ce=Re(this);try{W(Dt(ie,ce),Dt(U,ce))}catch(Ae){U(ce,Ae)}}).prototype,(f=function(W){Ke(this,{type:Me,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=C(_e,{then:function(W,ce){var Ae=J(this),Ne=Ae.reactions,Xe=nt(B(this,ue));return Xe.ok=!q(W)||W,Xe.fail=q(ce)&&ce,Xe.domain=Ee?qe.domain:void 0,Ae.parent=!0,Ne[Ne.length]=Xe,Ae.state!=0&&it(Ae,!1),Xe.promise},catch:function(W){return this.then(void 0,W)}}),c=function(){var W=new f,ce=Re(W);this.promise=W,this.resolve=Dt(ie,ce),this.reject=Dt(U,ce)},ye.f=nt=function(W){return W===ue||W===v?new c(W):Ze(W)},!O&&q(k)&&K!==Object.prototype)){b=K.then,te||(A(K,"then",function(W,ce){var Ae=this;return new ue(function(Ne,Xe){j(b,Ae,Ne,Xe)}).then(W,ce)},{unsafe:!0}),A(K,"catch",_e.catch,{unsafe:!0}));try{delete K.constructor}catch{}z&&z(K,_e)}w({global:!0,wrap:!0,forced:ze},{Promise:ue}),F(ue,Me,!1,!0),Z(Me),v=P(Me),w({target:Me,stat:!0,forced:ze},{reject:function(W){var ce=nt(this);return j(ce.reject,void 0,W),ce.promise}}),w({target:Me,stat:!0,forced:O||ze},{resolve:function(W){return le(O&&this===v?ue:this,W)}}),w({target:Me,stat:!0,forced:ut},{all:function(W){var ce=this,Ae=nt(ce),Ne=Ae.resolve,Xe=Ae.reject,lt=xe(function(){var Ht=oe(ce.resolve),$t=[],Ct=0,Rt=1;D(W,function(Be){var We=Ct++,et=!1;Rt++,j(Ht,ce,Be).then(function(rt){et||(et=!0,$t[We]=rt,--Rt||Ne($t))},Xe)}),--Rt||Ne($t)});return lt.error&&Xe(lt.value),Ae.promise},race:function(W){var ce=this,Ae=nt(ce),Ne=Ae.reject,Xe=xe(function(){var lt=oe(ce.resolve);D(W,function(Ht){j(lt,ce,Ht).then(Ae.resolve,Ne)})});return Xe.error&&Ne(Xe.value),Ae.promise}})},function(s,l,o){var f=o(7);s.exports=f.Promise},function(s,l,o){var f,c,v,b,w,O,S,P,j=o(7),k=o(62),A=o(51).f,C=o(163).set,z=o(164),F=o(207),Z=o(208),oe=o(126),q=j.MutationObserver||j.WebKitMutationObserver,R=j.document,Y=j.process,I=j.Promise,D=A(j,"queueMicrotask"),G=D&&D.value;G||(f=function(){var B,H;for(oe&&(B=Y.domain)&&B.exit();c;){H=c.fn,c=c.next;try{H()}catch(Q){throw c?b():v=void 0,Q}}v=void 0,B&&B.enter()},z||oe||Z||!q||!R?!F&&I&&I.resolve?((S=I.resolve(void 0)).constructor=I,P=k(S.then,S),b=function(){P(f)}):oe?b=function(){Y.nextTick(f)}:(C=k(C,j),b=function(){C(f)}):(w=!0,O=R.createTextNode(""),new q(f).observe(O,{characterData:!0}),b=function(){O.data=w=!w})),s.exports=G||function(B){var H={fn:B,next:void 0};v&&(v.next=H),c||(c=H,b()),v=H}},function(s,l,o){var f=o(53),c=o(7);s.exports=/ipad|iphone|ipod/i.test(f)&&c.Pebble!==void 0},function(s,l,o){var f=o(53);s.exports=/web0s(?!.*chrome)/i.test(f)},function(s,l,o){var f=o(32),c=o(33),v=o(165);s.exports=function(b,w){if(f(b),c(w)&&w.constructor===b)return w;var O=v.f(b);return(0,O.resolve)(w),O.promise}},function(s,l,o){var f=o(7);s.exports=function(c,v){var b=f.console;b&&b.error&&(arguments.length==1?b.error(c):b.error(c,v))}},function(s,l){s.exports=function(o){try{return{error:!1,value:o()}}catch(f){return{error:!0,value:f}}}},function(s,l){s.exports=typeof window=="object"},function(s,l,o){var f=o(36),c=o(15),v=o(66),b=o(40),w=c(o(93).f),O=c([].push),S=function(P){return function(j){for(var k,A=b(j),C=v(A),z=C.length,F=0,Z=[];z>F;)k=C[F++],f&&!w(A,k)||O(Z,P?[k,A[k]]:A[k]);return Z}};s.exports={entries:S(!0),values:S(!1)}},function(s,l,o){var f=o(38),c=o(67),v=o(43);s.exports=function(b){for(var w=f(this),O=v(w),S=arguments.length,P=c(S>1?arguments[1]:void 0,O),j=S>2?arguments[2]:void 0,k=j===void 0?O:c(j,O);k>P;)w[P++]=b;return w}},function(s,l,o){o.r(l),o.d(l,"observer",function(){return Fn}),o.d(l,"LogicFlow",function(){return af}),o.d(l,"h",function(){return te.g}),o.d(l,"LogicFlowUtil",function(){return f}),o.d(l,"BaseNode",function(){return br}),o.d(l,"RectNode",function(){return Jc}),o.d(l,"CircleNode",function(){return nl}),o.d(l,"PolygonNode",function(){return ul}),o.d(l,"DiamondNode",function(){return fl}),o.d(l,"EllipseNode",function(){return vl}),o.d(l,"TextNode",function(){return bl}),o.d(l,"HtmlNode",function(){return xl}),o.d(l,"BaseEdge",function(){return _i}),o.d(l,"LineEdge",function(){return Ll}),o.d(l,"PolylineEdge",function(){return Fl}),o.d(l,"BezierEdge",function(){return Yl}),o.d(l,"Arrow",function(){return LO}),o.d(l,"BaseEdgeModel",function(){return bs}),o.d(l,"BezierEdgeModel",function(){return uc}),o.d(l,"LineEdgeModel",function(){return Es}),o.d(l,"PolylineEdgeModel",function(){return Ms}),o.d(l,"BaseNodeModel",function(){return mr}),o.d(l,"CircleNodeModel",function(){return dc}),o.d(l,"DiamondNodeModel",function(){return mc}),o.d(l,"EllipseNodeModel",function(){return wc}),o.d(l,"PolygonNodeModel",function(){return Mc}),o.d(l,"RectNodeModel",function(){return Nc}),o.d(l,"TextNodeModel",function(){return Ic}),o.d(l,"HtmlNodeModel",function(){return Bc}),o.d(l,"EditConfigModel",function(){return Qf}),o.d(l,"GraphModel",function(){return Ud}),o.d(l,"SnaplineModel",function(){return Ey}),o.d(l,"Keyboard",function(){return lv}),o.d(l,"get",function(){return hh}),o.d(l,"defaults",function(){return vh}),o.d(l,"ElementState",function(){return Ot}),o.d(l,"ModelType",function(){return dt}),o.d(l,"ElementType",function(){return Ft}),o.d(l,"EventType",function(){return tt}),o.d(l,"formateAnchorConnectValidateData",function(){return ii});var f={};o.r(f),o.d(f,"createUuid",function(){return Dr}),o.d(f,"refreshGraphId",function(){return Hm}),o.d(f,"createDrag",function(){return vb}),o.d(f,"StepDrag",function(){return hr});var c=o(1),v=o(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var b=o(42),w=Object(b.b)("observerBatching");function O(e){e()}var S=!1;function P(){return S}function j(e){return Object(c.t)(e)}var k,A=1e4,C=new Set;function z(){k===void 0&&(k=setTimeout(F,1e4))}function F(){k=void 0;var e=Date.now();C.forEach(function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,C.delete(t))}),C.size>0&&z()}var Z=!1,oe=[],q={};function R(e){return"observer"+e}function Y(e,t,n){t===void 0&&(t="observed"),n===void 0&&(n=q),P();var r,a=function(_){return function(){Z?oe.push(_):_()}}((n.useForceUpdate||b.d)()),i=v.d.useRef(null);if(!i.current){var u=new c.c(R(t),function(){p.mounted?a():(u.dispose(),i.current=null)}),p=function(_){return{cleanAt:Date.now()+A,reaction:_}}(u);i.current=p,r=i,C.add(r),z()}var h=i.current.reaction;return v.d.useDebugValue(h,j),v.d.useEffect(function(){var _;return _=i,C.delete(_),i.current?i.current.mounted=!0:(i.current={reaction:new c.c(R(t),function(){a()}),cleanAt:1/0},a()),function(){i.current.reaction.dispose(),i.current=null}},[]),function(_){Z=!0,oe=[];try{var x=_();Z=!1;var M=oe.length>0?oe:void 0;return v.d.useLayoutEffect(function(){M&&M.forEach(function(T){return T()})},[M]),x}finally{Z=!1}}(function(){var _,x;if(h.track(function(){try{_=e()}catch(M){x=M}}),x)throw x;return _})}var I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},I.apply(this,arguments)};function D(e,t){var n,r,a,i=I({forwardRef:!1},t),u=e.displayName||e.name,p=function(h,_){return Y(function(){return e(h,_)},u)};return p.displayName=u,n=i.forwardRef?Object(v.f)(Object(v.e)(p)):Object(v.f)(p),r=e,a=n,Object.keys(r).forEach(function(h){G[h]||Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(r,h))}),n.displayName=u,n}var G={$$typeof:!0,render:!0,compare:!0,type:!0};function B(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:Y(r)}function H(e,t,n,r,a){var i=t==="children"?"render":"children",u=typeof e[t]=="function",p=typeof e[i]=="function";return u&&p?new Error("MobX Observer: Do not use children and render in the same time in`"+n):u||p?null:new Error("Invalid prop `"+a+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}B.propTypes={children:H,render:H},B.displayName="Observer";var Q;(Q=v.g)||(Q=O),Object(c.n)({reactionScheduler:Q}),Object(b.a)()[w]=!0;var le=0,se={};function ye(e){return se[e]||(se[e]=function(t){if(typeof Symbol=="function")return Symbol(t);var n="__$mobx-react "+t+" ("+le+")";return le++,n}(e)),se[e]}function xe(e,t){if(ve(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.hasOwnProperty.call(t,n[a])||!ve(e[n[a]],t[n[a]]))return!1;return!0}function ve(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ae(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var he=ye("patchMixins"),ge=ye("patchedDefinition");function Ee(e,t){for(var n=this,r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t.locks++;try{var u;return e!=null&&(u=e.apply(this,a)),u}finally{t.locks--,t.locks===0&&t.methods.forEach(function(p){p.apply(n,a)})}}function Ie(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];Ee.call.apply(Ee,[this,e,t].concat(r))}}function Ye(e,t,n){var r=function(p,h){var _=p[he]=p[he]||{},x=_[h]=_[h]||{};return x.locks=x.locks||0,x.methods=x.methods||[],x}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var a=Object.getOwnPropertyDescriptor(e,t);if(!a||!a[ge]){var i=e[t],u=Me(e,t,a?a.enumerable:void 0,r,i);Object.defineProperty(e,t,u)}}function Me(e,t,n,r,a){var i,u=Ie(a,r);return(i={})[ge]=!0,i.get=function(){return u},i.set=function(p){if(this===e)u=Ie(p,r);else{var h=Me(this,t,n,r,p);Object.defineProperty(this,t,h)}},i.configurable=!0,i.enumerable=n,i}var Re=c.a||"$mobx",Ke=ye("isMobXReactObserver"),J=ye("isUnmounted"),K=ye("skipRender"),ue=ye("isForcingUpdate");function _e(e){var t=e.prototype;if(e[Ke]?ke(t):e[Ke]=!0,t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==v.b)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==qe)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=qe;nt(t,"props"),nt(t,"state");var n=t.render;return t.render=function(){return we.call(this,n)},Ye(t,"componentWillUnmount",function(){var r;(r=this.render[Re])===null||r===void 0||r.dispose(),this[J]=!0,!this.render[Re]&&ke(this)}),e}function ke(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function we(e){var t=this;ae(this,K,!1),ae(this,ue,!1);var n=ke(this),r=e.bind(this),a=!1,i=new c.c(n+".render()",function(){if(!a&&(a=!0,t[J]!==!0)){var p=!0;try{ae(t,ue,!0),t[K]||v.a.prototype.forceUpdate.call(t),p=!1}finally{ae(t,ue,!1),p&&i.dispose()}}});function u(){a=!1;var p=void 0,h=void 0;if(i.track(function(){try{h=Object(c.d)(!1,r)}catch(_){p=_}}),p)throw p;return h}return i.reactComponent=this,u[Re]=i,this.render=u,u.call(this)}function qe(e,t){return this.state!==t||!xe(this.props,e)}function nt(e,t){var n=ye("reactProp_"+t+"_valueHolder"),r=ye("reactProp_"+t+"_atomHolder");function a(){return this[r]||ae(this,r,Object(c.o)("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var i=!1;return c.f&&c.e&&(i=Object(c.f)(!0)),a.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(i),this[n]},set:function(i){this[ue]||xe(this[n],i)?ae(this,n,i):(ae(this,n,i),ae(this,K,!0),a.call(this).reportChanged(),ae(this,K,!1))}})}var Ze=typeof Symbol=="function"&&Symbol.for,Ve=Ze?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(e){return null}).$$typeof,me=Ze?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(e){return null}).$$typeof;function He(e){if(e.isMobxInjector,me&&e.$$typeof===me)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Ve&&e.$$typeof===Ve){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var n=arguments;return Object(v.c)(B,null,function(){return t.apply(void 0,n)})})}return typeof e!="function"||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(v.a,e)?_e(e):D(e)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var te=o(0);o(3),o(60),o(2),o(6),o(4),o(11),o(39),o(29),o(22),o(20),o(5),o(23),o(21),o(25),o(8),o(9),o(16),o(24),o(18),o(188),o(193),o(103),o(152),o(153);var ze=function(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},ut=function(){this.__data__=[],this.size=0},gt=function(e,t){return e===t||e!=e&&t!=t},it=function(e,t){for(var n=e.length;n--;)if(gt(e[n][0],t))return n;return-1},ht=Array.prototype.splice,St=function(e){var t=this.__data__,n=it(t,e);return!(n<0)&&(n==t.length-1?t.pop():ht.call(t,n,1),--this.size,!0)},Pt=function(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]},at=function(e){return it(this.__data__,e)>-1},Dt=function(e,t){var n=this.__data__,r=it(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function U(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}U.prototype.clear=ut,U.prototype.delete=St,U.prototype.get=Pt,U.prototype.has=at,U.prototype.set=Dt;var ie=U,W=function(){this.__data__=new ie,this.size=0},ce=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ae=function(e){return this.__data__.get(e)},Ne=function(e){return this.__data__.has(e)},Xe=o(31),lt=Xe.a.Symbol,Ht=Object.prototype,$t=Ht.hasOwnProperty,Ct=Ht.toString,Rt=lt?lt.toStringTag:void 0,Be=function(e){var t=$t.call(e,Rt),n=e[Rt];try{e[Rt]=void 0;var r=!0}catch{}var a=Ct.call(e);return r&&(t?e[Rt]=n:delete e[Rt]),a},We=Object.prototype.toString,et=function(e){return We.call(e)},rt=lt?lt.toStringTag:void 0,wt=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?Be(e):et(e)},At=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},sr,Xn=function(e){if(!At(e))return!1;var t=wt(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Un=Xe.a["__core-js_shared__"],Yr=(sr=/[^.]+$/.exec(Un&&Un.keys&&Un.keys.IE_PROTO||""))?"Symbol(src)_1."+sr:"",zu=function(e){return!!Yr&&Yr in e},Uo=Function.prototype.toString,Pn=function(e){if(e!=null){try{return Uo.call(e)}catch{}try{return e+""}catch{}}return""},Ri=/^\[object .+?Constructor\]$/,Fe=Function.prototype,Bu=Object.prototype,Ii=Fe.toString,Li=Bu.hasOwnProperty,gn=RegExp("^"+Ii.call(Li).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mn=function(e){return!(!At(e)||zu(e))&&(Xn(e)?gn:Ri).test(Pn(e))},zi=function(e,t){return e==null?void 0:e[t]},Vn=function(e,t){var n=zi(e,t);return mn(n)?n:void 0},jr=Vn(Xe.a,"Map"),Ln=Vn(Object,"create"),Vo=function(){this.__data__=Ln?Ln(null):{},this.size=0},Bi=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gu=Object.prototype.hasOwnProperty,so=function(e){var t=this.__data__;if(Ln){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Gu.call(t,e)?t[e]:void 0},Hu=Object.prototype.hasOwnProperty,Gi=function(e){var t=this.__data__;return Ln?t[e]!==void 0:Hu.call(t,e)},Fu=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ln&&t===void 0?"__lodash_hash_undefined__":t,this};function cr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cr.prototype.clear=Vo,cr.prototype.delete=Bi,cr.prototype.get=so,cr.prototype.has=Gi,cr.prototype.set=Fu;var Hi=cr,Yn=function(){this.size=0,this.__data__={hash:new Hi,map:new(jr||ie),string:new Hi}},Xu=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},co=function(e,t){var n=e.__data__;return Xu(t)?n[typeof t=="string"?"string":"hash"]:n.map},Yo=function(e){var t=co(this,e).delete(e);return this.size-=t?1:0,t},Wo=function(e){return co(this,e).get(e)},Uu=function(e){return co(this,e).has(e)},Fi=function(e,t){var n=co(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Pr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pr.prototype.clear=Yn,Pr.prototype.delete=Yo,Pr.prototype.get=Wo,Pr.prototype.has=Uu,Pr.prototype.set=Fi;var Mr=Pr,Xi=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!jr||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Mr(r)}return n.set(e,t),this.size=n.size,this};function kr(e){var t=this.__data__=new ie(e);this.size=t.size}kr.prototype.clear=W,kr.prototype.delete=ce,kr.prototype.get=Ae,kr.prototype.has=Ne,kr.prototype.set=Xi;var Wn=kr,Ui=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Vi=function(e){return this.__data__.has(e)};function Wr(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Mr;++t<n;)this.add(e[t])}Wr.prototype.add=Wr.prototype.push=Ui,Wr.prototype.has=Vi;var Yi=Wr,Vu=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Wi=function(e,t){return e.has(t)},$i=function(e,t,n,r,a,i){var u=1&n,p=e.length,h=t.length;if(p!=h&&!(u&&h>p))return!1;var _=i.get(e),x=i.get(t);if(_&&x)return _==t&&x==e;var M=-1,T=!0,L=2&n?new Yi:void 0;for(i.set(e,t),i.set(t,e);++M<p;){var V=e[M],$=t[M];if(r)var ne=u?r($,V,M,t,e,i):r(V,$,M,e,t,i);if(ne!==void 0){if(ne)continue;T=!1;break}if(L){if(!Vu(t,function(re,de){if(!Wi(L,de)&&(V===re||a(V,re,n,r,i)))return L.push(de)})){T=!1;break}}else if(V!==$&&!a(V,$,n,r,i)){T=!1;break}}return i.delete(e),i.delete(t),T},$r=Xe.a.Uint8Array,Ki=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n},Yu=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},qi=lt?lt.prototype:void 0,$o=qi?qi.valueOf:void 0,Kr=function(e,t,n,r,a,i,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new $r(e),new $r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return gt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=Ki;case"[object Set]":var h=1&r;if(p||(p=Yu),e.size!=t.size&&!h)return!1;var _=u.get(e);if(_)return _==t;r|=2,u.set(e,t);var x=$i(p(e),p(t),r,a,i,u);return u.delete(e),x;case"[object Symbol]":if($o)return $o.call(e)==$o.call(t)}return!1},$n=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},Zt=Array.isArray,Zi=function(e,t,n){var r=t(e);return Zt(e)?r:$n(r,n(e))},Ji=function(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var u=e[n];t(u,n,e)&&(i[a++]=u)}return i},Qi=function(){return[]},Wu=Object.prototype.propertyIsEnumerable,lr=Object.getOwnPropertySymbols,Mn=lr?function(e){return e==null?[]:(e=Object(e),Ji(lr(e),function(t){return Wu.call(e,t)}))}:Qi,$u=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},kn=function(e){return e!=null&&typeof e=="object"},bn=function(e){return kn(e)&&wt(e)=="[object Arguments]"},ea=Object.prototype,ta=ea.hasOwnProperty,Ku=ea.propertyIsEnumerable,lo=bn(function(){return arguments}())?bn:function(e){return kn(e)&&ta.call(e,"callee")&&!Ku.call(e,"callee")},Kn=lo,qr=o(48),qu=/^(?:0|[1-9]\d*)$/,rn=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&qu.test(e))&&e>-1&&e%1==0&&e<t},fr=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},vt={};vt["[object Float32Array]"]=vt["[object Float64Array]"]=vt["[object Int8Array]"]=vt["[object Int16Array]"]=vt["[object Int32Array]"]=vt["[object Uint8Array]"]=vt["[object Uint8ClampedArray]"]=vt["[object Uint16Array]"]=vt["[object Uint32Array]"]=!0,vt["[object Arguments]"]=vt["[object Array]"]=vt["[object ArrayBuffer]"]=vt["[object Boolean]"]=vt["[object DataView]"]=vt["[object Date]"]=vt["[object Error]"]=vt["[object Function]"]=vt["[object Map]"]=vt["[object Number]"]=vt["[object Object]"]=vt["[object RegExp]"]=vt["[object Set]"]=vt["[object String]"]=vt["[object WeakMap]"]=!1;var _n=function(e){return kn(e)&&fr(e.length)&&!!vt[wt(e)]},pr=function(e){return function(t){return e(t)}},Kt=o(49),na=Kt.a&&Kt.a.isTypedArray,Ko=na?pr(na):_n,ra=Object.prototype.hasOwnProperty,Tn=function(e,t){var n=Zt(e),r=!n&&Kn(e),a=!n&&!r&&Object(qr.a)(e),i=!n&&!r&&!a&&Ko(e),u=n||r||a||i,p=u?$u(e.length,String):[],h=p.length;for(var _ in e)!t&&!ra.call(e,_)||u&&(_=="length"||a&&(_=="offset"||_=="parent")||i&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||rn(_,h))||p.push(_);return p},oa=Object.prototype,fo=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||oa)},An=function(e,t){return function(n){return e(t(n))}},ia=An(Object.keys,Object),Zu=Object.prototype.hasOwnProperty,qo=function(e){if(!fo(e))return ia(e);var t=[];for(var n in Object(e))Zu.call(e,n)&&n!="constructor"&&t.push(n);return t},It=function(e){return e!=null&&fr(e.length)&&!Xn(e)},Tr=function(e){return It(e)?Tn(e):qo(e)},po=function(e){return Zi(e,Tr,Mn)},dn=Object.prototype.hasOwnProperty,aa=function(e,t,n,r,a,i){var u=1&n,p=po(e),h=p.length;if(h!=po(t).length&&!u)return!1;for(var _=h;_--;){var x=p[_];if(!(u?x in t:dn.call(t,x)))return!1}var M=i.get(e),T=i.get(t);if(M&&T)return M==t&&T==e;var L=!0;i.set(e,t),i.set(t,e);for(var V=u;++_<h;){var $=e[x=p[_]],ne=t[x];if(r)var re=u?r(ne,$,x,t,e,i):r($,ne,x,e,t,i);if(!(re===void 0?$===ne||a($,ne,n,r,i):re)){L=!1;break}V||(V=x=="constructor")}if(L&&!V){var de=e.constructor,Oe=t.constructor;de==Oe||!("constructor"in e)||!("constructor"in t)||typeof de=="function"&&de instanceof de&&typeof Oe=="function"&&Oe instanceof Oe||(L=!1)}return i.delete(e),i.delete(t),L},Zr=Vn(Xe.a,"DataView"),ho=Vn(Xe.a,"Promise"),yo=Vn(Xe.a,"Set"),vo=Vn(Xe.a,"WeakMap"),ua="[object Map]",hn="[object Promise]",On="[object Set]",Ar="[object WeakMap]",Zo="[object DataView]",Jo=Pn(Zr),Qo=Pn(jr),sa=Pn(ho),Ju=Pn(yo),go=Pn(vo),dr=wt;(Zr&&dr(new Zr(new ArrayBuffer(1)))!=Zo||jr&&dr(new jr)!=ua||ho&&dr(ho.resolve())!=hn||yo&&dr(new yo)!=On||vo&&dr(new vo)!=Ar)&&(dr=function(e){var t=wt(e),n=t=="[object Object]"?e.constructor:void 0,r=n?Pn(n):"";if(r)switch(r){case Jo:return Zo;case Qo:return ua;case sa:return hn;case Ju:return On;case go:return Ar}return t});var g=dr,m="[object Arguments]",E="[object Array]",N="[object Object]",X=Object.prototype.hasOwnProperty,ee=function(e,t,n,r,a,i){var u=Zt(e),p=Zt(t),h=u?E:g(e),_=p?E:g(t),x=(h=h==m?N:h)==N,M=(_=_==m?N:_)==N,T=h==_;if(T&&Object(qr.a)(e)){if(!Object(qr.a)(t))return!1;u=!0,x=!1}if(T&&!x)return i||(i=new Wn),u||Ko(e)?$i(e,t,n,r,a,i):Kr(e,t,h,n,r,a,i);if(!(1&n)){var L=x&&X.call(e,"__wrapped__"),V=M&&X.call(t,"__wrapped__");if(L||V){var $=L?e.value():e,ne=V?t.value():t;return i||(i=new Wn),a($,ne,n,r,i)}}return!!T&&(i||(i=new Wn),aa(e,t,n,r,a,i))},pe=function e(t,n,r,a,i){return t===n||(t==null||n==null||!kn(t)&&!kn(n)?t!=t&&n!=n:ee(t,n,r,a,e,i))},je=function(e,t,n,r){var a=n.length,i=a,u=!r;if(e==null)return!i;for(e=Object(e);a--;){var p=n[a];if(u&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<i;){var h=(p=n[a])[0],_=e[h],x=p[1];if(u&&p[2]){if(_===void 0&&!(h in e))return!1}else{var M=new Wn;if(r)var T=r(_,x,h,e,t,M);if(!(T===void 0?pe(x,_,3,r,M):T))return!1}}return!0},Ge=function(e){return e==e&&!At(e)},pt=function(e){for(var t=Tr(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ge(a)]}return t},ot=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},xt=function(e){var t=pt(e);return t.length==1&&t[0][2]?ot(t[0][0],t[0][1]):function(n){return n===e||je(n,e,t)}},ct=function(e){return typeof e=="symbol"||kn(e)&&wt(e)=="[object Symbol]"},_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/,kt=function(e,t){if(Zt(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!ct(e))||wn.test(e)||!_t.test(e)||t!=null&&e in Object(t)};function on(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var u=e.apply(this,r);return n.cache=i.set(a,u)||i,u};return n.cache=new(on.Cache||Mr),n}on.Cache=Mr;var Jr=on,Qu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ca=/\\(\\)?/g,la=function(e){var t=Jr(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Qu,function(n,r,a,i){t.push(a?i.replace(ca,"$1"):r||n)}),t}),mo=lt?lt.prototype:void 0,ei=mo?mo.toString:void 0,an=function e(t){if(typeof t=="string")return t;if(Zt(t))return ze(t,e)+"";if(ct(t))return ei?ei.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},fa=function(e){return e==null?"":an(e)},Qr=function(e,t){return Zt(e)?e:kt(e,t)?[e]:la(fa(e))},ti=function(e){if(typeof e=="string"||ct(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},es=function(e,t){for(var n=0,r=(t=Qr(t,e)).length;e!=null&&n<r;)e=e[ti(t[n++])];return n&&n==r?e:void 0},jf=function(e,t,n){var r=e==null?void 0:es(e,t);return r===void 0?n:r},Pg=function(e,t){return e!=null&&t in Object(e)},Mg=function(e,t,n){for(var r=-1,a=(t=Qr(t,e)).length,i=!1;++r<a;){var u=ti(t[r]);if(!(i=e!=null&&n(e,u)))break;e=e[u]}return i||++r!=a?i:!!(a=e==null?0:e.length)&&fr(a)&&rn(u,a)&&(Zt(e)||Kn(e))},Pf=function(e,t){return e!=null&&Mg(e,t,Pg)},kg=function(e,t){return kt(e)&&Ge(t)?ot(ti(e),t):function(n){var r=jf(n,e);return r===void 0&&r===t?Pf(n,e):pe(t,r,3)}},ts=function(e){return e},Tg=function(e){return function(t){return t==null?void 0:t[e]}},Ag=function(e){return function(t){return es(t,e)}},Ng=function(e){return kt(e)?Tg(ti(e)):Ag(e)},Dg=function(e){return typeof e=="function"?e:e==null?ts:typeof e=="object"?Zt(e)?kg(e[0],e[1]):xt(e):Ng(e)},Mf=function(e){return function(t,n,r){for(var a=-1,i=Object(t),u=r(t),p=u.length;p--;){var h=u[e?p:++a];if(n(i[h],h,i)===!1)break}return t}}(),Cg=function(e,t){return function(n,r){if(n==null)return n;if(!It(n))return e(n,r);for(var a=n.length,i=t?a:-1,u=Object(n);(t?i--:++i<a)&&r(u[i],i,u)!==!1;);return n}}(function(e,t){return e&&Mf(e,t,Tr)}),Rg=function(e,t){var n=-1,r=It(e)?Array(e.length):[];return Cg(e,function(a,i,u){r[++n]=t(a,i,u)}),r},pa=function(e,t){return(Zt(e)?ze:Rg)(e,Dg(t))};Object(c.n)({isolateGlobalState:!0});var da=function(){try{var e=Vn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ns=function(e,t,n){t=="__proto__"&&da?da(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Ig=Object.prototype.hasOwnProperty,ha=function(e,t,n){var r=e[t];Ig.call(e,t)&&gt(r,n)&&(n!==void 0||t in e)||ns(e,t,n)},bo=function(e,t,n,r){var a=!n;n||(n={});for(var i=-1,u=t.length;++i<u;){var p=t[i],h=r?r(n[p],e[p],p,n,e):void 0;h===void 0&&(h=e[p]),a?ns(n,p,h):ha(n,p,h)}return n},Lg=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},kf=Math.max,Tf=function(e,t,n){return t=kf(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=kf(r.length-t,0),u=Array(i);++a<i;)u[a]=r[t+a];a=-1;for(var p=Array(t+1);++a<t;)p[a]=r[a];return p[t]=n(u),Lg(e,this,p)}},zg=function(e){return function(){return e}},Bg=da?function(e,t){return da(e,"toString",{configurable:!0,enumerable:!1,value:zg(t),writable:!0})}:ts,Gg=Date.now,Hg=function(e){var t=0,n=0;return function(){var r=Gg(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Af=Hg(Bg),Fg=function(e,t){return Af(Tf(e,t,ts),e+"")},Xg=function(e,t,n){if(!At(n))return!1;var r=typeof t;return!!(r=="number"?It(n)&&rn(t,n.length):r=="string"&&t in n)&&gt(n[t],e)},Nf=function(e){return Fg(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,u=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,u&&Xg(n[0],n[1],u)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var p=n[r];p&&e(t,p,r,i)}return t})},Ug=Object.prototype.hasOwnProperty,un=Nf(function(e,t){if(fo(t)||It(t))bo(t,Tr(t),e);else for(var n in t)Ug.call(t,n)&&ha(e,n,t[n])}),Vg=function(e,t,n,r){if(!At(e))return e;for(var a=-1,i=(t=Qr(t,e)).length,u=i-1,p=e;p!=null&&++a<i;){var h=ti(t[a]),_=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(a!=u){var x=p[h];(_=r?r(x,h,p):void 0)===void 0&&(_=At(x)?x:rn(t[a+1])?[]:{})}ha(p,h,_),p=p[h]}return e},Yg=function(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var u=t[r],p=es(e,u);n(p,u)&&Vg(i,Qr(u,e),p)}return i},Wg=function(e,t){return Yg(e,t,function(n,r){return Pf(e,r)})},Df=lt?lt.isConcatSpreadable:void 0,$g=function(e){return Zt(e)||Kn(e)||!!(Df&&e&&e[Df])},Kg=function e(t,n,r,a,i){var u=-1,p=t.length;for(r||(r=$g),i||(i=[]);++u<p;){var h=t[u];n>0&&r(h)?n>1?e(h,n-1,r,a,i):$n(i,h):a||(i[i.length]=h)}return i},qg=function(e){return e!=null&&e.length?Kg(e,1):[]},Lt,Cf,Rf,If,Lf,zf,Bf,Gf,Hf,Ff,Xf,Uf,Vf,Yf,Wf,$f,Kf,qf,ni=function(e){return Af(Tf(e,void 0,qg),e+"")}(function(e,t){return e==null?{}:Wg(e,t)});function Jt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Ot,Jf,dt,Ft,tt,Tt,Jg={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},rs=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Qf=(Cf=qt((Lt=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),Jt(this,"isSilentMode",Cf,this),Jt(this,"stopZoomGraph",Rf,this),Jt(this,"stopScrollGraph",If,this),Jt(this,"stopMoveGraph",Lf,this),Jt(this,"adjustEdge",zf,this),Jt(this,"adjustEdgeMiddle",Bf,this),Jt(this,"adjustEdgeStartAndEnd",Gf,this),Jt(this,"adjustNodePosition",Hf,this),Jt(this,"hideAnchors",Ff,this),Jt(this,"hoverOutline",Xf,this),Jt(this,"nodeSelectedOutline",Uf,this),Jt(this,"edgeSelectedOutline",Vf,this),Jt(this,"nodeTextEdit",Yf,this),Jt(this,"edgeTextEdit",Wf,this),Jt(this,"nodeTextDraggable",$f,this),Jt(this,"edgeTextDraggable",Kf,this),Jt(this,"autoExpand",qf,this),Zf(this,"multipleSelectKey",""),Zf(this,"defaultConfig",{}),un(this,this.getConfigDetail(r))}var t,n;return t=e,(n=[{key:"updateEditConfig",value:function(r){var a=this.getConfigDetail(r);un(this,a)}},{key:"getConfigDetail",value:function(r){var a=r.isSilentMode,i=r.textEdit,u={};if(a===!1&&un(u,this.defaultConfig),a===!0){var p=ni(Jg,rs);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},un(u,p)}i===!1&&un(u,{nodeTextEdit:!1,edgeTextEdit:!1});var h=ni(r,rs);return un(u,h)}},{key:"getConfig",value:function(){return ni(this,rs)}}])&&Zg(t.prototype,n),e}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rf=qt(Lt.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),If=qt(Lt.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lf=qt(Lt.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zf=qt(Lt.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Bf=qt(Lt.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gf=qt(Lt.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hf=qt(Lt.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ff=qt(Lt.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xf=qt(Lt.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Uf=qt(Lt.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vf=qt(Lt.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Yf=qt(Lt.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Wf=qt(Lt.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$f=qt(Lt.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=qt(Lt.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qf=qt(Lt.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt(Lt.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Lt.prototype,"updateEditConfig"),Lt.prototype),Lt);o(63),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Ot||(Ot={})),function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"}(Jf||(Jf={})),function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"}(dt||(dt={})),function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"}(Ft||(Ft={})),function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"}(tt||(tt={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(Tt||(Tt={}));var xn,zt,ep,tp,np,rp,op,ip,ap;function ya(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return up(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return up(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function up(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Qg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(xn||(xn={}));var em=(zt=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),os(this,"MINI_SCALE_SIZE",.2),os(this,"MAX_SCALE_SIZE",16),eo(this,"SCALE_X",ep,this),eo(this,"SKEW_Y",tp,this),eo(this,"SKEW_X",np,this),eo(this,"SCALE_Y",rp,this),eo(this,"TRANSLATE_X",op,this),eo(this,"TRANSLATE_Y",ip,this),eo(this,"ZOOM_SIZE",ap,this),os(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,n=[{key:"setZoomMiniSize",value:function(r){this.MINI_SCALE_SIZE=r}},{key:"setZoomMaxSize",value:function(r){this.MAX_SCALE_SIZE=r}},{key:"HtmlPointToCanvasPoint",value:function(r){var a=ya(r,2),i=a[0],u=a[1];return[(i-this.TRANSLATE_X)/this.SCALE_X,(u-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(r){var a=ya(r,2),i=a[0],u=a[1];return[i*this.SCALE_X+this.TRANSLATE_X,u*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(r,a,i){var u=ya(r,2),p=u[0],h=u[1];return[p+a/this.SCALE_X,h+i/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(r,a){return[r/this.SCALE_X,a/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var r=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(r,")")}}},{key:"zoom",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],a=arguments.length>1?arguments[1]:void 0,i=this.SCALE_X,u=this.SCALE_Y;return r===!0?(i+=this.ZOOM_SIZE,u+=this.ZOOM_SIZE):r===!1?(i-=this.ZOOM_SIZE,u-=this.ZOOM_SIZE):typeof r=="number"&&(i=r,u=r),i<this.MINI_SCALE_SIZE||i>this.MAX_SCALE_SIZE||(a&&(this.TRANSLATE_X-=(i-this.SCALE_X)*a[0],this.TRANSLATE_Y-=(u-this.SCALE_Y)*a[1]),this.SCALE_X=i,this.SCALE_Y=u,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(r){this.eventCenter.emit(tt.GRAPH_TRANSFORM,{type:r,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(r,a){this.TRANSLATE_X+=r,this.TRANSLATE_Y+=a,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(r,a,i,u){var p=ya(this.CanvasPointToHtmlPoint([r,a]),2),h=i/2-p[0],_=u/2-p[1];this.TRANSLATE_X+=h,this.TRANSLATE_Y+=_,this.emitGraphTransform("focusOn")}}],n&&Qg(t.prototype,n),e}(),ep=zn(zt.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),tp=zn(zt.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),np=zn(zt.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rp=zn(zt.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),op=zn(zt.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ip=zn(zt.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ap=zn(zt.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),zn(zt.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"zoom"),zt.prototype),zn(zt.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"resetZoom"),zt.prototype),zn(zt.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"translate"),zt.prototype),zn(zt.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"focusOn"),zt.prototype),zt),tm=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},nm=function(e,t){return e&&bo(t,Tr(t),e)},rm=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},om=Object.prototype.hasOwnProperty,im=function(e){if(!At(e))return rm(e);var t=fo(e),n=[];for(var r in e)(r!="constructor"||!t&&om.call(e,r))&&n.push(r);return n},ri=function(e){return It(e)?Tn(e,!0):im(e)},am=function(e,t){return e&&bo(t,ri(t),e)},sp=o(106),cp=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},um=function(e,t){return bo(e,Mn(e),t)},is=An(Object.getPrototypeOf,Object),lp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$n(t,Mn(e)),e=is(e);return t}:Qi,sm=function(e,t){return bo(e,lp(e),t)},cm=function(e){return Zi(e,ri,lp)},lm=Object.prototype.hasOwnProperty,fm=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&lm.call(e,"index")&&(n.index=e.index,n.input=e.input),n},as=function(e){var t=new e.constructor(e.byteLength);return new $r(t).set(new $r(e)),t},pm=function(e,t){var n=t?as(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},dm=/\w*$/,hm=function(e){var t=new e.constructor(e.source,dm.exec(e));return t.lastIndex=e.lastIndex,t},fp=lt?lt.prototype:void 0,pp=fp?fp.valueOf:void 0,ym=function(e){return pp?Object(pp.call(e)):{}},dp=function(e,t){var n=t?as(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},vm=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return as(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return pm(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return dp(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return hm(e);case"[object Symbol]":return ym(e)}},hp=Object.create,gm=function(){function e(){}return function(t){if(!At(t))return{};if(hp)return hp(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),yp=function(e){return typeof e.constructor!="function"||fo(e)?{}:gm(is(e))},mm=function(e){return kn(e)&&g(e)=="[object Map]"},vp=Kt.a&&Kt.a.isMap,bm=vp?pr(vp):mm,_m=function(e){return kn(e)&&g(e)=="[object Set]"},gp=Kt.a&&Kt.a.isSet,Om=gp?pr(gp):_m,mp="[object Arguments]",bp="[object Function]",wm="[object Object]",Mt={};Mt[mp]=Mt["[object Array]"]=Mt["[object ArrayBuffer]"]=Mt["[object DataView]"]=Mt["[object Boolean]"]=Mt["[object Date]"]=Mt["[object Float32Array]"]=Mt["[object Float64Array]"]=Mt["[object Int8Array]"]=Mt["[object Int16Array]"]=Mt["[object Int32Array]"]=Mt["[object Map]"]=Mt["[object Number]"]=Mt["[object Object]"]=Mt["[object RegExp]"]=Mt["[object Set]"]=Mt["[object String]"]=Mt["[object Symbol]"]=Mt["[object Uint8Array]"]=Mt["[object Uint8ClampedArray]"]=Mt["[object Uint16Array]"]=Mt["[object Uint32Array]"]=!0,Mt["[object Error]"]=Mt[bp]=Mt["[object WeakMap]"]=!1;var xm=function e(t,n,r,a,i,u){var p,h=1&n,_=2&n,x=4&n;if(r&&(p=i?r(t,a,i,u):r(t)),p!==void 0)return p;if(!At(t))return t;var M=Zt(t);if(M){if(p=fm(t),!h)return cp(t,p)}else{var T=g(t),L=T==bp||T=="[object GeneratorFunction]";if(Object(qr.a)(t))return Object(sp.a)(t,h);if(T==wm||T==mp||L&&!i){if(p=_||L?{}:yp(t),!h)return _?sm(t,am(p,t)):um(t,nm(p,t))}else{if(!Mt[T])return i?t:{};p=vm(t,T,h)}}u||(u=new Wn);var V=u.get(t);if(V)return V;u.set(t,p),Om(t)?t.forEach(function(ne){p.add(e(ne,n,r,ne,t,u))}):bm(t)&&t.forEach(function(ne,re){p.set(re,e(ne,n,r,re,t,u))});var $=M?void 0:(x?_?cm:po:_?ri:Tr)(t);return tm($||t,function(ne,re){$&&(ne=t[re=ne]),ha(p,re,e(ne,n,r,re,t,u))}),p},Nt=function(e){return xm(e,5)},us=function(e,t,n){(n!==void 0&&!gt(e[t],n)||n===void 0&&!(t in e))&&ns(e,t,n)},Em=function(e){return kn(e)&&It(e)},Sm=Function.prototype,jm=Object.prototype,_p=Sm.toString,Pm=jm.hasOwnProperty,Mm=_p.call(Object),km=function(e){if(!kn(e)||wt(e)!="[object Object]")return!1;var t=is(e);if(t===null)return!0;var n=Pm.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_p.call(n)==Mm},ss=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},Tm=function(e){return bo(e,ri(e))},Am=function(e,t,n,r,a,i,u){var p=ss(e,n),h=ss(t,n),_=u.get(h);if(_)us(e,n,_);else{var x=i?i(p,h,n+"",e,t,u):void 0,M=x===void 0;if(M){var T=Zt(h),L=!T&&Object(qr.a)(h),V=!T&&!L&&Ko(h);x=h,T||L||V?Zt(p)?x=p:Em(p)?x=cp(p):L?(M=!1,x=Object(sp.a)(h,!0)):V?(M=!1,x=dp(h,!0)):x=[]:km(h)||Kn(h)?(x=p,Kn(p)?x=Tm(p):At(p)&&!Xn(p)||(x=yp(h))):M=!1}M&&(u.set(h,x),a(x,h,r,i,u),u.delete(h)),us(e,n,x)}},Nm=function e(t,n,r,a,i){t!==n&&Mf(n,function(u,p){if(i||(i=new Wn),At(u))Am(t,n,p,r,e,a,i);else{var h=a?a(ss(t,p),u,p+"",t,n,i):void 0;h===void 0&&(h=u),us(t,p,h)}},ri)},Op=Nf(function(e,t,n){Nm(e,t,n)}),Dm={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},wp=function(e){var t=Nt(Dm);return e&&(t=Op(t,e)),t};o(77),o(158);function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Rm=function(){function e(){var r,a,i;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),i={},(a="_events")in(r=this)?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i}var t,n;return t=e,(n=[{key:"on",value:function(r,a,i){var u=this;return r==null||r.split(",").forEach(function(p){p=p.trim(),u._events[p]||(u._events[p]=[]),u._events[p].push({callback:a,once:!!i})}),this}},{key:"once",value:function(r,a){var i=this;r==null||r.split(",").forEach(function(u){return u=u.trim(),i.on(u,a,!0)})}},{key:"emit",value:function(r,a){var i=this;r==null||r.split(",").forEach(function(u){var p=i._events[u]||[],h=i._events["*"]||[],_=function(x){for(var M=x.length,T=0;T<M;T++)if(x[T]){var L=x[T],V=L.callback;L.once&&(x.splice(T,1),x.length===0&&delete i._events[u],M--,T--),V.apply(i,[a])}};_(p),_(h)})}},{key:"off",value:function(r,a){var i=this;return r||(this._events={}),r.split(",").forEach(function(u){if(a){for(var p=i._events[u]||[],h=p.length,_=0;_<h;_++)p[_].callback===a&&(p.splice(_,1),h--,_--);p.length===0&&delete i._events[u]}else delete i._events[u]}),this}},{key:"getEvents",value:function(){return this._events}}])&&Cm(t.prototype,n),e}();function Nr(e,t){return t*Math.round(e/t)||e}function xp(e,t){return e%t}function cs(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ep(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ep(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ls,fs=function(e,t,n){var r=cs(e,2),a=r[0],i=r[1],u=cs(t,2),p=u[0],h=u[1],_=cs(n,2),x=_[0],M=_[1];return a>p&&a<x&&i>h&&i<M},Sp=function(e,t){var n=!1;switch(t.multipleSelectKey){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1}return n},Im=(o(78),o(161),o(125),o(79),o(30),o(12),o(13),o(14),o(47),new Uint8Array(16));function Lm(){if(!ls&&!(ls=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ls(Im)}for(var zm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Bm=function(e){return typeof e=="string"&&zm.test(e)},Qt=[],ps=0;ps<256;++ps)Qt.push((ps+256).toString(16).substr(1));var Gm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qt[e[t+0]]+Qt[e[t+1]]+Qt[e[t+2]]+Qt[e[t+3]]+"-"+Qt[e[t+4]]+Qt[e[t+5]]+"-"+Qt[e[t+6]]+Qt[e[t+7]]+"-"+Qt[e[t+8]]+Qt[e[t+9]]+"-"+Qt[e[t+10]]+Qt[e[t+11]]+Qt[e[t+12]]+Qt[e[t+13]]+Qt[e[t+14]]+Qt[e[t+15]]).toLowerCase();if(!Bm(n))throw TypeError("Stringified UUID is invalid");return n},ds=function(e,t,n){var r=(e=e||{}).random||(e.rng||Lm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return Gm(r)},Dr=function(){return ds()},Hm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e.nodes.reduce(function(r,a){return r[a.id]=t+ds(),a.id=r[a.id],r},{});return e.edges.forEach(function(r){r.id=t+ds(),r.sourceNodeId=n[r.sourceNodeId],r.targetNodeId=n[r.targetNodeId]}),e},oi=(o(104),o(162),function(e,t,n){var r=e.x,a=e.y;return(r-t.x)*(r-n.x)<=0&&(a-t.y)*(a-n.y)<=0});function hs(e){return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hs(e)}function jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jp(Object(n),!0).forEach(function(r){Fm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be,Mp,kp,Tp,Ap,Np,Dp,Cp,Rp,Ip,Lp,zp,Bp,Gp,Hp,Fp,Xp,Up,Vp,Yp,Wp,ys=function(e){return e.anchors},va=function(e,t){for(var n,r=t.nodes,a=r.length-1;a>=0;a--){var i=r[a];if(Um(e,i)){var u=i.getTargetAnchor(e);if(u){var p={node:i,anchorIndex:u.index,anchor:u.anchor};n&&!Xm(i,n.node,t)||(n=p)}}}return n},Xm=function(e,t,n){return e.zIndex>t.zIndex||n.nodesMap[e.id].index>n.nodesMap[t.id].index},qn=function(e,t,n,r){return Math.hypot(e-n,t-r)},Cr=function(e,t){var n=!1,r=En(t);return e.x>=r.minX-0&&e.x<=r.maxX+0&&e.y>=r.minY-0&&e.y<=r.maxY+0&&(n=!0),n},Um=function(e,t){var n=!1,r=En(t);return e.x>=r.minX-5&&e.x<=r.maxX+5&&e.y>=r.minY-5&&e.y<=r.maxY+5&&(n=!0),n},En=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return{minX:t-r/2,minY:n-a/2,maxX:t+r/2,maxY:n+a/2,x:t,y:n,width:r,height:a,centerX:t,centerY:n}},$p=function(e,t,n){var r,a=function(u){var p=u,h=p.x,_=p.y,x=p.width,M=p.height,T=p.radius;return[{x:h-x/2+T,y:_-M/2+T,r:T},{x:h+x/2-T,y:_-M/2+T,r:T},{x:h-x/2+T,y:_+M/2-T,r:T},{x:h+x/2-T,y:_+M/2-T,r:T}]}(n),i=Number.MAX_SAFE_INTEGER;return a.forEach(function(u){var p=qn(e.x,e.y,u.x,u.y);p<i&&(i=p,r=u)}),vs(e,t,r)},vs=function(e,t,n){var r,a=n,i=a.x,u=a.y,p=a.r;if(t===Tt.HORIZONTAL){var h=i-Math.sqrt(p*p-(e.y-u)*(e.y-u)),_=i+Math.sqrt(p*p-(e.y-u)*(e.y-u));r={x:Math.abs(h-e.x)<Math.abs(_-e.x)?h:_,y:e.y}}else if(t===Tt.VERTICAL){var x=u-Math.sqrt(p*p-(e.x-i)*(e.x-i)),M=u+Math.sqrt(p*p-(e.x-i)*(e.x-i)),T=Math.abs(x-e.y)<Math.abs(M-e.y)?x:M;r={x:e.x,y:T}}return r},Kp=function(e,t){var n=t,r=!1,a=n.x-n.width/2+n.radius,i=n.x+n.width/2-n.radius,u=n.y-n.height/2+n.radius,p=n.y+n.height/2-n.radius,h=n.x,_=n.y,x=n.width,M=n.height;return e.y===_+M/2||e.y===_-M/2?r=e.x>a&&e.x<i:e.x!==h+x/2&&e.x!==h-x/2||(r=e.y>u&&e.y<p),r},qp=function(e,t,n){var r,a=n,i=a.x,u=a.y,p=a.rx,h=a.ry;if(t===Tt.HORIZONTAL){var _=i-Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(h*h)),x=i+Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(h*h));r={x:Math.abs(_-e.x)<Math.abs(x-e.x)?_:x,y:e.y}}else if(t===Tt.VERTICAL){var M=u-Math.sqrt(h*h-(e.x-i)*(e.x-i)*h*h/(p*p)),T=u+Math.sqrt(h*h-(e.x-i)*(e.x-i)*h*h/(p*p)),L=Math.abs(M-e.y)<Math.abs(T-e.y)?M:T;r={x:e.x,y:L}}return r},Zp=function(e,t,n){for(var r,a=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,u=[],p=0;p<a.length;p++)u.push({start:a[p],end:a[(p+1)%a.length]});return u.forEach(function(h){var _=h.start,x=h.end,M=_,T=x;_.x>x.x&&(M=x,T=_);var L={x:e.x,y:e.y};if(M.x===T.x&&t===Tt.HORIZONTAL&&(L={x:M.x,y:e.y}),M.y===T.y&&t===Tt.VERTICAL&&(L={x:e.x,y:M.y}),M.x!==T.x&&M.y!==T.y){var V=(T.y-M.y)/(T.x-M.x),$=(M.x*T.y-T.x*M.y)/(M.x-T.x);t===Tt.HORIZONTAL?L={x:(e.y-$)/V,y:e.y}:t===Tt.VERTICAL&&(L={x:e.x,y:V*e.x+$})}if(oi(L,_,x)){var ne=qn(L.x,L.y,e.x,e.y);ne<i&&(i=ne,r=L)}}),r},Jp=function(e,t,n,r){var a=e.x,i=e.y;return t.x>e.x?a=e.x+n/2:t.x<e.x&&(a=e.x-n/2),t.y>e.y?i=e.y+r/2:t.y<e.y&&(i=e.y-r/2),{x:a,y:i}},Qp=function(e){var t=e.rows,n=e.style,r=e.rowsLength,a=e.className,i=document.createElement("div");i.style.fontSize=n.fontSize,i.style.width=n.width,i.className=a,i.style.lineHeight=n.lineHeight,i.style.padding=n.padding,n.fontFamily&&(i.style.fontFamily=n.fontFamily),r>1?t.forEach(function(p){var h=document.createElement("div");h.textContent=p,i.appendChild(h)}):i.textContent=t,document.body.appendChild(i);var u=i.clientHeight;return document.body.removeChild(i),u},gs=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,a=0;return t&&t.forEach(function(i){var u=wd(i);a=u>a?u:a}),{width:Math.ceil(a/2)*r+r/4,height:n*(r+2)+r/4}},ii=function(e){return hs(e)!=="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e},en=function(e){try{return JSON.parse(JSON.stringify(e))}catch{return e}},Vm=1e3,Ym=999,ms=function(){return++Vm};function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ed(Object(n),!0).forEach(function(r){Nn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var bs=(be=function(){function e(r,a){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Nn(this,"id",""),Xt(this,"type",Mp,this),Xt(this,"sourceNodeId",kp,this),Xt(this,"targetNodeId",Tp,this),Xt(this,"startPoint",Ap,this),Xt(this,"endPoint",Np,this),Xt(this,"text",Dp,this),Xt(this,"properties",Cp,this),Xt(this,"points",Rp,this),Xt(this,"pointsList",Ip,this),Xt(this,"isSelected",Lp,this),Xt(this,"isHovered",zp,this),Xt(this,"isHitable",Bp,this),Xt(this,"draggable",Gp,this),Xt(this,"visible",Hp,this),Nn(this,"virtual",!1),Xt(this,"isAnimation",Fp,this),Xt(this,"isShowAdjustPoint",Xp,this),Nn(this,"graphModel",void 0),Xt(this,"zIndex",Up,this),Nn(this,"BaseType",Ft.EDGE),Nn(this,"modelType",dt.EDGE),Xt(this,"state",Vp,this),Nn(this,"additionStateData",void 0),Nn(this,"sourceAnchorId",""),Nn(this,"targetAnchorId",""),Nn(this,"menu",void 0),Nn(this,"customTextPosition",!1),Xt(this,"style",Yp,this),Xt(this,"arrowConfig",Wp,this),this.graphModel=a,this.initEdgeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"initEdgeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,i=a&&a(r.type),u=this.createId();r.id=u||i||Dr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(r.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(r.id,")");var p=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=p,un(this,hb(r)),this.graphModel.overlapMode===xn.INCREASE&&(this.zIndex=r.zIndex||ms()),this.setAnchors(),this.initPoints(),this.formatText(r)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return yn(yn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return yn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.edgeText;return Nt(r)}},{key:"getEdgeAnimationStyle",value:function(){var r=this.graphModel.theme.edgeAnimation;return Nt(r)}},{key:"getArrowStyle",value:function(){var r=this.getEdgeStyle(),a=this.getEdgeAnimationStyle(),i=this.graphModel.theme.arrow,u=this.isAnimation?a.stroke:r.stroke;return yn(yn({},r),{},{fill:u,stroke:u},i)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Nt(r)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.sourceNodeId])===null||a===void 0?void 0:a.model}},{key:"targetNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.targetNodeId])===null||a===void 0?void 0:a.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(r,a){var i,u;return ys(r).forEach(function(p){var h=jd(p,a);(u===void 0||h<u)&&(u=h,i=p)}),i}},{key:"getEndAnchor",value:function(r){var a,i,u=this;return ys(r).forEach(function(p){var h=jd(p,u.startPoint);(i===void 0||h<i)&&(i=h,a=p)}),a}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var r=this.text,a=r.x,i=r.y,u=r.value,p={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return u&&(p.text={x:a,y:i,value:u}),this.graphModel.overlapMode===xn.INCREASE&&(p.zIndex=this.zIndex),p}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(r,a){this.properties[r]=en(a),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=yn(yn({},Object(c.I)(this.properties)),en(r)),this.setAttributes()}},{key:"changeEdgeId",value:function(r){var a=this.arrowConfig,i=a.markerEnd,u=a.markerStart;u&&u==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(r,")")),i&&i==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(r,")")),this.id=r}},{key:"setStyle",value:function(r,a){this.style=yn(yn({},this.style),{},Nn({},r,en(a)))}},{key:"setStyles",value:function(r){this.style=yn(yn({},this.style),en(r))}},{key:"updateStyles",value:function(r){this.style=yn({},en(r))}},{key:"formatText",value:function(r){var a=this.textPosition,i=a.x,u=a.y;r.text&&typeof r.text!="string"?Object.prototype.toString.call(r.text)==="[object Object]"&&(this.text={x:r.text.x||i,y:r.text.y||u,value:r.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:r.text||"",x:i,y:u,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var r=this.textPosition,a=r.x,i=r.y;this.text.x=a,this.text.y=i}},{key:"moveText",value:function(r,a){if(this.text){var i=this.text,u=i.x,p=i.y,h=i.value,_=i.draggable,x=i.editable;this.text={value:h,draggable:_,x:u+r,y:p+a,editable:x}}}},{key:"setText",value:function(r){r&&un(this.text,r)}},{key:"updateText",value:function(r){this.text=yn(yn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var r=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:r.x,y:r.y}),this.sourceAnchorId||(this.sourceAnchorId=r.id)}if(!this.targetAnchorId||!this.endPoint){var a=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:a.x,y:a.y}),this.targetAnchorId||(this.targetAnchorId=a.id)}}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"updateStartPoint",value:function(r){this.startPoint=r}},{key:"moveStartPoint",value:function(r,a){this.startPoint.x+=r,this.startPoint.y+=a}},{key:"updateEndPoint",value:function(r){this.endPoint=r}},{key:"moveEndPoint",value:function(r,a){this.endPoint.x+=r,this.endPoint.y+=a}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=r}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(r){un(this,r)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(r){var a=r.startPoint,i=r.endPoint;this.updateStartPoint({x:a.x,y:a.y}),this.updateEndPoint({x:i.x,y:i.y})}}],n&&Wm(t.prototype,n),e}(),Mp=Je(be.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),kp=Je(be.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tp=Je(be.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ap=Je(be.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Np=Je(be.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dp=Je(be.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Cp=Je(be.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Rp=Je(be.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ip=Je(be.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Lp=Je(be.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zp=Je(be.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bp=Je(be.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gp=Je(be.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hp=Je(be.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fp=Je(be.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xp=Je(be.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Up=Je(be.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vp=Je(be.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Yp=Je(be.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Wp=Je(be.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Je(be.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(be.prototype,"sourceNode"),be.prototype),Je(be.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(be.prototype,"targetNode"),be.prototype),Je(be.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(be.prototype,"textPosition"),be.prototype),Je(be.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setProperty"),be.prototype),Je(be.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"deleteProperty"),be.prototype),Je(be.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setProperties"),be.prototype),Je(be.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"changeEdgeId"),be.prototype),Je(be.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setStyle"),be.prototype),Je(be.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setStyles"),be.prototype),Je(be.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateStyles"),be.prototype),Je(be.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"formatText"),be.prototype),Je(be.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"resetTextPosition"),be.prototype),Je(be.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"moveText"),be.prototype),Je(be.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setText"),be.prototype),Je(be.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateText"),be.prototype),Je(be.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setAnchors"),be.prototype),Je(be.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setSelected"),be.prototype),Je(be.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setHovered"),be.prototype),Je(be.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setHitable"),be.prototype),Je(be.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"openEdgeAnimation"),be.prototype),Je(be.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"closeEdgeAnimation"),be.prototype),Je(be.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setElementState"),be.prototype),Je(be.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateStartPoint"),be.prototype),Je(be.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"moveStartPoint"),be.prototype),Je(be.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateEndPoint"),be.prototype),Je(be.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"moveEndPoint"),be.prototype),Je(be.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"setZIndex"),be.prototype),Je(be.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"initPoints"),be.prototype),Je(be.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateAttributes"),be.prototype),Je(be.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"getAdjustStart"),be.prototype),Je(be.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"getAdjustEnd"),be.prototype),Je(be.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(be.prototype,"updateAfterAdjustStartAndEnd"),be.prototype),be),_s=bs;function Os(e){return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?td(Object(n),!0).forEach(function(r){od(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ws(){return ws=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=qm(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},ws.apply(this,arguments)}function qm(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=_o(e))!==null;);return e}function xs(e,t){return xs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},xs(e,t)}function Zm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=_o(e);if(t){var a=_o(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Jm(this,n)}}function Jm(e,t){if(t&&(Os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rd(e)}function rd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_o(e)}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st,id,Es=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&xs(i,u)})(a,e);var t,n,r=Zm(a);function a(){var i;$m(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return od(rd(i=r.call.apply(r,[this].concat(p))),"modelType",dt.LINE_EDGE),i}return t=a,(n=[{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.line;return nd(nd({},ws(_o(a.prototype),"getEdgeStyle",this).call(this)),Nt(i))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Km(t.prototype,n),a}(_s);function Ss(e){return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ss(e)}function Qm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ad(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ad(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ad(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ud(Object(n),!0).forEach(function(r){Ps(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eb(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function tb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ai(){return ai=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=rb(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},ai.apply(this,arguments)}function rb(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rr(e))!==null;);return e}function js(e,t){return js=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},js(e,t)}function ob(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Rr(e);if(t){var a=Rr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ib(this,n)}}function ib(e,t){if(t&&(Ss(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ui(e)}function ui(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(e)}function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Ms=(st=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&js(i,u)})(a,e);var t,n,r=ob(a);function a(){var i;tb(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Ps(ui(i=r.call.apply(r,[this].concat(p))),"modelType",dt.POLYLINE_EDGE),Ps(ui(i),"draggingPointList",void 0),eb(ui(i),"dbClickPosition",id,ui(i)),i}return t=a,(n=[{key:"initEdgeData",value:function(i){this.offset=30,ai(Rr(a.prototype),"initEdgeData",this).call(this,i)}},{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.polyline;return sd(sd({},ai(Rr(a.prototype),"getEdgeStyle",this).call(this)),Nt(i))}},{key:"getTextPosition",value:function(){var i,u=(i=this.text)===null||i===void 0?void 0:i.value;if(this.dbClickPosition&&!u){var p=this.dbClickPosition;return{x:p.x,y:p.y}}var h=to(this.points),_=Qm(pb(h),2),x=_[0],M=_[1];return{x:(x.x+M.x)/2,y:(x.y+M.y)/2}}},{key:"getAfterAnchor",value:function(i,u,p){var h,_;return p.forEach(function(x){var M;i===Tt.HORIZONTAL?M=Math.abs(u.y-x.y):i===Tt.VERTICAL&&(M=Math.abs(u.x-x.x)),(!_||_>M)&&(_=M,h=x)}),h}},{key:"getCrossPoint",value:function(i,u,p){var h;return i===Tt.HORIZONTAL?h={x:p.x,y:u.y}:i===Tt.VERTICAL&&(h={x:u.x,y:p.y}),h}},{key:"removeCrossPoints",value:function(i,u,p){var h=p.map(function(re){return re});if(i===1){var _=h[i],x=h[u],M=h[i-1];if(md(M,_,this.sourceNode)){if(bd(_,x,this.sourceNode)){var T=_d(_,x,this.sourceNode);T&&(h[i]=T,h.splice(i-1,1),i--,u--)}}else this.sourceNode.anchors.forEach(function(re){(re.x===M.x&&re.x===_.x||re.y===M.y&&re.y===_.y)&&qn(re.x,re.y,_.x,_.y)<qn(M.x,M.y,_.x,_.y)&&(h[i-1]=re)})}if(u===p.length-2){var L=h[i],V=h[u],$=h[u+1];if(md(V,$,this.targetNode)){if(bd(L,V,this.targetNode)){var ne=_d(L,V,this.targetNode);ne&&(h[u]=ne,h.splice(u+1,1))}}else this.targetNode.anchors.forEach(function(re){(re.x===$.x&&re.x===V.x||re.y===$.y&&re.y===V.y)&&qn(re.x,re.y,V.x,V.y)<qn($.x,$.y,V.x,V.y)&&(h[u+1]=re)})}return h}},{key:"getDraggingPoints",value:function(i,u,p,h,_){var x=_.map(function(L){return L}),M=this.getAfterAnchor(i,p,h),T=this.getCrossPoint(i,p,M);return u==="start"?(x.unshift(T),x.unshift(M)):(x.push(T),x.push(M)),x}},{key:"updateCrossPoints",value:function(i){var u=i.map(function(Oe){return Oe}),p=i[0],h=i[1],_=i[u.length-2],x=i[u.length-1],M=this.sourceNode,T=this.targetNode,L=M.modelType,V=T.modelType,$=xa(p,h),ne=u[0];switch(L){case dt.RECT_NODE:M.radius!==0&&(Kp(p,M)||(ne=$p(p,$,M)));break;case dt.CIRCLE_NODE:ne=vs(p,$,M);break;case dt.ELLIPSE_NODE:ne=qp(p,$,M);break;case dt.DIAMOND_NODE:case dt.POLYGON_NODE:ne=Zp(p,$,M)}u[0]=ne;var re=xa(_,x),de=u[u.length-1];switch(V){case dt.RECT_NODE:T.radius!==0&&(Kp(x,T)||(de=$p(x,re,T)));break;case dt.CIRCLE_NODE:de=vs(x,re,T);break;case dt.ELLIPSE_NODE:de=qp(x,re,T);break;case dt.DIAMOND_NODE:case dt.POLYGON_NODE:de=Zp(x,re,T)}return u[u.length-1]=de,u}},{key:"getData",value:function(){var i=ai(Rr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Object.assign({},i,{pointsList:u})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var i=gd({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=i,this.points=i.map(function(u){return"".concat(u.x,",").concat(u.y)}).join(" ")}},{key:"updateStartPoint",value:function(i){this.startPoint=i,this.updatePoints()}},{key:"moveStartPoint",value:function(i,u){this.startPoint.x+=i,this.startPoint.y+=u,this.updatePoints()}},{key:"updateEndPoint",value:function(i){this.endPoint=i,this.updatePoints()}},{key:"moveEndPoint",value:function(i,u){this.endPoint.x+=i,this.endPoint.y+=u,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(i){return i})}},{key:"dragAppendSimple",value:function(i,u){this.isDragging=!0;var p=i.start,h=i.end,_=i.startIndex,x=i.endIndex,M=i.direction,T=this.pointsList,L=T;return M===Tt.HORIZONTAL?(T[_]={x:p.x,y:p.y+u.y},T[x]={x:h.x,y:h.y+u.y},L=this.pointsList.map(function(V){return V})):M===Tt.VERTICAL&&(T[_]={x:p.x+u.x,y:p.y},T[x]={x:h.x+u.x,y:h.y},L=this.pointsList.map(function(V){return V})),this.updatePointsAfterDrag(L),this.draggingPointList=L,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},T[_]),end:Object.assign({},T[x]),startIndex:_,endIndex:x,direction:M}}},{key:"dragAppend",value:function(i,u){this.isDragging=!0;var p=i.start,h=i.end,_=i.startIndex,x=i.endIndex,M=i.direction,T=this.pointsList;if(M===Tt.HORIZONTAL){T[_]={x:p.x,y:p.y+u.y},T[x]={x:h.x,y:h.y+u.y};var L=this.pointsList.map(function(Te){return Te});if(_!==0&&x!==this.pointsList.length-1&&(L=this.removeCrossPoints(_,x,L)),_===0){var V={x:p.x,y:p.y+u.y};if(!Cr(V,this.sourceNode)){var $=this.sourceNode.anchors;L=this.getDraggingPoints(M,"start",V,$,L)}}if(x===this.pointsList.length-1){var ne={x:h.x,y:h.y+u.y};if(!Cr(ne,this.targetNode)){var re=this.targetNode.anchors;L=this.getDraggingPoints(M,"end",ne,re,L)}}this.updatePointsAfterDrag(L),this.draggingPointList=L}else if(M===Tt.VERTICAL){T[_]={x:p.x+u.x,y:p.y},T[x]={x:h.x+u.x,y:h.y};var de=this.pointsList.map(function(Te){return Te});if(_!==0&&x!==this.pointsList.length-1&&(de=this.removeCrossPoints(_,x,de)),_===0){var Oe={x:p.x+u.x,y:p.y};if(!Cr(Oe,this.sourceNode)){var Ce=this.sourceNode.anchors;de=this.getDraggingPoints(M,"start",Oe,Ce,de)}}if(x===this.pointsList.length-1){var Se={x:h.x+u.x,y:h.y};if(!Cr(Se,this.targetNode)){var Ue=this.targetNode.anchors;de=this.getDraggingPoints(M,"end",Se,Ue,de)}}this.updatePointsAfterDrag(de),this.draggingPointList=de}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},T[_]),end:Object.assign({},T[x]),startIndex:_,endIndex:x,direction:M}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var i=vd(to(this.points));this.pointsList=i.map(function(h){return h}),this.draggingPointList=[];var u=i[0];this.startPoint=Object.assign({},u);var p=i[i.length-1];this.endPoint=Object.assign({},p)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(i){var u=this.updateCrossPoints(i);this.points=u.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var i=this.pointsList;return i[i.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var u=i.startPoint,p=i.endPoint,h=i.sourceNode,_=i.targetNode,x=gd({x:u.x,y:u.y},{x:p.x,y:p.y},h,_,this.offset||0);this.pointsList=x,this.initPoints()}}])&&nb(t.prototype,n),a}(_s),id=sn(st.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn(st.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"initPoints"),st.prototype),sn(st.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePoints"),st.prototype),sn(st.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateStartPoint"),st.prototype),sn(st.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveStartPoint"),st.prototype),sn(st.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateEndPoint"),st.prototype),sn(st.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveEndPoint"),st.prototype),sn(st.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendStart"),st.prototype),sn(st.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendSimple"),st.prototype),sn(st.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppend"),st.prototype),sn(st.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendEnd"),st.prototype),sn(st.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePointsAfterDrag"),st.prototype),sn(st.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustStart"),st.prototype),sn(st.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustEnd"),st.prototype),sn(st.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateAfterAdjustStartAndEnd"),st.prototype),st),si=function(e){var t=e.start,n=e.end,r=e.offset,a=e.verticalLength,i=e.type,u={leftX:0,leftY:0,rightX:0,rightY:0},p=Math.atan((n.y-t.y)/(n.x-t.x)),h=Math.atan(r/a),_=Math.sqrt(a*a+r*r);return i==="start"?n.x>=t.x?(u.leftX=t.x+_*Math.sin(p+h),u.leftY=t.y-_*Math.cos(p+h),u.rightX=t.x-_*Math.sin(p-h),u.rightY=t.y+_*Math.cos(p-h)):(u.leftX=t.x-_*Math.sin(p+h),u.leftY=t.y+_*Math.cos(p+h),u.rightX=t.x+_*Math.sin(p-h),u.rightY=t.y-_*Math.cos(p-h)):i==="end"&&(n.x>=t.x?(u.leftX=n.x+_*Math.sin(p-h),u.leftY=n.y-_*Math.cos(p-h),u.rightX=n.x-_*Math.sin(p+h),u.rightY=n.y+_*Math.cos(p+h)):(u.leftX=n.x-_*Math.sin(p-h),u.leftY=n.y+_*Math.cos(p-h),u.rightX=n.x+_*Math.sin(p+h),u.rightY=n.y-_*Math.cos(p+h))),u},ab={x:1,y:0,z:0};function cd(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function ub(e){return r=function(i,u){return i.x*u.y-i.y*u.x}(t=ab,n=e),a=Math.acos(function(i,u){var p=[i.x,i.y,i.z];return[u.x,u.y,u.z].reduce(function(h,_,x){return h+_*p[x]})}(cd(t),cd(n))),r>=0?a:-a;var t,n,r,a}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(r){sb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cb(e){return function(t){if(Array.isArray(t))return Ts(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||fd(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ks(e){return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function ma(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||fd(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function fd(e,t){if(e){if(typeof e=="string")return Ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ts(e,t):void 0}}function Ts(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var As=function(e){var t=[],n={};return e.forEach(function(r){var a="".concat(r.x,"-").concat(r.y);r.id=a,n[a]=r}),Object.keys(n).forEach(function(r){t.push(n[r])}),t},ba=function(e,t){return e.width===0&&e.height===0?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},_a=function(e,t){var n=function(r,a){var i=Math.abs(r.x-a.centerX),u=Math.abs(r.y-a.centerY);return i/a.width>u/a.height?Tt.HORIZONTAL:Tt.VERTICAL}(t,e);return n===Tt.HORIZONTAL?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},pd=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(r+i)/2,minX:n,minY:r,maxX:a,maxY:i,height:i-r,width:a-n}},ci=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=[];e.forEach(function(x){n.push(x.x),r.push(x.y)});var a=Math.min.apply(Math,n),i=Math.max.apply(Math,n),u=Math.min.apply(Math,r),p=Math.max.apply(Math,r),h=i-a,_=p-u;return t&&(h+=t,_+=t),{centerX:(a+i)/2,centerY:(u+p)/2,maxX:i,maxY:p,minX:a,minY:u,x:(a+i)/2,y:(u+p)/2,height:_,width:h}},Oa=function(e){var t=e.minX,n=e.minY,r=e.maxX,a=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:a},{x:t,y:a}]},wa=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},Ns=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},dd=function(e,t,n,r,a){return Ns(e,t)+Ns(e,n)+function(i,u){var p=0;return u.forEach(function(h){h&&(i.x===h.x&&(p+=-2),i.y===h.y&&(p+=-2))}),p}(e,[t,n,r,a])},lb=function e(t,n,r,a,i){i||(i=0),t.unshift(n[a]),r[a]&&r[a]!==a&&i<=100&&e(t,n,r,r[a],i+1)},li=function(e,t,n,r){var a=t.x-e.x,i=t.y-e.y,u=r.x-n.x,p=r.y-n.y,h=(-i*(e.x-n.x)+a*(e.y-n.y))/(-u*i+a*p),_=(u*(e.y-n.y)-p*(e.x-n.x))/(-u*i+a*p);return h>=0&&h<=1&&_>=0&&_<=1},hd=function(e,t,n){if(n.width===0&&n.height===0)return!1;var r=ma(Oa(n),4),a=r[0],i=r[1],u=r[2],p=r[3];return li(e,t,a,i)||li(e,t,a,p)||li(e,t,i,u)||li(e,t,u,p)},fb=function(e,t,n,r,a,i,u){var p=[],h=[t],_={},x={},M={};x[t.id]=0,M[t.id]=dd(t,n,t);var T={};e.forEach(function($){T[$.id]=$});for(var L=function(){var $,ne,re,de=void 0,Oe=1/0;if(h.forEach(function(Se){M[Se.id]<Oe&&(Oe=M[Se.id],de=Se)}),de===n){var Ce=[];return lb(Ce,T,_,n.id),{v:Ce}}ne=de,(re=($=h).indexOf(ne))>-1&&$.splice(re,1),p.push(de),function(Se,Ue,Te,Pe){var Qe=[];return Se.forEach(function(yt){yt!==Ue&&(yt.x!==Ue.x&&yt.y!==Ue.y||hd(yt,Ue,Te)||hd(yt,Ue,Pe)||Qe.push(yt))}),As(Qe)}(e,de,r,a).forEach(function(Se){if(p.indexOf(Se)===-1){h.indexOf(Se)===-1&&h.push(Se);var Ue=M[de.id]+Ns(de,Se);x[Se.id]&&Ue>=x[Se.id]||(_[Se.id]=de.id,x[Se.id]=Ue,M[Se.id]=x[Se.id]+dd(Se,n,t,i,u))}})};h.length;){var V=L();if(ks(V)==="object")return V.v}return[t,n]},yd=function(e){return En(e)},vd=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],r=e[t],a=e[t+1];n.x===r.x&&r.x===a.x||n.y===r.y&&r.y===a.y?e.splice(t,1):t++}return e},gd=function(e,t,n,r,a){var i,u,p=yd(n),h=yd(r),_=ba(p,a),x=ba(h,a),M=_a(_,e),T=_a(x,t);if(i=_,u=x,2*Math.abs(i.centerX-u.centerX)<i.width+u.width&&2*Math.abs(i.centerY-u.centerY)<i.height+u.height){var L=db(e,t,M,T);return[e,M].concat(cb(L),[T,t])}var V=ci([M,T]),$=pd(_,V),ne=pd(x,V),re=[];re=(re=re.concat(Oa($))).concat(Oa(ne));var de={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[V,$,ne].forEach(function(Ce){re=re.concat(function(Se,Ue){return function(Te,Pe){return Pe<Te.minX||Pe>Te.maxX?[]:[{x:Pe,y:Te.minY},{x:Pe,y:Te.maxY}]}(Se,Ue.x).concat(function(Te,Pe){return Pe<Te.minY||Pe>Te.maxY?[]:[{x:Te.minX,y:Pe},{x:Te.maxX,y:Pe}]}(Se,Ue.y))}(Ce,de).filter(function(Se){return wa(Se,_)&&wa(Se,x)}))}),[{x:M.x,y:T.y},{x:T.x,y:M.y}].forEach(function(Ce){wa(Ce,_)&&wa(Ce,x)&&re.push(Ce)}),re.unshift(M),re.push(T),re=As(re);var Oe=fb(re,M,T,p,h,e,t);return Oe.unshift(e),Oe.push(t),Oe.length>2&&(Oe=vd(Oe)),As(Oe)},pb=function(e){var t;if(e.length===1)t=[e[0],e[0]];else if(e.length>=2){for(var n=e[0],r=e[1],a=qn(n.x,n.y,r.x,r.y),i=1;i<e.length-1;i++){var u=e[i],p=e[i+1],h=qn(u.x,u.y,p.x,p.y);h>a&&(a=h,n=u,r=p)}t=[n,r]}return t},md=function(e,t,n){var r=Cr(e,n),a=Cr(t,n);return r&&a},bd=function(e,t,n){var r=Cr(e,n),a=Cr(t,n);return!(r&&a)&&(r||a)},_d=function(e,t,n){for(var r,a,i=En(n),u=Oa(i),p=0;p<u.length;p++)li(e,t,u[p],u[(p+1)%u.length])&&(a=[u[p],u[(p+1)%u.length]]);return a&&(r=function(h,_,x,M){var T=(_.y-h.y)*(M.x-x.x)-(h.x-_.x)*(x.y-M.y);if(T===0)return!1;var L=((_.x-h.x)*(M.x-x.x)*(x.y-h.y)+(_.y-h.y)*(M.x-x.x)*h.x-(M.y-x.y)*(_.x-h.x)*x.x)/T,V=-((_.y-h.y)*(M.y-x.y)*(x.x-h.x)+(_.x-h.x)*(M.y-x.y)*h.y-(M.x-x.x)*(_.y-h.y)*x.y)/T;return(L-h.x)*(L-_.x)<=0&&(V-h.y)*(V-_.y)<=0&&(L-x.x)*(L-M.x)<=0&&(V-x.y)*(V-M.y)<=0&&{x:L,y:V}}(e,t,a[0],a[1])),r},xa=function(e,t){var n;return e.x===t.x?n=Tt.VERTICAL:e.y===t.y&&(n=Tt.HORIZONTAL),n},to=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(r){var a=ma(r.split(","),2),i=a[0],u=a[1];n.push({x:Number(i),y:Number(u)})}),n},db=function(e,t,n,r){var a=[];if(xa(e,n)===xa(t,r))e.y===n.y?(a.push({x:n.x,y:(n.y+r.y)/2}),a.push({x:r.x,y:(n.y+r.y)/2})):(a.push({x:(n.x+r.x)/2,y:n.y}),a.push({x:(n.x+r.x)/2,y:r.y}));else{var i={x:n.x,y:r.y},u=oi(i,e,n),p=oi(i,t,r);if(u||p)i={x:r.x,y:n.y};else{var h=Od(i,e,n),_=Od(i,t,r);h&&_&&(i={x:r.x,y:n.y})}a.push(i)}return a},Od=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},wd=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:t+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return t},xd=function(e){var t=e.start,n=e.end,r=e.sourceNode,a=e.targetNode,i=e.offset,u=En(r),p=En(a),h=ba(u,i),_=ba(p,i);return{sNext:_a(h,t),ePre:_a(_,n)}},Ea=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(",");return[Sa(t[0]),Sa(t[1]),Sa(t[2]),Sa(t[3])]},Sa=function(e){var t=ma(e.replace(/(^\s*)/g,"").split(" "),2);return{x:+t[0],y:+t[1]}},Ed=function(e){var t=Ea(e),n=ma(t,4),r=function(a,i,u,p){return function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-h,3)+3*i.x*h*Math.pow(1-h,2)+3*u.x*Math.pow(h,2)*(1-h)+p.x*Math.pow(h,3),y:a.y*Math.pow(1-h,3)+3*i.y*h*Math.pow(1-h,2)+3*u.y*Math.pow(h,2)*(1-h)+p.y*Math.pow(h,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[r,t[3]]},Sd=function(e,t){for(var n,r=e.x,a=e.y,i=to(t),u=Number.MAX_SAFE_INTEGER,p=[],h=0;h<i.length;h++)p.push({start:i[h],end:i[(h+1)%i.length]});if(p.forEach(function(T){var L=T.start,V=T.end;if(L.x===V.x){var $={x:L.x,y:a};if(oi($,L,V)){var ne=Math.abs(L.x-r);ne<u&&(u=ne,n=$)}}else if(L.y===V.y){var re={x:r,y:L.y};if(oi(re,L,V)){var de=Math.abs(L.y-a);de<u&&(u=de,n=re)}}}),!n){var _=p[0],x=_.start,M=_.end;n={x:x.x+(M.x-x.x)/2,y:x.y+(M.y-x.y)/2}}return n},hb=function(e){return ni(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},jd=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};o(204);var Oo=function(){};function yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zn=window.document;function vb(e){var t=e.onDragStart,n=t===void 0?Oo:t,r=e.onDragging,a=r===void 0?Oo:r,i=e.onDragEnd,u=i===void 0?Oo:i,p=e.step,h=p===void 0?1:p,_=e.isStopPropagation,x=_===void 0||_,M=!1,T=!1,L=0,V=0,$=0,ne=0;function re(Oe){if(x&&Oe.stopPropagation(),T&&(M=!0,$+=Oe.clientX-L,ne+=Oe.clientY-V,L=Oe.clientX,V=Oe.clientY,Math.abs($)>h||Math.abs(ne)>h)){var Ce=$%h,Se=ne%h,Ue=$-Ce,Te=ne-Se;$=Ce,ne=Se,a({deltaX:Ue,deltaY:Te,event:Oe})}}function de(Oe){if(x&&Oe.stopPropagation(),T=!1,Zn.removeEventListener("mousemove",re,!1),Zn.removeEventListener("mouseup",de,!1),M)return M=!1,u({event:Oe})}return function(Oe){if(Oe.button===0)return x&&Oe.stopPropagation(),T=!0,L=Oe.clientX,V=Oe.clientY,Zn.addEventListener("mousemove",re,!1),Zn.addEventListener("mouseup",de,!1),n({event:Oe})}}var fe,Pd,Md,kd,Td,Ad,Nd,Dd,Cd,Rd,Id,Ld,zd,hr=function(){function e(r){var a=this,i=r.onDragStart,u=i===void 0?Oo:i,p=r.onDragging,h=p===void 0?Oo:p,_=r.onDragEnd,x=_===void 0?Oo:_,M=r.eventType,T=M===void 0?"":M,L=r.eventCenter,V=L===void 0?null:L,$=r.step,ne=$===void 0?1:$,re=r.isStopPropagation,de=re===void 0||re,Oe=r.model,Ce=Oe===void 0?null:Oe,Se=r.data,Ue=Se===void 0?null:Se;(function(Te,Pe){if(!(Te instanceof Pe))throw new TypeError("Cannot call a class as a function")})(this,e),Ut(this,"onDragStart",void 0),Ut(this,"onDragging",void 0),Ut(this,"onDragEnd",void 0),Ut(this,"step",void 0),Ut(this,"isStopPropagation",void 0),Ut(this,"isDragging",!1),Ut(this,"isStartDragging",!1),Ut(this,"startX",0),Ut(this,"startY",0),Ut(this,"sumDeltaX",0),Ut(this,"sumDeltaY",0),Ut(this,"eventType",void 0),Ut(this,"eventCenter",void 0),Ut(this,"model",void 0),Ut(this,"data",void 0),Ut(this,"startTime",void 0),Ut(this,"handleMouseDown",function(Te){var Pe,Qe;if(Te.button===0){a.isStopPropagation&&Te.stopPropagation(),a.isStartDragging=!0,a.startX=Te.clientX,a.startY=Te.clientY,Zn.addEventListener("mousemove",a.handleMouseMove,!1),Zn.addEventListener("mouseup",a.handleMouseUp,!1);var yt=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();(Qe=a.eventCenter)===null||Qe===void 0||Qe.emit(tt["".concat(a.eventType,"_MOUSEDOWN")],{e:Te,data:a.data||yt}),a.startTime=new Date().getTime()}}),Ut(this,"handleMouseMove",function(Te){if(a.isStopPropagation&&Te.stopPropagation(),a.isStartDragging&&(a.sumDeltaX+=Te.clientX-a.startX,a.sumDeltaY+=Te.clientY-a.startY,a.startX=Te.clientX,a.startY=Te.clientY,a.step<=1||Math.abs(a.sumDeltaX)>a.step||Math.abs(a.sumDeltaY)>a.step)){var Pe,Qe=a.sumDeltaX%a.step,yt=a.sumDeltaY%a.step,Et=a.sumDeltaX-Qe,bt=a.sumDeltaY-yt;a.sumDeltaX=Qe,a.sumDeltaY=yt;var jt,Gt=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();a.isDragging||((jt=a.eventCenter)===null||jt===void 0||jt.emit(tt["".concat(a.eventType,"_DRAGSTART")],{e:Te,data:a.data||Gt}),a.onDragStart({event:Te})),a.isDragging=!0,Promise.resolve().then(function(){var Wt,fn;a.onDragging({deltaX:Et,deltaY:bt,event:Te}),(Wt=a.eventCenter)===null||Wt===void 0||Wt.emit(tt["".concat(a.eventType,"_MOUSEMOVE")],{e:Te,data:a.data||Gt}),(fn=a.eventCenter)===null||fn===void 0||fn.emit(tt["".concat(a.eventType,"_DRAG")],{e:Te,data:a.data||Gt})})}}),Ut(this,"handleMouseUp",function(Te){a.isStartDragging=!1,a.isStopPropagation&&Te.stopPropagation(),Promise.resolve().then(function(){var Pe,Qe,yt;Zn.removeEventListener("mousemove",a.handleMouseMove,!1),Zn.removeEventListener("mouseup",a.handleMouseUp,!1);var Et=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();(Qe=a.eventCenter)===null||Qe===void 0||Qe.emit(tt["".concat(a.eventType,"_MOUSEUP")],{e:Te,data:a.data||Et}),a.isDragging&&(a.isDragging=!1,a.onDragEnd({event:Te}),(yt=a.eventCenter)===null||yt===void 0||yt.emit(tt["".concat(a.eventType,"_DROP")],{e:Te,data:a.data||Et}))})}),Ut(this,"cancelDrag",function(){Zn.removeEventListener("mousemove",a.handleMouseMove,!1),Zn.removeEventListener("mouseup",a.handleMouseUp,!1),a.onDragEnd({event:null}),a.isDragging=!1}),this.onDragStart=u,this.onDragging=h,this.onDragEnd=x,this.step=ne,this.isStopPropagation=de,this.eventType=T,this.eventCenter=V,this.model=Ce,this.data=Ue}var t,n;return t=e,(n=[{key:"setStep",value:function(r){this.step=r}}])&&yb(t.prototype,n),e}(),Bd={node:!1,edge:!1},gb={node:!0,edge:!0};function Gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gd(Object(n),!0).forEach(function(r){Jn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fi(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||Hd(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wo(e){return function(t){if(Array.isArray(t))return Ds(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||Hd(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hd(e,t){if(e){if(typeof e=="string")return Ds(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ds(e,t):void 0}}function Ds(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pa(e){return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pa(e)}function Dn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Fd,Xd=200,Ud=(fe=function(){function e(r){(function(V,$){if(!(V instanceof $))throw new TypeError("Cannot call a class as a function")})(this,e),Jn(this,"rootEl",void 0),Dn(this,"width",Pd,this),Dn(this,"height",Md,this),Jn(this,"theme",void 0),Jn(this,"eventCenter",void 0),Jn(this,"modelMap",new Map),Jn(this,"topElement",void 0),Jn(this,"animation",void 0),Jn(this,"idGenerator",void 0),Jn(this,"edgeGenerator",void 0),Jn(this,"nodeMoveRules",[]),Dn(this,"edgeType",kd,this),Dn(this,"nodes",Td,this),Dn(this,"edges",Ad,this),Dn(this,"overlapMode",Nd,this),Dn(this,"background",Dd,this),Dn(this,"transformModel",Cd,this),Dn(this,"editConfigModel",Rd,this),Dn(this,"gridSize",Id,this),Dn(this,"partial",Ld,this),Dn(this,"fakerNode",zd,this);var a,i,u,p=r.container,h=r.background,_=h===void 0?{}:h,x=r.grid,M=r.idGenerator,T=r.edgeGenerator,L=r.animation;this.background=_,Pa(x)==="object"&&(this.gridSize=x.size),this.rootEl=p,this.editConfigModel=new Qf(r),this.eventCenter=new Rm,this.transformModel=new em(this.eventCenter),this.theme=wp(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=(a=L)&&typeof a!="boolean"?Op(Nt(Bd),a):Nt(a===!0?gb:Bd),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=M,this.edgeGenerator=(i=this,typeof(u=T)!="function"?function(V,$,ne){return Object.assign({type:i.edgeType},ne)}:function(V,$,ne){var re=u(V,$,ne);return re?typeof re=="string"?Object.assign({},ne,{type:re}):Object.assign({type:re},ne):{type:i.edgeType}}),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=Dr()}var t,n;return t=e,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(r,a,i){return r[a.id]={index:i,model:a},r},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(r,a,i){return r[a.id]={index:i,model:a},r},{})}},{key:"modelsMap",get:function(){return[].concat(wo(this.nodes),wo(this.edges)).reduce(function(r,a){return r[a.id]=a,r},{})}},{key:"sortElements",get:function(){var r=[];this.nodes.forEach(function(_){return r.push(_)}),this.edges.forEach(function(_){return r.push(_)}),r=r.sort(function(_,x){return _.zIndex-x.zIndex});for(var a=[],i=[-200,-200],u=[this.width+Xd,this.height+Xd],p=0;p<r.length;p++){var h=r[p];h.visible&&(!this.partial||h.isSelected||this.isElementInArea(h,i,u,!1,!1))&&a.push(h)}return a}},{key:"textEditElement",get:function(){var r=this.nodes.find(function(i){return i.state===Ot.TEXT_EDIT}),a=this.edges.find(function(i){return i.state===Ot.TEXT_EDIT});return r||a}},{key:"selectElements",get:function(){var r=new Map;return this.nodes.forEach(function(a){a.isSelected&&r.set(a.id,a)}),this.edges.forEach(function(a){a.isSelected&&r.set(a.id,a)}),r}},{key:"selectNodes",get:function(){var r=[];return this.nodes.forEach(function(a){a.isSelected&&r.push(a)}),r}},{key:"getAreaElement",value:function(r,a){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=[],_=[];this.nodes.forEach(function(T){return _.push(T)}),this.edges.forEach(function(T){return _.push(T)});for(var x=0;x<_.length;x++){var M=_[x];p&&!M.visible||!this.isElementInArea(M,r,a,i,u)||h.push(M)}return h}},{key:"getModel",value:function(r){return this.modelMap.get(r)}},{key:"getNodeModelById",value:function(r){var a;return this.fakerNode&&r===this.fakerNode.id?this.fakerNode:(a=this.nodesMap[r])===null||a===void 0?void 0:a.model}},{key:"getPointByClient",value:function(r){var a=r.x,i=r.y,u=this.rootEl.getBoundingClientRect(),p={x:a-u.left,y:i-u.top},h=fi(this.transformModel.HtmlPointToCanvasPoint([p.x,p.y]),2);return{domOverlayPosition:p,canvasOverlayPosition:{x:h[0],y:h[1]}}}},{key:"isElementInArea",value:function(r,a,i){var u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(r.BaseType===Ft.NODE){for(var h=En(r=r),_=h.minX,x=h.minY,M=h.maxX,T=h.maxY,L=[{x:_,y:x},{x:M,y:x},{x:M,y:T},{x:_,y:T}],V=p,$=0;$<L.length;$++){var ne=L[$],re=ne.x,de=ne.y,Oe=this.transformModel.CanvasPointToHtmlPoint([re,de]),Ce=fi(Oe,2);if(re=Ce[0],de=Ce[1],fs([re,de],a,i)!==p){V=!p;break}}return V}if(r.BaseType===Ft.EDGE){var Se=r=r,Ue=Se.startPoint,Te=Se.endPoint,Pe=this.transformModel.CanvasPointToHtmlPoint([Ue.x,Ue.y]),Qe=this.transformModel.CanvasPointToHtmlPoint([Te.x,Te.y]),yt=fs(Pe,a,i),Et=fs(Qe,a,i);return u?yt&&Et:yt||Et}return!1}},{key:"graphDataToModel",value:function(r){var a=this;if(this.width&&this.height||this.resize(),!r)return this.nodes=[],void(this.edges=[]);r.nodes?this.nodes=pa(r.nodes,function(i){var u=a.getModel(i.type);if(!u)throw new Error("找不到".concat(i.type,"对应的节点。"));var p=i.x,h=i.y;return p&&h&&(i.x=Nr(p,a.gridSize),i.y=Nr(h,a.gridSize),Pa(i.text)==="object"&&(i.text.x-=xp(p,a.gridSize),i.text.y-=xp(h,a.gridSize))),new u(i,a)}):this.nodes=[],r.edges?this.edges=pa(r.edges,function(i){var u=a.getModel(i.type);if(!u)throw new Error("找不到".concat(i.type,"对应的边。"));return new u(i,a)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var r=[];this.edges.forEach(function(i){var u=i.getData();u&&!i.virtual&&r.push(u)});var a=[];return this.nodes.forEach(function(i){var u=i.getData();u&&!i.virtual&&a.push(u)}),{nodes:a,edges:r}}},{key:"modelToHistoryData",value:function(){for(var r=!1,a=[],i=0;i<this.nodes.length;i++){var u=this.nodes[i];if(u.isDragging){r=!0;break}a.push(u.getHistoryData())}if(r)return!1;for(var p=!1,h=[],_=0;_<this.edges.length;_++){var x=this.edges[_];if(x.isDragging){p=!0;break}h.push(x.getHistoryData())}return!p&&{nodes:a,edges:h}}},{key:"getEdgeModelById",value:function(r){var a;return(a=this.edgesMap[r])===null||a===void 0?void 0:a.model}},{key:"getElement",value:function(r){return this.modelsMap[r]}},{key:"getNodeEdges",value:function(r){for(var a=[],i=0;i<this.edges.length;i++){var u=this.edges[i],p=this.edges[i].sourceNodeId===r,h=this.edges[i].targetNodeId===r;(p||h)&&a.push(u)}return a}},{key:"getSelectElements",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=this.selectElements,i={nodes:[],edges:[]};return a.forEach(function(u){if(u.BaseType===Ft.NODE&&i.nodes.push(u.getData()),u.BaseType===Ft.EDGE){var p=u.getData(),h=a.get(p.sourceNodeId)&&a.get(p.targetNodeId);(r||h)&&i.edges.push(p)}}),i}},{key:"updateAttributes",value:function(r,a){this.getElement(r).updateAttributes(a)}},{key:"changeNodeId",value:function(r,a){return a||(a=Dr()),this.nodesMap[a]?"":this.nodesMap[r]?(this.edges.forEach(function(i){i.sourceNodeId===r&&(i.sourceNodeId=a),i.targetNodeId===r&&(i.targetNodeId=a)}),this.nodesMap[r].model.id=a,this.nodesMap[a]=this.nodesMap[r],a):""}},{key:"changeEdgeId",value:function(r,a){return a||(a=Dr()),this.edgesMap[a]?"":this.edgesMap[r]?(this.edges.forEach(function(i){i.id===r&&i.changeEdgeId(a)}),a):""}},{key:"setFakerNode",value:function(r){this.fakerNode=r}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(r,a){return this.modelMap.set(r,a)}},{key:"toFront",value:function(r){var a,i,u,p=((a=this.nodesMap[r])===null||a===void 0?void 0:a.model)||((i=this.edgesMap[r])===null||i===void 0?void 0:i.model);p&&(this.overlapMode===xn.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex(),p.setZIndex(9999),this.topElement=p),this.overlapMode===xn.INCREASE&&this.setElementZIndex(r,"top"))}},{key:"setElementZIndex",value:function(r,a){var i,u,p,h=((i=this.nodesMap[r])===null||i===void 0?void 0:i.model)||((u=this.edgesMap[r])===null||u===void 0?void 0:u.model);h&&(typeof a=="number"&&(p=a),a==="top"&&(p=ms()),a==="bottom"&&(p=--Ym),h.setZIndex(p))}},{key:"deleteNode",value:function(r){var a=this.nodesMap[r].model.getData();this.deleteEdgeBySource(r),this.deleteEdgeByTarget(r),this.nodes.splice(this.nodesMap[r].index,1),this.eventCenter.emit(tt.NODE_DELETE,{data:a})}},{key:"addNode",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,i=arguments.length>2?arguments[2]:void 0,u=en(r);u.id&&this.nodesMap[r.id]&&delete u.id;var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));u.x=Nr(u.x,this.gridSize),u.y=Nr(u.y,this.gridSize);var h=new p(u,this);this.nodes.push(h);var _=h.getData(),x={data:_};return i&&(x.e=i),this.eventCenter.emit(a,x),h}},{key:"cloneNode",value:function(r){var a=this.getNodeModelById(r),i=a.getData();i.x+=30,i.y+=30,delete i.id,i.text&&(i.text.x+=30,i.text.y+=30);var u=this.addNode(i);return u.setSelected(!0),a.setSelected(!1),u.getData()}},{key:"moveNode",value:function(r,a,i){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var h=p.model,_=h.getMoveDistance(a,i,u),x=fi(_,2);a=x[0],i=x[1],this.moveEdge(r,a,i)}}},{key:"moveNode2Coordinate",value:function(r,a,i){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var h=p.model,_=h.x,x=h.y,M=a-_,T=i-x;this.moveNode(r,M,T,u)}}},{key:"editText",value:function(r){this.setElementStateById(r,Ot.TEXT_EDIT)}},{key:"addEdge",value:function(r){var a=en(r),i=a.type;i||(i=this.edgeType),a.id&&this.edgesMap[a.id]&&delete a.id;var u=this.getModel(i);if(!u)throw new Error("找不到".concat(i,"对应的边，请确认是否已注册此类型边。"));var p=new u(ja(ja({},a),{},{type:i}),this),h=p.getData();return this.edges.push(p),this.eventCenter.emit(tt.EDGE_ADD,{data:h}),p}},{key:"moveEdge",value:function(r,a,i){for(var u=0;u<this.edges.length;u++){var p,h=this.edges[u],_=h.textPosition,x=_.x,M=_.y,T=this.edges[u].sourceNodeId===r,L=this.edges[u].targetNodeId===r;if(T&&h.moveStartPoint(a,i),L&&h.moveEndPoint(a,i),T||L)if(h.customTextPosition===!0)h.resetTextPosition();else if(h.modelType===dt.POLYLINE_EDGE&&(p=h.text)!==null&&p!==void 0&&p.value){var V=h.text,$=Sd(V,h.points);h.moveText($.x-V.x,$.y-V.y)}else{var ne=h.textPosition,re=ne.x,de=ne.y;h.moveText(re-x,de-M)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(r,a){for(var i=0;i<this.edges.length;i++)if(this.edges[i].sourceNodeId===r&&this.edges[i].targetNodeId===a){var u=this.edges[i].getData();this.edges.splice(i,1),i--,this.eventCenter.emit(tt.EDGE_DELETE,{data:u})}}},{key:"deleteEdgeById",value:function(r){if(this.edgesMap[r]){var a=this.edgesMap[r].index,i=this.edgesMap[r].model.getData();this.edges.splice(a,1),this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"deleteEdgeBySource",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].sourceNodeId===r){var i=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"deleteEdgeByTarget",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].targetNodeId===r){var i=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"setElementStateById",value:function(r,a,i){this.nodes.forEach(function(u){u.id===r?u.setElementState(a,i):u.setElementState(Ot.DEFAULT)}),this.edges.forEach(function(u){u.id===r?u.setElementState(a,i):u.setElementState(Ot.DEFAULT)})}},{key:"updateText",value:function(r,a){this.nodes.forEach(function(i){i.id===r&&i.updateText(a)}),this.edges.forEach(function(i){i.id===r&&i.updateText(a)})}},{key:"selectNodeById",value:function(r){var a,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i||this.clearSelectElements();var u=(a=this.nodesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectEdgeById",value:function(r){var a,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i||this.clearSelectElements();var u=(a=this.edgesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectElementById",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];a||this.clearSelectElements();var i=this.getElement(r);i==null||i.setSelected(!0)}},{key:"clearSelectElements",value:function(){var r;this.selectElements.forEach(function(a){a==null||a.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===xn.DEFAULT&&((r=this.topElement)===null||r===void 0||r.setZIndex())}},{key:"moveNodes",value:function(r,a,i){for(var u=this,p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=r.reduce(function(re,de){var Oe=u.nodesMap[de].model.getMoveDistance(a,i,p);return re[de]=Oe,re},{}),_=0;_<this.edges.length;_++){var x=this.edges[_],M=h[x.sourceNodeId],T=void 0,L=void 0;if(M){var V=fi(M,2);T=V[0],L=V[1],x.moveStartPoint(T,L)}var $=h[x.targetNodeId];if($){var ne=fi($,2);T=ne[0],L=ne[1],x.moveEndPoint(T,L)}(M||$)&&x.moveText(T,L)}}},{key:"addNodeMoveRules",value:function(r){this.nodeMoveRules.includes(r)||this.nodeMoveRules.push(r)}},{key:"setDefaultEdgeType",value:function(r){this.edgeType=r}},{key:"changeNodeType",value:function(r,a){var i=this.getNodeModelById(r);if(i){var u=i.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));var h=new p(u,this);this.nodes.splice(this.nodesMap[r].index,1,h),this.getNodeEdges(r).forEach(function(_){if(_.sourceNodeId===r){var x=Jp(h,_.startPoint,h.width,h.height);_.updateStartPoint(x)}if(_.targetNodeId===r){var M=Jp(h,_.endPoint,h.width,h.height);_.updateEndPoint(M)}})}}},{key:"changeEdgeType",value:function(r,a){var i=this.getEdgeModelById(r);if(i&&i.type!==a){var u=i.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));delete u.pointsList;var h=new p(u,this);this.edges.splice(this.edgesMap[r].index,1,h)}}},{key:"getNodeIncomingEdge",value:function(r){var a=[];return this.edges.forEach(function(i){i.targetNodeId===r&&a.push(i)}),a}},{key:"getNodeOutgoingEdge",value:function(r){var a=[];return this.edges.forEach(function(i){i.sourceNodeId===r&&a.push(i)}),a}},{key:"getNodeIncomingNode",value:function(r){var a=this,i=[];return this.edges.forEach(function(u){u.targetNodeId===r&&i.push(a.nodesMap[u.sourceNodeId].model)}),i}},{key:"getNodeOutgoingNode",value:function(r){var a=this,i=[];return this.edges.forEach(function(u){u.sourceNodeId===r&&i.push(a.nodesMap[u.targetNodeId].model)}),i}},{key:"setTheme",value:function(r){this.theme=wp(ja(ja({},this.theme),r))}},{key:"resize",value:function(r,a){this.width=r||this.rootEl.getBoundingClientRect().width,this.height=a||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var r=this.nodes,a=[],i=[];r.forEach(function(M){var T=M.x,L=M.y,V=M.width,$=M.height,ne=M.getNodeStyle().strokeWidth,re=ne===void 0?0:ne;a=a.concat([T+V/2+re,T-V/2-re]),i=i.concat([L+$/2+re,L-$/2-re])});var u=Math.min.apply(Math,wo(a)),p=Math.max.apply(Math,wo(a)),h=Math.min.apply(Math,wo(i)),_=p-u||0,x=Math.max.apply(Math,wo(i))-h||0;return{virtualRectWidth:_,virtualRectHeight:x,virtualRectCenterPositionX:u+_/2,virtualRectCenterPositionY:h+x/2}}},{key:"translateCenter",value:function(){var r=this.nodes,a=this.width,i=this.height,u=this.rootEl,p=this.transformModel;if(r.length){var h=a||u.clientWidth,_=i||u.clientHeight,x=this.getVirtualRectSize(),M=x.virtualRectCenterPositionX,T=x.virtualRectCenterPositionY;p.focusOn(M,T,h,_)}}},{key:"fitView",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,i=this.nodes,u=this.width,p=this.height,h=this.rootEl,_=this.transformModel;if(i.length){var x=u||h.clientWidth,M=p||h.clientHeight,T=this.getVirtualRectSize(),L=T.virtualRectWidth,V=T.virtualRectHeight,$=T.virtualRectCenterPositionX,ne=T.virtualRectCenterPositionY,re=(L+a)/x,de=(V+r)/M,Oe=0;Oe=1/Math.max(re,de);var Ce=[x/2,M/2];_.zoom(Oe,Ce),_.focusOn($,ne,x,M)}}},{key:"openEdgeAnimation",value:function(r){this.getEdgeModelById(r).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(r){this.getEdgeModelById(r).closeEdgeAnimation()}}],n&&mb(t.prototype,n),e}(),Pd=$e(fe.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Md=$e(fe.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kd=$e(fe.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Td=$e(fe.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ad=$e(fe.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nd=$e(fe.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xn.DEFAULT}}),Dd=$e(fe.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cd=$e(fe.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rd=$e(fe.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Id=$e(fe.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ld=$e(fe.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zd=$e(fe.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e(fe.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"nodesMap"),fe.prototype),$e(fe.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"edgesMap"),fe.prototype),$e(fe.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"modelsMap"),fe.prototype),$e(fe.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"sortElements"),fe.prototype),$e(fe.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"textEditElement"),fe.prototype),$e(fe.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectElements"),fe.prototype),$e(fe.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodes"),fe.prototype),$e(fe.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setFakerNode"),fe.prototype),$e(fe.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"removeFakerNode"),fe.prototype),$e(fe.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setModel"),fe.prototype),$e(fe.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"toFront"),fe.prototype),$e(fe.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementZIndex"),fe.prototype),$e(fe.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteNode"),fe.prototype),$e(fe.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addNode"),fe.prototype),$e(fe.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"cloneNode"),fe.prototype),$e(fe.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode"),fe.prototype),$e(fe.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNode2Coordinate"),fe.prototype),$e(fe.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"editText"),fe.prototype),$e(fe.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"addEdge"),fe.prototype),$e(fe.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveEdge"),fe.prototype),$e(fe.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySourceAndTarget"),fe.prototype),$e(fe.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeById"),fe.prototype),$e(fe.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeBySource"),fe.prototype),$e(fe.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"deleteEdgeByTarget"),fe.prototype),$e(fe.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setElementStateById"),fe.prototype),$e(fe.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"updateText"),fe.prototype),$e(fe.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectNodeById"),fe.prototype),$e(fe.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectEdgeById"),fe.prototype),$e(fe.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"selectElementById"),fe.prototype),$e(fe.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearSelectElements"),fe.prototype),$e(fe.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"moveNodes"),fe.prototype),$e(fe.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setDefaultEdgeType"),fe.prototype),$e(fe.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeNodeType"),fe.prototype),$e(fe.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"changeEdgeType"),fe.prototype),$e(fe.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingEdge"),fe.prototype),$e(fe.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingEdge"),fe.prototype),$e(fe.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeIncomingNode"),fe.prototype),$e(fe.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"getNodeOutgoingNode"),fe.prototype),$e(fe.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"setTheme"),fe.prototype),$e(fe.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"resize"),fe.prototype),$e(fe.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"clearData"),fe.prototype),$e(fe.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"translateCenter"),fe.prototype),$e(fe.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"fitView"),fe.prototype),$e(fe.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"openEdgeAnimation"),fe.prototype),$e(fe.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(fe.prototype,"closeEdgeAnimation"),fe.prototype),fe),bb=Ud;function Cs(e){return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function Rs(){return Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rs.apply(this,arguments)}function _b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Is(e,t){return Is=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Is(e,t)}function Ob(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ma(e);if(t){var a=Ma(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return wb(this,n)}}function wb(e,t){if(t&&(Cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e){return Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ma(e)}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vd,xb=Fn(Fd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Is(i,u)})(a,e);var t,n,r=Ob(a);function a(i){var u;(function(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")})(this,a),yr(Qn(u=r.call(this)),"stepDrag",void 0),yr(Qn(u),"stepScrollX",0),yr(Qn(u),"stepScrollY",0),yr(Qn(u),"onDragging",function(x){var M=x.deltaX,T=x.deltaY;u.setState({isDragging:!0});var L=u.props.graphModel,V=L.transformModel;L.editConfigModel.stopMoveGraph||V.translate(M,T)}),yr(Qn(u),"onDragEnd",function(){u.setState({isDragging:!1})}),yr(Qn(u),"zoomHandler",function(x){var M=u.props,T=M.graphModel,L=T.editConfigModel,V=T.transformModel,$=T.gridSize,ne=M.graphModel,re=x.deltaX,de=x.deltaY;if(L.stopScrollGraph||x.ctrlKey===!0){if(!L.stopZoomGraph){x.preventDefault();var Oe=ne.getPointByClient({x:x.clientX,y:x.clientY}).canvasOverlayPosition,Ce=Oe.x,Se=Oe.y;V.zoom(x.deltaY<0,[Ce,Se])}}else{if(x.preventDefault(),u.stepScrollX+=re,u.stepScrollY+=de,Math.abs(u.stepScrollX)>=$){var Ue=u.stepScrollX%$,Te=u.stepScrollX-Ue;V.translate(-Te*V.SCALE_X,0),u.stepScrollX=Ue}if(Math.abs(u.stepScrollY)>=$){var Pe=u.stepScrollY%$,Qe=u.stepScrollY-Pe;V.translate(0,-Qe*V.SCALE_Y),u.stepScrollY=Pe}}}),yr(Qn(u),"clickHandler",function(x){if(x.target.getAttribute("name")==="canvas-overlay"){var M=u.props.graphModel;M.selectElements.size>0&&M.clearSelectElements(),M.eventCenter.emit(tt.BLANK_CLICK,{e:x})}}),yr(Qn(u),"handleContextMenu",function(x){if(x.target.getAttribute("name")==="canvas-overlay"){x.preventDefault();var M=u.props.graphModel,T=M.getPointByClient({x:x.clientX,y:x.clientY});M.eventCenter.emit(tt.BLANK_CONTEXTMENU,{e:x,position:T})}}),yr(Qn(u),"mouseDownHandler",function(x){var M=u.props.graphModel,T=M.eventCenter,L=M.editConfigModel,V=M.transformModel.SCALE_X,$=M.gridSize,ne=x.target,re=!L.adjustEdge&&!L.adjustNodePosition;(ne.getAttribute("name")==="canvas-overlay"||re)&&(L.stopMoveGraph?T.emit(tt.BLANK_MOUSEDOWN,{e:x}):(u.stepDrag.setStep($*V),u.stepDrag.handleMouseDown(x)),u.clickHandler(x))});var p=i.graphModel,h=p.gridSize,_=p.eventCenter;return u.stepDrag=new hr({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:h,eventType:"BLANK",isStopPropagation:!1,eventCenter:_,model:null}),u.state={isDragging:!1},u}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props,p=u.children,h=u.dnd,_=this.state.isDragging;return Object(te.g)("svg",Rs({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:_?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},h.eventMap()),Object(te.g)("g",{transform:i},p))}}])&&_b(t.prototype,n),a}(te.a))||Fd;function Ls(e){return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function Eb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zs(e,t){return zs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},zs(e,t)}function jb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ka(e);if(t){var a=ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Pb(this,n)}}function Pb(e,t){if(t&&(Ls(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ka(e){return ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(e)}var Mb=Fn(Vd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&zs(i,u)})(a,e);var t,n,r=jb(a);function a(){return Eb(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var i=this.props,u=i.tool,p=i.graphModel,h=u.getTools().map(function(_){return Object(te.g)(_,{graphModel:p,logicFlow:u.instance})});return u.components=h,h}},{key:"triggerToolRender",value:function(){var i=this.props,u=i.tool,p=i.graphModel,h=document.querySelector("#ToolOverlay_".concat(p.flowId)),_=u.getInstance();_.components.forEach(function(x){return x(_,h)}),_.components=[]}},{key:"render",value:function(){var i=this.props.graphModel;return Object(te.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(i.flowId)},this.getTools())}}])&&Sb(t.prototype,n),a}(te.a))||Vd;function Bs(e){return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function kb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t){return Gs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Gs(e,t)}function Ab(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ta(e);if(t){var a=Ta(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Nb(this,n)}}function Nb(e,t){if(t&&(Bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ta(e){return Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ta(e)}var Yd,Db=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Gs(i,u)})(a,e);var t,n,r=Ab(a);function a(){return kb(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.background;return Object(te.g)("div",{className:"lf-background"},Object(te.g)("div",{style:i,className:"lf-background-area"}))}}])&&Tb(t.prototype,n),a}(te.a);function Hs(e){return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function Cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fs(e,t){return Fs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fs(e,t)}function Ib(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Aa(e);if(t){var a=Aa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Lb(this,n)}}function Lb(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wd(e)}function Wd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e){return Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(e)}function zb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $d=Fn(Yd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Fs(i,u)})(a,e);var t,n,r=Ib(a);function a(){var i;Cb(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return zb(Wd(i=r.call.apply(r,[this].concat(p))),"id",Dr()),i}return t=a,(n=[{key:"renderDot",value:function(){var i=this.props,u=i.config,p=u.color,h=u.thickness,_=h===void 0?2:h,x=i.size,M=i.visible,T=Math.min(Math.max(2,_),x/2),L=1;return M||(L=0),Object(te.g)("rect",{width:T,height:T,rx:T/2,ry:T/2,fill:p,opacity:L})}},{key:"renderMesh",value:function(){var i=this.props,u=i.config,p=u.color,h=u.thickness,_=h===void 0?1:h,x=i.size,M=i.visible,T=Math.min(Math.max(1,_),x/2),L="M ".concat(x," 0 H0 M0 0 V0 ").concat(x),V=1;return M||(V=0),Object(te.g)("path",{d:L,stroke:p,strokeWidth:T,opacity:V})}},{key:"render",value:function(){var i=this.props,u=i.type,p=i.size,h=i.graphModel.transformModel,_=[h.SCALE_X,h.SKEW_Y,h.SKEW_X,h.SCALE_Y,h.TRANSLATE_X,h.TRANSLATE_Y].join(","),x="matrix(".concat(_,")");return Object(te.g)("div",{className:"lf-grid"},Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(te.g)("defs",null,Object(te.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:x,x:"0",y:"0",width:p,height:p},u==="dot"&&this.renderDot(),u==="mesh"&&this.renderMesh())),Object(te.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&Rb(t.prototype,n),a}(te.a))||Yd;$d.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function Xs(e){return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function Bb(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Kd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Kd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qd,xo=function(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(n){var r=Bb(n,2),a=r[0],i=r[1];(a==="style"||Xs(i)!=="object")&&(t[a]=i)}),Object(te.g)("line",t)};function Us(e){return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(e)}function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zd(Object(n),!0).forEach(function(r){Gb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vs(e,t){return Vs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Vs(e,t)}function Xb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Da(e);if(t){var a=Da(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ub(this,n)}}function Ub(e,t){if(t&&(Us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Da(e){return Da=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Da(e)}var Jd,Vb=Fn(qd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Vs(i,u)})(a,e);var t,n,r=Xb(a);function a(){return Hb(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.snaplineModel,u=i.position,p=i.isShowHorizontal,h=i.isShowVertical,_=i.getStyle(),x=u.x,M=x===void 0?0:x,T=u.y,L=T===void 0?0:T,V=Na(Na({x1:-1e5,y1:L,x2:1e5,y2:L},_),{},{stroke:p?_.stroke:"none"}),$=Na(Na({x1:M,y1:-1e5,x2:M,y2:1e5},_),{},{stroke:h?_.stroke:"none"});return Object(te.g)("g",{className:"lf-snapline"},Object(te.g)(xo,V),Object(te.g)(xo,$))}}])&&Fb(t.prototype,n),a}(te.a))||qd;function Ys(e){return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function Yb(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Qd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ir(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.className,u=e.radius,p=t-r/2,h=n-a/2,_={};return Object.entries(e).forEach(function(x){var M=Yb(x,2),T=M[0],L=M[1];Ys(L)!=="object"&&(_[T]=L)}),_.className=i?"lf-basic-shape ".concat(i):"lf-basic-shape",u&&(_.rx=u,_.ry=u),_.x=p,_.y=h,Object(te.g)("rect",_)}function Ws(e){return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function Eo(){return Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eo.apply(this,arguments)}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(r){Wb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $s(e,t){return $s=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},$s(e,t)}function qb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ca(e);if(t){var a=Ca(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Zb(this,n)}}function Zb(e,t){if(t&&(Ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ca(e){return Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ca(e)}Ir.defaultProps={className:"",radius:""};var nh,Jb=Fn(Jd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&$s(i,u)})(a,e);var t,n,r=qb(a);function a(){return $b(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getNodesOutline",value:function(){var i=this.props.graphModel,u=i.nodes,p=i.editConfigModel,h=p.hoverOutline,_=p.nodeSelectedOutline,x=[];return u.forEach(function(M){if(M.isHovered||M.isSelected){var T=M.isHovered,L=M.isSelected,V=M.x,$=M.y,ne=M.width,re=M.height;if(_&&L||h&&T){var de=M.getOutlineStyle(),Oe={};if(Object.keys(de).forEach(function(Se){Se!=="hover"&&(Oe[Se]=de[Se])}),T){var Ce=de.hover;Oe=th(th({},Oe),Ce)}x.push(Object(te.g)(Ir,Eo({className:"lf-outline-node",x:V,y:$,width:ne+10,height:re+10},Oe)))}}}),x}},{key:"getEdgeOutline",value:function(){for(var i=this.props.graphModel,u=i.edges,p=i.editConfigModel,h=p.edgeSelectedOutline,_=p.hoverOutline,x=[],M=0;M<u.length;M++){var T=u[M];(h&&T.isSelected||_&&T.isHovered)&&(T.modelType===dt.LINE_EDGE?x.push(this.getLineOutline(T)):T.modelType===dt.POLYLINE_EDGE?x.push(this.getPolylineOutline(T)):T.modelType===dt.BEZIER_EDGE&&x.push(this.getBezierOutline(T)))}return x}},{key:"getLineOutline",value:function(i){var u=i.startPoint,p=i.endPoint,h=(u.x+p.x)/2,_=(u.y+p.y)/2,x=Math.abs(u.x-p.x)+10,M=Math.abs(u.y-p.y)+10,T=i.getOutlineStyle();return Object(te.g)(Ir,Eo({className:"lf-outline-edge",x:h,y:_,width:x,height:M},T))}},{key:"getPolylineOutline",value:function(i){var u=i.points,p=to(u),h=ci(p,8),_=h.x,x=h.y,M=h.width,T=h.height,L=i.getOutlineStyle();return Object(te.g)(Ir,Eo({className:"lf-outline",x:_,y:x,width:M,height:T},L))}},{key:"getBezierOutline",value:function(i){var u=i.path,p=Ea(u),h=ci(p,8),_=h.x,x=h.y,M=h.width,T=h.height,L=i.getOutlineStyle();return Object(te.g)(Ir,Eo({className:"lf-outline",x:_,y:x,width:M,height:T},L))}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Kb(t.prototype,n),a}(te.a))||Jd;function Ks(e){return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function Qb(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return rh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return rh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pi(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.r,u=i===void 0?4:i,p=e.className,h={cx:n,cy:a,r:u,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(_){var x=Qb(_,2),M=x[0],T=x[1];Ks(T)!=="object"&&(h[M]=T)}),h.className=p?"lf-basic-shape ".concat(p):"lf-basic-shape",Object(te.g)("circle",h)}function qs(e){return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}function e0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return oh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return oh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function oh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function di(){return di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},di.apply(this,arguments)}function ih(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uh(e,t,n){return t&&ah(e.prototype,t),n&&ah(e,n),e}function sh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zs(e,t)}function Zs(e,t){return Zs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Zs(e,t)}function ch(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ia(e);if(t){var a=Ia(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return t0(this,n)}}function t0(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ra(e)}function Ra(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(e){return Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ia(e)}function Js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lh,fh=function(e){sh(n,e);var t=ch(n);function n(){var r;return ih(this,n),Js(Ra(r=t.call(this)),"dragHandler",void 0),Js(Ra(r),"onDragging",function(a){var i=a.event,u=r.props,p=u.graphModel,h=u.bezierModel,_=u.type,x=p.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,M=x.x,T=x.y;h.updateAdjustAnchor({x:M,y:T},_)}),Js(Ra(r),"onDragEnd",function(){r.props.bezierModel.isDragging=!1}),r.dragHandler=new hr({onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return uh(n,[{key:"render",value:function(){var r=this,a=this.props.position,i=a.x,u=a.y,p=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(te.g)(pi,di({className:"lf-bezier-adjust-anchor",x:i,y:u},p,{onMouseDown:function(h){r.dragHandler.handleMouseDown(h)}}))}}]),n}(te.a),n0=Fn(nh=function(e){sh(n,e);var t=ch(n);function n(){return ih(this,n),t.apply(this,arguments)}return uh(n,[{key:"getBezierAdjust",value:function(r,a){var i=r.path,u=r.id,p=e0(Ea(i),4),h=p[0],_=p[1],x=p[2],M=p[3],T=r.getEdgeStyle().adjustLine,L=[];return L.push(Object(te.g)(xo,di({x1:h.x,y1:h.y,x2:_.x,y2:_.y},T))),L.push(Object(te.g)(fh,{position:_,bezierModel:r,graphModel:a,key:"".concat(u,"_ePre"),type:"sNext"})),L.push(Object(te.g)(xo,di({x1:M.x,y1:M.y,x2:x.x,y2:x.y},T))),L.push(Object(te.g)(fh,{position:x,bezierModel:r,graphModel:a,key:"".concat(u,"_sNext"),type:"ePre"})),L}},{key:"selectedBezierEdge",value:function(){for(var r=this.props.graphModel,a=r.edges,i=[],u=0;u<a.length;u++){var p=a[u];p.isSelected&&p.modelType===dt.BEZIER_EDGE&&p.draggable&&i.push(this.getBezierAdjust(p,r))}return i}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(te.a))||nh;function Qs(e){return Qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qs(e)}function r0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(e,t){return ec=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ec(e,t)}function i0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=La(e);if(t){var a=La(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return a0(this,n)}}function a0(e,t){if(t&&(Qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},La(e)}var ph,u0=Fn(lh=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ec(i,u)})(a,e);var t,n,r=i0(a);function a(){return r0(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props.children;return Object(te.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(te.g)("g",{transform:i},u))}}])&&o0(t.prototype,n),a}(te.a))||lh;function tc(e){return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function nc(){return nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nc.apply(this,arguments)}function s0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rc(e,t){return rc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},rc(e,t)}function l0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=za(e);if(t){var a=za(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f0(this,n)}}function f0(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function za(e){return za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},za(e)}var p0=Fn(ph=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&rc(i,u)})(a,e);var t,n,r=l0(a);function a(){return s0(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getComponent",value:function(i,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",h=this.props.getView,_=h(i.type);return Object(te.g)(_,{key:i.id,model:i,graphModel:u,overlay:p})}},{key:"render",value:function(){var i=this,u=this.props,p=u.graphModel,h=u.tool,_=u.options,x=u.dnd,M=u.snaplineModel,T={};_.width&&(T.width="".concat(p.width,"px")),_.height&&(T.height="".concat(p.height,"px"));var L=_.grid,V=p.fakerNode,$=p.editConfigModel.adjustEdge;return Object(te.g)("div",{className:"lf-graph","flow-id":p.flowId,style:T},Object(te.g)(xb,{graphModel:p,dnd:x},Object(te.g)("g",{className:"lf-base"},pa(p.sortElements,function(ne){return i.getComponent(ne,p)})),V?this.getComponent(V,p):""),Object(te.g)(u0,{graphModel:p},Object(te.g)(Jb,{graphModel:p}),$?Object(te.g)(n0,{graphModel:p}):"",_.snapline!==!1?Object(te.g)(Vb,{snaplineModel:M}):""),Object(te.g)(Mb,{graphModel:p,tool:h}),_.background&&Object(te.g)(Db,{background:_.background}),_.grid&&Object(te.g)($d,nc({},L,{graphModel:p})))}}],n&&c0(t.prototype,n),a}(te.a))||ph,d0=p0;function dh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dh(Object(n),!0).forEach(function(r){vr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y0=function(){function e(r){var a=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),vr(this,"nodeConfig",void 0),vr(this,"lf",void 0),vr(this,"fakerNode",void 0),vr(this,"stopDrag",function(){a.nodeConfig=null,window.document.removeEventListener("mouseup",a.stopDrag)}),vr(this,"dragEnter",function(u){a.nodeConfig&&!a.fakerNode&&(a.fakerNode=a.lf.createFakerNode(Ba(Ba({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY}))))}),vr(this,"onDragOver",function(u){if(u.preventDefault(),a.fakerNode){var p=a.clientToLocalPoint({x:u.clientX,y:u.clientY}),h=p.x,_=p.y;a.fakerNode.moveTo(h,_);var x=a.fakerNode.getData();a.lf.setNodeSnapLine(x),a.lf.graphModel.eventCenter.emit(tt.NODE_DND_DRAG,{data:x})}return!1}),vr(this,"onDragLeave",function(){a.fakerNode&&(a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)}),vr(this,"onDrop",function(u){a.lf.graphModel&&u&&a.nodeConfig&&(a.lf.addNode(Ba(Ba({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY})),tt.NODE_DND_ADD,u),u.preventDefault(),u.stopPropagation(),a.nodeConfig=null,a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)});var i=r.lf;this.lf=i}var t,n;return t=e,(n=[{key:"clientToLocalPoint",value:function(r){var a=r.x,i=r.y,u=jf(this.lf.options,["grid","size"]),p=this.lf.graphModel.getPointByClient({x:a,y:i}).canvasOverlayPosition,h=p.x,_=p.y;return{x:Nr(h,u),y:Nr(_,u)}}},{key:"startDrag",value:function(r){this.nodeConfig=r,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&h0(t.prototype,n),e}();function hh(e){var t=e.container,n=e.grid,r=e.width,a=e.height;if(!t)throw new Error("请检查 container 参数是否有效");if(typeof r=="string"||typeof a=="string")throw new Error("width或height不支持传入字符串，请传数字");return n&&(e.grid=un({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),un({},vh,e)}var mt,yh,vh={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function oc(e){return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function ic(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return gh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return gh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function gh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mh(Object(n),!0).forEach(function(r){bh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function g0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hi(){return hi=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=b0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},hi.apply(this,arguments)}function b0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Lr(e))!==null;);return e}function ac(e,t){return ac=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ac(e,t)}function _0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Lr(e);if(t){var a=Lr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O0(this,n)}}function O0(e,t){if(t&&(oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ha(e)}function Ha(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e){return Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lr(e)}function bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var uc=(mt=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ac(i,u)})(a,e);var t,n,r=_0(a);function a(){var i;g0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return bh(Ha(i=r.call.apply(r,[this].concat(p))),"modelType",dt.BEZIER_EDGE),v0(Ha(i),"path",yh,Ha(i)),i}return t=a,(n=[{key:"initEdgeData",value:function(i){this.offset=100,hi(Lr(a.prototype),"initEdgeData",this).call(this,i)}},{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.bezier;return Ga(Ga({},hi(Lr(a.prototype),"getEdgeStyle",this).call(this)),Nt(i))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var i=0,u=0;return this.pointsList.forEach(function(p){var h=p.x,_=p.y;i+=h,u+=_}),{x:i/this.pointsList.length,y:u/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var i=hi(Lr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Ga(Ga({},i),{},{pointsList:u})}},{key:"getControls",value:function(){var i=this.startPoint,u=this.endPoint;return xd({start:i,end:u,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(i){var u=ic(i,4),p=u[0],h=u[1],_=u[2],x=u[3];return"M ".concat(p.x," ").concat(p.y,`
    C `).concat(h.x," ").concat(h.y,`,
    `).concat(_.x," ").concat(_.y,`,
    `).concat(x.x," ").concat(x.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var i=this.getControls(),u=i.sNext,p=i.ePre;this.updatePath(u,p)}},{key:"updatePath",value:function(i,u){i=Nt(i),u=Nt(u);var p={x:this.startPoint.x,y:this.startPoint.y},h={x:this.endPoint.x,y:this.endPoint.y};if(!i||!u){var _=this.getControls();i=_.sNext,u=_.ePre}this.pointsList=[p,i,u,h],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(i){this.startPoint=i,this.updatePoints()}},{key:"updateEndPoint",value:function(i){this.endPoint=i,this.updatePoints()}},{key:"moveStartPoint",value:function(i,u){this.startPoint.x+=i,this.startPoint.y+=u;var p=ic(this.pointsList,3),h=p[1],_=p[2];h.x+=i,h.y+=u,this.updatePath(h,_)}},{key:"moveEndPoint",value:function(i,u){this.endPoint.x+=i,this.endPoint.y+=u;var p=ic(this.pointsList,3),h=p[1],_=p[2];_.x+=i,_.y+=u,this.updatePath(h,_)}},{key:"updateAdjustAnchor",value:function(i,u){u==="sNext"?this.pointsList[1]=i:u==="ePre"&&(this.pointsList[2]=i),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var i=this.pointsList;return i[i.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var u=i.startPoint,p=i.endPoint,h=i.sourceNode,_=i.targetNode,x=xd({start:u,end:p,sourceNode:h,targetNode:_,offset:this.offset}),M=x.sNext,T=x.ePre;this.pointsList=[u,M,T,p],this.initPoints()}}])&&m0(t.prototype,n),a}(_s),yh=Bn(mt.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bn(mt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"initPoints"),mt.prototype),Bn(mt.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"updatePoints"),mt.prototype),Bn(mt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"updateStartPoint"),mt.prototype),Bn(mt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"updateEndPoint"),mt.prototype),Bn(mt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"moveStartPoint"),mt.prototype),Bn(mt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"moveEndPoint"),mt.prototype),Bn(mt.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"updateAdjustAnchor"),mt.prototype),Bn(mt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"getAdjustStart"),mt.prototype),Bn(mt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"getAdjustEnd"),mt.prototype),Bn(mt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(mt.prototype,"updateAfterAdjustStartAndEnd"),mt.prototype),mt),De,_h,Oh,wh,xh,Eh,Sh,jh,Ph,Mh,kh,Th,Ah,Nh,Dh,Ch,Rh,Ih,Lh,zh,w0=function(e){return e==null};function sc(e){return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(e)}function x0(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(h,_){if(h){if(typeof h=="string")return Bh(h,_);var x=Object.prototype.toString.call(h).slice(8,-1);if(x==="Object"&&h.constructor&&(x=h.constructor.name),x==="Map"||x==="Set")return Array.from(h);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return Bh(h,_)}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,u=!0,p=!1;return{s:function(){n=n.call(e)},n:function(){var h=n.next();return u=h.done,h},e:function(h){p=!0,i=h},f:function(){try{u||n.return==null||n.return()}finally{if(p)throw i}}}}function Bh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gh(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function E0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var gr,Hh,mr=(De=function(){function e(r,a){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),vn(this,"id",""),Yt(this,"type",_h,this),Yt(this,"x",Oh,this),Yt(this,"y",wh,this),Yt(this,"text",xh,this),Yt(this,"properties",Eh,this),Yt(this,"_width",Sh,this),Yt(this,"_height",jh,this),Yt(this,"anchorsOffset",Ph,this),Yt(this,"isSelected",Mh,this),Yt(this,"isHovered",kh,this),Yt(this,"isShowAnchor",Th,this),Yt(this,"isDragging",Ah,this),Yt(this,"isHitable",Nh,this),Yt(this,"draggable",Dh,this),Yt(this,"visible",Ch,this),vn(this,"virtual",!1),vn(this,"graphModel",void 0),Yt(this,"zIndex",Rh,this),Yt(this,"state",Ih,this),Yt(this,"autoToFront",Lh,this),Yt(this,"style",zh,this),vn(this,"BaseType",Ft.NODE),vn(this,"modelType",dt.NODE),vn(this,"additionStateData",void 0),vn(this,"targetRules",[]),vn(this,"sourceRules",[]),vn(this,"moveRules",[]),vn(this,"hasSetTargetRules",!1),vn(this,"hasSetSourceRules",!1),this.graphModel=a,this.initNodeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"width",get:function(){return this._width},set:function(r){this._width=r}},{key:"height",get:function(){return this._height},set:function(r){this._height=r}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,i=a&&a(r.type),u=this.createId();r.id=u||i||Dr()}this.formatText(r),un(this,function(p){return ni(p,["id","type","x","y","text","properties","virtual"])}(r)),this.graphModel.overlapMode===xn.INCREASE&&(this.zIndex=r.zIndex||ms())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(r){r.text||(r.text={value:"",x:r.x,y:r.y,draggable:!1,editable:!0}),r.text&&typeof r.text=="string"?r.text={value:r.text,x:r.x,y:r.y,draggable:!1,editable:!0}:r.text&&r.text.editable===void 0&&(r.text.editable=!0)}},{key:"getData",value:function(){var r=this.text,a=r.x,i=r.y,u=r.value,p=this.properties;Object(c.x)(p)&&(p=Object(c.I)(p));var h={id:this.id,type:this.type,x:this.x,y:this.y,properties:p};return this.graphModel.overlapMode===xn.INCREASE&&(h.zIndex=this.zIndex),u&&(h.text={x:a,y:i,value:u}),h}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return cn(cn({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.nodeText;return Nt(r)}},{key:"getAnchorStyle",value:function(r){var a=this.graphModel.theme.anchor;return Nt(a)}},{key:"getAnchorLineStyle",value:function(r){var a=this.graphModel.theme.anchorLine;return Nt(a)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Nt(r)}},{key:"isAllowConnectedAsSource",value:function(r,a,i,u){var p=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var h,_=!0,x=0;x<p.length;x++){var M=p[x];if(!M.validate.call(this,this,r,a,i,u)){_=!1,h=M.message;break}}return{isAllPass:_,msg:h}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(r,a,i,u){var p=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var h,_=!0,x=0;x<p.length;x++){var M=p[x];if(!M.validate.call(this,r,this,a,i,u)){_=!1,h=M.message;break}}return{isAllPass:_,msg:h}}},{key:"isAllowMoveNode",value:function(r,a){var i,u=!0,p=!0,h=x0(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(h.s();!(i=h.n()).done;){var _=(0,i.value)(this,r,a);if(!_)return!1;if(sc(_)==="object"){var x=_;if(x.x===!1&&x.y===!1)return!1;u=u&&x.x,p=p&&x.y}}}catch(M){h.e(M)}finally{h.f()}return{x:u,y:p}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var r=this.anchorsOffset,a=this.id,i=this.x,u=this.y;return r&&r.length>0?r.map(function(p,h){return p.length?(p=p,{id:"".concat(a,"_").concat(h),x:i+p[0],y:u+p[1]}):cn(cn({},p=p),{},{x:i+p.x,y:u+p.y,id:p.id||"".concat(a,"_").concat(h)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(r){return function(a,i){for(var u,p=ys(i),h=Number.MAX_SAFE_INTEGER,_=0;_<p.length;_++){var x=qn(a.x,a.y,p[_].x,p[_].y);x<h&&(h=x,u={index:_,anchor:Pp(Pp({},p[_]),{},{x:p[_].x,y:p[_].y,id:p[_].id})})}return u}(r,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(r){if(!w0(r))for(var a=0;a<this.anchors.length;a++){var i=this.anchors[a];if(i.id===r)return i}}},{key:"addNodeMoveRules",value:function(r){this.moveRules.includes(r)||this.moveRules.push(r)}},{key:"move",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1;if(i)u=!0,p=!0;else{var h=this.isAllowMoveNode(r,a);typeof h=="boolean"?(u=h,p=h):(u=h.x,p=h.y)}if(u){var _=this.x+r;this.x=_,this.text&&this.moveText(r,0)}if(p){var x=this.y+a;this.y=x,this.text&&this.moveText(0,a)}return u||p}},{key:"getMoveDistance",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1,h=0,_=0;if(i)u=!0,p=!0;else{var x=this.isAllowMoveNode(r,a);typeof x=="boolean"?(u=x,p=x):(u=x.x,p=x.y)}if(u&&r){var M=this.x+r;this.x=M,this.text&&this.moveText(r,0),h=r}if(p&&a){var T=this.y+a;this.y=T,this.text&&this.moveText(0,a),_=a}return[h,_]}},{key:"moveTo",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=r-this.x,p=a-this.y;return!(!i&&!this.isAllowMoveNode(u,p)||(this.text&&this.text&&this.moveText(u,p),this.x=r,this.y=a,0))}},{key:"moveText",value:function(r,a){var i=this.text,u=i.x,p=i.y,h=i.value,_=i.draggable,x=i.editable;this.text={value:h,editable:x,draggable:_,x:u+r,y:p+a}}},{key:"updateText",value:function(r){this.text=cn(cn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r,this.setIsShowAnchor(r)}},{key:"setIsShowAnchor",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"setProperty",value:function(r,a){this.properties=cn(cn({},Object(c.I)(this.properties)),{},vn({},r,en(a))),this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=cn(cn({},Object(c.I)(this.properties)),en(r)),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setStyle",value:function(r,a){this.style=cn(cn({},this.style),{},vn({},r,en(a)))}},{key:"setStyles",value:function(r){this.style=cn(cn({},this.style),en(r))}},{key:"updateStyles",value:function(r){this.style=cn({},en(r))}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=r}},{key:"updateAttributes",value:function(r){un(this,r)}}],n&&E0(t.prototype,n),e}(),_h=ft(De.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oh=ft(De.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wh=ft(De.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),xh=ft(De.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),Eh=ft(De.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Sh=ft(De.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),jh=ft(De.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Ph=ft(De.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mh=ft(De.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kh=ft(De.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Th=ft(De.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ah=ft(De.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nh=ft(De.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dh=ft(De.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ch=ft(De.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rh=ft(De.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ih=ft(De.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Lh=ft(De.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zh=ft(De.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ft(De.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(De.prototype,"incoming"),De.prototype),ft(De.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(De.prototype,"outgoing"),De.prototype),ft(De.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"addNodeMoveRules"),De.prototype),ft(De.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"move"),De.prototype),ft(De.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"getMoveDistance"),De.prototype),ft(De.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"moveTo"),De.prototype),ft(De.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"moveText"),De.prototype),ft(De.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"updateText"),De.prototype),ft(De.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setSelected"),De.prototype),ft(De.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setHovered"),De.prototype),ft(De.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setIsShowAnchor"),De.prototype),ft(De.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setHitable"),De.prototype),ft(De.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setElementState"),De.prototype),ft(De.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setProperty"),De.prototype),ft(De.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setProperties"),De.prototype),ft(De.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"deleteProperty"),De.prototype),ft(De.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setStyle"),De.prototype),ft(De.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setStyles"),De.prototype),ft(De.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"updateStyles"),De.prototype),ft(De.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"setZIndex"),De.prototype),ft(De.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(De.prototype,"updateAttributes"),De.prototype),De);function cc(e){return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function Fh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fh(Object(n),!0).forEach(function(r){Uh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function j0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lc(){return lc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=M0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},lc.apply(this,arguments)}function M0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=So(e))!==null;);return e}function fc(e,t){return fc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},fc(e,t)}function k0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=So(e);if(t){var a=So(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T0(this,n)}}function T0(e,t){if(t&&(cc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fa(e)}function Fa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function So(e){return So=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},So(e)}function Uh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pc(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var tn,Vh,Yh,dc=(gr=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&fc(i,u)})(a,e);var t,n,r=k0(a);function a(){var i;j0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Uh(Fa(i=r.call.apply(r,[this].concat(p))),"modelType",dt.CIRCLE_NODE),S0(Fa(i),"r",Hh,Fa(i)),i}return t=a,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var i=lc(So(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.circle;return Xh(Xh({},i),Nt(u))}},{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.r;return[{x:i,y:u-p,id:"".concat(this.id,"_0")},{x:i+p,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+p,id:"".concat(this.id,"_2")},{x:i-p,y:u,id:"".concat(this.id,"_3")}]}}])&&P0(t.prototype,n),a}(mr),Hh=pc(gr.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),pc(gr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(gr.prototype,"width"),gr.prototype),pc(gr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(gr.prototype,"height"),gr.prototype),gr);o(127);function hc(e){return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function yc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Wh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Wh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Kh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$h(Object(n),!0).forEach(function(r){Zh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$h(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vc(){return vc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=D0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},vc.apply(this,arguments)}function D0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Po(e))!==null;);return e}function gc(e,t){return gc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},gc(e,t)}function C0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Po(e);if(t){var a=Po(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R0(this,n)}}function R0(e,t){if(t&&(hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function jo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Po(e)}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mo(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var er,Jh,Qh,mc=(tn=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&gc(i,u)})(a,e);var t,n,r=C0(a);function a(){var i;A0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Zh(jo(i=r.call.apply(r,[this].concat(p))),"modelType",dt.DIAMOND_NODE),qh(jo(i),"rx",Vh,jo(i)),qh(jo(i),"ry",Yh,jo(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=vc(Po(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.diamond;return Kh(Kh({},i),Nt(u))}},{key:"points",get:function(){var i=this.x,u=this.y,p=this.rx,h=this.ry;return[[i,u-h],[i+p,u],[i,u+h],[i-p,u]]}},{key:"pointsPosition",get:function(){return this.points.map(function(i){return{x:i[0],y:i[1]}})}},{key:"width",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=yc(p,1)[0];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"height",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=yc(p,2)[1];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"getDefaultAnchor",value:function(){var i=this;return this.points.map(function(u,p){var h=yc(u,2);return{x:h[0],y:h[1],id:"".concat(i.id,"_").concat(p)}})}}])&&N0(t.prototype,n),a}(mr),Vh=Mo(tn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Yh=Mo(tn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Mo(tn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"points"),tn.prototype),Mo(tn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"pointsPosition"),tn.prototype),Mo(tn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"width"),tn.prototype),Mo(tn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"height"),tn.prototype),tn);function bc(e){return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function ey(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ey(Object(n),!0).forEach(function(r){ry(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ey(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ny(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function I0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _c(){return _c=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=z0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},_c.apply(this,arguments)}function z0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=To(e))!==null;);return e}function Oc(e,t){return Oc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Oc(e,t)}function B0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=To(e);if(t){var a=To(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G0(this,n)}}function G0(e,t){if(t&&(bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ko(e)}function ko(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},To(e)}function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xa(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Cn,oy,wc=(er=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Oc(i,u)})(a,e);var t,n,r=B0(a);function a(){var i;I0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return ry(ko(i=r.call.apply(r,[this].concat(p))),"modelType",dt.ELLIPSE_NODE),ny(ko(i),"rx",Jh,ko(i)),ny(ko(i),"ry",Qh,ko(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=_c(To(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.ellipse;return ty(ty({},i),Nt(u))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.rx,h=this.ry;return[{x:i,y:u-h,id:"".concat(this.id,"_0")},{x:i+p,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h,id:"".concat(this.id,"_2")},{x:i-p,y:u,id:"".concat(this.id,"_3")}]}}])&&L0(t.prototype,n),a}(mr),Jh=Xa(er.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Qh=Xa(er.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Xa(er.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(er.prototype,"width"),er.prototype),Xa(er.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(er.prototype,"height"),er.prototype),er);function xc(e){return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function Ec(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return iy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return iy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ay(Object(n),!0).forEach(function(r){sy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function F0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(){return Sc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=U0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Sc.apply(this,arguments)}function U0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ao(e))!==null;);return e}function jc(e,t){return jc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},jc(e,t)}function V0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ao(e);if(t){var a=Ao(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Y0(this,n)}}function Y0(e,t){if(t&&(xc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ua(e)}function Ua(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(e)}function sy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Va(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Pc,cy,Mc=(Cn=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&jc(i,u)})(a,e);var t,n,r=V0(a);function a(){var i;F0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return sy(Ua(i=r.call.apply(r,[this].concat(p))),"modelType",dt.POLYGON_NODE),H0(Ua(i),"points",oy,Ua(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=Sc(Ao(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.polygon;return uy(uy({},i),Nt(u))}},{key:"pointsPosition",get:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return this.points.map(function(_){return{x:_[0]+i-p/2,y:_[1]+u-h/2}})}},{key:"width",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=Ec(p,1)[0];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"height",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=Ec(p,2)[1];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"getDefaultAnchor",value:function(){var i=this,u=this.x,p=this.y,h=this.width,_=this.height;return this.points.map(function(x,M){var T=Ec(x,2),L=T[0],V=T[1];return{x:u+L-h/2,y:p+V-_/2,id:"".concat(i.id,"_").concat(M)}})}}])&&X0(t.prototype,n),a}(mr),oy=Va(Cn.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Va(Cn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"pointsPosition"),Cn.prototype),Va(Cn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"width"),Cn.prototype),Va(Cn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"height"),Cn.prototype),Cn);function kc(e){return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kc(e)}function ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ly(Object(n),!0).forEach(function(r){py(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ly(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function $0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(){return Tc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=q0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Tc.apply(this,arguments)}function q0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=No(e))!==null;);return e}function Ac(e,t){return Ac=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ac(e,t)}function Z0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=No(e);if(t){var a=No(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J0(this,n)}}function J0(e,t){if(t&&(kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ya(e)}function Ya(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},No(e)}function py(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr,Nc=(Pc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ac(i,u)})(a,e);var t,n,r=Z0(a);function a(){var i;$0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return py(Ya(i=r.call.apply(r,[this].concat(p))),"modelType",dt.RECT_NODE),W0(Ya(i),"radius",cy,Ya(i)),i}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return[{x:i,y:u-h/2,id:"".concat(this.id,"_0")},{x:i+p/2,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h/2,id:"".concat(this.id,"_2")},{x:i-p/2,y:u,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var i=Tc(No(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.rect;return fy(fy({},i),Nt(u))}}])&&K0(t.prototype,n),a}(mr),cy=function(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}(Pc.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pc);function Dc(e){return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dc(e)}function dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dy(Object(n),!0).forEach(function(r){vy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cc(){return Cc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=t_(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},Cc.apply(this,arguments)}function t_(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Do(e))!==null;);return e}function Rc(e,t){return Rc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Rc(e,t)}function n_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Do(e);if(t){var a=Do(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return r_(this,n)}}function r_(e,t){if(t&&(Dc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yy(e)}function yy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Do(e)}function vy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gy(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Ic=(zr=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Rc(i,u)})(a,e);var t,n,r=n_(a);function a(){var i;Q0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return vy(yy(i=r.call.apply(r,[this].concat(p))),"modelType",dt.TEXT_NODE),i}return t=a,(n=[{key:"getTextStyle",value:function(){var i=Cc(Do(a.prototype),"getTextStyle",this).call(this),u=this.graphModel.theme.text;return hy(hy({},i),Nt(u))}},{key:"width",get:function(){var i=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return gs({rows:i,fontSize:u,rowsLength:i.length}).width}},{key:"height",get:function(){var i=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return gs({rows:i,fontSize:u,rowsLength:i.length}).height}}])&&e_(t.prototype,n),a}(mr),gy(zr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(zr.prototype,"width"),zr.prototype),gy(zr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(zr.prototype,"height"),zr.prototype),zr);function Lc(e){return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}function o_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zc(e,t){return zc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},zc(e,t)}function a_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Wa(e);if(t){var a=Wa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u_(this,n)}}function u_(e,t){if(t&&(Lc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return my(e)}function my(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wa(e)}function s_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn,by,_y,Oy,Bc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&zc(i,u)})(a,e);var t,n,r=a_(a);function a(){var i;o_(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return s_(my(i=r.call.apply(r,[this].concat(p))),"modelType",dt.HTML_NODE),i}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return[{x:i,y:u-h/2,id:"".concat(this.id,"_0")},{x:i+p/2,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h/2,id:"".concat(this.id,"_2")},{x:i-p/2,y:u,id:"".concat(this.id,"_3")}]}}])&&i_(t.prototype,n),a}(mr);function wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function c_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yi(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Ey=(Gn=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),xy(this,"graphModel",void 0),Gc(this,"isShowHorizontal",by,this),Gc(this,"isShowVertical",_y,this),Gc(this,"position",Oy,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}var t,n;return t=e,n=[{key:"getStyle",value:function(){return function(r){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?wy(Object(i),!0).forEach(function(u){xy(r,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):wy(Object(i)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(i,u))})}return r}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(r,a){for(var i=r.x,u=r.y,p=!1,h=!1,_=0;_<a.length;_++){var x=a[_];if(x.id!==r.id&&(i===x.x&&(p=!0),u===x.y&&(h=!0),p&&h))break}return{isShowVertical:p,isShowHorizontal:h,position:{x:i,y:u}}}},{key:"getHorizontalSnapline",value:function(r,a){var i,u,p=!1,h=r.id;if(h){var _=this.graphModel.fakerNode;if(_&&_.id===h)u=En(_);else{var x=this.graphModel.getNodeModelById(h);u=En(x)}}for(var M=0;M<a.length;M++){var T=a[M];if(T.id!==r.id){var L=En(T);if(L.minY===u.minY||L.maxY===u.minY){p=!0,i=u.minY;break}if(L.minY===u.maxY||L.maxY===u.maxY){p=!0,i=u.maxY;break}}}return un({isShowHorizontal:p,position:{y:i}})}},{key:"getVerticalSnapline",value:function(r,a){var i,u,p=!1,h=r.id;if(h){var _=this.graphModel.fakerNode;if(_&&_.id===h)u=En(_);else{var x=this.graphModel.getNodeModelById(h);u=En(x)}}for(var M=0;M<a.length;M++){var T=a[M];if(T.id!==r.id){var L=En(T);if(L.minX===u.minX||L.maxX===u.minX){p=!0,i=u.minX;break}if(L.minX===u.maxX||L.maxX===u.maxX){p=!0,i=u.maxX;break}}}return un({isShowVertical:p,position:{x:i}})}},{key:"getSnapLinePosition",value:function(r,a){var i=this.getCenterSnapLine(r,a),u=i.isShowHorizontal,p=i.isShowVertical;if(!u){var h=this.getHorizontalSnapline(r,a);h.isShowHorizontal&&(i.isShowHorizontal=h.isShowHorizontal,i.position.y=h.position.y)}if(!p){var _=this.getVerticalSnapline(r,a);_.isShowVertical&&(i.isShowVertical=_.isShowVertical,i.position.x=_.position.x)}return i}},{key:"setSnaplineInfo",value:function(r){var a=r.isShowHorizontal,i=r.isShowVertical,u=r.position;this.position=u,this.isShowHorizontal=a,this.isShowVertical=i}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(r){var a=this.graphModel.nodes,i=this.getSnapLinePosition(r,a);this.setSnaplineInfo(i)}}],n&&c_(t.prototype,n),e}(),by=yi(Gn.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_y=yi(Gn.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oy=yi(Gn.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yi(Gn.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"clearSnapline"),Gn.prototype),yi(Gn.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Gn.prototype,"setNodeSnapLine"),Gn.prototype),Gn),vi=new Map,Sy=function(e){var t=Dr(),n=window.requestAnimationFrame(function r(){if(e(),vi.get(t)){var a=window.requestAnimationFrame(r);vi.set(t,a)}});return vi.set(t,n),t},$a=function(e){var t=vi.get(e);t&&(window.cancelAnimationFrame(t),vi.delete(e))};function Hc(e){return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function gi(){return gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gi.apply(this,arguments)}function jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jy(Object(n),!0).forEach(function(r){nr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Py(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Py(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fc(e,t){return Fc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fc(e,t)}function p_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=qa(e);if(t){var a=qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d_(this,n)}}function d_(e,t){if(t&&(Hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qa(e)}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h_=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Fc(i,u)})(a,e);var t,n,r=p_(a);function a(){var i;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),nr(tr(i=r.call(this)),"preTargetNode",void 0),nr(tr(i),"sourceRuleResults",void 0),nr(tr(i),"targetRuleResults",void 0),nr(tr(i),"dragHandler",void 0),nr(tr(i),"t",void 0),nr(tr(i),"onDragStart",function(u){var p=u.event,h=i.props,_=h.anchorData,x=h.nodeModel,M=h.graphModel,T=M.overlapMode;M.selectNodeById(x.id),T!==xn.INCREASE&&x.autoToFront&&M.toFront(x.id),M.eventCenter.emit(tt.ANCHOR_DRAGSTART,{data:_,e:p,nodeModel:x}),i.setState({startX:_.x,startY:_.y,endX:_.x,endY:_.y})}),nr(tr(i),"onDragging",function(u){var p=u.event,h=i.props,_=h.graphModel,x=h.nodeModel,M=h.anchorData,T=_.transformModel,L=_.eventCenter,V=_.width,$=_.height,ne=_.editConfigModel,re=ne.autoExpand,de=ne.stopMoveGraph,Oe=p.clientX,Ce=p.clientY,Se=_.getPointByClient({x:Oe,y:Ce}),Ue=Se.domOverlayPosition,Te=Ue.x,Pe=Ue.y,Qe=Se.canvasOverlayPosition,yt=Qe.x,Et=Qe.y;i.t&&$a(i.t);var bt=[];Te<10?bt=[10,0]:Te+10>V?bt=[-10,0]:Pe<10?bt=[0,10]:Pe+10>$&&(bt=[0,-10]),i.setState({endX:yt,endY:Et,dragging:!0}),i.moveAnchorEnd(yt,Et),bt.length>0&&!de&&re&&(i.t=Sy(function(){var jt=l_(bt,2),Gt=jt[0],Wt=jt[1];T.translate(Gt,Wt);var fn=i.state,ir=fn.endX,Rn=fn.endY;i.setState({endX:ir-Gt,endY:Rn-Wt}),i.moveAnchorEnd(ir-Gt,Rn-Wt)})),L.emit(tt.ANCHOR_DRAG,{data:M,e:p,nodeModel:x})}),nr(tr(i),"onDragEnd",function(u){var p=u.event;i.t&&$a(i.t),i.checkEnd(p),i.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),i.sourceRuleResults.clear(),i.targetRuleResults.clear();var h=i.props,_=h.graphModel,x=h.nodeModel,M=h.anchorData;_.eventCenter.emit(tt.ANCHOR_DRAGEND,{data:M,e:p,nodeModel:x})}),nr(tr(i),"checkEnd",function(u){var p=i.props,h=p.graphModel,_=p.nodeModel,x=p.anchorData,M=x.x,T=x.y,L=x.id,V=(h.edgeType,i.state),$=V.endX,ne=V.endY,re=V.dragging,de=va({x:$,y:ne},h);if(i.preTargetNode&&i.preTargetNode.state!==Ot.DEFAULT&&i.preTargetNode.setElementState(Ot.DEFAULT),re&&de&&de.node){var Oe=de.node,Ce=de.anchor.id,Se="".concat(_.id,"_").concat(Oe.id,"_").concat(Ce,"_").concat(L),Ue=i.sourceRuleResults.get(Se)||{},Te=Ue.isAllPass,Pe=Ue.msg,Qe=i.targetRuleResults.get(Se)||{},yt=Qe.isAllPass,Et=Qe.msg;if(Te&&yt){Oe.setElementState(Ot.DEFAULT);var bt=h.edgeGenerator(_.getData(),h.getNodeModelById(de.node.id).getData()),jt=h.addEdge(Ka(Ka({},bt),{},{sourceNodeId:_.id,sourceAnchorId:L,startPoint:{x:M,y:T},targetNodeId:de.node.id,targetAnchorId:de.anchor.id,endPoint:{x:de.anchor.x,y:de.anchor.y}})),Gt=i.props.anchorData;h.eventCenter.emit(tt.ANCHOR_DROP,{data:Gt,e:u,nodeModel:_,edgeModel:jt})}else{var Wt=Oe.getData();h.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Wt,msg:Et||Pe})}}}),i.sourceRuleResults=new Map,i.targetRuleResults=new Map,i.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},i.dragHandler=new hr({onDragStart:i.onDragStart,onDragging:i.onDragging,onDragEnd:i.onDragEnd}),i}return t=a,(n=[{key:"getAnchorShape",value:function(){var i=this.props,u=i.anchorData,p=i.style,h=i.node.getAnchorShape(u);if(h)return h;var _=u.x,x=u.y,M=Ka(Ka({},p),p.hover);return Object(te.g)("g",null,Object(te.g)(pi,gi({className:"lf-node-anchor-hover"},M,{x:_,y:x})),Object(te.g)(pi,gi({className:"lf-node-anchor"},p,{x:_,y:x})))}},{key:"moveAnchorEnd",value:function(i,u){var p=this.props,h=p.graphModel,_=p.nodeModel,x=p.anchorData,M=va({x:i,y:u},h);if(M){var T=M.node,L=M.anchor.id;if(this.preTargetNode&&this.preTargetNode!==M.node&&this.preTargetNode.setElementState(Ot.DEFAULT),x.id===L)return;this.preTargetNode=T;var V="".concat(_.id,"_").concat(T.id,"_").concat(L,"_").concat(x.id);if(!this.targetRuleResults.has(V)){var $=M.anchor,ne=_.isAllowConnectedAsSource(T,x,$),re=T.isAllowConnectedAsTarget(_,x,$);this.sourceRuleResults.set(V,ii(ne)),this.targetRuleResults.set(V,ii(re))}var de=this.sourceRuleResults.get(V).isAllPass,Oe=this.targetRuleResults.get(V).isAllPass;de&&Oe?T.setElementState(Ot.ALLOW_CONNECT):T.setElementState(Ot.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Ot.DEFAULT&&this.preTargetNode.setElementState(Ot.DEFAULT)}},{key:"isShowLine",value:function(){var i=this.state,u=i.startX,p=i.startY,h=i.endX,_=i.endY;return qn(u,p,h,_)>10}},{key:"render",value:function(){var i=this,u=this.state,p=u.startX,h=u.startY,_=u.endX,x=u.endY,M=this.props,T=M.anchorData.edgeAddable,L=M.edgeStyle;return Object(te.g)("g",{className:"lf-anchor"},Object(te.g)("g",{onMouseDown:function(V){T!==!1&&i.dragHandler.handleMouseDown(V)}},this.getAnchorShape()),this.isShowLine()&&Object(te.g)(xo,gi({x1:p,y1:h,x2:_,y2:x},L,{"pointer-events":"none"})))}}])&&f_(t.prototype,n),a}(te.a);o(80);function My(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function y_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?My(Object(n),!0).forEach(function(r){v_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xc(e){return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xc(e)}function g_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ky(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ky(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ty(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.value,u=e.fontSize,p=e.fill,h=p===void 0?"currentColor":p,_=e.overflowMode,x=_===void 0?"default":_,M=e.textWidth,T=M===void 0?"":M,L=e.model,V={textAnchor:"middle","dominant-baseline":"middle",x:n,y:a,fill:h};if(Object.entries(e).forEach(function(Ce){var Se=g_(Ce,2),Ue=Se[0],Te=Se[1];Xc(Te)!=="object"&&(V[Ue]=Te)}),i){var $=String(i).split(/[\r\n]/g),ne=$.length;if(x!=="default"){var re=L.BaseType,de=L.modelType;if(re===Ft.NODE&&de!==dt.TEXT_NODE||re===Ft.EDGE&&T)return function(Ce){var Se=Ce.value,Ue=Ce.fontSize,Te=Ce.model,Pe=Ce.fontFamily,Qe=Pe===void 0?"":Pe,yt=Ce.lineHeight,Et=Ce.wrapPadding,bt=Et===void 0?"0, 0":Et,jt=Ce.overflowMode,Gt=Ce.x,Wt=Ce.y,fn=Te.width,ir=Te.textHeight,Rn=Ce.textWidth||fn,Io=String(Se).split(/[\r\n]/g),bu=Io.length,_u=Qp({rows:Io,style:{fontSize:"".concat(Ue,"px"),width:"".concat(Rn,"px"),fontFamily:Qe,lineHeight:yt,padding:bt},rowsLength:bu,className:"lf-get-text-height"}),io=Te.height>_u?Te.height:_u;ir&&(io=ir);var Hr=jt==="ellipsis";return Hr&&(io=Ue+2),Object(te.g)("g",null,Object(te.g)("foreignObject",{width:Rn,height:io,x:Gt-Rn/2,y:Wt-io/2},Object(te.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:io,width:Rn,padding:bt}},Object(te.g)("div",{className:Hr?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Hr?Io.join(""):"",style:y_({},Ce)},Io.map(function(Fr){return Object(te.g)("div",{className:"lf-node-text--auto-wrap-inner"},Fr)})))))}(e)}if(ne>1){var Oe=$.map(function(Ce,Se){var Ue=(Se-(ne-1)/2)*(u+2);return Object(te.g)("tspan",{className:"lf-text-tspan",x:n,y:a+Ue},Ce)});return Object(te.g)("text",V,Oe)}return Object(te.g)("text",V,i)}}function Uc(e){return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(e)}function Vc(){return Vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vc.apply(this,arguments)}function m_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ay(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ay(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ay(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yc(e,t){return Yc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Yc(e,t)}function __(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Za(e);if(t){var a=Za(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return O_(this,n)}}function O_(e,t){if(t&&(Uc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Br(e)}function Br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Za(e){return Za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Za(e)}function no(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ny=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Yc(i,u)})(a,e);var t,n,r=__(a);function a(i){var u;(function(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),no(Br(u=r.call(this)),"dragHandler",void 0),no(Br(u),"sumDeltaX",0),no(Br(u),"sumDeltaY",0),no(Br(u),"stepDrag",void 0),no(Br(u),"onDragging",function(h){var _=h.deltaX,x=h.deltaY,M=u.props,T=M.model,L=m_(M.graphModel.transformModel.fixDeltaXY(_,x),2),V=L[0],$=L[1];T.moveText(V,$)}),no(Br(u),"dblClickHandler",function(){u.props.editable&&u.props.model.setElementState(Ot.TEXT_EDIT)}),no(Br(u),"mouseDownHandle",function(h){var _=u.props,x=_.draggable,M=_.model,T=_.graphModel.editConfigModel.nodeTextDraggable;(x||T)&&(u.stepDrag.model=M,u.stepDrag.handleMouseDown(h))}),i.model;var p=i.draggable;return u.stepDrag=new hr({onDragging:u.onDragging,step:1,isStopPropagation:p}),u}return t=a,(n=[{key:"getShape",value:function(){var i=this.props,u=i.model,p=i.graphModel,h=u.text,_=p.editConfigModel,x=h.value,M=h.x,T=h.y,L=h.editable,V=h.draggable,$={x:M,y:T,className:"",value:x};L?$.className="lf-element-text":V||_.nodeTextDraggable?$.className="lf-text-draggable":$.className="lf-text-disabled";var ne=u.getTextStyle();return Object(te.g)(Ty,Vc({},$,ne,{model:u}))}},{key:"render",value:function(){if(this.props.model.text)return Object(te.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&b_(t.prototype,n),a}(te.a),w_=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Wc(e){return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(e)}function Ja(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Dy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $c(e,t){return $c=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},$c(e,t)}function x_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Qa(e);if(t){var a=Qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E_(this,n)}}function E_(e,t){if(t&&(Wc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(e)}function nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e){return Qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(e)}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&$c(u,p)})(i,e);var t,n,r,a=x_(i);function i(u){var p;(function(T,L){if(!(T instanceof L))throw new TypeError("Cannot call a class as a function")})(this,i),ln(nn(p=a.call(this)),"t",void 0),ln(nn(p),"moveOffset",void 0),ln(nn(p),"stepDrag",void 0),ln(nn(p),"contextMenuTime",void 0),ln(nn(p),"startTime",void 0),ln(nn(p),"clickTimer",void 0),ln(nn(p),"onDragStart",function(T){var L=T.event,V=L.clientX,$=L.clientY,ne=p.props,re=ne.model,de=ne.graphModel.getPointByClient({x:V,y:$}).canvasOverlayPosition,Oe=de.x,Ce=de.y;p.moveOffset={x:re.x-Oe,y:re.y-Ce}}),ln(nn(p),"onDragging",function(T){var L=T.event,V=p.props,$=V.model,ne=V.graphModel,re=ne.editConfigModel,de=re.stopMoveGraph,Oe=re.autoExpand,Ce=ne.transformModel,Se=ne.selectNodes,Ue=ne.width,Te=ne.height,Pe=ne.gridSize;$.isDragging=!0;var Qe=L.clientX,yt=L.clientY,Et=ne.getPointByClient({x:Qe,y:yt}).canvasOverlayPosition,bt=Et.x,jt=Et.y,Gt=Ja(Ce.CanvasPointToHtmlPoint([bt,jt]),2),Wt=Gt[0],fn=Gt[1];if(bt+=p.moveOffset.x,jt+=p.moveOffset.y,bt=Nr(bt,Pe),jt=Nr(jt,Pe),Ue&&Te){if(!Oe||de||!(Wt<0||fn<0||Wt>Ue||fn>Te)){var ir=Ja(Ce.CanvasPointToHtmlPoint([bt-$.width/2,jt-$.height/2]),2),Rn=ir[0],Io=ir[1],bu=Ja(Ce.CanvasPointToHtmlPoint([bt+$.width/2,jt+$.height/2]),2),_u=bu[0],io=bu[1],Hr=Math.max(Pe,20),Fr=[];Rn<0?Fr=[Hr,0]:_u>ne.width?Fr=[-Hr,0]:Io<0?Fr=[0,Hr]:io>ne.height&&(Fr=[0,-Hr]),p.t&&$a(p.t);var Ou=Se.map(function(wu){return wu.id});Ou.indexOf($.id)===-1&&(Ou=[$.id]),Fr.length>0&&!de&&Oe?p.t=Sy(function(){var wu=Ja(Fr,2),yv=wu[0],vv=wu[1];Ce.translate(yv,vv);var dw=-yv/Ce.SCALE_X,hw=-vv/Ce.SCALE_X;ne.moveNodes(Ou,dw,hw)}):ne.moveNodes(Ou,bt-$.x,jt-$.y)}}else ne.moveNode2Coordinate($.id,bt,jt)}),ln(nn(p),"onDragEnd",function(){p.t&&$a(p.t),p.props.model.isDragging=!1}),ln(nn(p),"handleClick",function(T){if(p.startTime&&!(new Date().getTime()-p.startTime>200)){var L=p.props,V=L.model,$=L.graphModel,ne={data:V.getData(),e:T,position:$.getPointByClient({x:T.clientX,y:T.clientY}),isSelected:!1,isMultiple:!1},re=T.button===2,de=T.detail===2;if(!re){var Oe=$.editConfigModel,Ce=Sp(T,Oe);ne.isMultiple=Ce,V.isSelected&&!de&&Ce?(ne.isSelected=!1,V.setSelected(!1)):($.selectNodeById(V.id,Ce),ne.isSelected=!0,p.toFront()),de?(Oe.nodeTextEdit&&V.text.editable&&(V.setSelected(!1),$.setElementStateById(V.id,Ot.TEXT_EDIT)),$.eventCenter.emit(tt.NODE_DBCLICK,ne)):($.eventCenter.emit(tt.ELEMENT_CLICK,ne),$.eventCenter.emit(tt.NODE_CLICK,ne))}}}),ln(nn(p),"handleContextMenu",function(T){T.preventDefault();var L=p.props,V=L.model,$=L.graphModel,ne=V.getData(),re=$.getPointByClient({x:T.clientX,y:T.clientY});$.setElementStateById(V.id,Ot.SHOW_MENU,re.domOverlayPosition),V.isSelected||$.selectNodeById(V.id),$.eventCenter.emit(tt.NODE_CONTEXTMENU,{data:ne,e:T,position:re}),p.toFront()}),ln(nn(p),"handleMouseDown",function(T){var L=p.props,V=L.model,$=L.graphModel;p.startTime=new Date().getTime(),$.editConfigModel.adjustNodePosition&&V.draggable&&p.stepDrag&&p.stepDrag.handleMouseDown(T)}),ln(nn(p),"setHoverON",function(T){var L=p.props,V=L.model,$=L.graphModel;if(!V.isHovered){var ne=V.getData();V.setHovered(!0),$.eventCenter.emit(tt.NODE_MOUSEENTER,{data:ne,e:T})}}),ln(nn(p),"setHoverOFF",function(T){var L=p.props,V=L.model,$=L.graphModel,ne=V.getData();V.isHovered&&(V.setHovered(!1),$.eventCenter.emit(tt.NODE_MOUSELEAVE,{data:ne,e:T}))}),ln(nn(p),"onMouseOut",function(T){w_&&p.setHoverOFF(T)});var h=u.graphModel,_=h.gridSize,x=h.eventCenter,M=u.model;return p.stepDrag=new hr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:_,eventType:"NODE",isStopPropagation:!1,eventCenter:x,model:M}),p}return t=i,r=[{key:"getModel",value:function(u){return u}}],(n=[{key:"getAnchorShape",value:function(u){return null}},{key:"getAnchors",value:function(){var u=this,p=this.props,h=p.model,_=p.graphModel,x=h.isSelected,M=h.isHitable,T=h.isDragging,L=h.isShowAnchor;return M&&(x||L)&&!T?pa(h.anchors,function(V,$){var ne=h.getAnchorLineStyle(V),re=h.getAnchorStyle(V);return Object(te.g)(h_,{anchorData:V,node:u,style:re,edgeStyle:ne,anchorIndex:$,nodeModel:h,graphModel:_,setHoverOFF:u.setHoverOFF})}):[]}},{key:"getText",value:function(){var u=this.props,p=u.model,h=u.graphModel;if(p.state===Ot.TEXT_EDIT)return"";if(p.text){var _=h.editConfigModel,x=!1;return(p.text.draggable||_.nodeTextDraggable)&&(x=!0),Object(te.g)(Ny,{editable:_.nodeTextEdit&&p.text.editable,model:p,graphModel:h,draggable:x})}}},{key:"getStateClassName",value:function(){var u=this.props.model,p=u.state,h=u.isDragging,_=u.isSelected,x="lf-node";switch(p){case Ot.ALLOW_CONNECT:x+=" lf-node-allow";break;case Ot.NOT_ALLOW_CONNECT:x+=" lf-node-not-allow";break;default:x+=" lf-node-default"}return h&&(x+=" lf-isDragging"),_&&(x+=" lf-node-selected"),x}},{key:"toFront",value:function(){var u=this.props,p=u.model,h=u.graphModel;h.overlapMode!==xn.INCREASE&&p.autoToFront&&h.toFront(p.id)}},{key:"render",value:function(){var u,p=this.props,h=p.model,_=p.graphModel,x=_.editConfigModel,M=x.hideAnchors,T=x.adjustNodePosition,L=_.gridSize,V=_.transformModel.SCALE_X,$=h.isHitable,ne=h.draggable,re=Object(te.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),M?null:this.getAnchors());return $?(T&&ne&&this.stepDrag.setStep(L*V),u=Object(te.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},re)):u=Object(te.g)("g",{className:this.getStateClassName()},re),u}}])&&Cy(t.prototype,n),r&&Cy(t,r),i}(te.a);function Kc(e){return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function qc(){return qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qc.apply(this,arguments)}function S_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zc(e,t){return Zc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Zc(e,t)}function P_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=eu(e);if(t){var a=eu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M_(this,n)}}function M_(e,t){if(t&&(Kc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function eu(e){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},eu(e)}var Jc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Zc(i,u)})(a,e);var t,n,r=P_(a);function a(){return S_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(te.g)(Ir,qc({},u,{x:i.x,y:i.y,width:i.width,height:i.height,radius:i.radius}))}}])&&j_(t.prototype,n),a}(br);function Qc(e){return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function el(){return el=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},el.apply(this,arguments)}function k_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e,t){return tl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},tl(e,t)}function A_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=tu(e);if(t){var a=tu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return N_(this,n)}}function N_(e,t){if(t&&(Qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(e)}var nl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&tl(i,u)})(a,e);var t,n,r=A_(a);function a(){return k_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.r,_=i.getNodeStyle();return Object(te.g)(pi,el({},_,{x:u,y:p,r:h}))}}])&&T_(t.prototype,n),a}(br);function rl(e){return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function D_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ry(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ry(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ry(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iy(e){var t=e.points,n=e.className,r={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(a){var i=D_(a,2),u=i[0],p=i[1];rl(p)!=="object"&&(r[u]=p)}),r.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",r.points=t.map(function(a){return a.join(",")}).join(" "),Object(te.g)("polygon",r)}function ol(e){return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function il(){return il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},il.apply(this,arguments)}function C_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return al=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},al(e,t)}function I_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=nu(e);if(t){var a=nu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L_(this,n)}}function L_(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(e)}var ul=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&al(i,u)})(a,e);var t,n,r=I_(a);function a(){return C_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.width,_=i.height,x=i.points,M=i.getNodeStyle(),T={transform:"matrix(1 0 0 1 ".concat(u-h/2," ").concat(p-_/2,")")};return Object(te.g)("g",T,Object(te.g)(Iy,il({},M,{points:x,x:u,y:p})))}}])&&R_(t.prototype,n),a}(br);function sl(e){return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function cl(){return cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cl.apply(this,arguments)}function z_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ll(e,t){return ll=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ll(e,t)}function G_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ru(e);if(t){var a=ru(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return H_(this,n)}}function H_(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ru(e)}var fl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ll(i,u)})(a,e);var t,n,r=G_(a);function a(){return z_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(te.g)("g",null,Object(te.g)(Iy,cl({},u,{points:i.points,x:i.x,y:i.y})))}}])&&B_(t.prototype,n),a}(br);function pl(e){return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function F_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ly(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ly(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ly(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X_(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.rx,u=i===void 0?4:i,p=e.ry,h=p===void 0?4:p,_=e.className,x={cx:n,cy:a,rx:u,ry:h,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(M){var T=F_(M,2),L=T[0],V=T[1];pl(V)!=="object"&&(x[L]=V)}),x.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object(te.g)("ellipse",x)}function dl(e){return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(e)}function hl(){return hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hl.apply(this,arguments)}function U_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yl(e,t){return yl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},yl(e,t)}function Y_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ou(e);if(t){var a=ou(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return W_(this,n)}}function W_(e,t){if(t&&(dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ou(e){return ou=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ou(e)}var vl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&yl(i,u)})(a,e);var t,n,r=Y_(a);function a(){return U_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(te.g)(X_,hl({},u,{x:i.x,y:i.y,rx:i.rx,ry:i.ry}))}}])&&V_(t.prototype,n),a}(br);function gl(e){return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function By(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zy(Object(n),!0).forEach(function(r){$_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ml(e,t){return ml=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ml(e,t)}function Z_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=iu(e);if(t){var a=iu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return J_(this,n)}}function J_(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iu(e)}var bl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ml(i,u)})(a,e);var t,n,r=Z_(a);function a(){return K_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getBackground",value:function(){var i=this.props.model,u=i.getTextStyle(),p=i.width,h=i.height,_=i.x,x=i.y,M=By(By({},u.background),{},{x:_,y:x-1,width:p,height:h});return Object(te.g)(Ir,M)}},{key:"getShape",value:function(){return Object(te.g)("g",null,this.getBackground())}}])&&q_(t.prototype,n),a}(br);function _l(e){return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Ol(){return Ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ol.apply(this,arguments)}function Q_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wl(e,t){return wl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},wl(e,t)}function tO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=au(e);if(t){var a=au(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return nO(this,n)}}function nO(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mi(e)}function mi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(e){return au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},au(e)}function uu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&wl(i,u)})(a,e);var t,n,r=tO(a);function a(){var i;Q_(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return uu(mi(i=r.call.apply(r,[this].concat(p))),"ref",void 0),uu(mi(i),"currentProperties",void 0),uu(mi(i),"preProperties",void 0),uu(mi(i),"setRef",function(_){i.ref=_}),i}return t=a,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(i){i.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.height,_=i.width,x=i.getNodeStyle();return this.currentProperties=JSON.stringify(i.properties),Object(te.g)("foreignObject",Ol({},x,{x:u-_/2,y:p-h/2,width:_,height:h,ref:this.setRef}))}}])&&eO(t.prototype,n),a}(br);function El(e){return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},El(e)}function Sl(){return Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sl.apply(this,arguments)}function Gy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gy(Object(n),!0).forEach(function(r){Ml(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e,t){return jl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},jl(e,t)}function oO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=su(e);if(t){var a=su(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iO(this,n)}}function iO(e,t){if(t&&(El(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pl(e)}function Pl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},su(e)}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr,aO=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&jl(i,u)})(a,e);var t,n,r=oO(a);function a(i){var u;return function(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),Ml(Pl(u=r.call(this,i)),"setHoverON",function(){u.setState({isHovered:!0})}),Ml(Pl(u),"setHoverOFF",function(){u.setState({isHovered:!1})}),u.state={isHovered:!1},u}return t=a,(n=[{key:"getBackground",value:function(){var i=this.props.model,u=i.getTextStyle(),p=i.text,h=u.background||{};if(this.state.isHovered&&u.hover&&u.hover.background&&(h=ro(ro({},h),u.hover.background)),p&&p.value&&h.fill!=="transparent"){var _,x=u.fontSize,M=u.overflowMode,T=u.lineHeight,L=u.wrapPadding,V=u.textWidth,$=p.value,ne=p.x,re=p.y,de=String($).split(/[\r\n]/g),Oe=de.length;if(M==="autoWrap"&&V){var Ce=Qp({rows:de,style:{fontSize:"".concat(x,"px"),width:"".concat(V,"px"),lineHeight:T,padding:L},rowsLength:Oe,className:"lf-get-text-height"});_=ro(ro({},h),{},{x:ne-1,y:re-1,width:V,height:Ce})}else{de&&de.forEach(function(Qe){wd(Qe)});var Se=gs({rows:de,fontSize:x,rowsLength:Oe}),Ue=Se.width,Te=Se.height;if(typeof h.wrapPadding=="string"){var Pe=h.wrapPadding.split(",").filter(function(Qe){return Qe.trim()}).map(function(Qe){return parseFloat(Qe.trim())});Pe.length>0&&Pe.length<=4&&(Pe.length===1?Pe=[Pe[0],Pe[0],Pe[0],Pe[0]]:Pe.length===2?Pe=[Pe[0],Pe[1],Pe[0],Pe[1]]:Pe.length===3&&(Pe=[Pe[0],Pe[1],Pe[2],Pe[1]]),Ue+=Pe[1]+Pe[3],Te+=Pe[0]+Pe[2],ne+=(Pe[1]-Pe[3])/2,re+=(Pe[2]-Pe[0])/2)}_=ro(ro({},h),{},{x:ne-1,y:re-1,width:Ue,height:Te})}return Object(te.g)(Ir,_)}}},{key:"getShape",value:function(){var i=this.props.model,u=i.text,p=u.value,h=u.x,_=u.y;if(p){var x=ro({x:h,y:_,className:"lf-element-text",value:p},i.getTextStyle());return Object(te.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(te.g)(Ty,Sl({},x,{model:i})))}}}])&&rO(t.prototype,n),a}(Ny);function kl(e){return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function Hy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hy(Object(n),!0).forEach(function(r){jn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Fy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tl(e,t){return Tl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Tl(e,t)}function cO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=cu(e);if(t){var a=cu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return lO(this,n)}}function lO(e,t){if(t&&(kl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Sn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cu(e){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cu(e)}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(rr||(rr={}));var Xy=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Tl(i,u)})(a,e);var t,n,r=cO(a);function a(i){var u;(function(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")})(this,a),jn(Sn(u=r.call(this)),"stepDragData",void 0),jn(Sn(u),"stepDrag",void 0),jn(Sn(u),"oldEdge",void 0),jn(Sn(u),"preTargetNode",void 0),jn(Sn(u),"targetRuleResults",void 0),jn(Sn(u),"sourceRuleResults",void 0),jn(Sn(u),"handleMouseDown",function(x){u.stepDrag&&u.stepDrag.handleMouseDown(x)}),jn(Sn(u),"onDragStart",function(){var x=u.props,M=x.x,T=x.y,L=x.edgeModel,V=L.startPoint,$=L.endPoint,ne=L.pointsList;u.oldEdge={startPoint:V,endPoint:$,pointsList:ne},u.setState({endX:M,endY:T,dragging:!0})}),jn(Sn(u),"onDragging",function(x){var M=x.deltaX,T=x.deltaY,L=u.state,V=L.endX,$=L.endY,ne=u.props,re=ne.graphModel,de=ne.type,Oe=re.transformModel,Ce=re.editConfigModel,Se=uO(Oe.moveCanvasPointByHtml([V,$],M,T),2),Ue=Se[0],Te=Se[1];u.setState({endX:Ue,endY:Te,dragging:!0});var Pe=u.props.edgeModel,Qe=va({x:V,y:$},re);if(Qe&&Qe.node&&u.isAllowAdjust(Qe).pass){var yt,Et=Pe.startPoint,bt=Pe.endPoint,jt=Pe.sourceNode,Gt=Pe.targetNode;de===rr.SOURCE?yt={startPoint:{x:Qe.anchor.x,y:Qe.anchor.y},endPoint:{x:bt.x,y:bt.y},sourceNode:Qe.node,targetNode:Gt}:de===rr.TARGET&&(yt={startPoint:{x:Et.x,y:Et.y},endPoint:{x:Qe.anchor.x,y:Qe.anchor.y},sourceNode:jt,targetNode:Qe.node}),Pe.updateAfterAdjustStartAndEnd(yt)}else de===rr.SOURCE?Pe.updateStartPoint({x:Ue,y:Te}):de===rr.TARGET&&Pe.updateEndPoint({x:Ue,y:Te});Pe.text.value&&Ce.adjustEdge&&Pe.setText(Object.assign({},Pe.text,Pe.textPosition))}),jn(Sn(u),"onDragEnd",function(x){var M=x.event;try{var T;u.setState({dragging:!1});var L=u.props,V=L.graphModel,$=L.edgeModel,ne=L.type,re=u.state,de=re.endX,Oe=re.endY,Ce=re.dragging,Se=va({x:de,y:Oe},V);if(!Ce)return;var Ue,Te=!1;if(Se&&Se.node){var Pe=u.isAllowAdjust(Se),Qe=Pe.pass,yt=Pe.msg,Et=Pe.newTargetNode;if(Qe){var bt,jt=$.getData();Ue=_r(_r({},jt),{},{sourceAnchorId:"",targetAnchorId:"",text:(jt==null||(bt=jt.text)===null||bt===void 0?void 0:bt.value)||""}),ne===rr.SOURCE?(Ue=_r(_r({},V.edgeGenerator(V.getNodeModelById(Se.node.id).getData(),V.getNodeModelById($.targetNodeId).getData(),Ue)),{},{sourceNodeId:Se.node.id,sourceAnchorId:Se.anchor.id,startPoint:{x:Se.anchor.x,y:Se.anchor.y},targetNodeId:$.targetNodeId,endPoint:_r({},$.endPoint)}),$.sourceNodeId===Se.node.id&&$.sourceAnchorId===Se.anchor.id&&(Te=!0)):ne===rr.TARGET&&(Ue=_r(_r({},V.edgeGenerator(V.getNodeModelById($.sourceNodeId).getData(),V.getNodeModelById(Se.node.id).getData(),Ue)),{},{sourceNodeId:$.sourceNodeId,startPoint:_r({},$.startPoint),targetNodeId:Se.node.id,targetAnchorId:Se.anchor.id,endPoint:{x:Se.anchor.x,y:Se.anchor.y}}),$.targetNodeId===Se.node.id&&$.targetAnchorId===Se.anchor.id&&(Te=!0))}else{Te=!0;var Gt=Et.getData();V.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Gt,msg:yt})}}else Te=!0;if(Te)u.recoveryEdge();else{var Wt=$.getData();V.deleteEdgeById($.id);var fn=V.addEdge(_r({},Ue));V.eventCenter.emit(tt.EDGE_EXCHANGE_NODE,{data:{newEdge:fn.getData(),oldEdge:Wt}})}(T=u.preTargetNode)===null||T===void 0||T.setElementState(Ot.DEFAULT)}finally{u.props.graphModel.eventCenter.emit(tt.ADJUST_POINT_DRAGEND,{e:M,data:u.stepDragData})}}),jn(Sn(u),"recoveryEdge",function(){var x=u.props.edgeModel,M=u.oldEdge,T=M.startPoint,L=M.endPoint,V=M.pointsList;x.updateStartPoint(T),x.updateEndPoint(L),x.modelType!==dt.LINE_EDGE&&(x.pointsList=V,x.initPoints())}),jn(Sn(u),"getAdjustPointStyle",function(){var x=u.props,M=x.graphModel.theme;return x.edgeModel,M.edgeAdjust}),u.state={dragging:!1,endX:0,endY:0},u.targetRuleResults=new Map,u.sourceRuleResults=new Map;var p=i.type,h=i.edgeModel,_=i.graphModel.eventCenter;return u.stepDragData={type:p,edgeData:h.getData()},u.stepDrag=new hr({onDragStart:u.onDragStart,onDragging:u.onDragging,onDragEnd:u.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:_,data:u.stepDragData}),u}return t=a,(n=[{key:"isAllowAdjust",value:function(i){var u=this.props,p=u.edgeModel,h=p.id,_=p.sourceNode,x=p.targetNode,M=p.sourceAnchorId,T=p.targetAnchorId,L=u.type,V=null,$=null,ne=null,re=null;if(L===rr.SOURCE?(V=i.node,$=x,ne=i.anchor,re=x.getAnchorInfo(T)):(V=_,$=i.node,re=i.anchor,ne=_.getAnchorInfo(M)),this.preTargetNode&&this.preTargetNode!==i.node&&this.preTargetNode.setElementState(Ot.DEFAULT),this.preTargetNode=i.node,re.id===ne.id)return{pass:!1,msg:"",newTargetNode:$};var de="".concat(V.id,"_").concat($.id,"_").concat(ne.id,"_").concat(re.id);if(!this.targetRuleResults.has(de)){var Oe=V.isAllowConnectedAsSource($,ne,re,h),Ce=$.isAllowConnectedAsTarget(V,ne,re,h);this.sourceRuleResults.set(de,ii(Oe)),this.targetRuleResults.set(de,ii(Ce))}var Se=this.sourceRuleResults.get(de),Ue=Se.isAllPass,Te=Se.msg,Pe=this.targetRuleResults.get(de),Qe=Pe.isAllPass,yt=Pe.msg,Et=Ue&&Qe?Ot.ALLOW_CONNECT:Ot.NOT_ALLOW_CONNECT;return L===rr.SOURCE?V.setElementState(Et):$.setElementState(Et),{pass:Ue&&Qe,msg:yt||Te,newTargetNode:$}}},{key:"render",value:function(){var i=this.props,u=i.x,p=i.y,h=i.getAdjustPointShape,_=i.edgeModel,x=this.state.dragging;return Object(te.g)("g",{pointerEvents:x?"none":"",onMouseDown:this.handleMouseDown},x?"":h(u,p,_))}}])&&sO(t.prototype,n),a}(te.a);function Al(e){return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function bi(){return bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bi.apply(this,arguments)}function fO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Uy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Uy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nl(e,t){return Nl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Nl(e,t)}function hO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=lu(e);if(t){var a=lu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yO(this,n)}}function yO(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hn(e)}function Hn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lu(e){return lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lu(e)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _i=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Nl(i,u)})(a,e);var t,n,r=hO(a);function a(){var i;pO(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return or(Hn(i=r.call.apply(r,[this].concat(p))),"startTime",void 0),or(Hn(i),"contextMenuTime",void 0),or(Hn(i),"clickTimer",void 0),or(Hn(i),"textRef",Object(te.f)()),or(Hn(i),"handleHover",function(_,x){var M=i.props,T=M.model,L=M.graphModel.eventCenter;T.setHovered(_);var V=_?tt.EDGE_MOUSEENTER:tt.EDGE_MOUSELEAVE,$=T.getData();L.emit(V,{data:$,e:x})}),or(Hn(i),"setHoverON",function(_){i.props.model.isHovered||(i.textRef&&i.textRef.current&&i.textRef.current.setHoverON(),i.handleHover(!0,_))}),or(Hn(i),"setHoverOFF",function(_){i.props.model.isHovered&&(i.textRef&&i.textRef.current&&i.textRef.current.setHoverOFF(),i.handleHover(!1,_))}),or(Hn(i),"handleContextMenu",function(_){_.preventDefault(),i.contextMenuTime=new Date().getTime(),i.clickTimer&&clearTimeout(i.clickTimer);var x=i.props,M=x.model,T=x.graphModel,L=T.getPointByClient({x:_.clientX,y:_.clientY});T.setElementStateById(M.id,Ot.SHOW_MENU,L.domOverlayPosition),i.toFront(),M.isSelected||T.selectEdgeById(M.id);var V=M==null?void 0:M.getData();T.eventCenter.emit(tt.EDGE_CONTEXTMENU,{data:V,e:_,position:L})}),or(Hn(i),"handleMouseDown",function(_){_.stopPropagation(),i.startTime=new Date().getTime()}),or(Hn(i),"handleMouseUp",function(_){if(i.startTime&&!(new Date().getTime()-i.startTime>200||_.button===2)){var x=_.detail===2,M=i.props,T=M.model,L=M.graphModel,V=T==null?void 0:T.getData(),$=L.getPointByClient({x:_.clientX,y:_.clientY});if(x){var ne=L.editConfigModel,re=L.textEditElement;if(re&&re.id===T.id&&L.setElementStateById(T.id,Ot.DEFAULT),ne.edgeTextEdit&&T.text.editable&&L.setElementStateById(T.id,Ot.TEXT_EDIT),T.modelType===dt.POLYLINE_EDGE){var de=T,Oe=L.getPointByClient({x:_.x,y:_.y}).canvasOverlayPosition,Ce=Oe.x,Se=Oe.y,Ue=Sd({x:Ce,y:Se},de.points);de.dbClickPosition=Ue}L.eventCenter.emit(tt.EDGE_DBCLICK,{data:V,e:_,position:$})}else L.eventCenter.emit(tt.ELEMENT_CLICK,{data:V,e:_,position:$}),L.eventCenter.emit(tt.EDGE_CLICK,{data:V,e:_,position:$});var Te=L.editConfigModel;L.selectEdgeById(T.id,Sp(_,Te)),i.toFront()}}),i}return t=a,(n=[{key:"getShape",value:function(){return Object(te.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var i=this.props,u=i.model,p=i.graphModel;if(u.state===Ot.TEXT_EDIT)return null;var h=!1,_=p.editConfigModel;return(u.text.draggable||_.edgeTextDraggable)&&(h=!0),Object(te.g)(aO,{ref:this.textRef,editable:_.edgeTextEdit&&u.text.editable,model:u,graphModel:p,draggable:h})}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=i.startPoint,p=i.endPoint,h=i.isSelected;return{start:u,end:p,hover:this.state.hover,isSelected:h}}},{key:"getLastTwoPoints",value:function(){var i=this.props.model;return[i.startPoint,i.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var i=this.props.model,u=i.id,p=i.getArrowStyle(),h=p.refY,_=h===void 0?0:h,x=p.refX,M=x===void 0?2:x,T=fO(this.getLastTwoPoints(),2),L=T[0],V=T[1],$="auto";return L!==null&&V!==null&&($=ub({x:V.x-L.x,y:V.y-L.y,z:0})*(180/Math.PI)),Object(te.g)("g",null,Object(te.g)("defs",null,Object(te.g)("marker",{id:"marker-start-".concat(u),refX:-M,refY:_,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(te.g)("marker",{id:"marker-end-".concat(u),refX:M,refY:_,overflow:"visible",orient:$,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var i=this.props.model.getArrowStyle();return i.stroke,i.strokeWidth,i.offset,i.verticalLength,Object(te.g)("path",null)}},{key:"getEndArrow",value:function(){var i=this.props.model.getArrowStyle(),u=i.stroke,p=i.strokeWidth,h=i.offset,_=i.verticalLength;return Object(te.g)("path",{stroke:u,fill:u,strokeWidth:p,transform:"rotate(180)",d:"M 0 0 L ".concat(h," -").concat(_," L ").concat(h," ").concat(_," Z")})}},{key:"getAdjustPointShape",value:function(i,u,p){var h=p.getAdjustPointStyle();return Object(te.g)(pi,bi({className:"lf-edge-adjust-point"},h,{x:i,y:u}))}},{key:"getAdjustPoints",value:function(){var i=this.props,u=i.model,p=i.graphModel,h=u.getAdjustStart(),_=u.getAdjustEnd();return Object(te.g)("g",null,Object(te.g)(Xy,bi({type:"SOURCE"},h,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})),Object(te.g)(Xy,bi({type:"TARGET"},_,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(te.g)("g",null)}},{key:"getAppend",value:function(){return Object(te.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var i=this.props,u=i.graphModel,p=i.model;u.overlapMode!==xn.INCREASE&&u.toFront(p.id)}},{key:"render",value:function(){var i=this.props,u=i.model,p=u.isSelected,h=u.isHitable,_=u.isShowAdjustPoint;return i.graphModel.animation,Object(te.g)("g",null,Object(te.g)("g",{className:["lf-edge",!h&&"pointer-none",p&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),_&&p?this.getAdjustPoints():"")}}])&&dO(t.prototype,n),a}(te.a);function Dl(e){return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function vO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Vy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oi=function(e){var t={d:""};return Object.entries(e).forEach(function(n){var r=vO(n,2),a=r[0],i=r[1],u=Dl(i);a!=="style"&&u==="object"||(t[a]=i)}),Object(te.g)("path",t)};function Cl(e){return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(e)}function Rl(){return Rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rl.apply(this,arguments)}function gO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Il(e,t){return Il=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Il(e,t)}function bO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=fu(e);if(t){var a=fu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _O(this,n)}}function _O(e,t){if(t&&(Cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function fu(e){return fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fu(e)}var Ll=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Il(i,u)})(a,e);var t,n,r=bO(a);function a(){return gO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.startPoint,p=i.endPoint,h=i.isAnimation,_=i.arrowConfig,x=i.getEdgeStyle(),M=i.getEdgeAnimationStyle(),T=M.strokeDasharray,L=M.stroke,V=M.strokeDashoffset,$=M.animationName,ne=M.animationDuration,re=M.animationIterationCount,de=M.animationTimingFunction,Oe=M.animationDirection;return Object(te.g)(xo,Rl({},x,{x1:u.x,y1:u.y,x2:p.x,y2:p.y},_,h?{strokeDasharray:T,stroke:L,style:{strokeDashoffset:V,animationName:$,animationDuration:ne,animationIterationCount:re,animationTimingFunction:de,animationDirection:Oe}}:{}))}},{key:"getAppendWidth",value:function(){var i=this.props.model,u=function(T){var L,V=T.start,$=T.end;if(V.x===$.x&&V.y===$.y)L="";else{var ne={start:V,end:$,offset:10,verticalLength:5},re=si(ga(ga({},ne),{},{type:"start"})),de=si(ga(ga({},ne),{},{type:"end"}));L="M".concat(re.leftX," ").concat(re.leftY,` 
    L`).concat(re.rightX," ").concat(re.rightY,` 
    L`).concat(de.rightX," ").concat(de.rightY,`
    L`).concat(de.leftX," ").concat(de.leftY," z")}return{d:L,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:i.startPoint,end:i.endPoint}),p=u.d,h=u.strokeWidth,_=u.fill,x=u.strokeDasharray,M=u.stroke;return Object(te.g)(Oi,{d:p,fill:_,strokeWidth:h,stroke:M,strokeDasharray:x})}}])&&mO(t.prototype,n),a}(_i);function zl(e){return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function OO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Yy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wO=function(e){var t={points:"",fill:"none"};return Object.entries(e).forEach(function(n){var r=OO(n,2),a=r[0],i=r[1];(a==="style"||zl(i)!=="object")&&(t[a]=i)}),Object(te.g)("polyline",t)};function Bl(e){return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function Wy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wy(Object(n),!0).forEach(function(r){wr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gl(){return Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gl.apply(this,arguments)}function xO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return $y(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $y(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $y(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hl(e,t){return Hl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Hl(e,t)}function SO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=du(e);if(t){var a=du(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jO(this,n)}}function jO(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Or(e)}function Or(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function du(e){return du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},du(e)}function wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Hl(i,u)})(a,e);var t,n,r=SO(a);function a(){var i;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),wr(Or(i=r.call(this)),"drag",void 0),wr(Or(i),"isDragging",void 0),wr(Or(i),"isShowAdjustPointTemp",void 0),wr(Or(i),"appendInfo",void 0),wr(Or(i),"onDragStart",function(){var u=i.props.model;u.dragAppendStart(),i.isShowAdjustPointTemp=u.isShowAdjustPoint,u.isShowAdjustPoint=!1}),wr(Or(i),"onDragging",function(u){var p=u.deltaX,h=u.deltaY,_=i.props,x=_.model,M=_.graphModel;i.isDragging=!0;var T=M.transformModel,L=M.editConfigModel,V=xO(T.fixDeltaXY(p,h),2),$=V[0],ne=V[1],re=x,de=L.adjustEdgeMiddle;i.appendInfo=de?re.dragAppendSimple(i.appendInfo,{x:$,y:ne}):re.dragAppend(i.appendInfo,{x:$,y:ne})}),wr(Or(i),"onDragEnd",function(){var u=i.props,p=u.model,h=u.graphModel.eventCenter,_=p;_.dragAppendEnd(),i.isDragging=!1,_.isShowAdjustPoint=i.isShowAdjustPointTemp,i.appendInfo=void 0,h.emit(tt.EDGE_ADJUST,{data:_.getData()})}),wr(Or(i),"beforeDragStart",function(u,p){p.dragAble&&i.drag.handleMouseDown(u),i.appendInfo=p}),i.drag=new hr({onDragStart:i.onDragStart,onDragging:i.onDragging,onDragEnd:i.onDragEnd,isStopPropagation:!1}),i}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.points,p=i.isAnimation,h=i.arrowConfig,_=i.getEdgeStyle(),x=i.getEdgeAnimationStyle(),M=x.strokeDasharray,T=x.stroke,L=x.strokeDashoffset,V=x.animationName,$=x.animationDuration,ne=x.animationIterationCount,re=x.animationTimingFunction,de=x.animationDirection;return Object(te.g)(wO,Gl({points:u},_,h,p?{strokeDasharray:M,stroke:T,style:{strokeDashoffset:L,animationName:V,animationDuration:$,animationIterationCount:ne,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=i.points,p=i.isSelected,h={start:null,end:null,hover:this.state.hover,isSelected:p},_=to(u);return _.length>=2&&(h.start=_[_.length-2],h.end=_[_.length-1]),h}},{key:"getLastTwoPoints",value:function(){var i=this.props.model.points,u=to(i);return u.length>=2?[u[u.length-2],u[u.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(i){var u,p=i.start,h=i.end;if(p.x===h.x&&p.y===h.y)u="";else{var _={start:p,end:h,offset:10,verticalLength:5},x=si(pu(pu({},_),{},{type:"start"})),M=si(pu(pu({},_),{},{type:"end"}));u="M".concat(x.leftX," ").concat(x.leftY,` 
      L`).concat(x.rightX," ").concat(x.rightY,` 
      L`).concat(M.rightX," ").concat(M.rightY,`
      L`).concat(M.leftX," ").concat(M.leftY," z")}return{d:u,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(i){var u=this.getAppendAttributes(i),p=u.d,h=u.strokeWidth,_=u.fill,x=u.strokeDasharray,M=u.stroke;return Object(te.g)(Oi,{d:p,fill:_,strokeWidth:h,stroke:M,strokeDasharray:x})}},{key:"getAppendWidth",value:function(){for(var i=this,u=this.props,p=u.model,h=u.graphModel,_=p.pointsList,x=p.draggable,M=[],T=_.length,L=function($){var ne="lf-polyline-append",re={start:{x:_[$].x,y:_[$].y},end:{x:_[$+1].x,y:_[$+1].y},startIndex:$,endIndex:$+1,direction:"",dragAble:!0},de=Object(te.g)("g",{className:ne},i.getAppendShape(re)),Oe=h.editConfigModel,Ce=Oe.adjustEdge,Se=Oe.adjustEdgeMiddle;if(Ce&&x){var Ue=re.startIndex,Te=re.endIndex,Pe=Se&&(Ue===0||Te===T-1);re.dragAble=!Pe,re.start.x===re.end.x?(re.dragAble&&(ne+="-ew-resize"),re.direction=Tt.VERTICAL):re.start.y===re.end.y&&(re.dragAble&&(ne+="-ns-resize"),re.direction=Tt.HORIZONTAL),de=Object(te.g)("g",{className:i.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Qe){return i.beforeDragStart(Qe,re)}},Object(te.g)("g",{className:ne},i.getAppendShape(re)))}M.push(de)},V=0;V<T-1;V++)L(V);return Object(te.g)("g",null,M)}}])&&EO(t.prototype,n),a}(_i);function Xl(e){return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function PO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ky(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ky(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ul(){return Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ul.apply(this,arguments)}function MO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vl(e,t){return Vl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Vl(e,t)}function TO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=hu(e);if(t){var a=hu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return AO(this,n)}}function AO(e,t){if(t&&(Xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hu(e)}var Yl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Vl(i,u)})(a,e);var t,n,r=TO(a);function a(){return MO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.getEdgeStyle(),p=i.path,h=i.isAnimation,_=i.arrowConfig,x=i.getEdgeAnimationStyle(),M=x.strokeDasharray,T=x.stroke,L=x.strokeDashoffset,V=x.animationName,$=x.animationDuration,ne=x.animationIterationCount,re=x.animationTimingFunction,de=x.animationDirection;return Object(te.g)(Oi,Ul({d:p},u,_,h?{strokeDasharray:M,stroke:T,style:{strokeDashoffset:L,animationName:V,animationDuration:$,animationIterationCount:ne,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getAppendWidth",value:function(){var i=this.props.model.path;return Object(te.g)(Oi,{d:i,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=this.state.hover,p=i,h=p.path,_=p.isSelected,x=PO(Ed(h),2);return{start:x[0],end:x[1],hover:u,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var i=this.props.model.path;return Ed(i)}}])&&kO(t.prototype,n),a}(_i);function Wl(e){return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function qy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function NO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $l(e,t){return $l=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},$l(e,t)}function RO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=yu(e);if(t){var a=yu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return IO(this,n)}}function IO(e,t){if(t&&(Wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function yu(e){return yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yu(e)}var LO=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&$l(i,u)})(a,e);var t,n,r=RO(a);function a(){return DO(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getArrowAttributes",value:function(){var i=this.props,u=i.arrowInfo,p=i.style,h=u.start,_=u.end,x={start:h,end:_,offset:p.offset,verticalLength:p.verticalLength,type:"end"},M=si(x),T=M.leftX,L=M.leftY,V=M.rightX,$=M.rightY;return function(ne){for(var re=1;re<arguments.length;re++){var de=arguments[re]!=null?arguments[re]:{};re%2?qy(Object(de),!0).forEach(function(Oe){NO(ne,Oe,de[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(de)):qy(Object(de)).forEach(function(Oe){Object.defineProperty(ne,Oe,Object.getOwnPropertyDescriptor(de,Oe))})}return ne}({d:"M".concat(T," ").concat(L," L").concat(_.x," ").concat(_.y," L").concat(V," ").concat($," z")},p)}},{key:"getShape",value:function(){var i=this.getArrowAttributes(),u=i.d,p=i.strokeWidth,h=i.stroke,_=i.fill;return Object(te.g)(Oi,{d:u,fill:_,strokeWidth:p,stroke:h})}},{key:"render",value:function(){return Object(te.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&CO(t.prototype,n),a}(te.a),Zy=function(e,t){return pe(e,t)},zO=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Kl=function(){return Xe.a.Date.now()},BO=/\s/,GO=function(e){for(var t=e.length;t--&&BO.test(e.charAt(t)););return t},HO=/^\s+/,FO=function(e){return e&&e.slice(0,GO(e)+1).replace(HO,"")},XO=/^[-+]0x[0-9a-f]+$/i,UO=/^0b[01]+$/i,VO=/^0o[0-7]+$/i,YO=parseInt,Jy=function(e){if(typeof e=="number")return e;if(ct(e))return NaN;if(At(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=At(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=FO(e);var n=UO.test(e);return n||VO.test(e)?YO(e.slice(2),n?2:8):XO.test(e)?NaN:+e},WO=Math.max,$O=Math.min,KO=function(e,t,n){var r,a,i,u,p,h,_=0,x=!1,M=!1,T=!0;if(typeof e!="function")throw new TypeError("Expected a function");function L(Oe){var Ce=r,Se=a;return r=a=void 0,_=Oe,u=e.apply(Se,Ce)}function V(Oe){return _=Oe,p=setTimeout(ne,t),x?L(Oe):u}function $(Oe){var Ce=Oe-h;return h===void 0||Ce>=t||Ce<0||M&&Oe-_>=i}function ne(){var Oe=Kl();if($(Oe))return re(Oe);p=setTimeout(ne,function(Ce){var Se=t-(Ce-h);return M?$O(Se,i-(Ce-_)):Se}(Oe))}function re(Oe){return p=void 0,T&&r?L(Oe):(r=a=void 0,u)}function de(){var Oe=Kl(),Ce=$(Oe);if(r=arguments,a=this,h=Oe,Ce){if(p===void 0)return V(h);if(M)return clearTimeout(p),p=setTimeout(ne,t),L(h)}return p===void 0&&(p=setTimeout(ne,t)),u}return t=Jy(t)||0,At(n)&&(x=!!n.leading,i=(M="maxWait"in n)?WO(Jy(n.maxWait)||0,t):i,T="trailing"in n?!!n.trailing:T),de.cancel=function(){p!==void 0&&clearTimeout(p),_=0,r=h=a=p=void 0},de.flush=function(){return p===void 0?u:re(Kl())},de},qO=o(167);function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qy,ev,tv,JO=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),Gr(this,"undos",[]),Gr(this,"redos",[]),Gr(this,"callbacks",[]),Gr(this,"stopWatch",null),Gr(this,"curData",null),Gr(this,"maxSize",50),Gr(this,"waitTime",100),Gr(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,(n=[{key:"add",value:function(r){Zy(zO(this.undos),r)||(this.undos.push(r),Zy(this.curData,r)||(this.redos=[]),this.eventCenter.emit(tt.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var r=this.undos.pop();this.redos.push(r);var a=this.undos.pop();return this.curData=Nt(a),a}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var r=this.redos.pop();return this.curData=Nt(r),r}}},{key:"watch",value:function(r){var a=this;this.stopWatch&&this.stopWatch(),this.undos.push(r.modelToGraphData()),this.stopWatch=Object(qO.a)(r,KO(function(){var i=r.modelToHistoryData();i&&a.add(i)},this.waitTime))}}])&&ZO(t.prototype,n),e}();function ql(e){return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}function QO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return nv(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nv(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rv(Object(n),!0).forEach(function(r){oo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zl(e,t){return Zl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Zl(e,t)}function ew(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=vu(e);if(t){var a=vu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tw(this,n)}}function tw(e,t){if(t&&(ql(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ro(e)}function Ro(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vu(e){return vu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vu(e)}function oo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iv,av,uv,Jl=Fn((tv=ev=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&Zl(u,p)})(i,e);var t,n,r,a=ew(i);function i(){var u;return function(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}(this,i),oo(Ro(u=a.call(this)),"ref",Object(te.f)()),oo(Ro(u),"__prevText",{type:"",text:"",id:""}),oo(Ro(u),"keyupHandler",function(p){var h=u.props.graphModel.textEditElement;p.key==="Enter"&&p.altKey&&h.setElementState(0)}),oo(Ro(u),"inputHandler",function(p){var h=p.target.innerText,_=u.props.graphModel.textEditElement;u.__prevText={type:_.type,text:h.replace(/(\r\n)+$|(\n)+$/,""),id:_.id}}),oo(Ro(u),"keydownHandler",function(p){p.stopPropagation()}),u.state={style:{left:0,top:0}},u}return t=i,r=[{key:"getDerivedStateFromProps",value:function(u){var p,h=u.graphModel,_=h.transformModel,x=h.theme,M=h.textEditElement;if(M){var T;if((T=M.text)===null||T===void 0||!T.value)if(M.BaseType===Ft.EDGE){var L=(M=M).text,V=M.textPosition,$=V.x,ne=V.y;L.x=$,L.y=ne,M.setText(L)}else M=M;var re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(M.BaseType===Ft.EDGE){var de=x.edgeText,Oe=de.overflowMode,Ce=de.lineHeight,Se=de.wrapPadding,Ue=de.textWidth;Ue&&Oe==="autoWrap"&&(p=Co(Co({},re),{},{width:Ue,minWidth:Ue,lineHeight:Ce,padding:Se}))}else if(M.BaseType===Ft.NODE){var Te=x.nodeText,Pe=Te.overflowMode,Qe=Te.lineHeight,yt=Te.wrapPadding,Et=Te.textWidth,bt=M,jt=bt.width,Gt=bt.modelType;(Gt!==dt.TEXT_NODE&&Pe==="autoWrap"||Gt===dt.TEXT_NODE&&Et)&&(p=Co(Co({},re),{},{width:Et||jt,minWidth:Et||jt,lineHeight:Qe,padding:yt}))}var Wt=M.text,fn=Wt.x,ir=Wt.y,Rn=QO(_.CanvasPointToHtmlPoint([fn,ir]),2);return{style:Co({left:Rn[0],top:Rn[1]},p)}}}}],(n=[{key:"componentDidUpdate",value:function(){var u=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var p=this.__prevText,h=p.text,_=p.id;u.updateText(_,h),u.eventCenter.emit(tt.TEXT_UPDATE,Co({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(u){if(window.getSelection!==void 0&&document.createRange!==void 0){var p=document.createRange();p.selectNodeContents(u),p.collapse(!1);var h=window.getSelection();h.removeAllRanges(),h.addRange(p)}}},{key:"render",value:function(){var u,p=this.props.graphModel.textEditElement,h=this.state.style;return p?Object(te.g)("div",{contentEditable:!0,className:"lf-text-input",style:h,ref:this.ref,key:p.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(u=p.text)===null||u===void 0?void 0:u.value):null}}])&&ov(t.prototype,n),r&&ov(t,r),i}(te.a),oo(ev,"toolName","textEdit"),Qy=tv))||Qy,nw=function(e){return e.modelType===dt.LINE_EDGE?function(t){var n=t.startPoint,r=t.endPoint,a=(n.x+r.x)/2,i=(n.y+r.y)/2,u=Math.abs(n.x-r.x)+10,p=Math.abs(n.y-r.y)+10;return{x:a-u/2,y:i-p/2,x1:a+u/2,y1:i+p/2}}(e):e.modelType===dt.POLYLINE_EDGE?function(t){var n=t.points,r=to(n),a=ci(r,8),i=a.x,u=a.y,p=a.width,h=a.height;return{x:i-p/2,y:u-h/2,x1:i+p/2,y1:u+h/2}}(e):e.modelType===dt.BEZIER_EDGE?function(t){var n=t.path,r=Ea(n),a=ci(r,8),i=a.x,u=a.y,p=a.width,h=a.height;return{x:i-p/2,y:u-h/2,x1:i+p/2,y1:u+h/2}}(e):void 0};function Ql(e){return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function sv(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||cv(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rw(e){return function(t){if(Array.isArray(t))return ef(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||cv(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cv(e,t){if(e){if(typeof e=="string")return ef(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ef(e,t):void 0}}function ef(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tf(e,t){return tf=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},tf(e,t)}function iw(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=gu(e);if(t){var a=gu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return aw(this,n)}}function aw(e,t){if(t&&(Ql(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wi(e)}function wi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gu(e){return gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gu(e)}function xi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nf=Fn((uv=av=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&tf(i,u)})(a,e);var t,n,r=iw(a);function a(i){var u;(function(x,M){if(!(x instanceof M))throw new TypeError("Cannot call a class as a function")})(this,a),xi(wi(u=r.call(this)),"stepDrag",void 0),xi(wi(u),"handleMouseDown",function(x){u.stepDrag.handleMouseDown(x)}),xi(wi(u),"onDragging",function(x){var M=x.deltaX,T=x.deltaY,L=u.props.graphModel,V=L.getSelectElements(!0);L.moveNodes(V.nodes.map(function($){return $.id}),M,T)}),xi(wi(u),"handleContextMenu",function(x){x.preventDefault();var M=u.props,T=M.graphModel,L=M.graphModel,V=L.eventCenter,$=L.selectElements,ne=T.getPointByClient({x:x.clientX,y:x.clientY}),re={nodes:[],edges:[]};rw($.values()).forEach(function(de){de.BaseType===Ft.NODE&&re.nodes.push(de.getData()),de.BaseType===Ft.EDGE&&re.edges.push(de.getData())}),V.emit(tt.SELECTION_CONTEXTMENU,{data:re,e:x,position:ne})});var p=i.graphModel,h=p.gridSize,_=p.eventCenter;return u.stepDrag=new hr({onDragging:u.onDragging,step:h,eventType:"SELECTION",eventCenter:_}),u}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel,u=i.selectElements,p=i.transformModel;if(!(u.size<=1)){var h=Number.MAX_SAFE_INTEGER,_=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER;u.forEach(function($){var ne={x:0,y:0,x1:0,y1:0};$.BaseType===Ft.NODE&&(ne=function(re){var de=re.x,Oe=re.y,Ce=re.width,Se=re.height;return{x:de-Ce/2,y:Oe-Se/2,x1:de+Ce/2,y1:Oe+Se/2}}($)),$.BaseType===Ft.EDGE&&(ne=nw($)),h=Math.min(h,ne.x),_=Math.min(_,ne.y),x=Math.max(x,ne.x1),M=Math.max(M,ne.y1)});var T=sv(p.CanvasPointToHtmlPoint([h,_]),2);h=T[0],_=T[1];var L=sv(p.CanvasPointToHtmlPoint([x,M]),2);x=L[0],M=L[1];var V={left:"".concat(h-10,"px"),top:"".concat(_-10,"px"),width:"".concat(x-h+20,"px"),height:"".concat(M-_+20,"px")};return Object(te.g)("div",{className:"lf-multiple-select",style:V,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&ow(t.prototype,n),a}(te.a),xi(av,"toolName","multipleSelect"),iv=uv))||iv;function uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sw=function(){function e(r){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),mu(this,"tools",void 0),mu(this,"components",void 0),mu(this,"toolMap",new Map),mu(this,"instance",void 0),this.instance=r,this.isDisabledTool(Jl.toolName)||this.registerTool(Jl.toolName,Jl),this.isDisabledTool(nf.toolName)||this.registerTool(nf.toolName,nf);var a=r.graphModel;a.eventCenter.on("".concat(tt.GRAPH_TRANSFORM,",").concat(tt.NODE_CLICK,",").concat(tt.BLANK_CLICK," "),function(){var i=a.textEditElement,u=a.editConfigModel,p=u.edgeTextEdit,h=u.nodeTextEdit;(p||h)&&i&&a.textEditElement.setElementState(Ot.DEFAULT)})}var t,n;return t=e,(n=[{key:"isDisabledTool",value:function(r){return this.instance.options.disabledTools.indexOf(r)!==-1}},{key:"registerTool",value:function(r,a){this.toolMap.set(r,a)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&uw(t.prototype,n),e}(),cw=o(168),lw=o.n(cw);function fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lv=function(){function e(r){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),rf(this,"mousetrap",void 0),rf(this,"options",void 0),rf(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var a=r.lf;this.target=a.container,this.mousetrap=new lw.a(this.target),r.keyboard.enabled&&this.enable(!0)}var t,n;return t=e,(n=[{key:"initShortcuts",value:function(){var r=this,a=this.options.keyboard.shortcuts;if(a)if(Zt(a))a.forEach(function(h){var _=h.keys,x=h.callback,M=h.action;return r.on(_,x,M)});else{var i=a.keys,u=a.callback,p=a.action;this.on(i,u,p)}}},{key:"on",value:function(r,a,i){this.mousetrap.bind(this.getKeys(r),a,i)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(r,a){this.mousetrap.unbind(this.getKeys(r),a)}},{key:"enable",value:function(r){(this.disabled||r)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(r){var a=this;return(Array.isArray(r)?r:[r]).map(function(i){return a.formatKey(i)})}},{key:"formatKey",value:function(r){return r.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&fw(t.prototype,n),e}(),pw=lv,xr=null;function fv(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function pv(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}function of(e){return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function dv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dv(Object(n),!0).forEach(function(r){Bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dv(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var af=function(){function e(a){var i,u,p=this;(function(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")})(this,e),Bt(this,"container",void 0),Bt(this,"width",void 0),Bt(this,"height",void 0),Bt(this,"graphModel",void 0),Bt(this,"history",void 0),Bt(this,"viewMap",new Map),Bt(this,"tool",void 0),Bt(this,"keyboard",void 0),Bt(this,"dnd",void 0),Bt(this,"options",void 0),Bt(this,"snaplineModel",void 0),Bt(this,"components",[]),Bt(this,"plugins",void 0),Bt(this,"extension",{}),Bt(this,"adapterIn",void 0),Bt(this,"adapterOut",void 0),Bt(this,"getView",function(h){return p.viewMap.get(h)}),a=hh(a),this.options=a,this.container=this.initContainer(a.container),this.plugins=a.plugins,this.graphModel=new bb(Ei({},a)),this.tool=new sw(this),this.history=new JO(this.graphModel.eventCenter),this.dnd=new y0({lf:this}),this.keyboard=new pw({lf:this,keyboard:a.keyboard}),a.snapline!==!1&&(this.snaplineModel=new Ey(this.graphModel),i=this.graphModel.eventCenter,u=this.snaplineModel,i.on("node:mousemove",function(h){var _=h.data;u.setNodeSnapLine(_)}),i.on("node:mouseup",function(){u.clearSnapline()})),function(h,_){var x=h.keyboard,M=x.options.keyboard;x.on(["cmd + c","ctrl + c"],function(){if(!M.enabled||_.textEditElement)return!0;var T=h.options.guards,L=_.getSelectElements(!1);return T&&T.beforeClone&&!T.beforeClone(L)||L.nodes.length===0&&L.edges.length===0?(xr=null,!0):((xr=L).nodes.forEach(function(V){return fv(V,40)}),xr.edges.forEach(function(V){return pv(V,40)}),!1)}),x.on(["cmd + v","ctrl + v"],function(){if(!M.enabled||_.textEditElement)return!0;if(xr&&(xr.nodes||xr.edges)){h.clearSelectElements();var T=h.addElements(xr);if(!T)return!0;T.nodes.forEach(function(L){return h.selectElementById(L.id,!0)}),T.edges.forEach(function(L){return h.selectElementById(L.id,!0)}),xr.nodes.forEach(function(L){return fv(L,40)}),xr.edges.forEach(function(L){return pv(L,40)})}return!1}),x.on(["cmd + z","ctrl + z"],function(){return!M.enabled||!!_.textEditElement||(h.undo(),!1)}),x.on(["cmd + y","ctrl + y"],function(){return!M.enabled||!!_.textEditElement||(h.redo(),!1)}),x.on(["backspace"],function(){if(!M.enabled||_.textEditElement)return!0;var T=_.getSelectElements(!0);return h.clearSelectElements(),T.edges.forEach(function(L){return h.deleteEdge(L.id)}),T.nodes.forEach(function(L){return h.deleteNode(L.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(a.disabledPlugins)}var t,n,r;return t=e,n=[{key:"register",value:function(a,i){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof a=="string"){var p={BaseEdge:_i,BaseEdgeModel:bs,BaseNode:br,BaseNodeModel:mr,RectNode:Jc,RectNodeModel:Nc,CircleNode:nl,CircleNodeModel:dc,PolygonNode:ul,PolygonNodeModel:Mc,TextNode:bl,TextNodeModel:Ic,LineEdge:Ll,LineEdgeModel:Es,DiamondNode:fl,DiamondNodeModel:mc,PolylineEdge:Fl,PolylineEdgeModel:Ms,BezierEdge:Yl,BezierEdgeModel:uc,EllipseNode:vl,EllipseNodeModel:wc,HtmlNode:xl,HtmlNodeModel:Bc,h:te.g,type:a};this.viewMap.forEach(function(T){var L=T.extendKey;L&&(p[L]=T)}),this.graphModel.modelMap.forEach(function(T){var L=T.extendKey;L&&(p[L]=T)});var h=i(p),_=h.view,x=h.model,M=_;u&&!M.isObervered&&(M.isObervered=!0,M=He(M)),this.setView(a,M),this.graphModel.setModel(a,x)}else this.registerElement(a)}},{key:"registerElement",value:function(a){var i=a.view;a.isObserverView===!1||i.isObervered||(i.isObervered=!0,i=He(i)),this.setView(a.type,i),this.graphModel.setModel(a.type,a.model)}},{key:"batchRegister",value:function(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(u){a.registerElement(u)})}},{key:"defaultRegister",value:function(){this.registerElement({view:Jc,model:Nc,type:"rect"}),this.registerElement({type:"circle",view:nl,model:dc}),this.registerElement({type:"polygon",view:ul,model:Mc}),this.registerElement({type:"line",view:Ll,model:Es}),this.registerElement({type:"polyline",view:Fl,model:Ms}),this.registerElement({type:"bezier",view:Yl,model:uc}),this.registerElement({type:"text",view:bl,model:Ic}),this.registerElement({type:"ellipse",view:vl,model:wc}),this.registerElement({type:"diamond",view:fl,model:mc}),this.registerElement({type:"html",view:xl,model:Bc})}},{key:"selectElementById",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(a,i),!i&&u&&this.graphModel.toFront(a)}},{key:"focusOn",value:function(a){var i=this.graphModel.transformModel,u=a.coordinate,p=a.id;if(!u){var h=this.getNodeModelById(p);h&&(u=h.getData());var _=this.getEdgeModelById(p);_&&(u=_.textPosition)}var x=u,M=x.x,T=x.y;i.focusOn(M,T,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(a){this.graphModel.setTheme(a)}},{key:"resize",value:function(a,i){this.graphModel.resize(a,i),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(a){this.graphModel.setDefaultEdgeType(a)}},{key:"updateText",value:function(a,i){this.graphModel.updateText(a,i)}},{key:"deleteElement",value:function(a){var i,u,p,h=this.getModelById(a);return!!h&&(u=(p=(Bt(i={},Ft.NODE,this.deleteNode),Bt(i,Ft.EDGE,this.deleteEdge),i)[h.BaseType])===null||p===void 0?void 0:p.call(this,a))!==null&&u!==void 0&&u}},{key:"getModelById",value:function(a){return this.graphModel.getElement(a)}},{key:"getDataById",value:function(a){var i;return(i=this.graphModel.getElement(a))===null||i===void 0?void 0:i.getData()}},{key:"changeNodeType",value:function(a,i){this.graphModel.changeNodeType(a,i)}},{key:"changeEdgeType",value:function(a,i){this.graphModel.changeEdgeType(a,i)}},{key:"getNodeEdges",value:function(a){return this.graphModel.getNodeEdges(a)}},{key:"addNode",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,u=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(a,i,u)}},{key:"deleteNode",value:function(a){var i=this.graphModel.getNodeModelById(a);if(!i)return!1;var u=i.getData(),p=this.options.guards,h=!p||!p.beforeDelete||p.beforeDelete(u);return h&&this.graphModel.deleteNode(a),h}},{key:"cloneNode",value:function(a){var i=this.graphModel.getNodeModelById(a).getData(),u=this.options.guards;if(!u||!u.beforeClone||u.beforeClone(i))return this.graphModel.cloneNode(a)}},{key:"changeNodeId",value:function(a,i){return this.graphModel.changeNodeId(a,i)}},{key:"getNodeModelById",value:function(a){return this.graphModel.getNodeModelById(a)}},{key:"getNodeDataById",value:function(a){var i;return(i=this.graphModel.getNodeModelById(a))===null||i===void 0?void 0:i.getData()}},{key:"addEdge",value:function(a){return this.graphModel.addEdge(a)}},{key:"deleteEdge",value:function(a){var i=this.options.guards,u=this.graphModel.edgesMap[a];if(!u)return!1;var p=u.model.getData(),h=!i||!i.beforeDelete||i.beforeDelete(p);return h&&this.graphModel.deleteEdgeById(a),h}},{key:"deleteEdgeByNodeId",value:function(a){var i=a.sourceNodeId,u=a.targetNodeId;i&&u?this.graphModel.deleteEdgeBySourceAndTarget(i,u):i?this.graphModel.deleteEdgeBySource(i):u&&this.graphModel.deleteEdgeByTarget(u)}},{key:"changeEdgeId",value:function(a,i){return this.graphModel.changeEdgeId(a,i)}},{key:"getEdgeModelById",value:function(a){var i;return(i=this.graphModel.edgesMap[a])===null||i===void 0?void 0:i.model}},{key:"getEdgeModels",value:function(a){var i=this.graphModel.edges,u=a.sourceNodeId,p=a.targetNodeId;if(u&&p){var h=[];return i.forEach(function(M){M.sourceNodeId===u&&M.targetNodeId===p&&h.push(M)}),h}if(u){var _=[];return i.forEach(function(M){M.sourceNodeId===u&&_.push(M)}),_}if(p){var x=[];return i.forEach(function(M){M.targetNodeId===p&&x.push(M)}),x}return[]}},{key:"getEdgeDataById",value:function(a){var i;return(i=this.getEdgeModelById(a))===null||i===void 0?void 0:i.getData()}},{key:"getNodeIncomingEdge",value:function(a){return this.graphModel.getNodeIncomingEdge(a)}},{key:"getNodeOutgoingEdge",value:function(a){return this.graphModel.getNodeOutgoingEdge(a)}},{key:"getNodeIncomingNode",value:function(a){return this.graphModel.getNodeIncomingNode(a)}},{key:"getNodeOutgoingNode",value:function(a){return this.graphModel.getNodeOutgoingNode(a)}},{key:"editText",value:function(a){this.graphModel.editText(a)}},{key:"setProperties",value:function(a,i){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.setProperties(en(i))}},{key:"deleteProperty",value:function(a,i){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.deleteProperty(i)}},{key:"getProperties",value:function(a){var i;return(i=this.graphModel.getElement(a))===null||i===void 0?void 0:i.getProperties()}},{key:"toFront",value:function(a){this.graphModel.toFront(a)}},{key:"setElementZIndex",value:function(a,i){return this.graphModel.setElementZIndex(a,i)}},{key:"addElements",value:function(a){for(var i=this,u=a.nodes,p=a.edges,h={},_={nodes:[],edges:[]},x=0;x<u.length;x++){var M=u[x],T=M.id,L=this.addNode(M);if(!L)return;T&&(h[T]=L.id),_.nodes.push(L)}return p.forEach(function(V){var $=V.sourceNodeId,ne=V.targetNodeId;h[$]&&($=h[$]),h[ne]&&(ne=h[ne]);var re=i.graphModel.addEdge(Ei(Ei({},V),{},{sourceNodeId:$,targetNodeId:ne}));_.edges.push(re)}),_}},{key:"getAreaElement",value:function(a,i){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(a,i,u,p,h).map(function(_){return _.getData()})}},{key:"getSelectElements",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(a)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var a=this.graphModel.modelToGraphData();if(this.adapterOut){for(var i=arguments.length,u=new Array(i),p=0;p<i;p++)u[p]=arguments[p];return this.adapterOut.apply(this,[a].concat(u))}return a}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(a){this.graphModel.editConfigModel.updateEditConfig(a)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(a,i){return this.graphModel.getPointByClient({x:a,y:i})}},{key:"undo",value:function(){if(this.history.undoAble()){var a=en(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"redo",value:function(){if(this.history.redoAble()){var a=en(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"zoom",value:function(a,i){return this.graphModel.transformModel.zoom(a,i)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(a){this.graphModel.transformModel.setZoomMiniSize(a)}},{key:"setZoomMaxSize",value:function(a){this.graphModel.transformModel.setZoomMaxSize(a)}},{key:"getTransform",value:function(){var a=this.graphModel.transformModel;return{SCALE_X:a.SCALE_X,SCALE_Y:a.SCALE_Y,TRANSLATE_X:a.TRANSLATE_X,TRANSLATE_Y:a.TRANSLATE_Y}}},{key:"translate",value:function(a,i){this.graphModel.transformModel.translate(a,i)}},{key:"resetTranslate",value:function(){var a=this.graphModel.transformModel,i=a.TRANSLATE_X,u=a.TRANSLATE_Y;this.translate(-i,-u)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(a,i){i===void 0&&(i=a),this.graphModel.fitView(a,i)}},{key:"openEdgeAnimation",value:function(a){this.graphModel.openEdgeAnimation(a)}},{key:"closeEdgeAnimation",value:function(a){this.graphModel.closeEdgeAnimation(a)}},{key:"on",value:function(a,i){this.graphModel.eventCenter.on(a,i)}},{key:"off",value:function(a,i){this.graphModel.eventCenter.off(a,i)}},{key:"once",value:function(a,i){this.graphModel.eventCenter.once(a,i)}},{key:"emit",value:function(a,i){this.graphModel.eventCenter.emit(a,i)}},{key:"initContainer",value:function(a){var i=document.createElement("div");return i.style.position="relative",i.style.width="100%",i.style.height="100%",a.innerHTML="",a.appendChild(i),i}},{key:"installPlugins",value:function(){var a,i=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=(a=this.plugins)!==null&&a!==void 0?a:e.extensions;p.forEach(function(h){var _=h.pluginName||h.name;u.indexOf(_)===-1&&i.installPlugin(h)})}},{key:"installPlugin",value:function(a){if(of(a)==="object"){var i=a.install,u=a.render;return i&&i.call(a,this,e),u&&this.components.push(u.bind(a)),void(this.extension[a.pluginName]=a)}var p=a,h=new p({lf:this,LogicFlow:e,options:this.options.pluginsOptions});h.render&&this.components.push(h.render.bind(h)),this.extension[p.pluginName]=h}},{key:"updateAttributes",value:function(a,i){this.graphModel.updateAttributes(a,i)}},{key:"createFakerNode",value:function(a){var i=this.graphModel.modelMap.get(a.type);if(i){var u=new i(Ei(Ei({},a),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(u),u}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(a){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(a)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(a,i){this.viewMap.set(a,i)}},{key:"renderRawData",value:function(a){this.graphModel.graphDataToModel(en(a)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(te.j)(Object(te.g)(d0,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tt.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(a=this.adapterIn(a)),this.renderRawData(a)}}],r=[{key:"use",value:function(a){var i=a.pluginName;i||(i=a.name);var u=this.extensions.get(i);u&&u.destroy&&u.destroy(),this.extensions.set(i,a)}}],n&&hv(t.prototype,n),r&&hv(t,r),e}();function Fn(e){return He(e)}Bt(af,"extensions",new Map),l.default=af}])})})(ff,ff.exports);var Le=ff.exports,qv=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Nw=function(y){qv(d,y);function d(s,l){var o=this;return s.id||(s.id="Event_"+ur()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=y.call(this,s,l)||this,o}return d.prototype.setAttributes=function(){this.r=18},d.prototype.getConnectedTargetRules=function(){var s=y.prototype.getConnectedTargetRules.call(this),l={message:"起始节点不能作为边的终点",validate:function(){return!1}};return s.push(l),s},d.extendKey="StartEventModel",d}(Le.CircleNodeModel),Dw=function(y){qv(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.extendKey="StartEventNode",d}(Le.CircleNode),Zv=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Pu=globalThis&&globalThis.__assign||function(){return Pu=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Pu.apply(this,arguments)},Cw=function(y){Zv(d,y);function d(s,l){var o=this;return s.id||(s.id="Event_"+ur()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=y.call(this,s,l)||this,o}return d.prototype.setAttributes=function(){this.r=18},d.prototype.getConnectedSourceRules=function(){var s=y.prototype.getConnectedSourceRules.call(this),l={message:"结束节点不能作为边的起点",validate:function(){return!1}};return s.push(l),s},d.extendKey="EndEventModel",d}(Le.CircleNodeModel),Rw=function(y){Zv(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},d.prototype.getShape=function(){var s=this.props.model,l=s.getNodeStyle(),o=s.x,f=s.y,c=s.r,v=y.prototype.getShape.call(this);return Le.h("g",{},v,Le.h("circle",Pu(Pu({},l),{cx:o,cy:f,r:c-5})))},d.extendKey="EndEventView",d}(Le.CircleNode),Jv=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Ai=globalThis&&globalThis.__assign||function(){return Ai=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Ai.apply(this,arguments)},Iw=function(y){Jv(d,y);function d(s,l){var o=this;return s.id||(s.id="Gateway_"+ur()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=y.call(this,s,l)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return d.extendKey="ExclusiveGatewayModel",d}(Le.PolygonNodeModel),Lw=function(y){Jv(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getShape=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.points,b=s.getNodeStyle();return Le.h("g",{transform:"matrix(1 0 0 1 "+(l-f/2)+" "+(o-c/2)+")"},Le.h("polygon",Ai(Ai({},b),{x:l,y:o,points:v})),Le.h("path",Ai({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},b)))},d.extendKey="ExclusiveGatewayNode",d}(Le.PolygonNode),Qv=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Mu=globalThis&&globalThis.__assign||function(){return Mu=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Mu.apply(this,arguments)},zw=function(y){Qv(d,y);function d(s,l){var o=this;return s.id||(s.id="Activity_"+ur()),o=y.call(this,s,l)||this,o}return d.extendKey="UserTaskModel",d}(Le.RectNodeModel),Bw=function(y){Qv(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getLabelShape=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.getNodeStyle();return Le.h("svg",{x:l-f/2+5,y:o-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Le.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},d.prototype.getShape=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.radius,b=s.getNodeStyle();return Le.h("g",{},[Le.h("rect",Mu(Mu({},b),{x:l-f/2,y:o-c/2,rx:v,ry:v,width:f,height:c})),this.getLabelShape()])},d.extendKey="UserTaskNode",d}(Le.RectNode),eg=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),pf=globalThis&&globalThis.__assign||function(){return pf=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},pf.apply(this,arguments)},Gw=function(y){eg(d,y);function d(s,l){var o=this;return s.id||(s.id="Activity_"+ur()),o=y.call(this,s,l)||this,o}return d.extendKey="ServiceTaskModel",d}(Le.RectNodeModel),Hw=function(y){eg(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getLabelShape=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.getNodeStyle();return Le.h("svg",{x:l-f/2+5,y:o-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Le.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},d.prototype.getShape=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.radius,b=s.getNodeStyle();return Le.h("g",{},[Le.h("rect",pf({x:l-f/2,y:o-c/2,rx:v,ry:v,width:f,height:c},b)),this.getLabelShape()])},d.extendKey="ServiceTaskNode",d}(Le.RectNode),tg=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),ng=function(y){tg(d,y);function d(s,l){var o=this;return s.id||(s.id="Flow_"+ur()),o=y.call(this,s,l)||this,o}return d.extendKey="SequenceFlowModel",d}(Le.PolylineEdgeModel),rg=function(y){tg(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.extendKey="SequenceFlowEdge",d}(Le.PolylineEdge),_v={width:40,height:40},Ov={width:40,height:40},wv={width:40,height:40},xv={width:100,height:80},Ev={width:100,height:80},Fw=new mw([32,32,1]);function Sv(){return Fw.next()}function og(y){return Object.prototype.toString.call(y)}function Xw(y){return"  ".repeat(y)}function ku(y){var d=y;return og(y)==="[object Object]"?(d={},Object.keys(y).forEach(function(s){var l=s;s.charAt(0)==="-"&&(l=s.substring(1)),d[l]=ku(y[s])})):Array.isArray(y)&&(d=[],y.forEach(function(s,l){d[l]=ku(s)})),d}function Uw(y){var d=y;try{typeof d!="string"&&(d=JSON.parse(y))}catch{d=JSON.stringify(ku(y)).replace(/"/g,"'")}return d}var Lo=`	
`;function Eu(y,d,s){var l=Xw(s),o="";if(d==="#text")return Lo+l+y;if(d==="#cdata-section")return Lo+l+"<![CDATA["+y+"]]>";if(d==="#comment")return Lo+l+"<!--"+y+"-->";if((""+d).charAt(0)==="-")return" "+d.substring(1)+'="'+Uw(y)+'"';if(Array.isArray(y))y.forEach(function(b){o+=Eu(b,d,s+1)});else if(og(y)==="[object Object]"){var f=Object.keys(y),c="",v="";o+=(s===0?"":Lo+l)+"<"+d,f.forEach(function(b){b.charAt(0)==="-"?c+=Eu(y[b],b,s+1):v+=Eu(y[b],b,s+1)}),o+=c+(v!==""?">"+v+(Lo+l)+"</"+d+">":" />")}else o+=Lo+l+("<"+d+">"+y.toString()+"</"+d+">");return o}function Vw(y){var d="";for(var s in y)d+=Eu(y[s],s,0);return d}var pn=function(){};pn.ObjTree=function(){return this};pn.ObjTree.VERSION="0.23";pn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;pn.ObjTree.prototype.attr_prefix="-";pn.ObjTree.prototype.parseXML=function(y){var d;if(window.DOMParser){var s=new DOMParser,l=s.parseFromString(y,"application/xml");if(!l)return;d=l.documentElement}else window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(y),d=s.documentElement);if(d)return this.parseDOM(d)};pn.ObjTree.prototype.parseHTTP=function(y,d,s){var l={};for(var o in d)l[o]=d[o];if(l.method||(typeof l.postBody>"u"&&typeof l.postbody>"u"&&typeof l.parameters>"u"?l.method="get":l.method="post"),s){l.asynchronous=!0;var f=this,c=s,v=l.onComplete;l.onComplete=function(O){var S;O&&O.responseXML&&O.responseXML.documentElement&&(S=f.parseDOM(O.responseXML.documentElement)),c(S,O),v&&v(O)}}else l.asynchronous=!1;var b;if(typeof HTTP<"u"&&HTTP.Request){l.uri=y;var w=new HTTP.Request(l);w&&(b=w.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var w=new Ajax.Request(y,l);w&&(b=w.transport)}if(s)return b;if(b&&b.responseXML&&b.responseXML.documentElement)return this.parseDOM(b.responseXML.documentElement)};pn.ObjTree.prototype.parseDOM=function(y){if(y){if(this.__force_array={},this.force_array)for(var d=0;d<this.force_array.length;d++)this.__force_array[this.force_array[d]]=1;var s=this.parseElement(y);if(this.__force_array[y.nodeName]&&(s=[s]),y.nodeType!=11){var l={};l[y.nodeName]=s,s=l}return s}};pn.ObjTree.prototype.parseElement=function(y){if(y.nodeType!=7){if(y.nodeType==3||y.nodeType==4||y.nodeType==8){var d=y.nodeValue.match(/[^\x00-\x20]/);return d==null?void 0:y.nodeValue}var s=null,l={};if(y.attributes&&y.attributes.length){s={};for(var o=0;o<y.attributes.length;o++){var f=y.attributes[o].nodeName;if(typeof f=="string"){var c=y.attributes[o].nodeValue;try{c=JSON.parse(y.attributes[o].nodeValue.replace(/'/g,'"'))}catch{c=y.attributes[o].nodeValue}c&&(f=this.attr_prefix+f,typeof l[f]>"u"&&(l[f]=0),l[f]++,this.addNode(s,f,l[f],c))}}}if(y.childNodes&&y.childNodes.length){var v=!0;s&&(v=!1);for(var o=0;o<y.childNodes.length&&v;o++){var b=y.childNodes[o].nodeType;b==3||b==4||b==8||(v=!1)}if(v){s||(s="");for(var o=0;o<y.childNodes.length;o++)s+=y.childNodes[o].nodeValue}else{s||(s={});for(var o=0;o<y.childNodes.length;o++){var f=y.childNodes[o].nodeName;if(typeof f=="string"){var c=this.parseElement(y.childNodes[o]);c&&(typeof l[f]>"u"&&(l[f]=0),l[f]++,this.addNode(s,f,l[f],c))}}}}else s===null&&(s={});return s}};pn.ObjTree.prototype.addNode=function(y,d,s,l){this.__force_array[d]?(s==1&&(y[d]=[]),y[d][y[d].length]=l):s==1?y[d]=l:s==2?y[d]=[y[d],l]:y[d][y[d].length]=l};pn.ObjTree.prototype.writeXML=function(y){var d=this.hash_to_xml(null,y);return this.xmlDecl+d};pn.ObjTree.prototype.hash_to_xml=function(y,d){var s=[],l=[];for(var o in d)if(d.hasOwnProperty(o)){var f=d[o];o.charAt(0)!=this.attr_prefix?typeof f>"u"||f==null?s[s.length]="<"+o+" />":typeof f=="object"&&f.constructor==Array?s[s.length]=this.array_to_xml(o,f):typeof f=="object"?s[s.length]=this.hash_to_xml(o,f):s[s.length]=this.scalar_to_xml(o,f):l[l.length]=" "+o.substring(1)+'="'+this.xml_escape(f)+'"'}var c=l.join(""),v=s.join("");return typeof y>"u"||y==null||(s.length>0?v.match(/\n/)?v="<"+y+c+`>
`+v+"</"+y+`>
`:v="<"+y+c+">"+v+"</"+y+`>
`:v="<"+y+c+` />
`),v};pn.ObjTree.prototype.array_to_xml=function(y,d){for(var s=[],l=0;l<d.length;l++){var o=d[l];typeof o>"u"||o==null?s[s.length]="<"+y+" />":typeof o=="object"&&o.constructor==Array?s[s.length]=this.array_to_xml(y,o):typeof o=="object"?s[s.length]=this.hash_to_xml(y,o):s[s.length]=this.scalar_to_xml(y,o)}return s.join("")};pn.ObjTree.prototype.scalar_to_xml=function(y,d){return y=="#text"?this.xml_escape(d):"<"+y+">"+this.xml_escape(d)+"</"+y+`>
`};pn.ObjTree.prototype.xml_escape=function(y){return y.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Yw=function(y){return new pn.ObjTree().parseXML(y)},Ww=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),df=globalThis&&globalThis.__assign||function(){return df=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},df.apply(this,arguments)},Ru=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},ar;(function(y){y.START="bpmn:startEvent",y.END="bpmn:endEvent",y.GATEWAY="bpmn:exclusiveGateway",y.USER="bpmn:userTask",y.SYSTEM="bpmn:serviceTask",y.FLOW="bpmn:sequenceFlow"})(ar||(ar={}));var ig=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],jv=["properties","startPoint","endPoint","pointsList"];function Pv(y){var d=y?jv.concat(y):jv;return function(s){function l(o){var f={};return typeof o=="string"?o:Array.isArray(o)?o.map(function(c){return l(c)}):(Object.entries(o).forEach(function(c){var v=Ru(c,2),b=v[0],w=v[1];typeof w!="object"?b.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(b)?f[b]=w:f["-"+b]=w:d.includes(b)?f["-"+b]=l(w):f[b]=l(w)}),f)}return l(s)}}function Tu(y){var d={};return Object.entries(y).forEach(function(s){var l=Ru(s,2),o=l[0],f=l[1];o.indexOf("-")===0?d[o.substring(1)]=ku(f):typeof f=="string"?d[o]=f:Object.prototype.toString.call(f)==="[object Object]"?d[o]=Tu(f):Array.isArray(f)?d[o]=f.map(function(c){return Tu(c)}):d[o]=f}),d}function $w(y,d,s){var l=new Map;d.nodes.forEach(function(f){var c,v={"-id":f.id};if(!((c=f.text)===null||c===void 0)&&c.value&&(v["-name"]=f.text.value),f.properties){var b=Pv(s)(f.properties);Object.assign(v,b)}l.set(f.id,v),y[f.type]?Array.isArray(y[f.type])?y[f.type].push(v):y[f.type]=[y[f.type],v]:y[f.type]=v});var o=d.edges.map(function(f){var c,v,b=l.get(f.targetNodeId);b["bpmn:incoming"]?Array.isArray(b["bpmn:incoming"])?b["bpmn:incoming"].push(f.id):b["bpmn:incoming"]=[b["bpmn:incoming"],f.id]:b["bpmn:incoming"]=f.id;var w={"-id":f.id,"-sourceRef":f.sourceNodeId,"-targetRef":f.targetNodeId};if(!((c=f.text)===null||c===void 0)&&c.value&&(w["-name"]=(v=f.text)===null||v===void 0?void 0:v.value),f.properties){var O=Pv(s)(f.properties);Object.assign(w,O)}return w});d.edges.forEach(function(f){var c=l.get(f.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(f.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],f.id]:c["bpmn:outgoing"]=f.id}),y[ar.FLOW]=o}function Kw(y,d){y["bpmndi:BPMNEdge"]=d.edges.map(function(s){var l,o=s.id,f=s.pointsList.map(function(v){var b=v.x,w=v.y;return{"-x":b,"-y":w}}),c={"-id":o+"_di","-bpmnElement":o,"di:waypoint":f};return!((l=s.text)===null||l===void 0)&&l.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),c}),y["bpmndi:BPMNShape"]=d.nodes.map(function(s){var l,o=s.id,f=100,c=80,v=s.x,b=s.y,w=Vr.shapeConfigMap.get(s.type);w&&(f=w.width,c=w.height),v-=f/2,b-=c/2;var O={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":v,"-y":b,"-width":f,"-height":c}};return!((l=s.text)===null||l===void 0)&&l.value&&(O["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),O})}function qw(y){var d=[],s=[],l=y["bpmn:definitions"];if(l){var o=l["bpmn:process"];Object.keys(o).forEach(function(f){if(f.indexOf("bpmn:")===0){var c=o[f];if(f===ar.FLOW){var v=l["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];s=Jw(c,v)}else{var b=l["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];d=d.concat(Zw(c,b,f))}}})}return{nodes:d,edges:s}}function Zw(y,d,s){var l=[];if(Array.isArray(y))y.forEach(function(c){var v;Array.isArray(d)?v=d.find(function(w){return w["-bpmnElement"]===c["-id"]}):v=d;var b=Mv(v,s,c);l.push(b)});else{var o=void 0;Array.isArray(d)?o=d.find(function(c){return c["-bpmnElement"]===y["-id"]}):o=d;var f=Mv(o,s,y);l.push(f)}return l}function Mv(y,d,s){var l=Number(y["dc:Bounds"]["-x"]),o=Number(y["dc:Bounds"]["-y"]),f=s["-name"],c=Vr.shapeConfigMap.get(d);c&&(l+=c.width/2,o+=c.height/2);var v;Object.entries(s).forEach(function(S){var P=Ru(S,2),j=P[0],k=P[1];ig.indexOf(j)===-1&&(v||(v={}),v[j]=k)}),v&&(v=Tu(v));var b;if(f&&(b={x:l,y:o,value:f},y["bpmndi:BPMNLabel"]&&y["bpmndi:BPMNLabel"]["dc:Bounds"])){var w=y["bpmndi:BPMNLabel"]["dc:Bounds"];b.x=Number(w["-x"])+Number(w["-width"])/2,b.y=Number(w["-y"])+Number(w["-height"])/2}var O={id:y["-bpmnElement"],type:d,x:l,y:o,properties:v};return b&&(O.text=b),O}function Jw(y,d){var s=[];if(Array.isArray(y))y.forEach(function(o){var f;Array.isArray(d)?f=d.find(function(c){return c["-bpmnElement"]===o["-id"]}):f=d,s.push(kv(f,o))});else{var l=void 0;Array.isArray(d)?l=d.find(function(o){return o["-bpmnElement"]===y["-id"]}):l=d,s.push(kv(l,y))}return s}function kv(y,d){var s,l=d["-name"];if(l){var o=y["bpmndi:BPMNLabel"]["dc:Bounds"],f=0;l.split(`
`).forEach(function(b){f<b.length&&(f=b.length)}),s={value:l,x:Number(o["-x"])+f*10/2,y:Number(o["-y"])+7}}var c;Object.entries(d).forEach(function(b){var w=Ru(b,2),O=w[0],S=w[1];ig.indexOf(O)===-1&&(c||(c={}),c[O]=S)}),c&&(c=Tu(c));var v={id:d["-id"],type:ar.FLOW,pointsList:y["di:waypoint"].map(function(b){return{x:Number(b["-x"]),y:Number(b["-y"])}}),sourceNodeId:d["-sourceRef"],targetNodeId:d["-targetRef"],properties:c};return s&&(v.text=s),v}var Vr=function(){function y(d){var s=this,l=d.lf;this.adapterOut=function(o,f){var c=df({},s.processAttributes);$w(c,o,f);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};Kw(v,o);var b=s.definitionAttributes;b["bpmn:process"]=c,b["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var w={"bpmn:definitions":b};return w},this.adapterIn=function(o){if(o)return qw(o)},l.adapterIn=function(o){return s.adapterIn(o)},l.adapterOut=function(o,f){return s.adapterOut(o,f)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+Sv()},this.definitionAttributes={"-id":"Definitions_"+Sv(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return y.prototype.setCustomShape=function(d,s){y.shapeConfigMap.set(d,s)},y.pluginName="bpmn-adapter",y.shapeConfigMap=new Map,y}();Vr.shapeConfigMap.set(ar.START,{width:_v.width,height:_v.height});Vr.shapeConfigMap.set(ar.END,{width:Ov.width,height:Ov.height});Vr.shapeConfigMap.set(ar.GATEWAY,{width:wv.width,height:wv.height});Vr.shapeConfigMap.set(ar.SYSTEM,{width:xv.width,height:xv.height});Vr.shapeConfigMap.set(ar.USER,{width:Ev.width,height:Ev.height});(function(y){Ww(d,y);function d(s){var l=y.call(this,s)||this;l.adapterXmlIn=function(f){var c=Yw(f);return l.adapterIn(c)},l.adapterXmlOut=function(f,c){var v=l.adapterOut(f,c);return Vw(v)};var o=s.lf;return o.adapterIn=l.adapterXmlIn,o.adapterOut=l.adapterXmlOut,l}return d.pluginName="bpmnXmlAdapter",d})(Vr);var Tv=globalThis&&globalThis.__assign||function(){return Tv=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Tv.apply(this,arguments)};globalThis&&globalThis.__read;var Xo;(function(y){y.HORIZONTAL="horizontal",y.VERTICAL="vertical"})(Xo||(Xo={}));var Qw=function(y,d,s,l){l===void 0&&(l=0);var o=t1(y,d,s);return o<=l};function Av(y){return y*y}function uf(y,d){return Av(y.x-d.x)+Av(y.y-d.y)}var e1=function(y,d,s){var l=uf(d,s);if(l===0)return uf(y,d);var o=((y.x-d.x)*(s.x-d.x)+(y.y-d.y)*(s.y-d.y))/l;return o=Math.max(0,Math.min(1,o)),uf(y,{x:d.x+o*(s.x-d.x),y:d.y+o*(s.y-d.y)})},t1=function(y,d,s){return Math.sqrt(e1(y,d,s))},n1=function(y){var d=y.x,s=y.y,l=y.width,o=y.height,f={minX:d-l/2,minY:s-o/2,maxX:d+l/2,maxY:s+o/2,x:d,y:s,width:l,height:o,centerX:d,centerY:s};return f},r1=function(y,d){var s;return y.x===d.x?s=Xo.VERTICAL:y.y===d.y&&(s=Xo.HORIZONTAL),s},o1=function(y,d,s){var l=n1(y),o=r1(d,s),f=Math.max(d.x,s.x),c=Math.min(d.x,s.x),v=Math.max(d.y,s.y),b=Math.min(d.y,s.y),w=y.x,O=y.y,S=y.width,P=y.height;if(o===Xo.HORIZONTAL){if(f>=l.maxX&&c<=l.minX)return{startCrossPoint:{x:d.x>s.x?w+S/2:w-S/2,y:d.y},endCrossPoint:{x:d.x>s.x?w-S/2:w+S/2,y:d.y}}}else if(o===Xo.VERTICAL&&v>=l.maxY&&b<=l.minY)return{startCrossPoint:{x:d.x,y:d.y>s.y?O+P/2:O-P/2},endCrossPoint:{x:d.x,y:d.y>s.y?O-P/2:O+P/2}}},i1=function(y,d,s){s===void 0&&(s=0);for(var l=y.x,o=y.y,f=d.pointsList,c=0;c<f.length-1;c++)if(Qw({x:l,y:o},f[c],f[c+1],s)){var v=o1(y,f[c],f[c+1]);if(v)return{crossIndex:c+1,crossPoints:v}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},a1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},Nv=globalThis&&globalThis.__spread||function(){for(var y=[],d=0;d<arguments.length;d++)y=y.concat(a1(arguments[d]));return y},u1=function(){function y(d){var s=d.lf;this._lf=s,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return y.prototype.eventHandler=function(){var d=this;this.dndAdd&&this._lf.on("node:dnd-add",function(s){var l=s.data;d.insetNode(l)}),this.dropAdd&&this._lf.on("node:drop",function(s){for(var l=s.data,o=d._lf.graphModel.edges,f=l.id,c=!0,v=0;v<o.length;v++)if(o[v].sourceNodeId===f||o[v].targetNodeId===f){c=!1;break}c&&d.insetNode(l)})},y.prototype.checkRuleBeforeInsetNode=function(d,s,l,o,f){var c=this._lf.getNodeModelById(d),v=this._lf.getNodeModelById(s),b=c.getAnchorInfo(l),w=v.getAnchorInfo(o),O=c.isAllowConnectedAsSource(f,b,w),S=v.isAllowConnectedAsTarget(f,b,w),P=Le.formateAnchorConnectValidateData(O),j=P.isAllPass,k=P.msg,A=Le.formateAnchorConnectValidateData(S),C=A.isAllPass,z=A.msg;return{isPass:j&&C,sourceMsg:k,targetMsg:z}},y.prototype.insetNode=function(d){for(var s=this,l=this._lf.graphModel.edges,o=this._lf.getNodeModelById(d.id),f=0;f<l.length;f++){var c=i1(o,l[f],this.deviation),v=c.crossIndex,b=c.crossPoints;if(v>=0){var w=l[f],O=w.sourceNodeId,S=w.targetNodeId,P=w.id,j=w.type,k=w.pointsList,A=w.sourceAnchorId,C=w.targetAnchorId,z=xu(k[0]),F=xu(b.startCrossPoint);this._lf.deleteEdge(P);var Z=this.checkRuleBeforeInsetNode(O,S,A,C,d);if(this._lf.addEdge({type:j,sourceNodeId:O,targetNodeId:d.id,startPoint:z,endPoint:F,pointsList:Nv(k.slice(0,v),[b.startCrossPoint])}),this._lf.addEdge({type:j,sourceNodeId:d.id,targetNodeId:S,startPoint:xu(b.endCrossPoint),endPoint:xu(k[k.length-1]),pointsList:Nv([b.endCrossPoint],k.slice(v))}),Z.isPass)break;this._lf.graphModel.eventCenter.emit(Le.EventType.CONNECTION_NOT_ALLOWED,{data:d,msg:Z.targetMsg||Z.sourceMsg}),setTimeout(function(){s._lf.undo()},200);break}}},y.pluginName="insertNodeInPolyline",y}(),s1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},c1=globalThis&&globalThis.__spread||function(){for(var y=[],d=0;d<arguments.length;d++)y=y.concat(s1(arguments[d]));return y},l1=function(){function y(d){var s=this,l=d.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){s.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){s.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){s.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){s.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){s.lf.redo()}}],this.lf=l}return y.prototype.render=function(d,s){this.destroy();var l=this.getControlTool();this.toolEl=l,s.appendChild(l),this.domContainer=s},y.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},y.prototype.addItem=function(d){this.controlItems.push(d)},y.prototype.removeItem=function(d){var s=this.controlItems.findIndex(function(l){return l.key===d});return this.controlItems.splice(s,1)[0]},y.prototype.getControlTool=function(){var d=this,s="lf-control-item",l="lf-control-item disabled",o=document.createElement("div"),f=[];return o.className="lf-control",this.controlItems.forEach(function(c){var v=document.createElement("div"),b=document.createElement("i"),w=document.createElement("span");switch(v.className=l,c.onClick&&(v.onclick=c.onClick.bind(null,d.lf)),c.onMouseEnter&&(v.onmouseenter=c.onMouseEnter.bind(null,d.lf)),c.onMouseLeave&&(v.onmouseleave=c.onMouseLeave.bind(null,d.lf)),b.className=c.iconClass,w.className="lf-control-text",w.title=c.title,w.innerText=c.text,v.append(b,w),c.text){case"上一步":d.lf.on("history:change",function(O){var S=O.data.undoAble;v.className=S?s:l});break;case"下一步":d.lf.on("history:change",function(O){var S=O.data.redoAble;v.className=S?s:l});break;default:v.className=s;break}f.push(v)}),o.append.apply(o,c1(f)),o},y.pluginName="control",y}(),f1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},p1=globalThis&&globalThis.__spread||function(){for(var y=[],d=0;d<arguments.length;d++)y=y.concat(f1(arguments[d]));return y},Si="lf:defaultNodeMenu",ji="lf:defaultEdgeMenu",Pi="lf:defaultGraphMenu",Dv="lf:defaultSelectionMenu",d1=function(){function y(d){var s=this,l=d.lf;this.__menuDOM=document.createElement("ul"),this.lf=l,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){s.setMenuConfig(o)},this.lf.addMenuConfig=function(o){s.addMenuConfig(o)},this.lf.setMenuByType=function(o){s.setMenuByType(o)}}return y.prototype.init=function(){var d=this,s=[{text:"删除",callback:function(f){d.lf.deleteNode(f.id)}},{text:"编辑文本",callback:function(f){d.lf.graphModel.editText(f.id)}},{text:"复制",callback:function(f){d.lf.cloneNode(f.id)}}];this.menuTypeMap.set(Si,s);var l=[{text:"删除",callback:function(f){d.lf.deleteEdge(f.id)}},{text:"编辑文本",callback:function(f){d.lf.graphModel.editText(f.id)}}];this.menuTypeMap.set(ji,l),this.menuTypeMap.set(Pi,[]);var o=[{text:"删除",callback:function(f){d.lf.clearSelectElements(),f.edges.forEach(function(c){return d.lf.deleteEdge(c.id)}),f.nodes.forEach(function(c){return d.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(Dv,o)},y.prototype.render=function(d,s){var l=this;this.__container=s,this.__currentData=null,this.__menuDOM.className="lf-menu",s.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var f=o.target;Array.from(f.classList).indexOf("lf-menu-item")===-1&&Array.from(f.classList).indexOf("lf-menu")===-1;)f=f.parentElement;Array.from(f.classList).indexOf("lf-menu-item")>-1?(f.onclickCallback(l.__currentData),l.__menuDOM.style.display="none",l.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(o){var f=o.data,c=o.position,v=c.domOverlayPosition,b=v.x,w=v.y,O=f.id,S=l.lf.graphModel.getNodeModelById(O),P=[],j=l.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?P=S.menu:j?P=j:P=l.menuTypeMap.get(Si),l.__currentData=f,l.showMenu(b,w,P)}),this.lf.on("edge:contextmenu",function(o){var f=o.data,c=o.position,v=c.domOverlayPosition,b=v.x,w=v.y,O=f.id,S=l.lf.graphModel.getEdgeModelById(O),P=[],j=l.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?P=S.menu:j?P=j:P=l.menuTypeMap.get(ji),l.__currentData=f,l.showMenu(b,w,P)}),this.lf.on("blank:contextmenu",function(o){var f=o.position,c=l.menuTypeMap.get(Pi),v=f.domOverlayPosition,b=v.x,w=v.y;l.showMenu(b,w,c)}),this.lf.on("selection:contextmenu",function(o){var f=o.data,c=o.position,v=l.menuTypeMap.get(Dv),b=c.domOverlayPosition,w=b.x,O=b.y;l.__currentData=f,l.showMenu(w,O,v)}),this.lf.on("node:mousedown",function(){l.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){l.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){l.__menuDOM.style.display="none"})},y.prototype.destroy=function(){var d;(d=this===null||this===void 0?void 0:this.__container)===null||d===void 0||d.removeChild(this.__menuDOM),this.__menuDOM=null},y.prototype.showMenu=function(d,s,l){if(!(!l||!l.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,p1(this.__getMenuDom(l))),o.children.length&&(o.style.display="block",o.style.top=s+"px",o.style.left=d+"px")}},y.prototype.setMenuByType=function(d){!d.type||!d.menu||this.menuTypeMap.set(d.type,d.menu)},y.prototype.__getMenuDom=function(d){var s=[];return d&&d.length>0&&d.forEach(function(l){var o=document.createElement("li");if(l.className?o.className="lf-menu-item "+l.className:o.className="lf-menu-item",l.icon===!0){var f=document.createElement("span");f.className="lf-menu-item-icon",o.appendChild(f)}var c=document.createElement("span");c.className="lf-menu-item-text",l.text&&(c.innerText=l.text),o.appendChild(c),o.onclickCallback=l.callback,s.push(o)}),s},y.prototype.setMenuConfig=function(d){d&&(d.nodeMenu!==void 0&&this.menuTypeMap.set(Si,d.nodeMenu?d.nodeMenu:[]),d.edgeMenu!==void 0&&this.menuTypeMap.set(ji,d.edgeMenu?d.edgeMenu:[]),d.graphMenu!==void 0&&this.menuTypeMap.set(Pi,d.graphMenu?d.graphMenu:[]))},y.prototype.addMenuConfig=function(d){if(d){if(Array.isArray(d.nodeMenu)){var s=this.menuTypeMap.get(Si);this.menuTypeMap.set(Si,s.concat(d.nodeMenu))}if(Array.isArray(d.edgeMenu)){var s=this.menuTypeMap.get(ji);this.menuTypeMap.set(ji,s.concat(d.edgeMenu))}if(Array.isArray(d.graphMenu)){var s=this.menuTypeMap.get(Pi);this.menuTypeMap.set(Pi,s.concat(d.graphMenu))}}},y.prototype.changeMenuItem=function(d,s){if(d==="add")this.addMenuConfig(s);else if(d==="reset")this.setMenuConfig(s);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},y.pluginName="menu",y}();globalThis&&globalThis.__read;var h1=function(){function y(d){var s=this,l=d.lf;this.lf=l,this.lf.setPatternItems=function(o){s.setPatternItems(o)}}return y.prototype.render=function(d,s){var l=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=s;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){l.panelEl.appendChild(l.createDndItem(o))}),s.appendChild(this.panelEl),this.domContainer=s},y.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},y.prototype.setPatternItems=function(d){this.shapeList=d,this.domContainer&&this.render(this.lf,this.domContainer)},y.prototype.createDndItem=function(d){var s=this,l=document.createElement("div");l.className=d.className?"lf-dnd-item "+d.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",d.icon&&(o.style.backgroundImage="url("+d.icon+")"),l.appendChild(o),d.label){var f=document.createElement("div");f.innerText=d.label,f.className="lf-dnd-text",l.appendChild(f)}return l.onmousedown=function(){d.type&&s.lf.dnd.startDrag({type:d.type,properties:d.properties,text:d.text}),d.callback&&d.callback(s.lf,s.domContainer)},l.ondblclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:d})},l.onclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:d})},l.oncontextmenu=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:d})},l},y.pluginName="dndPanel",y}(),y1=function(){function y(d){var s=this,l=d.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(f){var c=s.lf.getPointByClient(f.clientX,f.clientY).domOverlayPosition,v=c.x,b=c.y;s.endPoint={x:v,y:b};var w=s.startPoint,O=w.x,S=w.y,P=s.wrapper.style,j=O,k=S,A=v-O,C=b-S;v<O&&(j=v,A=O-v),b<S&&(k=b,C=S-b),P.left=j+"px",P.top=k+"px",P.width=A+"px",P.height=C+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",s.__draw),document.removeEventListener("mouseup",s.__drawOff),s.wrapper.oncontextmenu=null,s.__domContainer.removeChild(s.wrapper);var f=s.startPoint,c=f.x,v=f.y,b=s.endPoint,w=b.x,O=b.y;if(!(Math.abs(w-c)<10&&Math.abs(O-v)<10)){var S=[Math.min(c,w),Math.min(v,O)],P=[Math.max(c,w),Math.max(v,O)],j=s.lf.graphModel.getAreaElement(S,P,s.isWholeEdge,s.isWholeNode,!0),k=s.lf.graphModel.group;j.forEach(function(A){(!k||!k.getNodeGroup(A.id))&&s.lf.selectElementById(A.id,!0)}),s.lf.emit("selection:selected",j)}},this.lf=l;var o=l.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,l.openSelectionSelect=function(){s.openSelectionSelect()},l.closeSelectionSelect=function(){s.closeSelectionSelect()}}return y.prototype.render=function(d,s){var l=this;this.__domContainer=s,d.on("blank:mousedown",function(o){var f=o.e,c=d.getEditConfig();if(!(!c.stopMoveGraph||l.__disabled)){var v=f.button===2;if(!v){var b=d.getPointByClient(f.clientX,f.clientY).domOverlayPosition,w=b.x,O=b.y;l.startPoint={x:w,y:O},l.endPoint={x:w,y:O};var S=document.createElement("div");S.className="lf-selection-select",S.oncontextmenu=function(j){j.preventDefault()},S.style.top=l.startPoint.y+"px",S.style.left=l.startPoint.x+"px",s.appendChild(S),l.wrapper=S,document.addEventListener("mousemove",l.__draw),document.addEventListener("mouseup",l.__drawOff)}}})},y.prototype.setSelectionSense=function(d,s){d===void 0&&(d=!0),s===void 0&&(s=!0),this.isWholeEdge=d,this.isWholeNode=s},y.prototype.openSelectionSelect=function(){var d=this.lf.getEditConfig().stopMoveGraph;d||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},y.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},y.prototype.open=function(){this.__disabled=!1},y.prototype.close=function(){this.__disabled=!0},y.pluginName="selectionSelect",y}(),v1=globalThis&&globalThis.__values||function(y){var d=typeof Symbol=="function"&&Symbol.iterator,s=d&&y[d],l=0;if(s)return s.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&l>=y.length&&(y=void 0),{value:y&&y[l++],done:!y}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},g1=function(){function y(d){var s=this,l=d.lf,o=d.LogicFlow,f=d.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(c,v){s.setView(),s.isShow||s.createMiniMap(c,v),s.isShow=!0},this.hide=function(){s.isShow&&s.removeMiniMap(),s.isShow=!1},this.reset=function(){s.lf.resetTranslate(),s.lf.resetZoom(),s.hide(),s.show()},this.startDrag=function(c){document.addEventListener("mousemove",s.drag),document.addEventListener("mouseup",s.drop),s.startPosition={x:c.x,y:c.y}},this.moveViewport=function(c,v){var b=s.viewport.style;s.viewPortTop=c,s.viewPortLeft=v,b.top=s.viewPortTop+"px",b.left=s.viewPortLeft+"px"},this.drag=function(c){s.dragging=!0;var v=s.viewPortTop+c.y-s.startPosition.y,b=s.viewPortLeft+c.x-s.startPosition.x;s.moveViewport(v,b),s.startPosition={x:c.x,y:c.y};var w=(s.viewPortLeft+s.viewPortWidth/2)/s.viewPortScale,O=(s.viewPortTop+s.viewPortHeight/2)/s.viewPortScale;s.lf.focusOn({coordinate:{x:w+s.resetDataX,y:O+s.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",s.drag),document.removeEventListener("mouseup",s.drop);var c=s.viewPortTop,v=s.viewPortLeft;s.viewPortLeft>s.width&&(v=s.width-s.viewPortWidth),s.viewPortTop>s.height&&(c=s.height-s.viewPortHeight),s.viewPortLeft<-s.width&&(v=0),s.viewPortTop<-s.height&&(c=0),s.moveViewport(c,v)},this.mapClick=function(c){if(s.dragging)s.dragging=!1;else{var v=c.layerX,b=c.layerY,w=v,O=b,S=s.lf.getGraphRawData(),P=s.getBounds(S),j=P.left,k=P.top,A=j+w/s.viewPortScale,C=k+O/s.viewPortScale;s.lf.focusOn({coordinate:{x:A,y:C}})}},this.lf=l,f&&f.MiniMap&&this.setOption(f),this.miniMapWidth=l.graphModel.width,this.miniMapHeight=l.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return y.prototype.render=function(d,s){var l=this;this.container=s,this.lf.on("history:change",function(){l.isShow&&l.setView()}),this.lf.on("graph:transform",Ow(function(){l.isShow&&!l.dragging&&l.setView()},300))},y.prototype.init=function(d){this.disabledPlugins=this.disabledPlugins.concat(d.disabledPlugins||[])},y.prototype.setOption=function(d){var s=d.MiniMap,l=s.width,o=l===void 0?150:l,f=s.height,c=f===void 0?220:f,v=s.isShowHeader,b=v===void 0?!0:v,w=s.isShowCloseIcon,O=w===void 0?!0:w,S=s.leftPosition,P=S===void 0?0:S,j=s.topPosition,k=j===void 0?0:j,A=s.rightPosition,C=s.bottomPosition;this.width=o,this.height=c,this.isShowHeader=b,this.isShowCloseIcon=O,this.viewPortWidth=o,this.leftPosition=P,this.topPosition=k,this.rightPosition=A,this.bottomPosition=C},y.prototype.initMiniMap=function(){var d=document.createElement("div");d.className="lf-mini-map-graph",d.style.width=this.width+4+"px",d.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:d,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(s){return s},this.lfMap.adapterOut=function(s){return s},this.miniMapWrap=d,this.createViewPort(),d.addEventListener("click",this.mapClick)},y.prototype.createMiniMap=function(d,s){var l=document.createElement("div");l.appendChild(this.miniMapWrap),typeof d<"u"||typeof s<"u"?(l.style.left=(d||0)+"px",l.style.top=(s||0)+"px"):(typeof this.rightPosition<"u"?l.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(l.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?l.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(l.style.top=this.topPosition+"px")),l.style.position="absolute",l.className="lf-mini-map",this.isShowCloseIcon||l.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||l.classList.add("lf-mini-map-no-header"),this.container.appendChild(l),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=y.headerTitle,l.appendChild(o);var f=document.createElement("span");f.className="lf-mini-map-close",f.addEventListener("click",this.hide),l.appendChild(f),this.miniMapContainer=l},y.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},y.prototype.getBounds=function(d){var s=0,l=this.miniMapWidth,o=0,f=this.miniMapHeight,c=d.nodes;return c&&c.length>0&&c.forEach(function(v){var b=v.x,w=v.y,O=v.width,S=O===void 0?200:O,P=v.height,j=P===void 0?200:P,k=b-S/2,A=b+S/2,C=w-j/2,z=w+j/2;s=k<s?k:s,l=A>l?A:l,o=C<o?C:o,f=z>f?z:f}),{left:s,top:o,bottom:f,right:l}},y.prototype.resetData=function(d){var s=d.nodes,l=d.edges,o=0,f=0;return s&&s.length>0&&(s.forEach(function(c){var v=c.x,b=c.y,w=c.width,O=w===void 0?200:w,S=c.height,P=S===void 0?200:S,j=v-O/2,k=b-P/2;o=j<o?j:o,f=k<f?k:f}),(o<0||f<0)&&(this.resetDataX=o,this.resetDataY=f,s.forEach(function(c){c.x=c.x-o,c.y=c.y-f,c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-f)}),l.forEach(function(c){c.startPoint&&(c.startPoint.x=c.startPoint.x-o,c.startPoint.y=c.startPoint.y-f),c.endPoint&&(c.endPoint.x=c.endPoint.x-o,c.endPoint.y=c.endPoint.y-f),c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-f),c.pointsList&&c.pointsList.forEach(function(v){v.x=v.x-o,v.y=v.y-f})}))),d},y.prototype.setView=function(){var d,s,l=this.lf.getGraphRawData(),o=this.resetData(l),f=this.lf.viewMap,c=this.lf.graphModel.modelMap,v=this.lfMap.viewMap;try{for(var b=v1(f.keys()),w=b.next();!w.done;w=b.next()){var O=w.value;v.has(O)||(this.lfMap.setView(O,f.get(O)),this.lfMap.graphModel.modelMap.set(O,c.get(O)))}}catch(oe){d={error:oe}}finally{try{w&&!w.done&&(s=b.return)&&s.call(b)}finally{if(d)throw d.error}}this.lfMap.render(o);var S=this.getBounds(o),P=S.left,j=S.top,k=S.right,A=S.bottom,C=this.width/(k-P),z=this.height/(A-j),F=this.miniMapWrap.firstChild.style,Z=Math.min(C,z);F.transform="matrix("+Z+", 0, 0, "+Z+", 0, 0)",F.transformOrigin="left top",F.height=A-Math.min(j,0)+"px",F.width=k-Math.min(P,0)+"px",this.viewPortScale=Z,this.setViewPort(Z,{left:P,top:j,right:k,bottom:A})},y.prototype.setViewPort=function(d,s){var l=s.left,o=s.right;s.top,s.bottom;var f=this.viewport.style;f.width=this.viewPortWidth+"px",f.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var c=this.lf.getTransform(),v=c.TRANSLATE_X,b=c.TRANSLATE_Y,w=c.SCALE_X,O=c.SCALE_Y,S=o-l,P=this.width/(S/this.lf.graphModel.width),j=this.width*(P/this.width),k=this.lf.graphModel.width/this.lf.graphModel.height,A=j/k,C=this.lf.getGraphRawData(),z=this.getBounds(C),F=z.left,Z=z.top,oe=F,q=Z;oe+=v/w,q+=b/O,this.viewPortTop=q>0?0:-q*d,this.viewPortLeft=oe>0?0:-oe*d,this.viewPortWidth=j,this.viewPortHeight=A,f.top=this.viewPortTop+"px",f.left=this.viewPortLeft+"px",f.width=j/w+"px",f.height=A/O+"px"},y.prototype.createViewPort=function(){var d=document.createElement("div");d.className="lf-minimap-viewport",d.addEventListener("mousedown",this.startDrag),this.viewport=d},y.pluginName="miniMap",y.width=150,y.height=220,y.viewPortWidth=150,y.viewPortHeight=75,y.isShowHeader=!0,y.isShowCloseIcon=!0,y.leftPosition=0,y.topPosition=0,y.rightPosition=null,y.bottomPosition=null,y.headerTitle="导航",y}();function m1(y){if(y.length<=1)return!1;for(var d=0,s=y.length-1;d!==s&&d+1!==s&&s-1!==d;)d++,s--;return d===s?[--d,s]:[d,s]}var ag=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Bo=globalThis&&globalThis.__assign||function(){return Bo=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Bo.apply(this,arguments)},Er=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f};(function(y){ag(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.pointFilter=function(s){for(var l=s,o=1;o<l.length-1;){var f=Er(l[o-1],2),c=f[0],v=f[1],b=Er(l[o],2),w=b[0],O=b[1],S=Er(l[o+1],2),P=S[0],j=S[1];c===w&&w===P||v===O&&O===j?l.splice(o,1):o++}return l},d.prototype.getEdge=function(){var s=this.props.model,l=s.points,o=s.isAnimation,f=s.arrowConfig,c=s.radius,v=c===void 0?5:c,b=s.getEdgeStyle(),w=s.getEdgeAnimationStyle(),O=this.pointFilter(l.split(" ").map(function(Me){return Me.split(",").map(function(Re){return Number(Re)})})),S=m1(O);if(S){var P=Er(S,2),j=P[0],k=P[1],A=O[j],C=O[k],z=A.some(function(Me,Re){return Me===C[Re]});if(!z){var F=(C[1]-A[1])/2,Z=[C[0],C[1]-F],oe=[A[0],A[1]+F];O.splice(j+1,0,oe,Z)}}for(var q=Er(O[0],2),R=q[0],Y=q[1],I="M"+R+" "+Y,D=1;D<O.length-1;D++){var G=Er(O[D-1],2),B=G[0],H=G[1],Q=Er(O[D],2),le=Q[0],se=Q[1],ye=Er(O[D+1],2),xe=ye[0],ve=ye[1];if(le===B&&se!==H){var ae=se>H?se-v:se+v;I=I+" L "+le+" "+ae}if(se===H&&le!==B){var he=le>B?le-v:le+v;I=I+" L "+he+" "+se}if(I=I+" Q "+le+" "+se,le===xe&&se!==ve){var ae=se>ve?se-v:se+v;I=I+" "+le+" "+ae}if(se===ve&&le!==xe){var he=le>xe?le-v:le+v;I=I+" "+he+" "+se}}var ge=Er(O[O.length-1],2),Ee=ge[0],Ie=ge[1];I=I+" L "+Ee+" "+Ie;var Ye=Bo(Bo(Bo({d:I,style:o?w:{}},b),f),{fill:"none"});return Le.h("path",Bo({d:I},Ye))},d})(Le.PolylineEdge);(function(y){ag(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d})(Le.PolylineEdgeModel);var Of,Vt,ug,ao,Cv,sg,hf,cg={},lg=[],b1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,wf=Array.isArray;function Ur(y,d){for(var s in d)y[s]=d[s];return y}function fg(y){var d=y.parentNode;d&&d.removeChild(y)}function Ni(y,d,s){var l,o,f,c={};for(f in d)f=="key"?l=d[f]:f=="ref"?o=d[f]:c[f]=d[f];if(arguments.length>2&&(c.children=arguments.length>3?Of.call(arguments,2):s),typeof y=="function"&&y.defaultProps!=null)for(f in y.defaultProps)c[f]===void 0&&(c[f]=y.defaultProps[f]);return Su(y,c,l,o,null)}function Su(y,d,s,l,o){var f={type:y,props:d,key:s,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++ug};return o==null&&Vt.vnode!=null&&Vt.vnode(f),f}function xf(y){return y.children}function Fo(y,d){this.props=y,this.context=d}function Ci(y,d){if(d==null)return y.__?Ci(y.__,y.__.__k.indexOf(y)+1):null;for(var s;d<y.__k.length;d++)if((s=y.__k[d])!=null&&s.__e!=null)return s.__e;return typeof y.type=="function"?Ci(y):null}function pg(y){var d,s;if((y=y.__)!=null&&y.__c!=null){for(y.__e=y.__c.base=null,d=0;d<y.__k.length;d++)if((s=y.__k[d])!=null&&s.__e!=null){y.__e=y.__c.base=s.__e;break}return pg(y)}}function Rv(y){(!y.__d&&(y.__d=!0)&&ao.push(y)&&!Au.__r++||Cv!==Vt.debounceRendering)&&((Cv=Vt.debounceRendering)||sg)(Au)}function Au(){var y,d,s,l,o,f,c,v;for(ao.sort(hf);y=ao.shift();)y.__d&&(d=ao.length,l=void 0,o=void 0,c=(f=(s=y).__v).__e,(v=s.__P)&&(l=[],(o=Ur({},f)).__v=f.__v+1,gg(v,f,o,s.__n,v.ownerSVGElement!==void 0,f.__h!=null?[c]:null,l,c??Ci(f),f.__h),O1(l,f),f.__e!=c&&pg(f)),ao.length>d&&ao.sort(hf));Au.__r=0}function dg(y,d,s,l,o,f,c,v,b,w){var O,S,P,j,k,A,C,z=l&&l.__k||lg,F=z.length;for(s.__k=[],O=0;O<d.length;O++)if((j=s.__k[O]=(j=d[O])==null||typeof j=="boolean"||typeof j=="function"?null:typeof j=="string"||typeof j=="number"||typeof j=="bigint"?Su(null,j,null,null,j):wf(j)?Su(xf,{children:j},null,null,null):j.__b>0?Su(j.type,j.props,j.key,j.ref?j.ref:null,j.__v):j)!=null){if(j.__=s,j.__b=s.__b+1,(P=z[O])===null||P&&j.key==P.key&&j.type===P.type)z[O]=void 0;else for(S=0;S<F;S++){if((P=z[S])&&j.key==P.key&&j.type===P.type){z[S]=void 0;break}P=null}gg(y,j,P=P||cg,o,f,c,v,b,w),k=j.__e,(S=j.ref)&&P.ref!=S&&(C||(C=[]),P.ref&&C.push(P.ref,null,j),C.push(S,j.__c||k,j)),k!=null?(A==null&&(A=k),typeof j.type=="function"&&j.__k===P.__k?j.__d=b=hg(j,b,y):b=yg(y,j,P,z,k,b),typeof s.type=="function"&&(s.__d=b)):b&&P.__e==b&&b.parentNode!=y&&(b=Ci(P))}for(s.__e=A,O=F;O--;)z[O]!=null&&(typeof s.type=="function"&&z[O].__e!=null&&z[O].__e==s.__d&&(s.__d=vg(l).nextSibling),bg(z[O],z[O]));if(C)for(O=0;O<C.length;O++)mg(C[O],C[++O],C[++O])}function hg(y,d,s){for(var l,o=y.__k,f=0;o&&f<o.length;f++)(l=o[f])&&(l.__=y,d=typeof l.type=="function"?hg(l,d,s):yg(s,l,l,o,l.__e,d));return d}function yg(y,d,s,l,o,f){var c,v,b;if(d.__d!==void 0)c=d.__d,d.__d=void 0;else if(s==null||o!=f||o.parentNode==null)e:if(f==null||f.parentNode!==y)y.appendChild(o),c=null;else{for(v=f,b=0;(v=v.nextSibling)&&b<l.length;b+=1)if(v==o)break e;y.insertBefore(o,f),c=f}return c!==void 0?c:o.nextSibling}function vg(y){var d,s,l;if(y.type==null||typeof y.type=="string")return y.__e;if(y.__k){for(d=y.__k.length-1;d>=0;d--)if((s=y.__k[d])&&(l=vg(s)))return l}return null}function _1(y,d,s,l,o){var f;for(f in s)f==="children"||f==="key"||f in d||Nu(y,f,null,s[f],l);for(f in d)o&&typeof d[f]!="function"||f==="children"||f==="key"||f==="value"||f==="checked"||s[f]===d[f]||Nu(y,f,d[f],s[f],l)}function Iv(y,d,s){d[0]==="-"?y.setProperty(d,s??""):y[d]=s==null?"":typeof s!="number"||b1.test(d)?s:s+"px"}function Nu(y,d,s,l,o){var f;e:if(d==="style")if(typeof s=="string")y.style.cssText=s;else{if(typeof l=="string"&&(y.style.cssText=l=""),l)for(d in l)s&&d in s||Iv(y.style,d,"");if(s)for(d in s)l&&s[d]===l[d]||Iv(y.style,d,s[d])}else if(d[0]==="o"&&d[1]==="n")f=d!==(d=d.replace(/Capture$/,"")),d=d.toLowerCase()in y?d.toLowerCase().slice(2):d.slice(2),y.l||(y.l={}),y.l[d+f]=s,s?l||y.addEventListener(d,f?zv:Lv,f):y.removeEventListener(d,f?zv:Lv,f);else if(d!=="dangerouslySetInnerHTML"){if(o)d=d.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(d!=="width"&&d!=="height"&&d!=="href"&&d!=="list"&&d!=="form"&&d!=="tabIndex"&&d!=="download"&&d!=="rowSpan"&&d!=="colSpan"&&d in y)try{y[d]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&d[4]!=="-"?y.removeAttribute(d):y.setAttribute(d,s))}}function Lv(y){return this.l[y.type+!1](Vt.event?Vt.event(y):y)}function zv(y){return this.l[y.type+!0](Vt.event?Vt.event(y):y)}function gg(y,d,s,l,o,f,c,v,b){var w,O,S,P,j,k,A,C,z,F,Z,oe,q,R,Y,I=d.type;if(d.constructor!==void 0)return null;s.__h!=null&&(b=s.__h,v=d.__e=s.__e,d.__h=null,f=[v]),(w=Vt.__b)&&w(d);try{e:if(typeof I=="function"){if(C=d.props,z=(w=I.contextType)&&l[w.__c],F=w?z?z.props.value:w.__:l,s.__c?A=(O=d.__c=s.__c).__=O.__E:("prototype"in I&&I.prototype.render?d.__c=O=new I(C,F):(d.__c=O=new Fo(C,F),O.constructor=I,O.render=x1),z&&z.sub(O),O.props=C,O.state||(O.state={}),O.context=F,O.__n=l,S=O.__d=!0,O.__h=[],O._sb=[]),O.__s==null&&(O.__s=O.state),I.getDerivedStateFromProps!=null&&(O.__s==O.state&&(O.__s=Ur({},O.__s)),Ur(O.__s,I.getDerivedStateFromProps(C,O.__s))),P=O.props,j=O.state,O.__v=d,S)I.getDerivedStateFromProps==null&&O.componentWillMount!=null&&O.componentWillMount(),O.componentDidMount!=null&&O.__h.push(O.componentDidMount);else{if(I.getDerivedStateFromProps==null&&C!==P&&O.componentWillReceiveProps!=null&&O.componentWillReceiveProps(C,F),!O.__e&&O.shouldComponentUpdate!=null&&O.shouldComponentUpdate(C,O.__s,F)===!1||d.__v===s.__v){for(d.__v!==s.__v&&(O.props=C,O.state=O.__s,O.__d=!1),O.__e=!1,d.__e=s.__e,d.__k=s.__k,d.__k.forEach(function(D){D&&(D.__=d)}),Z=0;Z<O._sb.length;Z++)O.__h.push(O._sb[Z]);O._sb=[],O.__h.length&&c.push(O);break e}O.componentWillUpdate!=null&&O.componentWillUpdate(C,O.__s,F),O.componentDidUpdate!=null&&O.__h.push(function(){O.componentDidUpdate(P,j,k)})}if(O.context=F,O.props=C,O.__P=y,oe=Vt.__r,q=0,"prototype"in I&&I.prototype.render){for(O.state=O.__s,O.__d=!1,oe&&oe(d),w=O.render(O.props,O.state,O.context),R=0;R<O._sb.length;R++)O.__h.push(O._sb[R]);O._sb=[]}else do O.__d=!1,oe&&oe(d),w=O.render(O.props,O.state,O.context),O.state=O.__s;while(O.__d&&++q<25);O.state=O.__s,O.getChildContext!=null&&(l=Ur(Ur({},l),O.getChildContext())),S||O.getSnapshotBeforeUpdate==null||(k=O.getSnapshotBeforeUpdate(P,j)),dg(y,wf(Y=w!=null&&w.type===xf&&w.key==null?w.props.children:w)?Y:[Y],d,s,l,o,f,c,v,b),O.base=d.__e,d.__h=null,O.__h.length&&c.push(O),A&&(O.__E=O.__=null),O.__e=!1}else f==null&&d.__v===s.__v?(d.__k=s.__k,d.__e=s.__e):d.__e=w1(s.__e,d,s,l,o,f,c,b);(w=Vt.diffed)&&w(d)}catch(D){d.__v=null,(b||f!=null)&&(d.__e=v,d.__h=!!b,f[f.indexOf(v)]=null),Vt.__e(D,d,s)}}function O1(y,d){Vt.__c&&Vt.__c(d,y),y.some(function(s){try{y=s.__h,s.__h=[],y.some(function(l){l.call(s)})}catch(l){Vt.__e(l,s.__v)}})}function w1(y,d,s,l,o,f,c,v){var b,w,O,S=s.props,P=d.props,j=d.type,k=0;if(j==="svg"&&(o=!0),f!=null){for(;k<f.length;k++)if((b=f[k])&&"setAttribute"in b==!!j&&(j?b.localName===j:b.nodeType===3)){y=b,f[k]=null;break}}if(y==null){if(j===null)return document.createTextNode(P);y=o?document.createElementNS("http://www.w3.org/2000/svg",j):document.createElement(j,P.is&&P),f=null,v=!1}if(j===null)S===P||v&&y.data===P||(y.data=P);else{if(f=f&&Of.call(y.childNodes),w=(S=s.props||cg).dangerouslySetInnerHTML,O=P.dangerouslySetInnerHTML,!v){if(f!=null)for(S={},k=0;k<y.attributes.length;k++)S[y.attributes[k].name]=y.attributes[k].value;(O||w)&&(O&&(w&&O.__html==w.__html||O.__html===y.innerHTML)||(y.innerHTML=O&&O.__html||""))}if(_1(y,P,S,o,v),O)d.__k=[];else if(dg(y,wf(k=d.props.children)?k:[k],d,s,l,o&&j!=="foreignObject",f,c,f?f[0]:s.__k&&Ci(s,0),v),f!=null)for(k=f.length;k--;)f[k]!=null&&fg(f[k]);v||("value"in P&&(k=P.value)!==void 0&&(k!==y.value||j==="progress"&&!k||j==="option"&&k!==S.value)&&Nu(y,"value",k,S.value,!1),"checked"in P&&(k=P.checked)!==void 0&&k!==y.checked&&Nu(y,"checked",k,S.checked,!1))}return y}function mg(y,d,s){try{typeof y=="function"?y(d):y.current=d}catch(l){Vt.__e(l,s)}}function bg(y,d,s){var l,o;if(Vt.unmount&&Vt.unmount(y),(l=y.ref)&&(l.current&&l.current!==y.__e||mg(l,null,d)),(l=y.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(f){Vt.__e(f,d)}l.base=l.__P=null,y.__c=void 0}if(l=y.__k)for(o=0;o<l.length;o++)l[o]&&bg(l[o],d,s||typeof y.type!="function");s||y.__e==null||fg(y.__e),y.__=y.__e=y.__d=void 0}function x1(y,d,s){return this.constructor(y,s)}Of=lg.slice,Vt={__e:function(y,d,s,l){for(var o,f,c;d=d.__;)if((o=d.__c)&&!o.__)try{if((f=o.constructor)&&f.getDerivedStateFromError!=null&&(o.setState(f.getDerivedStateFromError(y)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(y,l||{}),c=o.__d),c)return o.__E=o}catch(v){y=v}throw y}},ug=0,Fo.prototype.setState=function(y,d){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ur({},this.state),typeof y=="function"&&(y=y(Ur({},s),this.props)),y&&Ur(s,y),y!=null&&this.__v&&(d&&this._sb.push(d),Rv(this))},Fo.prototype.forceUpdate=function(y){this.__v&&(this.__e=!0,y&&this.__h.push(y),Rv(this))},Fo.prototype.render=xf,ao=[],sg=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hf=function(y,d){return y.__v.__b-d.__v.__b},Au.__r=0;var Di=globalThis&&globalThis.__assign||function(){return Di=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Di.apply(this,arguments)};function Ef(y){var d=y.x,s=y.y,l=y.width,o=y.height,f=y.radius,c=y.className,v=d-l/2,b=s-o/2,w=Di(Di({width:10,height:10,cx:0,cy:0,rx:f||0,ry:f||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},y),{x:v,y:b});return Le.h("rect",Di({},w))}Ef.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Go;(function(y){y.NODE="node",y.CIRCLE_NODE="circle-node",y.POLYGON_NODE="polygon-node",y.RECT_NODE="rect-node",y.HTML_NODE="html-node",y.TEXT_NODE="text-node",y.ELLIPSE_NODE="ellipse-node",y.DIAMOND_NODE="diamond-node",y.EDGE="edge",y.LINE_EDGE="line-edge",y.POLYLINE_EDGE="polyline-edge",y.BEZIER_EDGE="bezier-edge",y.GRAPH="graph"})(Go||(Go={}));function ju(y){var d=y.x,s=y.y,l=y.width,o=y.height;return{minX:d-l/2,minY:s-o/2,maxX:d+l/2,maxY:s+o/2}}function Bv(y){var d=ju(y),s=y.radius,l=d.minX,o=d.minY,f=d.maxX,c=d.maxY;return[{x:l+s,y:o+s},{x:f-s,y:o+s},{x:f-s,y:c-s},{x:l+s,y:c-s}]}function Gv(y){var d=y.point,s=y.beforeNode,l=y.afterNode,o=d.x,f=d.y,c={x:o,y:f},v=s.radius,b=ju(s),w=ju(l);if(o===b.minX){c.x=w.minX;var O=(f-s.y)/(s.height/2-v);O?c.y=l.y+(l.height/2-v)*O:c.y=l.y}else if(o===b.maxX){c.x=w.maxX;var O=(f-s.y)/(s.height/2-v);O?c.y=l.y+(l.height/2-v)*O:c.y=l.y}else if(f===b.minY){c.y=w.minY;var O=(o-s.x)/(s.width/2-v);O?c.x=l.x+(l.width/2-v)*O:c.x=l.x}else if(f===b.maxY){c.y=w.maxY;var O=(o-s.x)/(s.width/2-v);O?c.x=l.x+(l.width/2-v)*O:c.x=l.x}else{var S=Bv(s),P=Bv(l),j=ju(s),k=j.minX,A=j.minY,C=j.maxX,z=j.maxY,F=-1;if(o-k<v&&f-A<v?F=0:C-o<v&&f-A<v?F=1:C-o<v&&z-f<v?F=2:o-k<v&&A-f<v&&(F=3),F>-1){var Z=Math.atan2(f-S[F].y,o-S[F].x);c.x=P[F].x+v*Math.cos(Z),c.y=P[F].y+v*Math.sin(Z)}}return c}function Hv(y){var d=y.point,s=y.beforeNode,l=y.afterNode,o=l.rx,f=l.ry,c=d,v=(d.y-s.y)/(d.x-s.x),b=o,w=f,O,S;return v>=1/0?(O=0,S=w):v<=-1/0?(O=0,S=-w):d.x-s.x>0?(O=b*w/Math.sqrt(w*w+b*b*v*v),S=b*w*v/Math.sqrt(w*w+b*b*v*v)):(O=-(b*w)/Math.sqrt(w*w+b*b*v*v),S=-(b*w*v)/Math.sqrt(w*w+b*b*v*v)),c={x:O+l.x,y:S+l.y},c}function Fv(y){var d=y.point,s=y.beforeNode,l=y.afterNode,o=d,f,c,v=d.x-s.x,b=d.y-s.y,w=s.rx,O=s.ry,S=Math.sqrt((w-Math.abs(v))*(w-Math.abs(v))+b*b)/Math.sqrt(w*w+O*O),P=l.rx,j=l.ry,k=Math.sqrt((P*P+j*j)*S*S*(P*P/(P*P+j*j))),A=k*(j/P);return v>=0?f=P-k:f=k-P,b>0?c=A:c=-A,o={x:f+l.x,y:c+l.y},o}var E1=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),uo=globalThis&&globalThis.__assign||function(){return uo=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},uo.apply(this,arguments)},S1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},j1=Le.LogicFlowUtil.StepDrag,P1=function(y){E1(d,y);function d(s){var l=y.call(this)||this;return l.updatePosition=function(o){var f=o.deltaX,c=o.deltaY,v=l.nodeModel,b=v.x,w=v.y;l.nodeModel.x=b+f/2,l.nodeModel.y=w+c/2,l.nodeModel.moveText(f/2,c/2)},l.getResize=function(o){var f=o.index,c=o.deltaX,v=o.deltaY,b=o.width,w=o.height,O=o.PCTResizeInfo,S=o.pct,P=S===void 0?1:S,j={width:b,height:w,deltaX:c,deltaY:v};if(O){var k=4,A=0,C=0;switch(f){case 0:C=(c*-1-v)/k;break;case 1:C=(c-v)/k;break;case 2:C=(c+v)/k;break;case 3:C=(c*-1+v)/k;break}C!==0&&(A=Math.round(C/O.ResizeBasis.basisHeight*1e5)/1e3),O.ResizePCT.widthPCT=Math.max(Math.min(O.ResizePCT.widthPCT+A,O.ScaleLimit.maxScaleLimit),O.ScaleLimit.minScaleLimit),O.ResizePCT.hightPCT=Math.max(Math.min(O.ResizePCT.hightPCT+A,O.ScaleLimit.maxScaleLimit),O.ScaleLimit.minScaleLimit);var z=Math.round(O.ResizePCT.widthPCT*O.ResizeBasis.basisWidth/100),F=Math.round(O.ResizePCT.hightPCT*O.ResizeBasis.basisHeight/100);switch(f){case 0:c=b-z,v=w-F;break;case 1:c=z-b,v=w-F;break;case 2:c=z-b,v=F-w;break;case 3:c=b-z,v=F-w;break}return j.width=z,j.height=F,j.deltaX=c/P,j.deltaY=v/P,j}switch(f){case 0:j.width=b-c*P,j.height=w-v*P;break;case 1:j.width=b+c*P,j.height=w-v*P;break;case 2:j.width=b+c*P,j.height=w+v*P;break;case 3:j.width=b-c*P,j.height=w+v*P;break}return j},l.updateRect=function(o){var f=o.deltaX,c=o.deltaY,v=l.nodeModel,b=v.id,w=v.x,O=v.y,S=v.width,P=v.height,j=v.radius,k=v.PCTResizeInfo,A=l.index,C=l.getResize({index:A,deltaX:f,deltaY:c,width:S,height:P,PCTResizeInfo:k,pct:1}),z=l.nodeModel,F=z.minWidth,Z=z.minHeight,oe=z.maxWidth,q=z.maxHeight;if(C.width<F||C.width>oe||C.height<Z||C.height>q){l.dragHandler.cancelDrag();return}l.updatePosition({deltaX:C.deltaX,deltaY:C.deltaY}),l.nodeModel.width=C.width,l.nodeModel.height=C.height,l.nodeModel.setProperties({nodeSize:{width:C.width,height:C.height}});var R=l.getNodeEdges(b),Y={x:w,y:O,width:S,height:P,radius:j},I={x:l.nodeModel.x,y:l.nodeModel.y,width:l.nodeModel.width,height:l.nodeModel.height,radius:j},D={point:"",beforeNode:Y,afterNode:I},G;R.sourceEdges.forEach(function(B){D.point=B.startPoint,G=Gv(D),B.updateStartPoint(G)}),R.targetEdges.forEach(function(B){D.point=B.endPoint,G=Gv(D),B.updateEndPoint(G)}),l.eventEmit({beforeNode:Y,afterNode:I})},l.updateEllipse=function(o){var f=o.deltaX,c=o.deltaY,v=l.nodeModel,b=v.id,w=v.rx,O=v.ry,S=v.x,P=v.y,j=v.PCTResizeInfo,k=l.index,A=w,C=O,z=l.getResize({index:k,deltaX:f,deltaY:c,width:A,height:C,PCTResizeInfo:j,pct:1/2}),F=l.nodeModel,Z=F.minWidth,oe=F.minHeight,q=F.maxWidth,R=F.maxHeight;if(z.width<Z/2||z.width>q/2||z.height<oe/2||z.height>R/2){l.dragHandler.cancelDrag();return}l.updatePosition({deltaX:z.deltaX,deltaY:z.deltaY}),l.nodeModel.rx=z.width,l.nodeModel.ry=z.height,l.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}});var Y=l.getNodeEdges(b),I={x:S,y:P},D={rx:z.width,ry:z.height,x:l.nodeModel.x,y:l.nodeModel.y},G={point:{},beforeNode:I,afterNode:D},B;Y.sourceEdges.forEach(function(H){G.point=H.startPoint,B=Hv(G),H.updateStartPoint(B)}),Y.targetEdges.forEach(function(H){G.point=H.endPoint,B=Hv(G),H.updateEndPoint(B)}),l.eventEmit({beforeNode:uo(uo({},I),{rx:w,ry:O}),afterNode:D})},l.updateDiamond=function(o){var f=o.deltaX,c=o.deltaY,v=l.nodeModel,b=v.id,w=v.rx,O=v.ry,S=v.x,P=v.y,j=v.PCTResizeInfo,k=l.index,A=w,C=O,z=l.getResize({index:k,deltaX:f,deltaY:c,width:A,height:C,PCTResizeInfo:j,pct:1/2}),F=l.nodeModel,Z=F.minWidth,oe=F.minHeight,q=F.maxWidth,R=F.maxHeight;if(z.width<Z/2||z.width>q/2||z.height<oe/2||z.height>R/2){l.dragHandler.cancelDrag();return}l.updatePosition({deltaX:z.deltaX,deltaY:z.deltaY}),l.nodeModel.rx=z.width,l.nodeModel.ry=z.height,l.nodeModel.setProperties({nodeSize:{rx:z.width,ry:z.height}});var Y={x:S,y:P,rx:w,ry:O},I={rx:z.width,ry:z.height,x:l.nodeModel.x,y:l.nodeModel.y},D={point:{},beforeNode:Y,afterNode:I},G,B=l.getNodeEdges(b);B.sourceEdges.forEach(function(H){D.point=H.startPoint,G=Fv(D),H.updateStartPoint(G)}),B.targetEdges.forEach(function(H){D.point=H.endPoint,G=Fv(D),H.updateEndPoint(G)}),l.eventEmit({beforeNode:Y,afterNode:I})},l.eventEmit=function(o){var f=o.beforeNode,c=o.afterNode,v=l.nodeModel,b=v.id,w=v.modelType,O=v.type,S=uo({id:b,modelType:w,type:O},f),P=uo({id:b,modelType:w,type:O},c);l.graphModel.eventCenter.emit("node:resize",{oldNodeSize:S,newNodeSize:P})},l.onDragging=function(o){var f,c=o.deltaX,v=o.deltaY,b=l.graphModel.transformModel,w=l.nodeModel.modelType;f=S1(b.fixDeltaXY(c,v),2),c=f[0],v=f[1],w===Go.RECT_NODE||w===Go.HTML_NODE?l.updateRect({deltaX:c,deltaY:v}):w===Go.ELLIPSE_NODE?l.updateEllipse({deltaX:c,deltaY:v}):w===Go.DIAMOND_NODE&&l.updateDiamond({deltaX:c,deltaY:v})},l.onDragEnd=function(){var o=l.graphModel.gridSize,f=o===void 0?1:o,c=f*Math.round(l.nodeModel.x/f),v=f*Math.round(l.nodeModel.y/f);l.nodeModel.moveTo(c,v)},l.index=s.index,l.nodeModel=s.model,l.graphModel=s.graphModel,l.state={},l.dragHandler=new j1({onDragging:l.onDragging,onDragEnd:l.onDragEnd,step:1}),l}return d.prototype.getNodeEdges=function(s){for(var l=this.graphModel,o=l.edges,f=[],c=[],v=0;v<o.length;v++){var b=o[v];b.sourceNodeId===s?f.push(b):o[v].targetNodeId===s&&c.push(b)}return{sourceEdges:f,targetEdges:c}},d.prototype.render=function(){var s=this.props,l=s.x,o=s.y,f=s.index,c=s.model,v=c.getControlPointStyle();return Ni("g",{className:"lf-resize-control-"+f},Ni(Ef,uo({className:"lf-node-control"},{x:l,y:o},v,{onMouseDown:this.dragHandler.handleMouseDown})))},d}(Fo),M1=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Du=globalThis&&globalThis.__assign||function(){return Du=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Du.apply(this,arguments)},Iu=function(y){M1(d,y);function d(){var s=y.call(this)||this;return s.state={},s}return d.prototype.getResizeControl=function(){var s=this.props,l=s.model,o=s.graphModel,f=l.x,c=l.y,v=l.width,b=l.height,w={minX:f-v/2,minY:c-b/2,maxX:f+v/2,maxY:c+b/2},O=w.minX,S=w.minY,P=w.maxX,j=w.maxY,k=[{x:O,y:S},{x:P,y:S},{x:P,y:j},{x:O,y:j}];return k.map(function(A,C){return Ni(P1,Du({index:C},A,{model:l,graphModel:o}))})},d.prototype.getGroupSolid=function(){var s=this.props.model,l=s.x,o=s.y,f=s.width,c=s.height,v=s.getResizeOutlineStyle();return Ni(Ef,Du({fill:"none"},v,{x:l,y:o,width:f,height:c}))},d.prototype.render=function(){return Ni("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},d}(Fo),_g=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),k1=function(y){_g(d,y);function d(s,l){var o=y.call(this,s,l)||this,f=o.properties.nodeSize;return f&&(o.width=f.width,o.height=f.height),o}return d.prototype.initNodeData=function(s){y.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=y.prototype.getOutlineStyle.call(this),l=this.graphModel.editConfigModel.isSilentMode;return l||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.resize=function(s,l){console.log(s,l)},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var l={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},f={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:l,ResizeBasis:o,ScaleLimit:f}}else delete this.PCTResizeInfo},d}(Le.RectNodeModel),T1=function(y){_g(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,l=s.model,o=s.graphModel;return Le.h(Iu,{model:l,graphModel:o})},d.prototype.getResizeShape=function(){return y.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,l=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Le.h("g",null,this.getResizeShape(),l&&!o?this.getControlGroup():"")},d}(Le.RectNode),Lu={type:"rect",view:T1,model:k1},Og=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}();(function(y){Og(d,y);function d(s,l){var o=y.call(this,s,l)||this,f=o.properties.nodeSize;return f&&(o.rx=f.rx,o.ry=f.ry),o}return d.prototype.initNodeData=function(s){y.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=y.prototype.getOutlineStyle.call(this),l=this.graphModel.editConfigModel.isSilentMode;return l||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var l={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},f={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:l,ResizeBasis:o,ScaleLimit:f}}else delete this.PCTResizeInfo},d})(Le.EllipseNodeModel);(function(y){Og(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,l=s.model,o=s.graphModel;return Le.h(Iu,{model:l,graphModel:o})},d.prototype.getResizeShape=function(){return y.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,l=s.model,o=s.graphModel.editConfigModel.isSilentMode;return Le.h("g",null,this.getResizeShape(),l.isSelected&&!o?this.getControlGroup():"")},d})(Le.EllipseNode);var yf=globalThis&&globalThis.__assign||function(){return yf=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},yf.apply(this,arguments)};function A1(y){var d=y.fillOpacity,s=d===void 0?1:d,l=y.strokeWidth,o=l===void 0?1:l,f=y.strokeOpacity,c=f===void 0?1:f,v=y.fill,b=v===void 0?"transparent":v,w=y.stroke,O=w===void 0?"#000":w,S=y.points,P=y.className,j=P===void 0?"lf-basic-shape":P,k={fill:b,fillOpacity:s,strokeWidth:o,stroke:O,strokeOpacity:c,points:"",className:j};return k.points=S.map(function(A){return A.join(",")}).join(" "),Le.h("polygon",yf({},k))}var wg=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),vf=globalThis&&globalThis.__assign||function(){return vf=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},vf.apply(this,arguments)};(function(y){wg(d,y);function d(s,l){var o=y.call(this,s,l)||this,f=o.properties.nodeSize;return f&&(o.rx=f.rx,o.ry=f.ry),o}return d.prototype.initNodeData=function(s){y.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},d.prototype.getOutlineStyle=function(){var s=y.prototype.getOutlineStyle.call(this),l=this.graphModel.editConfigModel.isSilentMode;return l||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var l={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},f={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:l,ResizeBasis:o,ScaleLimit:f}}else delete this.PCTResizeInfo},d})(Le.DiamondNodeModel);(function(y){wg(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,l=s.model,o=s.graphModel;return Le.h(Iu,{model:l,graphModel:o})},d.prototype.getResizeShape=function(){var s=this.props.model,l=s.points,o=s.getNodeStyle();return Le.h("g",null,Le.h(A1,vf({},o,{points:l})))},d.prototype.getShape=function(){var s=this.props,l=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Le.h("g",null,this.getResizeShape(),l&&!o?this.getControlGroup():"")},d})(Le.DiamondNode);var xg=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}();(function(y){xg(d,y);function d(s,l){var o=y.call(this,s,l)||this,f=o.properties.nodeSize;return f&&(o.width=f.width,o.height=f.height),o}return d.prototype.initNodeData=function(s){y.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=y.prototype.getOutlineStyle.call(this),l=this.graphModel.editConfigModel.isSilentMode;return l||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var l={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},f={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:l,ResizeBasis:o,ScaleLimit:f}}else delete this.PCTResizeInfo},d})(Le.HtmlNodeModel);(function(y){xg(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,l=s.model,o=s.graphModel;return Le.h(Iu,{model:l,graphModel:o})},d.prototype.getResizeShape=function(){return y.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,l=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Le.h("g",null,this.getResizeShape(),l&&!o?this.getControlGroup():"")},d})(Le.HtmlNode);var Eg=globalThis&&globalThis.__extends||function(){var y=function(d,s){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var f in o)o.hasOwnProperty(f)&&(l[f]=o[f])},y(d,s)};return function(d,s){y(d,s);function l(){this.constructor=d}d.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),Cu=globalThis&&globalThis.__assign||function(){return Cu=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Cu.apply(this,arguments)},N1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f},D1=globalThis&&globalThis.__spread||function(){for(var y=[],d=0;d<arguments.length;d++)y=y.concat(N1(arguments[d]));return y},Xv=500,Uv=300,C1=-1e4,R1=function(y){Eg(d,y);function d(){var s=y!==null&&y.apply(this,arguments)||this;return s.isGroup=!0,s.unfoldedWidth=Xv,s.unfoldedHight=Uv,s}return d.prototype.initNodeData=function(s){var l=this;y.prototype.initNodeData.call(this,s);var o=[];Array.isArray(s.children)&&(o=s.children),this.children=new Set(o),this.width=Xv,this.height=Uv,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=C1,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){l.isFolded&&l.foldGroup(l.isFolded)})},d.prototype.getResizeOutlineStyle=function(){var s=y.prototype.getResizeOutlineStyle.call(this);return s.stroke="none",s},d.prototype.foldGroup=function(s){var l=this;this.setProperty("isFolded",s),this.isFolded=s,s?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(f){var c=l.graphModel.getElement(f);c.isGroup&&!c.isFolded&&c.foldGroup(s),c.visible=!s,o=o.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(s,o)},d.prototype.getAnchorStyle=function(s){var l=y.prototype.getAnchorStyle.call(this,s);return l.stroke="transparent",l.fill="transparent",l.hover.fill="transparent",l.hover.stroke="transparent",l},d.prototype.foldEdge=function(s,l){var o=this;l.forEach(function(f,c){var v=f.id,b=f.sourceNodeId,w=f.targetNodeId,O=f.startPoint,S=f.endPoint,P=f.type,j=f.text,k=f.getProperties(),A={id:v+"__"+c,sourceNodeId:b,targetNodeId:w,startPoint:O,endPoint:S,type:P,properties:k,text:j==null?void 0:j.value};f.virtual&&o.graphModel.deleteEdgeById(f.id);var C=o.graphModel.group.getNodeGroup(w);C||(C=o.graphModel.getNodeModelById(w));var z=o.graphModel.group.getNodeGroup(b);z||(z=o.graphModel.getNodeModelById(b)),s&&f.visible!==!1&&(o.children.has(b)||o.id===b?(A.startPoint=void 0,A.sourceNodeId=o.id):(A.endPoint=void 0,A.targetNodeId=o.id),(C.id!==o.id||z.id!==o.id)&&o.createVirtualEdge(A),f.visible=!1),!s&&f.visible===!1&&(C&&C.isGroup&&C.isFolded?(A.targetNodeId=C.id,A.endPoint=void 0,o.createVirtualEdge(A)):z&&z.isGroup&&z.isFolded?(A.sourceNodeId=z.id,A.startPoint=void 0,o.createVirtualEdge(A)):f.visible=!0)})},d.prototype.createVirtualEdge=function(s){s.pointsList=void 0;var l=this.graphModel.addEdge(s);l.virtual=!0,l.text.editable=!1,l.isFoldedEdge=!0},d.prototype.isInRange=function(s){var l=s.x1,o=s.y1,f=s.x2,c=s.y2;return l>=this.x-this.width/2&&f<=this.x+this.width/2&&o>=this.y-this.height/2&&c<=this.y+this.height/2},d.prototype.isAllowMoveTo=function(s){var l=s.x1,o=s.y1,f=s.x2,c=s.y2;return{x:l>=this.x-this.width/2&&f<=this.x+this.width/2,y:o>=this.y-this.height/2&&c<=this.y+this.height/2}},d.prototype.setAllowAppendChild=function(s){this.setProperty("groupAddable",s)},d.prototype.addChild=function(s){this.children.add(s)},d.prototype.removeChild=function(s){this.children.delete(s)},d.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},d.prototype.getData=function(){var s=this,l=y.prototype.getData.call(this);l.children=[],this.children.forEach(function(f){var c=s.graphModel.getNodeModelById(f);c&&!c.virtual&&l.children.push(f)});var o=l.properties;return delete o.groupAddable,delete o.isFolded,l},d.prototype.getHistoryData=function(){var s=y.prototype.getData.call(this);s.children=D1(this.children),s.isGroup=!0;var l=s.properties;return delete l.groupAddable,l.isFolded&&(s.x=s.x+this.unfoldedWidth/2-this.foldedWidth/2,s.y=s.y+this.unfoldedHight/2-this.foldedHeight/2),s},d.prototype.isAllowAppendIn=function(s){return!0},d.prototype.toBack=function(){this.zIndex--},d}(Lu.model),I1=function(y){Eg(d,y);function d(){return y!==null&&y.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props.model,l=s.resizable,o=s.properties;return l&&!o.isFolded?y.prototype.getControlGroup.call(this):null},d.prototype.getAddableShape=function(){var s=this.props.model,l=s.width,o=s.height,f=s.x,c=s.y,v=s.radius,b=s.properties;if(!b.groupAddable)return null;var w=this.props.model.getNodeStyle().strokeWidth,O=this.props.model.getAddableOutlineStyle(),S=l+w+8,P=o+w+8;return Le.h("rect",Cu(Cu({},O),{width:S,height:P,x:f-S/2,y:c-P/2,rx:v,ry:v}))},d.prototype.getFoldIcon=function(){var s=this.props.model,l=s.x-s.width/2+5,o=s.y-s.height/2+5;if(!s.foldable)return null;var f=Le.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:s.properties.isFolded?"M "+(l+3)+","+(o+6)+" "+(l+11)+","+(o+6)+" M"+(l+7)+","+(o+2)+" "+(l+7)+","+(o+10):"M "+(l+3)+","+(o+6)+" "+(l+11)+","+(o+6)+" "});return Le.h("g",{},[Le.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:s.x-s.width/2+5,y:s.y-s.height/2+5,onClick:function(){s.foldGroup(!s.properties.isFolded)}}),f])},d.prototype.getResizeShape=function(){return Le.h("g",{},[this.getAddableShape(),y.prototype.getResizeShape.call(this),this.getFoldIcon()])},d}(Lu.view);const Sf={type:"group",view:I1,model:R1};var L1=-1e3,Vv=-1e4,z1=function(){function y(d){var s=this,l=d.lf;this.topGroupZIndex=Vv,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(f){f.children&&f.children.forEach(function(c){s.nodeGroupMap.set(c,f.id)})})},this.appendNodeToGroup=function(o){var f=o.data,c=s.nodeGroupMap.get(f.id);if(c){var v=s.lf.getNodeModelById(c);v.removeChild(f.id),s.nodeGroupMap.delete(f.id),v.setAllowAppendChild(!1)}var b=s.lf.getNodeModelById(f.id),w=b.getBounds(),O=s.getGroup(w,f);if(O){var S=O.isAllowAppendIn(f);if(!S){s.lf.emit("group:not-allowed",{group:O.getData(),node:f});return}O.addChild(f.id),s.nodeGroupMap.set(f.id,O.id),O.setAllowAppendChild(!1),b.isGroup&&(f.children.forEach(function(P){s.nodeGroupMap.set(P,f.id)}),s.nodeSelected({data:f,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var f=o.data;f.children&&f.children.forEach(function(b){s.nodeGroupMap.delete(b),s.lf.deleteNode(b)});var c=s.nodeGroupMap.get(f.id);if(c){var v=s.lf.getNodeModelById(c);v.removeChild(f.id),s.nodeGroupMap.delete(f.id)}},this.setActiveGroup=function(o){var f=o.data,c=s.lf.getNodeModelById(f.id),v=c.getBounds(),b=s.getGroup(v,f);if(s.activeGroup&&s.activeGroup.setAllowAppendChild(!1),!(!b||c.isGroup&&b.id===f.id)){var w=b.isAllowAppendIn(f);w&&(s.activeGroup=b,s.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var f=o.data,c=o.isMultiple,v=o.isSelected,b=s.lf.getNodeModelById(f.id);if(s.toFrontGroup(b),s.topGroupZIndex>L1){s.topGroupZIndex=Vv;for(var w=s.lf.graphModel.nodes.filter(function(A){return A.isGroup}).sort(function(A,C){return A.zIndex-C.zIndex}),O=0,S=0;S<w.length;S++){var P=w[S];P.zIndex!==O&&(s.topGroupZIndex++,O=P.zIndex),P.setZIndex(s.topGroupZIndex)}}if(c&&v)if(b.isGroup)b.children.forEach(function(A){var C=s.lf.graphModel.getElement(A);C.setSelected(!1)});else{var j=s.nodeGroupMap.get(f.id);if(j){var k=s.lf.getNodeModelById(j);k.isSelected&&b.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(s.topGroupZIndex++,o.setZIndex(s.topGroupZIndex),o.children&&o.children.forEach(function(f){var c=s.lf.getNodeModelById(f);s.toFrontGroup(c)}))},l.register(Sf),this.lf=l,l.graphModel.addNodeMoveRules(function(o,f,c){if(o.isGroup){var v=s.getNodeAllChild(o);return l.graphModel.moveNodes(v,f,c,!0),!0}var b=l.getNodeModelById(s.nodeGroupMap.get(o.id));if(b&&b.isRestrict){var w=o.getBounds(),O=w.x1,S=w.y1,P=w.x2,j=w.y2,k=b.isAllowMoveTo({x1:O+f,y1:S+c,x2:P+f,y2:j+c});return k}return!0}),l.graphModel.group=this,l.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),l.on("node:delete",this.deleteGroupChild),l.on("node:dnd-drag,node:drag",this.setActiveGroup),l.on("node:click",this.nodeSelected),l.on("graph:rendered",this.graphRendered)}return y.prototype.getNodeAllChild=function(d){var s=this,l=[];return d.children&&d.children.forEach(function(o){l.push(o);var f=s.lf.getNodeModelById(o);f.isGroup&&(l=l.concat(s.getNodeAllChild(f)))}),l},y.prototype.getGroup=function(d,s){var l=this.lf.graphModel.nodes,o=l.filter(function(v){return v.isGroup&&v.isInRange(d)&&v.id!==s.id});if(o.length!==0){if(o.length===1)return o[0];for(var f=o[o.length-1],c=o.length-2;c>=0;c--)o[c].zIndex>f.zIndex&&(f=o[c]);return f}},y.prototype.getNodeGroup=function(d){var s=this.nodeGroupMap.get(d);if(s)return this.lf.getNodeModelById(s)},y.pluginName="group",y}(),B1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f};globalThis&&globalThis.__spread;var Yv=globalThis&&globalThis.__assign||function(){return Yv=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Yv.apply(this,arguments)},Wv=globalThis&&globalThis.__assign||function(){return Wv=Object.assign||function(y){for(var d,s=1,l=arguments.length;s<l;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(y[o]=d[o])}return y},Wv.apply(this,arguments)},G1=globalThis&&globalThis.__read||function(y,d){var s=typeof Symbol=="function"&&y[Symbol.iterator];if(!s)return y;var l=s.call(y),o,f=[],c;try{for(;(d===void 0||d-- >0)&&!(o=l.next()).done;)f.push(o.value)}catch(v){c={error:v}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(c)throw c.error}}return f};globalThis&&globalThis.__spread;class H1 extends Le.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class F1 extends Le.HtmlNode{}class X1 extends Nw{}class U1 extends Dw{}class V1 extends Cw{}class Y1 extends Rw{getShape(){const d=this.props.model,s=d.getNodeStyle(),{x:l,y:o,r:f}=d;return Le.h("circle",{...s,cx:l,cy:o,r:f,strokeWidth:5})}}class W1 extends Iw{constructor(d,s){const{id:l,text:o,x:f,y:c}=d;d.id=l||`Gateway_${ur()}`,d.text=o||{value:o||"",x:f,y:c+40},super(d,s),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class $1 extends Lw{getShape(){const{model:d}=this.props,{x:s,y:l,width:o,height:f,points:c}=d,v=d.getNodeStyle();return Le.h("g",{transform:`matrix(1 0 0 1 ${s-o/2} ${l-f/2})`},Le.h("polygon",{...v,x:s,y:l,points:c}),Le.h("line",{...v,x1:15,y1:15,x2:35,y2:35}),Le.h("line",{...v,x1:35,y1:15,x2:15,y2:35}))}}class K1 extends Le.PolygonNodeModel{constructor(d,s){const{id:l,text:o,x:f,y:c}=d;d.id=l||`Gateway_${ur()}`,d.text=o||{value:o||"",x:f,y:c+40},super(d,s),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class q1 extends Le.PolygonNode{getShape(){const{model:d}=this.props,{x:s,y:l,width:o,height:f,points:c}=d,v=d.getNodeStyle();return Le.h("g",{transform:`matrix(1 0 0 1 ${s-o/2} ${l-f/2})`},Le.h("polygon",{...v,x:s,y:l,points:c}),Le.h("line",{...v,x1:10,y1:25,x2:40,y2:25}),Le.h("line",{...v,x1:25,y1:10,x2:25,y2:40}))}}class Z1 extends zw{}class J1 extends Bw{}class Q1 extends Gw{isAllowConnectedAsSource(){return!1}}class ex extends Hw{}class tx extends ng{getTextPosition(){const{x:d,y:s}=this.text;return d&&s?{x:d,y:s}:this.dbClickPosition||{x:0,y:0}}}class nx extends rg{}const rx=Lu.model,ox=Lu.view;class ix extends rx{createId(){return`Note_${ur()}`}initNodeData(d){super.initNodeData(d),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const d=super.getNodeStyle();return d.strokeDasharray="3 3",d.fill="transparent",d}}class ax extends ox{}class ux extends ng{getEdgeStyle(){const d=super.getEdgeStyle();return d.strokeDasharray="3 3",d}getTextPosition(){const{x:d,y:s}=this.text;return d&&s?{x:d,y:s}:this.dbClickPosition||{x:0,y:0}}}class sx extends rg{}const cx=Sf.model;class lx extends cx{createId(){return`Group_${ur()}`}initNodeData(d){super.initNodeData(d),this.resizable=!0,this.foldable=!0}addChild(d){var s,l;super.addChild(d),(l=(s=this.graphModel.nodesMap[d])==null?void 0:s.model)==null||l.setProperty("groupKey",this.id)}removeChild(d){var s,l;super.removeChild(d),(l=(s=this.graphModel.nodesMap[d])==null?void 0:s.model)==null||l.deleteProperty("groupKey")}}class fx extends Sf.view{}class $v extends z1{constructor({lf:d}){super({lf:d}),d.register({type:"group",model:lx,view:fx}),d.off("node:delete",this.deleteGroupChild),d.on("node:delete",({data:s})=>{s.children&&s.children.forEach(l=>{this.nodeGroupMap.delete(l),this.lf.deleteNode(l)})})}}const px=[{type:"process",model:H1,view:F1},{type:"startEvent",model:X1,view:U1},{type:"endEvent",model:V1,view:Y1},{type:"exclusiveGateway",model:W1,view:$1},{type:"parallelGateway",model:K1,view:q1},{type:"userTask",model:Z1,view:J1},{type:"serviceTask",model:Q1,view:ex},{type:"sequenceFlow",model:tx,view:nx},{type:"note",model:ix,view:ax},{type:"noteFlow",model:ux,view:sx}];class gf{constructor({lf:d}){d.batchRegister(px),d.setDefaultEdgeType("sequenceFlow")}}Xr(gf,"pluginName","bpmnExtend");class dx extends l1{constructor({lf:d}){super({lf:d}),[{key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>d.clearData()},{key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>d.emit("custom:edit-click",{})},{key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:l,show:o,hide:f}=d.extension.miniMap??{};l?f():o()}},{key:"reset",iconClass:"lf-control-reset",title:"重置",text:"重置",onClick:()=>{_w.confirm("选择重置的配置","提示",{confirmButtonText:"重置表单配置",cancelButtonText:"重置按钮配置"}).then(()=>{d.emit("custom:reset-form-property",{})}).catch(()=>{d.emit("custom:reset-button",{})})}}].forEach(l=>this.addItem(l))}}class hx extends d1{constructor({lf:d}){super({lf:d});const s={text:"复制",icon:!0,className:"lf-menu-copy",callback:R=>d.cloneNode(R.id)},l={text:"删除",icon:!0,className:"lf-menu-delete",callback:R=>{d.deleteNode(R.id),d.deleteEdge(R.id)}},o={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:R=>d.graphModel.editText(R.id)},f={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:R=>d.updateText(R.id,"")},c={text:"框选",icon:!0,className:"lf-menu-select",callback(){d.openSelectionSelect(),d.once("selection:selected",d.closeSelectionSelect)}},v={text:"清空",icon:!0,className:"lf-menu-clear",callback:()=>d.clearData()},b={text:"",icon:!0,className:"lf-menu-back",callback:R=>this.changeMenuList(R,q.nodeMenu)},w={text:"添加",icon:!0,className:"lf-menu-add",callback:R=>{let Y=[];switch(R.type){case"startEvent":case"userTask":case"exclusiveGateway":case"parallelGateway":Y=[b,O,S,j,k,P,A];break;case"endEvent":case"sequenceFlow":case"group":case"serviceTask":Y=[b,A];break;default:Y=[b]}this.changeMenuList(R,Y)}},O={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:R=>this.addNode(R,{type:"userTask",x:R.x+200,y:R.y})},S={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:R=>this.addNode(R,{type:"serviceTask",x:R.x+200,y:R.y})},P={text:"结束",icon:!0,className:"lf-menu-end-event",callback:R=>this.addNode(R,{type:"endEvent",x:R.x+150,y:R.y})},j={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:R=>this.addNode(R,{type:"exclusiveGateway",x:R.x+150,y:R.y})},k={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:R=>this.addNode(R,{type:"parallelGateway",x:R.x+150,y:R.y})},A={text:"注释",icon:!0,className:"lf-menu-note",callback:R=>this.addNode(R,{type:"note",x:R.x,y:R.y-150})},C={text:"切换类型",icon:!0,className:"lf-menu-switch",callback:R=>{let Y=[];switch(R.type){case"exclusiveGateway":Y=[b,Z];break;case"parallelGateway":Y=[b,oe];break;case"startEvent":Y=[b,F];break;case"endEvent":Y=[b,z];break;default:Y=[b]}this.changeMenuList(R,Y)}},z={text:"开始",icon:!0,className:"lf-menu-start-event",callback:R=>this.changeNodeType(R,"startEvent")},F={text:"结束",icon:!0,className:"lf-menu-end-event",callback:R=>this.changeNodeType(R,"endEvent")},Z={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:R=>this.changeNodeType(R,"parallelGateway")},oe={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:R=>this.changeNodeType(R,"exclusiveGateway")},q={nodeMenu:[w,s,l,C,o,f],edgeMenu:[l,o,f],graphMenu:[c,v]};this.setMenuConfig(q)}changeMenuList(d,s){setTimeout(()=>{this.__currentData=d;const{left:l,top:o}=this.__menuDOM.style;this.showMenu(l,o,s)})}addNode(d,s){const l=this.lf.addNode(s),o=["serviceTask","note"].includes(s.type);this.lf.addEdge({type:o?"noteFlow":void 0,sourceNodeId:d.id,targetNodeId:l.id})}changeNodeType(d,s){this.lf.changeNodeType(d.id,s),Object.keys(d.properties||{}).forEach(l=>this.lf.deleteProperty(d.id,l)),this.lf.emit("element:click",{data:{...d,type:s,properties:{}}})}}class yx extends h1{constructor({lf:d}){super({lf:d}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){d.openSelectionSelect(),d.once("selection:selected",d.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const Sg={type:"process",key:"Process",properties:{}};function vx(y){const{id:d,type:s,x:l,y:o,properties:f,children:c,text:v}=y;return{incoming:[],outgoing:[],children:c,type:s,key:d,groupKey:f==null?void 0:f.groupKey,properties:{...f,name:_f(v)?v:(v==null?void 0:v.value)??"",x:l,y:o,text:v}}}function gx(y){const{id:d,type:s,sourceNodeId:l,targetNodeId:o,startPoint:f,endPoint:c,pointsList:v,properties:b,text:w}=y;return{incoming:[l],outgoing:[o],type:s,key:d,groupKey:b==null?void 0:b.groupKey,properties:{...b,name:_f(w)?w:(w==null?void 0:w.value)??"",text:w,startPoint:f,endPoint:c,pointsList:v}}}function mx(y){const{id:d,type:s,properties:l,text:o}=y;return{type:s,key:d,properties:{...l,name:_f(o)?o:(o==null?void 0:o.value)??""}}}function bx(y){const d=new Map,s={processData:Sg,flowElementList:[]};return y.nodes.forEach(l=>{var o;if(l.type==="process")s.processData=mx(l);else{const f=vx(l);(o=s.flowElementList)==null||o.push(f),d.set(l.id,f)}}),y.edges.forEach(l=>{var v;const o=gx(l);d.get(l.sourceNodeId).outgoing.push(o.key),d.get(l.targetNodeId).incoming.push(o.key),(v=s.flowElementList)==null||v.push(o)}),s}function _x(y){const{incoming:d,outgoing:s,properties:l,key:o,type:f}=y,{text:c,name:v,startPoint:b,endPoint:w,pointsList:O}=l??{},S={id:o,type:f,sourceNodeId:(d==null?void 0:d[0])??"",targetNodeId:(s==null?void 0:s[0])??"",text:c||v,startPoint:b,endPoint:w,pointsList:O,properties:{}},P=["startPoint","endPoint","pointsList","text"];return S.properties=bf(l,P),S}function Ox(y){const{properties:d,key:s,type:l,children:o}=y,{x:f,y:c,text:v,name:b}=d??{},w={id:s,type:l??"",x:f,y:c,text:v||b,children:o,properties:{}},O=["x","y","text"];return w.properties=bf(d,O),w}function wx(y){const{properties:d,key:s,type:l}=y,{name:o}=d??{},f={id:s,type:l??"",text:o,x:0,y:0},c=["x","y","text"];return f.properties=bf(d,c),f}function xx(y){const{flowElementList:d}=y,s=c=>["sequenceFlow","noteFlow"].includes(c),l=(d==null?void 0:d.filter(c=>!s(c.type)).map(Ox))??[],o=(d==null?void 0:d.filter(c=>s(c.type)).map(_x))??[];return l.unshift(wx(y.processData??Sg)),{nodes:l,edges:o}}class mf{constructor({lf:d}){d.adapterIn=this.adapterIn,d.adapterOut=this.adapterOut}adapterOut(d){return bx(d)}adapterIn(d){return xx(d)}}Xr(mf,"pluginName","turboAdapter");class jg{constructor({lf:d}){Xr(this,"lf");Xr(this,"container");Xr(this,"__tooltipDOM");Xr(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=d}render(d,s){this.container=s,s.appendChild(this.__tooltipDOM),d.on("node:mouseenter,edge:mouseenter",({data:l,e:o})=>{var w;const f=(w=this.__tooltips.find(O=>O.id===l.id))==null?void 0:w.content;if(!f)return;this.__tooltipDOM.innerHTML=f;const c=d.getPointByClient(o.x,o.y),{domOverlayPosition:{x:v,y:b}}=c;this.__tooltipDOM.style.top=`${b+10}px`,this.__tooltipDOM.style.left=`${v+10}px`,this.__tooltipDOM.style.display="block"}),d.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(d){this.__tooltips=d}}Xr(jg,"pluginName","tooltip");function Ex({props:y,state:d}){const{lf:s,graphData:l}=d;function o(c){var v;s.value=new Le.LogicFlow({container:c,grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[dx,yx,y1,hx,g1,u1,gf,$v,mf],edgeGenerator:(b,w)=>{if(["note","serviceTask"].includes(w.type))return"noteFlow"},...y.initOptions}),(v=s.value)==null||v.setTheme(mv),Aw(d),gv(l,b=>{var P,j,k;const w=JSON.stringify(b),O=JSON.stringify((P=s.value)==null?void 0:P.getGraphData());w!==O&&((j=s.value)==null||j.render(b),(k=s.value)==null||k.emit("element:click",{isForce:!0}))},{immediate:!0})}function f(c){var v;s.value=new Le.LogicFlow({container:c,grid:{type:"dot",size:10},isSilentMode:!0,plugins:[gf,$v,mf,jg],...y.initOptions}),(v=s.value)==null||v.setTheme(mv),gv(()=>[l.value,y.styles,y.tooltips],async()=>{var b,w,O,S;(b=s.value)==null||b.render(l.value),await sf(),(w=y.styles)==null||w.forEach(({id:P,style:j})=>{var k,A;P&&((A=(k=s.value)==null?void 0:k.graphModel)==null||A.updateAttributes(P,{style:j}))}),(S=(O=s.value)==null?void 0:O.extension.tooltip)==null||S.setTooltips(y.tooltips??[])},{immediate:!0})}return{initViewer:f,initModeler:o}}const Sx=jw("span",null,"编辑JSON",-1),jx=Kv({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(y,{emit:d}){const l=Tw(y),{modelValue:o,visible:f}=l,c=xw("");function v(){const b=JSON.parse(c.value);o.value=b,d("confirm",b),f.value=!1}return Ew(()=>{c.value=JSON.stringify(o.value,null,2)}),(b,w)=>{const O=Sr("el-input"),S=Sr("el-button"),P=Sr("el-drawer");return zo(),Mi(P,{modelValue:In(f),"onUpdate:modelValue":w[1]||(w[1]=j=>ki(f)?f.value=j:null)},{header:Ho(()=>[Sx,cf(b.$slots,"header")]),default:Ho(()=>[Ti(O,{modelValue:c.value,"onUpdate:modelValue":w[0]||(w[0]=j=>c.value=j),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"]),Ti(S,{class:"flow-editor__confirm-btn",type:"primary",onClick:v},{default:Ho(()=>[Sw(" 确定 ")]),_:1})]),_:3},8,["modelValue"])}}});const Px=["id"],Rx=Kv({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},dataOptions:{},type:{},styles:{},tooltips:{}},setup(y){const d=y,s=bw(d),{lf:l,graphData:o,formRef:f,formData:c,formOption:v,formDefaults:b,formLoading:w,editorVisible:O,onUpdateFormData:S}=s,{initModeler:P,initViewer:j}=Ex({props:d,state:s}),k=ww("logicflow-container");return Pw(()=>{const A=document.querySelector(`#${k}`);d.type==="viewer"?j(A):P(A)}),(A,C)=>{const z=Sr("el-main"),F=Sr("el-empty"),Z=Sr("el-skeleton"),oe=Sr("avue-form"),q=Sr("el-aside"),R=Sr("el-container");return A.type==="viewer"?(zo(),Mw("div",{key:0,id:In(k),class:"lf-container"},null,8,Px)):(zo(),Mi(R,{key:1,class:"lf-container"},{default:Ho(()=>[Ti(z,{id:In(k),class:"lf-main"},null,8,["id"]),Ti(q,{width:A.formWidth,class:"lf-aside"},{default:Ho(()=>{var Y,I;return[cf(A.$slots,"form-top"),(I=(Y=In(v))==null?void 0:Y.group)!=null&&I.length?In(w)?(zo(),Mi(Z,{key:1})):(zo(),Mi(oe,{key:2,ref_key:"formRef",ref:f,modelValue:In(c),"onUpdate:modelValue":[C[0]||(C[0]=D=>ki(c)?c.value=D:null),In(S)],defaults:In(b),"onUpdate:defaults":C[1]||(C[1]=D=>ki(b)?b.value=D:null),option:In(v)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(zo(),Mi(F,{key:0,description:"选择元素以编辑数据"}))]}),_:3},8,["width"]),Ti(jx,{modelValue:In(o),"onUpdate:modelValue":C[2]||(C[2]=Y=>ki(o)?o.value=Y:null),visible:In(O),"onUpdate:visible":C[3]||(C[3]=Y=>ki(O)?O.value=Y:null),onConfirm:C[4]||(C[4]=Y=>{var I;return(I=In(l))==null?void 0:I.render(Y)})},kw({_:2},[A.$slots["editor-header"]?{name:"header",fn:Ho(()=>[cf(A.$slots,"editor-header")]),key:"0"}:void 0]),1032,["modelValue","visible"])]),_:3}))}}});export{gf as B,dx as C,V1 as E,lx as G,hx as M,ix as N,H1 as P,X1 as S,mf as T,Z1 as U,Rx as _,Ex as a,F1 as b,U1 as c,mv as d,Y1 as e,W1 as f,$1 as g,K1 as h,q1 as i,J1 as j,Q1 as k,ex as l,tx as m,nx as n,ax as o,ux as p,sx as q,fx as r,$v as s,yx as t,Aw as u,bx as v,xx as w,jg as x,bv as y,lf as z};
