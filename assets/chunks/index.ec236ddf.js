var $O=Object.defineProperty;var KO=(v,d,s)=>d in v?$O(v,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[d]=s;var nv=(v,d,s)=>(KO(v,typeof d!="symbol"?d+"":d,s),s);import{v as Xn,I as qO}from"../flow-design_demo.md.d62e10e5.js";import{q as yu}from"../composables_use-crud_index.md.48b0a24a.js";import{r as ZO}from"../app.3591ea7f.js";var Ql={exports:{}};(function(v,d){(function(s,f){v.exports=f()})(window,function(){return function(s){var f={};function o(l){if(f[l])return f[l].exports;var c=f[l]={i:l,l:!1,exports:{}};return s[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=s,o.c=f,o.d=function(l,c,g){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:g})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(1&c&&(l=o(l)),8&c||4&c&&typeof l=="object"&&l&&l.__esModule)return l;var g=Object.create(null);if(o.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:l}),2&c&&typeof l!="string")for(var m in l)o.d(g,m,function(w){return l[w]}.bind(null,m));return g},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=215)}([function(s,f,o){o.d(f,"a",function(){return q}),o.d(f,"b",function(){return ie}),o.d(f,"c",function(){return Re}),o.d(f,"d",function(){return Ke}),o.d(f,"e",function(){return I}),o.d(f,"f",function(){return J}),o.d(f,"g",function(){return I}),o.d(f,"h",function(){return Me}),o.d(f,"i",function(){return c}),o.d(f,"j",function(){return $e}),o.d(f,"k",function(){return G});var l,c,g,m,w,O,S,M={},j=[],T=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function D(Z,$){for(var ae in $)Z[ae]=$[ae];return Z}function C(Z){var $=Z.parentNode;$&&$.removeChild(Z)}function I(Z,$,ae){var _e,Ae,we,qe={};for(we in $)we=="key"?_e=$[we]:we=="ref"?Ae=$[we]:qe[we]=$[we];if(arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),typeof Z=="function"&&Z.defaultProps!=null)for(we in Z.defaultProps)qe[we]===void 0&&(qe[we]=Z.defaultProps[we]);return H(Z,qe,_e,Ae,null)}function H(Z,$,ae,_e,Ae){var we={type:Z,props:$,key:ae,ref:_e,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:Ae??++g};return Ae==null&&c.vnode!=null&&c.vnode(we),we}function J(){return{current:null}}function ie(Z){return Z.children}function q(Z,$){this.props=Z,this.context=$}function V(Z,$){if($==null)return Z.__?V(Z.__,Z.__.__k.indexOf(Z)+1):null;for(var ae;$<Z.__k.length;$++)if((ae=Z.__k[$])!=null&&ae.__e!=null)return ae.__e;return typeof Z.type=="function"?V(Z):null}function K(Z){var $,ae;if((Z=Z.__)!=null&&Z.__c!=null){for(Z.__e=Z.__c.base=null,$=0;$<Z.__k.length;$++)if((ae=Z.__k[$])!=null&&ae.__e!=null){Z.__e=Z.__c.base=ae.__e;break}return K(Z)}}function z(Z){(!Z.__d&&(Z.__d=!0)&&m.push(Z)&&!N.__r++||O!==c.debounceRendering)&&((O=c.debounceRendering)||w)(N)}function N(){for(var Z;N.__r=m.length;)Z=m.sort(function($,ae){return $.__v.__b-ae.__v.__b}),m=[],Z.some(function($){var ae,_e,Ae,we,qe,nt;$.__d&&(qe=(we=(ae=$).__v).__e,(nt=ae.__P)&&(_e=[],(Ae=D({},we)).__v=we.__v+1,ve(nt,we,Ae,ae.__n,nt.ownerSVGElement!==void 0,we.__h!=null?[qe]:null,_e,qe??V(we),we.__h),ue(_e,we),we.__e!=qe&&K(we)))})}function B(Z,$,ae,_e,Ae,we,qe,nt,Ze,Ye){var ge,He,ee,ze,ut,gt,it,ht=_e&&_e.__k||j,St=ht.length;for(ae.__k=[],ge=0;ge<$.length;ge++)if((ze=ae.__k[ge]=(ze=$[ge])==null||typeof ze=="boolean"?null:typeof ze=="string"||typeof ze=="number"||typeof ze=="bigint"?H(null,ze,null,null,ze):Array.isArray(ze)?H(ie,{children:ze},null,null,null):ze.__b>0?H(ze.type,ze.props,ze.key,null,ze.__v):ze)!=null){if(ze.__=ae,ze.__b=ae.__b+1,(ee=ht[ge])===null||ee&&ze.key==ee.key&&ze.type===ee.type)ht[ge]=void 0;else for(He=0;He<St;He++){if((ee=ht[He])&&ze.key==ee.key&&ze.type===ee.type){ht[He]=void 0;break}ee=null}ve(Z,ze,ee=ee||M,Ae,we,qe,nt,Ze,Ye),ut=ze.__e,(He=ze.ref)&&ee.ref!=He&&(it||(it=[]),ee.ref&&it.push(ee.ref,null,ze),it.push(He,ze.__c||ut,ze)),ut!=null?(gt==null&&(gt=ut),typeof ze.type=="function"&&ze.__k===ee.__k?ze.__d=Ze=L(ze,Ze,Z):Ze=te(Z,ze,ee,ht,ut,Ze),typeof ae.type=="function"&&(ae.__d=Ze)):Ze&&ee.__e==Ze&&Ze.parentNode!=Z&&(Ze=V(ee))}for(ae.__e=gt,ge=St;ge--;)ht[ge]!=null&&(typeof ae.type=="function"&&ht[ge].__e!=null&&ht[ge].__e==ae.__d&&(ae.__d=V(_e,ge+1)),Se(ht[ge],ht[ge]));if(it)for(ge=0;ge<it.length;ge++)be(it[ge],it[++ge],it[++ge])}function L(Z,$,ae){for(var _e,Ae=Z.__k,we=0;Ae&&we<Ae.length;we++)(_e=Ae[we])&&(_e.__=Z,$=typeof _e.type=="function"?L(_e,$,ae):te(ae,_e,_e,Ae,_e.__e,$));return $}function G(Z,$){return $=$||[],Z==null||typeof Z=="boolean"||(Array.isArray(Z)?Z.some(function(ae){G(ae,$)}):$.push(Z)),$}function te(Z,$,ae,_e,Ae,we){var qe,nt,Ze;if($.__d!==void 0)qe=$.__d,$.__d=void 0;else if(ae==null||Ae!=we||Ae.parentNode==null)e:if(we==null||we.parentNode!==Z)Z.appendChild(Ae),qe=null;else{for(nt=we,Ze=0;(nt=nt.nextSibling)&&Ze<_e.length;Ze+=2)if(nt==Ae)break e;Z.insertBefore(Ae,we),qe=we}return qe!==void 0?qe:Ae.nextSibling}function fe(Z,$,ae){$[0]==="-"?Z.setProperty($,ae):Z[$]=ae==null?"":typeof ae!="number"||T.test($)?ae:ae+"px"}function ce(Z,$,ae,_e,Ae){var we;e:if($==="style")if(typeof ae=="string")Z.style.cssText=ae;else{if(typeof _e=="string"&&(Z.style.cssText=_e=""),_e)for($ in _e)ae&&$ in ae||fe(Z.style,$,"");if(ae)for($ in ae)_e&&ae[$]===_e[$]||fe(Z.style,$,ae[$])}else if($[0]==="o"&&$[1]==="n")we=$!==($=$.replace(/Capture$/,"")),$=$.toLowerCase()in Z?$.toLowerCase().slice(2):$.slice(2),Z.l||(Z.l={}),Z.l[$+we]=ae,ae?_e||Z.addEventListener($,we?xe:ye,we):Z.removeEventListener($,we?xe:ye,we);else if($!=="dangerouslySetInnerHTML"){if(Ae)$=$.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if($!=="href"&&$!=="list"&&$!=="form"&&$!=="tabIndex"&&$!=="download"&&$ in Z)try{Z[$]=ae??"";break e}catch{}typeof ae=="function"||(ae!=null&&(ae!==!1||$[0]==="a"&&$[1]==="r")?Z.setAttribute($,ae):Z.removeAttribute($))}}function ye(Z){this.l[Z.type+!1](c.event?c.event(Z):Z)}function xe(Z){this.l[Z.type+!0](c.event?c.event(Z):Z)}function ve(Z,$,ae,_e,Ae,we,qe,nt,Ze){var Ye,ge,He,ee,ze,ut,gt,it,ht,St,Pt,at=$.type;if($.constructor!==void 0)return null;ae.__h!=null&&(Ze=ae.__h,nt=$.__e=ae.__e,$.__h=null,we=[nt]),(Ye=c.__b)&&Ye($);try{e:if(typeof at=="function"){if(it=$.props,ht=(Ye=at.contextType)&&_e[Ye.__c],St=Ye?ht?ht.props.value:Ye.__:_e,ae.__c?gt=(ge=$.__c=ae.__c).__=ge.__E:("prototype"in at&&at.prototype.render?$.__c=ge=new at(it,St):($.__c=ge=new q(it,St),ge.constructor=at,ge.render=Le),ht&&ht.sub(ge),ge.props=it,ge.state||(ge.state={}),ge.context=St,ge.__n=_e,He=ge.__d=!0,ge.__h=[]),ge.__s==null&&(ge.__s=ge.state),at.getDerivedStateFromProps!=null&&(ge.__s==ge.state&&(ge.__s=D({},ge.__s)),D(ge.__s,at.getDerivedStateFromProps(it,ge.__s))),ee=ge.props,ze=ge.state,He)at.getDerivedStateFromProps==null&&ge.componentWillMount!=null&&ge.componentWillMount(),ge.componentDidMount!=null&&ge.__h.push(ge.componentDidMount);else{if(at.getDerivedStateFromProps==null&&it!==ee&&ge.componentWillReceiveProps!=null&&ge.componentWillReceiveProps(it,St),!ge.__e&&ge.shouldComponentUpdate!=null&&ge.shouldComponentUpdate(it,ge.__s,St)===!1||$.__v===ae.__v){ge.props=it,ge.state=ge.__s,$.__v!==ae.__v&&(ge.__d=!1),ge.__v=$,$.__e=ae.__e,$.__k=ae.__k,$.__k.forEach(function(Nt){Nt&&(Nt.__=$)}),ge.__h.length&&qe.push(ge);break e}ge.componentWillUpdate!=null&&ge.componentWillUpdate(it,ge.__s,St),ge.componentDidUpdate!=null&&ge.__h.push(function(){ge.componentDidUpdate(ee,ze,ut)})}ge.context=St,ge.props=it,ge.state=ge.__s,(Ye=c.__r)&&Ye($),ge.__d=!1,ge.__v=$,ge.__P=Z,Ye=ge.render(ge.props,ge.state,ge.context),ge.state=ge.__s,ge.getChildContext!=null&&(_e=D(D({},_e),ge.getChildContext())),He||ge.getSnapshotBeforeUpdate==null||(ut=ge.getSnapshotBeforeUpdate(ee,ze)),Pt=Ye!=null&&Ye.type===ie&&Ye.key==null?Ye.props.children:Ye,B(Z,Array.isArray(Pt)?Pt:[Pt],$,ae,_e,Ae,we,qe,nt,Ze),ge.base=$.__e,$.__h=null,ge.__h.length&&qe.push(ge),gt&&(ge.__E=ge.__=null),ge.__e=!1}else we==null&&$.__v===ae.__v?($.__k=ae.__k,$.__e=ae.__e):$.__e=he(ae.__e,$,ae,_e,Ae,we,qe,Ze);(Ye=c.diffed)&&Ye($)}catch(Nt){$.__v=null,(Ze||we!=null)&&($.__e=nt,$.__h=!!Ze,we[we.indexOf(nt)]=null),c.__e(Nt,$,ae)}}function ue(Z,$){c.__c&&c.__c($,Z),Z.some(function(ae){try{Z=ae.__h,ae.__h=[],Z.some(function(_e){_e.call(ae)})}catch(_e){c.__e(_e,ae.__v)}})}function he(Z,$,ae,_e,Ae,we,qe,nt){var Ze,Ye,ge,He=ae.props,ee=$.props,ze=$.type,ut=0;if(ze==="svg"&&(Ae=!0),we!=null){for(;ut<we.length;ut++)if((Ze=we[ut])&&"setAttribute"in Ze==!!ze&&(ze?Ze.localName===ze:Ze.nodeType===3)){Z=Ze,we[ut]=null;break}}if(Z==null){if(ze===null)return document.createTextNode(ee);Z=Ae?document.createElementNS("http://www.w3.org/2000/svg",ze):document.createElement(ze,ee.is&&ee),we=null,nt=!1}if(ze===null)He===ee||nt&&Z.data===ee||(Z.data=ee);else{if(we=we&&l.call(Z.childNodes),Ye=(He=ae.props||M).dangerouslySetInnerHTML,ge=ee.dangerouslySetInnerHTML,!nt){if(we!=null)for(He={},ut=0;ut<Z.attributes.length;ut++)He[Z.attributes[ut].name]=Z.attributes[ut].value;(ge||Ye)&&(ge&&(Ye&&ge.__html==Ye.__html||ge.__html===Z.innerHTML)||(Z.innerHTML=ge&&ge.__html||""))}if(function(gt,it,ht,St,Pt){var at;for(at in ht)at==="children"||at==="key"||at in it||ce(gt,at,null,ht[at],St);for(at in it)Pt&&typeof it[at]!="function"||at==="children"||at==="key"||at==="value"||at==="checked"||ht[at]===it[at]||ce(gt,at,it[at],ht[at],St)}(Z,ee,He,Ae,nt),ge)$.__k=[];else if(ut=$.props.children,B(Z,Array.isArray(ut)?ut:[ut],$,ae,_e,Ae&&ze!=="foreignObject",we,qe,we?we[0]:ae.__k&&V(ae,0),nt),we!=null)for(ut=we.length;ut--;)we[ut]!=null&&C(we[ut]);nt||("value"in ee&&(ut=ee.value)!==void 0&&(ut!==He.value||ut!==Z.value||ze==="progress"&&!ut)&&ce(Z,"value",ut,He.value,!1),"checked"in ee&&(ut=ee.checked)!==void 0&&ut!==Z.checked&&ce(Z,"checked",ut,He.checked,!1))}return Z}function be(Z,$,ae){try{typeof Z=="function"?Z($):Z.current=$}catch(_e){c.__e(_e,ae)}}function Se(Z,$,ae){var _e,Ae;if(c.unmount&&c.unmount(Z),(_e=Z.ref)&&(_e.current&&_e.current!==Z.__e||be(_e,null,$)),(_e=Z.__c)!=null){if(_e.componentWillUnmount)try{_e.componentWillUnmount()}catch(we){c.__e(we,$)}_e.base=_e.__P=null}if(_e=Z.__k)for(Ae=0;Ae<_e.length;Ae++)_e[Ae]&&Se(_e[Ae],$,typeof Z.type!="function");ae||Z.__e==null||C(Z.__e),Z.__e=Z.__d=void 0}function Le(Z,$,ae){return this.constructor(Z,ae)}function $e(Z,$,ae){var _e,Ae,we;c.__&&c.__(Z,$),Ae=(_e=typeof ae=="function")?null:ae&&ae.__k||$.__k,we=[],ve($,Z=(!_e&&ae||$).__k=I(ie,null,[Z]),Ae||M,M,$.ownerSVGElement!==void 0,!_e&&ae?[ae]:Ae?null:$.firstChild?l.call($.childNodes):null,we,!_e&&ae?ae:Ae?Ae.__e:$.firstChild,_e),ue(we,Z)}function Me(Z,$){$e(Z,$,Me)}function Re(Z,$,ae){var _e,Ae,we,qe=D({},Z.props);for(we in $)we=="key"?_e=$[we]:we=="ref"?Ae=$[we]:qe[we]=$[we];return arguments.length>2&&(qe.children=arguments.length>3?l.call(arguments,2):ae),H(Z.type,qe,_e||Z.key,Ae||Z.ref,null)}function Ke(Z,$){var ae={__c:$="__cC"+S++,__:Z,Consumer:function(_e,Ae){return _e.children(Ae)},Provider:function(_e){var Ae,we;return this.getChildContext||(Ae=[],(we={})[$]=this,this.getChildContext=function(){return we},this.shouldComponentUpdate=function(qe){this.props.value!==qe.value&&Ae.some(z)},this.sub=function(qe){Ae.push(qe);var nt=qe.componentWillUnmount;qe.componentWillUnmount=function(){Ae.splice(Ae.indexOf(qe),1),nt&&nt.call(qe)}}),_e.children}};return ae.Provider.__=ae.Consumer.contextType=ae}l=j.slice,c={__e:function(Z,$){for(var ae,_e,Ae;$=$.__;)if((ae=$.__c)&&!ae.__)try{if((_e=ae.constructor)&&_e.getDerivedStateFromError!=null&&(ae.setState(_e.getDerivedStateFromError(Z)),Ae=ae.__d),ae.componentDidCatch!=null&&(ae.componentDidCatch(Z),Ae=ae.__d),Ae)return ae.__E=ae}catch(we){Z=we}throw Z}},g=0,q.prototype.setState=function(Z,$){var ae;ae=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=D({},this.state),typeof Z=="function"&&(Z=Z(D({},ae),this.props)),Z&&D(ae,Z),Z!=null&&this.__v&&($&&this.__h.push($),z(this))},q.prototype.forceUpdate=function(Z){this.__v&&(this.__e=!0,Z&&this.__h.push(Z),z(this))},q.prototype.render=ie,m=[],w=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,N.__r=0,S=0},function(s,f,o){(function(l,c){o.d(f,"a",function(){return z}),o.d(f,"b",function(){return Yo}),o.d(f,"c",function(){return In}),o.d(f,"d",function(){return et}),o.d(f,"e",function(){return De}),o.d(f,"f",function(){return Te}),o.d(f,"g",function(){return Ve}),o.d(f,"h",function(){return Ar}),o.d(f,"i",function(){return Pt}),o.d(f,"j",function(){return Be}),o.d(f,"k",function(){return Vn}),o.d(f,"l",function(){return Xo}),o.d(f,"m",function(){return gt}),o.d(f,"n",function(){return Pr}),o.d(f,"o",function(){return L}),o.d(f,"p",function(){return Fi}),o.d(f,"q",function(){return Wn}),o.d(f,"r",function(){return Gi}),o.d(f,"s",function(){return On}),o.d(f,"t",function(){return Ur}),o.d(f,"u",function(){return ao}),o.d(f,"v",function(){return zu}),o.d(f,"w",function(){return Xi}),o.d(f,"x",function(){return Vr}),o.d(f,"y",function(){return Tn}),o.d(f,"z",function(){return It}),o.d(f,"A",function(){return hn}),o.d(f,"B",function(){return $n}),o.d(f,"C",function(){return Ye}),o.d(f,"D",function(){return Yi}),o.d(f,"E",function(){return jr}),o.d(f,"F",function(){return Sr}),o.d(f,"G",function(){return Ru}),o.d(f,"H",function(){return Di}),o.d(f,"I",function(){return Gu}),o.d(f,"J",function(){return mn}),o.d(f,"K",function(){return oe}),o.d(f,"L",function(){return Zt}),o.d(f,"M",function(){return Vi});var g=[];Object.freeze(g);var m={};function w(){return++Xe.mobxGuid}function O(y){throw S(!1,y),"X"}function S(y,b){if(!y)throw new Error("[mobx] "+(b||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(m);function M(y){var b=!1;return function(){if(!b)return b=!0,y.apply(this,arguments)}}var j=function(){};function T(y){return y!==null&&typeof y=="object"}function D(y){if(y===null||typeof y!="object")return!1;var b=Object.getPrototypeOf(y);return b===Object.prototype||b===null}function C(y,b,E){Object.defineProperty(y,b,{enumerable:!1,writable:!0,configurable:!0,value:E})}function I(y,b){var E="isMobX"+y;return b.prototype[E]=!0,function(k){return T(k)&&k[E]===!0}}function H(y){return y instanceof Map}function J(y){return y instanceof Set}function ie(y){var b=new Set;for(var E in y)b.add(E);return Object.getOwnPropertySymbols(y).forEach(function(k){Object.getOwnPropertyDescriptor(y,k).enumerable&&b.add(k)}),Array.from(b)}function q(y){return y&&y.toString?y.toString():new String(y).toString()}function V(y){return y===null?null:typeof y=="object"?""+y:y}var K=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,z=Symbol("mobx administration"),N=function(){function y(b){b===void 0&&(b="Atom@"+w()),this.name=b,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=He.NOT_TRACKING}return y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},y.prototype.reportObserved=function(){return ki(this)},y.prototype.reportChanged=function(){gn(),function(b){b.lowestObserverState!==He.STALE&&(b.lowestObserverState=He.STALE,b.observers.forEach(function(E){E.dependenciesState===He.UP_TO_DATE&&(E.isTracing!==ee.NONE&&Yn(E,b),E.onBecomeStale()),E.dependenciesState=He.STALE}))}(this),bn()},y.prototype.toString=function(){return this.name},y}(),B=I("Atom",N);function L(y,b,E){b===void 0&&(b=j),E===void 0&&(E=j);var k,X=new N(y);return b!==j&&Ri("onBecomeObserved",X,b,k),E!==j&&jr(X,E),X}var G={identity:function(y,b){return y===b},structural:function(y,b){return Wo(y,b)},default:function(y,b){return Object.is(y,b)},shallow:function(y,b){return Wo(y,b,1)}},te=function(y,b){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var X in k)k.hasOwnProperty(X)&&(E[X]=k[X])},te(y,b)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var fe=function(){return fe=Object.assign||function(y){for(var b,E=1,k=arguments.length;E<k;E++)for(var X in b=arguments[E])Object.prototype.hasOwnProperty.call(b,X)&&(y[X]=b[X]);return y},fe.apply(this,arguments)};function ce(y){var b=typeof Symbol=="function"&&y[Symbol.iterator],E=0;return b?b.call(y):{next:function(){return y&&E>=y.length&&(y=void 0),{value:y&&y[E++],done:!y}}}}function ye(y,b){var E=typeof Symbol=="function"&&y[Symbol.iterator];if(!E)return y;var k,X,Q=E.call(y),pe=[];try{for(;(b===void 0||b-- >0)&&!(k=Q.next()).done;)pe.push(k.value)}catch(je){X={error:je}}finally{try{k&&!k.done&&(E=Q.return)&&E.call(Q)}finally{if(X)throw X.error}}return pe}function xe(){for(var y=[],b=0;b<arguments.length;b++)y=y.concat(ye(arguments[b]));return y}var ve=Symbol("mobx did run lazy initializers"),ue=Symbol("mobx pending decorators"),he={},be={};function Se(y,b){var E=b?he:be;return E[y]||(E[y]={configurable:!0,enumerable:b,get:function(){return Le(this),this[y]},set:function(k){Le(this),this[y]=k}})}function Le(y){var b,E;if(y[ve]!==!0){var k=y[ue];if(k){C(y,ve,!0);var X=xe(Object.getOwnPropertySymbols(k),Object.keys(k));try{for(var Q=ce(X),pe=Q.next();!pe.done;pe=Q.next()){var je=k[pe.value];je.propertyCreator(y,je.prop,je.descriptor,je.decoratorTarget,je.decoratorArguments)}}catch(Ge){b={error:Ge}}finally{try{pe&&!pe.done&&(E=Q.return)&&E.call(Q)}finally{if(b)throw b.error}}}}}function $e(y,b){return function(){var E,k=function(X,Q,pe,je){if(je===!0)return b(X,Q,pe,X,E),null;if(!Object.prototype.hasOwnProperty.call(X,ue)){var Ge=X[ue];C(X,ue,fe({},Ge))}return X[ue][Q]={prop:Q,propertyCreator:b,descriptor:pe,decoratorTarget:X,decoratorArguments:E},Se(Q,y)};return Me(arguments)?(E=g,k.apply(null,arguments)):(E=Array.prototype.slice.call(arguments),k)}}function Me(y){return(y.length===2||y.length===3)&&(typeof y[1]=="string"||typeof y[1]=="symbol")||y.length===4&&y[3]===!0}function Re(y,b,E){return Vr(y)?y:Array.isArray(y)?Ye.array(y,{name:E}):D(y)?Ye.object(y,void 0,{name:E}):H(y)?Ye.map(y,{name:E}):J(y)?Ye.set(y,{name:E}):y}function Ke(y){return y}function Z(y){S(y);var b=$e(!0,function(k,X,Q,pe,je){var Ge=Q?Q.initializer?Q.initializer.call(k):Q.value:void 0;$r(k).addObservableProp(X,Ge,y)}),E=(l!==void 0&&l.env,b);return E.enhancer=y,E}var $={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ae(y){return y==null?$:typeof y=="string"?{name:y,deep:!0,proxy:!0}:y}Object.freeze($);var _e=Z(Re),Ae=Z(function(y,b,E){return y==null||hn(y)||Tn(y)||It(y)||dn(y)?y:Array.isArray(y)?Ye.array(y,{name:E,deep:!1}):D(y)?Ye.object(y,void 0,{name:E,deep:!1}):H(y)?Ye.map(y,{name:E,deep:!1}):J(y)?Ye.set(y,{name:E,deep:!1}):O(!1)}),we=Z(Ke),qe=Z(function(y,b,E){return Wo(y,b)?b:y});function nt(y){return y.defaultDecorator?y.defaultDecorator.enhancer:y.deep===!1?Ke:Re}var Ze={box:function(y,b){arguments.length>2&&ge("box");var E=ae(b);return new Tt(y,nt(E),E.name,!0,E.equals)},array:function(y,b){arguments.length>2&&ge("array");var E=ae(b);return Uo(y,nt(E),E.name)},map:function(y,b){arguments.length>2&&ge("map");var E=ae(b);return new Yo(y,nt(E),E.name)},set:function(y,b){arguments.length>2&&ge("set");var E=ae(b);return new co(y,nt(E),E.name)},object:function(y,b,E){typeof arguments[1]=="string"&&ge("object");var k=ae(E);if(k.proxy===!1)return Wn({},y,b,k);var X=Ii(k),Q=Wn({},void 0,void 0,k),pe=Xu(Q);return Li(pe,y,b,X),pe},ref:we,shallow:Ae,deep:_e,struct:qe},Ye=function(y,b,E){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return _e.apply(null,arguments);if(Vr(y))return y;var k=D(y)?Ye.object(y,b,E):Array.isArray(y)?Ye.array(y,b):H(y)?Ye.map(y,b):J(y)?Ye.set(y,b):y;if(k!==y)return k;O(!1)};function ge(y){O("Expected one or two arguments to observable."+y+". Did you accidentally try to use observable."+y+" as decorator?")}Object.keys(Ze).forEach(function(y){return Ye[y]=Ze[y]});var He,ee,ze=$e(!1,function(y,b,E,k,X){var Q=E.get,pe=E.set,je=X[0]||{};$r(y).addComputedProp(y,b,fe({get:Q,set:pe,context:y},je))}),ut=ze({equals:G.structural}),gt=function(y,b,E){if(typeof b=="string"||y!==null&&typeof y=="object"&&arguments.length===1)return ze.apply(null,arguments);var k=typeof b=="object"?b:{};return k.get=y,k.set=typeof b=="function"?b:k.set,k.name=k.name||y.name||"",new Fn(k)};gt.struct=ut,function(y){y[y.NOT_TRACKING=-1]="NOT_TRACKING",y[y.UP_TO_DATE=0]="UP_TO_DATE",y[y.POSSIBLY_STALE=1]="POSSIBLY_STALE",y[y.STALE=2]="STALE"}(He||(He={})),function(y){y[y.NONE=0]="NONE",y[y.LOG=1]="LOG",y[y.BREAK=2]="BREAK"}(ee||(ee={}));var it=function(y){this.cause=y};function ht(y){return y instanceof it}function St(y){switch(y.dependenciesState){case He.UP_TO_DATE:return!1;case He.NOT_TRACKING:case He.STALE:return!0;case He.POSSIBLY_STALE:for(var b=Te(!0),E=Y(),k=y.observing,X=k.length,Q=0;Q<X;Q++){var pe=k[Q];if(Un(pe)){if(Xe.disableErrorBoundaries)pe.get();else try{pe.get()}catch{return se(E),De(b),!0}if(y.dependenciesState===He.STALE)return se(E),De(b),!0}}return Fe(y),se(E),De(b),!1}}function Pt(){return Xe.trackingDerivation!==null}function at(y){var b=y.observers.size>0;Xe.computationDepth>0&&b&&O(!1),Xe.allowStateChanges||!b&&Xe.enforceActions!=="strict"||O(!1)}function Nt(y,b,E){var k=Te(!0);Fe(y),y.newObserving=new Array(y.observing.length+100),y.unboundDepsCount=0,y.runId=++Xe.runId;var X,Q=Xe.trackingDerivation;if(Xe.trackingDerivation=y,Xe.disableErrorBoundaries===!0)X=b.call(E);else try{X=b.call(E)}catch(pe){X=new it(pe)}return Xe.trackingDerivation=Q,function(pe){for(var je=pe.observing,Ge=pe.observing=pe.newObserving,pt=He.UP_TO_DATE,ot=0,xt=pe.unboundDepsCount,ct=0;ct<xt;ct++)(_t=Ge[ct]).diffValue===0&&(_t.diffValue=1,ot!==ct&&(Ge[ot]=_t),ot++),_t.dependenciesState>pt&&(pt=_t.dependenciesState);for(Ge.length=ot,pe.newObserving=null,xt=je.length;xt--;)(_t=je[xt]).diffValue===0&&Mi(_t,pe),_t.diffValue=0;for(;ot--;){var _t;(_t=Ge[ot]).diffValue===1&&(_t.diffValue=0,Tu(_t,pe))}pt!==He.UP_TO_DATE&&(pe.dependenciesState=pt,pe.onBecomeStale())}(y),De(k),X}function F(y){var b=y.observing;y.observing=[];for(var E=b.length;E--;)Mi(b[E],y);y.dependenciesState=He.NOT_TRACKING}function oe(y){var b=Y();try{return y()}finally{se(b)}}function Y(){var y=Xe.trackingDerivation;return Xe.trackingDerivation=null,y}function se(y){Xe.trackingDerivation=y}function Te(y){var b=Xe.allowStateReads;return Xe.allowStateReads=y,b}function De(y){Xe.allowStateReads=y}function Fe(y){if(y.dependenciesState!==He.UP_TO_DATE){y.dependenciesState=He.UP_TO_DATE;for(var b=y.observing,E=b.length;E--;)b[E].lowestObserverState=He.UP_TO_DATE}}var lt=0,Ht=1,$t=Object.getOwnPropertyDescriptor(function(){},"name");$t&&$t.configurable;function Ct(y,b,E){var k=function(){return Rt(y,b,E||this,arguments)};return k.isMobxAction=!0,k}function Rt(y,b,E,k){var X=Be();try{return b.apply(E,k)}catch(Q){throw X.error=Q,Q}finally{Ve(X)}}function Be(y,b,E){var k=0,X=Y();gn();var Q={prevDerivation:X,prevAllowStateChanges:rt(!0),prevAllowStateReads:Te(!0),notifySpy:!1,startTime:k,actionId:Ht++,parentActionId:lt};return lt=Q.actionId,Q}function Ve(y){lt!==y.actionId&&O("invalid action stack. did you forget to finish an action?"),lt=y.parentActionId,y.error!==void 0&&(Xe.suppressReactionErrors=!0),wt(y.prevAllowStateChanges),De(y.prevAllowStateReads),bn(),se(y.prevDerivation),y.notifySpy,Xe.suppressReactionErrors=!1}function et(y,b){var E,k=rt(y);try{E=b()}finally{wt(k)}return E}function rt(y){var b=Xe.allowStateChanges;return Xe.allowStateChanges=y,b}function wt(y){Xe.allowStateChanges=y}var Tt=function(y){function b(E,k,X,Q,pe){X===void 0&&(X="ObservableValue@"+w()),pe===void 0&&(pe=G.default);var je=y.call(this,X)||this;return je.enhancer=k,je.name=X,je.equals=pe,je.hasUnreportedChange=!1,je.value=k(E,void 0,X),je}return function(E,k){function X(){this.constructor=E}te(E,k),E.prototype=k===null?Object.create(k):(X.prototype=k.prototype,new X)}(b,y),b.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},b.prototype.set=function(E){this.value,(E=this.prepareNewValue(E))!==Xe.UNCHANGED&&this.setNewValue(E)},b.prototype.prepareNewValue=function(E){if(at(this),rn(this)){var k=vt(this,{object:this,type:"update",newValue:E});if(!k)return Xe.UNCHANGED;E=k.newValue}return E=this.enhancer(E,this.value,this.name),this.equals(this.value,E)?Xe.UNCHANGED:E},b.prototype.setNewValue=function(E){var k=this.value;this.value=E,this.reportChanged(),_n(this)&&Kt(this,{type:"update",object:this,newValue:E,oldValue:k})},b.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},b.prototype.intercept=function(E){return lr(this,E)},b.prototype.observe=function(E,k){return k&&E({object:this,type:"update",newValue:this.value,oldValue:void 0}),fr(this,E)},b.prototype.toJSON=function(){return this.get()},b.prototype.toString=function(){return this.name+"["+this.value+"]"},b.prototype.valueOf=function(){return V(this.get())},b.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},b}(N),ur=I("ObservableValue",Tt),Fn=function(){function y(b){this.dependenciesState=He.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=He.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+w(),this.value=new it(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=ee.NONE,S(b.get,"missing option for computed: get"),this.derivation=b.get,this.name=b.name||"ComputedValue@"+w(),b.set&&(this.setter=Ct(this.name+"-setter",b.set)),this.equals=b.equals||(b.compareStructural||b.struct?G.structural:G.default),this.scope=b.context,this.requiresReaction=!!b.requiresReaction,this.keepAlive=!!b.keepAlive}return y.prototype.onBecomeStale=function(){(function(b){b.lowestObserverState===He.UP_TO_DATE&&(b.lowestObserverState=He.POSSIBLY_STALE,b.observers.forEach(function(E){E.dependenciesState===He.UP_TO_DATE&&(E.dependenciesState=He.POSSIBLY_STALE,E.isTracing!==ee.NONE&&Yn(E,b),E.onBecomeStale())}))})(this)},y.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(b){return b()})},y.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(b){return b()})},y.prototype.get=function(){this.isComputing&&O("Cycle detected in computation "+this.name+": "+this.derivation),Xe.inBatch!==0||this.observers.size!==0||this.keepAlive?(ki(this),St(this)&&this.trackAndCompute()&&function(E){E.lowestObserverState!==He.STALE&&(E.lowestObserverState=He.STALE,E.observers.forEach(function(k){k.dependenciesState===He.POSSIBLY_STALE?k.dependenciesState=He.STALE:k.dependenciesState===He.UP_TO_DATE&&(E.lowestObserverState=He.UP_TO_DATE)}))}(this)):St(this)&&(this.warnAboutUntrackedRead(),gn(),this.value=this.computeValue(!1),bn());var b=this.value;if(ht(b))throw b.cause;return b},y.prototype.peek=function(){var b=this.computeValue(!1);if(ht(b))throw b.cause;return b},y.prototype.set=function(b){if(this.setter){S(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,b)}finally{this.isRunningSetter=!1}}else S(!1,!1)},y.prototype.trackAndCompute=function(){var b=this.value,E=this.dependenciesState===He.NOT_TRACKING,k=this.computeValue(!0),X=E||ht(b)||ht(k)||!this.equals(b,k);return X&&(this.value=k),X},y.prototype.computeValue=function(b){var E;if(this.isComputing=!0,Xe.computationDepth++,b)E=Nt(this,this.derivation,this.scope);else if(Xe.disableErrorBoundaries===!0)E=this.derivation.call(this.scope);else try{E=this.derivation.call(this.scope)}catch(k){E=new it(k)}return Xe.computationDepth--,this.isComputing=!1,E},y.prototype.suspend=function(){this.keepAlive||(F(this),this.value=void 0)},y.prototype.observe=function(b,E){var k=this,X=!0,Q=void 0;return Xo(function(){var pe=k.get();if(!X||E){var je=Y();b({type:"update",object:k,newValue:pe,oldValue:Q}),se(je)}X=!1,Q=pe})},y.prototype.warnAboutUntrackedRead=function(){},y.prototype.toJSON=function(){return this.get()},y.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},y.prototype.valueOf=function(){return V(this.get())},y.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},y}(),Un=I("ComputedValue",Fn),Fr=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},ku={};function Bo(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:ku}var Pn=!0,Pi=!1,Xe=function(){var y=Bo();return y.__mobxInstanceCount>0&&!y.__mobxGlobals&&(Pn=!1),y.__mobxGlobals&&y.__mobxGlobals.version!==new Fr().version&&(Pn=!1),Pn?y.__mobxGlobals?(y.__mobxInstanceCount+=1,y.__mobxGlobals.UNCHANGED||(y.__mobxGlobals.UNCHANGED={}),y.__mobxGlobals):(y.__mobxInstanceCount=1,y.__mobxGlobals=new Fr):(setTimeout(function(){Pi||O("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new Fr)}();function Tu(y,b){y.observers.add(b),y.lowestObserverState>b.dependenciesState&&(y.lowestObserverState=b.dependenciesState)}function Mi(y,b){y.observers.delete(b),y.observers.size===0&&Ai(y)}function Ai(y){y.isPendingUnobservation===!1&&(y.isPendingUnobservation=!0,Xe.pendingUnobservations.push(y))}function gn(){Xe.inBatch++}function bn(){if(--Xe.inBatch==0){Ti();for(var y=Xe.pendingUnobservations,b=0;b<y.length;b++){var E=y[b];E.isPendingUnobservation=!1,E.observers.size===0&&(E.isBeingObserved&&(E.isBeingObserved=!1,E.onBecomeUnobserved()),E instanceof Fn&&E.suspend())}Xe.pendingUnobservations=[]}}function ki(y){var b=Xe.trackingDerivation;return b!==null?(b.runId!==y.lastAccessedBy&&(y.lastAccessedBy=b.runId,b.newObserving[b.unboundDepsCount++]=y,y.isBeingObserved||(y.isBeingObserved=!0,y.onBecomeObserved())),!0):(y.observers.size===0&&Xe.inBatch>0&&Ai(y),!1)}function Yn(y,b){if(y.isTracing===ee.BREAK){var E=[];Er(Ur(y),E,1),new Function(`debugger;
/*
Tracing '`+y.name+`'

You are entering this break point because derivation '`+y.name+"' is being traced and '"+b.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(y instanceof Fn?y.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+E.join(`
`)+`
*/
    `)()}}function Er(y,b,E){b.length>=1e3?b.push("(and many more)"):(b.push(""+new Array(E).join("	")+y.name),y.dependencies&&y.dependencies.forEach(function(k){return Er(k,b,E+1)}))}var In=function(){function y(b,E,k,X){b===void 0&&(b="Reaction@"+w()),X===void 0&&(X=!1),this.name=b,this.onInvalidate=E,this.errorHandler=k,this.requiresObservable=X,this.observing=[],this.newObserving=[],this.dependenciesState=He.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+w(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=ee.NONE}return y.prototype.onBecomeStale=function(){this.schedule()},y.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Xe.pendingReactions.push(this),Ti())},y.prototype.isScheduled=function(){return this._isScheduled},y.prototype.runReaction=function(){if(!this.isDisposed){if(gn(),this._isScheduled=!1,St(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(b){this.reportExceptionInDerivation(b)}}bn()}},y.prototype.track=function(b){if(!this.isDisposed){gn(),this._isRunning=!0;var E=Nt(this,b,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&F(this),ht(E)&&this.reportExceptionInDerivation(E.cause),bn()}},y.prototype.reportExceptionInDerivation=function(b){var E=this;if(this.errorHandler)this.errorHandler(b,this);else{if(Xe.disableErrorBoundaries)throw b;Xe.suppressReactionErrors,Xe.globalReactionErrorHandlers.forEach(function(k){return k(b,E)})}},y.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(gn(),F(this),bn()))},y.prototype.getDisposer=function(){var b=this.dispose.bind(this);return b[z]=this,b},y.prototype.toString=function(){return"Reaction["+this.name+"]"},y.prototype.trace=function(b){b===void 0&&(b=!1),function(){for(var E=[],k=0;k<arguments.length;k++)E[k]=arguments[k];var X=!1;typeof E[E.length-1]=="boolean"&&(X=E.pop());var Q=An(E);if(!Q)return O(!1);Q.isTracing,ee.NONE,Q.isTracing=X?ee.BREAK:ee.LOG}(this,b)},y}(),Go=function(y){return y()};function Ti(){Xe.inBatch>0||Xe.isRunningReactions||Go(Du)}function Du(){Xe.isRunningReactions=!0;for(var y=Xe.pendingReactions,b=0;y.length>0;){++b==100&&y.splice(0);for(var E=y.splice(0),k=0,X=E.length;k<X;k++)E[k].runReaction()}Xe.isRunningReactions=!1}var io=I("Reaction",In);function Nu(y){var b=Go;Go=function(E){return y(function(){return b(E)})}}function Di(y){return function(){}}function Cu(){O(!1)}function sr(y){return function(b,E,k){if(k){if(k.value)return{value:Ct(y,k.value),enumerable:!1,configurable:!0,writable:!0};var X=k.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Ct(y,X.call(this))}}}return Ni(y).apply(this,arguments)}}function Ni(y){return function(b,E,k){Object.defineProperty(b,E,{configurable:!0,enumerable:!1,get:function(){},set:function(X){C(this,E,Vn(y,X))}})}}var Vn=function(y,b,E,k){return arguments.length===1&&typeof y=="function"?Ct(y.name||"<unnamed action>",y):arguments.length===2&&typeof b=="function"?Ct(y,b):arguments.length===1&&typeof y=="string"?sr(y):k!==!0?sr(b).apply(null,arguments):void C(y,b,Ct(y.name||b,E.value,this))};function Ru(y,b){return Rt(typeof y=="string"?y:y.name||"<unnamed action>",typeof y=="function"?y:b,this,void 0)}function ao(y){return typeof y=="function"&&y.isMobxAction===!0}function Ho(y,b,E){C(y,b,Ct(b,E.bind(y)))}function Xo(y,b){b===void 0&&(b=m);var E,k=b&&b.name||y.name||"Autorun@"+w();if(!b.scheduler&&!b.delay)E=new In(k,function(){this.track(pe)},b.onError,b.requiresObservable);else{var X=Ci(b),Q=!1;E=new In(k,function(){Q||(Q=!0,X(function(){Q=!1,E.isDisposed||E.track(pe)}))},b.onError,b.requiresObservable)}function pe(){y(E)}return E.schedule(),E.getDisposer()}Vn.bound=function(y,b,E,k){return k===!0?(Ho(y,b,E.value),null):E?{configurable:!0,enumerable:!1,get:function(){return Ho(this,b,E.value||E.initializer.call(this)),this[b]},set:Cu}:{enumerable:!1,configurable:!0,set:function(X){Ho(this,b,X)},get:function(){}}};var Iu=function(y){return y()};function Ci(y){return y.scheduler?y.scheduler:y.delay?function(b){return setTimeout(b,y.delay)}:Iu}function Sr(y,b,E){E===void 0&&(E=m);var k,X,Q,pe=E.name||"Reaction@"+w(),je=Vn(pe,E.onError?(k=E.onError,X=b,function(){try{return X.apply(this,arguments)}catch(At){k.call(this,At)}}):b),Ge=!E.scheduler&&!E.delay,pt=Ci(E),ot=!0,xt=!1,ct=E.compareStructural?G.structural:E.equals||G.default,_t=new In(pe,function(){ot||Ge?wn():xt||(xt=!0,pt(wn))},E.onError,E.requiresObservable);function wn(){if(xt=!1,!_t.isDisposed){var At=!1;_t.track(function(){var on=y(_t);At=ot||!ct(Q,on),Q=on}),ot&&E.fireImmediately&&je(Q,_t),ot||At!==!0||je(Q,_t),ot&&(ot=!1)}}return _t.schedule(),_t.getDisposer()}function jr(y,b,E){return Ri("onBecomeUnobserved",y,b,E)}function Ri(y,b,E,k){var X=typeof k=="function"?On(b,E):On(b),Q=typeof k=="function"?k:E,pe=y+"Listeners";return X[pe]?X[pe].add(Q):X[pe]=new Set([Q]),typeof X[y]!="function"?O(!1):function(){var je=X[pe];je&&(je.delete(Q),je.size===0&&delete X[pe])}}function Pr(y){var b=y.enforceActions,E=y.computedRequiresReaction,k=y.computedConfigurable,X=y.disableErrorBoundaries,Q=y.reactionScheduler,pe=y.reactionRequiresObservable,je=y.observableRequiresReaction;if(y.isolateGlobalState===!0&&((Xe.pendingReactions.length||Xe.inBatch||Xe.isRunningReactions)&&O("isolateGlobalState should be called before MobX is running any reactions"),Pi=!0,Pn&&(--Bo().__mobxInstanceCount==0&&(Bo().__mobxGlobals=void 0),Xe=new Fr)),b!==void 0){var Ge=void 0;switch(b){case!0:case"observed":Ge=!0;break;case!1:case"never":Ge=!1;break;case"strict":case"always":Ge="strict";break;default:O("Invalid value for 'enforceActions': '"+b+"', expected 'never', 'always' or 'observed'")}Xe.enforceActions=Ge,Xe.allowStateChanges=Ge!==!0&&Ge!=="strict"}E!==void 0&&(Xe.computedRequiresReaction=!!E),pe!==void 0&&(Xe.reactionRequiresObservable=!!pe),je!==void 0&&(Xe.observableRequiresReaction=!!je,Xe.allowStateReads=!Xe.observableRequiresReaction),k!==void 0&&(Xe.computedConfigurable=!!k),X!==void 0&&(Xe.disableErrorBoundaries=!!X),Q&&Nu(Q)}function Wn(y,b,E,k){var X=Ii(k=ae(k));return Le(y),$r(y,k.name,X.enhancer),b&&Li(y,b,E,X),y}function Ii(y){return y.defaultDecorator||(y.deep===!1?we:_e)}function Li(y,b,E,k){var X,Q;gn();try{var pe=K(b);try{for(var je=ce(pe),Ge=je.next();!Ge.done;Ge=je.next()){var pt=Ge.value,ot=Object.getOwnPropertyDescriptor(b,pt),xt=(E&&pt in E?E[pt]:ot.get?ze:k)(y,pt,ot,!0);xt&&Object.defineProperty(y,pt,xt)}}catch(ct){X={error:ct}}finally{try{Ge&&!Ge.done&&(Q=je.return)&&Q.call(je)}finally{if(X)throw X.error}}}finally{bn()}}function Ur(y,b){return zi(On(y,b))}function zi(y){var b,E,k={name:y.name};return y.observing&&y.observing.length>0&&(k.dependencies=(b=y.observing,E=[],b.forEach(function(X){E.indexOf(X)===-1&&E.push(X)}),E).map(zi)),k}var Lu=0;function Bi(){this.message="FLOW_CANCELLED"}function Gi(y){arguments.length!==1&&O("Flow expects 1 argument and cannot be used as decorator");var b=y.name||"<unnamed flow>";return function(){var E,k=this,X=arguments,Q=++Lu,pe=Vn(b+" - runid: "+Q+" - init",y).apply(k,X),je=void 0,Ge=new Promise(function(pt,ot){var xt=0;function ct(At){var on;je=void 0;try{on=Vn(b+" - runid: "+Q+" - yield "+xt++,pe.next).call(pe,At)}catch(Kr){return ot(Kr)}wn(on)}function _t(At){var on;je=void 0;try{on=Vn(b+" - runid: "+Q+" - yield "+xt++,pe.throw).call(pe,At)}catch(Kr){return ot(Kr)}wn(on)}function wn(At){if(!At||typeof At.then!="function")return At.done?pt(At.value):(je=Promise.resolve(At.value)).then(ct,_t);At.then(wn,ot)}E=ot,ct(void 0)});return Ge.cancel=Vn(b+" - runid: "+Q+" - cancel",function(){try{je&&Yr(je);var pt=pe.return(void 0),ot=Promise.resolve(pt.value);ot.then(j,j),Yr(ot),E(new Bi)}catch(xt){E(xt)}}),Ge}}function Yr(y){typeof y.cancel=="function"&&y.cancel()}function Hi(y,b){if(y==null)return!1;if(b!==void 0){if(hn(y)===!1||!y[z].values.has(b))return!1;var E=On(y,b);return Un(E)}return Un(y)}function zu(y){return arguments.length>1?O(!1):Hi(y)}function Xi(y,b){return typeof b!="string"?O(!1):Hi(y,b)}function Fo(y,b){return y!=null&&(b!==void 0?!!hn(y)&&y[z].values.has(b):hn(y)||!!y[z]||B(y)||io(y)||Un(y))}function Vr(y){return arguments.length!==1&&O(!1),Fo(y)}function $n(y){return hn(y)?y[z].getKeys():It(y)||dn(y)?Array.from(y.keys()):Tn(y)?y.map(function(b,E){return E}):O(!1)}function Zt(y){return hn(y)?$n(y).map(function(b){return y[b]}):It(y)?$n(y).map(function(b){return y.get(b)}):dn(y)?Array.from(y.values()):Tn(y)?y.slice():O(!1)}function Fi(y){return hn(y)?$n(y).map(function(b){return[b,y[b]]}):It(y)?$n(y).map(function(b){return[b,y.get(b)]}):dn(y)?Array.from(y.entries()):Tn(y)?y.map(function(b,E){return[E,b]}):O(!1)}function Ui(y,b,E){if(arguments.length!==2||dn(y))if(hn(y)){var k=y[z],X=k.values.get(b);X?k.write(b,E):k.addObservableProp(b,E,k.defaultEnhancer)}else if(It(y))y.set(b,E);else if(dn(y))y.add(b);else{if(!Tn(y))return O(!1);typeof b!="number"&&(b=parseInt(b,10)),S(b>=0,"Not a valid index: '"+b+"'"),gn(),b>=y.length&&(y.length=b+1),y[b]=E,bn()}else{gn();var Q=b;try{for(var pe in Q)Ui(y,pe,Q[pe])}finally{bn()}}}function Yi(y,b,E,k){return typeof E=="function"?function(X,Q,pe,je){return Ar(X,Q).observe(pe,je)}(y,b,E,k):function(X,Q,pe){return Ar(X).observe(Q,pe)}(y,b,E)}Bi.prototype=Object.create(Error.prototype);var Bu={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function cr(y,b,E,k){return k.detectCycles&&y.set(b,E),E}function Mn(y,b,E){if(!b.recurseEverything&&!Vr(y)||typeof y!="object")return y;if(y===null)return null;if(y instanceof Date)return y;if(ur(y))return Mn(y.get(),b,E);if(Vr(y)&&$n(y),b.detectCycles===!0&&y!==null&&E.has(y))return E.get(y);if(Tn(y)||Array.isArray(y)){var k=cr(E,y,[],b),X=y.map(function(ct){return Mn(ct,b,E)});k.length=X.length;for(var Q=0,pe=X.length;Q<pe;Q++)k[Q]=X[Q];return k}if(dn(y)||Object.getPrototypeOf(y)===Set.prototype){if(b.exportMapsAsObjects===!1){var je=cr(E,y,new Set,b);return y.forEach(function(ct){je.add(Mn(ct,b,E))}),je}var Ge=cr(E,y,[],b);return y.forEach(function(ct){Ge.push(Mn(ct,b,E))}),Ge}if(It(y)||Object.getPrototypeOf(y)===Map.prototype){if(b.exportMapsAsObjects===!1){var pt=cr(E,y,new Map,b);return y.forEach(function(ct,_t){pt.set(_t,Mn(ct,b,E))}),pt}var ot=cr(E,y,{},b);return y.forEach(function(ct,_t){ot[_t]=Mn(ct,b,E)}),ot}var xt=cr(E,y,{},b);return ie(y).forEach(function(ct){xt[ct]=Mn(y[ct],b,E)}),xt}function Gu(y,b){var E;return typeof b=="boolean"&&(b={detectCycles:b}),b||(b=Bu),b.detectCycles=b.detectCycles===void 0?b.recurseEverything===!0:b.detectCycles===!0,b.detectCycles&&(E=new Map),Mn(y,b,E)}function An(y){switch(y.length){case 0:return Xe.trackingDerivation;case 1:return On(y[0]);case 2:return On(y[0],y[1])}}function mn(y,b){b===void 0&&(b=void 0),gn();try{return y.apply(b)}finally{bn()}}function Vi(y,b,E){return arguments.length===1||b&&typeof b=="object"?Hu(y,b):Wi(y,b,E||{})}function Wi(y,b,E){var k;typeof E.timeout=="number"&&(k=setTimeout(function(){if(!Q[z].isDisposed){Q();var pe=new Error("WHEN_TIMEOUT");if(!E.onError)throw pe;E.onError(pe)}},E.timeout)),E.name=E.name||"When@"+w();var X=Ct(E.name+"-effect",b),Q=Xo(function(pe){y()&&(pe.dispose(),k&&clearTimeout(k),X())},E);return Q}function Hu(y,b){var E,k=new Promise(function(X,Q){var pe=Wi(y,X,fe(fe({},b),{onError:Q}));E=function(){pe(),Q("WHEN_CANCELLED")}});return k.cancel=E,k}function uo(y){return y[z]}function Kn(y){return typeof y=="string"||typeof y=="number"||typeof y=="symbol"}var Wr={has:function(y,b){if(b===z||b==="constructor"||b===ve)return!0;var E=uo(y);return Kn(b)?E.has(b):b in y},get:function(y,b){if(b===z||b==="constructor"||b===ve)return y[b];var E=uo(y),k=E.values.get(b);if(k instanceof N){var X=k.get();return X===void 0&&E.has(b),X}return Kn(b)&&E.has(b),y[b]},set:function(y,b,E){return!!Kn(b)&&(Ui(y,b,E),!0)},deleteProperty:function(y,b){return!!Kn(b)&&(uo(y).remove(b),!0)},ownKeys:function(y){return uo(y).keysAtom.reportObserved(),Reflect.ownKeys(y)},preventExtensions:function(y){return O("Dynamic observable objects cannot be frozen"),!1}};function Xu(y){var b=new Proxy(y,Wr);return y[z].proxy=b,b}function rn(y){return y.interceptors!==void 0&&y.interceptors.length>0}function lr(y,b){var E=y.interceptors||(y.interceptors=[]);return E.push(b),M(function(){var k=E.indexOf(b);k!==-1&&E.splice(k,1)})}function vt(y,b){var E=Y();try{for(var k=xe(y.interceptors||[]),X=0,Q=k.length;X<Q&&(S(!(b=k[X](b))||b.type,"Intercept handlers should return nothing or a change object"),b);X++);return b}finally{se(E)}}function _n(y){return y.changeListeners!==void 0&&y.changeListeners.length>0}function fr(y,b){var E=y.changeListeners||(y.changeListeners=[]);return E.push(b),M(function(){var k=E.indexOf(b);k!==-1&&E.splice(k,1)})}function Kt(y,b){var E=Y(),k=y.changeListeners;if(k){for(var X=0,Q=(k=k.slice()).length;X<Q;X++)k[X](b);se(E)}}var $i={get:function(y,b){return b===z?y[z]:b==="length"?y[z].getArrayLength():typeof b=="number"?kn.get.call(y,b):typeof b!="string"||isNaN(b)?kn.hasOwnProperty(b)?kn[b]:y[b]:kn.get.call(y,parseInt(b))},set:function(y,b,E){return b==="length"&&y[z].setArrayLength(E),typeof b=="number"&&kn.set.call(y,b,E),typeof b=="symbol"||isNaN(b)?y[b]=E:kn.set.call(y,parseInt(b),E),!0},preventExtensions:function(y){return O("Observable arrays cannot be frozen"),!1}};function Uo(y,b,E,k){E===void 0&&(E="ObservableArray@"+w()),k===void 0&&(k=!1);var X,Q,pe,je=new Ki(E,b,k);X=je.values,Q=z,pe=je,Object.defineProperty(X,Q,{enumerable:!1,writable:!1,configurable:!0,value:pe});var Ge=new Proxy(je.values,$i);if(je.proxy=Ge,y&&y.length){var pt=rt(!0);je.spliceWithArray(0,0,y),wt(pt)}return Ge}var Ki=function(){function y(b,E,k){this.owned=k,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new N(b||"ObservableArray@"+w()),this.enhancer=function(X,Q){return E(X,Q,b+"[..]")}}return y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.dehanceValues=function(b){return this.dehancer!==void 0&&b.length>0?b.map(this.dehancer):b},y.prototype.intercept=function(b){return lr(this,b)},y.prototype.observe=function(b,E){return E===void 0&&(E=!1),E&&b({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),fr(this,b)},y.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},y.prototype.setArrayLength=function(b){if(typeof b!="number"||b<0)throw new Error("[mobx.array] Out of range: "+b);var E=this.values.length;if(b!==E)if(b>E){for(var k=new Array(b-E),X=0;X<b-E;X++)k[X]=void 0;this.spliceWithArray(E,0,k)}else this.spliceWithArray(b,E-b)},y.prototype.updateArrayLength=function(b,E){if(b!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=E},y.prototype.spliceWithArray=function(b,E,k){var X=this;at(this.atom);var Q=this.values.length;if(b===void 0?b=0:b>Q?b=Q:b<0&&(b=Math.max(0,Q+b)),E=arguments.length===1?Q-b:E==null?0:Math.max(0,Math.min(E,Q-b)),k===void 0&&(k=g),rn(this)){var pe=vt(this,{object:this.proxy,type:"splice",index:b,removedCount:E,added:k});if(!pe)return g;E=pe.removedCount,k=pe.added}k=k.length===0?k:k.map(function(Ge){return X.enhancer(Ge,void 0)});var je=this.spliceItemsIntoValues(b,E,k);return E===0&&k.length===0||this.notifyArraySplice(b,k,je),this.dehanceValues(je)},y.prototype.spliceItemsIntoValues=function(b,E,k){var X;if(k.length<1e4)return(X=this.values).splice.apply(X,xe([b,E],k));var Q=this.values.slice(b,b+E);return this.values=this.values.slice(0,b).concat(k,this.values.slice(b+E)),Q},y.prototype.notifyArrayChildUpdate=function(b,E,k){var X=!this.owned&&!1,Q=_n(this),pe=Q||X?{object:this.proxy,type:"update",index:b,newValue:E,oldValue:k}:null;this.atom.reportChanged(),Q&&Kt(this,pe)},y.prototype.notifyArraySplice=function(b,E,k){var X=!this.owned&&!1,Q=_n(this),pe=Q||X?{object:this.proxy,type:"splice",index:b,removed:k,added:E,removedCount:k.length,addedCount:E.length}:null;this.atom.reportChanged(),Q&&Kt(this,pe)},y}(),kn={intercept:function(y){return this[z].intercept(y)},observe:function(y,b){return b===void 0&&(b=!1),this[z].observe(y,b)},clear:function(){return this.splice(0)},replace:function(y){var b=this[z];return b.spliceWithArray(0,b.values.length,y)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(y,b){for(var E=[],k=2;k<arguments.length;k++)E[k-2]=arguments[k];var X=this[z];switch(arguments.length){case 0:return[];case 1:return X.spliceWithArray(y);case 2:return X.spliceWithArray(y,b)}return X.spliceWithArray(y,b,E)},spliceWithArray:function(y,b,E){return this[z].spliceWithArray(y,b,E)},push:function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var E=this[z];return E.spliceWithArray(E.values.length,0,y),E.values.length},pop:function(){return this.splice(Math.max(this[z].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var E=this[z];return E.spliceWithArray(0,0,y),E.values.length},reverse:function(){var y=this.slice();return y.reverse.apply(y,arguments)},sort:function(y){var b=this.slice();return b.sort.apply(b,arguments)},remove:function(y){var b=this[z],E=b.dehanceValues(b.values).indexOf(y);return E>-1&&(this.splice(E,1),!0)},get:function(y){var b=this[z];if(b&&y<b.values.length)return b.atom.reportObserved(),b.dehanceValue(b.values[y])},set:function(y,b){var E=this[z],k=E.values;if(y<k.length){at(E.atom);var X=k[y];if(rn(E)){var Q=vt(E,{type:"update",object:E.proxy,index:y,newValue:b});if(!Q)return;b=Q.newValue}(b=E.enhancer(b,X))!==X&&(k[y]=b,E.notifyArrayChildUpdate(y,b,X))}else{if(y!==k.length)throw new Error("[mobx.array] Index out of bounds, "+y+" is larger than "+k.length);E.spliceWithArray(y,0,[b])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(y){typeof Array.prototype[y]=="function"&&(kn[y]=function(){var b=this[z];b.atom.reportObserved();var E=b.dehanceValues(b.values);return E[y].apply(E,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(y){typeof Array.prototype[y]=="function"&&(kn[y]=function(b,E){var k=this,X=this[z];return X.atom.reportObserved(),X.dehanceValues(X.values)[y](function(Q,pe){return b.call(E,Q,pe,k)},E)})}),["reduce","reduceRight"].forEach(function(y){kn[y]=function(){var b=this,E=this[z];E.atom.reportObserved();var k=arguments[0];return arguments[0]=function(X,Q,pe){return Q=E.dehanceValue(Q),k(X,Q,pe,b)},E.values[y].apply(E.values,arguments)}});var qi,so=I("ObservableArrayAdministration",Ki);function Tn(y){return T(y)&&so(y[z])}var Zi,Fu={},Yo=function(){function y(b,E,k){if(E===void 0&&(E=Re),k===void 0&&(k="ObservableMap@"+w()),this.enhancer=E,this.name=k,this[qi]=Fu,this._keysAtom=L(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(b)}return y.prototype._has=function(b){return this._data.has(b)},y.prototype.has=function(b){var E=this;if(!Xe.trackingDerivation)return this._has(b);var k=this._hasMap.get(b);if(!k){var X=k=new Tt(this._has(b),Ke,this.name+"."+q(b)+"?",!1);this._hasMap.set(b,X),jr(X,function(){return E._hasMap.delete(b)})}return k.get()},y.prototype.set=function(b,E){var k=this._has(b);if(rn(this)){var X=vt(this,{type:k?"update":"add",object:this,newValue:E,name:b});if(!X)return this;E=X.newValue}return k?this._updateValue(b,E):this._addValue(b,E),this},y.prototype.delete=function(b){var E=this;if(at(this._keysAtom),rn(this)&&!(X=vt(this,{type:"delete",object:this,name:b})))return!1;if(this._has(b)){var k=_n(this),X=k?{type:"delete",object:this,oldValue:this._data.get(b).value,name:b}:null;return mn(function(){E._keysAtom.reportChanged(),E._updateHasMapEntry(b,!1),E._data.get(b).setNewValue(void 0),E._data.delete(b)}),k&&Kt(this,X),!0}return!1},y.prototype._updateHasMapEntry=function(b,E){var k=this._hasMap.get(b);k&&k.setNewValue(E)},y.prototype._updateValue=function(b,E){var k=this._data.get(b);if((E=k.prepareNewValue(E))!==Xe.UNCHANGED){var X=_n(this),Q=X?{type:"update",object:this,oldValue:k.value,name:b,newValue:E}:null;k.setNewValue(E),X&&Kt(this,Q)}},y.prototype._addValue=function(b,E){var k=this;at(this._keysAtom),mn(function(){var pe=new Tt(E,k.enhancer,k.name+"."+q(b),!1);k._data.set(b,pe),E=pe.value,k._updateHasMapEntry(b,!0),k._keysAtom.reportChanged()});var X=_n(this),Q=X?{type:"add",object:this,name:b,newValue:E}:null;X&&Kt(this,Q)},y.prototype.get=function(b){return this.has(b)?this.dehanceValue(this._data.get(b).get()):this.dehanceValue(void 0)},y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},y.prototype.values=function(){var b=this,E=this.keys();return ho({next:function(){var k=E.next(),X=k.done,Q=k.value;return{done:X,value:X?void 0:b.get(Q)}}})},y.prototype.entries=function(){var b=this,E=this.keys();return ho({next:function(){var k=E.next(),X=k.done,Q=k.value;return{done:X,value:X?void 0:[Q,b.get(Q)]}}})},y.prototype[qi=z,Symbol.iterator]=function(){return this.entries()},y.prototype.forEach=function(b,E){var k,X;try{for(var Q=ce(this),pe=Q.next();!pe.done;pe=Q.next()){var je=ye(pe.value,2),Ge=je[0],pt=je[1];b.call(E,pt,Ge,this)}}catch(ot){k={error:ot}}finally{try{pe&&!pe.done&&(X=Q.return)&&X.call(Q)}finally{if(k)throw k.error}}},y.prototype.merge=function(b){var E=this;return It(b)&&(b=b.toJS()),mn(function(){var k=rt(!0);try{D(b)?ie(b).forEach(function(X){return E.set(X,b[X])}):Array.isArray(b)?b.forEach(function(X){var Q=ye(X,2),pe=Q[0],je=Q[1];return E.set(pe,je)}):H(b)?(b.constructor!==Map&&O("Cannot initialize from classes that inherit from Map: "+b.constructor.name),b.forEach(function(X,Q){return E.set(Q,X)})):b!=null&&O("Cannot initialize map from "+b)}finally{wt(k)}}),this},y.prototype.clear=function(){var b=this;mn(function(){oe(function(){var E,k;try{for(var X=ce(b.keys()),Q=X.next();!Q.done;Q=X.next()){var pe=Q.value;b.delete(pe)}}catch(je){E={error:je}}finally{try{Q&&!Q.done&&(k=X.return)&&k.call(X)}finally{if(E)throw E.error}}})})},y.prototype.replace=function(b){var E=this;return mn(function(){var k,X,Q,pe,je=function(an){if(H(an)||It(an))return an;if(Array.isArray(an))return new Map(an);if(D(an)){var ra=new Map;for(var qr in an)ra.set(qr,an[qr]);return ra}return O("Cannot convert to map from '"+an+"'")}(b),Ge=new Map,pt=!1;try{for(var ot=ce(E._data.keys()),xt=ot.next();!xt.done;xt=ot.next()){var ct=xt.value;if(!je.has(ct))if(E.delete(ct))pt=!0;else{var _t=E._data.get(ct);Ge.set(ct,_t)}}}catch(an){k={error:an}}finally{try{xt&&!xt.done&&(X=ot.return)&&X.call(ot)}finally{if(k)throw k.error}}try{for(var wn=ce(je.entries()),At=wn.next();!At.done;At=wn.next()){var on=ye(At.value,2),Kr=(ct=on[0],_t=on[1],E._data.has(ct));if(E.set(ct,_t),E._data.has(ct)){var Yu=E._data.get(ct);Ge.set(ct,Yu),Kr||(pt=!0)}}}catch(an){Q={error:an}}finally{try{At&&!At.done&&(pe=wn.return)&&pe.call(wn)}finally{if(Q)throw Q.error}}if(!pt)if(E._data.size!==Ge.size)E._keysAtom.reportChanged();else for(var ta=E._data.keys(),na=Ge.keys(),yo=ta.next(),Ko=na.next();!yo.done;){if(yo.value!==Ko.value){E._keysAtom.reportChanged();break}yo=ta.next(),Ko=na.next()}E._data=Ge}),this},Object.defineProperty(y.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.toPOJO=function(){var b,E,k={};try{for(var X=ce(this),Q=X.next();!Q.done;Q=X.next()){var pe=ye(Q.value,2),je=pe[0],Ge=pe[1];k[typeof je=="symbol"?je:q(je)]=Ge}}catch(pt){b={error:pt}}finally{try{Q&&!Q.done&&(E=X.return)&&E.call(X)}finally{if(b)throw b.error}}return k},y.prototype.toJS=function(){return new Map(this)},y.prototype.toJSON=function(){return this.toPOJO()},y.prototype.toString=function(){var b=this;return this.name+"[{ "+Array.from(this.keys()).map(function(E){return q(E)+": "+b.get(E)}).join(", ")+" }]"},y.prototype.observe=function(b,E){return fr(this,b)},y.prototype.intercept=function(b){return lr(this,b)},y}(),It=I("ObservableMap",Yo),Mr={},co=function(){function y(b,E,k){if(E===void 0&&(E=Re),k===void 0&&(k="ObservableSet@"+w()),this.name=k,this[Zi]=Mr,this._data=new Set,this._atom=L(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(X,Q){return E(X,Q,k)},b&&this.replace(b)}return y.prototype.dehanceValue=function(b){return this.dehancer!==void 0?this.dehancer(b):b},y.prototype.clear=function(){var b=this;mn(function(){oe(function(){var E,k;try{for(var X=ce(b._data.values()),Q=X.next();!Q.done;Q=X.next()){var pe=Q.value;b.delete(pe)}}catch(je){E={error:je}}finally{try{Q&&!Q.done&&(k=X.return)&&k.call(X)}finally{if(E)throw E.error}}})})},y.prototype.forEach=function(b,E){var k,X;try{for(var Q=ce(this),pe=Q.next();!pe.done;pe=Q.next()){var je=pe.value;b.call(E,je,je,this)}}catch(Ge){k={error:Ge}}finally{try{pe&&!pe.done&&(X=Q.return)&&X.call(Q)}finally{if(k)throw k.error}}},Object.defineProperty(y.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),y.prototype.add=function(b){var E=this;if(at(this._atom),rn(this)&&!(X=vt(this,{type:"add",object:this,newValue:b})))return this;if(!this.has(b)){mn(function(){E._data.add(E.enhancer(b,void 0)),E._atom.reportChanged()});var k=_n(this),X=k?{type:"add",object:this,newValue:b}:null;k&&Kt(this,X)}return this},y.prototype.delete=function(b){var E=this;if(rn(this)&&!(X=vt(this,{type:"delete",object:this,oldValue:b})))return!1;if(this.has(b)){var k=_n(this),X=k?{type:"delete",object:this,oldValue:b}:null;return mn(function(){E._atom.reportChanged(),E._data.delete(b)}),k&&Kt(this,X),!0}return!1},y.prototype.has=function(b){return this._atom.reportObserved(),this._data.has(this.dehanceValue(b))},y.prototype.entries=function(){var b=0,E=Array.from(this.keys()),k=Array.from(this.values());return ho({next:function(){var X=b;return b+=1,X<k.length?{value:[E[X],k[X]],done:!1}:{done:!0}}})},y.prototype.keys=function(){return this.values()},y.prototype.values=function(){this._atom.reportObserved();var b=this,E=0,k=Array.from(this._data.values());return ho({next:function(){return E<k.length?{value:b.dehanceValue(k[E++]),done:!1}:{done:!0}}})},y.prototype.replace=function(b){var E=this;return dn(b)&&(b=b.toJS()),mn(function(){var k=rt(!0);try{Array.isArray(b)||J(b)?(E.clear(),b.forEach(function(X){return E.add(X)})):b!=null&&O("Cannot initialize set from "+b)}finally{wt(k)}}),this},y.prototype.observe=function(b,E){return fr(this,b)},y.prototype.intercept=function(b){return lr(this,b)},y.prototype.toJS=function(){return new Set(this)},y.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},y.prototype[Zi=z,Symbol.iterator]=function(){return this.values()},y}(),dn=I("ObservableSet",co),Ji=function(){function y(b,E,k,X){E===void 0&&(E=new Map),this.target=b,this.values=E,this.name=k,this.defaultEnhancer=X,this.keysAtom=new N(k+".keys")}return y.prototype.read=function(b){return this.values.get(b).get()},y.prototype.write=function(b,E){var k=this.target,X=this.values.get(b);if(X instanceof Fn)X.set(E);else{if(rn(this)){if(!(pe=vt(this,{type:"update",object:this.proxy||k,name:b,newValue:E})))return;E=pe.newValue}if((E=X.prepareNewValue(E))!==Xe.UNCHANGED){var Q=_n(this),pe=Q?{type:"update",object:this.proxy||k,oldValue:X.value,name:b,newValue:E}:null;X.setNewValue(E),Q&&Kt(this,pe)}}},y.prototype.has=function(b){var E=this.pendingKeys||(this.pendingKeys=new Map),k=E.get(b);if(k)return k.get();var X=!!this.values.get(b);return k=new Tt(X,Ke,this.name+"."+q(b)+"?",!1),E.set(b,k),k.get()},y.prototype.addObservableProp=function(b,E,k){k===void 0&&(k=this.defaultEnhancer);var X=this.target;if(rn(this)){var Q=vt(this,{object:this.proxy||X,name:b,type:"add",newValue:E});if(!Q)return;E=Q.newValue}var pe=new Tt(E,k,this.name+"."+q(b),!1);this.values.set(b,pe),E=pe.value,Object.defineProperty(X,b,function(je){return lo[je]||(lo[je]={configurable:!0,enumerable:!0,get:function(){return this[z].read(je)},set:function(Ge){this[z].write(je,Ge)}})}(b)),this.notifyPropertyAddition(b,E)},y.prototype.addComputedProp=function(b,E,k){var X,Q,pe,je=this.target;k.name=k.name||this.name+"."+q(E),this.values.set(E,new Fn(k)),(b===je||(X=b,Q=E,!(pe=Object.getOwnPropertyDescriptor(X,Q))||pe.configurable!==!1&&pe.writable!==!1))&&Object.defineProperty(b,E,function(Ge){return fo[Ge]||(fo[Ge]={configurable:Xe.computedConfigurable,enumerable:!1,get:function(){return po(this).read(Ge)},set:function(pt){po(this).write(Ge,pt)}})}(E))},y.prototype.remove=function(b){if(this.values.has(b)){var E=this.target;if(rn(this)&&!(Ge=vt(this,{object:this.proxy||E,name:b,type:"remove"})))return;try{gn();var k=_n(this),X=!1,Q=this.values.get(b),pe=Q&&Q.get();if(Q&&Q.set(void 0),this.keysAtom.reportChanged(),this.values.delete(b),this.pendingKeys){var je=this.pendingKeys.get(b);je&&je.set(!1)}delete this.target[b];var Ge=k?{type:"remove",object:this.proxy||E,oldValue:pe,name:b}:null;k&&Kt(this,Ge)}finally{bn()}}},y.prototype.illegalAccess=function(b,E){},y.prototype.observe=function(b,E){return fr(this,b)},y.prototype.intercept=function(b){return lr(this,b)},y.prototype.notifyPropertyAddition=function(b,E){var k=_n(this),X=k?{type:"add",object:this.proxy||this.target,name:b,newValue:E}:null;if(k&&Kt(this,X),this.pendingKeys){var Q=this.pendingKeys.get(b);Q&&Q.set(!0)}this.keysAtom.reportChanged()},y.prototype.getKeys=function(){var b,E;this.keysAtom.reportObserved();var k=[];try{for(var X=ce(this.values),Q=X.next();!Q.done;Q=X.next()){var pe=ye(Q.value,2),je=pe[0];pe[1]instanceof Tt&&k.push(je)}}catch(Ge){b={error:Ge}}finally{try{Q&&!Q.done&&(E=X.return)&&E.call(X)}finally{if(b)throw b.error}}return k},y}();function $r(y,b,E){if(b===void 0&&(b=""),E===void 0&&(E=Re),Object.prototype.hasOwnProperty.call(y,z))return y[z];D(y)||(b=(y.constructor.name||"ObservableObject")+"@"+w()),b||(b="ObservableObject@"+w());var k=new Ji(y,new Map,q(b),E);return C(y,z,k),k}var lo=Object.create(null),fo=Object.create(null);function po(y){var b=y[z];return b||(Le(y),y[z])}var Qi=I("ObservableObjectAdministration",Ji);function hn(y){return!!T(y)&&(Le(y),Qi(y[z]))}function On(y,b){if(typeof y=="object"&&y!==null){if(Tn(y))return b!==void 0&&O(!1),y[z].atom;if(dn(y))return y[z];if(It(y)){var E=y;return b===void 0?E._keysAtom:((k=E._data.get(b)||E._hasMap.get(b))||O(!1),k)}var k;if(Le(y),b&&!y[z]&&y[b],hn(y))return b?((k=y[z].values.get(b))||O(!1),k):O(!1);if(B(y)||Un(y)||io(y))return y}else if(typeof y=="function"&&io(y[z]))return y[z];return O(!1)}function Ar(y,b){return y||O("Expecting some object"),b!==void 0?Ar(On(y,b)):B(y)||Un(y)||io(y)||It(y)||dn(y)?y:(Le(y),y[z]?y[z]:void O(!1))}var Vo=Object.prototype.toString;function Wo(y,b,E){return E===void 0&&(E=-1),$o(y,b,E)}function $o(y,b,E,k,X){if(y===b)return y!==0||1/y==1/b;if(y==null||b==null)return!1;if(y!=y)return b!=b;var Q=typeof y;if(Q!=="function"&&Q!=="object"&&typeof b!="object")return!1;var pe=Vo.call(y);if(pe!==Vo.call(b))return!1;switch(pe){case"[object RegExp]":case"[object String]":return""+y==""+b;case"[object Number]":return+y!=+y?+b!=+b:+y==0?1/+y==1/b:+y==+b;case"[object Date]":case"[object Boolean]":return+y==+b;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(y)===Symbol.valueOf.call(b);case"[object Map]":case"[object Set]":E>=0&&E++}y=ea(y),b=ea(b);var je=pe==="[object Array]";if(!je){if(typeof y!="object"||typeof b!="object")return!1;var Ge=y.constructor,pt=b.constructor;if(Ge!==pt&&!(typeof Ge=="function"&&Ge instanceof Ge&&typeof pt=="function"&&pt instanceof pt)&&"constructor"in y&&"constructor"in b)return!1}if(E===0)return!1;E<0&&(E=-1),X=X||[];for(var ot=(k=k||[]).length;ot--;)if(k[ot]===y)return X[ot]===b;if(k.push(y),X.push(b),je){if((ot=y.length)!==b.length)return!1;for(;ot--;)if(!$o(y[ot],b[ot],E-1,k,X))return!1}else{var xt=Object.keys(y),ct=void 0;if(ot=xt.length,Object.keys(b).length!==ot)return!1;for(;ot--;)if(!Uu(b,ct=xt[ot])||!$o(y[ct],b[ct],E-1,k,X))return!1}return k.pop(),X.pop(),!0}function ea(y){return Tn(y)?y.slice():H(y)||It(y)||J(y)||dn(y)?Array.from(y.entries()):y}function Uu(y,b){return Object.prototype.hasOwnProperty.call(y,b)}function ho(y){return y[Symbol.iterator]=pr,y}function pr(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Di,extras:{getDebugName:function(y,b){return(b!==void 0?On(y,b):hn(y)||It(y)||dn(y)?Ar(y):On(y)).name}},$mobx:z})}).call(this,o(155),o(82))},function(s,f,o){var l=o(116),c=o(44),g=o(179);l||c(Object.prototype,"toString",g,{unsafe:!0})},function(s,f,o){var l=o(40),c=o(83),g=o(70),m=o(56),w=o(111),O="Array Iterator",S=m.set,M=m.getterFor(O);s.exports=w(Array,"Array",function(j,T){S(this,{type:O,target:l(j),index:0,kind:T})},function(){var j=M(this),T=j.target,D=j.kind,C=j.index++;return!T||C>=T.length?(j.target=void 0,{value:void 0,done:!0}):D=="keys"?{value:C,done:!1}:D=="values"?{value:T[C],done:!1}:{value:[C,T[C]],done:!1}},"values"),g.Arguments=g.Array,c("keys"),c("values"),c("entries")},function(s,f,o){var l=o(7),c=o(147),g=o(148),m=o(3),w=o(57),O=o(27),S=O("iterator"),M=O("toStringTag"),j=m.values,T=function(C,I){if(C){if(C[S]!==j)try{w(C,S,j)}catch{C[S]=j}if(C[M]||w(C,M,I),c[I]){for(var H in m)if(C[H]!==m[H])try{w(C,H,m[H])}catch{C[H]=m[H]}}}};for(var D in c)T(l[D]&&l[D].prototype,D);T(g,"DOMTokenList")},function(s,f,o){var l=o(17),c=o(7),g=o(46),m=o(76),w=o(35),O=o(15),S=o(64),M=o(36),j=o(109),T=o(19),D=o(34),C=o(99),I=o(28),H=o(33),J=o(58),ie=o(88),q=o(32),V=o(38),K=o(40),z=o(87),N=o(41),B=o(71),L=o(54),G=o(66),te=o(72),fe=o(139),ce=o(112),ye=o(51),xe=o(37),ve=o(93),ue=o(101),he=o(44),be=o(84),Se=o(91),Le=o(69),$e=o(85),Me=o(27),Re=o(149),Ke=o(150),Z=o(73),$=o(56),ae=o(74).forEach,_e=Se("hidden"),Ae="Symbol",we=Me("toPrimitive"),qe=$.set,nt=$.getterFor(Ae),Ze=Object.prototype,Ye=c.Symbol,ge=Ye&&Ye.prototype,He=c.TypeError,ee=c.QObject,ze=g("JSON","stringify"),ut=ye.f,gt=xe.f,it=fe.f,ht=ve.f,St=O([].push),Pt=be("symbols"),at=be("op-symbols"),Nt=be("string-to-symbol-registry"),F=be("symbol-to-string-registry"),oe=be("wks"),Y=!ee||!ee.prototype||!ee.prototype.findChild,se=M&&T(function(){return L(gt({},"a",{get:function(){return gt(this,"a",{value:7}).a}})).a!=7})?function(Be,Ve,et){var rt=ut(Ze,Ve);rt&&delete Ze[Ve],gt(Be,Ve,et),rt&&Be!==Ze&&gt(Ze,Ve,rt)}:gt,Te=function(Be,Ve){var et=Pt[Be]=L(ge);return qe(et,{type:Ae,tag:Be,description:Ve}),M||(et.description=Ve),et},De=function(Be,Ve,et){Be===Ze&&De(at,Ve,et),q(Be);var rt=z(Ve);return q(et),D(Pt,rt)?(et.enumerable?(D(Be,_e)&&Be[_e][rt]&&(Be[_e][rt]=!1),et=L(et,{enumerable:B(0,!1)})):(D(Be,_e)||gt(Be,_e,B(1,{})),Be[_e][rt]=!0),se(Be,rt,et)):gt(Be,rt,et)},Fe=function(Be,Ve){q(Be);var et=K(Ve),rt=G(et).concat(Ct(et));return ae(rt,function(wt){M&&!w(lt,et,wt)||De(Be,wt,et[wt])}),Be},lt=function(Be){var Ve=z(Be),et=w(ht,this,Ve);return!(this===Ze&&D(Pt,Ve)&&!D(at,Ve))&&(!(et||!D(this,Ve)||!D(Pt,Ve)||D(this,_e)&&this[_e][Ve])||et)},Ht=function(Be,Ve){var et=K(Be),rt=z(Ve);if(et!==Ze||!D(Pt,rt)||D(at,rt)){var wt=ut(et,rt);return!wt||!D(Pt,rt)||D(et,_e)&&et[_e][rt]||(wt.enumerable=!0),wt}},$t=function(Be){var Ve=it(K(Be)),et=[];return ae(Ve,function(rt){D(Pt,rt)||D(Le,rt)||St(et,rt)}),et},Ct=function(Be){var Ve=Be===Ze,et=it(Ve?at:K(Be)),rt=[];return ae(et,function(wt){!D(Pt,wt)||Ve&&!D(Ze,wt)||St(rt,Pt[wt])}),rt};if(j||(Ye=function(){if(J(ge,this))throw He("Symbol is not a constructor");var Be=arguments.length&&arguments[0]!==void 0?N(arguments[0]):void 0,Ve=$e(Be),et=function(rt){this===Ze&&w(et,at,rt),D(this,_e)&&D(this[_e],Ve)&&(this[_e][Ve]=!1),se(this,Ve,B(1,rt))};return M&&Y&&se(Ze,Ve,{configurable:!0,set:et}),Te(Ve,Be)},he(ge=Ye.prototype,"toString",function(){return nt(this).tag}),he(Ye,"withoutSetter",function(Be){return Te($e(Be),Be)}),ve.f=lt,xe.f=De,ye.f=Ht,te.f=fe.f=$t,ce.f=Ct,Re.f=function(Be){return Te(Me(Be),Be)},M&&(gt(ge,"description",{configurable:!0,get:function(){return nt(this).description}}),S||he(Ze,"propertyIsEnumerable",lt,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!j,sham:!j},{Symbol:Ye}),ae(G(oe),function(Be){Ke(Be)}),l({target:Ae,stat:!0,forced:!j},{for:function(Be){var Ve=N(Be);if(D(Nt,Ve))return Nt[Ve];var et=Ye(Ve);return Nt[Ve]=et,F[et]=Ve,et},keyFor:function(Be){if(!ie(Be))throw He(Be+" is not a symbol");if(D(F,Be))return F[Be]},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),l({target:"Object",stat:!0,forced:!j,sham:!M},{create:function(Be,Ve){return Ve===void 0?L(Be):Fe(L(Be),Ve)},defineProperty:De,defineProperties:Fe,getOwnPropertyDescriptor:Ht}),l({target:"Object",stat:!0,forced:!j},{getOwnPropertyNames:$t,getOwnPropertySymbols:Ct}),l({target:"Object",stat:!0,forced:T(function(){ce.f(1)})},{getOwnPropertySymbols:function(Be){return ce.f(V(Be))}}),ze&&l({target:"JSON",stat:!0,forced:!j||T(function(){var Be=Ye();return ze([Be])!="[null]"||ze({a:Be})!="{}"||ze(Object(Be))!="{}"})},{stringify:function(Be,Ve,et){var rt=ue(arguments),wt=Ve;if((H(Ve)||Be!==void 0)&&!ie(Be))return C(Ve)||(Ve=function(Tt,ur){if(I(wt)&&(ur=w(wt,this,Tt,ur)),!ie(ur))return ur}),rt[1]=Ve,m(ze,null,rt)}}),!ge[we]){var Rt=ge.valueOf;he(ge,we,function(Be){return w(Rt,this)})}Z(Ye,Ae),Le[_e]=!0},function(s,f,o){var l=o(146).charAt,c=o(41),g=o(56),m=o(111),w="String Iterator",O=g.set,S=g.getterFor(w);m(String,"String",function(M){O(this,{type:w,string:c(M),index:0})},function(){var M,j=S(this),T=j.string,D=j.index;return D>=T.length?{value:void 0,done:!0}:(M=l(T,D),j.index+=M.length,{value:M,done:!1})})},function(s,f,o){(function(l){var c=function(g){return g&&g.Math==Math&&g};s.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(s,f,o){var l=o(17),c=o(36),g=o(7),m=o(15),w=o(34),O=o(28),S=o(58),M=o(41),j=o(37).f,T=o(134),D=g.Symbol,C=D&&D.prototype;if(c&&O(D)&&(!("description"in C)||D().description!==void 0)){var I={},H=function(){var N=arguments.length<1||arguments[0]===void 0?void 0:M(arguments[0]),B=S(C,this)?new D(N):N===void 0?D():D(N);return N===""&&(I[B]=!0),B};T(H,D),H.prototype=C,C.constructor=H;var J=String(D("test"))=="Symbol(test)",ie=m(C.toString),q=m(C.valueOf),V=/^Symbol\((.*)\)[^)]+$/,K=m("".replace),z=m("".slice);j(C,"description",{configurable:!0,get:function(){var N=q(this),B=ie(N);if(w(I,N))return"";var L=J?z(B,7,-1):K(B,V,"$1");return L===""?void 0:L}}),l({global:!0,forced:!0},{Symbol:H})}},function(s,f,o){o(150)("iterator")},function(s,f,o){o.d(f,"a",function(){return m.a}),o.d(f,"c",function(){return m.e}),o.d(f,"h",function(){return V}),o.d(f,"i",function(){return J}),o.d(f,"j",function(){return I}),o.d(f,"b",function(){return ye}),o.d(f,"e",function(){return he}),o.d(f,"f",function(){return xe}),o.d(f,"g",function(){return Pt});var l,c,g,m=o(0),w=0,O=[],S=m.i.__b,M=m.i.__r,j=m.i.diffed,T=m.i.__c,D=m.i.unmount;function C(F,oe){m.i.__h&&m.i.__h(c,F,w||oe),w=0;var Y=c.__H||(c.__H={__:[],__h:[]});return F>=Y.__.length&&Y.__.push({}),Y.__[F]}function I(F){return w=1,H(te,F)}function H(F,oe,Y){var se=C(l++,2);return se.t=F,se.__c||(se.__=[Y?Y(oe):te(void 0,oe),function(Te){var De=se.t(se.__[0],Te);se.__[0]!==De&&(se.__=[De,se.__[1]],se.__c.setState({}))}],se.__c=c),se.__}function J(F,oe){var Y=C(l++,3);!m.i.__s&&G(Y.__H,oe)&&(Y.__=F,Y.__H=oe,c.__H.__h.push(Y))}function ie(F,oe){var Y=C(l++,4);!m.i.__s&&G(Y.__H,oe)&&(Y.__=F,Y.__H=oe,c.__h.push(Y))}function q(F,oe){var Y=C(l++,7);return G(Y.__H,oe)&&(Y.__=F(),Y.__H=oe,Y.__h=F),Y.__}function V(F,oe){return w=8,q(function(){return F},oe)}function K(){var F;for(O.sort(function(oe,Y){return oe.__v.__b-Y.__v.__b});F=O.pop();)if(F.__P)try{F.__H.__h.forEach(B),F.__H.__h.forEach(L),F.__H.__h=[]}catch(oe){F.__H.__h=[],m.i.__e(oe,F.__v)}}m.i.__b=function(F){c=null,S&&S(F)},m.i.__r=function(F){M&&M(F),l=0;var oe=(c=F.__c).__H;oe&&(oe.__h.forEach(B),oe.__h.forEach(L),oe.__h=[])},m.i.diffed=function(F){j&&j(F);var oe=F.__c;oe&&oe.__H&&oe.__H.__h.length&&(O.push(oe)!==1&&g===m.i.requestAnimationFrame||((g=m.i.requestAnimationFrame)||N)(K)),c=null},m.i.__c=function(F,oe){oe.some(function(Y){try{Y.__h.forEach(B),Y.__h=Y.__h.filter(function(se){return!se.__||L(se)})}catch(se){oe.some(function(Te){Te.__h&&(Te.__h=[])}),oe=[],m.i.__e(se,Y.__v)}}),T&&T(F,oe)},m.i.unmount=function(F){D&&D(F);var oe,Y=F.__c;Y&&Y.__H&&(Y.__H.__.forEach(function(se){try{B(se)}catch(Te){oe=Te}}),oe&&m.i.__e(oe,Y.__v))};var z=typeof requestAnimationFrame=="function";function N(F){var oe,Y=function(){clearTimeout(se),z&&cancelAnimationFrame(oe),setTimeout(F)},se=setTimeout(Y,100);z&&(oe=requestAnimationFrame(Y))}function B(F){var oe=c,Y=F.__c;typeof Y=="function"&&(F.__c=void 0,Y()),c=oe}function L(F){var oe=c;F.__c=F.__(),c=oe}function G(F,oe){return!F||F.length!==oe.length||oe.some(function(Y,se){return Y!==F[se]})}function te(F,oe){return typeof oe=="function"?oe(F):oe}function fe(F,oe){for(var Y in oe)F[Y]=oe[Y];return F}function ce(F,oe){for(var Y in F)if(Y!=="__source"&&!(Y in oe))return!0;for(var se in oe)if(se!=="__source"&&F[se]!==oe[se])return!0;return!1}function ye(F){this.props=F}function xe(F,oe){function Y(Te){var De=this.props.ref,Fe=De==Te.ref;return!Fe&&De&&(De.call?De(null):De.current=null),oe?!oe(this.props,Te)||!Fe:ce(this.props,Te)}function se(Te){return this.shouldComponentUpdate=Y,Object(m.e)(F,Te)}return se.displayName="Memo("+(F.displayName||F.name)+")",se.prototype.isReactComponent=!0,se.__f=!0,se}(ye.prototype=new m.a).isPureReactComponent=!0,ye.prototype.shouldComponentUpdate=function(F,oe){return ce(this.props,F)||ce(this.state,oe)};var ve=m.i.__b;m.i.__b=function(F){F.type&&F.type.__f&&F.ref&&(F.props.ref=F.ref,F.ref=null),ve&&ve(F)};var ue=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function he(F){function oe(Y,se){var Te=fe({},Y);return delete Te.ref,F(Te,!(se=Y.ref||se)||typeof se=="object"&&!("current"in se)?null:se)}return oe.$$typeof=ue,oe.render=oe,oe.prototype.isReactComponent=oe.__f=!0,oe.displayName="ForwardRef("+(F.displayName||F.name)+")",oe}var be=function(F,oe){return F==null?null:Object(m.k)(Object(m.k)(F).map(oe))},Se={map:be,forEach:be,count:function(F){return F?Object(m.k)(F).length:0},only:function(F){var oe=Object(m.k)(F);if(oe.length!==1)throw"Children.only";return oe[0]},toArray:m.k},Le=m.i.__e;m.i.__e=function(F,oe,Y){if(F.then){for(var se,Te=oe;Te=Te.__;)if((se=Te.__c)&&se.__c)return oe.__e==null&&(oe.__e=Y.__e,oe.__k=Y.__k),se.__c(F,oe)}Le(F,oe,Y)};var $e=m.i.unmount;function Me(F,oe,Y){return F&&(F.__c&&F.__c.__H&&(F.__c.__H.__.forEach(function(se){typeof se.__c=="function"&&se.__c()}),F.__c.__H=null),(F=fe({},F)).__c!=null&&(F.__c.__P===Y&&(F.__c.__P=oe),F.__c=null),F.__k=F.__k&&F.__k.map(function(se){return Me(se,oe,Y)})),F}function Re(F,oe,Y){return F&&(F.__v=null,F.__k=F.__k&&F.__k.map(function(se){return Re(se,oe,Y)}),F.__c&&F.__c.__P===oe&&(F.__e&&Y.insertBefore(F.__e,F.__d),F.__c.__e=!0,F.__c.__P=Y)),F}function Ke(){this.__u=0,this.t=null,this.__b=null}function Z(F){var oe=F.__.__c;return oe&&oe.__e&&oe.__e(F)}function $(){this.u=null,this.o=null}m.i.unmount=function(F){var oe=F.__c;oe&&oe.__R&&oe.__R(),oe&&F.__h===!0&&(F.type=null),$e&&$e(F)},(Ke.prototype=new m.a).__c=function(F,oe){var Y=oe.__c,se=this;se.t==null&&(se.t=[]),se.t.push(Y);var Te=Z(se.__v),De=!1,Fe=function(){De||(De=!0,Y.__R=null,Te?Te(lt):lt())};Y.__R=Fe;var lt=function(){if(!--se.__u){if(se.state.__e){var $t=se.state.__e;se.__v.__k[0]=Re($t,$t.__c.__P,$t.__c.__O)}var Ct;for(se.setState({__e:se.__b=null});Ct=se.t.pop();)Ct.forceUpdate()}},Ht=oe.__h===!0;se.__u++||Ht||se.setState({__e:se.__b=se.__v.__k[0]}),F.then(Fe,Fe)},Ke.prototype.componentWillUnmount=function(){this.t=[]},Ke.prototype.render=function(F,oe){if(this.__b){if(this.__v.__k){var Y=document.createElement("div"),se=this.__v.__k[0].__c;this.__v.__k[0]=Me(this.__b,Y,se.__O=se.__P)}this.__b=null}var Te=oe.__e&&Object(m.e)(m.b,null,F.fallback);return Te&&(Te.__h=null),[Object(m.e)(m.b,null,oe.__e?null:F.children),Te]};var ae=function(F,oe,Y){if(++Y[1]===Y[0]&&F.o.delete(oe),F.props.revealOrder&&(F.props.revealOrder[0]!=="t"||!F.o.size))for(Y=F.u;Y;){for(;Y.length>3;)Y.pop()();if(Y[1]<Y[0])break;F.u=Y=Y[2]}};function _e(F){return this.getChildContext=function(){return F.context},F.children}function Ae(F){var oe=this,Y=F.i;oe.componentWillUnmount=function(){Object(m.j)(null,oe.l),oe.l=null,oe.i=null},oe.i&&oe.i!==Y&&oe.componentWillUnmount(),F.__v?(oe.l||(oe.i=Y,oe.l={nodeType:1,parentNode:Y,childNodes:[],appendChild:function(se){this.childNodes.push(se),oe.i.appendChild(se)},insertBefore:function(se,Te){this.childNodes.push(se),oe.i.appendChild(se)},removeChild:function(se){this.childNodes.splice(this.childNodes.indexOf(se)>>>1,1),oe.i.removeChild(se)}}),Object(m.j)(Object(m.e)(_e,{context:oe.context},F.__v),oe.l)):oe.l&&oe.componentWillUnmount()}($.prototype=new m.a).__e=function(F){var oe=this,Y=Z(oe.__v),se=oe.o.get(F);return se[0]++,function(Te){var De=function(){oe.props.revealOrder?(se.push(Te),ae(oe,F,se)):Te()};Y?Y(De):De()}},$.prototype.render=function(F){this.u=null,this.o=new Map;var oe=Object(m.k)(F.children);F.revealOrder&&F.revealOrder[0]==="b"&&oe.reverse();for(var Y=oe.length;Y--;)this.o.set(oe[Y],this.u=[1,0,this.u]);return F.children},$.prototype.componentDidUpdate=$.prototype.componentDidMount=function(){var F=this;this.o.forEach(function(oe,Y){ae(F,Y,oe)})};var we=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,qe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nt=typeof document<"u",Ze=function(F){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(F)};m.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(F){Object.defineProperty(m.a.prototype,F,{configurable:!0,get:function(){return this["UNSAFE_"+F]},set:function(oe){Object.defineProperty(this,F,{configurable:!0,writable:!0,value:oe})}})});var Ye=m.i.event;function ge(){}function He(){return this.cancelBubble}function ee(){return this.defaultPrevented}m.i.event=function(F){return Ye&&(F=Ye(F)),F.persist=ge,F.isPropagationStopped=He,F.isDefaultPrevented=ee,F.nativeEvent=F};var ze,ut={configurable:!0,get:function(){return this.class}},gt=m.i.vnode;m.i.vnode=function(F){var oe=F.type,Y=F.props,se=Y;if(typeof oe=="string"){var Te=oe.indexOf("-")===-1;for(var De in se={},Y){var Fe=Y[De];nt&&De==="children"&&oe==="noscript"||De==="value"&&"defaultValue"in Y&&Fe==null||(De==="defaultValue"&&"value"in Y&&Y.value==null?De="value":De==="download"&&Fe===!0?Fe="":/ondoubleclick/i.test(De)?De="ondblclick":/^onchange(textarea|input)/i.test(De+oe)&&!Ze(Y.type)?De="oninput":/^onfocus$/i.test(De)?De="onfocusin":/^onblur$/i.test(De)?De="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(De)?De=De.toLowerCase():Te&&qe.test(De)?De=De.replace(/[A-Z0-9]/,"-$&").toLowerCase():Fe===null&&(Fe=void 0),se[De]=Fe)}oe=="select"&&se.multiple&&Array.isArray(se.value)&&(se.value=Object(m.k)(Y.children).forEach(function(lt){lt.props.selected=se.value.indexOf(lt.props.value)!=-1})),oe=="select"&&se.defaultValue!=null&&(se.value=Object(m.k)(Y.children).forEach(function(lt){lt.props.selected=se.multiple?se.defaultValue.indexOf(lt.props.value)!=-1:se.defaultValue==lt.props.value})),F.props=se,Y.class!=Y.className&&(ut.enumerable="className"in Y,Y.className!=null&&(se.class=Y.className),Object.defineProperty(se,"className",ut))}F.$$typeof=we,gt&&gt(F)};var it=m.i.__r;m.i.__r=function(F){it&&it(F),ze=F.__c};var ht={ReactCurrentDispatcher:{current:{readContext:function(F){return ze.__n[F.__c].props.value}}}};function St(F){return!!F&&F.$$typeof===we}var Pt=function(F,oe){return F(oe)},at=m.b,Nt={useState:I,useReducer:H,useEffect:J,useLayoutEffect:ie,useRef:function(F){return w=5,q(function(){return{current:F}},[])},useImperativeHandle:function(F,oe,Y){w=6,ie(function(){typeof F=="function"?F(oe()):F&&(F.current=oe())},Y==null?Y:Y.concat(F))},useMemo:q,useCallback:V,useContext:function(F){var oe=c.context[F.__c],Y=C(l++,9);return Y.c=F,oe?(Y.__==null&&(Y.__=!0,oe.sub(c)),oe.props.value):F.__},useDebugValue:function(F,oe){m.i.useDebugValue&&m.i.useDebugValue(oe?oe(F):F)},version:"17.0.2",Children:Se,render:function(F,oe,Y){return oe.__k==null&&(oe.textContent=""),Object(m.j)(F,oe),typeof Y=="function"&&Y(),F?F.__c:null},hydrate:function(F,oe,Y){return Object(m.h)(F,oe),typeof Y=="function"&&Y(),F?F.__c:null},unmountComponentAtNode:function(F){return!!F.__k&&(Object(m.j)(null,F),!0)},createPortal:function(F,oe){return Object(m.e)(Ae,{__v:F,i:oe})},createElement:m.e,createContext:m.d,createFactory:function(F){return m.e.bind(null,F)},cloneElement:function(F){return St(F)?m.c.apply(null,arguments):F},createRef:m.f,Fragment:m.b,isValidElement:St,findDOMNode:function(F){return F&&(F.base||F.nodeType===1&&F)||null},Component:m.a,PureComponent:ye,memo:xe,forwardRef:he,flushSync:function(F,oe){return F(oe)},unstable_batchedUpdates:Pt,StrictMode:at,Suspense:Ke,SuspenseList:$,lazy:function(F){var oe,Y,se;function Te(De){if(oe||(oe=F()).then(function(Fe){Y=Fe.default||Fe},function(Fe){se=Fe}),se)throw se;if(!Y)throw oe;return Object(m.e)(Y,De)}return Te.displayName="Lazy",Te.__f=!0,Te},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ht};f.d=Nt},function(s,f,o){var l=o(7),c=o(147),g=o(148),m=o(180),w=o(57),O=function(M){if(M&&M.forEach!==m)try{w(M,"forEach",m)}catch{M.forEach=m}};for(var S in c)c[S]&&O(l[S]&&l[S].prototype);O(g)},function(s,f,o){o(17)({target:"Object",stat:!0},{setPrototypeOf:o(97)})},function(s,f,o){var l=o(17),c=o(19),g=o(38),m=o(96),w=o(137);l({target:"Object",stat:!0,forced:c(function(){m(1)}),sham:!w},{getPrototypeOf:function(O){return m(g(O))}})},function(s,f,o){var l=o(17),c=o(46),g=o(76),m=o(200),w=o(157),O=o(32),S=o(33),M=o(54),j=o(19),T=c("Reflect","construct"),D=Object.prototype,C=[].push,I=j(function(){function ie(){}return!(T(function(){},[],ie)instanceof ie)}),H=!j(function(){T(function(){})}),J=I||H;l({target:"Reflect",stat:!0,forced:J,sham:J},{construct:function(ie,q){w(ie),O(q);var V=arguments.length<3?ie:w(arguments[2]);if(H&&!I)return T(ie,q,V);if(ie==V){switch(q.length){case 0:return new ie;case 1:return new ie(q[0]);case 2:return new ie(q[0],q[1]);case 3:return new ie(q[0],q[1],q[2]);case 4:return new ie(q[0],q[1],q[2],q[3])}var K=[null];return g(C,K,q),new(g(m,ie,K))}var z=V.prototype,N=M(S(z)?z:D),B=g(ie,N,q);return S(B)?B:N}})},function(s,f){var o=Function.prototype,l=o.bind,c=o.call,g=l&&l.bind(c);s.exports=l?function(m){return m&&g(c,m)}:function(m){return m&&function(){return c.apply(m,arguments)}}},function(s,f,o){var l=o(17),c=o(7),g=o(99),m=o(100),w=o(33),O=o(67),S=o(43),M=o(40),j=o(61),T=o(27),D=o(75),C=o(101),I=D("slice"),H=T("species"),J=c.Array,ie=Math.max;l({target:"Array",proto:!0,forced:!I},{slice:function(q,V){var K,z,N,B=M(this),L=S(B),G=O(q,L),te=O(V===void 0?L:V,L);if(g(B)&&(K=B.constructor,(m(K)&&(K===J||g(K.prototype))||w(K)&&(K=K[H])===null)&&(K=void 0),K===J||K===void 0))return C(B,G,te);for(z=new(K===void 0?J:K)(ie(te-G,0)),N=0;G<te;G++,N++)G in B&&j(z,N,B[G]);return z.length=N,z}})},function(s,f,o){var l=o(7),c=o(51).f,g=o(57),m=o(44),w=o(108),O=o(134),S=o(95);s.exports=function(M,j){var T,D,C,I,H,J=M.target,ie=M.global,q=M.stat;if(T=ie?l:q?l[J]||w(J,{}):(l[J]||{}).prototype)for(D in j){if(I=j[D],C=M.noTargetGet?(H=c(T,D))&&H.value:T[D],!S(ie?D:J+(q?".":"#")+D,M.forced)&&C!==void 0){if(typeof I==typeof C)continue;O(I,C)}(M.sham||C&&C.sham)&&g(I,"sham",!0),m(T,D,I,M)}}},function(s,f,o){var l=o(17),c=o(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(s,f){s.exports=function(o){try{return!!o()}catch{return!0}}},function(s,f,o){var l=o(17),c=o(38),g=o(66);l({target:"Object",stat:!0,forced:o(19)(function(){g(1)})},{keys:function(m){return g(c(m))}})},function(s,f,o){var l=o(17),c=o(19),g=o(40),m=o(51).f,w=o(36),O=c(function(){m(1)});l({target:"Object",stat:!0,forced:!w||O,sham:!w},{getOwnPropertyDescriptor:function(S,M){return m(g(S),M)}})},function(s,f,o){var l=o(36),c=o(94).EXISTS,g=o(15),m=o(37).f,w=Function.prototype,O=g(w.toString),S=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,M=g(S.exec);l&&!c&&m(w,"name",{configurable:!0,get:function(){try{return M(S,O(this))[1]}catch{return""}}})},function(s,f,o){var l=o(17),c=o(74).filter;l({target:"Array",proto:!0,forced:!o(75)("filter")},{filter:function(g){return c(this,g,arguments.length>1?arguments[1]:void 0)}})},function(s,f,o){var l=o(17),c=o(183);l({target:"Array",stat:!0,forced:!o(118)(function(g){Array.from(g)})},{from:c})},function(s,f,o){var l=o(17),c=o(36),g=o(135),m=o(40),w=o(51),O=o(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(S){for(var M,j,T=m(S),D=w.f,C=g(T),I={},H=0;C.length>H;)(j=D(T,M=C[H++]))!==void 0&&O(I,M,j);return I}})},,function(s,f,o){var l=o(7),c=o(84),g=o(34),m=o(85),w=o(109),O=o(128),S=c("wks"),M=l.Symbol,j=M&&M.for,T=O?M:M&&M.withoutSetter||m;s.exports=function(D){if(!g(S,D)||!w&&typeof S[D]!="string"){var C="Symbol."+D;w&&g(M,D)?S[D]=M[D]:S[D]=O&&j?j(C):T(C)}return S[D]}},function(s,f){s.exports=function(o){return typeof o=="function"}},function(s,f,o){var l=o(17),c=o(7),g=o(19),m=o(99),w=o(33),O=o(38),S=o(43),M=o(61),j=o(119),T=o(75),D=o(27),C=o(65),I=D("isConcatSpreadable"),H=9007199254740991,J="Maximum allowed index exceeded",ie=c.TypeError,q=C>=51||!g(function(){var z=[];return z[I]=!1,z.concat()[0]!==z}),V=T("concat"),K=function(z){if(!w(z))return!1;var N=z[I];return N!==void 0?!!N:m(z)};l({target:"Array",proto:!0,forced:!q||!V},{concat:function(z){var N,B,L,G,te,fe=O(this),ce=j(fe,0),ye=0;for(N=-1,L=arguments.length;N<L;N++)if(K(te=N===-1?fe:arguments[N])){if(ye+(G=S(te))>H)throw ie(J);for(B=0;B<G;B++,ye++)B in te&&M(ce,ye,te[B])}else{if(ye>=H)throw ie(J);M(ce,ye++,te)}return ce.length=ye,ce}})},function(s,f,o){var l=o(17),c=o(199);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(s,f,o){var l=o(105),c=typeof self=="object"&&self&&self.Object===Object&&self,g=l.a||c||Function("return this")();f.a=g},function(s,f,o){var l=o(7),c=o(33),g=l.String,m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(g(w)+" is not an object")}},function(s,f,o){var l=o(28);s.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(s,f,o){var l=o(15),c=o(38),g=l({}.hasOwnProperty);s.exports=Object.hasOwn||function(m,w){return g(c(m),w)}},function(s,f){var o=Function.prototype.call;s.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(s,f,o){var l=o(19);s.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(s,f,o){var l=o(7),c=o(36),g=o(129),m=o(32),w=o(87),O=l.TypeError,S=Object.defineProperty;f.f=c?S:function(M,j,T){if(m(M),j=w(j),m(T),g)try{return S(M,j,T)}catch{}if("get"in T||"set"in T)throw O("Accessors not supported");return"value"in T&&(M[j]=T.value),M}},function(s,f,o){var l=o(7),c=o(45),g=l.Object;s.exports=function(m){return g(c(m))}},function(s,f,o){var l=o(17),c=o(74).map;l({target:"Array",proto:!0,forced:!o(75)("map")},{map:function(g){return c(this,g,arguments.length>1?arguments[1]:void 0)}})},function(s,f,o){var l=o(81),c=o(45);s.exports=function(g){return l(c(g))}},function(s,f,o){var l=o(7),c=o(98),g=l.String;s.exports=function(m){if(c(m)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return g(m)}},function(s,f,o){(function(l){o.d(f,"d",function(){return m}),o.d(f,"c",function(){return w}),o.d(f,"b",function(){return O}),o.d(f,"a",function(){return M});var c=o(10),g=function(j,T){var D=typeof Symbol=="function"&&j[Symbol.iterator];if(!D)return j;var C,I,H=D.call(j),J=[];try{for(;(T===void 0||T-- >0)&&!(C=H.next()).done;)J.push(C.value)}catch(ie){I={error:ie}}finally{try{C&&!C.done&&(D=H.return)&&D.call(H)}finally{if(I)throw I.error}}return J};function m(){var j=g(Object(c.j)(0),2)[1];return Object(c.h)(function(){j(function(T){return T+1})},[])}function w(j){if(!j||typeof j!="object")return!1;var T=Object.getPrototypeOf(j);return!T||T===Object.prototype}function O(j){return typeof Symbol=="function"?Symbol.for(j):"__$mobx-react "+j+"__"}var S={};function M(){return typeof window<"u"?window:l!==void 0?l:typeof self<"u"?self:S}}).call(this,o(82))},function(s,f,o){var l=o(90);s.exports=function(c){return l(c.length)}},function(s,f,o){var l=o(7),c=o(28),g=o(34),m=o(57),w=o(108),O=o(92),S=o(56),M=o(94).CONFIGURABLE,j=S.get,T=S.enforce,D=String(String).split("String");(s.exports=function(C,I,H,J){var ie,q=!!J&&!!J.unsafe,V=!!J&&!!J.enumerable,K=!!J&&!!J.noTargetGet,z=J&&J.name!==void 0?J.name:I;c(H)&&(String(z).slice(0,7)==="Symbol("&&(z="["+String(z).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!g(H,"name")||M&&H.name!==z)&&m(H,"name",z),(ie=T(H)).source||(ie.source=D.join(typeof z=="string"?z:""))),C!==l?(q?!K&&C[I]&&(V=!0):delete C[I],V?C[I]=H:m(C,I,H)):V?C[I]=H:w(I,H)})(Function.prototype,"toString",function(){return c(this)&&j(this).source||O(this)})},function(s,f,o){var l=o(7).TypeError;s.exports=function(c){if(c==null)throw l("Can't call method on "+c);return c}},function(s,f,o){var l=o(7),c=o(28),g=function(m){return c(m)?m:void 0};s.exports=function(m,w){return arguments.length<2?g(l[m]):l[m]&&l[m][w]}},function(s,f,o){var l=o(17),c=o(35),g=o(33),m=o(32),w=o(201),O=o(51),S=o(96);l({target:"Reflect",stat:!0},{get:function M(j,T){var D,C,I=arguments.length<3?j:arguments[2];return m(j)===I?j[T]:(D=O.f(j,T))?w(D)?D.value:D.get===void 0?void 0:c(D.get,I):g(C=S(j))?M(C,T,I):void 0}})},function(s,f,o){(function(l){var c=o(31),g=o(166),m=d&&!d.nodeType&&d,w=m&&typeof l=="object"&&l&&!l.nodeType&&l,O=w&&w.exports===m?c.a.Buffer:void 0,S=(O?O.isBuffer:void 0)||g.a;f.a=S}).call(this,o(121)(s))},function(s,f,o){(function(l){var c=o(105),g=d&&!d.nodeType&&d,m=g&&typeof l=="object"&&l&&!l.nodeType&&l,w=m&&m.exports===g&&c.a.process,O=function(){try{var S=m&&m.require&&m.require("util").types;return S||w&&w.binding&&w.binding("util")}catch{}}();f.a=O}).call(this,o(121)(s))},function(s,f,o){var l=o(15),c=l({}.toString),g=l("".slice);s.exports=function(m){return g(c(m),8,-1)}},function(s,f,o){var l=o(36),c=o(35),g=o(93),m=o(71),w=o(40),O=o(87),S=o(34),M=o(129),j=Object.getOwnPropertyDescriptor;f.f=l?j:function(T,D){if(T=w(T),D=O(D),M)try{return j(T,D)}catch{}if(S(T,D))return m(!c(g.f,T,D),T[D])}},function(s,f,o){var l=o(17),c=o(213).entries;l({target:"Object",stat:!0},{entries:function(g){return c(g)}})},function(s,f,o){var l=o(46);s.exports=l("navigator","userAgent")||""},function(s,f,o){var l,c=o(32),g=o(169),m=o(110),w=o(69),O=o(133),S=o(86),M=o(91),j=M("IE_PROTO"),T=function(){},D=function(H){return"<script>"+H+"<\/script>"},C=function(H){H.write(D("")),H.close();var J=H.parentWindow.Object;return H=null,J},I=function(){try{l=new ActiveXObject("htmlfile")}catch{}var H,J;I=typeof document<"u"?document.domain&&l?C(l):((J=S("iframe")).style.display="none",O.appendChild(J),J.src="javascript:",(H=J.contentWindow.document).open(),H.write(D("document.F=Object")),H.close(),H.F):C(l);for(var ie=m.length;ie--;)delete I.prototype[m[ie]];return I()};w[j]=!0,s.exports=Object.create||function(H,J){var ie;return H!==null?(T.prototype=c(H),ie=new T,T.prototype=null,ie[j]=H):ie=I(),J===void 0?ie:g(ie,J)}},function(s,f,o){var l=o(7),c=o(28),g=o(89),m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(g(w)+" is not a function")}},function(s,f,o){var l,c,g,m=o(171),w=o(7),O=o(15),S=o(33),M=o(57),j=o(34),T=o(107),D=o(91),C=o(69),I="Object already initialized",H=w.TypeError,J=w.WeakMap;if(m||T.state){var ie=T.state||(T.state=new J),q=O(ie.get),V=O(ie.has),K=O(ie.set);l=function(N,B){if(V(ie,N))throw new H(I);return B.facade=N,K(ie,N,B),B},c=function(N){return q(ie,N)||{}},g=function(N){return V(ie,N)}}else{var z=D("state");C[z]=!0,l=function(N,B){if(j(N,z))throw new H(I);return B.facade=N,M(N,z,B),B},c=function(N){return j(N,z)?N[z]:{}},g=function(N){return j(N,z)}}s.exports={set:l,get:c,has:g,enforce:function(N){return g(N)?c(N):l(N,{})},getterFor:function(N){return function(B){var L;if(!S(B)||(L=c(B)).type!==N)throw H("Incompatible receiver, "+N+" required");return L}}}},function(s,f,o){var l=o(36),c=o(37),g=o(71);s.exports=l?function(m,w,O){return c.f(m,w,g(1,O))}:function(m,w,O){return m[w]=O,m}},function(s,f,o){var l=o(15);s.exports=l({}.isPrototypeOf)},function(s,f,o){var l=o(55);s.exports=function(c,g){var m=c[g];return m==null?void 0:l(m)}},function(s,f,o){o(174)("Map",function(l){return function(){return l(this,arguments.length?arguments[0]:void 0)}},o(178))},function(s,f,o){var l=o(87),c=o(37),g=o(71);s.exports=function(m,w,O){var S=l(w);S in m?c.f(m,S,g(0,O)):m[S]=O}},function(s,f,o){var l=o(15),c=o(55),g=l(l.bind);s.exports=function(m,w){return c(m),w===void 0?m:g?g(m,w):function(){return m.apply(w,arguments)}}},function(s,f,o){var l=o(17),c=o(15),g=o(81),m=o(40),w=o(120),O=c([].join),S=g!=Object,M=w("join",",");l({target:"Array",proto:!0,forced:S||!M},{join:function(j){return O(m(this),j===void 0?",":j)}})},function(s,f){s.exports=!1},function(s,f,o){var l,c,g=o(7),m=o(53),w=g.process,O=g.Deno,S=w&&w.versions||O&&O.version,M=S&&S.v8;M&&(c=(l=M.split("."))[0]>0&&l[0]<4?1:+(l[0]+l[1])),!c&&m&&(!(l=m.match(/Edge\/(\d+)/))||l[1]>=74)&&(l=m.match(/Chrome\/(\d+)/))&&(c=+l[1]),s.exports=c},function(s,f,o){var l=o(131),c=o(110);s.exports=Object.keys||function(g){return l(g,c)}},function(s,f,o){var l=o(68),c=Math.max,g=Math.min;s.exports=function(m,w){var O=l(m);return O<0?c(O+w,0):g(O,w)}},function(s,f){var o=Math.ceil,l=Math.floor;s.exports=function(c){var g=+c;return g!=g||g===0?0:(g>0?l:o)(g)}},function(s,f){s.exports={}},function(s,f){s.exports={}},function(s,f){s.exports=function(o,l){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:l}}},function(s,f,o){var l=o(131),c=o(110).concat("length","prototype");f.f=Object.getOwnPropertyNames||function(g){return l(g,c)}},function(s,f,o){var l=o(37).f,c=o(34),g=o(27)("toStringTag");s.exports=function(m,w,O){m&&!c(m=O?m:m.prototype,g)&&l(m,g,{configurable:!0,value:w})}},function(s,f,o){var l=o(62),c=o(15),g=o(81),m=o(38),w=o(43),O=o(119),S=c([].push),M=function(j){var T=j==1,D=j==2,C=j==3,I=j==4,H=j==6,J=j==7,ie=j==5||H;return function(q,V,K,z){for(var N,B,L=m(q),G=g(L),te=l(V,K),fe=w(G),ce=0,ye=z||O,xe=T?ye(q,fe):D||J?ye(q,0):void 0;fe>ce;ce++)if((ie||ce in G)&&(B=te(N=G[ce],ce,L),j))if(T)xe[ce]=B;else if(B)switch(j){case 3:return!0;case 5:return N;case 6:return ce;case 2:S(xe,N)}else switch(j){case 4:return!1;case 7:S(xe,N)}return H?-1:C||I?I:xe}};s.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6),filterReject:M(7)}},function(s,f,o){var l=o(19),c=o(27),g=o(65),m=c("species");s.exports=function(w){return g>=51||!l(function(){var O=[];return(O.constructor={})[m]=function(){return{foo:1}},O[w](Boolean).foo!==1})}},function(s,f){var o=Function.prototype,l=o.apply,c=o.bind,g=o.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(c?g.bind(l):function(){return g.apply(l,arguments)})},function(s,f,o){var l=o(76),c=o(35),g=o(15),m=o(122),w=o(154),O=o(32),S=o(45),M=o(156),j=o(123),T=o(90),D=o(41),C=o(59),I=o(113),H=o(124),J=o(102),ie=o(151),q=o(19),V=ie.UNSUPPORTED_Y,K=4294967295,z=Math.min,N=[].push,B=g(/./.exec),L=g(N),G=g("".slice),te=!q(function(){var fe=/(?:)/,ce=fe.exec;fe.exec=function(){return ce.apply(this,arguments)};var ye="ab".split(fe);return ye.length!==2||ye[0]!=="a"||ye[1]!=="b"});m("split",function(fe,ce,ye){var xe;return xe="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ve,ue){var he=D(S(this)),be=ue===void 0?K:ue>>>0;if(be===0)return[];if(ve===void 0)return[he];if(!w(ve))return c(ce,he,ve,be);for(var Se,Le,$e,Me=[],Re=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(ve.sticky?"y":""),Ke=0,Z=new RegExp(ve.source,Re+"g");(Se=c(J,Z,he))&&!((Le=Z.lastIndex)>Ke&&(L(Me,G(he,Ke,Se.index)),Se.length>1&&Se.index<he.length&&l(N,Me,I(Se,1)),$e=Se[0].length,Ke=Le,Me.length>=be));)Z.lastIndex===Se.index&&Z.lastIndex++;return Ke===he.length?!$e&&B(Z,"")||L(Me,""):L(Me,G(he,Ke)),Me.length>be?I(Me,0,be):Me}:"0".split(void 0,0).length?function(ve,ue){return ve===void 0&&ue===0?[]:c(ce,this,ve,ue)}:ce,[function(ve,ue){var he=S(this),be=ve==null?void 0:C(ve,fe);return be?c(be,ve,he,ue):c(xe,D(he),ve,ue)},function(ve,ue){var he=O(this),be=D(ve),Se=ye(xe,he,be,ue,xe!==ce);if(Se.done)return Se.value;var Le=M(he,RegExp),$e=he.unicode,Me=(he.ignoreCase?"i":"")+(he.multiline?"m":"")+(he.unicode?"u":"")+(V?"g":"y"),Re=new Le(V?"^(?:"+he.source+")":he,Me),Ke=ue===void 0?K:ue>>>0;if(Ke===0)return[];if(be.length===0)return H(Re,be)===null?[be]:[];for(var Z=0,$=0,ae=[];$<be.length;){Re.lastIndex=V?0:$;var _e,Ae=H(Re,V?G(be,$):be);if(Ae===null||(_e=z(T(Re.lastIndex+(V?$:0)),be.length))===Z)$=j(be,$,$e);else{if(L(ae,G(be,Z,$)),ae.length===Ke)return ae;for(var we=1;we<=Ae.length-1;we++)if(L(ae,Ae[we]),ae.length===Ke)return ae;$=Z=_e}}return L(ae,G(be,Z)),ae}]},!te,V)},function(s,f,o){var l=o(36),c=o(7),g=o(15),m=o(95),w=o(44),O=o(34),S=o(143),M=o(58),j=o(88),T=o(130),D=o(19),C=o(72).f,I=o(51).f,H=o(37).f,J=o(197),ie=o(159).trim,q="Number",V=c.Number,K=V.prototype,z=c.TypeError,N=g("".slice),B=g("".charCodeAt),L=function(xe){var ve=T(xe,"number");return typeof ve=="bigint"?ve:G(ve)},G=function(xe){var ve,ue,he,be,Se,Le,$e,Me,Re=T(xe,"number");if(j(Re))throw z("Cannot convert a Symbol value to a number");if(typeof Re=="string"&&Re.length>2){if(Re=ie(Re),(ve=B(Re,0))===43||ve===45){if((ue=B(Re,2))===88||ue===120)return NaN}else if(ve===48){switch(B(Re,1)){case 66:case 98:he=2,be=49;break;case 79:case 111:he=8,be=55;break;default:return+Re}for(Le=(Se=N(Re,2)).length,$e=0;$e<Le;$e++)if((Me=B(Se,$e))<48||Me>be)return NaN;return parseInt(Se,he)}}return+Re};if(m(q,!V(" 0o1")||!V("0b1")||V("+0x1"))){for(var te,fe=function(xe){var ve=arguments.length<1?0:V(L(xe)),ue=this;return M(K,ue)&&D(function(){J(ue)})?S(Object(ve),ue,fe):ve},ce=l?C(V):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),ye=0;ce.length>ye;ye++)O(V,te=ce[ye])&&!O(fe,te)&&H(fe,te,I(V,te));fe.prototype=K,K.constructor=fe,w(c,q,fe)}},function(s,f,o){o(17)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(s,f,o){var l=o(17),c=o(214),g=o(83);l({target:"Array",proto:!0},{fill:c}),g("fill")},function(s,f,o){var l=o(7),c=o(15),g=o(19),m=o(50),w=l.Object,O=c("".split);s.exports=g(function(){return!w("z").propertyIsEnumerable(0)})?function(S){return m(S)=="String"?O(S,""):w(S)}:w},function(s,f){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}s.exports=o},function(s,f,o){var l=o(27),c=o(54),g=o(37),m=l("unscopables"),w=Array.prototype;w[m]==null&&g.f(w,m,{configurable:!0,value:c(null)}),s.exports=function(O){w[m][O]=!0}},function(s,f,o){var l=o(64),c=o(107);(s.exports=function(g,m){return c[g]||(c[g]=m!==void 0?m:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(s,f,o){var l=o(15),c=0,g=Math.random(),m=l(1 .toString);s.exports=function(w){return"Symbol("+(w===void 0?"":w)+")_"+m(++c+g,36)}},function(s,f,o){var l=o(7),c=o(33),g=l.document,m=c(g)&&c(g.createElement);s.exports=function(w){return m?g.createElement(w):{}}},function(s,f,o){var l=o(130),c=o(88);s.exports=function(g){var m=l(g,"string");return c(m)?m:m+""}},function(s,f,o){var l=o(7),c=o(46),g=o(28),m=o(58),w=o(128),O=l.Object;s.exports=w?function(S){return typeof S=="symbol"}:function(S){var M=c("Symbol");return g(M)&&m(M.prototype,O(S))}},function(s,f,o){var l=o(7).String;s.exports=function(c){try{return l(c)}catch{return"Object"}}},function(s,f,o){var l=o(68),c=Math.min;s.exports=function(g){return g>0?c(l(g),9007199254740991):0}},function(s,f,o){var l=o(84),c=o(85),g=l("keys");s.exports=function(m){return g[m]||(g[m]=c(m))}},function(s,f,o){var l=o(15),c=o(28),g=o(107),m=l(Function.toString);c(g.inspectSource)||(g.inspectSource=function(w){return m(w)}),s.exports=g.inspectSource},function(s,f,o){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,g=c&&!l.call({1:2},1);f.f=g?function(m){var w=c(this,m);return!!w&&w.enumerable}:l},function(s,f,o){var l=o(36),c=o(34),g=Function.prototype,m=l&&Object.getOwnPropertyDescriptor,w=c(g,"name"),O=w&&function(){}.name==="something",S=w&&(!l||l&&m(g,"name").configurable);s.exports={EXISTS:w,PROPER:O,CONFIGURABLE:S}},function(s,f,o){var l=o(19),c=o(28),g=/#|\.prototype\./,m=function(j,T){var D=O[w(j)];return D==M||D!=S&&(c(T)?l(T):!!T)},w=m.normalize=function(j){return String(j).replace(g,".").toLowerCase()},O=m.data={},S=m.NATIVE="N",M=m.POLYFILL="P";s.exports=m},function(s,f,o){var l=o(7),c=o(34),g=o(28),m=o(38),w=o(91),O=o(137),S=w("IE_PROTO"),M=l.Object,j=M.prototype;s.exports=O?M.getPrototypeOf:function(T){var D=m(T);if(c(D,S))return D[S];var C=D.constructor;return g(C)&&D instanceof C?C.prototype:D instanceof M?j:null}},function(s,f,o){var l=o(15),c=o(32),g=o(173);s.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m,w=!1,O={};try{(m=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(O,[]),w=O instanceof Array}catch{}return function(S,M){return c(S),g(M),w?m(S,M):S.__proto__=M,S}}():void 0)},function(s,f,o){var l=o(7),c=o(116),g=o(28),m=o(50),w=o(27)("toStringTag"),O=l.Object,S=m(function(){return arguments}())=="Arguments";s.exports=c?m:function(M){var j,T,D;return M===void 0?"Undefined":M===null?"Null":typeof(T=function(C,I){try{return C[I]}catch{}}(j=O(M),w))=="string"?T:S?m(j):(D=m(j))=="Object"&&g(j.callee)?"Arguments":D}},function(s,f,o){var l=o(50);s.exports=Array.isArray||function(c){return l(c)=="Array"}},function(s,f,o){var l=o(15),c=o(19),g=o(28),m=o(98),w=o(46),O=o(92),S=function(){},M=[],j=w("Reflect","construct"),T=/^\s*(?:class|function)\b/,D=l(T.exec),C=!T.exec(S),I=function(H){if(!g(H))return!1;try{return j(S,M,H),!0}catch{return!1}};s.exports=!j||c(function(){var H;return I(I.call)||!I(Object)||!I(function(){H=!0})||H})?function(H){if(!g(H))return!1;switch(m(H)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return C||!!D(T,O(H))}:I},function(s,f,o){var l=o(15);s.exports=l([].slice)},function(s,f,o){var l,c,g=o(35),m=o(15),w=o(41),O=o(185),S=o(151),M=o(84),j=o(54),T=o(56).get,D=o(186),C=o(187),I=M("native-string-replace",String.prototype.replace),H=RegExp.prototype.exec,J=H,ie=m("".charAt),q=m("".indexOf),V=m("".replace),K=m("".slice),z=(c=/b*/g,g(H,l=/a/,"a"),g(H,c,"a"),l.lastIndex!==0||c.lastIndex!==0),N=S.BROKEN_CARET,B=/()??/.exec("")[1]!==void 0;(z||B||N||D||C)&&(J=function(L){var G,te,fe,ce,ye,xe,ve,ue=this,he=T(ue),be=w(L),Se=he.raw;if(Se)return Se.lastIndex=ue.lastIndex,G=g(J,Se,be),ue.lastIndex=Se.lastIndex,G;var Le=he.groups,$e=N&&ue.sticky,Me=g(O,ue),Re=ue.source,Ke=0,Z=be;if($e&&(Me=V(Me,"y",""),q(Me,"g")===-1&&(Me+="g"),Z=K(be,ue.lastIndex),ue.lastIndex>0&&(!ue.multiline||ue.multiline&&ie(be,ue.lastIndex-1)!==`
`)&&(Re="(?: "+Re+")",Z=" "+Z,Ke++),te=new RegExp("^(?:"+Re+")",Me)),B&&(te=new RegExp("^"+Re+"$(?!\\s)",Me)),z&&(fe=ue.lastIndex),ce=g(H,$e?te:ue,Z),$e?ce?(ce.input=K(ce.input,Ke),ce[0]=K(ce[0],Ke),ce.index=ue.lastIndex,ue.lastIndex+=ce[0].length):ue.lastIndex=0:z&&ce&&(ue.lastIndex=ue.global?ce.index+ce[0].length:fe),B&&ce&&ce.length>1&&g(I,ce[0],te,function(){for(ye=1;ye<arguments.length-2;ye++)arguments[ye]===void 0&&(ce[ye]=void 0)}),ce&&Le)for(ce.groups=xe=j(null),ye=0;ye<Le.length;ye++)xe[(ve=Le[ye])[0]]=ce[ve[1]];return ce}),s.exports=J},function(s,f,o){var l=o(17),c=o(7),g=o(67),m=o(68),w=o(43),O=o(38),S=o(119),M=o(61),j=o(75)("splice"),T=c.TypeError,D=Math.max,C=Math.min,I=9007199254740991,H="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!j},{splice:function(J,ie){var q,V,K,z,N,B,L=O(this),G=w(L),te=g(J,G),fe=arguments.length;if(fe===0?q=V=0:fe===1?(q=0,V=G-te):(q=fe-2,V=C(D(m(ie),0),G-te)),G+q-V>I)throw T(H);for(K=S(L,V),z=0;z<V;z++)(N=te+z)in L&&M(K,z,L[N]);if(K.length=V,q<V){for(z=te;z<G-V;z++)B=z+q,(N=z+V)in L?L[B]=L[N]:delete L[B];for(z=G;z>G-V+q;z--)delete L[z-1]}else if(q>V)for(z=G-V;z>te;z--)B=z+q-1,(N=z+V-1)in L?L[B]=L[N]:delete L[B];for(z=0;z<q;z++)L[z+te]=arguments[z+2];return L.length=G-V+q,K}})},function(s,f,o){var l=o(17),c=o(202);l({target:"String",proto:!0,forced:o(203)("anchor")},{anchor:function(g){return c(this,"a","name",g)}})},function(s,f,o){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;f.a=c}).call(this,o(82))},function(s,f,o){(function(l){var c=o(31),g=d&&!d.nodeType&&d,m=g&&typeof l=="object"&&l&&!l.nodeType&&l,w=m&&m.exports===g?c.a.Buffer:void 0,O=w?w.allocUnsafe:void 0;f.a=function(S,M){if(M)return S.slice();var j=S.length,T=O?O(j):new S.constructor(j);return S.copy(T),T}}).call(this,o(121)(s))},function(s,f,o){var l=o(7),c=o(108),g="__core-js_shared__",m=l[g]||c(g,{});s.exports=m},function(s,f,o){var l=o(7),c=Object.defineProperty;s.exports=function(g,m){try{c(l,g,{value:m,configurable:!0,writable:!0})}catch{l[g]=m}return m}},function(s,f,o){var l=o(65),c=o(19);s.exports=!!Object.getOwnPropertySymbols&&!c(function(){var g=Symbol();return!String(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(s,f){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(s,f,o){var l=o(17),c=o(35),g=o(64),m=o(94),w=o(28),O=o(172),S=o(96),M=o(97),j=o(73),T=o(57),D=o(44),C=o(27),I=o(70),H=o(136),J=m.PROPER,ie=m.CONFIGURABLE,q=H.IteratorPrototype,V=H.BUGGY_SAFARI_ITERATORS,K=C("iterator"),z="keys",N="values",B="entries",L=function(){return this};s.exports=function(G,te,fe,ce,ye,xe,ve){O(fe,te,ce);var ue,he,be,Se=function($){if($===ye&&Ke)return Ke;if(!V&&$ in Me)return Me[$];switch($){case z:case N:case B:return function(){return new fe(this,$)}}return function(){return new fe(this)}},Le=te+" Iterator",$e=!1,Me=G.prototype,Re=Me[K]||Me["@@iterator"]||ye&&Me[ye],Ke=!V&&Re||Se(ye),Z=te=="Array"&&Me.entries||Re;if(Z&&(ue=S(Z.call(new G)))!==Object.prototype&&ue.next&&(g||S(ue)===q||(M?M(ue,q):w(ue[K])||D(ue,K,L)),j(ue,Le,!0,!0),g&&(I[Le]=L)),J&&ye==N&&Re&&Re.name!==N&&(!g&&ie?T(Me,"name",N):($e=!0,Ke=function(){return c(Re,this)})),ye)if(he={values:Se(N),keys:xe?Ke:Se(z),entries:Se(B)},ve)for(be in he)(V||$e||!(be in Me))&&D(Me,be,he[be]);else l({target:te,proto:!0,forced:V||$e},he);return g&&!ve||Me[K]===Ke||D(Me,K,Ke,{name:ye}),I[te]=Ke,he}},function(s,f){f.f=Object.getOwnPropertySymbols},function(s,f,o){var l=o(7),c=o(67),g=o(43),m=o(61),w=l.Array,O=Math.max;s.exports=function(S,M,j){for(var T=g(S),D=c(M,T),C=c(j===void 0?T:j,T),I=w(O(C-D,0)),H=0;D<C;D++,H++)m(I,H,S[D]);return I.length=H,I}},function(s,f,o){var l=o(7),c=o(62),g=o(35),m=o(32),w=o(89),O=o(140),S=o(43),M=o(58),j=o(141),T=o(115),D=o(142),C=l.TypeError,I=function(J,ie){this.stopped=J,this.result=ie},H=I.prototype;s.exports=function(J,ie,q){var V,K,z,N,B,L,G,te=q&&q.that,fe=!(!q||!q.AS_ENTRIES),ce=!(!q||!q.IS_ITERATOR),ye=!(!q||!q.INTERRUPTED),xe=c(ie,te),ve=function(he){return V&&D(V,"normal",he),new I(!0,he)},ue=function(he){return fe?(m(he),ye?xe(he[0],he[1],ve):xe(he[0],he[1])):ye?xe(he,ve):xe(he)};if(ce)V=J;else{if(!(K=T(J)))throw C(w(J)+" is not iterable");if(O(K)){for(z=0,N=S(J);N>z;z++)if((B=ue(J[z]))&&M(H,B))return B;return new I(!1)}V=j(J,K)}for(L=V.next;!(G=g(L,V)).done;){try{B=ue(G.value)}catch(he){D(V,"throw",he)}if(typeof B=="object"&&B&&M(H,B))return B}return new I(!1)}},function(s,f,o){var l=o(98),c=o(59),g=o(70),m=o(27)("iterator");s.exports=function(w){if(w!=null)return c(w,m)||c(w,"@@iterator")||g[l(w)]}},function(s,f,o){var l={};l[o(27)("toStringTag")]="z",s.exports=String(l)==="[object z]"},function(s,f,o){var l=o(7),c=o(58),g=l.TypeError;s.exports=function(m,w){if(c(w,m))return m;throw g("Incorrect invocation")}},function(s,f,o){var l=o(27)("iterator"),c=!1;try{var g=0,m={next:function(){return{done:!!g++}},return:function(){c=!0}};m[l]=function(){return this},Array.from(m,function(){throw 2})}catch{}s.exports=function(w,O){if(!O&&!c)return!1;var S=!1;try{var M={};M[l]=function(){return{next:function(){return{done:S=!0}}}},w(M)}catch{}return S}},function(s,f,o){var l=o(181);s.exports=function(c,g){return new(l(c))(g===0?0:g)}},function(s,f,o){var l=o(19);s.exports=function(c,g){var m=[][c];return!!m&&l(function(){m.call(null,g||function(){throw 1},1)})}},function(s,f){s.exports=function(o){if(!o.webpackPolyfill){var l=Object.create(o);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(s,f,o){o(18);var l=o(15),c=o(44),g=o(102),m=o(19),w=o(27),O=o(57),S=w("species"),M=RegExp.prototype;s.exports=function(j,T,D,C){var I=w(j),H=!m(function(){var V={};return V[I]=function(){return 7},""[j](V)!=7}),J=H&&!m(function(){var V=!1,K=/a/;return j==="split"&&((K={}).constructor={},K.constructor[S]=function(){return K},K.flags="",K[I]=/./[I]),K.exec=function(){return V=!0,null},K[I](""),!V});if(!H||!J||D){var ie=l(/./[I]),q=T(I,""[j],function(V,K,z,N,B){var L=l(V),G=K.exec;return G===g||G===M.exec?H&&!B?{done:!0,value:ie(K,z,N)}:{done:!0,value:L(z,K,N)}:{done:!1}});c(String.prototype,j,q[0]),c(M,I,q[1])}C&&O(M[I],"sham",!0)}},function(s,f,o){var l=o(146).charAt;s.exports=function(c,g,m){return g+(m?l(c,g).length:1)}},function(s,f,o){var l=o(7),c=o(35),g=o(32),m=o(28),w=o(50),O=o(102),S=l.TypeError;s.exports=function(M,j){var T=M.exec;if(m(T)){var D=c(T,M,j);return D!==null&&g(D),D}if(w(M)==="RegExp")return c(O,M,j);throw S("RegExp#exec called on incompatible receiver")}},function(s,f,o){var l=o(76),c=o(35),g=o(15),m=o(122),w=o(19),O=o(32),S=o(28),M=o(68),j=o(90),T=o(41),D=o(45),C=o(123),I=o(59),H=o(198),J=o(124),ie=o(27)("replace"),q=Math.max,V=Math.min,K=g([].concat),z=g([].push),N=g("".indexOf),B=g("".slice),L="a".replace(/./,"$0")==="$0",G=!!/./[ie]&&/./[ie]("a","$0")==="";m("replace",function(te,fe,ce){var ye=G?"$":"$0";return[function(xe,ve){var ue=D(this),he=xe==null?void 0:I(xe,ie);return he?c(he,xe,ue,ve):c(fe,T(ue),xe,ve)},function(xe,ve){var ue=O(this),he=T(xe);if(typeof ve=="string"&&N(ve,ye)===-1&&N(ve,"$<")===-1){var be=ce(fe,ue,he,ve);if(be.done)return be.value}var Se=S(ve);Se||(ve=T(ve));var Le=ue.global;if(Le){var $e=ue.unicode;ue.lastIndex=0}for(var Me=[];;){var Re=J(ue,he);if(Re===null||(z(Me,Re),!Le))break;T(Re[0])===""&&(ue.lastIndex=C(he,j(ue.lastIndex),$e))}for(var Ke,Z="",$=0,ae=0;ae<Me.length;ae++){for(var _e=T((Re=Me[ae])[0]),Ae=q(V(M(Re.index),he.length),0),we=[],qe=1;qe<Re.length;qe++)z(we,(Ke=Re[qe])===void 0?Ke:String(Ke));var nt=Re.groups;if(Se){var Ze=K([_e],we,Ae,he);nt!==void 0&&z(Ze,nt);var Ye=T(l(ve,void 0,Ze))}else Ye=H(_e,he,Ae,we,nt,ve);Ae>=$&&(Z+=B(he,$,Ae)+Ye,$=Ae+_e.length)}return Z+B(he,$)}]},!!w(function(){var te=/./;return te.exec=function(){var fe=[];return fe.groups={a:"7"},fe},"".replace(te,"$<a>")!=="7"})||!L||G)},function(s,f,o){var l=o(50),c=o(7);s.exports=l(c.process)=="process"},function(s,f,o){o(17)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(s,f,o){var l=o(109);s.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(s,f,o){var l=o(36),c=o(19),g=o(86);s.exports=!l&&!c(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},function(s,f,o){var l=o(7),c=o(35),g=o(33),m=o(88),w=o(59),O=o(170),S=o(27),M=l.TypeError,j=S("toPrimitive");s.exports=function(T,D){if(!g(T)||m(T))return T;var C,I=w(T,j);if(I){if(D===void 0&&(D="default"),C=c(I,T,D),!g(C)||m(C))return C;throw M("Can't convert object to primitive value")}return D===void 0&&(D="number"),O(T,D)}},function(s,f,o){var l=o(15),c=o(34),g=o(40),m=o(132).indexOf,w=o(69),O=l([].push);s.exports=function(S,M){var j,T=g(S),D=0,C=[];for(j in T)!c(w,j)&&c(T,j)&&O(C,j);for(;M.length>D;)c(T,j=M[D++])&&(~m(C,j)||O(C,j));return C}},function(s,f,o){var l=o(40),c=o(67),g=o(43),m=function(w){return function(O,S,M){var j,T=l(O),D=g(T),C=c(M,D);if(w&&S!=S){for(;D>C;)if((j=T[C++])!=j)return!0}else for(;D>C;C++)if((w||C in T)&&T[C]===S)return w||C||0;return!w&&-1}};s.exports={includes:m(!0),indexOf:m(!1)}},function(s,f,o){var l=o(46);s.exports=l("document","documentElement")},function(s,f,o){var l=o(34),c=o(135),g=o(51),m=o(37);s.exports=function(w,O){for(var S=c(O),M=m.f,j=g.f,T=0;T<S.length;T++){var D=S[T];l(w,D)||M(w,D,j(O,D))}}},function(s,f,o){var l=o(46),c=o(15),g=o(72),m=o(112),w=o(32),O=c([].concat);s.exports=l("Reflect","ownKeys")||function(S){var M=g.f(w(S)),j=m.f;return j?O(M,j(S)):M}},function(s,f,o){var l,c,g,m=o(19),w=o(28),O=o(54),S=o(96),M=o(44),j=o(27),T=o(64),D=j("iterator"),C=!1;[].keys&&("next"in(g=[].keys())?(c=S(S(g)))!==Object.prototype&&(l=c):C=!0),l==null||m(function(){var I={};return l[D].call(I)!==I})?l={}:T&&(l=O(l)),w(l[D])||M(l,D,function(){return this}),s.exports={IteratorPrototype:l,BUGGY_SAFARI_ITERATORS:C}},function(s,f,o){var l=o(19);s.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(s,f,o){var l=o(17),c=o(15),g=o(69),m=o(33),w=o(34),O=o(37).f,S=o(72),M=o(139),j=o(175),T=o(85),D=o(177),C=!1,I=T("meta"),H=0,J=function(q){O(q,I,{value:{objectID:"O"+H++,weakData:{}}})},ie=s.exports={enable:function(){ie.enable=function(){},C=!0;var q=S.f,V=c([].splice),K={};K[I]=1,q(K).length&&(S.f=function(z){for(var N=q(z),B=0,L=N.length;B<L;B++)if(N[B]===I){V(N,B,1);break}return N},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:M.f}))},fastKey:function(q,V){if(!m(q))return typeof q=="symbol"?q:(typeof q=="string"?"S":"P")+q;if(!w(q,I)){if(!j(q))return"F";if(!V)return"E";J(q)}return q[I].objectID},getWeakData:function(q,V){if(!w(q,I)){if(!j(q))return!0;if(!V)return!1;J(q)}return q[I].weakData},onFreeze:function(q){return D&&C&&j(q)&&!w(q,I)&&J(q),q}};g[I]=!0},function(s,f,o){var l=o(50),c=o(40),g=o(72).f,m=o(113),w=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(O){return w&&l(O)=="Window"?function(S){try{return g(S)}catch{return m(w)}}(O):g(c(O))}},function(s,f,o){var l=o(27),c=o(70),g=l("iterator"),m=Array.prototype;s.exports=function(w){return w!==void 0&&(c.Array===w||m[g]===w)}},function(s,f,o){var l=o(7),c=o(35),g=o(55),m=o(32),w=o(89),O=o(115),S=l.TypeError;s.exports=function(M,j){var T=arguments.length<2?O(M):j;if(g(T))return m(c(T,M));throw S(w(M)+" is not iterable")}},function(s,f,o){var l=o(35),c=o(32),g=o(59);s.exports=function(m,w,O){var S,M;c(m);try{if(!(S=g(m,"return"))){if(w==="throw")throw O;return O}S=l(S,m)}catch(j){M=!0,S=j}if(w==="throw")throw O;if(M)throw S;return c(S),O}},function(s,f,o){var l=o(28),c=o(33),g=o(97);s.exports=function(m,w,O){var S,M;return g&&l(S=w.constructor)&&S!==O&&c(M=S.prototype)&&M!==O.prototype&&g(m,M),m}},function(s,f,o){var l=o(44);s.exports=function(c,g,m){for(var w in g)l(c,w,g[w],m);return c}},function(s,f,o){var l=o(46),c=o(37),g=o(27),m=o(36),w=g("species");s.exports=function(O){var S=l(O),M=c.f;m&&S&&!S[w]&&M(S,w,{configurable:!0,get:function(){return this}})}},function(s,f,o){var l=o(15),c=o(68),g=o(41),m=o(45),w=l("".charAt),O=l("".charCodeAt),S=l("".slice),M=function(j){return function(T,D){var C,I,H=g(m(T)),J=c(D),ie=H.length;return J<0||J>=ie?j?"":void 0:(C=O(H,J))<55296||C>56319||J+1===ie||(I=O(H,J+1))<56320||I>57343?j?w(H,J):C:j?S(H,J,J+2):I-56320+(C-55296<<10)+65536}};s.exports={codeAt:M(!1),charAt:M(!0)}},function(s,f){s.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(s,f,o){var l=o(86)("span").classList,c=l&&l.constructor&&l.constructor.prototype;s.exports=c===Object.prototype?void 0:c},function(s,f,o){var l=o(27);f.f=l},function(s,f,o){var l=o(182),c=o(34),g=o(149),m=o(37).f;s.exports=function(w){var O=l.Symbol||(l.Symbol={});c(O,w)||m(O,w,{value:g.f(w)})}},function(s,f,o){var l=o(19),c=o(7).RegExp,g=l(function(){var O=c("a","y");return O.lastIndex=2,O.exec("abcd")!=null}),m=g||l(function(){return!c("a","y").sticky}),w=g||l(function(){var O=c("^r","gy");return O.lastIndex=2,O.exec("str")!=null});s.exports={BROKEN_CARET:w,MISSED_STICKY:m,UNSUPPORTED_Y:g}},function(s,f,o){var l=o(17),c=o(132).includes,g=o(83);l({target:"Array",proto:!0},{includes:function(m){return c(this,m,arguments.length>1?arguments[1]:void 0)}}),g("includes")},function(s,f,o){var l=o(17),c=o(15),g=o(194),m=o(45),w=o(41),O=o(195),S=c("".indexOf);l({target:"String",proto:!0,forced:!O("includes")},{includes:function(M){return!!~S(w(m(this)),w(g(M)),arguments.length>1?arguments[1]:void 0)}})},function(s,f,o){var l=o(33),c=o(50),g=o(27)("match");s.exports=function(m){var w;return l(m)&&((w=m[g])!==void 0?!!w:c(m)=="RegExp")}},function(s,f){var o,l,c=s.exports={};function g(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}function w(H){if(o===setTimeout)return setTimeout(H,0);if((o===g||!o)&&setTimeout)return o=setTimeout,setTimeout(H,0);try{return o(H,0)}catch{try{return o.call(null,H,0)}catch{return o.call(this,H,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:g}catch{o=g}try{l=typeof clearTimeout=="function"?clearTimeout:m}catch{l=m}})();var O,S=[],M=!1,j=-1;function T(){M&&O&&(M=!1,O.length?S=O.concat(S):j=-1,S.length&&D())}function D(){if(!M){var H=w(T);M=!0;for(var J=S.length;J;){for(O=S,S=[];++j<J;)O&&O[j].run();j=-1,J=S.length}O=null,M=!1,function(ie){if(l===clearTimeout)return clearTimeout(ie);if((l===m||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(ie);try{l(ie)}catch{try{return l.call(null,ie)}catch{return l.call(this,ie)}}}(H)}}function C(H,J){this.fun=H,this.array=J}function I(){}c.nextTick=function(H){var J=new Array(arguments.length-1);if(arguments.length>1)for(var ie=1;ie<arguments.length;ie++)J[ie-1]=arguments[ie];S.push(new C(H,J)),S.length!==1||M||w(D)},C.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=I,c.addListener=I,c.once=I,c.off=I,c.removeListener=I,c.removeAllListeners=I,c.emit=I,c.prependListener=I,c.prependOnceListener=I,c.listeners=function(H){return[]},c.binding=function(H){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(H){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(s,f,o){var l=o(32),c=o(157),g=o(27)("species");s.exports=function(m,w){var O,S=l(m).constructor;return S===void 0||(O=l(S)[g])==null?w:c(O)}},function(s,f,o){var l=o(7),c=o(100),g=o(89),m=l.TypeError;s.exports=function(w){if(c(w))return w;throw m(g(w)+" is not a constructor")}},function(s,f,o){var l=o(17),c=o(159).trim;l({target:"String",proto:!0,forced:o(196)("trim")},{trim:function(){return c(this)}})},function(s,f,o){var l=o(15),c=o(45),g=o(41),m=o(160),w=l("".replace),O="["+m+"]",S=RegExp("^"+O+O+"*"),M=RegExp(O+O+"*$"),j=function(T){return function(D){var C=g(c(D));return 1&T&&(C=w(C,S,"")),2&T&&(C=w(C,M,"")),C}};s.exports={start:j(1),end:j(2),trim:j(3)}},function(s,f){s.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(s,f,o){var l=o(35),c=o(122),g=o(32),m=o(90),w=o(41),O=o(45),S=o(59),M=o(123),j=o(124);c("match",function(T,D,C){return[function(I){var H=O(this),J=I==null?void 0:S(I,T);return J?l(J,I,H):new RegExp(I)[T](w(H))},function(I){var H=g(this),J=w(I),ie=C(D,H,J);if(ie.done)return ie.value;if(!H.global)return j(H,J);var q=H.unicode;H.lastIndex=0;for(var V,K=[],z=0;(V=j(H,J))!==null;){var N=w(V[0]);K[z]=N,N===""&&(H.lastIndex=M(J,m(H.lastIndex),q)),z++}return z===0?null:K}]})},function(s,f,o){var l=o(17),c=Math.hypot,g=Math.abs,m=Math.sqrt;l({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(w,O){for(var S,M,j=0,T=0,D=arguments.length,C=0;T<D;)C<(S=g(arguments[T++]))?(j=j*(M=C/S)*M+1,C=S):j+=S>0?(M=S/C)*M:S;return C===1/0?1/0:C*m(j)}})},function(s,f,o){var l,c,g,m,w=o(7),O=o(76),S=o(62),M=o(28),j=o(34),T=o(19),D=o(133),C=o(101),I=o(86),H=o(164),J=o(126),ie=w.setImmediate,q=w.clearImmediate,V=w.process,K=w.Dispatch,z=w.Function,N=w.MessageChannel,B=w.String,L=0,G={},te="onreadystatechange";try{l=w.location}catch{}var fe=function(ve){if(j(G,ve)){var ue=G[ve];delete G[ve],ue()}},ce=function(ve){return function(){fe(ve)}},ye=function(ve){fe(ve.data)},xe=function(ve){w.postMessage(B(ve),l.protocol+"//"+l.host)};ie&&q||(ie=function(ve){var ue=C(arguments,1);return G[++L]=function(){O(M(ve)?ve:z(ve),void 0,ue)},c(L),L},q=function(ve){delete G[ve]},J?c=function(ve){V.nextTick(ce(ve))}:K&&K.now?c=function(ve){K.now(ce(ve))}:N&&!H?(m=(g=new N).port2,g.port1.onmessage=ye,c=S(m.postMessage,m)):w.addEventListener&&M(w.postMessage)&&!w.importScripts&&l&&l.protocol!=="file:"&&!T(xe)?(c=xe,w.addEventListener("message",ye,!1)):c=te in I("script")?function(ve){D.appendChild(I("script")).onreadystatechange=function(){D.removeChild(this),fe(ve)}}:function(ve){setTimeout(ce(ve),0)}),s.exports={set:ie,clear:q}},function(s,f,o){var l=o(53);s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(s,f,o){var l=o(55),c=function(g){var m,w;this.promise=new g(function(O,S){if(m!==void 0||w!==void 0)throw TypeError("Bad Promise constructor");m=O,w=S}),this.resolve=l(m),this.reject=l(w)};s.exports.f=function(g){return new c(g)}},function(s,f,o){f.a=function(){return!1}},function(s,f,o){(function(l){o.d(f,"a",function(){return V});var c=o(1);function g(N){throw new Error("[mobx-utils] "+N)}function m(N,B){B===void 0&&(B="Illegal state"),N||g(B)}var w=function(N){return N&&N!==Object.prototype&&Object.getOwnPropertyNames(N).concat(w(Object.getPrototypeOf(N))||[])},O=function(N){return function(B){var L=w(B);return L.filter(function(G,te){return L.indexOf(G)===te})}(N).filter(function(B){return B!=="constructor"&&!~B.indexOf("__")})},S="pending",M="fulfilled",j="rejected";function T(N){switch(this.state){case S:return N.pending&&N.pending(this.value);case j:return N.rejected&&N.rejected(this.value);case M:return N.fulfilled?N.fulfilled(this.value):this.value}}function D(N,B){if(m(arguments.length<=2,"fromPromise expects up to two arguments"),m(typeof N=="function"||typeof N=="object"&&N&&typeof N.then=="function","Please pass a promise or function to fromPromise"),N.isPromiseBasedObservable===!0)return N;typeof N=="function"&&(N=new Promise(N));var L=N;N.then(Object(c.k)("observableFromPromise-resolve",function(te){L.value=te,L.state=M}),Object(c.k)("observableFromPromise-reject",function(te){L.value=te,L.state=j})),L.isPromiseBasedObservable=!0,L.case=T;var G=B&&B.state===M?B.value:void 0;return Object(c.q)(L,{value:G,state:S},{},{deep:!1}),L}(function(N){N.reject=Object(c.k)("fromPromise.reject",function(B){var L=N(Promise.reject(B));return L.state=j,L.value=B,L}),N.resolve=Object(c.k)("fromPromise.resolve",function(B){B===void 0&&(B=void 0);var L=N(Promise.resolve(B));return L.state=M,L.value=B,L})})(D||(D={}));var C=function(N,B,L,G){var te,fe=arguments.length,ce=fe<3?B:G===null?G=Object.getOwnPropertyDescriptor(B,L):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(N,B,L,G);else for(var ye=N.length-1;ye>=0;ye--)(te=N[ye])&&(ce=(fe<3?te(ce):fe>3?te(B,L,ce):te(B,L))||ce);return fe>3&&ce&&Object.defineProperty(B,L,ce),ce};(function(){function N(B,L){var G=this;Object(c.G)(function(){G.current=L,G.subscription=B.subscribe(G)})}N.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},N.prototype.next=function(B){this.current=B},N.prototype.complete=function(){this.dispose()},N.prototype.error=function(B){this.current=B,this.dispose()},C([c.C.ref],N.prototype,"current",void 0),C([c.k.bound],N.prototype,"next",null),C([c.k.bound],N.prototype,"complete",null),C([c.k.bound],N.prototype,"error",null)})();var I=function(){return I=Object.assign||function(N){for(var B,L=1,G=arguments.length;L<G;L++)for(var te in B=arguments[L])Object.prototype.hasOwnProperty.call(B,te)&&(N[te]=B[te]);return N},I.apply(this,arguments)},H=function(N,B,L,G){var te,fe=arguments.length,ce=fe<3?B:G===null?G=Object.getOwnPropertyDescriptor(B,L):G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(N,B,L,G);else for(var ye=N.length-1;ye>=0;ye--)(te=N[ye])&&(ce=(fe<3?te(ce):fe>3?te(B,L,ce):te(B,L))||ce);return fe>3&&ce&&Object.defineProperty(B,L,ce),ce},J=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function N(B){var L=this;this.model=B,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(G){return L.localValues.has(G)},m(Object(c.A)(B),"createViewModel expects an observable object"),O(B).forEach(function(G){if(G!==c.a&&G!=="__mobxDidRunLazyInitializers"){if(m(J.indexOf(G)===-1,"The propertyname "+G+" is reserved and cannot be used with viewModels"),Object(c.w)(B,G)){var te=Object(c.h)(B,G).derivation;L.localComputedValues.set(G,Object(c.m)(te.bind(L)))}var fe=Object.getOwnPropertyDescriptor(B,G),ce=fe?{enumerable:fe.enumerable}:{};Object.defineProperty(L,G,I(I({},ce),{configurable:!0,get:function(){return Object(c.w)(B,G)?L.localComputedValues.get(G).get():L.isPropertyDirty(G)?L.localValues.get(G):L.model[G]},set:Object(c.k)(function(ye){ye!==L.model[G]?L.localValues.set(G,ye):L.localValues.delete(G)})}))}})}Object.defineProperty(N.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),N.prototype.submit=function(){var B=this;Object(c.B)(this.localValues).forEach(function(L){var G=B.localValues.get(L),te=B.model[L];Object(c.y)(te)?te.replace(G):Object(c.z)(te)?(te.clear(),te.merge(G)):Object(c.v)(G)||(B.model[L]=G)}),this.localValues.clear()},N.prototype.reset=function(){this.localValues.clear()},N.prototype.resetProperty=function(B){this.localValues.delete(B)},H([c.m],N.prototype,"isDirty",null),H([c.m],N.prototype,"changedValues",null),H([c.k.bound],N.prototype,"submit",null),H([c.k.bound],N.prototype,"reset",null),H([c.k.bound],N.prototype,"resetProperty",null)})();function ie(N){if(!N)return"ROOT";for(var B=[];N.parent;)B.push(N.path),N=N.parent;return B.reverse().join("/")}function q(N){return Object(c.A)(N)||Object(c.y)(N)||Object(c.z)(N)}function V(N,B){var L=new WeakMap;function G(ce){var ye=L.get(ce.object);(function(xe,ve){switch(xe.type){case"add":te(xe.newValue,ve,xe.name);break;case"update":fe(xe.oldValue),te(xe.newValue,ve,xe.name||""+xe.index);break;case"remove":case"delete":fe(xe.oldValue);break;case"splice":xe.removed.map(fe),xe.added.forEach(function(be,Se){return te(be,ve,""+(xe.index+Se))});for(var ue=xe.index+xe.addedCount;ue<xe.object.length;ue++)if(q(xe.object[ue])){var he=L.get(xe.object[ue]);he&&(he.path=""+ue)}}})(ce,ye),B(ce,ie(ye),N)}function te(ce,ye,xe){if(q(ce)){var ve=L.get(ce);if(ve){if(ve.parent!==ye||ve.path!==xe)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+ie(ye)+"/"+xe+"', but it already exists at '"+ie(ve.parent)+"/"+ve.path+"'")}else{var ue={parent:ye,path:xe,dispose:Object(c.D)(ce,G)};L.set(ce,ue),Object(c.p)(ce).forEach(function(he){var be=he[0];return te(he[1],ue,be)})}}}function fe(ce){if(q(ce)){var ye=L.get(ce);if(!ye)return;L.delete(ce),ye.dispose(),Object(c.L)(ce).forEach(fe)}}return te(N,void 0,""),function(){fe(N)}}var K,z=(K=function(N,B){return K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,G){L.__proto__=G}||function(L,G){for(var te in G)G.hasOwnProperty(te)&&(L[te]=G[te])},K(N,B)},function(N,B){function L(){this.constructor=N}K(N,B),N.prototype=B===null?Object.create(B):(L.prototype=B.prototype,new L)});(function(N){function B(L,G,te){var fe=te===void 0?{}:te,ce=fe.name,ye=ce===void 0?"ogm"+(1e3*Math.random()|0):ce,xe=fe.keyToName,ve=xe===void 0?function(be){return""+be}:xe,ue=N.call(this)||this;ue._keyToName=ve,ue._groupBy=G,ue._ogmInfoKey=Symbol("ogmInfo"+ye),ue._base=L;for(var he=0;he<L.length;he++)ue._addItem(L[he]);return ue._disposeBaseObserver=Object(c.D)(ue._base,function(be){if(be.type==="splice")Object(c.J)(function(){for(var Se=0,Le=be.removed;Se<Le.length;Se++){var $e=Le[Se];ue._removeItem($e)}for(var Me=0,Re=be.added;Me<Re.length;Me++){var Ke=Re[Me];ue._addItem(Ke)}});else{if(be.type!=="update")throw new Error("illegal state");Object(c.J)(function(){ue._removeItem(be.oldValue),ue._addItem(be.newValue)})}}),ue}z(B,N),B.prototype.clear=function(){throw new Error("not supported")},B.prototype.delete=function(L){throw new Error("not supported")},B.prototype.set=function(L,G){throw new Error("not supported")},B.prototype.dispose=function(){this._disposeBaseObserver();for(var L=0;L<this._base.length;L++){var G=this._base[L];G[this._ogmInfoKey].reaction(),delete G[this._ogmInfoKey]}},B.prototype._getGroupArr=function(L){var G=N.prototype.get.call(this,L);return G===void 0&&(G=Object(c.C)([],{name:"GroupArray["+this._keyToName(L)+"]",deep:!1}),N.prototype.set.call(this,L,G)),G},B.prototype._removeFromGroupArr=function(L,G){var te=N.prototype.get.call(this,L);te.length===1?N.prototype.delete.call(this,L):(G===te.length-1||(te[G]=te[te.length-1],te[G][this._ogmInfoKey].groupArrIndex=G),te.length--)},B.prototype._addItem=function(L){var G=this,te=this._groupBy(L),fe=this._getGroupArr(te),ce={groupByValue:te,groupArrIndex:fe.length,reaction:Object(c.F)(function(){return G._groupBy(L)},function(ye,xe){var ve=L[G._ogmInfoKey];G._removeFromGroupArr(ve.groupByValue,ve.groupArrIndex);var ue=G._getGroupArr(ye),he=ue.length;ue.push(L),ve.groupByValue=ye,ve.groupArrIndex=he})};Object.defineProperty(L,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ce}),fe.push(L)},B.prototype._removeItem=function(L){var G=L[this._ogmInfoKey];this._removeFromGroupArr(G.groupByValue,G.groupArrIndex),G.reaction(),delete L[this._ogmInfoKey]}})(c.b),function(){function N(B,L){this.base=B,this.args=L,this.closestIdx=0,this.isDisposed=!1;for(var G=this.closest=this.root=B,te=0;te<this.args.length-1&&(G=G.get(L[te]));te++)this.closest=G;this.closestIdx=te}return N.prototype.exists=function(){this.assertNotDisposed();var B=this.args.length;return this.closestIdx>=B-1&&this.closest.has(this.args[B-1])},N.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},N.prototype.set=function(B){this.assertNotDisposed();for(var L=this.args.length,G=this.closest,te=this.closestIdx;te<L-1;te++){var fe=new Map;G.set(this.args[te],fe),G=fe}this.closestIdx=L-1,this.closest=G,G.set(this.args[L-1],B)},N.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var B=this.args.length;this.closest.delete(this.args[B-1]);for(var L=this.root,G=[L],te=0;te<B-1;te++)L=L.get(this.args[te]),G.push(L);for(te=G.length-1;te>0;te--)G[te].size===0&&G[te-1].delete(this.args[te-1]);this.isDisposed=!0},N.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},N}(),Promise.resolve(),typeof queueMicrotask<"u"||l!==void 0&&l.nextTick}).call(this,o(155))},function(s,f,o){var l;(function(c,g,m){if(c){for(var w,O={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},S={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},M={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},j={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T=1;T<20;++T)O[111+T]="f"+T;for(T=0;T<=9;++T)O[T+96]=T.toString();q.prototype.bind=function(V,K,z){var N=this;return V=V instanceof Array?V:[V],N._bindMultiple.call(N,V,K,z),N},q.prototype.unbind=function(V,K){return this.bind.call(this,V,function(){},K)},q.prototype.trigger=function(V,K){var z=this;return z._directMap[V+":"+K]&&z._directMap[V+":"+K]({},V),z},q.prototype.reset=function(){var V=this;return V._callbacks={},V._directMap={},V},q.prototype.stopCallback=function(V,K){if((" "+K.className+" ").indexOf(" mousetrap ")>-1||ie(K,this.target))return!1;if("composedPath"in V&&typeof V.composedPath=="function"){var z=V.composedPath()[0];z!==V.target&&(K=z)}return K.tagName=="INPUT"||K.tagName=="SELECT"||K.tagName=="TEXTAREA"||K.isContentEditable},q.prototype.handleKey=function(){var V=this;return V._handleKey.apply(V,arguments)},q.addKeycodes=function(V){for(var K in V)V.hasOwnProperty(K)&&(O[K]=V[K]);w=null},q.init=function(){var V=q(g);for(var K in V)K.charAt(0)!=="_"&&(q[K]=function(z){return function(){return V[z].apply(V,arguments)}}(K))},q.init(),c.Mousetrap=q,s.exports&&(s.exports=q),(l=function(){return q}.call(f,o,f,s))===void 0||(s.exports=l)}function D(V,K,z){V.addEventListener?V.addEventListener(K,z,!1):V.attachEvent("on"+K,z)}function C(V){if(V.type=="keypress"){var K=String.fromCharCode(V.which);return V.shiftKey||(K=K.toLowerCase()),K}return O[V.which]?O[V.which]:S[V.which]?S[V.which]:String.fromCharCode(V.which).toLowerCase()}function I(V){return V=="shift"||V=="ctrl"||V=="alt"||V=="meta"}function H(V,K,z){return z||(z=function(){if(!w)for(var N in w={},O)N>95&&N<112||O.hasOwnProperty(N)&&(w[O[N]]=N);return w}()[V]?"keydown":"keypress"),z=="keypress"&&K.length&&(z="keydown"),z}function J(V,K){var z,N,B,L=[];for(z=function(G){return G==="+"?["+"]:(G=G.replace(/\+{2}/g,"+plus")).split("+")}(V),B=0;B<z.length;++B)N=z[B],j[N]&&(N=j[N]),K&&K!="keypress"&&M[N]&&(N=M[N],L.push("shift")),I(N)&&L.push(N);return{key:N,modifiers:L,action:K=H(N,L,K)}}function ie(V,K){return V!==null&&V!==g&&(V===K||ie(V.parentNode,K))}function q(V){var K=this;if(V=V||g,!(K instanceof q))return new q(V);K.target=V,K._callbacks={},K._directMap={};var z,N={},B=!1,L=!1,G=!1;function te(ue){ue=ue||{};var he,be=!1;for(he in N)ue[he]?be=!0:N[he]=0;be||(G=!1)}function fe(ue,he,be,Se,Le,$e){var Me,Re,Ke,Z,$=[],ae=be.type;if(!K._callbacks[ue])return[];for(ae=="keyup"&&I(ue)&&(he=[ue]),Me=0;Me<K._callbacks[ue].length;++Me)if(Re=K._callbacks[ue][Me],(Se||!Re.seq||N[Re.seq]==Re.level)&&ae==Re.action&&(ae=="keypress"&&!be.metaKey&&!be.ctrlKey||(Ke=he,Z=Re.modifiers,Ke.sort().join(",")===Z.sort().join(",")))){var _e=!Se&&Re.combo==Le,Ae=Se&&Re.seq==Se&&Re.level==$e;(_e||Ae)&&K._callbacks[ue].splice(Me,1),$.push(Re)}return $}function ce(ue,he,be,Se){K.stopCallback(he,he.target||he.srcElement,be,Se)||ue(he,be)===!1&&(function(Le){Le.preventDefault?Le.preventDefault():Le.returnValue=!1}(he),function(Le){Le.stopPropagation?Le.stopPropagation():Le.cancelBubble=!0}(he))}function ye(ue){typeof ue.which!="number"&&(ue.which=ue.keyCode);var he=C(ue);he&&(ue.type!="keyup"||B!==he?K.handleKey(he,function(be){var Se=[];return be.shiftKey&&Se.push("shift"),be.altKey&&Se.push("alt"),be.ctrlKey&&Se.push("ctrl"),be.metaKey&&Se.push("meta"),Se}(ue),ue):B=!1)}function xe(ue,he,be,Se){function Le(Ke){return function(){G=Ke,++N[ue],clearTimeout(z),z=setTimeout(te,1e3)}}function $e(Ke){ce(be,Ke,ue),Se!=="keyup"&&(B=C(Ke)),setTimeout(te,10)}N[ue]=0;for(var Me=0;Me<he.length;++Me){var Re=Me+1===he.length?$e:Le(Se||J(he[Me+1]).action);ve(he[Me],Re,Se,ue,Me)}}function ve(ue,he,be,Se,Le){K._directMap[ue+":"+be]=he;var $e,Me=(ue=ue.replace(/\s+/g," ")).split(" ");Me.length>1?xe(ue,Me,he,be):($e=J(ue,be),K._callbacks[$e.key]=K._callbacks[$e.key]||[],fe($e.key,$e.modifiers,{type:$e.action},Se,ue,Le),K._callbacks[$e.key][Se?"unshift":"push"]({callback:he,modifiers:$e.modifiers,action:$e.action,seq:Se,level:Le,combo:ue}))}K._handleKey=function(ue,he,be){var Se,Le=fe(ue,he,be),$e={},Me=0,Re=!1;for(Se=0;Se<Le.length;++Se)Le[Se].seq&&(Me=Math.max(Me,Le[Se].level));for(Se=0;Se<Le.length;++Se)if(Le[Se].seq){if(Le[Se].level!=Me)continue;Re=!0,$e[Le[Se].seq]=1,ce(Le[Se].callback,be,Le[Se].combo,Le[Se].seq)}else Re||ce(Le[Se].callback,be,Le[Se].combo);var Ke=be.type=="keypress"&&L;be.type!=G||I(ue)||Ke||te($e),L=Re&&be.type=="keydown"},K._bindMultiple=function(ue,he,be){for(var Se=0;Se<ue.length;++Se)ve(ue[Se],he,be)},D(V,"keypress",ye),D(V,"keydown",ye),D(V,"keyup",ye)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(s,f,o){var l=o(36),c=o(37),g=o(32),m=o(40),w=o(66);s.exports=l?Object.defineProperties:function(O,S){g(O);for(var M,j=m(S),T=w(S),D=T.length,C=0;D>C;)c.f(O,M=T[C++],j[M]);return O}},function(s,f,o){var l=o(7),c=o(35),g=o(28),m=o(33),w=l.TypeError;s.exports=function(O,S){var M,j;if(S==="string"&&g(M=O.toString)&&!m(j=c(M,O))||g(M=O.valueOf)&&!m(j=c(M,O))||S!=="string"&&g(M=O.toString)&&!m(j=c(M,O)))return j;throw w("Can't convert object to primitive value")}},function(s,f,o){var l=o(7),c=o(28),g=o(92),m=l.WeakMap;s.exports=c(m)&&/native code/.test(g(m))},function(s,f,o){var l=o(136).IteratorPrototype,c=o(54),g=o(71),m=o(73),w=o(70),O=function(){return this};s.exports=function(S,M,j,T){var D=M+" Iterator";return S.prototype=c(l,{next:g(+!T,j)}),m(S,D,!1,!0),w[D]=O,S}},function(s,f,o){var l=o(7),c=o(28),g=l.String,m=l.TypeError;s.exports=function(w){if(typeof w=="object"||c(w))return w;throw m("Can't set "+g(w)+" as a prototype")}},function(s,f,o){var l=o(17),c=o(7),g=o(15),m=o(95),w=o(44),O=o(138),S=o(114),M=o(117),j=o(28),T=o(33),D=o(19),C=o(118),I=o(73),H=o(143);s.exports=function(J,ie,q){var V=J.indexOf("Map")!==-1,K=J.indexOf("Weak")!==-1,z=V?"set":"add",N=c[J],B=N&&N.prototype,L=N,G={},te=function(ue){var he=g(B[ue]);w(B,ue,ue=="add"?function(be){return he(this,be===0?0:be),this}:ue=="delete"?function(be){return!(K&&!T(be))&&he(this,be===0?0:be)}:ue=="get"?function(be){return K&&!T(be)?void 0:he(this,be===0?0:be)}:ue=="has"?function(be){return!(K&&!T(be))&&he(this,be===0?0:be)}:function(be,Se){return he(this,be===0?0:be,Se),this})};if(m(J,!j(N)||!(K||B.forEach&&!D(function(){new N().entries().next()}))))L=q.getConstructor(ie,J,V,z),O.enable();else if(m(J,!0)){var fe=new L,ce=fe[z](K?{}:-0,1)!=fe,ye=D(function(){fe.has(1)}),xe=C(function(ue){new N(ue)}),ve=!K&&D(function(){for(var ue=new N,he=5;he--;)ue[z](he,he);return!ue.has(-0)});xe||((L=ie(function(ue,he){M(ue,B);var be=H(new N,ue,L);return he!=null&&S(he,be[z],{that:be,AS_ENTRIES:V}),be})).prototype=B,B.constructor=L),(ye||ve)&&(te("delete"),te("has"),V&&te("get")),(ve||ce)&&te(z),K&&B.clear&&delete B.clear}return G[J]=L,l({global:!0,forced:L!=N},G),I(L,J),K||q.setStrong(L,J,V),L}},function(s,f,o){var l=o(19),c=o(33),g=o(50),m=o(176),w=Object.isExtensible,O=l(function(){});s.exports=O||m?function(S){return!!c(S)&&(!m||g(S)!="ArrayBuffer")&&(!w||w(S))}:w},function(s,f,o){var l=o(19);s.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(s,f,o){var l=o(19);s.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(s,f,o){var l=o(37).f,c=o(54),g=o(144),m=o(62),w=o(117),O=o(114),S=o(111),M=o(145),j=o(36),T=o(138).fastKey,D=o(56),C=D.set,I=D.getterFor;s.exports={getConstructor:function(H,J,ie,q){var V=H(function(L,G){w(L,K),C(L,{type:J,index:c(null),first:void 0,last:void 0,size:0}),j||(L.size=0),G!=null&&O(G,L[q],{that:L,AS_ENTRIES:ie})}),K=V.prototype,z=I(J),N=function(L,G,te){var fe,ce,ye=z(L),xe=B(L,G);return xe?xe.value=te:(ye.last=xe={index:ce=T(G,!0),key:G,value:te,previous:fe=ye.last,next:void 0,removed:!1},ye.first||(ye.first=xe),fe&&(fe.next=xe),j?ye.size++:L.size++,ce!=="F"&&(ye.index[ce]=xe)),L},B=function(L,G){var te,fe=z(L),ce=T(G);if(ce!=="F")return fe.index[ce];for(te=fe.first;te;te=te.next)if(te.key==G)return te};return g(K,{clear:function(){for(var L=z(this),G=L.index,te=L.first;te;)te.removed=!0,te.previous&&(te.previous=te.previous.next=void 0),delete G[te.index],te=te.next;L.first=L.last=void 0,j?L.size=0:this.size=0},delete:function(L){var G=this,te=z(G),fe=B(G,L);if(fe){var ce=fe.next,ye=fe.previous;delete te.index[fe.index],fe.removed=!0,ye&&(ye.next=ce),ce&&(ce.previous=ye),te.first==fe&&(te.first=ce),te.last==fe&&(te.last=ye),j?te.size--:G.size--}return!!fe},forEach:function(L){for(var G,te=z(this),fe=m(L,arguments.length>1?arguments[1]:void 0);G=G?G.next:te.first;)for(fe(G.value,G.key,this);G&&G.removed;)G=G.previous},has:function(L){return!!B(this,L)}}),g(K,ie?{get:function(L){var G=B(this,L);return G&&G.value},set:function(L,G){return N(this,L===0?0:L,G)}}:{add:function(L){return N(this,L=L===0?0:L,L)}}),j&&l(K,"size",{get:function(){return z(this).size}}),V},setStrong:function(H,J,ie){var q=J+" Iterator",V=I(J),K=I(q);S(H,J,function(z,N){C(this,{type:q,target:z,state:V(z),kind:N,last:void 0})},function(){for(var z=K(this),N=z.kind,B=z.last;B&&B.removed;)B=B.previous;return z.target&&(z.last=B=B?B.next:z.state.first)?N=="keys"?{value:B.key,done:!1}:N=="values"?{value:B.value,done:!1}:{value:[B.key,B.value],done:!1}:(z.target=void 0,{value:void 0,done:!0})},ie?"entries":"values",!ie,!0),M(J)}}},function(s,f,o){var l=o(116),c=o(98);s.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(s,f,o){var l=o(74).forEach,c=o(120)("forEach");s.exports=c?[].forEach:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}},function(s,f,o){var l=o(7),c=o(99),g=o(100),m=o(33),w=o(27)("species"),O=l.Array;s.exports=function(S){var M;return c(S)&&(M=S.constructor,(g(M)&&(M===O||c(M.prototype))||m(M)&&(M=M[w])===null)&&(M=void 0)),M===void 0?O:M}},function(s,f,o){var l=o(7);s.exports=l},function(s,f,o){var l=o(7),c=o(62),g=o(35),m=o(38),w=o(184),O=o(140),S=o(100),M=o(43),j=o(61),T=o(141),D=o(115),C=l.Array;s.exports=function(I){var H=m(I),J=S(this),ie=arguments.length,q=ie>1?arguments[1]:void 0,V=q!==void 0;V&&(q=c(q,ie>2?arguments[2]:void 0));var K,z,N,B,L,G,te=D(H),fe=0;if(!te||this==C&&O(te))for(K=M(H),z=J?new this(K):C(K);K>fe;fe++)G=V?q(H[fe],fe):H[fe],j(z,fe,G);else for(L=(B=T(H,te)).next,z=J?new this:[];!(N=g(L,B)).done;fe++)G=V?w(B,q,[N.value,fe],!0):N.value,j(z,fe,G);return z.length=fe,z}},function(s,f,o){var l=o(32),c=o(142);s.exports=function(g,m,w,O){try{return O?m(l(w)[0],w[1]):m(w)}catch(S){c(g,"throw",S)}}},function(s,f,o){var l=o(32);s.exports=function(){var c=l(this),g="";return c.global&&(g+="g"),c.ignoreCase&&(g+="i"),c.multiline&&(g+="m"),c.dotAll&&(g+="s"),c.unicode&&(g+="u"),c.sticky&&(g+="y"),g}},function(s,f,o){var l=o(19),c=o(7).RegExp;s.exports=l(function(){var g=c(".","s");return!(g.dotAll&&g.exec(`
`)&&g.flags==="s")})},function(s,f,o){var l=o(19),c=o(7).RegExp;s.exports=l(function(){var g=c("(?<a>b)","g");return g.exec("b").groups.a!=="b"||"b".replace(g,"$<a>c")!=="bc"})},function(s,f,o){var l=o(17),c=o(15),g=o(55),m=o(38),w=o(43),O=o(41),S=o(19),M=o(189),j=o(120),T=o(190),D=o(191),C=o(65),I=o(192),H=[],J=c(H.sort),ie=c(H.push),q=S(function(){H.sort(void 0)}),V=S(function(){H.sort(null)}),K=j("sort"),z=!S(function(){if(C)return C<70;if(!(T&&T>3)){if(D)return!0;if(I)return I<603;var N,B,L,G,te="";for(N=65;N<76;N++){switch(B=String.fromCharCode(N),N){case 66:case 69:case 70:case 72:L=3;break;case 68:case 71:L=4;break;default:L=2}for(G=0;G<47;G++)H.push({k:B+G,v:L})}for(H.sort(function(fe,ce){return ce.v-fe.v}),G=0;G<H.length;G++)B=H[G].k.charAt(0),te.charAt(te.length-1)!==B&&(te+=B);return te!=="DGBEFHACIJK"}});l({target:"Array",proto:!0,forced:q||!V||!K||!z},{sort:function(N){N!==void 0&&g(N);var B=m(this);if(z)return N===void 0?J(B):J(B,N);var L,G,te=[],fe=w(B);for(G=0;G<fe;G++)G in B&&ie(te,B[G]);for(M(te,function(ce){return function(ye,xe){return xe===void 0?-1:ye===void 0?1:ce!==void 0?+ce(ye,xe)||0:O(ye)>O(xe)?1:-1}}(N)),L=te.length,G=0;G<L;)B[G]=te[G++];for(;G<fe;)delete B[G++];return B}})},function(s,f,o){var l=o(113),c=Math.floor,g=function(O,S){var M=O.length,j=c(M/2);return M<8?m(O,S):w(O,g(l(O,0,j),S),g(l(O,j),S),S)},m=function(O,S){for(var M,j,T=O.length,D=1;D<T;){for(j=D,M=O[D];j&&S(O[j-1],M)>0;)O[j]=O[--j];j!==D++&&(O[j]=M)}return O},w=function(O,S,M,j){for(var T=S.length,D=M.length,C=0,I=0;C<T||I<D;)O[C+I]=C<T&&I<D?j(S[C],M[I])<=0?S[C++]:M[I++]:C<T?S[C++]:M[I++];return O};s.exports=g},function(s,f,o){var l=o(53).match(/firefox\/(\d+)/i);s.exports=!!l&&+l[1]},function(s,f,o){var l=o(53);s.exports=/MSIE|Trident/.test(l)},function(s,f,o){var l=o(53).match(/AppleWebKit\/(\d+)\./);s.exports=!!l&&+l[1]},function(s,f,o){var l=o(17),c=o(74).find,g=o(83),m="find",w=!0;m in[]&&Array(1).find(function(){w=!1}),l({target:"Array",proto:!0,forced:w},{find:function(O){return c(this,O,arguments.length>1?arguments[1]:void 0)}}),g(m)},function(s,f,o){var l=o(7),c=o(154),g=l.TypeError;s.exports=function(m){if(c(m))throw g("The method doesn't accept regular expressions");return m}},function(s,f,o){var l=o(27)("match");s.exports=function(c){var g=/./;try{"/./"[c](g)}catch{try{return g[l]=!1,"/./"[c](g)}catch{}}return!1}},function(s,f,o){var l=o(94).PROPER,c=o(19),g=o(160);s.exports=function(m){return c(function(){return!!g[m]()||"​᠎"[m]()!=="​᠎"||l&&g[m].name!==m})}},function(s,f,o){var l=o(15);s.exports=l(1 .valueOf)},function(s,f,o){var l=o(15),c=o(38),g=Math.floor,m=l("".charAt),w=l("".replace),O=l("".slice),S=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,M=/\$([$&'`]|\d{1,2})/g;s.exports=function(j,T,D,C,I,H){var J=D+j.length,ie=C.length,q=M;return I!==void 0&&(I=c(I),q=S),w(H,q,function(V,K){var z;switch(m(K,0)){case"$":return"$";case"&":return j;case"`":return O(T,0,D);case"'":return O(T,J);case"<":z=I[O(K,1,-1)];break;default:var N=+K;if(N===0)return V;if(N>ie){var B=g(N/10);return B===0?V:B<=ie?C[B-1]===void 0?m(K,1):C[B-1]+m(K,1):V}z=C[N-1]}return z===void 0?"":z})}},function(s,f,o){var l=o(36),c=o(15),g=o(35),m=o(19),w=o(66),O=o(112),S=o(93),M=o(38),j=o(81),T=Object.assign,D=Object.defineProperty,C=c([].concat);s.exports=!T||m(function(){if(l&&T({b:1},T(D({},"a",{enumerable:!0,get:function(){D(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var I={},H={},J=Symbol(),ie="abcdefghijklmnopqrst";return I[J]=7,ie.split("").forEach(function(q){H[q]=q}),T({},I)[J]!=7||w(T({},H)).join("")!=ie})?function(I,H){for(var J=M(I),ie=arguments.length,q=1,V=O.f,K=S.f;ie>q;)for(var z,N=j(arguments[q++]),B=V?C(w(N),V(N)):w(N),L=B.length,G=0;L>G;)z=B[G++],l&&!g(K,N,z)||(J[z]=N[z]);return J}:T},function(s,f,o){var l=o(7),c=o(15),g=o(55),m=o(33),w=o(34),O=o(101),S=l.Function,M=c([].concat),j=c([].join),T={},D=function(C,I,H){if(!w(T,I)){for(var J=[],ie=0;ie<I;ie++)J[ie]="a["+ie+"]";T[I]=S("C,a","return new C("+j(J,",")+")")}return T[I](C,H)};s.exports=S.bind||function(C){var I=g(this),H=I.prototype,J=O(arguments,1),ie=function(){var q=M(J,O(arguments));return this instanceof ie?D(I,q.length,q):I.apply(C,q)};return m(H)&&(ie.prototype=H),ie}},function(s,f,o){var l=o(34);s.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(s,f,o){var l=o(15),c=o(45),g=o(41),m=/"/g,w=l("".replace);s.exports=function(O,S,M,j){var T=g(c(O)),D="<"+S;return M!==""&&(D+=" "+M+'="'+w(g(j),m,"&quot;")+'"'),D+">"+T+"</"+S+">"}},function(s,f,o){var l=o(19);s.exports=function(c){return l(function(){var g=""[c]('"');return g!==g.toLowerCase()||g.split('"').length>3})}},function(s,f,o){var l,c,g,m,w=o(17),O=o(64),S=o(7),M=o(46),j=o(35),T=o(205),D=o(44),C=o(144),I=o(97),H=o(73),J=o(145),ie=o(55),q=o(28),V=o(33),K=o(117),z=o(92),N=o(114),B=o(118),L=o(156),G=o(163).set,te=o(206),fe=o(209),ce=o(210),ye=o(165),xe=o(211),ve=o(56),ue=o(95),he=o(27),be=o(212),Se=o(126),Le=o(65),$e=he("species"),Me="Promise",Re=ve.getterFor(Me),Ke=ve.set,Z=ve.getterFor(Me),$=T&&T.prototype,ae=T,_e=$,Ae=S.TypeError,we=S.document,qe=S.process,nt=ye.f,Ze=nt,Ye=!!(we&&we.createEvent&&S.dispatchEvent),ge=q(S.PromiseRejectionEvent),He="unhandledrejection",ee=!1,ze=ue(Me,function(){var Y=z(ae),se=Y!==String(ae);if(!se&&Le===66||O&&!_e.finally)return!0;if(Le>=51&&/native code/.test(Y))return!1;var Te=new ae(function(Fe){Fe(1)}),De=function(Fe){Fe(function(){},function(){})};return(Te.constructor={})[$e]=De,!(ee=Te.then(function(){})instanceof De)||!se&&be&&!ge}),ut=ze||!B(function(Y){ae.all(Y).catch(function(){})}),gt=function(Y){var se;return!(!V(Y)||!q(se=Y.then))&&se},it=function(Y,se){if(!Y.notified){Y.notified=!0;var Te=Y.reactions;te(function(){for(var De=Y.value,Fe=Y.state==1,lt=0;Te.length>lt;){var Ht,$t,Ct,Rt=Te[lt++],Be=Fe?Rt.ok:Rt.fail,Ve=Rt.resolve,et=Rt.reject,rt=Rt.domain;try{Be?(Fe||(Y.rejection===2&&at(Y),Y.rejection=1),Be===!0?Ht=De:(rt&&rt.enter(),Ht=Be(De),rt&&(rt.exit(),Ct=!0)),Ht===Rt.promise?et(Ae("Promise-chain cycle")):($t=gt(Ht))?j($t,Ht,Ve,et):Ve(Ht)):et(De)}catch(wt){rt&&!Ct&&rt.exit(),et(wt)}}Y.reactions=[],Y.notified=!1,se&&!Y.rejection&&St(Y)})}},ht=function(Y,se,Te){var De,Fe;Ye?((De=we.createEvent("Event")).promise=se,De.reason=Te,De.initEvent(Y,!1,!0),S.dispatchEvent(De)):De={promise:se,reason:Te},!ge&&(Fe=S["on"+Y])?Fe(De):Y===He&&ce("Unhandled promise rejection",Te)},St=function(Y){j(G,S,function(){var se,Te=Y.facade,De=Y.value;if(Pt(Y)&&(se=xe(function(){Se?qe.emit("unhandledRejection",De,Te):ht(He,Te,De)}),Y.rejection=Se||Pt(Y)?2:1,se.error))throw se.value})},Pt=function(Y){return Y.rejection!==1&&!Y.parent},at=function(Y){j(G,S,function(){var se=Y.facade;Se?qe.emit("rejectionHandled",se):ht("rejectionhandled",se,Y.value)})},Nt=function(Y,se,Te){return function(De){Y(se,De,Te)}},F=function(Y,se,Te){Y.done||(Y.done=!0,Te&&(Y=Te),Y.value=se,Y.state=2,it(Y,!0))},oe=function(Y,se,Te){if(!Y.done){Y.done=!0,Te&&(Y=Te);try{if(Y.facade===se)throw Ae("Promise can't be resolved itself");var De=gt(se);De?te(function(){var Fe={done:!1};try{j(De,se,Nt(oe,Fe,Y),Nt(F,Fe,Y))}catch(lt){F(Fe,lt,Y)}}):(Y.value=se,Y.state=1,it(Y,!1))}catch(Fe){F({done:!1},Fe,Y)}}};if(ze&&(_e=(ae=function(Y){K(this,_e),ie(Y),j(l,this);var se=Re(this);try{Y(Nt(oe,se),Nt(F,se))}catch(Te){F(se,Te)}}).prototype,(l=function(Y){Ke(this,{type:Me,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=C(_e,{then:function(Y,se){var Te=Z(this),De=Te.reactions,Fe=nt(L(this,ae));return Fe.ok=!q(Y)||Y,Fe.fail=q(se)&&se,Fe.domain=Se?qe.domain:void 0,Te.parent=!0,De[De.length]=Fe,Te.state!=0&&it(Te,!1),Fe.promise},catch:function(Y){return this.then(void 0,Y)}}),c=function(){var Y=new l,se=Re(Y);this.promise=Y,this.resolve=Nt(oe,se),this.reject=Nt(F,se)},ye.f=nt=function(Y){return Y===ae||Y===g?new c(Y):Ze(Y)},!O&&q(T)&&$!==Object.prototype)){m=$.then,ee||(D($,"then",function(Y,se){var Te=this;return new ae(function(De,Fe){j(m,Te,De,Fe)}).then(Y,se)},{unsafe:!0}),D($,"catch",_e.catch,{unsafe:!0}));try{delete $.constructor}catch{}I&&I($,_e)}w({global:!0,wrap:!0,forced:ze},{Promise:ae}),H(ae,Me,!1,!0),J(Me),g=M(Me),w({target:Me,stat:!0,forced:ze},{reject:function(Y){var se=nt(this);return j(se.reject,void 0,Y),se.promise}}),w({target:Me,stat:!0,forced:O||ze},{resolve:function(Y){return fe(O&&this===g?ae:this,Y)}}),w({target:Me,stat:!0,forced:ut},{all:function(Y){var se=this,Te=nt(se),De=Te.resolve,Fe=Te.reject,lt=xe(function(){var Ht=ie(se.resolve),$t=[],Ct=0,Rt=1;N(Y,function(Be){var Ve=Ct++,et=!1;Rt++,j(Ht,se,Be).then(function(rt){et||(et=!0,$t[Ve]=rt,--Rt||De($t))},Fe)}),--Rt||De($t)});return lt.error&&Fe(lt.value),Te.promise},race:function(Y){var se=this,Te=nt(se),De=Te.reject,Fe=xe(function(){var lt=ie(se.resolve);N(Y,function(Ht){j(lt,se,Ht).then(Te.resolve,De)})});return Fe.error&&De(Fe.value),Te.promise}})},function(s,f,o){var l=o(7);s.exports=l.Promise},function(s,f,o){var l,c,g,m,w,O,S,M,j=o(7),T=o(62),D=o(51).f,C=o(163).set,I=o(164),H=o(207),J=o(208),ie=o(126),q=j.MutationObserver||j.WebKitMutationObserver,V=j.document,K=j.process,z=j.Promise,N=D(j,"queueMicrotask"),B=N&&N.value;B||(l=function(){var L,G;for(ie&&(L=K.domain)&&L.exit();c;){G=c.fn,c=c.next;try{G()}catch(te){throw c?m():g=void 0,te}}g=void 0,L&&L.enter()},I||ie||J||!q||!V?!H&&z&&z.resolve?((S=z.resolve(void 0)).constructor=z,M=T(S.then,S),m=function(){M(l)}):ie?m=function(){K.nextTick(l)}:(C=T(C,j),m=function(){C(l)}):(w=!0,O=V.createTextNode(""),new q(l).observe(O,{characterData:!0}),m=function(){O.data=w=!w})),s.exports=B||function(L){var G={fn:L,next:void 0};g&&(g.next=G),c||(c=G,m()),g=G}},function(s,f,o){var l=o(53),c=o(7);s.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(s,f,o){var l=o(53);s.exports=/web0s(?!.*chrome)/i.test(l)},function(s,f,o){var l=o(32),c=o(33),g=o(165);s.exports=function(m,w){if(l(m),c(w)&&w.constructor===m)return w;var O=g.f(m);return(0,O.resolve)(w),O.promise}},function(s,f,o){var l=o(7);s.exports=function(c,g){var m=l.console;m&&m.error&&(arguments.length==1?m.error(c):m.error(c,g))}},function(s,f){s.exports=function(o){try{return{error:!1,value:o()}}catch(l){return{error:!0,value:l}}}},function(s,f){s.exports=typeof window=="object"},function(s,f,o){var l=o(36),c=o(15),g=o(66),m=o(40),w=c(o(93).f),O=c([].push),S=function(M){return function(j){for(var T,D=m(j),C=g(D),I=C.length,H=0,J=[];I>H;)T=C[H++],l&&!w(D,T)||O(J,M?[T,D[T]]:D[T]);return J}};s.exports={entries:S(!0),values:S(!1)}},function(s,f,o){var l=o(38),c=o(67),g=o(43);s.exports=function(m){for(var w=l(this),O=g(w),S=arguments.length,M=c(S>1?arguments[1]:void 0,O),j=S>2?arguments[2]:void 0,T=j===void 0?O:c(j,O);T>M;)w[M++]=m;return w}},function(s,f,o){o.r(f),o.d(f,"observer",function(){return Hn}),o.d(f,"LogicFlow",function(){return Zl}),o.d(f,"h",function(){return ee.g}),o.d(f,"LogicFlowUtil",function(){return l}),o.d(f,"BaseNode",function(){return br}),o.d(f,"RectNode",function(){return Uc}),o.d(f,"CircleNode",function(){return $c}),o.d(f,"PolygonNode",function(){return Qc}),o.d(f,"DiamondNode",function(){return rl}),o.d(f,"EllipseNode",function(){return sl}),o.d(f,"TextNode",function(){return fl}),o.d(f,"HtmlNode",function(){return yl}),o.d(f,"BaseEdge",function(){return yi}),o.d(f,"LineEdge",function(){return Al}),o.d(f,"PolylineEdge",function(){return Cl}),o.d(f,"BezierEdge",function(){return zl}),o.d(f,"Arrow",function(){return vO}),o.d(f,"BaseEdgeModel",function(){return fs}),o.d(f,"BezierEdgeModel",function(){return Qs}),o.d(f,"LineEdgeModel",function(){return vs}),o.d(f,"PolylineEdgeModel",function(){return _s}),o.d(f,"BaseNodeModel",function(){return gr}),o.d(f,"CircleNodeModel",function(){return ic}),o.d(f,"DiamondNodeModel",function(){return lc}),o.d(f,"EllipseNodeModel",function(){return hc}),o.d(f,"PolygonNodeModel",function(){return _c}),o.d(f,"RectNodeModel",function(){return Ec}),o.d(f,"TextNodeModel",function(){return Mc}),o.d(f,"HtmlNodeModel",function(){return Tc}),o.d(f,"EditConfigModel",function(){return zf}),o.d(f,"GraphModel",function(){return Ad}),o.d(f,"SnaplineModel",function(){return cy}),o.d(f,"Keyboard",function(){return Ky}),o.d(f,"get",function(){return Qd}),o.d(f,"defaults",function(){return th}),o.d(f,"ElementState",function(){return Ot}),o.d(f,"ModelType",function(){return dt}),o.d(f,"ElementType",function(){return Xt}),o.d(f,"EventType",function(){return tt}),o.d(f,"formateAnchorConnectValidateData",function(){return ei});var l={};o.r(l),o.d(l,"createUuid",function(){return Tr}),o.d(l,"refreshGraphId",function(){return _b}),o.d(l,"createDrag",function(){return Kb}),o.d(l,"StepDrag",function(){return dr});var c=o(1),g=o(10);if(!g.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var m=o(42),w=Object(m.b)("observerBatching");function O(e){e()}var S=!1;function M(){return S}function j(e){return Object(c.t)(e)}var T,D=1e4,C=new Set;function I(){T===void 0&&(T=setTimeout(H,1e4))}function H(){T=void 0;var e=Date.now();C.forEach(function(t){var n=t.current;n&&e>=n.cleanAt&&(n.reaction.dispose(),t.current=null,C.delete(t))}),C.size>0&&I()}var J=!1,ie=[],q={};function V(e){return"observer"+e}function K(e,t,n){t===void 0&&(t="observed"),n===void 0&&(n=q),M();var r,a=function(_){return function(){J?ie.push(_):_()}}((n.useForceUpdate||m.d)()),i=g.d.useRef(null);if(!i.current){var u=new c.c(V(t),function(){p.mounted?a():(u.dispose(),i.current=null)}),p=function(_){return{cleanAt:Date.now()+D,reaction:_}}(u);i.current=p,r=i,C.add(r),I()}var h=i.current.reaction;return g.d.useDebugValue(h,j),g.d.useEffect(function(){var _;return _=i,C.delete(_),i.current?i.current.mounted=!0:(i.current={reaction:new c.c(V(t),function(){a()}),cleanAt:1/0},a()),function(){i.current.reaction.dispose(),i.current=null}},[]),function(_){J=!0,ie=[];try{var x=_();J=!1;var P=ie.length>0?ie:void 0;return g.d.useLayoutEffect(function(){P&&P.forEach(function(A){return A()})},[P]),x}finally{J=!1}}(function(){var _,x;if(h.track(function(){try{_=e()}catch(P){x=P}}),x)throw x;return _})}var z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};function N(e,t){var n,r,a,i=z({forwardRef:!1},t),u=e.displayName||e.name,p=function(h,_){return K(function(){return e(h,_)},u)};return p.displayName=u,n=i.forwardRef?Object(g.f)(Object(g.e)(p)):Object(g.f)(p),r=e,a=n,Object.keys(r).forEach(function(h){B[h]||Object.defineProperty(a,h,Object.getOwnPropertyDescriptor(r,h))}),n.displayName=u,n}var B={$$typeof:!0,render:!0,compare:!0,type:!0};function L(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:K(r)}function G(e,t,n,r,a){var i=t==="children"?"render":"children",u=typeof e[t]=="function",p=typeof e[i]=="function";return u&&p?new Error("MobX Observer: Do not use children and render in the same time in`"+n):u||p?null:new Error("Invalid prop `"+a+"` of type `"+typeof e[t]+"` supplied to `"+n+"`, expected `function`.")}L.propTypes={children:G,render:G},L.displayName="Observer";var te;(te=g.g)||(te=O),Object(c.n)({reactionScheduler:te}),Object(m.a)()[w]=!0;var fe=0,ce={};function ye(e){return ce[e]||(ce[e]=function(t){if(typeof Symbol=="function")return Symbol(t);var n="__$mobx-react "+t+" ("+fe+")";return fe++,n}(e)),ce[e]}function xe(e,t){if(ve(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!Object.hasOwnProperty.call(t,n[a])||!ve(e[n[a]],t[n[a]]))return!1;return!0}function ve(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ue(e,t,n){Object.hasOwnProperty.call(e,t)?e[t]=n:Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})}var he=ye("patchMixins"),be=ye("patchedDefinition");function Se(e,t){for(var n=this,r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t.locks++;try{var u;return e!=null&&(u=e.apply(this,a)),u}finally{t.locks--,t.locks===0&&t.methods.forEach(function(p){p.apply(n,a)})}}function Le(e,t){return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];Se.call.apply(Se,[this,e,t].concat(r))}}function $e(e,t,n){var r=function(p,h){var _=p[he]=p[he]||{},x=_[h]=_[h]||{};return x.locks=x.locks||0,x.methods=x.methods||[],x}(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var a=Object.getOwnPropertyDescriptor(e,t);if(!a||!a[be]){var i=e[t],u=Me(e,t,a?a.enumerable:void 0,r,i);Object.defineProperty(e,t,u)}}function Me(e,t,n,r,a){var i,u=Le(a,r);return(i={})[be]=!0,i.get=function(){return u},i.set=function(p){if(this===e)u=Le(p,r);else{var h=Me(this,t,n,r,p);Object.defineProperty(this,t,h)}},i.configurable=!0,i.enumerable=n,i}var Re=c.a||"$mobx",Ke=ye("isMobXReactObserver"),Z=ye("isUnmounted"),$=ye("skipRender"),ae=ye("isForcingUpdate");function _e(e){var t=e.prototype;if(e[Ke]?Ae(t):e[Ke]=!0,t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==g.b)if(t.shouldComponentUpdate){if(t.shouldComponentUpdate!==qe)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else t.shouldComponentUpdate=qe;nt(t,"props"),nt(t,"state");var n=t.render;return t.render=function(){return we.call(this,n)},$e(t,"componentWillUnmount",function(){var r;(r=this.render[Re])===null||r===void 0||r.dispose(),this[Z]=!0,!this.render[Re]&&Ae(this)}),e}function Ae(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function we(e){var t=this;ue(this,$,!1),ue(this,ae,!1);var n=Ae(this),r=e.bind(this),a=!1,i=new c.c(n+".render()",function(){if(!a&&(a=!0,t[Z]!==!0)){var p=!0;try{ue(t,ae,!0),t[$]||g.a.prototype.forceUpdate.call(t),p=!1}finally{ue(t,ae,!1),p&&i.dispose()}}});function u(){a=!1;var p=void 0,h=void 0;if(i.track(function(){try{h=Object(c.d)(!1,r)}catch(_){p=_}}),p)throw p;return h}return i.reactComponent=this,u[Re]=i,this.render=u,u.call(this)}function qe(e,t){return this.state!==t||!xe(this.props,e)}function nt(e,t){var n=ye("reactProp_"+t+"_valueHolder"),r=ye("reactProp_"+t+"_atomHolder");function a(){return this[r]||ue(this,r,Object(c.o)("reactive "+t)),this[r]}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var i=!1;return c.f&&c.e&&(i=Object(c.f)(!0)),a.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(i),this[n]},set:function(i){this[ae]||xe(this[n],i)?ue(this,n,i):(ue(this,n,i),ue(this,$,!0),a.call(this).reportChanged(),ue(this,$,!1))}})}var Ze=typeof Symbol=="function"&&Symbol.for,Ye=Ze?Symbol.for("react.forward_ref"):typeof g.e=="function"&&Object(g.e)(function(e){return null}).$$typeof,ge=Ze?Symbol.for("react.memo"):typeof g.f=="function"&&Object(g.f)(function(e){return null}).$$typeof;function He(e){if(e.isMobxInjector,ge&&e.$$typeof===ge)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Ye&&e.$$typeof===Ye){var t=e.render;if(typeof t!="function")throw new Error("render property of ForwardRef was not a function");return Object(g.e)(function(){var n=arguments;return Object(g.c)(L,null,function(){return t.apply(void 0,n)})})}return typeof e!="function"||e.prototype&&e.prototype.render||e.isReactClass||Object.prototype.isPrototypeOf.call(g.a,e)?_e(e):N(e)}if(!g.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var ee=o(0);o(3),o(60),o(2),o(6),o(4),o(11),o(39),o(29),o(22),o(20),o(5),o(23),o(21),o(25),o(8),o(9),o(16),o(24),o(18),o(188),o(193),o(103),o(152),o(153);var ze=function(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a},ut=function(){this.__data__=[],this.size=0},gt=function(e,t){return e===t||e!=e&&t!=t},it=function(e,t){for(var n=e.length;n--;)if(gt(e[n][0],t))return n;return-1},ht=Array.prototype.splice,St=function(e){var t=this.__data__,n=it(t,e);return!(n<0)&&(n==t.length-1?t.pop():ht.call(t,n,1),--this.size,!0)},Pt=function(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]},at=function(e){return it(this.__data__,e)>-1},Nt=function(e,t){var n=this.__data__,r=it(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function F(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}F.prototype.clear=ut,F.prototype.delete=St,F.prototype.get=Pt,F.prototype.has=at,F.prototype.set=Nt;var oe=F,Y=function(){this.__data__=new oe,this.size=0},se=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Te=function(e){return this.__data__.get(e)},De=function(e){return this.__data__.has(e)},Fe=o(31),lt=Fe.a.Symbol,Ht=Object.prototype,$t=Ht.hasOwnProperty,Ct=Ht.toString,Rt=lt?lt.toStringTag:void 0,Be=function(e){var t=$t.call(e,Rt),n=e[Rt];try{e[Rt]=void 0;var r=!0}catch{}var a=Ct.call(e);return r&&(t?e[Rt]=n:delete e[Rt]),a},Ve=Object.prototype.toString,et=function(e){return Ve.call(e)},rt=lt?lt.toStringTag:void 0,wt=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":rt&&rt in Object(e)?Be(e):et(e)},Tt=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},ur,Fn=function(e){if(!Tt(e))return!1;var t=wt(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Un=Fe.a["__core-js_shared__"],Fr=(ur=/[^.]+$/.exec(Un&&Un.keys&&Un.keys.IE_PROTO||""))?"Symbol(src)_1."+ur:"",ku=function(e){return!!Fr&&Fr in e},Bo=Function.prototype.toString,Pn=function(e){if(e!=null){try{return Bo.call(e)}catch{}try{return e+""}catch{}}return""},Pi=/^\[object .+?Constructor\]$/,Xe=Function.prototype,Tu=Object.prototype,Mi=Xe.toString,Ai=Tu.hasOwnProperty,gn=RegExp("^"+Mi.call(Ai).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bn=function(e){return!(!Tt(e)||ku(e))&&(Fn(e)?gn:Pi).test(Pn(e))},ki=function(e,t){return e==null?void 0:e[t]},Yn=function(e,t){var n=ki(e,t);return bn(n)?n:void 0},Er=Yn(Fe.a,"Map"),In=Yn(Object,"create"),Go=function(){this.__data__=In?In(null):{},this.size=0},Ti=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Du=Object.prototype.hasOwnProperty,io=function(e){var t=this.__data__;if(In){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return Du.call(t,e)?t[e]:void 0},Nu=Object.prototype.hasOwnProperty,Di=function(e){var t=this.__data__;return In?t[e]!==void 0:Nu.call(t,e)},Cu=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===void 0?"__lodash_hash_undefined__":t,this};function sr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sr.prototype.clear=Go,sr.prototype.delete=Ti,sr.prototype.get=io,sr.prototype.has=Di,sr.prototype.set=Cu;var Ni=sr,Vn=function(){this.size=0,this.__data__={hash:new Ni,map:new(Er||oe),string:new Ni}},Ru=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},ao=function(e,t){var n=e.__data__;return Ru(t)?n[typeof t=="string"?"string":"hash"]:n.map},Ho=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},Xo=function(e){return ao(this,e).get(e)},Iu=function(e){return ao(this,e).has(e)},Ci=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Sr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sr.prototype.clear=Vn,Sr.prototype.delete=Ho,Sr.prototype.get=Xo,Sr.prototype.has=Iu,Sr.prototype.set=Ci;var jr=Sr,Ri=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!Er||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new jr(r)}return n.set(e,t),this.size=n.size,this};function Pr(e){var t=this.__data__=new oe(e);this.size=t.size}Pr.prototype.clear=Y,Pr.prototype.delete=se,Pr.prototype.get=Te,Pr.prototype.has=De,Pr.prototype.set=Ri;var Wn=Pr,Ii=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Li=function(e){return this.__data__.has(e)};function Ur(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new jr;++t<n;)this.add(e[t])}Ur.prototype.add=Ur.prototype.push=Ii,Ur.prototype.has=Li;var zi=Ur,Lu=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Bi=function(e,t){return e.has(t)},Gi=function(e,t,n,r,a,i){var u=1&n,p=e.length,h=t.length;if(p!=h&&!(u&&h>p))return!1;var _=i.get(e),x=i.get(t);if(_&&x)return _==t&&x==e;var P=-1,A=!0,R=2&n?new zi:void 0;for(i.set(e,t),i.set(t,e);++P<p;){var U=e[P],W=t[P];if(r)var ne=u?r(W,U,P,t,e,i):r(U,W,P,e,t,i);if(ne!==void 0){if(ne)continue;A=!1;break}if(R){if(!Lu(t,function(re,de){if(!Bi(R,de)&&(U===re||a(U,re,n,r,i)))return R.push(de)})){A=!1;break}}else if(U!==W&&!a(U,W,n,r,i)){A=!1;break}}return i.delete(e),i.delete(t),A},Yr=Fe.a.Uint8Array,Hi=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n},zu=function(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n},Xi=lt?lt.prototype:void 0,Fo=Xi?Xi.valueOf:void 0,Vr=function(e,t,n,r,a,i,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Yr(e),new Yr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return gt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=Hi;case"[object Set]":var h=1&r;if(p||(p=zu),e.size!=t.size&&!h)return!1;var _=u.get(e);if(_)return _==t;r|=2,u.set(e,t);var x=Gi(p(e),p(t),r,a,i,u);return u.delete(e),x;case"[object Symbol]":if(Fo)return Fo.call(e)==Fo.call(t)}return!1},$n=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e},Zt=Array.isArray,Fi=function(e,t,n){var r=t(e);return Zt(e)?r:$n(r,n(e))},Ui=function(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var u=e[n];t(u,n,e)&&(i[a++]=u)}return i},Yi=function(){return[]},Bu=Object.prototype.propertyIsEnumerable,cr=Object.getOwnPropertySymbols,Mn=cr?function(e){return e==null?[]:(e=Object(e),Ui(cr(e),function(t){return Bu.call(e,t)}))}:Yi,Gu=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},An=function(e){return e!=null&&typeof e=="object"},mn=function(e){return An(e)&&wt(e)=="[object Arguments]"},Vi=Object.prototype,Wi=Vi.hasOwnProperty,Hu=Vi.propertyIsEnumerable,uo=mn(function(){return arguments}())?mn:function(e){return An(e)&&Wi.call(e,"callee")&&!Hu.call(e,"callee")},Kn=uo,Wr=o(48),Xu=/^(?:0|[1-9]\d*)$/,rn=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&Xu.test(e))&&e>-1&&e%1==0&&e<t},lr=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},vt={};vt["[object Float32Array]"]=vt["[object Float64Array]"]=vt["[object Int8Array]"]=vt["[object Int16Array]"]=vt["[object Int32Array]"]=vt["[object Uint8Array]"]=vt["[object Uint8ClampedArray]"]=vt["[object Uint16Array]"]=vt["[object Uint32Array]"]=!0,vt["[object Arguments]"]=vt["[object Array]"]=vt["[object ArrayBuffer]"]=vt["[object Boolean]"]=vt["[object DataView]"]=vt["[object Date]"]=vt["[object Error]"]=vt["[object Function]"]=vt["[object Map]"]=vt["[object Number]"]=vt["[object Object]"]=vt["[object RegExp]"]=vt["[object Set]"]=vt["[object String]"]=vt["[object WeakMap]"]=!1;var _n=function(e){return An(e)&&lr(e.length)&&!!vt[wt(e)]},fr=function(e){return function(t){return e(t)}},Kt=o(49),$i=Kt.a&&Kt.a.isTypedArray,Uo=$i?fr($i):_n,Ki=Object.prototype.hasOwnProperty,kn=function(e,t){var n=Zt(e),r=!n&&Kn(e),a=!n&&!r&&Object(Wr.a)(e),i=!n&&!r&&!a&&Uo(e),u=n||r||a||i,p=u?Gu(e.length,String):[],h=p.length;for(var _ in e)!t&&!Ki.call(e,_)||u&&(_=="length"||a&&(_=="offset"||_=="parent")||i&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||rn(_,h))||p.push(_);return p},qi=Object.prototype,so=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||qi)},Tn=function(e,t){return function(n){return e(t(n))}},Zi=Tn(Object.keys,Object),Fu=Object.prototype.hasOwnProperty,Yo=function(e){if(!so(e))return Zi(e);var t=[];for(var n in Object(e))Fu.call(e,n)&&n!="constructor"&&t.push(n);return t},It=function(e){return e!=null&&lr(e.length)&&!Fn(e)},Mr=function(e){return It(e)?kn(e):Yo(e)},co=function(e){return Fi(e,Mr,Mn)},dn=Object.prototype.hasOwnProperty,Ji=function(e,t,n,r,a,i){var u=1&n,p=co(e),h=p.length;if(h!=co(t).length&&!u)return!1;for(var _=h;_--;){var x=p[_];if(!(u?x in t:dn.call(t,x)))return!1}var P=i.get(e),A=i.get(t);if(P&&A)return P==t&&A==e;var R=!0;i.set(e,t),i.set(t,e);for(var U=u;++_<h;){var W=e[x=p[_]],ne=t[x];if(r)var re=u?r(ne,W,x,t,e,i):r(W,ne,x,e,t,i);if(!(re===void 0?W===ne||a(W,ne,n,r,i):re)){R=!1;break}U||(U=x=="constructor")}if(R&&!U){var de=e.constructor,Oe=t.constructor;de==Oe||!("constructor"in e)||!("constructor"in t)||typeof de=="function"&&de instanceof de&&typeof Oe=="function"&&Oe instanceof Oe||(R=!1)}return i.delete(e),i.delete(t),R},$r=Yn(Fe.a,"DataView"),lo=Yn(Fe.a,"Promise"),fo=Yn(Fe.a,"Set"),po=Yn(Fe.a,"WeakMap"),Qi="[object Map]",hn="[object Promise]",On="[object Set]",Ar="[object WeakMap]",Vo="[object DataView]",Wo=Pn($r),$o=Pn(Er),ea=Pn(lo),Uu=Pn(fo),ho=Pn(po),pr=wt;($r&&pr(new $r(new ArrayBuffer(1)))!=Vo||Er&&pr(new Er)!=Qi||lo&&pr(lo.resolve())!=hn||fo&&pr(new fo)!=On||po&&pr(new po)!=Ar)&&(pr=function(e){var t=wt(e),n=t=="[object Object]"?e.constructor:void 0,r=n?Pn(n):"";if(r)switch(r){case Wo:return Vo;case $o:return Qi;case ea:return hn;case Uu:return On;case ho:return Ar}return t});var y=pr,b="[object Arguments]",E="[object Array]",k="[object Object]",X=Object.prototype.hasOwnProperty,Q=function(e,t,n,r,a,i){var u=Zt(e),p=Zt(t),h=u?E:y(e),_=p?E:y(t),x=(h=h==b?k:h)==k,P=(_=_==b?k:_)==k,A=h==_;if(A&&Object(Wr.a)(e)){if(!Object(Wr.a)(t))return!1;u=!0,x=!1}if(A&&!x)return i||(i=new Wn),u||Uo(e)?Gi(e,t,n,r,a,i):Vr(e,t,h,n,r,a,i);if(!(1&n)){var R=x&&X.call(e,"__wrapped__"),U=P&&X.call(t,"__wrapped__");if(R||U){var W=R?e.value():e,ne=U?t.value():t;return i||(i=new Wn),a(W,ne,n,r,i)}}return!!A&&(i||(i=new Wn),Ji(e,t,n,r,a,i))},pe=function e(t,n,r,a,i){return t===n||(t==null||n==null||!An(t)&&!An(n)?t!=t&&n!=n:Q(t,n,r,a,e,i))},je=function(e,t,n,r){var a=n.length,i=a,u=!r;if(e==null)return!i;for(e=Object(e);a--;){var p=n[a];if(u&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++a<i;){var h=(p=n[a])[0],_=e[h],x=p[1];if(u&&p[2]){if(_===void 0&&!(h in e))return!1}else{var P=new Wn;if(r)var A=r(_,x,h,e,t,P);if(!(A===void 0?pe(x,_,3,r,P):A))return!1}}return!0},Ge=function(e){return e==e&&!Tt(e)},pt=function(e){for(var t=Mr(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Ge(a)]}return t},ot=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},xt=function(e){var t=pt(e);return t.length==1&&t[0][2]?ot(t[0][0],t[0][1]):function(n){return n===e||je(n,e,t)}},ct=function(e){return typeof e=="symbol"||An(e)&&wt(e)=="[object Symbol]"},_t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/,At=function(e,t){if(Zt(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!ct(e))||wn.test(e)||!_t.test(e)||t!=null&&e in Object(t)};function on(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var u=e.apply(this,r);return n.cache=i.set(a,u)||i,u};return n.cache=new(on.Cache||jr),n}on.Cache=jr;var Kr=on,Yu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ta=/\\(\\)?/g,na=function(e){var t=Kr(e,function(r){return n.size===500&&n.clear(),r}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Yu,function(n,r,a,i){t.push(a?i.replace(ta,"$1"):r||n)}),t}),yo=lt?lt.prototype:void 0,Ko=yo?yo.toString:void 0,an=function e(t){if(typeof t=="string")return t;if(Zt(t))return ze(t,e)+"";if(ct(t))return Ko?Ko.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},ra=function(e){return e==null?"":an(e)},qr=function(e,t){return Zt(e)?e:At(e,t)?[e]:na(ra(e))},qo=function(e){if(typeof e=="string"||ct(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},Vu=function(e,t){for(var n=0,r=(t=qr(t,e)).length;e!=null&&n<r;)e=e[qo(t[n++])];return n&&n==r?e:void 0},ff=function(e,t,n){var r=e==null?void 0:Vu(e,t);return r===void 0?n:r},ag=function(e,t){return e!=null&&t in Object(e)},ug=function(e,t,n){for(var r=-1,a=(t=qr(t,e)).length,i=!1;++r<a;){var u=qo(t[r]);if(!(i=e!=null&&n(e,u)))break;e=e[u]}return i||++r!=a?i:!!(a=e==null?0:e.length)&&lr(a)&&rn(u,a)&&(Zt(e)||Kn(e))},pf=function(e,t){return e!=null&&ug(e,t,ag)},sg=function(e,t){return At(e)&&Ge(t)?ot(qo(e),t):function(n){var r=ff(n,e);return r===void 0&&r===t?pf(n,e):pe(t,r,3)}},Wu=function(e){return e},cg=function(e){return function(t){return t==null?void 0:t[e]}},lg=function(e){return function(t){return Vu(t,e)}},fg=function(e){return At(e)?cg(qo(e)):lg(e)},pg=function(e){return typeof e=="function"?e:e==null?Wu:typeof e=="object"?Zt(e)?sg(e[0],e[1]):xt(e):fg(e)},df=function(e){return function(t,n,r){for(var a=-1,i=Object(t),u=r(t),p=u.length;p--;){var h=u[e?p:++a];if(n(i[h],h,i)===!1)break}return t}}(),dg=function(e,t){return function(n,r){if(n==null)return n;if(!It(n))return e(n,r);for(var a=n.length,i=t?a:-1,u=Object(n);(t?i--:++i<a)&&r(u[i],i,u)!==!1;);return n}}(function(e,t){return e&&df(e,t,Mr)}),hg=function(e,t){var n=-1,r=It(e)?Array(e.length):[];return dg(e,function(a,i,u){r[++n]=t(a,i,u)}),r},oa=function(e,t){return(Zt(e)?ze:hg)(e,pg(t))};Object(c.n)({isolateGlobalState:!0});var ia=function(){try{var e=Yn(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$u=function(e,t,n){t=="__proto__"&&ia?ia(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},yg=Object.prototype.hasOwnProperty,aa=function(e,t,n){var r=e[t];yg.call(e,t)&&gt(r,n)&&(n!==void 0||t in e)||$u(e,t,n)},vo=function(e,t,n,r){var a=!n;n||(n={});for(var i=-1,u=t.length;++i<u;){var p=t[i],h=r?r(n[p],e[p],p,n,e):void 0;h===void 0&&(h=e[p]),a?$u(n,p,h):aa(n,p,h)}return n},vg=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},hf=Math.max,yf=function(e,t,n){return t=hf(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=hf(r.length-t,0),u=Array(i);++a<i;)u[a]=r[t+a];a=-1;for(var p=Array(t+1);++a<t;)p[a]=r[a];return p[t]=n(u),vg(e,this,p)}},gg=function(e){return function(){return e}},bg=ia?function(e,t){return ia(e,"toString",{configurable:!0,enumerable:!1,value:gg(t),writable:!0})}:Wu,mg=Date.now,_g=function(e){var t=0,n=0;return function(){var r=mg(),a=16-(r-n);if(n=r,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},vf=_g(bg),Og=function(e,t){return vf(yf(e,t,Wu),e+"")},wg=function(e,t,n){if(!Tt(n))return!1;var r=typeof t;return!!(r=="number"?It(n)&&rn(t,n.length):r=="string"&&t in n)&&gt(n[t],e)},gf=function(e){return Og(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,u=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,u&&wg(n[0],n[1],u)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var p=n[r];p&&e(t,p,r,i)}return t})},xg=Object.prototype.hasOwnProperty,un=gf(function(e,t){if(so(t)||It(t))vo(t,Mr(t),e);else for(var n in t)xg.call(t,n)&&aa(e,n,t[n])}),Eg=function(e,t,n,r){if(!Tt(e))return e;for(var a=-1,i=(t=qr(t,e)).length,u=i-1,p=e;p!=null&&++a<i;){var h=qo(t[a]),_=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(a!=u){var x=p[h];(_=r?r(x,h,p):void 0)===void 0&&(_=Tt(x)?x:rn(t[a+1])?[]:{})}aa(p,h,_),p=p[h]}return e},Sg=function(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var u=t[r],p=Vu(e,u);n(p,u)&&Eg(i,qr(u,e),p)}return i},jg=function(e,t){return Sg(e,t,function(n,r){return pf(e,r)})},bf=lt?lt.isConcatSpreadable:void 0,Pg=function(e){return Zt(e)||Kn(e)||!!(bf&&e&&e[bf])},Mg=function e(t,n,r,a,i){var u=-1,p=t.length;for(r||(r=Pg),i||(i=[]);++u<p;){var h=t[u];n>0&&r(h)?n>1?e(h,n-1,r,a,i):$n(i,h):a||(i[i.length]=h)}return i},Ag=function(e){return e!=null&&e.length?Mg(e,1):[]},Lt,mf,_f,Of,wf,xf,Ef,Sf,jf,Pf,Mf,Af,kf,Tf,Df,Nf,Cf,Rf,Zo=function(e){return vf(yf(e,void 0,Ag),e+"")}(function(e,t){return e==null?{}:jg(e,t)});function Jt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function kg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qt(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Ot,Lf,dt,Xt,tt,kt,Tg={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},Ku=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],zf=(mf=qt((Lt=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),Jt(this,"isSilentMode",mf,this),Jt(this,"stopZoomGraph",_f,this),Jt(this,"stopScrollGraph",Of,this),Jt(this,"stopMoveGraph",wf,this),Jt(this,"adjustEdge",xf,this),Jt(this,"adjustEdgeMiddle",Ef,this),Jt(this,"adjustEdgeStartAndEnd",Sf,this),Jt(this,"adjustNodePosition",jf,this),Jt(this,"hideAnchors",Pf,this),Jt(this,"hoverOutline",Mf,this),Jt(this,"nodeSelectedOutline",Af,this),Jt(this,"edgeSelectedOutline",kf,this),Jt(this,"nodeTextEdit",Tf,this),Jt(this,"edgeTextEdit",Df,this),Jt(this,"nodeTextDraggable",Nf,this),Jt(this,"edgeTextDraggable",Cf,this),Jt(this,"autoExpand",Rf,this),If(this,"multipleSelectKey",""),If(this,"defaultConfig",{}),un(this,this.getConfigDetail(r))}var t,n;return t=e,(n=[{key:"updateEditConfig",value:function(r){var a=this.getConfigDetail(r);un(this,a)}},{key:"getConfigDetail",value:function(r){var a=r.isSilentMode,i=r.textEdit,u={};if(a===!1&&un(u,this.defaultConfig),a===!0){var p=Zo(Tg,Ku);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},un(u,p)}i===!1&&un(u,{nodeTextEdit:!1,edgeTextEdit:!1});var h=Zo(r,Ku);return un(u,h)}},{key:"getConfig",value:function(){return Zo(this,Ku)}}])&&kg(t.prototype,n),e}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_f=qt(Lt.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Of=qt(Lt.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),wf=qt(Lt.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xf=qt(Lt.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ef=qt(Lt.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Sf=qt(Lt.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jf=qt(Lt.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pf=qt(Lt.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mf=qt(Lt.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Af=qt(Lt.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),kf=qt(Lt.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tf=qt(Lt.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Df=qt(Lt.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Nf=qt(Lt.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Cf=qt(Lt.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rf=qt(Lt.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt(Lt.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(Lt.prototype,"updateEditConfig"),Lt.prototype),Lt);o(63),function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Ot||(Ot={})),function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"}(Lf||(Lf={})),function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"}(dt||(dt={})),function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"}(Xt||(Xt={})),function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"}(tt||(tt={})),function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(kt||(kt={}));var xn,zt,Bf,Gf,Hf,Xf,Ff,Uf,Yf;function ua(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Vf(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vf(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vf(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Dg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(xn||(xn={}));var Ng=(zt=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),qu(this,"MINI_SCALE_SIZE",.2),qu(this,"MAX_SCALE_SIZE",16),Zr(this,"SCALE_X",Bf,this),Zr(this,"SKEW_Y",Gf,this),Zr(this,"SKEW_X",Hf,this),Zr(this,"SCALE_Y",Xf,this),Zr(this,"TRANSLATE_X",Ff,this),Zr(this,"TRANSLATE_Y",Uf,this),Zr(this,"ZOOM_SIZE",Yf,this),qu(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,n=[{key:"setZoomMiniSize",value:function(r){this.MINI_SCALE_SIZE=r}},{key:"setZoomMaxSize",value:function(r){this.MAX_SCALE_SIZE=r}},{key:"HtmlPointToCanvasPoint",value:function(r){var a=ua(r,2),i=a[0],u=a[1];return[(i-this.TRANSLATE_X)/this.SCALE_X,(u-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(r){var a=ua(r,2),i=a[0],u=a[1];return[i*this.SCALE_X+this.TRANSLATE_X,u*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(r,a,i){var u=ua(r,2),p=u[0],h=u[1];return[p+a/this.SCALE_X,h+i/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(r,a){return[r/this.SCALE_X,a/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var r=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(r,")")}}},{key:"zoom",value:function(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0],a=arguments.length>1?arguments[1]:void 0,i=this.SCALE_X,u=this.SCALE_Y;return r===!0?(i+=this.ZOOM_SIZE,u+=this.ZOOM_SIZE):r===!1?(i-=this.ZOOM_SIZE,u-=this.ZOOM_SIZE):typeof r=="number"&&(i=r,u=r),i<this.MINI_SCALE_SIZE||i>this.MAX_SCALE_SIZE||(a&&(this.TRANSLATE_X-=(i-this.SCALE_X)*a[0],this.TRANSLATE_Y-=(u-this.SCALE_Y)*a[1]),this.SCALE_X=i,this.SCALE_Y=u,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(r){this.eventCenter.emit(tt.GRAPH_TRANSFORM,{type:r,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(r,a){this.TRANSLATE_X+=r,this.TRANSLATE_Y+=a,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(r,a,i,u){var p=ua(this.CanvasPointToHtmlPoint([r,a]),2),h=i/2-p[0],_=u/2-p[1];this.TRANSLATE_X+=h,this.TRANSLATE_Y+=_,this.emitGraphTransform("focusOn")}}],n&&Dg(t.prototype,n),e}(),Bf=Ln(zt.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Gf=Ln(zt.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hf=Ln(zt.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Xf=Ln(zt.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ff=Ln(zt.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Uf=Ln(zt.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yf=Ln(zt.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Ln(zt.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"zoom"),zt.prototype),Ln(zt.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"resetZoom"),zt.prototype),Ln(zt.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"translate"),zt.prototype),Ln(zt.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(zt.prototype,"focusOn"),zt.prototype),zt),Cg=function(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e},Rg=function(e,t){return e&&vo(t,Mr(t),e)},Ig=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},Lg=Object.prototype.hasOwnProperty,zg=function(e){if(!Tt(e))return Ig(e);var t=so(e),n=[];for(var r in e)(r!="constructor"||!t&&Lg.call(e,r))&&n.push(r);return n},Jo=function(e){return It(e)?kn(e,!0):zg(e)},Bg=function(e,t){return e&&vo(t,Jo(t),e)},Wf=o(106),$f=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Gg=function(e,t){return vo(e,Mn(e),t)},Zu=Tn(Object.getPrototypeOf,Object),Kf=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)$n(t,Mn(e)),e=Zu(e);return t}:Yi,Hg=function(e,t){return vo(e,Kf(e),t)},Xg=function(e){return Fi(e,Jo,Kf)},Fg=Object.prototype.hasOwnProperty,Ug=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Fg.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Ju=function(e){var t=new e.constructor(e.byteLength);return new Yr(t).set(new Yr(e)),t},Yg=function(e,t){var n=t?Ju(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Vg=/\w*$/,Wg=function(e){var t=new e.constructor(e.source,Vg.exec(e));return t.lastIndex=e.lastIndex,t},qf=lt?lt.prototype:void 0,Zf=qf?qf.valueOf:void 0,$g=function(e){return Zf?Object(Zf.call(e)):{}},Jf=function(e,t){var n=t?Ju(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Kg=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Ju(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Yg(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Jf(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Wg(e);case"[object Symbol]":return $g(e)}},Qf=Object.create,qg=function(){function e(){}return function(t){if(!Tt(t))return{};if(Qf)return Qf(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),ep=function(e){return typeof e.constructor!="function"||so(e)?{}:qg(Zu(e))},Zg=function(e){return An(e)&&y(e)=="[object Map]"},tp=Kt.a&&Kt.a.isMap,Jg=tp?fr(tp):Zg,Qg=function(e){return An(e)&&y(e)=="[object Set]"},np=Kt.a&&Kt.a.isSet,eb=np?fr(np):Qg,rp="[object Arguments]",op="[object Function]",tb="[object Object]",Mt={};Mt[rp]=Mt["[object Array]"]=Mt["[object ArrayBuffer]"]=Mt["[object DataView]"]=Mt["[object Boolean]"]=Mt["[object Date]"]=Mt["[object Float32Array]"]=Mt["[object Float64Array]"]=Mt["[object Int8Array]"]=Mt["[object Int16Array]"]=Mt["[object Int32Array]"]=Mt["[object Map]"]=Mt["[object Number]"]=Mt["[object Object]"]=Mt["[object RegExp]"]=Mt["[object Set]"]=Mt["[object String]"]=Mt["[object Symbol]"]=Mt["[object Uint8Array]"]=Mt["[object Uint8ClampedArray]"]=Mt["[object Uint16Array]"]=Mt["[object Uint32Array]"]=!0,Mt["[object Error]"]=Mt[op]=Mt["[object WeakMap]"]=!1;var nb=function e(t,n,r,a,i,u){var p,h=1&n,_=2&n,x=4&n;if(r&&(p=i?r(t,a,i,u):r(t)),p!==void 0)return p;if(!Tt(t))return t;var P=Zt(t);if(P){if(p=Ug(t),!h)return $f(t,p)}else{var A=y(t),R=A==op||A=="[object GeneratorFunction]";if(Object(Wr.a)(t))return Object(Wf.a)(t,h);if(A==tb||A==rp||R&&!i){if(p=_||R?{}:ep(t),!h)return _?Hg(t,Bg(p,t)):Gg(t,Rg(p,t))}else{if(!Mt[A])return i?t:{};p=Kg(t,A,h)}}u||(u=new Wn);var U=u.get(t);if(U)return U;u.set(t,p),eb(t)?t.forEach(function(ne){p.add(e(ne,n,r,ne,t,u))}):Jg(t)&&t.forEach(function(ne,re){p.set(re,e(ne,n,r,re,t,u))});var W=P?void 0:(x?_?Xg:co:_?Jo:Mr)(t);return Cg(W||t,function(ne,re){W&&(ne=t[re=ne]),aa(p,re,e(ne,n,r,re,t,u))}),p},Dt=function(e){return nb(e,5)},Qu=function(e,t,n){(n!==void 0&&!gt(e[t],n)||n===void 0&&!(t in e))&&$u(e,t,n)},rb=function(e){return An(e)&&It(e)},ob=Function.prototype,ib=Object.prototype,ip=ob.toString,ab=ib.hasOwnProperty,ub=ip.call(Object),sb=function(e){if(!An(e)||wt(e)!="[object Object]")return!1;var t=Zu(e);if(t===null)return!0;var n=ab.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&ip.call(n)==ub},es=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},cb=function(e){return vo(e,Jo(e))},lb=function(e,t,n,r,a,i,u){var p=es(e,n),h=es(t,n),_=u.get(h);if(_)Qu(e,n,_);else{var x=i?i(p,h,n+"",e,t,u):void 0,P=x===void 0;if(P){var A=Zt(h),R=!A&&Object(Wr.a)(h),U=!A&&!R&&Uo(h);x=h,A||R||U?Zt(p)?x=p:rb(p)?x=$f(p):R?(P=!1,x=Object(Wf.a)(h,!0)):U?(P=!1,x=Jf(h,!0)):x=[]:sb(h)||Kn(h)?(x=p,Kn(p)?x=cb(p):Tt(p)&&!Fn(p)||(x=ep(h))):P=!1}P&&(u.set(h,x),a(x,h,r,i,u),u.delete(h)),Qu(e,n,x)}},fb=function e(t,n,r,a,i){t!==n&&df(n,function(u,p){if(i||(i=new Wn),Tt(u))lb(t,n,p,r,e,a,i);else{var h=a?a(es(t,p),u,p+"",t,n,i):void 0;h===void 0&&(h=u),Qu(t,p,h)}},Jo)},ap=gf(function(e,t,n){fb(e,t,n)}),pb={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},up=function(e){var t=Dt(pb);return e&&(t=ap(t,e)),t};o(77),o(158);function db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var hb=function(){function e(){var r,a,i;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),i={},(a="_events")in(r=this)?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i}var t,n;return t=e,(n=[{key:"on",value:function(r,a,i){var u=this;return r==null||r.split(",").forEach(function(p){p=p.trim(),u._events[p]||(u._events[p]=[]),u._events[p].push({callback:a,once:!!i})}),this}},{key:"once",value:function(r,a){var i=this;r==null||r.split(",").forEach(function(u){return u=u.trim(),i.on(u,a,!0)})}},{key:"emit",value:function(r,a){var i=this;r==null||r.split(",").forEach(function(u){var p=i._events[u]||[],h=i._events["*"]||[],_=function(x){for(var P=x.length,A=0;A<P;A++)if(x[A]){var R=x[A],U=R.callback;R.once&&(x.splice(A,1),x.length===0&&delete i._events[u],P--,A--),U.apply(i,[a])}};_(p),_(h)})}},{key:"off",value:function(r,a){var i=this;return r||(this._events={}),r.split(",").forEach(function(u){if(a){for(var p=i._events[u]||[],h=p.length,_=0;_<h;_++)p[_].callback===a&&(p.splice(_,1),h--,_--);p.length===0&&delete i._events[u]}else delete i._events[u]}),this}},{key:"getEvents",value:function(){return this._events}}])&&db(t.prototype,n),e}();function kr(e,t){return t*Math.round(e/t)||e}function sp(e,t){return e%t}function ts(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return cp(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cp(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function cp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ns,rs=function(e,t,n){var r=ts(e,2),a=r[0],i=r[1],u=ts(t,2),p=u[0],h=u[1],_=ts(n,2),x=_[0],P=_[1];return a>p&&a<x&&i>h&&i<P},lp=function(e,t){var n=!1;switch(t.multipleSelectKey){case"meta":n=e.metaKey;break;case"alt":n=e.altKey;break;case"shift":n=e.shiftKey;break;case"ctrl":n=e.ctrlKey;break;default:n=!1}return n},yb=(o(78),o(161),o(125),o(79),o(30),o(12),o(13),o(14),o(47),new Uint8Array(16));function vb(){if(!ns&&!(ns=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ns(yb)}for(var gb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,bb=function(e){return typeof e=="string"&&gb.test(e)},Qt=[],os=0;os<256;++os)Qt.push((os+256).toString(16).substr(1));var mb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Qt[e[t+0]]+Qt[e[t+1]]+Qt[e[t+2]]+Qt[e[t+3]]+"-"+Qt[e[t+4]]+Qt[e[t+5]]+"-"+Qt[e[t+6]]+Qt[e[t+7]]+"-"+Qt[e[t+8]]+Qt[e[t+9]]+"-"+Qt[e[t+10]]+Qt[e[t+11]]+Qt[e[t+12]]+Qt[e[t+13]]+Qt[e[t+14]]+Qt[e[t+15]]).toLowerCase();if(!bb(n))throw TypeError("Stringified UUID is invalid");return n},is=function(e,t,n){var r=(e=e||{}).random||(e.rng||vb)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return mb(r)},Tr=function(){return is()},_b=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=e.nodes.reduce(function(r,a){return r[a.id]=t+is(),a.id=r[a.id],r},{});return e.edges.forEach(function(r){r.id=t+is(),r.sourceNodeId=n[r.sourceNodeId],r.targetNodeId=n[r.targetNodeId]}),e},Qo=(o(104),o(162),function(e,t,n){var r=e.x,a=e.y;return(r-t.x)*(r-n.x)<=0&&(a-t.y)*(a-n.y)<=0});function as(e){return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(e)}function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fp(Object(n),!0).forEach(function(r){Ob(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ob(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me,dp,hp,yp,vp,gp,bp,mp,_p,Op,wp,xp,Ep,Sp,jp,Pp,Mp,Ap,kp,Tp,Dp,us=function(e){return e.anchors},sa=function(e,t){for(var n,r=t.nodes,a=r.length-1;a>=0;a--){var i=r[a];if(xb(e,i)){var u=i.getTargetAnchor(e);if(u){var p={node:i,anchorIndex:u.index,anchor:u.anchor};n&&!wb(i,n.node,t)||(n=p)}}}return n},wb=function(e,t,n){return e.zIndex>t.zIndex||n.nodesMap[e.id].index>n.nodesMap[t.id].index},qn=function(e,t,n,r){return Math.hypot(e-n,t-r)},Dr=function(e,t){var n=!1,r=En(t);return e.x>=r.minX-0&&e.x<=r.maxX+0&&e.y>=r.minY-0&&e.y<=r.maxY+0&&(n=!0),n},xb=function(e,t){var n=!1,r=En(t);return e.x>=r.minX-5&&e.x<=r.maxX+5&&e.y>=r.minY-5&&e.y<=r.maxY+5&&(n=!0),n},En=function(e){var t=e.x,n=e.y,r=e.width,a=e.height;return{minX:t-r/2,minY:n-a/2,maxX:t+r/2,maxY:n+a/2,x:t,y:n,width:r,height:a,centerX:t,centerY:n}},Np=function(e,t,n){var r,a=function(u){var p=u,h=p.x,_=p.y,x=p.width,P=p.height,A=p.radius;return[{x:h-x/2+A,y:_-P/2+A,r:A},{x:h+x/2-A,y:_-P/2+A,r:A},{x:h-x/2+A,y:_+P/2-A,r:A},{x:h+x/2-A,y:_+P/2-A,r:A}]}(n),i=Number.MAX_SAFE_INTEGER;return a.forEach(function(u){var p=qn(e.x,e.y,u.x,u.y);p<i&&(i=p,r=u)}),ss(e,t,r)},ss=function(e,t,n){var r,a=n,i=a.x,u=a.y,p=a.r;if(t===kt.HORIZONTAL){var h=i-Math.sqrt(p*p-(e.y-u)*(e.y-u)),_=i+Math.sqrt(p*p-(e.y-u)*(e.y-u));r={x:Math.abs(h-e.x)<Math.abs(_-e.x)?h:_,y:e.y}}else if(t===kt.VERTICAL){var x=u-Math.sqrt(p*p-(e.x-i)*(e.x-i)),P=u+Math.sqrt(p*p-(e.x-i)*(e.x-i)),A=Math.abs(x-e.y)<Math.abs(P-e.y)?x:P;r={x:e.x,y:A}}return r},Cp=function(e,t){var n=t,r=!1,a=n.x-n.width/2+n.radius,i=n.x+n.width/2-n.radius,u=n.y-n.height/2+n.radius,p=n.y+n.height/2-n.radius,h=n.x,_=n.y,x=n.width,P=n.height;return e.y===_+P/2||e.y===_-P/2?r=e.x>a&&e.x<i:e.x!==h+x/2&&e.x!==h-x/2||(r=e.y>u&&e.y<p),r},Rp=function(e,t,n){var r,a=n,i=a.x,u=a.y,p=a.rx,h=a.ry;if(t===kt.HORIZONTAL){var _=i-Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(h*h)),x=i+Math.sqrt(p*p-(e.y-u)*(e.y-u)*p*p/(h*h));r={x:Math.abs(_-e.x)<Math.abs(x-e.x)?_:x,y:e.y}}else if(t===kt.VERTICAL){var P=u-Math.sqrt(h*h-(e.x-i)*(e.x-i)*h*h/(p*p)),A=u+Math.sqrt(h*h-(e.x-i)*(e.x-i)*h*h/(p*p)),R=Math.abs(P-e.y)<Math.abs(A-e.y)?P:A;r={x:e.x,y:R}}return r},Ip=function(e,t,n){for(var r,a=n.pointsPosition,i=Number.MAX_SAFE_INTEGER,u=[],p=0;p<a.length;p++)u.push({start:a[p],end:a[(p+1)%a.length]});return u.forEach(function(h){var _=h.start,x=h.end,P=_,A=x;_.x>x.x&&(P=x,A=_);var R={x:e.x,y:e.y};if(P.x===A.x&&t===kt.HORIZONTAL&&(R={x:P.x,y:e.y}),P.y===A.y&&t===kt.VERTICAL&&(R={x:e.x,y:P.y}),P.x!==A.x&&P.y!==A.y){var U=(A.y-P.y)/(A.x-P.x),W=(P.x*A.y-A.x*P.y)/(P.x-A.x);t===kt.HORIZONTAL?R={x:(e.y-W)/U,y:e.y}:t===kt.VERTICAL&&(R={x:e.x,y:U*e.x+W})}if(Qo(R,_,x)){var ne=qn(R.x,R.y,e.x,e.y);ne<i&&(i=ne,r=R)}}),r},Lp=function(e,t,n,r){var a=e.x,i=e.y;return t.x>e.x?a=e.x+n/2:t.x<e.x&&(a=e.x-n/2),t.y>e.y?i=e.y+r/2:t.y<e.y&&(i=e.y-r/2),{x:a,y:i}},zp=function(e){var t=e.rows,n=e.style,r=e.rowsLength,a=e.className,i=document.createElement("div");i.style.fontSize=n.fontSize,i.style.width=n.width,i.className=a,i.style.lineHeight=n.lineHeight,i.style.padding=n.padding,n.fontFamily&&(i.style.fontFamily=n.fontFamily),r>1?t.forEach(function(p){var h=document.createElement("div");h.textContent=p,i.appendChild(h)}):i.textContent=t,document.body.appendChild(i);var u=i.clientHeight;return document.body.removeChild(i),u},cs=function(e){var t=e.rows,n=e.rowsLength,r=e.fontSize,a=0;return t&&t.forEach(function(i){var u=ud(i);a=u>a?u:a}),{width:Math.ceil(a/2)*r+r/4,height:n*(r+2)+r/4}},ei=function(e){return as(e)!=="object"?{isAllPass:!!e,msg:e?"":"不允许连接"}:e},en=function(e){try{return JSON.parse(JSON.stringify(e))}catch{return e}},Eb=1e3,Sb=999,ls=function(){return++Eb};function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bp(Object(n),!0).forEach(function(r){Dn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ft(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function jb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var fs=(me=function(){function e(r,a){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Dn(this,"id",""),Ft(this,"type",dp,this),Ft(this,"sourceNodeId",hp,this),Ft(this,"targetNodeId",yp,this),Ft(this,"startPoint",vp,this),Ft(this,"endPoint",gp,this),Ft(this,"text",bp,this),Ft(this,"properties",mp,this),Ft(this,"points",_p,this),Ft(this,"pointsList",Op,this),Ft(this,"isSelected",wp,this),Ft(this,"isHovered",xp,this),Ft(this,"isHitable",Ep,this),Ft(this,"draggable",Sp,this),Ft(this,"visible",jp,this),Dn(this,"virtual",!1),Ft(this,"isAnimation",Pp,this),Ft(this,"isShowAdjustPoint",Mp,this),Dn(this,"graphModel",void 0),Ft(this,"zIndex",Ap,this),Dn(this,"BaseType",Xt.EDGE),Dn(this,"modelType",dt.EDGE),Ft(this,"state",kp,this),Dn(this,"additionStateData",void 0),Dn(this,"sourceAnchorId",""),Dn(this,"targetAnchorId",""),Dn(this,"menu",void 0),Dn(this,"customTextPosition",!1),Ft(this,"style",Tp,this),Ft(this,"arrowConfig",Dp,this),this.graphModel=a,this.initEdgeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"initEdgeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,i=a&&a(r.type),u=this.createId();r.id=u||i||Tr()}this.arrowConfig.markerEnd="url(#marker-end-".concat(r.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(r.id,")");var p=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=p,un(this,Wb(r)),this.graphModel.overlapMode===xn.INCREASE&&(this.zIndex=r.zIndex||ls()),this.setAnchors(),this.initPoints(),this.formatText(r)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return yn(yn({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return yn({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.edgeText;return Dt(r)}},{key:"getEdgeAnimationStyle",value:function(){var r=this.graphModel.theme.edgeAnimation;return Dt(r)}},{key:"getArrowStyle",value:function(){var r=this.getEdgeStyle(),a=this.getEdgeAnimationStyle(),i=this.graphModel.theme.arrow,u=this.isAnimation?a.stroke:r.stroke;return yn(yn({},r),{},{fill:u,stroke:u},i)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Dt(r)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.sourceNodeId])===null||a===void 0?void 0:a.model}},{key:"targetNode",get:function(){var r,a;return(r=this.graphModel)===null||r===void 0||(a=r.nodesMap[this.targetNodeId])===null||a===void 0?void 0:a.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(r,a){var i,u;return us(r).forEach(function(p){var h=fd(p,a);(u===void 0||h<u)&&(u=h,i=p)}),i}},{key:"getEndAnchor",value:function(r){var a,i,u=this;return us(r).forEach(function(p){var h=fd(p,u.startPoint);(i===void 0||h<i)&&(i=h,a=p)}),a}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var r=this.text,a=r.x,i=r.y,u=r.value,p={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return u&&(p.text={x:a,y:i,value:u}),this.graphModel.overlapMode===xn.INCREASE&&(p.zIndex=this.zIndex),p}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(r,a){this.properties[r]=en(a),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=yn(yn({},Object(c.I)(this.properties)),en(r)),this.setAttributes()}},{key:"changeEdgeId",value:function(r){var a=this.arrowConfig,i=a.markerEnd,u=a.markerStart;u&&u==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(r,")")),i&&i==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(r,")")),this.id=r}},{key:"setStyle",value:function(r,a){this.style=yn(yn({},this.style),{},Dn({},r,en(a)))}},{key:"setStyles",value:function(r){this.style=yn(yn({},this.style),en(r))}},{key:"updateStyles",value:function(r){this.style=yn({},en(r))}},{key:"formatText",value:function(r){var a=this.textPosition,i=a.x,u=a.y;r.text&&typeof r.text!="string"?Object.prototype.toString.call(r.text)==="[object Object]"&&(this.text={x:r.text.x||i,y:r.text.y||u,value:r.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:r.text||"",x:i,y:u,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var r=this.textPosition,a=r.x,i=r.y;this.text.x=a,this.text.y=i}},{key:"moveText",value:function(r,a){if(this.text){var i=this.text,u=i.x,p=i.y,h=i.value,_=i.draggable,x=i.editable;this.text={value:h,draggable:_,x:u+r,y:p+a,editable:x}}}},{key:"setText",value:function(r){r&&un(this.text,r)}},{key:"updateText",value:function(r){this.text=yn(yn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var r=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:r.x,y:r.y}),this.sourceAnchorId||(this.sourceAnchorId=r.id)}if(!this.targetAnchorId||!this.endPoint){var a=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:a.x,y:a.y}),this.targetAnchorId||(this.targetAnchorId=a.id)}}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"updateStartPoint",value:function(r){this.startPoint=r}},{key:"moveStartPoint",value:function(r,a){this.startPoint.x+=r,this.startPoint.y+=a}},{key:"updateEndPoint",value:function(r){this.endPoint=r}},{key:"moveEndPoint",value:function(r,a){this.endPoint.x+=r,this.endPoint.y+=a}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=r}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(r){un(this,r)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(r){var a=r.startPoint,i=r.endPoint;this.updateStartPoint({x:a.x,y:a.y}),this.updateEndPoint({x:i.x,y:i.y})}}],n&&jb(t.prototype,n),e}(),dp=Je(me.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),hp=Je(me.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yp=Je(me.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),vp=Je(me.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gp=Je(me.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bp=Je(me.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),mp=Je(me.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_p=Je(me.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Op=Je(me.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wp=Je(me.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xp=Je(me.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ep=Je(me.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Sp=Je(me.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),jp=Je(me.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pp=Je(me.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mp=Je(me.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ap=Je(me.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),kp=Je(me.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Tp=Je(me.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Dp=Je(me.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Je(me.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(me.prototype,"sourceNode"),me.prototype),Je(me.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(me.prototype,"targetNode"),me.prototype),Je(me.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(me.prototype,"textPosition"),me.prototype),Je(me.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setProperty"),me.prototype),Je(me.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"deleteProperty"),me.prototype),Je(me.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setProperties"),me.prototype),Je(me.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"changeEdgeId"),me.prototype),Je(me.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setStyle"),me.prototype),Je(me.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setStyles"),me.prototype),Je(me.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateStyles"),me.prototype),Je(me.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"formatText"),me.prototype),Je(me.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"resetTextPosition"),me.prototype),Je(me.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"moveText"),me.prototype),Je(me.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setText"),me.prototype),Je(me.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateText"),me.prototype),Je(me.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setAnchors"),me.prototype),Je(me.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setSelected"),me.prototype),Je(me.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setHovered"),me.prototype),Je(me.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setHitable"),me.prototype),Je(me.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"openEdgeAnimation"),me.prototype),Je(me.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"closeEdgeAnimation"),me.prototype),Je(me.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setElementState"),me.prototype),Je(me.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateStartPoint"),me.prototype),Je(me.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"moveStartPoint"),me.prototype),Je(me.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateEndPoint"),me.prototype),Je(me.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"moveEndPoint"),me.prototype),Je(me.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"setZIndex"),me.prototype),Je(me.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"initPoints"),me.prototype),Je(me.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateAttributes"),me.prototype),Je(me.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"getAdjustStart"),me.prototype),Je(me.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"getAdjustEnd"),me.prototype),Je(me.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(me.prototype,"updateAfterAdjustStartAndEnd"),me.prototype),me),ps=fs;function ds(e){return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function Gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gp(Object(n),!0).forEach(function(r){Fp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hs(){return hs=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=Ab(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},hs.apply(this,arguments)}function Ab(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=go(e))!==null;);return e}function ys(e,t){return ys=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ys(e,t)}function kb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=go(e);if(t){var a=go(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Tb(this,n)}}function Tb(e,t){if(t&&(ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xp(e)}function Xp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e){return go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},go(e)}function Fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st,Up,vs=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ys(i,u)})(a,e);var t,n,r=kb(a);function a(){var i;Pb(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Fp(Xp(i=r.call.apply(r,[this].concat(p))),"modelType",dt.LINE_EDGE),i}return t=a,(n=[{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.line;return Hp(Hp({},hs(go(a.prototype),"getEdgeStyle",this).call(this)),Dt(i))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&Mb(t.prototype,n),a}(ps);function gs(e){return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}function Db(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Yp(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yp(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yp(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vp(Object(n),!0).forEach(function(r){ms(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nb(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Cb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(){return ti=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=Ib(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},ti.apply(this,arguments)}function Ib(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Nr(e))!==null;);return e}function bs(e,t){return bs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},bs(e,t)}function Lb(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Nr(e);if(t){var a=Nr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zb(this,n)}}function zb(e,t){if(t&&(gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ni(e)}function ni(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nr(e){return Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nr(e)}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var _s=(st=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&bs(i,u)})(a,e);var t,n,r=Lb(a);function a(){var i;Cb(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return ms(ni(i=r.call.apply(r,[this].concat(p))),"modelType",dt.POLYLINE_EDGE),ms(ni(i),"draggingPointList",void 0),Nb(ni(i),"dbClickPosition",Up,ni(i)),i}return t=a,(n=[{key:"initEdgeData",value:function(i){this.offset=30,ti(Nr(a.prototype),"initEdgeData",this).call(this,i)}},{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.polyline;return Wp(Wp({},ti(Nr(a.prototype),"getEdgeStyle",this).call(this)),Dt(i))}},{key:"getTextPosition",value:function(){var i,u=(i=this.text)===null||i===void 0?void 0:i.value;if(this.dbClickPosition&&!u){var p=this.dbClickPosition;return{x:p.x,y:p.y}}var h=Jr(this.points),_=Db(Yb(h),2),x=_[0],P=_[1];return{x:(x.x+P.x)/2,y:(x.y+P.y)/2}}},{key:"getAfterAnchor",value:function(i,u,p){var h,_;return p.forEach(function(x){var P;i===kt.HORIZONTAL?P=Math.abs(u.y-x.y):i===kt.VERTICAL&&(P=Math.abs(u.x-x.x)),(!_||_>P)&&(_=P,h=x)}),h}},{key:"getCrossPoint",value:function(i,u,p){var h;return i===kt.HORIZONTAL?h={x:p.x,y:u.y}:i===kt.VERTICAL&&(h={x:u.x,y:p.y}),h}},{key:"removeCrossPoints",value:function(i,u,p){var h=p.map(function(re){return re});if(i===1){var _=h[i],x=h[u],P=h[i-1];if(rd(P,_,this.sourceNode)){if(od(_,x,this.sourceNode)){var A=id(_,x,this.sourceNode);A&&(h[i]=A,h.splice(i-1,1),i--,u--)}}else this.sourceNode.anchors.forEach(function(re){(re.x===P.x&&re.x===_.x||re.y===P.y&&re.y===_.y)&&qn(re.x,re.y,_.x,_.y)<qn(P.x,P.y,_.x,_.y)&&(h[i-1]=re)})}if(u===p.length-2){var R=h[i],U=h[u],W=h[u+1];if(rd(U,W,this.targetNode)){if(od(R,U,this.targetNode)){var ne=id(R,U,this.targetNode);ne&&(h[u]=ne,h.splice(u+1,1))}}else this.targetNode.anchors.forEach(function(re){(re.x===W.x&&re.x===U.x||re.y===W.y&&re.y===U.y)&&qn(re.x,re.y,U.x,U.y)<qn(W.x,W.y,U.x,U.y)&&(h[u+1]=re)})}return h}},{key:"getDraggingPoints",value:function(i,u,p,h,_){var x=_.map(function(R){return R}),P=this.getAfterAnchor(i,p,h),A=this.getCrossPoint(i,p,P);return u==="start"?(x.unshift(A),x.unshift(P)):(x.push(A),x.push(P)),x}},{key:"updateCrossPoints",value:function(i){var u=i.map(function(Oe){return Oe}),p=i[0],h=i[1],_=i[u.length-2],x=i[u.length-1],P=this.sourceNode,A=this.targetNode,R=P.modelType,U=A.modelType,W=ya(p,h),ne=u[0];switch(R){case dt.RECT_NODE:P.radius!==0&&(Cp(p,P)||(ne=Np(p,W,P)));break;case dt.CIRCLE_NODE:ne=ss(p,W,P);break;case dt.ELLIPSE_NODE:ne=Rp(p,W,P);break;case dt.DIAMOND_NODE:case dt.POLYGON_NODE:ne=Ip(p,W,P)}u[0]=ne;var re=ya(_,x),de=u[u.length-1];switch(U){case dt.RECT_NODE:A.radius!==0&&(Cp(x,A)||(de=Np(x,re,A)));break;case dt.CIRCLE_NODE:de=ss(x,re,A);break;case dt.ELLIPSE_NODE:de=Rp(x,re,A);break;case dt.DIAMOND_NODE:case dt.POLYGON_NODE:de=Ip(x,re,A)}return u[u.length-1]=de,u}},{key:"getData",value:function(){var i=ti(Nr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Object.assign({},i,{pointsList:u})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(i){return"".concat(i.x,",").concat(i.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var i=nd({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=i,this.points=i.map(function(u){return"".concat(u.x,",").concat(u.y)}).join(" ")}},{key:"updateStartPoint",value:function(i){this.startPoint=i,this.updatePoints()}},{key:"moveStartPoint",value:function(i,u){this.startPoint.x+=i,this.startPoint.y+=u,this.updatePoints()}},{key:"updateEndPoint",value:function(i){this.endPoint=i,this.updatePoints()}},{key:"moveEndPoint",value:function(i,u){this.endPoint.x+=i,this.endPoint.y+=u,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(i){return i})}},{key:"dragAppendSimple",value:function(i,u){this.isDragging=!0;var p=i.start,h=i.end,_=i.startIndex,x=i.endIndex,P=i.direction,A=this.pointsList,R=A;return P===kt.HORIZONTAL?(A[_]={x:p.x,y:p.y+u.y},A[x]={x:h.x,y:h.y+u.y},R=this.pointsList.map(function(U){return U})):P===kt.VERTICAL&&(A[_]={x:p.x+u.x,y:p.y},A[x]={x:h.x+u.x,y:h.y},R=this.pointsList.map(function(U){return U})),this.updatePointsAfterDrag(R),this.draggingPointList=R,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},A[_]),end:Object.assign({},A[x]),startIndex:_,endIndex:x,direction:P}}},{key:"dragAppend",value:function(i,u){this.isDragging=!0;var p=i.start,h=i.end,_=i.startIndex,x=i.endIndex,P=i.direction,A=this.pointsList;if(P===kt.HORIZONTAL){A[_]={x:p.x,y:p.y+u.y},A[x]={x:h.x,y:h.y+u.y};var R=this.pointsList.map(function(ke){return ke});if(_!==0&&x!==this.pointsList.length-1&&(R=this.removeCrossPoints(_,x,R)),_===0){var U={x:p.x,y:p.y+u.y};if(!Dr(U,this.sourceNode)){var W=this.sourceNode.anchors;R=this.getDraggingPoints(P,"start",U,W,R)}}if(x===this.pointsList.length-1){var ne={x:h.x,y:h.y+u.y};if(!Dr(ne,this.targetNode)){var re=this.targetNode.anchors;R=this.getDraggingPoints(P,"end",ne,re,R)}}this.updatePointsAfterDrag(R),this.draggingPointList=R}else if(P===kt.VERTICAL){A[_]={x:p.x+u.x,y:p.y},A[x]={x:h.x+u.x,y:h.y};var de=this.pointsList.map(function(ke){return ke});if(_!==0&&x!==this.pointsList.length-1&&(de=this.removeCrossPoints(_,x,de)),_===0){var Oe={x:p.x+u.x,y:p.y};if(!Dr(Oe,this.sourceNode)){var Ce=this.sourceNode.anchors;de=this.getDraggingPoints(P,"start",Oe,Ce,de)}}if(x===this.pointsList.length-1){var Ee={x:h.x+u.x,y:h.y};if(!Dr(Ee,this.targetNode)){var Ue=this.targetNode.anchors;de=this.getDraggingPoints(P,"end",Ee,Ue,de)}}this.updatePointsAfterDrag(de),this.draggingPointList=de}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},A[_]),end:Object.assign({},A[x]),startIndex:_,endIndex:x,direction:P}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var i=td(Jr(this.points));this.pointsList=i.map(function(h){return h}),this.draggingPointList=[];var u=i[0];this.startPoint=Object.assign({},u);var p=i[i.length-1];this.endPoint=Object.assign({},p)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(i){var u=this.updateCrossPoints(i);this.points=u.map(function(p){return"".concat(p.x,",").concat(p.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var i=this.pointsList;return i[i.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var u=i.startPoint,p=i.endPoint,h=i.sourceNode,_=i.targetNode,x=nd({x:u.x,y:u.y},{x:p.x,y:p.y},h,_,this.offset||0);this.pointsList=x,this.initPoints()}}])&&Rb(t.prototype,n),a}(ps),Up=sn(st.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn(st.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"initPoints"),st.prototype),sn(st.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePoints"),st.prototype),sn(st.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateStartPoint"),st.prototype),sn(st.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveStartPoint"),st.prototype),sn(st.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateEndPoint"),st.prototype),sn(st.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"moveEndPoint"),st.prototype),sn(st.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendStart"),st.prototype),sn(st.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendSimple"),st.prototype),sn(st.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppend"),st.prototype),sn(st.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"dragAppendEnd"),st.prototype),sn(st.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updatePointsAfterDrag"),st.prototype),sn(st.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustStart"),st.prototype),sn(st.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"getAdjustEnd"),st.prototype),sn(st.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(st.prototype,"updateAfterAdjustStartAndEnd"),st.prototype),st),ri=function(e){var t=e.start,n=e.end,r=e.offset,a=e.verticalLength,i=e.type,u={leftX:0,leftY:0,rightX:0,rightY:0},p=Math.atan((n.y-t.y)/(n.x-t.x)),h=Math.atan(r/a),_=Math.sqrt(a*a+r*r);return i==="start"?n.x>=t.x?(u.leftX=t.x+_*Math.sin(p+h),u.leftY=t.y-_*Math.cos(p+h),u.rightX=t.x-_*Math.sin(p-h),u.rightY=t.y+_*Math.cos(p-h)):(u.leftX=t.x-_*Math.sin(p+h),u.leftY=t.y+_*Math.cos(p+h),u.rightX=t.x+_*Math.sin(p-h),u.rightY=t.y-_*Math.cos(p-h)):i==="end"&&(n.x>=t.x?(u.leftX=n.x+_*Math.sin(p-h),u.leftY=n.y-_*Math.cos(p-h),u.rightX=n.x-_*Math.sin(p+h),u.rightY=n.y+_*Math.cos(p+h)):(u.leftX=n.x-_*Math.sin(p-h),u.leftY=n.y+_*Math.cos(p-h),u.rightX=n.x+_*Math.sin(p+h),u.rightY=n.y-_*Math.cos(p+h))),u},Bb={x:1,y:0,z:0};function $p(e){var t=Math.hypot(e.x,e.y);return{x:e.x/t,y:e.y/t,z:0}}function Gb(e){return r=function(i,u){return i.x*u.y-i.y*u.x}(t=Bb,n=e),a=Math.acos(function(i,u){var p=[i.x,i.y,i.z];return[u.x,u.y,u.z].reduce(function(h,_,x){return h+_*p[x]})}($p(t),$p(n))),r>=0?a:-a;var t,n,r,a}function Kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kp(Object(n),!0).forEach(function(r){Hb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xb(e){return function(t){if(Array.isArray(t))return ws(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||qp(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Os(e){return Os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Os(e)}function la(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||qp(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qp(e,t){if(e){if(typeof e=="string")return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}function ws(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xs=function(e){var t=[],n={};return e.forEach(function(r){var a="".concat(r.x,"-").concat(r.y);r.id=a,n[a]=r}),Object.keys(n).forEach(function(r){t.push(n[r])}),t},fa=function(e,t){return e.width===0&&e.height===0?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}},pa=function(e,t){var n=function(r,a){var i=Math.abs(r.x-a.centerX),u=Math.abs(r.y-a.centerY);return i/a.width>u/a.height?kt.HORIZONTAL:kt.VERTICAL}(t,e);return n===kt.HORIZONTAL?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},Zp=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{centerX:(n+a)/2,centerY:(r+i)/2,minX:n,minY:r,maxX:a,maxY:i,height:i-r,width:a-n}},oi=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[],r=[];e.forEach(function(x){n.push(x.x),r.push(x.y)});var a=Math.min.apply(Math,n),i=Math.max.apply(Math,n),u=Math.min.apply(Math,r),p=Math.max.apply(Math,r),h=i-a,_=p-u;return t&&(h+=t,_+=t),{centerX:(a+i)/2,centerY:(u+p)/2,maxX:i,maxY:p,minX:a,minY:u,x:(a+i)/2,y:(u+p)/2,height:_,width:h}},da=function(e){var t=e.minX,n=e.minY,r=e.maxX,a=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:a},{x:t,y:a}]},ha=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},Es=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Jp=function(e,t,n,r,a){return Es(e,t)+Es(e,n)+function(i,u){var p=0;return u.forEach(function(h){h&&(i.x===h.x&&(p+=-2),i.y===h.y&&(p+=-2))}),p}(e,[t,n,r,a])},Fb=function e(t,n,r,a,i){i||(i=0),t.unshift(n[a]),r[a]&&r[a]!==a&&i<=100&&e(t,n,r,r[a],i+1)},ii=function(e,t,n,r){var a=t.x-e.x,i=t.y-e.y,u=r.x-n.x,p=r.y-n.y,h=(-i*(e.x-n.x)+a*(e.y-n.y))/(-u*i+a*p),_=(u*(e.y-n.y)-p*(e.x-n.x))/(-u*i+a*p);return h>=0&&h<=1&&_>=0&&_<=1},Qp=function(e,t,n){if(n.width===0&&n.height===0)return!1;var r=la(da(n),4),a=r[0],i=r[1],u=r[2],p=r[3];return ii(e,t,a,i)||ii(e,t,a,p)||ii(e,t,i,u)||ii(e,t,u,p)},Ub=function(e,t,n,r,a,i,u){var p=[],h=[t],_={},x={},P={};x[t.id]=0,P[t.id]=Jp(t,n,t);var A={};e.forEach(function(W){A[W.id]=W});for(var R=function(){var W,ne,re,de=void 0,Oe=1/0;if(h.forEach(function(Ee){P[Ee.id]<Oe&&(Oe=P[Ee.id],de=Ee)}),de===n){var Ce=[];return Fb(Ce,A,_,n.id),{v:Ce}}ne=de,(re=(W=h).indexOf(ne))>-1&&W.splice(re,1),p.push(de),function(Ee,Ue,ke,Pe){var Qe=[];return Ee.forEach(function(yt){yt!==Ue&&(yt.x!==Ue.x&&yt.y!==Ue.y||Qp(yt,Ue,ke)||Qp(yt,Ue,Pe)||Qe.push(yt))}),xs(Qe)}(e,de,r,a).forEach(function(Ee){if(p.indexOf(Ee)===-1){h.indexOf(Ee)===-1&&h.push(Ee);var Ue=P[de.id]+Es(de,Ee);x[Ee.id]&&Ue>=x[Ee.id]||(_[Ee.id]=de.id,x[Ee.id]=Ue,P[Ee.id]=x[Ee.id]+Jp(Ee,n,t,i,u))}})};h.length;){var U=R();if(Os(U)==="object")return U.v}return[t,n]},ed=function(e){return En(e)},td=function(e){for(var t=1;t<e.length-1;){var n=e[t-1],r=e[t],a=e[t+1];n.x===r.x&&r.x===a.x||n.y===r.y&&r.y===a.y?e.splice(t,1):t++}return e},nd=function(e,t,n,r,a){var i,u,p=ed(n),h=ed(r),_=fa(p,a),x=fa(h,a),P=pa(_,e),A=pa(x,t);if(i=_,u=x,2*Math.abs(i.centerX-u.centerX)<i.width+u.width&&2*Math.abs(i.centerY-u.centerY)<i.height+u.height){var R=Vb(e,t,P,A);return[e,P].concat(Xb(R),[A,t])}var U=oi([P,A]),W=Zp(_,U),ne=Zp(x,U),re=[];re=(re=re.concat(da(W))).concat(da(ne));var de={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[U,W,ne].forEach(function(Ce){re=re.concat(function(Ee,Ue){return function(ke,Pe){return Pe<ke.minX||Pe>ke.maxX?[]:[{x:Pe,y:ke.minY},{x:Pe,y:ke.maxY}]}(Ee,Ue.x).concat(function(ke,Pe){return Pe<ke.minY||Pe>ke.maxY?[]:[{x:ke.minX,y:Pe},{x:ke.maxX,y:Pe}]}(Ee,Ue.y))}(Ce,de).filter(function(Ee){return ha(Ee,_)&&ha(Ee,x)}))}),[{x:P.x,y:A.y},{x:A.x,y:P.y}].forEach(function(Ce){ha(Ce,_)&&ha(Ce,x)&&re.push(Ce)}),re.unshift(P),re.push(A),re=xs(re);var Oe=Ub(re,P,A,p,h,e,t);return Oe.unshift(e),Oe.push(t),Oe.length>2&&(Oe=td(Oe)),xs(Oe)},Yb=function(e){var t;if(e.length===1)t=[e[0],e[0]];else if(e.length>=2){for(var n=e[0],r=e[1],a=qn(n.x,n.y,r.x,r.y),i=1;i<e.length-1;i++){var u=e[i],p=e[i+1],h=qn(u.x,u.y,p.x,p.y);h>a&&(a=h,n=u,r=p)}t=[n,r]}return t},rd=function(e,t,n){var r=Dr(e,n),a=Dr(t,n);return r&&a},od=function(e,t,n){var r=Dr(e,n),a=Dr(t,n);return!(r&&a)&&(r||a)},id=function(e,t,n){for(var r,a,i=En(n),u=da(i),p=0;p<u.length;p++)ii(e,t,u[p],u[(p+1)%u.length])&&(a=[u[p],u[(p+1)%u.length]]);return a&&(r=function(h,_,x,P){var A=(_.y-h.y)*(P.x-x.x)-(h.x-_.x)*(x.y-P.y);if(A===0)return!1;var R=((_.x-h.x)*(P.x-x.x)*(x.y-h.y)+(_.y-h.y)*(P.x-x.x)*h.x-(P.y-x.y)*(_.x-h.x)*x.x)/A,U=-((_.y-h.y)*(P.y-x.y)*(x.x-h.x)+(_.x-h.x)*(P.y-x.y)*h.y-(P.x-x.x)*(_.y-h.y)*x.y)/A;return(R-h.x)*(R-_.x)<=0&&(U-h.y)*(U-_.y)<=0&&(R-x.x)*(R-P.x)<=0&&(U-x.y)*(U-P.y)<=0&&{x:R,y:U}}(e,t,a[0],a[1])),r},ya=function(e,t){var n;return e.x===t.x?n=kt.VERTICAL:e.y===t.y&&(n=kt.HORIZONTAL),n},Jr=function(e){var t=e.split(" "),n=[];return t&&t.forEach(function(r){var a=la(r.split(","),2),i=a[0],u=a[1];n.push({x:Number(i),y:Number(u)})}),n},Vb=function(e,t,n,r){var a=[];if(ya(e,n)===ya(t,r))e.y===n.y?(a.push({x:n.x,y:(n.y+r.y)/2}),a.push({x:r.x,y:(n.y+r.y)/2})):(a.push({x:(n.x+r.x)/2,y:n.y}),a.push({x:(n.x+r.x)/2,y:r.y}));else{var i={x:n.x,y:r.y},u=Qo(i,e,n),p=Qo(i,t,r);if(u||p)i={x:r.x,y:n.y};else{var h=ad(i,e,n),_=ad(i,t,r);h&&_&&(i={x:r.x,y:n.y})}a.push(i)}return a},ad=function(e,t,n){return e.x===t.x&&e.x===n.x||e.y===t.y&&e.y===n.y},ud=function(e){if(!e)return 0;for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);e.match(/[A-Z]/)?t+=1.5:t+=r>=1&&r<=126||r>=65376&&r<=65439?1:2}return t},sd=function(e){var t=e.start,n=e.end,r=e.sourceNode,a=e.targetNode,i=e.offset,u=En(r),p=En(a),h=fa(u,i),_=fa(p,i);return{sNext:pa(h,t),ePre:pa(_,n)}},va=function(e){var t=e.replace(/M/g,"").replace(/C/g,",").split(",");return[ga(t[0]),ga(t[1]),ga(t[2]),ga(t[3])]},ga=function(e){var t=la(e.replace(/(^\s*)/g,"").split(" "),2);return{x:+t[0],y:+t[1]}},cd=function(e){var t=va(e),n=la(t,4),r=function(a,i,u,p){return function(h){if(h<0||h>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-h,3)+3*i.x*h*Math.pow(1-h,2)+3*u.x*Math.pow(h,2)*(1-h)+p.x*Math.pow(h,3),y:a.y*Math.pow(1-h,3)+3*i.y*h*Math.pow(1-h,2)+3*u.y*Math.pow(h,2)*(1-h)+p.y*Math.pow(h,3)}}(.95)}(n[0],n[1],n[2],n[3]);return[r,t[3]]},ld=function(e,t){for(var n,r=e.x,a=e.y,i=Jr(t),u=Number.MAX_SAFE_INTEGER,p=[],h=0;h<i.length;h++)p.push({start:i[h],end:i[(h+1)%i.length]});if(p.forEach(function(A){var R=A.start,U=A.end;if(R.x===U.x){var W={x:R.x,y:a};if(Qo(W,R,U)){var ne=Math.abs(R.x-r);ne<u&&(u=ne,n=W)}}else if(R.y===U.y){var re={x:r,y:R.y};if(Qo(re,R,U)){var de=Math.abs(R.y-a);de<u&&(u=de,n=re)}}}),!n){var _=p[0],x=_.start,P=_.end;n={x:x.x+(P.x-x.x)/2,y:x.y+(P.y-x.y)/2}}return n},Wb=function(e){return Zo(e,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},fd=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};o(204);var bo=function(){};function $b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zn=window.document;function Kb(e){var t=e.onDragStart,n=t===void 0?bo:t,r=e.onDragging,a=r===void 0?bo:r,i=e.onDragEnd,u=i===void 0?bo:i,p=e.step,h=p===void 0?1:p,_=e.isStopPropagation,x=_===void 0||_,P=!1,A=!1,R=0,U=0,W=0,ne=0;function re(Oe){if(x&&Oe.stopPropagation(),A&&(P=!0,W+=Oe.clientX-R,ne+=Oe.clientY-U,R=Oe.clientX,U=Oe.clientY,Math.abs(W)>h||Math.abs(ne)>h)){var Ce=W%h,Ee=ne%h,Ue=W-Ce,ke=ne-Ee;W=Ce,ne=Ee,a({deltaX:Ue,deltaY:ke,event:Oe})}}function de(Oe){if(x&&Oe.stopPropagation(),A=!1,Zn.removeEventListener("mousemove",re,!1),Zn.removeEventListener("mouseup",de,!1),P)return P=!1,u({event:Oe})}return function(Oe){if(Oe.button===0)return x&&Oe.stopPropagation(),A=!0,R=Oe.clientX,U=Oe.clientY,Zn.addEventListener("mousemove",re,!1),Zn.addEventListener("mouseup",de,!1),n({event:Oe})}}var le,pd,dd,hd,yd,vd,gd,bd,md,_d,Od,wd,xd,dr=function(){function e(r){var a=this,i=r.onDragStart,u=i===void 0?bo:i,p=r.onDragging,h=p===void 0?bo:p,_=r.onDragEnd,x=_===void 0?bo:_,P=r.eventType,A=P===void 0?"":P,R=r.eventCenter,U=R===void 0?null:R,W=r.step,ne=W===void 0?1:W,re=r.isStopPropagation,de=re===void 0||re,Oe=r.model,Ce=Oe===void 0?null:Oe,Ee=r.data,Ue=Ee===void 0?null:Ee;(function(ke,Pe){if(!(ke instanceof Pe))throw new TypeError("Cannot call a class as a function")})(this,e),Ut(this,"onDragStart",void 0),Ut(this,"onDragging",void 0),Ut(this,"onDragEnd",void 0),Ut(this,"step",void 0),Ut(this,"isStopPropagation",void 0),Ut(this,"isDragging",!1),Ut(this,"isStartDragging",!1),Ut(this,"startX",0),Ut(this,"startY",0),Ut(this,"sumDeltaX",0),Ut(this,"sumDeltaY",0),Ut(this,"eventType",void 0),Ut(this,"eventCenter",void 0),Ut(this,"model",void 0),Ut(this,"data",void 0),Ut(this,"startTime",void 0),Ut(this,"handleMouseDown",function(ke){var Pe,Qe;if(ke.button===0){a.isStopPropagation&&ke.stopPropagation(),a.isStartDragging=!0,a.startX=ke.clientX,a.startY=ke.clientY,Zn.addEventListener("mousemove",a.handleMouseMove,!1),Zn.addEventListener("mouseup",a.handleMouseUp,!1);var yt=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();(Qe=a.eventCenter)===null||Qe===void 0||Qe.emit(tt["".concat(a.eventType,"_MOUSEDOWN")],{e:ke,data:a.data||yt}),a.startTime=new Date().getTime()}}),Ut(this,"handleMouseMove",function(ke){if(a.isStopPropagation&&ke.stopPropagation(),a.isStartDragging&&(a.sumDeltaX+=ke.clientX-a.startX,a.sumDeltaY+=ke.clientY-a.startY,a.startX=ke.clientX,a.startY=ke.clientY,a.step<=1||Math.abs(a.sumDeltaX)>a.step||Math.abs(a.sumDeltaY)>a.step)){var Pe,Qe=a.sumDeltaX%a.step,yt=a.sumDeltaY%a.step,Et=a.sumDeltaX-Qe,mt=a.sumDeltaY-yt;a.sumDeltaX=Qe,a.sumDeltaY=yt;var jt,Gt=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();a.isDragging||((jt=a.eventCenter)===null||jt===void 0||jt.emit(tt["".concat(a.eventType,"_DRAGSTART")],{e:ke,data:a.data||Gt}),a.onDragStart({event:ke})),a.isDragging=!0,Promise.resolve().then(function(){var Wt,fn;a.onDragging({deltaX:Et,deltaY:mt,event:ke}),(Wt=a.eventCenter)===null||Wt===void 0||Wt.emit(tt["".concat(a.eventType,"_MOUSEMOVE")],{e:ke,data:a.data||Gt}),(fn=a.eventCenter)===null||fn===void 0||fn.emit(tt["".concat(a.eventType,"_DRAG")],{e:ke,data:a.data||Gt})})}}),Ut(this,"handleMouseUp",function(ke){a.isStartDragging=!1,a.isStopPropagation&&ke.stopPropagation(),Promise.resolve().then(function(){var Pe,Qe,yt;Zn.removeEventListener("mousemove",a.handleMouseMove,!1),Zn.removeEventListener("mouseup",a.handleMouseUp,!1);var Et=(Pe=a.model)===null||Pe===void 0?void 0:Pe.getData();(Qe=a.eventCenter)===null||Qe===void 0||Qe.emit(tt["".concat(a.eventType,"_MOUSEUP")],{e:ke,data:a.data||Et}),a.isDragging&&(a.isDragging=!1,a.onDragEnd({event:ke}),(yt=a.eventCenter)===null||yt===void 0||yt.emit(tt["".concat(a.eventType,"_DROP")],{e:ke,data:a.data||Et}))})}),Ut(this,"cancelDrag",function(){Zn.removeEventListener("mousemove",a.handleMouseMove,!1),Zn.removeEventListener("mouseup",a.handleMouseUp,!1),a.onDragEnd({event:null}),a.isDragging=!1}),this.onDragStart=u,this.onDragging=h,this.onDragEnd=x,this.step=ne,this.isStopPropagation=de,this.eventType=A,this.eventCenter=U,this.model=Ce,this.data=Ue}var t,n;return t=e,(n=[{key:"setStep",value:function(r){this.step=r}}])&&$b(t.prototype,n),e}(),Ed={node:!1,edge:!1},qb={node:!0,edge:!0};function Sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sd(Object(n),!0).forEach(function(r){Jn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ai(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||jd(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mo(e){return function(t){if(Array.isArray(t))return Ss(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||jd(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function jd(e,t){if(e){if(typeof e=="string")return Ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ss(e,t):void 0}}function Ss(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ma(e){return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}function Nn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function We(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Pd,Md=200,Ad=(le=function(){function e(r){(function(U,W){if(!(U instanceof W))throw new TypeError("Cannot call a class as a function")})(this,e),Jn(this,"rootEl",void 0),Nn(this,"width",pd,this),Nn(this,"height",dd,this),Jn(this,"theme",void 0),Jn(this,"eventCenter",void 0),Jn(this,"modelMap",new Map),Jn(this,"topElement",void 0),Jn(this,"animation",void 0),Jn(this,"idGenerator",void 0),Jn(this,"edgeGenerator",void 0),Jn(this,"nodeMoveRules",[]),Nn(this,"edgeType",hd,this),Nn(this,"nodes",yd,this),Nn(this,"edges",vd,this),Nn(this,"overlapMode",gd,this),Nn(this,"background",bd,this),Nn(this,"transformModel",md,this),Nn(this,"editConfigModel",_d,this),Nn(this,"gridSize",Od,this),Nn(this,"partial",wd,this),Nn(this,"fakerNode",xd,this);var a,i,u,p=r.container,h=r.background,_=h===void 0?{}:h,x=r.grid,P=r.idGenerator,A=r.edgeGenerator,R=r.animation;this.background=_,ma(x)==="object"&&(this.gridSize=x.size),this.rootEl=p,this.editConfigModel=new zf(r),this.eventCenter=new hb,this.transformModel=new Ng(this.eventCenter),this.theme=up(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=(a=R)&&typeof a!="boolean"?ap(Dt(Ed),a):Dt(a===!0?qb:Ed),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=P,this.edgeGenerator=(i=this,typeof(u=A)!="function"?function(U,W,ne){return Object.assign({type:i.edgeType},ne)}:function(U,W,ne){var re=u(U,W,ne);return re?typeof re=="string"?Object.assign({},ne,{type:re}):Object.assign({type:re},ne):{type:i.edgeType}}),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=Tr()}var t,n;return t=e,n=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(r,a,i){return r[a.id]={index:i,model:a},r},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(r,a,i){return r[a.id]={index:i,model:a},r},{})}},{key:"modelsMap",get:function(){return[].concat(mo(this.nodes),mo(this.edges)).reduce(function(r,a){return r[a.id]=a,r},{})}},{key:"sortElements",get:function(){var r=[];this.nodes.forEach(function(_){return r.push(_)}),this.edges.forEach(function(_){return r.push(_)}),r=r.sort(function(_,x){return _.zIndex-x.zIndex});for(var a=[],i=[-200,-200],u=[this.width+Md,this.height+Md],p=0;p<r.length;p++){var h=r[p];h.visible&&(!this.partial||h.isSelected||this.isElementInArea(h,i,u,!1,!1))&&a.push(h)}return a}},{key:"textEditElement",get:function(){var r=this.nodes.find(function(i){return i.state===Ot.TEXT_EDIT}),a=this.edges.find(function(i){return i.state===Ot.TEXT_EDIT});return r||a}},{key:"selectElements",get:function(){var r=new Map;return this.nodes.forEach(function(a){a.isSelected&&r.set(a.id,a)}),this.edges.forEach(function(a){a.isSelected&&r.set(a.id,a)}),r}},{key:"selectNodes",get:function(){var r=[];return this.nodes.forEach(function(a){a.isSelected&&r.push(a)}),r}},{key:"getAreaElement",value:function(r,a){var i=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=arguments.length>4&&arguments[4]!==void 0&&arguments[4],h=[],_=[];this.nodes.forEach(function(A){return _.push(A)}),this.edges.forEach(function(A){return _.push(A)});for(var x=0;x<_.length;x++){var P=_[x];p&&!P.visible||!this.isElementInArea(P,r,a,i,u)||h.push(P)}return h}},{key:"getModel",value:function(r){return this.modelMap.get(r)}},{key:"getNodeModelById",value:function(r){var a;return this.fakerNode&&r===this.fakerNode.id?this.fakerNode:(a=this.nodesMap[r])===null||a===void 0?void 0:a.model}},{key:"getPointByClient",value:function(r){var a=r.x,i=r.y,u=this.rootEl.getBoundingClientRect(),p={x:a-u.left,y:i-u.top},h=ai(this.transformModel.HtmlPointToCanvasPoint([p.x,p.y]),2);return{domOverlayPosition:p,canvasOverlayPosition:{x:h[0],y:h[1]}}}},{key:"isElementInArea",value:function(r,a,i){var u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],p=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(r.BaseType===Xt.NODE){for(var h=En(r=r),_=h.minX,x=h.minY,P=h.maxX,A=h.maxY,R=[{x:_,y:x},{x:P,y:x},{x:P,y:A},{x:_,y:A}],U=p,W=0;W<R.length;W++){var ne=R[W],re=ne.x,de=ne.y,Oe=this.transformModel.CanvasPointToHtmlPoint([re,de]),Ce=ai(Oe,2);if(re=Ce[0],de=Ce[1],rs([re,de],a,i)!==p){U=!p;break}}return U}if(r.BaseType===Xt.EDGE){var Ee=r=r,Ue=Ee.startPoint,ke=Ee.endPoint,Pe=this.transformModel.CanvasPointToHtmlPoint([Ue.x,Ue.y]),Qe=this.transformModel.CanvasPointToHtmlPoint([ke.x,ke.y]),yt=rs(Pe,a,i),Et=rs(Qe,a,i);return u?yt&&Et:yt||Et}return!1}},{key:"graphDataToModel",value:function(r){var a=this;if(this.width&&this.height||this.resize(),!r)return this.nodes=[],void(this.edges=[]);r.nodes?this.nodes=oa(r.nodes,function(i){var u=a.getModel(i.type);if(!u)throw new Error("找不到".concat(i.type,"对应的节点。"));var p=i.x,h=i.y;return p&&h&&(i.x=kr(p,a.gridSize),i.y=kr(h,a.gridSize),ma(i.text)==="object"&&(i.text.x-=sp(p,a.gridSize),i.text.y-=sp(h,a.gridSize))),new u(i,a)}):this.nodes=[],r.edges?this.edges=oa(r.edges,function(i){var u=a.getModel(i.type);if(!u)throw new Error("找不到".concat(i.type,"对应的边。"));return new u(i,a)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var r=[];this.edges.forEach(function(i){var u=i.getData();u&&!i.virtual&&r.push(u)});var a=[];return this.nodes.forEach(function(i){var u=i.getData();u&&!i.virtual&&a.push(u)}),{nodes:a,edges:r}}},{key:"modelToHistoryData",value:function(){for(var r=!1,a=[],i=0;i<this.nodes.length;i++){var u=this.nodes[i];if(u.isDragging){r=!0;break}a.push(u.getHistoryData())}if(r)return!1;for(var p=!1,h=[],_=0;_<this.edges.length;_++){var x=this.edges[_];if(x.isDragging){p=!0;break}h.push(x.getHistoryData())}return!p&&{nodes:a,edges:h}}},{key:"getEdgeModelById",value:function(r){var a;return(a=this.edgesMap[r])===null||a===void 0?void 0:a.model}},{key:"getElement",value:function(r){return this.modelsMap[r]}},{key:"getNodeEdges",value:function(r){for(var a=[],i=0;i<this.edges.length;i++){var u=this.edges[i],p=this.edges[i].sourceNodeId===r,h=this.edges[i].targetNodeId===r;(p||h)&&a.push(u)}return a}},{key:"getSelectElements",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=this.selectElements,i={nodes:[],edges:[]};return a.forEach(function(u){if(u.BaseType===Xt.NODE&&i.nodes.push(u.getData()),u.BaseType===Xt.EDGE){var p=u.getData(),h=a.get(p.sourceNodeId)&&a.get(p.targetNodeId);(r||h)&&i.edges.push(p)}}),i}},{key:"updateAttributes",value:function(r,a){this.getElement(r).updateAttributes(a)}},{key:"changeNodeId",value:function(r,a){return a||(a=Tr()),this.nodesMap[a]?"":this.nodesMap[r]?(this.edges.forEach(function(i){i.sourceNodeId===r&&(i.sourceNodeId=a),i.targetNodeId===r&&(i.targetNodeId=a)}),this.nodesMap[r].model.id=a,this.nodesMap[a]=this.nodesMap[r],a):""}},{key:"changeEdgeId",value:function(r,a){return a||(a=Tr()),this.edgesMap[a]?"":this.edgesMap[r]?(this.edges.forEach(function(i){i.id===r&&i.changeEdgeId(a)}),a):""}},{key:"setFakerNode",value:function(r){this.fakerNode=r}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(r,a){return this.modelMap.set(r,a)}},{key:"toFront",value:function(r){var a,i,u,p=((a=this.nodesMap[r])===null||a===void 0?void 0:a.model)||((i=this.edgesMap[r])===null||i===void 0?void 0:i.model);p&&(this.overlapMode===xn.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex(),p.setZIndex(9999),this.topElement=p),this.overlapMode===xn.INCREASE&&this.setElementZIndex(r,"top"))}},{key:"setElementZIndex",value:function(r,a){var i,u,p,h=((i=this.nodesMap[r])===null||i===void 0?void 0:i.model)||((u=this.edgesMap[r])===null||u===void 0?void 0:u.model);h&&(typeof a=="number"&&(p=a),a==="top"&&(p=ls()),a==="bottom"&&(p=--Sb),h.setZIndex(p))}},{key:"deleteNode",value:function(r){var a=this.nodesMap[r].model.getData();this.deleteEdgeBySource(r),this.deleteEdgeByTarget(r),this.nodes.splice(this.nodesMap[r].index,1),this.eventCenter.emit(tt.NODE_DELETE,{data:a})}},{key:"addNode",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,i=arguments.length>2?arguments[2]:void 0,u=en(r);u.id&&this.nodesMap[r.id]&&delete u.id;var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));u.x=kr(u.x,this.gridSize),u.y=kr(u.y,this.gridSize);var h=new p(u,this);this.nodes.push(h);var _=h.getData(),x={data:_};return i&&(x.e=i),this.eventCenter.emit(a,x),h}},{key:"cloneNode",value:function(r){var a=this.getNodeModelById(r),i=a.getData();i.x+=30,i.y+=30,delete i.id,i.text&&(i.text.x+=30,i.text.y+=30);var u=this.addNode(i);return u.setSelected(!0),a.setSelected(!1),u.getData()}},{key:"moveNode",value:function(r,a,i){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var h=p.model,_=h.getMoveDistance(a,i,u),x=ai(_,2);a=x[0],i=x[1],this.moveEdge(r,a,i)}}},{key:"moveNode2Coordinate",value:function(r,a,i){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3],p=this.nodesMap[r];if(p){var h=p.model,_=h.x,x=h.y,P=a-_,A=i-x;this.moveNode(r,P,A,u)}}},{key:"editText",value:function(r){this.setElementStateById(r,Ot.TEXT_EDIT)}},{key:"addEdge",value:function(r){var a=en(r),i=a.type;i||(i=this.edgeType),a.id&&this.edgesMap[a.id]&&delete a.id;var u=this.getModel(i);if(!u)throw new Error("找不到".concat(i,"对应的边，请确认是否已注册此类型边。"));var p=new u(ba(ba({},a),{},{type:i}),this),h=p.getData();return this.edges.push(p),this.eventCenter.emit(tt.EDGE_ADD,{data:h}),p}},{key:"moveEdge",value:function(r,a,i){for(var u=0;u<this.edges.length;u++){var p,h=this.edges[u],_=h.textPosition,x=_.x,P=_.y,A=this.edges[u].sourceNodeId===r,R=this.edges[u].targetNodeId===r;if(A&&h.moveStartPoint(a,i),R&&h.moveEndPoint(a,i),A||R)if(h.customTextPosition===!0)h.resetTextPosition();else if(h.modelType===dt.POLYLINE_EDGE&&(p=h.text)!==null&&p!==void 0&&p.value){var U=h.text,W=ld(U,h.points);h.moveText(W.x-U.x,W.y-U.y)}else{var ne=h.textPosition,re=ne.x,de=ne.y;h.moveText(re-x,de-P)}}}},{key:"deleteEdgeBySourceAndTarget",value:function(r,a){for(var i=0;i<this.edges.length;i++)if(this.edges[i].sourceNodeId===r&&this.edges[i].targetNodeId===a){var u=this.edges[i].getData();this.edges.splice(i,1),i--,this.eventCenter.emit(tt.EDGE_DELETE,{data:u})}}},{key:"deleteEdgeById",value:function(r){if(this.edgesMap[r]){var a=this.edgesMap[r].index,i=this.edgesMap[r].model.getData();this.edges.splice(a,1),this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"deleteEdgeBySource",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].sourceNodeId===r){var i=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"deleteEdgeByTarget",value:function(r){for(var a=0;a<this.edges.length;a++)if(this.edges[a].targetNodeId===r){var i=this.edges[a].getData();this.edges.splice(a,1),a--,this.eventCenter.emit(tt.EDGE_DELETE,{data:i})}}},{key:"setElementStateById",value:function(r,a,i){this.nodes.forEach(function(u){u.id===r?u.setElementState(a,i):u.setElementState(Ot.DEFAULT)}),this.edges.forEach(function(u){u.id===r?u.setElementState(a,i):u.setElementState(Ot.DEFAULT)})}},{key:"updateText",value:function(r,a){this.nodes.forEach(function(i){i.id===r&&i.updateText(a)}),this.edges.forEach(function(i){i.id===r&&i.updateText(a)})}},{key:"selectNodeById",value:function(r){var a,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i||this.clearSelectElements();var u=(a=this.nodesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectEdgeById",value:function(r){var a,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];i||this.clearSelectElements();var u=(a=this.edgesMap[r])===null||a===void 0?void 0:a.model;u==null||u.setSelected(!0)}},{key:"selectElementById",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];a||this.clearSelectElements();var i=this.getElement(r);i==null||i.setSelected(!0)}},{key:"clearSelectElements",value:function(){var r;this.selectElements.forEach(function(a){a==null||a.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===xn.DEFAULT&&((r=this.topElement)===null||r===void 0||r.setZIndex())}},{key:"moveNodes",value:function(r,a,i){for(var u=this,p=arguments.length>3&&arguments[3]!==void 0&&arguments[3],h=r.reduce(function(re,de){var Oe=u.nodesMap[de].model.getMoveDistance(a,i,p);return re[de]=Oe,re},{}),_=0;_<this.edges.length;_++){var x=this.edges[_],P=h[x.sourceNodeId],A=void 0,R=void 0;if(P){var U=ai(P,2);A=U[0],R=U[1],x.moveStartPoint(A,R)}var W=h[x.targetNodeId];if(W){var ne=ai(W,2);A=ne[0],R=ne[1],x.moveEndPoint(A,R)}(P||W)&&x.moveText(A,R)}}},{key:"addNodeMoveRules",value:function(r){this.nodeMoveRules.includes(r)||this.nodeMoveRules.push(r)}},{key:"setDefaultEdgeType",value:function(r){this.edgeType=r}},{key:"changeNodeType",value:function(r,a){var i=this.getNodeModelById(r);if(i){var u=i.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));var h=new p(u,this);this.nodes.splice(this.nodesMap[r].index,1,h),this.getNodeEdges(r).forEach(function(_){if(_.sourceNodeId===r){var x=Lp(h,_.startPoint,h.width,h.height);_.updateStartPoint(x)}if(_.targetNodeId===r){var P=Lp(h,_.endPoint,h.width,h.height);_.updateEndPoint(P)}})}}},{key:"changeEdgeType",value:function(r,a){var i=this.getEdgeModelById(r);if(i&&i.type!==a){var u=i.getData();u.type=a;var p=this.getModel(a);if(!p)throw new Error("找不到".concat(a,"对应的节点，请确认是否已注册此类型节点。"));delete u.pointsList;var h=new p(u,this);this.edges.splice(this.edgesMap[r].index,1,h)}}},{key:"getNodeIncomingEdge",value:function(r){var a=[];return this.edges.forEach(function(i){i.targetNodeId===r&&a.push(i)}),a}},{key:"getNodeOutgoingEdge",value:function(r){var a=[];return this.edges.forEach(function(i){i.sourceNodeId===r&&a.push(i)}),a}},{key:"getNodeIncomingNode",value:function(r){var a=this,i=[];return this.edges.forEach(function(u){u.targetNodeId===r&&i.push(a.nodesMap[u.sourceNodeId].model)}),i}},{key:"getNodeOutgoingNode",value:function(r){var a=this,i=[];return this.edges.forEach(function(u){u.sourceNodeId===r&&i.push(a.nodesMap[u.targetNodeId].model)}),i}},{key:"setTheme",value:function(r){this.theme=up(ba(ba({},this.theme),r))}},{key:"resize",value:function(r,a){this.width=r||this.rootEl.getBoundingClientRect().width,this.height=a||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var r=this.nodes,a=[],i=[];r.forEach(function(P){var A=P.x,R=P.y,U=P.width,W=P.height,ne=P.getNodeStyle().strokeWidth,re=ne===void 0?0:ne;a=a.concat([A+U/2+re,A-U/2-re]),i=i.concat([R+W/2+re,R-W/2-re])});var u=Math.min.apply(Math,mo(a)),p=Math.max.apply(Math,mo(a)),h=Math.min.apply(Math,mo(i)),_=p-u||0,x=Math.max.apply(Math,mo(i))-h||0;return{virtualRectWidth:_,virtualRectHeight:x,virtualRectCenterPositionX:u+_/2,virtualRectCenterPositionY:h+x/2}}},{key:"translateCenter",value:function(){var r=this.nodes,a=this.width,i=this.height,u=this.rootEl,p=this.transformModel;if(r.length){var h=a||u.clientWidth,_=i||u.clientHeight,x=this.getVirtualRectSize(),P=x.virtualRectCenterPositionX,A=x.virtualRectCenterPositionY;p.focusOn(P,A,h,_)}}},{key:"fitView",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,i=this.nodes,u=this.width,p=this.height,h=this.rootEl,_=this.transformModel;if(i.length){var x=u||h.clientWidth,P=p||h.clientHeight,A=this.getVirtualRectSize(),R=A.virtualRectWidth,U=A.virtualRectHeight,W=A.virtualRectCenterPositionX,ne=A.virtualRectCenterPositionY,re=(R+a)/x,de=(U+r)/P,Oe=0;Oe=1/Math.max(re,de);var Ce=[x/2,P/2];_.zoom(Oe,Ce),_.focusOn(W,ne,x,P)}}},{key:"openEdgeAnimation",value:function(r){this.getEdgeModelById(r).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(r){this.getEdgeModelById(r).closeEdgeAnimation()}}],n&&Zb(t.prototype,n),e}(),pd=We(le.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dd=We(le.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hd=We(le.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yd=We(le.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vd=We(le.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gd=We(le.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xn.DEFAULT}}),bd=We(le.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),md=We(le.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_d=We(le.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Od=We(le.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),wd=We(le.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xd=We(le.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We(le.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"nodesMap"),le.prototype),We(le.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"edgesMap"),le.prototype),We(le.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"modelsMap"),le.prototype),We(le.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"sortElements"),le.prototype),We(le.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"textEditElement"),le.prototype),We(le.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"selectElements"),le.prototype),We(le.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(le.prototype,"selectNodes"),le.prototype),We(le.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setFakerNode"),le.prototype),We(le.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"removeFakerNode"),le.prototype),We(le.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setModel"),le.prototype),We(le.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"toFront"),le.prototype),We(le.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setElementZIndex"),le.prototype),We(le.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"deleteNode"),le.prototype),We(le.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"addNode"),le.prototype),We(le.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"cloneNode"),le.prototype),We(le.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"moveNode"),le.prototype),We(le.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"moveNode2Coordinate"),le.prototype),We(le.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"editText"),le.prototype),We(le.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"addEdge"),le.prototype),We(le.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"moveEdge"),le.prototype),We(le.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"deleteEdgeBySourceAndTarget"),le.prototype),We(le.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"deleteEdgeById"),le.prototype),We(le.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"deleteEdgeBySource"),le.prototype),We(le.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"deleteEdgeByTarget"),le.prototype),We(le.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setElementStateById"),le.prototype),We(le.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"updateText"),le.prototype),We(le.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"selectNodeById"),le.prototype),We(le.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"selectEdgeById"),le.prototype),We(le.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"selectElementById"),le.prototype),We(le.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"clearSelectElements"),le.prototype),We(le.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"moveNodes"),le.prototype),We(le.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setDefaultEdgeType"),le.prototype),We(le.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"changeNodeType"),le.prototype),We(le.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"changeEdgeType"),le.prototype),We(le.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"getNodeIncomingEdge"),le.prototype),We(le.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"getNodeOutgoingEdge"),le.prototype),We(le.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"getNodeIncomingNode"),le.prototype),We(le.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"getNodeOutgoingNode"),le.prototype),We(le.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"setTheme"),le.prototype),We(le.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"resize"),le.prototype),We(le.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"clearData"),le.prototype),We(le.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"translateCenter"),le.prototype),We(le.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"fitView"),le.prototype),We(le.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"openEdgeAnimation"),le.prototype),We(le.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(le.prototype,"closeEdgeAnimation"),le.prototype),le),Jb=Ad;function js(e){return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}function Ps(){return Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ps.apply(this,arguments)}function Qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ms(e,t){return Ms=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ms(e,t)}function em(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=_a(e);if(t){var a=_a(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return tm(this,n)}}function tm(e,t){if(t&&(js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _a(e){return _a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_a(e)}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kd,nm=Hn(Pd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ms(i,u)})(a,e);var t,n,r=em(a);function a(i){var u;(function(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),hr(Qn(u=r.call(this)),"stepDrag",void 0),hr(Qn(u),"stepScrollX",0),hr(Qn(u),"stepScrollY",0),hr(Qn(u),"onDragging",function(x){var P=x.deltaX,A=x.deltaY;u.setState({isDragging:!0});var R=u.props.graphModel,U=R.transformModel;R.editConfigModel.stopMoveGraph||U.translate(P,A)}),hr(Qn(u),"onDragEnd",function(){u.setState({isDragging:!1})}),hr(Qn(u),"zoomHandler",function(x){var P=u.props,A=P.graphModel,R=A.editConfigModel,U=A.transformModel,W=A.gridSize,ne=P.graphModel,re=x.deltaX,de=x.deltaY;if(R.stopScrollGraph||x.ctrlKey===!0){if(!R.stopZoomGraph){x.preventDefault();var Oe=ne.getPointByClient({x:x.clientX,y:x.clientY}).canvasOverlayPosition,Ce=Oe.x,Ee=Oe.y;U.zoom(x.deltaY<0,[Ce,Ee])}}else{if(x.preventDefault(),u.stepScrollX+=re,u.stepScrollY+=de,Math.abs(u.stepScrollX)>=W){var Ue=u.stepScrollX%W,ke=u.stepScrollX-Ue;U.translate(-ke*U.SCALE_X,0),u.stepScrollX=Ue}if(Math.abs(u.stepScrollY)>=W){var Pe=u.stepScrollY%W,Qe=u.stepScrollY-Pe;U.translate(0,-Qe*U.SCALE_Y),u.stepScrollY=Pe}}}),hr(Qn(u),"clickHandler",function(x){if(x.target.getAttribute("name")==="canvas-overlay"){var P=u.props.graphModel;P.selectElements.size>0&&P.clearSelectElements(),P.eventCenter.emit(tt.BLANK_CLICK,{e:x})}}),hr(Qn(u),"handleContextMenu",function(x){if(x.target.getAttribute("name")==="canvas-overlay"){x.preventDefault();var P=u.props.graphModel,A=P.getPointByClient({x:x.clientX,y:x.clientY});P.eventCenter.emit(tt.BLANK_CONTEXTMENU,{e:x,position:A})}}),hr(Qn(u),"mouseDownHandler",function(x){var P=u.props.graphModel,A=P.eventCenter,R=P.editConfigModel,U=P.transformModel.SCALE_X,W=P.gridSize,ne=x.target,re=!R.adjustEdge&&!R.adjustNodePosition;(ne.getAttribute("name")==="canvas-overlay"||re)&&(R.stopMoveGraph?A.emit(tt.BLANK_MOUSEDOWN,{e:x}):(u.stepDrag.setStep(W*U),u.stepDrag.handleMouseDown(x)),u.clickHandler(x))});var p=i.graphModel,h=p.gridSize,_=p.eventCenter;return u.stepDrag=new dr({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:h,eventType:"BLANK",isStopPropagation:!1,eventCenter:_,model:null}),u.state={isDragging:!1},u}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props,p=u.children,h=u.dnd,_=this.state.isDragging;return Object(ee.g)("svg",Ps({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:_?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},h.eventMap()),Object(ee.g)("g",{transform:i},p))}}])&&Qb(t.prototype,n),a}(ee.a))||Pd;function As(e){return As=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As(e)}function rm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ks(e,t){return ks=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ks(e,t)}function im(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Oa(e);if(t){var a=Oa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return am(this,n)}}function am(e,t){if(t&&(As(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Oa(e){return Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Oa(e)}var um=Hn(kd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ks(i,u)})(a,e);var t,n,r=im(a);function a(){return rm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var i=this.props,u=i.tool,p=i.graphModel,h=u.getTools().map(function(_){return Object(ee.g)(_,{graphModel:p,logicFlow:u.instance})});return u.components=h,h}},{key:"triggerToolRender",value:function(){var i=this.props,u=i.tool,p=i.graphModel,h=document.querySelector("#ToolOverlay_".concat(p.flowId)),_=u.getInstance();_.components.forEach(function(x){return x(_,h)}),_.components=[]}},{key:"render",value:function(){var i=this.props.graphModel;return Object(ee.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(i.flowId)},this.getTools())}}])&&om(t.prototype,n),a}(ee.a))||kd;function Ts(e){return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function sm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t){return Ds=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ds(e,t)}function lm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=wa(e);if(t){var a=wa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fm(this,n)}}function fm(e,t){if(t&&(Ts(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function wa(e){return wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wa(e)}var Td,pm=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ds(i,u)})(a,e);var t,n,r=lm(a);function a(){return sm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.background;return Object(ee.g)("div",{className:"lf-background"},Object(ee.g)("div",{style:i,className:"lf-background-area"}))}}])&&cm(t.prototype,n),a}(ee.a);function Ns(e){return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}function dm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cs(e,t){return Cs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Cs(e,t)}function ym(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=xa(e);if(t){var a=xa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return vm(this,n)}}function vm(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dd(e)}function Dd(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xa(e){return xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xa(e)}function gm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nd=Hn(Td=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Cs(i,u)})(a,e);var t,n,r=ym(a);function a(){var i;dm(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return gm(Dd(i=r.call.apply(r,[this].concat(p))),"id",Tr()),i}return t=a,(n=[{key:"renderDot",value:function(){var i=this.props,u=i.config,p=u.color,h=u.thickness,_=h===void 0?2:h,x=i.size,P=i.visible,A=Math.min(Math.max(2,_),x/2),R=1;return P||(R=0),Object(ee.g)("rect",{width:A,height:A,rx:A/2,ry:A/2,fill:p,opacity:R})}},{key:"renderMesh",value:function(){var i=this.props,u=i.config,p=u.color,h=u.thickness,_=h===void 0?1:h,x=i.size,P=i.visible,A=Math.min(Math.max(1,_),x/2),R="M ".concat(x," 0 H0 M0 0 V0 ").concat(x),U=1;return P||(U=0),Object(ee.g)("path",{d:R,stroke:p,strokeWidth:A,opacity:U})}},{key:"render",value:function(){var i=this.props,u=i.type,p=i.size,h=i.graphModel.transformModel,_=[h.SCALE_X,h.SKEW_Y,h.SKEW_X,h.SCALE_Y,h.TRANSLATE_X,h.TRANSLATE_Y].join(","),x="matrix(".concat(_,")");return Object(ee.g)("div",{className:"lf-grid"},Object(ee.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(ee.g)("defs",null,Object(ee.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:x,x:"0",y:"0",width:p,height:p},u==="dot"&&this.renderDot(),u==="mesh"&&this.renderMesh())),Object(ee.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&hm(t.prototype,n),a}(ee.a))||Td;Nd.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function Rs(e){return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function bm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Cd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rd,_o=function(e){var t={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(n){var r=bm(n,2),a=r[0],i=r[1];(a==="style"||Rs(i)!=="object")&&(t[a]=i)}),Object(ee.g)("line",t)};function Is(e){return Is=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(e)}function Id(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Id(Object(n),!0).forEach(function(r){mm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Id(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Om(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ls(e,t){return Ls=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ls(e,t)}function wm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Sa(e);if(t){var a=Sa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return xm(this,n)}}function xm(e,t){if(t&&(Is(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Sa(e){return Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sa(e)}var Ld,Em=Hn(Rd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ls(i,u)})(a,e);var t,n,r=wm(a);function a(){return _m(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.snaplineModel,u=i.position,p=i.isShowHorizontal,h=i.isShowVertical,_=i.getStyle(),x=u.x,P=x===void 0?0:x,A=u.y,R=A===void 0?0:A,U=Ea(Ea({x1:-1e5,y1:R,x2:1e5,y2:R},_),{},{stroke:p?_.stroke:"none"}),W=Ea(Ea({x1:P,y1:-1e5,x2:P,y2:1e5},_),{},{stroke:h?_.stroke:"none"});return Object(ee.g)("g",{className:"lf-snapline"},Object(ee.g)(_o,U),Object(ee.g)(_o,W))}}])&&Om(t.prototype,n),a}(ee.a))||Rd;function zs(e){return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function Sm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return zd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return zd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cr(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.className,u=e.radius,p=t-r/2,h=n-a/2,_={};return Object.entries(e).forEach(function(x){var P=Sm(x,2),A=P[0],R=P[1];zs(R)!=="object"&&(_[A]=R)}),_.className=i?"lf-basic-shape ".concat(i):"lf-basic-shape",u&&(_.rx=u,_.ry=u),_.x=p,_.y=h,Object(ee.g)("rect",_)}function Bs(e){return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function Oo(){return Oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oo.apply(this,arguments)}function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bd(Object(n),!0).forEach(function(r){jm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gs(e,t){return Gs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Gs(e,t)}function Am(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ja(e);if(t){var a=ja(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return km(this,n)}}function km(e,t){if(t&&(Bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ja(e){return ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ja(e)}Cr.defaultProps={className:"",radius:""};var Hd,Tm=Hn(Ld=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Gs(i,u)})(a,e);var t,n,r=Am(a);function a(){return Pm(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getNodesOutline",value:function(){var i=this.props.graphModel,u=i.nodes,p=i.editConfigModel,h=p.hoverOutline,_=p.nodeSelectedOutline,x=[];return u.forEach(function(P){if(P.isHovered||P.isSelected){var A=P.isHovered,R=P.isSelected,U=P.x,W=P.y,ne=P.width,re=P.height;if(_&&R||h&&A){var de=P.getOutlineStyle(),Oe={};if(Object.keys(de).forEach(function(Ee){Ee!=="hover"&&(Oe[Ee]=de[Ee])}),A){var Ce=de.hover;Oe=Gd(Gd({},Oe),Ce)}x.push(Object(ee.g)(Cr,Oo({className:"lf-outline-node",x:U,y:W,width:ne+10,height:re+10},Oe)))}}}),x}},{key:"getEdgeOutline",value:function(){for(var i=this.props.graphModel,u=i.edges,p=i.editConfigModel,h=p.edgeSelectedOutline,_=p.hoverOutline,x=[],P=0;P<u.length;P++){var A=u[P];(h&&A.isSelected||_&&A.isHovered)&&(A.modelType===dt.LINE_EDGE?x.push(this.getLineOutline(A)):A.modelType===dt.POLYLINE_EDGE?x.push(this.getPolylineOutline(A)):A.modelType===dt.BEZIER_EDGE&&x.push(this.getBezierOutline(A)))}return x}},{key:"getLineOutline",value:function(i){var u=i.startPoint,p=i.endPoint,h=(u.x+p.x)/2,_=(u.y+p.y)/2,x=Math.abs(u.x-p.x)+10,P=Math.abs(u.y-p.y)+10,A=i.getOutlineStyle();return Object(ee.g)(Cr,Oo({className:"lf-outline-edge",x:h,y:_,width:x,height:P},A))}},{key:"getPolylineOutline",value:function(i){var u=i.points,p=Jr(u),h=oi(p,8),_=h.x,x=h.y,P=h.width,A=h.height,R=i.getOutlineStyle();return Object(ee.g)(Cr,Oo({className:"lf-outline",x:_,y:x,width:P,height:A},R))}},{key:"getBezierOutline",value:function(i){var u=i.path,p=va(u),h=oi(p,8),_=h.x,x=h.y,P=h.width,A=h.height,R=i.getOutlineStyle();return Object(ee.g)(Cr,Oo({className:"lf-outline",x:_,y:x,width:P,height:A},R))}},{key:"render",value:function(){return Object(ee.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&Mm(t.prototype,n),a}(ee.a))||Ld;function Hs(e){return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function Dm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Xd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Xd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.r,u=i===void 0?4:i,p=e.className,h={cx:n,cy:a,r:u,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(_){var x=Dm(_,2),P=x[0],A=x[1];Hs(A)!=="object"&&(h[P]=A)}),h.className=p?"lf-basic-shape ".concat(p):"lf-basic-shape",Object(ee.g)("circle",h)}function Xs(e){return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function Nm(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Fd(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fd(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fd(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function si(){return si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},si.apply(this,arguments)}function Ud(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vd(e,t,n){return t&&Yd(e.prototype,t),n&&Yd(e,n),e}function Wd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fs(e,t)}function Fs(e,t){return Fs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fs(e,t)}function $d(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ma(e);if(t){var a=Ma(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Cm(this,n)}}function Cm(e,t){if(t&&(Xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pa(e)}function Pa(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ma(e){return Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ma(e)}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kd,qd=function(e){Wd(n,e);var t=$d(n);function n(){var r;return Ud(this,n),Us(Pa(r=t.call(this)),"dragHandler",void 0),Us(Pa(r),"onDragging",function(a){var i=a.event,u=r.props,p=u.graphModel,h=u.bezierModel,_=u.type,x=p.getPointByClient({x:i.clientX,y:i.clientY}).canvasOverlayPosition,P=x.x,A=x.y;h.updateAdjustAnchor({x:P,y:A},_)}),Us(Pa(r),"onDragEnd",function(){r.props.bezierModel.isDragging=!1}),r.dragHandler=new dr({onDragging:r.onDragging,onDragEnd:r.onDragEnd}),r}return Vd(n,[{key:"render",value:function(){var r=this,a=this.props.position,i=a.x,u=a.y,p=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(ee.g)(ui,si({className:"lf-bezier-adjust-anchor",x:i,y:u},p,{onMouseDown:function(h){r.dragHandler.handleMouseDown(h)}}))}}]),n}(ee.a),Rm=Hn(Hd=function(e){Wd(n,e);var t=$d(n);function n(){return Ud(this,n),t.apply(this,arguments)}return Vd(n,[{key:"getBezierAdjust",value:function(r,a){var i=r.path,u=r.id,p=Nm(va(i),4),h=p[0],_=p[1],x=p[2],P=p[3],A=r.getEdgeStyle().adjustLine,R=[];return R.push(Object(ee.g)(_o,si({x1:h.x,y1:h.y,x2:_.x,y2:_.y},A))),R.push(Object(ee.g)(qd,{position:_,bezierModel:r,graphModel:a,key:"".concat(u,"_ePre"),type:"sNext"})),R.push(Object(ee.g)(_o,si({x1:P.x,y1:P.y,x2:x.x,y2:x.y},A))),R.push(Object(ee.g)(qd,{position:x,bezierModel:r,graphModel:a,key:"".concat(u,"_sNext"),type:"ePre"})),R}},{key:"selectedBezierEdge",value:function(){for(var r=this.props.graphModel,a=r.edges,i=[],u=0;u<a.length;u++){var p=a[u];p.isSelected&&p.modelType===dt.BEZIER_EDGE&&p.draggable&&i.push(this.getBezierAdjust(p,r))}return i}},{key:"render",value:function(){return Object(ee.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),n}(ee.a))||Hd;function Ys(e){return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function Im(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vs(e,t){return Vs=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Vs(e,t)}function zm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Aa(e);if(t){var a=Aa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Bm(this,n)}}function Bm(e,t){if(t&&(Ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Aa(e){return Aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Aa(e)}var Zd,Gm=Hn(Kd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Vs(i,u)})(a,e);var t,n,r=zm(a);function a(){return Im(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel.transformModel.getTransformStyle().transform,u=this.props.children;return Object(ee.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(ee.g)("g",{transform:i},u))}}])&&Lm(t.prototype,n),a}(ee.a))||Kd;function Ws(e){return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function $s(){return $s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$s.apply(this,arguments)}function Hm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ks(e,t){return Ks=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ks(e,t)}function Fm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ka(e);if(t){var a=ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Um(this,n)}}function Um(e,t){if(t&&(Ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ka(e){return ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(e)}var Ym=Hn(Zd=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ks(i,u)})(a,e);var t,n,r=Fm(a);function a(){return Hm(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getComponent",value:function(i,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",h=this.props.getView,_=h(i.type);return Object(ee.g)(_,{key:i.id,model:i,graphModel:u,overlay:p})}},{key:"render",value:function(){var i=this,u=this.props,p=u.graphModel,h=u.tool,_=u.options,x=u.dnd,P=u.snaplineModel,A={};_.width&&(A.width="".concat(p.width,"px")),_.height&&(A.height="".concat(p.height,"px"));var R=_.grid,U=p.fakerNode,W=p.editConfigModel.adjustEdge;return Object(ee.g)("div",{className:"lf-graph","flow-id":p.flowId,style:A},Object(ee.g)(nm,{graphModel:p,dnd:x},Object(ee.g)("g",{className:"lf-base"},oa(p.sortElements,function(ne){return i.getComponent(ne,p)})),U?this.getComponent(U,p):""),Object(ee.g)(Gm,{graphModel:p},Object(ee.g)(Tm,{graphModel:p}),W?Object(ee.g)(Rm,{graphModel:p}):"",_.snapline!==!1?Object(ee.g)(Em,{snaplineModel:P}):""),Object(ee.g)(um,{graphModel:p,tool:h}),_.background&&Object(ee.g)(pm,{background:_.background}),_.grid&&Object(ee.g)(Nd,$s({},R,{graphModel:p})))}}],n&&Xm(t.prototype,n),a}(ee.a))||Zd,Vm=Ym;function Jd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jd(Object(n),!0).forEach(function(r){yr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $m=function(){function e(r){var a=this;(function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,e),yr(this,"nodeConfig",void 0),yr(this,"lf",void 0),yr(this,"fakerNode",void 0),yr(this,"stopDrag",function(){a.nodeConfig=null,window.document.removeEventListener("mouseup",a.stopDrag)}),yr(this,"dragEnter",function(u){a.nodeConfig&&!a.fakerNode&&(a.fakerNode=a.lf.createFakerNode(Ta(Ta({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY}))))}),yr(this,"onDragOver",function(u){if(u.preventDefault(),a.fakerNode){var p=a.clientToLocalPoint({x:u.clientX,y:u.clientY}),h=p.x,_=p.y;a.fakerNode.moveTo(h,_);var x=a.fakerNode.getData();a.lf.setNodeSnapLine(x),a.lf.graphModel.eventCenter.emit(tt.NODE_DND_DRAG,{data:x})}return!1}),yr(this,"onDragLeave",function(){a.fakerNode&&(a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)}),yr(this,"onDrop",function(u){a.lf.graphModel&&u&&a.nodeConfig&&(a.lf.addNode(Ta(Ta({},a.nodeConfig),a.clientToLocalPoint({x:u.clientX,y:u.clientY})),tt.NODE_DND_ADD,u),u.preventDefault(),u.stopPropagation(),a.nodeConfig=null,a.lf.removeNodeSnapLine(),a.lf.graphModel.removeFakerNode(),a.fakerNode=null)});var i=r.lf;this.lf=i}var t,n;return t=e,(n=[{key:"clientToLocalPoint",value:function(r){var a=r.x,i=r.y,u=ff(this.lf.options,["grid","size"]),p=this.lf.graphModel.getPointByClient({x:a,y:i}).canvasOverlayPosition,h=p.x,_=p.y;return{x:kr(h,u),y:kr(_,u)}}},{key:"startDrag",value:function(r){this.nodeConfig=r,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&Wm(t.prototype,n),e}();function Qd(e){var t=e.container,n=e.grid,r=e.width,a=e.height;if(!t)throw new Error("请检查 container 参数是否有效");if(typeof r=="string"||typeof a=="string")throw new Error("width或height不支持传入字符串，请传数字");return n&&(e.grid=un({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},n)),un({},th,e)}var bt,eh,th={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function qs(e){return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}function Zs(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return nh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return nh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rh(Object(n),!0).forEach(function(r){oh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Km(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function qm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(){return ci=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=Jm(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},ci.apply(this,arguments)}function Jm(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Rr(e))!==null;);return e}function Js(e,t){return Js=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Js(e,t)}function Qm(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Rr(e);if(t){var a=Rr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return e0(this,n)}}function e0(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Na(e)}function Na(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rr(e)}function oh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Qs=(bt=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Js(i,u)})(a,e);var t,n,r=Qm(a);function a(){var i;qm(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return oh(Na(i=r.call.apply(r,[this].concat(p))),"modelType",dt.BEZIER_EDGE),Km(Na(i),"path",eh,Na(i)),i}return t=a,(n=[{key:"initEdgeData",value:function(i){this.offset=100,ci(Rr(a.prototype),"initEdgeData",this).call(this,i)}},{key:"getEdgeStyle",value:function(){var i=this.graphModel.theme.bezier;return Da(Da({},ci(Rr(a.prototype),"getEdgeStyle",this).call(this)),Dt(i))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var i=0,u=0;return this.pointsList.forEach(function(p){var h=p.x,_=p.y;i+=h,u+=_}),{x:i/this.pointsList.length,y:u/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var i=ci(Rr(a.prototype),"getData",this).call(this),u=this.pointsList.map(function(p){return{x:p.x,y:p.y}});return Da(Da({},i),{},{pointsList:u})}},{key:"getControls",value:function(){var i=this.startPoint,u=this.endPoint;return sd({start:i,end:u,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(i){var u=Zs(i,4),p=u[0],h=u[1],_=u[2],x=u[3];return"M ".concat(p.x," ").concat(p.y,`
    C `).concat(h.x," ").concat(h.y,`,
    `).concat(_.x," ").concat(_.y,`,
    `).concat(x.x," ").concat(x.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var i=this.getControls(),u=i.sNext,p=i.ePre;this.updatePath(u,p)}},{key:"updatePath",value:function(i,u){i=Dt(i),u=Dt(u);var p={x:this.startPoint.x,y:this.startPoint.y},h={x:this.endPoint.x,y:this.endPoint.y};if(!i||!u){var _=this.getControls();i=_.sNext,u=_.ePre}this.pointsList=[p,i,u,h],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(i){this.startPoint=i,this.updatePoints()}},{key:"updateEndPoint",value:function(i){this.endPoint=i,this.updatePoints()}},{key:"moveStartPoint",value:function(i,u){this.startPoint.x+=i,this.startPoint.y+=u;var p=Zs(this.pointsList,3),h=p[1],_=p[2];h.x+=i,h.y+=u,this.updatePath(h,_)}},{key:"moveEndPoint",value:function(i,u){this.endPoint.x+=i,this.endPoint.y+=u;var p=Zs(this.pointsList,3),h=p[1],_=p[2];_.x+=i,_.y+=u,this.updatePath(h,_)}},{key:"updateAdjustAnchor",value:function(i,u){u==="sNext"?this.pointsList[1]=i:u==="ePre"&&(this.pointsList[2]=i),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var i=this.pointsList;return i[i.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(i){var u=i.startPoint,p=i.endPoint,h=i.sourceNode,_=i.targetNode,x=sd({start:u,end:p,sourceNode:h,targetNode:_,offset:this.offset}),P=x.sNext,A=x.ePre;this.pointsList=[u,P,A,p],this.initPoints()}}])&&Zm(t.prototype,n),a}(ps),eh=zn(bt.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zn(bt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"initPoints"),bt.prototype),zn(bt.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updatePoints"),bt.prototype),zn(bt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateStartPoint"),bt.prototype),zn(bt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateEndPoint"),bt.prototype),zn(bt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveStartPoint"),bt.prototype),zn(bt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"moveEndPoint"),bt.prototype),zn(bt.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAdjustAnchor"),bt.prototype),zn(bt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustStart"),bt.prototype),zn(bt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"getAdjustEnd"),bt.prototype),zn(bt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(bt.prototype,"updateAfterAdjustStartAndEnd"),bt.prototype),bt),Ne,ih,ah,uh,sh,ch,lh,fh,ph,dh,hh,yh,vh,gh,bh,mh,_h,Oh,wh,xh,t0=function(e){return e==null};function ec(e){return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ec(e)}function n0(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(h,_){if(h){if(typeof h=="string")return Eh(h,_);var x=Object.prototype.toString.call(h).slice(8,-1);if(x==="Object"&&h.constructor&&(x=h.constructor.name),x==="Map"||x==="Set")return Array.from(h);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return Eh(h,_)}}(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(h){throw h},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,u=!0,p=!1;return{s:function(){n=n.call(e)},n:function(){var h=n.next();return u=h.done,h},e:function(h){p=!0,i=h},f:function(){try{u||n.return==null||n.return()}finally{if(p)throw i}}}}function Eh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sh(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function r0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var vr,jh,gr=(Ne=function(){function e(r,a){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),vn(this,"id",""),Vt(this,"type",ih,this),Vt(this,"x",ah,this),Vt(this,"y",uh,this),Vt(this,"text",sh,this),Vt(this,"properties",ch,this),Vt(this,"_width",lh,this),Vt(this,"_height",fh,this),Vt(this,"anchorsOffset",ph,this),Vt(this,"isSelected",dh,this),Vt(this,"isHovered",hh,this),Vt(this,"isShowAnchor",yh,this),Vt(this,"isDragging",vh,this),Vt(this,"isHitable",gh,this),Vt(this,"draggable",bh,this),Vt(this,"visible",mh,this),vn(this,"virtual",!1),vn(this,"graphModel",void 0),Vt(this,"zIndex",_h,this),Vt(this,"state",Oh,this),Vt(this,"autoToFront",wh,this),Vt(this,"style",xh,this),vn(this,"BaseType",Xt.NODE),vn(this,"modelType",dt.NODE),vn(this,"additionStateData",void 0),vn(this,"targetRules",[]),vn(this,"sourceRules",[]),vn(this,"moveRules",[]),vn(this,"hasSetTargetRules",!1),vn(this,"hasSetSourceRules",!1),this.graphModel=a,this.initNodeData(r),this.setAttributes()}var t,n;return t=e,n=[{key:"width",get:function(){return this._width},set:function(r){this._width=r}},{key:"height",get:function(){return this._height},set:function(r){this._height=r}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(r){if(r.properties||(r.properties={}),!r.id){var a=this.graphModel.idGenerator,i=a&&a(r.type),u=this.createId();r.id=u||i||Tr()}this.formatText(r),un(this,function(p){return Zo(p,["id","type","x","y","text","properties","virtual"])}(r)),this.graphModel.overlapMode===xn.INCREASE&&(this.zIndex=r.zIndex||ls())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(r){r.text||(r.text={value:"",x:r.x,y:r.y,draggable:!1,editable:!0}),r.text&&typeof r.text=="string"?r.text={value:r.text,x:r.x,y:r.y,draggable:!1,editable:!0}:r.text&&r.text.editable===void 0&&(r.text.editable=!0)}},{key:"getData",value:function(){var r=this.text,a=r.x,i=r.y,u=r.value,p=this.properties;Object(c.x)(p)&&(p=Object(c.I)(p));var h={id:this.id,type:this.type,x:this.x,y:this.y,properties:p};return this.graphModel.overlapMode===xn.INCREASE&&(h.zIndex=this.zIndex),u&&(h.text={x:a,y:i,value:u}),h}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return cn(cn({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var r=this.graphModel.theme.nodeText;return Dt(r)}},{key:"getAnchorStyle",value:function(r){var a=this.graphModel.theme.anchor;return Dt(a)}},{key:"getAnchorLineStyle",value:function(r){var a=this.graphModel.theme.anchorLine;return Dt(a)}},{key:"getOutlineStyle",value:function(){var r=this.graphModel.theme.outline;return Dt(r)}},{key:"isAllowConnectedAsSource",value:function(r,a,i,u){var p=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var h,_=!0,x=0;x<p.length;x++){var P=p[x];if(!P.validate.call(this,this,r,a,i,u)){_=!1,h=P.message;break}}return{isAllPass:_,msg:h}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(r,a,i,u){var p=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var h,_=!0,x=0;x<p.length;x++){var P=p[x];if(!P.validate.call(this,r,this,a,i,u)){_=!1,h=P.message;break}}return{isAllPass:_,msg:h}}},{key:"isAllowMoveNode",value:function(r,a){var i,u=!0,p=!0,h=n0(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(h.s();!(i=h.n()).done;){var _=(0,i.value)(this,r,a);if(!_)return!1;if(ec(_)==="object"){var x=_;if(x.x===!1&&x.y===!1)return!1;u=u&&x.x,p=p&&x.y}}}catch(P){h.e(P)}finally{h.f()}return{x:u,y:p}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var r=this.anchorsOffset,a=this.id,i=this.x,u=this.y;return r&&r.length>0?r.map(function(p,h){return p.length?(p=p,{id:"".concat(a,"_").concat(h),x:i+p[0],y:u+p[1]}):cn(cn({},p=p),{},{x:i+p.x,y:u+p.y,id:p.id||"".concat(a,"_").concat(h)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(r){return function(a,i){for(var u,p=us(i),h=Number.MAX_SAFE_INTEGER,_=0;_<p.length;_++){var x=qn(a.x,a.y,p[_].x,p[_].y);x<h&&(h=x,u={index:_,anchor:pp(pp({},p[_]),{},{x:p[_].x,y:p[_].y,id:p[_].id})})}return u}(r,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(r){if(!t0(r))for(var a=0;a<this.anchors.length;a++){var i=this.anchors[a];if(i.id===r)return i}}},{key:"addNodeMoveRules",value:function(r){this.moveRules.includes(r)||this.moveRules.push(r)}},{key:"move",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1;if(i)u=!0,p=!0;else{var h=this.isAllowMoveNode(r,a);typeof h=="boolean"?(u=h,p=h):(u=h.x,p=h.y)}if(u){var _=this.x+r;this.x=_,this.text&&this.moveText(r,0)}if(p){var x=this.y+a;this.y=x,this.text&&this.moveText(0,a)}return u||p}},{key:"getMoveDistance",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=!1,p=!1,h=0,_=0;if(i)u=!0,p=!0;else{var x=this.isAllowMoveNode(r,a);typeof x=="boolean"?(u=x,p=x):(u=x.x,p=x.y)}if(u&&r){var P=this.x+r;this.x=P,this.text&&this.moveText(r,0),h=r}if(p&&a){var A=this.y+a;this.y=A,this.text&&this.moveText(0,a),_=a}return[h,_]}},{key:"moveTo",value:function(r,a){var i=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=r-this.x,p=a-this.y;return!(!i&&!this.isAllowMoveNode(u,p)||(this.text&&this.text&&this.moveText(u,p),this.x=r,this.y=a,0))}},{key:"moveText",value:function(r,a){var i=this.text,u=i.x,p=i.y,h=i.value,_=i.draggable,x=i.editable;this.text={value:h,editable:x,draggable:_,x:u+r,y:p+a}}},{key:"updateText",value:function(r){this.text=cn(cn({},Object(c.I)(this.text)),{},{value:r})}},{key:"setSelected",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=r}},{key:"setHovered",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=r,this.setIsShowAnchor(r)}},{key:"setIsShowAnchor",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=r}},{key:"setHitable",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=r}},{key:"setElementState",value:function(r,a){this.state=r,this.additionStateData=a}},{key:"setProperty",value:function(r,a){this.properties=cn(cn({},Object(c.I)(this.properties)),{},vn({},r,en(a))),this.setAttributes()}},{key:"setProperties",value:function(r){this.properties=cn(cn({},Object(c.I)(this.properties)),en(r)),this.setAttributes()}},{key:"deleteProperty",value:function(r){delete this.properties[r],this.setAttributes()}},{key:"setStyle",value:function(r,a){this.style=cn(cn({},this.style),{},vn({},r,en(a)))}},{key:"setStyles",value:function(r){this.style=cn(cn({},this.style),en(r))}},{key:"updateStyles",value:function(r){this.style=cn({},en(r))}},{key:"setZIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=r}},{key:"updateAttributes",value:function(r){un(this,r)}}],n&&r0(t.prototype,n),e}(),ih=ft(Ne.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ah=ft(Ne.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),uh=ft(Ne.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sh=ft(Ne.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),ch=ft(Ne.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),lh=ft(Ne.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),fh=ft(Ne.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),ph=ft(Ne.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),dh=ft(Ne.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hh=ft(Ne.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yh=ft(Ne.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vh=ft(Ne.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gh=ft(Ne.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bh=ft(Ne.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),mh=ft(Ne.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_h=ft(Ne.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Oh=ft(Ne.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),wh=ft(Ne.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xh=ft(Ne.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ft(Ne.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"incoming"),Ne.prototype),ft(Ne.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Ne.prototype,"outgoing"),Ne.prototype),ft(Ne.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"addNodeMoveRules"),Ne.prototype),ft(Ne.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"move"),Ne.prototype),ft(Ne.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"getMoveDistance"),Ne.prototype),ft(Ne.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveTo"),Ne.prototype),ft(Ne.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"moveText"),Ne.prototype),ft(Ne.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateText"),Ne.prototype),ft(Ne.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setSelected"),Ne.prototype),ft(Ne.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHovered"),Ne.prototype),ft(Ne.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setIsShowAnchor"),Ne.prototype),ft(Ne.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setHitable"),Ne.prototype),ft(Ne.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setElementState"),Ne.prototype),ft(Ne.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperty"),Ne.prototype),ft(Ne.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setProperties"),Ne.prototype),ft(Ne.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"deleteProperty"),Ne.prototype),ft(Ne.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyle"),Ne.prototype),ft(Ne.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setStyles"),Ne.prototype),ft(Ne.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateStyles"),Ne.prototype),ft(Ne.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"setZIndex"),Ne.prototype),ft(Ne.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Ne.prototype,"updateAttributes"),Ne.prototype),Ne);function tc(e){return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function Ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ph(Object(n),!0).forEach(function(r){Ah(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ph(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function i0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nc(){return nc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=u0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},nc.apply(this,arguments)}function u0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=wo(e))!==null;);return e}function rc(e,t){return rc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},rc(e,t)}function s0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=wo(e);if(t){var a=wo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c0(this,n)}}function c0(e,t){if(t&&(tc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ca(e)}function Ca(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e){return wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wo(e)}function Ah(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oc(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var tn,kh,Th,ic=(vr=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&rc(i,u)})(a,e);var t,n,r=s0(a);function a(){var i;i0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Ah(Ca(i=r.call.apply(r,[this].concat(p))),"modelType",dt.CIRCLE_NODE),o0(Ca(i),"r",jh,Ca(i)),i}return t=a,(n=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var i=nc(wo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.circle;return Mh(Mh({},i),Dt(u))}},{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.r;return[{x:i,y:u-p,id:"".concat(this.id,"_0")},{x:i+p,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+p,id:"".concat(this.id,"_2")},{x:i-p,y:u,id:"".concat(this.id,"_3")}]}}])&&a0(t.prototype,n),a}(gr),jh=oc(vr.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),oc(vr.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(vr.prototype,"width"),vr.prototype),oc(vr.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(vr.prototype,"height"),vr.prototype),vr);o(127);function ac(e){return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ac(e)}function uc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Dh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Dh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ch(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nh(Object(n),!0).forEach(function(r){Ih(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function l0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sc(){return sc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=p0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},sc.apply(this,arguments)}function p0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Eo(e))!==null;);return e}function cc(e,t){return cc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},cc(e,t)}function d0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Eo(e);if(t){var a=Eo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h0(this,n)}}function h0(e,t){if(t&&(ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xo(e)}function xo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eo(e){return Eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Eo(e)}function Ih(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function So(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var er,Lh,zh,lc=(tn=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&cc(i,u)})(a,e);var t,n,r=d0(a);function a(){var i;l0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Ih(xo(i=r.call.apply(r,[this].concat(p))),"modelType",dt.DIAMOND_NODE),Rh(xo(i),"rx",kh,xo(i)),Rh(xo(i),"ry",Th,xo(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=sc(Eo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.diamond;return Ch(Ch({},i),Dt(u))}},{key:"points",get:function(){var i=this.x,u=this.y,p=this.rx,h=this.ry;return[[i,u-h],[i+p,u],[i,u+h],[i-p,u]]}},{key:"pointsPosition",get:function(){return this.points.map(function(i){return{x:i[0],y:i[1]}})}},{key:"width",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=uc(p,1)[0];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"height",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=uc(p,2)[1];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"getDefaultAnchor",value:function(){var i=this;return this.points.map(function(u,p){var h=uc(u,2);return{x:h[0],y:h[1],id:"".concat(i.id,"_").concat(p)}})}}])&&f0(t.prototype,n),a}(gr),kh=So(tn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Th=So(tn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),So(tn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"points"),tn.prototype),So(tn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"pointsPosition"),tn.prototype),So(tn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"width"),tn.prototype),So(tn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(tn.prototype,"height"),tn.prototype),tn);function fc(e){return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}function Bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bh(Object(n),!0).forEach(function(r){Xh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hh(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function y0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pc(){return pc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=g0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},pc.apply(this,arguments)}function g0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Po(e))!==null;);return e}function dc(e,t){return dc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},dc(e,t)}function b0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Po(e);if(t){var a=Po(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m0(this,n)}}function m0(e,t){if(t&&(fc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function jo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Po(e)}function Xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Cn,Fh,hc=(er=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&dc(i,u)})(a,e);var t,n,r=b0(a);function a(){var i;y0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Xh(jo(i=r.call.apply(r,[this].concat(p))),"modelType",dt.ELLIPSE_NODE),Hh(jo(i),"rx",Lh,jo(i)),Hh(jo(i),"ry",zh,jo(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=pc(Po(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.ellipse;return Gh(Gh({},i),Dt(u))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.rx,h=this.ry;return[{x:i,y:u-h,id:"".concat(this.id,"_0")},{x:i+p,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h,id:"".concat(this.id,"_2")},{x:i-p,y:u,id:"".concat(this.id,"_3")}]}}])&&v0(t.prototype,n),a}(gr),Lh=Ra(er.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),zh=Ra(er.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Ra(er.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(er.prototype,"width"),er.prototype),Ra(er.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(er.prototype,"height"),er.prototype),er);function yc(e){return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(e)}function vc(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Uh(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Uh(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Uh(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yh(Object(n),!0).forEach(function(r){Wh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function O0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gc(){return gc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=x0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},gc.apply(this,arguments)}function x0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Mo(e))!==null;);return e}function bc(e,t){return bc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},bc(e,t)}function E0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Mo(e);if(t){var a=Mo(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return S0(this,n)}}function S0(e,t){if(t&&(yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ia(e)}function Ia(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mo(e)}function Wh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function La(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var mc,$h,_c=(Cn=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&bc(i,u)})(a,e);var t,n,r=E0(a);function a(){var i;O0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Wh(Ia(i=r.call.apply(r,[this].concat(p))),"modelType",dt.POLYGON_NODE),_0(Ia(i),"points",Fh,Ia(i)),i}return t=a,(n=[{key:"getNodeStyle",value:function(){var i=gc(Mo(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.polygon;return Vh(Vh({},i),Dt(u))}},{key:"pointsPosition",get:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return this.points.map(function(_){return{x:_[0]+i-p/2,y:_[1]+u-h/2}})}},{key:"width",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=vc(p,1)[0];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"height",get:function(){var i=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(p){var h=vc(p,2)[1];h<i&&(i=h),h>u&&(u=h)}),u-i}},{key:"getDefaultAnchor",value:function(){var i=this,u=this.x,p=this.y,h=this.width,_=this.height;return this.points.map(function(x,P){var A=vc(x,2),R=A[0],U=A[1];return{x:u+R-h/2,y:p+U-_/2,id:"".concat(i.id,"_").concat(P)}})}}])&&w0(t.prototype,n),a}(gr),Fh=La(Cn.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),La(Cn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"pointsPosition"),Cn.prototype),La(Cn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"width"),Cn.prototype),La(Cn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Cn.prototype,"height"),Cn.prototype),Cn);function Oc(e){return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function Kh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Kh(Object(n),!0).forEach(function(r){Zh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j0(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function P0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wc(){return wc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=A0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},wc.apply(this,arguments)}function A0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ao(e))!==null;);return e}function xc(e,t){return xc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},xc(e,t)}function k0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ao(e);if(t){var a=Ao(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T0(this,n)}}function T0(e,t){if(t&&(Oc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return za(e)}function za(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(e)}function Zh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ir,Ec=(mc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&xc(i,u)})(a,e);var t,n,r=k0(a);function a(){var i;P0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Zh(za(i=r.call.apply(r,[this].concat(p))),"modelType",dt.RECT_NODE),j0(za(i),"radius",$h,za(i)),i}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return[{x:i,y:u-h/2,id:"".concat(this.id,"_0")},{x:i+p/2,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h/2,id:"".concat(this.id,"_2")},{x:i-p/2,y:u,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var i=wc(Ao(a.prototype),"getNodeStyle",this).call(this),u=this.graphModel.theme.rect;return qh(qh({},i),Dt(u))}}])&&M0(t.prototype,n),a}(gr),$h=function(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}(mc.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),mc);function Sc(e){return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sc(e)}function Jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jh(Object(n),!0).forEach(function(r){ty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jh(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jc(){return jc=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(e,t,n){var r=C0(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},jc.apply(this,arguments)}function C0(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ko(e))!==null;);return e}function Pc(e,t){return Pc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Pc(e,t)}function R0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ko(e);if(t){var a=ko(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return I0(this,n)}}function I0(e,t){if(t&&(Sc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ey(e)}function ey(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ko(e){return ko=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ko(e)}function ty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ny(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Mc=(Ir=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Pc(i,u)})(a,e);var t,n,r=R0(a);function a(){var i;D0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return ty(ey(i=r.call.apply(r,[this].concat(p))),"modelType",dt.TEXT_NODE),i}return t=a,(n=[{key:"getTextStyle",value:function(){var i=jc(ko(a.prototype),"getTextStyle",this).call(this),u=this.graphModel.theme.text;return Qh(Qh({},i),Dt(u))}},{key:"width",get:function(){var i=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return cs({rows:i,fontSize:u,rowsLength:i.length}).width}},{key:"height",get:function(){var i=String(this.text.value).split(/[\r\n]/g),u=this.getTextStyle().fontSize;return cs({rows:i,fontSize:u,rowsLength:i.length}).height}}])&&N0(t.prototype,n),a}(gr),ny(Ir.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ir.prototype,"width"),Ir.prototype),ny(Ir.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ir.prototype,"height"),Ir.prototype),Ir);function Ac(e){return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ac(e)}function L0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kc(e,t){return kc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},kc(e,t)}function B0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ba(e);if(t){var a=Ba(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return G0(this,n)}}function G0(e,t){if(t&&(Ac(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ry(e)}function ry(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ba(e){return Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ba(e)}function H0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bn,oy,iy,ay,Tc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&kc(i,u)})(a,e);var t,n,r=B0(a);function a(){var i;L0(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return H0(ry(i=r.call.apply(r,[this].concat(p))),"modelType",dt.HTML_NODE),i}return t=a,(n=[{key:"getDefaultAnchor",value:function(){var i=this.x,u=this.y,p=this.width,h=this.height;return[{x:i,y:u-h/2,id:"".concat(this.id,"_0")},{x:i+p/2,y:u,id:"".concat(this.id,"_1")},{x:i,y:u+h/2,id:"".concat(this.id,"_2")},{x:i-p/2,y:u,id:"".concat(this.id,"_3")}]}}])&&z0(t.prototype,n),a}(gr);function uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Dc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function X0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function li(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(u){i[u]=r[u]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(u,p){return p(e,t,u)||u},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var cy=(Bn=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),sy(this,"graphModel",void 0),Dc(this,"isShowHorizontal",oy,this),Dc(this,"isShowVertical",iy,this),Dc(this,"position",ay,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}var t,n;return t=e,n=[{key:"getStyle",value:function(){return function(r){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?uy(Object(i),!0).forEach(function(u){sy(r,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):uy(Object(i)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(i,u))})}return r}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(r,a){for(var i=r.x,u=r.y,p=!1,h=!1,_=0;_<a.length;_++){var x=a[_];if(x.id!==r.id&&(i===x.x&&(p=!0),u===x.y&&(h=!0),p&&h))break}return{isShowVertical:p,isShowHorizontal:h,position:{x:i,y:u}}}},{key:"getHorizontalSnapline",value:function(r,a){var i,u,p=!1,h=r.id;if(h){var _=this.graphModel.fakerNode;if(_&&_.id===h)u=En(_);else{var x=this.graphModel.getNodeModelById(h);u=En(x)}}for(var P=0;P<a.length;P++){var A=a[P];if(A.id!==r.id){var R=En(A);if(R.minY===u.minY||R.maxY===u.minY){p=!0,i=u.minY;break}if(R.minY===u.maxY||R.maxY===u.maxY){p=!0,i=u.maxY;break}}}return un({isShowHorizontal:p,position:{y:i}})}},{key:"getVerticalSnapline",value:function(r,a){var i,u,p=!1,h=r.id;if(h){var _=this.graphModel.fakerNode;if(_&&_.id===h)u=En(_);else{var x=this.graphModel.getNodeModelById(h);u=En(x)}}for(var P=0;P<a.length;P++){var A=a[P];if(A.id!==r.id){var R=En(A);if(R.minX===u.minX||R.maxX===u.minX){p=!0,i=u.minX;break}if(R.minX===u.maxX||R.maxX===u.maxX){p=!0,i=u.maxX;break}}}return un({isShowVertical:p,position:{x:i}})}},{key:"getSnapLinePosition",value:function(r,a){var i=this.getCenterSnapLine(r,a),u=i.isShowHorizontal,p=i.isShowVertical;if(!u){var h=this.getHorizontalSnapline(r,a);h.isShowHorizontal&&(i.isShowHorizontal=h.isShowHorizontal,i.position.y=h.position.y)}if(!p){var _=this.getVerticalSnapline(r,a);_.isShowVertical&&(i.isShowVertical=_.isShowVertical,i.position.x=_.position.x)}return i}},{key:"setSnaplineInfo",value:function(r){var a=r.isShowHorizontal,i=r.isShowVertical,u=r.position;this.position=u,this.isShowHorizontal=a,this.isShowVertical=i}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(r){var a=this.graphModel.nodes,i=this.getSnapLinePosition(r,a);this.setSnaplineInfo(i)}}],n&&X0(t.prototype,n),e}(),oy=li(Bn.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy=li(Bn.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ay=li(Bn.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),li(Bn.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"clearSnapline"),Bn.prototype),li(Bn.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(Bn.prototype,"setNodeSnapLine"),Bn.prototype),Bn),fi=new Map,ly=function(e){var t=Tr(),n=window.requestAnimationFrame(function r(){if(e(),fi.get(t)){var a=window.requestAnimationFrame(r);fi.set(t,a)}});return fi.set(t,n),t},Ga=function(e){var t=fi.get(e);t&&(window.cancelAnimationFrame(t),fi.delete(e))};function Nc(e){return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(e)}function pi(){return pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pi.apply(this,arguments)}function fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ha(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fy(Object(n),!0).forEach(function(r){nr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return py(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return py(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function py(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cc(e,t){return Cc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Cc(e,t)}function Y0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Xa(e);if(t){var a=Xa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return V0(this,n)}}function V0(e,t){if(t&&(Nc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tr(e)}function tr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(e){return Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xa(e)}function nr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W0=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Cc(i,u)})(a,e);var t,n,r=Y0(a);function a(){var i;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),nr(tr(i=r.call(this)),"preTargetNode",void 0),nr(tr(i),"sourceRuleResults",void 0),nr(tr(i),"targetRuleResults",void 0),nr(tr(i),"dragHandler",void 0),nr(tr(i),"t",void 0),nr(tr(i),"onDragStart",function(u){var p=u.event,h=i.props,_=h.anchorData,x=h.nodeModel,P=h.graphModel,A=P.overlapMode;P.selectNodeById(x.id),A!==xn.INCREASE&&x.autoToFront&&P.toFront(x.id),P.eventCenter.emit(tt.ANCHOR_DRAGSTART,{data:_,e:p,nodeModel:x}),i.setState({startX:_.x,startY:_.y,endX:_.x,endY:_.y})}),nr(tr(i),"onDragging",function(u){var p=u.event,h=i.props,_=h.graphModel,x=h.nodeModel,P=h.anchorData,A=_.transformModel,R=_.eventCenter,U=_.width,W=_.height,ne=_.editConfigModel,re=ne.autoExpand,de=ne.stopMoveGraph,Oe=p.clientX,Ce=p.clientY,Ee=_.getPointByClient({x:Oe,y:Ce}),Ue=Ee.domOverlayPosition,ke=Ue.x,Pe=Ue.y,Qe=Ee.canvasOverlayPosition,yt=Qe.x,Et=Qe.y;i.t&&Ga(i.t);var mt=[];ke<10?mt=[10,0]:ke+10>U?mt=[-10,0]:Pe<10?mt=[0,10]:Pe+10>W&&(mt=[0,-10]),i.setState({endX:yt,endY:Et,dragging:!0}),i.moveAnchorEnd(yt,Et),mt.length>0&&!de&&re&&(i.t=ly(function(){var jt=F0(mt,2),Gt=jt[0],Wt=jt[1];A.translate(Gt,Wt);var fn=i.state,ir=fn.endX,Rn=fn.endY;i.setState({endX:ir-Gt,endY:Rn-Wt}),i.moveAnchorEnd(ir-Gt,Rn-Wt)})),R.emit(tt.ANCHOR_DRAG,{data:P,e:p,nodeModel:x})}),nr(tr(i),"onDragEnd",function(u){var p=u.event;i.t&&Ga(i.t),i.checkEnd(p),i.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),i.sourceRuleResults.clear(),i.targetRuleResults.clear();var h=i.props,_=h.graphModel,x=h.nodeModel,P=h.anchorData;_.eventCenter.emit(tt.ANCHOR_DRAGEND,{data:P,e:p,nodeModel:x})}),nr(tr(i),"checkEnd",function(u){var p=i.props,h=p.graphModel,_=p.nodeModel,x=p.anchorData,P=x.x,A=x.y,R=x.id,U=(h.edgeType,i.state),W=U.endX,ne=U.endY,re=U.dragging,de=sa({x:W,y:ne},h);if(i.preTargetNode&&i.preTargetNode.state!==Ot.DEFAULT&&i.preTargetNode.setElementState(Ot.DEFAULT),re&&de&&de.node){var Oe=de.node,Ce=de.anchor.id,Ee="".concat(_.id,"_").concat(Oe.id,"_").concat(Ce,"_").concat(R),Ue=i.sourceRuleResults.get(Ee)||{},ke=Ue.isAllPass,Pe=Ue.msg,Qe=i.targetRuleResults.get(Ee)||{},yt=Qe.isAllPass,Et=Qe.msg;if(ke&&yt){Oe.setElementState(Ot.DEFAULT);var mt=h.edgeGenerator(_.getData(),h.getNodeModelById(de.node.id).getData()),jt=h.addEdge(Ha(Ha({},mt),{},{sourceNodeId:_.id,sourceAnchorId:R,startPoint:{x:P,y:A},targetNodeId:de.node.id,targetAnchorId:de.anchor.id,endPoint:{x:de.anchor.x,y:de.anchor.y}})),Gt=i.props.anchorData;h.eventCenter.emit(tt.ANCHOR_DROP,{data:Gt,e:u,nodeModel:_,edgeModel:jt})}else{var Wt=Oe.getData();h.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Wt,msg:Et||Pe})}}}),i.sourceRuleResults=new Map,i.targetRuleResults=new Map,i.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},i.dragHandler=new dr({onDragStart:i.onDragStart,onDragging:i.onDragging,onDragEnd:i.onDragEnd}),i}return t=a,(n=[{key:"getAnchorShape",value:function(){var i=this.props,u=i.anchorData,p=i.style,h=i.node.getAnchorShape(u);if(h)return h;var _=u.x,x=u.y,P=Ha(Ha({},p),p.hover);return Object(ee.g)("g",null,Object(ee.g)(ui,pi({className:"lf-node-anchor-hover"},P,{x:_,y:x})),Object(ee.g)(ui,pi({className:"lf-node-anchor"},p,{x:_,y:x})))}},{key:"moveAnchorEnd",value:function(i,u){var p=this.props,h=p.graphModel,_=p.nodeModel,x=p.anchorData,P=sa({x:i,y:u},h);if(P){var A=P.node,R=P.anchor.id;if(this.preTargetNode&&this.preTargetNode!==P.node&&this.preTargetNode.setElementState(Ot.DEFAULT),x.id===R)return;this.preTargetNode=A;var U="".concat(_.id,"_").concat(A.id,"_").concat(R,"_").concat(x.id);if(!this.targetRuleResults.has(U)){var W=P.anchor,ne=_.isAllowConnectedAsSource(A,x,W),re=A.isAllowConnectedAsTarget(_,x,W);this.sourceRuleResults.set(U,ei(ne)),this.targetRuleResults.set(U,ei(re))}var de=this.sourceRuleResults.get(U).isAllPass,Oe=this.targetRuleResults.get(U).isAllPass;de&&Oe?A.setElementState(Ot.ALLOW_CONNECT):A.setElementState(Ot.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Ot.DEFAULT&&this.preTargetNode.setElementState(Ot.DEFAULT)}},{key:"isShowLine",value:function(){var i=this.state,u=i.startX,p=i.startY,h=i.endX,_=i.endY;return qn(u,p,h,_)>10}},{key:"render",value:function(){var i=this,u=this.state,p=u.startX,h=u.startY,_=u.endX,x=u.endY,P=this.props,A=P.anchorData.edgeAddable,R=P.edgeStyle;return Object(ee.g)("g",{className:"lf-anchor"},Object(ee.g)("g",{onMouseDown:function(U){A!==!1&&i.dragHandler.handleMouseDown(U)}},this.getAnchorShape()),this.isShowLine()&&Object(ee.g)(_o,pi({x1:p,y1:h,x2:_,y2:x},R,{"pointer-events":"none"})))}}])&&U0(t.prototype,n),a}(ee.a);o(80);function dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dy(Object(n),!0).forEach(function(r){K0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function K0(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rc(e){return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}function q0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return hy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return hy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function hy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yy(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.value,u=e.fontSize,p=e.fill,h=p===void 0?"currentColor":p,_=e.overflowMode,x=_===void 0?"default":_,P=e.textWidth,A=P===void 0?"":P,R=e.model,U={textAnchor:"middle","dominant-baseline":"middle",x:n,y:a,fill:h};if(Object.entries(e).forEach(function(Ce){var Ee=q0(Ce,2),Ue=Ee[0],ke=Ee[1];Rc(ke)!=="object"&&(U[Ue]=ke)}),i){var W=String(i).split(/[\r\n]/g),ne=W.length;if(x!=="default"){var re=R.BaseType,de=R.modelType;if(re===Xt.NODE&&de!==dt.TEXT_NODE||re===Xt.EDGE&&A)return function(Ce){var Ee=Ce.value,Ue=Ce.fontSize,ke=Ce.model,Pe=Ce.fontFamily,Qe=Pe===void 0?"":Pe,yt=Ce.lineHeight,Et=Ce.wrapPadding,mt=Et===void 0?"0, 0":Et,jt=Ce.overflowMode,Gt=Ce.x,Wt=Ce.y,fn=ke.width,ir=ke.textHeight,Rn=Ce.textWidth||fn,No=String(Ee).split(/[\r\n]/g),fu=No.length,pu=zp({rows:No,style:{fontSize:"".concat(Ue,"px"),width:"".concat(Rn,"px"),fontFamily:Qe,lineHeight:yt,padding:mt},rowsLength:fu,className:"lf-get-text-height"}),no=ke.height>pu?ke.height:pu;ir&&(no=ir);var Br=jt==="ellipsis";return Br&&(no=Ue+2),Object(ee.g)("g",null,Object(ee.g)("foreignObject",{width:Rn,height:no,x:Gt-Rn/2,y:Wt-no/2},Object(ee.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:no,width:Rn,padding:mt}},Object(ee.g)("div",{className:Br?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Br?No.join(""):"",style:$0({},Ce)},No.map(function(Gr){return Object(ee.g)("div",{className:"lf-node-text--auto-wrap-inner"},Gr)})))))}(e)}if(ne>1){var Oe=W.map(function(Ce,Ee){var Ue=(Ee-(ne-1)/2)*(u+2);return Object(ee.g)("tspan",{className:"lf-text-tspan",x:n,y:a+Ue},Ce)});return Object(ee.g)("text",U,Oe)}return Object(ee.g)("text",U,i)}}function Ic(e){return Ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ic(e)}function Lc(){return Lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lc.apply(this,arguments)}function Z0(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return vy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return vy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J0(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zc(e,t){return zc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},zc(e,t)}function Q0(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Fa(e);if(t){var a=Fa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return e_(this,n)}}function e_(e,t){if(t&&(Ic(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lr(e)}function Lr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e){return Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Fa(e)}function Qr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gy=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&zc(i,u)})(a,e);var t,n,r=Q0(a);function a(i){var u;(function(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")})(this,a),Qr(Lr(u=r.call(this)),"dragHandler",void 0),Qr(Lr(u),"sumDeltaX",0),Qr(Lr(u),"sumDeltaY",0),Qr(Lr(u),"stepDrag",void 0),Qr(Lr(u),"onDragging",function(h){var _=h.deltaX,x=h.deltaY,P=u.props,A=P.model,R=Z0(P.graphModel.transformModel.fixDeltaXY(_,x),2),U=R[0],W=R[1];A.moveText(U,W)}),Qr(Lr(u),"dblClickHandler",function(){u.props.editable&&u.props.model.setElementState(Ot.TEXT_EDIT)}),Qr(Lr(u),"mouseDownHandle",function(h){var _=u.props,x=_.draggable,P=_.model,A=_.graphModel.editConfigModel.nodeTextDraggable;(x||A)&&(u.stepDrag.model=P,u.stepDrag.handleMouseDown(h))}),i.model;var p=i.draggable;return u.stepDrag=new dr({onDragging:u.onDragging,step:1,isStopPropagation:p}),u}return t=a,(n=[{key:"getShape",value:function(){var i=this.props,u=i.model,p=i.graphModel,h=u.text,_=p.editConfigModel,x=h.value,P=h.x,A=h.y,R=h.editable,U=h.draggable,W={x:P,y:A,className:"",value:x};R?W.className="lf-element-text":U||_.nodeTextDraggable?W.className="lf-text-draggable":W.className="lf-text-disabled";var ne=u.getTextStyle();return Object(ee.g)(yy,Lc({},W,ne,{model:u}))}},{key:"render",value:function(){if(this.props.model.text)return Object(ee.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&J0(t.prototype,n),a}(ee.a),t_=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Bc(e){return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(e)}function Ua(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return by(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return by(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function by(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function my(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gc(e,t){return Gc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Gc(e,t)}function n_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ya(e);if(t){var a=Ya(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return r_(this,n)}}function r_(e,t){if(t&&(Bc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nn(e)}function nn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e){return Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ya(e)}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&Gc(u,p)})(i,e);var t,n,r,a=n_(i);function i(u){var p;(function(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")})(this,i),ln(nn(p=a.call(this)),"t",void 0),ln(nn(p),"moveOffset",void 0),ln(nn(p),"stepDrag",void 0),ln(nn(p),"contextMenuTime",void 0),ln(nn(p),"startTime",void 0),ln(nn(p),"clickTimer",void 0),ln(nn(p),"onDragStart",function(A){var R=A.event,U=R.clientX,W=R.clientY,ne=p.props,re=ne.model,de=ne.graphModel.getPointByClient({x:U,y:W}).canvasOverlayPosition,Oe=de.x,Ce=de.y;p.moveOffset={x:re.x-Oe,y:re.y-Ce}}),ln(nn(p),"onDragging",function(A){var R=A.event,U=p.props,W=U.model,ne=U.graphModel,re=ne.editConfigModel,de=re.stopMoveGraph,Oe=re.autoExpand,Ce=ne.transformModel,Ee=ne.selectNodes,Ue=ne.width,ke=ne.height,Pe=ne.gridSize;W.isDragging=!0;var Qe=R.clientX,yt=R.clientY,Et=ne.getPointByClient({x:Qe,y:yt}).canvasOverlayPosition,mt=Et.x,jt=Et.y,Gt=Ua(Ce.CanvasPointToHtmlPoint([mt,jt]),2),Wt=Gt[0],fn=Gt[1];if(mt+=p.moveOffset.x,jt+=p.moveOffset.y,mt=kr(mt,Pe),jt=kr(jt,Pe),Ue&&ke){if(!Oe||de||!(Wt<0||fn<0||Wt>Ue||fn>ke)){var ir=Ua(Ce.CanvasPointToHtmlPoint([mt-W.width/2,jt-W.height/2]),2),Rn=ir[0],No=ir[1],fu=Ua(Ce.CanvasPointToHtmlPoint([mt+W.width/2,jt+W.height/2]),2),pu=fu[0],no=fu[1],Br=Math.max(Pe,20),Gr=[];Rn<0?Gr=[Br,0]:pu>ne.width?Gr=[-Br,0]:No<0?Gr=[0,Br]:no>ne.height&&(Gr=[0,-Br]),p.t&&Ga(p.t);var du=Ee.map(function(hu){return hu.id});du.indexOf(W.id)===-1&&(du=[W.id]),Gr.length>0&&!de&&Oe?p.t=ly(function(){var hu=Ua(Gr,2),ev=hu[0],tv=hu[1];Ce.translate(ev,tv);var VO=-ev/Ce.SCALE_X,WO=-tv/Ce.SCALE_X;ne.moveNodes(du,VO,WO)}):ne.moveNodes(du,mt-W.x,jt-W.y)}}else ne.moveNode2Coordinate(W.id,mt,jt)}),ln(nn(p),"onDragEnd",function(){p.t&&Ga(p.t),p.props.model.isDragging=!1}),ln(nn(p),"handleClick",function(A){if(p.startTime&&!(new Date().getTime()-p.startTime>200)){var R=p.props,U=R.model,W=R.graphModel,ne={data:U.getData(),e:A,position:W.getPointByClient({x:A.clientX,y:A.clientY}),isSelected:!1,isMultiple:!1},re=A.button===2,de=A.detail===2;if(!re){var Oe=W.editConfigModel,Ce=lp(A,Oe);ne.isMultiple=Ce,U.isSelected&&!de&&Ce?(ne.isSelected=!1,U.setSelected(!1)):(W.selectNodeById(U.id,Ce),ne.isSelected=!0,p.toFront()),de?(Oe.nodeTextEdit&&U.text.editable&&(U.setSelected(!1),W.setElementStateById(U.id,Ot.TEXT_EDIT)),W.eventCenter.emit(tt.NODE_DBCLICK,ne)):(W.eventCenter.emit(tt.ELEMENT_CLICK,ne),W.eventCenter.emit(tt.NODE_CLICK,ne))}}}),ln(nn(p),"handleContextMenu",function(A){A.preventDefault();var R=p.props,U=R.model,W=R.graphModel,ne=U.getData(),re=W.getPointByClient({x:A.clientX,y:A.clientY});W.setElementStateById(U.id,Ot.SHOW_MENU,re.domOverlayPosition),U.isSelected||W.selectNodeById(U.id),W.eventCenter.emit(tt.NODE_CONTEXTMENU,{data:ne,e:A,position:re}),p.toFront()}),ln(nn(p),"handleMouseDown",function(A){var R=p.props,U=R.model,W=R.graphModel;p.startTime=new Date().getTime(),W.editConfigModel.adjustNodePosition&&U.draggable&&p.stepDrag&&p.stepDrag.handleMouseDown(A)}),ln(nn(p),"setHoverON",function(A){var R=p.props,U=R.model,W=R.graphModel;if(!U.isHovered){var ne=U.getData();U.setHovered(!0),W.eventCenter.emit(tt.NODE_MOUSEENTER,{data:ne,e:A})}}),ln(nn(p),"setHoverOFF",function(A){var R=p.props,U=R.model,W=R.graphModel,ne=U.getData();U.isHovered&&(U.setHovered(!1),W.eventCenter.emit(tt.NODE_MOUSELEAVE,{data:ne,e:A}))}),ln(nn(p),"onMouseOut",function(A){t_&&p.setHoverOFF(A)});var h=u.graphModel,_=h.gridSize,x=h.eventCenter,P=u.model;return p.stepDrag=new dr({onDragStart:p.onDragStart,onDragging:p.onDragging,onDragEnd:p.onDragEnd,step:_,eventType:"NODE",isStopPropagation:!1,eventCenter:x,model:P}),p}return t=i,r=[{key:"getModel",value:function(u){return u}}],(n=[{key:"getAnchorShape",value:function(u){return null}},{key:"getAnchors",value:function(){var u=this,p=this.props,h=p.model,_=p.graphModel,x=h.isSelected,P=h.isHitable,A=h.isDragging,R=h.isShowAnchor;return P&&(x||R)&&!A?oa(h.anchors,function(U,W){var ne=h.getAnchorLineStyle(U),re=h.getAnchorStyle(U);return Object(ee.g)(W0,{anchorData:U,node:u,style:re,edgeStyle:ne,anchorIndex:W,nodeModel:h,graphModel:_,setHoverOFF:u.setHoverOFF})}):[]}},{key:"getText",value:function(){var u=this.props,p=u.model,h=u.graphModel;if(p.state===Ot.TEXT_EDIT)return"";if(p.text){var _=h.editConfigModel,x=!1;return(p.text.draggable||_.nodeTextDraggable)&&(x=!0),Object(ee.g)(gy,{editable:_.nodeTextEdit&&p.text.editable,model:p,graphModel:h,draggable:x})}}},{key:"getStateClassName",value:function(){var u=this.props.model,p=u.state,h=u.isDragging,_=u.isSelected,x="lf-node";switch(p){case Ot.ALLOW_CONNECT:x+=" lf-node-allow";break;case Ot.NOT_ALLOW_CONNECT:x+=" lf-node-not-allow";break;default:x+=" lf-node-default"}return h&&(x+=" lf-isDragging"),_&&(x+=" lf-node-selected"),x}},{key:"toFront",value:function(){var u=this.props,p=u.model,h=u.graphModel;h.overlapMode!==xn.INCREASE&&p.autoToFront&&h.toFront(p.id)}},{key:"render",value:function(){var u,p=this.props,h=p.model,_=p.graphModel,x=_.editConfigModel,P=x.hideAnchors,A=x.adjustNodePosition,R=_.gridSize,U=_.transformModel.SCALE_X,W=h.isHitable,ne=h.draggable,re=Object(ee.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),P?null:this.getAnchors());return W?(A&&ne&&this.stepDrag.setStep(R*U),u=Object(ee.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},re)):u=Object(ee.g)("g",{className:this.getStateClassName()},re),u}}])&&my(t.prototype,n),r&&my(t,r),i}(ee.a);function Hc(e){return Hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(e)}function Xc(){return Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xc.apply(this,arguments)}function o_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fc(e,t){return Fc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fc(e,t)}function a_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Va(e);if(t){var a=Va(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u_(this,n)}}function u_(e,t){if(t&&(Hc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Va(e){return Va=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Va(e)}var Uc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Fc(i,u)})(a,e);var t,n,r=a_(a);function a(){return o_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(ee.g)(Cr,Xc({},u,{x:i.x,y:i.y,width:i.width,height:i.height,radius:i.radius}))}}])&&i_(t.prototype,n),a}(br);function Yc(e){return Yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yc(e)}function Vc(){return Vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vc.apply(this,arguments)}function s_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wc(e,t){return Wc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Wc(e,t)}function l_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Wa(e);if(t){var a=Wa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f_(this,n)}}function f_(e,t){if(t&&(Yc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Wa(e){return Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wa(e)}var $c=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Wc(i,u)})(a,e);var t,n,r=l_(a);function a(){return s_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.r,_=i.getNodeStyle();return Object(ee.g)(ui,Vc({},_,{x:u,y:p,r:h}))}}])&&c_(t.prototype,n),a}(br);function Kc(e){return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kc(e)}function p_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return _y(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _y(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _y(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oy(e){var t=e.points,n=e.className,r={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(a){var i=p_(a,2),u=i[0],p=i[1];Kc(p)!=="object"&&(r[u]=p)}),r.className=n?"lf-basic-shape ".concat(n):"lf-basic-shape",r.points=t.map(function(a){return a.join(",")}).join(" "),Object(ee.g)("polygon",r)}function qc(e){return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function Zc(){return Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zc.apply(this,arguments)}function d_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jc(e,t){return Jc=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Jc(e,t)}function y_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=$a(e);if(t){var a=$a(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v_(this,n)}}function v_(e,t){if(t&&(qc(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function $a(e){return $a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$a(e)}var Qc=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Jc(i,u)})(a,e);var t,n,r=y_(a);function a(){return d_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.width,_=i.height,x=i.points,P=i.getNodeStyle(),A={transform:"matrix(1 0 0 1 ".concat(u-h/2," ").concat(p-_/2,")")};return Object(ee.g)("g",A,Object(ee.g)(Oy,Zc({},P,{points:x,x:u,y:p})))}}])&&h_(t.prototype,n),a}(br);function el(e){return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(e)}function tl(){return tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tl.apply(this,arguments)}function g_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nl(e,t){return nl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},nl(e,t)}function m_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ka(e);if(t){var a=Ka(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return __(this,n)}}function __(e,t){if(t&&(el(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Ka(e){return Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ka(e)}var rl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&nl(i,u)})(a,e);var t,n,r=m_(a);function a(){return g_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(ee.g)("g",null,Object(ee.g)(Oy,tl({},u,{points:i.points,x:i.x,y:i.y})))}}])&&b_(t.prototype,n),a}(br);function ol(e){return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function O_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return wy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function wy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w_(e){var t=e.x,n=t===void 0?0:t,r=e.y,a=r===void 0?0:r,i=e.rx,u=i===void 0?4:i,p=e.ry,h=p===void 0?4:p,_=e.className,x={cx:n,cy:a,rx:u,ry:h,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(P){var A=O_(P,2),R=A[0],U=A[1];ol(U)!=="object"&&(x[R]=U)}),x.className=_?"lf-basic-shape ".concat(_):"lf-basic-shape",Object(ee.g)("ellipse",x)}function il(e){return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}function al(){return al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al.apply(this,arguments)}function x_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ul(e,t){return ul=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ul(e,t)}function S_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=qa(e);if(t){var a=qa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return j_(this,n)}}function j_(e,t){if(t&&(il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function qa(e){return qa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qa(e)}var sl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ul(i,u)})(a,e);var t,n,r=S_(a);function a(){return x_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getShape",value:function(){var i=this.props.model,u=i.getNodeStyle();return Object(ee.g)(w_,al({},u,{x:i.x,y:i.y,rx:i.rx,ry:i.ry}))}}])&&E_(t.prototype,n),a}(br);function cl(e){return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ey(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xy(Object(n),!0).forEach(function(r){P_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ll(e,t){return ll=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},ll(e,t)}function k_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Za(e);if(t){var a=Za(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return T_(this,n)}}function T_(e,t){if(t&&(cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function Za(e){return Za=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Za(e)}var fl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&ll(i,u)})(a,e);var t,n,r=k_(a);function a(){return M_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getBackground",value:function(){var i=this.props.model,u=i.getTextStyle(),p=i.width,h=i.height,_=i.x,x=i.y,P=Ey(Ey({},u.background),{},{x:_,y:x-1,width:p,height:h});return Object(ee.g)(Cr,P)}},{key:"getShape",value:function(){return Object(ee.g)("g",null,this.getBackground())}}])&&A_(t.prototype,n),a}(br);function pl(e){return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function dl(){return dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}function D_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t){return hl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},hl(e,t)}function C_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Ja(e);if(t){var a=Ja(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return R_(this,n)}}function R_(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return di(e)}function di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ja(e){return Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ja(e)}function Qa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&hl(i,u)})(a,e);var t,n,r=C_(a);function a(){var i;D_(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return Qa(di(i=r.call.apply(r,[this].concat(p))),"ref",void 0),Qa(di(i),"currentProperties",void 0),Qa(di(i),"preProperties",void 0),Qa(di(i),"setRef",function(_){i.ref=_}),i}return t=a,(n=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(i){i.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var i=this.props.model,u=i.x,p=i.y,h=i.height,_=i.width,x=i.getNodeStyle();return this.currentProperties=JSON.stringify(i.properties),Object(ee.g)("foreignObject",dl({},x,{x:u-_/2,y:p-h/2,width:_,height:h,ref:this.setRef}))}}])&&N_(t.prototype,n),a}(br);function vl(e){return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function gl(){return gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gl.apply(this,arguments)}function Sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function eo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sy(Object(n),!0).forEach(function(r){_l(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bl(e,t){return bl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},bl(e,t)}function L_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=eu(e);if(t){var a=eu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return z_(this,n)}}function z_(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ml(e)}function ml(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e){return eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},eu(e)}function _l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rr,B_=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&bl(i,u)})(a,e);var t,n,r=L_(a);function a(i){var u;return function(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}(this,a),_l(ml(u=r.call(this,i)),"setHoverON",function(){u.setState({isHovered:!0})}),_l(ml(u),"setHoverOFF",function(){u.setState({isHovered:!1})}),u.state={isHovered:!1},u}return t=a,(n=[{key:"getBackground",value:function(){var i=this.props.model,u=i.getTextStyle(),p=i.text,h=u.background||{};if(this.state.isHovered&&u.hover&&u.hover.background&&(h=eo(eo({},h),u.hover.background)),p&&p.value&&h.fill!=="transparent"){var _,x=u.fontSize,P=u.overflowMode,A=u.lineHeight,R=u.wrapPadding,U=u.textWidth,W=p.value,ne=p.x,re=p.y,de=String(W).split(/[\r\n]/g),Oe=de.length;if(P==="autoWrap"&&U){var Ce=zp({rows:de,style:{fontSize:"".concat(x,"px"),width:"".concat(U,"px"),lineHeight:A,padding:R},rowsLength:Oe,className:"lf-get-text-height"});_=eo(eo({},h),{},{x:ne-1,y:re-1,width:U,height:Ce})}else{de&&de.forEach(function(Qe){ud(Qe)});var Ee=cs({rows:de,fontSize:x,rowsLength:Oe}),Ue=Ee.width,ke=Ee.height;if(typeof h.wrapPadding=="string"){var Pe=h.wrapPadding.split(",").filter(function(Qe){return Qe.trim()}).map(function(Qe){return parseFloat(Qe.trim())});Pe.length>0&&Pe.length<=4&&(Pe.length===1?Pe=[Pe[0],Pe[0],Pe[0],Pe[0]]:Pe.length===2?Pe=[Pe[0],Pe[1],Pe[0],Pe[1]]:Pe.length===3&&(Pe=[Pe[0],Pe[1],Pe[2],Pe[1]]),Ue+=Pe[1]+Pe[3],ke+=Pe[0]+Pe[2],ne+=(Pe[1]-Pe[3])/2,re+=(Pe[2]-Pe[0])/2)}_=eo(eo({},h),{},{x:ne-1,y:re-1,width:Ue,height:ke})}return Object(ee.g)(Cr,_)}}},{key:"getShape",value:function(){var i=this.props.model,u=i.text,p=u.value,h=u.x,_=u.y;if(p){var x=eo({x:h,y:_,className:"lf-element-text",value:p},i.getTextStyle());return Object(ee.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(ee.g)(yy,gl({},x,{model:i})))}}}])&&I_(t.prototype,n),a}(gy);function Ol(e){return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jy(Object(n),!0).forEach(function(r){jn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Py(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Py(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Py(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wl(e,t){return wl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},wl(e,t)}function X_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=tu(e);if(t){var a=tu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return F_(this,n)}}function F_(e,t){if(t&&(Ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sn(e)}function Sn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e){return tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tu(e)}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(rr||(rr={}));var My=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&wl(i,u)})(a,e);var t,n,r=X_(a);function a(i){var u;(function(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),jn(Sn(u=r.call(this)),"stepDragData",void 0),jn(Sn(u),"stepDrag",void 0),jn(Sn(u),"oldEdge",void 0),jn(Sn(u),"preTargetNode",void 0),jn(Sn(u),"targetRuleResults",void 0),jn(Sn(u),"sourceRuleResults",void 0),jn(Sn(u),"handleMouseDown",function(x){u.stepDrag&&u.stepDrag.handleMouseDown(x)}),jn(Sn(u),"onDragStart",function(){var x=u.props,P=x.x,A=x.y,R=x.edgeModel,U=R.startPoint,W=R.endPoint,ne=R.pointsList;u.oldEdge={startPoint:U,endPoint:W,pointsList:ne},u.setState({endX:P,endY:A,dragging:!0})}),jn(Sn(u),"onDragging",function(x){var P=x.deltaX,A=x.deltaY,R=u.state,U=R.endX,W=R.endY,ne=u.props,re=ne.graphModel,de=ne.type,Oe=re.transformModel,Ce=re.editConfigModel,Ee=G_(Oe.moveCanvasPointByHtml([U,W],P,A),2),Ue=Ee[0],ke=Ee[1];u.setState({endX:Ue,endY:ke,dragging:!0});var Pe=u.props.edgeModel,Qe=sa({x:U,y:W},re);if(Qe&&Qe.node&&u.isAllowAdjust(Qe).pass){var yt,Et=Pe.startPoint,mt=Pe.endPoint,jt=Pe.sourceNode,Gt=Pe.targetNode;de===rr.SOURCE?yt={startPoint:{x:Qe.anchor.x,y:Qe.anchor.y},endPoint:{x:mt.x,y:mt.y},sourceNode:Qe.node,targetNode:Gt}:de===rr.TARGET&&(yt={startPoint:{x:Et.x,y:Et.y},endPoint:{x:Qe.anchor.x,y:Qe.anchor.y},sourceNode:jt,targetNode:Qe.node}),Pe.updateAfterAdjustStartAndEnd(yt)}else de===rr.SOURCE?Pe.updateStartPoint({x:Ue,y:ke}):de===rr.TARGET&&Pe.updateEndPoint({x:Ue,y:ke});Pe.text.value&&Ce.adjustEdge&&Pe.setText(Object.assign({},Pe.text,Pe.textPosition))}),jn(Sn(u),"onDragEnd",function(x){var P=x.event;try{var A;u.setState({dragging:!1});var R=u.props,U=R.graphModel,W=R.edgeModel,ne=R.type,re=u.state,de=re.endX,Oe=re.endY,Ce=re.dragging,Ee=sa({x:de,y:Oe},U);if(!Ce)return;var Ue,ke=!1;if(Ee&&Ee.node){var Pe=u.isAllowAdjust(Ee),Qe=Pe.pass,yt=Pe.msg,Et=Pe.newTargetNode;if(Qe){var mt,jt=W.getData();Ue=mr(mr({},jt),{},{sourceAnchorId:"",targetAnchorId:"",text:(jt==null||(mt=jt.text)===null||mt===void 0?void 0:mt.value)||""}),ne===rr.SOURCE?(Ue=mr(mr({},U.edgeGenerator(U.getNodeModelById(Ee.node.id).getData(),U.getNodeModelById(W.targetNodeId).getData(),Ue)),{},{sourceNodeId:Ee.node.id,sourceAnchorId:Ee.anchor.id,startPoint:{x:Ee.anchor.x,y:Ee.anchor.y},targetNodeId:W.targetNodeId,endPoint:mr({},W.endPoint)}),W.sourceNodeId===Ee.node.id&&W.sourceAnchorId===Ee.anchor.id&&(ke=!0)):ne===rr.TARGET&&(Ue=mr(mr({},U.edgeGenerator(U.getNodeModelById(W.sourceNodeId).getData(),U.getNodeModelById(Ee.node.id).getData(),Ue)),{},{sourceNodeId:W.sourceNodeId,startPoint:mr({},W.startPoint),targetNodeId:Ee.node.id,targetAnchorId:Ee.anchor.id,endPoint:{x:Ee.anchor.x,y:Ee.anchor.y}}),W.targetNodeId===Ee.node.id&&W.targetAnchorId===Ee.anchor.id&&(ke=!0))}else{ke=!0;var Gt=Et.getData();U.eventCenter.emit(tt.CONNECTION_NOT_ALLOWED,{data:Gt,msg:yt})}}else ke=!0;if(ke)u.recoveryEdge();else{var Wt=W.getData();U.deleteEdgeById(W.id);var fn=U.addEdge(mr({},Ue));U.eventCenter.emit(tt.EDGE_EXCHANGE_NODE,{data:{newEdge:fn.getData(),oldEdge:Wt}})}(A=u.preTargetNode)===null||A===void 0||A.setElementState(Ot.DEFAULT)}finally{u.props.graphModel.eventCenter.emit(tt.ADJUST_POINT_DRAGEND,{e:P,data:u.stepDragData})}}),jn(Sn(u),"recoveryEdge",function(){var x=u.props.edgeModel,P=u.oldEdge,A=P.startPoint,R=P.endPoint,U=P.pointsList;x.updateStartPoint(A),x.updateEndPoint(R),x.modelType!==dt.LINE_EDGE&&(x.pointsList=U,x.initPoints())}),jn(Sn(u),"getAdjustPointStyle",function(){var x=u.props,P=x.graphModel.theme;return x.edgeModel,P.edgeAdjust}),u.state={dragging:!1,endX:0,endY:0},u.targetRuleResults=new Map,u.sourceRuleResults=new Map;var p=i.type,h=i.edgeModel,_=i.graphModel.eventCenter;return u.stepDragData={type:p,edgeData:h.getData()},u.stepDrag=new dr({onDragStart:u.onDragStart,onDragging:u.onDragging,onDragEnd:u.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:_,data:u.stepDragData}),u}return t=a,(n=[{key:"isAllowAdjust",value:function(i){var u=this.props,p=u.edgeModel,h=p.id,_=p.sourceNode,x=p.targetNode,P=p.sourceAnchorId,A=p.targetAnchorId,R=u.type,U=null,W=null,ne=null,re=null;if(R===rr.SOURCE?(U=i.node,W=x,ne=i.anchor,re=x.getAnchorInfo(A)):(U=_,W=i.node,re=i.anchor,ne=_.getAnchorInfo(P)),this.preTargetNode&&this.preTargetNode!==i.node&&this.preTargetNode.setElementState(Ot.DEFAULT),this.preTargetNode=i.node,re.id===ne.id)return{pass:!1,msg:"",newTargetNode:W};var de="".concat(U.id,"_").concat(W.id,"_").concat(ne.id,"_").concat(re.id);if(!this.targetRuleResults.has(de)){var Oe=U.isAllowConnectedAsSource(W,ne,re,h),Ce=W.isAllowConnectedAsTarget(U,ne,re,h);this.sourceRuleResults.set(de,ei(Oe)),this.targetRuleResults.set(de,ei(Ce))}var Ee=this.sourceRuleResults.get(de),Ue=Ee.isAllPass,ke=Ee.msg,Pe=this.targetRuleResults.get(de),Qe=Pe.isAllPass,yt=Pe.msg,Et=Ue&&Qe?Ot.ALLOW_CONNECT:Ot.NOT_ALLOW_CONNECT;return R===rr.SOURCE?U.setElementState(Et):W.setElementState(Et),{pass:Ue&&Qe,msg:yt||ke,newTargetNode:W}}},{key:"render",value:function(){var i=this.props,u=i.x,p=i.y,h=i.getAdjustPointShape,_=i.edgeModel,x=this.state.dragging;return Object(ee.g)("g",{pointerEvents:x?"none":"",onMouseDown:this.handleMouseDown},x?"":h(u,p,_))}}])&&H_(t.prototype,n),a}(ee.a);function xl(e){return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function hi(){return hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hi.apply(this,arguments)}function U_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ay(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ay(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ay(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function El(e,t){return El=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},El(e,t)}function W_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=nu(e);if(t){var a=nu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $_(this,n)}}function $_(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gn(e)}function Gn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nu(e){return nu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nu(e)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yi=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&El(i,u)})(a,e);var t,n,r=W_(a);function a(){var i;Y_(this,a);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return or(Gn(i=r.call.apply(r,[this].concat(p))),"startTime",void 0),or(Gn(i),"contextMenuTime",void 0),or(Gn(i),"clickTimer",void 0),or(Gn(i),"textRef",Object(ee.f)()),or(Gn(i),"handleHover",function(_,x){var P=i.props,A=P.model,R=P.graphModel.eventCenter;A.setHovered(_);var U=_?tt.EDGE_MOUSEENTER:tt.EDGE_MOUSELEAVE,W=A.getData();R.emit(U,{data:W,e:x})}),or(Gn(i),"setHoverON",function(_){i.props.model.isHovered||(i.textRef&&i.textRef.current&&i.textRef.current.setHoverON(),i.handleHover(!0,_))}),or(Gn(i),"setHoverOFF",function(_){i.props.model.isHovered&&(i.textRef&&i.textRef.current&&i.textRef.current.setHoverOFF(),i.handleHover(!1,_))}),or(Gn(i),"handleContextMenu",function(_){_.preventDefault(),i.contextMenuTime=new Date().getTime(),i.clickTimer&&clearTimeout(i.clickTimer);var x=i.props,P=x.model,A=x.graphModel,R=A.getPointByClient({x:_.clientX,y:_.clientY});A.setElementStateById(P.id,Ot.SHOW_MENU,R.domOverlayPosition),i.toFront(),P.isSelected||A.selectEdgeById(P.id);var U=P==null?void 0:P.getData();A.eventCenter.emit(tt.EDGE_CONTEXTMENU,{data:U,e:_,position:R})}),or(Gn(i),"handleMouseDown",function(_){_.stopPropagation(),i.startTime=new Date().getTime()}),or(Gn(i),"handleMouseUp",function(_){if(i.startTime&&!(new Date().getTime()-i.startTime>200||_.button===2)){var x=_.detail===2,P=i.props,A=P.model,R=P.graphModel,U=A==null?void 0:A.getData(),W=R.getPointByClient({x:_.clientX,y:_.clientY});if(x){var ne=R.editConfigModel,re=R.textEditElement;if(re&&re.id===A.id&&R.setElementStateById(A.id,Ot.DEFAULT),ne.edgeTextEdit&&A.text.editable&&R.setElementStateById(A.id,Ot.TEXT_EDIT),A.modelType===dt.POLYLINE_EDGE){var de=A,Oe=R.getPointByClient({x:_.x,y:_.y}).canvasOverlayPosition,Ce=Oe.x,Ee=Oe.y,Ue=ld({x:Ce,y:Ee},de.points);de.dbClickPosition=Ue}R.eventCenter.emit(tt.EDGE_DBCLICK,{data:U,e:_,position:W})}else R.eventCenter.emit(tt.ELEMENT_CLICK,{data:U,e:_,position:W}),R.eventCenter.emit(tt.EDGE_CLICK,{data:U,e:_,position:W});var ke=R.editConfigModel;R.selectEdgeById(A.id,lp(_,ke)),i.toFront()}}),i}return t=a,(n=[{key:"getShape",value:function(){return Object(ee.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var i=this.props,u=i.model,p=i.graphModel;if(u.state===Ot.TEXT_EDIT)return null;var h=!1,_=p.editConfigModel;return(u.text.draggable||_.edgeTextDraggable)&&(h=!0),Object(ee.g)(B_,{ref:this.textRef,editable:_.edgeTextEdit&&u.text.editable,model:u,graphModel:p,draggable:h})}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=i.startPoint,p=i.endPoint,h=i.isSelected;return{start:u,end:p,hover:this.state.hover,isSelected:h}}},{key:"getLastTwoPoints",value:function(){var i=this.props.model;return[i.startPoint,i.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var i=this.props.model,u=i.id,p=i.getArrowStyle(),h=p.refY,_=h===void 0?0:h,x=p.refX,P=x===void 0?2:x,A=U_(this.getLastTwoPoints(),2),R=A[0],U=A[1],W="auto";return R!==null&&U!==null&&(W=Gb({x:U.x-R.x,y:U.y-R.y,z:0})*(180/Math.PI)),Object(ee.g)("g",null,Object(ee.g)("defs",null,Object(ee.g)("marker",{id:"marker-start-".concat(u),refX:-P,refY:_,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(ee.g)("marker",{id:"marker-end-".concat(u),refX:P,refY:_,overflow:"visible",orient:W,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var i=this.props.model.getArrowStyle();return i.stroke,i.strokeWidth,i.offset,i.verticalLength,Object(ee.g)("path",null)}},{key:"getEndArrow",value:function(){var i=this.props.model.getArrowStyle(),u=i.stroke,p=i.strokeWidth,h=i.offset,_=i.verticalLength;return Object(ee.g)("path",{stroke:u,fill:u,strokeWidth:p,transform:"rotate(180)",d:"M 0 0 L ".concat(h," -").concat(_," L ").concat(h," ").concat(_," Z")})}},{key:"getAdjustPointShape",value:function(i,u,p){var h=p.getAdjustPointStyle();return Object(ee.g)(ui,hi({className:"lf-edge-adjust-point"},h,{x:i,y:u}))}},{key:"getAdjustPoints",value:function(){var i=this.props,u=i.model,p=i.graphModel,h=u.getAdjustStart(),_=u.getAdjustEnd();return Object(ee.g)("g",null,Object(ee.g)(My,hi({type:"SOURCE"},h,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})),Object(ee.g)(My,hi({type:"TARGET"},_,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:u,graphModel:p})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(ee.g)("g",null)}},{key:"getAppend",value:function(){return Object(ee.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var i=this.props,u=i.graphModel,p=i.model;u.overlapMode!==xn.INCREASE&&u.toFront(p.id)}},{key:"render",value:function(){var i=this.props,u=i.model,p=u.isSelected,h=u.isHitable,_=u.isShowAdjustPoint;return i.graphModel.animation,Object(ee.g)("g",null,Object(ee.g)("g",{className:["lf-edge",!h&&"pointer-none",p&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),_&&p?this.getAdjustPoints():"")}}])&&V_(t.prototype,n),a}(ee.a);function Sl(e){return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}function K_(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return ky(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ky(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ky(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vi=function(e){var t={d:""};return Object.entries(e).forEach(function(n){var r=K_(n,2),a=r[0],i=r[1],u=Sl(i);a!=="style"&&u==="object"||(t[a]=i)}),Object(ee.g)("path",t)};function jl(e){return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function Pl(){return Pl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pl.apply(this,arguments)}function q_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ml(e,t){return Ml=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ml(e,t)}function J_(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=ru(e);if(t){var a=ru(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Q_(this,n)}}function Q_(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function ru(e){return ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ru(e)}var Al=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ml(i,u)})(a,e);var t,n,r=J_(a);function a(){return q_(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.startPoint,p=i.endPoint,h=i.isAnimation,_=i.arrowConfig,x=i.getEdgeStyle(),P=i.getEdgeAnimationStyle(),A=P.strokeDasharray,R=P.stroke,U=P.strokeDashoffset,W=P.animationName,ne=P.animationDuration,re=P.animationIterationCount,de=P.animationTimingFunction,Oe=P.animationDirection;return Object(ee.g)(_o,Pl({},x,{x1:u.x,y1:u.y,x2:p.x,y2:p.y},_,h?{strokeDasharray:A,stroke:R,style:{strokeDashoffset:U,animationName:W,animationDuration:ne,animationIterationCount:re,animationTimingFunction:de,animationDirection:Oe}}:{}))}},{key:"getAppendWidth",value:function(){var i=this.props.model,u=function(A){var R,U=A.start,W=A.end;if(U.x===W.x&&U.y===W.y)R="";else{var ne={start:U,end:W,offset:10,verticalLength:5},re=ri(ca(ca({},ne),{},{type:"start"})),de=ri(ca(ca({},ne),{},{type:"end"}));R="M".concat(re.leftX," ").concat(re.leftY,` 
    L`).concat(re.rightX," ").concat(re.rightY,` 
    L`).concat(de.rightX," ").concat(de.rightY,`
    L`).concat(de.leftX," ").concat(de.leftY," z")}return{d:R,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}({start:i.startPoint,end:i.endPoint}),p=u.d,h=u.strokeWidth,_=u.fill,x=u.strokeDasharray,P=u.stroke;return Object(ee.g)(vi,{d:p,fill:_,strokeWidth:h,stroke:P,strokeDasharray:x})}}])&&Z_(t.prototype,n),a}(yi);function kl(e){return kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(e)}function eO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ty(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ty(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ty(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tO=function(e){var t={points:"",fill:"none"};return Object.entries(e).forEach(function(n){var r=eO(n,2),a=r[0],i=r[1];(a==="style"||kl(i)!=="object")&&(t[a]=i)}),Object(ee.g)("polyline",t)};function Tl(e){return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function Dy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dy(Object(n),!0).forEach(function(r){Or(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dl(){return Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dl.apply(this,arguments)}function nO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Ny(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ny(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ny(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nl(e,t){return Nl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Nl(e,t)}function oO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=iu(e);if(t){var a=iu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return iO(this,n)}}function iO(e,t){if(t&&(Tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _r(e)}function _r(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iu(e){return iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iu(e)}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Nl(i,u)})(a,e);var t,n,r=oO(a);function a(){var i;return function(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,a),Or(_r(i=r.call(this)),"drag",void 0),Or(_r(i),"isDragging",void 0),Or(_r(i),"isShowAdjustPointTemp",void 0),Or(_r(i),"appendInfo",void 0),Or(_r(i),"onDragStart",function(){var u=i.props.model;u.dragAppendStart(),i.isShowAdjustPointTemp=u.isShowAdjustPoint,u.isShowAdjustPoint=!1}),Or(_r(i),"onDragging",function(u){var p=u.deltaX,h=u.deltaY,_=i.props,x=_.model,P=_.graphModel;i.isDragging=!0;var A=P.transformModel,R=P.editConfigModel,U=nO(A.fixDeltaXY(p,h),2),W=U[0],ne=U[1],re=x,de=R.adjustEdgeMiddle;i.appendInfo=de?re.dragAppendSimple(i.appendInfo,{x:W,y:ne}):re.dragAppend(i.appendInfo,{x:W,y:ne})}),Or(_r(i),"onDragEnd",function(){var u=i.props,p=u.model,h=u.graphModel.eventCenter,_=p;_.dragAppendEnd(),i.isDragging=!1,_.isShowAdjustPoint=i.isShowAdjustPointTemp,i.appendInfo=void 0,h.emit(tt.EDGE_ADJUST,{data:_.getData()})}),Or(_r(i),"beforeDragStart",function(u,p){p.dragAble&&i.drag.handleMouseDown(u),i.appendInfo=p}),i.drag=new dr({onDragStart:i.onDragStart,onDragging:i.onDragging,onDragEnd:i.onDragEnd,isStopPropagation:!1}),i}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.points,p=i.isAnimation,h=i.arrowConfig,_=i.getEdgeStyle(),x=i.getEdgeAnimationStyle(),P=x.strokeDasharray,A=x.stroke,R=x.strokeDashoffset,U=x.animationName,W=x.animationDuration,ne=x.animationIterationCount,re=x.animationTimingFunction,de=x.animationDirection;return Object(ee.g)(tO,Dl({points:u},_,h,p?{strokeDasharray:P,stroke:A,style:{strokeDashoffset:R,animationName:U,animationDuration:W,animationIterationCount:ne,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=i.points,p=i.isSelected,h={start:null,end:null,hover:this.state.hover,isSelected:p},_=Jr(u);return _.length>=2&&(h.start=_[_.length-2],h.end=_[_.length-1]),h}},{key:"getLastTwoPoints",value:function(){var i=this.props.model.points,u=Jr(i);return u.length>=2?[u[u.length-2],u[u.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(i){var u,p=i.start,h=i.end;if(p.x===h.x&&p.y===h.y)u="";else{var _={start:p,end:h,offset:10,verticalLength:5},x=ri(ou(ou({},_),{},{type:"start"})),P=ri(ou(ou({},_),{},{type:"end"}));u="M".concat(x.leftX," ").concat(x.leftY,` 
      L`).concat(x.rightX," ").concat(x.rightY,` 
      L`).concat(P.rightX," ").concat(P.rightY,`
      L`).concat(P.leftX," ").concat(P.leftY," z")}return{d:u,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(i){var u=this.getAppendAttributes(i),p=u.d,h=u.strokeWidth,_=u.fill,x=u.strokeDasharray,P=u.stroke;return Object(ee.g)(vi,{d:p,fill:_,strokeWidth:h,stroke:P,strokeDasharray:x})}},{key:"getAppendWidth",value:function(){for(var i=this,u=this.props,p=u.model,h=u.graphModel,_=p.pointsList,x=p.draggable,P=[],A=_.length,R=function(W){var ne="lf-polyline-append",re={start:{x:_[W].x,y:_[W].y},end:{x:_[W+1].x,y:_[W+1].y},startIndex:W,endIndex:W+1,direction:"",dragAble:!0},de=Object(ee.g)("g",{className:ne},i.getAppendShape(re)),Oe=h.editConfigModel,Ce=Oe.adjustEdge,Ee=Oe.adjustEdgeMiddle;if(Ce&&x){var Ue=re.startIndex,ke=re.endIndex,Pe=Ee&&(Ue===0||ke===A-1);re.dragAble=!Pe,re.start.x===re.end.x?(re.dragAble&&(ne+="-ew-resize"),re.direction=kt.VERTICAL):re.start.y===re.end.y&&(re.dragAble&&(ne+="-ns-resize"),re.direction=kt.HORIZONTAL),de=Object(ee.g)("g",{className:i.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Qe){return i.beforeDragStart(Qe,re)}},Object(ee.g)("g",{className:ne},i.getAppendShape(re)))}P.push(de)},U=0;U<A-1;U++)R(U);return Object(ee.g)("g",null,P)}}])&&rO(t.prototype,n),a}(yi);function Rl(e){return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function aO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Cy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Il(){return Il=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Il.apply(this,arguments)}function uO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ll(e,t){return Ll=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Ll(e,t)}function cO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=au(e);if(t){var a=au(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return lO(this,n)}}function lO(e,t){if(t&&(Rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function au(e){return au=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},au(e)}var zl=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Ll(i,u)})(a,e);var t,n,r=cO(a);function a(){return uO(this,a),r.apply(this,arguments)}return t=a,(n=[{key:"getEdge",value:function(){var i=this.props.model,u=i.getEdgeStyle(),p=i.path,h=i.isAnimation,_=i.arrowConfig,x=i.getEdgeAnimationStyle(),P=x.strokeDasharray,A=x.stroke,R=x.strokeDashoffset,U=x.animationName,W=x.animationDuration,ne=x.animationIterationCount,re=x.animationTimingFunction,de=x.animationDirection;return Object(ee.g)(vi,Il({d:p},u,_,h?{strokeDasharray:P,stroke:A,style:{strokeDashoffset:R,animationName:U,animationDuration:W,animationIterationCount:ne,animationTimingFunction:re,animationDirection:de}}:{}))}},{key:"getAppendWidth",value:function(){var i=this.props.model.path;return Object(ee.g)(vi,{d:i,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var i=this.props.model,u=this.state.hover,p=i,h=p.path,_=p.isSelected,x=aO(cd(h),2);return{start:x[0],end:x[1],hover:u,isSelected:_}}},{key:"getLastTwoPoints",value:function(){var i=this.props.model.path;return cd(i)}}])&&sO(t.prototype,n),a}(yi);function Bl(e){return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gl(e,t){return Gl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Gl(e,t)}function hO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=uu(e);if(t){var a=uu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yO(this,n)}}function yO(e,t){if(t&&(Bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(e)}function uu(e){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},uu(e)}var vO=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Gl(i,u)})(a,e);var t,n,r=hO(a);function a(){return pO(this,a),r.apply(this,arguments)}return t=a,n=[{key:"getArrowAttributes",value:function(){var i=this.props,u=i.arrowInfo,p=i.style,h=u.start,_=u.end,x={start:h,end:_,offset:p.offset,verticalLength:p.verticalLength,type:"end"},P=ri(x),A=P.leftX,R=P.leftY,U=P.rightX,W=P.rightY;return function(ne){for(var re=1;re<arguments.length;re++){var de=arguments[re]!=null?arguments[re]:{};re%2?Ry(Object(de),!0).forEach(function(Oe){fO(ne,Oe,de[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ne,Object.getOwnPropertyDescriptors(de)):Ry(Object(de)).forEach(function(Oe){Object.defineProperty(ne,Oe,Object.getOwnPropertyDescriptor(de,Oe))})}return ne}({d:"M".concat(A," ").concat(R," L").concat(_.x," ").concat(_.y," L").concat(U," ").concat(W," z")},p)}},{key:"getShape",value:function(){var i=this.getArrowAttributes(),u=i.d,p=i.strokeWidth,h=i.stroke,_=i.fill;return Object(ee.g)(vi,{d:u,fill:_,strokeWidth:p,stroke:h})}},{key:"render",value:function(){return Object(ee.g)("g",{className:"lf-arrow"},this.getShape())}}],n&&dO(t.prototype,n),a}(ee.a),Iy=function(e,t){return pe(e,t)},gO=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},Hl=function(){return Fe.a.Date.now()},bO=/\s/,mO=function(e){for(var t=e.length;t--&&bO.test(e.charAt(t)););return t},_O=/^\s+/,OO=function(e){return e&&e.slice(0,mO(e)+1).replace(_O,"")},wO=/^[-+]0x[0-9a-f]+$/i,xO=/^0b[01]+$/i,EO=/^0o[0-7]+$/i,SO=parseInt,Ly=function(e){if(typeof e=="number")return e;if(ct(e))return NaN;if(Tt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=OO(e);var n=xO.test(e);return n||EO.test(e)?SO(e.slice(2),n?2:8):wO.test(e)?NaN:+e},jO=Math.max,PO=Math.min,MO=function(e,t,n){var r,a,i,u,p,h,_=0,x=!1,P=!1,A=!0;if(typeof e!="function")throw new TypeError("Expected a function");function R(Oe){var Ce=r,Ee=a;return r=a=void 0,_=Oe,u=e.apply(Ee,Ce)}function U(Oe){return _=Oe,p=setTimeout(ne,t),x?R(Oe):u}function W(Oe){var Ce=Oe-h;return h===void 0||Ce>=t||Ce<0||P&&Oe-_>=i}function ne(){var Oe=Hl();if(W(Oe))return re(Oe);p=setTimeout(ne,function(Ce){var Ee=t-(Ce-h);return P?PO(Ee,i-(Ce-_)):Ee}(Oe))}function re(Oe){return p=void 0,A&&r?R(Oe):(r=a=void 0,u)}function de(){var Oe=Hl(),Ce=W(Oe);if(r=arguments,a=this,h=Oe,Ce){if(p===void 0)return U(h);if(P)return clearTimeout(p),p=setTimeout(ne,t),R(h)}return p===void 0&&(p=setTimeout(ne,t)),u}return t=Ly(t)||0,Tt(n)&&(x=!!n.leading,i=(P="maxWait"in n)?jO(Ly(n.maxWait)||0,t):i,A="trailing"in n?!!n.trailing:A),de.cancel=function(){p!==void 0&&clearTimeout(p),_=0,r=h=a=p=void 0},de.flush=function(){return p===void 0?u:re(Hl())},de},AO=o(167);function kO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zy,By,Gy,TO=function(){function e(r){(function(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")})(this,e),zr(this,"undos",[]),zr(this,"redos",[]),zr(this,"callbacks",[]),zr(this,"stopWatch",null),zr(this,"curData",null),zr(this,"maxSize",50),zr(this,"waitTime",100),zr(this,"eventCenter",void 0),this.eventCenter=r}var t,n;return t=e,(n=[{key:"add",value:function(r){Iy(gO(this.undos),r)||(this.undos.push(r),Iy(this.curData,r)||(this.redos=[]),this.eventCenter.emit(tt.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var r=this.undos.pop();this.redos.push(r);var a=this.undos.pop();return this.curData=Dt(a),a}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var r=this.redos.pop();return this.curData=Dt(r),r}}},{key:"watch",value:function(r){var a=this;this.stopWatch&&this.stopWatch(),this.undos.push(r.modelToGraphData()),this.stopWatch=Object(AO.a)(r,MO(function(){var i=r.modelToHistoryData();i&&a.add(i)},this.waitTime))}}])&&kO(t.prototype,n),e}();function Xl(e){return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xl(e)}function DO(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||function(n,r){if(n){if(typeof n=="string")return Hy(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Hy(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Hy(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xy(Object(n),!0).forEach(function(r){to(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fl(e,t){return Fl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Fl(e,t)}function NO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=su(e);if(t){var a=su(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return CO(this,n)}}function CO(e,t){if(t&&(Xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Do(e)}function Do(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function su(e){return su=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},su(e)}function to(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uy,Yy,Vy,Ul=Hn((Gy=By=function(e){(function(u,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(p&&p.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),p&&Fl(u,p)})(i,e);var t,n,r,a=NO(i);function i(){var u;return function(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}(this,i),to(Do(u=a.call(this)),"ref",Object(ee.f)()),to(Do(u),"__prevText",{type:"",text:"",id:""}),to(Do(u),"keyupHandler",function(p){var h=u.props.graphModel.textEditElement;p.key==="Enter"&&p.altKey&&h.setElementState(0)}),to(Do(u),"inputHandler",function(p){var h=p.target.innerText,_=u.props.graphModel.textEditElement;u.__prevText={type:_.type,text:h.replace(/(\r\n)+$|(\n)+$/,""),id:_.id}}),to(Do(u),"keydownHandler",function(p){p.stopPropagation()}),u.state={style:{left:0,top:0}},u}return t=i,r=[{key:"getDerivedStateFromProps",value:function(u){var p,h=u.graphModel,_=h.transformModel,x=h.theme,P=h.textEditElement;if(P){var A;if((A=P.text)===null||A===void 0||!A.value)if(P.BaseType===Xt.EDGE){var R=(P=P).text,U=P.textPosition,W=U.x,ne=U.y;R.x=W,R.y=ne,P.setText(R)}else P=P;var re={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(P.BaseType===Xt.EDGE){var de=x.edgeText,Oe=de.overflowMode,Ce=de.lineHeight,Ee=de.wrapPadding,Ue=de.textWidth;Ue&&Oe==="autoWrap"&&(p=To(To({},re),{},{width:Ue,minWidth:Ue,lineHeight:Ce,padding:Ee}))}else if(P.BaseType===Xt.NODE){var ke=x.nodeText,Pe=ke.overflowMode,Qe=ke.lineHeight,yt=ke.wrapPadding,Et=ke.textWidth,mt=P,jt=mt.width,Gt=mt.modelType;(Gt!==dt.TEXT_NODE&&Pe==="autoWrap"||Gt===dt.TEXT_NODE&&Et)&&(p=To(To({},re),{},{width:Et||jt,minWidth:Et||jt,lineHeight:Qe,padding:yt}))}var Wt=P.text,fn=Wt.x,ir=Wt.y,Rn=DO(_.CanvasPointToHtmlPoint([fn,ir]),2);return{style:To({left:Rn[0],top:Rn[1]},p)}}}}],(n=[{key:"componentDidUpdate",value:function(){var u=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var p=this.__prevText,h=p.text,_=p.id;u.updateText(_,h),u.eventCenter.emit(tt.TEXT_UPDATE,To({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(u){if(window.getSelection!==void 0&&document.createRange!==void 0){var p=document.createRange();p.selectNodeContents(u),p.collapse(!1);var h=window.getSelection();h.removeAllRanges(),h.addRange(p)}}},{key:"render",value:function(){var u,p=this.props.graphModel.textEditElement,h=this.state.style;return p?Object(ee.g)("div",{contentEditable:!0,className:"lf-text-input",style:h,ref:this.ref,key:p.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(u=p.text)===null||u===void 0?void 0:u.value):null}}])&&Fy(t.prototype,n),r&&Fy(t,r),i}(ee.a),to(By,"toolName","textEdit"),zy=Gy))||zy,RO=function(e){return e.modelType===dt.LINE_EDGE?function(t){var n=t.startPoint,r=t.endPoint,a=(n.x+r.x)/2,i=(n.y+r.y)/2,u=Math.abs(n.x-r.x)+10,p=Math.abs(n.y-r.y)+10;return{x:a-u/2,y:i-p/2,x1:a+u/2,y1:i+p/2}}(e):e.modelType===dt.POLYLINE_EDGE?function(t){var n=t.points,r=Jr(n),a=oi(r,8),i=a.x,u=a.y,p=a.width,h=a.height;return{x:i-p/2,y:u-h/2,x1:i+p/2,y1:u+h/2}}(e):e.modelType===dt.BEZIER_EDGE?function(t){var n=t.path,r=va(n),a=oi(r,8),i=a.x,u=a.y,p=a.width,h=a.height;return{x:i-p/2,y:u-h/2,x1:i+p/2,y1:u+h/2}}(e):void 0};function Yl(e){return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}function Wy(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var i,u,p=[],h=!0,_=!1;try{for(a=a.call(n);!(h=(i=a.next()).done)&&(p.push(i.value),!r||p.length!==r);h=!0);}catch(x){_=!0,u=x}finally{try{h||a.return==null||a.return()}finally{if(_)throw u}}return p}}(e,t)||$y(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function IO(e){return function(t){if(Array.isArray(t))return Vl(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||$y(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function $y(e,t){if(e){if(typeof e=="string")return Vl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vl(e,t):void 0}}function Vl(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t){return Wl=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},Wl(e,t)}function zO(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=cu(e);if(t){var a=cu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return BO(this,n)}}function BO(e,t){if(t&&(Yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gi(e)}function gi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cu(e){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cu(e)}function bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $l=Hn((Vy=Yy=function(e){(function(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),u&&Wl(i,u)})(a,e);var t,n,r=zO(a);function a(i){var u;(function(x,P){if(!(x instanceof P))throw new TypeError("Cannot call a class as a function")})(this,a),bi(gi(u=r.call(this)),"stepDrag",void 0),bi(gi(u),"handleMouseDown",function(x){u.stepDrag.handleMouseDown(x)}),bi(gi(u),"onDragging",function(x){var P=x.deltaX,A=x.deltaY,R=u.props.graphModel,U=R.getSelectElements(!0);R.moveNodes(U.nodes.map(function(W){return W.id}),P,A)}),bi(gi(u),"handleContextMenu",function(x){x.preventDefault();var P=u.props,A=P.graphModel,R=P.graphModel,U=R.eventCenter,W=R.selectElements,ne=A.getPointByClient({x:x.clientX,y:x.clientY}),re={nodes:[],edges:[]};IO(W.values()).forEach(function(de){de.BaseType===Xt.NODE&&re.nodes.push(de.getData()),de.BaseType===Xt.EDGE&&re.edges.push(de.getData())}),U.emit(tt.SELECTION_CONTEXTMENU,{data:re,e:x,position:ne})});var p=i.graphModel,h=p.gridSize,_=p.eventCenter;return u.stepDrag=new dr({onDragging:u.onDragging,step:h,eventType:"SELECTION",eventCenter:_}),u}return t=a,(n=[{key:"render",value:function(){var i=this.props.graphModel,u=i.selectElements,p=i.transformModel;if(!(u.size<=1)){var h=Number.MAX_SAFE_INTEGER,_=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER;u.forEach(function(W){var ne={x:0,y:0,x1:0,y1:0};W.BaseType===Xt.NODE&&(ne=function(re){var de=re.x,Oe=re.y,Ce=re.width,Ee=re.height;return{x:de-Ce/2,y:Oe-Ee/2,x1:de+Ce/2,y1:Oe+Ee/2}}(W)),W.BaseType===Xt.EDGE&&(ne=RO(W)),h=Math.min(h,ne.x),_=Math.min(_,ne.y),x=Math.max(x,ne.x1),P=Math.max(P,ne.y1)});var A=Wy(p.CanvasPointToHtmlPoint([h,_]),2);h=A[0],_=A[1];var R=Wy(p.CanvasPointToHtmlPoint([x,P]),2);x=R[0],P=R[1];var U={left:"".concat(h-10,"px"),top:"".concat(_-10,"px"),width:"".concat(x-h+20,"px"),height:"".concat(P-_+20,"px")};return Object(ee.g)("div",{className:"lf-multiple-select",style:U,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}])&&LO(t.prototype,n),a}(ee.a),bi(Yy,"toolName","multipleSelect"),Uy=Vy))||Uy;function GO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HO=function(){function e(r){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),lu(this,"tools",void 0),lu(this,"components",void 0),lu(this,"toolMap",new Map),lu(this,"instance",void 0),this.instance=r,this.isDisabledTool(Ul.toolName)||this.registerTool(Ul.toolName,Ul),this.isDisabledTool($l.toolName)||this.registerTool($l.toolName,$l);var a=r.graphModel;a.eventCenter.on("".concat(tt.GRAPH_TRANSFORM,",").concat(tt.NODE_CLICK,",").concat(tt.BLANK_CLICK," "),function(){var i=a.textEditElement,u=a.editConfigModel,p=u.edgeTextEdit,h=u.nodeTextEdit;(p||h)&&i&&a.textEditElement.setElementState(Ot.DEFAULT)})}var t,n;return t=e,(n=[{key:"isDisabledTool",value:function(r){return this.instance.options.disabledTools.indexOf(r)!==-1}},{key:"registerTool",value:function(r,a){this.toolMap.set(r,a)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&GO(t.prototype,n),e}(),XO=o(168),FO=o.n(XO);function UO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ky=function(){function e(r){(function(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")})(this,e),Kl(this,"mousetrap",void 0),Kl(this,"options",void 0),Kl(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var a=r.lf;this.target=a.container,this.mousetrap=new FO.a(this.target),r.keyboard.enabled&&this.enable(!0)}var t,n;return t=e,(n=[{key:"initShortcuts",value:function(){var r=this,a=this.options.keyboard.shortcuts;if(a)if(Zt(a))a.forEach(function(h){var _=h.keys,x=h.callback,P=h.action;return r.on(_,x,P)});else{var i=a.keys,u=a.callback,p=a.action;this.on(i,u,p)}}},{key:"on",value:function(r,a,i){this.mousetrap.bind(this.getKeys(r),a,i)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(r,a){this.mousetrap.unbind(this.getKeys(r),a)}},{key:"enable",value:function(r){(this.disabled||r)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(r){var a=this;return(Array.isArray(r)?r:[r]).map(function(i){return a.formatKey(i)})}},{key:"formatKey",value:function(r){return r.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&UO(t.prototype,n),e}(),YO=Ky,wr=null;function qy(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function Zy(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(n){n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}function ql(e){return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}function Jy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jy(Object(n),!0).forEach(function(r){Bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jy(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zl=function(){function e(a){var i,u,p=this;(function(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")})(this,e),Bt(this,"container",void 0),Bt(this,"width",void 0),Bt(this,"height",void 0),Bt(this,"graphModel",void 0),Bt(this,"history",void 0),Bt(this,"viewMap",new Map),Bt(this,"tool",void 0),Bt(this,"keyboard",void 0),Bt(this,"dnd",void 0),Bt(this,"options",void 0),Bt(this,"snaplineModel",void 0),Bt(this,"components",[]),Bt(this,"plugins",void 0),Bt(this,"extension",{}),Bt(this,"adapterIn",void 0),Bt(this,"adapterOut",void 0),Bt(this,"getView",function(h){return p.viewMap.get(h)}),a=Qd(a),this.options=a,this.container=this.initContainer(a.container),this.plugins=a.plugins,this.graphModel=new Jb(mi({},a)),this.tool=new HO(this),this.history=new TO(this.graphModel.eventCenter),this.dnd=new $m({lf:this}),this.keyboard=new YO({lf:this,keyboard:a.keyboard}),a.snapline!==!1&&(this.snaplineModel=new cy(this.graphModel),i=this.graphModel.eventCenter,u=this.snaplineModel,i.on("node:mousemove",function(h){var _=h.data;u.setNodeSnapLine(_)}),i.on("node:mouseup",function(){u.clearSnapline()})),function(h,_){var x=h.keyboard,P=x.options.keyboard;x.on(["cmd + c","ctrl + c"],function(){if(!P.enabled||_.textEditElement)return!0;var A=h.options.guards,R=_.getSelectElements(!1);return A&&A.beforeClone&&!A.beforeClone(R)||R.nodes.length===0&&R.edges.length===0?(wr=null,!0):((wr=R).nodes.forEach(function(U){return qy(U,40)}),wr.edges.forEach(function(U){return Zy(U,40)}),!1)}),x.on(["cmd + v","ctrl + v"],function(){if(!P.enabled||_.textEditElement)return!0;if(wr&&(wr.nodes||wr.edges)){h.clearSelectElements();var A=h.addElements(wr);if(!A)return!0;A.nodes.forEach(function(R){return h.selectElementById(R.id,!0)}),A.edges.forEach(function(R){return h.selectElementById(R.id,!0)}),wr.nodes.forEach(function(R){return qy(R,40)}),wr.edges.forEach(function(R){return Zy(R,40)})}return!1}),x.on(["cmd + z","ctrl + z"],function(){return!P.enabled||!!_.textEditElement||(h.undo(),!1)}),x.on(["cmd + y","ctrl + y"],function(){return!P.enabled||!!_.textEditElement||(h.redo(),!1)}),x.on(["backspace"],function(){if(!P.enabled||_.textEditElement)return!0;var A=_.getSelectElements(!0);return h.clearSelectElements(),A.edges.forEach(function(R){return h.deleteEdge(R.id)}),A.nodes.forEach(function(R){return h.deleteNode(R.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(a.disabledPlugins)}var t,n,r;return t=e,n=[{key:"register",value:function(a,i){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof a=="string"){var p={BaseEdge:yi,BaseEdgeModel:fs,BaseNode:br,BaseNodeModel:gr,RectNode:Uc,RectNodeModel:Ec,CircleNode:$c,CircleNodeModel:ic,PolygonNode:Qc,PolygonNodeModel:_c,TextNode:fl,TextNodeModel:Mc,LineEdge:Al,LineEdgeModel:vs,DiamondNode:rl,DiamondNodeModel:lc,PolylineEdge:Cl,PolylineEdgeModel:_s,BezierEdge:zl,BezierEdgeModel:Qs,EllipseNode:sl,EllipseNodeModel:hc,HtmlNode:yl,HtmlNodeModel:Tc,h:ee.g,type:a};this.viewMap.forEach(function(A){var R=A.extendKey;R&&(p[R]=A)}),this.graphModel.modelMap.forEach(function(A){var R=A.extendKey;R&&(p[R]=A)});var h=i(p),_=h.view,x=h.model,P=_;u&&!P.isObervered&&(P.isObervered=!0,P=He(P)),this.setView(a,P),this.graphModel.setModel(a,x)}else this.registerElement(a)}},{key:"registerElement",value:function(a){var i=a.view;a.isObserverView===!1||i.isObervered||(i.isObervered=!0,i=He(i)),this.setView(a.type,i),this.graphModel.setModel(a.type,a.model)}},{key:"batchRegister",value:function(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(u){a.registerElement(u)})}},{key:"defaultRegister",value:function(){this.registerElement({view:Uc,model:Ec,type:"rect"}),this.registerElement({type:"circle",view:$c,model:ic}),this.registerElement({type:"polygon",view:Qc,model:_c}),this.registerElement({type:"line",view:Al,model:vs}),this.registerElement({type:"polyline",view:Cl,model:_s}),this.registerElement({type:"bezier",view:zl,model:Qs}),this.registerElement({type:"text",view:fl,model:Mc}),this.registerElement({type:"ellipse",view:sl,model:hc}),this.registerElement({type:"diamond",view:rl,model:lc}),this.registerElement({type:"html",view:yl,model:Tc})}},{key:"selectElementById",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(a,i),!i&&u&&this.graphModel.toFront(a)}},{key:"focusOn",value:function(a){var i=this.graphModel.transformModel,u=a.coordinate,p=a.id;if(!u){var h=this.getNodeModelById(p);h&&(u=h.getData());var _=this.getEdgeModelById(p);_&&(u=_.textPosition)}var x=u,P=x.x,A=x.y;i.focusOn(P,A,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(a){this.graphModel.setTheme(a)}},{key:"resize",value:function(a,i){this.graphModel.resize(a,i),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(a){this.graphModel.setDefaultEdgeType(a)}},{key:"updateText",value:function(a,i){this.graphModel.updateText(a,i)}},{key:"deleteElement",value:function(a){var i,u,p,h=this.getModelById(a);return!!h&&(u=(p=(Bt(i={},Xt.NODE,this.deleteNode),Bt(i,Xt.EDGE,this.deleteEdge),i)[h.BaseType])===null||p===void 0?void 0:p.call(this,a))!==null&&u!==void 0&&u}},{key:"getModelById",value:function(a){return this.graphModel.getElement(a)}},{key:"getDataById",value:function(a){var i;return(i=this.graphModel.getElement(a))===null||i===void 0?void 0:i.getData()}},{key:"changeNodeType",value:function(a,i){this.graphModel.changeNodeType(a,i)}},{key:"changeEdgeType",value:function(a,i){this.graphModel.changeEdgeType(a,i)}},{key:"getNodeEdges",value:function(a){return this.graphModel.getNodeEdges(a)}},{key:"addNode",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt.NODE_ADD,u=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(a,i,u)}},{key:"deleteNode",value:function(a){var i=this.graphModel.getNodeModelById(a);if(!i)return!1;var u=i.getData(),p=this.options.guards,h=!p||!p.beforeDelete||p.beforeDelete(u);return h&&this.graphModel.deleteNode(a),h}},{key:"cloneNode",value:function(a){var i=this.graphModel.getNodeModelById(a).getData(),u=this.options.guards;if(!u||!u.beforeClone||u.beforeClone(i))return this.graphModel.cloneNode(a)}},{key:"changeNodeId",value:function(a,i){return this.graphModel.changeNodeId(a,i)}},{key:"getNodeModelById",value:function(a){return this.graphModel.getNodeModelById(a)}},{key:"getNodeDataById",value:function(a){var i;return(i=this.graphModel.getNodeModelById(a))===null||i===void 0?void 0:i.getData()}},{key:"addEdge",value:function(a){return this.graphModel.addEdge(a)}},{key:"deleteEdge",value:function(a){var i=this.options.guards,u=this.graphModel.edgesMap[a];if(!u)return!1;var p=u.model.getData(),h=!i||!i.beforeDelete||i.beforeDelete(p);return h&&this.graphModel.deleteEdgeById(a),h}},{key:"deleteEdgeByNodeId",value:function(a){var i=a.sourceNodeId,u=a.targetNodeId;i&&u?this.graphModel.deleteEdgeBySourceAndTarget(i,u):i?this.graphModel.deleteEdgeBySource(i):u&&this.graphModel.deleteEdgeByTarget(u)}},{key:"changeEdgeId",value:function(a,i){return this.graphModel.changeEdgeId(a,i)}},{key:"getEdgeModelById",value:function(a){var i;return(i=this.graphModel.edgesMap[a])===null||i===void 0?void 0:i.model}},{key:"getEdgeModels",value:function(a){var i=this.graphModel.edges,u=a.sourceNodeId,p=a.targetNodeId;if(u&&p){var h=[];return i.forEach(function(P){P.sourceNodeId===u&&P.targetNodeId===p&&h.push(P)}),h}if(u){var _=[];return i.forEach(function(P){P.sourceNodeId===u&&_.push(P)}),_}if(p){var x=[];return i.forEach(function(P){P.targetNodeId===p&&x.push(P)}),x}return[]}},{key:"getEdgeDataById",value:function(a){var i;return(i=this.getEdgeModelById(a))===null||i===void 0?void 0:i.getData()}},{key:"getNodeIncomingEdge",value:function(a){return this.graphModel.getNodeIncomingEdge(a)}},{key:"getNodeOutgoingEdge",value:function(a){return this.graphModel.getNodeOutgoingEdge(a)}},{key:"getNodeIncomingNode",value:function(a){return this.graphModel.getNodeIncomingNode(a)}},{key:"getNodeOutgoingNode",value:function(a){return this.graphModel.getNodeOutgoingNode(a)}},{key:"editText",value:function(a){this.graphModel.editText(a)}},{key:"setProperties",value:function(a,i){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.setProperties(en(i))}},{key:"deleteProperty",value:function(a,i){var u;(u=this.graphModel.getElement(a))===null||u===void 0||u.deleteProperty(i)}},{key:"getProperties",value:function(a){var i;return(i=this.graphModel.getElement(a))===null||i===void 0?void 0:i.getProperties()}},{key:"toFront",value:function(a){this.graphModel.toFront(a)}},{key:"setElementZIndex",value:function(a,i){return this.graphModel.setElementZIndex(a,i)}},{key:"addElements",value:function(a){for(var i=this,u=a.nodes,p=a.edges,h={},_={nodes:[],edges:[]},x=0;x<u.length;x++){var P=u[x],A=P.id,R=this.addNode(P);if(!R)return;A&&(h[A]=R.id),_.nodes.push(R)}return p.forEach(function(U){var W=U.sourceNodeId,ne=U.targetNodeId;h[W]&&(W=h[W]),h[ne]&&(ne=h[ne]);var re=i.graphModel.addEdge(mi(mi({},U),{},{sourceNodeId:W,targetNodeId:ne}));_.edges.push(re)}),_}},{key:"getAreaElement",value:function(a,i){var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],p=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],h=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(a,i,u,p,h).map(function(_){return _.getData()})}},{key:"getSelectElements",value:function(){var a=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(a)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var a=this.graphModel.modelToGraphData();if(this.adapterOut){for(var i=arguments.length,u=new Array(i),p=0;p<i;p++)u[p]=arguments[p];return this.adapterOut.apply(this,[a].concat(u))}return a}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(a){this.graphModel.editConfigModel.updateEditConfig(a)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(a,i){return this.graphModel.getPointByClient({x:a,y:i})}},{key:"undo",value:function(){if(this.history.undoAble()){var a=en(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"redo",value:function(){if(this.history.redoAble()){var a=en(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(a)}}},{key:"zoom",value:function(a,i){return this.graphModel.transformModel.zoom(a,i)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(a){this.graphModel.transformModel.setZoomMiniSize(a)}},{key:"setZoomMaxSize",value:function(a){this.graphModel.transformModel.setZoomMaxSize(a)}},{key:"getTransform",value:function(){var a=this.graphModel.transformModel;return{SCALE_X:a.SCALE_X,SCALE_Y:a.SCALE_Y,TRANSLATE_X:a.TRANSLATE_X,TRANSLATE_Y:a.TRANSLATE_Y}}},{key:"translate",value:function(a,i){this.graphModel.transformModel.translate(a,i)}},{key:"resetTranslate",value:function(){var a=this.graphModel.transformModel,i=a.TRANSLATE_X,u=a.TRANSLATE_Y;this.translate(-i,-u)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(a,i){i===void 0&&(i=a),this.graphModel.fitView(a,i)}},{key:"openEdgeAnimation",value:function(a){this.graphModel.openEdgeAnimation(a)}},{key:"closeEdgeAnimation",value:function(a){this.graphModel.closeEdgeAnimation(a)}},{key:"on",value:function(a,i){this.graphModel.eventCenter.on(a,i)}},{key:"off",value:function(a,i){this.graphModel.eventCenter.off(a,i)}},{key:"once",value:function(a,i){this.graphModel.eventCenter.once(a,i)}},{key:"emit",value:function(a,i){this.graphModel.eventCenter.emit(a,i)}},{key:"initContainer",value:function(a){var i=document.createElement("div");return i.style.position="relative",i.style.width="100%",i.style.height="100%",a.innerHTML="",a.appendChild(i),i}},{key:"installPlugins",value:function(){var a,i=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],p=(a=this.plugins)!==null&&a!==void 0?a:e.extensions;p.forEach(function(h){var _=h.pluginName||h.name;u.indexOf(_)===-1&&i.installPlugin(h)})}},{key:"installPlugin",value:function(a){if(ql(a)==="object"){var i=a.install,u=a.render;return i&&i.call(a,this,e),u&&this.components.push(u.bind(a)),void(this.extension[a.pluginName]=a)}var p=a,h=new p({lf:this,LogicFlow:e,options:this.options.pluginsOptions});h.render&&this.components.push(h.render.bind(h)),this.extension[p.pluginName]=h}},{key:"updateAttributes",value:function(a,i){this.graphModel.updateAttributes(a,i)}},{key:"createFakerNode",value:function(a){var i=this.graphModel.modelMap.get(a.type);if(i){var u=new i(mi(mi({},a),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(u),u}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(a){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(a)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(a,i){this.viewMap.set(a,i)}},{key:"renderRawData",value:function(a){this.graphModel.graphDataToModel(en(a)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(ee.j)(Object(ee.g)(Vm,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(tt.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(a=this.adapterIn(a)),this.renderRawData(a)}}],r=[{key:"use",value:function(a){var i=a.pluginName;i||(i=a.name);var u=this.extensions.get(i);u&&u.destroy&&u.destroy(),this.extensions.set(i,a)}}],n&&Qy(t.prototype,n),r&&Qy(t,r),e}();function Hn(e){return He(e)}Bt(Zl,"extensions",new Map),f.default=Zl}])})})(Ql,Ql.exports);var Ie=Ql.exports,Tv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),JO=function(v){Tv(d,v);function d(s,f){var o=this;return s.id||(s.id="Event_"+Xn()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=v.call(this,s,f)||this,o}return d.prototype.setAttributes=function(){this.r=18},d.prototype.getConnectedTargetRules=function(){var s=v.prototype.getConnectedTargetRules.call(this),f={message:"起始节点不能作为边的终点",validate:function(){return!1}};return s.push(f),s},d.extendKey="StartEventModel",d}(Ie.CircleNodeModel),QO=function(v){Tv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.extendKey="StartEventNode",d}(Ie.CircleNode),Dv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),mu=globalThis&&globalThis.__assign||function(){return mu=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},mu.apply(this,arguments)},ew=function(v){Dv(d,v);function d(s,f){var o=this;return s.id||(s.id="Event_"+Xn()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=v.call(this,s,f)||this,o}return d.prototype.setAttributes=function(){this.r=18},d.prototype.getConnectedSourceRules=function(){var s=v.prototype.getConnectedSourceRules.call(this),f={message:"结束节点不能作为边的起点",validate:function(){return!1}};return s.push(f),s},d.extendKey="EndEventModel",d}(Ie.CircleNodeModel),tw=function(v){Dv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},d.prototype.getShape=function(){var s=this.props.model,f=s.getNodeStyle(),o=s.x,l=s.y,c=s.r,g=v.prototype.getShape.call(this);return Ie.h("g",{},g,Ie.h("circle",mu(mu({},f),{cx:o,cy:l,r:c-5})))},d.extendKey="EndEventView",d}(Ie.CircleNode),Nv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),xi=globalThis&&globalThis.__assign||function(){return xi=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},xi.apply(this,arguments)},nw=function(v){Nv(d,v);function d(s,f){var o=this;return s.id||(s.id="Gateway_"+Xn()),s.text||(s.text=""),s.text&&typeof s.text=="string"&&(s.text={value:s.text,x:s.x,y:s.y+40}),o=v.call(this,s,f)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return d.extendKey="ExclusiveGatewayModel",d}(Ie.PolygonNodeModel),rw=function(v){Nv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getShape=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.points,m=s.getNodeStyle();return Ie.h("g",{transform:"matrix(1 0 0 1 "+(f-l/2)+" "+(o-c/2)+")"},Ie.h("polygon",xi(xi({},m),{x:f,y:o,points:g})),Ie.h("path",xi({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},m)))},d.extendKey="ExclusiveGatewayNode",d}(Ie.PolygonNode),Cv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),_u=globalThis&&globalThis.__assign||function(){return _u=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},_u.apply(this,arguments)},ow=function(v){Cv(d,v);function d(s,f){var o=this;return s.id||(s.id="Activity_"+Xn()),o=v.call(this,s,f)||this,o}return d.extendKey="UserTaskModel",d}(Ie.RectNodeModel),iw=function(v){Cv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.getNodeStyle();return Ie.h("svg",{x:f-l/2+5,y:o-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},Ie.h("path",{fill:g.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},d.prototype.getShape=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.radius,m=s.getNodeStyle();return Ie.h("g",{},[Ie.h("rect",_u(_u({},m),{x:f-l/2,y:o-c/2,rx:g,ry:g,width:l,height:c})),this.getLabelShape()])},d.extendKey="UserTaskNode",d}(Ie.RectNode),Rv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),ef=globalThis&&globalThis.__assign||function(){return ef=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},ef.apply(this,arguments)},aw=function(v){Rv(d,v);function d(s,f){var o=this;return s.id||(s.id="Activity_"+Xn()),o=v.call(this,s,f)||this,o}return d.extendKey="ServiceTaskModel",d}(Ie.RectNodeModel),uw=function(v){Rv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getLabelShape=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.getNodeStyle();return Ie.h("svg",{x:f-l/2+5,y:o-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},Ie.h("path",{fill:g.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},d.prototype.getShape=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.radius,m=s.getNodeStyle();return Ie.h("g",{},[Ie.h("rect",ef({x:f-l/2,y:o-c/2,rx:g,ry:g,width:l,height:c},m)),this.getLabelShape()])},d.extendKey="ServiceTaskNode",d}(Ie.RectNode),Iv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Lv=function(v){Iv(d,v);function d(s,f){var o=this;return s.id||(s.id="Flow_"+Xn()),o=v.call(this,s,f)||this,o}return d.extendKey="SequenceFlowModel",d}(Ie.PolylineEdgeModel),zv=function(v){Iv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.extendKey="SequenceFlowEdge",d}(Ie.PolylineEdge),rv={width:40,height:40},ov={width:40,height:40},iv={width:40,height:40},av={width:100,height:80},uv={width:100,height:80},sw=new qO([32,32,1]);function sv(){return sw.next()}function Bv(v){return Object.prototype.toString.call(v)}function cw(v){return"  ".repeat(v)}function Ou(v){var d=v;return Bv(v)==="[object Object]"?(d={},Object.keys(v).forEach(function(s){var f=s;s.charAt(0)==="-"&&(f=s.substring(1)),d[f]=Ou(v[s])})):Array.isArray(v)&&(d=[],v.forEach(function(s,f){d[f]=Ou(s)})),d}function lw(v){var d=v;try{typeof d!="string"&&(d=JSON.parse(v))}catch{d=JSON.stringify(Ou(v)).replace(/"/g,"'")}return d}var Co=`	
`;function vu(v,d,s){var f=cw(s),o="";if(d==="#text")return Co+f+v;if(d==="#cdata-section")return Co+f+"<![CDATA["+v+"]]>";if(d==="#comment")return Co+f+"<!--"+v+"-->";if((""+d).charAt(0)==="-")return" "+d.substring(1)+'="'+lw(v)+'"';if(Array.isArray(v))v.forEach(function(m){o+=vu(m,d,s+1)});else if(Bv(v)==="[object Object]"){var l=Object.keys(v),c="",g="";o+=(s===0?"":Co+f)+"<"+d,l.forEach(function(m){m.charAt(0)==="-"?c+=vu(v[m],m,s+1):g+=vu(v[m],m,s+1)}),o+=c+(g!==""?">"+g+(Co+f)+"</"+d+">":" />")}else o+=Co+f+("<"+d+">"+v.toString()+"</"+d+">");return o}function fw(v){var d="";for(var s in v)d+=vu(v[s],s,0);return d}var pn=function(){};pn.ObjTree=function(){return this};pn.ObjTree.VERSION="0.23";pn.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;pn.ObjTree.prototype.attr_prefix="-";pn.ObjTree.prototype.parseXML=function(v){var d;if(window.DOMParser){var s=new DOMParser,f=s.parseFromString(v,"application/xml");if(!f)return;d=f.documentElement}else window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(v),d=s.documentElement);if(d)return this.parseDOM(d)};pn.ObjTree.prototype.parseHTTP=function(v,d,s){var f={};for(var o in d)f[o]=d[o];if(f.method||(typeof f.postBody>"u"&&typeof f.postbody>"u"&&typeof f.parameters>"u"?f.method="get":f.method="post"),s){f.asynchronous=!0;var l=this,c=s,g=f.onComplete;f.onComplete=function(O){var S;O&&O.responseXML&&O.responseXML.documentElement&&(S=l.parseDOM(O.responseXML.documentElement)),c(S,O),g&&g(O)}}else f.asynchronous=!1;var m;if(typeof HTTP<"u"&&HTTP.Request){f.uri=v;var w=new HTTP.Request(f);w&&(m=w.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var w=new Ajax.Request(v,f);w&&(m=w.transport)}if(s)return m;if(m&&m.responseXML&&m.responseXML.documentElement)return this.parseDOM(m.responseXML.documentElement)};pn.ObjTree.prototype.parseDOM=function(v){if(v){if(this.__force_array={},this.force_array)for(var d=0;d<this.force_array.length;d++)this.__force_array[this.force_array[d]]=1;var s=this.parseElement(v);if(this.__force_array[v.nodeName]&&(s=[s]),v.nodeType!=11){var f={};f[v.nodeName]=s,s=f}return s}};pn.ObjTree.prototype.parseElement=function(v){if(v.nodeType!=7){if(v.nodeType==3||v.nodeType==4||v.nodeType==8){var d=v.nodeValue.match(/[^\x00-\x20]/);return d==null?void 0:v.nodeValue}var s=null,f={};if(v.attributes&&v.attributes.length){s={};for(var o=0;o<v.attributes.length;o++){var l=v.attributes[o].nodeName;if(typeof l=="string"){var c=v.attributes[o].nodeValue;try{c=JSON.parse(v.attributes[o].nodeValue.replace(/'/g,'"'))}catch{c=v.attributes[o].nodeValue}c&&(l=this.attr_prefix+l,typeof f[l]>"u"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}if(v.childNodes&&v.childNodes.length){var g=!0;s&&(g=!1);for(var o=0;o<v.childNodes.length&&g;o++){var m=v.childNodes[o].nodeType;m==3||m==4||m==8||(g=!1)}if(g){s||(s="");for(var o=0;o<v.childNodes.length;o++)s+=v.childNodes[o].nodeValue}else{s||(s={});for(var o=0;o<v.childNodes.length;o++){var l=v.childNodes[o].nodeName;if(typeof l=="string"){var c=this.parseElement(v.childNodes[o]);c&&(typeof f[l]>"u"&&(f[l]=0),f[l]++,this.addNode(s,l,f[l],c))}}}}else s===null&&(s={});return s}};pn.ObjTree.prototype.addNode=function(v,d,s,f){this.__force_array[d]?(s==1&&(v[d]=[]),v[d][v[d].length]=f):s==1?v[d]=f:s==2?v[d]=[v[d],f]:v[d][v[d].length]=f};pn.ObjTree.prototype.writeXML=function(v){var d=this.hash_to_xml(null,v);return this.xmlDecl+d};pn.ObjTree.prototype.hash_to_xml=function(v,d){var s=[],f=[];for(var o in d)if(d.hasOwnProperty(o)){var l=d[o];o.charAt(0)!=this.attr_prefix?typeof l>"u"||l==null?s[s.length]="<"+o+" />":typeof l=="object"&&l.constructor==Array?s[s.length]=this.array_to_xml(o,l):typeof l=="object"?s[s.length]=this.hash_to_xml(o,l):s[s.length]=this.scalar_to_xml(o,l):f[f.length]=" "+o.substring(1)+'="'+this.xml_escape(l)+'"'}var c=f.join(""),g=s.join("");return typeof v>"u"||v==null||(s.length>0?g.match(/\n/)?g="<"+v+c+`>
`+g+"</"+v+`>
`:g="<"+v+c+">"+g+"</"+v+`>
`:g="<"+v+c+` />
`),g};pn.ObjTree.prototype.array_to_xml=function(v,d){for(var s=[],f=0;f<d.length;f++){var o=d[f];typeof o>"u"||o==null?s[s.length]="<"+v+" />":typeof o=="object"&&o.constructor==Array?s[s.length]=this.array_to_xml(v,o):typeof o=="object"?s[s.length]=this.hash_to_xml(v,o):s[s.length]=this.scalar_to_xml(v,o)}return s.join("")};pn.ObjTree.prototype.scalar_to_xml=function(v,d){return v=="#text"?this.xml_escape(d):"<"+v+">"+this.xml_escape(d)+"</"+v+`>
`};pn.ObjTree.prototype.xml_escape=function(v){return v.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var pw=function(v){return new pn.ObjTree().parseXML(v)},dw=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),tf=globalThis&&globalThis.__assign||function(){return tf=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},tf.apply(this,arguments)},Pu=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},ar;(function(v){v.START="bpmn:startEvent",v.END="bpmn:endEvent",v.GATEWAY="bpmn:exclusiveGateway",v.USER="bpmn:userTask",v.SYSTEM="bpmn:serviceTask",v.FLOW="bpmn:sequenceFlow"})(ar||(ar={}));var Gv=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],cv=["properties","startPoint","endPoint","pointsList"];function lv(v){var d=v?cv.concat(v):cv;return function(s){function f(o){var l={};return typeof o=="string"?o:Array.isArray(o)?o.map(function(c){return f(c)}):(Object.entries(o).forEach(function(c){var g=Pu(c,2),m=g[0],w=g[1];typeof w!="object"?m.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(m)?l[m]=w:l["-"+m]=w:d.includes(m)?l["-"+m]=f(w):l[m]=f(w)}),l)}return f(s)}}function wu(v){var d={};return Object.entries(v).forEach(function(s){var f=Pu(s,2),o=f[0],l=f[1];o.indexOf("-")===0?d[o.substring(1)]=Ou(l):typeof l=="string"?d[o]=l:Object.prototype.toString.call(l)==="[object Object]"?d[o]=wu(l):Array.isArray(l)?d[o]=l.map(function(c){return wu(c)}):d[o]=l}),d}function hw(v,d,s){var f=new Map;d.nodes.forEach(function(l){var c,g={"-id":l.id};if(!((c=l.text)===null||c===void 0)&&c.value&&(g["-name"]=l.text.value),l.properties){var m=lv(s)(l.properties);Object.assign(g,m)}f.set(l.id,g),v[l.type]?Array.isArray(v[l.type])?v[l.type].push(g):v[l.type]=[v[l.type],g]:v[l.type]=g});var o=d.edges.map(function(l){var c,g,m=f.get(l.targetNodeId);m["bpmn:incoming"]?Array.isArray(m["bpmn:incoming"])?m["bpmn:incoming"].push(l.id):m["bpmn:incoming"]=[m["bpmn:incoming"],l.id]:m["bpmn:incoming"]=l.id;var w={"-id":l.id,"-sourceRef":l.sourceNodeId,"-targetRef":l.targetNodeId};if(!((c=l.text)===null||c===void 0)&&c.value&&(w["-name"]=(g=l.text)===null||g===void 0?void 0:g.value),l.properties){var O=lv(s)(l.properties);Object.assign(w,O)}return w});d.edges.forEach(function(l){var c=f.get(l.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(l.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],l.id]:c["bpmn:outgoing"]=l.id}),v[ar.FLOW]=o}function yw(v,d){v["bpmndi:BPMNEdge"]=d.edges.map(function(s){var f,o=s.id,l=s.pointsList.map(function(g){var m=g.x,w=g.y;return{"-x":m,"-y":w}}),c={"-id":o+"_di","-bpmnElement":o,"di:waypoint":l};return!((f=s.text)===null||f===void 0)&&f.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),c}),v["bpmndi:BPMNShape"]=d.nodes.map(function(s){var f,o=s.id,l=100,c=80,g=s.x,m=s.y,w=Xr.shapeConfigMap.get(s.type);w&&(l=w.width,c=w.height),g-=l/2,m-=c/2;var O={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":g,"-y":m,"-width":l,"-height":c}};return!((f=s.text)===null||f===void 0)&&f.value&&(O["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":s.text.x-s.text.value.length*10/2,"-y":s.text.y-7,"-width":s.text.value.length*10,"-height":14}}),O})}function vw(v){var d=[],s=[],f=v["bpmn:definitions"];if(f){var o=f["bpmn:process"];Object.keys(o).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=o[l];if(l===ar.FLOW){var g=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];s=bw(c,g)}else{var m=f["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];d=d.concat(gw(c,m,l))}}})}return{nodes:d,edges:s}}function gw(v,d,s){var f=[];if(Array.isArray(v))v.forEach(function(c){var g;Array.isArray(d)?g=d.find(function(w){return w["-bpmnElement"]===c["-id"]}):g=d;var m=fv(g,s,c);f.push(m)});else{var o=void 0;Array.isArray(d)?o=d.find(function(c){return c["-bpmnElement"]===v["-id"]}):o=d;var l=fv(o,s,v);f.push(l)}return f}function fv(v,d,s){var f=Number(v["dc:Bounds"]["-x"]),o=Number(v["dc:Bounds"]["-y"]),l=s["-name"],c=Xr.shapeConfigMap.get(d);c&&(f+=c.width/2,o+=c.height/2);var g;Object.entries(s).forEach(function(S){var M=Pu(S,2),j=M[0],T=M[1];Gv.indexOf(j)===-1&&(g||(g={}),g[j]=T)}),g&&(g=wu(g));var m;if(l&&(m={x:f,y:o,value:l},v["bpmndi:BPMNLabel"]&&v["bpmndi:BPMNLabel"]["dc:Bounds"])){var w=v["bpmndi:BPMNLabel"]["dc:Bounds"];m.x=Number(w["-x"])+Number(w["-width"])/2,m.y=Number(w["-y"])+Number(w["-height"])/2}var O={id:v["-bpmnElement"],type:d,x:f,y:o,properties:g};return m&&(O.text=m),O}function bw(v,d){var s=[];if(Array.isArray(v))v.forEach(function(o){var l;Array.isArray(d)?l=d.find(function(c){return c["-bpmnElement"]===o["-id"]}):l=d,s.push(pv(l,o))});else{var f=void 0;Array.isArray(d)?f=d.find(function(o){return o["-bpmnElement"]===v["-id"]}):f=d,s.push(pv(f,v))}return s}function pv(v,d){var s,f=d["-name"];if(f){var o=v["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;f.split(`
`).forEach(function(m){l<m.length&&(l=m.length)}),s={value:f,x:Number(o["-x"])+l*10/2,y:Number(o["-y"])+7}}var c;Object.entries(d).forEach(function(m){var w=Pu(m,2),O=w[0],S=w[1];Gv.indexOf(O)===-1&&(c||(c={}),c[O]=S)}),c&&(c=wu(c));var g={id:d["-id"],type:ar.FLOW,pointsList:v["di:waypoint"].map(function(m){return{x:Number(m["-x"]),y:Number(m["-y"])}}),sourceNodeId:d["-sourceRef"],targetNodeId:d["-targetRef"],properties:c};return s&&(g.text=s),g}var Xr=function(){function v(d){var s=this,f=d.lf;this.adapterOut=function(o,l){var c=tf({},s.processAttributes);hw(c,o,l);var g={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};yw(g,o);var m=s.definitionAttributes;m["bpmn:process"]=c,m["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":m};return w},this.adapterIn=function(o){if(o)return vw(o)},f.adapterIn=function(o){return s.adapterIn(o)},f.adapterOut=function(o,l){return s.adapterOut(o,l)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+sv()},this.definitionAttributes={"-id":"Definitions_"+sv(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return v.prototype.setCustomShape=function(d,s){v.shapeConfigMap.set(d,s)},v.pluginName="bpmn-adapter",v.shapeConfigMap=new Map,v}();Xr.shapeConfigMap.set(ar.START,{width:rv.width,height:rv.height});Xr.shapeConfigMap.set(ar.END,{width:ov.width,height:ov.height});Xr.shapeConfigMap.set(ar.GATEWAY,{width:iv.width,height:iv.height});Xr.shapeConfigMap.set(ar.SYSTEM,{width:av.width,height:av.height});Xr.shapeConfigMap.set(ar.USER,{width:uv.width,height:uv.height});(function(v){dw(d,v);function d(s){var f=v.call(this,s)||this;f.adapterXmlIn=function(l){var c=pw(l);return f.adapterIn(c)},f.adapterXmlOut=function(l,c){var g=f.adapterOut(l,c);return fw(g)};var o=s.lf;return o.adapterIn=f.adapterXmlIn,o.adapterOut=f.adapterXmlOut,f}return d.pluginName="bpmnXmlAdapter",d})(Xr);var dv=globalThis&&globalThis.__assign||function(){return dv=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},dv.apply(this,arguments)};globalThis&&globalThis.__read;var zo;(function(v){v.HORIZONTAL="horizontal",v.VERTICAL="vertical"})(zo||(zo={}));var mw=function(v,d,s,f){f===void 0&&(f=0);var o=Ow(v,d,s);return o<=f};function hv(v){return v*v}function Jl(v,d){return hv(v.x-d.x)+hv(v.y-d.y)}var _w=function(v,d,s){var f=Jl(d,s);if(f===0)return Jl(v,d);var o=((v.x-d.x)*(s.x-d.x)+(v.y-d.y)*(s.y-d.y))/f;return o=Math.max(0,Math.min(1,o)),Jl(v,{x:d.x+o*(s.x-d.x),y:d.y+o*(s.y-d.y)})},Ow=function(v,d,s){return Math.sqrt(_w(v,d,s))},ww=function(v){var d=v.x,s=v.y,f=v.width,o=v.height,l={minX:d-f/2,minY:s-o/2,maxX:d+f/2,maxY:s+o/2,x:d,y:s,width:f,height:o,centerX:d,centerY:s};return l},xw=function(v,d){var s;return v.x===d.x?s=zo.VERTICAL:v.y===d.y&&(s=zo.HORIZONTAL),s},Ew=function(v,d,s){var f=ww(v),o=xw(d,s),l=Math.max(d.x,s.x),c=Math.min(d.x,s.x),g=Math.max(d.y,s.y),m=Math.min(d.y,s.y),w=v.x,O=v.y,S=v.width,M=v.height;if(o===zo.HORIZONTAL){if(l>=f.maxX&&c<=f.minX)return{startCrossPoint:{x:d.x>s.x?w+S/2:w-S/2,y:d.y},endCrossPoint:{x:d.x>s.x?w-S/2:w+S/2,y:d.y}}}else if(o===zo.VERTICAL&&g>=f.maxY&&m<=f.minY)return{startCrossPoint:{x:d.x,y:d.y>s.y?O+M/2:O-M/2},endCrossPoint:{x:d.x,y:d.y>s.y?O-M/2:O+M/2}}},Sw=function(v,d,s){s===void 0&&(s=0);for(var f=v.x,o=v.y,l=d.pointsList,c=0;c<l.length-1;c++)if(mw({x:f,y:o},l[c],l[c+1],s)){var g=Ew(v,l[c],l[c+1]);if(g)return{crossIndex:c+1,crossPoints:g}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},jw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},yv=globalThis&&globalThis.__spread||function(){for(var v=[],d=0;d<arguments.length;d++)v=v.concat(jw(arguments[d]));return v},C1=function(){function v(d){var s=d.lf;this._lf=s,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return v.prototype.eventHandler=function(){var d=this;this.dndAdd&&this._lf.on("node:dnd-add",function(s){var f=s.data;d.insetNode(f)}),this.dropAdd&&this._lf.on("node:drop",function(s){for(var f=s.data,o=d._lf.graphModel.edges,l=f.id,c=!0,g=0;g<o.length;g++)if(o[g].sourceNodeId===l||o[g].targetNodeId===l){c=!1;break}c&&d.insetNode(f)})},v.prototype.checkRuleBeforeInsetNode=function(d,s,f,o,l){var c=this._lf.getNodeModelById(d),g=this._lf.getNodeModelById(s),m=c.getAnchorInfo(f),w=g.getAnchorInfo(o),O=c.isAllowConnectedAsSource(l,m,w),S=g.isAllowConnectedAsTarget(l,m,w),M=Ie.formateAnchorConnectValidateData(O),j=M.isAllPass,T=M.msg,D=Ie.formateAnchorConnectValidateData(S),C=D.isAllPass,I=D.msg;return{isPass:j&&C,sourceMsg:T,targetMsg:I}},v.prototype.insetNode=function(d){for(var s=this,f=this._lf.graphModel.edges,o=this._lf.getNodeModelById(d.id),l=0;l<f.length;l++){var c=Sw(o,f[l],this.deviation),g=c.crossIndex,m=c.crossPoints;if(g>=0){var w=f[l],O=w.sourceNodeId,S=w.targetNodeId,M=w.id,j=w.type,T=w.pointsList,D=w.sourceAnchorId,C=w.targetAnchorId,I=yu(T[0]),H=yu(m.startCrossPoint);this._lf.deleteEdge(M);var J=this.checkRuleBeforeInsetNode(O,S,D,C,d);if(this._lf.addEdge({type:j,sourceNodeId:O,targetNodeId:d.id,startPoint:I,endPoint:H,pointsList:yv(T.slice(0,g),[m.startCrossPoint])}),this._lf.addEdge({type:j,sourceNodeId:d.id,targetNodeId:S,startPoint:yu(m.endCrossPoint),endPoint:yu(T[T.length-1]),pointsList:yv([m.endCrossPoint],T.slice(g))}),J.isPass)break;this._lf.graphModel.eventCenter.emit(Ie.EventType.CONNECTION_NOT_ALLOWED,{data:d,msg:J.targetMsg||J.sourceMsg}),setTimeout(function(){s._lf.undo()},200);break}}},v.pluginName="insertNodeInPolyline",v}(),Pw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},Mw=globalThis&&globalThis.__spread||function(){for(var v=[],d=0;d<arguments.length;d++)v=v.concat(Pw(arguments[d]));return v},R1=function(){function v(d){var s=this,f=d.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){s.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){s.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){s.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){s.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){s.lf.redo()}}],this.lf=f}return v.prototype.render=function(d,s){this.destroy();var f=this.getControlTool();this.toolEl=f,s.appendChild(f),this.domContainer=s},v.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},v.prototype.addItem=function(d){this.controlItems.push(d)},v.prototype.removeItem=function(d){var s=this.controlItems.findIndex(function(f){return f.key===d});return this.controlItems.splice(s,1)[0]},v.prototype.getControlTool=function(){var d=this,s="lf-control-item",f="lf-control-item disabled",o=document.createElement("div"),l=[];return o.className="lf-control",this.controlItems.forEach(function(c){var g=document.createElement("div"),m=document.createElement("i"),w=document.createElement("span");switch(g.className=f,c.onClick&&(g.onclick=c.onClick.bind(null,d.lf)),c.onMouseEnter&&(g.onmouseenter=c.onMouseEnter.bind(null,d.lf)),c.onMouseLeave&&(g.onmouseleave=c.onMouseLeave.bind(null,d.lf)),m.className=c.iconClass,w.className="lf-control-text",w.title=c.title,w.innerText=c.text,g.append(m,w),c.text){case"上一步":d.lf.on("history:change",function(O){var S=O.data.undoAble;g.className=S?s:f});break;case"下一步":d.lf.on("history:change",function(O){var S=O.data.redoAble;g.className=S?s:f});break;default:g.className=s;break}l.push(g)}),o.append.apply(o,Mw(l)),o},v.pluginName="control",v}(),Aw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},kw=globalThis&&globalThis.__spread||function(){for(var v=[],d=0;d<arguments.length;d++)v=v.concat(Aw(arguments[d]));return v},_i="lf:defaultNodeMenu",Oi="lf:defaultEdgeMenu",wi="lf:defaultGraphMenu",vv="lf:defaultSelectionMenu",I1=function(){function v(d){var s=this,f=d.lf;this.__menuDOM=document.createElement("ul"),this.lf=f,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){s.setMenuConfig(o)},this.lf.addMenuConfig=function(o){s.addMenuConfig(o)},this.lf.setMenuByType=function(o){s.setMenuByType(o)}}return v.prototype.init=function(){var d=this,s=[{text:"删除",callback:function(l){d.lf.deleteNode(l.id)}},{text:"编辑文本",callback:function(l){d.lf.graphModel.editText(l.id)}},{text:"复制",callback:function(l){d.lf.cloneNode(l.id)}}];this.menuTypeMap.set(_i,s);var f=[{text:"删除",callback:function(l){d.lf.deleteEdge(l.id)}},{text:"编辑文本",callback:function(l){d.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(Oi,f),this.menuTypeMap.set(wi,[]);var o=[{text:"删除",callback:function(l){d.lf.clearSelectElements(),l.edges.forEach(function(c){return d.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return d.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(vv,o)},v.prototype.render=function(d,s){var f=this;this.__container=s,this.__currentData=null,this.__menuDOM.className="lf-menu",s.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var l=o.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1?(l.onclickCallback(f.__currentData),f.__menuDOM.style.display="none",f.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(o){var l=o.data,c=o.position,g=c.domOverlayPosition,m=g.x,w=g.y,O=l.id,S=f.lf.graphModel.getNodeModelById(O),M=[],j=f.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?M=S.menu:j?M=j:M=f.menuTypeMap.get(_i),f.__currentData=l,f.showMenu(m,w,M)}),this.lf.on("edge:contextmenu",function(o){var l=o.data,c=o.position,g=c.domOverlayPosition,m=g.x,w=g.y,O=l.id,S=f.lf.graphModel.getEdgeModelById(O),M=[],j=f.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?M=S.menu:j?M=j:M=f.menuTypeMap.get(Oi),f.__currentData=l,f.showMenu(m,w,M)}),this.lf.on("blank:contextmenu",function(o){var l=o.position,c=f.menuTypeMap.get(wi),g=l.domOverlayPosition,m=g.x,w=g.y;f.showMenu(m,w,c)}),this.lf.on("selection:contextmenu",function(o){var l=o.data,c=o.position,g=f.menuTypeMap.get(vv),m=c.domOverlayPosition,w=m.x,O=m.y;f.__currentData=l,f.showMenu(w,O,g)}),this.lf.on("node:mousedown",function(){f.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){f.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){f.__menuDOM.style.display="none"})},v.prototype.destroy=function(){var d;(d=this===null||this===void 0?void 0:this.__container)===null||d===void 0||d.removeChild(this.__menuDOM),this.__menuDOM=null},v.prototype.showMenu=function(d,s,f){if(!(!f||!f.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,kw(this.__getMenuDom(f))),o.children.length&&(o.style.display="block",o.style.top=s+"px",o.style.left=d+"px")}},v.prototype.setMenuByType=function(d){!d.type||!d.menu||this.menuTypeMap.set(d.type,d.menu)},v.prototype.__getMenuDom=function(d){var s=[];return d&&d.length>0&&d.forEach(function(f){var o=document.createElement("li");if(f.className?o.className="lf-menu-item "+f.className:o.className="lf-menu-item",f.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",o.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",f.text&&(c.innerText=f.text),o.appendChild(c),o.onclickCallback=f.callback,s.push(o)}),s},v.prototype.setMenuConfig=function(d){d&&(d.nodeMenu!==void 0&&this.menuTypeMap.set(_i,d.nodeMenu?d.nodeMenu:[]),d.edgeMenu!==void 0&&this.menuTypeMap.set(Oi,d.edgeMenu?d.edgeMenu:[]),d.graphMenu!==void 0&&this.menuTypeMap.set(wi,d.graphMenu?d.graphMenu:[]))},v.prototype.addMenuConfig=function(d){if(d){if(Array.isArray(d.nodeMenu)){var s=this.menuTypeMap.get(_i);this.menuTypeMap.set(_i,s.concat(d.nodeMenu))}if(Array.isArray(d.edgeMenu)){var s=this.menuTypeMap.get(Oi);this.menuTypeMap.set(Oi,s.concat(d.edgeMenu))}if(Array.isArray(d.graphMenu)){var s=this.menuTypeMap.get(wi);this.menuTypeMap.set(wi,s.concat(d.graphMenu))}}},v.prototype.changeMenuItem=function(d,s){if(d==="add")this.addMenuConfig(s);else if(d==="reset")this.setMenuConfig(s);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},v.pluginName="menu",v}();globalThis&&globalThis.__read;var L1=function(){function v(d){var s=this,f=d.lf;this.lf=f,this.lf.setPatternItems=function(o){s.setPatternItems(o)}}return v.prototype.render=function(d,s){var f=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=s;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){f.panelEl.appendChild(f.createDndItem(o))}),s.appendChild(this.panelEl),this.domContainer=s},v.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},v.prototype.setPatternItems=function(d){this.shapeList=d,this.domContainer&&this.render(this.lf,this.domContainer)},v.prototype.createDndItem=function(d){var s=this,f=document.createElement("div");f.className=d.className?"lf-dnd-item "+d.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",d.icon&&(o.style.backgroundImage="url("+d.icon+")"),f.appendChild(o),d.label){var l=document.createElement("div");l.innerText=d.label,l.className="lf-dnd-text",f.appendChild(l)}return f.onmousedown=function(){d.type&&s.lf.dnd.startDrag({type:d.type,properties:d.properties,text:d.text}),d.callback&&d.callback(s.lf,s.domContainer)},f.ondblclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:d})},f.onclick=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:d})},f.oncontextmenu=function(c){s.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:d})},f},v.pluginName="dndPanel",v}(),z1=function(){function v(d){var s=this,f=d.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=s.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,g=c.x,m=c.y;s.endPoint={x:g,y:m};var w=s.startPoint,O=w.x,S=w.y,M=s.wrapper.style,j=O,T=S,D=g-O,C=m-S;g<O&&(j=g,D=O-g),m<S&&(T=m,C=S-m),M.left=j+"px",M.top=T+"px",M.width=D+"px",M.height=C+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",s.__draw),document.removeEventListener("mouseup",s.__drawOff),s.wrapper.oncontextmenu=null,s.__domContainer.removeChild(s.wrapper);var l=s.startPoint,c=l.x,g=l.y,m=s.endPoint,w=m.x,O=m.y;if(!(Math.abs(w-c)<10&&Math.abs(O-g)<10)){var S=[Math.min(c,w),Math.min(g,O)],M=[Math.max(c,w),Math.max(g,O)],j=s.lf.graphModel.getAreaElement(S,M,s.isWholeEdge,s.isWholeNode,!0),T=s.lf.graphModel.group;j.forEach(function(D){(!T||!T.getNodeGroup(D.id))&&s.lf.selectElementById(D.id,!0)}),s.lf.emit("selection:selected",j)}},this.lf=f;var o=f.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,f.openSelectionSelect=function(){s.openSelectionSelect()},f.closeSelectionSelect=function(){s.closeSelectionSelect()}}return v.prototype.render=function(d,s){var f=this;this.__domContainer=s,d.on("blank:mousedown",function(o){var l=o.e,c=d.getEditConfig();if(!(!c.stopMoveGraph||f.__disabled)){var g=l.button===2;if(!g){var m=d.getPointByClient(l.clientX,l.clientY).domOverlayPosition,w=m.x,O=m.y;f.startPoint={x:w,y:O},f.endPoint={x:w,y:O};var S=document.createElement("div");S.className="lf-selection-select",S.oncontextmenu=function(j){j.preventDefault()},S.style.top=f.startPoint.y+"px",S.style.left=f.startPoint.x+"px",s.appendChild(S),f.wrapper=S,document.addEventListener("mousemove",f.__draw),document.addEventListener("mouseup",f.__drawOff)}}})},v.prototype.setSelectionSense=function(d,s){d===void 0&&(d=!0),s===void 0&&(s=!0),this.isWholeEdge=d,this.isWholeNode=s},v.prototype.openSelectionSelect=function(){var d=this.lf.getEditConfig().stopMoveGraph;d||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},v.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},v.prototype.open=function(){this.__disabled=!1},v.prototype.close=function(){this.__disabled=!0},v.pluginName="selectionSelect",v}(),Tw=globalThis&&globalThis.__values||function(v){var d=typeof Symbol=="function"&&Symbol.iterator,s=d&&v[d],f=0;if(s)return s.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&f>=v.length&&(v=void 0),{value:v&&v[f++],done:!v}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},B1=function(){function v(d){var s=this,f=d.lf,o=d.LogicFlow,l=d.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(c,g){s.setView(),s.isShow||s.createMiniMap(c,g),s.isShow=!0},this.hide=function(){s.isShow&&s.removeMiniMap(),s.isShow=!1},this.reset=function(){s.lf.resetTranslate(),s.lf.resetZoom(),s.hide(),s.show()},this.startDrag=function(c){document.addEventListener("mousemove",s.drag),document.addEventListener("mouseup",s.drop),s.startPosition={x:c.x,y:c.y}},this.moveViewport=function(c,g){var m=s.viewport.style;s.viewPortTop=c,s.viewPortLeft=g,m.top=s.viewPortTop+"px",m.left=s.viewPortLeft+"px"},this.drag=function(c){s.dragging=!0;var g=s.viewPortTop+c.y-s.startPosition.y,m=s.viewPortLeft+c.x-s.startPosition.x;s.moveViewport(g,m),s.startPosition={x:c.x,y:c.y};var w=(s.viewPortLeft+s.viewPortWidth/2)/s.viewPortScale,O=(s.viewPortTop+s.viewPortHeight/2)/s.viewPortScale;s.lf.focusOn({coordinate:{x:w+s.resetDataX,y:O+s.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",s.drag),document.removeEventListener("mouseup",s.drop);var c=s.viewPortTop,g=s.viewPortLeft;s.viewPortLeft>s.width&&(g=s.width-s.viewPortWidth),s.viewPortTop>s.height&&(c=s.height-s.viewPortHeight),s.viewPortLeft<-s.width&&(g=0),s.viewPortTop<-s.height&&(c=0),s.moveViewport(c,g)},this.mapClick=function(c){if(s.dragging)s.dragging=!1;else{var g=c.layerX,m=c.layerY,w=g,O=m,S=s.lf.getGraphRawData(),M=s.getBounds(S),j=M.left,T=M.top,D=j+w/s.viewPortScale,C=T+O/s.viewPortScale;s.lf.focusOn({coordinate:{x:D,y:C}})}},this.lf=f,l&&l.MiniMap&&this.setOption(l),this.miniMapWidth=f.graphModel.width,this.miniMapHeight=f.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return v.prototype.render=function(d,s){var f=this;this.container=s,this.lf.on("history:change",function(){f.isShow&&f.setView()}),this.lf.on("graph:transform",ZO(function(){f.isShow&&!f.dragging&&f.setView()},300))},v.prototype.init=function(d){this.disabledPlugins=this.disabledPlugins.concat(d.disabledPlugins||[])},v.prototype.setOption=function(d){var s=d.MiniMap,f=s.width,o=f===void 0?150:f,l=s.height,c=l===void 0?220:l,g=s.isShowHeader,m=g===void 0?!0:g,w=s.isShowCloseIcon,O=w===void 0?!0:w,S=s.leftPosition,M=S===void 0?0:S,j=s.topPosition,T=j===void 0?0:j,D=s.rightPosition,C=s.bottomPosition;this.width=o,this.height=c,this.isShowHeader=m,this.isShowCloseIcon=O,this.viewPortWidth=o,this.leftPosition=M,this.topPosition=T,this.rightPosition=D,this.bottomPosition=C},v.prototype.initMiniMap=function(){var d=document.createElement("div");d.className="lf-mini-map-graph",d.style.width=this.width+4+"px",d.style.height=this.height+"px",this.lfMap=new this.LogicFlow({container:d,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(s){return s},this.lfMap.adapterOut=function(s){return s},this.miniMapWrap=d,this.createViewPort(),d.addEventListener("click",this.mapClick)},v.prototype.createMiniMap=function(d,s){var f=document.createElement("div");f.appendChild(this.miniMapWrap),typeof d<"u"||typeof s<"u"?(f.style.left=(d||0)+"px",f.style.top=(s||0)+"px"):(typeof this.rightPosition<"u"?f.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(f.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?f.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(f.style.top=this.topPosition+"px")),f.style.position="absolute",f.className="lf-mini-map",this.isShowCloseIcon||f.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||f.classList.add("lf-mini-map-no-header"),this.container.appendChild(f),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=v.headerTitle,f.appendChild(o);var l=document.createElement("span");l.className="lf-mini-map-close",l.addEventListener("click",this.hide),f.appendChild(l),this.miniMapContainer=f},v.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},v.prototype.getBounds=function(d){var s=0,f=this.miniMapWidth,o=0,l=this.miniMapHeight,c=d.nodes;return c&&c.length>0&&c.forEach(function(g){var m=g.x,w=g.y,O=g.width,S=O===void 0?200:O,M=g.height,j=M===void 0?200:M,T=m-S/2,D=m+S/2,C=w-j/2,I=w+j/2;s=T<s?T:s,f=D>f?D:f,o=C<o?C:o,l=I>l?I:l}),{left:s,top:o,bottom:l,right:f}},v.prototype.resetData=function(d){var s=d.nodes,f=d.edges,o=0,l=0;return s&&s.length>0&&(s.forEach(function(c){var g=c.x,m=c.y,w=c.width,O=w===void 0?200:w,S=c.height,M=S===void 0?200:S,j=g-O/2,T=m-M/2;o=j<o?j:o,l=T<l?T:l}),(o<0||l<0)&&(this.resetDataX=o,this.resetDataY=l,s.forEach(function(c){c.x=c.x-o,c.y=c.y-l,c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l)}),f.forEach(function(c){c.startPoint&&(c.startPoint.x=c.startPoint.x-o,c.startPoint.y=c.startPoint.y-l),c.endPoint&&(c.endPoint.x=c.endPoint.x-o,c.endPoint.y=c.endPoint.y-l),c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l),c.pointsList&&c.pointsList.forEach(function(g){g.x=g.x-o,g.y=g.y-l})}))),d},v.prototype.setView=function(){var d,s,f=this.lf.getGraphRawData(),o=this.resetData(f),l=this.lf.viewMap,c=this.lf.graphModel.modelMap,g=this.lfMap.viewMap;try{for(var m=Tw(l.keys()),w=m.next();!w.done;w=m.next()){var O=w.value;g.has(O)||(this.lfMap.setView(O,l.get(O)),this.lfMap.graphModel.modelMap.set(O,c.get(O)))}}catch(ie){d={error:ie}}finally{try{w&&!w.done&&(s=m.return)&&s.call(m)}finally{if(d)throw d.error}}this.lfMap.render(o);var S=this.getBounds(o),M=S.left,j=S.top,T=S.right,D=S.bottom,C=this.width/(T-M),I=this.height/(D-j),H=this.miniMapWrap.firstChild.style,J=Math.min(C,I);H.transform="matrix("+J+", 0, 0, "+J+", 0, 0)",H.transformOrigin="left top",H.height=D-Math.min(j,0)+"px",H.width=T-Math.min(M,0)+"px",this.viewPortScale=J,this.setViewPort(J,{left:M,top:j,right:T,bottom:D})},v.prototype.setViewPort=function(d,s){var f=s.left,o=s.right;s.top,s.bottom;var l=this.viewport.style;l.width=this.viewPortWidth+"px",l.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var c=this.lf.getTransform(),g=c.TRANSLATE_X,m=c.TRANSLATE_Y,w=c.SCALE_X,O=c.SCALE_Y,S=o-f,M=this.width/(S/this.lf.graphModel.width),j=this.width*(M/this.width),T=this.lf.graphModel.width/this.lf.graphModel.height,D=j/T,C=this.lf.getGraphRawData(),I=this.getBounds(C),H=I.left,J=I.top,ie=H,q=J;ie+=g/w,q+=m/O,this.viewPortTop=q>0?0:-q*d,this.viewPortLeft=ie>0?0:-ie*d,this.viewPortWidth=j,this.viewPortHeight=D,l.top=this.viewPortTop+"px",l.left=this.viewPortLeft+"px",l.width=j/w+"px",l.height=D/O+"px"},v.prototype.createViewPort=function(){var d=document.createElement("div");d.className="lf-minimap-viewport",d.addEventListener("mousedown",this.startDrag),this.viewport=d},v.pluginName="miniMap",v.width=150,v.height=220,v.viewPortWidth=150,v.viewPortHeight=75,v.isShowHeader=!0,v.isShowCloseIcon=!0,v.leftPosition=0,v.topPosition=0,v.rightPosition=null,v.bottomPosition=null,v.headerTitle="导航",v}();function Dw(v){if(v.length<=1)return!1;for(var d=0,s=v.length-1;d!==s&&d+1!==s&&s-1!==d;)d++,s--;return d===s?[--d,s]:[d,s]}var Hv=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Ro=globalThis&&globalThis.__assign||function(){return Ro=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},Ro.apply(this,arguments)},xr=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};(function(v){Hv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.pointFilter=function(s){for(var f=s,o=1;o<f.length-1;){var l=xr(f[o-1],2),c=l[0],g=l[1],m=xr(f[o],2),w=m[0],O=m[1],S=xr(f[o+1],2),M=S[0],j=S[1];c===w&&w===M||g===O&&O===j?f.splice(o,1):o++}return f},d.prototype.getEdge=function(){var s=this.props.model,f=s.points,o=s.isAnimation,l=s.arrowConfig,c=s.radius,g=c===void 0?5:c,m=s.getEdgeStyle(),w=s.getEdgeAnimationStyle(),O=this.pointFilter(f.split(" ").map(function(Me){return Me.split(",").map(function(Re){return Number(Re)})})),S=Dw(O);if(S){var M=xr(S,2),j=M[0],T=M[1],D=O[j],C=O[T],I=D.some(function(Me,Re){return Me===C[Re]});if(!I){var H=(C[1]-D[1])/2,J=[C[0],C[1]-H],ie=[D[0],D[1]+H];O.splice(j+1,0,ie,J)}}for(var q=xr(O[0],2),V=q[0],K=q[1],z="M"+V+" "+K,N=1;N<O.length-1;N++){var B=xr(O[N-1],2),L=B[0],G=B[1],te=xr(O[N],2),fe=te[0],ce=te[1],ye=xr(O[N+1],2),xe=ye[0],ve=ye[1];if(fe===L&&ce!==G){var ue=ce>G?ce-g:ce+g;z=z+" L "+fe+" "+ue}if(ce===G&&fe!==L){var he=fe>L?fe-g:fe+g;z=z+" L "+he+" "+ce}if(z=z+" Q "+fe+" "+ce,fe===xe&&ce!==ve){var ue=ce>ve?ce-g:ce+g;z=z+" "+fe+" "+ue}if(ce===ve&&fe!==xe){var he=fe>xe?fe-g:fe+g;z=z+" "+he+" "+ce}}var be=xr(O[O.length-1],2),Se=be[0],Le=be[1];z=z+" L "+Se+" "+Le;var $e=Ro(Ro(Ro({d:z,style:o?w:{}},m),l),{fill:"none"});return Ie.h("path",Ro({d:z},$e))},d})(Ie.PolylineEdge);(function(v){Hv(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d})(Ie.PolylineEdgeModel);var af,Yt,Xv,ro,gv,Fv,nf,Uv={},Yv=[],Nw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,uf=Array.isArray;function Hr(v,d){for(var s in d)v[s]=d[s];return v}function Vv(v){var d=v.parentNode;d&&d.removeChild(v)}function Ei(v,d,s){var f,o,l,c={};for(l in d)l=="key"?f=d[l]:l=="ref"?o=d[l]:c[l]=d[l];if(arguments.length>2&&(c.children=arguments.length>3?af.call(arguments,2):s),typeof v=="function"&&v.defaultProps!=null)for(l in v.defaultProps)c[l]===void 0&&(c[l]=v.defaultProps[l]);return gu(v,c,f,o,null)}function gu(v,d,s,f,o){var l={type:v,props:d,key:s,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++Xv};return o==null&&Yt.vnode!=null&&Yt.vnode(l),l}function sf(v){return v.children}function Lo(v,d){this.props=v,this.context=d}function ji(v,d){if(d==null)return v.__?ji(v.__,v.__.__k.indexOf(v)+1):null;for(var s;d<v.__k.length;d++)if((s=v.__k[d])!=null&&s.__e!=null)return s.__e;return typeof v.type=="function"?ji(v):null}function Wv(v){var d,s;if((v=v.__)!=null&&v.__c!=null){for(v.__e=v.__c.base=null,d=0;d<v.__k.length;d++)if((s=v.__k[d])!=null&&s.__e!=null){v.__e=v.__c.base=s.__e;break}return Wv(v)}}function bv(v){(!v.__d&&(v.__d=!0)&&ro.push(v)&&!xu.__r++||gv!==Yt.debounceRendering)&&((gv=Yt.debounceRendering)||Fv)(xu)}function xu(){var v,d,s,f,o,l,c,g;for(ro.sort(nf);v=ro.shift();)v.__d&&(d=ro.length,f=void 0,o=void 0,c=(l=(s=v).__v).__e,(g=s.__P)&&(f=[],(o=Hr({},l)).__v=l.__v+1,Jv(g,l,o,s.__n,g.ownerSVGElement!==void 0,l.__h!=null?[c]:null,f,c??ji(l),l.__h),Rw(f,l),l.__e!=c&&Wv(l)),ro.length>d&&ro.sort(nf));xu.__r=0}function $v(v,d,s,f,o,l,c,g,m,w){var O,S,M,j,T,D,C,I=f&&f.__k||Yv,H=I.length;for(s.__k=[],O=0;O<d.length;O++)if((j=s.__k[O]=(j=d[O])==null||typeof j=="boolean"||typeof j=="function"?null:typeof j=="string"||typeof j=="number"||typeof j=="bigint"?gu(null,j,null,null,j):uf(j)?gu(sf,{children:j},null,null,null):j.__b>0?gu(j.type,j.props,j.key,j.ref?j.ref:null,j.__v):j)!=null){if(j.__=s,j.__b=s.__b+1,(M=I[O])===null||M&&j.key==M.key&&j.type===M.type)I[O]=void 0;else for(S=0;S<H;S++){if((M=I[S])&&j.key==M.key&&j.type===M.type){I[S]=void 0;break}M=null}Jv(v,j,M=M||Uv,o,l,c,g,m,w),T=j.__e,(S=j.ref)&&M.ref!=S&&(C||(C=[]),M.ref&&C.push(M.ref,null,j),C.push(S,j.__c||T,j)),T!=null?(D==null&&(D=T),typeof j.type=="function"&&j.__k===M.__k?j.__d=m=Kv(j,m,v):m=qv(v,j,M,I,T,m),typeof s.type=="function"&&(s.__d=m)):m&&M.__e==m&&m.parentNode!=v&&(m=ji(M))}for(s.__e=D,O=H;O--;)I[O]!=null&&(typeof s.type=="function"&&I[O].__e!=null&&I[O].__e==s.__d&&(s.__d=Zv(f).nextSibling),eg(I[O],I[O]));if(C)for(O=0;O<C.length;O++)Qv(C[O],C[++O],C[++O])}function Kv(v,d,s){for(var f,o=v.__k,l=0;o&&l<o.length;l++)(f=o[l])&&(f.__=v,d=typeof f.type=="function"?Kv(f,d,s):qv(s,f,f,o,f.__e,d));return d}function qv(v,d,s,f,o,l){var c,g,m;if(d.__d!==void 0)c=d.__d,d.__d=void 0;else if(s==null||o!=l||o.parentNode==null)e:if(l==null||l.parentNode!==v)v.appendChild(o),c=null;else{for(g=l,m=0;(g=g.nextSibling)&&m<f.length;m+=1)if(g==o)break e;v.insertBefore(o,l),c=l}return c!==void 0?c:o.nextSibling}function Zv(v){var d,s,f;if(v.type==null||typeof v.type=="string")return v.__e;if(v.__k){for(d=v.__k.length-1;d>=0;d--)if((s=v.__k[d])&&(f=Zv(s)))return f}return null}function Cw(v,d,s,f,o){var l;for(l in s)l==="children"||l==="key"||l in d||Eu(v,l,null,s[l],f);for(l in d)o&&typeof d[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||s[l]===d[l]||Eu(v,l,d[l],s[l],f)}function mv(v,d,s){d[0]==="-"?v.setProperty(d,s??""):v[d]=s==null?"":typeof s!="number"||Nw.test(d)?s:s+"px"}function Eu(v,d,s,f,o){var l;e:if(d==="style")if(typeof s=="string")v.style.cssText=s;else{if(typeof f=="string"&&(v.style.cssText=f=""),f)for(d in f)s&&d in s||mv(v.style,d,"");if(s)for(d in s)f&&s[d]===f[d]||mv(v.style,d,s[d])}else if(d[0]==="o"&&d[1]==="n")l=d!==(d=d.replace(/Capture$/,"")),d=d.toLowerCase()in v?d.toLowerCase().slice(2):d.slice(2),v.l||(v.l={}),v.l[d+l]=s,s?f||v.addEventListener(d,l?Ov:_v,l):v.removeEventListener(d,l?Ov:_v,l);else if(d!=="dangerouslySetInnerHTML"){if(o)d=d.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(d!=="width"&&d!=="height"&&d!=="href"&&d!=="list"&&d!=="form"&&d!=="tabIndex"&&d!=="download"&&d!=="rowSpan"&&d!=="colSpan"&&d in v)try{v[d]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&d[4]!=="-"?v.removeAttribute(d):v.setAttribute(d,s))}}function _v(v){return this.l[v.type+!1](Yt.event?Yt.event(v):v)}function Ov(v){return this.l[v.type+!0](Yt.event?Yt.event(v):v)}function Jv(v,d,s,f,o,l,c,g,m){var w,O,S,M,j,T,D,C,I,H,J,ie,q,V,K,z=d.type;if(d.constructor!==void 0)return null;s.__h!=null&&(m=s.__h,g=d.__e=s.__e,d.__h=null,l=[g]),(w=Yt.__b)&&w(d);try{e:if(typeof z=="function"){if(C=d.props,I=(w=z.contextType)&&f[w.__c],H=w?I?I.props.value:w.__:f,s.__c?D=(O=d.__c=s.__c).__=O.__E:("prototype"in z&&z.prototype.render?d.__c=O=new z(C,H):(d.__c=O=new Lo(C,H),O.constructor=z,O.render=Lw),I&&I.sub(O),O.props=C,O.state||(O.state={}),O.context=H,O.__n=f,S=O.__d=!0,O.__h=[],O._sb=[]),O.__s==null&&(O.__s=O.state),z.getDerivedStateFromProps!=null&&(O.__s==O.state&&(O.__s=Hr({},O.__s)),Hr(O.__s,z.getDerivedStateFromProps(C,O.__s))),M=O.props,j=O.state,O.__v=d,S)z.getDerivedStateFromProps==null&&O.componentWillMount!=null&&O.componentWillMount(),O.componentDidMount!=null&&O.__h.push(O.componentDidMount);else{if(z.getDerivedStateFromProps==null&&C!==M&&O.componentWillReceiveProps!=null&&O.componentWillReceiveProps(C,H),!O.__e&&O.shouldComponentUpdate!=null&&O.shouldComponentUpdate(C,O.__s,H)===!1||d.__v===s.__v){for(d.__v!==s.__v&&(O.props=C,O.state=O.__s,O.__d=!1),O.__e=!1,d.__e=s.__e,d.__k=s.__k,d.__k.forEach(function(N){N&&(N.__=d)}),J=0;J<O._sb.length;J++)O.__h.push(O._sb[J]);O._sb=[],O.__h.length&&c.push(O);break e}O.componentWillUpdate!=null&&O.componentWillUpdate(C,O.__s,H),O.componentDidUpdate!=null&&O.__h.push(function(){O.componentDidUpdate(M,j,T)})}if(O.context=H,O.props=C,O.__P=v,ie=Yt.__r,q=0,"prototype"in z&&z.prototype.render){for(O.state=O.__s,O.__d=!1,ie&&ie(d),w=O.render(O.props,O.state,O.context),V=0;V<O._sb.length;V++)O.__h.push(O._sb[V]);O._sb=[]}else do O.__d=!1,ie&&ie(d),w=O.render(O.props,O.state,O.context),O.state=O.__s;while(O.__d&&++q<25);O.state=O.__s,O.getChildContext!=null&&(f=Hr(Hr({},f),O.getChildContext())),S||O.getSnapshotBeforeUpdate==null||(T=O.getSnapshotBeforeUpdate(M,j)),$v(v,uf(K=w!=null&&w.type===sf&&w.key==null?w.props.children:w)?K:[K],d,s,f,o,l,c,g,m),O.base=d.__e,d.__h=null,O.__h.length&&c.push(O),D&&(O.__E=O.__=null),O.__e=!1}else l==null&&d.__v===s.__v?(d.__k=s.__k,d.__e=s.__e):d.__e=Iw(s.__e,d,s,f,o,l,c,m);(w=Yt.diffed)&&w(d)}catch(N){d.__v=null,(m||l!=null)&&(d.__e=g,d.__h=!!m,l[l.indexOf(g)]=null),Yt.__e(N,d,s)}}function Rw(v,d){Yt.__c&&Yt.__c(d,v),v.some(function(s){try{v=s.__h,s.__h=[],v.some(function(f){f.call(s)})}catch(f){Yt.__e(f,s.__v)}})}function Iw(v,d,s,f,o,l,c,g){var m,w,O,S=s.props,M=d.props,j=d.type,T=0;if(j==="svg"&&(o=!0),l!=null){for(;T<l.length;T++)if((m=l[T])&&"setAttribute"in m==!!j&&(j?m.localName===j:m.nodeType===3)){v=m,l[T]=null;break}}if(v==null){if(j===null)return document.createTextNode(M);v=o?document.createElementNS("http://www.w3.org/2000/svg",j):document.createElement(j,M.is&&M),l=null,g=!1}if(j===null)S===M||g&&v.data===M||(v.data=M);else{if(l=l&&af.call(v.childNodes),w=(S=s.props||Uv).dangerouslySetInnerHTML,O=M.dangerouslySetInnerHTML,!g){if(l!=null)for(S={},T=0;T<v.attributes.length;T++)S[v.attributes[T].name]=v.attributes[T].value;(O||w)&&(O&&(w&&O.__html==w.__html||O.__html===v.innerHTML)||(v.innerHTML=O&&O.__html||""))}if(Cw(v,M,S,o,g),O)d.__k=[];else if($v(v,uf(T=d.props.children)?T:[T],d,s,f,o&&j!=="foreignObject",l,c,l?l[0]:s.__k&&ji(s,0),g),l!=null)for(T=l.length;T--;)l[T]!=null&&Vv(l[T]);g||("value"in M&&(T=M.value)!==void 0&&(T!==v.value||j==="progress"&&!T||j==="option"&&T!==S.value)&&Eu(v,"value",T,S.value,!1),"checked"in M&&(T=M.checked)!==void 0&&T!==v.checked&&Eu(v,"checked",T,S.checked,!1))}return v}function Qv(v,d,s){try{typeof v=="function"?v(d):v.current=d}catch(f){Yt.__e(f,s)}}function eg(v,d,s){var f,o;if(Yt.unmount&&Yt.unmount(v),(f=v.ref)&&(f.current&&f.current!==v.__e||Qv(f,null,d)),(f=v.__c)!=null){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(l){Yt.__e(l,d)}f.base=f.__P=null,v.__c=void 0}if(f=v.__k)for(o=0;o<f.length;o++)f[o]&&eg(f[o],d,s||typeof v.type!="function");s||v.__e==null||Vv(v.__e),v.__=v.__e=v.__d=void 0}function Lw(v,d,s){return this.constructor(v,s)}af=Yv.slice,Yt={__e:function(v,d,s,f){for(var o,l,c;d=d.__;)if((o=d.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(v)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(v,f||{}),c=o.__d),c)return o.__E=o}catch(g){v=g}throw v}},Xv=0,Lo.prototype.setState=function(v,d){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Hr({},this.state),typeof v=="function"&&(v=v(Hr({},s),this.props)),v&&Hr(s,v),v!=null&&this.__v&&(d&&this._sb.push(d),bv(this))},Lo.prototype.forceUpdate=function(v){this.__v&&(this.__e=!0,v&&this.__h.push(v),bv(this))},Lo.prototype.render=sf,ro=[],Fv=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nf=function(v,d){return v.__v.__b-d.__v.__b},xu.__r=0;var Si=globalThis&&globalThis.__assign||function(){return Si=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},Si.apply(this,arguments)};function cf(v){var d=v.x,s=v.y,f=v.width,o=v.height,l=v.radius,c=v.className,g=d-f/2,m=s-o/2,w=Si(Si({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},v),{x:g,y:m});return Ie.h("rect",Si({},w))}cf.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Io;(function(v){v.NODE="node",v.CIRCLE_NODE="circle-node",v.POLYGON_NODE="polygon-node",v.RECT_NODE="rect-node",v.HTML_NODE="html-node",v.TEXT_NODE="text-node",v.ELLIPSE_NODE="ellipse-node",v.DIAMOND_NODE="diamond-node",v.EDGE="edge",v.LINE_EDGE="line-edge",v.POLYLINE_EDGE="polyline-edge",v.BEZIER_EDGE="bezier-edge",v.GRAPH="graph"})(Io||(Io={}));function bu(v){var d=v.x,s=v.y,f=v.width,o=v.height;return{minX:d-f/2,minY:s-o/2,maxX:d+f/2,maxY:s+o/2}}function wv(v){var d=bu(v),s=v.radius,f=d.minX,o=d.minY,l=d.maxX,c=d.maxY;return[{x:f+s,y:o+s},{x:l-s,y:o+s},{x:l-s,y:c-s},{x:f+s,y:c-s}]}function xv(v){var d=v.point,s=v.beforeNode,f=v.afterNode,o=d.x,l=d.y,c={x:o,y:l},g=s.radius,m=bu(s),w=bu(f);if(o===m.minX){c.x=w.minX;var O=(l-s.y)/(s.height/2-g);O?c.y=f.y+(f.height/2-g)*O:c.y=f.y}else if(o===m.maxX){c.x=w.maxX;var O=(l-s.y)/(s.height/2-g);O?c.y=f.y+(f.height/2-g)*O:c.y=f.y}else if(l===m.minY){c.y=w.minY;var O=(o-s.x)/(s.width/2-g);O?c.x=f.x+(f.width/2-g)*O:c.x=f.x}else if(l===m.maxY){c.y=w.maxY;var O=(o-s.x)/(s.width/2-g);O?c.x=f.x+(f.width/2-g)*O:c.x=f.x}else{var S=wv(s),M=wv(f),j=bu(s),T=j.minX,D=j.minY,C=j.maxX,I=j.maxY,H=-1;if(o-T<g&&l-D<g?H=0:C-o<g&&l-D<g?H=1:C-o<g&&I-l<g?H=2:o-T<g&&D-l<g&&(H=3),H>-1){var J=Math.atan2(l-S[H].y,o-S[H].x);c.x=M[H].x+g*Math.cos(J),c.y=M[H].y+g*Math.sin(J)}}return c}function Ev(v){var d=v.point,s=v.beforeNode,f=v.afterNode,o=f.rx,l=f.ry,c=d,g=(d.y-s.y)/(d.x-s.x),m=o,w=l,O,S;return g>=1/0?(O=0,S=w):g<=-1/0?(O=0,S=-w):d.x-s.x>0?(O=m*w/Math.sqrt(w*w+m*m*g*g),S=m*w*g/Math.sqrt(w*w+m*m*g*g)):(O=-(m*w)/Math.sqrt(w*w+m*m*g*g),S=-(m*w*g)/Math.sqrt(w*w+m*m*g*g)),c={x:O+f.x,y:S+f.y},c}function Sv(v){var d=v.point,s=v.beforeNode,f=v.afterNode,o=d,l,c,g=d.x-s.x,m=d.y-s.y,w=s.rx,O=s.ry,S=Math.sqrt((w-Math.abs(g))*(w-Math.abs(g))+m*m)/Math.sqrt(w*w+O*O),M=f.rx,j=f.ry,T=Math.sqrt((M*M+j*j)*S*S*(M*M/(M*M+j*j))),D=T*(j/M);return g>=0?l=M-T:l=T-M,m>0?c=D:c=-D,o={x:l+f.x,y:c+f.y},o}var zw=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),oo=globalThis&&globalThis.__assign||function(){return oo=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},oo.apply(this,arguments)},Bw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},Gw=Ie.LogicFlowUtil.StepDrag,Hw=function(v){zw(d,v);function d(s){var f=v.call(this)||this;return f.updatePosition=function(o){var l=o.deltaX,c=o.deltaY,g=f.nodeModel,m=g.x,w=g.y;f.nodeModel.x=m+l/2,f.nodeModel.y=w+c/2,f.nodeModel.moveText(l/2,c/2)},f.getResize=function(o){var l=o.index,c=o.deltaX,g=o.deltaY,m=o.width,w=o.height,O=o.PCTResizeInfo,S=o.pct,M=S===void 0?1:S,j={width:m,height:w,deltaX:c,deltaY:g};if(O){var T=4,D=0,C=0;switch(l){case 0:C=(c*-1-g)/T;break;case 1:C=(c-g)/T;break;case 2:C=(c+g)/T;break;case 3:C=(c*-1+g)/T;break}C!==0&&(D=Math.round(C/O.ResizeBasis.basisHeight*1e5)/1e3),O.ResizePCT.widthPCT=Math.max(Math.min(O.ResizePCT.widthPCT+D,O.ScaleLimit.maxScaleLimit),O.ScaleLimit.minScaleLimit),O.ResizePCT.hightPCT=Math.max(Math.min(O.ResizePCT.hightPCT+D,O.ScaleLimit.maxScaleLimit),O.ScaleLimit.minScaleLimit);var I=Math.round(O.ResizePCT.widthPCT*O.ResizeBasis.basisWidth/100),H=Math.round(O.ResizePCT.hightPCT*O.ResizeBasis.basisHeight/100);switch(l){case 0:c=m-I,g=w-H;break;case 1:c=I-m,g=w-H;break;case 2:c=I-m,g=H-w;break;case 3:c=m-I,g=H-w;break}return j.width=I,j.height=H,j.deltaX=c/M,j.deltaY=g/M,j}switch(l){case 0:j.width=m-c*M,j.height=w-g*M;break;case 1:j.width=m+c*M,j.height=w-g*M;break;case 2:j.width=m+c*M,j.height=w+g*M;break;case 3:j.width=m-c*M,j.height=w+g*M;break}return j},f.updateRect=function(o){var l=o.deltaX,c=o.deltaY,g=f.nodeModel,m=g.id,w=g.x,O=g.y,S=g.width,M=g.height,j=g.radius,T=g.PCTResizeInfo,D=f.index,C=f.getResize({index:D,deltaX:l,deltaY:c,width:S,height:M,PCTResizeInfo:T,pct:1}),I=f.nodeModel,H=I.minWidth,J=I.minHeight,ie=I.maxWidth,q=I.maxHeight;if(C.width<H||C.width>ie||C.height<J||C.height>q){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:C.deltaX,deltaY:C.deltaY}),f.nodeModel.width=C.width,f.nodeModel.height=C.height,f.nodeModel.setProperties({nodeSize:{width:C.width,height:C.height}});var V=f.getNodeEdges(m),K={x:w,y:O,width:S,height:M,radius:j},z={x:f.nodeModel.x,y:f.nodeModel.y,width:f.nodeModel.width,height:f.nodeModel.height,radius:j},N={point:"",beforeNode:K,afterNode:z},B;V.sourceEdges.forEach(function(L){N.point=L.startPoint,B=xv(N),L.updateStartPoint(B)}),V.targetEdges.forEach(function(L){N.point=L.endPoint,B=xv(N),L.updateEndPoint(B)}),f.eventEmit({beforeNode:K,afterNode:z})},f.updateEllipse=function(o){var l=o.deltaX,c=o.deltaY,g=f.nodeModel,m=g.id,w=g.rx,O=g.ry,S=g.x,M=g.y,j=g.PCTResizeInfo,T=f.index,D=w,C=O,I=f.getResize({index:T,deltaX:l,deltaY:c,width:D,height:C,PCTResizeInfo:j,pct:1/2}),H=f.nodeModel,J=H.minWidth,ie=H.minHeight,q=H.maxWidth,V=H.maxHeight;if(I.width<J/2||I.width>q/2||I.height<ie/2||I.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),f.nodeModel.rx=I.width,f.nodeModel.ry=I.height,f.nodeModel.setProperties({nodeSize:{rx:I.width,ry:I.height}});var K=f.getNodeEdges(m),z={x:S,y:M},N={rx:I.width,ry:I.height,x:f.nodeModel.x,y:f.nodeModel.y},B={point:{},beforeNode:z,afterNode:N},L;K.sourceEdges.forEach(function(G){B.point=G.startPoint,L=Ev(B),G.updateStartPoint(L)}),K.targetEdges.forEach(function(G){B.point=G.endPoint,L=Ev(B),G.updateEndPoint(L)}),f.eventEmit({beforeNode:oo(oo({},z),{rx:w,ry:O}),afterNode:N})},f.updateDiamond=function(o){var l=o.deltaX,c=o.deltaY,g=f.nodeModel,m=g.id,w=g.rx,O=g.ry,S=g.x,M=g.y,j=g.PCTResizeInfo,T=f.index,D=w,C=O,I=f.getResize({index:T,deltaX:l,deltaY:c,width:D,height:C,PCTResizeInfo:j,pct:1/2}),H=f.nodeModel,J=H.minWidth,ie=H.minHeight,q=H.maxWidth,V=H.maxHeight;if(I.width<J/2||I.width>q/2||I.height<ie/2||I.height>V/2){f.dragHandler.cancelDrag();return}f.updatePosition({deltaX:I.deltaX,deltaY:I.deltaY}),f.nodeModel.rx=I.width,f.nodeModel.ry=I.height,f.nodeModel.setProperties({nodeSize:{rx:I.width,ry:I.height}});var K={x:S,y:M,rx:w,ry:O},z={rx:I.width,ry:I.height,x:f.nodeModel.x,y:f.nodeModel.y},N={point:{},beforeNode:K,afterNode:z},B,L=f.getNodeEdges(m);L.sourceEdges.forEach(function(G){N.point=G.startPoint,B=Sv(N),G.updateStartPoint(B)}),L.targetEdges.forEach(function(G){N.point=G.endPoint,B=Sv(N),G.updateEndPoint(B)}),f.eventEmit({beforeNode:K,afterNode:z})},f.eventEmit=function(o){var l=o.beforeNode,c=o.afterNode,g=f.nodeModel,m=g.id,w=g.modelType,O=g.type,S=oo({id:m,modelType:w,type:O},l),M=oo({id:m,modelType:w,type:O},c);f.graphModel.eventCenter.emit("node:resize",{oldNodeSize:S,newNodeSize:M})},f.onDragging=function(o){var l,c=o.deltaX,g=o.deltaY,m=f.graphModel.transformModel,w=f.nodeModel.modelType;l=Bw(m.fixDeltaXY(c,g),2),c=l[0],g=l[1],w===Io.RECT_NODE||w===Io.HTML_NODE?f.updateRect({deltaX:c,deltaY:g}):w===Io.ELLIPSE_NODE?f.updateEllipse({deltaX:c,deltaY:g}):w===Io.DIAMOND_NODE&&f.updateDiamond({deltaX:c,deltaY:g})},f.onDragEnd=function(){var o=f.graphModel.gridSize,l=o===void 0?1:o,c=l*Math.round(f.nodeModel.x/l),g=l*Math.round(f.nodeModel.y/l);f.nodeModel.moveTo(c,g)},f.index=s.index,f.nodeModel=s.model,f.graphModel=s.graphModel,f.state={},f.dragHandler=new Gw({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:1}),f}return d.prototype.getNodeEdges=function(s){for(var f=this.graphModel,o=f.edges,l=[],c=[],g=0;g<o.length;g++){var m=o[g];m.sourceNodeId===s?l.push(m):o[g].targetNodeId===s&&c.push(m)}return{sourceEdges:l,targetEdges:c}},d.prototype.render=function(){var s=this.props,f=s.x,o=s.y,l=s.index,c=s.model,g=c.getControlPointStyle();return Ei("g",{className:"lf-resize-control-"+l},Ei(cf,oo({className:"lf-node-control"},{x:f,y:o},g,{onMouseDown:this.dragHandler.handleMouseDown})))},d}(Lo),Xw=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Su=globalThis&&globalThis.__assign||function(){return Su=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},Su.apply(this,arguments)},Mu=function(v){Xw(d,v);function d(){var s=v.call(this)||this;return s.state={},s}return d.prototype.getResizeControl=function(){var s=this.props,f=s.model,o=s.graphModel,l=f.x,c=f.y,g=f.width,m=f.height,w={minX:l-g/2,minY:c-m/2,maxX:l+g/2,maxY:c+m/2},O=w.minX,S=w.minY,M=w.maxX,j=w.maxY,T=[{x:O,y:S},{x:M,y:S},{x:M,y:j},{x:O,y:j}];return T.map(function(D,C){return Ei(Hw,Su({index:C},D,{model:f,graphModel:o}))})},d.prototype.getGroupSolid=function(){var s=this.props.model,f=s.x,o=s.y,l=s.width,c=s.height,g=s.getResizeOutlineStyle();return Ei(cf,Su({fill:"none"},g,{x:f,y:o,width:l,height:c}))},d.prototype.render=function(){return Ei("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},d}(Lo),tg=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),Fw=function(v){tg(d,v);function d(s,f){var o=v.call(this,s,f)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return d.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.resize=function(s,f){console.log(s,f)},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},d}(Ie.RectNodeModel),Uw=function(v){tg(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,f=s.model,o=s.graphModel;return Ie.h(Mu,{model:f,graphModel:o})},d.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Ie.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},d}(Ie.RectNode),Au={type:"rect",view:Uw,model:Fw},ng=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(v){ng(d,v);function d(s,f){var o=v.call(this,s,f)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return d.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},d})(Ie.EllipseNodeModel);(function(v){ng(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,f=s.model,o=s.graphModel;return Ie.h(Mu,{model:f,graphModel:o})},d.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,f=s.model,o=s.graphModel.editConfigModel.isSilentMode;return Ie.h("g",null,this.getResizeShape(),f.isSelected&&!o?this.getControlGroup():"")},d})(Ie.EllipseNode);var rf=globalThis&&globalThis.__assign||function(){return rf=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},rf.apply(this,arguments)};function Yw(v){var d=v.fillOpacity,s=d===void 0?1:d,f=v.strokeWidth,o=f===void 0?1:f,l=v.strokeOpacity,c=l===void 0?1:l,g=v.fill,m=g===void 0?"transparent":g,w=v.stroke,O=w===void 0?"#000":w,S=v.points,M=v.className,j=M===void 0?"lf-basic-shape":M,T={fill:m,fillOpacity:s,strokeWidth:o,stroke:O,strokeOpacity:c,points:"",className:j};return T.points=S.map(function(D){return D.join(",")}).join(" "),Ie.h("polygon",rf({},T))}var rg=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),of=globalThis&&globalThis.__assign||function(){return of=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},of.apply(this,arguments)};(function(v){rg(d,v);function d(s,f){var o=v.call(this,s,f)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return d.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},d.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},d})(Ie.DiamondNodeModel);(function(v){rg(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,f=s.model,o=s.graphModel;return Ie.h(Mu,{model:f,graphModel:o})},d.prototype.getResizeShape=function(){var s=this.props.model,f=s.points,o=s.getNodeStyle();return Ie.h("g",null,Ie.h(Yw,of({},o,{points:f})))},d.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Ie.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},d})(Ie.DiamondNode);var og=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}();(function(v){og(d,v);function d(s,f){var o=v.call(this,s,f)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return d.prototype.initNodeData=function(s){v.prototype.initNodeData.call(this,s),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},d.prototype.getOutlineStyle=function(){var s=v.prototype.getOutlineStyle.call(this),f=this.graphModel.editConfigModel.isSilentMode;return f||(s.stroke="none",s.hover&&(s.hover.stroke="none")),s},d.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},d.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},d.prototype.enableProportionResize=function(s){if(s===void 0&&(s=!0),s){var f={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:f,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},d})(Ie.HtmlNodeModel);(function(v){og(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props,f=s.model,o=s.graphModel;return Ie.h(Mu,{model:f,graphModel:o})},d.prototype.getResizeShape=function(){return v.prototype.getShape.call(this)},d.prototype.getShape=function(){var s=this.props,f=s.model.isSelected,o=s.graphModel.editConfigModel.isSilentMode;return Ie.h("g",null,this.getResizeShape(),f&&!o?this.getControlGroup():"")},d})(Ie.HtmlNode);var ig=globalThis&&globalThis.__extends||function(){var v=function(d,s){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var l in o)o.hasOwnProperty(l)&&(f[l]=o[l])},v(d,s)};return function(d,s){v(d,s);function f(){this.constructor=d}d.prototype=s===null?Object.create(s):(f.prototype=s.prototype,new f)}}(),ju=globalThis&&globalThis.__assign||function(){return ju=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},ju.apply(this,arguments)},Vw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l},Ww=globalThis&&globalThis.__spread||function(){for(var v=[],d=0;d<arguments.length;d++)v=v.concat(Vw(arguments[d]));return v},jv=500,Pv=300,$w=-1e4,Kw=function(v){ig(d,v);function d(){var s=v!==null&&v.apply(this,arguments)||this;return s.isGroup=!0,s.unfoldedWidth=jv,s.unfoldedHight=Pv,s}return d.prototype.initNodeData=function(s){var f=this;v.prototype.initNodeData.call(this,s);var o=[];Array.isArray(s.children)&&(o=s.children),this.children=new Set(o),this.width=jv,this.height=Pv,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=$w,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){f.isFolded&&f.foldGroup(f.isFolded)})},d.prototype.getResizeOutlineStyle=function(){var s=v.prototype.getResizeOutlineStyle.call(this);return s.stroke="none",s},d.prototype.foldGroup=function(s){var f=this;this.setProperty("isFolded",s),this.isFolded=s,s?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=f.graphModel.getElement(l);c.isGroup&&!c.isFolded&&c.foldGroup(s),c.visible=!s,o=o.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(s,o)},d.prototype.getAnchorStyle=function(s){var f=v.prototype.getAnchorStyle.call(this,s);return f.stroke="transparent",f.fill="transparent",f.hover.fill="transparent",f.hover.stroke="transparent",f},d.prototype.foldEdge=function(s,f){var o=this;f.forEach(function(l,c){var g=l.id,m=l.sourceNodeId,w=l.targetNodeId,O=l.startPoint,S=l.endPoint,M=l.type,j=l.text,T=l.getProperties(),D={id:g+"__"+c,sourceNodeId:m,targetNodeId:w,startPoint:O,endPoint:S,type:M,properties:T,text:j==null?void 0:j.value};l.virtual&&o.graphModel.deleteEdgeById(l.id);var C=o.graphModel.group.getNodeGroup(w);C||(C=o.graphModel.getNodeModelById(w));var I=o.graphModel.group.getNodeGroup(m);I||(I=o.graphModel.getNodeModelById(m)),s&&l.visible!==!1&&(o.children.has(m)||o.id===m?(D.startPoint=void 0,D.sourceNodeId=o.id):(D.endPoint=void 0,D.targetNodeId=o.id),(C.id!==o.id||I.id!==o.id)&&o.createVirtualEdge(D),l.visible=!1),!s&&l.visible===!1&&(C&&C.isGroup&&C.isFolded?(D.targetNodeId=C.id,D.endPoint=void 0,o.createVirtualEdge(D)):I&&I.isGroup&&I.isFolded?(D.sourceNodeId=I.id,D.startPoint=void 0,o.createVirtualEdge(D)):l.visible=!0)})},d.prototype.createVirtualEdge=function(s){s.pointsList=void 0;var f=this.graphModel.addEdge(s);f.virtual=!0,f.text.editable=!1,f.isFoldedEdge=!0},d.prototype.isInRange=function(s){var f=s.x1,o=s.y1,l=s.x2,c=s.y2;return f>=this.x-this.width/2&&l<=this.x+this.width/2&&o>=this.y-this.height/2&&c<=this.y+this.height/2},d.prototype.isAllowMoveTo=function(s){var f=s.x1,o=s.y1,l=s.x2,c=s.y2;return{x:f>=this.x-this.width/2&&l<=this.x+this.width/2,y:o>=this.y-this.height/2&&c<=this.y+this.height/2}},d.prototype.setAllowAppendChild=function(s){this.setProperty("groupAddable",s)},d.prototype.addChild=function(s){this.children.add(s)},d.prototype.removeChild=function(s){this.children.delete(s)},d.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},d.prototype.getData=function(){var s=this,f=v.prototype.getData.call(this);f.children=[],this.children.forEach(function(l){var c=s.graphModel.getNodeModelById(l);c&&!c.virtual&&f.children.push(l)});var o=f.properties;return delete o.groupAddable,delete o.isFolded,f},d.prototype.getHistoryData=function(){var s=v.prototype.getData.call(this);s.children=Ww(this.children),s.isGroup=!0;var f=s.properties;return delete f.groupAddable,f.isFolded&&(s.x=s.x+this.unfoldedWidth/2-this.foldedWidth/2,s.y=s.y+this.unfoldedHight/2-this.foldedHeight/2),s},d.prototype.isAllowAppendIn=function(s){return!0},d.prototype.toBack=function(){this.zIndex--},d}(Au.model),qw=function(v){ig(d,v);function d(){return v!==null&&v.apply(this,arguments)||this}return d.prototype.getControlGroup=function(){var s=this.props.model,f=s.resizable,o=s.properties;return f&&!o.isFolded?v.prototype.getControlGroup.call(this):null},d.prototype.getAddableShape=function(){var s=this.props.model,f=s.width,o=s.height,l=s.x,c=s.y,g=s.radius,m=s.properties;if(!m.groupAddable)return null;var w=this.props.model.getNodeStyle().strokeWidth,O=this.props.model.getAddableOutlineStyle(),S=f+w+8,M=o+w+8;return Ie.h("rect",ju(ju({},O),{width:S,height:M,x:l-S/2,y:c-M/2,rx:g,ry:g}))},d.prototype.getFoldIcon=function(){var s=this.props.model,f=s.x-s.width/2+5,o=s.y-s.height/2+5;if(!s.foldable)return null;var l=Ie.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:s.properties.isFolded?"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" M"+(f+7)+","+(o+2)+" "+(f+7)+","+(o+10):"M "+(f+3)+","+(o+6)+" "+(f+11)+","+(o+6)+" "});return Ie.h("g",{},[Ie.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:s.x-s.width/2+5,y:s.y-s.height/2+5,onClick:function(){s.foldGroup(!s.properties.isFolded)}}),l])},d.prototype.getResizeShape=function(){return Ie.h("g",{},[this.getAddableShape(),v.prototype.getResizeShape.call(this),this.getFoldIcon()])},d}(Au.view);const lf={type:"group",view:qw,model:Kw};var Zw=-1e3,Mv=-1e4,Jw=function(){function v(d){var s=this,f=d.lf;this.topGroupZIndex=Mv,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(l){l.children&&l.children.forEach(function(c){s.nodeGroupMap.set(c,l.id)})})},this.appendNodeToGroup=function(o){var l=o.data,c=s.nodeGroupMap.get(l.id);if(c){var g=s.lf.getNodeModelById(c);g.removeChild(l.id),s.nodeGroupMap.delete(l.id),g.setAllowAppendChild(!1)}var m=s.lf.getNodeModelById(l.id),w=m.getBounds(),O=s.getGroup(w,l);if(O){var S=O.isAllowAppendIn(l);if(!S){s.lf.emit("group:not-allowed",{group:O.getData(),node:l});return}O.addChild(l.id),s.nodeGroupMap.set(l.id,O.id),O.setAllowAppendChild(!1),m.isGroup&&(l.children.forEach(function(M){s.nodeGroupMap.set(M,l.id)}),s.nodeSelected({data:l,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var l=o.data;l.children&&l.children.forEach(function(m){s.nodeGroupMap.delete(m),s.lf.deleteNode(m)});var c=s.nodeGroupMap.get(l.id);if(c){var g=s.lf.getNodeModelById(c);g.removeChild(l.id),s.nodeGroupMap.delete(l.id)}},this.setActiveGroup=function(o){var l=o.data,c=s.lf.getNodeModelById(l.id),g=c.getBounds(),m=s.getGroup(g,l);if(s.activeGroup&&s.activeGroup.setAllowAppendChild(!1),!(!m||c.isGroup&&m.id===l.id)){var w=m.isAllowAppendIn(l);w&&(s.activeGroup=m,s.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var l=o.data,c=o.isMultiple,g=o.isSelected,m=s.lf.getNodeModelById(l.id);if(s.toFrontGroup(m),s.topGroupZIndex>Zw){s.topGroupZIndex=Mv;for(var w=s.lf.graphModel.nodes.filter(function(D){return D.isGroup}).sort(function(D,C){return D.zIndex-C.zIndex}),O=0,S=0;S<w.length;S++){var M=w[S];M.zIndex!==O&&(s.topGroupZIndex++,O=M.zIndex),M.setZIndex(s.topGroupZIndex)}}if(c&&g)if(m.isGroup)m.children.forEach(function(D){var C=s.lf.graphModel.getElement(D);C.setSelected(!1)});else{var j=s.nodeGroupMap.get(l.id);if(j){var T=s.lf.getNodeModelById(j);T.isSelected&&m.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(s.topGroupZIndex++,o.setZIndex(s.topGroupZIndex),o.children&&o.children.forEach(function(l){var c=s.lf.getNodeModelById(l);s.toFrontGroup(c)}))},f.register(lf),this.lf=f,f.graphModel.addNodeMoveRules(function(o,l,c){if(o.isGroup){var g=s.getNodeAllChild(o);return f.graphModel.moveNodes(g,l,c,!0),!0}var m=f.getNodeModelById(s.nodeGroupMap.get(o.id));if(m&&m.isRestrict){var w=o.getBounds(),O=w.x1,S=w.y1,M=w.x2,j=w.y2,T=m.isAllowMoveTo({x1:O+l,y1:S+c,x2:M+l,y2:j+c});return T}return!0}),f.graphModel.group=this,f.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),f.on("node:delete",this.deleteGroupChild),f.on("node:dnd-drag,node:drag",this.setActiveGroup),f.on("node:click",this.nodeSelected),f.on("graph:rendered",this.graphRendered)}return v.prototype.getNodeAllChild=function(d){var s=this,f=[];return d.children&&d.children.forEach(function(o){f.push(o);var l=s.lf.getNodeModelById(o);l.isGroup&&(f=f.concat(s.getNodeAllChild(l)))}),f},v.prototype.getGroup=function(d,s){var f=this.lf.graphModel.nodes,o=f.filter(function(g){return g.isGroup&&g.isInRange(d)&&g.id!==s.id});if(o.length!==0){if(o.length===1)return o[0];for(var l=o[o.length-1],c=o.length-2;c>=0;c--)o[c].zIndex>l.zIndex&&(l=o[c]);return l}},v.prototype.getNodeGroup=function(d){var s=this.nodeGroupMap.get(d);if(s)return this.lf.getNodeModelById(s)},v.pluginName="group",v}(),Qw=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var Av=globalThis&&globalThis.__assign||function(){return Av=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},Av.apply(this,arguments)},kv=globalThis&&globalThis.__assign||function(){return kv=Object.assign||function(v){for(var d,s=1,f=arguments.length;s<f;s++){d=arguments[s];for(var o in d)Object.prototype.hasOwnProperty.call(d,o)&&(v[o]=d[o])}return v},kv.apply(this,arguments)},e1=globalThis&&globalThis.__read||function(v,d){var s=typeof Symbol=="function"&&v[Symbol.iterator];if(!s)return v;var f=s.call(v),o,l=[],c;try{for(;(d===void 0||d-- >0)&&!(o=f.next()).done;)l.push(o.value)}catch(g){c={error:g}}finally{try{o&&!o.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;class t1 extends Ie.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class n1 extends Ie.HtmlNode{}class r1 extends JO{}class o1 extends QO{}class i1 extends ew{}class a1 extends tw{getShape(){const d=this.props.model,s=d.getNodeStyle(),{x:f,y:o,r:l}=d;return Ie.h("circle",{...s,cx:f,cy:o,r:l,strokeWidth:5})}}class u1 extends nw{constructor(d,s){const{id:f,text:o,x:l,y:c}=d;d.id=f||`Gateway_${Xn()}`,d.text=o||{value:o||"",x:l,y:c+40},super(d,s),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class s1 extends rw{getShape(){const{model:d}=this.props,{x:s,y:f,width:o,height:l,points:c}=d,g=d.getNodeStyle();return Ie.h("g",{transform:`matrix(1 0 0 1 ${s-o/2} ${f-l/2})`},Ie.h("polygon",{...g,x:s,y:f,points:c}),Ie.h("line",{...g,x1:15,y1:15,x2:35,y2:35}),Ie.h("line",{...g,x1:35,y1:15,x2:15,y2:35}))}}class c1 extends Ie.PolygonNodeModel{constructor(d,s){const{id:f,text:o,x:l,y:c}=d;d.id=f||`Gateway_${Xn()}`,d.text=o||{value:o||"",x:l,y:c+40},super(d,s),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class l1 extends Ie.PolygonNode{getShape(){const{model:d}=this.props,{x:s,y:f,width:o,height:l,points:c}=d,g=d.getNodeStyle();return Ie.h("g",{transform:`matrix(1 0 0 1 ${s-o/2} ${f-l/2})`},Ie.h("polygon",{...g,x:s,y:f,points:c}),Ie.h("line",{...g,x1:10,y1:25,x2:40,y2:25}),Ie.h("line",{...g,x1:25,y1:10,x2:25,y2:40}))}}class f1 extends ow{}class p1 extends iw{}class d1 extends aw{isAllowConnectedAsSource(){return!1}}class h1 extends uw{}class y1 extends Lv{getTextPosition(){const{x:d,y:s}=this.text;return d&&s?{x:d,y:s}:this.dbClickPosition||{x:0,y:0}}}class v1 extends zv{}const g1=Au.model,b1=Au.view;class m1 extends g1{createId(){return`Note_${Xn()}`}initNodeData(d){super.initNodeData(d),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const d=super.getNodeStyle();return d.strokeDasharray="3 3",d.fill="transparent",d}}class _1 extends b1{}class O1 extends Lv{getEdgeStyle(){const d=super.getEdgeStyle();return d.strokeDasharray="3 3",d}getTextPosition(){const{x:d,y:s}=this.text;return d&&s?{x:d,y:s}:this.dbClickPosition||{x:0,y:0}}}class w1 extends zv{}const x1=lf.model;class E1 extends x1{createId(){return`Group_${Xn()}`}initNodeData(d){super.initNodeData(d),this.resizable=!0,this.foldable=!0}addChild(d){var s,f;super.addChild(d),(f=(s=this.graphModel.nodesMap[d])==null?void 0:s.model)==null||f.setProperty("groupKey",this.id)}removeChild(d){var s,f;super.removeChild(d),(f=(s=this.graphModel.nodesMap[d])==null?void 0:s.model)==null||f.deleteProperty("groupKey")}}class S1 extends lf.view{}class G1 extends Jw{constructor({lf:d}){super({lf:d}),d.register({type:"group",model:E1,view:S1}),d.off("node:delete",this.deleteGroupChild),d.on("node:delete",({data:s})=>{s.children&&s.children.forEach(f=>{this.nodeGroupMap.delete(f),this.lf.deleteNode(f)})})}}class j1 extends Ie.RectNodeModel{createId(){return`Activity_${Xn()}`}}class P1 extends Ie.RectNode{}const M1=[{type:"process",model:t1,view:n1},{type:"startEvent",model:r1,view:o1},{type:"endEvent",model:i1,view:a1},{type:"exclusiveGateway",model:u1,view:s1},{type:"parallelGateway",model:c1,view:l1},{type:"userTask",model:f1,view:p1},{type:"serviceTask",model:d1,view:h1},{type:"sequenceFlow",model:y1,view:v1},{type:"note",model:m1,view:_1},{type:"noteFlow",model:O1,view:w1},{type:"circulateTask",model:j1,view:P1}];class A1{constructor({lf:d}){d.batchRegister(M1),d.setDefaultEdgeType("sequenceFlow")}}nv(A1,"pluginName","bpmnExtend");export{A1 as B,R1 as C,L1 as D,i1 as E,G1 as G,C1 as I,I1 as M,m1 as N,t1 as P,z1 as S,f1 as U,B1 as a,n1 as b,r1 as c,o1 as d,a1 as e,u1 as f,s1 as g,c1 as h,l1 as i,p1 as j,d1 as k,Ie as l,h1 as m,y1 as n,v1 as o,_1 as p,O1 as q,w1 as r,E1 as s,S1 as t,j1 as u,P1 as v};
