import{O as T,b as w,c as h,ae as M,F as S,m as g,f as $,ad as B,y as K,S as _,R as N,T as f,ab as x,ac as b,B as v,af as A,H as D,t as V,v as P,x as j,k as H,I as F,Q as L,K as O}from"./framework.fab162e6.js";import{E as W,a as q}from"./index.c75b7c6b.js";import{p as I}from"./pick.6e01753f.js";import{i as E}from"./isEqual.b8a8bf1a.js";import{p as G}from"./pickBy.99e5d3ae.js";function Q(e,{treeRef:u}){const t=T("");w(t,c=>{var a;(a=u.value)==null||a.filter(c)});const n=h(()=>Array.isArray(e.modelValue)?e.modelValue.length?"":e.placeholder:typeof e.modelValue=="string"?e.modelValue?"":e.placeholder:"");return{...I(e,Object.keys(W.props)),placeholder:n,modelValue:t,"onUpdate:modelValue":c=>t.value=c}}function U(e,{emit:u,treeRef:t}){const n=h(()=>{var a,i,l;if(e.multiple)return((a=t.value)==null?void 0:a.getCheckedNodes(!e.checkStrictly))??[];{const o=(l=(i=t.value)==null?void 0:i.getNode(e.modelValue))==null?void 0:l.data;return o?[o]:[]}});function c(a){const i=e.multiple?e.modelValue.filter(l=>l!==a[e.nodeKey]):"";u("update:modelValue",i)}return{checkedNodes:n,onTagClose:c}}function J(e,{emit:u,treeRef:t}){const n=M();S(()=>{w(()=>e.modelValue,()=>{e.multiple?g(()=>{var l,o;E((l=t.value)==null?void 0:l.getCheckedKeys(),e.modelValue||[])||(o=t.value)==null||o.setCheckedKeys(e.modelValue)}):g(()=>{var l,o;E((l=t.value)==null?void 0:l.getCurrentKey(),e.modelValue)||(o=t.value)==null||o.setCurrentKey(e.modelValue||void 0)})},{immediate:!0,deep:!0})});function c(l,o,s){if(e.multiple&&e.checkOnClickNode)return;const y=l[e.nodeKey];!e.multiple&&(e.checkStrictly||o.isLeaf)?u("update:modelValue",y):e.expandOnClickNode&&s.proxy.handleExpandIconClick(),g(()=>{var d,r;(d=t.value)==null||d.setCurrentKey(e.modelValue||void 0),(r=n.onNodeClick)==null||r.call(n,l,o,s)})}function a(l,{checkedKeys:o}){var s;e.multiple&&(e.checkStrictly?u("update:modelValue",o):u("update:modelValue",(s=t.value)==null?void 0:s.getCheckedKeys(!0)),g(()=>{var y,d,r,k,p,C;(y=t.value)==null||y.setCheckedKeys(e.modelValue),(C=n.onCheck)==null||C.call(n,l,{checkedKeys:(d=t.value)==null?void 0:d.getCheckedKeys(),checkedNodes:(r=t.value)==null?void 0:r.getCheckedNodes(),halfCheckedKeys:(k=t.value)==null?void 0:k.getHalfCheckedKeys(),halfCheckedNodes:(p=t.value)==null?void 0:p.getHalfCheckedNodes()})}))}function i(l,o,s){return e.filterNodeMethod?e.filterNodeMethod(l,o,s):l?o.label.includes(l):!0}return{...I(e,Object.keys(q.props)),showCheckbox:h(()=>e.multiple),highlightCurrent:h(()=>!e.multiple),expandOnClickNode:h(()=>!e.checkStrictly&&e.expandOnClickNode),filterNodeMethod:i,onNodeClick:c,onCheck:a}}const X={class:"ep-tree"},oe=$({__name:"index",props:{data:{},emptyText:{},renderAfterExpand:{type:Boolean},nodeKey:{default:"value"},checkStrictly:{type:Boolean},expandOnClickNode:{type:Boolean},defaultExpandAll:{type:Boolean},checkOnClickNode:{type:Boolean},checkDescendants:{type:Boolean},autoExpandParent:{type:Boolean},defaultCheckedKeys:{},defaultExpandedKeys:{},currentNodeKey:{},renderContent:{},showCheckbox:{type:Boolean},draggable:{type:Boolean},allowDrag:{},allowDrop:{},props:{},lazy:{type:Boolean},highlightCurrent:{type:Boolean},load:{},filterNodeMethod:{},accordion:{type:Boolean},indent:{},icon:{},id:{},size:{},disabled:{type:Boolean},type:{},resize:{},autosize:{},autocomplete:{},formatter:{},parser:{},placeholder:{default:"输入关键字搜索"},form:{},readonly:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},showWordLimit:{type:Boolean},suffixIcon:{},prefixIcon:{},containerRole:{},label:{},tabindex:{},validateEvent:{type:Boolean},inputStyle:{},autofocus:{type:Boolean},modelValue:{},multiple:{type:Boolean},tagType:{default:"info"}},emits:["update:modelValue"],setup(e,{expose:u,emit:t}){const n=e,c=t,a=T(),i=J(n,{emit:c,treeRef:a}),l=Q(n,{treeRef:a}),{checkedNodes:o,onTagClose:s}=U(n,{emit:c,treeRef:a}),y=B({});return u(y),S(()=>{const d=G(a.value??{},r=>typeof r=="function");Object.assign(y,d)}),(d,r)=>{const k=V("el-tag"),p=V("el-space"),C=V("el-input"),z=V("el-tree");return K(),_("div",X,[N(C,x(b(B(v(l)))),{prefix:f(()=>[N(p,{wrap:""},{default:f(()=>[(K(!0),_(P,null,j(v(o),m=>(K(),H(k,{key:m[d.nodeKey],closable:"",type:d.tagType,onClose:Y=>v(s)(m)},{default:f(()=>[F(L(m.label),1)]),_:2},1032,["type","onClose"]))),128))]),_:1})]),_:1},16),N(z,D({ref_key:"treeRef",ref:a},B(v(i))),A({_:2},[d.$slots.default?{name:"default",fn:f(m=>[O(d.$slots,"default",x(b(m)))]),key:"0"}:void 0,d.$slots.empty?{name:"empty",fn:f(()=>[O(d.$slots,"empty")]),key:"1"}:void 0]),1040)])}}});export{oe as _};
