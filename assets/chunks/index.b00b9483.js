import{d as h,t as S,J as v,o as g,b as D,w as i,N as d,l as O,h as y,$ as N,S as j,g as K}from"./framework.f01dabf7.js";import{a as q}from"./index.cd412afd.js";const R=[{label:"",labelWidth:0,prop:"assignee",type:"dynamic",children:{rowKey:"type",addBtn:!0,column:[{label:"类型",prop:"type",type:"select",width:120,dicData:[{label:"用户",value:"user"},{label:"部门",value:"dept"},{label:"岗位",value:"post"},{label:"动态",value:"dynamic"},{label:"指定节点",value:"userTask"},{label:"自定义",value:"custom"}]},{label:"值",prop:"value"}]},value:[]}],p=[{label:"节点id",prop:"id",readonly:!0},{label:"节点名称",prop:"name"},{label:"节点描述",prop:"desc"}],C=h({__name:"flow-text",setup(t){return(r,s)=>S(r.$attrs.modelValue)}}),k=[{label:"",labelWidth:0,prop:"button",value:[],type:"dynamic",children:{addBtn:!1,delBtn:!1,column:[{prop:"_index",hide:!0},{label:"按钮名",prop:"name",width:100,component:C},{label:"按钮值",prop:"buttonKey",width:100,component:C},{label:"显示条件",prop:"display",type:"select",dataType:"string",multiple:!0},{label:"审批窗口",prop:"approval",type:"select",dataType:"string",multiple:!0}]}}],$=[{label:"",labelWidth:0,prop:"circulate",type:"dynamic",children:{rowKey:"type",addBtn:!0,column:[{label:"类型",prop:"type",type:"select",width:120,dicData:[{label:"用户",value:"user"},{label:"部门",value:"dept"},{label:"岗位",value:"post"},{label:"动态",value:"dynamic"},{label:"指定节点",value:"userTask"},{label:"自定义",value:"custom"}]},{label:"值",prop:"value"}]},value:[]}],E=h({__name:"flow-form-property",props:{modelValue:{}},setup(t){const r=t,{modelValue:s}=q(r),c={rowKey:"prop",menu:!1,defaultExpandAll:!0,addBtn:!1,refreshBtn:!1,columnBtn:!1,column:[{label:"字段",prop:"label"},{label:"属性",prop:"prop"},{label:"显示",prop:"display",width:40},{label:"禁用",prop:"disabled",width:40},{label:"详情",prop:"detail",width:40},{label:"只读",prop:"readonly",width:40},{label:"必填",prop:"required",width:40}]};return(n,a)=>{const o=v("el-checkbox"),f=v("avue-crud");return g(),D(f,{class:"hide-menu",data:O(s)||[],option:c},{display:i(({row:e})=>[d(o,{modelValue:e.display,"onUpdate:modelValue":l=>e.display=l},null,8,["modelValue","onUpdate:modelValue"])]),readonly:i(({row:e})=>[d(o,{modelValue:e.readonly,"onUpdate:modelValue":l=>e.readonly=l},null,8,["modelValue","onUpdate:modelValue"])]),disabled:i(({row:e})=>[d(o,{modelValue:e.disabled,"onUpdate:modelValue":l=>e.disabled=l},null,8,["modelValue","onUpdate:modelValue"])]),detail:i(({row:e})=>[d(o,{modelValue:e.detail,"onUpdate:modelValue":l=>e.detail=l},null,8,["modelValue","onUpdate:modelValue"])]),required:i(({row:e})=>[d(o,{modelValue:e.required,"onUpdate:modelValue":l=>e.required=l},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["data"])}}}),m=[{label:"",labelWidth:0,prop:"formProperty",component:E,type:"dynamic",value:[]}],M=[{label:"网关类型",prop:"inout",type:"radio",button:!0,value:"in",dicData:[{label:"进",value:"in"},{label:"出",value:"out"}]},{label:"完成条件",prop:"completionCondition",type:"slider",showInput:!0,showInputControls:!1,labelPosition:"top",step:.01,max:1,value:0,labelTip:"任务完成的百分比，如2人接收，需同时完成才往下进行时=100%，只需1人完成时=50%",span:23,offset:1}],x=[{label:"多实例类型",prop:"multiInstanceType",tip:"选择后节点变更为多人任务",type:"select",dicData:[{label:"并行审批",value:"parallel",desc:"同时接收审批"},{label:"顺序审批",value:"sequential",desc:"按顺序审批"}]},{label:"完成条件",prop:"completionCondition",type:"slider",showInput:!0,showInputControls:!1,labelPosition:"top",step:.01,max:1,value:0,labelTip:"任务完成的百分比，如2人接收，需同时完成才往下进行时=100%，只需1人完成时=50%",span:23,offset:1},{label:"回收任务",prop:"isRecall",type:"switch",value:!1,labelTip:"满足完成条件时，该节点未审批任务是否回收，回收的任务仅保留记录，对应人员无需再办理"}],A=[{label:"节点id",prop:"id",readonly:!0},{label:"节点描述",prop:"name",type:"textarea"}],U=Symbol("flowDesignState");function ee(t){const r=q(t,void 0,{passive:!0}),{lf:s,modelValue:c,elementData:n,formOptions:a,formData:o,formOption:f,formDefaults:e,dataOptions:l}=r,P=y(!1),I=y(!1);function W(w){var _,V,T;const b=(_=n.value)==null?void 0:_.id;b&&((V=s.value)==null||V.setProperties(b,w)),b&&((T=s.value)==null||T.updateText(b,w.name))}const F=y(),G={lf:s,graphData:c,elementData:n,formRef:F,formData:o,formDefaults:e,formLoading:P,formOption:f,formOptions:a,editorVisible:I,dataOptions:l,onUpdateFormData:W};return N(U,G),G}function L(){return j(U)}const B=h({__name:"flow-node-select",props:{filterType:{},dic:{}},setup(t){const r=t,{lf:s}=L(),c=K(()=>{var n;return(n=s.value)==null?void 0:n.graphModel.nodes.filter(a=>r.filterType?r.filterType.includes(a.type):!0).map(a=>({label:a.text.value,value:a.id,desc:a.id}))});return(n,a)=>{const o=v("avue-select");return g(),D(o,{dic:c.value},null,8,["dic"])}}}),J=[{label:"跳过第一节点",prop:"skipFirstNode",type:"switch",labelWidth:100,value:!0},{label:"默认驳回节点",prop:"rollbackNode",type:"select",labelWidth:100,component:B,params:{filterType:"userTask"}},{label:"优先级字段",prop:"priority",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0},{label:"表单标题",prop:"formTitle",separator:"-",type:"select",dataType:"string",multiple:!0,filterable:!0,allowCreate:!0,defaultFirstOption:!0},{label:"标题分隔符",prop:"formTitleSeparator",value:"-",control(t){return{formTitle:{separator:t}}}}],u=[{label:"",labelWidth:0,prop:"property",type:"dynamic",children:{column:[{label:"属性名",prop:"name"},{label:"属性值",prop:"value",type:"textarea",minRows:1}]},value:[]}],z=[{label:"条件表达式",prop:"conditionsequenceflow"},{label:"是否为默认分支",prop:"defaultConditions",labelWidth:120,type:"switch",value:!1}],H=[{label:"",labelWidth:0,prop:"serial",component:"avue-form",option:{menuBtn:!1,span:24,column:[{label:"名称",prop:"name"},{label:"前缀",prop:"prefix"},{label:"日期格式",prop:"dateFormat"},{label:"后缀位数",prop:"suffixLength"},{label:"初始数值",prop:"startSequence"},{label:"连接符",prop:"connector"},{label:"重置周期",prop:"cycle",type:"select",dicData:[{label:"不重置",value:"none"},{label:"按天重置",value:"day"},{label:"按周重置",value:"week"},{label:"按月重置",value:"month"},{label:"按年重置",value:"year"}]}]}}],Q=[{label:"类",prop:"className"},{label:"异步",prop:"isAsync",type:"switch",value:!1}],X=[{label:"驳回节点",prop:"rollbackNode",type:"select",component:B,params:{filterType:"userTask"}},{label:"重新提交后回到驳回人",prop:"backToRejecter",type:"switch",value:!1}],le=[{label:"基本配置",prop:"base",column:p}],ae={startEvent:[{label:"基本配置",prop:"baseGroup",column:p},{label:"表单配置",prop:"formPropertyGroup",collapse:!1,column:m},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],endEvent:[{label:"基本配置",prop:"baseGroup",column:p},{label:"表单配置",prop:"formPropertyGroup",collapse:!1,column:m},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],userTask:[{label:"基本配置",prop:"baseGroup",column:[...p,...X]},{label:"人员配置",prop:"assigneeGroup",column:R},{label:"多实例配置",prop:"multiInstanceGroup",collapse:!1,column:x},{label:"按钮配置",prop:"buttonGroup",collapse:!1,column:k},{label:"表单配置",prop:"formPropertyGroup",collapse:!1,column:m},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],serviceTask:[{label:"基本配置",prop:"baseGroup",column:p},{label:"服务配置",prop:"serviceGroup",column:Q},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],circulateTask:[{label:"基本配置",prop:"baseGroup",column:p},{label:"传阅配置",prop:"circulateGroup",column:$},{label:"按钮配置",prop:"buttonGroup",collapse:!1,column:k},{label:"表单配置",prop:"formPropertyGroup",collapse:!1,column:m}],sequenceFlow:[{label:"基本配置",prop:"baseGroup",column:p},{label:"条件配置",prop:"sequenceFlowGroup",column:z},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],parallelGateway:[{label:"基本配置",prop:"baseGroup",column:p},{label:"网关配置",prop:"baseGroup",column:M}],process:[{label:"流程配置",prop:"baseGroup",column:J},{label:"流水号配置",prop:"serialGroup",column:H},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],group:[{label:"基本配置",prop:"baseGroup",column:p},{label:"多实例配置",prop:"multiInstanceGroup",collapse:!1,column:x},{label:"扩展属性",prop:"propertyGroup",collapse:!1,column:u}],note:[{label:"基本配置",prop:"baseGroup",column:A}]};export{B as _,le as a,L as b,R as c,ae as d,p as e,k as f,$ as g,m as h,U as i,M as j,u as k,H as l,x as m,A as n,Q as o,J as p,X as q,z as s,ee as u};
