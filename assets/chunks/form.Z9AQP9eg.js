import"./index.o5MRxqVR.js";import{t as N,a as H}from"./index.qJIJBhna.js";import{a as U,p as O,s as z,b as A,_ as u,c as I,i as W}from"./tree.bWVx2IeZ.js";import"./index.9cJsAPUu.js";import{a as L}from"./index.DT9FHtDl.js";import{E as C}from"./index.0FipMUhp.js";import{d as q,h as P,g as M,D as v,c as D,F as $,E as R,m as f,I as g,w as k,P as G,o as b,a as E,y as J,b as h,M as _,a5 as T}from"./framework.9dEYo5Bo.js";function K(e,o=[void 0,null],l=[]){if(typeof e!="object"||e===null)return e;const t={};for(const a in e){const r=o.every(i=>e[a]!==i),m=l.every(i=>!a.includes(i));r&&m&&(t[a]=e[a])}return t}function B(e,o=[void 0,null],l=[]){if(typeof e!="object")return e;if(Array.isArray(e))return e.map(a=>B(a,o,l));const t={};for(const a in e)if(e[a]&&typeof e[a]=="object")t[a]=B(e[a],o,l);else{const r=o.every(i=>e[a]!==i),m=l.every(i=>!a.includes(i));r&&m&&(t[a]=e[a])}return t}function Q(e){var o;return((o=Object.prototype.toString.call(e).match(/\[object (.*)\]/))==null?void 0:o[1])??""}const X=q({__name:"index",props:{modelValue:{default:()=>[]}},setup(e){const o=e,{modelValue:l}=L(o),t=P(!1),a=P(-1),r=M({get(){var d;return((d=l.value)==null?void 0:d[a.value])??{}},set(d){if(l.value&&a.value!==-1){const c=K(d,[void 0,null,""],["$"]);l.value[a.value]=c}}});async function m(){var d;!l.value&&(l.value=[]),await G(),(d=l.value)==null||d.push({})}function i(d,c){a.value=c,t.value=!0}function s(d,c){var V;(V=l.value)==null||V.splice(c,1)}const p=[{label:"否",value:!1},{label:"是",value:!0}],y={menuBtn:!1,span:24,labelWidth:100,column:[{label:"触发方式",prop:"trigger",type:"select",dicData:[{label:"值变化",value:"change"},{label:"聚焦时",value:"focus"},{label:"失焦时",value:"blur"}]},{label:"值类型",prop:"type",type:"select",dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"整数",value:"integer"},{label:"浮点数",value:"float"},{label:"日期",value:"date"},{label:"URL地址",value:"url"},{label:"十六进制",value:"hex"},{label:"邮箱",value:"email"},{label:"任意类型",value:"any"}]},{label:"是否必填",prop:"required",type:"radio",button:!0,dicData:p},{label:"错误消息",prop:"message"},{label:"正则表达式",prop:"pattern",prepend:"/",append:"/"},{label:"最小",prop:"min",type:"number"},{label:"最大",prop:"max",type:"number"},{label:"长度",prop:"len",type:"number"},{label:"禁止空白符",prop:"whitespace",type:"radio",button:!0,dicData:p},{label:"自定义校验函数",prop:"validator",labelWidth:120,component:U,tooltip:!0,width:"400px",defaultValue:`(rule, value, callback, source, options) => {

}`}]};return(d,c)=>{const V=v("avue-form"),x=v("el-drawer");return b(),D($,null,[(b(!0),D($,null,R(f(l),(n,w)=>(b(),D("div",{key:w},[g(f(C),{icon:"el-icon-setting",onClick:F=>i(n,w)},{default:k(()=>[E(" 配置规则 ")]),_:2},1032,["onClick"]),g(f(C),{text:"",icon:"el-icon-delete",onClick:F=>s(n,w)},null,8,["onClick"])]))),128)),g(f(C),{icon:"el-icon-plus",onClick:m},{default:k(()=>[E(" 添加规则 ")]),_:1}),g(x,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=n=>t.value=n),title:"配置规则","append-to-body":"","destroy-on-close":""},{default:k(()=>[g(V,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=n=>r.value=n),option:y},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}}),Y={style:{display:"flex"}},Z=q({__name:"index",props:{modelValue:{},tableData:{},prop:{},types:{},defaultValueType:{}},setup(e){const o=e,{modelValue:l}=L(o),t=P(o.defaultValueType??"string");J(l,s=>{s!==void 0&&(t.value=Q(s).toLowerCase())},{immediate:!0});function a(){l.value=void 0}const r=[{label:"str",value:"string"},{label:"num",value:"number"},{label:"boo",value:"boolean"},{label:"arr",value:"array"},{label:"obj",value:"object"}],m=M(()=>{var s;return(s=o.types)!=null&&s.length?r.filter(p=>{var y;return(y=o.types)==null?void 0:y.includes(p.value)}):r}),i=[{label:"true",value:!0},{label:"false",value:!1}];return(s,p)=>{const y=v("el-input"),d=v("el-input-number"),c=v("avue-select"),V=v("el-option"),x=v("el-select");return b(),D("div",Y,[t.value==="string"?(b(),h(y,_({key:0,modelValue:f(l),"onUpdate:modelValue":p[0]||(p[0]=n=>T(l)?l.value=n:null)},s.$attrs),null,16,["modelValue"])):t.value==="number"?(b(),h(d,_({key:1,modelValue:f(l),"onUpdate:modelValue":p[1]||(p[1]=n=>T(l)?l.value=n:null),"controls-position":"right"},s.$attrs),null,16,["modelValue"])):t.value==="boolean"?(b(),h(c,_({key:2,modelValue:f(l),"onUpdate:modelValue":p[2]||(p[2]=n=>T(l)?l.value=n:null)},s.$attrs,{dic:i}),null,16,["modelValue"])):(b(),h(U,_({key:3,modelValue:f(l),"onUpdate:modelValue":p[3]||(p[3]=n=>T(l)?l.value=n:null),"value-type":t.value,tooltip:""},s.$attrs),null,16,["modelValue","value-type"])),g(x,{modelValue:t.value,"onUpdate:modelValue":p[4]||(p[4]=n=>t.value=n),clearable:!1,"suffix-icon":"",style:{width:"50px","flex-shrink":"0"},onChange:a},{default:k(()=>[(b(!0),D($,null,R(m.value,n=>(b(),h(V,{key:n.value,label:n.label,value:n.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])}}}),S=[{label:"字段标识",prop:"prop"},{label:"标签标题",prop:"label"},{label:"标签宽度",prop:"labelWidth",labelTip:'"auto"或数字'},{label:"标签位置",prop:"labelPosition",type:"radio",button:!0,dicData:O},{label:"组件尺寸",prop:"size",type:"radio",button:!0,dicData:z},{label:"数据类型",prop:"dataType",type:"select",labelTip:'会将数据转换为对应选择的数据类型，如：[1,2,3]=>"1,2,3"',dicData:[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"数组",value:"array"}]},{label:"表单项栅格",prop:"span",type:"number",min:1,max:24},{label:"字段提示",prop:"tip"},{label:"字段提示位置",prop:"tipPlacement",type:"select",dicData:A},{label:"标签提示",prop:"labelTip"},{label:"标签提示位置",prop:"labelTipPlacement",type:"select",dicData:A},{label:"默认值",prop:"value",component:Z},{label:"占位内容",prop:"placeholder"},{label:"是否可清空",prop:"clearable",component:u,defaultValue:!0},{label:"详情模式",prop:"detail",component:u,defaultValue:!1},{label:"是否只读",prop:"readonly",component:u,defaultValue:!1},{label:"是否禁用",prop:"disabled",component:u,defaultValue:!1},{label:"是否可见",prop:"display",component:u,defaultValue:!0},{label:"校验规则",prop:"rules",component:X}],j=[{labelWidth:0,type:"title",modelValue:"子表单/表格属性"},{label:"宽度",prop:"width",type:"number"},{label:"最小宽度",prop:"minWidth",type:"number"},{label:"固定列",prop:"fixed",type:"radio",button:!0,dicData:[{label:"左",value:"left"},{label:"右",value:"right"}]},{label:"超长省略",prop:"overHidden",component:u,defaultValue:!1},{label:"表头对齐方式",prop:"headerAlign",type:"radio",button:!0,dicData:I},{label:"对齐方式",prop:"align",type:"radio",button:!0,dicData:I},{label:"是否可搜索",prop:"search",component:u,defaultValue:!1},{label:"是否隐藏",prop:"hide",component:u,defaultValue:!1}],ue=({elementTree:e,activeElement:o})=>{var a;const l=N([e],(r,m,i)=>({...r,parent:i})),t=H(l,r=>r.id===o.id);return((a=t==null?void 0:t.parent)==null?void 0:a.name)==="dynamic"?[...S,...j]:S},re={name:"form",title:"表单",isContainer:!0,disabledActions:["copy","delete","clear"],disabledSettings:["base","event","advance"],settings:[{label:"标签位置",prop:"labelPosition",type:"radio",button:!0,dicData:O},{label:"标签宽度",prop:"labelWidth",labelTip:'"auto"或数字'},{label:"标签后缀",prop:"labelSuffix"},{label:"显示按钮",prop:"menuBtn",type:"switch",value:!1,control(e,o){return e||(o.submitBtn=!1,o.emptyBtn=!1),{submitBtn:{display:e},emptyBtn:{display:e},menuSpan:{display:e},menuPosition:{display:e}}}},{label:"显示提交按钮",prop:"submitBtn",type:"switch",value:!1,control(e){return{submitIcon:{display:!!e},submitText:{display:!!e}}}},{label:"提交按钮图标",prop:"submitIcon",type:"icon",iconList:W},{label:"提交按钮文字",prop:"submitText"},{label:"显示清空按钮",prop:"emptyBtn",type:"switch",value:!1,control(e){return{emptyIcon:{display:!!e},emptyText:{display:!!e}}}},{label:"清空按钮图标",prop:"emptyIcon",type:"icon",iconList:W},{label:"清空按钮文字",prop:"emptyText"},{label:"按钮栅格",prop:"menuSpan",type:"number"},{label:"按钮位置",prop:"menuPosition",type:"radio",button:!0,dicData:I},{label:"分组转标签",prop:"tabs",component:u,defaultValue:!1},{label:"详情模式",prop:"detail",component:u,defaultValue:!1},{label:"表单只读",prop:"readonly",component:u,defaultValue:!1},{label:"表单禁用",prop:"disabled",component:u,defaultValue:!1},{label:"表单项栅格",prop:"span",type:"number",value:24},{label:"表单项间隔",prop:"gutter",type:"number"},{label:"组件尺寸",prop:"size",type:"radio",button:!0,dicData:z},{label:"校验图标",prop:"statusIcon",component:u,defaultValue:!1},{label:"隐藏星号",prop:"hideRequiredAsterisk",component:u,defaultValue:!1},{label:"星号的位置",prop:"requireAsteriskPosition",type:"radio",button:!0,dicData:[{label:"左",value:"left"},{label:"右",value:"right"}]},{label:"滚动到错误项",prop:"scrollToError",labelWidth:120,labelTip:"当校验失败时，滚动到第一个错误表单项",component:u,defaultValue:!1},{label:"滚动配置",prop:"scrollIntoViewOptions",labelTip:"当校验有失败结果时，滚动到第一个失败的表单项目时的滚动配置 https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollIntoView",component:U,tooltip:!0,defaultValue:"{}"}]};export{X as _,B as a,ue as b,Z as c,re as f};
