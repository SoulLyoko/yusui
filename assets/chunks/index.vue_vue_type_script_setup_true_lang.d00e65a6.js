var Vj=Object.defineProperty;var Wj=(n,a,i)=>a in n?Vj(n,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[a]=i;var _l=(n,a,i)=>(Wj(n,typeof a!="symbol"?a+"":a,i),i);import{g as Ui,I as Yj}from"./data.ee8ef805.js";import{d as Kj,a2 as Zj}from"../flow-design_flow-modeler_index.md.a3071f69.js";import{n as Jj,f as Db,r as Qj,b as qj,D as Es,h as _c,A as yv,B as wc,G as Nc,k as eB,u as si,af as gv,z as tB,e as kA,w as UA,C as rB,i as nB}from"./framework.6c76c79f.js";import{d as zA}from"./theme.4fca28a1.js";import{b as oB,c8 as iB,c9 as aB,ca as sB,c7 as uB,ar as dv,a7 as Ac,cb as Cb}from"../composables_use-crud_index.md.64a07113.js";import{eC as lB}from"../app.d2f304ba.js";var fB="[object String]";function Lb(n){return typeof n=="string"||!oB(n)&&iB(n)&&aB(n)==fB}var cB=0;function HA(n){var a=++cB;return sB(n)+a}const XA={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}};function dB({lf:n,graphData:a,elementData:i,formData:u,formLoading:o,formOption:l,formOptions:c,editorVisible:h}){var m,y,S,x,T,w,N;async function p({data:M,isForce:D}={data:void 0,isForce:!1}){var V,Ee,ge,ye,ce,xe;const W=(V=n.value)==null?void 0:V.graphModel.nodes.find(j=>j.type==="process");!M&&(W!=null&&W.id)&&(M=(Ee=n.value)==null?void 0:Ee.getNodeDataById(W.id)),!((M==null?void 0:M.id)===((ge=i.value)==null?void 0:ge.id)&&!D)&&(M.type!=="process"&&((ye=n.value)==null||ye.selectElementById(M.id)),o.value=!0,i.value=M,l.value.group=((ce=c.value)==null?void 0:ce[M.type])??Kj,u.value={...M.properties,id:M.id,name:((xe=M.text)==null?void 0:xe.value)||""},await Jj(),o.value=!1)}(m=n.value)==null||m.on("element:click",p),(y=n.value)==null||y.on("blank:click",p),(S=n.value)==null||S.on("node:add",p),(x=n.value)==null||x.on("node:dnd-add",p),(T=n.value)==null||T.on("node:delete",()=>p()),(w=n.value)==null||w.on("history:change",()=>{var M;a.value=(M=n.value)==null?void 0:M.getGraphData()}),(N=n.value)==null||N.on("custom:edit-click",()=>{h.value=!0})}var $t={},hB={get exports(){return $t},set exports(n){$t=n}};(function(n,a){(function(u,o){n.exports=o()})(window,function(){return function(i){var u={};function o(l){if(u[l])return u[l].exports;var c=u[l]={i:l,l:!1,exports:{}};return i[l].call(c.exports,c,c.exports,o),c.l=!0,c.exports}return o.m=i,o.c=u,o.d=function(l,c,h){o.o(l,c)||Object.defineProperty(l,c,{enumerable:!0,get:h})},o.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},o.t=function(l,c){if(c&1&&(l=o(l)),c&8||c&4&&typeof l=="object"&&l&&l.__esModule)return l;var h=Object.create(null);if(o.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:l}),c&2&&typeof l!="string")for(var p in l)o.d(h,p,function(m){return l[m]}.bind(null,p));return h},o.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return o.d(c,"a",c),c},o.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},o.p="",o(o.s=215)}([function(i,u,o){(function(l,c){o.d(u,"a",function(){return k}),o.d(u,"b",function(){return Ji}),o.d(u,"c",function(){return Wo}),o.d(u,"d",function(){return jr}),o.d(u,"e",function(){return Kt}),o.d(u,"f",function(){return _t}),o.d(u,"g",function(){return As}),o.d(u,"h",function(){return Zo}),o.d(u,"i",function(){return vr}),o.d(u,"j",function(){return ro}),o.d(u,"k",function(){return un}),o.d(u,"l",function(){return co}),o.d(u,"m",function(){return to}),o.d(u,"n",function(){return of}),o.d(u,"o",function(){return Z}),o.d(u,"p",function(){return Bu}),o.d(u,"q",function(){return Ms}),o.d(u,"r",function(){return Ca}),o.d(u,"s",function(){return Nn}),o.d(u,"t",function(){return Cu}),o.d(u,"u",function(){return tf}),o.d(u,"v",function(){return ju}),o.d(u,"w",function(){return sf}),o.d(u,"x",function(){return Do}),o.d(u,"y",function(){return ao}),o.d(u,"z",function(){return dn}),o.d(u,"A",function(){return kn}),o.d(u,"B",function(){return Gn}),o.d(u,"C",function(){return Ir}),o.d(u,"D",function(){return uf}),o.d(u,"E",function(){return Ns}),o.d(u,"F",function(){return rf}),o.d(u,"G",function(){return Da}),o.d(u,"H",function(){return wu}),o.d(u,"I",function(){return cf}),o.d(u,"J",function(){return ho}),o.d(u,"K",function(){return we}),o.d(u,"L",function(){return ja}),o.d(u,"M",function(){return po});var h="An invariant failed, however the error is obfuscated because this is a production build.",p=[];Object.freeze(p);var m={};Object.freeze(m);function y(){return++Wt.mobxGuid}function S(g){throw x(!1,g),"X"}function x(g,E){if(!g)throw new Error("[mobx] "+(E||h))}function T(g){var E=!1;return function(){if(!E)return E=!0,g.apply(this,arguments)}}var w=function(){};function N(g){var E=[];return g.forEach(function(A){E.indexOf(A)===-1&&E.push(A)}),E}function M(g){return g!==null&&typeof g=="object"}function D(g){if(g===null||typeof g!="object")return!1;var E=Object.getPrototypeOf(g);return E===Object.prototype||E===null}function W(g){if(ce(g)||dn(g))return g;if(Array.isArray(g))return new Map(g);if(D(g)){var E=new Map;for(var A in g)E.set(A,g[A]);return E}else return S("Cannot convert to map from '"+g+"'")}function V(g,E,A){Object.defineProperty(g,E,{enumerable:!1,writable:!0,configurable:!0,value:A})}function Ee(g,E,A){Object.defineProperty(g,E,{enumerable:!1,writable:!1,configurable:!0,value:A})}function ge(g,E){var A=Object.getOwnPropertyDescriptor(g,E);return!A||A.configurable!==!1&&A.writable!==!1}function ye(g,E){var A="isMobX"+g;return E.prototype[A]=!0,function(B){return M(B)&&B[A]===!0}}function ce(g){return g instanceof Map}function xe(g){return g instanceof Set}function j(g){var E=new Set;for(var A in g)E.add(A);return Object.getOwnPropertySymbols(g).forEach(function(B){Object.getOwnPropertyDescriptor(g,B).enumerable&&E.add(B)}),Array.from(E)}function Q(g){return g&&g.toString?g.toString():new String(g).toString()}function U(g){return g===null?null:typeof g=="object"?""+g:g}var I=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:Object.getOwnPropertyNames,k=Symbol("mobx administration"),te=function(){function g(E){E===void 0&&(E="Atom@"+y()),this.name=E,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.NOT_TRACKING}return g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},g.prototype.reportObserved=function(){return xu(this)},g.prototype.reportChanged=function(){Kr(),Yl(this),no()},g.prototype.toString=function(){return this.name},g}(),$=ye("Atom",te);function Z(g,E,A){E===void 0&&(E=w),A===void 0&&(A=w);var B=new te(g);return E!==w&&nf(B,E),A!==w&&Ns(B,A),B}function le(g,E){return g===E}function Ae(g,E){return bi(g,E)}function Re(g,E){return bi(g,E,1)}function _e(g,E){return Object.is(g,E)}var Ke={identity:le,structural:Ae,default:_e,shallow:Re};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var gt=function(g,E){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,B){A.__proto__=B}||function(A,B){for(var J in B)B.hasOwnProperty(J)&&(A[J]=B[J])},gt(g,E)};function Nt(g,E){gt(g,E);function A(){this.constructor=g}g.prototype=E===null?Object.create(E):(A.prototype=E.prototype,new A)}var Vt=function(){return Vt=Object.assign||function(E){for(var A,B=1,J=arguments.length;B<J;B++){A=arguments[B];for(var he in A)Object.prototype.hasOwnProperty.call(A,he)&&(E[he]=A[he])}return E},Vt.apply(this,arguments)};function Ct(g){var E=typeof Symbol=="function"&&g[Symbol.iterator],A=0;return E?E.call(g):{next:function(){return g&&A>=g.length&&(g=void 0),{value:g&&g[A++],done:!g}}}}function Ge(g,E){var A=typeof Symbol=="function"&&g[Symbol.iterator];if(!A)return g;var B=A.call(g),J,he=[],Xe;try{for(;(E===void 0||E-- >0)&&!(J=B.next()).done;)he.push(J.value)}catch(Et){Xe={error:Et}}finally{try{J&&!J.done&&(A=B.return)&&A.call(B)}finally{if(Xe)throw Xe.error}}return he}function bt(){for(var g=[],E=0;E<arguments.length;E++)g=g.concat(Ge(arguments[E]));return g}var Ut=Symbol("mobx did run lazy initializers"),ee=Symbol("mobx pending decorators"),se={},me={};function Ue(g,E){var A=E?se:me;return A[g]||(A[g]={configurable:!0,enumerable:E,get:function(){return tt(this),this[g]},set:function(B){tt(this),this[g]=B}})}function tt(g){var E,A;if(g[Ut]!==!0){var B=g[ee];if(B){V(g,Ut,!0);var J=bt(Object.getOwnPropertySymbols(B),Object.keys(B));try{for(var he=Ct(J),Xe=he.next();!Xe.done;Xe=he.next()){var Et=Xe.value,Yt=B[Et];Yt.propertyCreator(g,Yt.prop,Yt.descriptor,Yt.decoratorTarget,Yt.decoratorArguments)}}catch(Tr){E={error:Tr}}finally{try{Xe&&!Xe.done&&(A=he.return)&&A.call(he)}finally{if(E)throw E.error}}}}}function He(g,E){return function(){var B,J=function(Xe,Et,Yt,Tr){if(Tr===!0)return E(Xe,Et,Yt,Xe,B),null;if(!Object.prototype.hasOwnProperty.call(Xe,ee)){var wr=Xe[ee];V(Xe,ee,Vt({},wr))}return Xe[ee][Et]={prop:Et,propertyCreator:E,descriptor:Yt,decoratorTarget:Xe,decoratorArguments:B},Ue(Et,g)};return Lt(arguments)?(B=p,J.apply(null,arguments)):(B=Array.prototype.slice.call(arguments),J)}}function Lt(g){return(g.length===2||g.length===3)&&(typeof g[1]=="string"||typeof g[1]=="symbol")||g.length===4&&g[3]===!0}function nr(g,E,A){return Do(g)?g:Array.isArray(g)?Ir.array(g,{name:A}):D(g)?Ir.object(g,void 0,{name:A}):ce(g)?Ir.map(g,{name:A}):xe(g)?Ir.set(g,{name:A}):g}function tr(g,E,A){return g==null||kn(g)||ao(g)||dn(g)||Bn(g)?g:Array.isArray(g)?Ir.array(g,{name:A,deep:!1}):D(g)?Ir.object(g,void 0,{name:A,deep:!1}):ce(g)?Ir.map(g,{name:A,deep:!1}):xe(g)?Ir.set(g,{name:A,deep:!1}):S(!1)}function Jt(g){return g}function rt(g,E,A){return bi(g,E)?E:g}function Er(g){x(g);var E=He(!0,function(B,J,he,Xe,Et){var Yt=he?he.initializer?he.initializer.call(B):he.value:void 0;js(B).addObservableProp(J,Yt,g)}),A=(typeof l<"u"&&l.env,E);return A.enhancer=g,A}var ur={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(ur);function Xt(g){return g==null?ur:typeof g=="string"?{name:g,deep:!0,proxy:!0}:g}var L=Er(nr),Qr=Er(tr),Rr=Er(Jt),kr=Er(rt);function Be(g){return g.defaultDecorator?g.defaultDecorator.enhancer:g.deep===!1?Jt:nr}function Xr(g,E,A){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return L.apply(null,arguments);if(Do(g))return g;var B=D(g)?Ir.object(g,E,A):Array.isArray(g)?Ir.array(g,E):ce(g)?Ir.map(g,E):xe(g)?Ir.set(g,E):g;if(B!==g)return B;S(!1)}var zr={box:function(g,E){arguments.length>2&&On("box");var A=Xt(E);return new Vo(g,Be(A),A.name,!0,A.equals)},array:function(g,E){arguments.length>2&&On("array");var A=Xt(E);return qr(g,Be(A),A.name)},map:function(g,E){arguments.length>2&&On("map");var A=Xt(E);return new Ji(g,Be(A),A.name)},set:function(g,E){arguments.length>2&&On("set");var A=Xt(E);return new Cs(g,Be(A),A.name)},object:function(g,E,A){typeof arguments[1]=="string"&&On("object");var B=Xt(A);if(B.proxy===!1)return Ms({},g,E,B);var J=Iu(B),he=Ms({},void 0,void 0,B),Xe=$n(he);return Du(Xe,g,E,J),Xe},ref:Rr,shallow:Qr,deep:L,struct:kr},Ir=Xr;Object.keys(zr).forEach(function(g){return Ir[g]=zr[g]});function On(g){S("Expected one or two arguments to observable."+g+". Did you accidentally try to use observable."+g+" as decorator?")}var eo=He(!1,function(g,E,A,B,J){var he=A.get,Xe=A.set,Et=J[0]||{};js(g).addComputedProp(g,E,Vt({get:he,set:Xe,context:g},Et))}),In=eo({equals:Ke.structural}),to=function(E,A,B){if(typeof A=="string"||E!==null&&typeof E=="object"&&arguments.length===1)return eo.apply(null,arguments);var J=typeof A=="object"?A:{};return J.get=E,J.set=typeof A=="function"?A:J.set,J.name=J.name||E.name||"",new ci(J)};to.struct=In;var Qt;(function(g){g[g.NOT_TRACKING=-1]="NOT_TRACKING",g[g.UP_TO_DATE=0]="UP_TO_DATE",g[g.POSSIBLY_STALE=1]="POSSIBLY_STALE",g[g.STALE=2]="STALE"})(Qt||(Qt={}));var $r;(function(g){g[g.NONE=0]="NONE",g[g.LOG=1]="LOG",g[g.BREAK=2]="BREAK"})($r||($r={}));var Dn=function(){function g(E){this.cause=E}return g}();function Mt(g){return g instanceof Dn}function or(g){switch(g.dependenciesState){case Qt.UP_TO_DATE:return!1;case Qt.NOT_TRACKING:case Qt.STALE:return!0;case Qt.POSSIBLY_STALE:{for(var E=_t(!0),A=Ne(),B=g.observing,J=B.length,he=0;he<J;he++){var Xe=B[he];if(di(Xe)){if(Wt.disableErrorBoundaries)Xe.get();else try{Xe.get()}catch{return ht(A),Kt(E),!0}if(g.dependenciesState===Qt.STALE)return ht(A),Kt(E),!0}}return Br(g),ht(A),Kt(E),!1}}}function vr(){return Wt.trackingDerivation!==null}function fr(g){var E=g.observers.size>0;Wt.computationDepth>0&&E&&S(!1),!Wt.allowStateChanges&&(E||Wt.enforceActions==="strict")&&S(!1)}function _r(g,E,A){var B=_t(!0);Br(g),g.newObserving=new Array(g.observing.length+100),g.unboundDepsCount=0,g.runId=++Wt.runId;var J=Wt.trackingDerivation;Wt.trackingDerivation=g;var he;if(Wt.disableErrorBoundaries===!0)he=E.call(A);else try{he=E.call(A)}catch(Xe){he=new Dn(Xe)}return Wt.trackingDerivation=J,re(g),Kt(B),he}function re(g){for(var E=g.observing,A=g.observing=g.newObserving,B=Qt.UP_TO_DATE,J=0,he=g.unboundDepsCount,Xe=0;Xe<he;Xe++){var Et=A[Xe];Et.diffValue===0&&(Et.diffValue=1,J!==Xe&&(A[J]=Et),J++),Et.dependenciesState>B&&(B=Et.dependenciesState)}for(A.length=J,g.newObserving=null,he=E.length;he--;){var Et=E[he];Et.diffValue===0&&Mo(Et,g),Et.diffValue=0}for(;J--;){var Et=A[J];Et.diffValue===1&&(Et.diffValue=0,Wl(Et,g))}B!==Qt.UP_TO_DATE&&(g.dependenciesState=B,g.onBecomeStale())}function Oe(g){var E=g.observing;g.observing=[];for(var A=E.length;A--;)Mo(E[A],g);g.dependenciesState=Qt.NOT_TRACKING}function we(g){var E=Ne();try{return g()}finally{ht(E)}}function Ne(){var g=Wt.trackingDerivation;return Wt.trackingDerivation=null,g}function ht(g){Wt.trackingDerivation=g}function _t(g){var E=Wt.allowStateReads;return Wt.allowStateReads=g,E}function Kt(g){Wt.allowStateReads=g}function Br(g){if(g.dependenciesState!==Qt.UP_TO_DATE){g.dependenciesState=Qt.UP_TO_DATE;for(var E=g.observing,A=E.length;A--;)E[A].lowestObserverState=Qt.UP_TO_DATE}}var Cn=0,Ln=1,Hi=Object.getOwnPropertyDescriptor(function(){},"name");Hi&&Hi.configurable;function No(g,E,A){var B=function(){return bu(g,E,A||this,arguments)};return B.isMobxAction=!0,B}function bu(g,E,A,B){var J=ro();try{return E.apply(A,B)}catch(he){throw J.error=he,he}finally{As(J)}}function ro(g,E,A){var B=Zr(),J=0,he=Ne();Kr();var Xe=fi(!0),Et=_t(!0),Yt={prevDerivation:he,prevAllowStateChanges:Xe,prevAllowStateReads:Et,notifySpy:B,startTime:J,actionId:Ln++,parentActionId:Cn};return Cn=Yt.actionId,Yt}function As(g){Cn!==g.actionId&&S("invalid action stack. did you forget to finish an action?"),Cn=g.parentActionId,g.error!==void 0&&(Wt.suppressReactionErrors=!0),Xi(g.prevAllowStateChanges),Kt(g.prevAllowStateReads),no(),ht(g.prevDerivation),g.notifySpy,Wt.suppressReactionErrors=!1}function jr(g,E){var A=fi(g),B;try{B=E()}finally{Xi(A)}return B}function fi(g){var E=Wt.allowStateChanges;return Wt.allowStateChanges=g,E}function Xi(g){Wt.allowStateChanges=g}var Vo=function(g){Nt(E,g);function E(A,B,J,he,Xe){J===void 0&&(J="ObservableValue@"+y()),he===void 0&&(he=!0),Xe===void 0&&(Xe=Ke.default);var Et=g.call(this,J)||this;return Et.enhancer=B,Et.name=J,Et.equals=Xe,Et.hasUnreportedChange=!1,Et.value=B(A,void 0,J),he&&Zr(),Et}return E.prototype.dehanceValue=function(A){return this.dehancer!==void 0?this.dehancer(A):A},E.prototype.set=function(A){var B=this.value;if(A=this.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr();this.setNewValue(A)}},E.prototype.prepareNewValue=function(A){if(fr(this),Vn(this)){var B=vo(this,{object:this,type:"update",newValue:A});if(!B)return Wt.UNCHANGED;A=B.newValue}return A=this.enhancer(A,this.value,this.name),this.equals(this.value,A)?Wt.UNCHANGED:A},E.prototype.setNewValue=function(A){var B=this.value;this.value=A,this.reportChanged(),io(this)&&jn(this,{type:"update",object:this,newValue:A,oldValue:B})},E.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},E.prototype.intercept=function(A){return Ki(this,A)},E.prototype.observe=function(A,B){return B&&A({object:this,type:"update",newValue:this.value,oldValue:void 0}),gi(this,A)},E.prototype.toJSON=function(){return this.get()},E.prototype.toString=function(){return this.name+"["+this.value+"]"},E.prototype.valueOf=function(){return U(this.get())},E.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},E}(te),$i=ye("ObservableValue",Vo),ci=function(){function g(E){this.dependenciesState=Qt.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Qt.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+y(),this.value=new Dn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=$r.NONE,x(E.get,"missing option for computed: get"),this.derivation=E.get,this.name=E.name||"ComputedValue@"+y(),E.set&&(this.setter=No(this.name+"-setter",E.set)),this.equals=E.equals||(E.compareStructural||E.struct?Ke.structural:Ke.default),this.scope=E.context,this.requiresReaction=!!E.requiresReaction,this.keepAlive=!!E.keepAlive}return g.prototype.onBecomeStale=function(){Zl(this)},g.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(E){return E()})},g.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(E){return E()})},g.prototype.get=function(){this.isComputing&&S("Cycle detected in computation "+this.name+": "+this.derivation),Wt.inBatch===0&&this.observers.size===0&&!this.keepAlive?or(this)&&(this.warnAboutUntrackedRead(),Kr(),this.value=this.computeValue(!1),no()):(xu(this),or(this)&&this.trackAndCompute()&&Kl(this));var E=this.value;if(Mt(E))throw E.cause;return E},g.prototype.peek=function(){var E=this.computeValue(!1);if(Mt(E))throw E.cause;return E},g.prototype.set=function(E){if(this.setter){x(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,E)}finally{this.isRunningSetter=!1}}else x(!1,!1)},g.prototype.trackAndCompute=function(){var E=this.value,A=this.dependenciesState===Qt.NOT_TRACKING,B=this.computeValue(!0),J=A||Mt(E)||Mt(B)||!this.equals(E,B);return J&&(this.value=B),J},g.prototype.computeValue=function(E){this.isComputing=!0,Wt.computationDepth++;var A;if(E)A=_r(this,this.derivation,this.scope);else if(Wt.disableErrorBoundaries===!0)A=this.derivation.call(this.scope);else try{A=this.derivation.call(this.scope)}catch(B){A=new Dn(B)}return Wt.computationDepth--,this.isComputing=!1,A},g.prototype.suspend=function(){this.keepAlive||(Oe(this),this.value=void 0)},g.prototype.observe=function(E,A){var B=this,J=!0,he=void 0;return co(function(){var Xe=B.get();if(!J||A){var Et=Ne();E({type:"update",object:B,newValue:Xe,oldValue:he}),ht(Et)}J=!1,he=Xe})},g.prototype.warnAboutUntrackedRead=function(){},g.prototype.toJSON=function(){return this.get()},g.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},g.prototype.valueOf=function(){return U(this.get())},g.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},g}(),di=ye("ComputedValue",ci),wa=function(){function g(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1}return g}(),Vl={};function Na(){return typeof window<"u"?window:typeof c<"u"?c:typeof self<"u"?self:Vl}var Ma=!0,Eu=!1,Wt=function(){var g=Na();return g.__mobxInstanceCount>0&&!g.__mobxGlobals&&(Ma=!1),g.__mobxGlobals&&g.__mobxGlobals.version!==new wa().version&&(Ma=!1),Ma?g.__mobxGlobals?(g.__mobxInstanceCount+=1,g.__mobxGlobals.UNCHANGED||(g.__mobxGlobals.UNCHANGED={}),g.__mobxGlobals):(g.__mobxInstanceCount=1,g.__mobxGlobals=new wa):(setTimeout(function(){Eu||S("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new wa)}();function Ou(){(Wt.pendingReactions.length||Wt.inBatch||Wt.isRunningReactions)&&S("isolateGlobalState should be called before MobX is running any reactions"),Eu=!0,Ma&&(--Na().__mobxInstanceCount===0&&(Na().__mobxGlobals=void 0),Wt=new wa)}function Wl(g,E){g.observers.add(E),g.lowestObserverState>E.dependenciesState&&(g.lowestObserverState=E.dependenciesState)}function Mo(g,E){g.observers.delete(E),g.observers.size===0&&Su(g)}function Su(g){g.isPendingUnobservation===!1&&(g.isPendingUnobservation=!0,Wt.pendingUnobservations.push(g))}function Kr(){Wt.inBatch++}function no(){if(--Wt.inBatch===0){Vi();for(var g=Wt.pendingUnobservations,E=0;E<g.length;E++){var A=g[E];A.isPendingUnobservation=!1,A.observers.size===0&&(A.isBeingObserved&&(A.isBeingObserved=!1,A.onBecomeUnobserved()),A instanceof ci&&A.suspend())}Wt.pendingUnobservations=[]}}function xu(g){var E=Wt.trackingDerivation;return E!==null?(E.runId!==g.lastAccessedBy&&(g.lastAccessedBy=E.runId,E.newObserving[E.unboundDepsCount++]=g,g.isBeingObserved||(g.isBeingObserved=!0,g.onBecomeObserved())),!0):(g.observers.size===0&&Wt.inBatch>0&&Su(g),!1)}function Yl(g){g.lowestObserverState!==Qt.STALE&&(g.lowestObserverState=Qt.STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.isTracing!==$r.NONE&&Ra(E,g),E.onBecomeStale()),E.dependenciesState=Qt.STALE}))}function Kl(g){g.lowestObserverState!==Qt.STALE&&(g.lowestObserverState=Qt.STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.POSSIBLY_STALE?E.dependenciesState=Qt.STALE:E.dependenciesState===Qt.UP_TO_DATE&&(g.lowestObserverState=Qt.UP_TO_DATE)}))}function Zl(g){g.lowestObserverState===Qt.UP_TO_DATE&&(g.lowestObserverState=Qt.POSSIBLY_STALE,g.observers.forEach(function(E){E.dependenciesState===Qt.UP_TO_DATE&&(E.dependenciesState=Qt.POSSIBLY_STALE,E.isTracing!==$r.NONE&&Ra(E,g),E.onBecomeStale())}))}function Ra(g,E){if(console.log("[mobx.trace] '"+g.name+"' is invalidated due to a change in: '"+E.name+"'"),g.isTracing===$r.BREAK){var A=[];Tu(Cu(g),A,1),new Function(`debugger;
/*
Tracing '`+g.name+`'

You are entering this break point because derivation '`+g.name+"' is being traced and '"+E.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(g instanceof ci?g.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+A.join(`
`)+`
*/
    `)()}}function Tu(g,E,A){if(E.length>=1e3){E.push("(and many more)");return}E.push(""+new Array(A).join("	")+g.name),g.dependencies&&g.dependencies.forEach(function(B){return Tu(B,E,A+1)})}var Wo=function(){function g(E,A,B,J){E===void 0&&(E="Reaction@"+y()),J===void 0&&(J=!1),this.name=E,this.onInvalidate=A,this.errorHandler=B,this.requiresObservable=J,this.observing=[],this.newObserving=[],this.dependenciesState=Qt.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+y(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=$r.NONE}return g.prototype.onBecomeStale=function(){this.schedule()},g.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Wt.pendingReactions.push(this),Vi())},g.prototype.isScheduled=function(){return this._isScheduled},g.prototype.runReaction=function(){if(!this.isDisposed){if(Kr(),this._isScheduled=!1,or(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending&&Zr()}catch(E){this.reportExceptionInDerivation(E)}}no()}},g.prototype.track=function(E){if(!this.isDisposed){Kr(),this._isRunning=!0;var A=_r(this,E,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Oe(this),Mt(A)&&this.reportExceptionInDerivation(A.cause),no()}},g.prototype.reportExceptionInDerivation=function(E){var A=this;if(this.errorHandler){this.errorHandler(E,this);return}if(Wt.disableErrorBoundaries)throw E;var B="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Wt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(B,E),Wt.globalReactionErrorHandlers.forEach(function(J){return J(E,A)})},g.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Kr(),Oe(this),no()))},g.prototype.getDisposer=function(){var E=this.dispose.bind(this);return E[k]=this,E},g.prototype.toString=function(){return"Reaction["+this.name+"]"},g.prototype.trace=function(E){E===void 0&&(E=!1),vi(this,E)},g}(),Ps=100,_s=function(g){return g()};function Vi(){Wt.inBatch>0||Wt.isRunningReactions||_s(Au)}function Au(){Wt.isRunningReactions=!0;for(var g=Wt.pendingReactions,E=0;g.length>0;){++E===Ps&&(console.error("Reaction doesn't converge to a stable state after "+Ps+" iterations."+(" Probably there is a cycle in the reactive function: "+g[0])),g.splice(0));for(var A=g.splice(0),B=0,J=A.length;B<J;B++)A[B].runReaction()}Wt.isRunningReactions=!1}var Ia=ye("Reaction",Wo);function Jl(g){var E=_s;_s=function(A){return g(function(){return E(A)})}}function Zr(){return!1}function Pu(g){}function Ql(g){}function _u(g){}function wu(g){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function ql(){S(!1)}function Nu(g){return function(E,A,B){if(B){if(B.value)return{value:No(g,B.value),enumerable:!1,configurable:!0,writable:!0};var J=B.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return No(g,J.call(this))}}}return ef(g).apply(this,arguments)}}function ef(g){return function(E,A,B){Object.defineProperty(E,A,{configurable:!0,enumerable:!1,get:function(){},set:function(J){V(this,A,un(g,J))}})}}function oo(g,E,A,B){return B===!0?(ws(g,E,A.value),null):A?{configurable:!0,enumerable:!1,get:function(){return ws(this,E,A.value||A.initializer.call(this)),this[E]},set:ql}:{enumerable:!1,configurable:!0,set:function(J){ws(this,E,J)},get:function(){}}}var un=function(E,A,B,J){if(arguments.length===1&&typeof E=="function")return No(E.name||"<unnamed action>",E);if(arguments.length===2&&typeof A=="function")return No(E,A);if(arguments.length===1&&typeof E=="string")return Nu(E);if(J===!0)V(E,A,No(E.name||A,B.value,this));else return Nu(A).apply(null,arguments)};un.bound=oo;function Da(g,E){var A=typeof g=="string"?g:g.name||"<unnamed action>",B=typeof g=="function"?g:E;return bu(A,B,this,void 0)}function tf(g){return typeof g=="function"&&g.isMobxAction===!0}function ws(g,E,A){V(g,E,No(E,A.bind(g)))}function co(g,E){E===void 0&&(E=m);var A=E&&E.name||g.name||"Autorun@"+y(),B=!E.scheduler&&!E.delay,J;if(B)J=new Wo(A,function(){this.track(Et)},E.onError,E.requiresObservable);else{var he=hi(E),Xe=!1;J=new Wo(A,function(){Xe||(Xe=!0,he(function(){Xe=!1,J.isDisposed||J.track(Et)}))},E.onError,E.requiresObservable)}function Et(){g(J)}return J.schedule(),J.getDisposer()}var Mu=function(g){return g()};function hi(g){return g.scheduler?g.scheduler:g.delay?function(E){return setTimeout(E,g.delay)}:Mu}function rf(g,E,A){A===void 0&&(A=m);var B=A.name||"Reaction@"+y(),J=un(B,A.onError?Yo(A.onError,E):E),he=!A.scheduler&&!A.delay,Xe=hi(A),Et=!0,Yt=!1,Tr,wr=A.compareStructural?Ke.structural:A.equals||Ke.default,Ur=new Wo(B,function(){Et||he?Hr():Yt||(Yt=!0,Xe(Hr))},A.onError,A.requiresObservable);function Hr(){if(Yt=!1,!Ur.isDisposed){var nn=!1;Ur.track(function(){var Sn=g(Ur);nn=Et||!wr(Tr,Sn),Tr=Sn}),Et&&A.fireImmediately&&J(Tr,Ur),!Et&&nn===!0&&J(Tr,Ur),Et&&(Et=!1)}}return Ur.schedule(),Ur.getDisposer()}function Yo(g,E){return function(){try{return E.apply(this,arguments)}catch(A){g.call(this,A)}}}function nf(g,E,A){return Ru("onBecomeObserved",g,E,A)}function Ns(g,E,A){return Ru("onBecomeUnobserved",g,E,A)}function Ru(g,E,A,B){var J=typeof B=="function"?Nn(E,A):Nn(E),he=typeof B=="function"?B:A,Xe=g+"Listeners";J[Xe]?J[Xe].add(he):J[Xe]=new Set([he]);var Et=J[g];return typeof Et!="function"?S(!1):function(){var Yt=J[Xe];Yt&&(Yt.delete(he),Yt.size===0&&delete J[Xe])}}function of(g){var E=g.enforceActions,A=g.computedRequiresReaction,B=g.computedConfigurable,J=g.disableErrorBoundaries,he=g.reactionScheduler,Xe=g.reactionRequiresObservable,Et=g.observableRequiresReaction;if(g.isolateGlobalState===!0&&Ou(),E!==void 0){var Yt=void 0;switch(E){case!0:case"observed":Yt=!0;break;case!1:case"never":Yt=!1;break;case"strict":case"always":Yt="strict";break;default:S("Invalid value for 'enforceActions': '"+E+"', expected 'never', 'always' or 'observed'")}Wt.enforceActions=Yt,Wt.allowStateChanges=!(Yt===!0||Yt==="strict")}A!==void 0&&(Wt.computedRequiresReaction=!!A),Xe!==void 0&&(Wt.reactionRequiresObservable=!!Xe),Et!==void 0&&(Wt.observableRequiresReaction=!!Et,Wt.allowStateReads=!Wt.observableRequiresReaction),B!==void 0&&(Wt.computedConfigurable=!!B),J!==void 0&&(J===!0&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Wt.disableErrorBoundaries=!!J),he&&Jl(he)}function Ms(g,E,A,B){B=Xt(B);var J=Iu(B);return tt(g),js(g,B.name,J.enhancer),E&&Du(g,E,A,J),g}function Iu(g){return g.defaultDecorator||(g.deep===!1?Rr:L)}function Du(g,E,A,B){var J,he,Xe,Et;Kr();try{var Et=I(E);try{for(var Yt=Ct(Et),Tr=Yt.next();!Tr.done;Tr=Yt.next()){var Xe=Tr.value,wr=Object.getOwnPropertyDescriptor(E,Xe),Ur=A&&Xe in A?A[Xe]:wr.get?eo:B,Hr=Ur(g,Xe,wr,!0);Hr&&Object.defineProperty(g,Xe,Hr)}}catch(Sn){J={error:Sn}}finally{try{Tr&&!Tr.done&&(he=Yt.return)&&he.call(Yt)}finally{if(J)throw J.error}}}finally{no()}}function Cu(g,E){return Ro(Nn(g,E))}function Ro(g){var E={name:g.name};return g.observing&&g.observing.length>0&&(E.dependencies=N(g.observing).map(Ro)),E}var af=0;function Lu(){this.message="FLOW_CANCELLED"}Lu.prototype=Object.create(Error.prototype);function Ca(g){arguments.length!==1&&S("Flow expects 1 argument and cannot be used as decorator");var E=g.name||"<unnamed flow>";return function(){var A=this,B=arguments,J=++af,he=un(E+" - runid: "+J+" - init",g).apply(A,B),Xe,Et=void 0,Yt=new Promise(function(Tr,wr){var Ur=0;Xe=wr;function Hr(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,he.next).call(he,Vr)}catch(Jo){return wr(Jo)}Sn(Wn)}function nn(Vr){Et=void 0;var Wn;try{Wn=un(E+" - runid: "+J+" - yield "+Ur++,he.throw).call(he,Vr)}catch(Jo){return wr(Jo)}Sn(Wn)}function Sn(Vr){if(Vr&&typeof Vr.then=="function"){Vr.then(Sn,wr);return}return Vr.done?Tr(Vr.value):(Et=Promise.resolve(Vr.value),Et.then(Hr,nn))}Hr(void 0)});return Yt.cancel=un(E+" - runid: "+J+" - cancel",function(){try{Et&&La(Et);var Tr=he.return(void 0),wr=Promise.resolve(Tr.value);wr.then(w,w),La(wr),Xe(new Lu)}catch(Ur){Xe(Ur)}}),Yt}}function La(g){typeof g.cancel=="function"&&g.cancel()}function Rs(g,E){if(g==null)return!1;if(E!==void 0){if(kn(g)===!1||!g[k].values.has(E))return!1;var A=Nn(g,E);return di(A)}return di(g)}function ju(g){return arguments.length>1?S(!1):Rs(g)}function sf(g,E){return typeof E!="string"?S(!1):Rs(g,E)}function Io(g,E){return g==null?!1:E!==void 0?kn(g)?g[k].values.has(E):!1:kn(g)||!!g[k]||$(g)||Ia(g)||di(g)}function Do(g){return arguments.length!==1&&S(!1),Io(g)}function Gn(g){return kn(g)?g[k].getKeys():dn(g)||Bn(g)?Array.from(g.keys()):ao(g)?g.map(function(E,A){return A}):S(!1)}function ja(g){return kn(g)?Gn(g).map(function(E){return g[E]}):dn(g)?Gn(g).map(function(E){return g.get(E)}):Bn(g)?Array.from(g.values()):ao(g)?g.slice():S(!1)}function Bu(g){return kn(g)?Gn(g).map(function(E){return[E,g[E]]}):dn(g)?Gn(g).map(function(E){return[E,g.get(E)]}):Bn(g)?Array.from(g.entries()):ao(g)?g.map(function(E,A){return[A,E]}):S(!1)}function Is(g,E,A){if(arguments.length===2&&!Bn(g)){Kr();var B=E;try{for(var J in B)Is(g,J,B[J])}finally{no()}return}if(kn(g)){var he=g[k],Xe=he.values.get(E);Xe?he.write(E,A):he.addObservableProp(E,A,he.defaultEnhancer)}else if(dn(g))g.set(E,A);else if(Bn(g))g.add(E);else if(ao(g))typeof E!="number"&&(E=parseInt(E,10)),x(E>=0,"Not a valid index: '"+E+"'"),Kr(),E>=g.length&&(g.length=E+1),g[E]=A,no();else return S(!1)}function uf(g,E,A,B){return typeof A=="function"?lf(g,E,A,B):Ba(g,E,A)}function Ba(g,E,A){return Zo(g).observe(E,A)}function lf(g,E,A,B){return Zo(g,E).observe(A,B)}var ff={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function pi(g,E,A,B){return B.detectCycles&&g.set(E,A),A}function Co(g,E,A){if(!E.recurseEverything&&!Do(g)||typeof g!="object")return g;if(g===null)return null;if(g instanceof Date)return g;if($i(g))return Co(g.get(),E,A);Do(g)&&Gn(g);var B=E.detectCycles===!0;if(B&&g!==null&&A.has(g))return A.get(g);if(ao(g)||Array.isArray(g)){var J=pi(A,g,[],E),he=g.map(function(nn){return Co(nn,E,A)});J.length=he.length;for(var Xe=0,Et=he.length;Xe<Et;Xe++)J[Xe]=he[Xe];return J}if(Bn(g)||Object.getPrototypeOf(g)===Set.prototype)if(E.exportMapsAsObjects===!1){var Yt=pi(A,g,new Set,E);return g.forEach(function(nn){Yt.add(Co(nn,E,A))}),Yt}else{var Tr=pi(A,g,[],E);return g.forEach(function(nn){Tr.push(Co(nn,E,A))}),Tr}if(dn(g)||Object.getPrototypeOf(g)===Map.prototype)if(E.exportMapsAsObjects===!1){var wr=pi(A,g,new Map,E);return g.forEach(function(nn,Sn){wr.set(Sn,Co(nn,E,A))}),wr}else{var Ur=pi(A,g,{},E);return g.forEach(function(nn,Sn){Ur[Sn]=Co(nn,E,A)}),Ur}var Hr=pi(A,g,{},E);return j(g).forEach(function(nn){Hr[nn]=Co(g[nn],E,A)}),Hr}function cf(g,E){typeof E=="boolean"&&(E={detectCycles:E}),E||(E=ff),E.detectCycles=E.detectCycles===void 0?E.recurseEverything===!0:E.detectCycles===!0;var A;return E.detectCycles&&(A=new Map),Co(g,E,A)}function vi(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=!1;typeof g[g.length-1]=="boolean"&&(A=g.pop());var B=df(g);if(!B)return S(!1);B.isTracing===$r.NONE&&console.log("[mobx.trace] '"+B.name+"' tracing enabled"),B.isTracing=A?$r.BREAK:$r.LOG}function df(g){switch(g.length){case 0:return Wt.trackingDerivation;case 1:return Nn(g[0]);case 2:return Nn(g[0],g[1])}}function ho(g,E){E===void 0&&(E=void 0),Kr();try{return g.apply(E)}finally{no()}}function po(g,E,A){return arguments.length===1||E&&typeof E=="object"?yi(g,E):Wi(g,E,A||{})}function Wi(g,E,A){var B;typeof A.timeout=="number"&&(B=setTimeout(function(){if(!he[k].isDisposed){he();var Xe=new Error("WHEN_TIMEOUT");if(A.onError)A.onError(Xe);else throw Xe}},A.timeout)),A.name=A.name||"When@"+y();var J=No(A.name+"-effect",E),he=co(function(Xe){g()&&(Xe.dispose(),B&&clearTimeout(B),J())},A);return he}function yi(g,E){var A,B=new Promise(function(J,he){var Xe=Wi(g,J,Vt(Vt({},E),{onError:he}));A=function(){Xe(),he("WHEN_CANCELLED")}});return B.cancel=A,B}function Yi(g){return g[k]}function xo(g){return typeof g=="string"||typeof g=="number"||typeof g=="symbol"}var Ko={has:function(g,E){if(E===k||E==="constructor"||E===Ut)return!0;var A=Yi(g);return xo(E)?A.has(E):E in g},get:function(g,E){if(E===k||E==="constructor"||E===Ut)return g[E];var A=Yi(g),B=A.values.get(E);if(B instanceof te){var J=B.get();return J===void 0&&A.has(E),J}return xo(E)&&A.has(E),g[E]},set:function(g,E,A){return xo(E)?(Is(g,E,A),!0):!1},deleteProperty:function(g,E){if(!xo(E))return!1;var A=Yi(g);return A.remove(E),!0},ownKeys:function(g){var E=Yi(g);return E.keysAtom.reportObserved(),Reflect.ownKeys(g)},preventExtensions:function(g){return S("Dynamic observable objects cannot be frozen"),!1}};function $n(g){var E=new Proxy(g,Ko);return g[k].proxy=E,E}function Vn(g){return g.interceptors!==void 0&&g.interceptors.length>0}function Ki(g,E){var A=g.interceptors||(g.interceptors=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function vo(g,E){var A=Ne();try{for(var B=bt(g.interceptors||[]),J=0,he=B.length;J<he&&(E=B[J](E),x(!E||E.type,"Intercept handlers should return nothing or a change object"),!!E);J++);return E}finally{ht(A)}}function io(g){return g.changeListeners!==void 0&&g.changeListeners.length>0}function gi(g,E){var A=g.changeListeners||(g.changeListeners=[]);return A.push(E),T(function(){var B=A.indexOf(E);B!==-1&&A.splice(B,1)})}function jn(g,E){var A=Ne(),B=g.changeListeners;if(B){B=B.slice();for(var J=0,he=B.length;J<he;J++)B[J](E);ht(A)}}var hf=1e4,Fu={get:function(g,E){return E===k?g[k]:E==="length"?g[k].getArrayLength():typeof E=="number"?To.get.call(g,E):typeof E=="string"&&!isNaN(E)?To.get.call(g,parseInt(E)):To.hasOwnProperty(E)?To[E]:g[E]},set:function(g,E,A){return E==="length"&&g[k].setArrayLength(A),typeof E=="number"&&To.set.call(g,E,A),typeof E=="symbol"||isNaN(E)?g[E]=A:To.set.call(g,parseInt(E),A),!0},preventExtensions:function(g){return S("Observable arrays cannot be frozen"),!1}};function qr(g,E,A,B){A===void 0&&(A="ObservableArray@"+y()),B===void 0&&(B=!1);var J=new Ds(A,E,B);Ee(J.values,k,J);var he=new Proxy(J.values,Fu);if(J.proxy=he,g&&g.length){var Xe=fi(!0);J.spliceWithArray(0,0,g),Xi(Xe)}return he}var Ds=function(){function g(E,A,B){this.owned=B,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new te(E||"ObservableArray@"+y()),this.enhancer=function(J,he){return A(J,he,E+"[..]")}}return g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.dehanceValues=function(E){return this.dehancer!==void 0&&E.length>0?E.map(this.dehancer):E},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.observe=function(E,A){return A===void 0&&(A=!1),A&&E({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),gi(this,E)},g.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},g.prototype.setArrayLength=function(E){if(typeof E!="number"||E<0)throw new Error("[mobx.array] Out of range: "+E);var A=this.values.length;if(E!==A)if(E>A){for(var B=new Array(E-A),J=0;J<E-A;J++)B[J]=void 0;this.spliceWithArray(A,0,B)}else this.spliceWithArray(E,A-E)},g.prototype.updateArrayLength=function(E,A){if(E!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=A},g.prototype.spliceWithArray=function(E,A,B){var J=this;fr(this.atom);var he=this.values.length;if(E===void 0?E=0:E>he?E=he:E<0&&(E=Math.max(0,he+E)),arguments.length===1?A=he-E:A==null?A=0:A=Math.max(0,Math.min(A,he-E)),B===void 0&&(B=p),Vn(this)){var Xe=vo(this,{object:this.proxy,type:"splice",index:E,removedCount:A,added:B});if(!Xe)return p;A=Xe.removedCount,B=Xe.added}B=B.length===0?B:B.map(function(Yt){return J.enhancer(Yt,void 0)});var Et=this.spliceItemsIntoValues(E,A,B);return(A!==0||B.length!==0)&&this.notifyArraySplice(E,B,Et),this.dehanceValues(Et)},g.prototype.spliceItemsIntoValues=function(E,A,B){var J;if(B.length<hf)return(J=this.values).splice.apply(J,bt([E,A],B));var he=this.values.slice(E,E+A);return this.values=this.values.slice(0,E).concat(B,this.values.slice(E+A)),he},g.prototype.notifyArrayChildUpdate=function(E,A,B){var J=!this.owned&&Zr(),he=io(this),Xe=he||J?{object:this.proxy,type:"update",index:E,newValue:A,oldValue:B}:null;this.atom.reportChanged(),he&&jn(this,Xe)},g.prototype.notifyArraySplice=function(E,A,B){var J=!this.owned&&Zr(),he=io(this),Xe=he||J?{object:this.proxy,type:"splice",index:E,removed:B,added:A,removedCount:B.length,addedCount:A.length}:null;this.atom.reportChanged(),he&&jn(this,Xe)},g}(),To={intercept:function(g){return this[k].intercept(g)},observe:function(g,E){E===void 0&&(E=!1);var A=this[k];return A.observe(g,E)},clear:function(){return this.splice(0)},replace:function(g){var E=this[k];return E.spliceWithArray(0,E.values.length,g)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(g,E){for(var A=[],B=2;B<arguments.length;B++)A[B-2]=arguments[B];var J=this[k];switch(arguments.length){case 0:return[];case 1:return J.spliceWithArray(g);case 2:return J.spliceWithArray(g,E)}return J.spliceWithArray(g,E,A)},spliceWithArray:function(g,E,A){var B=this[k];return B.spliceWithArray(g,E,A)},push:function(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=this[k];return A.spliceWithArray(A.values.length,0,g),A.values.length},pop:function(){return this.splice(Math.max(this[k].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var g=[],E=0;E<arguments.length;E++)g[E]=arguments[E];var A=this[k];return A.spliceWithArray(0,0,g),A.values.length},reverse:function(){var g=this.slice();return g.reverse.apply(g,arguments)},sort:function(g){var E=this.slice();return E.sort.apply(E,arguments)},remove:function(g){var E=this[k],A=E.dehanceValues(E.values).indexOf(g);return A>-1?(this.splice(A,1),!0):!1},get:function(g){var E=this[k];if(E){if(g<E.values.length)return E.atom.reportObserved(),E.dehanceValue(E.values[g]);console.warn("[mobx.array] Attempt to read an array index ("+g+") that is out of bounds ("+E.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(g,E){var A=this[k],B=A.values;if(g<B.length){fr(A.atom);var J=B[g];if(Vn(A)){var he=vo(A,{type:"update",object:A.proxy,index:g,newValue:E});if(!he)return;E=he.newValue}E=A.enhancer(E,J);var Xe=E!==J;Xe&&(B[g]=E,A.notifyArrayChildUpdate(g,E,J))}else if(g===B.length)A.spliceWithArray(g,0,[E]);else throw new Error("[mobx.array] Index out of bounds, "+g+" is larger than "+B.length)}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(g){typeof Array.prototype[g]=="function"&&(To[g]=function(){var E=this[k];E.atom.reportObserved();var A=E.dehanceValues(E.values);return A[g].apply(A,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(g){typeof Array.prototype[g]=="function"&&(To[g]=function(E,A){var B=this,J=this[k];J.atom.reportObserved();var he=J.dehanceValues(J.values);return he[g](function(Xe,Et){return E.call(A,Xe,Et,B)},A)})}),["reduce","reduceRight"].forEach(function(g){To[g]=function(){var E=this,A=this[k];A.atom.reportObserved();var B=arguments[0];return arguments[0]=function(J,he,Xe){return he=A.dehanceValue(he),B(J,he,Xe,E)},A.values[g].apply(A.values,arguments)}});var yo=ye("ObservableArrayAdministration",Ds);function ao(g){return M(g)&&yo(g[k])}var Zi,Lo={},Ji=function(){function g(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableMap@"+y()),this.enhancer=A,this.name=B,this[Zi]=Lo,this._keysAtom=Z(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(E)}return g.prototype._has=function(E){return this._data.has(E)},g.prototype.has=function(E){var A=this;if(!Wt.trackingDerivation)return this._has(E);var B=this._hasMap.get(E);if(!B){var J=B=new Vo(this._has(E),Jt,this.name+"."+Q(E)+"?",!1);this._hasMap.set(E,J),Ns(J,function(){return A._hasMap.delete(E)})}return B.get()},g.prototype.set=function(E,A){var B=this._has(E);if(Vn(this)){var J=vo(this,{type:B?"update":"add",object:this,newValue:A,name:E});if(!J)return this;A=J.newValue}return B?this._updateValue(E,A):this._addValue(E,A),this},g.prototype.delete=function(E){var A=this;if(fr(this._keysAtom),Vn(this)){var B=vo(this,{type:"delete",object:this,name:E});if(!B)return!1}if(this._has(E)){var J=Zr(),he=io(this),B=he||J?{type:"delete",object:this,oldValue:this._data.get(E).value,name:E}:null;return ho(function(){A._keysAtom.reportChanged(),A._updateHasMapEntry(E,!1);var Et=A._data.get(E);Et.setNewValue(void 0),A._data.delete(E)}),he&&jn(this,B),!0}return!1},g.prototype._updateHasMapEntry=function(E,A){var B=this._hasMap.get(E);B&&B.setNewValue(A)},g.prototype._updateValue=function(E,A){var B=this._data.get(E);if(A=B.prepareNewValue(A),A!==Wt.UNCHANGED){var J=Zr(),he=io(this),Xe=he||J?{type:"update",object:this,oldValue:B.value,name:E,newValue:A}:null;B.setNewValue(A),he&&jn(this,Xe)}},g.prototype._addValue=function(E,A){var B=this;fr(this._keysAtom),ho(function(){var Et=new Vo(A,B.enhancer,B.name+"."+Q(E),!1);B._data.set(E,Et),A=Et.value,B._updateHasMapEntry(E,!0),B._keysAtom.reportChanged()});var J=Zr(),he=io(this),Xe=he||J?{type:"add",object:this,name:E,newValue:A}:null;he&&jn(this,Xe)},g.prototype.get=function(E){return this.has(E)?this.dehanceValue(this._data.get(E).get()):this.dehanceValue(void 0)},g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},g.prototype.values=function(){var E=this,A=this.keys();return Qi({next:function(){var B=A.next(),J=B.done,he=B.value;return{done:J,value:J?void 0:E.get(he)}}})},g.prototype.entries=function(){var E=this,A=this.keys();return Qi({next:function(){var B=A.next(),J=B.done,he=B.value;return{done:J,value:J?void 0:[he,E.get(he)]}}})},g.prototype[Zi=k,Symbol.iterator]=function(){return this.entries()},g.prototype.forEach=function(E,A){var B,J;try{for(var he=Ct(this),Xe=he.next();!Xe.done;Xe=he.next()){var Et=Ge(Xe.value,2),Yt=Et[0],Tr=Et[1];E.call(A,Tr,Yt,this)}}catch(wr){B={error:wr}}finally{try{Xe&&!Xe.done&&(J=he.return)&&J.call(he)}finally{if(B)throw B.error}}},g.prototype.merge=function(E){var A=this;return dn(E)&&(E=E.toJS()),ho(function(){var B=fi(!0);try{D(E)?j(E).forEach(function(J){return A.set(J,E[J])}):Array.isArray(E)?E.forEach(function(J){var he=Ge(J,2),Xe=he[0],Et=he[1];return A.set(Xe,Et)}):ce(E)?(E.constructor!==Map&&S("Cannot initialize from classes that inherit from Map: "+E.constructor.name),E.forEach(function(J,he){return A.set(he,J)})):E!=null&&S("Cannot initialize map from "+E)}finally{Xi(B)}}),this},g.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E.keys()),he=J.next();!he.done;he=J.next()){var Xe=he.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{he&&!he.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},g.prototype.replace=function(E){var A=this;return ho(function(){var B,J,he,Xe,Et=W(E),Yt=new Map,Tr=!1;try{for(var wr=Ct(A._data.keys()),Ur=wr.next();!Ur.done;Ur=wr.next()){var Hr=Ur.value;if(!Et.has(Hr)){var nn=A.delete(Hr);if(nn)Tr=!0;else{var Sn=A._data.get(Hr);Yt.set(Hr,Sn)}}}}catch(Qo){B={error:Qo}}finally{try{Ur&&!Ur.done&&(J=wr.return)&&J.call(wr)}finally{if(B)throw B.error}}try{for(var Vr=Ct(Et.entries()),Wn=Vr.next();!Wn.done;Wn=Vr.next()){var Jo=Ge(Wn.value,2),Hr=Jo[0],Sn=Jo[1],Ha=A._data.has(Hr);if(A.set(Hr,Sn),A._data.has(Hr)){var zu=A._data.get(Hr);Yt.set(Hr,zu),Ha||(Tr=!0)}}}catch(Qo){he={error:Qo}}finally{try{Wn&&!Wn.done&&(Xe=Vr.return)&&Xe.call(Vr)}finally{if(he)throw he.error}}if(!Tr)if(A._data.size!==Yt.size)A._keysAtom.reportChanged();else for(var qi=A._data.keys(),Hu=Yt.keys(),Us=qi.next(),Oi=Hu.next();!Us.done;){if(Us.value!==Oi.value){A._keysAtom.reportChanged();break}Us=qi.next(),Oi=Hu.next()}A._data=Yt}),this},Object.defineProperty(g.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.toPOJO=function(){var E,A,B={};try{for(var J=Ct(this),he=J.next();!he.done;he=J.next()){var Xe=Ge(he.value,2),Et=Xe[0],Yt=Xe[1];B[typeof Et=="symbol"?Et:Q(Et)]=Yt}}catch(Tr){E={error:Tr}}finally{try{he&&!he.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},g.prototype.toJS=function(){return new Map(this)},g.prototype.toJSON=function(){return this.toPOJO()},g.prototype.toString=function(){var E=this;return this.name+"[{ "+Array.from(this.keys()).map(function(A){return Q(A)+": "+(""+E.get(A))}).join(", ")+" }]"},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g}(),dn=ye("ObservableMap",Ji),mi,Fa={},Cs=function(){function g(E,A,B){if(A===void 0&&(A=nr),B===void 0&&(B="ObservableSet@"+y()),this.name=B,this[mi]=Fa,this._data=new Set,this._atom=Z(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(J,he){return A(J,he,B)},E&&this.replace(E)}return g.prototype.dehanceValue=function(E){return this.dehancer!==void 0?this.dehancer(E):E},g.prototype.clear=function(){var E=this;ho(function(){we(function(){var A,B;try{for(var J=Ct(E._data.values()),he=J.next();!he.done;he=J.next()){var Xe=he.value;E.delete(Xe)}}catch(Et){A={error:Et}}finally{try{he&&!he.done&&(B=J.return)&&B.call(J)}finally{if(A)throw A.error}}})})},g.prototype.forEach=function(E,A){var B,J;try{for(var he=Ct(this),Xe=he.next();!Xe.done;Xe=he.next()){var Et=Xe.value;E.call(A,Et,Et,this)}}catch(Yt){B={error:Yt}}finally{try{Xe&&!Xe.done&&(J=he.return)&&J.call(he)}finally{if(B)throw B.error}}},Object.defineProperty(g.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),g.prototype.add=function(E){var A=this;if(fr(this._atom),Vn(this)){var B=vo(this,{type:"add",object:this,newValue:E});if(!B)return this}if(!this.has(E)){ho(function(){A._data.add(A.enhancer(E,void 0)),A._atom.reportChanged()});var J=Zr(),he=io(this),B=he||J?{type:"add",object:this,newValue:E}:null;he&&jn(this,B)}return this},g.prototype.delete=function(E){var A=this;if(Vn(this)){var B=vo(this,{type:"delete",object:this,oldValue:E});if(!B)return!1}if(this.has(E)){var J=Zr(),he=io(this),B=he||J?{type:"delete",object:this,oldValue:E}:null;return ho(function(){A._atom.reportChanged(),A._data.delete(E)}),he&&jn(this,B),!0}return!1},g.prototype.has=function(E){return this._atom.reportObserved(),this._data.has(this.dehanceValue(E))},g.prototype.entries=function(){var E=0,A=Array.from(this.keys()),B=Array.from(this.values());return Qi({next:function(){var J=E;return E+=1,J<B.length?{value:[A[J],B[J]],done:!1}:{done:!0}}})},g.prototype.keys=function(){return this.values()},g.prototype.values=function(){this._atom.reportObserved();var E=this,A=0,B=Array.from(this._data.values());return Qi({next:function(){return A<B.length?{value:E.dehanceValue(B[A++]),done:!1}:{done:!0}}})},g.prototype.replace=function(E){var A=this;return Bn(E)&&(E=E.toJS()),ho(function(){var B=fi(!0);try{Array.isArray(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):xe(E)?(A.clear(),E.forEach(function(J){return A.add(J)})):E!=null&&S("Cannot initialize set from "+E)}finally{Xi(B)}}),this},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.toJS=function(){return new Set(this)},g.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},g.prototype[mi=k,Symbol.iterator]=function(){return this.values()},g}(),Bn=ye("ObservableSet",Cs),Ls=function(){function g(E,A,B,J){A===void 0&&(A=new Map),this.target=E,this.values=A,this.name=B,this.defaultEnhancer=J,this.keysAtom=new te(B+".keys")}return g.prototype.read=function(E){return this.values.get(E).get()},g.prototype.write=function(E,A){var B=this.target,J=this.values.get(E);if(J instanceof ci){J.set(A);return}if(Vn(this)){var he=vo(this,{type:"update",object:this.proxy||B,name:E,newValue:A});if(!he)return;A=he.newValue}if(A=J.prepareNewValue(A),A!==Wt.UNCHANGED){var Xe=io(this),Et=Zr(),he=Xe||Et?{type:"update",object:this.proxy||B,oldValue:J.value,name:E,newValue:A}:null;J.setNewValue(A),Xe&&jn(this,he)}},g.prototype.has=function(E){var A=this.pendingKeys||(this.pendingKeys=new Map),B=A.get(E);if(B)return B.get();var J=!!this.values.get(E);return B=new Vo(J,Jt,this.name+"."+Q(E)+"?",!1),A.set(E,B),B.get()},g.prototype.addObservableProp=function(E,A,B){B===void 0&&(B=this.defaultEnhancer);var J=this.target;if(Vn(this)){var he=vo(this,{object:this.proxy||J,name:E,type:"add",newValue:A});if(!he)return;A=he.newValue}var Xe=new Vo(A,B,this.name+"."+Q(E),!1);this.values.set(E,Xe),A=Xe.value,Object.defineProperty(J,E,pf(E)),this.notifyPropertyAddition(E,A)},g.prototype.addComputedProp=function(E,A,B){var J=this.target;B.name=B.name||this.name+"."+Q(A),this.values.set(A,new ci(B)),(E===J||ge(E,A))&&Object.defineProperty(E,A,ka(A))},g.prototype.remove=function(E){if(this.values.has(E)){var A=this.target;if(Vn(this)){var B=vo(this,{object:this.proxy||A,name:E,type:"remove"});if(!B)return}try{Kr();var J=io(this),he=Zr(),Xe=this.values.get(E),Et=Xe&&Xe.get();if(Xe&&Xe.set(void 0),this.keysAtom.reportChanged(),this.values.delete(E),this.pendingKeys){var Yt=this.pendingKeys.get(E);Yt&&Yt.set(!1)}delete this.target[E];var B=J||he?{type:"remove",object:this.proxy||A,oldValue:Et,name:E}:null;J&&jn(this,B)}finally{no()}}},g.prototype.illegalAccess=function(E,A){console.warn("Property '"+A+"' of '"+E+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},g.prototype.observe=function(E,A){return gi(this,E)},g.prototype.intercept=function(E){return Ki(this,E)},g.prototype.notifyPropertyAddition=function(E,A){var B=io(this),J=Zr(),he=B||J?{type:"add",object:this.proxy||this.target,name:E,newValue:A}:null;if(B&&jn(this,he),this.pendingKeys){var Xe=this.pendingKeys.get(E);Xe&&Xe.set(!0)}this.keysAtom.reportChanged()},g.prototype.getKeys=function(){var E,A;this.keysAtom.reportObserved();var B=[];try{for(var J=Ct(this.values),he=J.next();!he.done;he=J.next()){var Xe=Ge(he.value,2),Et=Xe[0],Yt=Xe[1];Yt instanceof Vo&&B.push(Et)}}catch(Tr){E={error:Tr}}finally{try{he&&!he.done&&(A=J.return)&&A.call(J)}finally{if(E)throw E.error}}return B},g}();function js(g,E,A){if(E===void 0&&(E=""),A===void 0&&(A=nr),Object.prototype.hasOwnProperty.call(g,k))return g[k];D(g)||(E=(g.constructor.name||"ObservableObject")+"@"+y()),E||(E="ObservableObject@"+y());var B=new Ls(g,new Map,Q(E),A);return V(g,k,B),B}var Gu=Object.create(null),ku=Object.create(null);function pf(g){return Gu[g]||(Gu[g]={configurable:!0,enumerable:!0,get:function(){return this[k].read(g)},set:function(E){this[k].write(g,E)}})}function Ga(g){var E=g[k];return E||(tt(g),g[k])}function ka(g){return ku[g]||(ku[g]={configurable:Wt.computedConfigurable,enumerable:!1,get:function(){return Ga(this).read(g)},set:function(E){Ga(this).write(g,E)}})}var Bs=ye("ObservableObjectAdministration",Ls);function kn(g){return M(g)?(tt(g),Bs(g[k])):!1}function Nn(g,E){if(typeof g=="object"&&g!==null){if(ao(g))return E!==void 0&&S(!1),g[k].atom;if(Bn(g))return g[k];if(dn(g)){var A=g;if(E===void 0)return A._keysAtom;var B=A._data.get(E)||A._hasMap.get(E);return B||S(!1),B}if(tt(g),E&&!g[k]&&g[E],kn(g)){if(!E)return S(!1);var B=g[k].values.get(E);return B||S(!1),B}if($(g)||di(g)||Ia(g))return g}else if(typeof g=="function"&&Ia(g[k]))return g[k];return S(!1)}function Zo(g,E){if(g||S("Expecting some object"),E!==void 0)return Zo(Nn(g,E));if($(g)||di(g)||Ia(g)||dn(g)||Bn(g))return g;if(tt(g),g[k])return g[k];S(!1)}function Fs(g,E){var A;return E!==void 0?A=Nn(g,E):kn(g)||dn(g)||Bn(g)?A=Zo(g):A=Nn(g),A.name}var Ua=Object.prototype.toString;function bi(g,E,A){return A===void 0&&(A=-1),Ei(g,E,A)}function Ei(g,E,A,B,J){if(g===E)return g!==0||1/g===1/E;if(g==null||E==null)return!1;if(g!==g)return E!==E;var he=typeof g;if(he!=="function"&&he!=="object"&&typeof E!="object")return!1;var Xe=Ua.call(g);if(Xe!==Ua.call(E))return!1;switch(Xe){case"[object RegExp]":case"[object String]":return""+g==""+E;case"[object Number]":return+g!=+g?+E!=+E:+g==0?1/+g===1/E:+g==+E;case"[object Date]":case"[object Boolean]":return+g==+E;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(g)===Symbol.valueOf.call(E);case"[object Map]":case"[object Set]":A>=0&&A++;break}g=Gs(g),E=Gs(E);var Et=Xe==="[object Array]";if(!Et){if(typeof g!="object"||typeof E!="object")return!1;var Yt=g.constructor,Tr=E.constructor;if(Yt!==Tr&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Tr=="function"&&Tr instanceof Tr)&&"constructor"in g&&"constructor"in E)return!1}if(A===0)return!1;A<0&&(A=-1),B=B||[],J=J||[];for(var wr=B.length;wr--;)if(B[wr]===g)return J[wr]===E;if(B.push(g),J.push(E),Et){if(wr=g.length,wr!==E.length)return!1;for(;wr--;)if(!Ei(g[wr],E[wr],A-1,B,J))return!1}else{var Ur=Object.keys(g),Hr=void 0;if(wr=Ur.length,Object.keys(E).length!==wr)return!1;for(;wr--;)if(Hr=Ur[wr],!(Uu(E,Hr)&&Ei(g[Hr],E[Hr],A-1,B,J)))return!1}return B.pop(),J.pop(),!0}function Gs(g){return ao(g)?g.slice():ce(g)||dn(g)||xe(g)||Bn(g)?Array.from(g.entries()):g}function Uu(g,E){return Object.prototype.hasOwnProperty.call(g,E)}function Qi(g){return g[Symbol.iterator]=za,g}function za(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");try{}catch{var ks=Na();typeof l>"u"&&(ks.process={}),ks.process.env={}}(function(){function g(){}if(g.name!=="testCodeMinification"&&!1)var E})(),typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wu,extras:{getDebugName:Fs},$mobx:k})}).call(this,o(155),o(82))},function(i,u,o){o.d(u,"a",function(){return ge}),o.d(u,"b",function(){return Ee}),o.d(u,"c",function(){return bt}),o.d(u,"d",function(){return Ut}),o.d(u,"e",function(){return D}),o.d(u,"f",function(){return V}),o.d(u,"g",function(){return D}),o.d(u,"h",function(){return Ge}),o.d(u,"i",function(){return c}),o.d(u,"j",function(){return Ct}),o.d(u,"k",function(){return I});var l,c,h,p,m,y,S,x={},T=[],w=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function N(ee,se){for(var me in se)ee[me]=se[me];return ee}function M(ee){var se=ee.parentNode;se&&se.removeChild(ee)}function D(ee,se,me){var Ue,tt,He,Lt={};for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];if(arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):me),typeof ee=="function"&&ee.defaultProps!=null)for(He in ee.defaultProps)Lt[He]===void 0&&(Lt[He]=ee.defaultProps[He]);return W(ee,Lt,Ue,tt,null)}function W(ee,se,me,Ue,tt){var He={type:ee,props:se,key:me,ref:Ue,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:tt??++h};return tt==null&&c.vnode!=null&&c.vnode(He),He}function V(){return{current:null}}function Ee(ee){return ee.children}function ge(ee,se){this.props=ee,this.context=se}function ye(ee,se){if(se==null)return ee.__?ye(ee.__,ee.__.__k.indexOf(ee)+1):null;for(var me;se<ee.__k.length;se++)if((me=ee.__k[se])!=null&&me.__e!=null)return me.__e;return typeof ee.type=="function"?ye(ee):null}function ce(ee){var se,me;if((ee=ee.__)!=null&&ee.__c!=null){for(ee.__e=ee.__c.base=null,se=0;se<ee.__k.length;se++)if((me=ee.__k[se])!=null&&me.__e!=null){ee.__e=ee.__c.base=me.__e;break}return ce(ee)}}function xe(ee){(!ee.__d&&(ee.__d=!0)&&p.push(ee)&&!j.__r++||y!==c.debounceRendering)&&((y=c.debounceRendering)||m)(j)}function j(){for(var ee;j.__r=p.length;)ee=p.sort(function(se,me){return se.__v.__b-me.__v.__b}),p=[],ee.some(function(se){var me,Ue,tt,He,Lt,nr;se.__d&&(Lt=(He=(me=se).__v).__e,(nr=me.__P)&&(Ue=[],(tt=N({},He)).__v=He.__v+1,Re(nr,He,tt,me.__n,nr.ownerSVGElement!==void 0,He.__h!=null?[Lt]:null,Ue,Lt??ye(He),He.__h),_e(Ue,He),He.__e!=Lt&&ce(He)))})}function Q(ee,se,me,Ue,tt,He,Lt,nr,tr,Jt){var rt,Er,ur,Xt,L,Qr,Rr,kr=Ue&&Ue.__k||T,Be=kr.length;for(me.__k=[],rt=0;rt<se.length;rt++)if((Xt=me.__k[rt]=(Xt=se[rt])==null||typeof Xt=="boolean"?null:typeof Xt=="string"||typeof Xt=="number"||typeof Xt=="bigint"?W(null,Xt,null,null,Xt):Array.isArray(Xt)?W(Ee,{children:Xt},null,null,null):Xt.__b>0?W(Xt.type,Xt.props,Xt.key,null,Xt.__v):Xt)!=null){if(Xt.__=me,Xt.__b=me.__b+1,(ur=kr[rt])===null||ur&&Xt.key==ur.key&&Xt.type===ur.type)kr[rt]=void 0;else for(Er=0;Er<Be;Er++){if((ur=kr[Er])&&Xt.key==ur.key&&Xt.type===ur.type){kr[Er]=void 0;break}ur=null}Re(ee,Xt,ur=ur||x,tt,He,Lt,nr,tr,Jt),L=Xt.__e,(Er=Xt.ref)&&ur.ref!=Er&&(Rr||(Rr=[]),ur.ref&&Rr.push(ur.ref,null,Xt),Rr.push(Er,Xt.__c||L,Xt)),L!=null?(Qr==null&&(Qr=L),typeof Xt.type=="function"&&Xt.__k===ur.__k?Xt.__d=tr=U(Xt,tr,ee):tr=k(ee,Xt,ur,kr,L,tr),typeof me.type=="function"&&(me.__d=tr)):tr&&ur.__e==tr&&tr.parentNode!=ee&&(tr=ye(ur))}for(me.__e=Qr,rt=Be;rt--;)kr[rt]!=null&&(typeof me.type=="function"&&kr[rt].__e!=null&&kr[rt].__e==me.__d&&(me.__d=ye(Ue,rt+1)),Nt(kr[rt],kr[rt]));if(Rr)for(rt=0;rt<Rr.length;rt++)gt(Rr[rt],Rr[++rt],Rr[++rt])}function U(ee,se,me){for(var Ue,tt=ee.__k,He=0;tt&&He<tt.length;He++)(Ue=tt[He])&&(Ue.__=ee,se=typeof Ue.type=="function"?U(Ue,se,me):k(me,Ue,Ue,tt,Ue.__e,se));return se}function I(ee,se){return se=se||[],ee==null||typeof ee=="boolean"||(Array.isArray(ee)?ee.some(function(me){I(me,se)}):se.push(ee)),se}function k(ee,se,me,Ue,tt,He){var Lt,nr,tr;if(se.__d!==void 0)Lt=se.__d,se.__d=void 0;else if(me==null||tt!=He||tt.parentNode==null)e:if(He==null||He.parentNode!==ee)ee.appendChild(tt),Lt=null;else{for(nr=He,tr=0;(nr=nr.nextSibling)&&tr<Ue.length;tr+=2)if(nr==tt)break e;ee.insertBefore(tt,He),Lt=He}return Lt!==void 0?Lt:tt.nextSibling}function te(ee,se,me,Ue,tt){var He;for(He in me)He==="children"||He==="key"||He in se||Z(ee,He,null,me[He],Ue);for(He in se)tt&&typeof se[He]!="function"||He==="children"||He==="key"||He==="value"||He==="checked"||me[He]===se[He]||Z(ee,He,se[He],me[He],Ue)}function $(ee,se,me){se[0]==="-"?ee.setProperty(se,me):ee[se]=me==null?"":typeof me!="number"||w.test(se)?me:me+"px"}function Z(ee,se,me,Ue,tt){var He;e:if(se==="style")if(typeof me=="string")ee.style.cssText=me;else{if(typeof Ue=="string"&&(ee.style.cssText=Ue=""),Ue)for(se in Ue)me&&se in me||$(ee.style,se,"");if(me)for(se in me)Ue&&me[se]===Ue[se]||$(ee.style,se,me[se])}else if(se[0]==="o"&&se[1]==="n")He=se!==(se=se.replace(/Capture$/,"")),se=se.toLowerCase()in ee?se.toLowerCase().slice(2):se.slice(2),ee.l||(ee.l={}),ee.l[se+He]=me,me?Ue||ee.addEventListener(se,He?Ae:le,He):ee.removeEventListener(se,He?Ae:le,He);else if(se!=="dangerouslySetInnerHTML"){if(tt)se=se.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(se!=="href"&&se!=="list"&&se!=="form"&&se!=="tabIndex"&&se!=="download"&&se in ee)try{ee[se]=me??"";break e}catch{}typeof me=="function"||(me!=null&&(me!==!1||se[0]==="a"&&se[1]==="r")?ee.setAttribute(se,me):ee.removeAttribute(se))}}function le(ee){this.l[ee.type+!1](c.event?c.event(ee):ee)}function Ae(ee){this.l[ee.type+!0](c.event?c.event(ee):ee)}function Re(ee,se,me,Ue,tt,He,Lt,nr,tr){var Jt,rt,Er,ur,Xt,L,Qr,Rr,kr,Be,Xr,zr=se.type;if(se.constructor!==void 0)return null;me.__h!=null&&(tr=me.__h,nr=se.__e=me.__e,se.__h=null,He=[nr]),(Jt=c.__b)&&Jt(se);try{e:if(typeof zr=="function"){if(Rr=se.props,kr=(Jt=zr.contextType)&&Ue[Jt.__c],Be=Jt?kr?kr.props.value:Jt.__:Ue,me.__c?Qr=(rt=se.__c=me.__c).__=rt.__E:("prototype"in zr&&zr.prototype.render?se.__c=rt=new zr(Rr,Be):(se.__c=rt=new ge(Rr,Be),rt.constructor=zr,rt.render=Vt),kr&&kr.sub(rt),rt.props=Rr,rt.state||(rt.state={}),rt.context=Be,rt.__n=Ue,Er=rt.__d=!0,rt.__h=[]),rt.__s==null&&(rt.__s=rt.state),zr.getDerivedStateFromProps!=null&&(rt.__s==rt.state&&(rt.__s=N({},rt.__s)),N(rt.__s,zr.getDerivedStateFromProps(Rr,rt.__s))),ur=rt.props,Xt=rt.state,Er)zr.getDerivedStateFromProps==null&&rt.componentWillMount!=null&&rt.componentWillMount(),rt.componentDidMount!=null&&rt.__h.push(rt.componentDidMount);else{if(zr.getDerivedStateFromProps==null&&Rr!==ur&&rt.componentWillReceiveProps!=null&&rt.componentWillReceiveProps(Rr,Be),!rt.__e&&rt.shouldComponentUpdate!=null&&rt.shouldComponentUpdate(Rr,rt.__s,Be)===!1||se.__v===me.__v){rt.props=Rr,rt.state=rt.__s,se.__v!==me.__v&&(rt.__d=!1),rt.__v=se,se.__e=me.__e,se.__k=me.__k,se.__k.forEach(function(Ir){Ir&&(Ir.__=se)}),rt.__h.length&&Lt.push(rt);break e}rt.componentWillUpdate!=null&&rt.componentWillUpdate(Rr,rt.__s,Be),rt.componentDidUpdate!=null&&rt.__h.push(function(){rt.componentDidUpdate(ur,Xt,L)})}rt.context=Be,rt.props=Rr,rt.state=rt.__s,(Jt=c.__r)&&Jt(se),rt.__d=!1,rt.__v=se,rt.__P=ee,Jt=rt.render(rt.props,rt.state,rt.context),rt.state=rt.__s,rt.getChildContext!=null&&(Ue=N(N({},Ue),rt.getChildContext())),Er||rt.getSnapshotBeforeUpdate==null||(L=rt.getSnapshotBeforeUpdate(ur,Xt)),Xr=Jt!=null&&Jt.type===Ee&&Jt.key==null?Jt.props.children:Jt,Q(ee,Array.isArray(Xr)?Xr:[Xr],se,me,Ue,tt,He,Lt,nr,tr),rt.base=se.__e,se.__h=null,rt.__h.length&&Lt.push(rt),Qr&&(rt.__E=rt.__=null),rt.__e=!1}else He==null&&se.__v===me.__v?(se.__k=me.__k,se.__e=me.__e):se.__e=Ke(me.__e,se,me,Ue,tt,He,Lt,tr);(Jt=c.diffed)&&Jt(se)}catch(Ir){se.__v=null,(tr||He!=null)&&(se.__e=nr,se.__h=!!tr,He[He.indexOf(nr)]=null),c.__e(Ir,se,me)}}function _e(ee,se){c.__c&&c.__c(se,ee),ee.some(function(me){try{ee=me.__h,me.__h=[],ee.some(function(Ue){Ue.call(me)})}catch(Ue){c.__e(Ue,me.__v)}})}function Ke(ee,se,me,Ue,tt,He,Lt,nr){var tr,Jt,rt,Er=me.props,ur=se.props,Xt=se.type,L=0;if(Xt==="svg"&&(tt=!0),He!=null){for(;L<He.length;L++)if((tr=He[L])&&"setAttribute"in tr==!!Xt&&(Xt?tr.localName===Xt:tr.nodeType===3)){ee=tr,He[L]=null;break}}if(ee==null){if(Xt===null)return document.createTextNode(ur);ee=tt?document.createElementNS("http://www.w3.org/2000/svg",Xt):document.createElement(Xt,ur.is&&ur),He=null,nr=!1}if(Xt===null)Er===ur||nr&&ee.data===ur||(ee.data=ur);else{if(He=He&&l.call(ee.childNodes),Jt=(Er=me.props||x).dangerouslySetInnerHTML,rt=ur.dangerouslySetInnerHTML,!nr){if(He!=null)for(Er={},L=0;L<ee.attributes.length;L++)Er[ee.attributes[L].name]=ee.attributes[L].value;(rt||Jt)&&(rt&&(Jt&&rt.__html==Jt.__html||rt.__html===ee.innerHTML)||(ee.innerHTML=rt&&rt.__html||""))}if(te(ee,ur,Er,tt,nr),rt)se.__k=[];else if(L=se.props.children,Q(ee,Array.isArray(L)?L:[L],se,me,Ue,tt&&Xt!=="foreignObject",He,Lt,He?He[0]:me.__k&&ye(me,0),nr),He!=null)for(L=He.length;L--;)He[L]!=null&&M(He[L]);nr||("value"in ur&&(L=ur.value)!==void 0&&(L!==Er.value||L!==ee.value||Xt==="progress"&&!L)&&Z(ee,"value",L,Er.value,!1),"checked"in ur&&(L=ur.checked)!==void 0&&L!==ee.checked&&Z(ee,"checked",L,Er.checked,!1))}return ee}function gt(ee,se,me){try{typeof ee=="function"?ee(se):ee.current=se}catch(Ue){c.__e(Ue,me)}}function Nt(ee,se,me){var Ue,tt;if(c.unmount&&c.unmount(ee),(Ue=ee.ref)&&(Ue.current&&Ue.current!==ee.__e||gt(Ue,null,se)),(Ue=ee.__c)!=null){if(Ue.componentWillUnmount)try{Ue.componentWillUnmount()}catch(He){c.__e(He,se)}Ue.base=Ue.__P=null}if(Ue=ee.__k)for(tt=0;tt<Ue.length;tt++)Ue[tt]&&Nt(Ue[tt],se,typeof ee.type!="function");me||ee.__e==null||M(ee.__e),ee.__e=ee.__d=void 0}function Vt(ee,se,me){return this.constructor(ee,me)}function Ct(ee,se,me){var Ue,tt,He;c.__&&c.__(ee,se),tt=(Ue=typeof me=="function")?null:me&&me.__k||se.__k,He=[],Re(se,ee=(!Ue&&me||se).__k=D(Ee,null,[ee]),tt||x,x,se.ownerSVGElement!==void 0,!Ue&&me?[me]:tt?null:se.firstChild?l.call(se.childNodes):null,He,!Ue&&me?me:tt?tt.__e:se.firstChild,Ue),_e(He,ee)}function Ge(ee,se){Ct(ee,se,Ge)}function bt(ee,se,me){var Ue,tt,He,Lt=N({},ee.props);for(He in se)He=="key"?Ue=se[He]:He=="ref"?tt=se[He]:Lt[He]=se[He];return arguments.length>2&&(Lt.children=arguments.length>3?l.call(arguments,2):me),W(ee.type,Lt,Ue||ee.key,tt||ee.ref,null)}function Ut(ee,se){var me={__c:se="__cC"+S++,__:ee,Consumer:function(Ue,tt){return Ue.children(tt)},Provider:function(Ue){var tt,He;return this.getChildContext||(tt=[],(He={})[se]=this,this.getChildContext=function(){return He},this.shouldComponentUpdate=function(Lt){this.props.value!==Lt.value&&tt.some(xe)},this.sub=function(Lt){tt.push(Lt);var nr=Lt.componentWillUnmount;Lt.componentWillUnmount=function(){tt.splice(tt.indexOf(Lt),1),nr&&nr.call(Lt)}}),Ue.children}};return me.Provider.__=me.Consumer.contextType=me}l=T.slice,c={__e:function(ee,se){for(var me,Ue,tt;se=se.__;)if((me=se.__c)&&!me.__)try{if((Ue=me.constructor)&&Ue.getDerivedStateFromError!=null&&(me.setState(Ue.getDerivedStateFromError(ee)),tt=me.__d),me.componentDidCatch!=null&&(me.componentDidCatch(ee),tt=me.__d),tt)return me.__E=me}catch(He){ee=He}throw ee}},h=0,ge.prototype.setState=function(ee,se){var me;me=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof ee=="function"&&(ee=ee(N({},me),this.props)),ee&&N(me,ee),ee!=null&&this.__v&&(se&&this.__h.push(se),xe(this))},ge.prototype.forceUpdate=function(ee){this.__v&&(this.__e=!0,ee&&this.__h.push(ee),xe(this))},ge.prototype.render=Ee,p=[],m=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,j.__r=0,S=0},function(i,u,o){var l=o(116),c=o(44),h=o(178);l||c(Object.prototype,"toString",h,{unsafe:!0})},function(i,u,o){var l=o(39),c=o(83),h=o(71),p=o(56),m=o(111),y="Array Iterator",S=p.set,x=p.getterFor(y);i.exports=m(Array,"Array",function(T,w){S(this,{type:y,target:l(T),index:0,kind:w})},function(){var T=x(this),w=T.target,N=T.kind,M=T.index++;return!w||M>=w.length?(T.target=void 0,{value:void 0,done:!0}):N=="keys"?{value:M,done:!1}:N=="values"?{value:w[M],done:!1}:{value:[M,w[M]],done:!1}},"values"),h.Arguments=h.Array,c("keys"),c("values"),c("entries")},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(3),m=o(57),y=o(27),S=y("iterator"),x=y("toStringTag"),T=p.values,w=function(M,D){if(M){if(M[S]!==T)try{m(M,S,T)}catch{M[S]=T}if(M[x]||m(M,x,D),c[D]){for(var W in p)if(M[W]!==p[W])try{m(M,W,p[W])}catch{M[W]=p[W]}}}};for(var N in c)w(l[N]&&l[N].prototype,N);w(h,"DOMTokenList")},function(i,u,o){var l=o(16),c=o(7),h=o(46),p=o(77),m=o(35),y=o(15),S=o(65),x=o(36),T=o(109),w=o(18),N=o(34),M=o(99),D=o(28),W=o(33),V=o(58),Ee=o(88),ge=o(32),ye=o(38),ce=o(39),xe=o(87),j=o(40),Q=o(72),U=o(54),I=o(67),k=o(73),te=o(139),$=o(112),Z=o(51),le=o(37),Ae=o(93),Re=o(101),_e=o(44),Ke=o(84),gt=o(91),Nt=o(70),Vt=o(85),Ct=o(27),Ge=o(149),bt=o(150),Ut=o(74),ee=o(56),se=o(75).forEach,me=gt("hidden"),Ue="Symbol",tt="prototype",He=Ct("toPrimitive"),Lt=ee.set,nr=ee.getterFor(Ue),tr=Object[tt],Jt=c.Symbol,rt=Jt&&Jt[tt],Er=c.TypeError,ur=c.QObject,Xt=h("JSON","stringify"),L=Z.f,Qr=le.f,Rr=te.f,kr=Ae.f,Be=y([].push),Xr=Ke("symbols"),zr=Ke("op-symbols"),Ir=Ke("string-to-symbol-registry"),On=Ke("symbol-to-string-registry"),eo=Ke("wks"),In=!ur||!ur[tt]||!ur[tt].findChild,to=x&&w(function(){return U(Qr({},"a",{get:function(){return Qr(this,"a",{value:7}).a}})).a!=7})?function(we,Ne,ht){var _t=L(tr,Ne);_t&&delete tr[Ne],Qr(we,Ne,ht),_t&&we!==tr&&Qr(tr,Ne,_t)}:Qr,Qt=function(we,Ne){var ht=Xr[we]=U(rt);return Lt(ht,{type:Ue,tag:we,description:Ne}),x||(ht.description=Ne),ht},$r=function(Ne,ht,_t){Ne===tr&&$r(zr,ht,_t),ge(Ne);var Kt=xe(ht);return ge(_t),N(Xr,Kt)?(_t.enumerable?(N(Ne,me)&&Ne[me][Kt]&&(Ne[me][Kt]=!1),_t=U(_t,{enumerable:Q(0,!1)})):(N(Ne,me)||Qr(Ne,me,Q(1,{})),Ne[me][Kt]=!0),to(Ne,Kt,_t)):Qr(Ne,Kt,_t)},Dn=function(Ne,ht){ge(Ne);var _t=ce(ht),Kt=I(_t).concat(_r(_t));return se(Kt,function(Br){(!x||m(or,_t,Br))&&$r(Ne,Br,_t[Br])}),Ne},Mt=function(Ne,ht){return ht===void 0?U(Ne):Dn(U(Ne),ht)},or=function(Ne){var ht=xe(Ne),_t=m(kr,this,ht);return this===tr&&N(Xr,ht)&&!N(zr,ht)?!1:_t||!N(this,ht)||!N(Xr,ht)||N(this,me)&&this[me][ht]?_t:!0},vr=function(Ne,ht){var _t=ce(Ne),Kt=xe(ht);if(!(_t===tr&&N(Xr,Kt)&&!N(zr,Kt))){var Br=L(_t,Kt);return Br&&N(Xr,Kt)&&!(N(_t,me)&&_t[me][Kt])&&(Br.enumerable=!0),Br}},fr=function(Ne){var ht=Rr(ce(Ne)),_t=[];return se(ht,function(Kt){!N(Xr,Kt)&&!N(Nt,Kt)&&Be(_t,Kt)}),_t},_r=function(Ne){var ht=Ne===tr,_t=Rr(ht?zr:ce(Ne)),Kt=[];return se(_t,function(Br){N(Xr,Br)&&(!ht||N(tr,Br))&&Be(Kt,Xr[Br])}),Kt};if(T||(Jt=function(){if(V(rt,this))throw Er("Symbol is not a constructor");var Ne=!arguments.length||arguments[0]===void 0?void 0:j(arguments[0]),ht=Vt(Ne),_t=function(Kt){this===tr&&m(_t,zr,Kt),N(this,me)&&N(this[me],ht)&&(this[me][ht]=!1),to(this,ht,Q(1,Kt))};return x&&In&&to(tr,ht,{configurable:!0,set:_t}),Qt(ht,Ne)},rt=Jt[tt],_e(rt,"toString",function(){return nr(this).tag}),_e(Jt,"withoutSetter",function(we){return Qt(Vt(we),we)}),Ae.f=or,le.f=$r,Z.f=vr,k.f=te.f=fr,$.f=_r,Ge.f=function(we){return Qt(Ct(we),we)},x&&(Qr(rt,"description",{configurable:!0,get:function(){return nr(this).description}}),S||_e(tr,"propertyIsEnumerable",or,{unsafe:!0}))),l({global:!0,wrap:!0,forced:!T,sham:!T},{Symbol:Jt}),se(I(eo),function(we){bt(we)}),l({target:Ue,stat:!0,forced:!T},{for:function(we){var Ne=j(we);if(N(Ir,Ne))return Ir[Ne];var ht=Jt(Ne);return Ir[Ne]=ht,On[ht]=Ne,ht},keyFor:function(Ne){if(!Ee(Ne))throw Er(Ne+" is not a symbol");if(N(On,Ne))return On[Ne]},useSetter:function(){In=!0},useSimple:function(){In=!1}}),l({target:"Object",stat:!0,forced:!T,sham:!x},{create:Mt,defineProperty:$r,defineProperties:Dn,getOwnPropertyDescriptor:vr}),l({target:"Object",stat:!0,forced:!T},{getOwnPropertyNames:fr,getOwnPropertySymbols:_r}),l({target:"Object",stat:!0,forced:w(function(){$.f(1)})},{getOwnPropertySymbols:function(Ne){return $.f(ye(Ne))}}),Xt){var re=!T||w(function(){var we=Jt();return Xt([we])!="[null]"||Xt({a:we})!="{}"||Xt(Object(we))!="{}"});l({target:"JSON",stat:!0,forced:re},{stringify:function(Ne,ht,_t){var Kt=Re(arguments),Br=ht;if(!(!W(ht)&&Ne===void 0||Ee(Ne)))return M(ht)||(ht=function(Cn,Ln){if(D(Br)&&(Ln=m(Br,this,Cn,Ln)),!Ee(Ln))return Ln}),Kt[1]=ht,p(Xt,null,Kt)}})}if(!rt[He]){var Oe=rt.valueOf;_e(rt,He,function(we){return m(Oe,this)})}Ut(Jt,Ue),Nt[me]=!0},function(i,u,o){var l=o(146).charAt,c=o(40),h=o(56),p=o(111),m="String Iterator",y=h.set,S=h.getterFor(m);p(String,"String",function(x){y(this,{type:m,string:c(x),index:0})},function(){var T=S(this),w=T.string,N=T.index,M;return N>=w.length?{value:void 0,done:!0}:(M=l(w,N),T.index+=M.length,{value:M,done:!1})})},function(i,u,o){(function(l){var c=function(h){return h&&h.Math==Math&&h};i.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof l=="object"&&l)||function(){return this}()||Function("return this")()}).call(this,o(82))},function(i,u,o){var l=o(16),c=o(36),h=o(7),p=o(15),m=o(34),y=o(28),S=o(58),x=o(40),T=o(37).f,w=o(134),N=h.Symbol,M=N&&N.prototype;if(c&&y(N)&&(!("description"in M)||N().description!==void 0)){var D={},W=function(){var Q=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),U=S(M,this)?new N(Q):Q===void 0?N():N(Q);return Q===""&&(D[U]=!0),U};w(W,N),W.prototype=M,M.constructor=W;var V=String(N("test"))=="Symbol(test)",Ee=p(M.toString),ge=p(M.valueOf),ye=/^Symbol\((.*)\)[^)]+$/,ce=p("".replace),xe=p("".slice);T(M,"description",{configurable:!0,get:function(){var Q=ge(this),U=Ee(Q);if(m(D,Q))return"";var I=V?xe(U,7,-1):ce(U,ye,"$1");return I===""?void 0:I}}),l({global:!0,forced:!0},{Symbol:W})}},function(i,u,o){var l=o(150);l("iterator")},function(i,u,o){o.d(u,"a",function(){return l.a}),o.d(u,"c",function(){return l.e}),o.d(u,"h",function(){return xe}),o.d(u,"i",function(){return V}),o.d(u,"j",function(){return D}),o.d(u,"b",function(){return _e}),o.d(u,"e",function(){return Vt}),o.d(u,"f",function(){return Ke}),o.d(u,"g",function(){return or});var l=o(1),c,h,p,m=0,y=[],S=l.i.__b,x=l.i.__r,T=l.i.diffed,w=l.i.__c,N=l.i.unmount;function M(re,Oe){l.i.__h&&l.i.__h(h,re,m||Oe),m=0;var we=h.__H||(h.__H={__:[],__h:[]});return re>=we.__.length&&we.__.push({}),we.__[re]}function D(re){return m=1,W(le,re)}function W(re,Oe,we){var Ne=M(c++,2);return Ne.t=re,Ne.__c||(Ne.__=[we?we(Oe):le(void 0,Oe),function(ht){var _t=Ne.t(Ne.__[0],ht);Ne.__[0]!==_t&&(Ne.__=[_t,Ne.__[1]],Ne.__c.setState({}))}],Ne.__c=h),Ne.__}function V(re,Oe){var we=M(c++,3);!l.i.__s&&Z(we.__H,Oe)&&(we.__=re,we.__H=Oe,h.__H.__h.push(we))}function Ee(re,Oe){var we=M(c++,4);!l.i.__s&&Z(we.__H,Oe)&&(we.__=re,we.__H=Oe,h.__h.push(we))}function ge(re){return m=5,ce(function(){return{current:re}},[])}function ye(re,Oe,we){m=6,Ee(function(){typeof re=="function"?re(Oe()):re&&(re.current=Oe())},we==null?we:we.concat(re))}function ce(re,Oe){var we=M(c++,7);return Z(we.__H,Oe)&&(we.__=re(),we.__H=Oe,we.__h=re),we.__}function xe(re,Oe){return m=8,ce(function(){return re},Oe)}function j(re){var Oe=h.context[re.__c],we=M(c++,9);return we.c=re,Oe?(we.__==null&&(we.__=!0,Oe.sub(h)),Oe.props.value):re.__}function Q(re,Oe){l.i.useDebugValue&&l.i.useDebugValue(Oe?Oe(re):re)}function U(){var re;for(y.sort(function(Oe,we){return Oe.__v.__b-we.__v.__b});re=y.pop();)if(re.__P)try{re.__H.__h.forEach(te),re.__H.__h.forEach($),re.__H.__h=[]}catch(Oe){re.__H.__h=[],l.i.__e(Oe,re.__v)}}l.i.__b=function(re){h=null,S&&S(re)},l.i.__r=function(re){x&&x(re),c=0;var Oe=(h=re.__c).__H;Oe&&(Oe.__h.forEach(te),Oe.__h.forEach($),Oe.__h=[])},l.i.diffed=function(re){T&&T(re);var Oe=re.__c;Oe&&Oe.__H&&Oe.__H.__h.length&&(y.push(Oe)!==1&&p===l.i.requestAnimationFrame||((p=l.i.requestAnimationFrame)||k)(U)),h=null},l.i.__c=function(re,Oe){Oe.some(function(we){try{we.__h.forEach(te),we.__h=we.__h.filter(function(Ne){return!Ne.__||$(Ne)})}catch(Ne){Oe.some(function(ht){ht.__h&&(ht.__h=[])}),Oe=[],l.i.__e(Ne,we.__v)}}),w&&w(re,Oe)},l.i.unmount=function(re){N&&N(re);var Oe,we=re.__c;we&&we.__H&&(we.__H.__.forEach(function(Ne){try{te(Ne)}catch(ht){Oe=ht}}),Oe&&l.i.__e(Oe,we.__v))};var I=typeof requestAnimationFrame=="function";function k(re){var Oe,we=function(){clearTimeout(Ne),I&&cancelAnimationFrame(Oe),setTimeout(re)},Ne=setTimeout(we,100);I&&(Oe=requestAnimationFrame(we))}function te(re){var Oe=h,we=re.__c;typeof we=="function"&&(re.__c=void 0,we()),h=Oe}function $(re){var Oe=h;re.__c=re.__(),h=Oe}function Z(re,Oe){return!re||re.length!==Oe.length||Oe.some(function(we,Ne){return we!==re[Ne]})}function le(re,Oe){return typeof Oe=="function"?Oe(re):Oe}function Ae(re,Oe){for(var we in Oe)re[we]=Oe[we];return re}function Re(re,Oe){for(var we in re)if(we!=="__source"&&!(we in Oe))return!0;for(var Ne in Oe)if(Ne!=="__source"&&re[Ne]!==Oe[Ne])return!0;return!1}function _e(re){this.props=re}function Ke(re,Oe){function we(ht){var _t=this.props.ref,Kt=_t==ht.ref;return!Kt&&_t&&(_t.call?_t(null):_t.current=null),Oe?!Oe(this.props,ht)||!Kt:Re(this.props,ht)}function Ne(ht){return this.shouldComponentUpdate=we,Object(l.e)(re,ht)}return Ne.displayName="Memo("+(re.displayName||re.name)+")",Ne.prototype.isReactComponent=!0,Ne.__f=!0,Ne}(_e.prototype=new l.a).isPureReactComponent=!0,_e.prototype.shouldComponentUpdate=function(re,Oe){return Re(this.props,re)||Re(this.state,Oe)};var gt=l.i.__b;l.i.__b=function(re){re.type&&re.type.__f&&re.ref&&(re.props.ref=re.ref,re.ref=null),gt&&gt(re)};var Nt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Vt(re){function Oe(we,Ne){var ht=Ae({},we);return delete ht.ref,re(ht,!(Ne=we.ref||Ne)||typeof Ne=="object"&&!("current"in Ne)?null:Ne)}return Oe.$$typeof=Nt,Oe.render=Oe,Oe.prototype.isReactComponent=Oe.__f=!0,Oe.displayName="ForwardRef("+(re.displayName||re.name)+")",Oe}var Ct=function(re,Oe){return re==null?null:Object(l.k)(Object(l.k)(re).map(Oe))},Ge={map:Ct,forEach:Ct,count:function(re){return re?Object(l.k)(re).length:0},only:function(re){var Oe=Object(l.k)(re);if(Oe.length!==1)throw"Children.only";return Oe[0]},toArray:l.k},bt=l.i.__e;l.i.__e=function(re,Oe,we){if(re.then){for(var Ne,ht=Oe;ht=ht.__;)if((Ne=ht.__c)&&Ne.__c)return Oe.__e==null&&(Oe.__e=we.__e,Oe.__k=we.__k),Ne.__c(re,Oe)}bt(re,Oe,we)};var Ut=l.i.unmount;function ee(re,Oe,we){return re&&(re.__c&&re.__c.__H&&(re.__c.__H.__.forEach(function(Ne){typeof Ne.__c=="function"&&Ne.__c()}),re.__c.__H=null),(re=Ae({},re)).__c!=null&&(re.__c.__P===we&&(re.__c.__P=Oe),re.__c=null),re.__k=re.__k&&re.__k.map(function(Ne){return ee(Ne,Oe,we)})),re}function se(re,Oe,we){return re&&(re.__v=null,re.__k=re.__k&&re.__k.map(function(Ne){return se(Ne,Oe,we)}),re.__c&&re.__c.__P===Oe&&(re.__e&&we.insertBefore(re.__e,re.__d),re.__c.__e=!0,re.__c.__P=we)),re}function me(){this.__u=0,this.t=null,this.__b=null}function Ue(re){var Oe=re.__.__c;return Oe&&Oe.__e&&Oe.__e(re)}function tt(re){var Oe,we,Ne;function ht(_t){if(Oe||(Oe=re()).then(function(Kt){we=Kt.default||Kt},function(Kt){Ne=Kt}),Ne)throw Ne;if(!we)throw Oe;return Object(l.e)(we,_t)}return ht.displayName="Lazy",ht.__f=!0,ht}function He(){this.u=null,this.o=null}l.i.unmount=function(re){var Oe=re.__c;Oe&&Oe.__R&&Oe.__R(),Oe&&re.__h===!0&&(re.type=null),Ut&&Ut(re)},(me.prototype=new l.a).__c=function(re,Oe){var we=Oe.__c,Ne=this;Ne.t==null&&(Ne.t=[]),Ne.t.push(we);var ht=Ue(Ne.__v),_t=!1,Kt=function(){_t||(_t=!0,we.__R=null,ht?ht(Br):Br())};we.__R=Kt;var Br=function(){if(!--Ne.__u){if(Ne.state.__e){var Ln=Ne.state.__e;Ne.__v.__k[0]=se(Ln,Ln.__c.__P,Ln.__c.__O)}var Hi;for(Ne.setState({__e:Ne.__b=null});Hi=Ne.t.pop();)Hi.forceUpdate()}},Cn=Oe.__h===!0;Ne.__u++||Cn||Ne.setState({__e:Ne.__b=Ne.__v.__k[0]}),re.then(Kt,Kt)},me.prototype.componentWillUnmount=function(){this.t=[]},me.prototype.render=function(re,Oe){if(this.__b){if(this.__v.__k){var we=document.createElement("div"),Ne=this.__v.__k[0].__c;this.__v.__k[0]=ee(this.__b,we,Ne.__O=Ne.__P)}this.__b=null}var ht=Oe.__e&&Object(l.e)(l.b,null,re.fallback);return ht&&(ht.__h=null),[Object(l.e)(l.b,null,Oe.__e?null:re.children),ht]};var Lt=function(re,Oe,we){if(++we[1]===we[0]&&re.o.delete(Oe),re.props.revealOrder&&(re.props.revealOrder[0]!=="t"||!re.o.size))for(we=re.u;we;){for(;we.length>3;)we.pop()();if(we[1]<we[0])break;re.u=we=we[2]}};function nr(re){return this.getChildContext=function(){return re.context},re.children}function tr(re){var Oe=this,we=re.i;Oe.componentWillUnmount=function(){Object(l.j)(null,Oe.l),Oe.l=null,Oe.i=null},Oe.i&&Oe.i!==we&&Oe.componentWillUnmount(),re.__v?(Oe.l||(Oe.i=we,Oe.l={nodeType:1,parentNode:we,childNodes:[],appendChild:function(Ne){this.childNodes.push(Ne),Oe.i.appendChild(Ne)},insertBefore:function(Ne,ht){this.childNodes.push(Ne),Oe.i.appendChild(Ne)},removeChild:function(Ne){this.childNodes.splice(this.childNodes.indexOf(Ne)>>>1,1),Oe.i.removeChild(Ne)}}),Object(l.j)(Object(l.e)(nr,{context:Oe.context},re.__v),Oe.l)):Oe.l&&Oe.componentWillUnmount()}function Jt(re,Oe){return Object(l.e)(tr,{__v:re,i:Oe})}(He.prototype=new l.a).__e=function(re){var Oe=this,we=Ue(Oe.__v),Ne=Oe.o.get(re);return Ne[0]++,function(ht){var _t=function(){Oe.props.revealOrder?(Ne.push(ht),Lt(Oe,re,Ne)):ht()};we?we(_t):_t()}},He.prototype.render=function(re){this.u=null,this.o=new Map;var Oe=Object(l.k)(re.children);re.revealOrder&&re.revealOrder[0]==="b"&&Oe.reverse();for(var we=Oe.length;we--;)this.o.set(Oe[we],this.u=[1,0,this.u]);return re.children},He.prototype.componentDidUpdate=He.prototype.componentDidMount=function(){var re=this;this.o.forEach(function(Oe,we){Lt(re,we,Oe)})};var rt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Er=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ur=typeof document<"u",Xt=function(re){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(re)};function L(re,Oe,we){return Oe.__k==null&&(Oe.textContent=""),Object(l.j)(re,Oe),typeof we=="function"&&we(),re?re.__c:null}function Qr(re,Oe,we){return Object(l.h)(re,Oe),typeof we=="function"&&we(),re?re.__c:null}l.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(re){Object.defineProperty(l.a.prototype,re,{configurable:!0,get:function(){return this["UNSAFE_"+re]},set:function(Oe){Object.defineProperty(this,re,{configurable:!0,writable:!0,value:Oe})}})});var Rr=l.i.event;function kr(){}function Be(){return this.cancelBubble}function Xr(){return this.defaultPrevented}l.i.event=function(re){return Rr&&(re=Rr(re)),re.persist=kr,re.isPropagationStopped=Be,re.isDefaultPrevented=Xr,re.nativeEvent=re};var zr,Ir={configurable:!0,get:function(){return this.class}},On=l.i.vnode;l.i.vnode=function(re){var Oe=re.type,we=re.props,Ne=we;if(typeof Oe=="string"){var ht=Oe.indexOf("-")===-1;for(var _t in Ne={},we){var Kt=we[_t];ur&&_t==="children"&&Oe==="noscript"||_t==="value"&&"defaultValue"in we&&Kt==null||(_t==="defaultValue"&&"value"in we&&we.value==null?_t="value":_t==="download"&&Kt===!0?Kt="":/ondoubleclick/i.test(_t)?_t="ondblclick":/^onchange(textarea|input)/i.test(_t+Oe)&&!Xt(we.type)?_t="oninput":/^onfocus$/i.test(_t)?_t="onfocusin":/^onblur$/i.test(_t)?_t="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(_t)?_t=_t.toLowerCase():ht&&Er.test(_t)?_t=_t.replace(/[A-Z0-9]/,"-$&").toLowerCase():Kt===null&&(Kt=void 0),Ne[_t]=Kt)}Oe=="select"&&Ne.multiple&&Array.isArray(Ne.value)&&(Ne.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=Ne.value.indexOf(Br.props.value)!=-1})),Oe=="select"&&Ne.defaultValue!=null&&(Ne.value=Object(l.k)(we.children).forEach(function(Br){Br.props.selected=Ne.multiple?Ne.defaultValue.indexOf(Br.props.value)!=-1:Ne.defaultValue==Br.props.value})),re.props=Ne,we.class!=we.className&&(Ir.enumerable="className"in we,we.className!=null&&(Ne.class=we.className),Object.defineProperty(Ne,"className",Ir))}re.$$typeof=rt,On&&On(re)};var eo=l.i.__r;l.i.__r=function(re){eo&&eo(re),zr=re.__c};var In={ReactCurrentDispatcher:{current:{readContext:function(re){return zr.__n[re.__c].props.value}}}};function to(re){return l.e.bind(null,re)}function Qt(re){return!!re&&re.$$typeof===rt}function $r(re){return Qt(re)?l.c.apply(null,arguments):re}function Dn(re){return!!re.__k&&(Object(l.j)(null,re),!0)}function Mt(re){return re&&(re.base||re.nodeType===1&&re)||null}var or=function(re,Oe){return re(Oe)},vr=function(re,Oe){return re(Oe)},fr=l.b,_r={useState:D,useReducer:W,useEffect:V,useLayoutEffect:Ee,useRef:ge,useImperativeHandle:ye,useMemo:ce,useCallback:xe,useContext:j,useDebugValue:Q,version:"17.0.2",Children:Ge,render:L,hydrate:Qr,unmountComponentAtNode:Dn,createPortal:Jt,createElement:l.e,createContext:l.d,createFactory:to,cloneElement:$r,createRef:l.f,Fragment:l.b,isValidElement:Qt,findDOMNode:Mt,Component:l.a,PureComponent:_e,memo:Ke,forwardRef:Vt,flushSync:vr,unstable_batchedUpdates:or,StrictMode:fr,Suspense:me,SuspenseList:He,lazy:tt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:In};u.d=_r},function(i,u,o){var l=o(7),c=o(147),h=o(148),p=o(179),m=o(57),y=function(x){if(x&&x.forEach!==p)try{m(x,"forEach",p)}catch{x.forEach=p}};for(var S in c)c[S]&&y(l[S]&&l[S].prototype);y(h)},function(i,u,o){var l=o(16),c=o(97);l({target:"Object",stat:!0},{setPrototypeOf:c})},function(i,u,o){var l=o(16),c=o(18),h=o(38),p=o(96),m=o(137),y=c(function(){p(1)});l({target:"Object",stat:!0,forced:y,sham:!m},{getPrototypeOf:function(x){return p(h(x))}})},function(i,u,o){var l=o(16),c=o(46),h=o(77),p=o(199),m=o(157),y=o(32),S=o(33),x=o(54),T=o(18),w=c("Reflect","construct"),N=Object.prototype,M=[].push,D=T(function(){function Ee(){}return!(w(function(){},[],Ee)instanceof Ee)}),W=!T(function(){w(function(){})}),V=D||W;l({target:"Reflect",stat:!0,forced:V,sham:V},{construct:function(ge,ye){m(ge),y(ye);var ce=arguments.length<3?ge:m(arguments[2]);if(W&&!D)return w(ge,ye,ce);if(ge==ce){switch(ye.length){case 0:return new ge;case 1:return new ge(ye[0]);case 2:return new ge(ye[0],ye[1]);case 3:return new ge(ye[0],ye[1],ye[2]);case 4:return new ge(ye[0],ye[1],ye[2],ye[3])}var xe=[null];return h(M,xe,ye),new(h(p,ge,xe))}var j=ce.prototype,Q=x(S(j)?j:N),U=h(ge,Q,ye);return S(U)?U:Q}})},function(i,u){var o=Function.prototype,l=o.bind,c=o.call,h=l&&l.bind(c);i.exports=l?function(p){return p&&h(c,p)}:function(p){return p&&function(){return c.apply(p,arguments)}}},function(i,u,o){var l=o(7),c=o(51).f,h=o(57),p=o(44),m=o(108),y=o(134),S=o(95);i.exports=function(x,T){var w=x.target,N=x.global,M=x.stat,D,W,V,Ee,ge,ye;if(N?W=l:M?W=l[w]||m(w,{}):W=(l[w]||{}).prototype,W)for(V in T){if(ge=T[V],x.noTargetGet?(ye=c(W,V),Ee=ye&&ye.value):Ee=W[V],D=S(N?V:w+(M?".":"#")+V,x.forced),!D&&Ee!==void 0){if(typeof ge==typeof Ee)continue;y(ge,Ee)}(x.sham||Ee&&Ee.sham)&&h(ge,"sham",!0),p(W,V,ge,x)}}},function(i,u,o){var l=o(16),c=o(7),h=o(99),p=o(100),m=o(33),y=o(68),S=o(43),x=o(39),T=o(61),w=o(27),N=o(76),M=o(101),D=N("slice"),W=w("species"),V=c.Array,Ee=Math.max;l({target:"Array",proto:!0,forced:!D},{slice:function(ye,ce){var xe=x(this),j=S(xe),Q=y(ye,j),U=y(ce===void 0?j:ce,j),I,k,te;if(h(xe)&&(I=xe.constructor,p(I)&&(I===V||h(I.prototype))?I=void 0:m(I)&&(I=I[W],I===null&&(I=void 0)),I===V||I===void 0))return M(xe,Q,U);for(k=new(I===void 0?V:I)(Ee(U-Q,0)),te=0;Q<U;Q++,te++)Q in xe&&T(k,te,xe[Q]);return k.length=te,k}})},function(i,u){i.exports=function(o){try{return!!o()}catch{return!0}}},function(i,u,o){var l=o(16),c=o(102);l({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(i,u,o){var l=o(16),c=o(38),h=o(67),p=o(18),m=p(function(){h(1)});l({target:"Object",stat:!0,forced:m},{keys:function(S){return h(c(S))}})},function(i,u,o){var l=o(16),c=o(18),h=o(39),p=o(51).f,m=o(36),y=c(function(){p(1)}),S=!m||y;l({target:"Object",stat:!0,forced:S,sham:!m},{getOwnPropertyDescriptor:function(T,w){return p(h(T),w)}})},function(i,u,o){var l=o(16),c=o(75).filter,h=o(76),p=h("filter");l({target:"Array",proto:!0,forced:!p},{filter:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(36),c=o(94).EXISTS,h=o(15),p=o(37).f,m=Function.prototype,y=h(m.toString),S=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=h(S.exec),T="name";l&&!c&&p(m,T,{configurable:!0,get:function(){try{return x(S,y(this))[1]}catch{return""}}})},function(i,u,o){var l=o(16),c=o(36),h=o(135),p=o(39),m=o(51),y=o(61);l({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(x){for(var T=p(x),w=m.f,N=h(T),M={},D=0,W,V;N.length>D;)V=w(T,W=N[D++]),V!==void 0&&y(M,W,V);return M}})},function(i,u,o){var l=o(16),c=o(182),h=o(118),p=!h(function(m){Array.from(m)});l({target:"Array",stat:!0,forced:p},{from:c})},,function(i,u,o){var l=o(7),c=o(84),h=o(34),p=o(85),m=o(109),y=o(128),S=c("wks"),x=l.Symbol,T=x&&x.for,w=y?x:x&&x.withoutSetter||p;i.exports=function(N){if(!h(S,N)||!(m||typeof S[N]=="string")){var M="Symbol."+N;m&&h(x,N)?S[N]=x[N]:y&&T?S[N]=T(M):S[N]=w(M)}return S[N]}},function(i,u){i.exports=function(o){return typeof o=="function"}},function(i,u,o){var l=o(16),c=o(7),h=o(18),p=o(99),m=o(33),y=o(38),S=o(43),x=o(61),T=o(119),w=o(76),N=o(27),M=o(66),D=N("isConcatSpreadable"),W=9007199254740991,V="Maximum allowed index exceeded",Ee=c.TypeError,ge=M>=51||!h(function(){var j=[];return j[D]=!1,j.concat()[0]!==j}),ye=w("concat"),ce=function(j){if(!m(j))return!1;var Q=j[D];return Q!==void 0?!!Q:p(j)},xe=!ge||!ye;l({target:"Array",proto:!0,forced:xe},{concat:function(Q){var U=y(this),I=T(U,0),k=0,te,$,Z,le,Ae;for(te=-1,Z=arguments.length;te<Z;te++)if(Ae=te===-1?U:arguments[te],ce(Ae)){if(le=S(Ae),k+le>W)throw Ee(V);for($=0;$<le;$++,k++)$ in Ae&&x(I,k,Ae[$])}else{if(k>=W)throw Ee(V);x(I,k++,Ae)}return I.length=k,I}})},function(i,u,o){var l=o(16),c=o(198);l({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(i,u,o){var l=o(105),c=typeof self=="object"&&self&&self.Object===Object&&self,h=l.a||c||Function("return this")();u.a=h},function(i,u,o){var l=o(7),c=o(33),h=l.String,p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not an object")}},function(i,u,o){var l=o(28);i.exports=function(c){return typeof c=="object"?c!==null:l(c)}},function(i,u,o){var l=o(15),c=o(38),h=l({}.hasOwnProperty);i.exports=Object.hasOwn||function(m,y){return h(c(m),y)}},function(i,u){var o=Function.prototype.call;i.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(i,u,o){var l=o(7),c=o(36),h=o(129),p=o(32),m=o(87),y=l.TypeError,S=Object.defineProperty;u.f=c?S:function(T,w,N){if(p(T),w=m(w),p(N),h)try{return S(T,w,N)}catch{}if("get"in N||"set"in N)throw y("Accessors not supported");return"value"in N&&(T[w]=N.value),T}},function(i,u,o){var l=o(7),c=o(45),h=l.Object;i.exports=function(p){return h(c(p))}},function(i,u,o){var l=o(81),c=o(45);i.exports=function(h){return l(c(h))}},function(i,u,o){var l=o(7),c=o(98),h=l.String;i.exports=function(p){if(c(p)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return h(p)}},function(i,u,o){var l=o(16),c=o(75).map,h=o(76),p=h("map");l({target:"Array",proto:!0,forced:!p},{map:function(y){return c(this,y,arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){(function(l){o.d(u,"d",function(){return p}),o.d(u,"c",function(){return m}),o.d(u,"b",function(){return y}),o.d(u,"a",function(){return x});var c=o(10),h=function(T,w){var N=typeof Symbol=="function"&&T[Symbol.iterator];if(!N)return T;var M=N.call(T),D,W=[],V;try{for(;(w===void 0||w-- >0)&&!(D=M.next()).done;)W.push(D.value)}catch(Ee){V={error:Ee}}finally{try{D&&!D.done&&(N=M.return)&&N.call(M)}finally{if(V)throw V.error}}return W};function p(){var T=h(Object(c.j)(0),2),w=T[1],N=Object(c.h)(function(){w(function(M){return M+1})},[]);return N}function m(T){if(!T||typeof T!="object")return!1;var w=Object.getPrototypeOf(T);return!w||w===Object.prototype}function y(T){return typeof Symbol=="function"?Symbol.for(T):"__$mobx-react "+T+"__"}var S={};function x(){return typeof window<"u"?window:typeof l<"u"?l:typeof self<"u"?self:S}}).call(this,o(82))},function(i,u,o){var l=o(90);i.exports=function(c){return l(c.length)}},function(i,u,o){var l=o(7),c=o(28),h=o(34),p=o(57),m=o(108),y=o(92),S=o(56),x=o(94).CONFIGURABLE,T=S.get,w=S.enforce,N=String(String).split("String");(i.exports=function(M,D,W,V){var Ee=V?!!V.unsafe:!1,ge=V?!!V.enumerable:!1,ye=V?!!V.noTargetGet:!1,ce=V&&V.name!==void 0?V.name:D,xe;if(c(W)&&(String(ce).slice(0,7)==="Symbol("&&(ce="["+String(ce).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!h(W,"name")||x&&W.name!==ce)&&p(W,"name",ce),xe=w(W),xe.source||(xe.source=N.join(typeof ce=="string"?ce:""))),M===l){ge?M[D]=W:m(D,W);return}else Ee?!ye&&M[D]&&(ge=!0):delete M[D];ge?M[D]=W:p(M,D,W)})(Function.prototype,"toString",function(){return c(this)&&T(this).source||y(this)})},function(i,u,o){var l=o(7),c=l.TypeError;i.exports=function(h){if(h==null)throw c("Can't call method on "+h);return h}},function(i,u,o){var l=o(7),c=o(28),h=function(p){return c(p)?p:void 0};i.exports=function(p,m){return arguments.length<2?h(l[p]):l[p]&&l[p][m]}},function(i,u,o){var l=o(16),c=o(35),h=o(33),p=o(32),m=o(200),y=o(51),S=o(96);function x(T,w){var N=arguments.length<3?T:arguments[2],M,D;if(p(T)===N)return T[w];if(M=y.f(T,w),M)return m(M)?M.value:M.get===void 0?void 0:c(M.get,N);if(h(D=S(T)))return x(D,w,N)}l({target:"Reflect",stat:!0},{get:x})},function(i,u,o){(function(l){var c=o(31),h=o(165),p=a&&!a.nodeType&&a,m=p&&typeof l=="object"&&l&&!l.nodeType&&l,y=m&&m.exports===p,S=y?c.a.Buffer:void 0,x=S?S.isBuffer:void 0,T=x||h.a;u.a=T}).call(this,o(121)(i))},function(i,u,o){(function(l){var c=o(105),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,m=p&&p.exports===h,y=m&&c.a.process,S=function(){try{var x=p&&p.require&&p.require("util").types;return x||y&&y.binding&&y.binding("util")}catch{}}();u.a=S}).call(this,o(121)(i))},function(i,u,o){var l=o(15),c=l({}.toString),h=l("".slice);i.exports=function(p){return h(c(p),8,-1)}},function(i,u,o){var l=o(36),c=o(35),h=o(93),p=o(72),m=o(39),y=o(87),S=o(34),x=o(129),T=Object.getOwnPropertyDescriptor;u.f=l?T:function(N,M){if(N=m(N),M=y(M),x)try{return T(N,M)}catch{}if(S(N,M))return p(!c(h.f,N,M),N[M])}},function(i,u,o){var l=o(16),c=o(213).entries;l({target:"Object",stat:!0},{entries:function(p){return c(p)}})},function(i,u,o){var l=o(46);i.exports=l("navigator","userAgent")||""},function(i,u,o){var l=o(32),c=o(168),h=o(110),p=o(70),m=o(133),y=o(86),S=o(91),x=">",T="<",w="prototype",N="script",M=S("IE_PROTO"),D=function(){},W=function(ce){return T+N+x+ce+T+"/"+N+x},V=function(ce){ce.write(W("")),ce.close();var xe=ce.parentWindow.Object;return ce=null,xe},Ee=function(){var ce=y("iframe"),xe="java"+N+":",j;return ce.style.display="none",m.appendChild(ce),ce.src=String(xe),j=ce.contentWindow.document,j.open(),j.write(W("document.F=Object")),j.close(),j.F},ge,ye=function(){try{ge=new ActiveXObject("htmlfile")}catch{}ye=typeof document<"u"?document.domain&&ge?V(ge):Ee():V(ge);for(var ce=h.length;ce--;)delete ye[w][h[ce]];return ye()};p[M]=!0,i.exports=Object.create||function(xe,j){var Q;return xe!==null?(D[w]=l(xe),Q=new D,D[w]=null,Q[M]=xe):Q=ye(),j===void 0?Q:c(Q,j)}},function(i,u,o){var l=o(7),c=o(28),h=o(89),p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not a function")}},function(i,u,o){var l=o(170),c=o(7),h=o(15),p=o(33),m=o(57),y=o(34),S=o(107),x=o(91),T=o(70),w="Object already initialized",N=c.TypeError,M=c.WeakMap,D,W,V,Ee=function(U){return V(U)?W(U):D(U,{})},ge=function(U){return function(I){var k;if(!p(I)||(k=W(I)).type!==U)throw N("Incompatible receiver, "+U+" required");return k}};if(l||S.state){var ye=S.state||(S.state=new M),ce=h(ye.get),xe=h(ye.has),j=h(ye.set);D=function(U,I){if(xe(ye,U))throw new N(w);return I.facade=U,j(ye,U,I),I},W=function(U){return ce(ye,U)||{}},V=function(U){return xe(ye,U)}}else{var Q=x("state");T[Q]=!0,D=function(U,I){if(y(U,Q))throw new N(w);return I.facade=U,m(U,Q,I),I},W=function(U){return y(U,Q)?U[Q]:{}},V=function(U){return y(U,Q)}}i.exports={set:D,get:W,has:V,enforce:Ee,getterFor:ge}},function(i,u,o){var l=o(36),c=o(37),h=o(72);i.exports=l?function(p,m,y){return c.f(p,m,h(1,y))}:function(p,m,y){return p[m]=y,p}},function(i,u,o){var l=o(15);i.exports=l({}.isPrototypeOf)},function(i,u,o){var l=o(55);i.exports=function(c,h){var p=c[h];return p==null?void 0:l(p)}},function(i,u,o){var l=o(173),c=o(177);l("Map",function(h){return function(){return h(this,arguments.length?arguments[0]:void 0)}},c)},function(i,u,o){var l=o(87),c=o(37),h=o(72);i.exports=function(p,m,y){var S=l(m);S in p?c.f(p,S,h(0,y)):p[S]=y}},function(i,u,o){var l=o(15),c=o(55),h=l(l.bind);i.exports=function(p,m){return c(p),m===void 0?p:h?h(p,m):function(){return p.apply(m,arguments)}}},function(i,u,o){var l=o(16),c=o(15),h=o(81),p=o(39),m=o(120),y=c([].join),S=h!=Object,x=m("join",",");l({target:"Array",proto:!0,forced:S||!x},{join:function(w){return y(p(this),w===void 0?",":w)}})},function(i,u,o){var l=o(16),c=o(214),h=o(83);l({target:"Array",proto:!0},{fill:c}),h("fill")},function(i,u){i.exports=!1},function(i,u,o){var l=o(7),c=o(53),h=l.process,p=l.Deno,m=h&&h.versions||p&&p.version,y=m&&m.v8,S,x;y&&(S=y.split("."),x=S[0]>0&&S[0]<4?1:+(S[0]+S[1])),!x&&c&&(S=c.match(/Edge\/(\d+)/),(!S||S[1]>=74)&&(S=c.match(/Chrome\/(\d+)/),S&&(x=+S[1]))),i.exports=x},function(i,u,o){var l=o(131),c=o(110);i.exports=Object.keys||function(p){return l(p,c)}},function(i,u,o){var l=o(69),c=Math.max,h=Math.min;i.exports=function(p,m){var y=l(p);return y<0?c(y+m,0):h(y,m)}},function(i,u){var o=Math.ceil,l=Math.floor;i.exports=function(c){var h=+c;return h!==h||h===0?0:(h>0?l:o)(h)}},function(i,u){i.exports={}},function(i,u){i.exports={}},function(i,u){i.exports=function(o,l){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:l}}},function(i,u,o){var l=o(131),c=o(110),h=c.concat("length","prototype");u.f=Object.getOwnPropertyNames||function(m){return l(m,h)}},function(i,u,o){var l=o(37).f,c=o(34),h=o(27),p=h("toStringTag");i.exports=function(m,y,S){m&&!c(m=S?m:m.prototype,p)&&l(m,p,{configurable:!0,value:y})}},function(i,u,o){var l=o(62),c=o(15),h=o(81),p=o(38),m=o(43),y=o(119),S=c([].push),x=function(T){var w=T==1,N=T==2,M=T==3,D=T==4,W=T==6,V=T==7,Ee=T==5||W;return function(ge,ye,ce,xe){for(var j=p(ge),Q=h(j),U=l(ye,ce),I=m(Q),k=0,te=xe||y,$=w?te(ge,I):N||V?te(ge,0):void 0,Z,le;I>k;k++)if((Ee||k in Q)&&(Z=Q[k],le=U(Z,k,j),T))if(w)$[k]=le;else if(le)switch(T){case 3:return!0;case 5:return Z;case 6:return k;case 2:S($,Z)}else switch(T){case 4:return!1;case 7:S($,Z)}return W?-1:M||D?D:$}};i.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},function(i,u,o){var l=o(18),c=o(27),h=o(66),p=c("species");i.exports=function(m){return h>=51||!l(function(){var y=[],S=y.constructor={};return S[p]=function(){return{foo:1}},y[m](Boolean).foo!==1})}},function(i,u){var o=Function.prototype,l=o.apply,c=o.bind,h=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(c?h.bind(l):function(){return h.apply(l,arguments)})},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),m=o(154),y=o(32),S=o(45),x=o(156),T=o(123),w=o(90),N=o(40),M=o(59),D=o(113),W=o(124),V=o(102),Ee=o(151),ge=o(18),ye=Ee.UNSUPPORTED_Y,ce=4294967295,xe=Math.min,j=[].push,Q=h(/./.exec),U=h(j),I=h("".slice),k=!ge(function(){var te=/(?:)/,$=te.exec;te.exec=function(){return $.apply(this,arguments)};var Z="ab".split(te);return Z.length!==2||Z[0]!=="a"||Z[1]!=="b"});p("split",function(te,$,Z){var le;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?le=function(Ae,Re){var _e=N(S(this)),Ke=Re===void 0?ce:Re>>>0;if(Ke===0)return[];if(Ae===void 0)return[_e];if(!m(Ae))return c($,_e,Ae,Ke);for(var gt=[],Nt=(Ae.ignoreCase?"i":"")+(Ae.multiline?"m":"")+(Ae.unicode?"u":"")+(Ae.sticky?"y":""),Vt=0,Ct=new RegExp(Ae.source,Nt+"g"),Ge,bt,Ut;(Ge=c(V,Ct,_e))&&(bt=Ct.lastIndex,!(bt>Vt&&(U(gt,I(_e,Vt,Ge.index)),Ge.length>1&&Ge.index<_e.length&&l(j,gt,D(Ge,1)),Ut=Ge[0].length,Vt=bt,gt.length>=Ke)));)Ct.lastIndex===Ge.index&&Ct.lastIndex++;return Vt===_e.length?(Ut||!Q(Ct,""))&&U(gt,""):U(gt,I(_e,Vt)),gt.length>Ke?D(gt,0,Ke):gt}:"0".split(void 0,0).length?le=function(Ae,Re){return Ae===void 0&&Re===0?[]:c($,this,Ae,Re)}:le=$,[function(Re,_e){var Ke=S(this),gt=Re==null?void 0:M(Re,te);return gt?c(gt,Re,Ke,_e):c(le,N(Ke),Re,_e)},function(Ae,Re){var _e=y(this),Ke=N(Ae),gt=Z(le,_e,Ke,Re,le!==$);if(gt.done)return gt.value;var Nt=x(_e,RegExp),Vt=_e.unicode,Ct=(_e.ignoreCase?"i":"")+(_e.multiline?"m":"")+(_e.unicode?"u":"")+(ye?"g":"y"),Ge=new Nt(ye?"^(?:"+_e.source+")":_e,Ct),bt=Re===void 0?ce:Re>>>0;if(bt===0)return[];if(Ke.length===0)return W(Ge,Ke)===null?[Ke]:[];for(var Ut=0,ee=0,se=[];ee<Ke.length;){Ge.lastIndex=ye?0:ee;var me=W(Ge,ye?I(Ke,ee):Ke),Ue;if(me===null||(Ue=xe(w(Ge.lastIndex+(ye?ee:0)),Ke.length))===Ut)ee=T(Ke,ee,Vt);else{if(U(se,I(Ke,Ut,ee)),se.length===bt)return se;for(var tt=1;tt<=me.length-1;tt++)if(U(se,me[tt]),se.length===bt)return se;ee=Ut=Ue}}return U(se,I(Ke,Ut)),se}]},!k,ye)},function(i,u,o){var l=o(36),c=o(7),h=o(15),p=o(95),m=o(44),y=o(34),S=o(143),x=o(58),T=o(88),w=o(130),N=o(18),M=o(73).f,D=o(51).f,W=o(37).f,V=o(196),Ee=o(159).trim,ge="Number",ye=c[ge],ce=ye.prototype,xe=c.TypeError,j=h("".slice),Q=h("".charCodeAt),U=function(le){var Ae=w(le,"number");return typeof Ae=="bigint"?Ae:I(Ae)},I=function(le){var Ae=w(le,"number"),Re,_e,Ke,gt,Nt,Vt,Ct,Ge;if(T(Ae))throw xe("Cannot convert a Symbol value to a number");if(typeof Ae=="string"&&Ae.length>2){if(Ae=Ee(Ae),Re=Q(Ae,0),Re===43||Re===45){if(_e=Q(Ae,2),_e===88||_e===120)return NaN}else if(Re===48){switch(Q(Ae,1)){case 66:case 98:Ke=2,gt=49;break;case 79:case 111:Ke=8,gt=55;break;default:return+Ae}for(Nt=j(Ae,2),Vt=Nt.length,Ct=0;Ct<Vt;Ct++)if(Ge=Q(Nt,Ct),Ge<48||Ge>gt)return NaN;return parseInt(Nt,Ke)}}return+Ae};if(p(ge,!ye(" 0o1")||!ye("0b1")||ye("+0x1"))){for(var k=function(Ae){var Re=arguments.length<1?0:ye(U(Ae)),_e=this;return x(ce,_e)&&N(function(){V(_e)})?S(Object(Re),_e,k):Re},te=l?M(ye):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),$=0,Z;te.length>$;$++)y(ye,Z=te[$])&&!y(k,Z)&&W(k,Z,D(ye,Z));k.prototype=ce,ce.constructor=k,m(c,ge,k)}},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(i,u,o){var l=o(7),c=o(15),h=o(18),p=o(50),m=l.Object,y=c("".split);i.exports=h(function(){return!m("z").propertyIsEnumerable(0)})?function(S){return p(S)=="String"?y(S,""):m(S)}:m},function(i,u){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},function(i,u,o){var l=o(27),c=o(54),h=o(37),p=l("unscopables"),m=Array.prototype;m[p]==null&&h.f(m,p,{configurable:!0,value:c(null)}),i.exports=function(y){m[p][y]=!0}},function(i,u,o){var l=o(65),c=o(107);(i.exports=function(h,p){return c[h]||(c[h]=p!==void 0?p:{})})("versions",[]).push({version:"3.19.3",mode:l?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(i,u,o){var l=o(15),c=0,h=Math.random(),p=l(1 .toString);i.exports=function(m){return"Symbol("+(m===void 0?"":m)+")_"+p(++c+h,36)}},function(i,u,o){var l=o(7),c=o(33),h=l.document,p=c(h)&&c(h.createElement);i.exports=function(m){return p?h.createElement(m):{}}},function(i,u,o){var l=o(130),c=o(88);i.exports=function(h){var p=l(h,"string");return c(p)?p:p+""}},function(i,u,o){var l=o(7),c=o(46),h=o(28),p=o(58),m=o(128),y=l.Object;i.exports=m?function(S){return typeof S=="symbol"}:function(S){var x=c("Symbol");return h(x)&&p(x.prototype,y(S))}},function(i,u,o){var l=o(7),c=l.String;i.exports=function(h){try{return c(h)}catch{return"Object"}}},function(i,u,o){var l=o(69),c=Math.min;i.exports=function(h){return h>0?c(l(h),9007199254740991):0}},function(i,u,o){var l=o(84),c=o(85),h=l("keys");i.exports=function(p){return h[p]||(h[p]=c(p))}},function(i,u,o){var l=o(15),c=o(28),h=o(107),p=l(Function.toString);c(h.inspectSource)||(h.inspectSource=function(m){return p(m)}),i.exports=h.inspectSource},function(i,u,o){var l={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,h=c&&!l.call({1:2},1);u.f=h?function(m){var y=c(this,m);return!!y&&y.enumerable}:l},function(i,u,o){var l=o(36),c=o(34),h=Function.prototype,p=l&&Object.getOwnPropertyDescriptor,m=c(h,"name"),y=m&&function(){}.name==="something",S=m&&(!l||l&&p(h,"name").configurable);i.exports={EXISTS:m,PROPER:y,CONFIGURABLE:S}},function(i,u,o){var l=o(18),c=o(28),h=/#|\.prototype\./,p=function(T,w){var N=y[m(T)];return N==x?!0:N==S?!1:c(w)?l(w):!!w},m=p.normalize=function(T){return String(T).replace(h,".").toLowerCase()},y=p.data={},S=p.NATIVE="N",x=p.POLYFILL="P";i.exports=p},function(i,u,o){var l=o(7),c=o(34),h=o(28),p=o(38),m=o(91),y=o(137),S=m("IE_PROTO"),x=l.Object,T=x.prototype;i.exports=y?x.getPrototypeOf:function(w){var N=p(w);if(c(N,S))return N[S];var M=N.constructor;return h(M)&&N instanceof M?M.prototype:N instanceof x?T:null}},function(i,u,o){var l=o(15),c=o(32),h=o(172);i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var p=!1,m={},y;try{y=l(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),y(m,[]),p=m instanceof Array}catch{}return function(x,T){return c(x),h(T),p?y(x,T):x.__proto__=T,x}}():void 0)},function(i,u,o){var l=o(7),c=o(116),h=o(28),p=o(50),m=o(27),y=m("toStringTag"),S=l.Object,x=p(function(){return arguments}())=="Arguments",T=function(w,N){try{return w[N]}catch{}};i.exports=c?p:function(w){var N,M,D;return w===void 0?"Undefined":w===null?"Null":typeof(M=T(N=S(w),y))=="string"?M:x?p(N):(D=p(N))=="Object"&&h(N.callee)?"Arguments":D}},function(i,u,o){var l=o(50);i.exports=Array.isArray||function(h){return l(h)=="Array"}},function(i,u,o){var l=o(15),c=o(18),h=o(28),p=o(98),m=o(46),y=o(92),S=function(){},x=[],T=m("Reflect","construct"),w=/^\s*(?:class|function)\b/,N=l(w.exec),M=!w.exec(S),D=function(V){if(!h(V))return!1;try{return T(S,x,V),!0}catch{return!1}},W=function(V){if(!h(V))return!1;switch(p(V)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return M||!!N(w,y(V))};i.exports=!T||c(function(){var V;return D(D.call)||!D(Object)||!D(function(){V=!0})||V})?W:D},function(i,u,o){var l=o(15);i.exports=l([].slice)},function(i,u,o){var l=o(35),c=o(15),h=o(40),p=o(184),m=o(151),y=o(84),S=o(54),x=o(56).get,T=o(185),w=o(186),N=y("native-string-replace",String.prototype.replace),M=RegExp.prototype.exec,D=M,W=c("".charAt),V=c("".indexOf),Ee=c("".replace),ge=c("".slice),ye=function(){var Q=/a/,U=/b*/g;return l(M,Q,"a"),l(M,U,"a"),Q.lastIndex!==0||U.lastIndex!==0}(),ce=m.BROKEN_CARET,xe=/()??/.exec("")[1]!==void 0,j=ye||xe||ce||T||w;j&&(D=function(U){var I=this,k=x(I),te=h(U),$=k.raw,Z,le,Ae,Re,_e,Ke,gt;if($)return $.lastIndex=I.lastIndex,Z=l(D,$,te),I.lastIndex=$.lastIndex,Z;var Nt=k.groups,Vt=ce&&I.sticky,Ct=l(p,I),Ge=I.source,bt=0,Ut=te;if(Vt&&(Ct=Ee(Ct,"y",""),V(Ct,"g")===-1&&(Ct+="g"),Ut=ge(te,I.lastIndex),I.lastIndex>0&&(!I.multiline||I.multiline&&W(te,I.lastIndex-1)!==`
`)&&(Ge="(?: "+Ge+")",Ut=" "+Ut,bt++),le=new RegExp("^(?:"+Ge+")",Ct)),xe&&(le=new RegExp("^"+Ge+"$(?!\\s)",Ct)),ye&&(Ae=I.lastIndex),Re=l(M,Vt?le:I,Ut),Vt?Re?(Re.input=ge(Re.input,bt),Re[0]=ge(Re[0],bt),Re.index=I.lastIndex,I.lastIndex+=Re[0].length):I.lastIndex=0:ye&&Re&&(I.lastIndex=I.global?Re.index+Re[0].length:Ae),xe&&Re&&Re.length>1&&l(N,Re[0],le,function(){for(_e=1;_e<arguments.length-2;_e++)arguments[_e]===void 0&&(Re[_e]=void 0)}),Re&&Nt)for(Re.groups=Ke=S(null),_e=0;_e<Nt.length;_e++)gt=Nt[_e],Ke[gt[0]]=Re[gt[1]];return Re}),i.exports=D},function(i,u,o){var l=o(16),c=o(7),h=o(68),p=o(69),m=o(43),y=o(38),S=o(119),x=o(61),T=o(76),w=T("splice"),N=c.TypeError,M=Math.max,D=Math.min,W=9007199254740991,V="Maximum allowed length exceeded";l({target:"Array",proto:!0,forced:!w},{splice:function(ge,ye){var ce=y(this),xe=m(ce),j=h(ge,xe),Q=arguments.length,U,I,k,te,$,Z;if(Q===0?U=I=0:Q===1?(U=0,I=xe-j):(U=Q-2,I=D(M(p(ye),0),xe-j)),xe+U-I>W)throw N(V);for(k=S(ce,I),te=0;te<I;te++)$=j+te,$ in ce&&x(k,te,ce[$]);if(k.length=I,U<I){for(te=j;te<xe-I;te++)$=te+I,Z=te+U,$ in ce?ce[Z]=ce[$]:delete ce[Z];for(te=xe;te>xe-I+U;te--)delete ce[te-1]}else if(U>I)for(te=xe-I;te>j;te--)$=te+I-1,Z=te+U-1,$ in ce?ce[Z]=ce[$]:delete ce[Z];for(te=0;te<U;te++)ce[te+j]=arguments[te+2];return ce.length=xe-I+U,k}})},function(i,u,o){var l=o(16),c=o(201),h=o(202);l({target:"String",proto:!0,forced:h("anchor")},{anchor:function(m){return c(this,"a","name",m)}})},function(i,u,o){(function(l){var c=typeof l=="object"&&l&&l.Object===Object&&l;u.a=c}).call(this,o(82))},function(i,u,o){(function(l){var c=o(31),h=a&&!a.nodeType&&a,p=h&&typeof l=="object"&&l&&!l.nodeType&&l,m=p&&p.exports===h,y=m?c.a.Buffer:void 0,S=y?y.allocUnsafe:void 0;function x(T,w){if(w)return T.slice();var N=T.length,M=S?S(N):new T.constructor(N);return T.copy(M),M}u.a=x}).call(this,o(121)(i))},function(i,u,o){var l=o(7),c=o(108),h="__core-js_shared__",p=l[h]||c(h,{});i.exports=p},function(i,u,o){var l=o(7),c=Object.defineProperty;i.exports=function(h,p){try{c(l,h,{value:p,configurable:!0,writable:!0})}catch{l[h]=p}return p}},function(i,u,o){var l=o(66),c=o(18);i.exports=!!Object.getOwnPropertySymbols&&!c(function(){var h=Symbol();return!String(h)||!(Object(h)instanceof Symbol)||!Symbol.sham&&l&&l<41})},function(i,u){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(i,u,o){var l=o(16),c=o(35),h=o(65),p=o(94),m=o(28),y=o(171),S=o(96),x=o(97),T=o(74),w=o(57),N=o(44),M=o(27),D=o(71),W=o(136),V=p.PROPER,Ee=p.CONFIGURABLE,ge=W.IteratorPrototype,ye=W.BUGGY_SAFARI_ITERATORS,ce=M("iterator"),xe="keys",j="values",Q="entries",U=function(){return this};i.exports=function(I,k,te,$,Z,le,Ae){y(te,k,$);var Re=function(ee){if(ee===Z&&Vt)return Vt;if(!ye&&ee in gt)return gt[ee];switch(ee){case xe:return function(){return new te(this,ee)};case j:return function(){return new te(this,ee)};case Q:return function(){return new te(this,ee)}}return function(){return new te(this)}},_e=k+" Iterator",Ke=!1,gt=I.prototype,Nt=gt[ce]||gt["@@iterator"]||Z&&gt[Z],Vt=!ye&&Nt||Re(Z),Ct=k=="Array"&&gt.entries||Nt,Ge,bt,Ut;if(Ct&&(Ge=S(Ct.call(new I)),Ge!==Object.prototype&&Ge.next&&(!h&&S(Ge)!==ge&&(x?x(Ge,ge):m(Ge[ce])||N(Ge,ce,U)),T(Ge,_e,!0,!0),h&&(D[_e]=U))),V&&Z==j&&Nt&&Nt.name!==j&&(!h&&Ee?w(gt,"name",j):(Ke=!0,Vt=function(){return c(Nt,this)})),Z)if(bt={values:Re(j),keys:le?Vt:Re(xe),entries:Re(Q)},Ae)for(Ut in bt)(ye||Ke||!(Ut in gt))&&N(gt,Ut,bt[Ut]);else l({target:k,proto:!0,forced:ye||Ke},bt);return(!h||Ae)&&gt[ce]!==Vt&&N(gt,ce,Vt,{name:Z}),D[k]=Vt,bt}},function(i,u){u.f=Object.getOwnPropertySymbols},function(i,u,o){var l=o(7),c=o(68),h=o(43),p=o(61),m=l.Array,y=Math.max;i.exports=function(S,x,T){for(var w=h(S),N=c(x,w),M=c(T===void 0?w:T,w),D=m(y(M-N,0)),W=0;N<M;N++,W++)p(D,W,S[N]);return D.length=W,D}},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(32),m=o(89),y=o(140),S=o(43),x=o(58),T=o(141),w=o(115),N=o(142),M=l.TypeError,D=function(V,Ee){this.stopped=V,this.result=Ee},W=D.prototype;i.exports=function(V,Ee,ge){var ye=ge&&ge.that,ce=!!(ge&&ge.AS_ENTRIES),xe=!!(ge&&ge.IS_ITERATOR),j=!!(ge&&ge.INTERRUPTED),Q=c(Ee,ye),U,I,k,te,$,Z,le,Ae=function(_e){return U&&N(U,"normal",_e),new D(!0,_e)},Re=function(_e){return ce?(p(_e),j?Q(_e[0],_e[1],Ae):Q(_e[0],_e[1])):j?Q(_e,Ae):Q(_e)};if(xe)U=V;else{if(I=w(V),!I)throw M(m(V)+" is not iterable");if(y(I)){for(k=0,te=S(V);te>k;k++)if($=Re(V[k]),$&&x(W,$))return $;return new D(!1)}U=T(V,I)}for(Z=U.next;!(le=h(Z,U)).done;){try{$=Re(le.value)}catch(_e){N(U,"throw",_e)}if(typeof $=="object"&&$&&x(W,$))return $}return new D(!1)}},function(i,u,o){var l=o(98),c=o(59),h=o(71),p=o(27),m=p("iterator");i.exports=function(y){if(y!=null)return c(y,m)||c(y,"@@iterator")||h[l(y)]}},function(i,u,o){var l=o(27),c=l("toStringTag"),h={};h[c]="z",i.exports=String(h)==="[object z]"},function(i,u,o){var l=o(7),c=o(58),h=l.TypeError;i.exports=function(p,m){if(c(m,p))return p;throw h("Incorrect invocation")}},function(i,u,o){var l=o(27),c=l("iterator"),h=!1;try{var p=0,m={next:function(){return{done:!!p++}},return:function(){h=!0}};m[c]=function(){return this},Array.from(m,function(){throw 2})}catch{}i.exports=function(y,S){if(!S&&!h)return!1;var x=!1;try{var T={};T[c]=function(){return{next:function(){return{done:x=!0}}}},y(T)}catch{}return x}},function(i,u,o){var l=o(180);i.exports=function(c,h){return new(l(c))(h===0?0:h)}},function(i,u,o){var l=o(18);i.exports=function(c,h){var p=[][c];return!!p&&l(function(){p.call(null,h||function(){throw 1},1)})}},function(i,u){i.exports=function(o){if(!o.webpackPolyfill){var l=Object.create(o);l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),Object.defineProperty(l,"exports",{enumerable:!0}),l.webpackPolyfill=1}return l}},function(i,u,o){o(19);var l=o(15),c=o(44),h=o(102),p=o(18),m=o(27),y=o(57),S=m("species"),x=RegExp.prototype;i.exports=function(T,w,N,M){var D=m(T),W=!p(function(){var ye={};return ye[D]=function(){return 7},""[T](ye)!=7}),V=W&&!p(function(){var ye=!1,ce=/a/;return T==="split"&&(ce={},ce.constructor={},ce.constructor[S]=function(){return ce},ce.flags="",ce[D]=/./[D]),ce.exec=function(){return ye=!0,null},ce[D](""),!ye});if(!W||!V||N){var Ee=l(/./[D]),ge=w(D,""[T],function(ye,ce,xe,j,Q){var U=l(ye),I=ce.exec;return I===h||I===x.exec?W&&!Q?{done:!0,value:Ee(ce,xe,j)}:{done:!0,value:U(xe,ce,j)}:{done:!1}});c(String.prototype,T,ge[0]),c(x,D,ge[1])}M&&y(x[D],"sham",!0)}},function(i,u,o){var l=o(146).charAt;i.exports=function(c,h,p){return h+(p?l(c,h).length:1)}},function(i,u,o){var l=o(7),c=o(35),h=o(32),p=o(28),m=o(50),y=o(102),S=l.TypeError;i.exports=function(x,T){var w=x.exec;if(p(w)){var N=c(w,x,T);return N!==null&&h(N),N}if(m(x)==="RegExp")return c(y,x,T);throw S("RegExp#exec called on incompatible receiver")}},function(i,u,o){var l=o(77),c=o(35),h=o(15),p=o(122),m=o(18),y=o(32),S=o(28),x=o(69),T=o(90),w=o(40),N=o(45),M=o(123),D=o(59),W=o(197),V=o(124),Ee=o(27),ge=Ee("replace"),ye=Math.max,ce=Math.min,xe=h([].concat),j=h([].push),Q=h("".indexOf),U=h("".slice),I=function(Z){return Z===void 0?Z:String(Z)},k=function(){return"a".replace(/./,"$0")==="$0"}(),te=function(){return/./[ge]?/./[ge]("a","$0")==="":!1}(),$=!m(function(){var Z=/./;return Z.exec=function(){var le=[];return le.groups={a:"7"},le},"".replace(Z,"$<a>")!=="7"});p("replace",function(Z,le,Ae){var Re=te?"$":"$0";return[function(Ke,gt){var Nt=N(this),Vt=Ke==null?void 0:D(Ke,ge);return Vt?c(Vt,Ke,Nt,gt):c(le,w(Nt),Ke,gt)},function(_e,Ke){var gt=y(this),Nt=w(_e);if(typeof Ke=="string"&&Q(Ke,Re)===-1&&Q(Ke,"$<")===-1){var Vt=Ae(le,gt,Nt,Ke);if(Vt.done)return Vt.value}var Ct=S(Ke);Ct||(Ke=w(Ke));var Ge=gt.global;if(Ge){var bt=gt.unicode;gt.lastIndex=0}for(var Ut=[];;){var ee=V(gt,Nt);if(ee===null||(j(Ut,ee),!Ge))break;var se=w(ee[0]);se===""&&(gt.lastIndex=M(Nt,T(gt.lastIndex),bt))}for(var me="",Ue=0,tt=0;tt<Ut.length;tt++){ee=Ut[tt];for(var He=w(ee[0]),Lt=ye(ce(x(ee.index),Nt.length),0),nr=[],tr=1;tr<ee.length;tr++)j(nr,I(ee[tr]));var Jt=ee.groups;if(Ct){var rt=xe([He],nr,Lt,Nt);Jt!==void 0&&j(rt,Jt);var Er=w(l(Ke,void 0,rt))}else Er=W(He,Nt,Lt,nr,Jt,Ke);Lt>=Ue&&(me+=U(Nt,Ue,Lt)+Er,Ue=Lt+He.length)}return me+U(Nt,Ue)}]},!$||!k||te)},function(i,u,o){var l=o(50),c=o(7);i.exports=l(c.process)=="process"},function(i,u,o){var l=o(16);l({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(i,u,o){var l=o(109);i.exports=l&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(i,u,o){var l=o(36),c=o(18),h=o(86);i.exports=!l&&!c(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7})},function(i,u,o){var l=o(7),c=o(35),h=o(33),p=o(88),m=o(59),y=o(169),S=o(27),x=l.TypeError,T=S("toPrimitive");i.exports=function(w,N){if(!h(w)||p(w))return w;var M=m(w,T),D;if(M){if(N===void 0&&(N="default"),D=c(M,w,N),!h(D)||p(D))return D;throw x("Can't convert object to primitive value")}return N===void 0&&(N="number"),y(w,N)}},function(i,u,o){var l=o(15),c=o(34),h=o(39),p=o(132).indexOf,m=o(70),y=l([].push);i.exports=function(S,x){var T=h(S),w=0,N=[],M;for(M in T)!c(m,M)&&c(T,M)&&y(N,M);for(;x.length>w;)c(T,M=x[w++])&&(~p(N,M)||y(N,M));return N}},function(i,u,o){var l=o(39),c=o(68),h=o(43),p=function(m){return function(y,S,x){var T=l(y),w=h(T),N=c(x,w),M;if(m&&S!=S){for(;w>N;)if(M=T[N++],M!=M)return!0}else for(;w>N;N++)if((m||N in T)&&T[N]===S)return m||N||0;return!m&&-1}};i.exports={includes:p(!0),indexOf:p(!1)}},function(i,u,o){var l=o(46);i.exports=l("document","documentElement")},function(i,u,o){var l=o(34),c=o(135),h=o(51),p=o(37);i.exports=function(m,y){for(var S=c(y),x=p.f,T=h.f,w=0;w<S.length;w++){var N=S[w];l(m,N)||x(m,N,T(y,N))}}},function(i,u,o){var l=o(46),c=o(15),h=o(73),p=o(112),m=o(32),y=c([].concat);i.exports=l("Reflect","ownKeys")||function(x){var T=h.f(m(x)),w=p.f;return w?y(T,w(x)):T}},function(i,u,o){var l=o(18),c=o(28),h=o(54),p=o(96),m=o(44),y=o(27),S=o(65),x=y("iterator"),T=!1,w,N,M;[].keys&&(M=[].keys(),"next"in M?(N=p(p(M)),N!==Object.prototype&&(w=N)):T=!0);var D=w==null||l(function(){var W={};return w[x].call(W)!==W});D?w={}:S&&(w=h(w)),c(w[x])||m(w,x,function(){return this}),i.exports={IteratorPrototype:w,BUGGY_SAFARI_ITERATORS:T}},function(i,u,o){var l=o(18);i.exports=!l(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(i,u,o){var l=o(16),c=o(15),h=o(70),p=o(33),m=o(34),y=o(37).f,S=o(73),x=o(139),T=o(174),w=o(85),N=o(176),M=!1,D=w("meta"),W=0,V=function(j){y(j,D,{value:{objectID:"O"+W++,weakData:{}}})},Ee=function(j,Q){if(!p(j))return typeof j=="symbol"?j:(typeof j=="string"?"S":"P")+j;if(!m(j,D)){if(!T(j))return"F";if(!Q)return"E";V(j)}return j[D].objectID},ge=function(j,Q){if(!m(j,D)){if(!T(j))return!0;if(!Q)return!1;V(j)}return j[D].weakData},ye=function(j){return N&&M&&T(j)&&!m(j,D)&&V(j),j},ce=function(){xe.enable=function(){},M=!0;var j=S.f,Q=c([].splice),U={};U[D]=1,j(U).length&&(S.f=function(I){for(var k=j(I),te=0,$=k.length;te<$;te++)if(k[te]===D){Q(k,te,1);break}return k},l({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:x.f}))},xe=i.exports={enable:ce,fastKey:Ee,getWeakData:ge,onFreeze:ye};h[D]=!0},function(i,u,o){var l=o(50),c=o(39),h=o(73).f,p=o(113),m=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],y=function(S){try{return h(S)}catch{return p(m)}};i.exports.f=function(x){return m&&l(x)=="Window"?y(x):h(c(x))}},function(i,u,o){var l=o(27),c=o(71),h=l("iterator"),p=Array.prototype;i.exports=function(m){return m!==void 0&&(c.Array===m||p[h]===m)}},function(i,u,o){var l=o(7),c=o(35),h=o(55),p=o(32),m=o(89),y=o(115),S=l.TypeError;i.exports=function(x,T){var w=arguments.length<2?y(x):T;if(h(w))return p(c(w,x));throw S(m(x)+" is not iterable")}},function(i,u,o){var l=o(35),c=o(32),h=o(59);i.exports=function(p,m,y){var S,x;c(p);try{if(S=h(p,"return"),!S){if(m==="throw")throw y;return y}S=l(S,p)}catch(T){x=!0,S=T}if(m==="throw")throw y;if(x)throw S;return c(S),y}},function(i,u,o){var l=o(28),c=o(33),h=o(97);i.exports=function(p,m,y){var S,x;return h&&l(S=m.constructor)&&S!==y&&c(x=S.prototype)&&x!==y.prototype&&h(p,x),p}},function(i,u,o){var l=o(44);i.exports=function(c,h,p){for(var m in h)l(c,m,h[m],p);return c}},function(i,u,o){var l=o(46),c=o(37),h=o(27),p=o(36),m=h("species");i.exports=function(y){var S=l(y),x=c.f;p&&S&&!S[m]&&x(S,m,{configurable:!0,get:function(){return this}})}},function(i,u,o){var l=o(15),c=o(69),h=o(40),p=o(45),m=l("".charAt),y=l("".charCodeAt),S=l("".slice),x=function(T){return function(w,N){var M=h(p(w)),D=c(N),W=M.length,V,Ee;return D<0||D>=W?T?"":void 0:(V=y(M,D),V<55296||V>56319||D+1===W||(Ee=y(M,D+1))<56320||Ee>57343?T?m(M,D):V:T?S(M,D,D+2):(V-55296<<10)+(Ee-56320)+65536)}};i.exports={codeAt:x(!1),charAt:x(!0)}},function(i,u){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(i,u,o){var l=o(86),c=l("span").classList,h=c&&c.constructor&&c.constructor.prototype;i.exports=h===Object.prototype?void 0:h},function(i,u,o){var l=o(27);u.f=l},function(i,u,o){var l=o(181),c=o(34),h=o(149),p=o(37).f;i.exports=function(m){var y=l.Symbol||(l.Symbol={});c(y,m)||p(y,m,{value:h.f(m)})}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp,p=l(function(){var S=h("a","y");return S.lastIndex=2,S.exec("abcd")!=null}),m=p||l(function(){return!h("a","y").sticky}),y=p||l(function(){var S=h("^r","gy");return S.lastIndex=2,S.exec("str")!=null});i.exports={BROKEN_CARET:y,MISSED_STICKY:m,UNSUPPORTED_Y:p}},function(i,u,o){var l=o(16),c=o(132).includes,h=o(83);l({target:"Array",proto:!0},{includes:function(m){return c(this,m,arguments.length>1?arguments[1]:void 0)}}),h("includes")},function(i,u,o){var l=o(16),c=o(15),h=o(193),p=o(45),m=o(40),y=o(194),S=c("".indexOf);l({target:"String",proto:!0,forced:!y("includes")},{includes:function(T){return!!~S(m(p(this)),m(h(T)),arguments.length>1?arguments[1]:void 0)}})},function(i,u,o){var l=o(33),c=o(50),h=o(27),p=h("match");i.exports=function(m){var y;return l(m)&&((y=m[p])!==void 0?!!y:c(m)=="RegExp")}},function(i,u){var o=i.exports={},l,c;function h(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=h}catch{l=h}try{typeof clearTimeout=="function"?c=clearTimeout:c=p}catch{c=p}})();function m(V){if(l===setTimeout)return setTimeout(V,0);if((l===h||!l)&&setTimeout)return l=setTimeout,setTimeout(V,0);try{return l(V,0)}catch{try{return l.call(null,V,0)}catch{return l.call(this,V,0)}}}function y(V){if(c===clearTimeout)return clearTimeout(V);if((c===p||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(V);try{return c(V)}catch{try{return c.call(null,V)}catch{return c.call(this,V)}}}var S=[],x=!1,T,w=-1;function N(){!x||!T||(x=!1,T.length?S=T.concat(S):w=-1,S.length&&M())}function M(){if(!x){var V=m(N);x=!0;for(var Ee=S.length;Ee;){for(T=S,S=[];++w<Ee;)T&&T[w].run();w=-1,Ee=S.length}T=null,x=!1,y(V)}}o.nextTick=function(V){var Ee=new Array(arguments.length-1);if(arguments.length>1)for(var ge=1;ge<arguments.length;ge++)Ee[ge-1]=arguments[ge];S.push(new D(V,Ee)),S.length===1&&!x&&m(M)};function D(V,Ee){this.fun=V,this.array=Ee}D.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function W(){}o.on=W,o.addListener=W,o.once=W,o.off=W,o.removeListener=W,o.removeAllListeners=W,o.emit=W,o.prependListener=W,o.prependOnceListener=W,o.listeners=function(V){return[]},o.binding=function(V){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(V){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(i,u,o){var l=o(32),c=o(157),h=o(27),p=h("species");i.exports=function(m,y){var S=l(m).constructor,x;return S===void 0||(x=l(S)[p])==null?y:c(x)}},function(i,u,o){var l=o(7),c=o(100),h=o(89),p=l.TypeError;i.exports=function(m){if(c(m))return m;throw p(h(m)+" is not a constructor")}},function(i,u,o){var l=o(16),c=o(159).trim,h=o(195);l({target:"String",proto:!0,forced:h("trim")},{trim:function(){return c(this)}})},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=o(160),m=l("".replace),y="["+p+"]",S=RegExp("^"+y+y+"*"),x=RegExp(y+y+"*$"),T=function(w){return function(N){var M=h(c(N));return w&1&&(M=m(M,S,"")),w&2&&(M=m(M,x,"")),M}};i.exports={start:T(1),end:T(2),trim:T(3)}},function(i,u){i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(i,u,o){var l=o(35),c=o(122),h=o(32),p=o(90),m=o(40),y=o(45),S=o(59),x=o(123),T=o(124);c("match",function(w,N,M){return[function(W){var V=y(this),Ee=W==null?void 0:S(W,w);return Ee?l(Ee,W,V):new RegExp(W)[w](m(V))},function(D){var W=h(this),V=m(D),Ee=M(N,W,V);if(Ee.done)return Ee.value;if(!W.global)return T(W,V);var ge=W.unicode;W.lastIndex=0;for(var ye=[],ce=0,xe;(xe=T(W,V))!==null;){var j=m(xe[0]);ye[ce]=j,j===""&&(W.lastIndex=x(V,p(W.lastIndex),ge)),ce++}return ce===0?null:ye}]})},function(i,u,o){var l=o(7),c=o(77),h=o(62),p=o(28),m=o(34),y=o(18),S=o(133),x=o(101),T=o(86),w=o(163),N=o(126),M=l.setImmediate,D=l.clearImmediate,W=l.process,V=l.Dispatch,Ee=l.Function,ge=l.MessageChannel,ye=l.String,ce=0,xe={},j="onreadystatechange",Q,U,I,k;try{Q=l.location}catch{}var te=function(Ae){if(m(xe,Ae)){var Re=xe[Ae];delete xe[Ae],Re()}},$=function(Ae){return function(){te(Ae)}},Z=function(Ae){te(Ae.data)},le=function(Ae){l.postMessage(ye(Ae),Q.protocol+"//"+Q.host)};(!M||!D)&&(M=function(Re){var _e=x(arguments,1);return xe[++ce]=function(){c(p(Re)?Re:Ee(Re),void 0,_e)},U(ce),ce},D=function(Re){delete xe[Re]},N?U=function(Ae){W.nextTick($(Ae))}:V&&V.now?U=function(Ae){V.now($(Ae))}:ge&&!w?(I=new ge,k=I.port2,I.port1.onmessage=Z,U=h(k.postMessage,k)):l.addEventListener&&p(l.postMessage)&&!l.importScripts&&Q&&Q.protocol!=="file:"&&!y(le)?(U=le,l.addEventListener("message",Z,!1)):j in T("script")?U=function(Ae){S.appendChild(T("script"))[j]=function(){S.removeChild(this),te(Ae)}}:U=function(Ae){setTimeout($(Ae),0)}),i.exports={set:M,clear:D}},function(i,u,o){var l=o(53);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(l)},function(i,u,o){var l=o(55),c=function(h){var p,m;this.promise=new h(function(y,S){if(p!==void 0||m!==void 0)throw TypeError("Bad Promise constructor");p=y,m=S}),this.resolve=l(p),this.reject=l(m)};i.exports.f=function(h){return new c(h)}},function(i,u,o){function l(){return!1}u.a=l},function(i,u,o){(function(l){o.d(u,"a",function(){return ce});var c=o(0);function h(j){throw new Error("[mobx-utils] "+j)}function p(j,Q){Q===void 0&&(Q="Illegal state"),j||h(Q)}var m=function(j){return j&&j!==Object.prototype&&Object.getOwnPropertyNames(j).concat(m(Object.getPrototypeOf(j))||[])},y=function(j){var Q=m(j),U=Q.filter(function(I,k){return Q.indexOf(I)===k});return U},S=function(j){return y(j).filter(function(Q){return Q!=="constructor"&&!~Q.indexOf("__")})},x="pending",T="fulfilled",w="rejected";function N(j){switch(this.state){case x:return j.pending&&j.pending(this.value);case w:return j.rejected&&j.rejected(this.value);case T:return j.fulfilled?j.fulfilled(this.value):this.value}}function M(j,Q){if(p(arguments.length<=2,"fromPromise expects up to two arguments"),p(typeof j=="function"||typeof j=="object"&&j&&typeof j.then=="function","Please pass a promise or function to fromPromise"),j.isPromiseBasedObservable===!0)return j;typeof j=="function"&&(j=new Promise(j));var U=j;j.then(Object(c.k)("observableFromPromise-resolve",function(k){U.value=k,U.state=T}),Object(c.k)("observableFromPromise-reject",function(k){U.value=k,U.state=w})),U.isPromiseBasedObservable=!0,U.case=N;var I=Q&&Q.state===T?Q.value:void 0;return Object(c.q)(U,{value:I,state:x},{},{deep:!1}),U}(function(j){j.reject=Object(c.k)("fromPromise.reject",function(U){var I=j(Promise.reject(U));return I.state=w,I.value=U,I});function Q(U){U===void 0&&(U=void 0);var I=j(Promise.resolve(U));return I.state=T,I.value=U,I}j.resolve=Object(c.k)("fromPromise.resolve",Q)})(M||(M={}));var D=function(j,Q,U,I){var k=arguments.length,te=k<3?Q:I===null?I=Object.getOwnPropertyDescriptor(Q,U):I,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(j,Q,U,I);else for(var Z=j.length-1;Z>=0;Z--)($=j[Z])&&(te=(k<3?$(te):k>3?$(Q,U,te):$(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te};(function(){function j(Q,U){var I=this;Object(c.G)(function(){I.current=U,I.subscription=Q.subscribe(I)})}return j.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},j.prototype.next=function(Q){this.current=Q},j.prototype.complete=function(){this.dispose()},j.prototype.error=function(Q){this.current=Q,this.dispose()},D([c.C.ref],j.prototype,"current",void 0),D([c.k.bound],j.prototype,"next",null),D([c.k.bound],j.prototype,"complete",null),D([c.k.bound],j.prototype,"error",null),j})();var W=function(){return W=Object.assign||function(j){for(var Q,U=1,I=arguments.length;U<I;U++){Q=arguments[U];for(var k in Q)Object.prototype.hasOwnProperty.call(Q,k)&&(j[k]=Q[k])}return j},W.apply(this,arguments)},V=function(j,Q,U,I){var k=arguments.length,te=k<3?Q:I===null?I=Object.getOwnPropertyDescriptor(Q,U):I,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(j,Q,U,I);else for(var Z=j.length-1;Z>=0;Z--)($=j[Z])&&(te=(k<3?$(te):k>3?$(Q,U,te):$(Q,U))||te);return k>3&&te&&Object.defineProperty(Q,U,te),te},Ee=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function j(Q){var U=this;this.model=Q,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(I){return U.localValues.has(I)},p(Object(c.A)(Q),"createViewModel expects an observable object"),S(Q).forEach(function(I){if(!(I===c.a||I==="__mobxDidRunLazyInitializers")){if(p(Ee.indexOf(I)===-1,"The propertyname "+I+" is reserved and cannot be used with viewModels"),Object(c.w)(Q,I)){var k=Object(c.h)(Q,I).derivation;U.localComputedValues.set(I,Object(c.m)(k.bind(U)))}var te=Object.getOwnPropertyDescriptor(Q,I),$=te?{enumerable:te.enumerable}:{};Object.defineProperty(U,I,W(W({},$),{configurable:!0,get:function(){return Object(c.w)(Q,I)?U.localComputedValues.get(I).get():U.isPropertyDirty(I)?U.localValues.get(I):U.model[I]},set:Object(c.k)(function(Z){Z!==U.model[I]?U.localValues.set(I,Z):U.localValues.delete(I)})}))}})}return Object.defineProperty(j.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),j.prototype.submit=function(){var Q=this;Object(c.B)(this.localValues).forEach(function(U){var I=Q.localValues.get(U),k=Q.model[U];Object(c.y)(k)?k.replace(I):Object(c.z)(k)?(k.clear(),k.merge(I)):Object(c.v)(I)||(Q.model[U]=I)}),this.localValues.clear()},j.prototype.reset=function(){this.localValues.clear()},j.prototype.resetProperty=function(Q){this.localValues.delete(Q)},V([c.m],j.prototype,"isDirty",null),V([c.m],j.prototype,"changedValues",null),V([c.k.bound],j.prototype,"submit",null),V([c.k.bound],j.prototype,"reset",null),V([c.k.bound],j.prototype,"resetProperty",null),j})();function ge(j){if(!j)return"ROOT";for(var Q=[];j.parent;)Q.push(j.path),j=j.parent;return Q.reverse().join("/")}function ye(j){return Object(c.A)(j)||Object(c.y)(j)||Object(c.z)(j)}function ce(j,Q){var U=new WeakMap;function I(Z){var le=U.get(Z.object);k(Z,le),Q(Z,ge(le),j)}function k(Z,le){switch(Z.type){case"add":te(Z.newValue,le,Z.name);break;case"update":$(Z.oldValue),te(Z.newValue,le,Z.name||""+Z.index);break;case"remove":case"delete":$(Z.oldValue);break;case"splice":Z.removed.map($),Z.added.forEach(function(_e,Ke){return te(_e,le,""+(Z.index+Ke))});for(var Ae=Z.index+Z.addedCount;Ae<Z.object.length;Ae++)if(ye(Z.object[Ae])){var Re=U.get(Z.object[Ae]);Re&&(Re.path=""+Ae)}break}}function te(Z,le,Ae){if(ye(Z)){var Re=U.get(Z);if(Re){if(Re.parent!==le||Re.path!==Ae)throw new Error("The same observable object cannot appear twice in the same tree,"+(" trying to assign it to '"+ge(le)+"/"+Ae+"',")+(" but it already exists at '"+ge(Re.parent)+"/"+Re.path+"'"))}else{var _e={parent:le,path:Ae,dispose:Object(c.D)(Z,I)};U.set(Z,_e),Object(c.p)(Z).forEach(function(Ke){var gt=Ke[0],Nt=Ke[1];return te(Nt,_e,gt)})}}}function $(Z){if(ye(Z)){var le=U.get(Z);if(!le)return;U.delete(Z),le.dispose(),Object(c.L)(Z).forEach($)}}return te(j,void 0,""),function(){$(j)}}var xe=function(){var j=function(Q,U){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var te in k)k.hasOwnProperty(te)&&(I[te]=k[te])},j(Q,U)};return function(Q,U){j(Q,U);function I(){this.constructor=Q}Q.prototype=U===null?Object.create(U):(I.prototype=U.prototype,new I)}}();(function(j){xe(Q,j);function Q(U,I,k){var te=k===void 0?{}:k,$=te.name,Z=$===void 0?"ogm"+(Math.random()*1e3|0):$,le=te.keyToName,Ae=le===void 0?function(Ke){return""+Ke}:le,Re=j.call(this)||this;Re._keyToName=Ae,Re._groupBy=I,Re._ogmInfoKey=Symbol("ogmInfo"+Z),Re._base=U;for(var _e=0;_e<U.length;_e++)Re._addItem(U[_e]);return Re._disposeBaseObserver=Object(c.D)(Re._base,function(Ke){if(Ke.type==="splice")Object(c.J)(function(){for(var gt=0,Nt=Ke.removed;gt<Nt.length;gt++){var Vt=Nt[gt];Re._removeItem(Vt)}for(var Ct=0,Ge=Ke.added;Ct<Ge.length;Ct++){var bt=Ge[Ct];Re._addItem(bt)}});else if(Ke.type==="update")Object(c.J)(function(){Re._removeItem(Ke.oldValue),Re._addItem(Ke.newValue)});else throw new Error("illegal state")}),Re}return Q.prototype.clear=function(){throw new Error("not supported")},Q.prototype.delete=function(U){throw new Error("not supported")},Q.prototype.set=function(U,I){throw new Error("not supported")},Q.prototype.dispose=function(){this._disposeBaseObserver();for(var U=0;U<this._base.length;U++){var I=this._base[U],k=I[this._ogmInfoKey];k.reaction(),delete I[this._ogmInfoKey]}},Q.prototype._getGroupArr=function(U){var I=j.prototype.get.call(this,U);return I===void 0&&(I=Object(c.C)([],{name:"GroupArray["+this._keyToName(U)+"]",deep:!1}),j.prototype.set.call(this,U,I)),I},Q.prototype._removeFromGroupArr=function(U,I){var k=j.prototype.get.call(this,U);k.length===1?j.prototype.delete.call(this,U):(I===k.length-1||(k[I]=k[k.length-1],k[I][this._ogmInfoKey].groupArrIndex=I),k.length--)},Q.prototype._addItem=function(U){var I=this,k=this._groupBy(U),te=this._getGroupArr(k),$={groupByValue:k,groupArrIndex:te.length,reaction:Object(c.F)(function(){return I._groupBy(U)},function(Z,le){var Ae=U[I._ogmInfoKey];I._removeFromGroupArr(Ae.groupByValue,Ae.groupArrIndex);var Re=I._getGroupArr(Z),_e=Re.length;Re.push(U),Ae.groupByValue=Z,Ae.groupArrIndex=_e})};Object.defineProperty(U,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:$}),te.push(U)},Q.prototype._removeItem=function(U){var I=U[this._ogmInfoKey];this._removeFromGroupArr(I.groupByValue,I.groupArrIndex),I.reaction(),delete U[this._ogmInfoKey]},Q})(c.b),Promise.resolve(),typeof queueMicrotask<"u"||typeof l<"u"&&l.nextTick}).call(this,o(155))},function(i,u,o){var l;(function(c,h,p){if(!c)return;for(var m={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},y={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},S={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},T,w=1;w<20;++w)m[111+w]="f"+w;for(w=0;w<=9;++w)m[w+96]=w.toString();function N(I,k,te){if(I.addEventListener){I.addEventListener(k,te,!1);return}I.attachEvent("on"+k,te)}function M(I){if(I.type=="keypress"){var k=String.fromCharCode(I.which);return I.shiftKey||(k=k.toLowerCase()),k}return m[I.which]?m[I.which]:y[I.which]?y[I.which]:String.fromCharCode(I.which).toLowerCase()}function D(I,k){return I.sort().join(",")===k.sort().join(",")}function W(I){var k=[];return I.shiftKey&&k.push("shift"),I.altKey&&k.push("alt"),I.ctrlKey&&k.push("ctrl"),I.metaKey&&k.push("meta"),k}function V(I){if(I.preventDefault){I.preventDefault();return}I.returnValue=!1}function Ee(I){if(I.stopPropagation){I.stopPropagation();return}I.cancelBubble=!0}function ge(I){return I=="shift"||I=="ctrl"||I=="alt"||I=="meta"}function ye(){if(!T){T={};for(var I in m)I>95&&I<112||m.hasOwnProperty(I)&&(T[m[I]]=I)}return T}function ce(I,k,te){return te||(te=ye()[I]?"keydown":"keypress"),te=="keypress"&&k.length&&(te="keydown"),te}function xe(I){return I==="+"?["+"]:(I=I.replace(/\+{2}/g,"+plus"),I.split("+"))}function j(I,k){var te,$,Z,le=[];for(te=xe(I),Z=0;Z<te.length;++Z)$=te[Z],x[$]&&($=x[$]),k&&k!="keypress"&&S[$]&&($=S[$],le.push("shift")),ge($)&&le.push($);return k=ce($,le,k),{key:$,modifiers:le,action:k}}function Q(I,k){return I===null||I===h?!1:I===k?!0:Q(I.parentNode,k)}function U(I){var k=this;if(I=I||h,!(k instanceof U))return new U(I);k.target=I,k._callbacks={},k._directMap={};var te={},$,Z=!1,le=!1,Ae=!1;function Re(Ge){Ge=Ge||{};var bt=!1,Ut;for(Ut in te){if(Ge[Ut]){bt=!0;continue}te[Ut]=0}bt||(Ae=!1)}function _e(Ge,bt,Ut,ee,se,me){var Ue,tt,He=[],Lt=Ut.type;if(!k._callbacks[Ge])return[];for(Lt=="keyup"&&ge(Ge)&&(bt=[Ge]),Ue=0;Ue<k._callbacks[Ge].length;++Ue)if(tt=k._callbacks[Ge][Ue],!(!ee&&tt.seq&&te[tt.seq]!=tt.level)&&Lt==tt.action&&(Lt=="keypress"&&!Ut.metaKey&&!Ut.ctrlKey||D(bt,tt.modifiers))){var nr=!ee&&tt.combo==se,tr=ee&&tt.seq==ee&&tt.level==me;(nr||tr)&&k._callbacks[Ge].splice(Ue,1),He.push(tt)}return He}function Ke(Ge,bt,Ut,ee){k.stopCallback(bt,bt.target||bt.srcElement,Ut,ee)||Ge(bt,Ut)===!1&&(V(bt),Ee(bt))}k._handleKey=function(Ge,bt,Ut){var ee=_e(Ge,bt,Ut),se,me={},Ue=0,tt=!1;for(se=0;se<ee.length;++se)ee[se].seq&&(Ue=Math.max(Ue,ee[se].level));for(se=0;se<ee.length;++se){if(ee[se].seq){if(ee[se].level!=Ue)continue;tt=!0,me[ee[se].seq]=1,Ke(ee[se].callback,Ut,ee[se].combo,ee[se].seq);continue}tt||Ke(ee[se].callback,Ut,ee[se].combo)}var He=Ut.type=="keypress"&&le;Ut.type==Ae&&!ge(Ge)&&!He&&Re(me),le=tt&&Ut.type=="keydown"};function gt(Ge){typeof Ge.which!="number"&&(Ge.which=Ge.keyCode);var bt=M(Ge);if(bt){if(Ge.type=="keyup"&&Z===bt){Z=!1;return}k.handleKey(bt,W(Ge),Ge)}}function Nt(){clearTimeout($),$=setTimeout(Re,1e3)}function Vt(Ge,bt,Ut,ee){te[Ge]=0;function se(Lt){return function(){Ae=Lt,++te[Ge],Nt()}}function me(Lt){Ke(Ut,Lt,Ge),ee!=="keyup"&&(Z=M(Lt)),setTimeout(Re,10)}for(var Ue=0;Ue<bt.length;++Ue){var tt=Ue+1===bt.length,He=tt?me:se(ee||j(bt[Ue+1]).action);Ct(bt[Ue],He,ee,Ge,Ue)}}function Ct(Ge,bt,Ut,ee,se){k._directMap[Ge+":"+Ut]=bt,Ge=Ge.replace(/\s+/g," ");var me=Ge.split(" "),Ue;if(me.length>1){Vt(Ge,me,bt,Ut);return}Ue=j(Ge,Ut),k._callbacks[Ue.key]=k._callbacks[Ue.key]||[],_e(Ue.key,Ue.modifiers,{type:Ue.action},ee,Ge,se),k._callbacks[Ue.key][ee?"unshift":"push"]({callback:bt,modifiers:Ue.modifiers,action:Ue.action,seq:ee,level:se,combo:Ge})}k._bindMultiple=function(Ge,bt,Ut){for(var ee=0;ee<Ge.length;++ee)Ct(Ge[ee],bt,Ut)},N(I,"keypress",gt),N(I,"keydown",gt),N(I,"keyup",gt)}U.prototype.bind=function(I,k,te){var $=this;return I=I instanceof Array?I:[I],$._bindMultiple.call($,I,k,te),$},U.prototype.unbind=function(I,k){var te=this;return te.bind.call(te,I,function(){},k)},U.prototype.trigger=function(I,k){var te=this;return te._directMap[I+":"+k]&&te._directMap[I+":"+k]({},I),te},U.prototype.reset=function(){var I=this;return I._callbacks={},I._directMap={},I},U.prototype.stopCallback=function(I,k){var te=this;if((" "+k.className+" ").indexOf(" mousetrap ")>-1||Q(k,te.target))return!1;if("composedPath"in I&&typeof I.composedPath=="function"){var $=I.composedPath()[0];$!==I.target&&(k=$)}return k.tagName=="INPUT"||k.tagName=="SELECT"||k.tagName=="TEXTAREA"||k.isContentEditable},U.prototype.handleKey=function(){var I=this;return I._handleKey.apply(I,arguments)},U.addKeycodes=function(I){for(var k in I)I.hasOwnProperty(k)&&(m[k]=I[k]);T=null},U.init=function(){var I=U(h);for(var k in I)k.charAt(0)!=="_"&&(U[k]=function(te){return function(){return I[te].apply(I,arguments)}}(k))},U.init(),c.Mousetrap=U,i.exports&&(i.exports=U),l=function(){return U}.call(u,o,u,i),l!==p&&(i.exports=l)})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(i,u,o){var l=o(36),c=o(37),h=o(32),p=o(39),m=o(67);i.exports=l?Object.defineProperties:function(S,x){h(S);for(var T=p(x),w=m(x),N=w.length,M=0,D;N>M;)c.f(S,D=w[M++],T[D]);return S}},function(i,u,o){var l=o(7),c=o(35),h=o(28),p=o(33),m=l.TypeError;i.exports=function(y,S){var x,T;if(S==="string"&&h(x=y.toString)&&!p(T=c(x,y))||h(x=y.valueOf)&&!p(T=c(x,y))||S!=="string"&&h(x=y.toString)&&!p(T=c(x,y)))return T;throw m("Can't convert object to primitive value")}},function(i,u,o){var l=o(7),c=o(28),h=o(92),p=l.WeakMap;i.exports=c(p)&&/native code/.test(h(p))},function(i,u,o){var l=o(136).IteratorPrototype,c=o(54),h=o(72),p=o(74),m=o(71),y=function(){return this};i.exports=function(S,x,T,w){var N=x+" Iterator";return S.prototype=c(l,{next:h(+!w,T)}),p(S,N,!1,!0),m[N]=y,S}},function(i,u,o){var l=o(7),c=o(28),h=l.String,p=l.TypeError;i.exports=function(m){if(typeof m=="object"||c(m))return m;throw p("Can't set "+h(m)+" as a prototype")}},function(i,u,o){var l=o(16),c=o(7),h=o(15),p=o(95),m=o(44),y=o(138),S=o(114),x=o(117),T=o(28),w=o(33),N=o(18),M=o(118),D=o(74),W=o(143);i.exports=function(V,Ee,ge){var ye=V.indexOf("Map")!==-1,ce=V.indexOf("Weak")!==-1,xe=ye?"set":"add",j=c[V],Q=j&&j.prototype,U=j,I={},k=function(_e){var Ke=h(Q[_e]);m(Q,_e,_e=="add"?function(Nt){return Ke(this,Nt===0?0:Nt),this}:_e=="delete"?function(gt){return ce&&!w(gt)?!1:Ke(this,gt===0?0:gt)}:_e=="get"?function(Nt){return ce&&!w(Nt)?void 0:Ke(this,Nt===0?0:Nt)}:_e=="has"?function(Nt){return ce&&!w(Nt)?!1:Ke(this,Nt===0?0:Nt)}:function(Nt,Vt){return Ke(this,Nt===0?0:Nt,Vt),this})},te=p(V,!T(j)||!(ce||Q.forEach&&!N(function(){new j().entries().next()})));if(te)U=ge.getConstructor(Ee,V,ye,xe),y.enable();else if(p(V,!0)){var $=new U,Z=$[xe](ce?{}:-0,1)!=$,le=N(function(){$.has(1)}),Ae=M(function(_e){new j(_e)}),Re=!ce&&N(function(){for(var _e=new j,Ke=5;Ke--;)_e[xe](Ke,Ke);return!_e.has(-0)});Ae||(U=Ee(function(_e,Ke){x(_e,Q);var gt=W(new j,_e,U);return Ke!=null&&S(Ke,gt[xe],{that:gt,AS_ENTRIES:ye}),gt}),U.prototype=Q,Q.constructor=U),(le||Re)&&(k("delete"),k("has"),ye&&k("get")),(Re||Z)&&k(xe),ce&&Q.clear&&delete Q.clear}return I[V]=U,l({global:!0,forced:U!=j},I),D(U,V),ce||ge.setStrong(U,V,ye),U}},function(i,u,o){var l=o(18),c=o(33),h=o(50),p=o(175),m=Object.isExtensible,y=l(function(){});i.exports=y||p?function(x){return!c(x)||p&&h(x)=="ArrayBuffer"?!1:m?m(x):!0}:m},function(i,u,o){var l=o(18);i.exports=l(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(i,u,o){var l=o(18);i.exports=!l(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(i,u,o){var l=o(37).f,c=o(54),h=o(144),p=o(62),m=o(117),y=o(114),S=o(111),x=o(145),T=o(36),w=o(138).fastKey,N=o(56),M=N.set,D=N.getterFor;i.exports={getConstructor:function(W,V,Ee,ge){var ye=W(function(U,I){m(U,ce),M(U,{type:V,index:c(null),first:void 0,last:void 0,size:0}),T||(U.size=0),I!=null&&y(I,U[ge],{that:U,AS_ENTRIES:Ee})}),ce=ye.prototype,xe=D(V),j=function(U,I,k){var te=xe(U),$=Q(U,I),Z,le;return $?$.value=k:(te.last=$={index:le=w(I,!0),key:I,value:k,previous:Z=te.last,next:void 0,removed:!1},te.first||(te.first=$),Z&&(Z.next=$),T?te.size++:U.size++,le!=="F"&&(te.index[le]=$)),U},Q=function(U,I){var k=xe(U),te=w(I),$;if(te!=="F")return k.index[te];for($=k.first;$;$=$.next)if($.key==I)return $};return h(ce,{clear:function(){for(var I=this,k=xe(I),te=k.index,$=k.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=void 0),delete te[$.index],$=$.next;k.first=k.last=void 0,T?k.size=0:I.size=0},delete:function(U){var I=this,k=xe(I),te=Q(I,U);if(te){var $=te.next,Z=te.previous;delete k.index[te.index],te.removed=!0,Z&&(Z.next=$),$&&($.previous=Z),k.first==te&&(k.first=$),k.last==te&&(k.last=Z),T?k.size--:I.size--}return!!te},forEach:function(I){for(var k=xe(this),te=p(I,arguments.length>1?arguments[1]:void 0),$;$=$?$.next:k.first;)for(te($.value,$.key,this);$&&$.removed;)$=$.previous},has:function(I){return!!Q(this,I)}}),h(ce,Ee?{get:function(I){var k=Q(this,I);return k&&k.value},set:function(I,k){return j(this,I===0?0:I,k)}}:{add:function(I){return j(this,I=I===0?0:I,I)}}),T&&l(ce,"size",{get:function(){return xe(this).size}}),ye},setStrong:function(W,V,Ee){var ge=V+" Iterator",ye=D(V),ce=D(ge);S(W,V,function(xe,j){M(this,{type:ge,target:xe,state:ye(xe),kind:j,last:void 0})},function(){for(var xe=ce(this),j=xe.kind,Q=xe.last;Q&&Q.removed;)Q=Q.previous;return!xe.target||!(xe.last=Q=Q?Q.next:xe.state.first)?(xe.target=void 0,{value:void 0,done:!0}):j=="keys"?{value:Q.key,done:!1}:j=="values"?{value:Q.value,done:!1}:{value:[Q.key,Q.value],done:!1}},Ee?"entries":"values",!Ee,!0),x(V)}}},function(i,u,o){var l=o(116),c=o(98);i.exports=l?{}.toString:function(){return"[object "+c(this)+"]"}},function(i,u,o){var l=o(75).forEach,c=o(120),h=c("forEach");i.exports=h?[].forEach:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}},function(i,u,o){var l=o(7),c=o(99),h=o(100),p=o(33),m=o(27),y=m("species"),S=l.Array;i.exports=function(x){var T;return c(x)&&(T=x.constructor,h(T)&&(T===S||c(T.prototype))?T=void 0:p(T)&&(T=T[y],T===null&&(T=void 0))),T===void 0?S:T}},function(i,u,o){var l=o(7);i.exports=l},function(i,u,o){var l=o(7),c=o(62),h=o(35),p=o(38),m=o(183),y=o(140),S=o(100),x=o(43),T=o(61),w=o(141),N=o(115),M=l.Array;i.exports=function(W){var V=p(W),Ee=S(this),ge=arguments.length,ye=ge>1?arguments[1]:void 0,ce=ye!==void 0;ce&&(ye=c(ye,ge>2?arguments[2]:void 0));var xe=N(V),j=0,Q,U,I,k,te,$;if(xe&&!(this==M&&y(xe)))for(k=w(V,xe),te=k.next,U=Ee?new this:[];!(I=h(te,k)).done;j++)$=ce?m(k,ye,[I.value,j],!0):I.value,T(U,j,$);else for(Q=x(V),U=Ee?new this(Q):M(Q);Q>j;j++)$=ce?ye(V[j],j):V[j],T(U,j,$);return U.length=j,U}},function(i,u,o){var l=o(32),c=o(142);i.exports=function(h,p,m,y){try{return y?p(l(m)[0],m[1]):p(m)}catch(S){c(h,"throw",S)}}},function(i,u,o){var l=o(32);i.exports=function(){var c=l(this),h="";return c.global&&(h+="g"),c.ignoreCase&&(h+="i"),c.multiline&&(h+="m"),c.dotAll&&(h+="s"),c.unicode&&(h+="u"),c.sticky&&(h+="y"),h}},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h(".","s");return!(p.dotAll&&p.exec(`
`)&&p.flags==="s")})},function(i,u,o){var l=o(18),c=o(7),h=c.RegExp;i.exports=l(function(){var p=h("(?<a>b)","g");return p.exec("b").groups.a!=="b"||"b".replace(p,"$<a>c")!=="bc"})},function(i,u,o){var l=o(16),c=o(15),h=o(55),p=o(38),m=o(43),y=o(40),S=o(18),x=o(188),T=o(120),w=o(189),N=o(190),M=o(66),D=o(191),W=[],V=c(W.sort),Ee=c(W.push),ge=S(function(){W.sort(void 0)}),ye=S(function(){W.sort(null)}),ce=T("sort"),xe=!S(function(){if(M)return M<70;if(!(w&&w>3)){if(N)return!0;if(D)return D<603;var U="",I,k,te,$;for(I=65;I<76;I++){switch(k=String.fromCharCode(I),I){case 66:case 69:case 70:case 72:te=3;break;case 68:case 71:te=4;break;default:te=2}for($=0;$<47;$++)W.push({k:k+$,v:te})}for(W.sort(function(Z,le){return le.v-Z.v}),$=0;$<W.length;$++)k=W[$].k.charAt(0),U.charAt(U.length-1)!==k&&(U+=k);return U!=="DGBEFHACIJK"}}),j=ge||!ye||!ce||!xe,Q=function(U){return function(I,k){return k===void 0?-1:I===void 0?1:U!==void 0?+U(I,k)||0:y(I)>y(k)?1:-1}};l({target:"Array",proto:!0,forced:j},{sort:function(I){I!==void 0&&h(I);var k=p(this);if(xe)return I===void 0?V(k):V(k,I);var te=[],$=m(k),Z,le;for(le=0;le<$;le++)le in k&&Ee(te,k[le]);for(x(te,Q(I)),Z=te.length,le=0;le<Z;)k[le]=te[le++];for(;le<$;)delete k[le++];return k}})},function(i,u,o){var l=o(113),c=Math.floor,h=function(y,S){var x=y.length,T=c(x/2);return x<8?p(y,S):m(y,h(l(y,0,T),S),h(l(y,T),S),S)},p=function(y,S){for(var x=y.length,T=1,w,N;T<x;){for(N=T,w=y[T];N&&S(y[N-1],w)>0;)y[N]=y[--N];N!==T++&&(y[N]=w)}return y},m=function(y,S,x,T){for(var w=S.length,N=x.length,M=0,D=0;M<w||D<N;)y[M+D]=M<w&&D<N?T(S[M],x[D])<=0?S[M++]:x[D++]:M<w?S[M++]:x[D++];return y};i.exports=h},function(i,u,o){var l=o(53),c=l.match(/firefox\/(\d+)/i);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(53);i.exports=/MSIE|Trident/.test(l)},function(i,u,o){var l=o(53),c=l.match(/AppleWebKit\/(\d+)\./);i.exports=!!c&&+c[1]},function(i,u,o){var l=o(16),c=o(75).find,h=o(83),p="find",m=!0;p in[]&&Array(1)[p](function(){m=!1}),l({target:"Array",proto:!0,forced:m},{find:function(S){return c(this,S,arguments.length>1?arguments[1]:void 0)}}),h(p)},function(i,u,o){var l=o(7),c=o(154),h=l.TypeError;i.exports=function(p){if(c(p))throw h("The method doesn't accept regular expressions");return p}},function(i,u,o){var l=o(27),c=l("match");i.exports=function(h){var p=/./;try{"/./"[h](p)}catch{try{return p[c]=!1,"/./"[h](p)}catch{}}return!1}},function(i,u,o){var l=o(94).PROPER,c=o(18),h=o(160),p="​᠎";i.exports=function(m){return c(function(){return!!h[m]()||p[m]()!==p||l&&h[m].name!==m})}},function(i,u,o){var l=o(15);i.exports=l(1 .valueOf)},function(i,u,o){var l=o(15),c=o(38),h=Math.floor,p=l("".charAt),m=l("".replace),y=l("".slice),S=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,x=/\$([$&'`]|\d{1,2})/g;i.exports=function(T,w,N,M,D,W){var V=N+T.length,Ee=M.length,ge=x;return D!==void 0&&(D=c(D),ge=S),m(W,ge,function(ye,ce){var xe;switch(p(ce,0)){case"$":return"$";case"&":return T;case"`":return y(w,0,N);case"'":return y(w,V);case"<":xe=D[y(ce,1,-1)];break;default:var j=+ce;if(j===0)return ye;if(j>Ee){var Q=h(j/10);return Q===0?ye:Q<=Ee?M[Q-1]===void 0?p(ce,1):M[Q-1]+p(ce,1):ye}xe=M[j-1]}return xe===void 0?"":xe})}},function(i,u,o){var l=o(36),c=o(15),h=o(35),p=o(18),m=o(67),y=o(112),S=o(93),x=o(38),T=o(81),w=Object.assign,N=Object.defineProperty,M=c([].concat);i.exports=!w||p(function(){if(l&&w({b:1},w(N({},"a",{enumerable:!0,get:function(){N(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},W={},V=Symbol(),Ee="abcdefghijklmnopqrst";return D[V]=7,Ee.split("").forEach(function(ge){W[ge]=ge}),w({},D)[V]!=7||m(w({},W)).join("")!=Ee})?function(W,V){for(var Ee=x(W),ge=arguments.length,ye=1,ce=y.f,xe=S.f;ge>ye;)for(var j=T(arguments[ye++]),Q=ce?M(m(j),ce(j)):m(j),U=Q.length,I=0,k;U>I;)k=Q[I++],(!l||h(xe,j,k))&&(Ee[k]=j[k]);return Ee}:w},function(i,u,o){var l=o(7),c=o(15),h=o(55),p=o(33),m=o(34),y=o(101),S=l.Function,x=c([].concat),T=c([].join),w={},N=function(M,D,W){if(!m(w,D)){for(var V=[],Ee=0;Ee<D;Ee++)V[Ee]="a["+Ee+"]";w[D]=S("C,a","return new C("+T(V,",")+")")}return w[D](M,W)};i.exports=S.bind||function(D){var W=h(this),V=W.prototype,Ee=y(arguments,1),ge=function(){var ce=x(Ee,y(arguments));return this instanceof ge?N(W,ce.length,ce):W.apply(D,ce)};return p(V)&&(ge.prototype=V),ge}},function(i,u,o){var l=o(34);i.exports=function(c){return c!==void 0&&(l(c,"value")||l(c,"writable"))}},function(i,u,o){var l=o(15),c=o(45),h=o(40),p=/"/g,m=l("".replace);i.exports=function(y,S,x,T){var w=h(c(y)),N="<"+S;return x!==""&&(N+=" "+x+'="'+m(h(T),p,"&quot;")+'"'),N+">"+w+"</"+S+">"}},function(i,u,o){var l=o(18);i.exports=function(c){return l(function(){var h=""[c]('"');return h!==h.toLowerCase()||h.split('"').length>3})}},function(i,u,o){var l=o(16),c=Math.hypot,h=Math.abs,p=Math.sqrt,m=!!c&&c(1/0,NaN)!==1/0;l({target:"Math",stat:!0,forced:m},{hypot:function(S,x){for(var T=0,w=0,N=arguments.length,M=0,D,W;w<N;)D=h(arguments[w++]),M<D?(W=M/D,T=T*W*W+1,M=D):D>0?(W=D/M,T+=W*W):T+=D;return M===1/0?1/0:M*p(T)}})},function(i,u,o){var l=o(16),c=o(65),h=o(7),p=o(46),m=o(35),y=o(205),S=o(44),x=o(144),T=o(97),w=o(74),N=o(145),M=o(55),D=o(28),W=o(33),V=o(117),Ee=o(92),ge=o(114),ye=o(118),ce=o(156),xe=o(162).set,j=o(206),Q=o(209),U=o(210),I=o(164),k=o(211),te=o(56),$=o(95),Z=o(27),le=o(212),Ae=o(126),Re=o(66),_e=Z("species"),Ke="Promise",gt=te.getterFor(Ke),Nt=te.set,Vt=te.getterFor(Ke),Ct=y&&y.prototype,Ge=y,bt=Ct,Ut=h.TypeError,ee=h.document,se=h.process,me=I.f,Ue=me,tt=!!(ee&&ee.createEvent&&h.dispatchEvent),He=D(h.PromiseRejectionEvent),Lt="unhandledrejection",nr="rejectionhandled",tr=0,Jt=1,rt=2,Er=1,ur=2,Xt=!1,L,Qr,Rr,kr,Be=$(Ke,function(){var Mt=Ee(Ge),or=Mt!==String(Ge);if(!or&&Re===66||c&&!bt.finally)return!0;if(Re>=51&&/native code/.test(Mt))return!1;var vr=new Ge(function(re){re(1)}),fr=function(re){re(function(){},function(){})},_r=vr.constructor={};return _r[_e]=fr,Xt=vr.then(function(){})instanceof fr,Xt?!or&&le&&!He:!0}),Xr=Be||!ye(function(Mt){Ge.all(Mt).catch(function(){})}),zr=function(Mt){var or;return W(Mt)&&D(or=Mt.then)?or:!1},Ir=function(Mt,or){if(!Mt.notified){Mt.notified=!0;var vr=Mt.reactions;j(function(){for(var fr=Mt.value,_r=Mt.state==Jt,re=0;vr.length>re;){var Oe=vr[re++],we=_r?Oe.ok:Oe.fail,Ne=Oe.resolve,ht=Oe.reject,_t=Oe.domain,Kt,Br,Cn;try{we?(_r||(Mt.rejection===ur&&to(Mt),Mt.rejection=Er),we===!0?Kt=fr:(_t&&_t.enter(),Kt=we(fr),_t&&(_t.exit(),Cn=!0)),Kt===Oe.promise?ht(Ut("Promise-chain cycle")):(Br=zr(Kt))?m(Br,Kt,Ne,ht):Ne(Kt)):ht(fr)}catch(Ln){_t&&!Cn&&_t.exit(),ht(Ln)}}Mt.reactions=[],Mt.notified=!1,or&&!Mt.rejection&&eo(Mt)})}},On=function(Mt,or,vr){var fr,_r;tt?(fr=ee.createEvent("Event"),fr.promise=or,fr.reason=vr,fr.initEvent(Mt,!1,!0),h.dispatchEvent(fr)):fr={promise:or,reason:vr},!He&&(_r=h["on"+Mt])?_r(fr):Mt===Lt&&U("Unhandled promise rejection",vr)},eo=function(Mt){m(xe,h,function(){var or=Mt.facade,vr=Mt.value,fr=In(Mt),_r;if(fr&&(_r=k(function(){Ae?se.emit("unhandledRejection",vr,or):On(Lt,or,vr)}),Mt.rejection=Ae||In(Mt)?ur:Er,_r.error))throw _r.value})},In=function(Mt){return Mt.rejection!==Er&&!Mt.parent},to=function(Mt){m(xe,h,function(){var or=Mt.facade;Ae?se.emit("rejectionHandled",or):On(nr,or,Mt.value)})},Qt=function(Mt,or,vr){return function(fr){Mt(or,fr,vr)}},$r=function(Mt,or,vr){Mt.done||(Mt.done=!0,vr&&(Mt=vr),Mt.value=or,Mt.state=rt,Ir(Mt,!0))},Dn=function(Mt,or,vr){if(!Mt.done){Mt.done=!0,vr&&(Mt=vr);try{if(Mt.facade===or)throw Ut("Promise can't be resolved itself");var fr=zr(or);fr?j(function(){var _r={done:!1};try{m(fr,or,Qt(Dn,_r,Mt),Qt($r,_r,Mt))}catch(re){$r(_r,re,Mt)}}):(Mt.value=or,Mt.state=Jt,Ir(Mt,!1))}catch(_r){$r({done:!1},_r,Mt)}}};if(Be&&(Ge=function(or){V(this,bt),M(or),m(L,this);var vr=gt(this);try{or(Qt(Dn,vr),Qt($r,vr))}catch(fr){$r(vr,fr)}},bt=Ge.prototype,L=function(or){Nt(this,{type:Ke,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:tr,value:void 0})},L.prototype=x(bt,{then:function(or,vr){var fr=Vt(this),_r=fr.reactions,re=me(ce(this,Ge));return re.ok=D(or)?or:!0,re.fail=D(vr)&&vr,re.domain=Ae?se.domain:void 0,fr.parent=!0,_r[_r.length]=re,fr.state!=tr&&Ir(fr,!1),re.promise},catch:function(Mt){return this.then(void 0,Mt)}}),Qr=function(){var Mt=new L,or=gt(Mt);this.promise=Mt,this.resolve=Qt(Dn,or),this.reject=Qt($r,or)},I.f=me=function(Mt){return Mt===Ge||Mt===Rr?new Qr(Mt):Ue(Mt)},!c&&D(y)&&Ct!==Object.prototype)){kr=Ct.then,Xt||(S(Ct,"then",function(or,vr){var fr=this;return new Ge(function(_r,re){m(kr,fr,_r,re)}).then(or,vr)},{unsafe:!0}),S(Ct,"catch",bt.catch,{unsafe:!0}));try{delete Ct.constructor}catch{}T&&T(Ct,bt)}l({global:!0,wrap:!0,forced:Be},{Promise:Ge}),w(Ge,Ke,!1,!0),N(Ke),Rr=p(Ke),l({target:Ke,stat:!0,forced:Be},{reject:function(or){var vr=me(this);return m(vr.reject,void 0,or),vr.promise}}),l({target:Ke,stat:!0,forced:c||Be},{resolve:function(or){return Q(c&&this===Rr?Ge:this,or)}}),l({target:Ke,stat:!0,forced:Xr},{all:function(or){var vr=this,fr=me(vr),_r=fr.resolve,re=fr.reject,Oe=k(function(){var we=M(vr.resolve),Ne=[],ht=0,_t=1;ge(or,function(Kt){var Br=ht++,Cn=!1;_t++,m(we,vr,Kt).then(function(Ln){Cn||(Cn=!0,Ne[Br]=Ln,--_t||_r(Ne))},re)}),--_t||_r(Ne)});return Oe.error&&re(Oe.value),fr.promise},race:function(or){var vr=this,fr=me(vr),_r=fr.reject,re=k(function(){var Oe=M(vr.resolve);ge(or,function(we){m(Oe,vr,we).then(fr.resolve,_r)})});return re.error&&_r(re.value),fr.promise}})},function(i,u,o){var l=o(7);i.exports=l.Promise},function(i,u,o){var l=o(7),c=o(62),h=o(51).f,p=o(162).set,m=o(163),y=o(207),S=o(208),x=o(126),T=l.MutationObserver||l.WebKitMutationObserver,w=l.document,N=l.process,M=l.Promise,D=h(l,"queueMicrotask"),W=D&&D.value,V,Ee,ge,ye,ce,xe,j,Q;W||(V=function(){var U,I;for(x&&(U=N.domain)&&U.exit();Ee;){I=Ee.fn,Ee=Ee.next;try{I()}catch(k){throw Ee?ye():ge=void 0,k}}ge=void 0,U&&U.enter()},!m&&!x&&!S&&T&&w?(ce=!0,xe=w.createTextNode(""),new T(V).observe(xe,{characterData:!0}),ye=function(){xe.data=ce=!ce}):!y&&M&&M.resolve?(j=M.resolve(void 0),j.constructor=M,Q=c(j.then,j),ye=function(){Q(V)}):x?ye=function(){N.nextTick(V)}:(p=c(p,l),ye=function(){p(V)})),i.exports=W||function(U){var I={fn:U,next:void 0};ge&&(ge.next=I),Ee||(Ee=I,ye()),ge=I}},function(i,u,o){var l=o(53),c=o(7);i.exports=/ipad|iphone|ipod/i.test(l)&&c.Pebble!==void 0},function(i,u,o){var l=o(53);i.exports=/web0s(?!.*chrome)/i.test(l)},function(i,u,o){var l=o(32),c=o(33),h=o(164);i.exports=function(p,m){if(l(p),c(m)&&m.constructor===p)return m;var y=h.f(p),S=y.resolve;return S(m),y.promise}},function(i,u,o){var l=o(7);i.exports=function(c,h){var p=l.console;p&&p.error&&(arguments.length==1?p.error(c):p.error(c,h))}},function(i,u){i.exports=function(o){try{return{error:!1,value:o()}}catch(l){return{error:!0,value:l}}}},function(i,u){i.exports=typeof window=="object"},function(i,u,o){var l=o(36),c=o(15),h=o(67),p=o(39),m=o(93).f,y=c(m),S=c([].push),x=function(T){return function(w){for(var N=p(w),M=h(N),D=M.length,W=0,V=[],Ee;D>W;)Ee=M[W++],(!l||y(N,Ee))&&S(V,T?[Ee,N[Ee]]:N[Ee]);return V}};i.exports={entries:x(!0),values:x(!1)}},function(i,u,o){var l=o(38),c=o(68),h=o(43);i.exports=function(m){for(var y=l(this),S=h(y),x=arguments.length,T=c(x>1?arguments[1]:void 0,S),w=x>2?arguments[2]:void 0,N=w===void 0?S:c(w,S);N>T;)y[T++]=m;return y}},function(i,u,o){o.r(u),o.d(u,"observer",function(){return ai}),o.d(u,"LogicFlow",function(){return Jm}),o.d(u,"h",function(){return Be.g}),o.d(u,"LogicFlowUtil",function(){return l}),o.d(u,"BaseNode",function(){return ma}),o.d(u,"RectNode",function(){return fm}),o.d(u,"CircleNode",function(){return hm}),o.d(u,"PolygonNode",function(){return ym}),o.d(u,"DiamondNode",function(){return bm}),o.d(u,"EllipseNode",function(){return Sm}),o.d(u,"TextNode",function(){return Tm}),o.d(u,"HtmlNode",function(){return _m}),o.d(u,"BaseEdge",function(){return hc}),o.d(u,"LineEdge",function(){return jm}),o.d(u,"PolylineEdge",function(){return Gm}),o.d(u,"BezierEdge",function(){return zm}),o.d(u,"Arrow",function(){return N2}),o.d(u,"BaseEdgeModel",function(){return dg}),o.d(u,"BezierEdgeModel",function(){return Fg}),o.d(u,"LineEdgeModel",function(){return vg}),o.d(u,"PolylineEdgeModel",function(){return mg}),o.d(u,"BaseNodeModel",function(){return ya}),o.d(u,"CircleNodeModel",function(){return Ug}),o.d(u,"DiamondNodeModel",function(){return Xg}),o.d(u,"EllipseNodeModel",function(){return Vg}),o.d(u,"PolygonNodeModel",function(){return Kg}),o.d(u,"RectNodeModel",function(){return Qg}),o.d(u,"TextNodeModel",function(){return em}),o.d(u,"HtmlNodeModel",function(){return rm}),o.d(u,"EditConfigModel",function(){return nt}),o.d(u,"GraphModel",function(){return z0}),o.d(u,"SnaplineModel",function(){return zS}),o.d(u,"Keyboard",function(){return Yx}),o.d(u,"get",function(){return SO}),o.d(u,"defaults",function(){return xO}),o.d(u,"ElementState",function(){return ct}),o.d(u,"ModelType",function(){return Ze}),o.d(u,"ElementType",function(){return Ve}),o.d(u,"EventType",function(){return ze});var l={};o.r(l),o.d(l,"createUuid",function(){return fs}),o.d(l,"refreshGraphId",function(){return L1}),o.d(l,"createDrag",function(){return UN}),o.d(l,"StepDrag",function(){return ha});var c=o(0),h=o(10);if(!h.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var p=o(42),m=Object(p.b)("observerBatching");function y(e){e()}function S(e){e||(e=y),Object(c.n)({reactionScheduler:e}),Object(p.a)()[m]=!0}function x(e){return Object(c.t)(e)}function T(e){var r={cleanAt:Date.now()+w,reaction:e};return r}var w=1e4,N=1e4,M=new Set,D;function W(){D===void 0&&(D=setTimeout(ge,N))}function V(e){M.add(e),W()}function Ee(e){M.delete(e)}function ge(){D=void 0;var e=Date.now();M.forEach(function(r){var t=r.current;t&&e>=t.cleanAt&&(t.reaction.dispose(),r.current=null,M.delete(r))}),M.size>0&&W()}var ye=!1,ce=[];function xe(e){return function(){ye?ce.push(e):e()}}function j(e){ye=!0,ce=[];try{var r=e();ye=!1;var t=ce.length>0?ce:void 0;return h.d.useLayoutEffect(function(){t&&t.forEach(function(s){return s()})},[t]),r}finally{ye=!1}}var Q={};function U(e){return"observer"+e}function I(e,r,t){r===void 0&&(r="observed"),t===void 0&&(t=Q);var s=t.useForceUpdate||p.d,f=s(),d=xe(f),v=h.d.useRef(null);if(!v.current){var b=new c.c(U(r),function(){O.mounted?d():(b.dispose(),v.current=null)}),O=T(b);v.current=O,V(v)}var P=v.current.reaction;return h.d.useDebugValue(P,x),h.d.useEffect(function(){return Ee(v),v.current?v.current.mounted=!0:(v.current={reaction:new c.c(U(r),function(){d()}),cleanAt:1/0},d()),function(){v.current.reaction.dispose(),v.current=null}},[]),j(function(){var R,F;if(P.track(function(){try{R=e()}catch(Y){F=Y}}),F)throw F;return R})}var k=function(){return k=Object.assign||function(e){for(var r,t=1,s=arguments.length;t<s;t++){r=arguments[t];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(e[f]=r[f])}return e},k.apply(this,arguments)};function te(e,r){var t=k({forwardRef:!1},r),s=e.displayName||e.name,f=function(v,b){return I(function(){return e(v,b)},s)};f.displayName=s;var d;return t.forwardRef?d=Object(h.f)(Object(h.e)(f)):d=Object(h.f)(f),Z(e,d),d.displayName=s,d}var $={$$typeof:!0,render:!0,compare:!0,type:!0};function Z(e,r){Object.keys(e).forEach(function(t){$[t]||Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}function le(e){var r=e.children,t=e.render,s=r||t;return typeof s!="function"?null:I(s)}le.propTypes={children:Ae,render:Ae},le.displayName="Observer";function Ae(e,r,t,s,f){var d=r==="children"?"render":"children",v=typeof e[r]=="function",b=typeof e[d]=="function";return v&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+t):v||b?null:new Error("Invalid prop `"+f+"` of type `"+typeof e[r]+"` supplied to `"+t+"`, expected `function`.")}S(h.g);var Re=0;function _e(e){if(typeof Symbol=="function")return Symbol(e);var r="__$mobx-react "+e+" ("+Re+")";return Re++,r}var Ke={};function gt(e){return Ke[e]||(Ke[e]=_e(e)),Ke[e]}function Nt(e,r){if(Vt(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(var f=0;f<t.length;f++)if(!Object.hasOwnProperty.call(r,t[f])||!Vt(e[t[f]],r[t[f]]))return!1;return!0}function Vt(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}function Ct(e,r,t){Object.hasOwnProperty.call(e,r)?e[r]=t:Object.defineProperty(e,r,{enumerable:!1,configurable:!0,writable:!0,value:t})}var Ge=gt("patchMixins"),bt=gt("patchedDefinition");function Ut(e,r){var t=e[Ge]=e[Ge]||{},s=t[r]=t[r]||{};return s.locks=s.locks||0,s.methods=s.methods||[],s}function ee(e,r){for(var t=this,s=arguments.length,f=new Array(s>2?s-2:0),d=2;d<s;d++)f[d-2]=arguments[d];r.locks++;try{var v;return e!=null&&(v=e.apply(this,f)),v}finally{r.locks--,r.locks===0&&r.methods.forEach(function(b){b.apply(t,f)})}}function se(e,r){var t=function(){for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];ee.call.apply(ee,[this,e,r].concat(d))};return t}function me(e,r,t){var s=Ut(e,r);s.methods.indexOf(t)<0&&s.methods.push(t);var f=Object.getOwnPropertyDescriptor(e,r);if(!(f&&f[bt])){var d=e[r],v=Ue(e,r,f?f.enumerable:void 0,s,d);Object.defineProperty(e,r,v)}}function Ue(e,r,t,s,f){var d,v=se(f,s);return d={},d[bt]=!0,d.get=function(){return v},d.set=function(O){if(this===e)v=se(O,s);else{var P=Ue(this,r,t,s,O);Object.defineProperty(this,r,P)}},d.configurable=!0,d.enumerable=t,d}var tt=c.a||"$mobx",He=gt("isMobXReactObserver"),Lt=gt("isUnmounted"),nr=gt("skipRender"),tr=gt("isForcingUpdate");function Jt(e){var r=e.prototype;if(e[He]){var t=rt(r);console.warn("The provided component class ("+t+`) 
                has already been declared as an observer component.`)}else e[He]=!0;if(r.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==h.b){if(!r.shouldComponentUpdate)r.shouldComponentUpdate=ur;else if(r.shouldComponentUpdate!==ur)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}Xt(r,"props"),Xt(r,"state");var s=r.render;return r.render=function(){return Er.call(this,s)},me(r,"componentWillUnmount",function(){var f;if((f=this.render[tt])===null||f===void 0||f.dispose(),this[Lt]=!0,!this.render[tt]){var d=rt(this);console.warn("The reactive render of an observer class component ("+d+`) 
                was overriden after MobX attached. This may result in a memory leak if the 
                overriden reactive render was not properly disposed.`)}}),e}function rt(e){return e.displayName||e.name||e.constructor&&(e.constructor.displayName||e.constructor.name)||"<component>"}function Er(e){var r=this;Ct(this,nr,!1),Ct(this,tr,!1);var t=rt(this),s=e.bind(this),f=!1,d=new c.c(t+".render()",function(){if(!f&&(f=!0,r[Lt]!==!0)){var b=!0;try{Ct(r,tr,!0),r[nr]||h.a.prototype.forceUpdate.call(r),b=!1}finally{Ct(r,tr,!1),b&&d.dispose()}}});d.reactComponent=this,v[tt]=d,this.render=v;function v(){f=!1;var b=void 0,O=void 0;if(d.track(function(){try{O=Object(c.d)(!1,s)}catch(P){b=P}}),b)throw b;return O}return v.call(this)}function ur(e,r){return this.state!==r?!0:!Nt(this.props,e)}function Xt(e,r){var t=gt("reactProp_"+r+"_valueHolder"),s=gt("reactProp_"+r+"_atomHolder");function f(){return this[s]||Ct(this,s,Object(c.o)("reactive "+r)),this[s]}Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var v=!1;return c.f&&c.e&&(v=Object(c.f)(!0)),f.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(v),this[t]},set:function(v){!this[tr]&&!Nt(this[t],v)?(Ct(this,t,v),Ct(this,nr,!0),f.call(this).reportChanged(),Ct(this,nr,!1)):Ct(this,t,v)}})}var L=typeof Symbol=="function"&&Symbol.for,Qr=L?Symbol.for("react.forward_ref"):typeof h.e=="function"&&Object(h.e)(function(e){return null}).$$typeof,Rr=L?Symbol.for("react.memo"):typeof h.f=="function"&&Object(h.f)(function(e){return null}).$$typeof;function kr(e){if(e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Rr&&e.$$typeof===Rr)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(Qr&&e.$$typeof===Qr){var r=e.render;if(typeof r!="function")throw new Error("render property of ForwardRef was not a function");return Object(h.e)(function(){var s=arguments;return Object(h.c)(le,null,function(){return r.apply(void 0,s)})})}return typeof e=="function"&&(!e.prototype||!e.prototype.render)&&!e.isReactClass&&!Object.prototype.isPrototypeOf.call(h.a,e)?te(e):Jt(e)}if(!h.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Be=o(1);o(3),o(60),o(2),o(6),o(4),o(11),o(41),o(23),o(20),o(5),o(22),o(21),o(24),o(8),o(9),o(17),o(25),o(19),o(29),o(187),o(192),o(103),o(152),o(153);function Xr(e,r){for(var t=-1,s=e==null?0:e.length,f=Array(s);++t<s;)f[t]=r(e[t],t,e);return f}var zr=Xr;function Ir(){this.__data__=[],this.size=0}var On=Ir;function eo(e,r){return e===r||e!==e&&r!==r}var In=eo;function to(e,r){for(var t=e.length;t--;)if(In(e[t][0],r))return t;return-1}var Qt=to,$r=Array.prototype,Dn=$r.splice;function Mt(e){var r=this.__data__,t=Qt(r,e);if(t<0)return!1;var s=r.length-1;return t==s?r.pop():Dn.call(r,t,1),--this.size,!0}var or=Mt;function vr(e){var r=this.__data__,t=Qt(r,e);return t<0?void 0:r[t][1]}var fr=vr;function _r(e){return Qt(this.__data__,e)>-1}var re=_r;function Oe(e,r){var t=this.__data__,s=Qt(t,e);return s<0?(++this.size,t.push([e,r])):t[s][1]=r,this}var we=Oe;function Ne(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Ne.prototype.clear=On,Ne.prototype.delete=or,Ne.prototype.get=fr,Ne.prototype.has=re,Ne.prototype.set=we;var ht=Ne;function _t(){this.__data__=new ht,this.size=0}var Kt=_t;function Br(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}var Cn=Br;function Ln(e){return this.__data__.get(e)}var Hi=Ln;function No(e){return this.__data__.has(e)}var bu=No,ro=o(31),As=ro.a.Symbol,jr=As,fi=Object.prototype,Xi=fi.hasOwnProperty,Vo=fi.toString,$i=jr?jr.toStringTag:void 0;function ci(e){var r=Xi.call(e,$i),t=e[$i];try{e[$i]=void 0;var s=!0}catch{}var f=Vo.call(e);return s&&(r?e[$i]=t:delete e[$i]),f}var di=ci,wa=Object.prototype,Vl=wa.toString;function Na(e){return Vl.call(e)}var Ma=Na,Eu="[object Null]",Wt="[object Undefined]",Ou=jr?jr.toStringTag:void 0;function Wl(e){return e==null?e===void 0?Wt:Eu:Ou&&Ou in Object(e)?di(e):Ma(e)}var Mo=Wl;function Su(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var Kr=Su,no="[object AsyncFunction]",xu="[object Function]",Yl="[object GeneratorFunction]",Kl="[object Proxy]";function Zl(e){if(!Kr(e))return!1;var r=Mo(e);return r==xu||r==Yl||r==no||r==Kl}var Ra=Zl,Tu=ro.a["__core-js_shared__"],Wo=Tu,Ps=function(){var e=/[^.]+$/.exec(Wo&&Wo.keys&&Wo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _s(e){return!!Ps&&Ps in e}var Vi=_s,Au=Function.prototype,Ia=Au.toString;function Jl(e){if(e!=null){try{return Ia.call(e)}catch{}try{return e+""}catch{}}return""}var Zr=Jl,Pu=/[\\^$.*+?()[\]{}|]/g,Ql=/^\[object .+?Constructor\]$/,_u=Function.prototype,wu=Object.prototype,ql=_u.toString,Nu=wu.hasOwnProperty,ef=RegExp("^"+ql.call(Nu).replace(Pu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oo(e){if(!Kr(e)||Vi(e))return!1;var r=Ra(e)?ef:Ql;return r.test(Zr(e))}var un=oo;function Da(e,r){return e==null?void 0:e[r]}var tf=Da;function ws(e,r){var t=tf(e,r);return un(t)?t:void 0}var co=ws,Mu=co(ro.a,"Map"),hi=Mu,rf=co(Object,"create"),Yo=rf;function nf(){this.__data__=Yo?Yo(null):{},this.size=0}var Ns=nf;function Ru(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var of=Ru,Ms="__lodash_hash_undefined__",Iu=Object.prototype,Du=Iu.hasOwnProperty;function Cu(e){var r=this.__data__;if(Yo){var t=r[e];return t===Ms?void 0:t}return Du.call(r,e)?r[e]:void 0}var Ro=Cu,af=Object.prototype,Lu=af.hasOwnProperty;function Ca(e){var r=this.__data__;return Yo?r[e]!==void 0:Lu.call(r,e)}var La=Ca,Rs="__lodash_hash_undefined__";function ju(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Yo&&r===void 0?Rs:r,this}var sf=ju;function Io(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}Io.prototype.clear=Ns,Io.prototype.delete=of,Io.prototype.get=Ro,Io.prototype.has=La,Io.prototype.set=sf;var Do=Io;function Gn(){this.size=0,this.__data__={hash:new Do,map:new(hi||ht),string:new Do}}var ja=Gn;function Bu(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}var Is=Bu;function uf(e,r){var t=e.__data__;return Is(r)?t[typeof r=="string"?"string":"hash"]:t.map}var Ba=uf;function lf(e){var r=Ba(this,e).delete(e);return this.size-=r?1:0,r}var ff=lf;function pi(e){return Ba(this,e).get(e)}var Co=pi;function cf(e){return Ba(this,e).has(e)}var vi=cf;function df(e,r){var t=Ba(this,e),s=t.size;return t.set(e,r),this.size+=t.size==s?0:1,this}var ho=df;function po(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var s=e[r];this.set(s[0],s[1])}}po.prototype.clear=ja,po.prototype.delete=ff,po.prototype.get=Co,po.prototype.has=vi,po.prototype.set=ho;var Wi=po,yi=200;function Yi(e,r){var t=this.__data__;if(t instanceof ht){var s=t.__data__;if(!hi||s.length<yi-1)return s.push([e,r]),this.size=++t.size,this;t=this.__data__=new Wi(s)}return t.set(e,r),this.size=t.size,this}var xo=Yi;function Ko(e){var r=this.__data__=new ht(e);this.size=r.size}Ko.prototype.clear=Kt,Ko.prototype.delete=Cn,Ko.prototype.get=Hi,Ko.prototype.has=bu,Ko.prototype.set=xo;var $n=Ko,Vn="__lodash_hash_undefined__";function Ki(e){return this.__data__.set(e,Vn),this}var vo=Ki;function io(e){return this.__data__.has(e)}var gi=io;function jn(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Wi;++r<t;)this.add(e[r])}jn.prototype.add=jn.prototype.push=vo,jn.prototype.has=gi;var hf=jn;function Fu(e,r){for(var t=-1,s=e==null?0:e.length;++t<s;)if(r(e[t],t,e))return!0;return!1}var qr=Fu;function Ds(e,r){return e.has(r)}var To=Ds,yo=1,ao=2;function Zi(e,r,t,s,f,d){var v=t&yo,b=e.length,O=r.length;if(b!=O&&!(v&&O>b))return!1;var P=d.get(e),R=d.get(r);if(P&&R)return P==r&&R==e;var F=-1,Y=!0,ne=t&ao?new hf:void 0;for(d.set(e,r),d.set(r,e);++F<b;){var pe=e[F],Le=r[F];if(s)var De=v?s(Le,pe,F,r,e,d):s(pe,Le,F,e,r,d);if(De!==void 0){if(De)continue;Y=!1;break}if(ne){if(!qr(r,function(Fe,Tt){if(!To(ne,Tt)&&(pe===Fe||f(pe,Fe,t,s,d)))return ne.push(Tt)})){Y=!1;break}}else if(!(pe===Le||f(pe,Le,t,s,d))){Y=!1;break}}return d.delete(e),d.delete(r),Y}var Lo=Zi,Ji=ro.a.Uint8Array,dn=Ji;function mi(e){var r=-1,t=Array(e.size);return e.forEach(function(s,f){t[++r]=[f,s]}),t}var Fa=mi;function Cs(e){var r=-1,t=Array(e.size);return e.forEach(function(s){t[++r]=s}),t}var Bn=Cs,Ls=1,js=2,Gu="[object Boolean]",ku="[object Date]",pf="[object Error]",Ga="[object Map]",ka="[object Number]",Bs="[object RegExp]",kn="[object Set]",Nn="[object String]",Zo="[object Symbol]",Fs="[object ArrayBuffer]",Ua="[object DataView]",bi=jr?jr.prototype:void 0,Ei=bi?bi.valueOf:void 0;function Gs(e,r,t,s,f,d,v){switch(t){case Ua:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Fs:return!(e.byteLength!=r.byteLength||!d(new dn(e),new dn(r)));case Gu:case ku:case ka:return In(+e,+r);case pf:return e.name==r.name&&e.message==r.message;case Bs:case Nn:return e==r+"";case Ga:var b=Fa;case kn:var O=s&Ls;if(b||(b=Bn),e.size!=r.size&&!O)return!1;var P=v.get(e);if(P)return P==r;s|=js,v.set(e,r);var R=Lo(b(e),b(r),s,f,d,v);return v.delete(e),R;case Zo:if(Ei)return Ei.call(e)==Ei.call(r)}return!1}var Uu=Gs;function Qi(e,r){for(var t=-1,s=r.length,f=e.length;++t<s;)e[f+t]=r[t];return e}var za=Qi,ks=Array.isArray,g=ks;function E(e,r,t){var s=r(e);return g(e)?s:za(s,t(e))}var A=E;function B(e,r){for(var t=-1,s=e==null?0:e.length,f=0,d=[];++t<s;){var v=e[t];r(v,t,e)&&(d[f++]=v)}return d}var J=B;function he(){return[]}var Xe=he,Et=Object.prototype,Yt=Et.propertyIsEnumerable,Tr=Object.getOwnPropertySymbols,wr=Tr?function(e){return e==null?[]:(e=Object(e),J(Tr(e),function(r){return Yt.call(e,r)}))}:Xe,Ur=wr;function Hr(e,r){for(var t=-1,s=Array(e);++t<e;)s[t]=r(t);return s}var nn=Hr;function Sn(e){return e!=null&&typeof e=="object"}var Vr=Sn,Wn="[object Arguments]";function Jo(e){return Vr(e)&&Mo(e)==Wn}var Ha=Jo,zu=Object.prototype,qi=zu.hasOwnProperty,Hu=zu.propertyIsEnumerable,Us=Ha(function(){return arguments}())?Ha:function(e){return Vr(e)&&qi.call(e,"callee")&&!Hu.call(e,"callee")},Oi=Us,Qo=o(48),ty=9007199254740991,ry=/^(?:0|[1-9]\d*)$/;function ny(e,r){var t=typeof e;return r=r??ty,!!r&&(t=="number"||t!="symbol"&&ry.test(e))&&e>-1&&e%1==0&&e<r}var zs=ny,Hs=9007199254740991;function oy(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hs}var Xa=oy,go="[object Arguments]",$a="[object Array]",$c="[object Boolean]",Vc="[object Date]",Wc="[object Error]",Yc="[object Function]",Kc="[object Map]",Zc="[object Number]",iy="[object Object]",Va="[object RegExp]",xn="[object Set]",Jc="[object String]",Qc="[object WeakMap]",ea="[object ArrayBuffer]",qc="[object DataView]",ed="[object Float32Array]",ay="[object Float64Array]",sy="[object Int8Array]",uy="[object Int16Array]",ly="[object Int32Array]",vf="[object Uint8Array]",td="[object Uint8ClampedArray]",fy="[object Uint16Array]",rd="[object Uint32Array]",Jr={};Jr[ed]=Jr[ay]=Jr[sy]=Jr[uy]=Jr[ly]=Jr[vf]=Jr[td]=Jr[fy]=Jr[rd]=!0,Jr[go]=Jr[$a]=Jr[ea]=Jr[$c]=Jr[qc]=Jr[Vc]=Jr[Wc]=Jr[Yc]=Jr[Kc]=Jr[Zc]=Jr[iy]=Jr[Va]=Jr[xn]=Jr[Jc]=Jr[Qc]=!1;function cy(e){return Vr(e)&&Xa(e.length)&&!!Jr[Mo(e)]}var Xu=cy;function dy(e){return function(r){return e(r)}}var jo=dy,qo=o(49),yf=qo.a&&qo.a.isTypedArray,nd=yf?jo(yf):Xu,$u=nd,od=Object.prototype,id=od.hasOwnProperty;function ad(e,r){var t=g(e),s=!t&&Oi(e),f=!t&&!s&&Object(Qo.a)(e),d=!t&&!s&&!f&&$u(e),v=t||s||f||d,b=v?nn(e.length,String):[],O=b.length;for(var P in e)(r||id.call(e,P))&&!(v&&(P=="length"||f&&(P=="offset"||P=="parent")||d&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||zs(P,O)))&&b.push(P);return b}var gf=ad,sd=Object.prototype;function ud(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||sd;return e===t}var Yn=ud;function ld(e,r){return function(t){return e(r(t))}}var fd=ld,ei=fd(Object.keys,Object),mf=ei,ta=Object.prototype,Vu=ta.hasOwnProperty;function cd(e){if(!Yn(e))return mf(e);var r=[];for(var t in Object(e))Vu.call(e,t)&&t!="constructor"&&r.push(t);return r}var dd=cd;function hd(e){return e!=null&&Xa(e.length)&&!Ra(e)}var Si=hd;function pd(e){return Si(e)?gf(e):dd(e)}var Wa=pd;function hy(e){return A(e,Wa,Ur)}var bf=hy,py=1,vy=Object.prototype,yy=vy.hasOwnProperty;function gy(e,r,t,s,f,d){var v=t&py,b=bf(e),O=b.length,P=bf(r),R=P.length;if(O!=R&&!v)return!1;for(var F=O;F--;){var Y=b[F];if(!(v?Y in r:yy.call(r,Y)))return!1}var ne=d.get(e),pe=d.get(r);if(ne&&pe)return ne==r&&pe==e;var Le=!0;d.set(e,r),d.set(r,e);for(var De=v;++F<O;){Y=b[F];var Fe=e[Y],Tt=r[Y];if(s)var It=v?s(Tt,Fe,Y,r,e,d):s(Fe,Tt,Y,e,r,d);if(!(It===void 0?Fe===Tt||f(Fe,Tt,t,s,d):It)){Le=!1;break}De||(De=Y=="constructor")}if(Le&&!De){var ut=e.constructor,Ft=r.constructor;ut!=Ft&&"constructor"in e&&"constructor"in r&&!(typeof ut=="function"&&ut instanceof ut&&typeof Ft=="function"&&Ft instanceof Ft)&&(Le=!1)}return d.delete(e),d.delete(r),Le}var vd=gy,yd=co(ro.a,"DataView"),Ef=yd,my=co(ro.a,"Promise"),Xs=my,Wu=co(ro.a,"Set"),Of=Wu,by=co(ro.a,"WeakMap"),Sf=by,gd="[object Map]",Ey="[object Object]",xf="[object Promise]",md="[object Set]",bd="[object WeakMap]",Ed="[object DataView]",Oy=Zr(Ef),Sy=Zr(hi),Ya=Zr(Xs),xy=Zr(Of),Ty=Zr(Sf),xi=Mo;(Ef&&xi(new Ef(new ArrayBuffer(1)))!=Ed||hi&&xi(new hi)!=gd||Xs&&xi(Xs.resolve())!=xf||Of&&xi(new Of)!=md||Sf&&xi(new Sf)!=bd)&&(xi=function(e){var r=Mo(e),t=r==Ey?e.constructor:void 0,s=t?Zr(t):"";if(s)switch(s){case Oy:return Ed;case Sy:return gd;case Ya:return xf;case xy:return md;case Ty:return bd}return r});var ra=xi,Ay=1,Tf="[object Arguments]",Od="[object Array]",Yu="[object Object]",Py=Object.prototype,Sd=Py.hasOwnProperty;function _y(e,r,t,s,f,d){var v=g(e),b=g(r),O=v?Od:ra(e),P=b?Od:ra(r);O=O==Tf?Yu:O,P=P==Tf?Yu:P;var R=O==Yu,F=P==Yu,Y=O==P;if(Y&&Object(Qo.a)(e)){if(!Object(Qo.a)(r))return!1;v=!0,R=!1}if(Y&&!R)return d||(d=new $n),v||$u(e)?Lo(e,r,t,s,f,d):Uu(e,r,O,t,s,f,d);if(!(t&Ay)){var ne=R&&Sd.call(e,"__wrapped__"),pe=F&&Sd.call(r,"__wrapped__");if(ne||pe){var Le=ne?e.value():e,De=pe?r.value():r;return d||(d=new $n),f(Le,De,t,s,d)}}return Y?(d||(d=new $n),vd(e,r,t,s,f,d)):!1}var $s=_y;function xd(e,r,t,s,f){return e===r?!0:e==null||r==null||!Vr(e)&&!Vr(r)?e!==e&&r!==r:$s(e,r,t,s,xd,f)}var Ka=xd,wy=1,Za=2;function Ja(e,r,t,s){var f=t.length,d=f,v=!s;if(e==null)return!d;for(e=Object(e);f--;){var b=t[f];if(v&&b[2]?b[1]!==e[b[0]]:!(b[0]in e))return!1}for(;++f<d;){b=t[f];var O=b[0],P=e[O],R=b[1];if(v&&b[2]){if(P===void 0&&!(O in e))return!1}else{var F=new $n;if(s)var Y=s(P,R,O,e,r,F);if(!(Y===void 0?Ka(R,P,wy|Za,s,F):Y))return!1}}return!0}var Ny=Ja;function Qa(e){return e===e&&!Kr(e)}var Af=Qa;function qa(e){for(var r=Wa(e),t=r.length;t--;){var s=r[t],f=e[s];r[t]=[s,f,Af(f)]}return r}var Pf=qa;function _f(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}var Ku=_f;function wf(e){var r=Pf(e);return r.length==1&&r[0][2]?Ku(r[0][0],r[0][1]):function(t){return t===e||Ny(t,e,r)}}var Nf=wf,Zu="[object Symbol]";function Td(e){return typeof e=="symbol"||Vr(e)&&Mo(e)==Zu}var Vs=Td,Ad=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pd=/^\w*$/;function _d(e,r){if(g(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||Vs(e)?!0:Pd.test(e)||!Ad.test(e)||r!=null&&e in Object(r)}var Ws=_d,Mf="Expected a function";function Ju(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Mf);var t=function(){var s=arguments,f=r?r.apply(this,s):s[0],d=t.cache;if(d.has(f))return d.get(f);var v=e.apply(this,s);return t.cache=d.set(f,v)||d,v};return t.cache=new(Ju.Cache||Wi),t}Ju.Cache=Wi;var wd=Ju,Nd=500;function Md(e){var r=wd(e,function(s){return t.size===Nd&&t.clear(),s}),t=r.cache;return r}var Rf=Md,Rd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Id=/\\(\\)?/g,If=Rf(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Rd,function(t,s,f,d){r.push(f?d.replace(Id,"$1"):s||t)}),r}),Df=If,Dd=1/0,Qu=jr?jr.prototype:void 0,Cf=Qu?Qu.toString:void 0;function Lf(e){if(typeof e=="string")return e;if(g(e))return zr(e,Lf)+"";if(Vs(e))return Cf?Cf.call(e):"";var r=e+"";return r=="0"&&1/e==-Dd?"-0":r}var jf=Lf;function Cd(e){return e==null?"":jf(e)}var Ld=Cd;function Bf(e,r){return g(e)?e:Ws(e,r)?[e]:Df(Ld(e))}var es=Bf,Ys=1/0;function jd(e){if(typeof e=="string"||Vs(e))return e;var r=e+"";return r=="0"&&1/e==-Ys?"-0":r}var Ti=jd;function ti(e,r){r=es(r,e);for(var t=0,s=r.length;e!=null&&t<s;)e=e[Ti(r[t++])];return t&&t==s?e:void 0}var na=ti;function oa(e,r,t){var s=e==null?void 0:na(e,r);return s===void 0?t:s}var ts=oa;function Ks(e,r){return e!=null&&r in Object(e)}var ia=Ks;function aa(e,r,t){r=es(r,e);for(var s=-1,f=r.length,d=!1;++s<f;){var v=Ti(r[s]);if(!(d=e!=null&&t(e,v)))break;e=e[v]}return d||++s!=f?d:(f=e==null?0:e.length,!!f&&Xa(f)&&zs(v,f)&&(g(e)||Oi(e)))}var sa=aa;function qu(e,r){return e!=null&&sa(e,r,ia)}var Zs=qu,Js=1,Ff=2;function Gf(e,r){return Ws(e)&&Af(r)?Ku(Ti(e),r):function(t){var s=ts(t,e);return s===void 0&&s===r?Zs(t,e):Ka(r,s,Js|Ff)}}var rs=Gf;function ns(e){return e}var kf=ns;function My(e){return function(r){return r==null?void 0:r[e]}}var Bd=My;function Fd(e){return function(r){return na(r,e)}}var Gd=Fd;function Ry(e){return Ws(e)?Bd(Ti(e)):Gd(e)}var os=Ry;function Iy(e){return typeof e=="function"?e:e==null?kf:typeof e=="object"?g(e)?rs(e[0],e[1]):Nf(e):os(e)}var Dy=Iy;function Cy(e){return function(r,t,s){for(var f=-1,d=Object(r),v=s(r),b=v.length;b--;){var O=v[e?b:++f];if(t(d[O],O,d)===!1)break}return r}}var kd=Cy,Ly=kd(),Ud=Ly;function jy(e,r){return e&&Ud(e,r,Wa)}var By=jy;function Fy(e,r){return function(t,s){if(t==null)return t;if(!Si(t))return e(t,s);for(var f=t.length,d=r?f:-1,v=Object(t);(r?d--:++d<f)&&s(v[d],d,v)!==!1;);return t}}var Gy=Fy,ky=Gy(By),Uy=ky;function zy(e,r){var t=-1,s=Si(e)?Array(e.length):[];return Uy(e,function(f,d,v){s[++t]=r(f,d,v)}),s}var Hy=zy;function Uf(e,r){var t=g(e)?zr:Hy;return t(e,Dy(r))}var ua=Uf,el=function(){try{var e=co(Object,"defineProperty");return e({},"",{}),e}catch{}}(),la=el;function zf(e,r,t){r=="__proto__"&&la?la(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}var is=zf,tl=Object.prototype,rl=tl.hasOwnProperty;function Hf(e,r,t){var s=e[r];(!(rl.call(e,r)&&In(s,t))||t===void 0&&!(r in e))&&is(e,r,t)}var fa=Hf;function nl(e,r,t,s){var f=!t;t||(t={});for(var d=-1,v=r.length;++d<v;){var b=r[d],O=s?s(t[b],e[b],b,t,e):void 0;O===void 0&&(O=e[b]),f?is(t,b,O):fa(t,b,O)}return t}var ri=nl;function Qs(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var qs=Qs,as=Math.max;function eu(e,r,t){return r=as(r===void 0?e.length-1:r,0),function(){for(var s=arguments,f=-1,d=as(s.length-r,0),v=Array(d);++f<d;)v[f]=s[r+f];f=-1;for(var b=Array(r+1);++f<r;)b[f]=s[f];return b[r]=t(v),qs(e,this,b)}}var ss=eu;function zd(e){return function(){return e}}var tu=zd,ca=la?function(e,r){return la(e,"toString",{configurable:!0,enumerable:!1,value:tu(r),writable:!0})}:kf,Hd=ca,Xf=800,Xy=16,$y=Date.now;function Vy(e){var r=0,t=0;return function(){var s=$y(),f=Xy-(s-t);if(t=s,f>0){if(++r>=Xf)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}var Ai=Vy,Xd=Ai(Hd),$f=Xd;function $d(e,r){return $f(ss(e,r,kf),e+"")}var Wy=$d;function Vd(e,r,t){if(!Kr(t))return!1;var s=typeof r;return(s=="number"?Si(t)&&zs(r,t.length):s=="string"&&r in t)?In(t[r],e):!1}var Yy=Vd;function Bo(e){return Wy(function(r,t){var s=-1,f=t.length,d=f>1?t[f-1]:void 0,v=f>2?t[2]:void 0;for(d=e.length>3&&typeof d=="function"?(f--,d):void 0,v&&Yy(t[0],t[1],v)&&(d=f<3?void 0:d,f=1),r=Object(r);++s<f;){var b=t[s];b&&e(r,b,s,d)}return r})}var Vf=Bo,us=Object.prototype,Pi=us.hasOwnProperty,Wd=Vf(function(e,r){if(Yn(r)||Si(r)){ri(r,Wa(r),e);return}for(var t in r)Pi.call(r,t)&&fa(e,t,r[t])}),Mn=Wd;function ol(e,r,t,s){if(!Kr(e))return e;r=es(r,e);for(var f=-1,d=r.length,v=d-1,b=e;b!=null&&++f<d;){var O=Ti(r[f]),P=t;if(O==="__proto__"||O==="constructor"||O==="prototype")return e;if(f!=v){var R=b[O];P=s?s(R,O,b):void 0,P===void 0&&(P=Kr(R)?R:zs(r[f+1])?[]:{})}fa(b,O,P),b=b[O]}return e}var Yd=ol;function Un(e,r,t){for(var s=-1,f=r.length,d={};++s<f;){var v=r[s],b=na(e,v);t(b,v)&&Yd(d,es(v,e),b)}return d}var _i=Un;function ln(e,r){return _i(e,r,function(t,s){return Zs(e,s)})}var Kn=ln,Wf=jr?jr.isConcatSpreadable:void 0;function Ky(e){return g(e)||Oi(e)||!!(Wf&&e&&e[Wf])}var Zy=Ky;function Kd(e,r,t,s,f){var d=-1,v=e.length;for(t||(t=Zy),f||(f=[]);++d<v;){var b=e[d];r>0&&t(b)?r>1?Kd(b,r-1,t,s,f):za(f,b):s||(f[f.length]=b)}return f}var Jy=Kd;function Zd(e){var r=e==null?0:e.length;return r?Jy(e,1):[]}var Qy=Zd;function qy(e){return $f(ss(e,void 0,Qy),e+"")}var eg=qy,tg=eg(function(e,r){return e==null?{}:Kn(e,r)}),ru=tg,on,Yf,Kf,Jd,Qd,Zf,qd,_,G,q,Ce,Je,Ie,ke,at,lt,vt,ft;function it(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function St(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function st(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Ot(e,r,t){return r&&st(e.prototype,r),t&&st(e,t),e}function be(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Me(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var yt={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},xt=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],nt=(on=function(){function e(r){St(this,e),it(this,"isSilentMode",Yf,this),it(this,"stopZoomGraph",Kf,this),it(this,"stopScrollGraph",Jd,this),it(this,"stopMoveGraph",Qd,this),it(this,"adjustEdge",Zf,this),it(this,"adjustEdgeMiddle",qd,this),it(this,"adjustEdgeStartAndEnd",_,this),it(this,"adjustNodePosition",G,this),it(this,"hideAnchors",q,this),it(this,"hoverOutline",Ce,this),it(this,"nodeSelectedOutline",Je,this),it(this,"edgeSelectedOutline",Ie,this),it(this,"nodeTextEdit",ke,this),it(this,"edgeTextEdit",at,this),it(this,"nodeTextDraggable",lt,this),it(this,"edgeTextDraggable",vt,this),it(this,"autoExpand",ft,this),be(this,"multipleSelectKey",""),be(this,"defaultConfig",{}),Mn(this,this.getConfigDetail(r))}return Ot(e,[{key:"updateEditConfig",value:function(t){var s=this.getConfigDetail(t);Mn(this,s)}},{key:"getConfigDetail",value:function(t){var s=t.isSilentMode,f=t.textEdit,d={};if(s===!1&&Mn(d,this.defaultConfig),s===!0){var v=ru(yt,xt);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Mn(d,v)}f===!1&&Mn(d,{nodeTextEdit:!1,edgeTextEdit:!1});var b=ru(t,xt);return Mn(d,b)}},{key:"getConfig",value:function(){return ru(this,xt)}}]),e}(),Yf=Me(on.prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Me(on.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jd=Me(on.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qd=Me(on.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=Me(on.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qd=Me(on.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=Me(on.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=Me(on.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),q=Me(on.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ce=Me(on.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Je=Me(on.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ie=Me(on.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ke=Me(on.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),at=Me(on.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),lt=Me(on.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Me(on.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ft=Me(on.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me(on.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor(on.prototype,"updateEditConfig"),on.prototype),on);o(63);var ct;(function(e){e[e.DEFAULT=1]="DEFAULT",e[e.TEXT_EDIT=2]="TEXT_EDIT",e[e.SHOW_MENU=3]="SHOW_MENU",e[e.ALLOW_CONNECT=4]="ALLOW_CONNECT",e[e.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"})(ct||(ct={}));var ot;(function(e){e.KEY="logic-flow",e.NODE_NAME="lf-node",e.EDGE_NAME="lf-edge"})(ot||(ot={}));var Ze;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.HTML_NODE="html-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(Ze||(Ze={}));var Ve;(function(e){e.NODE="node",e.EDGE="edge",e.GRAPH="graph"})(Ve||(Ve={}));var ze;(function(e){e.ELEMENT_CLICK="element:click",e.NODE_CLICK="node:click",e.NODE_DBCLICK="node:dbclick",e.NODE_DELETE="node:delete",e.NODE_ADD="node:add",e.NODE_DND_ADD="node:dnd-add",e.NODE_DND_DRAG="node:dnd-drag",e.NODE_MOUSEDOWN="node:mousedown",e.NODE_DRAGSTART="node:dragstart",e.NODE_DRAG="node:drag",e.NODE_DROP="node:drop",e.NODE_MOUSEUP="node:mouseup",e.NODE_MOUSEMOVE="node:mousemove",e.NODE_MOUSEENTER="node:mouseenter",e.NODE_MOUSELEAVE="node:mouseleave",e.NODE_CONTEXTMENU="node:contextmenu",e.EDGE_DELETE="edge:delete",e.EDGE_ADD="edge:add",e.EDGE_CLICK="edge:click",e.EDGE_DBCLICK="edge:dbclick",e.EDGE_MOUSEENTER="edge:mouseenter",e.EDGE_MOUSELEAVE="edge:mouseleave",e.EDGE_CONTEXTMENU="edge:contextmenu",e.EDGE_ADJUST="edge:adjust",e.EDGE_EXCHANGE_NODE="edge:exchange-node",e.ANCHOR_DRAGSTART="anchor:dragstart",e.ANCHOR_DRAG="anchor:drag",e.ANCHOR_DROP="anchor:drop",e.ANCHOR_DRAGEND="anchor:dragend",e.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",e.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",e.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",e.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",e.ADJUST_POINT_DRAG="adjustPoint:drag",e.ADJUST_POINT_DROP="adjustPoint:drop",e.ADJUST_POINT_DRAGEND="adjustPoint:dragend",e.BLANK_MOUSEDOWN="blank:mousedown",e.BLANK_DRAGSTART="blank:dragstart",e.BLANK_DRAG="blank:drag",e.BLANK_DROP="blank:drop",e.BLANK_MOUSEMOVE="blank:mousemove",e.BLANK_MOUSEUP="blank:mouseup",e.BLANK_CLICK="blank:click",e.BLANK_CONTEXTMENU="blank:contextmenu",e.SELECTION_MOUSEDOWN="selection:mousedown",e.SELECTION_DRAGSTART="selection:dragstart",e.SELECTION_DRAG="selection:drag",e.SELECTION_DROP="selection:drop",e.SELECTION_MOUSEMOVE="selection:mousemove",e.SELECTION_MOUSEUP="selection:mouseup",e.SELECTION_CONTEXTMENU="selection:contextmenu",e.CONNECTION_NOT_ALLOWED="connection:not-allowed",e.HISTORY_CHANGE="history:change",e.TEXT_UPDATE="text:update",e.GRAPH_TRANSFORM="graph:transform",e.GRAPH_RENDERED="graph:rendered"})(ze||(ze={}));var At;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(At||(At={}));var ir=9999,mt;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.INCREASE=1]="INCREASE"})(mt||(mt={}));var et,qe,rr,cr,Gt,mr,ar,yr;function Ar(e,r){return Wr(e)||hn(e,r)||vn(e,r)||fn()}function fn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vn(e,r){if(e){if(typeof e=="string")return Or(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Or(e,r)}}function Or(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function hn(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function Wr(e){if(Array.isArray(e))return e}function Yr(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function pn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cn(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bn(e,r,t){return r&&cn(e.prototype,r),t&&cn(e,t),e}function yn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Fr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var dr=(et=function(){function e(r){pn(this,e),yn(this,"MINI_SCALE_SIZE",.2),yn(this,"MAX_SCALE_SIZE",16),Yr(this,"SCALE_X",qe,this),Yr(this,"SKEW_Y",rr,this),Yr(this,"SKEW_X",cr,this),Yr(this,"SCALE_Y",Gt,this),Yr(this,"TRANSLATE_X",mr,this),Yr(this,"TRANSLATE_Y",ar,this),Yr(this,"ZOOM_SIZE",yr,this),yn(this,"eventCenter",void 0),this.eventCenter=r}return bn(e,[{key:"setZoomMiniSize",value:function(t){this.MINI_SCALE_SIZE=t}},{key:"setZoomMaxSize",value:function(t){this.MAX_SCALE_SIZE=t}},{key:"HtmlPointToCanvasPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(d-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(t){var s=Ar(t,2),f=s[0],d=s[1];return[f*this.SCALE_X+this.TRANSLATE_X,d*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(t,s,f){var d=Ar(t,2),v=d[0],b=d[1];return[v+s/this.SCALE_X,b+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(t,s){return[t/this.SCALE_X,s/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var t=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(t,")")}}},{key:"zoom",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,s=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,d=this.SCALE_Y;return t===!0?(f+=this.ZOOM_SIZE,d+=this.ZOOM_SIZE):t===!1?(f-=this.ZOOM_SIZE,d-=this.ZOOM_SIZE):typeof t=="number"&&(f=t,d=t),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE?"".concat(this.SCALE_X*100,"%"):(s&&(this.TRANSLATE_X-=(f-this.SCALE_X)*s[0],this.TRANSLATE_Y-=(d-this.SCALE_Y)*s[1]),this.SCALE_X=f,this.SCALE_Y=d,this.emitGraphTransform("zoom"),"".concat(this.SCALE_X*100,"%"))}},{key:"emitGraphTransform",value:function(t){this.eventCenter.emit(ze.GRAPH_TRANSFORM,{type:t,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(t,s){this.TRANSLATE_X+=t,this.TRANSLATE_Y+=s,this.emitGraphTransform("translate")}},{key:"focusOn",value:function(t,s,f,d){var v=this.CanvasPointToHtmlPoint([t,s]),b=Ar(v,2),O=b[0],P=b[1],R=f/2-O,F=d/2-P;this.TRANSLATE_X+=R,this.TRANSLATE_Y+=F,this.emitGraphTransform("focusOn")}}]),e}(),qe=Fr(et.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rr=Fr(et.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cr=Fr(et.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gt=Fr(et.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),mr=Fr(et.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ar=Fr(et.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yr=Fr(et.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),Fr(et.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"zoom"),et.prototype),Fr(et.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"resetZoom"),et.prototype),Fr(et.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"translate"),et.prototype),Fr(et.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(et.prototype,"focusOn"),et.prototype),et);function Tn(e,r){for(var t=-1,s=e==null?0:e.length;++t<s&&r(e[t],t,e)!==!1;);return e}var Dr=Tn;function qt(e,r){return e&&ri(r,Wa(r),e)}var Sr=qt;function Pr(e){var r=[];if(e!=null)for(var t in Object(e))r.push(t);return r}var an=Pr,Fo=Object.prototype,da=Fo.hasOwnProperty;function K(e){if(!Kr(e))return an(e);var r=Yn(e),t=[];for(var s in e)s=="constructor"&&(r||!da.call(e,s))||t.push(s);return t}var je=K;function Pe(e){return Si(e)?gf(e,!0):je(e)}var Rt=Pe;function br(e,r){return e&&ri(r,Rt(r),e)}var H=br,C=o(106);function ie(e,r){var t=-1,s=e.length;for(r||(r=Array(s));++t<s;)r[t]=e[t];return r}var ve=ie;function Se(e,r){return ri(e,Ur(e),r)}var ue=Se,ae=fd(Object.getPrototypeOf,Object),fe=ae,X=Object.getOwnPropertySymbols,oe=X?function(e){for(var r=[];e;)za(r,Ur(e)),e=fe(e);return r}:Xe,z=oe;function de(e,r){return ri(e,z(e),r)}var Te=de;function Ye(e){return A(e,Rt,z)}var Qe=Ye,$e=Object.prototype,pt=$e.hasOwnProperty;function Ht(e){var r=e.length,t=new e.constructor(r);return r&&typeof e[0]=="string"&&pt.call(e,"index")&&(t.index=e.index,t.input=e.input),t}var hr=Ht;function kt(e){var r=new e.constructor(e.byteLength);return new dn(r).set(new dn(e)),r}var Zt=kt;function lr(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}var Nr=lr,en=/\w*$/;function zn(e){var r=new e.constructor(e.source,en.exec(e));return r.lastIndex=e.lastIndex,r}var Jf=zn,so=jr?jr.prototype:void 0,Qf=so?so.valueOf:void 0;function Ao(e){return Qf?Object(Qf.call(e)):{}}var eh=Ao;function H_(e,r){var t=r?Zt(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}var sE=H_,X_="[object Boolean]",$_="[object Date]",V_="[object Map]",W_="[object Number]",Y_="[object RegExp]",K_="[object Set]",Z_="[object String]",J_="[object Symbol]",Q_="[object ArrayBuffer]",q_="[object DataView]",ew="[object Float32Array]",tw="[object Float64Array]",rw="[object Int8Array]",nw="[object Int16Array]",ow="[object Int32Array]",iw="[object Uint8Array]",aw="[object Uint8ClampedArray]",sw="[object Uint16Array]",uw="[object Uint32Array]";function lw(e,r,t){var s=e.constructor;switch(r){case Q_:return Zt(e);case X_:case $_:return new s(+e);case q_:return Nr(e,t);case ew:case tw:case rw:case nw:case ow:case iw:case aw:case sw:case uw:return sE(e,t);case V_:return new s;case W_:case Z_:return new s(e);case Y_:return Jf(e);case K_:return new s;case J_:return eh(e)}}var fw=lw,uE=Object.create,cw=function(){function e(){}return function(r){if(!Kr(r))return{};if(uE)return uE(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}(),dw=cw;function hw(e){return typeof e.constructor=="function"&&!Yn(e)?dw(fe(e)):{}}var lE=hw,pw="[object Map]";function vw(e){return Vr(e)&&ra(e)==pw}var yw=vw,fE=qo.a&&qo.a.isMap,gw=fE?jo(fE):yw,mw=gw,bw="[object Set]";function Ew(e){return Vr(e)&&ra(e)==bw}var Ow=Ew,cE=qo.a&&qo.a.isSet,Sw=cE?jo(cE):Ow,xw=Sw,Tw=1,Aw=2,Pw=4,dE="[object Arguments]",_w="[object Array]",ww="[object Boolean]",Nw="[object Date]",Mw="[object Error]",hE="[object Function]",Rw="[object GeneratorFunction]",Iw="[object Map]",Dw="[object Number]",pE="[object Object]",Cw="[object RegExp]",Lw="[object Set]",jw="[object String]",Bw="[object Symbol]",Fw="[object WeakMap]",Gw="[object ArrayBuffer]",kw="[object DataView]",Uw="[object Float32Array]",zw="[object Float64Array]",Hw="[object Int8Array]",Xw="[object Int16Array]",$w="[object Int32Array]",Vw="[object Uint8Array]",Ww="[object Uint8ClampedArray]",Yw="[object Uint16Array]",Kw="[object Uint32Array]",tn={};tn[dE]=tn[_w]=tn[Gw]=tn[kw]=tn[ww]=tn[Nw]=tn[Uw]=tn[zw]=tn[Hw]=tn[Xw]=tn[$w]=tn[Iw]=tn[Dw]=tn[pE]=tn[Cw]=tn[Lw]=tn[jw]=tn[Bw]=tn[Vw]=tn[Ww]=tn[Yw]=tn[Kw]=!0,tn[Mw]=tn[hE]=tn[Fw]=!1;function th(e,r,t,s,f,d){var v,b=r&Tw,O=r&Aw,P=r&Pw;if(t&&(v=f?t(e,s,f,d):t(e)),v!==void 0)return v;if(!Kr(e))return e;var R=g(e);if(R){if(v=hr(e),!b)return ve(e,v)}else{var F=ra(e),Y=F==hE||F==Rw;if(Object(Qo.a)(e))return Object(C.a)(e,b);if(F==pE||F==dE||Y&&!f){if(v=O||Y?{}:lE(e),!b)return O?Te(e,H(v,e)):ue(e,Sr(v,e))}else{if(!tn[F])return f?e:{};v=fw(e,F,b)}}d||(d=new $n);var ne=d.get(e);if(ne)return ne;d.set(e,v),xw(e)?e.forEach(function(De){v.add(th(De,r,t,De,e,d))}):mw(e)&&e.forEach(function(De,Fe){v.set(Fe,th(De,r,t,Fe,e,d))});var pe=P?O?Qe:bf:O?Rt:Wa,Le=R?void 0:pe(e);return Dr(Le||e,function(De,Fe){Le&&(Fe=De,De=e[Fe]),fa(v,Fe,th(De,r,t,Fe,e,d))}),v}var Zw=th,Jw=1,Qw=4;function qw(e){return Zw(e,Jw|Qw)}var gn=qw;function e1(e,r,t){(t!==void 0&&!In(e[r],t)||t===void 0&&!(r in e))&&is(e,r,t)}var rg=e1;function t1(e){return Vr(e)&&Si(e)}var r1=t1,n1="[object Object]",o1=Function.prototype,i1=Object.prototype,vE=o1.toString,a1=i1.hasOwnProperty,s1=vE.call(Object);function u1(e){if(!Vr(e)||Mo(e)!=n1)return!1;var r=fe(e);if(r===null)return!0;var t=a1.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&vE.call(t)==s1}var l1=u1;function f1(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}var ng=f1;function c1(e){return ri(e,Rt(e))}var d1=c1;function h1(e,r,t,s,f,d,v){var b=ng(e,t),O=ng(r,t),P=v.get(O);if(P){rg(e,t,P);return}var R=d?d(b,O,t+"",e,r,v):void 0,F=R===void 0;if(F){var Y=g(O),ne=!Y&&Object(Qo.a)(O),pe=!Y&&!ne&&$u(O);R=O,Y||ne||pe?g(b)?R=b:r1(b)?R=ve(b):ne?(F=!1,R=Object(C.a)(O,!0)):pe?(F=!1,R=sE(O,!0)):R=[]:l1(O)||Oi(O)?(R=b,Oi(b)?R=d1(b):(!Kr(b)||Ra(b))&&(R=lE(O))):F=!1}F&&(v.set(O,R),f(R,O,s,d,v),v.delete(O)),rg(e,t,R)}var p1=h1;function yE(e,r,t,s,f){e!==r&&Ud(r,function(d,v){if(f||(f=new $n),Kr(d))p1(e,r,v,t,yE,s,f);else{var b=s?s(ng(e,v),d,v+"",e,r,f):void 0;b===void 0&&(b=d),rg(e,v,b)}},Rt)}var v1=yE,y1=Vf(function(e,r,t){v1(e,r,t)}),gE=y1,g1={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"}},mE=function(r){var t=gn(g1);return r&&(t=gE(t,r)),t};o(78),o(158);function m1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function bE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function b1(e,r,t){return r&&bE(e.prototype,r),t&&bE(e,t),e}function E1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var O1="*",S1=function(){function e(){m1(this,e),E1(this,"_events",{})}return b1(e,[{key:"on",value:function(t,s,f){var d=this;return t==null||t.split(",").forEach(function(v){v=v.trim(),d._events[v]||(d._events[v]=[]),d._events[v].push({callback:s,once:!!f})}),this}},{key:"once",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){return d=d.trim(),f.on(d,s,!0)})}},{key:"emit",value:function(t,s){var f=this;t==null||t.split(",").forEach(function(d){var v=f._events[d]||[],b=f._events[O1]||[],O=function(R){for(var F=R.length,Y=0;Y<F;Y++)if(R[Y]){var ne=R[Y],pe=ne.callback,Le=ne.once;Le&&(R.splice(Y,1),R.length===0&&delete f._events[d],F--,Y--),pe.apply(f,[s])}};O(v),O(b)})}},{key:"off",value:function(t,s){var f=this;return t||(this._events={}),t.split(",").forEach(function(d){if(!s)delete f._events[d];else{for(var v=f._events[d]||[],b=v.length,O=0;O<b;O++)v[O].callback===s&&(v.splice(O,1),b--,O--);v.length===0&&delete f._events[d]}}),this}},{key:"getEvents",value:function(){return this._events}}]),e}();function ls(e,r){return r*Math.round(e/r)||e}function EE(e,r){return e%r}function og(e,r){return P1(e)||A1(e,r)||T1(e,r)||x1()}function x1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T1(e,r){if(e){if(typeof e=="string")return OE(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OE(e,r)}}function OE(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function A1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function P1(e){if(Array.isArray(e))return e}var ig=function(r,t,s){var f=og(r,2),d=f[0],v=f[1],b=og(t,2),O=b[0],P=b[1],R=og(s,2),F=R[0],Y=R[1];return d>O&&d<F&&v>P&&v<Y},SE=function(r,t){var s=t.multipleSelectKey,f=!1;switch(s){case"meta":f=r.metaKey;break;case"alt":f=r.altKey;break;case"shift":f=r.shiftKey;break;case"ctrl":f=r.ctrlKey;break;default:f=!1;break}return f};o(79),o(161),o(125),o(80),o(30),o(12),o(13),o(14),o(47);var rh,_1=new Uint8Array(16);function w1(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(_1)}var N1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function M1(e){return typeof e=="string"&&N1.test(e)}for(var R1=M1,Hn=[],ag=0;ag<256;++ag)Hn.push((ag+256).toString(16).substr(1));function I1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Hn[e[r+0]]+Hn[e[r+1]]+Hn[e[r+2]]+Hn[e[r+3]]+"-"+Hn[e[r+4]]+Hn[e[r+5]]+"-"+Hn[e[r+6]]+Hn[e[r+7]]+"-"+Hn[e[r+8]]+Hn[e[r+9]]+"-"+Hn[e[r+10]]+Hn[e[r+11]]+Hn[e[r+12]]+Hn[e[r+13]]+Hn[e[r+14]]+Hn[e[r+15]]).toLowerCase();if(!R1(t))throw TypeError("Stringified UUID is invalid");return t}var D1=I1;function C1(e,r,t){e=e||{};var s=e.random||(e.rng||w1)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,r){t=t||0;for(var f=0;f<16;++f)r[t+f]=s[f];return r}return D1(s)}var sg=C1,fs=function(){var r=sg();return r},L1=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.nodes.reduce(function(f,d){return f[d.id]=t+sg(),d.id=f[d.id],f},{});return r.edges.forEach(function(f){f.id=t+sg(),f.sourceNodeId=s[f.sourceNodeId],f.targetNodeId=s[f.targetNodeId]}),r};o(104),o(203);var j1=function(r,t,s,f){var d=(t.y-r.y)*(f.x-s.x)-(r.x-t.x)*(s.y-f.y);if(d===0)return!1;var v=((t.x-r.x)*(f.x-s.x)*(s.y-r.y)+(t.y-r.y)*(f.x-s.x)*r.x-(f.y-s.y)*(t.x-r.x)*s.x)/d,b=-((t.y-r.y)*(f.y-s.y)*(s.x-r.x)+(t.x-r.x)*(f.y-s.y)*r.y-(f.x-s.x)*(t.y-r.y)*s.y)/d;return(v-r.x)*(v-t.x)<=0&&(b-r.y)*(b-t.y)<=0&&(v-s.x)*(v-f.x)<=0&&(b-s.y)*(b-f.y)<=0?{x:v,y:b}:!1},qf=function(r,t,s){var f=r.x,d=r.y;return(f-t.x)*(f-s.x)<=0&&(d-t.y)*(d-s.y)<=0};function nh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nh=function(t){return typeof t}:nh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function xE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function TE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xE(Object(t),!0).forEach(function(s){B1(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function B1(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ug=function(r){var t=r.anchors;return t},oh=function(r,t){for(var s=t.nodes,f,d=s.length-1;d>=0;d--){var v=s[d],b=k1(r,v);if(b){var O=v.getTargetAnchor(r);if(O){var P={node:v,anchorIndex:O.index,anchor:O.anchor};(!f||F1(v,f.node,t))&&(f=P)}}}return f},F1=function(r,t,s){return r.zIndex>t.zIndex||s.nodesMap[r.id].index>s.nodesMap[t.id].index},G1=function(r,t){for(var s=ug(t),f,d=Number.MAX_SAFE_INTEGER,v=0;v<s.length;v++){var b=wi(r.x,r.y,s[v].x,s[v].y);b<d&&(d=b,f={index:v,anchor:TE(TE({},s[v]),{},{x:s[v].x,y:s[v].y,id:s[v].id})})}return f},wi=function(r,t,s,f){return Math.hypot(r-s,t-f)},cs=function(r,t){var s=!1,f=0,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},k1=function(r,t){var s=!1,f=5,d=Po(t);return r.x>=d.minX-f&&r.x<=d.maxX+f&&r.y>=d.minY-f&&r.y<=d.maxY+f&&(s=!0),s},Po=function(r){var t=r.x,s=r.y,f=r.width,d=r.height,v={minX:t-f/2,minY:s-d/2,maxX:t+f/2,maxY:s+d/2,x:t,y:s,width:f,height:d,centerX:t,centerY:s};return v},U1=function(r){var t=r,s=t.x,f=t.y,d=t.width,v=t.height,b=t.radius,O=[{x:s-d/2+b,y:f-v/2+b,r:b},{x:s+d/2-b,y:f-v/2+b,r:b},{x:s-d/2+b,y:f+v/2-b,r:b},{x:s+d/2-b,y:f+v/2-b,r:b}];return O},AE=function(r,t,s){var f=U1(s),d,v=Number.MAX_SAFE_INTEGER;f.forEach(function(O){var P=wi(r.x,r.y,O.x,O.y);P<v&&(v=P,d=O)});var b=lg(r,t,d);return b},lg=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.r;if(t===At.HORIZONTAL){var P=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)),R=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)),F=Math.abs(P-r.x)<Math.abs(R-r.x)?P:R;f={x:F,y:r.y}}else if(t===At.VERTICAL){var Y=b-Math.sqrt(O*O-(r.x-v)*(r.x-v)),ne=b+Math.sqrt(O*O-(r.x-v)*(r.x-v)),pe=Math.abs(Y-r.y)<Math.abs(ne-r.y)?Y:ne;f={x:r.x,y:pe}}return f},PE=function(r,t){var s=t,f=!1,d={minX:s.x-s.width/2+s.radius,maxX:s.x+s.width/2-s.radius,minY:s.y-s.height/2+s.radius,maxY:s.y+s.height/2-s.radius},v=s.x,b=s.y,O=s.width,P=s.height;return r.y===b+P/2||r.y===b-P/2?f=r.x>d.minX&&r.x<d.maxX:(r.x===v+O/2||r.x===v-O/2)&&(f=r.y>d.minY&&r.y<d.maxY),f},_E=function(r,t,s){var f,d=s,v=d.x,b=d.y,O=d.rx,P=d.ry;if(t===At.HORIZONTAL){var R=v-Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),F=v+Math.sqrt(O*O-(r.y-b)*(r.y-b)*O*O/(P*P)),Y=Math.abs(R-r.x)<Math.abs(F-r.x)?R:F;f={x:Y,y:r.y}}else if(t===At.VERTICAL){var ne=b-Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),pe=b+Math.sqrt(P*P-(r.x-v)*(r.x-v)*P*P/(O*O)),Le=Math.abs(ne-r.y)<Math.abs(pe-r.y)?ne:pe;f={x:r.x,y:Le}}return f},ih=function(r,t,s){for(var f=s,d=f.pointsPosition,v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});return O.forEach(function(R){var F=R.start,Y=R.end,ne=F,pe=Y;F.x>Y.x&&(ne=Y,pe=F);var Le={x:r.x,y:r.y};if(ne.x===pe.x&&t===At.HORIZONTAL&&(Le={x:ne.x,y:r.y}),ne.y===pe.y&&t===At.VERTICAL&&(Le={x:r.x,y:ne.y}),ne.x!==pe.x&&ne.y!==pe.y){var De=(pe.y-ne.y)/(pe.x-ne.x),Fe=(ne.x*pe.y-pe.x*ne.y)/(ne.x-pe.x);t===At.HORIZONTAL?Le={x:(r.y-Fe)/De,y:r.y}:t===At.VERTICAL&&(Le={x:r.x,y:De*r.x+Fe})}var Tt=qf(Le,F,Y);if(Tt){var It=wi(Le.x,Le.y,r.x,r.y);It<v&&(v=It,b=Le)}}),b},z1=function(r){var t=ru(r,["id","type","x","y","text","properties","virtual"]);return t},wE=function(r,t,s,f){var d=r.x,v=r.y;return t.x>r.x?d=r.x+s/2:t.x<r.x&&(d=r.x-s/2),t.y>r.y?v=r.y+f/2:t.y<r.y&&(v=r.y-f/2),{x:d,y:v}},NE=function(r){var t=r.rows,s=r.style,f=r.rowsLength,d=r.className,v=document.createElement("div");v.style.fontSize=s.fontSize,v.style.width=s.width,v.className=d,v.style.lineHeight=s.lineHeight,v.style.padding=s.padding,s.fontFamily&&(v.style.fontFamily=s.fontFamily),f>1?t.forEach(function(O){var P=document.createElement("div");P.textContent=O,v.appendChild(P)}):v.textContent=t,document.body.appendChild(v);var b=v.clientHeight;return document.body.removeChild(v),b},fg=function(r){var t=r.rows,s=r.rowsLength,f=r.fontSize,d=0;return t&&t.forEach(function(v){var b=E0(v);d=b>d?b:d}),{width:Math.ceil(d/2)*f+f/4,height:s*(f+2)+f/4}},ah=function(r){return nh(r)!=="object"?{isAllPass:!!r,msg:r?"":"不允许连接"}:r},Zn=function(r){try{return JSON.parse(JSON.stringify(r))}catch{return r}},H1=1e3,X1=999,cg=function(){return++H1},$1=function(){return--X1},dt,ME,RE,IE,DE,CE,LE,jE,BE,FE,GE,kE,UE,zE,HE,XE,$E,VE,WE,YE,KE;function ZE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function mo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ZE(Object(t),!0).forEach(function(s){Go(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function An(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function V1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function JE(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function W1(e,r,t){return r&&JE(e.prototype,r),t&&JE(e,t),e}function Go(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function pr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var dg=(dt=function(){function e(r,t){V1(this,e),Go(this,"id",""),An(this,"type",ME,this),An(this,"sourceNodeId",RE,this),An(this,"targetNodeId",IE,this),An(this,"startPoint",DE,this),An(this,"endPoint",CE,this),An(this,"text",LE,this),An(this,"properties",jE,this),An(this,"points",BE,this),An(this,"pointsList",FE,this),An(this,"isSelected",GE,this),An(this,"isHovered",kE,this),An(this,"isHitable",UE,this),An(this,"draggable",zE,this),An(this,"visible",HE,this),Go(this,"virtual",!1),An(this,"isAnimation",XE,this),An(this,"isShowAdjustPoint",$E,this),Go(this,"graphModel",void 0),An(this,"zIndex",VE,this),Go(this,"BaseType",Ve.EDGE),Go(this,"modelType",Ze.EDGE),An(this,"state",WE,this),Go(this,"additionStateData",void 0),Go(this,"sourceAnchorId",""),Go(this,"targetAnchorId",""),Go(this,"menu",void 0),Go(this,"customTextPosition",!1),An(this,"style",YE,this),An(this,"arrowConfig",KE,this),this.graphModel=t,this.initEdgeData(r),this.setAttributes()}return W1(e,[{key:"initEdgeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||fs()}this.arrowConfig.markerEnd="url(#marker-end-".concat(t.id,")");var v=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=v,Mn(this,jN(t));var b=this.graphModel.overlapMode;b===mt.INCREASE&&(this.zIndex=t.zIndex||cg()),this.setAnchors(),this.initPoints(),this.formatText(t)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return mo(mo({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return mo({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.edgeText;return gn(t)}},{key:"getEdgeAnimationStyle",value:function(){var t=this.graphModel.theme.edgeAnimation;return gn(t)}},{key:"getArrowStyle",value:function(){var t=this.getEdgeStyle(),s=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,d=this.isAnimation?s.stroke:t.stroke;return mo(mo({},t),{},{fill:d,stroke:d},f)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel,s=t.theme.outline;return gn(s)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.sourceNodeId])===null||s===void 0?void 0:s.model}},{key:"targetNode",get:function(){var t,s;return(t=this.graphModel)===null||t===void 0||(s=t.nodesMap[this.targetNodeId])===null||s===void 0?void 0:s.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(t,s){var f,d,v=ug(t);return v.forEach(function(b){var O=x0(b,s);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getEndAnchor",value:function(t){var s=this,f,d,v=ug(t);return v.forEach(function(b){var O=x0(b,s.startPoint);(d===void 0||O<d)&&(d=O,f=b)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return d&&(v.text={x:s,y:f,value:d}),this.graphModel.overlapMode===mt.INCREASE&&(v.zIndex=this.zIndex),v}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(t,s){this.properties[t]=Zn(s),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=mo(mo({},this.properties),Zn(t)),this.setAttributes()}},{key:"changeEdgeId",value:function(t){var s=this.arrowConfig,f=s.markerEnd,d=s.markerStart;d&&d==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(t,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(t,")")),this.id=t}},{key:"setStyle",value:function(t,s){this.style=mo(mo({},this.style),{},Go({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=mo(mo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=mo({},Zn(t))}},{key:"formatText",value:function(t){var s=this.textPosition,f=s.x,d=s.y;if(!t.text||typeof t.text=="string"){this.text={value:t.text||"",x:f,y:d,draggable:this.text.draggable,editable:this.text.editable};return}Object.prototype.toString.call(t.text)==="[object Object]"&&(this.text={x:t.text.x||f,y:t.text.y||d,value:t.text.value||"",draggable:this.text.draggable,editable:this.text.editable})}},{key:"resetTextPosition",value:function(){var t=this.textPosition,s=t.x,f=t.y;this.text.x=s,this.text.y=f}},{key:"moveText",value:function(t,s){if(this.text){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,draggable:O,x:d+t,y:v+s,editable:P}}}},{key:"setText",value:function(t){t&&Mn(this.text,t)}},{key:"updateText",value:function(t){this.text=mo(mo({},this.text),{},{value:t})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var t=this.getBeginAnchor(this.sourceNode,this.targetNode);this.startPoint||(this.startPoint={x:t.x,y:t.y}),this.sourceAnchorId||(this.sourceAnchorId=t.id)}if(!this.targetAnchorId||!this.endPoint){var s=this.getEndAnchor(this.targetNode);this.endPoint||(this.endPoint={x:s.x,y:s.y}),this.targetAnchorId||(this.targetAnchorId=s.id)}}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"updateStartPoint",value:function(t){this.startPoint=t}},{key:"moveStartPoint",value:function(t,s){this.startPoint.x+=t,this.startPoint.y+=s}},{key:"updateEndPoint",value:function(t){this.endPoint=t}},{key:"moveEndPoint",value:function(t,s){this.endPoint.x+=t,this.endPoint.y+=s}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=t}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(t){Mn(this,t)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(t){var s=t.startPoint,f=t.endPoint;this.updateStartPoint({x:s.x,y:s.y}),this.updateEndPoint({x:f.x,y:f.y})}}]),e}(),ME=pr(dt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),RE=pr(dt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),IE=pr(dt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),DE=pr(dt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),CE=pr(dt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),LE=pr(dt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),jE=pr(dt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),BE=pr(dt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),FE=pr(dt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),GE=pr(dt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kE=pr(dt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),UE=pr(dt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zE=pr(dt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HE=pr(dt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),XE=pr(dt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$E=pr(dt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),VE=pr(dt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),WE=pr(dt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),YE=pr(dt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),KE=pr(dt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:""}}}),pr(dt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"sourceNode"),dt.prototype),pr(dt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"targetNode"),dt.prototype),pr(dt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(dt.prototype,"textPosition"),dt.prototype),pr(dt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperty"),dt.prototype),pr(dt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"deleteProperty"),dt.prototype),pr(dt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setProperties"),dt.prototype),pr(dt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"changeEdgeId"),dt.prototype),pr(dt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyle"),dt.prototype),pr(dt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setStyles"),dt.prototype),pr(dt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStyles"),dt.prototype),pr(dt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"formatText"),dt.prototype),pr(dt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"resetTextPosition"),dt.prototype),pr(dt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveText"),dt.prototype),pr(dt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setText"),dt.prototype),pr(dt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateText"),dt.prototype),pr(dt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setAnchors"),dt.prototype),pr(dt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setSelected"),dt.prototype),pr(dt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHovered"),dt.prototype),pr(dt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setHitable"),dt.prototype),pr(dt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"openEdgeAnimation"),dt.prototype),pr(dt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"closeEdgeAnimation"),dt.prototype),pr(dt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setElementState"),dt.prototype),pr(dt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateStartPoint"),dt.prototype),pr(dt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveStartPoint"),dt.prototype),pr(dt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateEndPoint"),dt.prototype),pr(dt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"moveEndPoint"),dt.prototype),pr(dt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"setZIndex"),dt.prototype),pr(dt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"initPoints"),dt.prototype),pr(dt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAttributes"),dt.prototype),pr(dt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustStart"),dt.prototype),pr(dt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"getAdjustEnd"),dt.prototype),pr(dt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(dt.prototype,"updateAfterAdjustStartAndEnd"),dt.prototype),dt),hg=dg;function sh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sh=function(t){return typeof t}:sh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function QE(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function qE(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?QE(Object(t),!0).forEach(function(s){r0(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QE(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Y1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function e0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function K1(e,r,t){return r&&e0(e.prototype,r),t&&e0(e,t),e}function uh(){return typeof Reflect<"u"&&Reflect.get?uh=Reflect.get:uh=function(r,t,s){var f=Z1(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},uh.apply(this,arguments)}function Z1(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=il(e),e!==null););return e}function J1(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&pg(e,r)}function pg(e,r){return pg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},pg(e,r)}function Q1(e){var r=eN();return function(){var s=il(e),f;if(r){var d=il(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return q1(this,f)}}function q1(e,r){if(r&&(sh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t0(e)}function t0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function il(e){return il=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},il(e)}function r0(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var vg=function(e){J1(t,e);var r=Q1(t);function t(){var s;Y1(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),r0(t0(s),"modelType",Ze.LINE_EDGE),s}return K1(t,[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line,d=uh(il(t.prototype),"getEdgeStyle",this).call(this);return qE(qE({},d),gn(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}]),t}(hg);function lh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?lh=function(t){return typeof t}:lh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lh(e)}var xr,n0;function tN(e,r){return iN(e)||oN(e,r)||nN(e,r)||rN()}function rN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nN(e,r){if(e){if(typeof e=="string")return o0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o0(e,r)}}function o0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function oN(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function iN(e){if(Array.isArray(e))return e}function i0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function a0(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?i0(Object(t),!0).forEach(function(s){gg(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function aN(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function sN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function uN(e,r,t){return r&&s0(e.prototype,r),t&&s0(e,t),e}function al(){return typeof Reflect<"u"&&Reflect.get?al=Reflect.get:al=function(r,t,s){var f=lN(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},al.apply(this,arguments)}function lN(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ds(e),e!==null););return e}function fN(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&yg(e,r)}function yg(e,r){return yg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},yg(e,r)}function cN(e){var r=hN();return function(){var s=ds(e),f;if(r){var d=ds(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return dN(this,f)}}function dN(e,r){if(r&&(lh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(e)}function ec(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ds(e){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ds(e)}function gg(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function uo(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var mg=(xr=function(e){fN(t,e);var r=cN(t);function t(){var s;sN(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),gg(ec(s),"modelType",Ze.POLYLINE_EDGE),gg(ec(s),"draggingPointList",void 0),aN(ec(s),"dbClickPosition",n0,ec(s)),s}return uN(t,[{key:"initEdgeData",value:function(f){this.offset=30,al(ds(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline,d=al(ds(t.prototype),"getEdgeStyle",this).call(this);return a0(a0({},d),gn(f))}},{key:"getTextPosition",value:function(){var f,d=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!d){var v=this.dbClickPosition,b=v.x,O=v.y;return{x:b,y:O}}var P=sl(this.points),R=IN(P),F=tN(R,2),Y=F[0],ne=F[1];return{x:(Y.x+ne.x)/2,y:(Y.y+ne.y)/2}}},{key:"getAfterAnchor",value:function(f,d,v){var b,O;return v.forEach(function(P){var R;f===At.HORIZONTAL?R=Math.abs(d.y-P.y):f===At.VERTICAL&&(R=Math.abs(d.x-P.x)),(!O||O>R)&&(O=R,b=P)}),b}},{key:"getCrossPoint",value:function(f,d,v){var b;return f===At.HORIZONTAL?b={x:v.x,y:d.y}:f===At.VERTICAL&&(b={x:d.x,y:v.y}),b}},{key:"removeCrossPoints",value:function(f,d,v){var b=v.map(function(Pt){return Pt});if(f===1){var O=b[f],P=b[d],R=b[f-1],F=y0(R,O,this.sourceNode);if(F){var Y=g0(O,P,this.sourceNode);if(Y){var ne=m0(O,P,this.sourceNode);ne&&(b[f]=ne,b.splice(f-1,1),f--,d--)}}else{var pe=this.sourceNode.anchors;pe.forEach(function(Pt){if(Pt.x===R.x&&Pt.x===O.x||Pt.y===R.y&&Pt.y===O.y){var er=wi(Pt.x,Pt.y,O.x,O.y),wt=wi(R.x,R.y,O.x,O.y);er<wt&&(b[f-1]=Pt)}})}}if(d===v.length-2){var Le=b[f],De=b[d],Fe=b[d+1],Tt=y0(De,Fe,this.targetNode);if(Tt){var It=g0(Le,De,this.targetNode);if(It){var ut=m0(Le,De,this.targetNode);ut&&(b[d]=ut,b.splice(d+1,1))}}else{var Ft=this.targetNode.anchors;Ft.forEach(function(Pt){if(Pt.x===Fe.x&&Pt.x===De.x||Pt.y===Fe.y&&Pt.y===De.y){var er=wi(Pt.x,Pt.y,De.x,De.y),wt=wi(Fe.x,Fe.y,De.x,De.y);er<wt&&(b[d+1]=Pt)}})}}return b}},{key:"getDraggingPoints",value:function(f,d,v,b,O){var P=O.map(function(Y){return Y}),R=this.getAfterAnchor(f,v,b),F=this.getCrossPoint(f,v,R);return d==="start"?(P.unshift(F),P.unshift(R)):(P.push(F),P.push(R)),P}},{key:"updateCrossPoints",value:function(f){var d=f.map(function(ut){return ut}),v=f[0],b=f[1],O=f[d.length-2],P=f[d.length-1],R=this.sourceNode,F=this.targetNode,Y=R.modelType,ne=F.modelType,pe=yh(v,b),Le=d[0];switch(Y){case Ze.RECT_NODE:if(R.radius!==0){var De=PE(v,R);De||(Le=AE(v,pe,R))}break;case Ze.CIRCLE_NODE:Le=lg(v,pe,R);break;case Ze.ELLIPSE_NODE:Le=_E(v,pe,R);break;case Ze.DIAMOND_NODE:Le=ih(v,pe,R);break;case Ze.POLYGON_NODE:Le=ih(v,pe,R);break}d[0]=Le;var Fe=yh(O,P),Tt=d[d.length-1];switch(ne){case Ze.RECT_NODE:if(F.radius!==0){var It=PE(P,F);It||(Tt=AE(P,Fe,F))}break;case Ze.CIRCLE_NODE:Tt=lg(P,Fe,F);break;case Ze.ELLIPSE_NODE:Tt=_E(P,Fe,F);break;case Ze.DIAMOND_NODE:Tt=ih(P,Fe,F);break;case Ze.POLYGON_NODE:Tt=ih(P,Fe,F);break}return d[d.length-1]=Tt,d}},{key:"getData",value:function(){var f=al(ds(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Object.assign({},f,{pointsList:d})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=v0({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(d){return"".concat(d.x,",").concat(d.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d,this.updatePoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,R=f.direction,F=this.pointsList,Y=F;return R===At.HORIZONTAL?(F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y},Y=this.pointsList.map(function(ne){return ne})):R===At.VERTICAL&&(F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y},Y=this.pointsList.map(function(ne){return ne})),this.updatePointsAfterDrag(Y),this.draggingPointList=Y,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:R}}},{key:"dragAppend",value:function(f,d){this.isDragging=!0;var v=f.start,b=f.end,O=f.startIndex,P=f.endIndex,R=f.direction,F=this.pointsList;if(R===At.HORIZONTAL){F[O]={x:v.x,y:v.y+d.y},F[P]={x:b.x,y:b.y+d.y};var Y=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(Y=this.removeCrossPoints(O,P,Y)),O===0){var ne={x:v.x,y:v.y+d.y},pe=cs(ne,this.sourceNode);if(!pe){var Le=this.sourceNode.anchors;Y=this.getDraggingPoints(R,"start",ne,Le,Y)}}if(P===this.pointsList.length-1){var De={x:b.x,y:b.y+d.y},Fe=cs(De,this.targetNode);if(!Fe){var Tt=this.targetNode.anchors;Y=this.getDraggingPoints(R,"end",De,Tt,Y)}}this.updatePointsAfterDrag(Y),this.draggingPointList=Y}else if(R===At.VERTICAL){F[O]={x:v.x+d.x,y:v.y},F[P]={x:b.x+d.x,y:b.y};var It=this.pointsList.map(function(Cr){return Cr});if(O!==0&&P!==this.pointsList.length-1&&(It=this.removeCrossPoints(O,P,It)),O===0){var ut={x:v.x+d.x,y:v.y},Ft=cs(ut,this.sourceNode);if(!Ft){var Pt=this.sourceNode.anchors;It=this.getDraggingPoints(R,"start",ut,Pt,It)}}if(P===this.pointsList.length-1){var er={x:b.x+d.x,y:b.y},wt=cs(er,this.targetNode);if(!wt){var gr=this.targetNode.anchors;It=this.getDraggingPoints(R,"end",er,gr,It)}}this.updatePointsAfterDrag(It),this.draggingPointList=It}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},F[O]),end:Object.assign({},F[P]),startIndex:O,endIndex:P,direction:R}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=p0(sl(this.points));this.pointsList=f.map(function(b){return b}),this.draggingPointList=[];var d=f[0];this.startPoint=Object.assign({},d);var v=f[f.length-1];this.endPoint=Object.assign({},v)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var d=this.updateCrossPoints(f);this.points=d.map(function(v){return"".concat(v.x,",").concat(v.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=v0({x:d.x,y:d.y},{x:v.x,y:v.y},b,O,this.offset||0);this.pointsList=P,this.initPoints()}}]),t}(hg),n0=uo(xr.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo(xr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"initPoints"),xr.prototype),uo(xr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePoints"),xr.prototype),uo(xr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateStartPoint"),xr.prototype),uo(xr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveStartPoint"),xr.prototype),uo(xr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateEndPoint"),xr.prototype),uo(xr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"moveEndPoint"),xr.prototype),uo(xr.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendStart"),xr.prototype),uo(xr.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendSimple"),xr.prototype),uo(xr.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppend"),xr.prototype),uo(xr.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"dragAppendEnd"),xr.prototype),uo(xr.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updatePointsAfterDrag"),xr.prototype),uo(xr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustStart"),xr.prototype),uo(xr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"getAdjustEnd"),xr.prototype),uo(xr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(xr.prototype,"updateAfterAdjustStartAndEnd"),xr.prototype),xr),tc=function(r){var t=r.start,s=r.end,f=r.offset,d=r.verticalLength,v=r.type,b={leftX:0,leftY:0,rightX:0,rightY:0},O=Math.atan((s.y-t.y)/(s.x-t.x)),P=Math.atan(f/d),R=Math.sqrt(d*d+f*f);return v==="start"?s.x>=t.x?(b.leftX=t.x+R*Math.sin(O+P),b.leftY=t.y-R*Math.cos(O+P),b.rightX=t.x-R*Math.sin(O-P),b.rightY=t.y+R*Math.cos(O-P)):(b.leftX=t.x-R*Math.sin(O+P),b.leftY=t.y+R*Math.cos(O+P),b.rightX=t.x+R*Math.sin(O-P),b.rightY=t.y-R*Math.cos(O-P)):v==="end"&&(s.x>=t.x?(b.leftX=s.x+R*Math.sin(O-P),b.leftY=s.y-R*Math.cos(O-P),b.rightX=s.x-R*Math.sin(O+P),b.rightY=s.y+R*Math.cos(O+P)):(b.leftX=s.x-R*Math.sin(O-P),b.leftY=s.y+R*Math.cos(O-P),b.rightX=s.x+R*Math.sin(O+P),b.rightY=s.y-R*Math.cos(O+P))),b};function u0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function fh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?u0(Object(t),!0).forEach(function(s){pN(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function pN(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function vN(e){return mN(e)||gN(e)||l0(e)||yN()}function yN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mN(e){if(Array.isArray(e))return Eg(e)}function ch(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ch=function(t){return typeof t}:ch=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ch(e)}function bg(e,r){return ON(e)||EN(e,r)||l0(e,r)||bN()}function bN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l0(e,r){if(e){if(typeof e=="string")return Eg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Eg(e,r)}}function Eg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function EN(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function ON(e){if(Array.isArray(e))return e}var SN=function(r,t){return Math.abs(r.centerX-t.centerX)*2<r.width+t.width&&Math.abs(r.centerY-t.centerY)*2<r.height+t.height},Og=function(r){var t=[],s={};return r.forEach(function(f){var d="".concat(f.x,"-").concat(f.y);f.id=d,s[d]=f}),Object.keys(s).forEach(function(f){t.push(s[f])}),t},dh=function(r,t){return r.width===0&&r.height===0?r:{centerX:r.centerX,centerY:r.centerY,minX:r.minX-t,minY:r.minY-t,maxX:r.maxX+t,maxY:r.maxY+t,height:r.height+2*t,width:r.width+2*t}},xN=function(r,t){var s=Math.abs(r.x-t.centerX),f=Math.abs(r.y-t.centerY);return s/t.width>f/t.height?At.HORIZONTAL:At.VERTICAL},hh=function(r,t){var s=xN(t,r);return s===At.HORIZONTAL?{x:t.x>r.centerX?r.maxX:r.minX,y:t.y}:{x:t.x,y:t.y>r.centerY?r.maxY:r.minY}},f0=function(r,t){var s=Math.min(r.minX,t.minX),f=Math.min(r.minY,t.minY),d=Math.max(r.maxX,t.maxX),v=Math.max(r.maxY,t.maxY);return{centerX:(s+d)/2,centerY:(f+v)/2,minX:s,minY:f,maxX:d,maxY:v,height:v-f,width:d-s}},rc=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,s=[],f=[];r.forEach(function(F){s.push(F.x),f.push(F.y)});var d=Math.min.apply(Math,s),v=Math.max.apply(Math,s),b=Math.min.apply(Math,f),O=Math.max.apply(Math,f),P=v-d,R=O-b;return t&&(P+=t,R+=t),{centerX:(d+v)/2,centerY:(b+O)/2,maxX:v,maxY:O,minX:d,minY:b,x:(d+v)/2,y:(b+O)/2,height:R,width:P}},ph=function(r){var t=r.minX,s=r.minY,f=r.maxX,d=r.maxY;return[{x:t,y:s},{x:f,y:s},{x:f,y:d},{x:t,y:d}]},vh=function(r,t){var s=r.x,f=r.y;return s<t.minX||s>t.maxX||f<t.minY||f>t.maxY},TN=function(r,t){return t<r.minX||t>r.maxX?[]:[{x:t,y:r.minY},{x:t,y:r.maxY}]},AN=function(r,t){return t<r.minY||t>r.maxY?[]:[{x:r.minX,y:t},{x:r.maxX,y:t}]},PN=function(r,t){return TN(r,t.x).concat(AN(r,t.y))},Sg=function(r,t){return Math.abs(r.x-t.x)+Math.abs(r.y-t.y)},_N=function(r,t){var s=-2,f=0;return t.forEach(function(d){d&&(r.x===d.x&&(f+=s),r.y===d.y&&(f+=s))}),f},c0=function(r,t,s,f,d){return Sg(r,t)+Sg(r,s)+_N(r,[t,s,f,d])},wN=function e(r,t,s,f,d){d||(d=0),r.unshift(t[f]),s[f]&&s[f]!==f&&d<=100&&e(r,t,s,s[f],d+1)},NN=function(r,t){var s=r.indexOf(t);s>-1&&r.splice(s,1)},nc=function(r,t,s,f){var d=t.x-r.x,v=t.y-r.y,b=f.x-s.x,O=f.y-s.y,P=(-v*(r.x-s.x)+d*(r.y-s.y))/(-b*v+d*O),R=(b*(r.y-s.y)-O*(r.x-s.x))/(-b*v+d*O);return P>=0&&P<=1&&R>=0&&R<=1},d0=function(r,t,s){if(s.width===0&&s.height===0)return!1;var f=ph(s),d=bg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return nc(r,t,v,b)||nc(r,t,v,P)||nc(r,t,b,O)||nc(r,t,O,P)},MN=function(r,t,s,f){var d=[];return r.forEach(function(v){v!==t&&(v.x===t.x||v.y===t.y)&&!d0(v,t,s)&&!d0(v,t,f)&&d.push(v)}),Og(d)},RN=function(r,t,s,f,d,v,b){var O=[],P=[t],R={},F={},Y={};F[t.id]=0,Y[t.id]=c0(t,s,t);var ne={};r.forEach(function(De){ne[De.id]=De});for(var pe=function(){var Fe=void 0,Tt=1/0;if(P.forEach(function(ut){Y[ut.id]<Tt&&(Tt=Y[ut.id],Fe=ut)}),Fe===s){var It=[];return wN(It,ne,R,s.id),{v:It}}NN(P,Fe),O.push(Fe),MN(r,Fe,f,d).forEach(function(ut){if(O.indexOf(ut)===-1){P.indexOf(ut)===-1&&P.push(ut);var Ft=Y[Fe.id]+Sg(Fe,ut);F[ut.id]&&Ft>=F[ut.id]||(R[ut.id]=Fe.id,F[ut.id]=Ft,Y[ut.id]=F[ut.id]+c0(ut,s,t,v,b))}})};P.length;){var Le=pe();if(ch(Le)==="object")return Le.v}return[t,s]},h0=function(r){var t=Po(r);return t},p0=function(r){for(var t=1;t<r.length-1;){var s=r[t-1],f=r[t],d=r[t+1];s.x===f.x&&f.x===d.x||s.y===f.y&&f.y===d.y?r.splice(t,1):t++}return r},v0=function(r,t,s,f,d){var v=h0(s),b=h0(f),O=dh(v,d),P=dh(b,d),R=hh(O,r),F=hh(P,t);if(SN(O,P)){var Y=DN(r,t,R,F);return[r,R].concat(vN(Y),[F,t])}var ne=rc([R,F]),pe=f0(O,ne),Le=f0(P,ne),De=[];De=De.concat(ph(pe)),De=De.concat(ph(Le));var Fe={x:(r.x+t.x)/2,y:(r.y+t.y)/2};[ne,pe,Le].forEach(function(It){De=De.concat(PN(It,Fe).filter(function(ut){return vh(ut,O)&&vh(ut,P)}))}),[{x:R.x,y:F.y},{x:F.x,y:R.y}].forEach(function(It){vh(It,O)&&vh(It,P)&&De.push(It)}),De.unshift(R),De.push(F),De=Og(De);var Tt=RN(De,R,F,v,b,r,t);return Tt.unshift(r),Tt.push(t),Tt.length>2&&(Tt=p0(Tt)),Og(Tt)},IN=function(r){var t;if(r.length===1)t=[r[0],r[0]];else if(r.length>=2){for(var s=r[0],f=r[1],d=wi(s.x,s.y,f.x,f.y),v=1;v<r.length-1;v++){var b=r[v],O=r[v+1],P=wi(b.x,b.y,O.x,O.y);P>d&&(d=P,s=b,f=O)}t=[s,f]}return t},y0=function(r,t,s){var f=cs(r,s),d=cs(t,s);return f&&d},g0=function(r,t,s){var f=cs(r,s),d=cs(t,s),v=f&&d,b=f||d;return!v&&b},m0=function(r,t,s){for(var f,d,v=Po(s),b=ph(v),O=0;O<b.length;O++){var P=nc(r,t,b[O],b[(O+1)%b.length]);P&&(d=[b[O],b[(O+1)%b.length]])}return d&&(f=j1(r,t,d[0],d[1])),f},yh=function(r,t){var s;return r.x===t.x?s=At.VERTICAL:r.y===t.y&&(s=At.HORIZONTAL),s},sl=function(r){var t=r.split(" "),s=[];return t&&t.forEach(function(f){var d=f.split(","),v=bg(d,2),b=v[0],O=v[1];s.push({x:Number(b),y:Number(O)})}),s},DN=function(r,t,s,f){var d=[],v=yh(r,s),b=yh(t,f);if(v===b)r.y===s.y?(d.push({x:s.x,y:(s.y+f.y)/2}),d.push({x:f.x,y:(s.y+f.y)/2})):(d.push({x:(s.x+f.x)/2,y:s.y}),d.push({x:(s.x+f.x)/2,y:f.y}));else{var O={x:s.x,y:f.y},P=qf(O,r,s),R=qf(O,t,f);if(P||R)O={x:f.x,y:s.y};else{var F=b0(O,r,s),Y=b0(O,t,f);F&&Y&&(O={x:f.x,y:s.y})}d.push(O)}return d},b0=function(r,t,s){return r.x===t.x&&r.x===s.x||r.y===t.y&&r.y===s.y},E0=function(r){if(!r)return 0;for(var t=0,s=0;s<r.length;s++){var f=r.charCodeAt(s);r.match(/[A-Z]/)?t+=1.5:f>=1&&f<=126||f>=65376&&f<=65439?t+=1:t+=2}return t},CN=function(r){var t=r.start,s=r.end,f;if(t.x===s.x&&t.y===s.y)f="";else{var d={start:t,end:s,offset:10,verticalLength:5},v=tc(fh(fh({},d),{},{type:"start"})),b=tc(fh(fh({},d),{},{type:"end"}));f="M".concat(v.leftX," ").concat(v.leftY,` 
    L`).concat(v.rightX," ").concat(v.rightY,` 
    L`).concat(b.rightX," ").concat(b.rightY,`
    L`).concat(b.leftX," ").concat(b.leftY," z")}return{d:f,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},O0=function(r){var t=r.start,s=r.end,f=r.sourceNode,d=r.targetNode,v=r.offset,b=Po(f),O=Po(d),P=dh(b,v),R=dh(O,v),F=hh(P,t),Y=hh(R,s);return{sNext:F,ePre:Y}},gh=function(r){var t=r.replace(/M/g,"").replace(/C/g,",").split(","),s=mh(t[0]),f=mh(t[1]),d=mh(t[2]),v=mh(t[3]);return[s,f,d,v]},mh=function(r){var t=r.replace(/(^\s*)/g,"").split(" "),s=bg(t,2),f=s[0],d=s[1];return{x:+f,y:+d}},LN=function(r){var t=gh(r);return[t[2],t[3]]},S0=function(r,t){for(var s=r.x,f=r.y,d=sl(t),v=Number.MAX_SAFE_INTEGER,b,O=[],P=0;P<d.length;P++)O.push({start:d[P],end:d[(P+1)%d.length]});if(O.forEach(function(ne){var pe=ne.start,Le=ne.end;if(pe.x===Le.x){var De={x:pe.x,y:f},Fe=qf(De,pe,Le);if(Fe){var Tt=Math.abs(pe.x-s);Tt<v&&(v=Tt,b=De)}}else if(pe.y===Le.y){var It={x:s,y:pe.y},ut=qf(It,pe,Le);if(ut){var Ft=Math.abs(pe.y-f);Ft<v&&(v=Ft,b=It)}}}),!b){var R=O[0],F=R.start,Y=R.end;b={x:F.x+(Y.x-F.x)/2,y:F.y+(Y.y-F.y)/2}}return b},jN=function(r){return ru(r,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},x0=function(r,t){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))};function BN(e,r){return typeof r!="function"?function(t,s,f){return Object.assign({type:e.edgeType},f)}:function(t,s,f){var d=r(t,s,f);return d?typeof d=="string"?Object.assign({},f,{type:d}):Object.assign({type:d},f):{type:e.edgeType}}}o(204);function FN(){}var ul=FN;function GN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function T0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function kN(e,r,t){return r&&T0(e.prototype,r),t&&T0(e,t),e}function Pn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ni=window.document,A0=0;function UN(e){var r=e.onDragStart,t=r===void 0?ul:r,s=e.onDragging,f=s===void 0?ul:s,d=e.onDragEnd,v=d===void 0?ul:d,b=e.step,O=b===void 0?1:b,P=e.isStopPropagation,R=P===void 0?!0:P,F=!1,Y=!1,ne=0,pe=0,Le=0,De=0;function Fe(ut){if(R&&ut.stopPropagation(),!!Y&&(F=!0,Le+=ut.clientX-ne,De+=ut.clientY-pe,ne=ut.clientX,pe=ut.clientY,Math.abs(Le)>O||Math.abs(De)>O)){var Ft=Le%O,Pt=De%O,er=Le-Ft,wt=De-Pt;Le=Ft,De=Pt,f({deltaX:er,deltaY:wt,event:ut})}}function Tt(ut){if(R&&ut.stopPropagation(),Y=!1,Ni.removeEventListener("mousemove",Fe,!1),Ni.removeEventListener("mouseup",Tt,!1),!!F)return F=!1,v({event:ut})}function It(ut){if(ut.button===A0)return R&&ut.stopPropagation(),Y=!0,ne=ut.clientX,pe=ut.clientY,Ni.addEventListener("mousemove",Fe,!1),Ni.addEventListener("mouseup",Tt,!1),t({event:ut})}return It}var ha=function(){function e(r){var t=this,s=r.onDragStart,f=s===void 0?ul:s,d=r.onDragging,v=d===void 0?ul:d,b=r.onDragEnd,O=b===void 0?ul:b,P=r.eventType,R=P===void 0?"":P,F=r.eventCenter,Y=F===void 0?null:F,ne=r.step,pe=ne===void 0?1:ne,Le=r.isStopPropagation,De=Le===void 0?!0:Le,Fe=r.model,Tt=Fe===void 0?null:Fe,It=r.data,ut=It===void 0?null:It;GN(this,e),Pn(this,"onDragStart",void 0),Pn(this,"onDragging",void 0),Pn(this,"onDragEnd",void 0),Pn(this,"step",void 0),Pn(this,"isStopPropagation",void 0),Pn(this,"isDragging",!1),Pn(this,"isStartDragging",!1),Pn(this,"startX",0),Pn(this,"startY",0),Pn(this,"sumDeltaX",0),Pn(this,"sumDeltaY",0),Pn(this,"eventType",void 0),Pn(this,"eventCenter",void 0),Pn(this,"model",void 0),Pn(this,"data",void 0),Pn(this,"startTime",void 0),Pn(this,"handleMouseDown",function(Ft){var Pt,er;if(Ft.button===A0){t.isStopPropagation&&Ft.stopPropagation(),t.isStartDragging=!0,t.startX=Ft.clientX,t.startY=Ft.clientY,Ni.addEventListener("mousemove",t.handleMouseMove,!1),Ni.addEventListener("mouseup",t.handleMouseUp,!1);var wt=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEDOWN")],{e:Ft,data:t.data||wt}),t.startTime=new Date().getTime()}}),Pn(this,"handleMouseMove",function(Ft){if(t.isStopPropagation&&Ft.stopPropagation(),!!t.isStartDragging&&(t.sumDeltaX+=Ft.clientX-t.startX,t.sumDeltaY+=Ft.clientY-t.startY,t.startX=Ft.clientX,t.startY=Ft.clientY,t.step<=1||Math.abs(t.sumDeltaX)>t.step||Math.abs(t.sumDeltaY)>t.step)){var Pt,er=t.sumDeltaX%t.step,wt=t.sumDeltaY%t.step,gr=t.sumDeltaX-er,Cr=t.sumDeltaY-wt;t.sumDeltaX=er,t.sumDeltaY=wt;var _n=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();if(!t.isDragging){var Fn;(Fn=t.eventCenter)===null||Fn===void 0||Fn.emit(ze["".concat(t.eventType,"_DRAGSTART")],{e:Ft,data:t.data||_n}),t.onDragStart({event:Ft})}t.isDragging=!0,Promise.resolve().then(function(){var qn,Eo;t.onDragging({deltaX:gr,deltaY:Cr,event:Ft}),(qn=t.eventCenter)===null||qn===void 0||qn.emit(ze["".concat(t.eventType,"_MOUSEMOVE")],{e:Ft,data:t.data||_n}),(Eo=t.eventCenter)===null||Eo===void 0||Eo.emit(ze["".concat(t.eventType,"_DRAG")],{e:Ft,data:t.data||_n})})}}),Pn(this,"handleMouseUp",function(Ft){t.isStartDragging=!1,t.isStopPropagation&&Ft.stopPropagation(),Promise.resolve().then(function(){var Pt,er,wt;Ni.removeEventListener("mousemove",t.handleMouseMove,!1),Ni.removeEventListener("mouseup",t.handleMouseUp,!1);var gr=(Pt=t.model)===null||Pt===void 0?void 0:Pt.getData();(er=t.eventCenter)===null||er===void 0||er.emit(ze["".concat(t.eventType,"_MOUSEUP")],{e:Ft,data:t.data||gr}),t.isDragging&&(t.isDragging=!1,t.onDragEnd({event:Ft}),(wt=t.eventCenter)===null||wt===void 0||wt.emit(ze["".concat(t.eventType,"_DROP")],{e:Ft,data:t.data||gr}))})}),Pn(this,"cancelDrag",function(){Ni.removeEventListener("mousemove",t.handleMouseMove,!1),Ni.removeEventListener("mouseup",t.handleMouseUp,!1),t.onDragEnd({event:null}),t.isDragging=!1}),this.onDragStart=f,this.onDragging=v,this.onDragEnd=O,this.step=pe,this.isStopPropagation=De,this.eventType=R,this.eventCenter=Y,this.model=Tt,this.data=ut}return kN(e,[{key:"setStep",value:function(t){this.step=t}}]),e}(),P0={node:!1,edge:!1},zN={node:!0,edge:!0},HN=function(r){return!r||typeof r=="boolean"?gn(r===!0?zN:P0):gE(gn(P0),r)},We,_0,w0,N0,M0,R0,I0,D0,C0,L0,j0,B0,F0;function G0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function bh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?G0(Object(t),!0).forEach(function(s){Mi(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):G0(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function oc(e,r){return VN(e)||$N(e,r)||k0(e,r)||XN()}function XN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $N(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function VN(e){if(Array.isArray(e))return e}function ll(e){return KN(e)||YN(e)||k0(e)||WN()}function WN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k0(e,r){if(e){if(typeof e=="string")return xg(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xg(e,r)}}function YN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KN(e){if(Array.isArray(e))return xg(e)}function xg(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function ic(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ic=function(t){return typeof t}:ic=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}function ko(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function ZN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function U0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function JN(e,r,t){return r&&U0(e.prototype,r),t&&U0(e,t),e}function Mi(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function sr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Eh=200,z0=(We=function(){function e(r){ZN(this,e),Mi(this,"rootEl",void 0),ko(this,"width",_0,this),ko(this,"height",w0,this),Mi(this,"theme",void 0),Mi(this,"eventCenter",void 0),Mi(this,"modelMap",new Map),Mi(this,"topElement",void 0),Mi(this,"animation",void 0),Mi(this,"idGenerator",void 0),Mi(this,"edgeGenerator",void 0),Mi(this,"nodeMoveRules",[]),ko(this,"edgeType",N0,this),ko(this,"nodes",M0,this),ko(this,"edges",R0,this),ko(this,"overlapMode",I0,this),ko(this,"background",D0,this),ko(this,"transformModel",C0,this),ko(this,"editConfigModel",L0,this),ko(this,"gridSize",j0,this),ko(this,"partial",B0,this),ko(this,"fakerNode",F0,this);var t=r.container,s=r.background,f=s===void 0?{}:s,d=r.grid,v=r.idGenerator,b=r.edgeGenerator,O=r.animation;this.background=f,ic(d)==="object"&&(this.gridSize=d.size),this.rootEl=t,this.editConfigModel=new nt(r),this.eventCenter=new S1,this.transformModel=new dr(this.eventCenter),this.theme=mE(r.style),this.edgeType=r.edgeType||"polyline",this.width=r.width,this.height=r.height,this.animation=HN(O),this.partial=r.partial,this.overlapMode=r.overlapMode||0,this.idGenerator=v,this.edgeGenerator=BN(this,b),this.width=r.width||this.rootEl.getBoundingClientRect().width,this.height=r.height||this.rootEl.getBoundingClientRect().height,this.flowId=fs()}return JN(e,[{key:"nodesMap",get:function(){return this.nodes.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(t,s,f){return t[s.id]={index:f,model:s},t},{})}},{key:"modelsMap",get:function(){return[].concat(ll(this.nodes),ll(this.edges)).reduce(function(t,s){return t[s.id]=s,t},{})}},{key:"sortElements",get:function(){var t=[];this.nodes.forEach(function(O){return t.push(O)}),this.edges.forEach(function(O){return t.push(O)}),t=t.sort(function(O,P){return O.zIndex-P.zIndex});for(var s=[],f=[-Eh,-Eh],d=[this.width+Eh,this.height+Eh],v=0;v<t.length;v++){var b=t[v];b.visible&&(!this.partial||b.isSelected||this.isElementInArea(b,f,d,!1,!1))&&s.push(b)}return s}},{key:"textEditElement",get:function(){var t=this.nodes.find(function(f){return f.state===ct.TEXT_EDIT}),s=this.edges.find(function(f){return f.state===ct.TEXT_EDIT});return t||s}},{key:"selectElements",get:function(){var t=new Map;return this.nodes.forEach(function(s){s.isSelected&&t.set(s.id,s)}),this.edges.forEach(function(s){s.isSelected&&t.set(s.id,s)}),t}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,b=[],O=[];this.nodes.forEach(function(F){return O.push(F)}),this.edges.forEach(function(F){return O.push(F)});for(var P=0;P<O.length;P++){var R=O[P];(!v||R.visible)&&this.isElementInArea(R,t,s,f,d)&&b.push(R)}return b}},{key:"getModel",value:function(t){return this.modelMap.get(t)}},{key:"getNodeModelById",value:function(t){var s;return this.fakerNode&&t===this.fakerNode.id?this.fakerNode:(s=this.nodesMap[t])===null||s===void 0?void 0:s.model}},{key:"getPointByClient",value:function(t){var s=t.x,f=t.y,d=this.rootEl.getBoundingClientRect(),v={x:s-d.left,y:f-d.top},b=this.transformModel.HtmlPointToCanvasPoint([v.x,v.y]),O=oc(b,2),P=O[0],R=O[1];return{domOverlayPosition:v,canvasOverlayPosition:{x:P,y:R}}}},{key:"isElementInArea",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;if(t.BaseType===Ve.NODE){t=t;for(var b=Po(t),O=b.minX,P=b.minY,R=b.maxX,F=b.maxY,Y=[{x:O,y:P},{x:R,y:P},{x:R,y:F},{x:O,y:F}],ne=v,pe=0;pe<Y.length;pe++){var Le=Y[pe],De=Le.x,Fe=Le.y,Tt=this.transformModel.CanvasPointToHtmlPoint([De,Fe]),It=oc(Tt,2);if(De=It[0],Fe=It[1],ig([De,Fe],s,f)!==v){ne=!v;break}}return ne}if(t.BaseType===Ve.EDGE){t=t;var ut=t,Ft=ut.startPoint,Pt=ut.endPoint,er=this.transformModel.CanvasPointToHtmlPoint([Ft.x,Ft.y]),wt=this.transformModel.CanvasPointToHtmlPoint([Pt.x,Pt.y]),gr=ig(er,s,f),Cr=ig(wt,s,f);return d?gr&&Cr:gr||Cr}return!1}},{key:"graphDataToModel",value:function(t){var s=this;(!this.width||!this.height)&&this.resize(),this.nodes=ua(t.nodes,function(f){var d=s.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的节点。"));var v=f.x,b=f.y;return v&&b&&(f.x=ls(v,s.gridSize),f.y=ls(b,s.gridSize),ic(f.text)==="object"&&(f.text.x-=EE(v,s.gridSize),f.text.y-=EE(b,s.gridSize))),new d(f,s)}),this.edges=ua(t.edges,function(f){var d=s.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的边。"));return new d(f,s)})}},{key:"modelToGraphData",value:function(){var t=[];this.edges.forEach(function(f){var d=f.getData();d&&!f.virtual&&t.push(d)});var s=[];return this.nodes.forEach(function(f){var d=f.getData();d&&!f.virtual&&s.push(d)}),{nodes:s,edges:t}}},{key:"modelToHistoryData",value:function(){for(var t=!1,s=[],f=0;f<this.nodes.length;f++){var d=this.nodes[f];if(d.isDragging){t=!0;break}else s.push(d.getHistoryData())}if(t)return!1;for(var v=!1,b=[],O=0;O<this.edges.length;O++){var P=this.edges[O];if(P.isDragging){v=!0;break}else b.push(P.getHistoryData())}return v?!1:{nodes:s,edges:b}}},{key:"getEdgeModelById",value:function(t){var s;return(s=this.edgesMap[t])===null||s===void 0?void 0:s.model}},{key:"getElement",value:function(t){return this.modelsMap[t]}},{key:"getNodeEdges",value:function(t){for(var s=[],f=0;f<this.edges.length;f++){var d=this.edges[f],v=this.edges[f].sourceNodeId===t,b=this.edges[f].targetNodeId===t;(v||b)&&s.push(d)}return s}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=this.selectElements,f={nodes:[],edges:[]};return s.forEach(function(d){if(d.BaseType===Ve.NODE&&f.nodes.push(d.getData()),d.BaseType===Ve.EDGE){var v=d.getData(),b=s.get(v.sourceNodeId)&&s.get(v.targetNodeId);(t||b)&&f.edges.push(v)}}),f}},{key:"updateAttributes",value:function(t,s){var f=this.getElement(t);f.updateAttributes(s)}},{key:"changeNodeId",value:function(t,s){return s||(s=fs()),this.nodesMap[s]?(console.warn("当前流程图已存在节点".concat(s,", 修改失败")),""):this.nodesMap[t]?(this.edges.forEach(function(f){f.sourceNodeId===t&&(f.sourceNodeId=s),f.targetNodeId===t&&(f.targetNodeId=s)}),this.nodesMap[t].model.id=s,s):(console.warn("当前流程图找不到节点".concat(s,", 修改失败")),"")}},{key:"changeEdgeId",value:function(t,s){return s||(s=fs()),this.edgesMap[s]?(console.warn("当前流程图已存在边: ".concat(s,", 修改失败")),""):this.edgesMap[t]?(this.edges.forEach(function(f){f.id===t&&f.changeEdgeId(s)}),s):(console.warn("当前流程图找不到边: ".concat(s,", 修改失败")),"")}},{key:"setFakerNode",value:function(t){this.fakerNode=t}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(t,s){return this.modelMap.set(t,s)}},{key:"toFront",value:function(t){var s,f,d=((s=this.nodesMap[t])===null||s===void 0?void 0:s.model)||((f=this.edgesMap[t])===null||f===void 0?void 0:f.model);if(d){if(this.overlapMode===mt.DEFAULT){var v;(v=this.topElement)===null||v===void 0||v.setZIndex(),d.setZIndex(ir),this.topElement=d}this.overlapMode===mt.INCREASE&&this.setElementZIndex(t,"top")}}},{key:"setElementZIndex",value:function(t,s){var f,d,v=((f=this.nodesMap[t])===null||f===void 0?void 0:f.model)||((d=this.edgesMap[t])===null||d===void 0?void 0:d.model);if(v){var b;typeof s=="number"&&(b=s),s==="top"&&(b=cg()),s==="bottom"&&(b=$1()),v.setZIndex(b)}}},{key:"deleteNode",value:function(t){var s=this.nodesMap[t].model.getData();this.deleteEdgeBySource(t),this.deleteEdgeByTarget(t),this.nodes.splice(this.nodesMap[t].index,1),this.eventCenter.emit(ze.NODE_DELETE,{data:s})}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD,f=Zn(t);f.id&&this.nodesMap[t.id]&&delete f.id;var d=this.getModel(f.type);if(!d)throw new Error("找不到".concat(f.type,"对应的节点，请确认是否已注册此类型节点。"));f.x=ls(f.x,this.gridSize),f.y=ls(f.y,this.gridSize);var v=new d(f,this);this.nodes.push(v);var b=v.getData();return this.eventCenter.emit(s,{data:b}),v}},{key:"cloneNode",value:function(t){var s=this.getNodeModelById(t),f=s.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var d=this.addNode(f);return d.setSelected(!0),s.setSelected(!1),d.getData()}},{key:"moveNode",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("不存在id为".concat(t,"的节点"));return}var b=v.model,O=b.getMoveDistance(s,f,d),P=oc(O,2);s=P[0],f=P[1],this.moveEdge(t,s,f)}},{key:"moveNode2Coordinate",value:function(t,s,f){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,v=this.nodesMap[t];if(!v){console.warn("不存在id为".concat(t,"的节点"));return}var b=v.model,O=b.x,P=b.y,R=s-O,F=f-P;this.moveNode(t,R,F,d)}},{key:"editText",value:function(t){this.setElementStateById(t,ct.TEXT_EDIT)}},{key:"addEdge",value:function(t){var s=Zn(t),f=s.type;f||(f=this.edgeType),s.id&&this.edgesMap[s.id]&&delete s.id;var d=this.getModel(f);if(!d)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var v=new d(bh(bh({},s),{},{type:f}),this),b=v.getData();return this.edges.push(v),this.eventCenter.emit(ze.EDGE_ADD,{data:b}),v}},{key:"moveEdge",value:function(t,s,f){for(var d=0;d<this.edges.length;d++){var v=this.edges[d],b=v.textPosition,O=b.x,P=b.y,R=this.edges[d].sourceNodeId===t,F=this.edges[d].targetNodeId===t;if(R&&v.moveStartPoint(s,f),F&&v.moveEndPoint(s,f),R||F){var Y;if(v.customTextPosition===!0)v.resetTextPosition();else if(v.modelType===Ze.POLYLINE_EDGE&&(Y=v.text)!==null&&Y!==void 0&&Y.value){var ne=v.text,pe=S0(ne,v.points);v.moveText(pe.x-ne.x,pe.y-ne.y)}else{var Le=v.textPosition,De=Le.x,Fe=Le.y;v.moveText(De-O,Fe-P)}}}}},{key:"deleteEdgeBySourceAndTarget",value:function(t,s){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===t&&this.edges[f].targetNodeId===s){var d=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeById",value:function(t){var s=this.edgesMap[t];if(s){var f=this.edgesMap[t].index,d=this.edgesMap[t].model.getData();this.edges.splice(f,1),this.eventCenter.emit(ze.EDGE_DELETE,{data:d})}}},{key:"deleteEdgeBySource",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].sourceNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(t){for(var s=0;s<this.edges.length;s++)if(this.edges[s].targetNodeId===t){var f=this.edges[s].getData();this.edges.splice(s,1),s--,this.eventCenter.emit(ze.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(t,s,f){this.nodes.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)}),this.edges.forEach(function(d){d.id===t?d.setElementState(s,f):d.setElementState(ct.DEFAULT)})}},{key:"updateText",value:function(t,s){this.nodes.forEach(function(f){f.id===t&&f.updateText(s)}),this.edges.forEach(function(f){f.id===t&&f.updateText(s)})}},{key:"selectNodeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.nodesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectEdgeById",value:function(t){var s,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;f||this.clearSelectElements();var d=(s=this.edgesMap[t])===null||s===void 0?void 0:s.model;d==null||d.setSelected(!0)}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s||this.clearSelectElements();var f=this.getElement(t);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){if(this.selectElements.forEach(function(s){s==null||s.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===mt.DEFAULT){var t;(t=this.topElement)===null||t===void 0||t.setZIndex()}}},{key:"moveNodes",value:function(t,s,f){for(var d=this,v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,b=t.reduce(function(De,Fe){var Tt=d.nodesMap[Fe].model,It=Tt.getMoveDistance(s,f,v);return De[Fe]=It,De},{}),O=0;O<this.edges.length;O++){var P=this.edges[O],R=b[P.sourceNodeId],F=void 0,Y=void 0;if(R){var ne=oc(R,2);F=ne[0],Y=ne[1],P.moveStartPoint(F,Y)}var pe=b[P.sourceNodeId];if(pe){var Le=oc(pe,2);F=Le[0],Y=Le[1],P.moveEndPoint(F,Y)}(R||pe)&&P.moveText(F,Y)}}},{key:"addNodeMoveRules",value:function(t){this.nodeMoveRules.includes(t)||this.nodeMoveRules.push(t)}},{key:"setDefaultEdgeType",value:function(t){this.edgeType=t}},{key:"changeNodeType",value:function(t,s){var f=this.getNodeModelById(t);if(!f){console.warn("找不到id为".concat(t,"的节点"));return}var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("找不到".concat(s,"对应的节点，请确认是否已注册此类型节点。"));var b=new v(d,this);this.nodes.splice(this.nodesMap[t].index,1,b);var O=this.getNodeEdges(t);O.forEach(function(P){if(P.sourceNodeId===t){var R=wE(b,P.startPoint,b.width,b.height);P.updateStartPoint(R)}if(P.targetNodeId===t){var F=wE(b,P.endPoint,b.width,b.height);P.updateEndPoint(F)}})}},{key:"changeEdgeType",value:function(t,s){var f=this.getEdgeModelById(t);if(!f){console.warn("找不到id为".concat(t,"的边"));return}if(f.type!==s){var d=f.getData();d.type=s;var v=this.getModel(s);if(!v)throw new Error("找不到".concat(s,"对应的节点，请确认是否已注册此类型节点。"));delete d.pointsList;var b=new v(d,this);this.edges.splice(this.edgesMap[t].index,1,b)}}},{key:"getNodeIncomingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.targetNodeId===t&&s.push(f)}),s}},{key:"getNodeOutgoingEdge",value:function(t){var s=[];return this.edges.forEach(function(f){f.sourceNodeId===t&&s.push(f)}),s}},{key:"getNodeIncomingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.targetNodeId===t&&f.push(s.nodesMap[d.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(t){var s=this,f=[];return this.edges.forEach(function(d){d.sourceNodeId===t&&f.push(s.nodesMap[d.targetNodeId].model)}),f}},{key:"setTheme",value:function(t){this.theme=mE(bh(bh({},this.theme),t))}},{key:"resize",value:function(t,s){this.width=t||this.rootEl.getBoundingClientRect().width,this.height=s||this.rootEl.getBoundingClientRect().height,(!this.width||!this.height)&&console.warn("渲染画布的时候无法获取画布宽高，请确认在container已挂载到DOM。@see https://github.com/didi/LogicFlow/issues/675")}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var t=this.nodes,s=[],f=[];t.forEach(function(ne){var pe=ne.x,Le=ne.y,De=ne.width,Fe=ne.height,Tt=ne.getNodeStyle(),It=Tt.strokeWidth,ut=It===void 0?0:It;s=s.concat([pe+De/2+ut,pe-De/2-ut]),f=f.concat([Le+Fe/2+ut,Le-Fe/2-ut])});var d=Math.min.apply(Math,ll(s)),v=Math.max.apply(Math,ll(s)),b=Math.min.apply(Math,ll(f)),O=Math.max.apply(Math,ll(f)),P=v-d||0,R=O-b||0,F=d+P/2,Y=b+R/2;return{virtualRectWidth:P,virtualRectHeight:R,virtualRectCenterPositionX:F,virtualRectCenterPositionY:Y}}},{key:"translateCenter",value:function(){var t=this.nodes,s=this.width,f=this.height,d=this.rootEl,v=this.transformModel;if(t.length){var b=s||d.clientWidth,O=f||d.clientHeight,P=this.getVirtualRectSize(),R=P.virtualRectCenterPositionX,F=P.virtualRectCenterPositionY;v.focusOn(R,F,b,O)}}},{key:"fitView",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,d=this.width,v=this.height,b=this.rootEl,O=this.transformModel;if(f.length){var P=d||b.clientWidth,R=v||b.clientHeight,F=this.getVirtualRectSize(),Y=F.virtualRectWidth,ne=F.virtualRectHeight,pe=F.virtualRectCenterPositionX,Le=F.virtualRectCenterPositionY,De=(Y+s)/P,Fe=(ne+t)/R,Tt=0;Tt=1/Math.max(De,Fe);var It=[P/2,R/2];O.zoom(Tt,It),O.focusOn(pe,Le,P,R)}}},{key:"openEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(t){var s=this.getEdgeModelById(t);s.closeEdgeAnimation()}}]),e}(),_0=sr(We.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w0=sr(We.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N0=sr(We.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M0=sr(We.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R0=sr(We.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I0=sr(We.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.DEFAULT}}),D0=sr(We.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C0=sr(We.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L0=sr(We.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j0=sr(We.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B0=sr(We.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F0=sr(We.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr(We.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"nodesMap"),We.prototype),sr(We.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"edgesMap"),We.prototype),sr(We.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"modelsMap"),We.prototype),sr(We.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"sortElements"),We.prototype),sr(We.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"textEditElement"),We.prototype),sr(We.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(We.prototype,"selectElements"),We.prototype),sr(We.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setFakerNode"),We.prototype),sr(We.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"removeFakerNode"),We.prototype),sr(We.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setModel"),We.prototype),sr(We.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"toFront"),We.prototype),sr(We.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementZIndex"),We.prototype),sr(We.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteNode"),We.prototype),sr(We.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addNode"),We.prototype),sr(We.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"cloneNode"),We.prototype),sr(We.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode"),We.prototype),sr(We.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNode2Coordinate"),We.prototype),sr(We.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"editText"),We.prototype),sr(We.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"addEdge"),We.prototype),sr(We.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveEdge"),We.prototype),sr(We.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySourceAndTarget"),We.prototype),sr(We.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeById"),We.prototype),sr(We.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeBySource"),We.prototype),sr(We.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"deleteEdgeByTarget"),We.prototype),sr(We.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setElementStateById"),We.prototype),sr(We.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"updateText"),We.prototype),sr(We.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectNodeById"),We.prototype),sr(We.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectEdgeById"),We.prototype),sr(We.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"selectElementById"),We.prototype),sr(We.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearSelectElements"),We.prototype),sr(We.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"moveNodes"),We.prototype),sr(We.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setDefaultEdgeType"),We.prototype),sr(We.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeNodeType"),We.prototype),sr(We.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"changeEdgeType"),We.prototype),sr(We.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingEdge"),We.prototype),sr(We.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingEdge"),We.prototype),sr(We.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeIncomingNode"),We.prototype),sr(We.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"getNodeOutgoingNode"),We.prototype),sr(We.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"setTheme"),We.prototype),sr(We.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"resize"),We.prototype),sr(We.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"clearData"),We.prototype),sr(We.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"translateCenter"),We.prototype),sr(We.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"fitView"),We.prototype),sr(We.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"openEdgeAnimation"),We.prototype),sr(We.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(We.prototype,"closeEdgeAnimation"),We.prototype),We),QN=z0;function Oh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oh=function(t){return typeof t}:Oh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oh(e)}var H0;function Tg(){return Tg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Tg.apply(this,arguments)}function qN(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function X0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function eM(e,r,t){return r&&X0(e.prototype,r),t&&X0(e,t),e}function tM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ag(e,r)}function Ag(e,r){return Ag=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ag(e,r)}function rM(e){var r=oM();return function(){var s=Sh(e),f;if(r){var d=Sh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return nM(this,f)}}function nM(e,r){if(r&&(Oh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sh(e){return Sh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sh(e)}function pa(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var iM=ai(H0=function(e){tM(t,e);var r=rM(t);function t(s){var f;qN(this,t),f=r.call(this),pa(Ri(f),"stepDrag",void 0),pa(Ri(f),"stepScrollX",0),pa(Ri(f),"stepScrollY",0),pa(Ri(f),"onDragging",function(O){var P=O.deltaX,R=O.deltaY;f.setState({isDragging:!0});var F=f.props.graphModel,Y=F.transformModel,ne=F.editConfigModel;ne.stopMoveGraph||Y.translate(P,R)}),pa(Ri(f),"onDragEnd",function(){f.setState({isDragging:!1})}),pa(Ri(f),"zoomHandler",function(O){var P=f.props,R=P.graphModel,F=R.editConfigModel,Y=R.transformModel,ne=R.gridSize,pe=P.graphModel,Le=O.deltaX,De=O.deltaY;if(!F.stopScrollGraph&&O.ctrlKey!==!0){if(O.preventDefault(),f.stepScrollX+=Le,f.stepScrollY+=De,Math.abs(f.stepScrollX)>=ne){var Fe=f.stepScrollX%ne,Tt=f.stepScrollX-Fe;Y.translate(-Tt*Y.SCALE_X,0),f.stepScrollX=Fe}if(Math.abs(f.stepScrollY)>=ne){var It=f.stepScrollY%ne,ut=f.stepScrollY-It;Y.translate(0,-ut*Y.SCALE_Y),f.stepScrollY=It}return}if(!F.stopZoomGraph){O.preventDefault();var Ft=pe.getPointByClient({x:O.clientX,y:O.clientY}),Pt=Ft.canvasOverlayPosition,er=Pt.x,wt=Pt.y;Y.zoom(O.deltaY<0,[er,wt])}}),pa(Ri(f),"clickHandler",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){var R=f.props.graphModel,F=R.selectElements;F.size>0&&R.clearSelectElements(),R.eventCenter.emit(ze.BLANK_CLICK,{e:O})}}),pa(Ri(f),"handleContextMenu",function(O){var P=O.target;if(P.getAttribute("name")==="canvas-overlay"){O.preventDefault();var R=f.props.graphModel,F=R.getPointByClient({x:O.clientX,y:O.clientY});R.eventCenter.emit(ze.BLANK_CONTEXTMENU,{e:O,position:F})}}),pa(Ri(f),"mouseDownHandler",function(O){var P=f.props.graphModel,R=P.eventCenter,F=P.editConfigModel,Y=P.transformModel.SCALE_X,ne=P.gridSize,pe=O.target,Le=!F.adjustEdge&&!F.adjustNodePosition;(pe.getAttribute("name")==="canvas-overlay"||Le)&&(F.stopMoveGraph?R.emit(ze.BLANK_MOUSEDOWN,{e:O}):(f.stepDrag.setStep(ne*Y),f.stepDrag.handleMouseDown(O)),f.clickHandler(O))});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new ha({onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"BLANK",isStopPropagation:!1,eventCenter:b,model:null}),f.state={isDragging:!1},f}return eM(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props,O=b.children,P=b.dnd,R=this.state.isDragging;return Object(Be.g)("svg",Tg({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:R?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},P.eventMap()),Object(Be.g)("g",{transform:v},O))}}]),t}(Be.a))||H0,aM=iM;function xh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xh=function(t){return typeof t}:xh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xh(e)}var $0;function sM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function V0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function uM(e,r,t){return r&&V0(e.prototype,r),t&&V0(e,t),e}function lM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Pg(e,r)}function Pg(e,r){return Pg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Pg(e,r)}function fM(e){var r=hM();return function(){var s=Th(e),f;if(r){var d=Th(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return cM(this,f)}}function cM(e,r){if(r&&(xh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dM(e)}function dM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Th(e){return Th=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Th(e)}var pM=ai($0=function(e){lM(t,e);var r=fM(t);function t(){return sM(this,t),r.apply(this,arguments)}return uM(t,[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=d.getTools(),O=b.map(function(P){return Object(Be.g)(P,{graphModel:v,logicFlow:d.instance})});return d.components=O,O}},{key:"triggerToolRender",value:function(){var f=this.props,d=f.tool,v=f.graphModel,b=document.querySelector("#ToolOverlay_".concat(v.flowId)),O=d.getInstance();O.components.forEach(function(P){return P(O,b)}),O.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Be.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}]),t}(Be.a))||$0;function Ah(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(t){return typeof t}:Ah=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ah(e)}function vM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function W0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function yM(e,r,t){return r&&W0(e.prototype,r),t&&W0(e,t),e}function gM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&_g(e,r)}function _g(e,r){return _g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},_g(e,r)}function mM(e){var r=OM();return function(){var s=Ph(e),f;if(r){var d=Ph(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return bM(this,f)}}function bM(e,r){if(r&&(Ah(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EM(e)}function EM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ph(e){return Ph=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ph(e)}var SM=function(e){gM(t,e);var r=mM(t);function t(){return vM(this,t),r.apply(this,arguments)}return yM(t,[{key:"render",value:function(){var f=this.props.background;return Object(Be.g)("div",{className:"lf-background"},Object(Be.g)("div",{style:f,className:"lf-background-area"}))}}]),t}(Be.a);function _h(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_h=function(t){return typeof t}:_h=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}var Y0;function xM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function K0(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function TM(e,r,t){return r&&K0(e.prototype,r),t&&K0(e,t),e}function AM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&wg(e,r)}function wg(e,r){return wg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},wg(e,r)}function PM(e){var r=wM();return function(){var s=wh(e),f;if(r){var d=wh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return _M(this,f)}}function _M(e,r){if(r&&(_h(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z0(e)}function Z0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wh(e){return wh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wh(e)}function NM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var J0=ai(Y0=function(e){AM(t,e);var r=PM(t);function t(){var s;xM(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),NM(Z0(s),"id",fs()),s}return TM(t,[{key:"renderDot",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?2:b,P=f.size,R=f.visible,F=Math.min(Math.max(2,O),P/2),Y=1;return R||(Y=0),Object(Be.g)("rect",{width:F,height:F,rx:F/2,ry:F/2,fill:v,opacity:Y})}},{key:"renderMesh",value:function(){var f=this.props,d=f.config,v=d.color,b=d.thickness,O=b===void 0?1:b,P=f.size,R=f.visible,F=Math.min(Math.max(1,O),P/2),Y="M ".concat(P," 0 H0 M0 0 V0 ").concat(P),ne=1;return R||(ne=0),Object(Be.g)("path",{d:Y,stroke:v,strokeWidth:F,opacity:ne})}},{key:"render",value:function(){var f=this.props,d=f.type,v=f.size,b=f.graphModel.transformModel,O=b.SCALE_X,P=b.SKEW_Y,R=b.SKEW_X,F=b.SCALE_Y,Y=b.TRANSLATE_X,ne=b.TRANSLATE_Y,pe=[O,P,R,F,Y,ne].join(","),Le="matrix(".concat(pe,")");return Object(Be.g)("div",{className:"lf-grid"},Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Be.g)("defs",null,Object(Be.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:Le,x:"0",y:"0",width:v,height:v},d==="dot"&&this.renderDot(),d==="mesh"&&this.renderMesh())),Object(Be.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}]),t}(Be.a))||Y0;J0.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},o(52);function Nh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nh=function(t){return typeof t}:Nh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nh(e)}function MM(e,r){return CM(e)||DM(e,r)||IM(e,r)||RM()}function RM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IM(e,r){if(e){if(typeof e=="string")return Q0(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q0(e,r)}}function Q0(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function DM(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function CM(e){if(Array.isArray(e))return e}function LM(e){var r={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(e).forEach(function(t){var s=MM(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Nh(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("line",r)}var fl=LM;function Mh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mh=function(t){return typeof t}:Mh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mh(e)}var q0;function eO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Rh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?eO(Object(t),!0).forEach(function(s){jM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function jM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function BM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function FM(e,r,t){return r&&tO(e.prototype,r),t&&tO(e,t),e}function GM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ng(e,r)}function Ng(e,r){return Ng=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ng(e,r)}function kM(e){var r=HM();return function(){var s=Ih(e),f;if(r){var d=Ih(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return UM(this,f)}}function UM(e,r){if(r&&(Mh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zM(e)}function zM(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HM(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ih(e){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ih(e)}var XM=ai(q0=function(e){GM(t,e);var r=kM(t);function t(){return BM(this,t),r.apply(this,arguments)}return FM(t,[{key:"render",value:function(){var f=this.props.snaplineModel,d=f.position,v=f.isShowHorizontal,b=f.isShowVertical,O=f.getStyle(),P=d.x,R=P===void 0?0:P,F=d.y,Y=F===void 0?0:F,ne=Rh(Rh({x1:-1e5,y1:Y,x2:1e5,y2:Y},O),{},{stroke:v?O.stroke:"none"}),pe=Rh(Rh({x1:R,y1:-1e5,x2:R,y2:1e5},O),{},{stroke:b?O.stroke:"none"});return Object(Be.g)("g",{className:"lf-snapline"},Object(Be.g)(fl,ne),Object(Be.g)(fl,pe))}}]),t}(Be.a))||q0;function Dh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dh=function(t){return typeof t}:Dh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(e)}function $M(e,r){return KM(e)||YM(e,r)||WM(e,r)||VM()}function VM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WM(e,r){if(e){if(typeof e=="string")return rO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rO(e,r)}}function rO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function YM(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function KM(e){if(Array.isArray(e))return e}function hs(e){var r=e.x,t=e.y,s=e.width,f=e.height,d=e.className,v=e.radius,b=r-s/2,O=t-f/2,P={};return Object.entries(e).forEach(function(R){var F=$M(R,2),Y=F[0],ne=F[1],pe=Dh(ne);pe!=="object"&&(P[Y]=ne)}),d?P.className="lf-basic-shape ".concat(d):P.className="lf-basic-shape",v&&(P.rx=v,P.ry=v),P.x=b,P.y=O,Object(Be.g)("rect",P)}hs.defaultProps={className:"",radius:""};function Ch(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ch=function(t){return typeof t}:Ch=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(e)}var nO;function cl(){return cl=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cl.apply(this,arguments)}function oO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function iO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?oO(Object(t),!0).forEach(function(s){ZM(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function ZM(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function JM(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function aO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function QM(e,r,t){return r&&aO(e.prototype,r),t&&aO(e,t),e}function qM(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Mg(e,r)}function Mg(e,r){return Mg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Mg(e,r)}function eR(e){var r=nR();return function(){var s=Lh(e),f;if(r){var d=Lh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return tR(this,f)}}function tR(e,r){if(r&&(Ch(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rR(e)}function rR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lh(e){return Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lh(e)}var oR=ai(nO=function(e){qM(t,e);var r=eR(t);function t(){return JM(this,t),r.apply(this,arguments)}return QM(t,[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,d=f.nodes,v=f.editConfigModel,b=v.hoverOutline,O=v.nodeSelectedOutline,P=[];return d.forEach(function(R){if(R.isHovered||R.isSelected){var F=R.isHovered,Y=R.isSelected,ne=R.x,pe=R.y,Le=R.width,De=R.height;if(O&&Y||b&&F){var Fe=R.getOutlineStyle(),Tt={};if(Object.keys(Fe).forEach(function(ut){ut!=="hover"&&(Tt[ut]=Fe[ut])}),F){var It=Fe.hover;Tt=iO(iO({},Tt),It)}P.push(Object(Be.g)(hs,cl({className:"lf-outline-node",x:ne,y:pe,width:Le+10,height:De+10},Tt)))}}}),P}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,d=f.edges,v=f.editConfigModel,b=v.edgeSelectedOutline,O=v.hoverOutline,P=[],R=0;R<d.length;R++){var F=d[R];(b&&F.isSelected||O&&F.isHovered)&&(F.modelType===Ze.LINE_EDGE?P.push(this.getLineOutline(F)):F.modelType===Ze.POLYLINE_EDGE?P.push(this.getPolylineOutline(F)):F.modelType===Ze.BEZIER_EDGE&&P.push(this.getBezierOutline(F)))}return P}},{key:"getLineOutline",value:function(f){var d=f.startPoint,v=f.endPoint,b=(d.x+v.x)/2,O=(d.y+v.y)/2,P=Math.abs(d.x-v.x)+10,R=Math.abs(d.y-v.y)+10,F=f.getOutlineStyle();return Object(Be.g)(hs,cl({className:"lf-outline-edge",x:b,y:O,width:P,height:R},F))}},{key:"getPolylineOutline",value:function(f){var d=f.points,v=sl(d),b=rc(v,8),O=b.x,P=b.y,R=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(hs,cl({className:"lf-outline",x:O,y:P,width:R,height:F},Y))}},{key:"getBezierOutline",value:function(f){var d=f.path,v=gh(d),b=rc(v,8),O=b.x,P=b.y,R=b.width,F=b.height,Y=f.getOutlineStyle();return Object(Be.g)(hs,cl({className:"lf-outline",x:O,y:P,width:R,height:F},Y))}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}]),t}(Be.a))||nO;function jh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(t){return typeof t}:jh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}function iR(e,r){return lR(e)||uR(e,r)||sR(e,r)||aR()}function aR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sR(e,r){if(e){if(typeof e=="string")return sO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sO(e,r)}}function sO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function uR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function lR(e){if(Array.isArray(e))return e}function ac(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.r,v=d===void 0?4:d,b=e.className,O={cx:t,cy:f,r:v,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(P){var R=iR(P,2),F=R[0],Y=R[1],ne=jh(Y);ne!=="object"&&(O[F]=Y)}),b?O.className="lf-basic-shape ".concat(b):O.className="lf-basic-shape",Object(Be.g)("circle",O)}function Bh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bh=function(t){return typeof t}:Bh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(e)}var uO;function fR(e,r){return pR(e)||hR(e,r)||dR(e,r)||cR()}function cR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dR(e,r){if(e){if(typeof e=="string")return lO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lO(e,r)}}function lO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function hR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function pR(e){if(Array.isArray(e))return e}function sc(){return sc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},sc.apply(this,arguments)}function fO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function dO(e,r,t){return r&&cO(e.prototype,r),t&&cO(e,t),e}function hO(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Rg(e,r)}function Rg(e,r){return Rg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Rg(e,r)}function pO(e){var r=yR();return function(){var s=Gh(e),f;if(r){var d=Gh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return vR(this,f)}}function vR(e,r){if(r&&(Bh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fh(e)}function Fh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gh(e)}function Ig(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var vO=function(e){hO(t,e);var r=pO(t);function t(){var s;return fO(this,t),s=r.call(this),Ig(Fh(s),"dragHandler",void 0),Ig(Fh(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.bezierModel,P=v.type,R=b.getPointByClient({x:d.clientX,y:d.clientY}),F=R.canvasOverlayPosition,Y=F.x,ne=F.y;O.updateAdjustAnchor({x:Y,y:ne},P)}),Ig(Fh(s),"onDragEnd",function(){var f=s.props.bezierModel;f.isDragging=!1}),s.dragHandler=new ha({onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return dO(t,[{key:"render",value:function(){var f=this,d=this.props.position,v=d.x,b=d.y,O=this.props.bezierModel,P=O.getEdgeStyle(),R=P.adjustAnchor;return Object(Be.g)(ac,sc({className:"lf-bezier-adjust-anchor",x:v,y:b},R,{onMouseDown:function(Y){f.dragHandler.handleMouseDown(Y)}}))}}]),t}(Be.a),gR=ai(uO=function(e){hO(t,e);var r=pO(t);function t(){return fO(this,t),r.apply(this,arguments)}return dO(t,[{key:"getBezierAdjust",value:function(f,d){var v=f.path,b=f.id,O=gh(v),P=fR(O,4),R=P[0],F=P[1],Y=P[2],ne=P[3],pe=f.getEdgeStyle(),Le=pe.adjustLine,De=[];return De.push(Object(Be.g)(fl,sc({x1:R.x,y1:R.y,x2:F.x,y2:F.y},Le))),De.push(Object(Be.g)(vO,{position:F,bezierModel:f,graphModel:d,key:"".concat(b,"_ePre"),type:"sNext"})),De.push(Object(Be.g)(fl,sc({x1:ne.x,y1:ne.y,x2:Y.x,y2:Y.y},Le))),De.push(Object(Be.g)(vO,{position:Y,bezierModel:f,graphModel:d,key:"".concat(b,"_sNext"),type:"ePre"})),De}},{key:"selectedBezierEdge",value:function(){for(var f=this.props.graphModel,d=f.edges,v=[],b=0;b<d.length;b++){var O=d[b];O.isSelected&&O.modelType===Ze.BEZIER_EDGE&&O.draggable&&v.push(this.getBezierAdjust(O,f))}return v}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),t}(Be.a))||uO;function kh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kh=function(t){return typeof t}:kh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kh(e)}var yO;function mR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function gO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function bR(e,r,t){return r&&gO(e.prototype,r),t&&gO(e,t),e}function ER(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Dg(e,r)}function Dg(e,r){return Dg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Dg(e,r)}function OR(e){var r=TR();return function(){var s=Uh(e),f;if(r){var d=Uh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return SR(this,f)}}function SR(e,r){if(r&&(kh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xR(e)}function xR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Uh(e)}var AR=ai(yO=function(e){ER(t,e);var r=OR(t);function t(){return mR(this,t),r.apply(this,arguments)}return bR(t,[{key:"render",value:function(){var f=this.props.graphModel.transformModel,d=f.getTransformStyle(),v=d.transform,b=this.props.children;return Object(Be.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Be.g)("g",{transform:v},b))}}]),t}(Be.a))||yO;function zh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zh=function(t){return typeof t}:zh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zh(e)}var mO;function Cg(){return Cg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cg.apply(this,arguments)}function PR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function bO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _R(e,r,t){return r&&bO(e.prototype,r),t&&bO(e,t),e}function wR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Lg(e,r)}function Lg(e,r){return Lg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Lg(e,r)}function NR(e){var r=IR();return function(){var s=Hh(e),f;if(r){var d=Hh(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return MR(this,f)}}function MR(e,r){if(r&&(zh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RR(e)}function RR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hh(e){return Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hh(e)}var DR=ai(mO=function(e){wR(t,e);var r=NR(t);function t(){return PR(this,t),r.apply(this,arguments)}return _R(t,[{key:"getComponent",value:function(f,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",b=this.props.getView,O=b(f.type);return Object(Be.g)(O,{key:f.id,model:f,graphModel:d,overlay:v})}},{key:"render",value:function(){var f=this,d=this.props,v=d.graphModel,b=d.tool,O=d.options,P=d.dnd,R=d.snaplineModel,F={};O.width&&(F.width="".concat(v.width,"px")),O.height&&(F.height="".concat(v.height,"px"));var Y=O.grid,ne=v.fakerNode,pe=v.editConfigModel,Le=pe.adjustEdge;return Object(Be.g)("div",{className:"lf-graph","flow-id":v.flowId,style:F},Object(Be.g)(aM,{graphModel:v,dnd:P},Object(Be.g)("g",{className:"lf-base"},ua(v.sortElements,function(De){return f.getComponent(De,v)})),ne?this.getComponent(ne,v):""),Object(Be.g)(AR,{graphModel:v},Object(Be.g)(oR,{graphModel:v}),Le?Object(Be.g)(gR,{graphModel:v}):"",O.snapline!==!1?Object(Be.g)(XM,{snaplineModel:R}):""),Object(Be.g)(pM,{graphModel:v,tool:b}),O.background&&Object(Be.g)(SM,{background:O.background}),O.grid&&Object(Be.g)(J0,Cg({},Y,{graphModel:v})))}}]),t}(Be.a))||mO,CR=DR;function EO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Xh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?EO(Object(t),!0).forEach(function(s){va(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):EO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function LR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function OO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function jR(e,r,t){return r&&OO(e.prototype,r),t&&OO(e,t),e}function va(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var BR=function(){function e(r){var t=this;LR(this,e),va(this,"nodeConfig",void 0),va(this,"lf",void 0),va(this,"fakerNode",void 0),va(this,"stopDrag",function(){t.nodeConfig=null,window.document.removeEventListener("mouseup",t.stopDrag)}),va(this,"dragEnter",function(f){!t.nodeConfig||t.fakerNode||(t.fakerNode=t.lf.createFakerNode(Xh(Xh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY}))))}),va(this,"onDragOver",function(f){if(f.preventDefault(),t.fakerNode){var d=t.clientToLocalPoint({x:f.clientX,y:f.clientY}),v=d.x,b=d.y;t.fakerNode.moveTo(v,b);var O=t.fakerNode.getData();t.lf.setNodeSnapLine(O),t.lf.graphModel.eventCenter.emit(ze.NODE_DND_DRAG,{data:O})}return!1}),va(this,"onDragLeave",function(){t.fakerNode&&(t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null)}),va(this,"onDrop",function(f){if(!(!t.lf.graphModel||!f||!t.nodeConfig)){var d=t.lf.addNode(Xh(Xh({},t.nodeConfig),t.clientToLocalPoint({x:f.clientX,y:f.clientY})),ze.NODE_DND_ADD);f.preventDefault(),f.stopPropagation(),t.nodeConfig=null,t.lf.removeNodeSnapLine(),t.lf.graphModel.removeFakerNode(),t.fakerNode=null,d.getData()}});var s=r.lf;this.lf=s}return jR(e,[{key:"clientToLocalPoint",value:function(t){var s=t.x,f=t.y,d=ts(this.lf.options,["grid","size"]),v=this.lf.graphModel.getPointByClient({x:s,y:f}),b=v.canvasOverlayPosition,O=b.x,P=b.y;return{x:ls(O,d),y:ls(P,d)}}},{key:"startDrag",value:function(t){this.nodeConfig=t,window.document.addEventListener("mouseup",this.stopDrag)}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}]),e}();function SO(e){var r=e.container,t=e.grid,s=e.width,f=e.height;if(!r)throw new Error("请检查 container 参数是否有效");if(typeof s=="string"||typeof f=="string")throw new Error("width或height不支持传入字符串，请传数字");return t&&(e.grid=Mn({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},t)),Mn({},xO,e)}var xO={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function $h(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$h=function(t){return typeof t}:$h=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$h(e)}var Gr,TO;function jg(e,r){return UR(e)||kR(e,r)||GR(e,r)||FR()}function FR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GR(e,r){if(e){if(typeof e=="string")return AO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AO(e,r)}}function AO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function kR(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function UR(e){if(Array.isArray(e))return e}function PO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Vh(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?PO(Object(t),!0).forEach(function(s){wO(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):PO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function zR(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function HR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _O(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function XR(e,r,t){return r&&_O(e.prototype,r),t&&_O(e,t),e}function dl(){return typeof Reflect<"u"&&Reflect.get?dl=Reflect.get:dl=function(r,t,s){var f=$R(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},dl.apply(this,arguments)}function $R(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ps(e),e!==null););return e}function VR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Bg(e,r)}function Bg(e,r){return Bg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Bg(e,r)}function WR(e){var r=KR();return function(){var s=ps(e),f;if(r){var d=ps(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return YR(this,f)}}function YR(e,r){if(r&&($h(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(e)}function Wh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KR(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ps(e){return ps=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ps(e)}function wO(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ni(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Fg=(Gr=function(e){VR(t,e);var r=WR(t);function t(){var s;HR(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),wO(Wh(s),"modelType",Ze.BEZIER_EDGE),zR(Wh(s),"path",TO,Wh(s)),s}return XR(t,[{key:"initEdgeData",value:function(f){this.offset=100,dl(ps(t.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier,d=dl(ps(t.prototype),"getEdgeStyle",this).call(this);return Vh(Vh({},d),gn(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,d=0;return this.pointsList.forEach(function(v){var b=v.x,O=v.y;f+=b,d+=O}),{x:f/this.pointsList.length,y:d/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=dl(ps(t.prototype),"getData",this).call(this),d=this.pointsList.map(function(v){var b=v.x,O=v.y;return{x:b,y:O}});return Vh(Vh({},f),{},{pointsList:d})}},{key:"getControls",value:function(){var f=this.startPoint,d=this.endPoint,v=O0({start:f,end:d,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset});return v}},{key:"getPath",value:function(f){var d=jg(f,4),v=d[0],b=d[1],O=d[2],P=d[3];return"M ".concat(v.x," ").concat(v.y,`
    C `).concat(b.x," ").concat(b.y,`,
    `).concat(O.x," ").concat(O.y,`,
    `).concat(P.x," ").concat(P.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),d=f.sNext,v=f.ePre;this.updatePath(d,v)}},{key:"updatePath",value:function(f,d){var v={x:this.startPoint.x,y:this.startPoint.y},b={x:this.endPoint.x,y:this.endPoint.y};if(!f||!d){var O=this.getControls();f=O.sNext,d=O.ePre}this.pointsList=[v,f,d,b],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=f,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=f,this.updatePoints()}},{key:"moveStartPoint",value:function(f,d){this.startPoint.x+=f,this.startPoint.y+=d;var v=jg(this.pointsList,3),b=v[1],O=v[2];b.x+=f,b.y+=d,this.updatePath(b,O)}},{key:"moveEndPoint",value:function(f,d){this.endPoint.x+=f,this.endPoint.y+=d;var v=jg(this.pointsList,3),b=v[1],O=v[2];O.x+=f,O.y+=d,this.updatePath(b,O)}},{key:"updateAdjustAnchor",value:function(f,d){d==="sNext"?this.pointsList[1]=f:d==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var d=f.startPoint,v=f.endPoint,b=f.sourceNode,O=f.targetNode,P=O0({start:d,end:v,sourceNode:b,targetNode:O,offset:this.offset}),R=P.sNext,F=P.ePre;this.pointsList=[d,R,F,v],this.initPoints()}}]),t}(hg),TO=ni(Gr.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ni(Gr.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"initPoints"),Gr.prototype),ni(Gr.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updatePoints"),Gr.prototype),ni(Gr.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateStartPoint"),Gr.prototype),ni(Gr.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateEndPoint"),Gr.prototype),ni(Gr.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveStartPoint"),Gr.prototype),ni(Gr.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"moveEndPoint"),Gr.prototype),ni(Gr.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAdjustAnchor"),Gr.prototype),ni(Gr.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustStart"),Gr.prototype),ni(Gr.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"getAdjustEnd"),Gr.prototype),ni(Gr.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Gr.prototype,"updateAfterAdjustStartAndEnd"),Gr.prototype),Gr);function ZR(e){return e==null}var JR=ZR,Bt,NO,MO,RO,IO,DO,CO,LO,jO,BO,FO,GO,kO,UO,zO,HO,XO,$O,VO,WO;function Yh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yh=function(t){return typeof t}:Yh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yh(e)}function QR(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=qR(e))||r&&e&&typeof e.length=="number"){t&&(e=t);var s=0,f=function(){};return{s:f,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(P){throw P},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d=!0,v=!1,b;return{s:function(){t=t.call(e)},n:function(){var P=t.next();return d=P.done,P},e:function(P){v=!0,b=P},f:function(){try{!d&&t.return!=null&&t.return()}finally{if(v)throw b}}}}function qR(e,r){if(e){if(typeof e=="string")return YO(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YO(e,r)}}function YO(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function KO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function lo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?KO(Object(t),!0).forEach(function(s){bo(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):KO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Rn(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function eI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ZO(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function tI(e,r,t){return r&&ZO(e.prototype,r),t&&ZO(e,t),e}function bo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Mr(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var ya=(Bt=function(){function e(r,t){eI(this,e),bo(this,"id",""),Rn(this,"type",NO,this),Rn(this,"x",MO,this),Rn(this,"y",RO,this),Rn(this,"text",IO,this),Rn(this,"properties",DO,this),Rn(this,"_width",CO,this),Rn(this,"_height",LO,this),Rn(this,"anchorsOffset",jO,this),Rn(this,"isSelected",BO,this),Rn(this,"isHovered",FO,this),Rn(this,"isShowAnchor",GO,this),Rn(this,"isDragging",kO,this),Rn(this,"isHitable",UO,this),Rn(this,"draggable",zO,this),Rn(this,"visible",HO,this),bo(this,"virtual",!1),bo(this,"graphModel",void 0),Rn(this,"zIndex",XO,this),Rn(this,"state",$O,this),Rn(this,"autoToFront",VO,this),Rn(this,"style",WO,this),bo(this,"BaseType",Ve.NODE),bo(this,"modelType",Ze.NODE),bo(this,"additionStateData",void 0),bo(this,"targetRules",[]),bo(this,"sourceRules",[]),bo(this,"moveRules",[]),bo(this,"hasSetTargetRules",!1),bo(this,"hasSetSourceRules",!1),this.graphModel=t,this.initNodeData(r),this.setAttributes()}return tI(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(t){if(t.properties||(t.properties={}),!t.id){var s=this.graphModel.idGenerator,f=s&&s(t.type),d=this.createId();t.id=d||f||fs()}this.formatText(t),Mn(this,z1(t));var v=this.graphModel.overlapMode;v===mt.INCREASE&&(this.zIndex=t.zIndex||cg())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(t){t.text||(t.text={value:"",x:t.x,y:t.y,draggable:!1,editable:!0}),t.text&&typeof t.text=="string"?t.text={value:t.text,x:t.x,y:t.y,draggable:!1,editable:!0}:t.text&&t.text.editable===void 0&&(t.text.editable=!0)}},{key:"getData",value:function(){var t=this.text,s=t.x,f=t.y,d=t.value,v=this.properties;Object(c.x)(v)&&(v=Object(c.I)(v));var b={id:this.id,type:this.type,x:this.x,y:this.y,properties:v};return this.graphModel.overlapMode===mt.INCREASE&&(b.zIndex=this.zIndex),d&&(b.text={x:s,y:f,value:d}),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getNodeStyle",value:function(){return lo(lo({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var t=this.graphModel.theme.nodeText;return gn(t)}},{key:"getAnchorStyle",value:function(t){var s=this.graphModel.theme.anchor;return gn(s)}},{key:"getAnchorLineStyle",value:function(t){var s=this.graphModel.theme.anchorLine;return gn(s)}},{key:"getOutlineStyle",value:function(){var t=this.graphModel.theme.outline;return gn(t)}},{key:"isAllowConnectedAsSource",value:function(t,s,f,d){var v=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var R=v[P];if(!R.validate.call(this,this,t,s,f,d)){b=!1,O=R.message;break}}return{isAllPass:b,msg:O}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(t,s,f,d){var v=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var b=!0,O,P=0;P<v.length;P++){var R=v[P];if(!R.validate.call(this,t,this,s,f,d)){b=!1,O=R.message;break}}return{isAllPass:b,msg:O}}},{key:"isAllowMoveNode",value:function(t,s){var f=!0,d=!0,v=this.moveRules.concat(this.graphModel.nodeMoveRules),b=QR(v),O;try{for(b.s();!(O=b.n()).done;){var P=O.value,R=P(this,t,s);if(!R)return!1;if(Yh(R)==="object"){var F=R;if(F.x===!1&&F.y===!1)return!1;f=f&&F.x,d=d&&F.y}}}catch(Y){b.e(Y)}finally{b.f()}return{x:f,y:d}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var t=this.anchorsOffset,s=this.id,f=this.x,d=this.y;return t&&t.length>0?t.map(function(v,b){return v.length?(v=v,{id:"".concat(s,"_").concat(b),x:f+v[0],y:d+v[1]}):(v=v,lo(lo({},v),{},{x:f+v.x,y:d+v.y,id:v.id||"".concat(s,"_").concat(b)}))}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(t){return G1(t,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){return this.getAnchorsByOffset()}},{key:"getAnchorInfo",value:function(t){if(!JR(t))for(var s=0;s<this.anchors.length;s++){var f=this.anchors[s];if(f.id===t)return f}}},{key:"addNodeMoveRules",value:function(t){this.moveRules.includes(t)||this.moveRules.push(t)}},{key:"move",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1;if(f)d=!0,v=!0;else{var b=this.isAllowMoveNode(t,s);typeof b=="boolean"?(d=b,v=b):(d=b.x,v=b.y)}if(d){var O=this.x+t;this.x=O,this.text&&this.moveText(t,0)}if(v){var P=this.y+s;this.y=P,this.text&&this.moveText(0,s)}return d||v}},{key:"getMoveDistance",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=!1,v=!1,b=0,O=0;if(f)d=!0,v=!0;else{var P=this.isAllowMoveNode(t,s);typeof P=="boolean"?(d=P,v=P):(d=P.x,v=P.y)}if(d&&t){var R=this.x+t;this.x=R,this.text&&this.moveText(t,0),b=t}if(v&&s){var F=this.y+s;this.y=F,this.text&&this.moveText(0,s),O=s}return[b,O]}},{key:"moveTo",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=t-this.x,v=s-this.y;return!f&&!this.isAllowMoveNode(d,v)?!1:(this.text&&this.text&&this.moveText(d,v),this.x=t,this.y=s,!0)}},{key:"moveText",value:function(t,s){var f=this.text,d=f.x,v=f.y,b=f.value,O=f.draggable,P=f.editable;this.text={value:b,editable:P,draggable:O,x:d+t,y:v+s}}},{key:"updateText",value:function(t){this.text=lo(lo({},this.text),{},{value:t})}},{key:"setSelected",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSelected=t}},{key:"setHovered",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHovered=t,this.setIsShowAnchor(t)}},{key:"setIsShowAnchor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isShowAnchor=t}},{key:"setHitable",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isHitable=t}},{key:"setElementState",value:function(t,s){this.state=t,this.additionStateData=s}},{key:"setProperty",value:function(t,s){this.properties=lo(lo({},this.properties),{},bo({},t,Zn(s))),this.setAttributes()}},{key:"setProperties",value:function(t){this.properties=lo(lo({},this.properties),Zn(t)),this.setAttributes()}},{key:"deleteProperty",value:function(t){delete this.properties[t],this.setAttributes()}},{key:"setStyle",value:function(t,s){this.style=lo(lo({},this.style),{},bo({},t,Zn(s)))}},{key:"setStyles",value:function(t){this.style=lo(lo({},this.style),Zn(t))}},{key:"updateStyles",value:function(t){this.style=lo({},Zn(t))}},{key:"setZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=t}},{key:"updateAttributes",value:function(t){Mn(this,t)}}]),e}(),NO=Mr(Bt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),MO=Mr(Bt.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),RO=Mr(Bt.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),IO=Mr(Bt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),DO=Mr(Bt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),CO=Mr(Bt.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),LO=Mr(Bt.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),jO=Mr(Bt.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),BO=Mr(Bt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),FO=Mr(Bt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),GO=Mr(Bt.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kO=Mr(Bt.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),UO=Mr(Bt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),zO=Mr(Bt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),HO=Mr(Bt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),XO=Mr(Bt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),$O=Mr(Bt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),VO=Mr(Bt.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),WO=Mr(Bt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Mr(Bt.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"incoming"),Bt.prototype),Mr(Bt.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(Bt.prototype,"outgoing"),Bt.prototype),Mr(Bt.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"addNodeMoveRules"),Bt.prototype),Mr(Bt.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"move"),Bt.prototype),Mr(Bt.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"getMoveDistance"),Bt.prototype),Mr(Bt.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveTo"),Bt.prototype),Mr(Bt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"moveText"),Bt.prototype),Mr(Bt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateText"),Bt.prototype),Mr(Bt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setSelected"),Bt.prototype),Mr(Bt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHovered"),Bt.prototype),Mr(Bt.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setIsShowAnchor"),Bt.prototype),Mr(Bt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setHitable"),Bt.prototype),Mr(Bt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setElementState"),Bt.prototype),Mr(Bt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperty"),Bt.prototype),Mr(Bt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setProperties"),Bt.prototype),Mr(Bt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"deleteProperty"),Bt.prototype),Mr(Bt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyle"),Bt.prototype),Mr(Bt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setStyles"),Bt.prototype),Mr(Bt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateStyles"),Bt.prototype),Mr(Bt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"setZIndex"),Bt.prototype),Mr(Bt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Bt.prototype,"updateAttributes"),Bt.prototype),Bt);function Kh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Kh=function(t){return typeof t}:Kh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kh(e)}var ga,JO;function QO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function qO(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?QO(Object(t),!0).forEach(function(s){tS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):QO(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function rI(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function nI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function eS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function oI(e,r,t){return r&&eS(e.prototype,r),t&&eS(e,t),e}function Zh(){return typeof Reflect<"u"&&Reflect.get?Zh=Reflect.get:Zh=function(r,t,s){var f=iI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},Zh.apply(this,arguments)}function iI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=hl(e),e!==null););return e}function aI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Gg(e,r)}function Gg(e,r){return Gg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Gg(e,r)}function sI(e){var r=lI();return function(){var s=hl(e),f;if(r){var d=hl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return uI(this,f)}}function uI(e,r){if(r&&(Kh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jh(e)}function Jh(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hl(e){return hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hl(e)}function tS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function kg(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Ug=(ga=function(e){aI(t,e);var r=sI(t);function t(){var s;nI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),tS(Jh(s),"modelType",Ze.CIRCLE_NODE),rI(Jh(s),"r",JO,Jh(s)),s}return oI(t,[{key:"width",get:function(){return this.r*2}},{key:"height",get:function(){return this.r*2}},{key:"getNodeStyle",value:function(){var f=Zh(hl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.circle;return qO(qO({},f),gn(d))}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.r;return[{x:f,y:d-v,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+v,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),JO=kg(ga.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),kg(ga.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(ga.prototype,"width"),ga.prototype),kg(ga.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(ga.prototype,"height"),ga.prototype),ga);o(127);function Qh(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qh=function(t){return typeof t}:Qh=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qh(e)}var Jn,rS,nS;function zg(e,r){return hI(e)||dI(e,r)||cI(e,r)||fI()}function fI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cI(e,r){if(e){if(typeof e=="string")return oS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oS(e,r)}}function oS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function dI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function hI(e){if(Array.isArray(e))return e}function iS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function aS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?iS(Object(t),!0).forEach(function(s){lS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function sS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function pI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function uS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function vI(e,r,t){return r&&uS(e.prototype,r),t&&uS(e,t),e}function qh(){return typeof Reflect<"u"&&Reflect.get?qh=Reflect.get:qh=function(r,t,s){var f=yI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},qh.apply(this,arguments)}function yI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=vl(e),e!==null););return e}function gI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Hg(e,r)}function Hg(e,r){return Hg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Hg(e,r)}function mI(e){var r=EI();return function(){var s=vl(e),f;if(r){var d=vl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return bI(this,f)}}function bI(e,r){if(r&&(Qh(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pl(e)}function pl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vl(e){return vl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vl(e)}function lS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function yl(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Xg=(Jn=function(e){gI(t,e);var r=mI(t);function t(){var s;pI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),lS(pl(s),"modelType",Ze.DIAMOND_NODE),sS(pl(s),"rx",rS,pl(s)),sS(pl(s),"ry",nS,pl(s)),s}return vI(t,[{key:"getNodeStyle",value:function(){var f=qh(vl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.diamond;return aS(aS({},f),gn(d))}},{key:"points",get:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[[f,d-b],[f+v,d],[f,d+b],[f-v,d]]}},{key:"pointsPosition",get:function(){var f=this.points.map(function(d){return{x:d[0],y:d[1]}});return f}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=zg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=zg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(d,v){var b=zg(d,2),O=b[0],P=b[1];return{x:O,y:P,id:"".concat(f.id,"_").concat(v)}})}}]),t}(ya),rS=yl(Jn.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),nS=yl(Jn.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),yl(Jn.prototype,"points",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"points"),Jn.prototype),yl(Jn.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"pointsPosition"),Jn.prototype),yl(Jn.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"width"),Jn.prototype),yl(Jn.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Jn.prototype,"height"),Jn.prototype),Jn);function ep(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ep=function(t){return typeof t}:ep=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}var Ii,fS,cS;function dS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function hS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?dS(Object(t),!0).forEach(function(s){yS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function pS(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function OI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function vS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function SI(e,r,t){return r&&vS(e.prototype,r),t&&vS(e,t),e}function tp(){return typeof Reflect<"u"&&Reflect.get?tp=Reflect.get:tp=function(r,t,s){var f=xI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},tp.apply(this,arguments)}function xI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=ml(e),e!==null););return e}function TI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&$g(e,r)}function $g(e,r){return $g=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},$g(e,r)}function AI(e){var r=_I();return function(){var s=ml(e),f;if(r){var d=ml(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return PI(this,f)}}function PI(e,r){if(r&&(ep(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gl(e)}function gl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ml(e){return ml=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ml(e)}function yS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rp(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Vg=(Ii=function(e){TI(t,e);var r=AI(t);function t(){var s;OI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),yS(gl(s),"modelType",Ze.ELLIPSE_NODE),pS(gl(s),"rx",fS,gl(s)),pS(gl(s),"ry",cS,gl(s)),s}return SI(t,[{key:"getNodeStyle",value:function(){var f=tp(ml(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.ellipse;return hS(hS({},f),gn(d))}},{key:"width",get:function(){return this.rx*2}},{key:"height",get:function(){return this.ry*2}},{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.rx,b=this.ry;return[{x:f,y:d-b,id:"".concat(this.id,"_0")},{x:f+v,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b,id:"".concat(this.id,"_2")},{x:f-v,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),fS=rp(Ii.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),cS=rp(Ii.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),rp(Ii.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"width"),Ii.prototype),rp(Ii.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Ii.prototype,"height"),Ii.prototype),Ii);function np(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?np=function(t){return typeof t}:np=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}var Uo,gS;function Wg(e,r){return RI(e)||MI(e,r)||NI(e,r)||wI()}function wI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NI(e,r){if(e){if(typeof e=="string")return mS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mS(e,r)}}function mS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function MI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function RI(e){if(Array.isArray(e))return e}function bS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ES(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?bS(Object(t),!0).forEach(function(s){SS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function II(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function DI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function OS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function CI(e,r,t){return r&&OS(e.prototype,r),t&&OS(e,t),e}function op(){return typeof Reflect<"u"&&Reflect.get?op=Reflect.get:op=function(r,t,s){var f=LI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},op.apply(this,arguments)}function LI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=bl(e),e!==null););return e}function jI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Yg(e,r)}function Yg(e,r){return Yg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Yg(e,r)}function BI(e){var r=GI();return function(){var s=bl(e),f;if(r){var d=bl(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return FI(this,f)}}function FI(e,r){if(r&&(np(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ip(e)}function ip(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bl(e){return bl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},bl(e)}function SS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ap(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Kg=(Uo=function(e){jI(t,e);var r=BI(t);function t(){var s;DI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),SS(ip(s),"modelType",Ze.POLYGON_NODE),II(ip(s),"points",gS,ip(s)),s}return CI(t,[{key:"getNodeStyle",value:function(){var f=op(bl(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.polygon;return ES(ES({},f),gn(d))}},{key:"pointsPosition",get:function(){var f=this.x,d=this.y,v=this.width,b=this.height,O=this.points.map(function(P){return{x:P[0]+f-v/2,y:P[1]+d-b/2}});return O}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Wg(v,1),O=b[0];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(v){var b=Wg(v,2),O=b[1];O<f&&(f=O),O>d&&(d=O)}),d-f}},{key:"getDefaultAnchor",value:function(){var f=this,d=this.x,v=this.y,b=this.width,O=this.height,P=this.points;return P.map(function(R,F){var Y=Wg(R,2),ne=Y[0],pe=Y[1];return{x:d+ne-b/2,y:v+pe-O/2,id:"".concat(f.id,"_").concat(F)}})}}]),t}(ya),gS=ap(Uo.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),ap(Uo.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"pointsPosition"),Uo.prototype),ap(Uo.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"width"),Uo.prototype),ap(Uo.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Uo.prototype,"height"),Uo.prototype),Uo);function sp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sp=function(t){return typeof t}:sp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}var Zg,xS;function TS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function AS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?TS(Object(t),!0).forEach(function(s){_S(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function kI(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function UI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function PS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function zI(e,r,t){return r&&PS(e.prototype,r),t&&PS(e,t),e}function up(){return typeof Reflect<"u"&&Reflect.get?up=Reflect.get:up=function(r,t,s){var f=HI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},up.apply(this,arguments)}function HI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=El(e),e!==null););return e}function XI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Jg(e,r)}function Jg(e,r){return Jg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Jg(e,r)}function $I(e){var r=WI();return function(){var s=El(e),f;if(r){var d=El(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return VI(this,f)}}function VI(e,r){if(r&&(sp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lp(e)}function lp(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WI(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function El(e){return El=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},El(e)}function _S(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function YI(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var Qg=(Zg=function(e){XI(t,e);var r=$I(t);function t(){var s;UI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),_S(lp(s),"modelType",Ze.RECT_NODE),kI(lp(s),"radius",xS,lp(s)),s}return zI(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=up(El(t.prototype),"getNodeStyle",this).call(this),d=this.graphModel.theme.rect;return AS(AS({},f),gn(d))}}]),t}(ya),xS=YI(Zg.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Zg);function fp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fp=function(t){return typeof t}:fp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}var vs;function wS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function NS(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wS(Object(t),!0).forEach(function(s){IS(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function KI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function MS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ZI(e,r,t){return r&&MS(e.prototype,r),t&&MS(e,t),e}function cp(){return typeof Reflect<"u"&&Reflect.get?cp=Reflect.get:cp=function(r,t,s){var f=JI(r,t);if(f){var d=Object.getOwnPropertyDescriptor(f,t);return d.get?d.get.call(arguments.length<3?r:s):d.value}},cp.apply(this,arguments)}function JI(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&(e=Ol(e),e!==null););return e}function QI(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&qg(e,r)}function qg(e,r){return qg=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},qg(e,r)}function qI(e){var r=tD();return function(){var s=Ol(e),f;if(r){var d=Ol(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return eD(this,f)}}function eD(e,r){if(r&&(fp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RS(e)}function RS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ol(e)}function IS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function DS(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var em=(vs=function(e){QI(t,e);var r=qI(t);function t(){var s;KI(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),IS(RS(s),"modelType",Ze.TEXT_NODE),s}return ZI(t,[{key:"getTextStyle",value:function(){var f=cp(Ol(t.prototype),"getTextStyle",this).call(this),d=this.graphModel.theme.text;return NS(NS({},f),gn(d))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=fg({rows:f,fontSize:v,rowsLength:f.length}),O=b.width;return O}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),d=this.getTextStyle(),v=d.fontSize,b=fg({rows:f,fontSize:v,rowsLength:f.length}),O=b.height;return O}}]),t}(ya),DS(vs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(vs.prototype,"width"),vs.prototype),DS(vs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(vs.prototype,"height"),vs.prototype),vs);function dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dp=function(t){return typeof t}:dp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function rD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function CS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function nD(e,r,t){return r&&CS(e.prototype,r),t&&CS(e,t),e}function oD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&tm(e,r)}function tm(e,r){return tm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},tm(e,r)}function iD(e){var r=sD();return function(){var s=hp(e),f;if(r){var d=hp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return aD(this,f)}}function aD(e,r){if(r&&(dp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LS(e)}function LS(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hp(e){return hp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hp(e)}function uD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var rm=function(e){oD(t,e);var r=iD(t);function t(){var s;rD(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),uD(LS(s),"modelType",Ze.HTML_NODE),s}return nD(t,[{key:"getDefaultAnchor",value:function(){var f=this.x,d=this.y,v=this.width,b=this.height;return[{x:f,y:d-b/2,id:"".concat(this.id,"_0")},{x:f+v/2,y:d,id:"".concat(this.id,"_1")},{x:f,y:d+b/2,id:"".concat(this.id,"_2")},{x:f-v/2,y:d,id:"".concat(this.id,"_3")}]}}]),t}(ya),oi,jS,BS,FS;function GS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function lD(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?GS(Object(t),!0).forEach(function(s){US(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):GS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function nm(e,r,t,s){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(s):void 0})}function fD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function kS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function cD(e,r,t){return r&&kS(e.prototype,r),t&&kS(e,t),e}function US(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function uc(e,r,t,s,f){var d={};return Object.keys(s).forEach(function(v){d[v]=s[v]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=t.slice().reverse().reduce(function(v,b){return b(e,r,v)||v},d),f&&d.initializer!==void 0&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),d.initializer===void 0&&(Object.defineProperty(e,r,d),d=null),d}var zS=(oi=function(){function e(r){fD(this,e),US(this,"graphModel",void 0),nm(this,"isShowHorizontal",jS,this),nm(this,"isShowVertical",BS,this),nm(this,"position",FS,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=r}return cD(e,[{key:"getStyle",value:function(){return lD({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(t,s){for(var f=t.x,d=t.y,v=!1,b=!1,O=0;O<s.length;O++){var P=s[O];if(P.id!==t.id&&(f===P.x&&(v=!0),d===P.y&&(b=!0),v&&b))break}return{isShowVertical:v,isShowHorizontal:b,position:{x:f,y:d}}}},{key:"getHorizontalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var R=0;R<s.length;R++){var F=s[R];if(F.id!==t.id){var Y=Po(F);if(Y.minY===b.minY||Y.maxY===b.minY){f=!0,d=b.minY;break}if(Y.minY===b.maxY||Y.maxY===b.maxY){f=!0,d=b.maxY;break}}}return Mn({isShowHorizontal:f,position:{y:d}})}},{key:"getVerticalSnapline",value:function(t,s){var f=!1,d,v=t.id,b;if(v){var O=this.graphModel.fakerNode;if(O&&O.id===v)b=Po(O);else{var P=this.graphModel.getNodeModelById(v);b=Po(P)}}for(var R=0;R<s.length;R++){var F=s[R];if(F.id!==t.id){var Y=Po(F);if(Y.minX===b.minX||Y.maxX===b.minX){f=!0,d=b.minX;break}if(Y.minX===b.maxX||Y.maxX===b.maxX){f=!0,d=b.maxX;break}}}return Mn({isShowVertical:f,position:{x:d}})}},{key:"getSnapLinePosition",value:function(t,s){var f=this.getCenterSnapLine(t,s),d=f.isShowHorizontal,v=f.isShowVertical;if(!d){var b=this.getHorizontalSnapline(t,s);b.isShowHorizontal&&(f.isShowHorizontal=b.isShowHorizontal,f.position.y=b.position.y)}if(!v){var O=this.getVerticalSnapline(t,s);O.isShowVertical&&(f.isShowVertical=O.isShowVertical,f.position.x=O.position.x)}return f}},{key:"setSnaplineInfo",value:function(t){var s=t.isShowHorizontal,f=t.isShowVertical,d=t.position;this.position=d,this.isShowHorizontal=s,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(t){var s=this.graphModel.nodes,f=this.getSnapLinePosition(t,s);this.setSnaplineInfo(f)}}]),e}(),jS=uc(oi.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BS=uc(oi.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FS=uc(oi.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc(oi.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(oi.prototype,"clearSnapline"),oi.prototype),uc(oi.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(oi.prototype,"setNodeSnapLine"),oi.prototype),oi),lc=new Map,HS=function(r){var t=fs();function s(){r();var d=lc.get(t);if(d){var v=window.requestAnimationFrame(s);lc.set(t,v)}}var f=window.requestAnimationFrame(s);return lc.set(t,f),t},pp=function(r){var t=lc.get(r);t&&(window.cancelAnimationFrame(t),lc.delete(r))};function vp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?vp=function(t){return typeof t}:vp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function fc(){return fc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},fc.apply(this,arguments)}function XS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function yp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?XS(Object(t),!0).forEach(function(s){Ci(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):XS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function dD(e,r){return yD(e)||vD(e,r)||pD(e,r)||hD()}function hD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pD(e,r){if(e){if(typeof e=="string")return $S(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $S(e,r)}}function $S(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function vD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function yD(e){if(Array.isArray(e))return e}function gD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function VS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function mD(e,r,t){return r&&VS(e.prototype,r),t&&VS(e,t),e}function bD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&om(e,r)}function om(e,r){return om=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},om(e,r)}function ED(e){var r=SD();return function(){var s=gp(e),f;if(r){var d=gp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return OD(this,f)}}function OD(e,r){if(r&&(vp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Di(e)}function Di(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gp(e){return gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gp(e)}function Ci(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var xD=function(e){bD(t,e);var r=ED(t);function t(){var s;return gD(this,t),s=r.call(this),Ci(Di(s),"preTargetNode",void 0),Ci(Di(s),"sourceRuleResults",void 0),Ci(Di(s),"targetRuleResults",void 0),Ci(Di(s),"dragHandler",void 0),Ci(Di(s),"t",void 0),Ci(Di(s),"onDragStart",function(f){var d=f.event,v=s.props,b=v.anchorData,O=v.nodeModel,P=v.graphModel,R=P.overlapMode;P.selectNodeById(O.id),R!==mt.INCREASE&&O.autoToFront&&P.toFront(O.id),P.eventCenter.emit(ze.ANCHOR_DRAGSTART,{data:b,e:d,nodeModel:O}),s.setState({startX:b.x,startY:b.y,endX:b.x,endY:b.y})}),Ci(Di(s),"onDragging",function(f){var d=f.event,v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,R=b.transformModel,F=b.eventCenter,Y=b.width,ne=b.height,pe=b.editConfigModel,Le=pe.autoExpand,De=pe.stopMoveGraph,Fe=d.clientX,Tt=d.clientY,It=b.getPointByClient({x:Fe,y:Tt}),ut=It.domOverlayPosition,Ft=ut.x,Pt=ut.y,er=It.canvasOverlayPosition,wt=er.x,gr=er.y;s.t&&pp(s.t);var Cr=[],_n=10;Ft<10?Cr=[_n,0]:Ft+10>Y?Cr=[-_n,0]:Pt<10?Cr=[0,_n]:Pt+10>ne&&(Cr=[0,-_n]),s.setState({endX:wt,endY:gr,dragging:!0}),s.moveAnchorEnd(wt,gr),Cr.length>0&&!De&&Le&&(s.t=HS(function(){var Fn=Cr,qn=dD(Fn,2),Eo=qn[0],au=qn[1];R.translate(Eo,au);var Tl=s.state,ms=Tl.endX,Al=Tl.endY;s.setState({endX:ms-Eo,endY:Al-au}),s.moveAnchorEnd(ms-Eo,Al-au)})),F.emit(ze.ANCHOR_DRAG,{data:P,e:d,nodeModel:O})}),Ci(Di(s),"onDragEnd",function(f){var d=f.event;s.t&&pp(s.t),s.checkEnd(d),s.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),s.sourceRuleResults.clear(),s.targetRuleResults.clear();var v=s.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData;b.eventCenter.emit(ze.ANCHOR_DRAGEND,{data:P,e:d,nodeModel:O})}),Ci(Di(s),"checkEnd",function(f){var d=s.props,v=d.graphModel,b=d.nodeModel,O=d.anchorData,P=O.x,R=O.y,F=O.id;v.edgeType;var Y=s.state,ne=Y.endX,pe=Y.endY,Le=Y.dragging,De=oh({x:ne,y:pe},v);if(s.preTargetNode&&s.preTargetNode.state!==ct.DEFAULT&&s.preTargetNode.setElementState(ct.DEFAULT),!!Le&&De&&De.node){var Fe=De.node,Tt=De.anchor.id,It="".concat(b.id,"_").concat(Fe.id,"_").concat(Tt,"_").concat(F),ut=s.sourceRuleResults.get(It)||{},Ft=ut.isAllPass,Pt=ut.msg,er=s.targetRuleResults.get(It)||{},wt=er.isAllPass,gr=er.msg;if(Ft&&wt){Fe.setElementState(ct.DEFAULT);var Cr=v.edgeGenerator(b.getData(),v.getNodeModelById(De.node.id).getData()),_n=v.addEdge(yp(yp({},Cr),{},{sourceNodeId:b.id,sourceAnchorId:F,startPoint:{x:P,y:R},targetNodeId:De.node.id,targetAnchorId:De.anchor.id,endPoint:{x:De.anchor.x,y:De.anchor.y}})),Fn=s.props.anchorData;v.eventCenter.emit(ze.ANCHOR_DROP,{data:Fn,e:f,nodeModel:b,edgeModel:_n})}else{var qn=Fe.getData();v.eventCenter.emit(ze.CONNECTION_NOT_ALLOWED,{data:qn,msg:gr||Pt})}}}),s.sourceRuleResults=new Map,s.targetRuleResults=new Map,s.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},s.dragHandler=new ha({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd}),s}return mD(t,[{key:"getAnchorShape",value:function(){var f=this.props,d=f.anchorData,v=f.style,b=f.node,O=b.getAnchorShape(d);if(O)return O;var P=d.x,R=d.y,F=yp(yp({},v),v.hover);return Object(Be.g)("g",null,Object(Be.g)(ac,fc({className:"lf-node-anchor-hover"},F,{x:P,y:R})),Object(Be.g)(ac,fc({className:"lf-node-anchor"},v,{x:P,y:R})))}},{key:"moveAnchorEnd",value:function(f,d){var v=this.props,b=v.graphModel,O=v.nodeModel,P=v.anchorData,R=oh({x:f,y:d},b);if(R){var F=R.node,Y=R.anchor.id;if(this.preTargetNode&&this.preTargetNode!==R.node&&this.preTargetNode.setElementState(ct.DEFAULT),P.id===Y)return;this.preTargetNode=F;var ne="".concat(O.id,"_").concat(F.id,"_").concat(Y,"_").concat(P.id);if(!this.targetRuleResults.has(ne)){var pe=R.anchor,Le=O.isAllowConnectedAsSource(F,P,pe),De=F.isAllowConnectedAsTarget(O,P,pe);this.sourceRuleResults.set(ne,ah(Le)),this.targetRuleResults.set(ne,ah(De))}var Fe=this.sourceRuleResults.get(ne),Tt=Fe.isAllPass,It=this.targetRuleResults.get(ne),ut=It.isAllPass;Tt&&ut?F.setElementState(ct.ALLOW_CONNECT):F.setElementState(ct.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==ct.DEFAULT&&this.preTargetNode.setElementState(ct.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,d=f.startX,v=f.startY,b=f.endX,O=f.endY,P=wi(d,v,b,O);return P>10}},{key:"render",value:function(){var f=this,d=this.state,v=d.startX,b=d.startY,O=d.endX,P=d.endY,R=this.props,F=R.anchorData.edgeAddable,Y=R.edgeStyle;return Object(Be.g)("g",{className:"lf-anchor"},Object(Be.g)("g",{onMouseDown:function(pe){F!==!1&&f.dragHandler.handleMouseDown(pe)}},this.getAnchorShape()),this.isShowLine()&&Object(Be.g)(fl,fc({x1:v,y1:b,x2:O,y2:P},Y,{"pointer-events":"none"})))}}]),t}(Be.a),TD=xD;o(64);function WS(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function AD(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?WS(Object(t),!0).forEach(function(s){PD(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WS(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function PD(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function mp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mp=function(t){return typeof t}:mp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function _D(e,r){return RD(e)||MD(e,r)||ND(e,r)||wD()}function wD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ND(e,r){if(e){if(typeof e=="string")return YS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YS(e,r)}}function YS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function MD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function RD(e){if(Array.isArray(e))return e}function KS(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.value,v=e.fontSize,b=e.fill,O=b===void 0?"currentColor":b,P=e.overflowMode,R=P===void 0?"default":P,F=e.textWidth,Y=F===void 0?"":F,ne=e.model,pe={textAnchor:"middle","dominant-baseline":"middle",x:t,y:f,fill:O};if(Object.entries(e).forEach(function(ut){var Ft=_D(ut,2),Pt=Ft[0],er=Ft[1],wt=mp(er);wt!=="object"&&(pe[Pt]=er)}),d){var Le=String(d).split(/[\r\n]/g),De=Le.length;if(R!=="default"){var Fe=ne.BaseType,Tt=ne.modelType;if(Fe===Ve.NODE&&Tt!==Ze.TEXT_NODE||Fe===Ve.EDGE&&Y)return ID(e)}if(De>1){var It=Le.map(function(ut,Ft){var Pt=v+2,er=(Ft-(De-1)/2)*Pt;return Object(Be.g)("tspan",{className:"lf-text-tspan",x:t,y:f+er},ut)});return Object(Be.g)("text",pe,It)}return Object(Be.g)("text",pe,d)}}function ID(e){var r=e.value,t=e.fontSize,s=e.model,f=e.fontFamily,d=f===void 0?"":f,v=e.lineHeight,b=e.wrapPadding,O=b===void 0?"0, 0":b,P=e.overflowMode,R=e.x,F=e.y,Y=s.width,ne=s.textHeight,pe=e.textWidth||Y,Le=String(r).split(/[\r\n]/g),De=Le.length,Fe=NE({rows:Le,style:{fontSize:"".concat(t,"px"),width:"".concat(pe,"px"),fontFamily:d,lineHeight:v,padding:O},rowsLength:De,className:"lf-get-text-height"}),Tt=s.height>Fe?s.height:Fe;ne&&(Tt=ne);var It=P==="ellipsis";return Object(Be.g)("g",null,Object(Be.g)("foreignObject",{width:pe,height:Tt,x:R-pe/2,y:F-Tt/2},Object(Be.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Tt,width:pe,padding:O}},Object(Be.g)("div",{className:It?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:It?Le.join(""):"",style:AD({},e)},Le.map(function(ut){return Object(Be.g)("div",{className:"lf-node-text--auto-wrap-inner"},ut)})))))}function bp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bp=function(t){return typeof t}:bp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(e)}function im(){return im=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},im.apply(this,arguments)}function DD(e,r){return BD(e)||jD(e,r)||LD(e,r)||CD()}function CD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LD(e,r){if(e){if(typeof e=="string")return ZS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ZS(e,r)}}function ZS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function jD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function BD(e){if(Array.isArray(e))return e}function FD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function JS(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function GD(e,r,t){return r&&JS(e.prototype,r),t&&JS(e,t),e}function kD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&am(e,r)}function am(e,r){return am=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},am(e,r)}function UD(e){var r=HD();return function(){var s=Ep(e),f;if(r){var d=Ep(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return zD(this,f)}}function zD(e,r){if(r&&(bp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ys(e)}function ys(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ep(e){return Ep=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ep(e)}function nu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var QS=function(e){kD(t,e);var r=UD(t);function t(s){var f;FD(this,t),f=r.call(this),nu(ys(f),"dragHandler",void 0),nu(ys(f),"sumDeltaX",0),nu(ys(f),"sumDeltaY",0),nu(ys(f),"stepDrag",void 0),nu(ys(f),"onDragging",function(b){var O=b.deltaX,P=b.deltaY,R=f.props,F=R.model,Y=R.graphModel.transformModel,ne=Y.fixDeltaXY(O,P),pe=DD(ne,2),Le=pe[0],De=pe[1];F.moveText(Le,De)}),nu(ys(f),"dblClickHandler",function(){var b=f.props.editable;if(b){var O=f.props.model;O.setElementState(ct.TEXT_EDIT)}}),nu(ys(f),"mouseDownHandle",function(b){var O=f.props,P=O.draggable,R=O.graphModel.editConfigModel.nodeTextDraggable;(P||R)&&f.stepDrag.handleMouseDown(b)});var d=s.model,v=s.draggable;return f.stepDrag=new ha({onDragging:f.onDragging,step:1,model:d,isStopPropagation:v}),f}return GD(t,[{key:"getShape",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.text,O=v.editConfigModel,P=b.value,R=b.x,F=b.y,Y=b.editable,ne=b.draggable,pe={x:R,y:F,className:"",value:P};Y?pe.className="lf-element-text":ne||O.nodeTextDraggable?pe.className="lf-text-draggable":pe.className="lf-text-disabled";var Le=d.getTextStyle();return Object(Be.g)(KS,im({},pe,Le,{model:d}))}},{key:"render",value:function(){var f=this.props.model.text;if(f)return Object(Be.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}]),t}(Be.a),XD=window.navigator.userAgent.match(/MSIE|Trident/)!==null;function Op(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Op=function(t){return typeof t}:Op=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function Sp(e,r){return YD(e)||WD(e,r)||VD(e,r)||$D()}function $D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VD(e,r){if(e){if(typeof e=="string")return qS(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qS(e,r)}}function qS(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function WD(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function YD(e){if(Array.isArray(e))return e}function KD(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ex(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ZD(e,r,t){return r&&ex(e.prototype,r),t&&ex(e,t),e}function JD(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&sm(e,r)}function sm(e,r){return sm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},sm(e,r)}function QD(e){var r=eC();return function(){var s=xp(e),f;if(r){var d=xp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return qD(this,f)}}function qD(e,r){if(r&&(Op(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qn(e)}function Qn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xp(e){return xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xp(e)}function fo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ma=function(e){JD(t,e);var r=QD(t);function t(s){var f;KD(this,t),f=r.call(this),fo(Qn(f),"t",void 0),fo(Qn(f),"moveOffset",void 0),fo(Qn(f),"stepDrag",void 0),fo(Qn(f),"contextMenuTime",void 0),fo(Qn(f),"startTime",void 0),fo(Qn(f),"clickTimer",void 0),fo(Qn(f),"onDragStart",function(P){var R=P.event,F=R.clientX,Y=R.clientY,ne=f.props,pe=ne.model,Le=ne.graphModel,De=Le.getPointByClient({x:F,y:Y}),Fe=De.canvasOverlayPosition,Tt=Fe.x,It=Fe.y;f.moveOffset={x:pe.x-Tt,y:pe.y-It}}),fo(Qn(f),"onDragging",function(P){var R=P.event,F=f.props,Y=F.model,ne=F.graphModel,pe=ne.editConfigModel,Le=pe.stopMoveGraph,De=pe.autoExpand,Fe=ne.transformModel,Tt=ne.width,It=ne.height,ut=ne.gridSize;Y.isDragging=!0;var Ft=R.clientX,Pt=R.clientY,er=ne.getPointByClient({x:Ft,y:Pt}),wt=er.canvasOverlayPosition,gr=wt.x,Cr=wt.y,_n=Fe.CanvasPointToHtmlPoint([gr,Cr]),Fn=Sp(_n,2),qn=Fn[0],Eo=Fn[1];if(gr=gr+f.moveOffset.x,Cr=Cr+f.moveOffset.y,gr=ls(gr,ut),Cr=ls(Cr,ut),!Tt||!It){ne.moveNode2Coordinate(Y.id,gr,Cr);return}var au=qn<0||Eo<0||qn>Tt||Eo>It;if(!(De&&!Le&&au)){var Tl=Fe.CanvasPointToHtmlPoint([gr-Y.width/2,Cr-Y.height/2]),ms=Sp(Tl,2),Al=ms[0],Qm=ms[1],zj=Fe.CanvasPointToHtmlPoint([gr+Y.width/2,Cr+Y.height/2]),qx=Sp(zj,2),Hj=qx[0],Xj=qx[1],cv=Math.max(ut,20),Pl=[];Al<0?Pl=[cv,0]:Hj>ne.width?Pl=[-cv,0]:Qm<0?Pl=[0,cv]:Xj>ne.height&&(Pl=[0,-cv]),f.t&&pp(f.t),Pl.length>0&&!Le&&De?f.t=HS(function(){var $j=Pl,eT=Sp($j,2),tT=eT[0],rT=eT[1];Fe.translate(tT,rT),ne.moveNode(Y.id,-tT/Fe.SCALE_X,-rT/Fe.SCALE_X)}):ne.moveNode2Coordinate(Y.id,gr,Cr)}}),fo(Qn(f),"onDragEnd",function(){f.t&&pp(f.t);var P=f.props.model;P.isDragging=!1}),fo(Qn(f),"handleClick",function(P){if(f.startTime){var R=new Date().getTime()-f.startTime;if(!(R>200)){var F=f.props,Y=F.model,ne=F.graphModel,pe=Y.getData(),Le=ne.getPointByClient({x:P.clientX,y:P.clientY}),De={data:pe,e:P,position:Le,isSelected:!1,isMultiple:!1},Fe=P.button===2,Tt=P.detail===2;if(!Fe){var It=ne.editConfigModel,ut=SE(P,It);De.isMultiple=ut,Y.isSelected&&!Tt&&ut?(De.isSelected=!1,Y.setSelected(!1)):(ne.selectNodeById(Y.id,ut),De.isSelected=!0,f.toFront()),Tt?(It.nodeTextEdit&&Y.text.editable&&(Y.setSelected(!1),ne.setElementStateById(Y.id,ct.TEXT_EDIT)),ne.eventCenter.emit(ze.NODE_DBCLICK,De)):(ne.eventCenter.emit(ze.ELEMENT_CLICK,De),ne.eventCenter.emit(ze.NODE_CLICK,De))}}}}),fo(Qn(f),"handleContextMenu",function(P){P.preventDefault();var R=f.props,F=R.model,Y=R.graphModel,ne=F.getData(),pe=Y.getPointByClient({x:P.clientX,y:P.clientY});Y.setElementStateById(F.id,ct.SHOW_MENU,pe.domOverlayPosition),F.isSelected||Y.selectNodeById(F.id),Y.eventCenter.emit(ze.NODE_CONTEXTMENU,{data:ne,e:P,position:pe}),f.toFront()}),fo(Qn(f),"handleMouseDown",function(P){var R=f.props,F=R.model,Y=R.graphModel;f.startTime=new Date().getTime();var ne=Y.editConfigModel;ne.adjustNodePosition&&F.draggable&&f.stepDrag&&f.stepDrag.handleMouseDown(P)}),fo(Qn(f),"setHoverON",function(P){var R=f.props,F=R.model,Y=R.graphModel;if(!F.isHovered){var ne=F.getData();F.setHovered(!0),Y.eventCenter.emit(ze.NODE_MOUSEENTER,{data:ne,e:P})}}),fo(Qn(f),"setHoverOFF",function(P){var R=f.props,F=R.model,Y=R.graphModel,ne=F.getData();F.isHovered&&(F.setHovered(!1),Y.eventCenter.emit(ze.NODE_MOUSELEAVE,{data:ne,e:P}))}),fo(Qn(f),"onMouseOut",function(P){XD&&f.setHoverOFF(P)});var d=s.graphModel,v=d.gridSize,b=d.eventCenter,O=s.model;return f.stepDrag=new ha({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,step:v,eventType:"NODE",isStopPropagation:!1,eventCenter:b,model:O}),f}return ZD(t,[{key:"getAnchorShape",value:function(f){return null}},{key:"getAnchors",value:function(){var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.isSelected,P=v.isHitable,R=v.isDragging,F=v.isShowAnchor;return P&&(O||F)&&!R?ua(v.anchors,function(Y,ne){var pe=v.getAnchorLineStyle(Y),Le=v.getAnchorStyle(Y);return Object(Be.g)(TD,{anchorData:Y,node:f,style:Le,edgeStyle:pe,anchorIndex:ne,nodeModel:v,graphModel:b,setHoverOFF:f.setHoverOFF})}):[]}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return"";if(d.text){var b=v.editConfigModel,O=!1;return(d.text.draggable||b.nodeTextDraggable)&&(O=!0),Object(Be.g)(QS,{editable:b.nodeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:O})}}},{key:"getStateClassName",value:function(){var f=this.props.model,d=f.state,v=f.isDragging,b=f.isSelected,O="lf-node";switch(d){case ct.ALLOW_CONNECT:O+=" lf-node-allow";break;case ct.NOT_ALLOW_CONNECT:O+=" lf-node-not-allow";break;default:O+=" lf-node-default";break}return v&&(O+=" lf-isDragging"),b&&(O+=" lf-node-selected"),O}},{key:"toFront",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.overlapMode;b!==mt.INCREASE&&d.autoToFront&&v.toFront(d.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=v.editConfigModel,O=b.hideAnchors,P=b.adjustNodePosition,R=v.gridSize,F=v.transformModel.SCALE_X,Y=d.isHitable,ne=d.draggable,pe=Object(Be.g)("g",{className:"lf-node-content"},this.getShape(),this.getText(),O?null:this.getAnchors()),Le;return Y?(P&&ne&&this.stepDrag.setStep(R*F),Le=Object(Be.g)("g",{className:this.getStateClassName(),onMouseDown:this.handleMouseDown,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},pe)):Le=Object(Be.g)("g",{className:this.getStateClassName()},pe),Le}}],[{key:"getModel",value:function(f){return f}}]),t}(Be.a);function Tp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tp=function(t){return typeof t}:Tp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function um(){return um=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},um.apply(this,arguments)}function tC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function tx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function rC(e,r,t){return r&&tx(e.prototype,r),t&&tx(e,t),e}function nC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&lm(e,r)}function lm(e,r){return lm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},lm(e,r)}function oC(e){var r=sC();return function(){var s=Ap(e),f;if(r){var d=Ap(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return iC(this,f)}}function iC(e,r){if(r&&(Tp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aC(e)}function aC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ap(e){return Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ap(e)}var fm=function(e){nC(t,e);var r=oC(t);function t(){return tC(this,t),r.apply(this,arguments)}return rC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(hs,um({},d,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}]),t}(ma);function Pp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pp=function(t){return typeof t}:Pp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function cm(){return cm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},cm.apply(this,arguments)}function uC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function lC(e,r,t){return r&&rx(e.prototype,r),t&&rx(e,t),e}function fC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&dm(e,r)}function dm(e,r){return dm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},dm(e,r)}function cC(e){var r=pC();return function(){var s=_p(e),f;if(r){var d=_p(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return dC(this,f)}}function dC(e,r){if(r&&(Pp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hC(e)}function hC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _p(e){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_p(e)}var hm=function(e){fC(t,e);var r=cC(t);function t(){return uC(this,t),r.apply(this,arguments)}return lC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.r,O=f.getNodeStyle();return Object(Be.g)(ac,cm({},O,{x:d,y:v,r:b}))}}]),t}(ma);function wp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wp=function(t){return typeof t}:wp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(e)}function vC(e,r){return bC(e)||mC(e,r)||gC(e,r)||yC()}function yC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gC(e,r){if(e){if(typeof e=="string")return nx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nx(e,r)}}function nx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function mC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function bC(e){if(Array.isArray(e))return e}function ox(e){var r=e.points,t=e.className,s={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(e).forEach(function(f){var d=vC(f,2),v=d[0],b=d[1],O=wp(b);O!=="object"&&(s[v]=b)}),t?s.className="lf-basic-shape ".concat(t):s.className="lf-basic-shape",s.points=r.map(function(f){return f.join(",")}).join(" "),Object(Be.g)("polygon",s)}function Np(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Np=function(t){return typeof t}:Np=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function pm(){return pm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},pm.apply(this,arguments)}function EC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ix(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function OC(e,r,t){return r&&ix(e.prototype,r),t&&ix(e,t),e}function SC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&vm(e,r)}function vm(e,r){return vm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},vm(e,r)}function xC(e){var r=PC();return function(){var s=Mp(e),f;if(r){var d=Mp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return TC(this,f)}}function TC(e,r){if(r&&(Np(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AC(e)}function AC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mp(e){return Mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mp(e)}var ym=function(e){SC(t,e);var r=xC(t);function t(){return EC(this,t),r.apply(this,arguments)}return OC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.width,O=f.height,P=f.points,R=f.getNodeStyle(),F={transform:"matrix(1 0 0 1 ".concat(d-b/2," ").concat(v-O/2,")")};return Object(Be.g)("g",F,Object(Be.g)(ox,pm({},R,{points:P,x:d,y:v})))}}]),t}(ma);function Rp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rp=function(t){return typeof t}:Rp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rp(e)}function gm(){return gm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},gm.apply(this,arguments)}function _C(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ax(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function wC(e,r,t){return r&&ax(e.prototype,r),t&&ax(e,t),e}function NC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&mm(e,r)}function mm(e,r){return mm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},mm(e,r)}function MC(e){var r=DC();return function(){var s=Ip(e),f;if(r){var d=Ip(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return RC(this,f)}}function RC(e,r){if(r&&(Rp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IC(e)}function IC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ip(e){return Ip=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ip(e)}var bm=function(e){NC(t,e);var r=MC(t);function t(){return _C(this,t),r.apply(this,arguments)}return wC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)("g",null,Object(Be.g)(ox,gm({},d,{points:f.points,x:f.x,y:f.y})))}}]),t}(ma);function Dp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dp=function(t){return typeof t}:Dp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function CC(e,r){return FC(e)||BC(e,r)||jC(e,r)||LC()}function LC(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jC(e,r){if(e){if(typeof e=="string")return sx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sx(e,r)}}function sx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function BC(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function FC(e){if(Array.isArray(e))return e}function GC(e){var r=e.x,t=r===void 0?0:r,s=e.y,f=s===void 0?0:s,d=e.rx,v=d===void 0?4:d,b=e.ry,O=b===void 0?4:b,P=e.className,R={cx:t,cy:f,rx:v,ry:O,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(e).forEach(function(F){var Y=CC(F,2),ne=Y[0],pe=Y[1],Le=Dp(pe);Le!=="object"&&(R[ne]=pe)}),P?R.className="lf-basic-shape ".concat(P):R.className="lf-basic-shape",Object(Be.g)("ellipse",R)}function Cp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cp=function(t){return typeof t}:Cp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function Em(){return Em=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Em.apply(this,arguments)}function kC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ux(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function UC(e,r,t){return r&&ux(e.prototype,r),t&&ux(e,t),e}function zC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Om(e,r)}function Om(e,r){return Om=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Om(e,r)}function HC(e){var r=VC();return function(){var s=Lp(e),f;if(r){var d=Lp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return XC(this,f)}}function XC(e,r){if(r&&(Cp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $C(e)}function $C(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lp(e){return Lp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Lp(e)}var Sm=function(e){zC(t,e);var r=HC(t);function t(){return kC(this,t),r.apply(this,arguments)}return UC(t,[{key:"getShape",value:function(){var f=this.props.model,d=f.getNodeStyle();return Object(Be.g)(GC,Em({},d,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}]),t}(ma);function jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jp=function(t){return typeof t}:jp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}function lx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function fx(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?lx(Object(t),!0).forEach(function(s){WC(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):lx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function WC(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function YC(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function cx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function KC(e,r,t){return r&&cx(e.prototype,r),t&&cx(e,t),e}function ZC(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&xm(e,r)}function xm(e,r){return xm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},xm(e,r)}function JC(e){var r=eL();return function(){var s=Bp(e),f;if(r){var d=Bp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return QC(this,f)}}function QC(e,r){if(r&&(jp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qC(e)}function qC(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bp(e){return Bp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bp(e)}var Tm=function(e){ZC(t,e);var r=JC(t);function t(){return YC(this,t),r.apply(this,arguments)}return KC(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text;if(v&&v.value&&d.background&&d.background.fill!=="transparent"){var b=v.x,O=v.y,P=f.width,R=f.height,F=fx(fx({},d.background),{},{x:b,y:O-1,width:P,height:R});return Object(Be.g)(hs,F)}}},{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getBackground())}}]),t}(ma);function Fp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fp=function(t){return typeof t}:Fp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(e)}function Am(){return Am=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Am.apply(this,arguments)}function tL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function dx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function rL(e,r,t){return r&&dx(e.prototype,r),t&&dx(e,t),e}function nL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Pm(e,r)}function Pm(e,r){return Pm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Pm(e,r)}function oL(e){var r=aL();return function(){var s=Gp(e),f;if(r){var d=Gp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return iL(this,f)}}function iL(e,r){if(r&&(Fp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cc(e)}function cc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gp(e){return Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gp(e)}function kp(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var _m=function(e){nL(t,e);var r=oL(t);function t(){var s;tL(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),kp(cc(s),"ref",void 0),kp(cc(s),"currentProperties",void 0),kp(cc(s),"preProperties",void 0),kp(cc(s),"setRef",function(b){s.ref=b}),s}return rL(t,[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!(this.preProperties&&this.preProperties===this.currentProperties))return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,d=f.x,v=f.y,b=f.height,O=f.width,P=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Be.g)("foreignObject",Am({},P,{x:d-O/2,y:v-b/2,width:O,height:b,ref:this.setRef}))}}]),t}(ma);function Up(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Up=function(t){return typeof t}:Up=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Up(e)}function wm(){return wm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wm.apply(this,arguments)}function hx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ou(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?hx(Object(t),!0).forEach(function(s){Rm(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):hx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function sL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function px(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function uL(e,r,t){return r&&px(e.prototype,r),t&&px(e,t),e}function lL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Nm(e,r)}function Nm(e,r){return Nm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Nm(e,r)}function fL(e){var r=dL();return function(){var s=zp(e),f;if(r){var d=zp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return cL(this,f)}}function cL(e,r){if(r&&(Up(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mm(e)}function Mm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zp(e){return zp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(e)}function Rm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var hL=function(e){lL(t,e);var r=fL(t);function t(s){var f;return sL(this,t),f=r.call(this,s),Rm(Mm(f),"setHoverON",function(){f.setState({isHovered:!0})}),Rm(Mm(f),"setHoverOFF",function(){f.setState({isHovered:!1})}),f.state={isHovered:!1},f}return uL(t,[{key:"getBackground",value:function(){var f=this.props.model,d=f.getTextStyle(),v=f.text,b=d.background||{},O=this.state.isHovered;if(O&&d.hover&&d.hover.background&&(b=ou(ou({},b),d.hover.background)),v&&v.value&&b.fill!=="transparent"){var P=d.fontSize,R=d.overflowMode,F=d.lineHeight,Y=d.wrapPadding,ne=d.textWidth,pe=v.value,Le=v.x,De=v.y,Fe=String(pe).split(/[\r\n]/g),Tt=Fe.length,It;if(R==="autoWrap"&&ne){var ut=NE({rows:Fe,style:{fontSize:"".concat(P,"px"),width:"".concat(ne,"px"),lineHeight:F,padding:Y},rowsLength:Tt,className:"lf-get-text-height"});It=ou(ou({},b),{},{x:Le-1,y:De-1,width:ne,height:ut})}else{Fe&&Fe.forEach(function(gr){E0(gr)});var Ft=fg({rows:Fe,fontSize:P,rowsLength:Tt}),Pt=Ft.width,er=Ft.height;if(typeof b.wrapPadding=="string"){var wt=b.wrapPadding.split(",").filter(function(gr){return gr.trim()}).map(function(gr){return parseFloat(gr.trim())});wt.length>0&&wt.length<=4&&(wt.length===1?wt=[wt[0],wt[0],wt[0],wt[0]]:wt.length===2?wt=[wt[0],wt[1],wt[0],wt[1]]:wt.length===3&&(wt=[wt[0],wt[1],wt[2],wt[1]]),Pt+=wt[1]+wt[3],er+=wt[0]+wt[2],Le=Le+(wt[1]-wt[3])/2,De=De+(wt[2]-wt[0])/2)}It=ou(ou({},b),{},{x:Le-1,y:De-1,width:Pt,height:er})}return Object(Be.g)(hs,It)}}},{key:"getShape",value:function(){var f=this.props.model,d=f.text,v=d.value,b=d.x,O=d.y;if(v){var P=f.getTextStyle(),R=ou({x:b,y:O,className:"lf-element-text",value:v},P);return Object(Be.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Be.g)(KS,wm({},R,{model:f})))}}}]),t}(QS);function Hp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hp=function(t){return typeof t}:Hp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hp(e)}function vx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function ba(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vx(Object(t),!0).forEach(function(s){wo(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function pL(e,r){return mL(e)||gL(e,r)||yL(e,r)||vL()}function vL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yL(e,r){if(e){if(typeof e=="string")return yx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yx(e,r)}}function yx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function gL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function mL(e){if(Array.isArray(e))return e}function bL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function gx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function EL(e,r,t){return r&&gx(e.prototype,r),t&&gx(e,t),e}function OL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Im(e,r)}function Im(e,r){return Im=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Im(e,r)}function SL(e){var r=TL();return function(){var s=Xp(e),f;if(r){var d=Xp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return xL(this,f)}}function xL(e,r){if(r&&(Hp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _o(e)}function _o(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xp(e){return Xp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xp(e)}function wo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Li;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Li||(Li={}));var mx=function(e){OL(t,e);var r=SL(t);function t(s){var f;bL(this,t),f=r.call(this),wo(_o(f),"stepDragData",void 0),wo(_o(f),"stepDrag",void 0),wo(_o(f),"oldEdge",void 0),wo(_o(f),"preTargetNode",void 0),wo(_o(f),"targetRuleResults",void 0),wo(_o(f),"sourceRuleResults",void 0),wo(_o(f),"handleMouseDown",function(P){f.stepDrag&&f.stepDrag.handleMouseDown(P)}),wo(_o(f),"onDragStart",function(){var P=f.props,R=P.x,F=P.y,Y=P.edgeModel,ne=Y.startPoint,pe=Y.endPoint,Le=Y.pointsList;f.oldEdge={startPoint:ne,endPoint:pe,pointsList:Le},f.setState({endX:R,endY:F,dragging:!0})}),wo(_o(f),"onDragging",function(P){var R=P.deltaX,F=P.deltaY,Y=f.state,ne=Y.endX,pe=Y.endY,Le=f.props,De=Le.graphModel,Fe=Le.type,Tt=De.transformModel,It=De.editConfigModel,ut=Tt.moveCanvasPointByHtml([ne,pe],R,F),Ft=pL(ut,2),Pt=Ft[0],er=Ft[1];f.setState({endX:Pt,endY:er,dragging:!0});var wt=f.props.edgeModel,gr=oh({x:ne,y:pe},De);if(gr&&gr.node&&f.isAllowAdjust(gr)){var Cr,_n=wt.startPoint,Fn=wt.endPoint,qn=wt.sourceNode,Eo=wt.targetNode;Fe===Li.SOURCE?Cr={startPoint:{x:gr.anchor.x,y:gr.anchor.y},endPoint:{x:Fn.x,y:Fn.y},sourceNode:gr.node,targetNode:Eo}:Fe===Li.TARGET&&(Cr={startPoint:{x:_n.x,y:_n.y},endPoint:{x:gr.anchor.x,y:gr.anchor.y},sourceNode:qn,targetNode:gr.node}),wt.updateAfterAdjustStartAndEnd(Cr)}else Fe===Li.SOURCE?wt.updateStartPoint({x:Pt,y:er}):Fe===Li.TARGET&&wt.updateEndPoint({x:Pt,y:er});wt.text.value&&It.adjustEdge&&wt.setText(Object.assign({},wt.text,wt.textPosition))}),wo(_o(f),"onDragEnd",function(P){var R=P.event;try{var F;f.setState({dragging:!1});var Y=f.props,ne=Y.graphModel,pe=Y.edgeModel,Le=Y.type,De=f.state,Fe=De.endX,Tt=De.endY,It=De.dragging,ut=oh({x:Fe,y:Tt},ne);if(!It)return;var Ft=!1,Pt;if(ut&&ut.node&&f.isAllowAdjust(ut)){var er,wt=pe.getData();if(Pt=ba(ba({},wt),{},{sourceAnchorId:"",targetAnchorId:"",text:(wt==null||(er=wt.text)===null||er===void 0?void 0:er.value)||""}),Le===Li.SOURCE){var gr=ne.edgeGenerator(ne.getNodeModelById(ut.node.id).getData(),ne.getNodeModelById(pe.targetNodeId).getData(),Pt);Pt=ba(ba({},gr),{},{sourceNodeId:ut.node.id,sourceAnchorId:ut.anchor.id,startPoint:{x:ut.anchor.x,y:ut.anchor.y},targetNodeId:pe.targetNodeId,endPoint:ba({},pe.endPoint)}),pe.sourceNodeId===ut.node.id&&pe.sourceAnchorId===ut.anchor.id&&(Ft=!0)}else if(Le===Li.TARGET){var Cr=ne.edgeGenerator(ne.getNodeModelById(pe.sourceNodeId).getData(),ne.getNodeModelById(ut.node.id).getData(),Pt);Pt=ba(ba({},Cr),{},{sourceNodeId:pe.sourceNodeId,startPoint:ba({},pe.startPoint),targetNodeId:ut.node.id,targetAnchorId:ut.anchor.id,endPoint:{x:ut.anchor.x,y:ut.anchor.y}}),pe.targetNodeId===ut.node.id&&pe.targetAnchorId===ut.anchor.id&&(Ft=!0)}}else Ft=!0;if(Ft)f.recoveryEdge();else{ne.deleteEdgeById(pe.id);var _n=ne.addEdge(ba({},Pt));ne.eventCenter.emit(ze.EDGE_EXCHANGE_NODE,{data:{newEdge:_n.getData(),oldEdge:pe.getData()}})}(F=f.preTargetNode)===null||F===void 0||F.setElementState(ct.DEFAULT)}finally{var Fn=f.props.graphModel;Fn.eventCenter.emit(ze.ADJUST_POINT_DRAGEND,{e:R,data:f.stepDragData})}}),wo(_o(f),"recoveryEdge",function(){var P=f.props.edgeModel,R=f.oldEdge,F=R.startPoint,Y=R.endPoint,ne=R.pointsList;P.updateStartPoint(F),P.updateEndPoint(Y),P.modelType!==Ze.LINE_EDGE&&(P.pointsList=ne,P.initPoints())}),wo(_o(f),"getAdjustPointStyle",function(){var P=f.props,R=P.graphModel.theme;P.edgeModel;var F=R.edgeAdjust;return F}),f.state={dragging:!1,endX:0,endY:0},f.targetRuleResults=new Map,f.sourceRuleResults=new Map;var d=s.type,v=s.edgeModel,b=s.graphModel,O=b.eventCenter;return f.stepDragData={type:d,edgeData:v.getData()},f.stepDrag=new ha({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:O,data:f.stepDragData}),f}return EL(t,[{key:"isAllowAdjust",value:function(f){var d=this.props,v=d.edgeModel,b=v.id,O=v.sourceNode,P=v.targetNode,R=v.sourceAnchorId,F=v.targetAnchorId,Y=d.type,ne=null,pe=null,Le=null,De=null;if(Y===Li.SOURCE?(ne=f.node,pe=P,Le=f.anchor,De=P.getAnchorInfo(F)):(ne=O,pe=f.node,De=f.anchor,Le=O.getAnchorInfo(R)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(ct.DEFAULT),this.preTargetNode=f.node,De.id===Le.id)return!1;var Fe="".concat(ne.id,"_").concat(pe.id,"_").concat(Le.id,"_").concat(De.id);if(!this.targetRuleResults.has(Fe)){var Tt=ne.isAllowConnectedAsSource(pe,Le,De,b),It=pe.isAllowConnectedAsTarget(ne,Le,De,b);this.sourceRuleResults.set(Fe,ah(Tt)),this.targetRuleResults.set(Fe,ah(It))}var ut=this.sourceRuleResults.get(Fe),Ft=ut.isAllPass,Pt=this.targetRuleResults.get(Fe),er=Pt.isAllPass,wt=Ft&&er?ct.ALLOW_CONNECT:ct.NOT_ALLOW_CONNECT;return Y===Li.SOURCE?ne.setElementState(wt):pe.setElementState(wt),Ft&&er}},{key:"render",value:function(){var f=this.props,d=f.x,v=f.y,b=f.getAdjustPointShape,O=this.state.dragging;return Object(Be.g)("g",{pointerEvents:O?"none":"",onMouseDown:this.handleMouseDown},b(d,v,O))}}]),t}(Be.a);function $p(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$p=function(t){return typeof t}:$p=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(e)}function dc(){return dc=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dc.apply(this,arguments)}function AL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function bx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function PL(e,r,t){return r&&bx(e.prototype,r),t&&bx(e,t),e}function _L(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Dm(e,r)}function Dm(e,r){return Dm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Dm(e,r)}function wL(e){var r=ML();return function(){var s=Vp(e),f;if(r){var d=Vp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return NL(this,f)}}function NL(e,r){if(r&&($p(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zo(e)}function zo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vp(e){return Vp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(e)}function ii(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var hc=function(e){_L(t,e);var r=wL(t);function t(){var s;AL(this,t);for(var f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];return s=r.call.apply(r,[this].concat(d)),ii(zo(s),"startTime",void 0),ii(zo(s),"contextMenuTime",void 0),ii(zo(s),"clickTimer",void 0),ii(zo(s),"textRef",Object(Be.f)()),ii(zo(s),"getAdjustPointShape",function(b,O){var P=s.props.model,R=P.getAdjustPointStyle();return Object(Be.g)(ac,dc({className:"lf-edge-adjust-point"},R,{x:b,y:O}))}),ii(zo(s),"handleHover",function(b,O){var P=s.props,R=P.model,F=P.graphModel.eventCenter;R.setHovered(b);var Y=b?ze.EDGE_MOUSEENTER:ze.EDGE_MOUSELEAVE,ne=R.getData();F.emit(Y,{data:ne,e:O})}),ii(zo(s),"setHoverON",function(b){var O=s.props.model.isHovered;O||(s.textRef&&s.textRef.current.setHoverON(),s.handleHover(!0,b))}),ii(zo(s),"setHoverOFF",function(b){var O=s.props.model.isHovered;O&&(s.textRef&&s.textRef.current.setHoverOFF(),s.handleHover(!1,b))}),ii(zo(s),"handleContextMenu",function(b){b.preventDefault(),s.contextMenuTime=new Date().getTime(),s.clickTimer&&clearTimeout(s.clickTimer);var O=s.props,P=O.model,R=O.graphModel,F=R.getPointByClient({x:b.clientX,y:b.clientY});R.setElementStateById(P.id,ct.SHOW_MENU,F.domOverlayPosition),s.toFront(),P.isSelected||R.selectEdgeById(P.id);var Y=P==null?void 0:P.getData();R.eventCenter.emit(ze.EDGE_CONTEXTMENU,{data:Y,e:b,position:F})}),ii(zo(s),"handleMouseDown",function(b){b.stopPropagation(),s.startTime=new Date().getTime()}),ii(zo(s),"handleMouseUp",function(b){if(s.startTime){var O=new Date().getTime()-s.startTime;if(!(O>200)){var P=b.button===2;if(!P){var R=b.detail===2,F=s.props,Y=F.model,ne=F.graphModel,pe=Y==null?void 0:Y.getData(),Le=ne.getPointByClient({x:b.clientX,y:b.clientY});if(R){var De=ne.editConfigModel,Fe=ne.textEditElement;if(Fe&&Fe.id===Y.id&&ne.setElementStateById(Y.id,ct.DEFAULT),De.edgeTextEdit&&Y.text.editable&&ne.setElementStateById(Y.id,ct.TEXT_EDIT),Y.modelType===Ze.POLYLINE_EDGE){var Tt=Y,It=ne.getPointByClient({x:b.x,y:b.y}),ut=It.canvasOverlayPosition,Ft=ut.x,Pt=ut.y,er=S0({x:Ft,y:Pt},Tt.points);Tt.dbClickPosition=er}ne.eventCenter.emit(ze.EDGE_DBCLICK,{data:pe,e:b,position:Le})}else ne.eventCenter.emit(ze.ELEMENT_CLICK,{data:pe,e:b,position:Le}),ne.eventCenter.emit(ze.EDGE_CLICK,{data:pe,e:b,position:Le});var wt=ne.editConfigModel;ne.selectEdgeById(Y.id,SE(b,wt)),s.toFront()}}}}),s}return PL(t,[{key:"getShape",value:function(){return Object(Be.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,d=f.model,v=f.graphModel;if(d.state===ct.TEXT_EDIT)return null;var b=!1,O=v.editConfigModel;return(d.text.draggable||O.edgeTextDraggable)&&(b=!0),Object(Be.g)(hL,{ref:this.textRef,editable:O.edgeTextEdit&&d.text.editable,model:d,graphModel:v,draggable:b})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isSelected,O=this.state,P=O.hover;return{start:d,end:v,hover:P,isSelected:b}}},{key:"getArrowStyle",value:function(){return console.error("getArrowStyle is deprecated in 1.2.0, please use model.getArrowStyle"),null}},{key:"getArrow",value:function(){var f=this.props.model,d=f.id,v=f.getArrowStyle(),b=v.refY,O=b===void 0?0:b,P=v.refX,R=P===void 0?2:P;return Object(Be.g)("g",null,Object(Be.g)("defs",null,Object(Be.g)("marker",{id:"marker-start-".concat(d),refX:-R,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Be.g)("marker",{id:"marker-end-".concat(d),refX:R,refY:O,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getEndArrow",value:function(){var f=this.props.model,d=f.getArrowStyle(),v=d.stroke,b=d.strokeWidth,O=d.offset,P=d.verticalLength;return Object(Be.g)("path",{stroke:v,fill:v,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(O," -").concat(P," L ").concat(O," ").concat(P," Z")})}},{key:"getAdjustPoints",value:function(){var f=this.props,d=f.model,v=f.graphModel,b=d.getAdjustStart(),O=d.getAdjustEnd();return Object(Be.g)("g",null,Object(Be.g)(mx,dc({type:"SOURCE"},b,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})),Object(Be.g)(mx,dc({type:"TARGET"},O,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:d,graphModel:v})))}},{key:"getAnimation",value:function(){console.error("getAnimation is deprecated in 1.2.0, please use model.getEdgeAnimationStyle")}},{key:"getAppendWidth",value:function(){return Object(Be.g)("g",null)}},{key:"getAppend",value:function(){return Object(Be.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,d=f.graphModel,v=f.model,b=d.overlapMode;b!==mt.INCREASE&&d.toFront(v.id)}},{key:"render",value:function(){var f=this.props,d=f.model,v=d.isSelected,b=d.isHitable,O=d.isShowAdjustPoint,P=f.graphModel;return P.animation,Object(Be.g)("g",null,Object(Be.g)("g",{className:["lf-edge",!b&&"pointer-none",v&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),O&&v?this.getAdjustPoints():"")}}]),t}(Be.a);function Wp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wp=function(t){return typeof t}:Wp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(e)}function RL(e,r){return LL(e)||CL(e,r)||DL(e,r)||IL()}function IL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DL(e,r){if(e){if(typeof e=="string")return Ex(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ex(e,r)}}function Ex(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function CL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function LL(e){if(Array.isArray(e))return e}function jL(e){var r={d:""};return Object.entries(e).forEach(function(t){var s=RL(t,2),f=s[0],d=s[1],v=Wp(d);(f==="style"||v!=="object")&&(r[f]=d)}),Object(Be.g)("path",r)}var pc=jL;function Yp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yp=function(t){return typeof t}:Yp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function Cm(){return Cm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Cm.apply(this,arguments)}function BL(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ox(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function FL(e,r,t){return r&&Ox(e.prototype,r),t&&Ox(e,t),e}function GL(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Lm(e,r)}function Lm(e,r){return Lm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Lm(e,r)}function kL(e){var r=HL();return function(){var s=Kp(e),f;if(r){var d=Kp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return UL(this,f)}}function UL(e,r){if(r&&(Yp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zL(e)}function zL(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kp(e){return Kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Kp(e)}var jm=function(e){GL(t,e);var r=kL(t);function t(){return BL(this,t),r.apply(this,arguments)}return FL(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeStyle(),R=f.getEdgeAnimationStyle(),F=R.strokeDasharray,Y=R.stroke,ne=R.strokeDashoffset,pe=R.animationName,Le=R.animationDuration,De=R.animationIterationCount,Fe=R.animationTimingFunction,Tt=R.animationDirection;return Object(Be.g)(fl,Cm({},P,{x1:d.x,y1:d.y,x2:v.x,y2:v.y},O,b?{strokeDasharray:F,stroke:Y,style:{strokeDashoffset:ne,animationName:pe,animationDuration:Le,animationIterationCount:De,animationTimingFunction:Fe,animationDirection:Tt}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,d=f.startPoint,v=f.endPoint,b={start:d,end:v},O=CN(b),P=O.d,R=O.strokeWidth,F=O.fill,Y=O.strokeDasharray,ne=O.stroke;return Object(Be.g)(pc,{d:P,fill:F,strokeWidth:R,stroke:ne,strokeDasharray:Y})}}]),t}(hc);function Zp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zp=function(t){return typeof t}:Zp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zp(e)}function XL(e,r){return YL(e)||WL(e,r)||VL(e,r)||$L()}function $L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VL(e,r){if(e){if(typeof e=="string")return Sx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Sx(e,r)}}function Sx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function WL(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function YL(e){if(Array.isArray(e))return e}function KL(e){var r={points:"",fill:"none"};return Object.entries(e).forEach(function(t){var s=XL(t,2),f=s[0],d=s[1];if(f==="style")r[f]=d;else{var v=Zp(d);v!=="object"&&(r[f]=d)}}),Object(Be.g)("polyline",r)}var ZL=KL;function Jp(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jp=function(t){return typeof t}:Jp=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function xx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Qp(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xx(Object(t),!0).forEach(function(s){Oa(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Bm(){return Bm=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Bm.apply(this,arguments)}function JL(e,r){return t2(e)||e2(e,r)||qL(e,r)||QL()}function QL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qL(e,r){if(e){if(typeof e=="string")return Tx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tx(e,r)}}function Tx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function e2(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function t2(e){if(Array.isArray(e))return e}function r2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ax(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n2(e,r,t){return r&&Ax(e.prototype,r),t&&Ax(e,t),e}function o2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Fm(e,r)}function Fm(e,r){return Fm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Fm(e,r)}function i2(e){var r=s2();return function(){var s=qp(e),f;if(r){var d=qp(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return a2(this,f)}}function a2(e,r){if(r&&(Jp(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ea(e)}function Ea(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qp(e){return qp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qp(e)}function Oa(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Gm=function(e){o2(t,e);var r=i2(t);function t(){var s;return r2(this,t),s=r.call(this),Oa(Ea(s),"drag",void 0),Oa(Ea(s),"isDragging",void 0),Oa(Ea(s),"isShowAdjustPointTemp",void 0),Oa(Ea(s),"appendInfo",void 0),Oa(Ea(s),"onDragStart",function(){var f=s.props.model;f.dragAppendStart(),s.isShowAdjustPointTemp=f.isShowAdjustPoint,f.isShowAdjustPoint=!1}),Oa(Ea(s),"onDragging",function(f){var d=f.deltaX,v=f.deltaY,b=s.props,O=b.model,P=b.graphModel;s.isDragging=!0;var R=P.transformModel,F=P.editConfigModel,Y=R.fixDeltaXY(d,v),ne=JL(Y,2),pe=ne[0],Le=ne[1],De=O,Fe=F.adjustEdgeMiddle;Fe?s.appendInfo=De.dragAppendSimple(s.appendInfo,{x:pe,y:Le}):s.appendInfo=De.dragAppend(s.appendInfo,{x:pe,y:Le})}),Oa(Ea(s),"onDragEnd",function(){var f=s.props,d=f.model,v=f.graphModel.eventCenter,b=d;b.dragAppendEnd(),s.isDragging=!1,b.isShowAdjustPoint=s.isShowAdjustPointTemp,s.appendInfo=void 0,v.emit(ze.EDGE_ADJUST,{data:b.getData()})}),Oa(Ea(s),"beforeDragStart",function(f,d){d.dragAble&&s.drag.handleMouseDown(f),s.appendInfo=d}),s.drag=new ha({onDragStart:s.onDragStart,onDragging:s.onDragging,onDragEnd:s.onDragEnd,isStopPropagation:!1}),s}return n2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.points,v=f.isAnimation,b=f.arrowConfig,O=f.getEdgeStyle(),P=f.getEdgeAnimationStyle(),R=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,pe=P.animationDuration,Le=P.animationIterationCount,De=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(ZL,Bm({points:d},O,b,v?{strokeDasharray:R,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:pe,animationIterationCount:Le,animationTimingFunction:De,animationDirection:Fe}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=f.points,v=f.isSelected,b=this.state,O=b.hover,P={start:null,end:null,hover:O,isSelected:v},R=sl(d);return R.length>=2&&(P.start=R[R.length-2],P.end=R[R.length-1]),P}},{key:"getAppendAttributes",value:function(f){var d=f.start,v=f.end,b;if(d.x===v.x&&d.y===v.y)b="";else{var O={start:d,end:v,offset:10,verticalLength:5},P=tc(Qp(Qp({},O),{},{type:"start"})),R=tc(Qp(Qp({},O),{},{type:"end"}));b="M".concat(P.leftX," ").concat(P.leftY,` 
      L`).concat(P.rightX," ").concat(P.rightY,` 
      L`).concat(R.rightX," ").concat(R.rightY,`
      L`).concat(R.leftX," ").concat(R.leftY," z")}return{d:b,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var d=this.getAppendAttributes(f),v=d.d,b=d.strokeWidth,O=d.fill,P=d.strokeDasharray,R=d.stroke;return Object(Be.g)(pc,{d:v,fill:O,strokeWidth:b,stroke:R,strokeDasharray:P})}},{key:"getAppendWidth",value:function(){for(var f=this,d=this.props,v=d.model,b=d.graphModel,O=v.pointsList,P=v.draggable,R=[],F=O.length,Y=function(Le){var De="lf-polyline-append",Fe={start:{x:O[Le].x,y:O[Le].y},end:{x:O[Le+1].x,y:O[Le+1].y},startIndex:Le,endIndex:Le+1,direction:"",dragAble:!0},Tt=Object(Be.g)("g",{className:De},f.getAppendShape(Fe)),It=b.editConfigModel,ut=It.adjustEdge,Ft=It.adjustEdgeMiddle;if(ut&&P){var Pt=Fe.startIndex,er=Fe.endIndex,wt=Ft&&(Pt===0||er===F-1);Fe.dragAble=!wt,Fe.start.x===Fe.end.x?(Fe.dragAble&&(De+="-ew-resize"),Fe.direction=At.VERTICAL):Fe.start.y===Fe.end.y&&(Fe.dragAble&&(De+="-ns-resize"),Fe.direction=At.HORIZONTAL),Tt=Object(Be.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(Cr){return f.beforeDragStart(Cr,Fe)}},Object(Be.g)("g",{className:De},f.getAppendShape(Fe)))}R.push(Tt)},ne=0;ne<F-1;ne++)Y(ne);return Object(Be.g)("g",null,R)}}]),t}(hc);function ev(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ev=function(t){return typeof t}:ev=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}function u2(e,r){return d2(e)||c2(e,r)||f2(e,r)||l2()}function l2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f2(e,r){if(e){if(typeof e=="string")return Px(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Px(e,r)}}function Px(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function c2(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function d2(e){if(Array.isArray(e))return e}function km(){return km=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},km.apply(this,arguments)}function h2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _x(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function p2(e,r,t){return r&&_x(e.prototype,r),t&&_x(e,t),e}function v2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Um(e,r)}function Um(e,r){return Um=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Um(e,r)}function y2(e){var r=b2();return function(){var s=tv(e),f;if(r){var d=tv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return g2(this,f)}}function g2(e,r){if(r&&(ev(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m2(e)}function m2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},tv(e)}var zm=function(e){v2(t,e);var r=y2(t);function t(){return h2(this,t),r.apply(this,arguments)}return p2(t,[{key:"getEdge",value:function(){var f=this.props.model,d=f.getEdgeStyle(),v=f.path,b=f.isAnimation,O=f.arrowConfig,P=f.getEdgeAnimationStyle(),R=P.strokeDasharray,F=P.stroke,Y=P.strokeDashoffset,ne=P.animationName,pe=P.animationDuration,Le=P.animationIterationCount,De=P.animationTimingFunction,Fe=P.animationDirection;return Object(Be.g)(pc,km({d:v},d,O,b?{strokeDasharray:R,stroke:F,style:{strokeDashoffset:Y,animationName:ne,animationDuration:pe,animationIterationCount:Le,animationTimingFunction:De,animationDirection:Fe}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Be.g)(pc,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,d=this.state,v=d.hover,b=f,O=b.path,P=b.isSelected,R=LN(O),F=u2(R,2),Y=F[0],ne=F[1],pe={start:Y,end:ne,hover:v,isSelected:P};return pe}}]),t}(hc);function rv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rv=function(t){return typeof t}:rv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function wx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function E2(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wx(Object(t),!0).forEach(function(s){O2(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function O2(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function S2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Nx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function x2(e,r,t){return r&&Nx(e.prototype,r),t&&Nx(e,t),e}function T2(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Hm(e,r)}function Hm(e,r){return Hm=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Hm(e,r)}function A2(e){var r=w2();return function(){var s=nv(e),f;if(r){var d=nv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return P2(this,f)}}function P2(e,r){if(r&&(rv(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _2(e)}function _2(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nv(e){return nv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nv(e)}var N2=function(e){T2(t,e);var r=A2(t);function t(){return S2(this,t),r.apply(this,arguments)}return x2(t,[{key:"getArrowAttributes",value:function(){var f=this.props,d=f.arrowInfo,v=f.style,b=d.start,O=d.end,P={start:b,end:O,offset:v.offset,verticalLength:v.verticalLength,type:"end"},R=tc(P),F=R.leftX,Y=R.leftY,ne=R.rightX,pe=R.rightY;return E2({d:"M".concat(F," ").concat(Y," L").concat(O.x," ").concat(O.y," L").concat(ne," ").concat(pe," z")},v)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),d=f.d,v=f.strokeWidth,b=f.stroke,O=f.fill;return Object(Be.g)(pc,{d,fill:O,strokeWidth:v,stroke:b})}},{key:"render",value:function(){return Object(Be.g)("g",{className:"lf-arrow"},this.getShape())}}]),t}(Be.a);function M2(e,r){return Ka(e,r)}var Mx=M2;function R2(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}var I2=R2,D2=function(){return ro.a.Date.now()},Xm=D2,C2=/\s/;function L2(e){for(var r=e.length;r--&&C2.test(e.charAt(r)););return r}var j2=L2,B2=/^\s+/;function F2(e){return e&&e.slice(0,j2(e)+1).replace(B2,"")}var G2=F2,Rx=0/0,k2=/^[-+]0x[0-9a-f]+$/i,U2=/^0b[01]+$/i,z2=/^0o[0-7]+$/i,H2=parseInt;function X2(e){if(typeof e=="number")return e;if(Vs(e))return Rx;if(Kr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Kr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=G2(e);var t=U2.test(e);return t||z2.test(e)?H2(e.slice(2),t?2:8):k2.test(e)?Rx:+e}var Ix=X2,$2="Expected a function",V2=Math.max,W2=Math.min;function Y2(e,r,t){var s,f,d,v,b,O,P=0,R=!1,F=!1,Y=!0;if(typeof e!="function")throw new TypeError($2);r=Ix(r)||0,Kr(t)&&(R=!!t.leading,F="maxWait"in t,d=F?V2(Ix(t.maxWait)||0,r):d,Y="trailing"in t?!!t.trailing:Y);function ne(Pt){var er=s,wt=f;return s=f=void 0,P=Pt,v=e.apply(wt,er),v}function pe(Pt){return P=Pt,b=setTimeout(Fe,r),R?ne(Pt):v}function Le(Pt){var er=Pt-O,wt=Pt-P,gr=r-er;return F?W2(gr,d-wt):gr}function De(Pt){var er=Pt-O,wt=Pt-P;return O===void 0||er>=r||er<0||F&&wt>=d}function Fe(){var Pt=Xm();if(De(Pt))return Tt(Pt);b=setTimeout(Fe,Le(Pt))}function Tt(Pt){return b=void 0,Y&&s?ne(Pt):(s=f=void 0,v)}function It(){b!==void 0&&clearTimeout(b),P=0,s=O=f=b=void 0}function ut(){return b===void 0?v:Tt(Xm())}function Ft(){var Pt=Xm(),er=De(Pt);if(s=arguments,f=this,O=Pt,er){if(b===void 0)return pe(O);if(F)return clearTimeout(b),b=setTimeout(Fe,r),ne(O)}return b===void 0&&(b=setTimeout(Fe,r)),v}return Ft.cancel=It,Ft.flush=ut,Ft}var K2=Y2,Z2=o(166);function J2(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Dx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Q2(e,r,t){return r&&Dx(e.prototype,r),t&&Dx(e,t),e}function gs(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var q2=function(){function e(r){J2(this,e),gs(this,"undos",[]),gs(this,"redos",[]),gs(this,"callbacks",[]),gs(this,"stopWatch",null),gs(this,"curData",null),gs(this,"maxSize",50),gs(this,"waitTime",100),gs(this,"eventCenter",void 0),this.eventCenter=r}return Q2(e,[{key:"add",value:function(t){Mx(I2(this.undos),t)||(this.undos.push(t),Mx(this.curData,t)||(this.redos=[]),this.eventCenter.emit(ze.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var t=this.undos.pop();this.redos.push(t);var s=this.undos.pop();return this.curData=gn(s),s}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var t=this.redos.pop();return this.curData=gn(t),t}}},{key:"watch",value:function(t){var s=this;this.stopWatch&&this.stopWatch(),this.undos.push(t.modelToGraphData()),this.stopWatch=Object(Z2.a)(t,K2(function(){var f=t.modelToHistoryData();f&&s.add(f)},this.waitTime))}}]),e}(),ej=q2;function ov(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ov=function(t){return typeof t}:ov=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}var Cx,Lx,jx;function tj(e,r){return ij(e)||oj(e,r)||nj(e,r)||rj()}function rj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nj(e,r){if(e){if(typeof e=="string")return Bx(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bx(e,r)}}function Bx(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function oj(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function ij(e){if(Array.isArray(e))return e}function Fx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function Sl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Fx(Object(t),!0).forEach(function(s){iu(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function aj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Gx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function sj(e,r,t){return r&&Gx(e.prototype,r),t&&Gx(e,t),e}function uj(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&$m(e,r)}function $m(e,r){return $m=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},$m(e,r)}function lj(e){var r=cj();return function(){var s=iv(e),f;if(r){var d=iv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return fj(this,f)}}function fj(e,r){if(r&&(ov(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xl(e)}function xl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iv(e)}function iu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Vm=ai(Cx=(jx=Lx=function(e){uj(t,e);var r=lj(t);function t(){var s;return aj(this,t),s=r.call(this),iu(xl(s),"ref",Object(Be.f)()),iu(xl(s),"__prevText",{type:"",text:"",id:""}),iu(xl(s),"keyupHandler",function(f){var d=s.props.graphModel.textEditElement;f.key==="Enter"&&f.altKey&&d.setElementState(0)}),iu(xl(s),"inputHandler",function(f){var d=f.target,v=d.innerText,b=s.props.graphModel.textEditElement;s.__prevText={type:b.type,text:v.replace(/(\r\n)+$|(\n)+$/,""),id:b.id}}),iu(xl(s),"keydownHandler",function(f){f.stopPropagation()}),s.state={style:{left:0,top:0}},s}return sj(t,[{key:"componentDidUpdate",value:function(){var f=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var d=this.__prevText,v=d.text,b=d.id;f.updateText(b,v),f.eventCenter.emit(ze.TEXT_UPDATE,Sl({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(f){if(window.getSelection!==void 0&&document.createRange!==void 0){var d=document.createRange();d.selectNodeContents(f),d.collapse(!1);var v=window.getSelection();v.removeAllRanges(),v.addRange(d)}}},{key:"render",value:function(){var f,d=this.props.graphModel.textEditElement,v=this.state.style;return d?Object(Be.g)("div",{contentEditable:!0,className:"lf-text-input",style:v,ref:this.ref,key:d.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(f=d.text)===null||f===void 0?void 0:f.value):null}}],[{key:"getDerivedStateFromProps",value:function(f){var d=f.graphModel,v=d.transformModel,b=d.theme,O=d.textEditElement,P;if(O){var R;if(!((R=O.text)!==null&&R!==void 0&&R.value))if(O.BaseType===Ve.EDGE){O=O;var F=O.text,Y=O.textPosition,ne=Y.x,pe=Y.y;F.x=ne,F.y=pe,O.setText(F)}else O=O;var Le={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(O.BaseType===Ve.EDGE){var De=b.edgeText,Fe=De.overflowMode,Tt=De.lineHeight,It=De.wrapPadding,ut=De.textWidth;ut&&Fe==="autoWrap"&&(P=Sl(Sl({},Le),{},{width:ut,minWidth:ut,lineHeight:Tt,padding:It}))}else if(O.BaseType===Ve.NODE){var Ft=b.nodeText,Pt=Ft.overflowMode,er=Ft.lineHeight,wt=Ft.wrapPadding,gr=Ft.textWidth,Cr=O,_n=Cr.width,Fn=Cr.modelType;(Fn!==Ze.TEXT_NODE&&Pt==="autoWrap"||Fn===Ze.TEXT_NODE&&gr)&&(P=Sl(Sl({},Le),{},{width:gr||_n,minWidth:gr||_n,lineHeight:er,padding:wt}))}var qn=O.text,Eo=qn.x,au=qn.y,Tl=v.CanvasPointToHtmlPoint([Eo,au]),ms=tj(Tl,2),Al=ms[0],Qm=ms[1];return{style:Sl({left:Al,top:Qm},P)}}}}]),t}(Be.a),iu(Lx,"toolName","textEdit"),jx))||Cx,dj=function(r){var t=r.x,s=r.y,f=r.width,d=r.height;return{x:t-f/2,y:s-d/2,x1:t+f/2,y1:s+d/2}},hj=function(r){var t=r.startPoint,s=r.endPoint,f=(t.x+s.x)/2,d=(t.y+s.y)/2,v=Math.abs(t.x-s.x)+10,b=Math.abs(t.y-s.y)+10;return{x:f-v/2,y:d-b/2,x1:f+v/2,y1:d+b/2}},pj=function(r){var t=r.points,s=sl(t),f=rc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},vj=function(r){var t=r.path,s=gh(t),f=rc(s,8),d=f.x,v=f.y,b=f.width,O=f.height;return{x:d-b/2,y:v-O/2,x1:d+b/2,y1:v+O/2}},yj=function(r){if(r.modelType===Ze.LINE_EDGE)return hj(r);if(r.modelType===Ze.POLYLINE_EDGE)return pj(r);if(r.modelType===Ze.BEZIER_EDGE)return vj(r)};function av(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?av=function(t){return typeof t}:av=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}var kx,Ux,zx;function Hx(e,r){return bj(e)||mj(e,r)||Xx(e,r)||gj()}function gj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mj(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],f=!0,d=!1,v,b;try{for(t=t.call(e);!(f=(v=t.next()).done)&&(s.push(v.value),!(r&&s.length===r));f=!0);}catch(O){d=!0,b=O}finally{try{!f&&t.return!=null&&t.return()}finally{if(d)throw b}}return s}}function bj(e){if(Array.isArray(e))return e}function Ej(e){return xj(e)||Sj(e)||Xx(e)||Oj()}function Oj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xx(e,r){if(e){if(typeof e=="string")return Wm(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Wm(e,r)}}function Sj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xj(e){if(Array.isArray(e))return Wm(e)}function Wm(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function Tj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $x(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Aj(e,r,t){return r&&$x(e.prototype,r),t&&$x(e,t),e}function Pj(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Ym(e,r)}function Ym(e,r){return Ym=Object.setPrototypeOf||function(s,f){return s.__proto__=f,s},Ym(e,r)}function _j(e){var r=Nj();return function(){var s=sv(e),f;if(r){var d=sv(this).constructor;f=Reflect.construct(s,arguments,d)}else f=s.apply(this,arguments);return wj(this,f)}}function wj(e,r){if(r&&(av(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vc(e)}function vc(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sv(e){return sv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sv(e)}function yc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Km=ai(kx=(zx=Ux=function(e){Pj(t,e);var r=_j(t);function t(s){var f;Tj(this,t),f=r.call(this),yc(vc(f),"stepDrag",void 0),yc(vc(f),"handleMouseDown",function(O){f.stepDrag.handleMouseDown(O)}),yc(vc(f),"onDragging",function(O){var P=O.deltaX,R=O.deltaY,F=f.props.graphModel,Y=F.getSelectElements(!0);F.moveNodes(Y.nodes.map(function(ne){return ne.id}),P,R)}),yc(vc(f),"handleContextMenu",function(O){O.preventDefault();var P=f.props,R=P.graphModel,F=P.graphModel,Y=F.eventCenter,ne=F.selectElements,pe=R.getPointByClient({x:O.clientX,y:O.clientY}),Le={nodes:[],edges:[]},De=Ej(ne.values());De.forEach(function(Fe){Fe.BaseType===Ve.NODE&&Le.nodes.push(Fe.getData()),Fe.BaseType===Ve.EDGE&&Le.edges.push(Fe.getData())}),Y.emit(ze.SELECTION_CONTEXTMENU,{data:Le,e:O,position:pe})});var d=s.graphModel,v=d.gridSize,b=d.eventCenter;return f.stepDrag=new ha({onDragging:f.onDragging,step:v,eventType:"SELECTION",eventCenter:b}),f}return Aj(t,[{key:"render",value:function(){var f=this.props.graphModel,d=f.selectElements,v=f.transformModel;if(!(d.size<=1)){var b=Number.MAX_SAFE_INTEGER,O=Number.MAX_SAFE_INTEGER,P=Number.MIN_SAFE_INTEGER,R=Number.MIN_SAFE_INTEGER;d.forEach(function(De){var Fe={x:0,y:0,x1:0,y1:0};De.BaseType===Ve.NODE&&(Fe=dj(De)),De.BaseType===Ve.EDGE&&(Fe=yj(De)),b=Math.min(b,Fe.x),O=Math.min(O,Fe.y),P=Math.max(P,Fe.x1),R=Math.max(R,Fe.y1)});var F=v.CanvasPointToHtmlPoint([b,O]),Y=Hx(F,2);b=Y[0],O=Y[1];var ne=v.CanvasPointToHtmlPoint([P,R]),pe=Hx(ne,2);P=pe[0],R=pe[1];var Le={left:"".concat(b-10,"px"),top:"".concat(O-10,"px"),width:"".concat(P-b+20,"px"),height:"".concat(R-O+20,"px")};return Object(Be.g)("div",{className:"lf-multiple-select",style:Le,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu})}}}]),t}(Be.a),yc(Ux,"toolName","multipleSelect"),zx))||kx;function Mj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Vx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Rj(e,r,t){return r&&Vx(e.prototype,r),t&&Vx(e,t),e}function uv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ij=function(){function e(r){Mj(this,e),uv(this,"tools",void 0),uv(this,"components",void 0),uv(this,"toolMap",new Map),uv(this,"instance",void 0),this.instance=r,this.isDisabledTool(Vm.toolName)||this.registerTool(Vm.toolName,Vm),this.isDisabledTool(Km.toolName)||this.registerTool(Km.toolName,Km);var t=r.graphModel,s=t.eventCenter;s.on("".concat(ze.GRAPH_TRANSFORM,",").concat(ze.NODE_CLICK,",").concat(ze.BLANK_CLICK," "),function(){var f=t.textEditElement,d=t.editConfigModel,v=d.edgeTextEdit,b=d.nodeTextEdit;(v||b)&&f&&t.textEditElement.setElementState(ct.DEFAULT)})}return Rj(e,[{key:"isDisabledTool",value:function(t){return this.instance.options.disabledTools.indexOf(t)!==-1}},{key:"registerTool",value:function(t,s){this.toolMap.set(t,s)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}]),e}(),Dj=o(167),Cj=o.n(Dj);function Lj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Wx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function jj(e,r,t){return r&&Wx(e.prototype,r),t&&Wx(e,t),e}function Zm(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Yx=function(){function e(r){Lj(this,e),Zm(this,"mousetrap",void 0),Zm(this,"options",void 0),Zm(this,"target",void 0),r.keyboard||(r.keyboard={enabled:!1}),this.options=r;var t=r.lf;this.target=t.container,this.mousetrap=new Cj.a,r.keyboard.enabled&&this.enable(!0)}return jj(e,[{key:"initShortcuts",value:function(){var t=this,s=this.options.keyboard.shortcuts;if(s)if(g(s))s.forEach(function(b){var O=b.keys,P=b.callback,R=b.action;return t.on(O,P,R)});else{var f=s.keys,d=s.callback,v=s.action;this.on(f,d,v)}}},{key:"on",value:function(t,s,f){this.mousetrap.bind(this.getKeys(t),s,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(t,s){this.mousetrap.unbind(this.getKeys(t),s)}},{key:"enable",value:function(t){(this.disabled||t)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(t){var s=this;return(Array.isArray(t)?t:[t]).map(function(f){return s.formatKey(f)})}},{key:"formatKey",value:function(t){var s=t.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command");return s}}]),e}(),Bj=Yx,ji=null;function Kx(e,r){return e.x+=r,e.y+=r,e.text&&(e.text.x+=r,e.text.y+=r),e}function Zx(e,r){return e.startPoint&&(e.startPoint.x+=r,e.startPoint.y+=r),e.endPoint&&(e.endPoint.x+=r,e.endPoint.y+=r),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(function(t){t.x+=r,t.y+=r}),e.text&&(e.text.x+=r,e.text.y+=r),e}var lv=40;function Fj(e,r){var t=e.keyboard,s=t.options.keyboard;t.on(["cmd + c","ctrl + c"],function(){if(s.enabled&&!r.textEditElement){var f=e.options.guards,d=r.getSelectElements(!1),v=f&&f.beforeClone?f.beforeClone(d):!0;return v?(ji=d,ji.nodes.forEach(function(b){return Kx(b,lv)}),ji.edges.forEach(function(b){return Zx(b,lv)}),!1):(ji=null,!1)}}),t.on(["cmd + v","ctrl + v"],function(){if(s.enabled&&!r.textEditElement){if(ji&&(ji.nodes||ji.edges)){e.clearSelectElements();var f=e.addElements(ji);if(!f)return;f.nodes.forEach(function(d){return e.selectElementById(d.id,!0)}),f.edges.forEach(function(d){return e.selectElementById(d.id,!0)}),ji.nodes.forEach(function(d){return Kx(d,lv)}),ji.edges.forEach(function(d){return Zx(d,lv)})}return!1}}),t.on(["cmd + z","ctrl + z"],function(){if(s.enabled&&!r.textEditElement)return e.undo(),!1}),t.on(["cmd + y","ctrl + y"],function(){if(s.enabled&&!r.textEditElement)return e.redo(),!1}),t.on(["backspace"],function(){if(s.enabled&&!r.textEditElement){var f=r.getSelectElements(!0);return e.clearSelectElements(),f.edges.forEach(function(d){return e.deleteEdge(d.id)}),f.nodes.forEach(function(d){return e.deleteNode(d.id)}),!1}})}function Gj(e,r){e.on("node:mousemove",function(t){var s=t.data;r.setNodeSnapLine(s)}),e.on("node:mouseup",function(){r.clearSnapline()})}function fv(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fv=function(t){return typeof t}:fv=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fv(e)}function Jx(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),t.push.apply(t,s)}return t}function gc(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Jx(Object(t),!0).forEach(function(s){En(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Jx(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function kj(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Qx(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Uj(e,r,t){return r&&Qx(e.prototype,r),t&&Qx(e,t),e}function En(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Jm=function(){function e(r){var t=this;kj(this,e),En(this,"container",void 0),En(this,"width",void 0),En(this,"height",void 0),En(this,"graphModel",void 0),En(this,"history",void 0),En(this,"viewMap",new Map),En(this,"tool",void 0),En(this,"keyboard",void 0),En(this,"dnd",void 0),En(this,"options",void 0),En(this,"snaplineModel",void 0),En(this,"components",[]),En(this,"plugins",void 0),En(this,"extension",{}),En(this,"adapterIn",void 0),En(this,"adapterOut",void 0),En(this,"getView",function(s){return t.viewMap.get(s)}),r=SO(r),this.options=r,this.container=r.container,this.plugins=r.plugins,this.graphModel=new QN(gc({},r)),this.tool=new Ij(this),this.history=new ej(this.graphModel.eventCenter),this.dnd=new BR({lf:this}),this.keyboard=new Bj({lf:this,keyboard:r.keyboard}),r.snapline!==!1&&(this.snaplineModel=new zS(this.graphModel),Gj(this.graphModel.eventCenter,this.snaplineModel)),Fj(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(r.disabledPlugins)}return Uj(e,[{key:"register",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(typeof t!="string"){this.registerElement(t);return}var d={BaseEdge:hc,BaseEdgeModel:dg,BaseNode:ma,BaseNodeModel:ya,RectNode:fm,RectNodeModel:Qg,CircleNode:hm,CircleNodeModel:Ug,PolygonNode:ym,PolygonNodeModel:Kg,TextNode:Tm,TextNodeModel:em,LineEdge:jm,LineEdgeModel:vg,DiamondNode:bm,DiamondNodeModel:Xg,PolylineEdge:Gm,PolylineEdgeModel:mg,BezierEdge:zm,BezierEdgeModel:Fg,EllipseNode:Sm,EllipseNodeModel:Vg,HtmlNode:_m,HtmlNodeModel:rm,h:Be.g,type:t};this.viewMap.forEach(function(R){var F=R.extendKey;F&&(d[F]=R)}),this.graphModel.modelMap.forEach(function(R){var F=R.extendKey;F&&(d[F]=R)});var v=s(d),b=v.view,O=v.model,P=b;f&&!P.isObervered&&(P.isObervered=!0,P=kr(P)),this.setView(t,P),this.graphModel.setModel(t,O)}},{key:"registerElement",value:function(t){var s=t.view;t.isObserverView!==!1&&!s.isObervered&&(s.isObervered=!0,s=kr(s)),this.setView(t.type,s),this.graphModel.setModel(t.type,t.model)}},{key:"batchRegister",value:function(){var t=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];s.forEach(function(f){t.registerElement(f)})}},{key:"defaultRegister",value:function(){this.registerElement({view:fm,model:Qg,type:"rect"}),this.registerElement({type:"circle",view:hm,model:Ug}),this.registerElement({type:"polygon",view:ym,model:Kg}),this.registerElement({type:"line",view:jm,model:vg}),this.registerElement({type:"polyline",view:Gm,model:mg}),this.registerElement({type:"bezier",view:zm,model:Fg}),this.registerElement({type:"text",view:Tm,model:em}),this.registerElement({type:"ellipse",view:Sm,model:Vg}),this.registerElement({type:"diamond",view:bm,model:Xg}),this.registerElement({type:"html",view:_m,model:rm})}},{key:"selectElementById",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;this.graphModel.selectElementById(t,s),!s&&f&&this.graphModel.toFront(t)}},{key:"focusOn",value:function(t){var s=this.graphModel.transformModel,f=t.coordinate,d=t.id;if(!f){var v=this.getNodeModelById(d);v&&(f=v.getData());var b=this.getEdgeModelById(d);b&&(f=b.textPosition)}var O=f,P=O.x,R=O.y;s.focusOn(P,R,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(t){this.graphModel.setTheme(t)}},{key:"resize",value:function(t,s){this.graphModel.resize(t,s),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(t){this.graphModel.setDefaultEdgeType(t)}},{key:"updateText",value:function(t,s){this.graphModel.updateText(t,s)}},{key:"deleteElement",value:function(t){var s,f,d,v=this.getModelById(t);if(!v)return!1;var b=(s={},En(s,Ve.NODE,this.deleteNode),En(s,Ve.EDGE,this.deleteEdge),s),O=v.BaseType;return(f=(d=b[O])===null||d===void 0?void 0:d.call(this,t))!==null&&f!==void 0?f:!1}},{key:"getModelById",value:function(t){return this.graphModel.getElement(t)}},{key:"getDataById",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getData()}},{key:"changeNodeType",value:function(t,s){this.graphModel.changeNodeType(t,s)}},{key:"changeEdgeType",value:function(t,s){this.graphModel.changeEdgeType(t,s)}},{key:"getNodeEdges",value:function(t){return this.graphModel.getNodeEdges(t)}},{key:"addNode",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ze.NODE_ADD;return this.graphModel.addNode(t,s)}},{key:"deleteNode",value:function(t){var s=this.graphModel.getNodeModelById(t);if(!s)return!1;var f=s.getData(),d=this.options.guards,v=d&&d.beforeDelete?d.beforeDelete(f):!0;return v&&this.graphModel.deleteNode(t),v}},{key:"cloneNode",value:function(t){var s=this.graphModel.getNodeModelById(t),f=s.getData(),d=this.options.guards,v=d&&d.beforeClone?d.beforeClone(f):!0;if(v)return this.graphModel.cloneNode(t)}},{key:"changeNodeId",value:function(t,s){return this.graphModel.changeNodeId(t,s)}},{key:"getNodeModelById",value:function(t){return this.graphModel.getNodeModelById(t)}},{key:"getNodeDataById",value:function(t){return this.graphModel.getNodeModelById(t).getData()}},{key:"addEdge",value:function(t){return this.graphModel.addEdge(t)}},{key:"deleteEdge",value:function(t){var s=this.options.guards,f=this.graphModel.edgesMap[t];if(!f)return!1;var d=f.model.getData(),v=s&&s.beforeDelete?s.beforeDelete(d):!0;return v&&this.graphModel.deleteEdgeById(t),v}},{key:"deleteEdgeByNodeId",value:function(t){var s=t.sourceNodeId,f=t.targetNodeId;s&&f?this.graphModel.deleteEdgeBySourceAndTarget(s,f):s?this.graphModel.deleteEdgeBySource(s):f&&this.graphModel.deleteEdgeByTarget(f)}},{key:"changeEdgeId",value:function(t,s){return this.graphModel.changeEdgeId(t,s)}},{key:"getEdgeModelById",value:function(t){var s,f=this.graphModel.edgesMap;return(s=f[t])===null||s===void 0?void 0:s.model}},{key:"getEdgeModels",value:function(t){var s=this.graphModel.edges,f=t.sourceNodeId,d=t.targetNodeId;if(f&&d){var v=[];return s.forEach(function(P){P.sourceNodeId===f&&P.targetNodeId===d&&v.push(P)}),v}if(f){var b=[];return s.forEach(function(P){P.sourceNodeId===f&&b.push(P)}),b}if(d){var O=[];return s.forEach(function(P){P.targetNodeId===d&&O.push(P)}),O}return[]}},{key:"getEdgeDataById",value:function(t){var s;return(s=this.getEdgeModelById(t))===null||s===void 0?void 0:s.getData()}},{key:"getNodeIncomingEdge",value:function(t){return this.graphModel.getNodeIncomingEdge(t)}},{key:"getNodeOutgoingEdge",value:function(t){return this.graphModel.getNodeOutgoingEdge(t)}},{key:"getNodeIncomingNode",value:function(t){return this.graphModel.getNodeIncomingNode(t)}},{key:"getNodeOutgoingNode",value:function(t){return this.graphModel.getNodeOutgoingNode(t)}},{key:"editText",value:function(t){this.graphModel.editText(t)}},{key:"setProperties",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.setProperties(Zn(s))}},{key:"deleteProperty",value:function(t,s){var f;(f=this.graphModel.getElement(t))===null||f===void 0||f.deleteProperty(s)}},{key:"getProperties",value:function(t){var s;return(s=this.graphModel.getElement(t))===null||s===void 0?void 0:s.getProperties()}},{key:"toFront",value:function(t){this.graphModel.toFront(t)}},{key:"setElementZIndex",value:function(t,s){return this.graphModel.setElementZIndex(t,s)}},{key:"addElements",value:function(t){for(var s=this,f=t.nodes,d=t.edges,v={},b={nodes:[],edges:[]},O=0;O<f.length;O++){var P=f[O],R=P.id,F=this.addNode(P);if(!F)return;R&&(v[R]=F.id),b.nodes.push(F)}return d.forEach(function(Y){var ne=Y.sourceNodeId,pe=Y.targetNodeId;v[ne]&&(ne=v[ne]),v[pe]&&(pe=v[pe]);var Le=s.graphModel.addEdge(gc(gc({},Y),{},{sourceNodeId:ne,targetNodeId:pe}));b.edges.push(Le)}),b}},{key:"getAreaElement",value:function(t,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return this.graphModel.getAreaElement(t,s,f,d,v).map(function(b){return b.getData()})}},{key:"getSelectElements",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this.graphModel.getSelectElements(t)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var t=this.graphModel.modelToGraphData();return this.adapterOut?this.adapterOut(t):t}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(t){this.graphModel.editConfigModel.updateEditConfig(t)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(t,s){return this.graphModel.getPointByClient({x:t,y:s})}},{key:"undo",value:function(){if(this.history.undoAble()){var t=Zn(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"redo",value:function(){if(this.history.redoAble()){var t=Zn(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(t)}}},{key:"zoom",value:function(t,s){var f=this.graphModel.transformModel;return f.zoom(t,s)}},{key:"resetZoom",value:function(){var t=this.graphModel.transformModel;t.resetZoom()}},{key:"setZoomMiniSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMiniSize(t)}},{key:"setZoomMaxSize",value:function(t){var s=this.graphModel.transformModel;s.setZoomMaxSize(t)}},{key:"getTransform",value:function(){var t=this.graphModel.transformModel,s=t.SCALE_X,f=t.SCALE_Y,d=t.TRANSLATE_X,v=t.TRANSLATE_Y;return{SCALE_X:s,SCALE_Y:f,TRANSLATE_X:d,TRANSLATE_Y:v}}},{key:"translate",value:function(t,s){var f=this.graphModel.transformModel;f.translate(t,s)}},{key:"resetTranslate",value:function(){var t=this.graphModel.transformModel,s=t.TRANSLATE_X,f=t.TRANSLATE_Y;this.translate(-s,-f)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(t,s){s===void 0&&(s=t),this.graphModel.fitView(t,s)}},{key:"openEdgeAnimation",value:function(t){this.graphModel.openEdgeAnimation(t)}},{key:"closeEdgeAnimation",value:function(t){this.graphModel.closeEdgeAnimation(t)}},{key:"on",value:function(t,s){this.graphModel.eventCenter.on(t,s)}},{key:"off",value:function(t,s){this.graphModel.eventCenter.off(t,s)}},{key:"once",value:function(t,s){this.graphModel.eventCenter.once(t,s)}},{key:"emit",value:function(t,s){this.graphModel.eventCenter.emit(t,s)}},{key:"installPlugins",value:function(){var t,s=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=(t=this.plugins)!==null&&t!==void 0?t:e.extensions;d.forEach(function(v){var b=v.pluginName||v.name;f.indexOf(b)===-1&&s.installPlugin(v)})}},{key:"installPlugin",value:function(t){if(fv(t)==="object"){var s=t.install,f=t.render;s&&s.call(t,this,e),f&&this.components.push(f.bind(t)),this.extension[t.pluginName]=t;return}var d=t,v=new d({lf:this,LogicFlow:e,options:this.options.pluginsOptions});v.render&&this.components.push(v.render.bind(v)),this.extension[d.pluginName]=v}},{key:"updateAttributes",value:function(t,s){this.graphModel.updateAttributes(t,s)}},{key:"createFakerNode",value:function(t){var s=this.graphModel.modelMap.get(t.type);if(!s){console.warn("不存在为".concat(t.type,"类型的节点"));return}var f=new s(gc(gc({},t),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(f),f}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(t){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(t)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(t,s){this.viewMap.set(t,s)}},{key:"renderRawData",value:function(t){this.graphModel.graphDataToModel(Zn(t)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Be.j)(Object(Be.g)(CR,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(ze.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(t=this.adapterIn(t)),this.renderRawData(t)}}],[{key:"use",value:function(t){var s=t.pluginName;s||(console.warn("请给插件".concat(t.name||t.constructor.name,"指定pluginName!")),s=t.name);var f=this.extensions.get(s);f&&f.destroy&&f.destroy(),this.extensions.set(s,t)}}]),e}();En(Jm,"extensions",new Map);function ai(e){return kr(e)}u.default=Jm}])})})(hB,$t);const $A=uB($t);var VA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),pB=function(n){VA(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedTargetRules=function(){var i=n.prototype.getConnectedTargetRules.call(this),u={message:"起始节点不能作为边的终点",validate:function(){return!1}};return i.push(u),i},a.extendKey="StartEventModel",a}($t.CircleNodeModel),vB=function(n){VA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="StartEventNode",a}($t.CircleNode),WA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),xv=globalThis&&globalThis.__assign||function(){return xv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},xv.apply(this,arguments)},yB=function(n){WA(a,n);function a(i,u){var o=this;return i.id||(i.id="Event_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o}return a.prototype.setAttributes=function(){this.r=18},a.prototype.getConnectedSourceRules=function(){var i=n.prototype.getConnectedSourceRules.call(this),u={message:"结束节点不能作为边的起点",validate:function(){return!1}};return i.push(u),i},a.extendKey="EndEventModel",a}($t.CircleNodeModel),gB=function(n){WA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},a.prototype.getShape=function(){var i=this.props.model,u=i.getNodeStyle(),o=i.x,l=i.y,c=i.r,h=n.prototype.getShape.call(this);return $t.h("g",{},h,$t.h("circle",xv(xv({},u),{cx:o,cy:l,r:c-5})))},a.extendKey="EndEventView",a}($t.CircleNode),YA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Mc=globalThis&&globalThis.__assign||function(){return Mc=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Mc.apply(this,arguments)},mB=function(n){YA(a,n);function a(i,u){var o=this;return i.id||(i.id="Gateway_"+Ui()),i.text||(i.text=""),i.text&&typeof i.text=="string"&&(i.text={value:i.text,x:i.x,y:i.y+40}),o=n.call(this,i,u)||this,o.points=[[25,0],[50,25],[25,50],[0,25]],o}return a.extendKey="ExclusiveGatewayModel",a}($t.PolygonNodeModel),bB=function(n){YA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.points,p=i.getNodeStyle();return $t.h("g",{transform:"matrix(1 0 0 1 "+(u-l/2)+" "+(o-c/2)+")"},$t.h("polygon",Mc(Mc({},p),{x:u,y:o,points:h})),$t.h("path",Mc({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},p)))},a.extendKey="ExclusiveGatewayNode",a}($t.PolygonNode),KA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Tv=globalThis&&globalThis.__assign||function(){return Tv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Tv.apply(this,arguments)},EB=function(n){KA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="UserTaskModel",a}($t.RectNodeModel),OB=function(n){KA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",Tv(Tv({},p),{x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c})),this.getLabelShape()])},a.extendKey="UserTaskNode",a}($t.RectNode),ZA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),pb=globalThis&&globalThis.__assign||function(){return pb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},pb.apply(this,arguments)},SB=function(n){ZA(a,n);function a(i,u){var o=this;return i.id||(i.id="Activity_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="ServiceTaskModel",a}($t.RectNodeModel),xB=function(n){ZA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getLabelShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getNodeStyle();return $t.h("svg",{x:u-l/2+5,y:o-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},$t.h("path",{fill:h.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},a.prototype.getShape=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.radius,p=i.getNodeStyle();return $t.h("g",{},[$t.h("rect",pb({x:u-l/2,y:o-c/2,rx:h,ry:h,width:l,height:c},p)),this.getLabelShape()])},a.extendKey="ServiceTaskNode",a}($t.RectNode),JA=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),QA=function(n){JA(a,n);function a(i,u){var o=this;return i.id||(i.id="Flow_"+Ui()),o=n.call(this,i,u)||this,o}return a.extendKey="SequenceFlowModel",a}($t.PolylineEdgeModel),qA=function(n){JA(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.extendKey="SequenceFlowEdge",a}($t.PolylineEdge),nT={width:40,height:40},oT={width:40,height:40},iT={width:40,height:40},aT={width:100,height:80},sT={width:100,height:80},TB=new Yj([32,32,1]);function uT(){return TB.next()}var So=function(){};So.ObjTree=function(){return this};So.ObjTree.VERSION="0.23";So.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;So.ObjTree.prototype.attr_prefix="-";So.ObjTree.prototype.parseXML=function(n){var a;if(window.DOMParser){var i=new DOMParser,u=i.parseFromString(n,"application/xml");if(!u)return;a=u.documentElement}else window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(n),a=i.documentElement);if(a)return this.parseDOM(a)};So.ObjTree.prototype.parseHTTP=function(n,a,i){var u={};for(var o in a)u[o]=a[o];if(u.method||(typeof u.postBody>"u"&&typeof u.postbody>"u"&&typeof u.parameters>"u"?u.method="get":u.method="post"),i){u.asynchronous=!0;var l=this,c=i,h=u.onComplete;u.onComplete=function(y){var S;y&&y.responseXML&&y.responseXML.documentElement&&(S=l.parseDOM(y.responseXML.documentElement)),c(S,y),h&&h(y)}}else u.asynchronous=!1;var p;if(typeof HTTP<"u"&&HTTP.Request){u.uri=n;var m=new HTTP.Request(u);m&&(p=m.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var m=new Ajax.Request(n,u);m&&(p=m.transport)}if(i)return p;if(p&&p.responseXML&&p.responseXML.documentElement)return this.parseDOM(p.responseXML.documentElement)};So.ObjTree.prototype.parseDOM=function(n){if(n){if(this.__force_array={},this.force_array)for(var a=0;a<this.force_array.length;a++)this.__force_array[this.force_array[a]]=1;var i=this.parseElement(n);if(this.__force_array[n.nodeName]&&(i=[i]),n.nodeType!=11){var u={};u[n.nodeName]=i,i=u}return i}};So.ObjTree.prototype.parseElement=function(n){if(n.nodeType!=7){if(n.nodeType==3||n.nodeType==4){var a=n.nodeValue.match(/[^\x00-\x20]/);return a==null?void 0:n.nodeValue}var i,u={};if(n.attributes&&n.attributes.length){i={};for(var o=0;o<n.attributes.length;o++){var l=n.attributes[o].nodeName;if(typeof l=="string"){var c=n.attributes[o].nodeValue;c&&(l=this.attr_prefix+l,typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}if(n.childNodes&&n.childNodes.length){var h=!0;i&&(h=!1);for(var o=0;o<n.childNodes.length&&h;o++){var p=n.childNodes[o].nodeType;p==3||p==4||(h=!1)}if(h){i||(i="");for(var o=0;o<n.childNodes.length;o++)i+=n.childNodes[o].nodeValue}else{i||(i={});for(var o=0;o<n.childNodes.length;o++){var l=n.childNodes[o].nodeName;if(typeof l=="string"){var c=this.parseElement(n.childNodes[o]);c&&(typeof u[l]>"u"&&(u[l]=0),u[l]++,this.addNode(i,l,u[l],c))}}}}return i}};So.ObjTree.prototype.addNode=function(n,a,i,u){this.__force_array[a]?(i==1&&(n[a]=[]),n[a][n[a].length]=u):i==1?n[a]=u:i==2?n[a]=[n[a],u]:n[a][n[a].length]=u};So.ObjTree.prototype.writeXML=function(n){var a=this.hash_to_xml(null,n);return this.xmlDecl+a};So.ObjTree.prototype.hash_to_xml=function(n,a){var i=[],u=[];for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o.charAt(0)!=this.attr_prefix?typeof l>"u"||l==null?i[i.length]="<"+o+" />":typeof l=="object"&&l.constructor==Array?i[i.length]=this.array_to_xml(o,l):typeof l=="object"?i[i.length]=this.hash_to_xml(o,l):i[i.length]=this.scalar_to_xml(o,l):u[u.length]=" "+o.substring(1)+'="'+this.xml_escape(l)+'"'}var c=u.join(""),h=i.join("");return typeof n>"u"||n==null||(i.length>0?h.match(/\n/)?h="<"+n+c+`>
`+h+"</"+n+`>
`:h="<"+n+c+">"+h+"</"+n+`>
`:h="<"+n+c+` />
`),h};So.ObjTree.prototype.array_to_xml=function(n,a){for(var i=[],u=0;u<a.length;u++){var o=a[u];typeof o>"u"||o==null?i[i.length]="<"+n+" />":typeof o=="object"&&o.constructor==Array?i[i.length]=this.array_to_xml(n,o):typeof o=="object"?i[i.length]=this.hash_to_xml(n,o):i[i.length]=this.scalar_to_xml(n,o)}return i.join("")};So.ObjTree.prototype.scalar_to_xml=function(n,a){return n=="#text"?this.xml_escape(a):"<"+n+">"+this.xml_escape(a)+"</"+n+`>
`};So.ObjTree.prototype.xml_escape=function(n){return n.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var Fv=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},ki;(function(n){n.START="bpmn:startEvent",n.END="bpmn:endEvent",n.GATEWAY="bpmn:exclusiveGateway",n.USER="bpmn:userTask",n.SYSTEM="bpmn:serviceTask",n.FLOW="bpmn:sequenceFlow"})(ki||(ki={}));var eP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"];function vb(n){var a={};return Object.entries(n).forEach(function(i){var u=Fv(i,2),o=u[0],l=u[1];typeof l!="object"?o.indexOf("-")===0?a[o]=l:a["-"+o]=l:a[o]=vb(l)}),a}function jb(n){var a={};return Object.entries(n).forEach(function(i){var u=Fv(i,2),o=u[0],l=u[1];typeof l=="string"?o.indexOf("-")===0?a[o.substr(1)]=l:a[o]=l:typeof l=="object"?a[o]=jb(l):a[o]=l}),a}function AB(n,a){var i=new Map;a.nodes.forEach(function(o){var l,c={"-id":o.id};if(!((l=o.text)===null||l===void 0)&&l.value&&(c["-name"]=o.text.value),o.properties){var h=vb(o.properties);Object.assign(c,h)}i.set(o.id,c),n[o.type]?Array.isArray(n[o.type])?n[o.type].push(c):n[o.type]=[n[o.type],c]:n[o.type]=c});var u=a.edges.map(function(o){var l,c,h=i.get(o.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(o.id):h["bpmn:incoming"]=[h["bpmn:incoming"],o.id]:h["bpmn:incoming"]=o.id;var p=i.get(o.sourceNodeId);p["bpmn:outgoing"]?Array.isArray(p["bpmn:outgoing"])?p["bpmn:outgoing"].push(o.id):p["bpmn:outgoing"]=[p["bpmn:outgoing"],o.id]:p["bpmn:outgoing"]=o.id;var m={"-id":o.id,"-sourceRef":o.sourceNodeId,"-targetRef":o.targetNodeId};if(!((l=o.text)===null||l===void 0)&&l.value&&(m["-name"]=(c=o.text)===null||c===void 0?void 0:c.value),o.properties){var y=vb(o.properties);Object.assign(m,y)}return m});n[ki.FLOW]=u}function PB(n,a){n["bpmndi:BPMNEdge"]=a.edges.map(function(i){var u,o=i.id,l=i.pointsList.map(function(h){var p=h.x,m=h.y;return{"-x":p,"-y":m}}),c={"-id":o+"_di","-bpmnElement":o,"di:waypoint":l};return!((u=i.text)===null||u===void 0)&&u.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),c}),n["bpmndi:BPMNShape"]=a.nodes.map(function(i){var u,o=i.id,l=100,c=80,h=i.x,p=i.y,m=pu.shapeConfigMap.get(i.type);m&&(l=m.width,c=m.height),h-=l/2,p-=c/2;var y={"-id":o+"_di","-bpmnElement":o,"dc:Bounds":{"-x":h,"-y":p,"-width":l,"-height":c}};return!((u=i.text)===null||u===void 0)&&u.value&&(y["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":i.text.x-i.text.value.length*10/2,"-y":i.text.y-7,"-width":i.text.value.length*10,"-height":14}}),y})}function _B(n){var a=[],i=[],u=n["bpmn:definitions"];if(u){var o=u["bpmn:process"];Object.keys(o).forEach(function(l){if(l.indexOf("bpmn:")===0){var c=o[l];if(l===ki.FLOW){var h=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];i=NB(c,h)}else{var p=u["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];a=a.concat(wB(c,p,l))}}})}return{nodes:a,edges:i}}function wB(n,a,i){var u=[];if(Array.isArray(n))n.forEach(function(c){var h;Array.isArray(a)?h=a.find(function(m){return m["-bpmnElement"]===c["-id"]}):h=a;var p=lT(h,i,c);u.push(p)});else{var o=void 0;Array.isArray(a)?o=a.find(function(c){return c["-bpmnElement"]===n["-id"]}):o=a;var l=lT(o,i,n);u.push(l)}return u}function lT(n,a,i){var u=Number(n["dc:Bounds"]["-x"]),o=Number(n["dc:Bounds"]["-y"]),l=i["-name"],c=pu.shapeConfigMap.get(a);c&&(u+=c.width/2,o+=c.height/2);var h;Object.entries(i).forEach(function(S){var x=Fv(S,2),T=x[0],w=x[1];eP.indexOf(T)===-1&&(h||(h={}),h[T]=w)}),h&&(h=jb(h));var p;if(l&&(p={x:u,y:o,value:l},n["bpmndi:BPMNLabel"]&&n["bpmndi:BPMNLabel"]["dc:Bounds"])){var m=n["bpmndi:BPMNLabel"]["dc:Bounds"];p.x=Number(m["-x"])+Number(m["-width"])/2,p.y=Number(m["-y"])+Number(m["-height"])/2}var y={id:n["-bpmnElement"],type:a,x:u,y:o,properties:h};return p&&(y.text=p),y}function NB(n,a){var i=[];if(Array.isArray(n))n.forEach(function(o){var l;Array.isArray(a)?l=a.find(function(c){return c["-bpmnElement"]===o["-id"]}):l=a,i.push(fT(l,o))});else{var u=void 0;Array.isArray(a)?u=a.find(function(o){return o["-bpmnElement"]===n["-id"]}):u=a,i.push(fT(u,n))}return i}function fT(n,a){var i,u=a["-name"];if(u){var o=n["bpmndi:BPMNLabel"]["dc:Bounds"],l=0;u.split(`
`).forEach(function(p){l<p.length&&(l=p.length)}),i={value:u,x:Number(o["-x"])+l*10/2,y:Number(o["-y"])+7}}var c;Object.entries(a).forEach(function(p){var m=Fv(p,2),y=m[0],S=m[1];eP.indexOf(y)===-1&&(c||(c={}),c[y]=S)}),c&&(c=jb(c));var h={id:a["-id"],type:ki.FLOW,pointsList:n["di:waypoint"].map(function(p){return{x:Number(p["-x"]),y:Number(p["-y"])}}),sourceNodeId:a["-sourceRef"],targetNodeId:a["-targetRef"],properties:c};return i&&(h.text=i),h}var pu={pluginName:"bpmn-adapter",install:function(n){n.adapterIn=this.adapterIn,n.adapterOut=this.adapterOut},shapeConfigMap:new Map,setCustomShape:function(n,a){this.shapeConfigMap.set(n,a)},adapterOut:function(n){var a={"-id":"Process_"+uT(),"-isExecutable":"false"};AB(a,n);var i={"-id":"BPMNPlane_1","-bpmnElement":a["-id"]};PB(i,n);var u={"bpmn:definitions":{"-id":"Definitions_"+uT(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://bpmn.io/schema/bpmn","-exporter":"bpmn-js (https://demo.bpmn.io)","-exporterVersion":"7.3.0","bpmn:process":a,"bpmndi:BPMNDiagram":{"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":i}}};return u},adapterIn:function(n){if(n)return _B(n)}};pu.shapeConfigMap.set(ki.START,{width:nT.width,height:nT.height});pu.shapeConfigMap.set(ki.END,{width:oT.width,height:oT.height});pu.shapeConfigMap.set(ki.GATEWAY,{width:iT.width,height:iT.height});pu.shapeConfigMap.set(ki.SYSTEM,{width:aT.width,height:aT.height});pu.shapeConfigMap.set(ki.USER,{width:sT.width,height:sT.height});var cT=globalThis&&globalThis.__assign||function(){return cT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},cT.apply(this,arguments)};globalThis&&globalThis.__read;var kl;(function(n){n.HORIZONTAL="horizontal",n.VERTICAL="vertical"})(kl||(kl={}));var MB=function(n,a,i,u){u===void 0&&(u=0);var o=IB(n,a,i);return o<=u};function dT(n){return n*n}function qm(n,a){return dT(n.x-a.x)+dT(n.y-a.y)}var RB=function(n,a,i){var u=qm(a,i);if(u===0)return qm(n,a);var o=((n.x-a.x)*(i.x-a.x)+(n.y-a.y)*(i.y-a.y))/u;return o=Math.max(0,Math.min(1,o)),qm(n,{x:a.x+o*(i.x-a.x),y:a.y+o*(i.y-a.y)})},IB=function(n,a,i){return Math.sqrt(RB(n,a,i))},DB=function(n){var a=n.x,i=n.y,u=n.width,o=n.height,l={minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2,x:a,y:i,width:u,height:o,centerX:a,centerY:i};return l},CB=function(n,a){var i;return n.x===a.x?i=kl.VERTICAL:n.y===a.y&&(i=kl.HORIZONTAL),i},LB=function(n,a,i){var u=DB(n),o=CB(a,i),l=Math.max(a.x,i.x),c=Math.min(a.x,i.x),h=Math.max(a.y,i.y),p=Math.min(a.y,i.y),m=n.x,y=n.y,S=n.width,x=n.height;if(o===kl.HORIZONTAL){if(l>=u.maxX&&c<=u.minX)return{startCrossPoint:{x:a.x>i.x?m+S/2:m-S/2,y:a.y},endCrossPoint:{x:a.x>i.x?m-S/2:m+S/2,y:a.y}}}else if(o===kl.VERTICAL&&h>=u.maxY&&p<=u.minY)return{startCrossPoint:{x:a.x,y:a.y>i.y?y+x/2:y-x/2},endCrossPoint:{x:a.x,y:a.y>i.y?y-x/2:y+x/2}}},jB=function(n,a,i){i===void 0&&(i=0);for(var u=n.x,o=n.y,l=a.pointsList,c=0;c<l.length-1;c++)if(MB({x:u,y:o},l[c],l[c+1],i)){var h=LB(n,l[c],l[c+1]);if(h)return{crossIndex:c+1,crossPoints:h}}return{crossIndex:-1,crossPoints:{startCrossPoint:{x:0,y:0},endCrossPoint:{x:0,y:0}}}},BB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},hT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(BB(arguments[a]));return n},FB=function(){function n(a){var i=a.lf;this._lf=i,this.deviation=20,this.dndAdd=!0,this.dropAdd=!0,this.eventHandler()}return n.prototype.eventHandler=function(){var a=this;this.dndAdd&&this._lf.on("node:dnd-add",function(i){var u=i.data;a.insetNode(u)}),this.dropAdd&&this._lf.on("node:drop",function(i){for(var u=i.data,o=a._lf.graphModel.edges,l=u.id,c=!0,h=0;h<o.length;h++)if(o[h].sourceNodeId===l||o[h].targetNodeId===l){c=!1;break}c&&a.insetNode(u)})},n.prototype.insetNode=function(a){for(var i=this._lf.graphModel.edges,u=this._lf.getNodeModelById(a.id),o=0;o<i.length;o++){var l=jB(u,i[o],this.deviation),c=l.crossIndex,h=l.crossPoints;if(c>=0){var p=i[o],m=p.sourceNodeId,y=p.targetNodeId,S=p.id,x=p.type,T=p.pointsList,w=dv(T[0]),N=dv(h.startCrossPoint);this._lf.addEdge({type:x,sourceNodeId:m,targetNodeId:a.id,startPoint:w,endPoint:N,pointsList:hT(T.slice(0,c),[h.startCrossPoint])}),this._lf.addEdge({type:x,sourceNodeId:a.id,targetNodeId:y,startPoint:dv(h.endCrossPoint),endPoint:dv(T[T.length-1]),pointsList:hT([h.endCrossPoint],T.slice(c))}),this._lf.deleteEdge(S);break}}},n.pluginName="insertNodeInPolyline",n}(),GB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},kB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(GB(arguments[a]));return n},UB=function(){function n(a){var i=this,u=a.lf;this.controlItems=[{key:"zoom-out",iconClass:"lf-control-zoomOut",title:"缩小流程图",text:"缩小",onClick:function(){i.lf.zoom(!1)}},{key:"zoom-in",iconClass:"lf-control-zoomIn",title:"放大流程图",text:"放大",onClick:function(){i.lf.zoom(!0)}},{key:"reset",iconClass:"lf-control-fit",title:"恢复流程原有尺寸",text:"适应",onClick:function(){i.lf.resetZoom()}},{key:"undo",iconClass:"lf-control-undo",title:"回到上一步",text:"上一步",onClick:function(){i.lf.undo()}},{key:"redo",iconClass:"lf-control-redo",title:"移到下一步",text:"下一步",onClick:function(){i.lf.redo()}}],this.lf=u}return n.prototype.render=function(a,i){this.destroy();var u=this.getControlTool();this.toolEl=u,i.appendChild(u),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.toolEl&&this.domContainer.contains(this.toolEl)&&this.domContainer.removeChild(this.toolEl)},n.prototype.addItem=function(a){this.controlItems.push(a)},n.prototype.removeItem=function(a){var i=this.controlItems.findIndex(function(u){return u.key===a});return this.controlItems.splice(i,1)[0]},n.prototype.getControlTool=function(){var a=this,i="lf-control-item",u="lf-control-item disabled",o=document.createElement("div"),l=[];return o.className="lf-control",this.controlItems.forEach(function(c){var h=document.createElement("div"),p=document.createElement("i"),m=document.createElement("span");switch(h.className=u,c.onClick&&(h.onclick=c.onClick.bind(null,a.lf)),c.onMouseEnter&&(h.onmouseenter=c.onMouseEnter.bind(null,a.lf)),c.onMouseLeave&&(h.onmouseleave=c.onMouseLeave.bind(null,a.lf)),p.className=c.iconClass,m.className="lf-control-text",m.title=c.title,m.innerText=c.text,h.append(p,m),c.text){case"上一步":a.lf.on("history:change",function(y){var S=y.data.undoAble;h.className=S?i:u});break;case"下一步":a.lf.on("history:change",function(y){var S=y.data.redoAble;h.className=S?i:u});break;default:h.className=i;break}l.push(h)}),o.append.apply(o,kB(l)),o},n.pluginName="control",n}(),zB=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},HB=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(zB(arguments[a]));return n},mc="lf:defaultNodeMenu",bc="lf:defaultEdgeMenu",Ec="lf:defaultGraphMenu",pT="lf:defaultSelectionMenu",XB=function(){function n(a){var i=this,u=a.lf;this.__menuDOM=document.createElement("ul"),this.lf=u,this.menuTypeMap=new Map,this.init(),this.lf.setMenuConfig=function(o){i.setMenuConfig(o)},this.lf.addMenuConfig=function(o){i.addMenuConfig(o)},this.lf.setMenuByType=function(o){i.setMenuByType(o)}}return n.prototype.init=function(){var a=this,i=[{text:"删除",callback:function(l){a.lf.deleteNode(l.id)}},{text:"编辑文本",callback:function(l){a.lf.graphModel.editText(l.id)}},{text:"复制",callback:function(l){a.lf.cloneNode(l.id)}}];this.menuTypeMap.set(mc,i);var u=[{text:"删除",callback:function(l){a.lf.deleteEdge(l.id)}},{text:"编辑文本",callback:function(l){a.lf.graphModel.editText(l.id)}}];this.menuTypeMap.set(bc,u),this.menuTypeMap.set(Ec,[]);var o=[{text:"删除",callback:function(l){a.lf.clearSelectElements(),l.edges.forEach(function(c){return a.lf.deleteEdge(c.id)}),l.nodes.forEach(function(c){return a.lf.deleteNode(c.id)})}}];this.menuTypeMap.set(pT,o)},n.prototype.render=function(a,i){var u=this;this.__container=i,this.__currentData=null,this.__menuDOM.className="lf-menu",i.appendChild(this.__menuDOM),this.__menuDOM.addEventListener("click",function(o){o.stopPropagation();for(var l=o.target;Array.from(l.classList).indexOf("lf-menu-item")===-1&&Array.from(l.classList).indexOf("lf-menu")===-1;)l=l.parentElement;Array.from(l.classList).indexOf("lf-menu-item")>-1?(l.onclickCallback(u.__currentData),u.__menuDOM.style.display="none",u.__currentData=null):console.warn("点击区域不在菜单项内，请检查代码！")},!0),this.lf.on("node:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,m=h.y,y=l.id,S=u.lf.graphModel.getNodeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(mc),u.__currentData=l,u.showMenu(p,m,x)}),this.lf.on("edge:contextmenu",function(o){var l=o.data,c=o.position,h=c.domOverlayPosition,p=h.x,m=h.y,y=l.id,S=u.lf.graphModel.getEdgeModelById(y),x=[],T=u.menuTypeMap.get(S.type);S&&S.menu&&Array.isArray(S.menu)?x=S.menu:T?x=T:x=u.menuTypeMap.get(bc),u.__currentData=l,u.showMenu(p,m,x)}),this.lf.on("blank:contextmenu",function(o){var l=o.position,c=u.menuTypeMap.get(Ec),h=l.domOverlayPosition,p=h.x,m=h.y;u.showMenu(p,m,c)}),this.lf.on("selection:contextmenu",function(o){var l=o.data,c=o.position,h=u.menuTypeMap.get(pT),p=c.domOverlayPosition,m=p.x,y=p.y;u.__currentData=l,u.showMenu(m,y,h)}),this.lf.on("node:mousedown",function(){u.__menuDOM.style.display="none"}),this.lf.on("edge:click",function(){u.__menuDOM.style.display="none"}),this.lf.on("blank:click",function(){u.__menuDOM.style.display="none"})},n.prototype.destroy=function(){var a;(a=this===null||this===void 0?void 0:this.__container)===null||a===void 0||a.removeChild(this.__menuDOM),this.__menuDOM=null},n.prototype.showMenu=function(a,i,u){if(!(!u||!u.length)){var o=this.__menuDOM;o.innerHTML="",o.append.apply(o,HB(this.__getMenuDom(u))),o.children.length&&(o.style.display="block",o.style.top=i+"px",o.style.left=a+"px")}},n.prototype.setMenuByType=function(a){!a.type||!a.menu||this.menuTypeMap.set(a.type,a.menu)},n.prototype.__getMenuDom=function(a){var i=[];return a&&a.length>0&&a.forEach(function(u){var o=document.createElement("li");if(u.className?o.className="lf-menu-item "+u.className:o.className="lf-menu-item",u.icon===!0){var l=document.createElement("span");l.className="lf-menu-item-icon",o.appendChild(l)}var c=document.createElement("span");c.className="lf-menu-item-text",u.text&&(c.innerText=u.text),o.appendChild(c),o.onclickCallback=u.callback,i.push(o)}),i},n.prototype.setMenuConfig=function(a){a&&(a.nodeMenu!==void 0&&this.menuTypeMap.set(mc,a.nodeMenu?a.nodeMenu:[]),a.edgeMenu!==void 0&&this.menuTypeMap.set(bc,a.edgeMenu?a.edgeMenu:[]),a.graphMenu!==void 0&&this.menuTypeMap.set(Ec,a.graphMenu?a.graphMenu:[]))},n.prototype.addMenuConfig=function(a){if(a){if(Array.isArray(a.nodeMenu)){var i=this.menuTypeMap.get(mc);this.menuTypeMap.set(mc,i.concat(a.nodeMenu))}if(Array.isArray(a.edgeMenu)){var i=this.menuTypeMap.get(bc);this.menuTypeMap.set(bc,i.concat(a.edgeMenu))}if(Array.isArray(a.graphMenu)){var i=this.menuTypeMap.get(Ec);this.menuTypeMap.set(Ec,i.concat(a.graphMenu))}}},n.prototype.changeMenuItem=function(a,i){if(a==="add")this.addMenuConfig(i);else if(a==="reset")this.setMenuConfig(i);else throw new Error("The first parameter of changeMenuConfig should be 'add' or 'reset'")},n.pluginName="menu",n}();globalThis&&globalThis.__read;var $B=function(){function n(a){var i=this,u=a.lf;this.lf=u,this.lf.setPatternItems=function(o){i.setPatternItems(o)}}return n.prototype.render=function(a,i){var u=this;if(this.destroy(),!this.shapeList||this.shapeList.length===0){this.domContainer=i;return}this.panelEl=document.createElement("div"),this.panelEl.className="lf-dndpanel",this.shapeList.forEach(function(o){u.panelEl.appendChild(u.createDndItem(o))}),i.appendChild(this.panelEl),this.domContainer=i},n.prototype.destroy=function(){this.domContainer&&this.panelEl&&this.domContainer.contains(this.panelEl)&&this.domContainer.removeChild(this.panelEl)},n.prototype.setPatternItems=function(a){this.shapeList=a,this.domContainer&&this.render(this.lf,this.domContainer)},n.prototype.createDndItem=function(a){var i=this,u=document.createElement("div");u.className=a.className?"lf-dnd-item "+a.className:"lf-dnd-item";var o=document.createElement("div");if(o.className="lf-dnd-shape",a.icon&&(o.style.backgroundImage="url("+a.icon+")"),u.appendChild(o),a.label){var l=document.createElement("div");l.innerText=a.label,l.className="lf-dnd-text",u.appendChild(l)}return u.onmousedown=function(){a.type&&i.lf.dnd.startDrag({type:a.type,properties:a.properties,text:a.text}),a.callback&&a.callback(i.lf,i.domContainer)},u.ondblclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-dbclick",{e:c,data:a})},u.onclick=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-click",{e:c,data:a})},u.oncontextmenu=function(c){i.lf.graphModel.eventCenter.emit("dnd:panel-contextmenu",{e:c,data:a})},u},n.pluginName="dndPanel",n}(),VB=function(){function n(a){var i=this,u=a.lf;this.__disabled=!1,this.isDefaultStopMoveGraph=!1,this.isWholeNode=!0,this.isWholeEdge=!0,this.__draw=function(l){var c=i.lf.getPointByClient(l.clientX,l.clientY).domOverlayPosition,h=c.x,p=c.y;i.endPoint={x:h,y:p};var m=i.startPoint,y=m.x,S=m.y,x=i.wrapper.style,T=y,w=S,N=h-y,M=p-S;h<y&&(T=h,N=y-h),p<S&&(w=p,M=S-p),x.left=T+"px",x.top=w+"px",x.width=N+"px",x.height=M+"px"},this.__drawOff=function(){document.removeEventListener("mousemove",i.__draw),document.removeEventListener("mouseup",i.__drawOff),i.wrapper.oncontextmenu=null,i.__domContainer.removeChild(i.wrapper);var l=i.startPoint,c=l.x,h=l.y,p=i.endPoint,m=p.x,y=p.y;if(!(Math.abs(m-c)<10&&Math.abs(y-h)<10)){var S=[Math.min(c,m),Math.min(h,y)],x=[Math.max(c,m),Math.max(h,y)],T=i.lf.graphModel.getAreaElement(S,x,i.isWholeEdge,i.isWholeNode,!0),w=i.lf.graphModel.group;T.forEach(function(N){(!w||!w.getNodeGroup(N.id))&&i.lf.selectElementById(N.id,!0)}),i.lf.emit("selection:selected",T)}},this.lf=u;var o=u.getEditConfig().stopMoveGraph;this.isDefaultStopMoveGraph=o,u.openSelectionSelect=function(){i.openSelectionSelect()},u.closeSelectionSelect=function(){i.closeSelectionSelect()}}return n.prototype.render=function(a,i){var u=this;this.__domContainer=i,a.on("blank:mousedown",function(o){var l=o.e,c=a.getEditConfig();if(!(!c.stopMoveGraph||u.__disabled)){var h=l.button===2;if(!h){var p=a.getPointByClient(l.clientX,l.clientY).domOverlayPosition,m=p.x,y=p.y;u.startPoint={x:m,y},u.endPoint={x:m,y};var S=document.createElement("div");S.className="lf-selection-select",S.oncontextmenu=function(T){T.preventDefault()},S.style.top=u.startPoint.y+"px",S.style.left=u.startPoint.x+"px",i.appendChild(S),u.wrapper=S,document.addEventListener("mousemove",u.__draw),document.addEventListener("mouseup",u.__drawOff)}}})},n.prototype.setSelectionSense=function(a,i){a===void 0&&(a=!0),i===void 0&&(i=!0),this.isWholeEdge=a,this.isWholeNode=i},n.prototype.openSelectionSelect=function(){var a=this.lf.getEditConfig().stopMoveGraph;a||(this.isDefaultStopMoveGraph=!1,this.lf.updateEditConfig({stopMoveGraph:!0})),this.open()},n.prototype.closeSelectionSelect=function(){this.isDefaultStopMoveGraph||this.lf.updateEditConfig({stopMoveGraph:!1}),this.close()},n.prototype.open=function(){this.__disabled=!1},n.prototype.close=function(){this.__disabled=!0},n.pluginName="selectionSelect",n}(),WB=globalThis&&globalThis.__values||function(n){var a=typeof Symbol=="function"&&Symbol.iterator,i=a&&n[a],u=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&u>=n.length&&(n=void 0),{value:n&&n[u++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},YB=function(){function n(a){var i=this,u=a.lf,o=a.LogicFlow,l=a.options;this.lf=null,this.container=null,this.miniMapWrap=null,this.miniMapContainer=null,this.lfMap=null,this.viewport=null,this.width=150,this.height=220,this.leftPosition=void 0,this.topPosition=void 0,this.rightPosition=void 0,this.bottomPosition=void 0,this.miniMapWidth=450,this.miniMapHeight=660,this.viewPortTop=0,this.viewPortLeft=0,this.startPosition=null,this.viewPortScale=1,this.viewPortWidth=150,this.viewPortHeight=75,this.resetDataX=0,this.resetDataY=0,this.LogicFlow=null,this.isShow=!1,this.isShowHeader=!0,this.isShowCloseIcon=!0,this.dragging=!1,this.disabledPlugins=["miniMap","control","selectionSelect"],this.show=function(c,h){i.setView(),i.isShow||i.createMiniMap(c,h),i.isShow=!0},this.hide=function(){i.isShow&&i.removeMiniMap(),i.isShow=!1},this.reset=function(){i.lf.resetTranslate(),i.lf.resetZoom(),i.hide(),i.show()},this.startDrag=function(c){document.addEventListener("mousemove",i.drag),document.addEventListener("mouseup",i.drop),i.startPosition={x:c.x,y:c.y}},this.moveViewport=function(c,h){var p=i.viewport.style;i.viewPortTop=c,i.viewPortLeft=h,p.top=i.viewPortTop+"px",p.left=i.viewPortLeft+"px"},this.drag=function(c){i.dragging=!0;var h=i.viewPortTop+c.y-i.startPosition.y,p=i.viewPortLeft+c.x-i.startPosition.x;i.moveViewport(h,p),i.startPosition={x:c.x,y:c.y};var m=(i.viewPortLeft+i.viewPortWidth/2)/i.viewPortScale,y=(i.viewPortTop+i.viewPortHeight/2)/i.viewPortScale;i.lf.focusOn({coordinate:{x:m+i.resetDataX,y:y+i.resetDataY}})},this.drop=function(){document.removeEventListener("mousemove",i.drag),document.removeEventListener("mouseup",i.drop);var c=i.viewPortTop,h=i.viewPortLeft;i.viewPortLeft>i.width&&(h=i.width-i.viewPortWidth),i.viewPortTop>i.height&&(c=i.height-i.viewPortHeight),i.viewPortLeft<-i.width&&(h=0),i.viewPortTop<-i.height&&(c=0),i.moveViewport(c,h)},this.mapClick=function(c){if(i.dragging)i.dragging=!1;else{var h=c.layerX,p=c.layerY,m=h,y=p,S=i.lf.getGraphRawData(),x=i.getBounds(S),T=x.left,w=x.top,N=T+m/i.viewPortScale,M=w+y/i.viewPortScale;i.lf.focusOn({coordinate:{x:N,y:M}})}},this.lf=u,l&&l.MiniMap&&this.setOption(l),this.miniMapWidth=u.graphModel.width,this.miniMapHeight=u.graphModel.width*this.height/this.width,this.LogicFlow=o,this.initMiniMap()}return n.prototype.render=function(a,i){var u=this;this.container=i,this.lf.on("history:change",function(){u.isShow&&u.setView()}),this.lf.on("graph:transform",lB(function(){u.isShow&&!u.dragging&&u.setView()},300))},n.prototype.init=function(a){this.disabledPlugins=this.disabledPlugins.concat(a.disabledPlugins||[])},n.prototype.setOption=function(a){var i=a.MiniMap,u=i.width,o=u===void 0?150:u,l=i.height,c=l===void 0?220:l,h=i.isShowHeader,p=h===void 0?!0:h,m=i.isShowCloseIcon,y=m===void 0?!0:m,S=i.leftPosition,x=S===void 0?0:S,T=i.topPosition,w=T===void 0?0:T,N=i.rightPosition,M=i.bottomPosition;this.width=o,this.height=c,this.isShowHeader=p,this.isShowCloseIcon=y,this.viewPortWidth=o,this.leftPosition=x,this.topPosition=w,this.rightPosition=N,this.bottomPosition=M},n.prototype.initMiniMap=function(){var a=document.createElement("div");a.className="lf-mini-map-graph",a.style.width=this.width+4+"px",a.style.height=this.height+"px",this.lfMap=new this.LogicFlow({width:this.lf.graphModel.width,height:this.lf.graphModel.width*this.height/this.width,container:a,isSilentMode:!0,stopZoomGraph:!0,stopScrollGraph:!0,stopMoveGraph:!0,hideAnchors:!0,hoverOutline:!1,disabledPlugins:this.disabledPlugins}),this.lfMap.adapterIn=function(i){return i},this.lfMap.adapterOut=function(i){return i},this.miniMapWrap=a,this.createViewPort(),a.addEventListener("click",this.mapClick)},n.prototype.createMiniMap=function(a,i){var u=document.createElement("div");u.appendChild(this.miniMapWrap),typeof a<"u"||typeof i<"u"?(u.style.left=(a||0)+"px",u.style.top=(i||0)+"px"):(typeof this.rightPosition<"u"?u.style.right=this.rightPosition+"px":typeof this.leftPosition<"u"&&(u.style.left=this.leftPosition+"px"),typeof this.bottomPosition<"u"?u.style.bottom=this.bottomPosition+"px":typeof this.topPosition<"u"&&(u.style.top=this.topPosition+"px")),u.style.position="absolute",u.className="lf-mini-map",this.isShowCloseIcon||u.classList.add("lf-mini-map-no-close-icon"),this.isShowHeader||u.classList.add("lf-mini-map-no-header"),this.container.appendChild(u),this.miniMapWrap.appendChild(this.viewport);var o=document.createElement("div");o.className="lf-mini-map-header",o.innerText=n.headerTitle,u.appendChild(o);var l=document.createElement("span");l.className="lf-mini-map-close",l.addEventListener("click",this.hide),u.appendChild(l),this.miniMapContainer=u},n.prototype.removeMiniMap=function(){this.container.removeChild(this.miniMapContainer)},n.prototype.getBounds=function(a){var i=0,u=this.miniMapWidth,o=0,l=this.miniMapHeight,c=a.nodes;return c&&c.length>0&&c.forEach(function(h){var p=h.x,m=h.y,y=h.width,S=y===void 0?200:y,x=h.height,T=x===void 0?200:x,w=p-S/2,N=p+S/2,M=m-T/2,D=m+T/2;i=w<i?w:i,u=N>u?N:u,o=M<o?M:o,l=D>l?D:l}),{left:i,top:o,bottom:l,right:u}},n.prototype.resetData=function(a){var i=a.nodes,u=a.edges,o=0,l=0;return i&&i.length>0&&(i.forEach(function(c){var h=c.x,p=c.y,m=c.width,y=m===void 0?200:m,S=c.height,x=S===void 0?200:S,T=h-y/2,w=p-x/2;o=T<o?T:o,l=w<l?w:l}),(o<0||l<0)&&(this.resetDataX=o,this.resetDataY=l,i.forEach(function(c){c.x=c.x-o,c.y=c.y-l,c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l)}),u.forEach(function(c){c.startPoint&&(c.startPoint.x=c.startPoint.x-o,c.startPoint.y=c.startPoint.y-l),c.endPoint&&(c.endPoint.x=c.endPoint.x-o,c.endPoint.y=c.endPoint.y-l),c.text&&(c.text.x=c.text.x-o,c.text.y=c.text.y-l),c.pointsList&&c.pointsList.forEach(function(h){h.x=h.x-o,h.y=h.y-l})}))),a},n.prototype.setView=function(){var a,i,u=this.lf.getGraphRawData(),o=this.resetData(u),l=this.lf.viewMap,c=this.lf.graphModel.modelMap,h=this.lfMap.viewMap;try{for(var p=WB(l.keys()),m=p.next();!m.done;m=p.next()){var y=m.value;h.has(y)||(this.lfMap.setView(y,l.get(y)),this.lfMap.graphModel.modelMap.set(y,c.get(y)))}}catch(Ee){a={error:Ee}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}this.lfMap.render(o);var S=this.getBounds(o),x=S.left,T=S.top,w=S.right,N=S.bottom,M=this.width/(w-x),D=this.height/(N-T),W=this.miniMapWrap.firstChild.style,V=Math.min(M,D);W.transform="matrix("+V+", 0, 0, "+V+", 0, 0)",W.transformOrigin="left top",W.height=N-Math.min(T,0)+"px",W.width=w-Math.min(x,0)+"px",this.viewPortScale=V,this.setViewPort(V,{left:x,top:T,right:w,bottom:N})},n.prototype.setViewPort=function(a,i){var u=i.left,o=i.right;i.top,i.bottom;var l=this.viewport.style;l.width=this.viewPortWidth+"px",l.height=this.viewPortWidth/(this.lf.graphModel.width/this.lf.graphModel.height)+"px";var c=this.lf.getTransform(),h=c.TRANSLATE_X,p=c.TRANSLATE_Y,m=c.SCALE_X,y=c.SCALE_Y,S=o-u,x=this.width/(S/this.lf.graphModel.width),T=this.width*(x/this.width),w=this.lf.graphModel.width/this.lf.graphModel.height,N=T/w,M=this.lf.getGraphRawData(),D=this.getBounds(M),W=D.left,V=D.top,Ee=W,ge=V;Ee+=h/m,ge+=p/y,this.viewPortTop=ge>0?0:-ge*a,this.viewPortLeft=Ee>0?0:-Ee*a,this.viewPortWidth=T,this.viewPortHeight=N,l.top=this.viewPortTop+"px",l.left=this.viewPortLeft+"px",l.width=T/m+"px",l.height=N/y+"px"},n.prototype.createViewPort=function(){var a=document.createElement("div");a.className="lf-minimap-viewport",a.addEventListener("mousedown",this.startDrag),this.viewport=a},n.pluginName="miniMap",n.width=150,n.height=220,n.viewPortWidth=150,n.viewPortHeight=75,n.isShowHeader=!0,n.isShowCloseIcon=!0,n.leftPosition=0,n.topPosition=0,n.rightPosition=null,n.bottomPosition=null,n.headerTitle="导航",n}();function KB(n){if(n.length<=1)return!1;for(var a=0,i=n.length-1;a!==i&&a+1!==i&&i-1!==a;)a++,i--;return a===i?[--a,i]:[a,i]}var tP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),Dl=globalThis&&globalThis.__assign||function(){return Dl=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Dl.apply(this,arguments)},Sa=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};(function(n){tP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.pointFilter=function(i){for(var u=i,o=1;o<u.length-1;){var l=Sa(u[o-1],2),c=l[0],h=l[1],p=Sa(u[o],2),m=p[0],y=p[1],S=Sa(u[o+1],2),x=S[0],T=S[1];c===m&&m===x||h===y&&y===T?u.splice(o,1):o++}return u},a.prototype.getEdge=function(){var i=this.props.model,u=i.points,o=i.isAnimation,l=i.arrowConfig,c=i.radius,h=c===void 0?5:c,p=i.getEdgeStyle(),m=i.getEdgeAnimationStyle(),y=this.pointFilter(u.split(" ").map(function(Ct){return Ct.split(",").map(function(Ge){return Number(Ge)})})),S=KB(y);if(S){var x=Sa(S,2),T=x[0],w=x[1],N=y[T],M=y[w],D=N.some(function(Ct,Ge){return Ct===M[Ge]});if(!D){var W=(M[1]-N[1])/2,V=[M[0],M[1]-W],Ee=[N[0],N[1]+W];y.splice(T+1,0,Ee,V)}}for(var ge=Sa(y[0],2),ye=ge[0],ce=ge[1],xe="M"+ye+" "+ce,j=1;j<y.length-1;j++){var Q=Sa(y[j-1],2),U=Q[0],I=Q[1],k=Sa(y[j],2),te=k[0],$=k[1],Z=Sa(y[j+1],2),le=Z[0],Ae=Z[1];if(te===U&&$!==I){var Re=$>I?$-h:$+h;xe=xe+" L "+te+" "+Re}if($===I&&te!==U){var _e=te>U?te-h:te+h;xe=xe+" L "+_e+" "+$}if(xe=xe+" Q "+te+" "+$,te===le&&$!==Ae){var Re=$>Ae?$-h:$+h;xe=xe+" "+te+" "+Re}if($===Ae&&te!==le){var _e=te>le?te-h:te+h;xe=xe+" "+_e+" "+$}}var Ke=Sa(y[y.length-1],2),gt=Ke[0],Nt=Ke[1];xe=xe+" L "+gt+" "+Nt;var Vt=Dl(Dl(Dl({d:xe,style:o?m:{}},p),l),{fill:"none"});return $t.h("path",Dl({d:xe},Vt))},a})($t.PolylineEdge);(function(n){tP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a})($t.PolylineEdgeModel);var Bb,wn,rP,lu,vT,nP,yb,oP={},iP=[],ZB=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Os(n,a){for(var i in a)n[i]=a[i];return n}function aP(n){var a=n.parentNode;a&&a.removeChild(n)}function Rc(n,a,i){var u,o,l,c={};for(l in a)l=="key"?u=a[l]:l=="ref"?o=a[l]:c[l]=a[l];if(arguments.length>2&&(c.children=arguments.length>3?Bb.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)c[l]===void 0&&(c[l]=n.defaultProps[l]);return mv(n,c,u,o,null)}function mv(n,a,i,u,o){var l={type:n,props:a,key:i,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++rP};return o==null&&wn.vnode!=null&&wn.vnode(l),l}function Fb(n){return n.children}function Ll(n,a){this.props=n,this.context=a}function Dc(n,a){if(a==null)return n.__?Dc(n.__,n.__.__k.indexOf(n)+1):null;for(var i;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?Dc(n):null}function sP(n){var a,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,a=0;a<n.__k.length;a++)if((i=n.__k[a])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return sP(n)}}function yT(n){(!n.__d&&(n.__d=!0)&&lu.push(n)&&!Av.__r++||vT!==wn.debounceRendering)&&((vT=wn.debounceRendering)||nP)(Av)}function Av(){var n,a,i,u,o,l,c,h;for(lu.sort(yb);n=lu.shift();)n.__d&&(a=lu.length,u=void 0,o=void 0,c=(l=(i=n).__v).__e,(h=i.__P)&&(u=[],(o=Os({},l)).__v=l.__v+1,dP(h,l,o,i.__n,h.ownerSVGElement!==void 0,l.__h!=null?[c]:null,u,c??Dc(l),l.__h),QB(u,l),l.__e!=c&&sP(l)),lu.length>a&&lu.sort(yb));Av.__r=0}function uP(n,a,i,u,o,l,c,h,p,m){var y,S,x,T,w,N,M,D=u&&u.__k||iP,W=D.length;for(i.__k=[],y=0;y<a.length;y++)if((T=i.__k[y]=(T=a[y])==null||typeof T=="boolean"||typeof T=="function"?null:typeof T=="string"||typeof T=="number"||typeof T=="bigint"?mv(null,T,null,null,T):Array.isArray(T)?mv(Fb,{children:T},null,null,null):T.__b>0?mv(T.type,T.props,T.key,T.ref?T.ref:null,T.__v):T)!=null){if(T.__=i,T.__b=i.__b+1,(x=D[y])===null||x&&T.key==x.key&&T.type===x.type)D[y]=void 0;else for(S=0;S<W;S++){if((x=D[S])&&T.key==x.key&&T.type===x.type){D[S]=void 0;break}x=null}dP(n,T,x=x||oP,o,l,c,h,p,m),w=T.__e,(S=T.ref)&&x.ref!=S&&(M||(M=[]),x.ref&&M.push(x.ref,null,T),M.push(S,T.__c||w,T)),w!=null?(N==null&&(N=w),typeof T.type=="function"&&T.__k===x.__k?T.__d=p=lP(T,p,n):p=fP(n,T,x,D,w,p),typeof i.type=="function"&&(i.__d=p)):p&&x.__e==p&&p.parentNode!=n&&(p=Dc(x))}for(i.__e=N,y=W;y--;)D[y]!=null&&(typeof i.type=="function"&&D[y].__e!=null&&D[y].__e==i.__d&&(i.__d=cP(u).nextSibling),pP(D[y],D[y]));if(M)for(y=0;y<M.length;y++)hP(M[y],M[++y],M[++y])}function lP(n,a,i){for(var u,o=n.__k,l=0;o&&l<o.length;l++)(u=o[l])&&(u.__=n,a=typeof u.type=="function"?lP(u,a,i):fP(i,u,u,o,u.__e,a));return a}function fP(n,a,i,u,o,l){var c,h,p;if(a.__d!==void 0)c=a.__d,a.__d=void 0;else if(i==null||o!=l||o.parentNode==null)e:if(l==null||l.parentNode!==n)n.appendChild(o),c=null;else{for(h=l,p=0;(h=h.nextSibling)&&p<u.length;p+=1)if(h==o)break e;n.insertBefore(o,l),c=l}return c!==void 0?c:o.nextSibling}function cP(n){var a,i,u;if(n.type==null||typeof n.type=="string")return n.__e;if(n.__k){for(a=n.__k.length-1;a>=0;a--)if((i=n.__k[a])&&(u=cP(i)))return u}return null}function JB(n,a,i,u,o){var l;for(l in i)l==="children"||l==="key"||l in a||Pv(n,l,null,i[l],u);for(l in a)o&&typeof a[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||i[l]===a[l]||Pv(n,l,a[l],i[l],u)}function gT(n,a,i){a[0]==="-"?n.setProperty(a,i??""):n[a]=i==null?"":typeof i!="number"||ZB.test(a)?i:i+"px"}function Pv(n,a,i,u,o){var l;e:if(a==="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof u=="string"&&(n.style.cssText=u=""),u)for(a in u)i&&a in i||gT(n.style,a,"");if(i)for(a in i)u&&i[a]===u[a]||gT(n.style,a,i[a])}else if(a[0]==="o"&&a[1]==="n")l=a!==(a=a.replace(/Capture$/,"")),a=a.toLowerCase()in n?a.toLowerCase().slice(2):a.slice(2),n.l||(n.l={}),n.l[a+l]=i,i?u||n.addEventListener(a,l?bT:mT,l):n.removeEventListener(a,l?bT:mT,l);else if(a!=="dangerouslySetInnerHTML"){if(o)a=a.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(a!=="width"&&a!=="height"&&a!=="href"&&a!=="list"&&a!=="form"&&a!=="tabIndex"&&a!=="download"&&a in n)try{n[a]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&a[4]!=="-"?n.removeAttribute(a):n.setAttribute(a,i))}}function mT(n){return this.l[n.type+!1](wn.event?wn.event(n):n)}function bT(n){return this.l[n.type+!0](wn.event?wn.event(n):n)}function dP(n,a,i,u,o,l,c,h,p){var m,y,S,x,T,w,N,M,D,W,V,Ee,ge,ye,ce,xe=a.type;if(a.constructor!==void 0)return null;i.__h!=null&&(p=i.__h,h=a.__e=i.__e,a.__h=null,l=[h]),(m=wn.__b)&&m(a);try{e:if(typeof xe=="function"){if(M=a.props,D=(m=xe.contextType)&&u[m.__c],W=m?D?D.props.value:m.__:u,i.__c?N=(y=a.__c=i.__c).__=y.__E:("prototype"in xe&&xe.prototype.render?a.__c=y=new xe(M,W):(a.__c=y=new Ll(M,W),y.constructor=xe,y.render=e3),D&&D.sub(y),y.props=M,y.state||(y.state={}),y.context=W,y.__n=u,S=y.__d=!0,y.__h=[],y._sb=[]),y.__s==null&&(y.__s=y.state),xe.getDerivedStateFromProps!=null&&(y.__s==y.state&&(y.__s=Os({},y.__s)),Os(y.__s,xe.getDerivedStateFromProps(M,y.__s))),x=y.props,T=y.state,y.__v=a,S)xe.getDerivedStateFromProps==null&&y.componentWillMount!=null&&y.componentWillMount(),y.componentDidMount!=null&&y.__h.push(y.componentDidMount);else{if(xe.getDerivedStateFromProps==null&&M!==x&&y.componentWillReceiveProps!=null&&y.componentWillReceiveProps(M,W),!y.__e&&y.shouldComponentUpdate!=null&&y.shouldComponentUpdate(M,y.__s,W)===!1||a.__v===i.__v){for(a.__v!==i.__v&&(y.props=M,y.state=y.__s,y.__d=!1),y.__e=!1,a.__e=i.__e,a.__k=i.__k,a.__k.forEach(function(j){j&&(j.__=a)}),V=0;V<y._sb.length;V++)y.__h.push(y._sb[V]);y._sb=[],y.__h.length&&c.push(y);break e}y.componentWillUpdate!=null&&y.componentWillUpdate(M,y.__s,W),y.componentDidUpdate!=null&&y.__h.push(function(){y.componentDidUpdate(x,T,w)})}if(y.context=W,y.props=M,y.__P=n,Ee=wn.__r,ge=0,"prototype"in xe&&xe.prototype.render){for(y.state=y.__s,y.__d=!1,Ee&&Ee(a),m=y.render(y.props,y.state,y.context),ye=0;ye<y._sb.length;ye++)y.__h.push(y._sb[ye]);y._sb=[]}else do y.__d=!1,Ee&&Ee(a),m=y.render(y.props,y.state,y.context),y.state=y.__s;while(y.__d&&++ge<25);y.state=y.__s,y.getChildContext!=null&&(u=Os(Os({},u),y.getChildContext())),S||y.getSnapshotBeforeUpdate==null||(w=y.getSnapshotBeforeUpdate(x,T)),ce=m!=null&&m.type===Fb&&m.key==null?m.props.children:m,uP(n,Array.isArray(ce)?ce:[ce],a,i,u,o,l,c,h,p),y.base=a.__e,a.__h=null,y.__h.length&&c.push(y),N&&(y.__E=y.__=null),y.__e=!1}else l==null&&a.__v===i.__v?(a.__k=i.__k,a.__e=i.__e):a.__e=qB(i.__e,a,i,u,o,l,c,p);(m=wn.diffed)&&m(a)}catch(j){a.__v=null,(p||l!=null)&&(a.__e=h,a.__h=!!p,l[l.indexOf(h)]=null),wn.__e(j,a,i)}}function QB(n,a){wn.__c&&wn.__c(a,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(u){u.call(i)})}catch(u){wn.__e(u,i.__v)}})}function qB(n,a,i,u,o,l,c,h){var p,m,y,S=i.props,x=a.props,T=a.type,w=0;if(T==="svg"&&(o=!0),l!=null){for(;w<l.length;w++)if((p=l[w])&&"setAttribute"in p==!!T&&(T?p.localName===T:p.nodeType===3)){n=p,l[w]=null;break}}if(n==null){if(T===null)return document.createTextNode(x);n=o?document.createElementNS("http://www.w3.org/2000/svg",T):document.createElement(T,x.is&&x),l=null,h=!1}if(T===null)S===x||h&&n.data===x||(n.data=x);else{if(l=l&&Bb.call(n.childNodes),m=(S=i.props||oP).dangerouslySetInnerHTML,y=x.dangerouslySetInnerHTML,!h){if(l!=null)for(S={},w=0;w<n.attributes.length;w++)S[n.attributes[w].name]=n.attributes[w].value;(y||m)&&(y&&(m&&y.__html==m.__html||y.__html===n.innerHTML)||(n.innerHTML=y&&y.__html||""))}if(JB(n,x,S,o,h),y)a.__k=[];else if(w=a.props.children,uP(n,Array.isArray(w)?w:[w],a,i,u,o&&T!=="foreignObject",l,c,l?l[0]:i.__k&&Dc(i,0),h),l!=null)for(w=l.length;w--;)l[w]!=null&&aP(l[w]);h||("value"in x&&(w=x.value)!==void 0&&(w!==n.value||T==="progress"&&!w||T==="option"&&w!==S.value)&&Pv(n,"value",w,S.value,!1),"checked"in x&&(w=x.checked)!==void 0&&w!==n.checked&&Pv(n,"checked",w,S.checked,!1))}return n}function hP(n,a,i){try{typeof n=="function"?n(a):n.current=a}catch(u){wn.__e(u,i)}}function pP(n,a,i){var u,o;if(wn.unmount&&wn.unmount(n),(u=n.ref)&&(u.current&&u.current!==n.__e||hP(u,null,a)),(u=n.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(l){wn.__e(l,a)}u.base=u.__P=null,n.__c=void 0}if(u=n.__k)for(o=0;o<u.length;o++)u[o]&&pP(u[o],a,i||typeof n.type!="function");i||n.__e==null||aP(n.__e),n.__=n.__e=n.__d=void 0}function e3(n,a,i){return this.constructor(n,i)}Bb=iP.slice,wn={__e:function(n,a,i,u){for(var o,l,c;a=a.__;)if((o=a.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(n)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,u||{}),c=o.__d),c)return o.__E=o}catch(h){n=h}throw n}},rP=0,Ll.prototype.setState=function(n,a){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Os({},this.state),typeof n=="function"&&(n=n(Os({},i),this.props)),n&&Os(i,n),n!=null&&this.__v&&(a&&this._sb.push(a),yT(this))},Ll.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),yT(this))},Ll.prototype.render=Fb,lu=[],nP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yb=function(n,a){return n.__v.__b-a.__v.__b},Av.__r=0;var Ic=globalThis&&globalThis.__assign||function(){return Ic=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},Ic.apply(this,arguments)};function Gb(n){var a=n.x,i=n.y,u=n.width,o=n.height,l=n.radius,c=n.className,h=a-u/2,p=i-o/2,m=Ic(Ic({width:10,height:10,cx:0,cy:0,rx:l||0,ry:l||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},n),{x:h,y:p});return $t.h("rect",Ic({},m))}Gb.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var Cl;(function(n){n.NODE="node",n.CIRCLE_NODE="circle-node",n.POLYGON_NODE="polygon-node",n.RECT_NODE="rect-node",n.HTML_NODE="html-node",n.TEXT_NODE="text-node",n.ELLIPSE_NODE="ellipse-node",n.DIAMOND_NODE="diamond-node",n.EDGE="edge",n.LINE_EDGE="line-edge",n.POLYLINE_EDGE="polyline-edge",n.BEZIER_EDGE="bezier-edge",n.GRAPH="graph"})(Cl||(Cl={}));function bv(n){var a=n.x,i=n.y,u=n.width,o=n.height;return{minX:a-u/2,minY:i-o/2,maxX:a+u/2,maxY:i+o/2}}function ET(n){var a=bv(n),i=n.radius,u=a.minX,o=a.minY,l=a.maxX,c=a.maxY;return[{x:u+i,y:o+i},{x:l-i,y:o+i},{x:l-i,y:c-i},{x:u+i,y:c-i}]}function OT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a.x,l=a.y,c={x:o,y:l},h=i.radius,p=bv(i),m=bv(u);if(o===p.minX){c.x=m.minX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(o===p.maxX){c.x=m.maxX;var y=(l-i.y)/(i.height/2-h);y?c.y=u.y+(u.height/2-h)*y:c.y=u.y}else if(l===p.minY){c.y=m.minY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else if(l===p.maxY){c.y=m.maxY;var y=(o-i.x)/(i.width/2-h);y?c.x=u.x+(u.width/2-h)*y:c.x=u.x}else{var S=ET(i),x=ET(u),T=bv(i),w=T.minX,N=T.minY,M=T.maxX,D=T.maxY,W=-1;if(o-w<h&&l-N<h?W=0:M-o<h&&l-N<h?W=1:M-o<h&&D-l<h?W=2:o-w<h&&N-l<h&&(W=3),W>-1){var V=Math.atan2(l-S[W].y,o-S[W].x);c.x=x[W].x+h*Math.cos(V),c.y=x[W].y+h*Math.sin(V)}}return c}function ST(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=u.rx,l=u.ry,c=a,h=(a.y-i.y)/(a.x-i.x),p=o,m=l,y,S;return h>=1/0?(y=0,S=m):h<=-1/0?(y=0,S=-m):a.x-i.x>0?(y=p*m/Math.sqrt(m*m+p*p*h*h),S=p*m*h/Math.sqrt(m*m+p*p*h*h)):(y=-(p*m)/Math.sqrt(m*m+p*p*h*h),S=-(p*m*h)/Math.sqrt(m*m+p*p*h*h)),c={x:y+u.x,y:S+u.y},c}function xT(n){var a=n.point,i=n.beforeNode,u=n.afterNode,o=a,l,c,h=a.x-i.x,p=a.y-i.y,m=i.rx,y=i.ry,S=Math.sqrt((m-Math.abs(h))*(m-Math.abs(h))+p*p)/Math.sqrt(m*m+y*y),x=u.rx,T=u.ry,w=Math.sqrt((x*x+T*T)*S*S*(x*x/(x*x+T*T))),N=w*(T/x);return h>=0?l=x-w:l=w-x,p>0?c=N:c=-N,o={x:l+u.x,y:c+u.y},o}var t3=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),fu=globalThis&&globalThis.__assign||function(){return fu=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},fu.apply(this,arguments)},r3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},n3=$t.LogicFlowUtil.StepDrag,o3=function(n){t3(a,n);function a(i){var u=n.call(this)||this;return u.updatePosition=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.x,m=h.y;u.nodeModel.x=p+l/2,u.nodeModel.y=m+c/2,u.nodeModel.moveText(l/2,c/2)},u.getResize=function(o){var l=o.index,c=o.deltaX,h=o.deltaY,p=o.width,m=o.height,y=o.PCTResizeInfo,S=o.pct,x=S===void 0?1:S,T={width:p,height:m,deltaX:c,deltaY:h};if(y){var w=4,N=0,M=0;switch(l){case 0:M=(c*-1-h)/w;break;case 1:M=(c-h)/w;break;case 2:M=(c+h)/w;break;case 3:M=(c*-1+h)/w;break}M!==0&&(N=Math.round(M/y.ResizeBasis.basisHeight*1e5)/1e3),y.ResizePCT.widthPCT=Math.max(Math.min(y.ResizePCT.widthPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit),y.ResizePCT.hightPCT=Math.max(Math.min(y.ResizePCT.hightPCT+N,y.ScaleLimit.maxScaleLimit),y.ScaleLimit.minScaleLimit);var D=Math.round(y.ResizePCT.widthPCT*y.ResizeBasis.basisWidth/100),W=Math.round(y.ResizePCT.hightPCT*y.ResizeBasis.basisHeight/100);switch(l){case 0:c=p-D,h=m-W;break;case 1:c=D-p,h=m-W;break;case 2:c=D-p,h=W-m;break;case 3:c=p-D,h=W-m;break}return T.width=D,T.height=W,T.deltaX=c/x,T.deltaY=h/x,T}switch(l){case 0:T.width=p-c*x,T.height=m-h*x;break;case 1:T.width=p+c*x,T.height=m-h*x;break;case 2:T.width=p+c*x,T.height=m+h*x;break;case 3:T.width=p-c*x,T.height=m+h*x;break}return T},u.updateRect=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.x,y=h.y,S=h.width,x=h.height,T=h.radius,w=h.PCTResizeInfo,N=u.index,M=u.getResize({index:N,deltaX:l,deltaY:c,width:S,height:x,PCTResizeInfo:w,pct:1}),D=u.nodeModel,W=D.minWidth,V=D.minHeight,Ee=D.maxWidth,ge=D.maxHeight;if(M.width<W||M.width>Ee||M.height<V||M.height>ge){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:M.deltaX,deltaY:M.deltaY}),u.nodeModel.width=M.width,u.nodeModel.height=M.height,u.nodeModel.setProperties({nodeSize:{width:M.width,height:M.height}});var ye=u.getNodeEdges(p),ce={x:m,y,width:S,height:x,radius:T},xe={x:u.nodeModel.x,y:u.nodeModel.y,width:u.nodeModel.width,height:u.nodeModel.height,radius:T},j={point:"",beforeNode:ce,afterNode:xe},Q;ye.sourceEdges.forEach(function(U){j.point=U.startPoint,Q=OT(j),U.updateStartPoint(Q)}),ye.targetEdges.forEach(function(U){j.point=U.endPoint,Q=OT(j),U.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:xe})},u.updateEllipse=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,w=u.index,N=m,M=y,D=u.getResize({index:w,deltaX:l,deltaY:c,width:N,height:M,PCTResizeInfo:T,pct:1/2}),W=u.nodeModel,V=W.minWidth,Ee=W.minHeight,ge=W.maxWidth,ye=W.maxHeight;if(D.width<V/2||D.width>ge/2||D.height<Ee/2||D.height>ye/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),u.nodeModel.rx=D.width,u.nodeModel.ry=D.height,u.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ce=u.getNodeEdges(p),xe={x:S,y:x},j={rx:D.width,ry:D.height,x:u.nodeModel.x,y:u.nodeModel.y},Q={point:{},beforeNode:xe,afterNode:j},U;ce.sourceEdges.forEach(function(I){Q.point=I.startPoint,U=ST(Q),I.updateStartPoint(U)}),ce.targetEdges.forEach(function(I){Q.point=I.endPoint,U=ST(Q),I.updateEndPoint(U)}),u.eventEmit({beforeNode:fu(fu({},xe),{rx:m,ry:y}),afterNode:j})},u.updateDiamond=function(o){var l=o.deltaX,c=o.deltaY,h=u.nodeModel,p=h.id,m=h.rx,y=h.ry,S=h.x,x=h.y,T=h.PCTResizeInfo,w=u.index,N=m,M=y,D=u.getResize({index:w,deltaX:l,deltaY:c,width:N,height:M,PCTResizeInfo:T,pct:1/2}),W=u.nodeModel,V=W.minWidth,Ee=W.minHeight,ge=W.maxWidth,ye=W.maxHeight;if(D.width<V/2||D.width>ge/2||D.height<Ee/2||D.height>ye/2){u.dragHandler.cancelDrag();return}u.updatePosition({deltaX:D.deltaX,deltaY:D.deltaY}),u.nodeModel.rx=D.width,u.nodeModel.ry=D.height,u.nodeModel.setProperties({nodeSize:{rx:D.width,ry:D.height}});var ce={x:S,y:x,rx:m,ry:y},xe={rx:D.width,ry:D.height,x:u.nodeModel.x,y:u.nodeModel.y},j={point:{},beforeNode:ce,afterNode:xe},Q,U=u.getNodeEdges(p);U.sourceEdges.forEach(function(I){j.point=I.startPoint,Q=xT(j),I.updateStartPoint(Q)}),U.targetEdges.forEach(function(I){j.point=I.endPoint,Q=xT(j),I.updateEndPoint(Q)}),u.eventEmit({beforeNode:ce,afterNode:xe})},u.eventEmit=function(o){var l=o.beforeNode,c=o.afterNode,h=u.nodeModel,p=h.id,m=h.modelType,y=h.type,S=fu({id:p,modelType:m,type:y},l),x=fu({id:p,modelType:m,type:y},c);u.graphModel.eventCenter.emit("node:resize",{oldNodeSize:S,newNodeSize:x})},u.onDragging=function(o){var l,c=o.deltaX,h=o.deltaY,p=u.graphModel.transformModel,m=u.nodeModel.modelType;l=r3(p.fixDeltaXY(c,h),2),c=l[0],h=l[1],m===Cl.RECT_NODE||m===Cl.HTML_NODE?u.updateRect({deltaX:c,deltaY:h}):m===Cl.ELLIPSE_NODE?u.updateEllipse({deltaX:c,deltaY:h}):m===Cl.DIAMOND_NODE&&u.updateDiamond({deltaX:c,deltaY:h})},u.onDragEnd=function(){var o=u.graphModel.gridSize,l=o===void 0?1:o,c=l*Math.round(u.nodeModel.x/l),h=l*Math.round(u.nodeModel.y/l);u.nodeModel.moveTo(c,h)},u.index=i.index,u.nodeModel=i.model,u.graphModel=i.graphModel,u.state={},u.dragHandler=new n3({onDragging:u.onDragging,onDragEnd:u.onDragEnd,step:1}),u}return a.prototype.getNodeEdges=function(i){for(var u=this.graphModel,o=u.edges,l=[],c=[],h=0;h<o.length;h++){var p=o[h];p.sourceNodeId===i?l.push(p):o[h].targetNodeId===i&&c.push(p)}return{sourceEdges:l,targetEdges:c}},a.prototype.render=function(){var i=this.props,u=i.x,o=i.y,l=i.index,c=i.model,h=c.getControlPointStyle();return Rc("g",{className:"lf-resize-control-"+l},Rc(Gb,fu({className:"lf-node-control"},{x:u,y:o},h,{onMouseDown:this.dragHandler.handleMouseDown})))},a}(Ll),i3=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),_v=globalThis&&globalThis.__assign||function(){return _v=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},_v.apply(this,arguments)},Gv=function(n){i3(a,n);function a(){var i=n.call(this)||this;return i.state={},i}return a.prototype.getResizeControl=function(){var i=this.props,u=i.model,o=i.graphModel,l=u.x,c=u.y,h=u.width,p=u.height,m={minX:l-h/2,minY:c-p/2,maxX:l+h/2,maxY:c+p/2},y=m.minX,S=m.minY,x=m.maxX,T=m.maxY,w=[{x:y,y:S},{x,y:S},{x,y:T},{x:y,y:T}];return w.map(function(N,M){return Rc(o3,_v({index:M},N,{model:u,graphModel:o}))})},a.prototype.getGroupSolid=function(){var i=this.props.model,u=i.x,o=i.y,l=i.width,c=i.height,h=i.getResizeOutlineStyle();return Rc(Gb,_v({fill:"none"},h,{x:u,y:o,width:l,height:c}))},a.prototype.render=function(){return Rc("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},a}(Ll),vP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),a3=function(n){vP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.resize=function(i,u){console.log(i,u)},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a}($t.RectNodeModel),s3=function(n){vP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a}($t.RectNode),kv={type:"rect",view:s3,model:a3},yP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){yP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.EllipseNodeModel);(function(n){yP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u.isSelected&&!o?this.getControlGroup():"")},a})($t.EllipseNode);var gb=globalThis&&globalThis.__assign||function(){return gb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},gb.apply(this,arguments)};function u3(n){var a=n.fillOpacity,i=a===void 0?1:a,u=n.strokeWidth,o=u===void 0?1:u,l=n.strokeOpacity,c=l===void 0?1:l,h=n.fill,p=h===void 0?"transparent":h,m=n.stroke,y=m===void 0?"#000":m,S=n.points,x=n.className,T=x===void 0?"lf-basic-shape":x,w={fill:p,fillOpacity:i,strokeWidth:o,stroke:y,strokeOpacity:c,points:"",className:T};return w.points=S.map(function(N){return N.join(",")}).join(" "),$t.h("polygon",gb({},w))}var gP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),mb=globalThis&&globalThis.__assign||function(){return mb=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},mb.apply(this,arguments)};(function(n){gP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.rx=l.rx,o.ry=l.ry),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.rx,basisHeight:this.ry},l={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.DiamondNodeModel);(function(n){gP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){var i=this.props.model,u=i.points,o=i.getNodeStyle();return $t.h("g",null,$t.h(u3,mb({},o,{points:u})))},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.DiamondNode);var mP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}();(function(n){mP(a,n);function a(i,u){var o=n.call(this,i,u)||this,l=o.properties.nodeSize;return l&&(o.width=l.width,o.height=l.height),o}return a.prototype.initNodeData=function(i){n.prototype.initNodeData.call(this,i),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},a.prototype.getOutlineStyle=function(){var i=n.prototype.getOutlineStyle.call(this),u=this.graphModel.editConfigModel.isSilentMode;return u||(i.stroke="none",i.hover&&(i.hover.stroke="none")),i},a.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},a.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},a.prototype.enableProportionResize=function(i){if(i===void 0&&(i=!0),i){var u={widthPCT:100,hightPCT:100},o={basisWidth:this.width,basisHeight:this.height},l={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:u,ResizeBasis:o,ScaleLimit:l}}else delete this.PCTResizeInfo},a})($t.HtmlNodeModel);(function(n){mP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props,u=i.model,o=i.graphModel;return $t.h(Gv,{model:u,graphModel:o})},a.prototype.getResizeShape=function(){return n.prototype.getShape.call(this)},a.prototype.getShape=function(){var i=this.props,u=i.model.isSelected,o=i.graphModel.editConfigModel.isSilentMode;return $t.h("g",null,this.getResizeShape(),u&&!o?this.getControlGroup():"")},a})($t.HtmlNode);var bP=globalThis&&globalThis.__extends||function(){var n=function(a,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,o){u.__proto__=o}||function(u,o){for(var l in o)o.hasOwnProperty(l)&&(u[l]=o[l])},n(a,i)};return function(a,i){n(a,i);function u(){this.constructor=a}a.prototype=i===null?Object.create(i):(u.prototype=i.prototype,new u)}}(),wv=globalThis&&globalThis.__assign||function(){return wv=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},wv.apply(this,arguments)},l3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l},TT=globalThis&&globalThis.__spread||function(){for(var n=[],a=0;a<arguments.length;a++)n=n.concat(l3(arguments[a]));return n},AT=500,PT=300,f3=-1e4,c3=function(n){bP(a,n);function a(){var i=n!==null&&n.apply(this,arguments)||this;return i.isGroup=!0,i.unfoldedWidth=AT,i.unfoldedHight=PT,i}return a.prototype.initNodeData=function(i){var u=this;n.prototype.initNodeData.call(this,i);var o=[];Array.isArray(i.children)&&(o=i.children),this.children=new Set(o),this.width=AT,this.height=PT,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=f3,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){u.isFolded&&u.foldGroup(u.isFolded)})},a.prototype.getResizeOutlineStyle=function(){var i=n.prototype.getResizeOutlineStyle.call(this);return i.stroke="none",i},a.prototype.foldGroup=function(i){var u=this;this.setProperty("isFolded",i),this.isFolded=i,i?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var o=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(l){var c=u.graphModel.getElement(l);c.isGroup&&!c.isFolded&&c.foldGroup(i),c.visible=!i,o=o.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(i,o)},a.prototype.getAnchorStyle=function(i){var u=n.prototype.getAnchorStyle.call(this,i);return u.stroke="transparent",u.fill="transparent",u.hover.fill="transparent",u.hover.stroke="transparent",u},a.prototype.foldEdge=function(i,u){var o=this;u.forEach(function(l,c){var h=l.id,p=l.sourceNodeId,m=l.targetNodeId,y=l.startPoint,S=l.endPoint,x=l.type,T=l.properties,w=l.text,N={id:h+"__"+c,sourceNodeId:p,targetNodeId:m,startPoint:y,endPoint:S,type:x,properties:T,text:w==null?void 0:w.value};l.virtual&&o.graphModel.deleteEdgeById(l.id);var M=o.graphModel.group.getNodeGroup(m);M||(M=o.graphModel.getNodeModelById(m));var D=o.graphModel.group.getNodeGroup(p);D||(D=o.graphModel.getNodeModelById(p)),i&&l.visible!==!1&&(o.children.has(p)||o.id===p?(N.startPoint=void 0,N.sourceNodeId=o.id):(N.endPoint=void 0,N.targetNodeId=o.id),(M.id!==o.id||D.id!==o.id)&&o.createVirtualEdge(N),l.visible=!1),!i&&l.visible===!1&&(M&&M.isGroup&&M.isFolded?(N.targetNodeId=M.id,N.endPoint=void 0,o.createVirtualEdge(N)):D&&D.isGroup&&D.isFolded?(N.sourceNodeId=D.id,N.startPoint=void 0,o.createVirtualEdge(N)):l.visible=!0)})},a.prototype.createVirtualEdge=function(i){i.pointsList=void 0;var u=this.graphModel.addEdge(i);u.virtual=!0,u.text.editable=!1,u.isFoldedEdge=!0},a.prototype.isInRange=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return u>=this.x-this.width/2&&l<=this.x+this.width/2&&o>=this.y-this.height/2&&c<=this.y+this.height/2},a.prototype.isAllowMoveTo=function(i){var u=i.x1,o=i.y1,l=i.x2,c=i.y2;return{x:u>=this.x-this.width/2&&l<=this.x+this.width/2,y:o>=this.y-this.height/2&&c<=this.y+this.height/2}},a.prototype.setAllowAppendChild=function(i){this.setProperty("groupAddable",i)},a.prototype.addChild=function(i){this.children.add(i)},a.prototype.removeChild=function(i){this.children.delete(i)},a.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},a.prototype.getData=function(){var i=n.prototype.getData.call(this);i.children=TT(this.children);var u=i.properties;return delete u.groupAddable,delete u.isFolded,i},a.prototype.getHistoryData=function(){var i=n.prototype.getData.call(this);i.children=TT(this.children),i.isGroup=!0;var u=i.properties;return delete u.groupAddable,u.isFolded&&(i.x=i.x+this.unfoldedWidth/2-this.foldedWidth/2,i.y=i.y+this.unfoldedHight/2-this.foldedHeight/2),i},a.prototype.isAllowAppendIn=function(i){return!0},a.prototype.toBack=function(){this.zIndex--},a}(kv.model),d3=function(n){bP(a,n);function a(){return n!==null&&n.apply(this,arguments)||this}return a.prototype.getControlGroup=function(){var i=this.props.model,u=i.resizable,o=i.properties;return u&&!o.isFolded?n.prototype.getControlGroup.call(this):null},a.prototype.getAddableShape=function(){var i=this.props.model,u=i.width,o=i.height,l=i.x,c=i.y,h=i.radius,p=i.properties;if(!p.groupAddable)return null;var m=this.props.model.getNodeStyle().strokeWidth,y=this.props.model.getAddableOutlineStyle(),S=u+m+8,x=o+m+8;return $t.h("rect",wv(wv({},y),{width:S,height:x,x:l-S/2,y:c-x/2,rx:h,ry:h}))},a.prototype.getFoldIcon=function(){var i=this.props.model,u=i.x-i.width/2+5,o=i.y-i.height/2+5;if(!i.foldable)return null;var l=$t.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:i.properties.isFolded?"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" M"+(u+7)+","+(o+2)+" "+(u+7)+","+(o+10):"M "+(u+3)+","+(o+6)+" "+(u+11)+","+(o+6)+" "});return $t.h("g",{},[$t.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:i.x-i.width/2+5,y:i.y-i.height/2+5,onClick:function(){i.foldGroup(!i.properties.isFolded)}}),l])},a.prototype.getResizeShape=function(){return $t.h("g",{},[this.getAddableShape(),n.prototype.getResizeShape.call(this),this.getFoldIcon()])},a}(kv.view);const kb={type:"group",view:d3,model:c3};var h3=-1e3,_T=-1e4,p3=function(){function n(a){var i=this,u=a.lf;this.topGroupZIndex=_T,this.nodeGroupMap=new Map,this.graphRendered=function(o){o&&o.nodes&&o.nodes.forEach(function(l){l.children&&l.children.forEach(function(c){i.nodeGroupMap.set(c,l.id)})})},this.appendNodeToGroup=function(o){var l=o.data,c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id),h.setAllowAppendChild(!1)}var p=i.lf.getNodeModelById(l.id),m=p.getBounds(),y=i.getGroup(m,l);if(y){var S=y.isAllowAppendIn(l);if(!S){i.lf.emit("group:not-allowed",{group:y.getData(),node:l});return}y.addChild(l.id),i.nodeGroupMap.set(l.id,y.id),y.setAllowAppendChild(!1),p.isGroup&&(l.children.forEach(function(x){i.nodeGroupMap.set(x,l.id)}),i.nodeSelected({data:l,isSelected:!1,isMultiple:!1}))}},this.deleteGroupChild=function(o){var l=o.data;l.children&&l.children.forEach(function(p){i.nodeGroupMap.delete(p),i.lf.deleteNode(p)});var c=i.nodeGroupMap.get(l.id);if(c){var h=i.lf.getNodeModelById(c);h.removeChild(l.id),i.nodeGroupMap.delete(l.id)}},this.setActiveGroup=function(o){var l=o.data,c=i.lf.getNodeModelById(l.id),h=c.getBounds(),p=i.getGroup(h,l);if(i.activeGroup&&i.activeGroup.setAllowAppendChild(!1),!(!p||c.isGroup&&p.id===l.id)){var m=p.isAllowAppendIn(l);m&&(i.activeGroup=p,i.activeGroup.setAllowAppendChild(!0))}},this.nodeSelected=function(o){var l=o.data,c=o.isMultiple,h=o.isSelected,p=i.lf.getNodeModelById(l.id);if(i.toFrontGroup(p),i.topGroupZIndex>h3){i.topGroupZIndex=_T;for(var m=i.lf.graphModel.nodes.filter(function(N){return N.isGroup}).sort(function(N,M){return N.zIndex-M.zIndex}),y=0,S=0;S<m.length;S++){var x=m[S];x.zIndex!==y&&(i.topGroupZIndex++,y=x.zIndex),x.setZIndex(i.topGroupZIndex)}}if(c&&h)if(p.isGroup)p.children.forEach(function(N){var M=i.lf.graphModel.getElement(N);M.setSelected(!1)});else{var T=i.nodeGroupMap.get(l.id);if(T){var w=i.lf.getNodeModelById(T);w.isSelected&&p.setSelected(!1)}}},this.toFrontGroup=function(o){!o||!o.isGroup||(i.topGroupZIndex++,o.setZIndex(i.topGroupZIndex),o.children&&o.children.forEach(function(l){var c=i.lf.getNodeModelById(l);i.toFrontGroup(c)}))},u.register(kb),this.lf=u,u.graphModel.addNodeMoveRules(function(o,l,c){if(o.isGroup){var h=i.getNodeAllChild(o);return u.graphModel.moveNodes(h,l,c,!0),!0}var p=u.getNodeModelById(i.nodeGroupMap.get(o.id));if(p&&p.isRestrict){var m=o.getBounds(),y=m.x1,S=m.y1,x=m.x2,T=m.y2,w=p.isAllowMoveTo({x1:y+l,y1:S+c,x2:x+l,y2:T+c});return w}return!0}),u.graphModel.group=this,u.on("node:add,node:drop,node:dnd-add",this.appendNodeToGroup),u.on("node:delete",this.deleteGroupChild),u.on("node:dnd-drag,node:drag",this.setActiveGroup),u.on("node:click",this.nodeSelected),u.on("graph:rendered",this.graphRendered)}return n.prototype.getNodeAllChild=function(a){var i=this,u=[];return a.children&&a.children.forEach(function(o){u.push(o);var l=i.lf.getNodeModelById(o);l.isGroup&&(u=u.concat(i.getNodeAllChild(l)))}),u},n.prototype.getGroup=function(a,i){var u=this.lf.graphModel.nodes,o=u.filter(function(h){return h.isGroup&&h.isInRange(a)&&h.id!==i.id});if(o.length!==0){if(o.length===1)return o[0];for(var l=o[o.length-1],c=o.length-2;c>=0;c--)o[c].zIndex>l.zIndex&&(l=o[c]);return l}},n.prototype.getNodeGroup=function(a){var i=this.nodeGroupMap.get(a);if(i)return this.lf.getNodeModelById(i)},n.pluginName="group",n}(),v3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;var wT=globalThis&&globalThis.__assign||function(){return wT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},wT.apply(this,arguments)},NT=globalThis&&globalThis.__assign||function(){return NT=Object.assign||function(n){for(var a,i=1,u=arguments.length;i<u;i++){a=arguments[i];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},NT.apply(this,arguments)},y3=globalThis&&globalThis.__read||function(n,a){var i=typeof Symbol=="function"&&n[Symbol.iterator];if(!i)return n;var u=i.call(n),o,l=[],c;try{for(;(a===void 0||a-- >0)&&!(o=u.next()).done;)l.push(o.value)}catch(h){c={error:h}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(c)throw c.error}}return l};globalThis&&globalThis.__spread;class g3 extends $t.HtmlNodeModel{setAttributes(){this.width=0,this.height=0}}class m3 extends $t.HtmlNode{}class b3 extends pB{}class E3 extends vB{}class O3 extends yB{}class S3 extends gB{getShape(){const a=this.props.model,i=a.getNodeStyle(),{x:u,y:o,r:l}=a;return $t.h("circle",{...i,cx:u,cy:o,r:l,strokeWidth:5})}}class x3 extends mB{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${Ui()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class T3 extends bB{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:15,y1:15,x2:35,y2:35}),$t.h("line",{...h,x1:35,y1:15,x2:15,y2:35}))}}class A3 extends $t.PolygonNodeModel{constructor(a,i){const{id:u,text:o,x:l,y:c}=a;a.id=u||`Gateway_${Ui()}`,a.text=o||{value:o||"",x:l,y:c+40},super(a,i),this.points=[[25,0],[50,25],[25,50],[0,25]]}}class P3 extends $t.PolygonNode{getShape(){const{model:a}=this.props,{x:i,y:u,width:o,height:l,points:c}=a,h=a.getNodeStyle();return $t.h("g",{transform:`matrix(1 0 0 1 ${i-o/2} ${u-l/2})`},$t.h("polygon",{...h,x:i,y:u,points:c}),$t.h("line",{...h,x1:10,y1:25,x2:40,y2:25}),$t.h("line",{...h,x1:25,y1:10,x2:25,y2:40}))}}class _3 extends EB{}class w3 extends OB{}class N3 extends SB{isAllowConnectedAsSource(){return!1}}class M3 extends xB{}class R3 extends QA{getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class I3 extends qA{}const D3=kv.model;class C3 extends D3{createId(){return"Note_"+Ui()}initNodeData(a){super.initNodeData(a),this.height=40,this.text.draggable=!1}isAllowConnectedAsSource(){return!1}getNodeStyle(){const a=super.getNodeStyle();return a.strokeDasharray="3 3",a.fill="transparent",a}}class L3 extends kv.view{}class j3 extends QA{getEdgeStyle(){const a=super.getEdgeStyle();return a.strokeDasharray="3 3",a}getTextPosition(){const{x:a,y:i}=this.text;return a&&i?{x:a,y:i}:this.dbClickPosition||{x:0,y:0}}}class B3 extends qA{}const F3=kb.model;class G3 extends F3{createId(){return"Group_"+Ui()}initNodeData(a){super.initNodeData(a),this.resizable=!0,this.foldable=!0}addChild(a){var i,u;super.addChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.setProperty("groupKey",this.id)}removeChild(a){var i,u;super.removeChild(a),(u=(i=this.graphModel.nodesMap[a])==null?void 0:i.model)==null||u.deleteProperty("groupKey")}}class k3 extends kb.view{}class EP extends p3{constructor({lf:a}){super({lf:a}),a.register({type:"group",model:G3,view:k3}),a.off("node:delete",this.deleteGroupChild),a.on("node:delete",({data:i})=>{i.children&&i.children.forEach(u=>{this.nodeGroupMap.delete(u),this.lf.deleteNode(u)})})}}const U3=[{type:"process",model:g3,view:m3},{type:"startEvent",model:b3,view:E3},{type:"endEvent",model:O3,view:S3},{type:"exclusiveGateway",model:x3,view:T3},{type:"parallelGateway",model:A3,view:P3},{type:"userTask",model:_3,view:w3},{type:"serviceTask",model:N3,view:M3},{type:"sequenceFlow",model:R3,view:I3},{type:"note",model:C3,view:L3},{type:"noteFlow",model:j3,view:B3}];class Ub{constructor({lf:a}){a.batchRegister(U3),a.setDefaultEdgeType("sequenceFlow")}}_l(Ub,"pluginName","bpmnExtend");class z3 extends UB{constructor({lf:a}){super({lf:a}),this.addItem({key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>a.clearData()}),this.addItem({key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>a.emit("custom:edit-click",{})}),this.addItem({key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:i,show:u,hide:o}=a.extension.miniMap??{};i?o():u()}})}}class H3{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(a){return this.init(a),this.execute(!0)}init(a){this.nodes=a.nodes||[],this.edges=a.edges||[],this.combos=a.combos||[],this.comboEdges=a.comboEdges||[],this.hiddenNodes=a.hiddenNodes||[],this.hiddenEdges=a.hiddenEdges||[],this.hiddenCombos=a.hiddenCombos||[],this.vedges=a.vedges||[]}execute(a){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(a){a&&Object.assign(this,a)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const X3=n=>typeof n=="string",MT=Array.isArray,Nv=n=>typeof n=="number",OP=n=>n!==null&&typeof n=="object",Mv=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const a=[];return n.forEach(i=>{a.push(i)}),a.map(i=>Mv(i))}if(typeof n=="object"&&Object.keys(n).length){const a=Object.assign({},n);return Object.keys(a).forEach(i=>{a[i]=Mv(a[i])}),a}return n},wl=(n,a)=>{const i=n[a];return OP(i)?i.cell:i},RT=(n,a,i)=>{let u;return i?u=i:Nv(n)?u=()=>n:u=()=>a,u},$3=(n,a)=>{if(n!=="next"&&n!=="prev")return a},IT=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};let V3=class{constructor(){const a={};a.prev=a,a.next=a.prev,this.shortcut=a}dequeue(){const a=this.shortcut,i=a.prev;if(i&&i!==a)return IT(i),i}enqueue(a){const i=this.shortcut;a.prev&&a.next&&IT(a),a.next=i.next,i.next.prev=a,i.next=a,a.prev=i}toString(){const a=[],i=this.shortcut;let u=i.prev;for(;u!==i;)a.push(JSON.stringify(u,$3)),u=u==null?void 0:u.prev;return`[${a.join(", ")}]`}};var jl;(function(n){n.DEFAULT_EDGE_NAME="\0",n.GRAPH_NODE="\0",n.EDGE_KEY_DELIM=""})(jl||(jl={}));function DT(n,a){var i=n.get(a)||0;n.set(a,i+1)}function CT(n,a){var i=n.get(a);i!==void 0&&(i=i-1,i>0?n.set(a,i):n.delete(a))}function SP(n,a,i,u){var o=String(a),l=String(i);if(!n&&o>l){var c=o;o=l,l=c}return o+jl.EDGE_KEY_DELIM+l+jl.EDGE_KEY_DELIM+(u===void 0?jl.DEFAULT_EDGE_NAME:u)}function LT(n,a,i,u){var o=String(a),l=String(i),c={v:a,w:i};if(!n&&o>l){var h=c.v;c.v=c.w,c.w=h}return u!==void 0&&(c.name=u),c}function eb(n,a){return SP(n,a.v,a.w,a.name)}function jT(n){return typeof n=="function"}var W3=function(a){return a.nodes().map(function(i){var u=a.node(i),o=a.parent(i),l={id:i,value:u,parent:o};return l.value===void 0&&delete l.value,l.parent===void 0&&delete l.parent,l})},Y3=function(a){return a.edges().map(function(i){var u=a.edge(i),o={v:i.v,w:i.w,value:u,name:i.name};return o.name===void 0&&delete o.name,o.value===void 0&&delete o.value,o})},K3=function(a){var i={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:W3(a),edges:Y3(a),value:a.graph()};return i.value===void 0&&delete i.value,i},Z3=function(a){var i=new Hl(a.options);return a.value!==void 0&&i.setGraph(a.value),a.nodes.forEach(function(u){i.setNode(u.id,u.value),u.parent&&i.setParent(u.id,u.parent)}),a.edges.forEach(function(u){i.setEdge(u.v,u.w,u.value,u.name)}),i};function BT(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);a&&(u=u.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),i.push.apply(i,u)}return i}function FT(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?BT(Object(i),!0).forEach(function(u){J3(n,u,i[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):BT(Object(i)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(i,u))})}return n}function J3(n,a,i){return a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Q3(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function GT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function q3(n,a,i){return a&&GT(n.prototype,a),i&&GT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}var eF={compound:!1,multigraph:!1,directed:!0},Hl=function(){function n(){var a=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Q3(this,n),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=jl.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return a.directed},this.isMultigraph=function(){return a.multigraph},this.isCompound=function(){return a.compound},this.setGraph=function(o){return a.label=o,a},this.graph=function(){return a.label},this.setDefaultNodeLabel=function(o){return jT(o)?a.defaultNodeLabelFn=o:a.defaultNodeLabelFn=function(){return o},a},this.nodeCount=function(){return a.nodeCountNum},this.node=function(o){return a.nodesLabelMap.get(o)},this.nodes=function(){return Array.from(a.nodesLabelMap.keys())},this.sources=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.inEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.sinks=function(){return a.nodes().filter(function(o){var l;return!(!((l=a.outEdgesMap.get(o))===null||l===void 0)&&l.size)})},this.setNodes=function(o,l){return o.map(function(c){return a.setNode(c,l)}),a},this.hasNode=function(o){return a.nodesLabelMap.has(o)},this.checkCompound=function(){if(!a.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(o){if(a.isCompound()){var l,c=(l=a.parentMap)===null||l===void 0?void 0:l.get(o);if(c!==a.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(o){var l=a.parentMap.get(o);a.childrenMap.get(l).delete(o)},this.setParent=function(o,l){var c,h;a.checkCompound();for(var p=l===void 0?a.GRAPH_NODE:l,m=a.parent(p);m;){if(o===m)throw new Error("Setting "+l+" as parent of "+o+" would create a cycle");m=a.parent(m)}l&&a.setNode(l),a.setNode(o),a.removeFromParentsChildList(o),(c=a.parentMap)===null||c===void 0||c.set(o,p);var y=a.childrenMap.get(p);return y.set(o,!0),(h=a.childrenMap)===null||h===void 0||h.set(p,y),a},this.children=function(o){var l=o===void 0?a.GRAPH_NODE:o;if(a.isCompound()){var c,h=(c=a.childrenMap)===null||c===void 0?void 0:c.get(l);return h?Array.from(h.keys()):void 0}if(l===a.GRAPH_NODE)return a.nodes();if(o&&a.hasNode(o))return[]},this.predecessors=function(o){var l=a.predecessorsMap.get(o);return l?Array.from(l.keys()):void 0},this.successors=function(o){var l=a.successorsMap.get(o);return l?Array.from(l.keys()):void 0},this.neighbors=function(o){var l;if(a.hasNode(o))return Array.from(new Set((l=a.predecessors(o))===null||l===void 0?void 0:l.concat(a.successors(o))))},this.isLeaf=function(o){var l;if(a.isDirected()){var c;return!(!((c=a.successors(o))===null||c===void 0)&&c.length)}return!(!((l=a.neighbors(o))===null||l===void 0)&&l.length)},this.filterNodes=function(o){var l=a.directed,c=a.multigraph,h=a.compound,p=new n({directed:l,multigraph:c,compound:h});if(p.setGraph(a.graph()),a.nodes().forEach(function(y){o(y)&&p.setNode(y,a.node(y))}),a.edges().forEach(function(y){p.hasNode(y.v)&&p.hasNode(y.w)&&p.setEdgeObj(y,a.edge(y))}),h){var m=function(S){for(var x=a.parent(S);x!==void 0&&!p.hasNode(x);)x=a.parent(x);return x};p.nodes().forEach(function(y){p.setParent(y,m(y))})}return p},this.setDefaultEdgeLabel=function(o){return jT(o)?a.defaultEdgeLabelFn=o:a.defaultEdgeLabelFn=function(){return o},a},this.edgeCount=function(){return a.edgeCountNum},this.setEdgeObj=function(o,l){return a.setEdge(o.v,o.w,l,o.name)},this.setPath=function(o,l){return o.reduce(function(c,h){return a.setEdge(c,h,l),h}),a},this.edgeFromArgs=function(o,l,c){return a.edge({v:o,w:l,name:c})},this.edge=function(o){return a.edgesLabelsMap.get(eb(a.isDirected(),o))},this.hasEdge=function(o,l,c){return a.edgesLabelsMap.has(eb(a.isDirected(),{v:o,w:l,name:c}))},this.removeEdgeObj=function(o){var l=o.v,c=o.w,h=o.name;return a.removeEdge(l,c,h)},this.edges=function(){return Array.from(a.edgesMap.values())},this.inEdges=function(o,l){var c=a.inEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.v===l})},this.outEdges=function(o,l){var c=a.outEdgesMap.get(o);if(c)return Array.from(c.values()).filter(function(h){return!l||h.w===l})},this.nodeEdges=function(o,l){var c;if(a.hasNode(o))return(c=a.inEdges(o,l))===null||c===void 0?void 0:c.concat(a.outEdges(o,l))},this.toJSON=function(){return K3(a)},this.nodeInDegree=function(o){var l=a.inEdgesMap.get(o);return l?l.size:0},this.nodeOutDegree=function(o){var l=a.outEdgesMap.get(o);return l?l.size:0},this.nodeDegree=function(o){return a.nodeInDegree(o)+a.nodeOutDegree(o)},this.source=function(o){return o.v},this.target=function(o){return o.w};var u=FT(FT({},eF),i);this.compound=u.compound,this.directed=u.directed,this.multigraph=u.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return q3(n,[{key:"setNode",value:function(i,u){var o=this.nodesLabelMap,l=this.defaultNodeLabelFn,c=this.isCompound,h=this.parentMap,p=this.childrenMap,m=this.inEdgesMap,y=this.outEdgesMap,S=this.predecessorsMap,x=this.successorsMap;if(o.has(i))return u!==void 0&&o.set(i,u),this;if(o.set(i,u||l(i)),c()){var T;h==null||h.set(i,this.GRAPH_NODE),p==null||p.set(i,new Map),p!=null&&p.has(this.GRAPH_NODE)||p==null||p.set(this.GRAPH_NODE,new Map),p==null||(T=p.get(this.GRAPH_NODE))===null||T===void 0||T.set(i,!0)}return[m,y,S,x].forEach(function(w){return w.set(i,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(i){var u=this;if(this.hasNode(i)){var o=function(M){u.removeEdge(M.v,M.w,M.name)},l=this.inEdgesMap,c=this.outEdgesMap,h=this.predecessorsMap,p=this.successorsMap,m=this.nodesLabelMap;if(this.isCompound()){var y,S,x;this.removeFromParentsChildList(i),(y=this.parentMap)===null||y===void 0||y.delete(i),(S=this.children(i))===null||S===void 0||S.forEach(function(N){return u.setParent(N)}),(x=this.childrenMap)===null||x===void 0||x.delete(i)}var T=l.get(i),w=c.get(i);Array.from(T.values()).forEach(function(N){return o(N)}),Array.from(w.values()).forEach(function(N){return o(N)}),m.delete(i),l.delete(i),c.delete(i),h.delete(i),p.delete(i),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(i,u,o,l){var c,h,p=LT(this.isDirected(),i,u,l),m=eb(this.isDirected(),p),y=p.v,S=p.w;if(this.edgesLabelsMap.has(m))return this.edgesLabelsMap.set(m,o),this;if(l!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(y),this.setNode(S),this.edgesLabelsMap.set(m,o||this.defaultEdgeLabelFn(y,S,l)),Object.freeze(p),this.edgesMap.set(m,p);var x=this.predecessorsMap.get(S),T=this.successorsMap.get(y);return DT(x,y),DT(T,S),(c=this.inEdgesMap.get(S))===null||c===void 0||c.set(m,p),(h=this.outEdgesMap.get(y))===null||h===void 0||h.set(m,p),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(i,u,o){var l=SP(this.isDirected(),i,u,o),c=this.edgesMap.get(l);if(c){var h=LT(this.isDirected(),i,u,o),p=h.v,m=h.w;this.edgesLabelsMap.delete(l),this.edgesMap.delete(l);var y=this.predecessorsMap.get(m),S=this.successorsMap.get(p);CT(y,p),CT(S,m),this.inEdgesMap.get(m).delete(l),this.outEdgesMap.get(p).delete(l),this.edgeCountNum-=1}return this}}]),n}();Hl.fromJSON=Z3;function kT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function tF(n,a,i){return a&&kT(n.prototype,a),i&&kT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function rF(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var xP=tF(function n(){var a=this;rF(this,n),this.arr=[],this.keyIndice=new Map,this.size=function(){return a.arr.length},this.keys=function(){return a.arr.map(function(i){return i.key})},this.has=function(i){return a.keyIndice.has(i)},this.priority=function(i){var u=a.keyIndice.get(i);if(u!==void 0)return a.arr[u].priority},this.swap=function(i,u){var o=a.arr,l=a.keyIndice,c=[o[i],o[u]],h=c[0],p=c[1];o[i]=p,o[u]=h,l.set(h.key,u),l.set(p.key,i)},this.innerDecrease=function(i){for(var u=a.arr,o=u[i].priority,l,c=i;c!==0;){var h;if(l=c>>1,((h=u[l])===null||h===void 0?void 0:h.priority)<o)break;a.swap(c,l),c=l}},this.heapify=function(i){var u=a.arr,o=i<<1,l=o+1,c=i;o<u.length&&(c=u[o].priority<u[c].priority?o:c,l<u.length&&(c=u[l].priority<u[c].priority?l:c),c!==i&&(a.swap(i,c),a.heapify(c)))},this.min=function(){if(a.size()===0)throw new Error("Queue underflow");return a.arr[0].key},this.add=function(i,u){var o=a.keyIndice,l=a.arr;if(!o.has(i)){var c=l.length;return o.set(i,c),l.push({key:i,priority:u}),a.innerDecrease(c),!0}return!1},this.removeMin=function(){a.swap(0,a.arr.length-1);var i=a.arr.pop();return a.keyIndice.delete(i.key),a.heapify(0),i.key},this.decrease=function(i,u){if(!a.has(i))throw new Error("There's no key named ".concat(i));var o=a.keyIndice.get(i);if(u>a.arr[o].priority)throw new Error("New priority is greater than current priority.Key: ".concat(i," Old: + ").concat(a.arr[o].priority," New: ").concat(u));a.arr[o].priority=u,a.innerDecrease(o)}}),nF=function(a,i){var u=new Hl,o=new Map,l=new xP,c;function h(y){var S=y.v===c?y.w:y.v,x=l.priority(S);if(x!==void 0){var T=i(y);T<x&&(o.set(S,c),l.decrease(S,T))}}if(a.nodeCount()===0)return u;a.nodes().forEach(function(y){l.add(y,Number.POSITIVE_INFINITY),u.setNode(y)}),l.decrease(a.nodes()[0],0);for(var p=!1;l.size()>0;){var m;if(c=l.removeMin(),o.has(c))u.setEdge(c,o.get(c));else{if(p)throw new Error("Input graph is not connected: "+a.graph());p=!0}(m=a.nodeEdges(c))===null||m===void 0||m.forEach(h)}return u},oF=function(a){var i=new Set,u=[],o=a.nodes();return o.forEach(function(l){for(var c=[],h=[l];h.length>0;){var p=h.pop();if(!i.has(p)){var m,y;i.add(p),c.push(p),(m=a.successors(p))===null||m===void 0||m.forEach(function(S){return h.push(S)}),(y=a.predecessors(p))===null||y===void 0||y.forEach(function(S){return h.push(S)})}}c.length&&u.push(c)}),u},iF=function n(a,i,u,o,l,c){o.includes(i)||(o.push(i),u||c.push(i),l(i).forEach(function(h){return n(a,h,u,o,l,c)}),u&&c.push(i))},zb=function(a,i,u){var o=Array.isArray(i)?i:[i],l=function(m){return a.isDirected()?a.successors(m):a.neighbors(m)},c=[],h=[];return o.forEach(function(p){if(a.hasNode(p))iF(a,p,u==="post",h,l,c);else throw new Error("Graph does not have node: "+p)}),c};function aF(n,a){return fF(n)||lF(n,a)||uF(n,a)||sF()}function sF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(n,a){if(n){if(typeof n=="string")return UT(n,a);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return UT(n,a)}}function UT(n,a){(a==null||a>n.length)&&(a=n.length);for(var i=0,u=new Array(a);i<a;i++)u[i]=n[i];return u}function lF(n,a){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var u=[],o=!0,l=!1,c,h;try{for(i=i.call(n);!(o=(c=i.next()).done)&&(u.push(c.value),!(a&&u.length===a));o=!0);}catch(p){l=!0,h=p}finally{try{!o&&i.return!=null&&i.return()}finally{if(l)throw h}}return u}}function fF(n){if(Array.isArray(n))return n}var cF=function(){return 1},TP=function(a,i,u,o){return dF(a,i,u||cF,o||function(l){return a.outEdges(l)})},dF=function(a,i,u,o){var l=new Map,c=new xP,h,p,m=function(x){var T=x.v!==h?x.v:x.w,w=l.get(T),N=u(x),M=p.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+N);M<w.distance&&(w.distance=M,w.predecessor=h,c.decrease(T,M))};for(a.nodes().forEach(function(S){var x=S===i?0:Number.POSITIVE_INFINITY;l.set(S,{distance:x}),c.add(S,x)});c.size()>0&&(h=c.removeMin(),p=l.get(h),!(p&&p.distance===Number.POSITIVE_INFINITY));)o(h).forEach(m);var y={};return Array.from(l.entries()).forEach(function(S){var x=aF(S,2),T=x[0],w=x[1];return y[String(T)]=w,y}),y},hF=function(a,i,u){var o={};return a.nodes().forEach(function(l){return o[String(l)]=TP(a,l,i,u),o}),o},AP=function(a){var i=0,u=[],o=new Map,l=[];function c(h){var p,m={onStack:!0,lowlink:i,index:i};if(o.set(h,m),i+=1,u.push(h),(p=a.successors(h))===null||p===void 0||p.forEach(function(T){var w;if(o.has(T)){if(!((w=o.get(T))===null||w===void 0)&&w.onStack){var M=o.get(T);m.lowlink=Math.min(m.lowlink,M.index)}}else{c(T);var N=o.get(T);m.lowlink=Math.min(m.lowlink,N.lowlink)}}),m.lowlink===m.index){var y=[],S;do{S=u.pop();var x=o.get(S);x.onStack=!1,y.push(S)}while(h!==S);l.push(y)}}return a.nodes().forEach(function(h){o.has(h)||c(h)}),l},pF=function(a){return AP(a).filter(function(i){return i.length>1||i.length===1&&a.hasEdge(i[0],i[0])})};function bb(n){return bb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},bb(n)}function zT(n,a){for(var i=0;i<a.length;i++){var u=a[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function vF(n,a,i){return a&&zT(n.prototype,a),i&&zT(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function yF(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function gF(n,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(a&&a.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),a&&Cc(n,a)}function mF(n){var a=PP();return function(){var u=Lc(n),o;if(a){var l=Lc(this).constructor;o=Reflect.construct(u,arguments,l)}else o=u.apply(this,arguments);return bF(this,o)}}function bF(n,a){if(a&&(bb(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EF(n)}function EF(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Eb(n){var a=typeof Map=="function"?new Map:void 0;return Eb=function(u){if(u===null||!OF(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(u))return a.get(u);a.set(u,o)}function o(){return Ev(u,arguments,Lc(this).constructor)}return o.prototype=Object.create(u.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),Cc(o,u)},Eb(n)}function Ev(n,a,i){return PP()?Ev=Reflect.construct:Ev=function(o,l,c){var h=[null];h.push.apply(h,l);var p=Function.bind.apply(o,h),m=new p;return c&&Cc(m,c.prototype),m},Ev.apply(null,arguments)}function PP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function OF(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Cc(n,a){return Cc=Object.setPrototypeOf||function(u,o){return u.__proto__=o,u},Cc(n,a)}function Lc(n){return Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lc(n)}var Ob=function(n){gF(i,n);var a=mF(i);function i(){return yF(this,i),a.apply(this,arguments)}return vF(i)}(Eb(Error));function _P(n){var a=new Set,i=new Set,u=[];function o(l){if(i.has(l))throw new Ob;if(!a.has(l)){var c;i.add(l),a.add(l),(c=n.predecessors(l))===null||c===void 0||c.forEach(o),i.delete(l),u.push(l)}}if(n.sinks().forEach(o),a.size!==n.nodeCount())throw new Ob;return u}var SF=function(a){try{_P(a)}catch(i){if(i instanceof Ob)return!1;throw i}return!0},xF=function(a,i){return zb(a,i,"post")},TF=function(a,i){return zb(a,i,"pre")},AF=function(){return 1};function PF(n,a,i){return _F(n,a||AF,i||function(u){return n.outEdges(u)})}function _F(n,a,i){var u={},o=n.nodes();return o.forEach(function(l){var c=String(l);u[c]={},u[c][c]={distance:0},o.forEach(function(h){l!==h&&(u[c][String(h)]={distance:Number.POSITIVE_INFINITY})}),i(l).forEach(function(h){var p=h.v===l?h.w:h.v,m=a(h);u[c][String(p)]={distance:m,predecessor:l}})}),o.forEach(function(l){var c=String(l),h=u[c];o.forEach(function(p){var m=String(p),y=u[m];o.forEach(function(S){var x=String(S),T=y[c],w=h[x],N=y[x],M=T.distance+w.distance;M<N.distance&&(N.distance=M,N.predecessor=w.predecessor)})})}),u}const wF=Object.freeze(Object.defineProperty({__proto__:null,components:oF,dfs:zb,dijkstra:TP,dijkstraAll:hF,findCycles:pF,floydWarshall:PF,isAcyclic:SF,postorder:xF,preorder:TF,prim:nF,tarjan:AP,topsort:_P},Symbol.toStringTag,{value:"Module"}));class NF extends V3{}class MF extends Hl{}const RF=()=>1,IF=(n,a)=>{var i;if(n.nodeCount()<=1)return[];const u=CF(n,a||RF);return(i=DF(u.graph,u.buckets,u.zeroIdx).map(l=>n.outEdges(l.v,l.w)))===null||i===void 0?void 0:i.flat()},DF=(n,a,i)=>{let u=[];const o=a[a.length-1],l=a[0];let c;for(;n.nodeCount();){for(;c=l.dequeue();)tb(n,a,i,c);for(;c=o.dequeue();)tb(n,a,i,c);if(n.nodeCount()){for(let h=a.length-2;h>0;--h)if(c=a[h].dequeue(),c){u=u.concat(tb(n,a,i,c,!0));break}}}return u},tb=(n,a,i,u,o)=>{var l,c;const h=[];return(l=n.inEdges(u.v))===null||l===void 0||l.forEach(p=>{const m=n.edge(p),y=n.node(p.v);o&&h.push({v:p.v,w:p.w,in:0,out:0}),y.out===void 0&&(y.out=0),y.out-=m,Sb(a,i,y)}),(c=n.outEdges(u.v))===null||c===void 0||c.forEach(p=>{const m=n.edge(p),y=p.w,S=n.node(y);S.in===void 0&&(S.in=0),S.in-=m,Sb(a,i,S)}),n.removeNode(u.v),o?h:void 0},CF=(n,a)=>{const i=new MF;let u=0,o=0;n.nodes().forEach(p=>{i.setNode(p,{v:p,in:0,out:0})}),n.edges().forEach(p=>{const m=i.edge(p)||0,y=(a==null?void 0:a(p))||1,S=m+y;i.setEdge(p.v,p.w,S),o=Math.max(o,i.node(p.v).out+=y),u=Math.max(u,i.node(p.w).in+=y)});const l=[],c=o+u+3;for(let p=0;p<c;p++)l.push(new NF);const h=u+1;return i.nodes().forEach(p=>{Sb(l,h,i.node(p))}),{buckets:l,zeroIdx:h,graph:i}},Sb=(n,a,i)=>{i.out?i.in?n[i.out-i.in+a].enqueue(i):n[n.length-1].enqueue(i):n[0].enqueue(i)},LF=n=>{const a=u=>o=>{var l;return((l=u.edge(o))===null||l===void 0?void 0:l.weight)||1},i=n.graph().acyclicer==="greedy"?IF(n,a(n)):jF(n);i==null||i.forEach(u=>{const o=n.edge(u);n.removeEdgeObj(u),o.forwardName=u.name,o.reversed=!0,n.setEdge(u.w,u.v,o,`rev-${Math.random()}`)})},jF=n=>{const a=[],i={},u={},o=l=>{var c;u[l]||(u[l]=!0,i[l]=!0,(c=n.outEdges(l))===null||c===void 0||c.forEach(h=>{i[h.w]?a.push(h):o(h.w)}),delete i[l])};return n.nodes().forEach(o),a},BF=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.reversed){n.removeEdgeObj(a);const u=i.forwardName;delete i.reversed,delete i.forwardName,n.setEdge(a.w,a.v,i,u)}})},HT={run:LF,undo:BF};class Aa extends Hl{}const FF=(n,a)=>Number(n)-Number(a),Xl=(n,a,i,u)=>{let o;do o=`${u}${Math.random()}`;while(n.hasNode(o));return i.dummy=a,n.setNode(o,i),o},GF=n=>{const a=new Aa().setGraph(n.graph());return n.nodes().forEach(i=>{a.setNode(i,n.node(i))}),n.edges().forEach(i=>{const u=a.edgeFromArgs(i.v,i.w)||{weight:0,minlen:1},o=n.edge(i);a.setEdge(i.v,i.w,{weight:u.weight+o.weight,minlen:Math.max(u.minlen,o.minlen)})}),a},wP=n=>{const a=new Aa({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(i=>{var u;!((u=n.children(i))===null||u===void 0)&&u.length||a.setNode(i,n.node(i))}),n.edges().forEach(i=>{a.setEdgeObj(i,n.edge(i))}),a},kF=(n,a)=>n==null?void 0:n.reduce((i,u,o)=>(i[u]=a[o],i),{}),XT=(n,a)=>{const i=Number(n.x),u=Number(n.y),o=Number(a.x)-i,l=Number(a.y)-u;let c=Number(n.width)/2,h=Number(n.height)/2;if(!o&&!l)return{x:0,y:0};let p,m;return Math.abs(l)*c>Math.abs(o)*h?(l<0&&(h=-h),p=h*o/l,m=h):(o<0&&(c=-c),p=c,m=c*l/o),{x:i+p,y:u+m}},jc=n=>{const a=[],i=NP(n)+1;for(let u=0;u<i;u++)a.push([]);n.nodes().forEach(u=>{const o=n.node(u);if(!o)return;const l=o.rank;l!==void 0&&a[l]&&a[l].push(u)});for(let u=0;u<i;u++)a[u]=a[u].sort((o,l)=>{var c,h;return FF((c=n.node(o))===null||c===void 0?void 0:c.order,(h=n.node(l))===null||h===void 0?void 0:h.order)});return a},UF=n=>{const a=n.nodes().filter(u=>{var o;return((o=n.node(u))===null||o===void 0?void 0:o.rank)!==void 0}).map(u=>n.node(u).rank),i=Math.min(...a);n.nodes().forEach(u=>{const o=n.node(u);o.hasOwnProperty("rank")&&i!==1/0&&(o.rank-=i)})},zF=n=>{const a=n.nodes(),i=a.filter(h=>{var p;return((p=n.node(h))===null||p===void 0?void 0:p.rank)!==void 0}).map(h=>n.node(h).rank),u=Math.min(...i),o=[];a.forEach(h=>{var p;const m=(((p=n.node(h))===null||p===void 0?void 0:p.rank)||0)-u;o[m]||(o[m]=[]),o[m].push(h)});let l=0;const c=n.graph().nodeRankFactor||0;for(let h=0;h<o.length;h++){const p=o[h];p===void 0?h%c!==0&&(l-=1):l&&(p==null||p.forEach(m=>{const y=n.node(m);y&&(y.rank=y.rank||0,y.rank+=l)}))}},$T=(n,a,i,u)=>{const o={width:0,height:0};return Nv(i)&&Nv(u)&&(o.rank=i,o.order=u),Xl(n,"border",o,a)},NP=n=>{let a;return n.nodes().forEach(i=>{var u;const o=(u=n.node(i))===null||u===void 0?void 0:u.rank;o!==void 0&&(a===void 0||o>a)&&(a=o)}),a||(a=0),a},HF=(n,a)=>{const i={lhs:[],rhs:[]};return n==null||n.forEach(u=>{a(u)?i.lhs.push(u):i.rhs.push(u)}),i},MP=(n,a)=>{const i=Date.now();try{return a()}finally{console.log(`${n} time: ${Date.now()-i}ms`)}},RP=(n,a)=>a(),Hb=(n,a)=>n.reduce((i,u)=>{const o=a(i),l=a(u);return o>l?u:i}),XF=n=>{n.graph().dummyChains=[],n.edges().forEach(a=>$F(n,a))},$F=(n,a)=>{let i=a.v,u=n.node(i).rank;const o=a.w,l=n.node(o).rank,c=a.name,h=n.edge(a),p=h.labelRank;if(l===u+1)return;n.removeEdgeObj(a);const m=n.graph();let y,S,x;for(x=0,++u;u<l;++x,++u)h.points=[],S={edgeLabel:h,width:0,height:0,edgeObj:a,rank:u},y=Xl(n,"edge",S,"_d"),u===p&&(S.width=h.width,S.height=h.height,S.dummy="edge-label",S.labelpos=h.labelpos),n.setEdge(i,y,{weight:h.weight},c),x===0&&(m.dummyChains||(m.dummyChains=[]),m.dummyChains.push(y)),i=y;n.setEdge(i,o,{weight:h.weight},c)},VF=n=>{var a;(a=n.graph().dummyChains)===null||a===void 0||a.forEach(i=>{let u=n.node(i);const o=u.edgeLabel;let l;u.edgeObj&&n.setEdgeObj(u.edgeObj,o);let c=i;for(;u.dummy;)l=n.successors(c)[0],n.removeNode(c),o.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(o.x=u.x,o.y=u.y,o.width=u.width,o.height=u.height),c=l,u=n.node(c)})},VT={run:XF,undo:VF},IP=n=>{var a;const i={},u=o=>{var l;const c=n.node(o);if(!c)return 0;if(i[o])return c.rank;i[o]=!0;let h;return(l=n.outEdges(o))===null||l===void 0||l.forEach(p=>{const m=u(p.w),y=n.edge(p).minlen,S=m-y;S&&(h===void 0||S<h)&&(h=S)}),h||(h=0),c.rank=h,h};(a=n.sources())===null||a===void 0||a.forEach(o=>u(o))},WF=n=>{var a;const i={};let u;const o=h=>{var p;const m=n.node(h);if(!m)return 0;if(i[h])return m.rank;i[h]=!0;let y;return(p=n.outEdges(h))===null||p===void 0||p.forEach(S=>{const x=o(S.w),T=n.edge(S).minlen,w=x-T;w&&(y===void 0||w<y)&&(y=w)}),y||(y=0),(u===void 0||y<u)&&(u=y),m.rank=y,y};(a=n.sources())===null||a===void 0||a.forEach(h=>{n.node(h)&&o(h)}),u===void 0&&(u=0);const l={},c=(h,p)=>{var m;const y=n.node(h),S=isNaN(y.layer)?p:y.layer;(y.rank===void 0||y.rank<S)&&(y.rank=S),!l[h]&&(l[h]=!0,(m=n.outEdges(h))===null||m===void 0||m.map(x=>{c(x.w,S+n.edge(x).minlen)}))};n.nodes().forEach(h=>{const p=n.node(h);p&&(isNaN(p.layer)?p.rank-=u:c(h,p.layer))})},Ss=(n,a)=>n.node(a.w).rank-n.node(a.v).rank-n.edge(a).minlen,YF=n=>{const a=new Aa({directed:!1}),i=n.nodes()[0],u=n.nodeCount();a.setNode(i,{});let o,l;for(;KF(a,n)<u;)o=DP(a,n),l=a.hasNode(o.v)?Ss(n,o):-Ss(n,o),CP(a,n,l);return a},KF=(n,a)=>{const i=u=>{a.nodeEdges(u).forEach(o=>{const l=o.v,c=u===l?o.w:l;!n.hasNode(c)&&!Ss(a,o)&&(n.setNode(c,{}),n.setEdge(u,c,{}),i(c))})};return n.nodes().forEach(i),n.nodeCount()},ZF=n=>{const a=new Aa({directed:!1}),i=n.nodes()[0],u=n.nodes().filter(c=>!!n.node(c)).length;a.setNode(i,{});let o,l;for(;JF(a,n)<u;)o=DP(a,n),l=a.hasNode(o.v)?Ss(n,o):-Ss(n,o),CP(a,n,l);return a},JF=(n,a)=>{const i=u=>{var o;(o=a.nodeEdges(u))===null||o===void 0||o.forEach(l=>{const c=l.v,h=u===c?l.w:c;!n.hasNode(h)&&(a.node(h).layer!==void 0||!Ss(a,l))&&(n.setNode(h,{}),n.setEdge(u,h,{}),i(h))})};return n.nodes().forEach(i),n.nodeCount()},DP=(n,a)=>Hb(a.edges(),i=>n.hasNode(i.v)!==n.hasNode(i.w)?Ss(a,i):1/0),CP=(n,a,i)=>{n.nodes().forEach(u=>{a.node(u).rank||(a.node(u).rank=0),a.node(u).rank+=i})},{preorder:QF,postorder:qF}=wF,e4=n=>{const a=GF(n);IP(a);const i=YF(a);jP(i),LP(i,a);let u,o;for(;u=n4(i);)o=o4(i,a,u),i4(i,a,u,o)},LP=(n,a)=>{let i=qF(n,n.nodes());i=i==null?void 0:i.slice(0,(i==null?void 0:i.length)-1),i==null||i.forEach(u=>{t4(n,a,u)})},t4=(n,a,i)=>{const o=n.node(i).parent;n.edgeFromArgs(i,o).cutvalue=r4(n,a,i)},r4=(n,a,i)=>{var u;const l=n.node(i).parent;let c=!0,h=a.edgeFromArgs(i,l),p=0;return h||(c=!1,h=a.edgeFromArgs(l,i)),p=h.weight,(u=a.nodeEdges(i))===null||u===void 0||u.forEach(m=>{const y=m.v===i,S=y?m.w:m.v;if(S!==l){const x=y===c,T=a.edge(m).weight;if(p+=x?T:-T,s4(n,i,S)){const w=n.edgeFromArgs(i,S).cutvalue;p+=x?-w:w}}}),p},jP=(n,a=n.nodes()[0])=>{BP(n,{},1,a)},BP=(n,a,i,u,o)=>{var l;const c=i;let h=i;const p=n.node(u);return a[u]=!0,(l=n.neighbors(u))===null||l===void 0||l.forEach(m=>{a[m]||(h=BP(n,a,h,m,u))}),p.low=c,p.lim=h++,o?p.parent=o:delete p.parent,h},n4=n=>n.edges().find(a=>n.edge(a).cutvalue<0),o4=(n,a,i)=>{let u=i.v,o=i.w;a.hasEdge(u,o)||(u=i.w,o=i.v);const l=n.node(u),c=n.node(o);let h=l,p=!1;l.lim>c.lim&&(h=c,p=!0);const m=a.edges().filter(y=>p===WT(n,n.node(y.v),h)&&p!==WT(n,n.node(y.w),h));return Hb(m,y=>Ss(a,y))},i4=(n,a,i,u)=>{const o=i.v,l=i.w;n.removeEdge(o,l),n.setEdge(u.v,u.w,{}),jP(n),LP(n,a),a4(n,a)},a4=(n,a)=>{const i=n.nodes().find(o=>{var l;return!(!((l=a.node(o))===null||l===void 0)&&l.parent)});let u=QF(n,i);u=u==null?void 0:u.slice(1),u==null||u.forEach(o=>{const l=n.node(o).parent;let c=a.edgeFromArgs(o,l),h=!1;c||(c=a.edgeFromArgs(l,o),h=!0),a.node(o).rank=a.node(l).rank+(h?c.minlen:-c.minlen)})},s4=(n,a,i)=>n.hasEdge(a,i),WT=(n,a,i)=>i.low<=a.lim&&a.lim<=i.lim,u4=n=>{switch(n.graph().ranker){case"network-simplex":f4(n);break;case"tight-tree":YT(n);break;case"longest-path":l4(n);break;default:YT(n)}},l4=IP,YT=n=>{WF(n),ZF(n)},f4=n=>{e4(n)},c4=n=>{var a;const i={};let u=0;const o=l=>{var c;const h=u;(c=n.children(l))===null||c===void 0||c.forEach(o),i[l]={low:h,lim:u++}};return(a=n.children())===null||a===void 0||a.forEach(o),i},d4=(n,a,i,u)=>{const o=[],l=[],c=Math.min(a[i].low,a[u].low),h=Math.max(a[i].lim,a[u].lim);let p,m;p=i;do p=n.parent(p),o.push(p);while(p&&(a[p].low>c||h>a[p].lim));for(m=p,p=u;p&&p!==m;)l.push(p),p=n.parent(p);return{lca:m,path:o.concat(l.reverse())}},h4=n=>{var a;const i=c4(n);(a=n.graph().dummyChains)===null||a===void 0||a.forEach(u=>{var o,l;let c=u,h=n.node(c);const p=h.edgeObj;if(!p)return;const m=d4(n,i,p.v,p.w),y=m.path,S=m.lca;let x=0,T=y[x],w=!0;for(;c!==p.w;){if(h=n.node(c),w){for(;T!==S&&((o=n.node(T))===null||o===void 0?void 0:o.maxRank)<h.rank;)x++,T=y[x];T===S&&(w=!1)}if(!w){for(;x<y.length-1&&((l=n.node(y[x+1]))===null||l===void 0?void 0:l.minRank)<=h.rank;)x++;T=y[x]}n.setParent(c,T),c=n.successors(c)[0]}})},p4=n=>{var a;const i=Xl(n,"root",{},"_root"),u=v4(n);let o=Math.max(...Object.values(u));Math.abs(o)===1/0&&(o=1);const l=o-1,c=2*l+1;n.graph().nestingRoot=i,n.edges().forEach(p=>{n.edge(p).minlen*=c});const h=y4(n)+1;(a=n.children())===null||a===void 0||a.forEach(p=>{FP(n,i,c,h,l,u,p)}),n.graph().nodeRankFactor=c},FP=(n,a,i,u,o,l,c)=>{const h=n.children(c);if(!(h!=null&&h.length)){c!==a&&n.setEdge(a,c,{weight:0,minlen:i});return}const p=$T(n,"_bt"),m=$T(n,"_bb"),y=n.node(c);n.setParent(p,c),y.borderTop=p,n.setParent(m,c),y.borderBottom=m,h==null||h.forEach(S=>{FP(n,a,i,u,o,l,S);const x=n.node(S),T=x.borderTop?x.borderTop:S,w=x.borderBottom?x.borderBottom:S,N=x.borderTop?u:2*u,M=T!==w?1:o-l[c]+1;n.setEdge(p,T,{minlen:M,weight:N,nestingEdge:!0}),n.setEdge(w,m,{minlen:M,weight:N,nestingEdge:!0})}),n.parent(c)||n.setEdge(a,p,{weight:0,minlen:o+l[c]})},v4=n=>{var a;const i={},u=(o,l)=>{const c=n.children(o);c==null||c.forEach(h=>u(h,l+1)),i[o]=l};return(a=n.children())===null||a===void 0||a.forEach(o=>u(o,1)),i},y4=n=>{let a=0;return n.edges().forEach(i=>{a+=n.edge(i).weight}),a},g4=n=>{const a=n.graph();a.nestingRoot&&n.removeNode(a.nestingRoot),delete a.nestingRoot,n.edges().forEach(i=>{n.edge(i).nestingEdge&&n.removeEdgeObj(i)})},KT={run:p4,cleanup:g4},m4=n=>{var a;const i=u=>{const o=n.children(u),l=n.node(u);if(o!=null&&o.length&&o.forEach(c=>i(c)),l.hasOwnProperty("minRank")){l.borderLeft=[],l.borderRight=[];for(let c=l.minRank,h=l.maxRank+1;c<h;c+=1)ZT(n,"borderLeft","_bl",u,l,c),ZT(n,"borderRight","_br",u,l,c)}};(a=n.children())===null||a===void 0||a.forEach(u=>i(u))},ZT=(n,a,i,u,o,l)=>{const c={rank:l,borderType:a,width:0,height:0},h=o[a][l-1],p=Xl(n,"border",c,i);o[a][l]=p,n.setParent(p,u),h&&n.setEdge(h,p,{weight:1})},b4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="lr"||i==="rl")&&GP(n)},E4=n=>{var a;const i=(a=n.graph().rankdir)===null||a===void 0?void 0:a.toLowerCase();(i==="bt"||i==="rl")&&O4(n),(i==="lr"||i==="rl")&&(S4(n),GP(n))},GP=n=>{n.nodes().forEach(a=>{JT(n.node(a))}),n.edges().forEach(a=>{JT(n.edge(a))})},JT=n=>{const a=n.width;n.width=n.height,n.height=a},O4=n=>{n.nodes().forEach(a=>{rb(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>rb(o)),u.hasOwnProperty("y")&&rb(u)})},rb=n=>{n!=null&&n.y&&(n.y=-n.y)},S4=n=>{n.nodes().forEach(a=>{nb(n.node(a))}),n.edges().forEach(a=>{var i;const u=n.edge(a);(i=u.points)===null||i===void 0||i.forEach(o=>nb(o)),u.hasOwnProperty("x")&&nb(u)})},nb=n=>{const a=n.x;n.x=n.y,n.y=a},QT={adjust:b4,undo:E4},qT=n=>{const a={},i=n.nodes().filter(y=>{var S;return!(!((S=n.children(y))===null||S===void 0)&&S.length)}),u=i.map(y=>n.node(y).rank),o=Math.max(...u),l=[];for(let y=0;y<o+1;y++)l.push([]);const c=y=>{var S;if(a.hasOwnProperty(y))return;a[y]=!0;const x=n.node(y);isNaN(x.rank)||l[x.rank].push(y),(S=n.successors(y))===null||S===void 0||S.forEach(T=>c(T))},h=i.sort((y,S)=>n.node(y).rank-n.node(S).rank),m=h.filter(y=>n.node(y).fixorder!==void 0).sort((y,S)=>n.node(y).fixorder-n.node(S).fixorder);return m==null||m.forEach(y=>{isNaN(n.node(y).rank)||l[n.node(y).rank].push(y),a[y]=!0}),h==null||h.forEach(c),l},x4=(n,a,i)=>{const u=kF(i,i.map((y,S)=>S)),l=a.map(y=>{var S;const x=(S=n.outEdges(y))===null||S===void 0?void 0:S.map(T=>({pos:u[T.w]||0,weight:n.edge(T).weight}));return x==null?void 0:x.sort((T,w)=>T.pos-w.pos)}).flat().filter(y=>y!==void 0);let c=1;for(;c<i.length;)c<<=1;const h=2*c-1;c-=1;const p=Array(h).fill(0,0,h);let m=0;return l==null||l.forEach(y=>{if(y){let S=y.pos+c;p[S]+=y.weight;let x=0;for(;S>0;)S%2&&(x+=p[S+1]),S=S-1>>1,p[S]+=y.weight;m+=y.weight*x}}),m},eA=(n,a)=>{let i=0;for(let u=1;u<(a==null?void 0:a.length);u+=1)i+=x4(n,a[u-1],a[u]);return i},T4=(n,a,i)=>{const u=A4(n),o=new Aa({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(l=>n.node(l));return n.nodes().forEach(l=>{var c;const h=n.node(l),p=n.parent(l);(h.rank===a||h.minRank<=a&&a<=h.maxRank)&&(o.setNode(l),o.setParent(l,p||u),(c=n[i](l))===null||c===void 0||c.forEach(m=>{const y=m.v===l?m.w:m.v,S=o.edgeFromArgs(y,l),x=S!==void 0?S.weight:0;o.setEdge(y,l,{weight:n.edge(m).weight+x})}),h.hasOwnProperty("minRank")&&o.setNode(l,{borderLeft:h.borderLeft[a],borderRight:h.borderRight[a]}))}),o},A4=n=>{let a;for(;n.hasNode(a=`_root${Math.random()}`););return a},P4=(n,a,i)=>{const u={};let o;i==null||i.forEach(l=>{let c=n.parent(l),h,p;for(;c;){if(h=n.parent(c),h?(p=u[h],u[h]=c):(p=o,o=c),p&&p!==c){a.setEdge(p,c);return}c=h}})},_4=(n,a)=>a.map(i=>{const u=n.inEdges(i);if(!(u!=null&&u.length))return{v:i};{const o={sum:0,weight:0};return u==null||u.forEach(l=>{const c=n.edge(l),h=n.node(l.v);o.sum+=c.weight*h.order,o.weight+=c.weight}),{v:i,barycenter:o.sum/o.weight,weight:o.weight}}}),w4=(n,a)=>{var i,u,o;const l={};n==null||n.forEach((h,p)=>{l[h.v]={i:p,indegree:0,in:[],out:[],vs:[h.v]};const m=l[h.v];h.barycenter!==void 0&&(m.barycenter=h.barycenter,m.weight=h.weight)}),(i=a.edges())===null||i===void 0||i.forEach(h=>{const p=l[h.v],m=l[h.w];p!==void 0&&m!==void 0&&(m.indegree++,p.out.push(l[h.w]))});const c=(o=(u=Object.values(l)).filter)===null||o===void 0?void 0:o.call(u,h=>!h.indegree);return N4(c)},N4=n=>{var a,i;const u=[],o=p=>m=>{m.merged||(m.barycenter===void 0||p.barycenter===void 0||m.barycenter>=p.barycenter)&&M4(p,m)},l=p=>m=>{m.in.push(p),--m.indegree===0&&n.push(m)};for(;n!=null&&n.length;){const p=n.pop();u.push(p),(a=p.in.reverse())===null||a===void 0||a.forEach(m=>o(p)(m)),(i=p.out)===null||i===void 0||i.forEach(m=>l(p)(m))}const c=u.filter(p=>!p.merged),h=["vs","i","barycenter","weight"];return c.map(p=>{const m={};return h==null||h.forEach(y=>{p[y]!==void 0&&(m[y]=p[y])}),m})},M4=(n,a)=>{var i;let u=0,o=0;n.weight&&(u+=n.barycenter*n.weight,o+=n.weight),a.weight&&(u+=a.barycenter*a.weight,o+=a.weight),n.vs=(i=a.vs)===null||i===void 0?void 0:i.concat(n.vs),n.barycenter=u/o,n.weight=o,n.i=Math.min(a.i,n.i),a.merged=!0},R4=(n,a,i,u)=>{const o=HF(n,x=>{const T=x.hasOwnProperty("fixorder")&&!isNaN(x.fixorder);return u?!T&&x.hasOwnProperty("barycenter"):T||x.hasOwnProperty("barycenter")}),l=o.lhs,c=o.rhs.sort((x,T)=>-x.i- -T.i),h=[];let p=0,m=0,y=0;l==null||l.sort(I4(!!a,!!i)),y=tA(h,c,y),l==null||l.forEach(x=>{var T;y+=(T=x.vs)===null||T===void 0?void 0:T.length,h.push(x.vs),p+=x.barycenter*x.weight,m+=x.weight,y=tA(h,c,y)});const S={vs:h.flat()};return m&&(S.barycenter=p/m,S.weight=m),S},tA=(n,a,i)=>{let u=i,o;for(;a.length&&(o=a[a.length-1]).i<=u;)a.pop(),n==null||n.push(o.vs),u++;return u},I4=(n,a)=>(i,u)=>{if(i.fixorder!==void 0&&u.fixorder!==void 0)return i.fixorder-u.fixorder;if(i.barycenter<u.barycenter)return-1;if(i.barycenter>u.barycenter)return 1;if(a&&i.order!==void 0&&u.order!==void 0){if(i.order<u.order)return-1;if(i.order>u.order)return 1}return n?u.i-i.i:i.i-u.i},kP=(n,a,i,u,o,l)=>{var c,h,p,m;let y=n.children(a);const S=n.node(a),x=S?S.borderLeft:void 0,T=S?S.borderRight:void 0,w={};x&&(y=y==null?void 0:y.filter(W=>W!==x&&W!==T));const N=_4(n,y||[]);N==null||N.forEach(W=>{var V;if(!((V=n.children(W.v))===null||V===void 0)&&V.length){const Ee=kP(n,W.v,i,u,l);w[W.v]=Ee,Ee.hasOwnProperty("barycenter")&&C4(W,Ee)}});const M=w4(N,i);D4(M,w),(c=M.filter(W=>W.vs.length>0))===null||c===void 0||c.forEach(W=>{const V=n.node(W.vs[0]);V&&(W.fixorder=V.fixorder,W.order=V.order)});const D=R4(M,u,o,l);if(x&&(D.vs=[x,D.vs,T].flat(),!((h=n.predecessors(x))===null||h===void 0)&&h.length)){const W=n.node(((p=n.predecessors(x))===null||p===void 0?void 0:p[0])||""),V=n.node(((m=n.predecessors(T))===null||m===void 0?void 0:m[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+W.order+V.order)/(D.weight+2),D.weight+=2}return D},D4=(n,a)=>{n==null||n.forEach(i=>{var u;const o=(u=i.vs)===null||u===void 0?void 0:u.map(l=>a[l]?a[l].vs:l);i.vs=o.flat()})},C4=(n,a)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+a.barycenter*a.weight)/(n.weight+a.weight),n.weight+=a.weight):(n.barycenter=a.barycenter,n.weight=a.weight)},L4=(n,a)=>{const i=NP(n),u=[],o=[];for(let y=1;y<i+1;y++)u.push(y);for(let y=i-1;y>-1;y--)o.push(y);const l=rA(n,u,"inEdges"),c=rA(n,o,"outEdges");let h=qT(n);ob(n,h);let p=Number.POSITIVE_INFINITY,m;for(let y=0,S=0;S<4;++y,++S){nA(y%2?l:c,y%4>=2,!1,a),h=jc(n);const x=eA(n,h);x<p&&(S=0,m=Mv(h),p=x)}h=qT(n),ob(n,h);for(let y=0,S=0;S<4;++y,++S){nA(y%2?l:c,y%4>=2,!0,a),h=jc(n);const x=eA(n,h);x<p&&(S=0,m=Mv(h),p=x)}ob(n,m)},rA=(n,a,i)=>a.map(u=>T4(n,u,i)),nA=(n,a,i,u)=>{const o=new Aa;n==null||n.forEach(l=>{var c;const h=l.graph().root,p=kP(l,h,o,a,i,u);for(let m=0;m<((c=p.vs)===null||c===void 0?void 0:c.length);m++){const y=l.node(p.vs[m]);y&&(y.order=m)}P4(l,o,p.vs)})},ob=(n,a)=>{a==null||a.forEach(i=>{i==null||i.forEach((u,o)=>{n.node(u).order=o})})};class j4 extends Hl{}const B4=(n,a)=>{const i={},u=(o,l)=>{let c=0,h=0;const p=o.length,m=l==null?void 0:l[(l==null?void 0:l.length)-1];return l==null||l.forEach((y,S)=>{var x;const T=G4(n,y),w=T?n.node(T).order:p;(T||y===m)&&((x=l.slice(h,S+1))===null||x===void 0||x.forEach(N=>{var M;(M=n.predecessors(N))===null||M===void 0||M.forEach(D=>{var W;const V=n.node(D),Ee=V.order;(Ee<c||w<Ee)&&!(V.dummy&&(!((W=n.node(N))===null||W===void 0)&&W.dummy))&&UP(i,D,N)})}),h=S+1,c=w)}),l};return a!=null&&a.length&&a.reduce(u),i},F4=(n,a)=>{const i={};function u(h,p,m,y,S){var x,T;let w;for(let N=p;N<m;N++)w=h[N],!((x=n.node(w))===null||x===void 0)&&x.dummy&&((T=n.predecessors(w))===null||T===void 0||T.forEach(M=>{const D=n.node(M);D.dummy&&(D.order<y||D.order>S)&&UP(i,M,w)}))}function o(h){return JSON.stringify(h.slice(1))}function l(h,p){const m=o(h);p.get(m)||(u(...h),p.set(m,!0))}const c=(h,p)=>{let m=-1,y,S=0;const x=new Map;return p==null||p.forEach((T,w)=>{var N;if(((N=n.node(T))===null||N===void 0?void 0:N.dummy)==="border"){const M=n.predecessors(T)||[];M.length&&(y=n.node(M[0]).order,l([p,S,w,m,y],x),S=w,m=y)}l([p,S,p.length,y,h.length],x)}),p};return a!=null&&a.length&&a.reduce(c),i},G4=(n,a)=>{var i,u;if(!((i=n.node(a))===null||i===void 0)&&i.dummy)return(u=n.predecessors(a))===null||u===void 0?void 0:u.find(o=>n.node(o).dummy)},UP=(n,a,i)=>{let u=a,o=i;if(u>o){const c=u;u=o,o=c}let l=n[u];l||(n[u]=l={}),l[o]=!0},k4=(n,a,i)=>{let u=a,o=i;if(u>o){const l=a;u=o,o=l}return!!n[u]},U4=(n,a,i,u)=>{const o={},l={},c={};return a==null||a.forEach(h=>{h==null||h.forEach((p,m)=>{o[p]=p,l[p]=p,c[p]=m})}),a==null||a.forEach(h=>{let p=-1;h==null||h.forEach(m=>{let y=u(m);if(y.length){y=y.sort((x,T)=>c[x]-c[T]);const S=(y.length-1)/2;for(let x=Math.floor(S),T=Math.ceil(S);x<=T;++x){const w=y[x];l[m]===m&&p<c[w]&&!k4(i,m,w)&&(l[w]=m,l[m]=o[m]=o[w],p=c[w])}}})}),{root:o,align:l}},z4=(n,a,i,u,o)=>{var l;const c={},h=H4(n,a,i,o),p=o?"borderLeft":"borderRight",m=(x,T)=>{let w=h.nodes(),N=w.pop();const M={};for(;N;)M[N]?x(N):(M[N]=!0,w.push(N),w=w.concat(T(N))),N=w.pop()},y=x=>{c[x]=(h.inEdges(x)||[]).reduce((T,w)=>Math.max(T,(c[w.v]||0)+h.edge(w)),0)},S=x=>{const T=(h.outEdges(x)||[]).reduce((N,M)=>Math.min(N,(c[M.w]||0)-h.edge(M)),Number.POSITIVE_INFINITY),w=n.node(x);T!==Number.POSITIVE_INFINITY&&w.borderType!==p&&(c[x]=Math.max(c[x],T))};return m(y,h.predecessors.bind(h)),m(S,h.successors.bind(h)),(l=Object.values(u))===null||l===void 0||l.forEach(x=>{c[x]=c[i[x]]}),c},H4=(n,a,i,u)=>{const o=new j4,l=n.graph(),c=W4(l.nodesep,l.edgesep,u);return a==null||a.forEach(h=>{let p;h==null||h.forEach(m=>{const y=i[m];if(o.setNode(y),p){const S=i[p],x=o.edgeFromArgs(S,y);o.setEdge(S,y,Math.max(c(n,m,p),x||0))}p=m})}),o},X4=(n,a)=>Hb(Object.values(a),i=>{var u;let o=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;return(u=Object.keys(i))===null||u===void 0||u.forEach(c=>{const h=i[c],p=Y4(n,c)/2;o=Math.max(h+p,o),l=Math.min(h-p,l)}),o-l});function $4(n,a){const i=Object.values(a),u=Math.min(...i),o=Math.max(...i);["u","d"].forEach(l=>{["l","r"].forEach(c=>{const h=l+c,p=n[h];let m;if(p===a)return;const y=Object.values(p);m=c==="l"?u-Math.min(...y):o-Math.max(...y),m&&(n[h]={},Object.keys(p).forEach(S=>{n[h][S]=p[S]+m}))})})}const V4=(n,a)=>{const i={};return Object.keys(n.ul).forEach(u=>{if(a)i[u]=n[a.toLowerCase()][u];else{const o=Object.values(n).map(l=>l[u]);i[u]=(o[0]+o[1])/2}}),i},W4=(n,a,i)=>(u,o,l)=>{const c=u.node(o),h=u.node(l);let p=0,m;if(p+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":m=-c.width/2;break;case"r":m=c.width/2;break}if(m&&(p+=i?m:-m),m=0,p+=(c.dummy?a:n)/2,p+=(h.dummy?a:n)/2,p+=h.width/2,h.labelpos)switch((h.labelpos||"").toLowerCase()){case"l":m=h.width/2;break;case"r":m=-h.width/2;break}return m&&(p+=i?m:-m),m=0,p},Y4=(n,a)=>n.node(a).width||0,K4=n=>{const a=jc(n),i=n.graph().ranksep;let u=0;a==null||a.forEach(o=>{const l=o.map(h=>n.node(h).height),c=Math.max(...l,0);o==null||o.forEach(h=>{n.node(h).y=u+c/2}),u+=c+i})},Z4=n=>{const a=jc(n),i=Object.assign(B4(n,a),F4(n,a)),u={};let o=[];["u","d"].forEach(c=>{o=c==="u"?a:Object.values(a).reverse(),["l","r"].forEach(h=>{h==="r"&&(o=o.map(S=>Object.values(S).reverse()));const p=(c==="u"?n.predecessors:n.successors).bind(n),m=U4(n,o,i,p),y=z4(n,o,m.root,m.align,h==="r");h==="r"&&Object.keys(y).forEach(S=>y[S]=-y[S]),u[c+h]=y})});const l=X4(n,u);return l&&$4(u,l),V4(u,n.graph().align)},J4=n=>{var a;const i=wP(n);K4(i);const u=Z4(i);(a=Object.keys(u))===null||a===void 0||a.forEach(o=>{i.node(o).x=u[o]})},Q4=(n,a)=>{const u=n.nodes().filter(c=>{var h;return!(!((h=n.children(c))===null||h===void 0)&&h.length)}).map(c=>n.node(c).rank),o=Math.max(...u),l=[];for(let c=0;c<o+1;c++)l[c]=[];a==null||a.forEach(c=>{const h=n.node(c);!h||h!=null&&h.dummy||isNaN(h.rank)||(h.fixorder=l[h.rank].length,l[h.rank].push(c))})},q4=(n,a)=>{const i=a&&a.debugTiming?MP:RP;i("layout",()=>{a&&!a.keepNodeOrder&&a.prevGraph&&i("  inheritOrder",()=>{tG(n,a.prevGraph)});const u=i("  buildLayoutGraph",()=>lG(n));a&&a.edgeLabelSpace===!1||i("  makeSpaceForEdgeLabels",()=>{fG(u)});try{i("  runLayout",()=>{eG(u,i,a)})}catch(o){if(o.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,o);return}throw o}i("  updateInputGraph",()=>{rG(n,u)})})},eG=(n,a,i)=>{a("    removeSelfEdges",()=>{bG(n)}),a("    acyclic",()=>{HT.run(n)}),a("    nestingGraph.run",()=>{KT.run(n)}),a("    rank",()=>{u4(wP(n))}),a("    injectEdgeLabelProxies",()=>{cG(n)}),a("    removeEmptyRanks",()=>{zF(n)}),a("    nestingGraph.cleanup",()=>{KT.cleanup(n)}),a("    normalizeRanks",()=>{UF(n)}),a("    assignRankMinMax",()=>{dG(n)}),a("    removeEdgeLabelProxies",()=>{hG(n)}),a("    normalize.run",()=>{VT.run(n)}),a("    parentDummyChains",()=>{h4(n)}),a("    addBorderSegments",()=>{m4(n)}),i&&i.keepNodeOrder&&a("    initDataOrder",()=>{Q4(n,i.nodeOrder)}),a("    order",()=>{L4(n,i==null?void 0:i.keepNodeOrder)}),a("    insertSelfEdges",()=>{EG(n)}),a("    adjustCoordinateSystem",()=>{QT.adjust(n)}),a("    position",()=>{J4(n)}),a("    positionSelfEdges",()=>{OG(n)}),a("    removeBorderNodes",()=>{mG(n)}),a("    normalize.undo",()=>{VT.undo(n)}),a("    fixupEdgeLabelCoords",()=>{yG(n)}),a("    undoCoordinateSystem",()=>{QT.undo(n)}),a("    translateGraph",()=>{pG(n)}),a("    assignNodeIntersects",()=>{vG(n)}),a("    reversePoints",()=>{gG(n)}),a("    acyclic.undo",()=>{HT.undo(n)})},tG=(n,a)=>{n.nodes().forEach(i=>{const u=n.node(i),o=a.node(i);o!==void 0?(u.fixorder=o._order,delete o._order):delete u.fixorder})},rG=(n,a)=>{n.nodes().forEach(i=>{var u;const o=n.node(i);if(o){const l=a.node(i);o.x=l.x,o.y=l.y,o._order=l.order,o._rank=l.rank,!((u=a.children(i))===null||u===void 0)&&u.length&&(o.width=l.width,o.height=l.height)}}),n.edges().forEach(i=>{const u=n.edge(i),o=a.edge(i);u.points=o?o.points:[],o&&o.hasOwnProperty("x")&&(u.x=o.x,u.y=o.y)}),n.graph().width=a.graph().width,n.graph().height=a.graph().height},nG=["nodesep","edgesep","ranksep","marginx","marginy"],oG={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ib=["acyclicer","ranker","rankdir","align"],iG=["width","height","layer","fixorder"],aG={width:0,height:0},sG=["minlen","weight","width","height","labeloffset"],uG={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ab=["labelpos"],lG=n=>{const a=new Aa({multigraph:!0,compound:!0}),i=ub(n.graph()),u={};return ib==null||ib.forEach(o=>{i[o]!==void 0&&(u[o]=i[o])}),a.setGraph(Object.assign({},oG,sb(i,nG),u)),n.nodes().forEach(o=>{const l=ub(n.node(o)),c=Object.assign(Object.assign({},aG),l),h=sb(c,iG);a.setNode(o,h),a.setParent(o,n.parent(o))}),n.edges().forEach(o=>{const l=ub(n.edge(o)),c={};ab==null||ab.forEach(h=>{l[h]!==void 0&&(c[h]=l[h])}),a.setEdgeObj(o,Object.assign({},uG,sb(l,sG),c))}),a},fG=n=>{const a=n.graph();a.ranksep||(a.ranksep=0),a.ranksep/=2,n.nodes().forEach(i=>{const u=n.node(i);isNaN(u.layer)||u.layer||(u.layer=0)}),n.edges().forEach(i=>{var u;const o=n.edge(i);o.minlen*=2,((u=o.labelpos)===null||u===void 0?void 0:u.toLowerCase())!=="c"&&(a.rankdir==="TB"||a.rankdir==="BT"?o.width+=o.labeloffset:o.height+=o.labeloffset)})},cG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i.width&&i.height){const u=n.node(a.v),o=n.node(a.w),l={e:a,rank:(o.rank-u.rank)/2+u.rank};Xl(n,"edge-proxy",l,"_ep")}})},dG=n=>{let a=0;n.nodes().forEach(i=>{var u,o;const l=n.node(i);l.borderTop&&(l.minRank=(u=n.node(l.borderTop))===null||u===void 0?void 0:u.rank,l.maxRank=(o=n.node(l.borderBottom))===null||o===void 0?void 0:o.rank,a=Math.max(a,l.maxRank||-1/0))}),n.graph().maxRank=a},hG=n=>{n.nodes().forEach(a=>{const i=n.node(a);i.dummy==="edge-proxy"&&(n.edge(i.e).labelRank=i.rank,n.removeNode(a))})},pG=n=>{let a,i=0,u,o=0;const l=n.graph(),c=l.marginx||0,h=l.marginy||0,p=m=>{if(!m)return;const y=m.x,S=m.y,x=m.width,T=m.height;!isNaN(y)&&!isNaN(x)&&(a===void 0&&(a=y-x/2),a=Math.min(a,y-x/2),i=Math.max(i,y+x/2)),!isNaN(S)&&!isNaN(T)&&(u===void 0&&(u=S-T/2),u=Math.min(u,S-T/2),o=Math.max(o,S+T/2))};n.nodes().forEach(m=>{p(n.node(m))}),n.edges().forEach(m=>{const y=n.edge(m);y!=null&&y.hasOwnProperty("x")&&p(y)}),a-=c,u-=h,n.nodes().forEach(m=>{const y=n.node(m);y&&(y.x-=a,y.y-=u)}),n.edges().forEach(m=>{var y;const S=n.edge(m);(y=S.points)===null||y===void 0||y.forEach(x=>{x.x-=a,x.y-=u}),S.hasOwnProperty("x")&&(S.x-=a),S.hasOwnProperty("y")&&(S.y-=u)}),l.width=i-a+c,l.height=o-u+h},vG=n=>{n.edges().forEach(a=>{const i=n.edge(a),u=n.node(a.v),o=n.node(a.w);let l,c;i.points?(l=i.points[0],c=i.points[i.points.length-1]):(i.points=[],l=o,c=u),i.points.unshift(XT(u,l)),i.points.push(XT(o,c))})},yG=n=>{n.edges().forEach(a=>{const i=n.edge(a);if(i!=null&&i.hasOwnProperty("x"))switch((i.labelpos==="l"||i.labelpos==="r")&&(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset;break}})},gG=n=>{n.edges().forEach(a=>{var i;const u=n.edge(a);u.reversed&&((i=u.points)===null||i===void 0||i.reverse())})},mG=n=>{n.nodes().forEach(a=>{var i,u,o;if(!((i=n.children(a))===null||i===void 0)&&i.length){const l=n.node(a),c=n.node(l.borderTop),h=n.node(l.borderBottom),p=n.node(l.borderLeft[((u=l.borderLeft)===null||u===void 0?void 0:u.length)-1]),m=n.node(l.borderRight[((o=l.borderRight)===null||o===void 0?void 0:o.length)-1]);l.width=Math.abs((m==null?void 0:m.x)-(p==null?void 0:p.x))||10,l.height=Math.abs((h==null?void 0:h.y)-(c==null?void 0:c.y))||10,l.x=((p==null?void 0:p.x)||0)+l.width/2,l.y=((c==null?void 0:c.y)||0)+l.height/2}}),n.nodes().forEach(a=>{var i;((i=n.node(a))===null||i===void 0?void 0:i.dummy)==="border"&&n.removeNode(a)})},bG=n=>{n.edges().forEach(a=>{if(a.v===a.w){const i=n.node(a.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:a,label:n.edge(a)}),n.removeEdgeObj(a)}})},EG=n=>{const a=jc(n);a==null||a.forEach(i=>{let u=0;i==null||i.forEach((o,l)=>{var c;const h=n.node(o);h.order=l+u,(c=h.selfEdges)===null||c===void 0||c.forEach(p=>{Xl(n,"selfedge",{width:p.label.width,height:p.label.height,rank:h.rank,order:l+ ++u,e:p.e,label:p.label},"_se")}),delete h.selfEdges})})},OG=n=>{n.nodes().forEach(a=>{const i=n.node(a);if(i.dummy==="selfedge"){const u=n.node(i.e.v),o=u.x+u.width/2,l=u.y,c=i.x-o,h=u.height/2;n.setEdgeObj(i.e,i.label),n.removeNode(a),i.label.points=[{x:o+2*c/3,y:l-h},{x:o+5*c/6,y:l-h},{y:l,x:o+c},{x:o+5*c/6,y:l+h},{x:o+2*c/3,y:l+h}],i.label.x=i.x,i.label.y=i.y}})},sb=(n,a)=>{const i={};return a==null||a.forEach(u=>{n[u]!==void 0&&(i[u]=+n[u])}),i},ub=(n={})=>{const a={};return Object.keys(n).forEach(i=>{a[i.toLowerCase()]=n[i]}),a},SG={layout:q4,util:{time:MP,notime:RP}};class xG extends H3{constructor(a){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=i=>{const u=this,{nodes:o}=u,l=o.find(c=>c.id===i);return l?l.layout!==!1:!0},this.updateCfg(a)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var a,i,u;const o=this,{nodes:l,nodeSize:c,rankdir:h,combos:p,begin:m,radial:y,comboEdges:S=[],vedges:x=[]}=o;if(!l)return;const T=o.edges||[],w=new Aa({multigraph:!0,compound:!0});o.nodeMap={};const N={};l.forEach(j=>{o.nodeMap[j.id]=j,j.comboId&&(N[j.comboId]=N[j.comboId]||[],N[j.comboId].push(j.id))});let M;c?MT(c)?M=()=>c:M=()=>[c,c]:M=j=>j.size?MT(j.size)?j.size:OP(j.size)?[j.size.width||40,j.size.height||40]:[j.size,j.size]:[40,40];const D=RT(o.ranksep,50,o.ranksepFunc),W=RT(o.nodesep,50,o.nodesepFunc);let V=W,Ee=D;(h==="LR"||h==="RL")&&(V=D,Ee=W),w.setDefaultEdgeLabel(()=>({})),w.setGraph(o);const ge={};this.sortByCombo&&p&&p.forEach(j=>{if(ge[j.id]=j,j.collapsed){const Q=M(j),U=Ee(j),I=V(j),k=Q[0]+2*I,te=Q[1]+2*U;w.setNode(j.id,{width:k,height:te})}j.parentId&&(ge[j.parentId]||w.setNode(j.parentId,{}),w.setParent(j.id,j.parentId))}),l.filter(j=>j.layout!==!1).forEach(j=>{const Q=M(j),U=Ee(j),I=V(j),k=Q[0]+2*I,te=Q[1]+2*U,$=j.layer;Nv($)?w.setNode(j.id,{width:k,height:te,layer:$}):w.setNode(j.id,{width:k,height:te}),this.sortByCombo&&j.comboId&&(ge[j.comboId]||(ge[j.comboId]={id:j.comboId},w.setNode(j.comboId,{})),w.setParent(j.id,j.comboId))}),T.forEach(j=>{const Q=wl(j,"source"),U=wl(j,"target");this.layoutNode(Q)&&this.layoutNode(U)&&w.setEdge(Q,U,{weight:j.weight||1})}),(a=S==null?void 0:S.concat(x||[]))===null||a===void 0||a.forEach(j=>{var Q,U;const{source:I,target:k}=j,te=!((Q=ge[I])===null||Q===void 0)&&Q.collapsed?[I]:N[I]||[I],$=!((U=ge[k])===null||U===void 0)&&U.collapsed?[k]:N[k]||[k];te.forEach(Z=>{$.forEach(le=>{w.setEdge(Z,le,{weight:j.weight||1})})})});let ye;!((i=o.preset)===null||i===void 0)&&i.nodes&&(ye=new Aa({multigraph:!0,compound:!0}),o.preset.nodes.forEach(j=>{ye==null||ye.setNode(j.id,j)})),SG.layout(w,{prevGraph:ye,edgeLabelSpace:o.edgeLabelSpace,keepNodeOrder:!!o.nodeOrder,nodeOrder:o.nodeOrder});const ce=[0,0];if(m){let j=1/0,Q=1/0;w.nodes().forEach(U=>{const I=w.node(U);j>I.x&&(j=I.x),Q>I.y&&(Q=I.y)}),w.edges().forEach(U=>{var I;(I=w.edge(U).points)===null||I===void 0||I.forEach(te=>{j>te.x&&(j=te.x),Q>te.y&&(Q=te.y)})}),ce[0]=m[0]-j,ce[1]=m[1]-Q}const xe=h==="LR"||h==="RL";if(y){const{focusNode:j,ranksep:Q,getRadialPos:U}=this,I=X3(j)?j:j==null?void 0:j.id,k=I?(u=w.node(I))===null||u===void 0?void 0:u._rank:0,te=[],$=xe?"y":"x",Z=xe?"height":"width";let le=1/0,Ae=-1/0;w.nodes().forEach(Ge=>{const bt=w.node(Ge),Ut=l.findIndex(Ue=>Ue.id===Ge);if(!l[Ut])return;const ee=W(l[Ut]);if(k===0)te[bt._rank]||(te[bt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),te[bt._rank].nodes.push(Ge),te[bt._rank].totalWidth+=ee*2+bt[Z],te[bt._rank].maxSize<Math.max(bt.width,bt.height)&&(te[bt._rank].maxSize=Math.max(bt.width,bt.height));else{const Ue=bt._rank-k;if(Ue===0)te[Ue]||(te[Ue]={nodes:[],totalWidth:0,maxSize:-1/0}),te[Ue].nodes.push(Ge),te[Ue].totalWidth+=ee*2+bt[Z],te[Ue].maxSize<Math.max(bt.width,bt.height)&&(te[Ue].maxSize=Math.max(bt.width,bt.height));else{const tt=Math.abs(Ue);te[tt]||(te[tt]={left:[],right:[],totalWidth:0,maxSize:-1/0}),te[tt].totalWidth+=ee*2+bt[Z],te[tt].maxSize<Math.max(bt.width,bt.height)&&(te[tt].maxSize=Math.max(bt.width,bt.height)),Ue<0?te[tt].left.push(Ge):te[tt].right.push(Ge)}}const se=bt[$]-bt[Z]/2-ee,me=bt[$]+bt[Z]/2+ee;se<le&&(le=se),me>Ae&&(Ae=me)});let Re=Q||50;const _e={},Ke=(Ae-le)/.9,gt=[(le+Ae-Ke)*.5,(le+Ae+Ke)*.5],Nt=(Ge,bt,Ut=-1/0,ee=[0,1])=>{let se=Ut;return Ge.forEach(me=>{const Ue=w.node(me);_e[me]=bt;const{x:tt,y:He}=U(Ue[$],gt,Ke,bt,ee),Lt=l.findIndex(tr=>tr.id===me);if(!l[Lt])return;l[Lt].x=tt+ce[0],l[Lt].y=He+ce[1],l[Lt]._order=Ue._order;const nr=D(l[Lt]);se<nr&&(se=nr)}),se};let Vt=!0;const Ct=0;te.forEach(Ge=>{var bt,Ut,ee,se,me,Ue,tt;if(!(!((bt=Ge==null?void 0:Ge.nodes)===null||bt===void 0)&&bt.length)&&!(!((Ut=Ge==null?void 0:Ge.left)===null||Ut===void 0)&&Ut.length)&&!(!((ee=Ge==null?void 0:Ge.right)===null||ee===void 0)&&ee.length))return;if(Vt&&Ge.nodes.length===1){const Lt=l.findIndex(nr=>nr.id===Ge.nodes[0]);if(Lt<=-1)return;l[Lt].x=ce[0],l[Lt].y=ce[1],_e[Ge.nodes[0]]=0,Re=D(l[Lt]),Vt=!1;return}Re=Math.max(Re,Ge.totalWidth/(2*Math.PI));let He=-1/0;if(k===0||!((se=Ge.nodes)===null||se===void 0)&&se.length)He=Nt(Ge.nodes,Re,He,[0,1]);else{const Lt=((me=Ge.left)===null||me===void 0?void 0:me.length)/(((Ue=Ge.left)===null||Ue===void 0?void 0:Ue.length)+((tt=Ge.right)===null||tt===void 0?void 0:tt.length));He=Nt(Ge.left,Re,He,[0,Lt]),He=Nt(Ge.right,Re,He,[Lt+.05,1])}Re+=He,Vt=!1,Ct-Ge.maxSize}),w.edges().forEach(Ge=>{var bt,Ut,ee;const se=w.edge(Ge),me=T.findIndex(Ue=>{const tt=wl(Ue,"source"),He=wl(Ue,"target");return tt===Ge.v&&He===Ge.w});if(!(me<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[me].type!=="loop"){const Ue=$==="x"?"y":"x",tt=(bt=se==null?void 0:se.points)===null||bt===void 0?void 0:bt.slice(1,se.points.length-1),He=[],Lt=(Ut=w.node(Ge.v))===null||Ut===void 0?void 0:Ut[Ue],nr=Lt-((ee=w.node(Ge.w))===null||ee===void 0?void 0:ee[Ue]),tr=_e[Ge.v],Jt=tr-_e[Ge.w];tt==null||tt.forEach(rt=>{const Er=(rt[Ue]-Lt)/nr*Jt+tr,ur=U(rt[$],gt,Ke,Er);He.push({x:ur.x+ce[0],y:ur.y+ce[1]})}),T[me].controlPoints=He}})}else{const j=new Set,U=h==="BT"||h==="RL"?($,Z)=>Z-$:($,Z)=>$-Z;w.nodes().forEach($=>{const Z=w.node($);if(!Z)return;let le=this.nodeMap[$];le||(le=p==null?void 0:p.find(Ae=>Ae.id===$)),le&&(le.x=Z.x+ce[0],le.y=Z.y+ce[1],le._order=Z._order,j.add(xe?le.x:le.y))});const I=Array.from(j).sort(U),k=xe?($,Z)=>$.x!==Z.x:($,Z)=>$.y!==Z.y,te=xe?($,Z,le)=>{const Ae=Math.max(Z.y,le.y),Re=Math.min(Z.y,le.y);return $.filter(_e=>_e.y<=Ae&&_e.y>=Re)}:($,Z,le)=>{const Ae=Math.max(Z.x,le.x),Re=Math.min(Z.x,le.x);return $.filter(_e=>_e.x<=Ae&&_e.x>=Re)};w.edges().forEach($=>{const Z=w.edge($),le=T.findIndex(Ae=>{const Re=wl(Ae,"source"),_e=wl(Ae,"target");return Re===$.v&&_e===$.w});if(!(le<=-1)&&o.edgeLabelSpace&&o.controlPoints&&T[le].type!=="loop"){const Ae=o.nodeMap[$.v],Re=o.nodeMap[$.w];T[le].controlPoints=TG(Z==null?void 0:Z.points,Ae,Re,I,xe,k,te),T[le].controlPoints.forEach(_e=>{_e.x+=ce[0],_e.y+=ce[1]})}})}return o.onLayoutEnd&&o.onLayoutEnd(),{nodes:l,edges:T}}getRadialPos(a,i,u,o,l=[0,1]){let c=(a-i[0])/u;c=c*(l[1]-l[0])+l[0];const h=c*2*Math.PI;return{x:Math.cos(h)*o,y:Math.sin(h)*o}}getType(){return"dagre"}}const TG=(n,a,i,u,o,l,c)=>{let h=(n==null?void 0:n.slice(1,n.length-1))||[];if(a&&i){let{x:p,y:m}=a,{x:y,y:S}=i;if(o&&(p=a.y,m=a.x,y=i.y,S=i.x),S!==m&&p!==y){const x=u.indexOf(m),T=u[x+1];if(T){const M=h[0],D=o?{x:(m+T)/2,y:(M==null?void 0:M.y)||y}:{x:(M==null?void 0:M.x)||y,y:(m+T)/2};(!M||l(M,D))&&h.unshift(D)}const w=u.indexOf(S),N=Math.abs(w-x);if(N===1)h=c(h,a,i),h.length||h.push(o?{x:(m+S)/2,y:p}:{x:p,y:(m+S)/2});else if(N>1){const M=u[w-1];if(M){const D=h[h.length-1],W=o?{x:(S+M)/2,y:(D==null?void 0:D.y)||y}:{x:(D==null?void 0:D.x)||p,y:(S+M)/2};(!D||l(D,W))&&h.push(W)}}}}return h};var oA,iA,aA,sA;(function(n){n[n.META=0]="META",n[n.NODE=1]="NODE",n[n.BRIDGE=2]="BRIDGE"})(oA||(oA={})),function(n){n[n.INCLUDE=0]="INCLUDE",n[n.EXCLUDE=1]="EXCLUDE",n[n.UNSPECIFIED=2]="UNSPECIFIED"}(iA||(iA={})),function(n){n[n.META=0]="META",n[n.CORE=1]="CORE",n[n.BRIDGE=2]="BRIDGE"}(aA||(aA={})),function(n){n[n.META=0]="META",n[n.OP=1]="OP",n[n.SERIES=2]="SERIES"}(sA||(sA={}));var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xb(n,a){return n(a={exports:{}},a.exports),a.exports}var AG=function(){this.__data__=[],this.size=0},$l=function(n,a){return n===a||n!=n&&a!=a},Uv=function(n,a){for(var i=n.length;i--;)if($l(n[i][0],a))return i;return-1},PG=Array.prototype.splice,_G=function(n){var a=this.__data__,i=Uv(a,n);return!(i<0)&&(i==a.length-1?a.pop():PG.call(a,i,1),--this.size,!0)},wG=function(n){var a=this.__data__,i=Uv(a,n);return i<0?void 0:a[i][1]},NG=function(n){return Uv(this.__data__,n)>-1},MG=function(n,a){var i=this.__data__,u=Uv(i,n);return u<0?(++this.size,i.push([n,a])):i[u][1]=a,this};function Nl(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Nl.prototype.clear=AG,Nl.prototype.delete=_G,Nl.prototype.get=wG,Nl.prototype.has=NG,Nl.prototype.set=MG;var zv=Nl,RG=function(){this.__data__=new zv,this.size=0},IG=function(n){var a=this.__data__,i=a.delete(n);return this.size=a.size,i},DG=function(n){return this.__data__.get(n)},CG=function(n){return this.__data__.has(n)},zP=typeof hv=="object"&&hv&&hv.Object===Object&&hv,LG=typeof self=="object"&&self&&self.Object===Object&&self,li=zP||LG||Function("return this")(),$o=li.Symbol,HP=Object.prototype,jG=HP.hasOwnProperty,BG=HP.toString,Oc=$o?$o.toStringTag:void 0,FG=function(n){var a=jG.call(n,Oc),i=n[Oc];try{n[Oc]=void 0;var u=!0}catch{}var o=BG.call(n);return u&&(a?n[Oc]=i:delete n[Oc]),o},GG=Object.prototype.toString,kG=function(n){return GG.call(n)},uA=$o?$o.toStringTag:void 0,xs=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":uA&&uA in Object(n)?FG(n):kG(n)},Oo=function(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")},lA,Uc=function(n){if(!Oo(n))return!1;var a=xs(n);return a=="[object Function]"||a=="[object GeneratorFunction]"||a=="[object AsyncFunction]"||a=="[object Proxy]"},lb=li["__core-js_shared__"],fA=(lA=/[^.]+$/.exec(lb&&lb.keys&&lb.keys.IE_PROTO||""))?"Symbol(src)_1."+lA:"",UG=function(n){return!!fA&&fA in n},zG=Function.prototype.toString,vu=function(n){if(n!=null){try{return zG.call(n)}catch{}try{return n+""}catch{}}return""},HG=/^\[object .+?Constructor\]$/,XG=Function.prototype,$G=Object.prototype,VG=XG.toString,WG=$G.hasOwnProperty,YG=RegExp("^"+VG.call(WG).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),KG=function(n){return!(!Oo(n)||UG(n))&&(Uc(n)?YG:HG).test(vu(n))},ZG=function(n,a){return n==null?void 0:n[a]},yu=function(n,a){var i=ZG(n,a);return KG(i)?i:void 0},Bc=yu(li,"Map"),Fc=yu(Object,"create"),JG=function(){this.__data__=Fc?Fc(null):{},this.size=0},QG=function(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a},qG=Object.prototype.hasOwnProperty,e5=function(n){var a=this.__data__;if(Fc){var i=a[n];return i==="__lodash_hash_undefined__"?void 0:i}return qG.call(a,n)?a[n]:void 0},t5=Object.prototype.hasOwnProperty,r5=function(n){var a=this.__data__;return Fc?a[n]!==void 0:t5.call(a,n)},n5=function(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=Fc&&a===void 0?"__lodash_hash_undefined__":a,this};function Ml(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Ml.prototype.clear=JG,Ml.prototype.delete=QG,Ml.prototype.get=e5,Ml.prototype.has=r5,Ml.prototype.set=n5;var cA=Ml,o5=function(){this.size=0,this.__data__={hash:new cA,map:new(Bc||zv),string:new cA}},i5=function(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null},Hv=function(n,a){var i=n.__data__;return i5(a)?i[typeof a=="string"?"string":"hash"]:i.map},a5=function(n){var a=Hv(this,n).delete(n);return this.size-=a?1:0,a},s5=function(n){return Hv(this,n).get(n)},u5=function(n){return Hv(this,n).has(n)},l5=function(n,a){var i=Hv(this,n),u=i.size;return i.set(n,a),this.size+=i.size==u?0:1,this};function Rl(n){var a=-1,i=n==null?0:n.length;for(this.clear();++a<i;){var u=n[a];this.set(u[0],u[1])}}Rl.prototype.clear=o5,Rl.prototype.delete=a5,Rl.prototype.get=s5,Rl.prototype.has=u5,Rl.prototype.set=l5;var Xv=Rl,f5=function(n,a){var i=this.__data__;if(i instanceof zv){var u=i.__data__;if(!Bc||u.length<199)return u.push([n,a]),this.size=++i.size,this;i=this.__data__=new Xv(u)}return i.set(n,a),this.size=i.size,this};function Il(n){var a=this.__data__=new zv(n);this.size=a.size}Il.prototype.clear=RG,Il.prototype.delete=IG,Il.prototype.get=DG,Il.prototype.has=CG,Il.prototype.set=f5;var Bl=Il,$b=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u&&a(n[i],i,n)!==!1;);return n},Rv=function(){try{var n=yu(Object,"defineProperty");return n({},"",{}),n}catch{}}(),$v=function(n,a,i){a=="__proto__"&&Rv?Rv(n,a,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[a]=i},c5=Object.prototype.hasOwnProperty,Vv=function(n,a,i){var u=n[a];c5.call(n,a)&&$l(u,i)&&(i!==void 0||a in n)||$v(n,a,i)},zc=function(n,a,i,u){var o=!i;i||(i={});for(var l=-1,c=a.length;++l<c;){var h=a[l],p=u?u(i[h],n[h],h,i,n):void 0;p===void 0&&(p=n[h]),o?$v(i,h,p):Vv(i,h,p)}return i},d5=function(n,a){for(var i=-1,u=Array(n);++i<n;)u[i]=a(i);return u},ui=function(n){return n!=null&&typeof n=="object"},dA=function(n){return ui(n)&&xs(n)=="[object Arguments]"},XP=Object.prototype,h5=XP.hasOwnProperty,p5=XP.propertyIsEnumerable,Ul=dA(function(){return arguments}())?dA:function(n){return ui(n)&&h5.call(n,"callee")&&!p5.call(n,"callee")},mn=Array.isArray,v5=function(){return!1},cu=Xb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?li.Buffer:void 0,l=(o?o.isBuffer:void 0)||v5;n.exports=l}),y5=/^(?:0|[1-9]\d*)$/,Wv=function(n,a){var i=typeof n;return!!(a=a??9007199254740991)&&(i=="number"||i!="symbol"&&y5.test(n))&&n>-1&&n%1==0&&n<a},Vb=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},sn={};sn["[object Float32Array]"]=sn["[object Float64Array]"]=sn["[object Int8Array]"]=sn["[object Int16Array]"]=sn["[object Int32Array]"]=sn["[object Uint8Array]"]=sn["[object Uint8ClampedArray]"]=sn["[object Uint16Array]"]=sn["[object Uint32Array]"]=!0,sn["[object Arguments]"]=sn["[object Array]"]=sn["[object ArrayBuffer]"]=sn["[object Boolean]"]=sn["[object DataView]"]=sn["[object Date]"]=sn["[object Error]"]=sn["[object Function]"]=sn["[object Map]"]=sn["[object Number]"]=sn["[object Object]"]=sn["[object RegExp]"]=sn["[object Set]"]=sn["[object String]"]=sn["[object WeakMap]"]=!1;var g5=function(n){return ui(n)&&Vb(n.length)&&!!sn[xs(n)]},Yv=function(n){return function(a){return n(a)}},zl=Xb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i&&zP.process,l=function(){try{var c=u&&u.require&&u.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();n.exports=l}),hA=zl&&zl.isTypedArray,Hc=hA?Yv(hA):g5,m5=Object.prototype.hasOwnProperty,$P=function(n,a){var i=mn(n),u=!i&&Ul(n),o=!i&&!u&&cu(n),l=!i&&!u&&!o&&Hc(n),c=i||u||o||l,h=c?d5(n.length,String):[],p=h.length;for(var m in n)!a&&!m5.call(n,m)||c&&(m=="length"||o&&(m=="offset"||m=="parent")||l&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Wv(m,p))||h.push(m);return h},b5=Object.prototype,Kv=function(n){var a=n&&n.constructor;return n===(typeof a=="function"&&a.prototype||b5)},VP=function(n,a){return function(i){return n(a(i))}},E5=VP(Object.keys,Object),O5=Object.prototype.hasOwnProperty,Wb=function(n){if(!Kv(n))return E5(n);var a=[];for(var i in Object(n))O5.call(n,i)&&i!="constructor"&&a.push(i);return a},Pa=function(n){return n!=null&&Vb(n.length)&&!Uc(n)},Ts=function(n){return Pa(n)?$P(n):Wb(n)},S5=function(n,a){return n&&zc(a,Ts(a),n)},x5=function(n){var a=[];if(n!=null)for(var i in Object(n))a.push(i);return a},T5=Object.prototype.hasOwnProperty,A5=function(n){if(!Oo(n))return x5(n);var a=Kv(n),i=[];for(var u in n)(u!="constructor"||!a&&T5.call(n,u))&&i.push(u);return i},gu=function(n){return Pa(n)?$P(n,!0):A5(n)},P5=function(n,a){return n&&zc(a,gu(a),n)},WP=Xb(function(n,a){var i=a&&!a.nodeType&&a,u=i&&n&&!n.nodeType&&n,o=u&&u.exports===i?li.Buffer:void 0,l=o?o.allocUnsafe:void 0;n.exports=function(c,h){if(h)return c.slice();var p=c.length,m=l?l(p):new c.constructor(p);return c.copy(m),m}}),YP=function(n,a){var i=-1,u=n.length;for(a||(a=Array(u));++i<u;)a[i]=n[i];return a},KP=function(n,a){for(var i=-1,u=n==null?0:n.length,o=0,l=[];++i<u;){var c=n[i];a(c,i,n)&&(l[o++]=c)}return l},ZP=function(){return[]},_5=Object.prototype.propertyIsEnumerable,pA=Object.getOwnPropertySymbols,Yb=pA?function(n){return n==null?[]:(n=Object(n),KP(pA(n),function(a){return _5.call(n,a)}))}:ZP,w5=function(n,a){return zc(n,Yb(n),a)},Kb=function(n,a){for(var i=-1,u=a.length,o=n.length;++i<u;)n[o+i]=a[i];return n},Zv=VP(Object.getPrototypeOf,Object),JP=Object.getOwnPropertySymbols?function(n){for(var a=[];n;)Kb(a,Yb(n)),n=Zv(n);return a}:ZP,N5=function(n,a){return zc(n,JP(n),a)},QP=function(n,a,i){var u=a(n);return mn(n)?u:Kb(u,i(n))},xb=function(n){return QP(n,Ts,Yb)},M5=function(n){return QP(n,gu,JP)},Tb=yu(li,"DataView"),Ab=yu(li,"Promise"),Fl=yu(li,"Set"),Pb=yu(li,"WeakMap"),R5=vu(Tb),I5=vu(Bc),D5=vu(Ab),C5=vu(Fl),L5=vu(Pb),uu=xs;(Tb&&uu(new Tb(new ArrayBuffer(1)))!="[object DataView]"||Bc&&uu(new Bc)!="[object Map]"||Ab&&uu(Ab.resolve())!="[object Promise]"||Fl&&uu(new Fl)!="[object Set]"||Pb&&uu(new Pb)!="[object WeakMap]")&&(uu=function(n){var a=xs(n),i=a=="[object Object]"?n.constructor:void 0,u=i?vu(i):"";if(u)switch(u){case R5:return"[object DataView]";case I5:return"[object Map]";case D5:return"[object Promise]";case C5:return"[object Set]";case L5:return"[object WeakMap]"}return a});var du=uu,j5=Object.prototype.hasOwnProperty,B5=function(n){var a=n.length,i=new n.constructor(a);return a&&typeof n[0]=="string"&&j5.call(n,"index")&&(i.index=n.index,i.input=n.input),i},Iv=li.Uint8Array,Zb=function(n){var a=new n.constructor(n.byteLength);return new Iv(a).set(new Iv(n)),a},F5=function(n,a){var i=a?Zb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)},G5=/\w*$/,k5=function(n){var a=new n.constructor(n.source,G5.exec(n));return a.lastIndex=n.lastIndex,a},vA=$o?$o.prototype:void 0,yA=vA?vA.valueOf:void 0,U5=function(n){return yA?Object(yA.call(n)):{}},qP=function(n,a){var i=a?Zb(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)},z5=function(n,a,i){var u=n.constructor;switch(a){case"[object ArrayBuffer]":return Zb(n);case"[object Boolean]":case"[object Date]":return new u(+n);case"[object DataView]":return F5(n,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qP(n,i);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(n);case"[object RegExp]":return k5(n);case"[object Set]":return new u;case"[object Symbol]":return U5(n)}},gA=Object.create,e_=function(){function n(){}return function(a){if(!Oo(a))return{};if(gA)return gA(a);n.prototype=a;var i=new n;return n.prototype=void 0,i}}(),t_=function(n){return typeof n.constructor!="function"||Kv(n)?{}:e_(Zv(n))},H5=function(n){return ui(n)&&du(n)=="[object Map]"},mA=zl&&zl.isMap,X5=mA?Yv(mA):H5,$5=function(n){return ui(n)&&du(n)=="[object Set]"},bA=zl&&zl.isSet,V5=bA?Yv(bA):$5,rn={};rn["[object Arguments]"]=rn["[object Array]"]=rn["[object ArrayBuffer]"]=rn["[object DataView]"]=rn["[object Boolean]"]=rn["[object Date]"]=rn["[object Float32Array]"]=rn["[object Float64Array]"]=rn["[object Int8Array]"]=rn["[object Int16Array]"]=rn["[object Int32Array]"]=rn["[object Map]"]=rn["[object Number]"]=rn["[object Object]"]=rn["[object RegExp]"]=rn["[object Set]"]=rn["[object String]"]=rn["[object Symbol]"]=rn["[object Uint8Array]"]=rn["[object Uint8ClampedArray]"]=rn["[object Uint16Array]"]=rn["[object Uint32Array]"]=!0,rn["[object Error]"]=rn["[object Function]"]=rn["[object WeakMap]"]=!1;var r_=function n(a,i,u,o,l,c){var h,p=1&i,m=2&i,y=4&i;if(u&&(h=l?u(a,o,l,c):u(a)),h!==void 0)return h;if(!Oo(a))return a;var S=mn(a);if(S){if(h=B5(a),!p)return YP(a,h)}else{var x=du(a),T=x=="[object Function]"||x=="[object GeneratorFunction]";if(cu(a))return WP(a,p);if(x=="[object Object]"||x=="[object Arguments]"||T&&!l){if(h=m||T?{}:t_(a),!p)return m?N5(a,P5(h,a)):w5(a,S5(h,a))}else{if(!rn[x])return l?a:{};h=z5(a,x,p)}}c||(c=new Bl);var w=c.get(a);if(w)return w;c.set(a,h),V5(a)?a.forEach(function(M){h.add(n(M,i,u,M,a,c))}):X5(a)&&a.forEach(function(M,D){h.set(D,n(M,i,u,D,a,c))});var N=S?void 0:(y?m?M5:xb:m?gu:Ts)(a);return $b(N||a,function(M,D){N&&(M=a[D=M]),Vv(h,D,n(M,i,u,D,a,c))}),h},W5=function(n){return r_(n,4)},Jb=function(n){return function(){return n}},Qb=function(n){return function(a,i,u){for(var o=-1,l=Object(a),c=u(a),h=c.length;h--;){var p=c[n?h:++o];if(i(l[p],p,l)===!1)break}return a}}(),qb=function(n,a){return n&&Qb(n,a,Ts)},Jv=function(n,a){return function(i,u){if(i==null)return i;if(!Pa(i))return n(i,u);for(var o=i.length,l=a?o:-1,c=Object(i);(a?l--:++l<o)&&u(c[l],l,c)!==!1;);return i}}(qb),mu=function(n){return n},n_=function(n){return typeof n=="function"?n:mu},o_=function(n,a){return(mn(n)?$b:Jv)(n,n_(a))},i_=o_,Y5=function(n,a){var i=[];return Jv(n,function(u,o,l){a(u,o,l)&&i.push(u)}),i},K5=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Z5=function(n){return this.__data__.has(n)};function Ov(n){var a=-1,i=n==null?0:n.length;for(this.__data__=new Xv;++a<i;)this.add(n[a])}Ov.prototype.add=Ov.prototype.push=K5,Ov.prototype.has=Z5;var a_=Ov,J5=function(n,a){for(var i=-1,u=n==null?0:n.length;++i<u;)if(a(n[i],i,n))return!0;return!1},s_=function(n,a){return n.has(a)},u_=function(n,a,i,u,o,l){var c=1&i,h=n.length,p=a.length;if(h!=p&&!(c&&p>h))return!1;var m=l.get(n),y=l.get(a);if(m&&y)return m==a&&y==n;var S=-1,x=!0,T=2&i?new a_:void 0;for(l.set(n,a),l.set(a,n);++S<h;){var w=n[S],N=a[S];if(u)var M=c?u(N,w,S,a,n,l):u(w,N,S,n,a,l);if(M!==void 0){if(M)continue;x=!1;break}if(T){if(!J5(a,function(D,W){if(!s_(T,W)&&(w===D||o(w,D,i,u,l)))return T.push(W)})){x=!1;break}}else if(w!==N&&!o(w,N,i,u,l)){x=!1;break}}return l.delete(n),l.delete(a),x},Q5=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u,o){i[++a]=[o,u]}),i},eE=function(n){var a=-1,i=Array(n.size);return n.forEach(function(u){i[++a]=u}),i},EA=$o?$o.prototype:void 0,fb=EA?EA.valueOf:void 0,q5=function(n,a,i,u,o,l,c){switch(i){case"[object DataView]":if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=a.byteLength||!l(new Iv(n),new Iv(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return $l(+n,+a);case"[object Error]":return n.name==a.name&&n.message==a.message;case"[object RegExp]":case"[object String]":return n==a+"";case"[object Map]":var h=Q5;case"[object Set]":var p=1&u;if(h||(h=eE),n.size!=a.size&&!p)return!1;var m=c.get(n);if(m)return m==a;u|=2,c.set(n,a);var y=u_(h(n),h(a),u,o,l,c);return c.delete(n),y;case"[object Symbol]":if(fb)return fb.call(n)==fb.call(a)}return!1},e8=Object.prototype.hasOwnProperty,t8=function(n,a,i,u,o,l){var c=1&i,h=xb(n),p=h.length;if(p!=xb(a).length&&!c)return!1;for(var m=p;m--;){var y=h[m];if(!(c?y in a:e8.call(a,y)))return!1}var S=l.get(n),x=l.get(a);if(S&&x)return S==a&&x==n;var T=!0;l.set(n,a),l.set(a,n);for(var w=c;++m<p;){var N=n[y=h[m]],M=a[y];if(u)var D=c?u(M,N,y,a,n,l):u(N,M,y,n,a,l);if(!(D===void 0?N===M||o(N,M,i,u,l):D)){T=!1;break}w||(w=y=="constructor")}if(T&&!w){var W=n.constructor,V=a.constructor;W==V||!("constructor"in n)||!("constructor"in a)||typeof W=="function"&&W instanceof W&&typeof V=="function"&&V instanceof V||(T=!1)}return l.delete(n),l.delete(a),T},OA=Object.prototype.hasOwnProperty,r8=function(n,a,i,u,o,l){var c=mn(n),h=mn(a),p=c?"[object Array]":du(n),m=h?"[object Array]":du(a),y=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]",S=(m=m=="[object Arguments]"?"[object Object]":m)=="[object Object]",x=p==m;if(x&&cu(n)){if(!cu(a))return!1;c=!0,y=!1}if(x&&!y)return l||(l=new Bl),c||Hc(n)?u_(n,a,i,u,o,l):q5(n,a,p,i,u,o,l);if(!(1&i)){var T=y&&OA.call(n,"__wrapped__"),w=S&&OA.call(a,"__wrapped__");if(T||w){var N=T?n.value():n,M=w?a.value():a;return l||(l=new Bl),o(N,M,i,u,l)}}return!!x&&(l||(l=new Bl),t8(n,a,i,u,o,l))},l_=function n(a,i,u,o,l){return a===i||(a==null||i==null||!ui(a)&&!ui(i)?a!=a&&i!=i:r8(a,i,u,o,n,l))},n8=function(n,a,i,u){var o=i.length,l=o,c=!u;if(n==null)return!l;for(n=Object(n);o--;){var h=i[o];if(c&&h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++o<l;){var p=(h=i[o])[0],m=n[p],y=h[1];if(c&&h[2]){if(m===void 0&&!(p in n))return!1}else{var S=new Bl;if(u)var x=u(m,y,p,n,a,S);if(!(x===void 0?l_(y,m,3,u,S):x))return!1}}return!0},f_=function(n){return n==n&&!Oo(n)},o8=function(n){for(var a=Ts(n),i=a.length;i--;){var u=a[i],o=n[u];a[i]=[u,o,f_(o)]}return a},c_=function(n,a){return function(i){return i!=null&&i[n]===a&&(a!==void 0||n in Object(i))}},i8=function(n){var a=o8(n);return a.length==1&&a[0][2]?c_(a[0][0],a[0][1]):function(i){return i===n||n8(i,n,a)}},hu=function(n){return typeof n=="symbol"||ui(n)&&xs(n)=="[object Symbol]"},a8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s8=/^\w*$/,tE=function(n,a){if(mn(n))return!1;var i=typeof n;return!(i!="number"&&i!="symbol"&&i!="boolean"&&n!=null&&!hu(n))||s8.test(n)||!a8.test(n)||a!=null&&n in Object(a)};function rE(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError("Expected a function");var i=function(){var u=arguments,o=a?a.apply(this,u):u[0],l=i.cache;if(l.has(o))return l.get(o);var c=n.apply(this,u);return i.cache=l.set(o,c)||l,c};return i.cache=new(rE.Cache||Xv),i}rE.Cache=Xv;var u8=rE,l8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,f8=/\\(\\)?/g,c8=function(n){var a=u8(n,function(u){return i.size===500&&i.clear(),u}),i=a.cache;return a}(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(l8,function(i,u,o,l){a.push(o?l.replace(f8,"$1"):u||i)}),a}),Gl=function(n,a){for(var i=-1,u=n==null?0:n.length,o=Array(u);++i<u;)o[i]=a(n[i],i,n);return o},SA=$o?$o.prototype:void 0,xA=SA?SA.toString:void 0,d8=function n(a){if(typeof a=="string")return a;if(mn(a))return Gl(a,n)+"";if(hu(a))return xA?xA.call(a):"";var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},d_=function(n){return n==null?"":d8(n)},Qv=function(n,a){return mn(n)?n:tE(n,a)?[n]:c8(d_(n))},Xc=function(n){if(typeof n=="string"||hu(n))return n;var a=n+"";return a=="0"&&1/n==-1/0?"-0":a},qv=function(n,a){for(var i=0,u=(a=Qv(a,n)).length;n!=null&&i<u;)n=n[Xc(a[i++])];return i&&i==u?n:void 0},h8=function(n,a,i){var u=n==null?void 0:qv(n,a);return u===void 0?i:u},p8=function(n,a){return n!=null&&a in Object(n)},h_=function(n,a,i){for(var u=-1,o=(a=Qv(a,n)).length,l=!1;++u<o;){var c=Xc(a[u]);if(!(l=n!=null&&i(n,c)))break;n=n[c]}return l||++u!=o?l:!!(o=n==null?0:n.length)&&Vb(o)&&Wv(c,o)&&(mn(n)||Ul(n))},p_=function(n,a){return n!=null&&h_(n,a,p8)},v8=function(n,a){return tE(n)&&f_(a)?c_(Xc(n),a):function(i){var u=h8(i,n);return u===void 0&&u===a?p_(i,n):l_(a,u,3)}},v_=function(n){return function(a){return a==null?void 0:a[n]}},y8=function(n){return function(a){return qv(a,n)}},g8=function(n){return tE(n)?v_(Xc(n)):y8(n)},_a=function(n){return typeof n=="function"?n:n==null?mu:typeof n=="object"?mn(n)?v8(n[0],n[1]):i8(n):g8(n)},y_=function(n,a){return(mn(n)?KP:Y5)(n,_a(a))},m8=Object.prototype.hasOwnProperty,b8=function(n,a){return n!=null&&m8.call(n,a)},g_=function(n,a){return n!=null&&h_(n,a,b8)},E8=Object.prototype.hasOwnProperty,O8=function(n){if(n==null)return!0;if(Pa(n)&&(mn(n)||typeof n=="string"||typeof n.splice=="function"||cu(n)||Hc(n)||Ul(n)))return!n.length;var a=du(n);if(a=="[object Map]"||a=="[object Set]")return!n.size;if(Kv(n))return!Wb(n).length;for(var i in n)if(E8.call(n,i))return!1;return!0},m_=function(n){return n===void 0},b_=function(n,a){var i=-1,u=Pa(n)?Array(n.length):[];return Jv(n,function(o,l,c){u[++i]=a(o,l,c)}),u},E_=function(n,a){return(mn(n)?Gl:b_)(n,_a(a))},S8=function(n,a,i,u){var o=-1,l=n==null?0:n.length;for(u&&l&&(i=n[++o]);++o<l;)i=a(i,n[o],o,n);return i},x8=function(n,a,i,u,o){return o(n,function(l,c,h){i=u?(u=!1,l):a(i,l,c,h)}),i},O_=function(n,a,i){var u=mn(n)?S8:x8,o=arguments.length<3;return u(n,_a(a),i,o,Jv)},T8=function(n){return typeof n=="string"||!mn(n)&&ui(n)&&xs(n)=="[object String]"},A8=v_("length"),P8=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),_8=function(n){return P8.test(n)},w8="[\\ud800-\\udfff]",_b="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",wb="\\ud83c[\\udffb-\\udfff]",S_="[^\\ud800-\\udfff]",x_="(?:\\ud83c[\\udde6-\\uddff]){2}",T_="[\\ud800-\\udbff][\\udc00-\\udfff]",TA="(?:"+_b+"|"+wb+")?",N8="[\\ufe0e\\ufe0f]?"+TA+("(?:\\u200d(?:"+[S_,x_,T_].join("|")+")[\\ufe0e\\ufe0f]?"+TA+")*"),M8="(?:"+[S_+_b+"?",_b,x_,T_,w8].join("|")+")",AA=RegExp(wb+"(?="+wb+")|"+M8+N8,"g"),R8=function(n){for(var a=AA.lastIndex=0;AA.test(n);)++a;return a},I8=function(n){return _8(n)?R8(n):A8(n)},D8=function(n){if(n==null)return 0;if(Pa(n))return T8(n)?I8(n):n.length;var a=du(n);return a=="[object Map]"||a=="[object Set]"?n.size:Wb(n).length},C8=function(n,a,i){var u=mn(n),o=u||cu(n)||Hc(n);if(a=_a(a),i==null){var l=n&&n.constructor;i=o?u?new l:[]:Oo(n)&&Uc(l)?e_(Zv(n)):{}}return(o?$b:qb)(n,function(c,h,p){return a(i,c,h,p)}),i},PA=$o?$o.isConcatSpreadable:void 0,L8=function(n){return mn(n)||Ul(n)||!!(PA&&n&&n[PA])},nE=function n(a,i,u,o,l){var c=-1,h=a.length;for(u||(u=L8),l||(l=[]);++c<h;){var p=a[c];i>0&&u(p)?i>1?n(p,i-1,u,o,l):Kb(l,p):o||(l[l.length]=p)}return l},j8=function(n,a,i){switch(i.length){case 0:return n.call(a);case 1:return n.call(a,i[0]);case 2:return n.call(a,i[0],i[1]);case 3:return n.call(a,i[0],i[1],i[2])}return n.apply(a,i)},_A=Math.max,A_=function(n,a,i){return a=_A(a===void 0?n.length-1:a,0),function(){for(var u=arguments,o=-1,l=_A(u.length-a,0),c=Array(l);++o<l;)c[o]=u[a+o];o=-1;for(var h=Array(a+1);++o<a;)h[o]=u[o];return h[a]=i(c),j8(n,this,h)}},B8=Rv?function(n,a){return Rv(n,"toString",{configurable:!0,enumerable:!1,value:Jb(a),writable:!0})}:mu,F8=Date.now,P_=function(n){var a=0,i=0;return function(){var u=F8(),o=16-(u-i);if(i=u,o>0){if(++a>=800)return arguments[0]}else a=0;return n.apply(void 0,arguments)}}(B8),ey=function(n,a){return P_(A_(n,a,mu),n+"")},__=function(n,a,i,u){for(var o=n.length,l=i+(u?1:-1);u?l--:++l<o;)if(a(n[l],l,n))return l;return-1},G8=function(n){return n!=n},k8=function(n,a,i){for(var u=i-1,o=n.length;++u<o;)if(n[u]===a)return u;return-1},U8=function(n,a,i){return a==a?k8(n,a,i):__(n,G8,i)},z8=function(n,a){return!!(n!=null&&n.length)&&U8(n,a,0)>-1},H8=function(n,a,i){for(var u=-1,o=n==null?0:n.length;++u<o;)if(i(a,n[u]))return!0;return!1},X8=function(){},$8=Fl&&1/eE(new Fl([,-0]))[1]==1/0?function(n){return new Fl(n)}:X8,V8=function(n,a,i){var u=-1,o=z8,l=n.length,c=!0,h=[],p=h;if(i)c=!1,o=H8;else if(l>=200){var m=a?null:$8(n);if(m)return eE(m);c=!1,o=s_,p=new a_}else p=a?[]:h;e:for(;++u<l;){var y=n[u],S=a?a(y):y;if(y=i||y!==0?y:0,c&&S==S){for(var x=p.length;x--;)if(p[x]===S)continue e;a&&p.push(S),h.push(y)}else o(p,S,i)||(p!==h&&p.push(S),h.push(y))}return h},w_=function(n){return ui(n)&&Pa(n)},W8=ey(function(n){return V8(nE(n,1,w_,!0))}),Y8=function(n,a){return Gl(a,function(i){return n[i]})},Dv,N_=function(n){return n==null?[]:Y8(n,Ts(n))};try{Dv={clone:W5,constant:Jb,each:i_,filter:y_,has:g_,isArray:mn,isEmpty:O8,isFunction:Uc,isUndefined:m_,keys:Ts,map:E_,reduce:O_,size:D8,transform:C8,union:W8,values:N_}}catch{}Dv||(Dv=window._);var zt=Dv,oE=Lr;function Lr(n){this._isDirected=!zt.has(n,"directed")||n.directed,this._isMultigraph=!!zt.has(n,"multigraph")&&n.multigraph,this._isCompound=!!zt.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=zt.constant(void 0),this._defaultEdgeLabelFn=zt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function wA(n,a){n[a]?n[a]++:n[a]=1}function NA(n,a){--n[a]||delete n[a]}function Pc(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}return o+""+l+""+(zt.isUndefined(u)?"\0":u)}function K8(n,a,i,u){var o=""+a,l=""+i;if(!n&&o>l){var c=o;o=l,l=c}var h={v:o,w:l};return u&&(h.name=u),h}function cb(n,a){return Pc(n,a.v,a.w,a.name)}Lr.prototype._nodeCount=0,Lr.prototype._edgeCount=0,Lr.prototype.isDirected=function(){return this._isDirected},Lr.prototype.isMultigraph=function(){return this._isMultigraph},Lr.prototype.isCompound=function(){return this._isCompound},Lr.prototype.setGraph=function(n){return this._label=n,this},Lr.prototype.graph=function(){return this._label},Lr.prototype.setDefaultNodeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultNodeLabelFn=n,this},Lr.prototype.nodeCount=function(){return this._nodeCount},Lr.prototype.nodes=function(){return zt.keys(this._nodes)},Lr.prototype.sources=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._in[a])})},Lr.prototype.sinks=function(){var n=this;return zt.filter(this.nodes(),function(a){return zt.isEmpty(n._out[a])})},Lr.prototype.setNodes=function(n,a){var i=arguments,u=this;return zt.each(n,function(o){i.length>1?u.setNode(o,a):u.setNode(o)}),this},Lr.prototype.setNode=function(n,a){return zt.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=a),this):(this._nodes[n]=arguments.length>1?a:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},Lr.prototype.node=function(n){return this._nodes[n]},Lr.prototype.hasNode=function(n){return zt.has(this._nodes,n)},Lr.prototype.removeNode=function(n){var a=this;if(zt.has(this._nodes,n)){var i=function(u){a.removeEdge(a._edgeObjs[u])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],zt.each(this.children(n),function(u){a.setParent(u)}),delete this._children[n]),zt.each(zt.keys(this._in[n]),i),delete this._in[n],delete this._preds[n],zt.each(zt.keys(this._out[n]),i),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},Lr.prototype.setParent=function(n,a){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(zt.isUndefined(a))a="\0";else{for(var i=a+="";!zt.isUndefined(i);i=this.parent(i))if(i===n)throw new Error("Setting "+a+" as parent of "+n+" would create a cycle");this.setNode(a)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=a,this._children[a][n]=!0,this},Lr.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},Lr.prototype.parent=function(n){if(this._isCompound){var a=this._parent[n];if(a!=="\0")return a}},Lr.prototype.children=function(n){if(zt.isUndefined(n)&&(n="\0"),this._isCompound){var a=this._children[n];if(a)return zt.keys(a)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},Lr.prototype.predecessors=function(n){var a=this._preds[n];if(a)return zt.keys(a)},Lr.prototype.successors=function(n){var a=this._sucs[n];if(a)return zt.keys(a)},Lr.prototype.neighbors=function(n){var a=this.predecessors(n);if(a)return zt.union(a,this.successors(n))},Lr.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},Lr.prototype.filterNodes=function(n){var a=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});a.setGraph(this.graph());var i=this;zt.each(this._nodes,function(l,c){n(c)&&a.setNode(c,l)}),zt.each(this._edgeObjs,function(l){a.hasNode(l.v)&&a.hasNode(l.w)&&a.setEdge(l,i.edge(l))});var u={};function o(l){var c=i.parent(l);return c===void 0||a.hasNode(c)?(u[l]=c,c):c in u?u[c]:o(c)}return this._isCompound&&zt.each(a.nodes(),function(l){a.setParent(l,o(l))}),a},Lr.prototype.setDefaultEdgeLabel=function(n){return zt.isFunction(n)||(n=zt.constant(n)),this._defaultEdgeLabelFn=n,this},Lr.prototype.edgeCount=function(){return this._edgeCount},Lr.prototype.edges=function(){return zt.values(this._edgeObjs)},Lr.prototype.setPath=function(n,a){var i=this,u=arguments;return zt.reduce(n,function(o,l){return u.length>1?i.setEdge(o,l,a):i.setEdge(o,l),l}),this},Lr.prototype.setEdge=function(){var n,a,i,u,o=!1,l=arguments[0];typeof l=="object"&&l!==null&&"v"in l?(n=l.v,a=l.w,i=l.name,arguments.length===2&&(u=arguments[1],o=!0)):(n=l,a=arguments[1],i=arguments[3],arguments.length>2&&(u=arguments[2],o=!0)),n=""+n,a=""+a,zt.isUndefined(i)||(i=""+i);var c=Pc(this._isDirected,n,a,i);if(zt.has(this._edgeLabels,c))return o&&(this._edgeLabels[c]=u),this;if(!zt.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(a),this._edgeLabels[c]=o?u:this._defaultEdgeLabelFn(n,a,i);var h=K8(this._isDirected,n,a,i);return n=h.v,a=h.w,Object.freeze(h),this._edgeObjs[c]=h,wA(this._preds[a],n),wA(this._sucs[n],a),this._in[a][c]=h,this._out[n][c]=h,this._edgeCount++,this},Lr.prototype.edge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Pc(this._isDirected,n,a,i);return this._edgeLabels[u]},Lr.prototype.hasEdge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Pc(this._isDirected,n,a,i);return zt.has(this._edgeLabels,u)},Lr.prototype.removeEdge=function(n,a,i){var u=arguments.length===1?cb(this._isDirected,arguments[0]):Pc(this._isDirected,n,a,i),o=this._edgeObjs[u];return o&&(n=o.v,a=o.w,delete this._edgeLabels[u],delete this._edgeObjs[u],NA(this._preds[a],n),NA(this._sucs[n],a),delete this._in[a][u],delete this._out[n][u],this._edgeCount--),this},Lr.prototype.inEdges=function(n,a){var i=this._in[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.v===a}):u}},Lr.prototype.outEdges=function(n,a){var i=this._out[n];if(i){var u=zt.values(i);return a?zt.filter(u,function(o){return o.w===a}):u}},Lr.prototype.nodeEdges=function(n,a){var i=this.inEdges(n,a);if(i)return i.concat(this.outEdges(n,a))};var MA={Graph:oE,version:"2.1.8"},Z8={write:function(n){var a={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:J8(n),edges:Q8(n)};return zt.isUndefined(n.graph())||(a.value=zt.clone(n.graph())),a},read:function(n){var a=new oE(n.options).setGraph(n.value);return zt.each(n.nodes,function(i){a.setNode(i.v,i.value),i.parent&&a.setParent(i.v,i.parent)}),zt.each(n.edges,function(i){a.setEdge({v:i.v,w:i.w,name:i.name},i.value)}),a}};function J8(n){return zt.map(n.nodes(),function(a){var i=n.node(a),u=n.parent(a),o={v:a};return zt.isUndefined(i)||(o.value=i),zt.isUndefined(u)||(o.parent=u),o})}function Q8(n){return zt.map(n.edges(),function(a){var i=n.edge(a),u={v:a.v,w:a.w};return zt.isUndefined(a.name)||(u.name=a.name),zt.isUndefined(i)||(u.value=i),u})}var q8=function(n){var a,i={},u=[];function o(l){zt.has(i,l)||(i[l]=!0,a.push(l),zt.each(n.successors(l),o),zt.each(n.predecessors(l),o))}return zt.each(n.nodes(),function(l){a=[],o(l),a.length&&u.push(a)}),u},M_=Xo;function Xo(){this._arr=[],this._keyIndices={}}Xo.prototype.size=function(){return this._arr.length},Xo.prototype.keys=function(){return this._arr.map(function(n){return n.key})},Xo.prototype.has=function(n){return zt.has(this._keyIndices,n)},Xo.prototype.priority=function(n){var a=this._keyIndices[n];if(a!==void 0)return this._arr[a].priority},Xo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Xo.prototype.add=function(n,a){var i=this._keyIndices;if(n=String(n),!zt.has(i,n)){var u=this._arr,o=u.length;return i[n]=o,u.push({key:n,priority:a}),this._decrease(o),!0}return!1},Xo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},Xo.prototype.decrease=function(n,a){var i=this._keyIndices[n];if(a>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+a);this._arr[i].priority=a,this._decrease(i)},Xo.prototype._heapify=function(n){var a=this._arr,i=2*n,u=i+1,o=n;i<a.length&&(o=a[i].priority<a[o].priority?i:o,u<a.length&&(o=a[u].priority<a[o].priority?u:o),o!==n&&(this._swap(n,o),this._heapify(o)))},Xo.prototype._decrease=function(n){for(var a,i=this._arr,u=i[n].priority;n!==0&&!(i[a=n>>1].priority<u);)this._swap(n,a),n=a},Xo.prototype._swap=function(n,a){var i=this._arr,u=this._keyIndices,o=i[n],l=i[a];i[n]=l,i[a]=o,u[l.key]=n,u[o.key]=a};var R_=function(n,a,i,u){return function(o,l,c,h){var p,m,y={},S=new M_,x=function(T){var w=T.v!==p?T.v:T.w,N=y[w],M=c(T),D=m.distance+M;if(M<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+T+" Weight: "+M);D<N.distance&&(N.distance=D,N.predecessor=p,S.decrease(w,D))};for(o.nodes().forEach(function(T){var w=T===l?0:Number.POSITIVE_INFINITY;y[T]={distance:w},S.add(T,w)});S.size()>0&&(p=S.removeMin(),(m=y[p]).distance!==Number.POSITIVE_INFINITY);)h(p).forEach(x);return y}(n,String(a),i||e6,u||function(o){return n.outEdges(o)})},e6=zt.constant(1),t6=function(n,a,i){return zt.transform(n.nodes(),function(u,o){u[o]=R_(n,o,a,i)},{})},I_=function(n){var a=0,i=[],u={},o=[];function l(c){var h=u[c]={onStack:!0,lowlink:a,index:a++};if(i.push(c),n.successors(c).forEach(function(y){zt.has(u,y)?u[y].onStack&&(h.lowlink=Math.min(h.lowlink,u[y].index)):(l(y),h.lowlink=Math.min(h.lowlink,u[y].lowlink))}),h.lowlink===h.index){var p,m=[];do p=i.pop(),u[p].onStack=!1,m.push(p);while(c!==p);o.push(m)}}return n.nodes().forEach(function(c){zt.has(u,c)||l(c)}),o},r6=function(n){return zt.filter(I_(n),function(a){return a.length>1||a.length===1&&n.hasEdge(a[0],a[0])})},n6=function(n,a,i){return function(u,o,l){var c={},h=u.nodes();return h.forEach(function(p){c[p]={},c[p][p]={distance:0},h.forEach(function(m){p!==m&&(c[p][m]={distance:Number.POSITIVE_INFINITY})}),l(p).forEach(function(m){var y=m.v===p?m.w:m.v,S=o(m);c[p][y]={distance:S,predecessor:p}})}),h.forEach(function(p){var m=c[p];h.forEach(function(y){var S=c[y];h.forEach(function(x){var T=S[p],w=m[x],N=S[x],M=T.distance+w.distance;M<N.distance&&(N.distance=M,N.predecessor=w.predecessor)})})}),c}(n,a||o6,i||function(u){return n.outEdges(u)})},o6=zt.constant(1),db=D_;function D_(n){var a={},i={},u=[];if(zt.each(n.sinks(),function o(l){if(zt.has(i,l))throw new Cv;zt.has(a,l)||(i[l]=!0,a[l]=!0,zt.each(n.predecessors(l),o),delete i[l],u.push(l))}),zt.size(a)!==n.nodeCount())throw new Cv;return u}function Cv(){}D_.CycleException=Cv,Cv.prototype=new Error;var RA=function(n,a,i){zt.isArray(a)||(a=[a]);var u=(n.isDirected()?n.successors:n.neighbors).bind(n),o=[],l={};return zt.each(a,function(c){if(!n.hasNode(c))throw new Error("Graph does not have node: "+c);C_(n,c,i==="post",l,u,o)}),o};function C_(n,a,i,u,o,l){zt.has(u,a)||(u[a]=!0,i||l.push(a),zt.each(o(a),function(c){C_(n,c,i,u,o,l)}),i&&l.push(a))}var Lv,i6={Graph:MA.Graph,json:Z8,alg:{components:q8,dijkstra:R_,dijkstraAll:t6,findCycles:r6,floydWarshall:n6,isAcyclic:function(n){try{db(n)}catch(a){if(a instanceof db.CycleException)return!1;throw a}return!0},postorder:function(n,a){return RA(n,a,"post")},preorder:function(n,a){return RA(n,a,"pre")},prim:function(n,a){var i,u=new oE,o={},l=new M_;function c(p){var m=p.v===i?p.w:p.v,y=l.priority(m);if(y!==void 0){var S=a(p);S<y&&(o[m]=i,l.decrease(m,S))}}if(n.nodeCount()===0)return u;zt.each(n.nodes(),function(p){l.add(p,Number.POSITIVE_INFINITY),u.setNode(p)}),l.decrease(n.nodes()[0],0);for(var h=!1;l.size()>0;){if(i=l.removeMin(),zt.has(o,i))u.setEdge(i,o[i]);else{if(h)throw new Error("Input graph is not connected: "+n);h=!0}n.nodeEdges(i).forEach(c)}return u},tarjan:I_,topsort:db},version:MA.version};try{Lv=i6}catch{}Lv||(Lv=window.graphlib);var zi=Lv,a6=function(n){return r_(n,5)},Gc=function(n,a,i){if(!Oo(i))return!1;var u=typeof a;return!!(u=="number"?Pa(i)&&Wv(a,i.length):u=="string"&&a in i)&&$l(i[a],n)},L_=Object.prototype,s6=L_.hasOwnProperty,u6=ey(function(n,a){n=Object(n);var i=-1,u=a.length,o=u>2?a[2]:void 0;for(o&&Gc(a[0],a[1],o)&&(u=1);++i<u;)for(var l=a[i],c=gu(l),h=-1,p=c.length;++h<p;){var m=c[h],y=n[m];(y===void 0||$l(y,L_[m])&&!s6.call(n,m))&&(n[m]=l[m])}return n}),l6=function(n){return function(a,i,u){var o=Object(a);if(!Pa(a)){var l=_a(i);a=Ts(a),i=function(h){return l(o[h],h,o)}}var c=n(a,i,u);return c>-1?o[l?a[c]:c]:void 0}},f6=/^\s+|\s+$/g,c6=/^[-+]0x[0-9a-f]+$/i,d6=/^0b[01]+$/i,h6=/^0o[0-7]+$/i,p6=parseInt,v6=function(n){if(typeof n=="number")return n;if(hu(n))return NaN;if(Oo(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=Oo(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=n.replace(f6,"");var i=d6.test(n);return i||h6.test(n)?p6(n.slice(2),i?2:8):c6.test(n)?NaN:+n},Sv=function(n){return n?(n=v6(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:n===0?n:0},y6=function(n){var a=Sv(n),i=a%1;return a==a?i?a-i:a:0},g6=Math.max,m6=l6(function(n,a,i){var u=n==null?0:n.length;if(!u)return-1;var o=i==null?0:y6(i);return o<0&&(o=g6(u+o,0)),__(n,_a(a),o)}),j_=function(n){return n!=null&&n.length?nE(n,1):[]},b6=function(n,a){return n==null?n:Qb(n,n_(a),gu)},E6=function(n){var a=n==null?0:n.length;return a?n[a-1]:void 0},O6=function(n,a){var i={};return a=_a(a),qb(n,function(u,o,l){$v(i,o,a(u,o,l))}),i},iE=function(n,a,i){for(var u=-1,o=n.length;++u<o;){var l=n[u],c=a(l);if(c!=null&&(h===void 0?c==c&&!hu(c):i(c,h)))var h=c,p=l}return p},S6=function(n,a){return n>a},x6=function(n){return n&&n.length?iE(n,mu,S6):void 0},Nb=function(n,a,i){(i!==void 0&&!$l(n[a],i)||i===void 0&&!(a in n))&&$v(n,a,i)},T6=Function.prototype,A6=Object.prototype,B_=T6.toString,P6=A6.hasOwnProperty,_6=B_.call(Object),w6=function(n){if(!ui(n)||xs(n)!="[object Object]")return!1;var a=Zv(n);if(a===null)return!0;var i=P6.call(a,"constructor")&&a.constructor;return typeof i=="function"&&i instanceof i&&B_.call(i)==_6},Mb=function(n,a){if((a!=="constructor"||typeof n[a]!="function")&&a!="__proto__")return n[a]},N6=function(n){return zc(n,gu(n))},M6=function(n,a,i,u,o,l,c){var h=Mb(n,i),p=Mb(a,i),m=c.get(p);if(m)Nb(n,i,m);else{var y=l?l(h,p,i+"",n,a,c):void 0,S=y===void 0;if(S){var x=mn(p),T=!x&&cu(p),w=!x&&!T&&Hc(p);y=p,x||T||w?mn(h)?y=h:w_(h)?y=YP(h):T?(S=!1,y=WP(p,!0)):w?(S=!1,y=qP(p,!0)):y=[]:w6(p)||Ul(p)?(y=h,Ul(h)?y=N6(h):Oo(h)&&!Uc(h)||(y=t_(p))):S=!1}S&&(c.set(p,y),o(y,p,u,l,c),c.delete(p)),Nb(n,i,y)}},R6=function n(a,i,u,o,l){a!==i&&Qb(i,function(c,h){if(l||(l=new Bl),Oo(c))M6(a,i,h,u,n,o,l);else{var p=o?o(Mb(a,h),c,h+"",a,i,l):void 0;p===void 0&&(p=c),Nb(a,h,p)}},gu)},I6=function(n){return ey(function(a,i){var u=-1,o=i.length,l=o>1?i[o-1]:void 0,c=o>2?i[2]:void 0;for(l=n.length>3&&typeof l=="function"?(o--,l):void 0,c&&Gc(i[0],i[1],c)&&(l=o<3?void 0:l,o=1),a=Object(a);++u<o;){var h=i[u];h&&n(a,h,u,l)}return a})}(function(n,a,i){R6(n,a,i)}),F_=function(n,a){return n<a},D6=function(n){return n&&n.length?iE(n,mu,F_):void 0},C6=function(n,a){return n&&n.length?iE(n,_a(a),F_):void 0},L6=function(){return li.Date.now()},j6=function(n,a,i,u){if(!Oo(n))return n;for(var o=-1,l=(a=Qv(a,n)).length,c=l-1,h=n;h!=null&&++o<l;){var p=Xc(a[o]),m=i;if(p==="__proto__"||p==="constructor"||p==="prototype")return n;if(o!=c){var y=h[p];(m=u?u(y,p,h):void 0)===void 0&&(m=Oo(y)?y:Wv(a[o+1])?[]:{})}Vv(h,p,m),h=h[p]}return n},B6=function(n,a,i){for(var u=-1,o=a.length,l={};++u<o;){var c=a[u],h=qv(n,c);i(h,c)&&j6(l,Qv(c,n),h)}return l},F6=function(n,a){return B6(n,a,function(i,u){return p_(n,u)})},G6=function(n){return P_(A_(n,void 0,j_),n+"")}(function(n,a){return n==null?{}:F6(n,a)}),k6=Math.ceil,U6=Math.max,z6=function(n,a,i,u){for(var o=-1,l=U6(k6((a-n)/(i||1)),0),c=Array(l);l--;)c[u?l:++o]=n,n+=i;return c},H6=function(n){return function(a,i,u){return u&&typeof u!="number"&&Gc(a,i,u)&&(i=u=void 0),a=Sv(a),i===void 0?(i=a,a=0):i=Sv(i),u=u===void 0?a<i?1:-1:Sv(u),z6(a,i,u,n)}}(),X6=function(n,a){var i=n.length;for(n.sort(a);i--;)n[i]=n[i].value;return n},$6=function(n,a){if(n!==a){var i=n!==void 0,u=n===null,o=n==n,l=hu(n),c=a!==void 0,h=a===null,p=a==a,m=hu(a);if(!h&&!m&&!l&&n>a||l&&c&&p&&!h&&!m||u&&c&&p||!i&&p||!o)return 1;if(!u&&!l&&!m&&n<a||m&&i&&o&&!u&&!l||h&&i&&o||!c&&o||!p)return-1}return 0},V6=function(n,a,i){for(var u=-1,o=n.criteria,l=a.criteria,c=o.length,h=i.length;++u<c;){var p=$6(o[u],l[u]);if(p)return u>=h?p:p*(i[u]=="desc"?-1:1)}return n.index-a.index},W6=function(n,a,i){a=a.length?Gl(a,function(l){return mn(l)?function(c){return qv(c,l.length===1?l[0]:l)}:l}):[mu];var u=-1;a=Gl(a,Yv(_a));var o=b_(n,function(l,c,h){return{criteria:Gl(a,function(p){return p(l)}),index:++u,value:l}});return X6(o,function(l,c){return V6(l,c,i)})},Y6=ey(function(n,a){if(n==null)return[];var i=a.length;return i>1&&Gc(n,a[0],a[1])?a=[]:i>2&&Gc(a[0],a[1],a[2])&&(a=[a[0]]),W6(n,nE(a,1),[])}),K6=0,Z6=function(n){var a=++K6;return d_(n)+a},J6=function(n,a,i){for(var u=-1,o=n.length,l=a.length,c={};++u<o;){var h=u<l?a[u]:void 0;i(c,n[u],h)}return c},jv,Q6=function(n,a){return J6(n||[],a||[],Vv)};try{jv={cloneDeep:a6,constant:Jb,defaults:u6,each:i_,filter:y_,find:m6,flatten:j_,forEach:o_,forIn:b6,has:g_,isUndefined:m_,last:E6,map:E_,mapValues:O6,max:x6,merge:I6,min:D6,minBy:C6,now:L6,pick:G6,range:H6,reduce:O_,sortBy:Y6,uniqueId:Z6,values:N_,zipObject:Q6}}catch{}jv||(jv=window._);var q6=jv;zi.Graph;q6.constant(1);zi.Graph;zi.Graph;zi.alg.preorder;zi.alg.postorder;zi.Graph;zi.Graph;zi.Graph;zi.Graph;zi.Graph;function kc(n){return kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},kc(n)}function ek(n,a){if(kc(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var u=i.call(n,a||"default");if(kc(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function tk(n){var a=ek(n,"string");return kc(a)==="symbol"?a:String(a)}function jt(n,a,i){return a=tk(a),a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}var rk=typeof Ac=="object"&&Ac&&Ac.Object===Object&&Ac,G_=rk,nk=G_,ok=typeof self=="object"&&self&&self.Object===Object&&self,ik=nk||ok||Function("return this")(),ak=ik,sk=ak,uk=sk.Symbol,k_=uk,IA=k_;IA&&IA.toStringTag;var DA=k_;DA&&DA.toStringTag;var Bv={},lk={get exports(){return Bv},set exports(n){Bv=n}};(function(n,a){var i=G_,u=a&&!a.nodeType&&a,o=u&&!0&&n&&!n.nodeType&&n,l=o&&o.exports===u,c=l&&i.process,h=function(){try{var p=o&&o.require&&o.require("util").types;return p||c&&c.binding&&c.binding("util")}catch{}}();n.exports=h})(lk,Bv);var CA=Bv;CA&&CA.isTypedArray;var Rb={},fk={get exports(){return Rb},set exports(n){Rb=n}},Ib={},ck={get exports(){return Ib},set exports(n){Ib=n}};(function(n){function a(i){return n.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n.exports.__esModule=!0,n.exports.default=n.exports,a(i)}n.exports=a,n.exports.__esModule=!0,n.exports.default=n.exports})(ck);(function(n){var a=Ib.default;function i(){n.exports=i=function(){return u},n.exports.__esModule=!0,n.exports.default=n.exports;var u={},o=Object.prototype,l=o.hasOwnProperty,c=Object.defineProperty||function($,Z,le){$[Z]=le.value},h=typeof Symbol=="function"?Symbol:{},p=h.iterator||"@@iterator",m=h.asyncIterator||"@@asyncIterator",y=h.toStringTag||"@@toStringTag";function S($,Z,le){return Object.defineProperty($,Z,{value:le,enumerable:!0,configurable:!0,writable:!0}),$[Z]}try{S({},"")}catch{S=function(le,Ae,Re){return le[Ae]=Re}}function x($,Z,le,Ae){var Re=Z&&Z.prototype instanceof N?Z:N,_e=Object.create(Re.prototype),Ke=new I(Ae||[]);return c(_e,"_invoke",{value:xe($,le,Ke)}),_e}function T($,Z,le){try{return{type:"normal",arg:$.call(Z,le)}}catch(Ae){return{type:"throw",arg:Ae}}}u.wrap=x;var w={};function N(){}function M(){}function D(){}var W={};S(W,p,function(){return this});var V=Object.getPrototypeOf,Ee=V&&V(V(k([])));Ee&&Ee!==o&&l.call(Ee,p)&&(W=Ee);var ge=D.prototype=N.prototype=Object.create(W);function ye($){["next","throw","return"].forEach(function(Z){S($,Z,function(le){return this._invoke(Z,le)})})}function ce($,Z){function le(Re,_e,Ke,gt){var Nt=T($[Re],$,_e);if(Nt.type!=="throw"){var Vt=Nt.arg,Ct=Vt.value;return Ct&&a(Ct)=="object"&&l.call(Ct,"__await")?Z.resolve(Ct.__await).then(function(Ge){le("next",Ge,Ke,gt)},function(Ge){le("throw",Ge,Ke,gt)}):Z.resolve(Ct).then(function(Ge){Vt.value=Ge,Ke(Vt)},function(Ge){return le("throw",Ge,Ke,gt)})}gt(Nt.arg)}var Ae;c(this,"_invoke",{value:function(_e,Ke){function gt(){return new Z(function(Nt,Vt){le(_e,Ke,Nt,Vt)})}return Ae=Ae?Ae.then(gt,gt):gt()}})}function xe($,Z,le){var Ae="suspendedStart";return function(Re,_e){if(Ae==="executing")throw new Error("Generator is already running");if(Ae==="completed"){if(Re==="throw")throw _e;return te()}for(le.method=Re,le.arg=_e;;){var Ke=le.delegate;if(Ke){var gt=j(Ke,le);if(gt){if(gt===w)continue;return gt}}if(le.method==="next")le.sent=le._sent=le.arg;else if(le.method==="throw"){if(Ae==="suspendedStart")throw Ae="completed",le.arg;le.dispatchException(le.arg)}else le.method==="return"&&le.abrupt("return",le.arg);Ae="executing";var Nt=T($,Z,le);if(Nt.type==="normal"){if(Ae=le.done?"completed":"suspendedYield",Nt.arg===w)continue;return{value:Nt.arg,done:le.done}}Nt.type==="throw"&&(Ae="completed",le.method="throw",le.arg=Nt.arg)}}}function j($,Z){var le=Z.method,Ae=$.iterator[le];if(Ae===void 0)return Z.delegate=null,le==="throw"&&$.iterator.return&&(Z.method="return",Z.arg=void 0,j($,Z),Z.method==="throw")||le!=="return"&&(Z.method="throw",Z.arg=new TypeError("The iterator does not provide a '"+le+"' method")),w;var Re=T(Ae,$.iterator,Z.arg);if(Re.type==="throw")return Z.method="throw",Z.arg=Re.arg,Z.delegate=null,w;var _e=Re.arg;return _e?_e.done?(Z[$.resultName]=_e.value,Z.next=$.nextLoc,Z.method!=="return"&&(Z.method="next",Z.arg=void 0),Z.delegate=null,w):_e:(Z.method="throw",Z.arg=new TypeError("iterator result is not an object"),Z.delegate=null,w)}function Q($){var Z={tryLoc:$[0]};1 in $&&(Z.catchLoc=$[1]),2 in $&&(Z.finallyLoc=$[2],Z.afterLoc=$[3]),this.tryEntries.push(Z)}function U($){var Z=$.completion||{};Z.type="normal",delete Z.arg,$.completion=Z}function I($){this.tryEntries=[{tryLoc:"root"}],$.forEach(Q,this),this.reset(!0)}function k($){if($){var Z=$[p];if(Z)return Z.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var le=-1,Ae=function Re(){for(;++le<$.length;)if(l.call($,le))return Re.value=$[le],Re.done=!1,Re;return Re.value=void 0,Re.done=!0,Re};return Ae.next=Ae}}return{next:te}}function te(){return{value:void 0,done:!0}}return M.prototype=D,c(ge,"constructor",{value:D,configurable:!0}),c(D,"constructor",{value:M,configurable:!0}),M.displayName=S(D,y,"GeneratorFunction"),u.isGeneratorFunction=function($){var Z=typeof $=="function"&&$.constructor;return!!Z&&(Z===M||(Z.displayName||Z.name)==="GeneratorFunction")},u.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,D):($.__proto__=D,S($,y,"GeneratorFunction")),$.prototype=Object.create(ge),$},u.awrap=function($){return{__await:$}},ye(ce.prototype),S(ce.prototype,m,function(){return this}),u.AsyncIterator=ce,u.async=function($,Z,le,Ae,Re){Re===void 0&&(Re=Promise);var _e=new ce(x($,Z,le,Ae),Re);return u.isGeneratorFunction(Z)?_e:_e.next().then(function(Ke){return Ke.done?Ke.value:_e.next()})},ye(ge),S(ge,y,"Generator"),S(ge,p,function(){return this}),S(ge,"toString",function(){return"[object Generator]"}),u.keys=function($){var Z=Object($),le=[];for(var Ae in Z)le.push(Ae);return le.reverse(),function Re(){for(;le.length;){var _e=le.pop();if(_e in Z)return Re.value=_e,Re.done=!1,Re}return Re.done=!0,Re}},u.values=k,I.prototype={constructor:I,reset:function(Z){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(U),!Z)for(var le in this)le.charAt(0)==="t"&&l.call(this,le)&&!isNaN(+le.slice(1))&&(this[le]=void 0)},stop:function(){this.done=!0;var Z=this.tryEntries[0].completion;if(Z.type==="throw")throw Z.arg;return this.rval},dispatchException:function(Z){if(this.done)throw Z;var le=this;function Ae(Vt,Ct){return Ke.type="throw",Ke.arg=Z,le.next=Vt,Ct&&(le.method="next",le.arg=void 0),!!Ct}for(var Re=this.tryEntries.length-1;Re>=0;--Re){var _e=this.tryEntries[Re],Ke=_e.completion;if(_e.tryLoc==="root")return Ae("end");if(_e.tryLoc<=this.prev){var gt=l.call(_e,"catchLoc"),Nt=l.call(_e,"finallyLoc");if(gt&&Nt){if(this.prev<_e.catchLoc)return Ae(_e.catchLoc,!0);if(this.prev<_e.finallyLoc)return Ae(_e.finallyLoc)}else if(gt){if(this.prev<_e.catchLoc)return Ae(_e.catchLoc,!0)}else{if(!Nt)throw new Error("try statement without catch or finally");if(this.prev<_e.finallyLoc)return Ae(_e.finallyLoc)}}}},abrupt:function(Z,le){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var Re=this.tryEntries[Ae];if(Re.tryLoc<=this.prev&&l.call(Re,"finallyLoc")&&this.prev<Re.finallyLoc){var _e=Re;break}}_e&&(Z==="break"||Z==="continue")&&_e.tryLoc<=le&&le<=_e.finallyLoc&&(_e=null);var Ke=_e?_e.completion:{};return Ke.type=Z,Ke.arg=le,_e?(this.method="next",this.next=_e.finallyLoc,w):this.complete(Ke)},complete:function(Z,le){if(Z.type==="throw")throw Z.arg;return Z.type==="break"||Z.type==="continue"?this.next=Z.arg:Z.type==="return"?(this.rval=this.arg=Z.arg,this.method="return",this.next="end"):Z.type==="normal"&&le&&(this.next=le),w},finish:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Ae=this.tryEntries[le];if(Ae.finallyLoc===Z)return this.complete(Ae.completion,Ae.afterLoc),U(Ae),w}},catch:function(Z){for(var le=this.tryEntries.length-1;le>=0;--le){var Ae=this.tryEntries[le];if(Ae.tryLoc===Z){var Re=Ae.completion;if(Re.type==="throw"){var _e=Re.arg;U(Ae)}return _e}}throw new Error("illegal catch attempt")},delegateYield:function(Z,le,Ae){return this.delegate={iterator:k(Z),resultName:le,nextLoc:Ae},this.method==="next"&&(this.arg=void 0),w}},u}n.exports=i,n.exports.__esModule=!0,n.exports.default=n.exports})(fk);var hb=Rb();try{regeneratorRuntime=hb}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=hb:Function("r","regeneratorRuntime = r")(hb)}var Dt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Dt||(Dt={}));var LA;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(LA||(LA={}));var jA;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(jA||(jA={}));var BA;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(BA||(BA={}));var FA;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(FA||(FA={}));var GA={},dk={get exports(){return GA},set exports(n){GA=n}};(function(n,a){(function(i,u){n.exports=u()})(Ac,function(){var i=function(_){return _ instanceof Uint8Array||_ instanceof Uint16Array||_ instanceof Uint32Array||_ instanceof Int8Array||_ instanceof Int16Array||_ instanceof Int32Array||_ instanceof Float32Array||_ instanceof Float64Array||_ instanceof Uint8ClampedArray},u=function(_,G){for(var q=Object.keys(G),Ce=0;Ce<q.length;++Ce)_[q[Ce]]=G[q[Ce]];return _},o=`
`;function l(_){return typeof atob<"u"?atob(_):"base64:"+_}function c(_){var G=new Error("(regl) "+_);throw console.error(G),G}function h(_,G){_||c(G)}function p(_){return _?": "+_:""}function m(_,G,q){_ in G||c("unknown parameter ("+_+")"+p(q)+". possible values: "+Object.keys(G).join())}function y(_,G){i(_)||c("invalid parameter type"+p(G)+". must be a typed array")}function S(_,G){switch(G){case"number":return typeof _=="number";case"object":return typeof _=="object";case"string":return typeof _=="string";case"boolean":return typeof _=="boolean";case"function":return typeof _=="function";case"undefined":return typeof _>"u";case"symbol":return typeof _=="symbol"}}function x(_,G,q){S(_,G)||c("invalid parameter type"+p(q)+". expected "+G+", got "+typeof _)}function T(_,G){_>=0&&(_|0)===_||c("invalid parameter type, ("+_+")"+p(G)+". must be a nonnegative integer")}function w(_,G,q){G.indexOf(_)<0&&c("invalid value"+p(q)+". must be one of: "+G)}var N=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function M(_){Object.keys(_).forEach(function(G){N.indexOf(G)<0&&c('invalid regl constructor argument "'+G+'". must be one of '+N)})}function D(_,G){for(_=_+"";_.length<G;)_=" "+_;return _}function W(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function V(_,G){this.number=_,this.line=G,this.errors=[]}function Ee(_,G,q){this.file=_,this.line=G,this.message=q}function ge(){var _=new Error,G=(_.stack||_).toString(),q=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(G);return Ce?Ce[1]:"unknown"}function ye(){var _=new Error,G=(_.stack||_).toString(),q=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(G);if(q)return q[1];var Ce=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(G);return Ce?Ce[1]:"unknown"}function ce(_,G){var q=_.split(`
`),Ce=1,Je=0,Ie={unknown:new W,0:new W};Ie.unknown.name=Ie[0].name=G||ge(),Ie.unknown.lines.push(new V(0,""));for(var ke=0;ke<q.length;++ke){var at=q[ke],lt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(at);if(lt)switch(lt[1]){case"line":var vt=/(\d+)(\s+\d+)?/.exec(lt[2]);vt&&(Ce=vt[1]|0,vt[2]&&(Je=vt[2]|0,Je in Ie||(Ie[Je]=new W)));break;case"define":var ft=/SHADER_NAME(_B64)?\s+(.*)$/.exec(lt[2]);ft&&(Ie[Je].name=ft[1]?l(ft[2]):ft[2]);break}Ie[Je].lines.push(new V(Ce++,at))}return Object.keys(Ie).forEach(function(it){var St=Ie[it];St.lines.forEach(function(st){St.index[st.number]=st})}),Ie}function xe(_){var G=[];return _.split(`
`).forEach(function(q){if(!(q.length<5)){var Ce=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(q);Ce?G.push(new Ee(Ce[1]|0,Ce[2]|0,Ce[3].trim())):q.length>0&&G.push(new Ee("unknown",0,q))}}),G}function j(_,G){G.forEach(function(q){var Ce=_[q.file];if(Ce){var Je=Ce.index[q.line];if(Je){Je.errors.push(q),Ce.hasErrors=!0;return}}_.unknown.hasErrors=!0,_.unknown.lines[0].errors.push(q)})}function Q(_,G,q,Ce,Je){if(!_.getShaderParameter(G,_.COMPILE_STATUS)){var Ie=_.getShaderInfoLog(G),ke=Ce===_.FRAGMENT_SHADER?"fragment":"vertex";le(q,"string",ke+" shader source must be a string",Je);var at=ce(q,Je),lt=xe(Ie);j(at,lt),Object.keys(at).forEach(function(vt){var ft=at[vt];if(!ft.hasErrors)return;var it=[""],St=[""];function st(Ot,be){it.push(Ot),St.push(be||"")}st("file number "+vt+": "+ft.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ft.lines.forEach(function(Ot){if(Ot.errors.length>0){st(D(Ot.number,4)+"|  ","background-color:yellow; font-weight:bold"),st(Ot.line+o,"color:red; background-color:yellow; font-weight:bold");var be=0;Ot.errors.forEach(function(Me){var yt=Me.message,xt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yt);if(xt){var nt=xt[1];switch(yt=xt[2],nt){case"assign":nt="=";break}be=Math.max(Ot.line.indexOf(nt,be),0)}else be=0;st(D("| ",6)),st(D("^^^",be+3)+o,"font-weight:bold"),st(D("| ",6)),st(yt+o,"font-weight:bold")}),st(D("| ",6)+o)}else st(D(Ot.number,4)+"|  "),st(Ot.line+o,"color:red")}),typeof document<"u"&&!window.chrome?(St[0]=it.join("%c"),console.log.apply(console,St)):console.log(it.join(""))}),h.raise("Error compiling "+ke+" shader, "+at[0].name)}}function U(_,G,q,Ce,Je){if(!_.getProgramParameter(G,_.LINK_STATUS)){var Ie=_.getProgramInfoLog(G),ke=ce(q,Je),at=ce(Ce,Je),lt='Error linking program with vertex shader, "'+at[0].name+'", and fragment shader "'+ke[0].name+'"';typeof document<"u"?console.log("%c"+lt+o+"%c"+Ie,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(lt+o+Ie),h.raise(lt)}}function I(_){_._commandRef=ge()}function k(_,G,q,Ce){I(_);function Je(lt){return lt?Ce.id(lt):0}_._fragId=Je(_.static.frag),_._vertId=Je(_.static.vert);function Ie(lt,vt){Object.keys(vt).forEach(function(ft){lt[Ce.id(ft)]=!0})}var ke=_._uniformSet={};Ie(ke,G.static),Ie(ke,G.dynamic);var at=_._attributeSet={};Ie(at,q.static),Ie(at,q.dynamic),_._hasCount="count"in _.static||"count"in _.dynamic||"elements"in _.static||"elements"in _.dynamic}function te(_,G){var q=ye();c(_+" in command "+(G||ge())+(q==="unknown"?"":" called from "+q))}function $(_,G,q){_||te(G,q||ge())}function Z(_,G,q,Ce){_ in G||te("unknown parameter ("+_+")"+p(q)+". possible values: "+Object.keys(G).join(),Ce||ge())}function le(_,G,q,Ce){S(_,G)||te("invalid parameter type"+p(q)+". expected "+G+", got "+typeof _,Ce||ge())}function Ae(_){_()}function Re(_,G,q){_.texture?w(_.texture._texture.internalformat,G,"unsupported texture format for attachment"):w(_.renderbuffer._renderbuffer.format,q,"unsupported renderbuffer format for attachment")}var _e=33071,Ke=9728,gt=9984,Nt=9985,Vt=9986,Ct=9987,Ge=5120,bt=5121,Ut=5122,ee=5123,se=5124,me=5125,Ue=5126,tt=32819,He=32820,Lt=33635,nr=34042,tr=36193,Jt={};Jt[Ge]=Jt[bt]=1,Jt[Ut]=Jt[ee]=Jt[tr]=Jt[Lt]=Jt[tt]=Jt[He]=2,Jt[se]=Jt[me]=Jt[Ue]=Jt[nr]=4;function rt(_,G){return _===He||_===tt||_===Lt?2:_===nr?4:Jt[_]*G}function Er(_){return!(_&_-1)&&!!_}function ur(_,G,q){var Ce,Je=G.width,Ie=G.height,ke=G.channels;h(Je>0&&Je<=q.maxTextureSize&&Ie>0&&Ie<=q.maxTextureSize,"invalid texture shape"),(_.wrapS!==_e||_.wrapT!==_e)&&h(Er(Je)&&Er(Ie),"incompatible wrap mode for texture, both width and height must be power of 2"),G.mipmask===1?Je!==1&&Ie!==1&&h(_.minFilter!==gt&&_.minFilter!==Vt&&_.minFilter!==Nt&&_.minFilter!==Ct,"min filter requires mipmap"):(h(Er(Je)&&Er(Ie),"texture must be a square power of 2 to support mipmapping"),h(G.mipmask===(Je<<1)-1,"missing or incomplete mipmap data")),G.type===Ue&&(q.extensions.indexOf("oes_texture_float_linear")<0&&h(_.minFilter===Ke&&_.magFilter===Ke,"filter not supported, must enable oes_texture_float_linear"),h(!_.genMipmaps,"mipmap generation not supported with float textures"));var at=G.images;for(Ce=0;Ce<16;++Ce)if(at[Ce]){var lt=Je>>Ce,vt=Ie>>Ce;h(G.mipmask&1<<Ce,"missing mipmap data");var ft=at[Ce];if(h(ft.width===lt&&ft.height===vt,"invalid shape for mip images"),h(ft.format===G.format&&ft.internalformat===G.internalformat&&ft.type===G.type,"incompatible type for mip image"),!ft.compressed)if(ft.data){var it=Math.ceil(rt(ft.type,ke)*lt/ft.unpackAlignment)*ft.unpackAlignment;h(ft.data.byteLength===it*vt,"invalid data for image, buffer size is inconsistent with image format")}else ft.element||ft.copy}else _.genMipmaps||h((G.mipmask&1<<Ce)===0,"extra mipmap data");G.compressed&&h(!_.genMipmaps,"mipmap generation for compressed images not supported")}function Xt(_,G,q,Ce){var Je=_.width,Ie=_.height,ke=_.channels;h(Je>0&&Je<=Ce.maxTextureSize&&Ie>0&&Ie<=Ce.maxTextureSize,"invalid texture shape"),h(Je===Ie,"cube map must be square"),h(G.wrapS===_e&&G.wrapT===_e,"wrap mode not supported by cube map");for(var at=0;at<q.length;++at){var lt=q[at];h(lt.width===Je&&lt.height===Ie,"inconsistent cube map face shape"),G.genMipmaps&&(h(!lt.compressed,"can not generate mipmap for compressed textures"),h(lt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var vt=lt.images,ft=0;ft<16;++ft){var it=vt[ft];if(it){var St=Je>>ft,st=Ie>>ft;h(lt.mipmask&1<<ft,"missing mipmap data"),h(it.width===St&&it.height===st,"invalid shape for mip images"),h(it.format===_.format&&it.internalformat===_.internalformat&&it.type===_.type,"incompatible type for mip image"),it.compressed||(it.data?h(it.data.byteLength===St*st*Math.max(rt(it.type,ke),it.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):it.element||it.copy)}}}}var L=u(h,{optional:Ae,raise:c,commandRaise:te,command:$,parameter:m,commandParameter:Z,constructor:M,type:x,commandType:le,isTypedArray:y,nni:T,oneOf:w,shaderError:Q,linkError:U,callSite:ye,saveCommandRef:I,saveDrawInfo:k,framebufferFormat:Re,guessCommand:ge,texture2D:ur,textureCube:Xt}),Qr=0,Rr=0,kr=5,Be=6;function Xr(_,G){this.id=Qr++,this.type=_,this.data=G}function zr(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Ir(_){if(_.length===0)return[];var G=_.charAt(0),q=_.charAt(_.length-1);if(_.length>1&&G===q&&(G==='"'||G==="'"))return['"'+zr(_.substr(1,_.length-2))+'"'];var Ce=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(_);if(Ce)return Ir(_.substr(0,Ce.index)).concat(Ir(Ce[1])).concat(Ir(_.substr(Ce.index+Ce[0].length)));var Je=_.split(".");if(Je.length===1)return['"'+zr(_)+'"'];for(var Ie=[],ke=0;ke<Je.length;++ke)Ie=Ie.concat(Ir(Je[ke]));return Ie}function On(_){return"["+Ir(_).join("][")+"]"}function eo(_,G){return new Xr(_,On(G+""))}function In(_){return typeof _=="function"&&!_._reglType||_ instanceof Xr}function to(_,G){if(typeof _=="function")return new Xr(Rr,_);if(typeof _=="number"||typeof _=="boolean")return new Xr(kr,_);if(Array.isArray(_))return new Xr(Be,_.map((q,Ce)=>to(q,G+"["+Ce+"]")));if(_ instanceof Xr)return _;L(!1,"invalid option type in uniform "+G)}var Qt={DynamicVariable:Xr,define:eo,isDynamic:In,unbox:to,accessor:On},$r={next:typeof requestAnimationFrame=="function"?function(_){return requestAnimationFrame(_)}:function(_){return setTimeout(_,16)},cancel:typeof cancelAnimationFrame=="function"?function(_){return cancelAnimationFrame(_)}:clearTimeout},Dn=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Mt(){var _={"":0},G=[""];return{id:function(q){var Ce=_[q];return Ce||(Ce=_[q]=G.length,G.push(q),Ce)},str:function(q){return G[q]}}}function or(_,G,q){var Ce=document.createElement("canvas");u(Ce.style,{border:0,margin:0,padding:0,top:0,left:0}),_.appendChild(Ce),_===document.body&&(Ce.style.position="absolute",u(_.style,{margin:0,padding:0}));function Je(){var at=window.innerWidth,lt=window.innerHeight;if(_!==document.body){var vt=_.getBoundingClientRect();at=vt.right-vt.left,lt=vt.bottom-vt.top}Ce.width=q*at,Ce.height=q*lt,u(Ce.style,{width:at+"px",height:lt+"px"})}var Ie;_!==document.body&&typeof ResizeObserver=="function"?(Ie=new ResizeObserver(function(){setTimeout(Je)}),Ie.observe(_)):window.addEventListener("resize",Je,!1);function ke(){Ie?Ie.disconnect():window.removeEventListener("resize",Je),_.removeChild(Ce)}return Je(),{canvas:Ce,onDestroy:ke}}function vr(_,G){function q(Ce){try{return _.getContext(Ce,G)}catch{return null}}return q("webgl")||q("experimental-webgl")||q("webgl-experimental")}function fr(_){return typeof _.nodeName=="string"&&typeof _.appendChild=="function"&&typeof _.getBoundingClientRect=="function"}function _r(_){return typeof _.drawArrays=="function"||typeof _.drawElements=="function"}function re(_){return typeof _=="string"?_.split():(L(Array.isArray(_),"invalid extension array"),_)}function Oe(_){return typeof _=="string"?(L(typeof document<"u","not supported outside of DOM"),document.querySelector(_)):_}function we(_){var G=_||{},q,Ce,Je,Ie,ke={},at=[],lt=[],vt=typeof window>"u"?1:window.devicePixelRatio,ft=!1,it=function(Ot){Ot&&L.raise(Ot)},St=function(){};if(typeof G=="string"?(L(typeof document<"u","selector queries only supported in DOM enviroments"),q=document.querySelector(G),L(q,"invalid query string for element")):typeof G=="object"?fr(G)?q=G:_r(G)?(Ie=G,Je=Ie.canvas):(L.constructor(G),"gl"in G?Ie=G.gl:"canvas"in G?Je=Oe(G.canvas):"container"in G&&(Ce=Oe(G.container)),"attributes"in G&&(ke=G.attributes,L.type(ke,"object","invalid context attributes")),"extensions"in G&&(at=re(G.extensions)),"optionalExtensions"in G&&(lt=re(G.optionalExtensions)),"onDone"in G&&(L.type(G.onDone,"function","invalid or missing onDone callback"),it=G.onDone),"profile"in G&&(ft=!!G.profile),"pixelRatio"in G&&(vt=+G.pixelRatio,L(vt>0,"invalid pixel ratio"))):L.raise("invalid arguments to regl"),q&&(q.nodeName.toLowerCase()==="canvas"?Je=q:Ce=q),!Ie){if(!Je){L(typeof document<"u","must manually specify webgl context outside of DOM environments");var st=or(Ce||document.body,it,vt);if(!st)return null;Je=st.canvas,St=st.onDestroy}ke.premultipliedAlpha===void 0&&(ke.premultipliedAlpha=!0),Ie=vr(Je,ke)}return Ie?{gl:Ie,canvas:Je,container:Ce,extensions:at,optionalExtensions:lt,pixelRatio:vt,profile:ft,onDone:it,onDestroy:St}:(St(),it("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ne(_,G){var q={};function Ce(ke){L.type(ke,"string","extension name must be string");var at=ke.toLowerCase(),lt;try{lt=q[at]=_.getExtension(at)}catch{}return!!lt}for(var Je=0;Je<G.extensions.length;++Je){var Ie=G.extensions[Je];if(!Ce(Ie))return G.onDestroy(),G.onDone('"'+Ie+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return G.optionalExtensions.forEach(Ce),{extensions:q,restore:function(){Object.keys(q).forEach(function(ke){if(q[ke]&&!Ce(ke))throw new Error("(regl): error restoring extension "+ke)})}}}function ht(_,G){for(var q=Array(_),Ce=0;Ce<_;++Ce)q[Ce]=G(Ce);return q}var _t=5120,Kt=5121,Br=5122,Cn=5123,Ln=5124,Hi=5125,No=5126;function bu(_){for(var G=16;G<=1<<28;G*=16)if(_<=G)return G;return 0}function ro(_){var G,q;return G=(_>65535)<<4,_>>>=G,q=(_>255)<<3,_>>>=q,G|=q,q=(_>15)<<2,_>>>=q,G|=q,q=(_>3)<<1,_>>>=q,G|=q,G|_>>1}function As(){var _=ht(8,function(){return[]});function G(Ie){var ke=bu(Ie),at=_[ro(ke)>>2];return at.length>0?at.pop():new ArrayBuffer(ke)}function q(Ie){_[ro(Ie.byteLength)>>2].push(Ie)}function Ce(Ie,ke){var at=null;switch(Ie){case _t:at=new Int8Array(G(ke),0,ke);break;case Kt:at=new Uint8Array(G(ke),0,ke);break;case Br:at=new Int16Array(G(2*ke),0,ke);break;case Cn:at=new Uint16Array(G(2*ke),0,ke);break;case Ln:at=new Int32Array(G(4*ke),0,ke);break;case Hi:at=new Uint32Array(G(4*ke),0,ke);break;case No:at=new Float32Array(G(4*ke),0,ke);break;default:return null}return at.length!==ke?at.subarray(0,ke):at}function Je(Ie){q(Ie.buffer)}return{alloc:G,free:q,allocType:Ce,freeType:Je}}var jr=As();jr.zero=As();var fi=3408,Xi=3410,Vo=3411,$i=3412,ci=3413,di=3414,wa=3415,Vl=33901,Na=33902,Ma=3379,Eu=3386,Wt=34921,Ou=36347,Wl=36348,Mo=35661,Su=35660,Kr=34930,no=36349,xu=34076,Yl=34024,Kl=7936,Zl=7937,Ra=7938,Tu=35724,Wo=34047,Ps=36063,_s=34852,Vi=3553,Au=34067,Ia=34069,Jl=33984,Zr=6408,Pu=5126,Ql=5121,_u=36160,wu=36053,ql=36064,Nu=16384,ef=function(_,G){var q=1;G.ext_texture_filter_anisotropic&&(q=_.getParameter(Wo));var Ce=1,Je=1;G.webgl_draw_buffers&&(Ce=_.getParameter(_s),Je=_.getParameter(Ps));var Ie=!!G.oes_texture_float;if(Ie){var ke=_.createTexture();_.bindTexture(Vi,ke),_.texImage2D(Vi,0,Zr,1,1,0,Zr,Pu,null);var at=_.createFramebuffer();if(_.bindFramebuffer(_u,at),_.framebufferTexture2D(_u,ql,Vi,ke,0),_.bindTexture(Vi,null),_.checkFramebufferStatus(_u)!==wu)Ie=!1;else{_.viewport(0,0,1,1),_.clearColor(1,0,0,1),_.clear(Nu);var lt=jr.allocType(Pu,4);_.readPixels(0,0,1,1,Zr,Pu,lt),_.getError()?Ie=!1:(_.deleteFramebuffer(at),_.deleteTexture(ke),Ie=lt[0]===1),jr.freeType(lt)}}var vt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ft=!0;if(!vt){var it=_.createTexture(),St=jr.allocType(Ql,36);_.activeTexture(Jl),_.bindTexture(Au,it),_.texImage2D(Ia,0,Zr,3,3,0,Zr,Ql,St),jr.freeType(St),_.bindTexture(Au,null),_.deleteTexture(it),ft=!_.getError()}return{colorBits:[_.getParameter(Xi),_.getParameter(Vo),_.getParameter($i),_.getParameter(ci)],depthBits:_.getParameter(di),stencilBits:_.getParameter(wa),subpixelBits:_.getParameter(fi),extensions:Object.keys(G).filter(function(st){return!!G[st]}),maxAnisotropic:q,maxDrawbuffers:Ce,maxColorAttachments:Je,pointSizeDims:_.getParameter(Vl),lineWidthDims:_.getParameter(Na),maxViewportDims:_.getParameter(Eu),maxCombinedTextureUnits:_.getParameter(Mo),maxCubeMapSize:_.getParameter(xu),maxRenderbufferSize:_.getParameter(Yl),maxTextureUnits:_.getParameter(Kr),maxTextureSize:_.getParameter(Ma),maxAttributes:_.getParameter(Wt),maxVertexUniforms:_.getParameter(Ou),maxVertexTextureUnits:_.getParameter(Su),maxVaryingVectors:_.getParameter(Wl),maxFragmentUniforms:_.getParameter(no),glsl:_.getParameter(Tu),renderer:_.getParameter(Zl),vendor:_.getParameter(Kl),version:_.getParameter(Ra),readFloat:Ie,npotTextureCube:ft}};function oo(_){return!!_&&typeof _=="object"&&Array.isArray(_.shape)&&Array.isArray(_.stride)&&typeof _.offset=="number"&&_.shape.length===_.stride.length&&(Array.isArray(_.data)||i(_.data))}var un=function(_){return Object.keys(_).map(function(G){return _[G]})},Da={shape:rf,flatten:hi};function tf(_,G,q){for(var Ce=0;Ce<G;++Ce)q[Ce]=_[Ce]}function ws(_,G,q,Ce){for(var Je=0,Ie=0;Ie<G;++Ie)for(var ke=_[Ie],at=0;at<q;++at)Ce[Je++]=ke[at]}function co(_,G,q,Ce,Je,Ie){for(var ke=Ie,at=0;at<G;++at)for(var lt=_[at],vt=0;vt<q;++vt)for(var ft=lt[vt],it=0;it<Ce;++it)Je[ke++]=ft[it]}function Mu(_,G,q,Ce,Je){for(var Ie=1,ke=q+1;ke<G.length;++ke)Ie*=G[ke];var at=G[q];if(G.length-q===4){var lt=G[q+1],vt=G[q+2],ft=G[q+3];for(ke=0;ke<at;++ke)co(_[ke],lt,vt,ft,Ce,Je),Je+=Ie}else for(ke=0;ke<at;++ke)Mu(_[ke],G,q+1,Ce,Je),Je+=Ie}function hi(_,G,q,Ce){var Je=1;if(G.length)for(var Ie=0;Ie<G.length;++Ie)Je*=G[Ie];else Je=0;var ke=Ce||jr.allocType(q,Je);switch(G.length){case 0:break;case 1:tf(_,G[0],ke);break;case 2:ws(_,G[0],G[1],ke);break;case 3:co(_,G[0],G[1],G[2],ke,0);break;default:Mu(_,G,0,ke,0)}return ke}function rf(_){for(var G=[],q=_;q.length;q=q[0])G.push(q.length);return G}var Yo={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},nf=5120,Ns=5122,Ru=5124,of=5121,Ms=5123,Iu=5125,Du=5126,Cu=5126,Ro={int8:nf,int16:Ns,int32:Ru,uint8:of,uint16:Ms,uint32:Iu,float:Du,float32:Cu},af=35048,Lu=35040,Ca={dynamic:af,stream:Lu,static:35044},La=Da.flatten,Rs=Da.shape,ju=35044,sf=35040,Io=5121,Do=5126,Gn=[];Gn[5120]=1,Gn[5122]=2,Gn[5124]=4,Gn[5121]=1,Gn[5123]=2,Gn[5125]=4,Gn[5126]=4;function ja(_){return Yo[Object.prototype.toString.call(_)]|0}function Bu(_,G){for(var q=0;q<G.length;++q)_[q]=G[q]}function Is(_,G,q,Ce,Je,Ie,ke){for(var at=0,lt=0;lt<q;++lt)for(var vt=0;vt<Ce;++vt)_[at++]=G[Je*lt+Ie*vt+ke]}function uf(_,G,q,Ce){var Je=0,Ie={};function ke(be){this.id=Je++,this.buffer=_.createBuffer(),this.type=be,this.usage=ju,this.byteLength=0,this.dimension=1,this.dtype=Io,this.persistentData=null,q.profile&&(this.stats={size:0})}ke.prototype.bind=function(){_.bindBuffer(this.type,this.buffer)},ke.prototype.destroy=function(){St(this)};var at=[];function lt(be,Me){var yt=at.pop();return yt||(yt=new ke(be)),yt.bind(),it(yt,Me,sf,0,1,!1),yt}function vt(be){at.push(be)}function ft(be,Me,yt){be.byteLength=Me.byteLength,_.bufferData(be.type,Me,yt)}function it(be,Me,yt,xt,nt,ct){var ot;if(be.usage=yt,Array.isArray(Me)){if(be.dtype=xt||Do,Me.length>0){var Ze;if(Array.isArray(Me[0])){ot=Rs(Me);for(var Ve=1,ze=1;ze<ot.length;++ze)Ve*=ot[ze];be.dimension=Ve,Ze=La(Me,ot,be.dtype),ft(be,Ze,yt),ct?be.persistentData=Ze:jr.freeType(Ze)}else if(typeof Me[0]=="number"){be.dimension=nt;var At=jr.allocType(be.dtype,Me.length);Bu(At,Me),ft(be,At,yt),ct?be.persistentData=At:jr.freeType(At)}else i(Me[0])?(be.dimension=Me[0].length,be.dtype=xt||ja(Me[0])||Do,Ze=La(Me,[Me.length,Me[0].length],be.dtype),ft(be,Ze,yt),ct?be.persistentData=Ze:jr.freeType(Ze)):L.raise("invalid buffer data")}}else if(i(Me))be.dtype=xt||ja(Me),be.dimension=nt,ft(be,Me,yt),ct&&(be.persistentData=new Uint8Array(new Uint8Array(Me.buffer)));else if(oo(Me)){ot=Me.shape;var ir=Me.stride,mt=Me.offset,et=0,qe=0,rr=0,cr=0;ot.length===1?(et=ot[0],qe=1,rr=ir[0],cr=0):ot.length===2?(et=ot[0],qe=ot[1],rr=ir[0],cr=ir[1]):L.raise("invalid shape"),be.dtype=xt||ja(Me.data)||Do,be.dimension=qe;var Gt=jr.allocType(be.dtype,et*qe);Is(Gt,Me.data,et,qe,rr,cr,mt),ft(be,Gt,yt),ct?be.persistentData=Gt:jr.freeType(Gt)}else Me instanceof ArrayBuffer?(be.dtype=Io,be.dimension=nt,ft(be,Me,yt),ct&&(be.persistentData=new Uint8Array(new Uint8Array(Me)))):L.raise("invalid buffer data")}function St(be){G.bufferCount--,Ce(be);var Me=be.buffer;L(Me,"buffer must not be deleted already"),_.deleteBuffer(Me),be.buffer=null,delete Ie[be.id]}function st(be,Me,yt,xt){G.bufferCount++;var nt=new ke(Me);Ie[nt.id]=nt;function ct(Ve){var ze=ju,At=null,ir=0,mt=0,et=1;return Array.isArray(Ve)||i(Ve)||oo(Ve)||Ve instanceof ArrayBuffer?At=Ve:typeof Ve=="number"?ir=Ve|0:Ve&&(L.type(Ve,"object","buffer arguments must be an object, a number or an array"),"data"in Ve&&(L(At===null||Array.isArray(At)||i(At)||oo(At),"invalid data for buffer"),At=Ve.data),"usage"in Ve&&(L.parameter(Ve.usage,Ca,"invalid buffer usage"),ze=Ca[Ve.usage]),"type"in Ve&&(L.parameter(Ve.type,Ro,"invalid buffer type"),mt=Ro[Ve.type]),"dimension"in Ve&&(L.type(Ve.dimension,"number","invalid dimension"),et=Ve.dimension|0),"length"in Ve&&(L.nni(ir,"buffer length must be a nonnegative integer"),ir=Ve.length|0)),nt.bind(),At?it(nt,At,ze,mt,et,xt):(ir&&_.bufferData(nt.type,ir,ze),nt.dtype=mt||Io,nt.usage=ze,nt.dimension=et,nt.byteLength=ir),q.profile&&(nt.stats.size=nt.byteLength*Gn[nt.dtype]),ct}function ot(Ve,ze){L(ze+Ve.byteLength<=nt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Ve.byteLength+" starting from offset "+ze+" to a buffer of size "+nt.byteLength),_.bufferSubData(nt.type,ze,Ve)}function Ze(Ve,ze){var At=(ze||0)|0,ir;if(nt.bind(),i(Ve)||Ve instanceof ArrayBuffer)ot(Ve,At);else if(Array.isArray(Ve)){if(Ve.length>0)if(typeof Ve[0]=="number"){var mt=jr.allocType(nt.dtype,Ve.length);Bu(mt,Ve),ot(mt,At),jr.freeType(mt)}else if(Array.isArray(Ve[0])||i(Ve[0])){ir=Rs(Ve);var et=La(Ve,ir,nt.dtype);ot(et,At),jr.freeType(et)}else L.raise("invalid buffer data")}else if(oo(Ve)){ir=Ve.shape;var qe=Ve.stride,rr=0,cr=0,Gt=0,mr=0;ir.length===1?(rr=ir[0],cr=1,Gt=qe[0],mr=0):ir.length===2?(rr=ir[0],cr=ir[1],Gt=qe[0],mr=qe[1]):L.raise("invalid shape");var ar=Array.isArray(Ve.data)?nt.dtype:ja(Ve.data),yr=jr.allocType(ar,rr*cr);Is(yr,Ve.data,rr,cr,Gt,mr,Ve.offset),ot(yr,At),jr.freeType(yr)}else L.raise("invalid data for buffer subdata");return ct}return yt||ct(be),ct._reglType="buffer",ct._buffer=nt,ct.subdata=Ze,q.profile&&(ct.stats=nt.stats),ct.destroy=function(){St(nt)},ct}function Ot(){un(Ie).forEach(function(be){be.buffer=_.createBuffer(),_.bindBuffer(be.type,be.buffer),_.bufferData(be.type,be.persistentData||be.byteLength,be.usage)})}return q.profile&&(G.getTotalBufferSize=function(){var be=0;return Object.keys(Ie).forEach(function(Me){be+=Ie[Me].stats.size}),be}),{create:st,createStream:lt,destroyStream:vt,clear:function(){un(Ie).forEach(St),at.forEach(St)},getBuffer:function(be){return be&&be._buffer instanceof ke?be._buffer:null},restore:Ot,_initBuffer:it}}var Ba=0,lf=0,ff=1,pi=1,Co=4,cf=4,vi={points:Ba,point:lf,lines:ff,line:pi,triangles:Co,triangle:cf,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},df=0,ho=1,po=4,Wi=5120,yi=5121,Yi=5122,xo=5123,Ko=5124,$n=5125,Vn=34963,Ki=35040,vo=35044;function io(_,G,q,Ce){var Je={},Ie=0,ke={uint8:yi,uint16:xo};G.oes_element_index_uint&&(ke.uint32=$n);function at(Ot){this.id=Ie++,Je[this.id]=this,this.buffer=Ot,this.primType=po,this.vertCount=0,this.type=0}at.prototype.bind=function(){this.buffer.bind()};var lt=[];function vt(Ot){var be=lt.pop();return be||(be=new at(q.create(null,Vn,!0,!1)._buffer)),it(be,Ot,Ki,-1,-1,0,0),be}function ft(Ot){lt.push(Ot)}function it(Ot,be,Me,yt,xt,nt,ct){Ot.buffer.bind();var ot;if(be){var Ze=ct;!ct&&(!i(be)||oo(be)&&!i(be.data))&&(Ze=G.oes_element_index_uint?$n:xo),q._initBuffer(Ot.buffer,be,Me,Ze,3)}else _.bufferData(Vn,nt,Me),Ot.buffer.dtype=ot||yi,Ot.buffer.usage=Me,Ot.buffer.dimension=3,Ot.buffer.byteLength=nt;if(ot=ct,!ct){switch(Ot.buffer.dtype){case yi:case Wi:ot=yi;break;case xo:case Yi:ot=xo;break;case $n:case Ko:ot=$n;break;default:L.raise("unsupported type for element array")}Ot.buffer.dtype=ot}Ot.type=ot,L(ot!==$n||!!G.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Ve=xt;Ve<0&&(Ve=Ot.buffer.byteLength,ot===xo?Ve>>=1:ot===$n&&(Ve>>=2)),Ot.vertCount=Ve;var ze=yt;if(yt<0){ze=po;var At=Ot.buffer.dimension;At===1&&(ze=df),At===2&&(ze=ho),At===3&&(ze=po)}Ot.primType=ze}function St(Ot){Ce.elementsCount--,L(Ot.buffer!==null,"must not double destroy elements"),delete Je[Ot.id],Ot.buffer.destroy(),Ot.buffer=null}function st(Ot,be){var Me=q.create(null,Vn,!0),yt=new at(Me._buffer);Ce.elementsCount++;function xt(nt){if(!nt)Me(),yt.primType=po,yt.vertCount=0,yt.type=yi;else if(typeof nt=="number")Me(nt),yt.primType=po,yt.vertCount=nt|0,yt.type=yi;else{var ct=null,ot=vo,Ze=-1,Ve=-1,ze=0,At=0;Array.isArray(nt)||i(nt)||oo(nt)?ct=nt:(L.type(nt,"object","invalid arguments for elements"),"data"in nt&&(ct=nt.data,L(Array.isArray(ct)||i(ct)||oo(ct),"invalid data for element buffer")),"usage"in nt&&(L.parameter(nt.usage,Ca,"invalid element buffer usage"),ot=Ca[nt.usage]),"primitive"in nt&&(L.parameter(nt.primitive,vi,"invalid element buffer primitive"),Ze=vi[nt.primitive]),"count"in nt&&(L(typeof nt.count=="number"&&nt.count>=0,"invalid vertex count for elements"),Ve=nt.count|0),"type"in nt&&(L.parameter(nt.type,ke,"invalid buffer type"),At=ke[nt.type]),"length"in nt?ze=nt.length|0:(ze=Ve,At===xo||At===Yi?ze*=2:(At===$n||At===Ko)&&(ze*=4))),it(yt,ct,ot,Ze,Ve,ze,At)}return xt}return xt(Ot),xt._reglType="elements",xt._elements=yt,xt.subdata=function(nt,ct){return Me.subdata(nt,ct),xt},xt.destroy=function(){St(yt)},xt}return{create:st,createStream:vt,destroyStream:ft,getElements:function(Ot){return typeof Ot=="function"&&Ot._elements instanceof at?Ot._elements:null},clear:function(){un(Je).forEach(St)}}}var gi=new Float32Array(1),jn=new Uint32Array(gi.buffer),hf=5123;function Fu(_){for(var G=jr.allocType(hf,_.length),q=0;q<_.length;++q)if(isNaN(_[q]))G[q]=65535;else if(_[q]===1/0)G[q]=31744;else if(_[q]===-1/0)G[q]=64512;else{gi[0]=_[q];var Ce=jn[0],Je=Ce>>>31<<15,Ie=(Ce<<1>>>24)-127,ke=Ce>>13&(1<<10)-1;if(Ie<-24)G[q]=Je;else if(Ie<-14){var at=-14-Ie;G[q]=Je+(ke+(1<<10)>>at)}else Ie>15?G[q]=Je+31744:G[q]=Je+(Ie+15<<10)+ke}return G}function qr(_){return Array.isArray(_)||i(_)}var Ds=function(_){return!(_&_-1)&&!!_},To=34467,yo=3553,ao=34067,Zi=34069,Lo=6408,Ji=6406,dn=6407,mi=6409,Fa=6410,Cs=32854,Bn=32855,Ls=36194,js=32819,Gu=32820,ku=33635,pf=34042,Ga=6402,ka=34041,Bs=35904,kn=35906,Nn=36193,Zo=33776,Fs=33777,Ua=33778,bi=33779,Ei=35986,Gs=35987,Uu=34798,Qi=35840,za=35841,ks=35842,g=35843,E=36196,A=5121,B=5123,J=5125,he=5126,Xe=10242,Et=10243,Yt=10497,Tr=33071,wr=33648,Ur=10240,Hr=10241,nn=9728,Sn=9729,Vr=9984,Wn=9985,Jo=9986,Ha=9987,zu=33170,qi=4352,Hu=4353,Us=4354,Oi=34046,Qo=3317,ty=37440,ry=37441,ny=37443,zs=37444,Hs=33984,oy=[Vr,Jo,Wn,Ha],Xa=[0,mi,Fa,dn,Lo],go={};go[mi]=go[Ji]=go[Ga]=1,go[ka]=go[Fa]=2,go[dn]=go[Bs]=3,go[Lo]=go[kn]=4;function $a(_){return"[object "+_+"]"}var $c=$a("HTMLCanvasElement"),Vc=$a("OffscreenCanvas"),Wc=$a("CanvasRenderingContext2D"),Yc=$a("ImageBitmap"),Kc=$a("HTMLImageElement"),Zc=$a("HTMLVideoElement"),iy=Object.keys(Yo).concat([$c,Vc,Wc,Yc,Kc,Zc]),Va=[];Va[A]=1,Va[he]=4,Va[Nn]=2,Va[B]=2,Va[J]=4;var xn=[];xn[Cs]=2,xn[Bn]=2,xn[Ls]=2,xn[ka]=4,xn[Zo]=.5,xn[Fs]=.5,xn[Ua]=1,xn[bi]=1,xn[Ei]=.5,xn[Gs]=1,xn[Uu]=1,xn[Qi]=.5,xn[za]=.25,xn[ks]=.5,xn[g]=.25,xn[E]=.5;function Jc(_){return Array.isArray(_)&&(_.length===0||typeof _[0]=="number")}function Qc(_){if(!Array.isArray(_))return!1;var G=_.length;return!(G===0||!qr(_[0]))}function ea(_){return Object.prototype.toString.call(_)}function qc(_){return ea(_)===$c}function ed(_){return ea(_)===Vc}function ay(_){return ea(_)===Wc}function sy(_){return ea(_)===Yc}function uy(_){return ea(_)===Kc}function ly(_){return ea(_)===Zc}function vf(_){if(!_)return!1;var G=ea(_);return iy.indexOf(G)>=0?!0:Jc(_)||Qc(_)||oo(_)}function td(_){return Yo[Object.prototype.toString.call(_)]|0}function fy(_,G){var q=G.length;switch(_.type){case A:case B:case J:case he:var Ce=jr.allocType(_.type,q);Ce.set(G),_.data=Ce;break;case Nn:_.data=Fu(G);break;default:L.raise("unsupported texture type, must specify a typed array")}}function rd(_,G){return jr.allocType(_.type===Nn?he:_.type,G)}function Jr(_,G){_.type===Nn?(_.data=Fu(G),jr.freeType(G)):_.data=G}function cy(_,G,q,Ce,Je,Ie){for(var ke=_.width,at=_.height,lt=_.channels,vt=ke*at*lt,ft=rd(_,vt),it=0,St=0;St<at;++St)for(var st=0;st<ke;++st)for(var Ot=0;Ot<lt;++Ot)ft[it++]=G[q*st+Ce*St+Je*Ot+Ie];Jr(_,ft)}function Xu(_,G,q,Ce,Je,Ie){var ke;if(typeof xn[_]<"u"?ke=xn[_]:ke=go[_]*Va[G],Ie&&(ke*=6),Je){for(var at=0,lt=q;lt>=1;)at+=ke*lt*lt,lt/=2;return at}else return ke*q*Ce}function dy(_,G,q,Ce,Je,Ie,ke){var at={"don't care":qi,"dont care":qi,nice:Us,fast:Hu},lt={repeat:Yt,clamp:Tr,mirror:wr},vt={nearest:nn,linear:Sn},ft=u({mipmap:Ha,"nearest mipmap nearest":Vr,"linear mipmap nearest":Wn,"nearest mipmap linear":Jo,"linear mipmap linear":Ha},vt),it={none:0,browser:zs},St={uint8:A,rgba4:js,rgb565:ku,"rgb5 a1":Gu},st={alpha:Ji,luminance:mi,"luminance alpha":Fa,rgb:dn,rgba:Lo,rgba4:Cs,"rgb5 a1":Bn,rgb565:Ls},Ot={};G.ext_srgb&&(st.srgb=Bs,st.srgba=kn),G.oes_texture_float&&(St.float32=St.float=he),G.oes_texture_half_float&&(St.float16=St["half float"]=Nn),G.webgl_depth_texture&&(u(st,{depth:Ga,"depth stencil":ka}),u(St,{uint16:B,uint32:J,"depth stencil":pf})),G.webgl_compressed_texture_s3tc&&u(Ot,{"rgb s3tc dxt1":Zo,"rgba s3tc dxt1":Fs,"rgba s3tc dxt3":Ua,"rgba s3tc dxt5":bi}),G.webgl_compressed_texture_atc&&u(Ot,{"rgb atc":Ei,"rgba atc explicit alpha":Gs,"rgba atc interpolated alpha":Uu}),G.webgl_compressed_texture_pvrtc&&u(Ot,{"rgb pvrtc 4bppv1":Qi,"rgb pvrtc 2bppv1":za,"rgba pvrtc 4bppv1":ks,"rgba pvrtc 2bppv1":g}),G.webgl_compressed_texture_etc1&&(Ot["rgb etc1"]=E);var be=Array.prototype.slice.call(_.getParameter(To));Object.keys(Ot).forEach(function(K){var je=Ot[K];be.indexOf(je)>=0&&(st[K]=je)});var Me=Object.keys(st);q.textureFormats=Me;var yt=[];Object.keys(st).forEach(function(K){var je=st[K];yt[je]=K});var xt=[];Object.keys(St).forEach(function(K){var je=St[K];xt[je]=K});var nt=[];Object.keys(vt).forEach(function(K){var je=vt[K];nt[je]=K});var ct=[];Object.keys(ft).forEach(function(K){var je=ft[K];ct[je]=K});var ot=[];Object.keys(lt).forEach(function(K){var je=lt[K];ot[je]=K});var Ze=Me.reduce(function(K,je){var Pe=st[je];return Pe===mi||Pe===Ji||Pe===mi||Pe===Fa||Pe===Ga||Pe===ka||G.ext_srgb&&(Pe===Bs||Pe===kn)?K[Pe]=Pe:Pe===Bn||je.indexOf("rgba")>=0?K[Pe]=Lo:K[Pe]=dn,K},{});function Ve(){this.internalformat=Lo,this.format=Lo,this.type=A,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=zs,this.width=0,this.height=0,this.channels=0}function ze(K,je){K.internalformat=je.internalformat,K.format=je.format,K.type=je.type,K.compressed=je.compressed,K.premultiplyAlpha=je.premultiplyAlpha,K.flipY=je.flipY,K.unpackAlignment=je.unpackAlignment,K.colorSpace=je.colorSpace,K.width=je.width,K.height=je.height,K.channels=je.channels}function At(K,je){if(!(typeof je!="object"||!je)){if("premultiplyAlpha"in je&&(L.type(je.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),K.premultiplyAlpha=je.premultiplyAlpha),"flipY"in je&&(L.type(je.flipY,"boolean","invalid texture flip"),K.flipY=je.flipY),"alignment"in je&&(L.oneOf(je.alignment,[1,2,4,8],"invalid texture unpack alignment"),K.unpackAlignment=je.alignment),"colorSpace"in je&&(L.parameter(je.colorSpace,it,"invalid colorSpace"),K.colorSpace=it[je.colorSpace]),"type"in je){var Pe=je.type;L(G.oes_texture_float||!(Pe==="float"||Pe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),L(G.oes_texture_half_float||!(Pe==="half float"||Pe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),L(G.webgl_depth_texture||!(Pe==="uint16"||Pe==="uint32"||Pe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(Pe,St,"invalid texture type"),K.type=St[Pe]}var Rt=K.width,br=K.height,H=K.channels,C=!1;"shape"in je?(L(Array.isArray(je.shape)&&je.shape.length>=2,"shape must be an array"),Rt=je.shape[0],br=je.shape[1],je.shape.length===3&&(H=je.shape[2],L(H>0&&H<=4,"invalid number of channels"),C=!0),L(Rt>=0&&Rt<=q.maxTextureSize,"invalid width"),L(br>=0&&br<=q.maxTextureSize,"invalid height")):("radius"in je&&(Rt=br=je.radius,L(Rt>=0&&Rt<=q.maxTextureSize,"invalid radius")),"width"in je&&(Rt=je.width,L(Rt>=0&&Rt<=q.maxTextureSize,"invalid width")),"height"in je&&(br=je.height,L(br>=0&&br<=q.maxTextureSize,"invalid height")),"channels"in je&&(H=je.channels,L(H>0&&H<=4,"invalid number of channels"),C=!0)),K.width=Rt|0,K.height=br|0,K.channels=H|0;var ie=!1;if("format"in je){var ve=je.format;L(G.webgl_depth_texture||!(ve==="depth"||ve==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),L.parameter(ve,st,"invalid texture format");var Se=K.internalformat=st[ve];K.format=Ze[Se],ve in St&&("type"in je||(K.type=St[ve])),ve in Ot&&(K.compressed=!0),ie=!0}!C&&ie?K.channels=go[K.format]:C&&!ie?K.channels!==Xa[K.format]&&(K.format=K.internalformat=Xa[K.channels]):ie&&C&&L(K.channels===go[K.format],"number of channels inconsistent with specified format")}}function ir(K){_.pixelStorei(ty,K.flipY),_.pixelStorei(ry,K.premultiplyAlpha),_.pixelStorei(ny,K.colorSpace),_.pixelStorei(Qo,K.unpackAlignment)}function mt(){Ve.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function et(K,je){var Pe=null;if(vf(je)?Pe=je:je&&(L.type(je,"object","invalid pixel data type"),At(K,je),"x"in je&&(K.xOffset=je.x|0),"y"in je&&(K.yOffset=je.y|0),vf(je.data)&&(Pe=je.data)),L(!K.compressed||Pe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),je.copy){L(!Pe,"can not specify copy and data field for the same texture");var Rt=Je.viewportWidth,br=Je.viewportHeight;K.width=K.width||Rt-K.xOffset,K.height=K.height||br-K.yOffset,K.needsCopy=!0,L(K.xOffset>=0&&K.xOffset<Rt&&K.yOffset>=0&&K.yOffset<br&&K.width>0&&K.width<=Rt&&K.height>0&&K.height<=br,"copy texture read out of bounds")}else if(!Pe)K.width=K.width||1,K.height=K.height||1,K.channels=K.channels||4;else if(i(Pe))K.channels=K.channels||4,K.data=Pe,!("type"in je)&&K.type===A&&(K.type=td(Pe));else if(Jc(Pe))K.channels=K.channels||4,fy(K,Pe),K.alignment=1,K.needsFree=!0;else if(oo(Pe)){var H=Pe.data;!Array.isArray(H)&&K.type===A&&(K.type=td(H));var C=Pe.shape,ie=Pe.stride,ve,Se,ue,ae,fe,X;C.length===3?(ue=C[2],X=ie[2]):(L(C.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ue=1,X=1),ve=C[0],Se=C[1],ae=ie[0],fe=ie[1],K.alignment=1,K.width=ve,K.height=Se,K.channels=ue,K.format=K.internalformat=Xa[ue],K.needsFree=!0,cy(K,H,ae,fe,X,Pe.offset)}else if(qc(Pe)||ed(Pe)||ay(Pe))qc(Pe)||ed(Pe)?K.element=Pe:K.element=Pe.canvas,K.width=K.element.width,K.height=K.element.height,K.channels=4;else if(sy(Pe))K.element=Pe,K.width=Pe.width,K.height=Pe.height,K.channels=4;else if(uy(Pe))K.element=Pe,K.width=Pe.naturalWidth,K.height=Pe.naturalHeight,K.channels=4;else if(ly(Pe))K.element=Pe,K.width=Pe.videoWidth,K.height=Pe.videoHeight,K.channels=4;else if(Qc(Pe)){var oe=K.width||Pe[0].length,z=K.height||Pe.length,de=K.channels;qr(Pe[0][0])?de=de||Pe[0][0].length:de=de||1;for(var Te=Da.shape(Pe),Ye=1,Qe=0;Qe<Te.length;++Qe)Ye*=Te[Qe];var $e=rd(K,Ye);Da.flatten(Pe,Te,"",$e),Jr(K,$e),K.alignment=1,K.width=oe,K.height=z,K.channels=de,K.format=K.internalformat=Xa[de],K.needsFree=!0}K.type===he?L(q.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):K.type===Nn&&L(q.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function qe(K,je,Pe){var Rt=K.element,br=K.data,H=K.internalformat,C=K.format,ie=K.type,ve=K.width,Se=K.height;ir(K),Rt?_.texImage2D(je,Pe,C,C,ie,Rt):K.compressed?_.compressedTexImage2D(je,Pe,H,ve,Se,0,br):K.needsCopy?(Ce(),_.copyTexImage2D(je,Pe,C,K.xOffset,K.yOffset,ve,Se,0)):_.texImage2D(je,Pe,C,ve,Se,0,C,ie,br||null)}function rr(K,je,Pe,Rt,br){var H=K.element,C=K.data,ie=K.internalformat,ve=K.format,Se=K.type,ue=K.width,ae=K.height;ir(K),H?_.texSubImage2D(je,br,Pe,Rt,ve,Se,H):K.compressed?_.compressedTexSubImage2D(je,br,Pe,Rt,ie,ue,ae,C):K.needsCopy?(Ce(),_.copyTexSubImage2D(je,br,Pe,Rt,K.xOffset,K.yOffset,ue,ae)):_.texSubImage2D(je,br,Pe,Rt,ue,ae,ve,Se,C)}var cr=[];function Gt(){return cr.pop()||new mt}function mr(K){K.needsFree&&jr.freeType(K.data),mt.call(K),cr.push(K)}function ar(){Ve.call(this),this.genMipmaps=!1,this.mipmapHint=qi,this.mipmask=0,this.images=Array(16)}function yr(K,je,Pe){var Rt=K.images[0]=Gt();K.mipmask=1,Rt.width=K.width=je,Rt.height=K.height=Pe,Rt.channels=K.channels=4}function Ar(K,je){var Pe=null;if(vf(je))Pe=K.images[0]=Gt(),ze(Pe,K),et(Pe,je),K.mipmask=1;else if(At(K,je),Array.isArray(je.mipmap))for(var Rt=je.mipmap,br=0;br<Rt.length;++br)Pe=K.images[br]=Gt(),ze(Pe,K),Pe.width>>=br,Pe.height>>=br,et(Pe,Rt[br]),K.mipmask|=1<<br;else Pe=K.images[0]=Gt(),ze(Pe,K),et(Pe,je),K.mipmask=1;ze(K,K.images[0]),K.compressed&&(K.internalformat===Zo||K.internalformat===Fs||K.internalformat===Ua||K.internalformat===bi)&&L(K.width%4===0&&K.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function fn(K,je){for(var Pe=K.images,Rt=0;Rt<Pe.length;++Rt){if(!Pe[Rt])return;qe(Pe[Rt],je,Rt)}}var vn=[];function Or(){var K=vn.pop()||new ar;Ve.call(K),K.mipmask=0;for(var je=0;je<16;++je)K.images[je]=null;return K}function hn(K){for(var je=K.images,Pe=0;Pe<je.length;++Pe)je[Pe]&&mr(je[Pe]),je[Pe]=null;vn.push(K)}function Wr(){this.minFilter=nn,this.magFilter=nn,this.wrapS=Tr,this.wrapT=Tr,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=qi}function Yr(K,je){if("min"in je){var Pe=je.min;L.parameter(Pe,ft),K.minFilter=ft[Pe],oy.indexOf(K.minFilter)>=0&&!("faces"in je)&&(K.genMipmaps=!0)}if("mag"in je){var Rt=je.mag;L.parameter(Rt,vt),K.magFilter=vt[Rt]}var br=K.wrapS,H=K.wrapT;if("wrap"in je){var C=je.wrap;typeof C=="string"?(L.parameter(C,lt),br=H=lt[C]):Array.isArray(C)&&(L.parameter(C[0],lt),L.parameter(C[1],lt),br=lt[C[0]],H=lt[C[1]])}else{if("wrapS"in je){var ie=je.wrapS;L.parameter(ie,lt),br=lt[ie]}if("wrapT"in je){var ve=je.wrapT;L.parameter(ve,lt),H=lt[ve]}}if(K.wrapS=br,K.wrapT=H,"anisotropic"in je){var Se=je.anisotropic;L(typeof Se=="number"&&Se>=1&&Se<=q.maxAnisotropic,"aniso samples must be between 1 and "),K.anisotropic=je.anisotropic}if("mipmap"in je){var ue=!1;switch(typeof je.mipmap){case"string":L.parameter(je.mipmap,at,"invalid mipmap hint"),K.mipmapHint=at[je.mipmap],K.genMipmaps=!0,ue=!0;break;case"boolean":ue=K.genMipmaps=je.mipmap;break;case"object":L(Array.isArray(je.mipmap),"invalid mipmap type"),K.genMipmaps=!1,ue=!0;break;default:L.raise("invalid mipmap type")}ue&&!("min"in je)&&(K.minFilter=Vr)}}function pn(K,je){_.texParameteri(je,Hr,K.minFilter),_.texParameteri(je,Ur,K.magFilter),_.texParameteri(je,Xe,K.wrapS),_.texParameteri(je,Et,K.wrapT),G.ext_texture_filter_anisotropic&&_.texParameteri(je,Oi,K.anisotropic),K.genMipmaps&&(_.hint(zu,K.mipmapHint),_.generateMipmap(je))}var cn=0,bn={},yn=q.maxTextureUnits,Fr=Array(yn).map(function(){return null});function dr(K){Ve.call(this),this.mipmask=0,this.internalformat=Lo,this.id=cn++,this.refCount=1,this.target=K,this.texture=_.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Wr,ke.profile&&(this.stats={size:0})}function Tn(K){_.activeTexture(Hs),_.bindTexture(K.target,K.texture)}function Dr(){var K=Fr[0];K?_.bindTexture(K.target,K.texture):_.bindTexture(yo,null)}function qt(K){var je=K.texture;L(je,"must not double destroy texture");var Pe=K.unit,Rt=K.target;Pe>=0&&(_.activeTexture(Hs+Pe),_.bindTexture(Rt,null),Fr[Pe]=null),_.deleteTexture(je),K.texture=null,K.params=null,K.pixels=null,K.refCount=0,delete bn[K.id],Ie.textureCount--}u(dr.prototype,{bind:function(){var K=this;K.bindCount+=1;var je=K.unit;if(je<0){for(var Pe=0;Pe<yn;++Pe){var Rt=Fr[Pe];if(Rt){if(Rt.bindCount>0)continue;Rt.unit=-1}Fr[Pe]=K,je=Pe;break}je>=yn&&L.raise("insufficient number of texture units"),ke.profile&&Ie.maxTextureUnits<je+1&&(Ie.maxTextureUnits=je+1),K.unit=je,_.activeTexture(Hs+je),_.bindTexture(K.target,K.texture)}return je},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&qt(this)}});function Sr(K,je){var Pe=new dr(yo);bn[Pe.id]=Pe,Ie.textureCount++;function Rt(C,ie){var ve=Pe.texInfo;Wr.call(ve);var Se=Or();return typeof C=="number"?typeof ie=="number"?yr(Se,C|0,ie|0):yr(Se,C|0,C|0):C?(L.type(C,"object","invalid arguments to regl.texture"),Yr(ve,C),Ar(Se,C)):yr(Se,1,1),ve.genMipmaps&&(Se.mipmask=(Se.width<<1)-1),Pe.mipmask=Se.mipmask,ze(Pe,Se),L.texture2D(ve,Se,q),Pe.internalformat=Se.internalformat,Rt.width=Se.width,Rt.height=Se.height,Tn(Pe),fn(Se,yo),pn(ve,yo),Dr(),hn(Se),ke.profile&&(Pe.stats.size=Xu(Pe.internalformat,Pe.type,Se.width,Se.height,ve.genMipmaps,!1)),Rt.format=yt[Pe.internalformat],Rt.type=xt[Pe.type],Rt.mag=nt[ve.magFilter],Rt.min=ct[ve.minFilter],Rt.wrapS=ot[ve.wrapS],Rt.wrapT=ot[ve.wrapT],Rt}function br(C,ie,ve,Se){L(!!C,"must specify image data");var ue=ie|0,ae=ve|0,fe=Se|0,X=Gt();return ze(X,Pe),X.width=0,X.height=0,et(X,C),X.width=X.width||(Pe.width>>fe)-ue,X.height=X.height||(Pe.height>>fe)-ae,L(Pe.type===X.type&&Pe.format===X.format&&Pe.internalformat===X.internalformat,"incompatible format for texture.subimage"),L(ue>=0&&ae>=0&&ue+X.width<=Pe.width&&ae+X.height<=Pe.height,"texture.subimage write out of bounds"),L(Pe.mipmask&1<<fe,"missing mipmap data"),L(X.data||X.element||X.needsCopy,"missing image data"),Tn(Pe),rr(X,yo,ue,ae,fe),Dr(),mr(X),Rt}function H(C,ie){var ve=C|0,Se=ie|0||ve;if(ve===Pe.width&&Se===Pe.height)return Rt;Rt.width=Pe.width=ve,Rt.height=Pe.height=Se,Tn(Pe);for(var ue=0;Pe.mipmask>>ue;++ue){var ae=ve>>ue,fe=Se>>ue;if(!ae||!fe)break;_.texImage2D(yo,ue,Pe.format,ae,fe,0,Pe.format,Pe.type,null)}return Dr(),ke.profile&&(Pe.stats.size=Xu(Pe.internalformat,Pe.type,ve,Se,!1,!1)),Rt}return Rt(K,je),Rt.subimage=br,Rt.resize=H,Rt._reglType="texture2d",Rt._texture=Pe,ke.profile&&(Rt.stats=Pe.stats),Rt.destroy=function(){Pe.decRef()},Rt}function Pr(K,je,Pe,Rt,br,H){var C=new dr(ao);bn[C.id]=C,Ie.cubeCount++;var ie=new Array(6);function ve(ae,fe,X,oe,z,de){var Te,Ye=C.texInfo;for(Wr.call(Ye),Te=0;Te<6;++Te)ie[Te]=Or();if(typeof ae=="number"||!ae){var Qe=ae|0||1;for(Te=0;Te<6;++Te)yr(ie[Te],Qe,Qe)}else if(typeof ae=="object")if(fe)Ar(ie[0],ae),Ar(ie[1],fe),Ar(ie[2],X),Ar(ie[3],oe),Ar(ie[4],z),Ar(ie[5],de);else if(Yr(Ye,ae),At(C,ae),"faces"in ae){var $e=ae.faces;for(L(Array.isArray($e)&&$e.length===6,"cube faces must be a length 6 array"),Te=0;Te<6;++Te)L(typeof $e[Te]=="object"&&!!$e[Te],"invalid input for cube map face"),ze(ie[Te],C),Ar(ie[Te],$e[Te])}else for(Te=0;Te<6;++Te)Ar(ie[Te],ae);else L.raise("invalid arguments to cube map");for(ze(C,ie[0]),q.npotTextureCube||L(Ds(C.width)&&Ds(C.height),"your browser does not support non power or two texture dimensions"),Ye.genMipmaps?C.mipmask=(ie[0].width<<1)-1:C.mipmask=ie[0].mipmask,L.textureCube(C,Ye,ie,q),C.internalformat=ie[0].internalformat,ve.width=ie[0].width,ve.height=ie[0].height,Tn(C),Te=0;Te<6;++Te)fn(ie[Te],Zi+Te);for(pn(Ye,ao),Dr(),ke.profile&&(C.stats.size=Xu(C.internalformat,C.type,ve.width,ve.height,Ye.genMipmaps,!0)),ve.format=yt[C.internalformat],ve.type=xt[C.type],ve.mag=nt[Ye.magFilter],ve.min=ct[Ye.minFilter],ve.wrapS=ot[Ye.wrapS],ve.wrapT=ot[Ye.wrapT],Te=0;Te<6;++Te)hn(ie[Te]);return ve}function Se(ae,fe,X,oe,z){L(!!fe,"must specify image data"),L(typeof ae=="number"&&ae===(ae|0)&&ae>=0&&ae<6,"invalid face");var de=X|0,Te=oe|0,Ye=z|0,Qe=Gt();return ze(Qe,C),Qe.width=0,Qe.height=0,et(Qe,fe),Qe.width=Qe.width||(C.width>>Ye)-de,Qe.height=Qe.height||(C.height>>Ye)-Te,L(C.type===Qe.type&&C.format===Qe.format&&C.internalformat===Qe.internalformat,"incompatible format for texture.subimage"),L(de>=0&&Te>=0&&de+Qe.width<=C.width&&Te+Qe.height<=C.height,"texture.subimage write out of bounds"),L(C.mipmask&1<<Ye,"missing mipmap data"),L(Qe.data||Qe.element||Qe.needsCopy,"missing image data"),Tn(C),rr(Qe,Zi+ae,de,Te,Ye),Dr(),mr(Qe),ve}function ue(ae){var fe=ae|0;if(fe!==C.width){ve.width=C.width=fe,ve.height=C.height=fe,Tn(C);for(var X=0;X<6;++X)for(var oe=0;C.mipmask>>oe;++oe)_.texImage2D(Zi+X,oe,C.format,fe>>oe,fe>>oe,0,C.format,C.type,null);return Dr(),ke.profile&&(C.stats.size=Xu(C.internalformat,C.type,ve.width,ve.height,!1,!0)),ve}}return ve(K,je,Pe,Rt,br,H),ve.subimage=Se,ve.resize=ue,ve._reglType="textureCube",ve._texture=C,ke.profile&&(ve.stats=C.stats),ve.destroy=function(){C.decRef()},ve}function an(){for(var K=0;K<yn;++K)_.activeTexture(Hs+K),_.bindTexture(yo,null),Fr[K]=null;un(bn).forEach(qt),Ie.cubeCount=0,Ie.textureCount=0}ke.profile&&(Ie.getTotalTextureSize=function(){var K=0;return Object.keys(bn).forEach(function(je){K+=bn[je].stats.size}),K});function Fo(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null)}un(bn).forEach(function(Pe){Pe.texture=_.createTexture(),_.bindTexture(Pe.target,Pe.texture);for(var Rt=0;Rt<32;++Rt)if(Pe.mipmask&1<<Rt)if(Pe.target===yo)_.texImage2D(yo,Rt,Pe.internalformat,Pe.width>>Rt,Pe.height>>Rt,0,Pe.internalformat,Pe.type,null);else for(var br=0;br<6;++br)_.texImage2D(Zi+br,Rt,Pe.internalformat,Pe.width>>Rt,Pe.height>>Rt,0,Pe.internalformat,Pe.type,null);pn(Pe.texInfo,Pe.target)})}function da(){for(var K=0;K<yn;++K){var je=Fr[K];je&&(je.bindCount=0,je.unit=-1,Fr[K]=null),_.activeTexture(Hs+K),_.bindTexture(yo,null),_.bindTexture(ao,null)}}return{create2D:Sr,createCube:Pr,clear:an,getTexture:function(K){return null},restore:Fo,refresh:da}}var jo=36161,qo=32854,yf=32855,nd=36194,$u=33189,od=36168,id=34041,ad=35907,gf=34836,sd=34842,ud=34843,Yn=[];Yn[qo]=2,Yn[yf]=2,Yn[nd]=2,Yn[$u]=2,Yn[od]=1,Yn[id]=4,Yn[ad]=4,Yn[gf]=16,Yn[sd]=8,Yn[ud]=6;function ld(_,G,q){return Yn[_]*G*q}var fd=function(_,G,q,Ce,Je){var Ie={rgba4:qo,rgb565:nd,"rgb5 a1":yf,depth:$u,stencil:od,"depth stencil":id};G.ext_srgb&&(Ie.srgba=ad),G.ext_color_buffer_half_float&&(Ie.rgba16f=sd,Ie.rgb16f=ud),G.webgl_color_buffer_float&&(Ie.rgba32f=gf);var ke=[];Object.keys(Ie).forEach(function(st){var Ot=Ie[st];ke[Ot]=st});var at=0,lt={};function vt(st){this.id=at++,this.refCount=1,this.renderbuffer=st,this.format=qo,this.width=0,this.height=0,Je.profile&&(this.stats={size:0})}vt.prototype.decRef=function(){--this.refCount<=0&&ft(this)};function ft(st){var Ot=st.renderbuffer;L(Ot,"must not double destroy renderbuffer"),_.bindRenderbuffer(jo,null),_.deleteRenderbuffer(Ot),st.renderbuffer=null,st.refCount=0,delete lt[st.id],Ce.renderbufferCount--}function it(st,Ot){var be=new vt(_.createRenderbuffer());lt[be.id]=be,Ce.renderbufferCount++;function Me(xt,nt){var ct=0,ot=0,Ze=qo;if(typeof xt=="object"&&xt){var Ve=xt;if("shape"in Ve){var ze=Ve.shape;L(Array.isArray(ze)&&ze.length>=2,"invalid renderbuffer shape"),ct=ze[0]|0,ot=ze[1]|0}else"radius"in Ve&&(ct=ot=Ve.radius|0),"width"in Ve&&(ct=Ve.width|0),"height"in Ve&&(ot=Ve.height|0);"format"in Ve&&(L.parameter(Ve.format,Ie,"invalid renderbuffer format"),Ze=Ie[Ve.format])}else typeof xt=="number"?(ct=xt|0,typeof nt=="number"?ot=nt|0:ot=ct):xt?L.raise("invalid arguments to renderbuffer constructor"):ct=ot=1;if(L(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),!(ct===be.width&&ot===be.height&&Ze===be.format))return Me.width=be.width=ct,Me.height=be.height=ot,be.format=Ze,_.bindRenderbuffer(jo,be.renderbuffer),_.renderbufferStorage(jo,Ze,ct,ot),L(_.getError()===0,"invalid render buffer format"),Je.profile&&(be.stats.size=ld(be.format,be.width,be.height)),Me.format=ke[be.format],Me}function yt(xt,nt){var ct=xt|0,ot=nt|0||ct;return ct===be.width&&ot===be.height||(L(ct>0&&ot>0&&ct<=q.maxRenderbufferSize&&ot<=q.maxRenderbufferSize,"invalid renderbuffer size"),Me.width=be.width=ct,Me.height=be.height=ot,_.bindRenderbuffer(jo,be.renderbuffer),_.renderbufferStorage(jo,be.format,ct,ot),L(_.getError()===0,"invalid render buffer format"),Je.profile&&(be.stats.size=ld(be.format,be.width,be.height))),Me}return Me(st,Ot),Me.resize=yt,Me._reglType="renderbuffer",Me._renderbuffer=be,Je.profile&&(Me.stats=be.stats),Me.destroy=function(){be.decRef()},Me}Je.profile&&(Ce.getTotalRenderbufferSize=function(){var st=0;return Object.keys(lt).forEach(function(Ot){st+=lt[Ot].stats.size}),st});function St(){un(lt).forEach(function(st){st.renderbuffer=_.createRenderbuffer(),_.bindRenderbuffer(jo,st.renderbuffer),_.renderbufferStorage(jo,st.format,st.width,st.height)}),_.bindRenderbuffer(jo,null)}return{create:it,clear:function(){un(lt).forEach(ft)},restore:St}},ei=36160,mf=36161,ta=3553,Vu=34069,cd=36064,dd=36096,hd=36128,Si=33306,pd=36053,Wa=36054,hy=36055,bf=36057,py=36061,vy=36193,yy=5121,gy=5126,vd=6407,yd=6408,Ef=6402,my=[vd,yd],Xs=[];Xs[yd]=4,Xs[vd]=3;var Wu=[];Wu[yy]=1,Wu[gy]=4,Wu[vy]=2;var Of=32854,by=32855,Sf=36194,gd=33189,Ey=36168,xf=34041,md=35907,bd=34836,Ed=34842,Oy=34843,Sy=[Of,by,Sf,md,Ed,Oy,bd],Ya={};Ya[pd]="complete",Ya[Wa]="incomplete attachment",Ya[bf]="incomplete dimensions",Ya[hy]="incomplete, missing attachment",Ya[py]="unsupported";function xy(_,G,q,Ce,Je,Ie){var ke={cur:null,next:null,dirty:!1,setFBO:null},at=["rgba"],lt=["rgba4","rgb565","rgb5 a1"];G.ext_srgb&&lt.push("srgba"),G.ext_color_buffer_half_float&&lt.push("rgba16f","rgb16f"),G.webgl_color_buffer_float&&lt.push("rgba32f");var vt=["uint8"];G.oes_texture_half_float&&vt.push("half float","float16"),G.oes_texture_float&&vt.push("float","float32");function ft(mt,et,qe){this.target=mt,this.texture=et,this.renderbuffer=qe;var rr=0,cr=0;et?(rr=et.width,cr=et.height):qe&&(rr=qe.width,cr=qe.height),this.width=rr,this.height=cr}function it(mt){mt&&(mt.texture&&mt.texture._texture.decRef(),mt.renderbuffer&&mt.renderbuffer._renderbuffer.decRef())}function St(mt,et,qe){if(mt)if(mt.texture){var rr=mt.texture._texture,cr=Math.max(1,rr.width),Gt=Math.max(1,rr.height);L(cr===et&&Gt===qe,"inconsistent width/height for supplied texture"),rr.refCount+=1}else{var mr=mt.renderbuffer._renderbuffer;L(mr.width===et&&mr.height===qe,"inconsistent width/height for renderbuffer"),mr.refCount+=1}}function st(mt,et){et&&(et.texture?_.framebufferTexture2D(ei,mt,et.target,et.texture._texture.texture,0):_.framebufferRenderbuffer(ei,mt,mf,et.renderbuffer._renderbuffer.renderbuffer))}function Ot(mt){var et=ta,qe=null,rr=null,cr=mt;typeof mt=="object"&&(cr=mt.data,"target"in mt&&(et=mt.target|0)),L.type(cr,"function","invalid attachment data");var Gt=cr._reglType;return Gt==="texture2d"?(qe=cr,L(et===ta)):Gt==="textureCube"?(qe=cr,L(et>=Vu&&et<Vu+6,"invalid cube map target")):Gt==="renderbuffer"?(rr=cr,et=mf):L.raise("invalid regl object for attachment"),new ft(et,qe,rr)}function be(mt,et,qe,rr,cr){if(qe){var Gt=Ce.create2D({width:mt,height:et,format:rr,type:cr});return Gt._texture.refCount=0,new ft(ta,Gt,null)}else{var mr=Je.create({width:mt,height:et,format:rr});return mr._renderbuffer.refCount=0,new ft(mf,null,mr)}}function Me(mt){return mt&&(mt.texture||mt.renderbuffer)}function yt(mt,et,qe){mt&&(mt.texture?mt.texture.resize(et,qe):mt.renderbuffer&&mt.renderbuffer.resize(et,qe),mt.width=et,mt.height=qe)}var xt=0,nt={};function ct(){this.id=xt++,nt[this.id]=this,this.framebuffer=_.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ot(mt){mt.colorAttachments.forEach(it),it(mt.depthAttachment),it(mt.stencilAttachment),it(mt.depthStencilAttachment)}function Ze(mt){var et=mt.framebuffer;L(et,"must not double destroy framebuffer"),_.deleteFramebuffer(et),mt.framebuffer=null,Ie.framebufferCount--,delete nt[mt.id]}function Ve(mt){var et;_.bindFramebuffer(ei,mt.framebuffer);var qe=mt.colorAttachments;for(et=0;et<qe.length;++et)st(cd+et,qe[et]);for(et=qe.length;et<q.maxColorAttachments;++et)_.framebufferTexture2D(ei,cd+et,ta,null,0);_.framebufferTexture2D(ei,Si,ta,null,0),_.framebufferTexture2D(ei,dd,ta,null,0),_.framebufferTexture2D(ei,hd,ta,null,0),st(dd,mt.depthAttachment),st(hd,mt.stencilAttachment),st(Si,mt.depthStencilAttachment);var rr=_.checkFramebufferStatus(ei);!_.isContextLost()&&rr!==pd&&L.raise("framebuffer configuration not supported, status = "+Ya[rr]),_.bindFramebuffer(ei,ke.next?ke.next.framebuffer:null),ke.cur=ke.next,_.getError()}function ze(mt,et){var qe=new ct;Ie.framebufferCount++;function rr(Gt,mr){var ar;L(ke.next!==qe,"can not update framebuffer which is currently in use");var yr=0,Ar=0,fn=!0,vn=!0,Or=null,hn=!0,Wr="rgba",Yr="uint8",pn=1,cn=null,bn=null,yn=null,Fr=!1;if(typeof Gt=="number")yr=Gt|0,Ar=mr|0||yr;else if(!Gt)yr=Ar=1;else{L.type(Gt,"object","invalid arguments for framebuffer");var dr=Gt;if("shape"in dr){var Tn=dr.shape;L(Array.isArray(Tn)&&Tn.length>=2,"invalid shape for framebuffer"),yr=Tn[0],Ar=Tn[1]}else"radius"in dr&&(yr=Ar=dr.radius),"width"in dr&&(yr=dr.width),"height"in dr&&(Ar=dr.height);("color"in dr||"colors"in dr)&&(Or=dr.color||dr.colors,Array.isArray(Or)&&L(Or.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),Or||("colorCount"in dr&&(pn=dr.colorCount|0,L(pn>0,"invalid color buffer count")),"colorTexture"in dr&&(hn=!!dr.colorTexture,Wr="rgba4"),"colorType"in dr&&(Yr=dr.colorType,hn?(L(G.oes_texture_float||!(Yr==="float"||Yr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),L(G.oes_texture_half_float||!(Yr==="half float"||Yr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Yr==="half float"||Yr==="float16"?(L(G.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Wr="rgba16f"):(Yr==="float"||Yr==="float32")&&(L(G.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Wr="rgba32f"),L.oneOf(Yr,vt,"invalid color type")),"colorFormat"in dr&&(Wr=dr.colorFormat,at.indexOf(Wr)>=0?hn=!0:lt.indexOf(Wr)>=0?hn=!1:hn?L.oneOf(dr.colorFormat,at,"invalid color format for texture"):L.oneOf(dr.colorFormat,lt,"invalid color format for renderbuffer"))),("depthTexture"in dr||"depthStencilTexture"in dr)&&(Fr=!!(dr.depthTexture||dr.depthStencilTexture),L(!Fr||G.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in dr&&(typeof dr.depth=="boolean"?fn=dr.depth:(cn=dr.depth,vn=!1)),"stencil"in dr&&(typeof dr.stencil=="boolean"?vn=dr.stencil:(bn=dr.stencil,fn=!1)),"depthStencil"in dr&&(typeof dr.depthStencil=="boolean"?fn=vn=dr.depthStencil:(yn=dr.depthStencil,fn=!1,vn=!1))}var Dr=null,qt=null,Sr=null,Pr=null;if(Array.isArray(Or))Dr=Or.map(Ot);else if(Or)Dr=[Ot(Or)];else for(Dr=new Array(pn),ar=0;ar<pn;++ar)Dr[ar]=be(yr,Ar,hn,Wr,Yr);L(G.webgl_draw_buffers||Dr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),L(Dr.length<=q.maxColorAttachments,"too many color attachments, not supported"),yr=yr||Dr[0].width,Ar=Ar||Dr[0].height,cn?qt=Ot(cn):fn&&!vn&&(qt=be(yr,Ar,Fr,"depth","uint32")),bn?Sr=Ot(bn):vn&&!fn&&(Sr=be(yr,Ar,!1,"stencil","uint8")),yn?Pr=Ot(yn):!cn&&!bn&&vn&&fn&&(Pr=be(yr,Ar,Fr,"depth stencil","depth stencil")),L(!!cn+!!bn+!!yn<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var an=null;for(ar=0;ar<Dr.length;++ar)if(St(Dr[ar],yr,Ar),L(!Dr[ar]||Dr[ar].texture&&my.indexOf(Dr[ar].texture._texture.format)>=0||Dr[ar].renderbuffer&&Sy.indexOf(Dr[ar].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+ar+" is invalid"),Dr[ar]&&Dr[ar].texture){var Fo=Xs[Dr[ar].texture._texture.format]*Wu[Dr[ar].texture._texture.type];an===null?an=Fo:L(an===Fo,"all color attachments much have the same number of bits per pixel.")}return St(qt,yr,Ar),L(!qt||qt.texture&&qt.texture._texture.format===Ef||qt.renderbuffer&&qt.renderbuffer._renderbuffer.format===gd,"invalid depth attachment for framebuffer object"),St(Sr,yr,Ar),L(!Sr||Sr.renderbuffer&&Sr.renderbuffer._renderbuffer.format===Ey,"invalid stencil attachment for framebuffer object"),St(Pr,yr,Ar),L(!Pr||Pr.texture&&Pr.texture._texture.format===xf||Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.format===xf,"invalid depth-stencil attachment for framebuffer object"),ot(qe),qe.width=yr,qe.height=Ar,qe.colorAttachments=Dr,qe.depthAttachment=qt,qe.stencilAttachment=Sr,qe.depthStencilAttachment=Pr,rr.color=Dr.map(Me),rr.depth=Me(qt),rr.stencil=Me(Sr),rr.depthStencil=Me(Pr),rr.width=qe.width,rr.height=qe.height,Ve(qe),rr}function cr(Gt,mr){L(ke.next!==qe,"can not resize a framebuffer which is currently in use");var ar=Math.max(Gt|0,1),yr=Math.max(mr|0||ar,1);if(ar===qe.width&&yr===qe.height)return rr;for(var Ar=qe.colorAttachments,fn=0;fn<Ar.length;++fn)yt(Ar[fn],ar,yr);return yt(qe.depthAttachment,ar,yr),yt(qe.stencilAttachment,ar,yr),yt(qe.depthStencilAttachment,ar,yr),qe.width=rr.width=ar,qe.height=rr.height=yr,Ve(qe),rr}return rr(mt,et),u(rr,{resize:cr,_reglType:"framebuffer",_framebuffer:qe,destroy:function(){Ze(qe),ot(qe)},use:function(Gt){ke.setFBO({framebuffer:rr},Gt)}})}function At(mt){var et=Array(6);function qe(cr){var Gt;L(et.indexOf(ke.next)<0,"can not update framebuffer which is currently in use");var mr={color:null},ar=0,yr=null,Ar="rgba",fn="uint8",vn=1;if(typeof cr=="number")ar=cr|0;else if(!cr)ar=1;else{L.type(cr,"object","invalid arguments for framebuffer");var Or=cr;if("shape"in Or){var hn=Or.shape;L(Array.isArray(hn)&&hn.length>=2,"invalid shape for framebuffer"),L(hn[0]===hn[1],"cube framebuffer must be square"),ar=hn[0]}else"radius"in Or&&(ar=Or.radius|0),"width"in Or?(ar=Or.width|0,"height"in Or&&L(Or.height===ar,"must be square")):"height"in Or&&(ar=Or.height|0);("color"in Or||"colors"in Or)&&(yr=Or.color||Or.colors,Array.isArray(yr)&&L(yr.length===1||G.webgl_draw_buffers,"multiple render targets not supported")),yr||("colorCount"in Or&&(vn=Or.colorCount|0,L(vn>0,"invalid color buffer count")),"colorType"in Or&&(L.oneOf(Or.colorType,vt,"invalid color type"),fn=Or.colorType),"colorFormat"in Or&&(Ar=Or.colorFormat,L.oneOf(Or.colorFormat,at,"invalid color format for texture"))),"depth"in Or&&(mr.depth=Or.depth),"stencil"in Or&&(mr.stencil=Or.stencil),"depthStencil"in Or&&(mr.depthStencil=Or.depthStencil)}var Wr;if(yr)if(Array.isArray(yr))for(Wr=[],Gt=0;Gt<yr.length;++Gt)Wr[Gt]=yr[Gt];else Wr=[yr];else{Wr=Array(vn);var Yr={radius:ar,format:Ar,type:fn};for(Gt=0;Gt<vn;++Gt)Wr[Gt]=Ce.createCube(Yr)}for(mr.color=Array(Wr.length),Gt=0;Gt<Wr.length;++Gt){var pn=Wr[Gt];L(typeof pn=="function"&&pn._reglType==="textureCube","invalid cube map"),ar=ar||pn.width,L(pn.width===ar&&pn.height===ar,"invalid cube map shape"),mr.color[Gt]={target:Vu,data:Wr[Gt]}}for(Gt=0;Gt<6;++Gt){for(var cn=0;cn<Wr.length;++cn)mr.color[cn].target=Vu+Gt;Gt>0&&(mr.depth=et[0].depth,mr.stencil=et[0].stencil,mr.depthStencil=et[0].depthStencil),et[Gt]?et[Gt](mr):et[Gt]=ze(mr)}return u(qe,{width:ar,height:ar,color:Wr})}function rr(cr){var Gt,mr=cr|0;if(L(mr>0&&mr<=q.maxCubeMapSize,"invalid radius for cube fbo"),mr===qe.width)return qe;var ar=qe.color;for(Gt=0;Gt<ar.length;++Gt)ar[Gt].resize(mr);for(Gt=0;Gt<6;++Gt)et[Gt].resize(mr);return qe.width=qe.height=mr,qe}return qe(mt),u(qe,{faces:et,resize:rr,_reglType:"framebufferCube",destroy:function(){et.forEach(function(cr){cr.destroy()})}})}function ir(){ke.cur=null,ke.next=null,ke.dirty=!0,un(nt).forEach(function(mt){mt.framebuffer=_.createFramebuffer(),Ve(mt)})}return u(ke,{getFramebuffer:function(mt){if(typeof mt=="function"&&mt._reglType==="framebuffer"){var et=mt._framebuffer;if(et instanceof ct)return et}return null},create:ze,createCube:At,clear:function(){un(nt).forEach(Ze)},restore:ir})}var Ty=5126,xi=34962;function ra(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Ty,this.offset=0,this.stride=0,this.divisor=0}function Ay(_,G,q,Ce,Je){for(var Ie=q.maxAttributes,ke=new Array(Ie),at=0;at<Ie;++at)ke[at]=new ra;var lt=0,vt={},ft={Record:ra,scope:{},state:ke,currentVAO:null,targetVAO:null,restore:St()?nt:function(){},createVAO:ct,getVAO:Ot,destroyBuffer:it,setVAO:St()?be:Me,clear:St()?yt:function(){}};function it(ot){for(var Ze=0;Ze<ke.length;++Ze){var Ve=ke[Ze];Ve.buffer===ot&&(_.disableVertexAttribArray(Ze),Ve.buffer=null)}}function St(){return G.oes_vertex_array_object}function st(){return G.angle_instanced_arrays}function Ot(ot){return typeof ot=="function"&&ot._vao?ot._vao:null}function be(ot){if(ot!==ft.currentVAO){var Ze=St();ot?Ze.bindVertexArrayOES(ot.vao):Ze.bindVertexArrayOES(null),ft.currentVAO=ot}}function Me(ot){if(ot!==ft.currentVAO){if(ot)ot.bindAttrs();else for(var Ze=st(),Ve=0;Ve<ke.length;++Ve){var ze=ke[Ve];ze.buffer?(_.enableVertexAttribArray(Ve),_.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offfset),Ze&&ze.divisor&&Ze.vertexAttribDivisorANGLE(Ve,ze.divisor)):(_.disableVertexAttribArray(Ve),_.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}ft.currentVAO=ot}}function yt(){un(vt).forEach(function(ot){ot.destroy()})}function xt(){this.id=++lt,this.attributes=[];var ot=St();ot?this.vao=ot.createVertexArrayOES():this.vao=null,vt[this.id]=this,this.buffers=[]}xt.prototype.bindAttrs=function(){for(var ot=st(),Ze=this.attributes,Ve=0;Ve<Ze.length;++Ve){var ze=Ze[Ve];ze.buffer?(_.enableVertexAttribArray(Ve),_.bindBuffer(xi,ze.buffer.buffer),_.vertexAttribPointer(Ve,ze.size,ze.type,ze.normalized,ze.stride,ze.offset),ot&&ze.divisor&&ot.vertexAttribDivisorANGLE(Ve,ze.divisor)):(_.disableVertexAttribArray(Ve),_.vertexAttrib4f(Ve,ze.x,ze.y,ze.z,ze.w))}for(var At=Ze.length;At<Ie;++At)_.disableVertexAttribArray(At)},xt.prototype.refresh=function(){var ot=St();ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),ft.currentVAO=this)},xt.prototype.destroy=function(){if(this.vao){var ot=St();this===ft.currentVAO&&(ft.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}vt[this.id]&&(delete vt[this.id],Ce.vaoCount-=1)};function nt(){var ot=St();ot&&un(vt).forEach(function(Ze){Ze.refresh()})}function ct(ot){var Ze=new xt;Ce.vaoCount+=1;function Ve(ze){L(Array.isArray(ze),"arguments to vertex array constructor must be an array"),L(ze.length<Ie,"too many attributes"),L(ze.length>0,"must specify at least one attribute");var At={},ir=Ze.attributes;ir.length=ze.length;for(var mt=0;mt<ze.length;++mt){var et=ze[mt],qe=ir[mt]=new ra,rr=et.data||et;if(Array.isArray(rr)||i(rr)||oo(rr)){var cr;Ze.buffers[mt]&&(cr=Ze.buffers[mt],i(rr)&&cr._buffer.byteLength>=rr.byteLength?cr.subdata(rr):(cr.destroy(),Ze.buffers[mt]=null)),Ze.buffers[mt]||(cr=Ze.buffers[mt]=Je.create(et,xi,!1,!0)),qe.buffer=Je.getBuffer(cr),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1,At[mt]=1}else Je.getBuffer(et)?(qe.buffer=Je.getBuffer(et),qe.size=qe.buffer.dimension|0,qe.normalized=!1,qe.type=qe.buffer.dtype,qe.offset=0,qe.stride=0,qe.divisor=0,qe.state=1):Je.getBuffer(et.buffer)?(qe.buffer=Je.getBuffer(et.buffer),qe.size=(+et.size||qe.buffer.dimension)|0,qe.normalized=!!et.normalized||!1,"type"in et?(L.parameter(et.type,Ro,"invalid buffer type"),qe.type=Ro[et.type]):qe.type=qe.buffer.dtype,qe.offset=(et.offset||0)|0,qe.stride=(et.stride||0)|0,qe.divisor=(et.divisor||0)|0,qe.state=1,L(qe.size>=1&&qe.size<=4,"size must be between 1 and 4"),L(qe.offset>=0,"invalid offset"),L(qe.stride>=0&&qe.stride<=255,"stride must be between 0 and 255"),L(qe.divisor>=0,"divisor must be positive"),L(!qe.divisor||!!G.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in et?(L(mt>0,"first attribute must not be a constant"),qe.x=+et.x||0,qe.y=+et.y||0,qe.z=+et.z||0,qe.w=+et.w||0,qe.state=2):L(!1,"invalid attribute spec for location "+mt)}for(var Gt=0;Gt<Ze.buffers.length;++Gt)!At[Gt]&&Ze.buffers[Gt]&&(Ze.buffers[Gt].destroy(),Ze.buffers[Gt]=null);return Ze.refresh(),Ve}return Ve.destroy=function(){for(var ze=0;ze<Ze.buffers.length;++ze)Ze.buffers[ze]&&Ze.buffers[ze].destroy();Ze.buffers.length=0,Ze.destroy()},Ve._vao=Ze,Ve._reglType="vao",Ve(ot)}return ft}var Tf=35632,Od=35633,Yu=35718,Py=35721;function Sd(_,G,q,Ce){var Je={},Ie={};function ke(be,Me,yt,xt){this.name=be,this.id=Me,this.location=yt,this.info=xt}function at(be,Me){for(var yt=0;yt<be.length;++yt)if(be[yt].id===Me.id){be[yt].location=Me.location;return}be.push(Me)}function lt(be,Me,yt){var xt=be===Tf?Je:Ie,nt=xt[Me];if(!nt){var ct=G.str(Me);nt=_.createShader(be),_.shaderSource(nt,ct),_.compileShader(nt),L.shaderError(_,nt,ct,be,yt),xt[Me]=nt}return nt}var vt={},ft=[],it=0;function St(be,Me){this.id=it++,this.fragId=be,this.vertId=Me,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Ce.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function st(be,Me,yt){var xt,nt,ct=lt(Tf,be.fragId),ot=lt(Od,be.vertId),Ze=be.program=_.createProgram();if(_.attachShader(Ze,ct),_.attachShader(Ze,ot),yt)for(xt=0;xt<yt.length;++xt){var Ve=yt[xt];_.bindAttribLocation(Ze,Ve[0],Ve[1])}_.linkProgram(Ze),L.linkError(_,Ze,G.str(be.fragId),G.str(be.vertId),Me);var ze=_.getProgramParameter(Ze,Yu);Ce.profile&&(be.stats.uniformsCount=ze);var At=be.uniforms;for(xt=0;xt<ze;++xt)if(nt=_.getActiveUniform(Ze,xt),nt)if(nt.size>1)for(var ir=0;ir<nt.size;++ir){var mt=nt.name.replace("[0]","["+ir+"]");at(At,new ke(mt,G.id(mt),_.getUniformLocation(Ze,mt),nt))}else at(At,new ke(nt.name,G.id(nt.name),_.getUniformLocation(Ze,nt.name),nt));var et=_.getProgramParameter(Ze,Py);Ce.profile&&(be.stats.attributesCount=et);var qe=be.attributes;for(xt=0;xt<et;++xt)nt=_.getActiveAttrib(Ze,xt),nt&&at(qe,new ke(nt.name,G.id(nt.name),_.getAttribLocation(Ze,nt.name),nt))}Ce.profile&&(q.getMaxUniformsCount=function(){var be=0;return ft.forEach(function(Me){Me.stats.uniformsCount>be&&(be=Me.stats.uniformsCount)}),be},q.getMaxAttributesCount=function(){var be=0;return ft.forEach(function(Me){Me.stats.attributesCount>be&&(be=Me.stats.attributesCount)}),be});function Ot(){Je={},Ie={};for(var be=0;be<ft.length;++be)st(ft[be],null,ft[be].attributes.map(function(Me){return[Me.location,Me.name]}))}return{clear:function(){var be=_.deleteShader.bind(_);un(Je).forEach(be),Je={},un(Ie).forEach(be),Ie={},ft.forEach(function(Me){_.deleteProgram(Me.program)}),ft.length=0,vt={},q.shaderCount=0},program:function(be,Me,yt,xt){L.command(be>=0,"missing vertex shader",yt),L.command(Me>=0,"missing fragment shader",yt);var nt=vt[Me];nt||(nt=vt[Me]={});var ct=nt[be];if(ct&&(ct.refCount++,!xt))return ct;var ot=new St(Me,be);return q.shaderCount++,st(ot,yt,xt),ct||(nt[be]=ot),ft.push(ot),u(ot,{destroy:function(){if(ot.refCount--,ot.refCount<=0){_.deleteProgram(ot.program);var Ze=ft.indexOf(ot);ft.splice(Ze,1),q.shaderCount--}nt[ot.vertId].refCount<=0&&(_.deleteShader(Ie[ot.vertId]),delete Ie[ot.vertId],delete vt[ot.fragId][ot.vertId]),Object.keys(vt[ot.fragId]).length||(_.deleteShader(Je[ot.fragId]),delete Je[ot.fragId],delete vt[ot.fragId])}})},restore:Ot,shader:lt,frag:-1,vert:-1}}var _y=6408,$s=5121,xd=3333,Ka=5126;function wy(_,G,q,Ce,Je,Ie,ke){function at(ft){var it;G.next===null?(L(Je.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),it=$s):(L(G.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),it=G.next.colorAttachments[0].texture._texture.type,Ie.oes_texture_float?(L(it===$s||it===Ka,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),it===Ka&&L(ke.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):L(it===$s,"Reading from a framebuffer is only allowed for the type 'uint8'"));var St=0,st=0,Ot=Ce.framebufferWidth,be=Ce.framebufferHeight,Me=null;i(ft)?Me=ft:ft&&(L.type(ft,"object","invalid arguments to regl.read()"),St=ft.x|0,st=ft.y|0,L(St>=0&&St<Ce.framebufferWidth,"invalid x offset for regl.read"),L(st>=0&&st<Ce.framebufferHeight,"invalid y offset for regl.read"),Ot=(ft.width||Ce.framebufferWidth-St)|0,be=(ft.height||Ce.framebufferHeight-st)|0,Me=ft.data||null),Me&&(it===$s?L(Me instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):it===Ka&&L(Me instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),L(Ot>0&&Ot+St<=Ce.framebufferWidth,"invalid width for read pixels"),L(be>0&&be+st<=Ce.framebufferHeight,"invalid height for read pixels"),q();var yt=Ot*be*4;return Me||(it===$s?Me=new Uint8Array(yt):it===Ka&&(Me=Me||new Float32Array(yt))),L.isTypedArray(Me,"data buffer for regl.read() must be a typedarray"),L(Me.byteLength>=yt,"data buffer for regl.read() too small"),_.pixelStorei(xd,4),_.readPixels(St,st,Ot,be,_y,it,Me),Me}function lt(ft){var it;return G.setFBO({framebuffer:ft.framebuffer},function(){it=at(ft)}),it}function vt(ft){return!ft||!("framebuffer"in ft)?at(ft):lt(ft)}return vt}function Za(_){return Array.prototype.slice.call(_)}function Ja(_){return Za(_).join("")}function Ny(){var _=0,G=[],q=[];function Ce(it){for(var St=0;St<q.length;++St)if(q[St]===it)return G[St];var st="g"+_++;return G.push(st),q.push(it),st}function Je(){var it=[];function St(){it.push.apply(it,Za(arguments))}var st=[];function Ot(){var be="v"+_++;return st.push(be),arguments.length>0&&(it.push(be,"="),it.push.apply(it,Za(arguments)),it.push(";")),be}return u(St,{def:Ot,toString:function(){return Ja([st.length>0?"var "+st.join(",")+";":"",Ja(it)])}})}function Ie(){var it=Je(),St=Je(),st=it.toString,Ot=St.toString;function be(Me,yt){St(Me,yt,"=",it.def(Me,yt),";")}return u(function(){it.apply(it,Za(arguments))},{def:it.def,entry:it,exit:St,save:be,set:function(Me,yt,xt){be(Me,yt),it(Me,yt,"=",xt,";")},toString:function(){return st()+Ot()}})}function ke(){var it=Ja(arguments),St=Ie(),st=Ie(),Ot=St.toString,be=st.toString;return u(St,{then:function(){return St.apply(St,Za(arguments)),this},else:function(){return st.apply(st,Za(arguments)),this},toString:function(){var Me=be();return Me&&(Me="else{"+Me+"}"),Ja(["if(",it,"){",Ot(),"}",Me])}})}var at=Je(),lt={};function vt(it,St){var st=[];function Ot(){var nt="a"+st.length;return st.push(nt),nt}St=St||0;for(var be=0;be<St;++be)Ot();var Me=Ie(),yt=Me.toString,xt=lt[it]=u(Me,{arg:Ot,toString:function(){return Ja(["function(",st.join(),"){",yt(),"}"])}});return xt}function ft(){var it=['"use strict";',at,"return {"];Object.keys(lt).forEach(function(Ot){it.push('"',Ot,'":',lt[Ot].toString(),",")}),it.push("}");var St=Ja(it).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),st=Function.apply(null,G.concat(St));return st.apply(null,q)}return{global:at,link:Ce,block:Je,proc:vt,scope:Ie,cond:ke,compile:ft}}var Qa="xyzw".split(""),Af=5121,qa=1,Pf=2,_f=0,Ku=1,wf=2,Nf=3,Zu=4,Td=5,Vs=6,Ad="dither",Pd="blend.enable",_d="blend.color",Ws="blend.equation",Mf="blend.func",Ju="depth.enable",wd="depth.func",Nd="depth.range",Md="depth.mask",Rf="colorMask",Rd="cull.enable",Id="cull.face",If="frontFace",Df="lineWidth",Dd="polygonOffset.enable",Qu="polygonOffset.offset",Cf="sample.alpha",Lf="sample.enable",jf="sample.coverage",Cd="stencil.enable",Ld="stencil.mask",Bf="stencil.func",es="stencil.opFront",Ys="stencil.opBack",jd="scissor.enable",Ti="scissor.box",ti="viewport",na="profile",oa="framebuffer",ts="vert",Ks="frag",ia="elements",aa="primitive",sa="count",qu="offset",Zs="instances",Js="vao",Ff="Width",Gf="Height",rs=oa+Ff,ns=oa+Gf,kf=ti+Ff,My=ti+Gf,Bd="drawingBuffer",Fd=Bd+Ff,Gd=Bd+Gf,Ry=[Mf,Ws,Bf,es,Ys,jf,ti,Ti,Qu],os=34962,Iy=34963,Dy=35632,Cy=35633,kd=3553,Ly=34067,Ud=2884,jy=3042,By=3024,Fy=2960,Gy=2929,ky=3089,Uy=32823,zy=32926,Hy=32928,Uf=5126,ua=35664,el=35665,la=35666,zf=5124,is=35667,tl=35668,rl=35669,Hf=35670,fa=35671,nl=35672,ri=35673,Qs=35674,qs=35675,as=35676,eu=35678,ss=35680,zd=4,tu=1028,ca=1029,Hd=2304,Xf=2305,Xy=32775,$y=32776,Vy=519,Ai=7680,Xd=0,$f=1,$d=32774,Wy=513,Vd=36160,Yy=36064,Bo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Vf=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],us={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Pi={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wd={frag:Dy,vert:Cy},Mn={cw:Hd,ccw:Xf};function ol(_){return Array.isArray(_)||i(_)||oo(_)}function Yd(_){return _.sort(function(G,q){return G===ti?-1:q===ti?1:G<q?-1:1})}function Un(_,G,q,Ce){this.thisDep=_,this.contextDep=G,this.propDep=q,this.append=Ce}function _i(_){return _&&!(_.thisDep||_.contextDep||_.propDep)}function ln(_){return new Un(!1,!1,!1,_)}function Kn(_,G){var q=_.type;if(q===_f){var Ce=_.data.length;return new Un(!0,Ce>=1,Ce>=2,G)}else if(q===Zu){var Je=_.data;return new Un(Je.thisDep,Je.contextDep,Je.propDep,G)}else{if(q===Td)return new Un(!1,!1,!1,G);if(q===Vs){for(var Ie=!1,ke=!1,at=!1,lt=0;lt<_.data.length;++lt){var vt=_.data[lt];if(vt.type===Ku)at=!0;else if(vt.type===wf)ke=!0;else if(vt.type===Nf)Ie=!0;else if(vt.type===_f){Ie=!0;var ft=vt.data;ft>=1&&(ke=!0),ft>=2&&(at=!0)}else vt.type===Zu&&(Ie=Ie||vt.data.thisDep,ke=ke||vt.data.contextDep,at=at||vt.data.propDep)}return new Un(Ie,ke,at,G)}else return new Un(q===Nf,q===wf,q===Ku,G)}}var Wf=new Un(!1,!1,!1,function(){});function Ky(_,G,q,Ce,Je,Ie,ke,at,lt,vt,ft,it,St,st,Ot){var be=vt.Record,Me={add:32774,subtract:32778,"reverse subtract":32779};q.ext_blend_minmax&&(Me.min=Xy,Me.max=$y);var yt=q.angle_instanced_arrays,xt=q.webgl_draw_buffers,nt={dirty:!0,profile:Ot.profile},ct={},ot=[],Ze={},Ve={};function ze(H){return H.replace(".","_")}function At(H,C,ie){var ve=ze(H);ot.push(H),ct[ve]=nt[ve]=!!ie,Ze[ve]=C}function ir(H,C,ie){var ve=ze(H);ot.push(H),Array.isArray(ie)?(nt[ve]=ie.slice(),ct[ve]=ie.slice()):nt[ve]=ct[ve]=ie,Ve[ve]=C}At(Ad,By),At(Pd,jy),ir(_d,"blendColor",[0,0,0,0]),ir(Ws,"blendEquationSeparate",[$d,$d]),ir(Mf,"blendFuncSeparate",[$f,Xd,$f,Xd]),At(Ju,Gy,!0),ir(wd,"depthFunc",Wy),ir(Nd,"depthRange",[0,1]),ir(Md,"depthMask",!0),ir(Rf,Rf,[!0,!0,!0,!0]),At(Rd,Ud),ir(Id,"cullFace",ca),ir(If,If,Xf),ir(Df,Df,1),At(Dd,Uy),ir(Qu,"polygonOffset",[0,0]),At(Cf,zy),At(Lf,Hy),ir(jf,"sampleCoverage",[1,!1]),At(Cd,Fy),ir(Ld,"stencilMask",-1),ir(Bf,"stencilFunc",[Vy,0,-1]),ir(es,"stencilOpSeparate",[tu,Ai,Ai,Ai]),ir(Ys,"stencilOpSeparate",[ca,Ai,Ai,Ai]),At(jd,ky),ir(Ti,"scissor",[0,0,_.drawingBufferWidth,_.drawingBufferHeight]),ir(ti,ti,[0,0,_.drawingBufferWidth,_.drawingBufferHeight]);var mt={gl:_,context:St,strings:G,next:ct,current:nt,draw:it,elements:Ie,buffer:Je,shader:ft,attributes:vt.state,vao:vt,uniforms:lt,framebuffer:at,extensions:q,timer:st,isBufferArgs:ol},et={primTypes:vi,compareFuncs:us,blendFuncs:Bo,blendEquations:Me,stencilOps:Pi,glTypes:Ro,orientationType:Mn};L.optional(function(){mt.isArrayLike=qr}),xt&&(et.backBuffer=[ca],et.drawBuffer=ht(Ce.maxDrawbuffers,function(H){return H===0?[0]:ht(H,function(C){return Yy+C})}));var qe=0;function rr(){var H=Ny(),C=H.link,ie=H.global;H.id=qe++,H.batchId="0";var ve=C(mt),Se=H.shared={props:"a0"};Object.keys(mt).forEach(function(oe){Se[oe]=ie.def(ve,".",oe)}),L.optional(function(){H.CHECK=C(L),H.commandStr=L.guessCommand(),H.command=C(H.commandStr),H.assert=function(oe,z,de){oe("if(!(",z,"))",this.CHECK,".commandRaise(",C(de),",",this.command,");")},et.invalidBlendCombinations=Vf});var ue=H.next={},ae=H.current={};Object.keys(Ve).forEach(function(oe){Array.isArray(nt[oe])&&(ue[oe]=ie.def(Se.next,".",oe),ae[oe]=ie.def(Se.current,".",oe))});var fe=H.constants={};Object.keys(et).forEach(function(oe){fe[oe]=ie.def(JSON.stringify(et[oe]))}),H.invoke=function(oe,z){switch(z.type){case _f:var de=["this",Se.context,Se.props,H.batchId];return oe.def(C(z.data),".call(",de.slice(0,Math.max(z.data.length+1,4)),")");case Ku:return oe.def(Se.props,z.data);case wf:return oe.def(Se.context,z.data);case Nf:return oe.def("this",z.data);case Zu:return z.data.append(H,oe),z.data.ref;case Td:return z.data.toString();case Vs:return z.data.map(function(Te){return H.invoke(oe,Te)})}},H.attribCache={};var X={};return H.scopeAttrib=function(oe){var z=G.id(oe);if(z in X)return X[z];var de=vt.scope[z];de||(de=vt.scope[z]=new be);var Te=X[z]=C(de);return Te},H}function cr(H){var C=H.static,ie=H.dynamic,ve;if(na in C){var Se=!!C[na];ve=ln(function(ae,fe){return Se}),ve.enable=Se}else if(na in ie){var ue=ie[na];ve=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}return ve}function Gt(H,C){var ie=H.static,ve=H.dynamic;if(oa in ie){var Se=ie[oa];return Se?(Se=at.getFramebuffer(Se),L.command(Se,"invalid framebuffer object"),ln(function(ae,fe){var X=ae.link(Se),oe=ae.shared;fe.set(oe.framebuffer,".next",X);var z=oe.context;return fe.set(z,"."+rs,X+".width"),fe.set(z,"."+ns,X+".height"),X})):ln(function(ae,fe){var X=ae.shared;fe.set(X.framebuffer,".next","null");var oe=X.context;return fe.set(oe,"."+rs,oe+"."+Fd),fe.set(oe,"."+ns,oe+"."+Gd),"null"})}else if(oa in ve){var ue=ve[oa];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue),oe=ae.shared,z=oe.framebuffer,de=fe.def(z,".getFramebuffer(",X,")");L.optional(function(){ae.assert(fe,"!"+X+"||"+de,"invalid framebuffer object")}),fe.set(z,".next",de);var Te=oe.context;return fe.set(Te,"."+rs,de+"?"+de+".width:"+Te+"."+Fd),fe.set(Te,"."+ns,de+"?"+de+".height:"+Te+"."+Gd),de})}else return null}function mr(H,C,ie){var ve=H.static,Se=H.dynamic;function ue(X){if(X in ve){var oe=ve[X];L.commandType(oe,"object","invalid "+X,ie.commandStr);var z=!0,de=oe.x|0,Te=oe.y|0,Ye,Qe;return"width"in oe?(Ye=oe.width|0,L.command(Ye>=0,"invalid "+X,ie.commandStr)):z=!1,"height"in oe?(Qe=oe.height|0,L.command(Qe>=0,"invalid "+X,ie.commandStr)):z=!1,new Un(!z&&C&&C.thisDep,!z&&C&&C.contextDep,!z&&C&&C.propDep,function(Ht,hr){var kt=Ht.shared.context,Zt=Ye;"width"in oe||(Zt=hr.def(kt,".",rs,"-",de));var lr=Qe;return"height"in oe||(lr=hr.def(kt,".",ns,"-",Te)),[de,Te,Zt,lr]})}else if(X in Se){var $e=Se[X],pt=Kn($e,function(Ht,hr){var kt=Ht.invoke(hr,$e);L.optional(function(){Ht.assert(hr,kt+"&&typeof "+kt+'==="object"',"invalid "+X)});var Zt=Ht.shared.context,lr=hr.def(kt,".x|0"),Nr=hr.def(kt,".y|0"),en=hr.def('"width" in ',kt,"?",kt,".width|0:","(",Zt,".",rs,"-",lr,")"),zn=hr.def('"height" in ',kt,"?",kt,".height|0:","(",Zt,".",ns,"-",Nr,")");return L.optional(function(){Ht.assert(hr,en+">=0&&"+zn+">=0","invalid "+X)}),[lr,Nr,en,zn]});return C&&(pt.thisDep=pt.thisDep||C.thisDep,pt.contextDep=pt.contextDep||C.contextDep,pt.propDep=pt.propDep||C.propDep),pt}else return C?new Un(C.thisDep,C.contextDep,C.propDep,function(Ht,hr){var kt=Ht.shared.context;return[0,0,hr.def(kt,".",rs),hr.def(kt,".",ns)]}):null}var ae=ue(ti);if(ae){var fe=ae;ae=new Un(ae.thisDep,ae.contextDep,ae.propDep,function(X,oe){var z=fe.append(X,oe),de=X.shared.context;return oe.set(de,"."+kf,z[2]),oe.set(de,"."+My,z[3]),z})}return{viewport:ae,scissor_box:ue(Ti)}}function ar(H,C){var ie=H.static,ve=typeof ie[Ks]=="string"&&typeof ie[ts]=="string";if(ve){if(Object.keys(C.dynamic).length>0)return null;var Se=C.static,ue=Object.keys(Se);if(ue.length>0&&typeof Se[ue[0]]=="number"){for(var ae=[],fe=0;fe<ue.length;++fe)L(typeof Se[ue[fe]]=="number","must specify all vertex attribute locations when using vaos"),ae.push([Se[ue[fe]]|0,ue[fe]]);return ae}}return null}function yr(H,C,ie){var ve=H.static,Se=H.dynamic;function ue(z){if(z in ve){var de=G.id(ve[z]);L.optional(function(){ft.shader(Wd[z],de,L.guessCommand())});var Te=ln(function(){return de});return Te.id=de,Te}else if(z in Se){var Ye=Se[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye),Ht=$e.def(Qe.shared.strings,".id(",pt,")");return L.optional(function(){$e(Qe.shared.shader,".shader(",Wd[z],",",Ht,",",Qe.command,");")}),Ht})}return null}var ae=ue(Ks),fe=ue(ts),X=null,oe;return _i(ae)&&_i(fe)?(X=ft.program(fe.id,ae.id,null,ie),oe=ln(function(z,de){return z.link(X)})):oe=new Un(ae&&ae.thisDep||fe&&fe.thisDep,ae&&ae.contextDep||fe&&fe.contextDep,ae&&ae.propDep||fe&&fe.propDep,function(z,de){var Te=z.shared.shader,Ye;ae?Ye=ae.append(z,de):Ye=de.def(Te,".",Ks);var Qe;fe?Qe=fe.append(z,de):Qe=de.def(Te,".",ts);var $e=Te+".program("+Qe+","+Ye;return L.optional(function(){$e+=","+z.command}),de.def($e+")")}),{frag:ae,vert:fe,progVar:oe,program:X}}function Ar(H,C){var ie=H.static,ve=H.dynamic;function Se(){if(ia in ie){var z=ie[ia];ol(z)?z=Ie.getElements(Ie.create(z,!0)):z&&(z=Ie.getElements(z),L.command(z,"invalid elements",C.commandStr));var de=ln(function(Ye,Qe){if(z){var $e=Ye.link(z);return Ye.ELEMENTS=$e,$e}return Ye.ELEMENTS=null,null});return de.value=z,de}else if(ia in ve){var Te=ve[ia];return Kn(Te,function(Ye,Qe){var $e=Ye.shared,pt=$e.isBufferArgs,Ht=$e.elements,hr=Ye.invoke(Qe,Te),kt=Qe.def("null"),Zt=Qe.def(pt,"(",hr,")"),lr=Ye.cond(Zt).then(kt,"=",Ht,".createStream(",hr,");").else(kt,"=",Ht,".getElements(",hr,");");return L.optional(function(){Ye.assert(lr.else,"!"+hr+"||"+kt,"invalid elements")}),Qe.entry(lr),Qe.exit(Ye.cond(Zt).then(Ht,".destroyStream(",kt,");")),Ye.ELEMENTS=kt,kt})}return null}var ue=Se();function ae(){if(aa in ie){var z=ie[aa];return L.commandParameter(z,vi,"invalid primitve",C.commandStr),ln(function(Te,Ye){return vi[z]})}else if(aa in ve){var de=ve[aa];return Kn(de,function(Te,Ye){var Qe=Te.constants.primTypes,$e=Te.invoke(Ye,de);return L.optional(function(){Te.assert(Ye,$e+" in "+Qe,"invalid primitive, must be one of "+Object.keys(vi))}),Ye.def(Qe,"[",$e,"]")})}else if(ue)return _i(ue)?ue.value?ln(function(Te,Ye){return Ye.def(Te.ELEMENTS,".primType")}):ln(function(){return zd}):new Un(ue.thisDep,ue.contextDep,ue.propDep,function(Te,Ye){var Qe=Te.ELEMENTS;return Ye.def(Qe,"?",Qe,".primType:",zd)});return null}function fe(z,de){if(z in ie){var Te=ie[z]|0;return L.command(!de||Te>=0,"invalid "+z,C.commandStr),ln(function(Qe,$e){return de&&(Qe.OFFSET=Te),Te})}else if(z in ve){var Ye=ve[z];return Kn(Ye,function(Qe,$e){var pt=Qe.invoke($e,Ye);return de&&(Qe.OFFSET=pt,L.optional(function(){Qe.assert($e,pt+">=0","invalid "+z)})),pt})}else if(de&&ue)return ln(function(Qe,$e){return Qe.OFFSET="0",0});return null}var X=fe(qu,!0);function oe(){if(sa in ie){var z=ie[sa]|0;return L.command(typeof z=="number"&&z>=0,"invalid vertex count",C.commandStr),ln(function(){return z})}else if(sa in ve){var de=ve[sa];return Kn(de,function(Qe,$e){var pt=Qe.invoke($e,de);return L.optional(function(){Qe.assert($e,"typeof "+pt+'==="number"&&'+pt+">=0&&"+pt+"===("+pt+"|0)","invalid vertex count")}),pt})}else if(ue)if(_i(ue)){if(ue)return X?new Un(X.thisDep,X.contextDep,X.propDep,function(Qe,$e){var pt=$e.def(Qe.ELEMENTS,".vertCount-",Qe.OFFSET);return L.optional(function(){Qe.assert($e,pt+">=0","invalid vertex offset/element buffer too small")}),pt}):ln(function(Qe,$e){return $e.def(Qe.ELEMENTS,".vertCount")});var Te=ln(function(){return-1});return L.optional(function(){Te.MISSING=!0}),Te}else{var Ye=new Un(ue.thisDep||X.thisDep,ue.contextDep||X.contextDep,ue.propDep||X.propDep,function(Qe,$e){var pt=Qe.ELEMENTS;return Qe.OFFSET?$e.def(pt,"?",pt,".vertCount-",Qe.OFFSET,":-1"):$e.def(pt,"?",pt,".vertCount:-1")});return L.optional(function(){Ye.DYNAMIC=!0}),Ye}return null}return{elements:ue,primitive:ae(),count:oe(),instances:fe(Zs,!1),offset:X}}function fn(H,C){var ie=H.static,ve=H.dynamic,Se={};return ot.forEach(function(ue){var ae=ze(ue);function fe(X,oe){if(ue in ie){var z=X(ie[ue]);Se[ae]=ln(function(){return z})}else if(ue in ve){var de=ve[ue];Se[ae]=Kn(de,function(Te,Ye){return oe(Te,Ye,Te.invoke(Ye,de))})}}switch(ue){case Rd:case Pd:case Ad:case Cd:case Ju:case jd:case Dd:case Cf:case Lf:case Md:return fe(function(X){return L.commandType(X,"boolean",ue,C.commandStr),X},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="boolean"',"invalid flag "+ue,X.commandStr)}),z});case wd:return fe(function(X){return L.commandParameter(X,us,"invalid "+ue,C.commandStr),us[X]},function(X,oe,z){var de=X.constants.compareFuncs;return L.optional(function(){X.assert(oe,z+" in "+de,"invalid "+ue+", must be one of "+Object.keys(us))}),oe.def(de,"[",z,"]")});case Nd:return fe(function(X){return L.command(qr(X)&&X.length===2&&typeof X[0]=="number"&&typeof X[1]=="number"&&X[0]<=X[1],"depth range is 2d array",C.commandStr),X},function(X,oe,z){L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===2&&typeof "+z+'[0]==="number"&&typeof '+z+'[1]==="number"&&'+z+"[0]<="+z+"[1]","depth range must be a 2d array")});var de=oe.def("+",z,"[0]"),Te=oe.def("+",z,"[1]");return[de,Te]});case Mf:return fe(function(X){L.commandType(X,"object","blend.func",C.commandStr);var oe="srcRGB"in X?X.srcRGB:X.src,z="srcAlpha"in X?X.srcAlpha:X.src,de="dstRGB"in X?X.dstRGB:X.dst,Te="dstAlpha"in X?X.dstAlpha:X.dst;return L.commandParameter(oe,Bo,ae+".srcRGB",C.commandStr),L.commandParameter(z,Bo,ae+".srcAlpha",C.commandStr),L.commandParameter(de,Bo,ae+".dstRGB",C.commandStr),L.commandParameter(Te,Bo,ae+".dstAlpha",C.commandStr),L.command(Vf.indexOf(oe+", "+de)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+oe+", "+de+")",C.commandStr),[Bo[oe],Bo[de],Bo[z],Bo[Te]]},function(X,oe,z){var de=X.constants.blendFuncs;L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid blend func, must be an object")});function Te(kt,Zt){var lr=oe.def('"',kt,Zt,'" in ',z,"?",z,".",kt,Zt,":",z,".",kt);return L.optional(function(){X.assert(oe,lr+" in "+de,"invalid "+ue+"."+kt+Zt+", must be one of "+Object.keys(Bo))}),lr}var Ye=Te("src","RGB"),Qe=Te("dst","RGB");L.optional(function(){var kt=X.constants.invalidBlendCombinations;X.assert(oe,kt+".indexOf("+Ye+'+", "+'+Qe+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var $e=oe.def(de,"[",Ye,"]"),pt=oe.def(de,"[",Te("src","Alpha"),"]"),Ht=oe.def(de,"[",Qe,"]"),hr=oe.def(de,"[",Te("dst","Alpha"),"]");return[$e,Ht,pt,hr]});case Ws:return fe(function(X){if(typeof X=="string")return L.commandParameter(X,Me,"invalid "+ue,C.commandStr),[Me[X],Me[X]];if(typeof X=="object")return L.commandParameter(X.rgb,Me,ue+".rgb",C.commandStr),L.commandParameter(X.alpha,Me,ue+".alpha",C.commandStr),[Me[X.rgb],Me[X.alpha]];L.commandRaise("invalid blend.equation",C.commandStr)},function(X,oe,z){var de=X.constants.blendEquations,Te=oe.def(),Ye=oe.def(),Qe=X.cond("typeof ",z,'==="string"');return L.optional(function(){function $e(pt,Ht,hr){X.assert(pt,hr+" in "+de,"invalid "+Ht+", must be one of "+Object.keys(Me))}$e(Qe.then,ue,z),X.assert(Qe.else,z+"&&typeof "+z+'==="object"',"invalid "+ue),$e(Qe.else,ue+".rgb",z+".rgb"),$e(Qe.else,ue+".alpha",z+".alpha")}),Qe.then(Te,"=",Ye,"=",de,"[",z,"];"),Qe.else(Te,"=",de,"[",z,".rgb];",Ye,"=",de,"[",z,".alpha];"),oe(Qe),[Te,Ye]});case _d:return fe(function(X){return L.command(qr(X)&&X.length===4,"blend.color must be a 4d array",C.commandStr),ht(4,function(oe){return+X[oe]})},function(X,oe,z){return L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","blend.color must be a 4d array")}),ht(4,function(de){return oe.def("+",z,"[",de,"]")})});case Ld:return fe(function(X){return L.commandType(X,"number",ae,C.commandStr),X|0},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="number"',"invalid stencil.mask")}),oe.def(z,"|0")});case Bf:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.cmp||"keep",z=X.ref||0,de="mask"in X?X.mask:-1;return L.commandParameter(oe,us,ue+".cmp",C.commandStr),L.commandType(z,"number",ue+".ref",C.commandStr),L.commandType(de,"number",ue+".mask",C.commandStr),[us[oe],z,de]},function(X,oe,z){var de=X.constants.compareFuncs;L.optional(function(){function $e(){X.assert(oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}$e(z+"&&typeof ",z,'==="object"'),$e('!("cmp" in ',z,")||(",z,".cmp in ",de,")")});var Te=oe.def('"cmp" in ',z,"?",de,"[",z,".cmp]",":",Ai),Ye=oe.def(z,".ref|0"),Qe=oe.def('"mask" in ',z,"?",z,".mask|0:-1");return[Te,Ye,Qe]});case es:case Ys:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.fail||"keep",z=X.zfail||"keep",de=X.zpass||"keep";return L.commandParameter(oe,Pi,ue+".fail",C.commandStr),L.commandParameter(z,Pi,ue+".zfail",C.commandStr),L.commandParameter(de,Pi,ue+".zpass",C.commandStr),[ue===Ys?ca:tu,Pi[oe],Pi[z],Pi[de]]},function(X,oe,z){var de=X.constants.stencilOps;L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});function Te(Ye){return L.optional(function(){X.assert(oe,'!("'+Ye+'" in '+z+")||("+z+"."+Ye+" in "+de+")","invalid "+ue+"."+Ye+", must be one of "+Object.keys(Pi))}),oe.def('"',Ye,'" in ',z,"?",de,"[",z,".",Ye,"]:",Ai)}return[ue===Ys?ca:tu,Te("fail"),Te("zfail"),Te("zpass")]});case Qu:return fe(function(X){L.commandType(X,"object",ae,C.commandStr);var oe=X.factor|0,z=X.units|0;return L.commandType(oe,"number",ae+".factor",C.commandStr),L.commandType(z,"number",ae+".units",C.commandStr),[oe,z]},function(X,oe,z){L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid "+ue)});var de=oe.def(z,".factor|0"),Te=oe.def(z,".units|0");return[de,Te]});case Id:return fe(function(X){var oe=0;return X==="front"?oe=tu:X==="back"&&(oe=ca),L.command(!!oe,ae,C.commandStr),oe},function(X,oe,z){return L.optional(function(){X.assert(oe,z+'==="front"||'+z+'==="back"',"invalid cull.face")}),oe.def(z,'==="front"?',tu,":",ca)});case Df:return fe(function(X){return L.command(typeof X=="number"&&X>=Ce.lineWidthDims[0]&&X<=Ce.lineWidthDims[1],"invalid line width, must be a positive number between "+Ce.lineWidthDims[0]+" and "+Ce.lineWidthDims[1],C.commandStr),X},function(X,oe,z){return L.optional(function(){X.assert(oe,"typeof "+z+'==="number"&&'+z+">="+Ce.lineWidthDims[0]+"&&"+z+"<="+Ce.lineWidthDims[1],"invalid line width")}),z});case If:return fe(function(X){return L.commandParameter(X,Mn,ae,C.commandStr),Mn[X]},function(X,oe,z){return L.optional(function(){X.assert(oe,z+'==="cw"||'+z+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),oe.def(z+'==="cw"?'+Hd+":"+Xf)});case Rf:return fe(function(X){return L.command(qr(X)&&X.length===4,"color.mask must be length 4 array",C.commandStr),X.map(function(oe){return!!oe})},function(X,oe,z){return L.optional(function(){X.assert(oe,X.shared.isArrayLike+"("+z+")&&"+z+".length===4","invalid color.mask")}),ht(4,function(de){return"!!"+z+"["+de+"]"})});case jf:return fe(function(X){L.command(typeof X=="object"&&X,ae,C.commandStr);var oe="value"in X?X.value:1,z=!!X.invert;return L.command(typeof oe=="number"&&oe>=0&&oe<=1,"sample.coverage.value must be a number between 0 and 1",C.commandStr),[oe,z]},function(X,oe,z){L.optional(function(){X.assert(oe,z+"&&typeof "+z+'==="object"',"invalid sample.coverage")});var de=oe.def('"value" in ',z,"?+",z,".value:1"),Te=oe.def("!!",z,".invert");return[de,Te]})}}),Se}function vn(H,C){var ie=H.static,ve=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe;if(typeof ae=="number"||typeof ae=="boolean")fe=ln(function(){return ae});else if(typeof ae=="function"){var X=ae._reglType;X==="texture2d"||X==="textureCube"?fe=ln(function(oe){return oe.link(ae)}):X==="framebuffer"||X==="framebufferCube"?(L.command(ae.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ue+'"',C.commandStr),fe=ln(function(oe){return oe.link(ae.color[0])})):L.commandRaise('invalid data for uniform "'+ue+'"',C.commandStr)}else qr(ae)?fe=ln(function(oe){var z=oe.global.def("[",ht(ae.length,function(de){return L.command(typeof ae[de]=="number"||typeof ae[de]=="boolean","invalid uniform "+ue,oe.commandStr),ae[de]}),"]");return z}):L.commandRaise('invalid or missing data for uniform "'+ue+'"',C.commandStr);fe.value=ae,Se[ue]=fe}),Object.keys(ve).forEach(function(ue){var ae=ve[ue];Se[ue]=Kn(ae,function(fe,X){return fe.invoke(X,ae)})}),Se}function Or(H,C){var ie=H.static,ve=H.dynamic,Se={};return Object.keys(ie).forEach(function(ue){var ae=ie[ue],fe=G.id(ue),X=new be;if(ol(ae))X.state=qa,X.buffer=Je.getBuffer(Je.create(ae,os,!1,!0)),X.type=0;else{var oe=Je.getBuffer(ae);if(oe)X.state=qa,X.buffer=oe,X.type=0;else if(L.command(typeof ae=="object"&&ae,"invalid data for attribute "+ue,C.commandStr),"constant"in ae){var z=ae.constant;X.buffer="null",X.state=Pf,typeof z=="number"?X.x=z:(L.command(qr(z)&&z.length>0&&z.length<=4,"invalid constant for attribute "+ue,C.commandStr),Qa.forEach(function(Ht,hr){hr<z.length&&(X[Ht]=z[hr])}))}else{ol(ae.buffer)?oe=Je.getBuffer(Je.create(ae.buffer,os,!1,!0)):oe=Je.getBuffer(ae.buffer),L.command(!!oe,'missing buffer for attribute "'+ue+'"',C.commandStr);var de=ae.offset|0;L.command(de>=0,'invalid offset for attribute "'+ue+'"',C.commandStr);var Te=ae.stride|0;L.command(Te>=0&&Te<256,'invalid stride for attribute "'+ue+'", must be integer betweeen [0, 255]',C.commandStr);var Ye=ae.size|0;L.command(!("size"in ae)||Ye>0&&Ye<=4,'invalid size for attribute "'+ue+'", must be 1,2,3,4',C.commandStr);var Qe=!!ae.normalized,$e=0;"type"in ae&&(L.commandParameter(ae.type,Ro,"invalid type for attribute "+ue,C.commandStr),$e=Ro[ae.type]);var pt=ae.divisor|0;"divisor"in ae&&(L.command(pt===0||yt,'cannot specify divisor for attribute "'+ue+'", instancing not supported',C.commandStr),L.command(pt>=0,'invalid divisor for attribute "'+ue+'"',C.commandStr)),L.optional(function(){var Ht=C.commandStr,hr=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ae).forEach(function(kt){L.command(hr.indexOf(kt)>=0,'unknown parameter "'+kt+'" for attribute pointer "'+ue+'" (valid parameters are '+hr+")",Ht)})}),X.buffer=oe,X.state=qa,X.size=Ye,X.normalized=Qe,X.type=$e||oe.dtype,X.offset=de,X.stride=Te,X.divisor=pt}}Se[ue]=ln(function(Ht,hr){var kt=Ht.attribCache;if(fe in kt)return kt[fe];var Zt={isStream:!1};return Object.keys(X).forEach(function(lr){Zt[lr]=X[lr]}),X.buffer&&(Zt.buffer=Ht.link(X.buffer),Zt.type=Zt.type||Zt.buffer+".dtype"),kt[fe]=Zt,Zt})}),Object.keys(ve).forEach(function(ue){var ae=ve[ue];function fe(X,oe){var z=X.invoke(oe,ae),de=X.shared,Te=X.constants,Ye=de.isBufferArgs,Qe=de.buffer;L.optional(function(){X.assert(oe,z+"&&(typeof "+z+'==="object"||typeof '+z+'==="function")&&('+Ye+"("+z+")||"+Qe+".getBuffer("+z+")||"+Qe+".getBuffer("+z+".buffer)||"+Ye+"("+z+'.buffer)||("constant" in '+z+"&&(typeof "+z+'.constant==="number"||'+de.isArrayLike+"("+z+".constant))))",'invalid dynamic attribute "'+ue+'"')});var $e={isStream:oe.def(!1)},pt=new be;pt.state=qa,Object.keys(pt).forEach(function(Zt){$e[Zt]=oe.def(""+pt[Zt])});var Ht=$e.buffer,hr=$e.type;oe("if(",Ye,"(",z,")){",$e.isStream,"=true;",Ht,"=",Qe,".createStream(",os,",",z,");",hr,"=",Ht,".dtype;","}else{",Ht,"=",Qe,".getBuffer(",z,");","if(",Ht,"){",hr,"=",Ht,".dtype;",'}else if("constant" in ',z,"){",$e.state,"=",Pf,";","if(typeof "+z+'.constant === "number"){',$e[Qa[0]],"=",z,".constant;",Qa.slice(1).map(function(Zt){return $e[Zt]}).join("="),"=0;","}else{",Qa.map(function(Zt,lr){return $e[Zt]+"="+z+".constant.length>"+lr+"?"+z+".constant["+lr+"]:0;"}).join(""),"}}else{","if(",Ye,"(",z,".buffer)){",Ht,"=",Qe,".createStream(",os,",",z,".buffer);","}else{",Ht,"=",Qe,".getBuffer(",z,".buffer);","}",hr,'="type" in ',z,"?",Te.glTypes,"[",z,".type]:",Ht,".dtype;",$e.normalized,"=!!",z,".normalized;");function kt(Zt){oe($e[Zt],"=",z,".",Zt,"|0;")}return kt("size"),kt("offset"),kt("stride"),kt("divisor"),oe("}}"),oe.exit("if(",$e.isStream,"){",Qe,".destroyStream(",Ht,");","}"),$e}Se[ue]=Kn(ae,fe)}),Se}function hn(H,C){var ie=H.static,ve=H.dynamic;if(Js in ie){var Se=ie[Js];return Se!==null&&vt.getVAO(Se)===null&&(Se=vt.createVAO(Se)),ln(function(ae){return ae.link(vt.getVAO(Se))})}else if(Js in ve){var ue=ve[Js];return Kn(ue,function(ae,fe){var X=ae.invoke(fe,ue);return fe.def(ae.shared.vao+".getVAO("+X+")")})}return null}function Wr(H){var C=H.static,ie=H.dynamic,ve={};return Object.keys(C).forEach(function(Se){var ue=C[Se];ve[Se]=ln(function(ae,fe){return typeof ue=="number"||typeof ue=="boolean"?""+ue:ae.link(ue)})}),Object.keys(ie).forEach(function(Se){var ue=ie[Se];ve[Se]=Kn(ue,function(ae,fe){return ae.invoke(fe,ue)})}),ve}function Yr(H,C,ie,ve,Se){var ue=H.static,ae=H.dynamic;L.optional(function(){var kt=[oa,ts,Ks,ia,aa,qu,sa,Zs,na,Js].concat(ot);function Zt(lr){Object.keys(lr).forEach(function(Nr){L.command(kt.indexOf(Nr)>=0,'unknown parameter "'+Nr+'"',Se.commandStr)})}Zt(ue),Zt(ae)});var fe=ar(H,C),X=Gt(H),oe=mr(H,X,Se),z=Ar(H,Se),de=fn(H,Se),Te=yr(H,Se,fe);function Ye(kt){var Zt=oe[kt];Zt&&(de[kt]=Zt)}Ye(ti),Ye(ze(Ti));var Qe=Object.keys(de).length>0,$e={framebuffer:X,draw:z,shader:Te,state:de,dirty:Qe,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if($e.profile=cr(H),$e.uniforms=vn(ie,Se),$e.drawVAO=$e.scopeVAO=hn(H),!$e.drawVAO&&Te.program&&!fe&&q.angle_instanced_arrays){var pt=!0,Ht=Te.program.attributes.map(function(kt){var Zt=C.static[kt];return pt=pt&&!!Zt,Zt});if(pt&&Ht.length>0){var hr=vt.getVAO(vt.createVAO(Ht));$e.drawVAO=new Un(null,null,null,function(kt,Zt){return kt.link(hr)}),$e.useVAO=!0}}return fe?$e.useVAO=!0:$e.attributes=Or(C,Se),$e.context=Wr(ve),$e}function pn(H,C,ie){var ve=H.shared,Se=ve.context,ue=H.scope();Object.keys(ie).forEach(function(ae){C.save(Se,"."+ae);var fe=ie[ae],X=fe.append(H,C);Array.isArray(X)?ue(Se,".",ae,"=[",X.join(),"];"):ue(Se,".",ae,"=",X,";")}),C(ue)}function cn(H,C,ie,ve){var Se=H.shared,ue=Se.gl,ae=Se.framebuffer,fe;xt&&(fe=C.def(Se.extensions,".webgl_draw_buffers"));var X=H.constants,oe=X.drawBuffer,z=X.backBuffer,de;ie?de=ie.append(H,C):de=C.def(ae,".next"),ve||C("if(",de,"!==",ae,".cur){"),C("if(",de,"){",ue,".bindFramebuffer(",Vd,",",de,".framebuffer);"),xt&&C(fe,".drawBuffersWEBGL(",oe,"[",de,".colorAttachments.length]);"),C("}else{",ue,".bindFramebuffer(",Vd,",null);"),xt&&C(fe,".drawBuffersWEBGL(",z,");"),C("}",ae,".cur=",de,";"),ve||C("}")}function bn(H,C,ie){var ve=H.shared,Se=ve.gl,ue=H.current,ae=H.next,fe=ve.current,X=ve.next,oe=H.cond(fe,".dirty");ot.forEach(function(z){var de=ze(z);if(!(de in ie.state)){var Te,Ye;if(de in ae){Te=ae[de],Ye=ue[de];var Qe=ht(nt[de].length,function(pt){return oe.def(Te,"[",pt,"]")});oe(H.cond(Qe.map(function(pt,Ht){return pt+"!=="+Ye+"["+Ht+"]"}).join("||")).then(Se,".",Ve[de],"(",Qe,");",Qe.map(function(pt,Ht){return Ye+"["+Ht+"]="+pt}).join(";"),";"))}else{Te=oe.def(X,".",de);var $e=H.cond(Te,"!==",fe,".",de);oe($e),de in Ze?$e(H.cond(Te).then(Se,".enable(",Ze[de],");").else(Se,".disable(",Ze[de],");"),fe,".",de,"=",Te,";"):$e(Se,".",Ve[de],"(",Te,");",fe,".",de,"=",Te,";")}}}),Object.keys(ie.state).length===0&&oe(fe,".dirty=false;"),C(oe)}function yn(H,C,ie,ve){var Se=H.shared,ue=H.current,ae=Se.current,fe=Se.gl;Yd(Object.keys(ie)).forEach(function(X){var oe=ie[X];if(!(ve&&!ve(oe))){var z=oe.append(H,C);if(Ze[X]){var de=Ze[X];_i(oe)?z?C(fe,".enable(",de,");"):C(fe,".disable(",de,");"):C(H.cond(z).then(fe,".enable(",de,");").else(fe,".disable(",de,");")),C(ae,".",X,"=",z,";")}else if(qr(z)){var Te=ue[X];C(fe,".",Ve[X],"(",z,");",z.map(function(Ye,Qe){return Te+"["+Qe+"]="+Ye}).join(";"),";")}else C(fe,".",Ve[X],"(",z,");",ae,".",X,"=",z,";")}})}function Fr(H,C){yt&&(H.instancing=C.def(H.shared.extensions,".angle_instanced_arrays"))}function dr(H,C,ie,ve,Se){var ue=H.shared,ae=H.stats,fe=ue.current,X=ue.timer,oe=ie.profile;function z(){return typeof performance>"u"?"Date.now()":"performance.now()"}var de,Te;function Ye(kt){de=C.def(),kt(de,"=",z(),";"),typeof Se=="string"?kt(ae,".count+=",Se,";"):kt(ae,".count++;"),st&&(ve?(Te=C.def(),kt(Te,"=",X,".getNumPendingQueries();")):kt(X,".beginQuery(",ae,");"))}function Qe(kt){kt(ae,".cpuTime+=",z(),"-",de,";"),st&&(ve?kt(X,".pushScopeStats(",Te,",",X,".getNumPendingQueries(),",ae,");"):kt(X,".endQuery();"))}function $e(kt){var Zt=C.def(fe,".profile");C(fe,".profile=",kt,";"),C.exit(fe,".profile=",Zt,";")}var pt;if(oe){if(_i(oe)){oe.enable?(Ye(C),Qe(C.exit),$e("true")):$e("false");return}pt=oe.append(H,C),$e(pt)}else pt=C.def(fe,".profile");var Ht=H.block();Ye(Ht),C("if(",pt,"){",Ht,"}");var hr=H.block();Qe(hr),C.exit("if(",pt,"){",hr,"}")}function Tn(H,C,ie,ve,Se){var ue=H.shared;function ae(X){switch(X){case ua:case is:case fa:return 2;case el:case tl:case nl:return 3;case la:case rl:case ri:return 4;default:return 1}}function fe(X,oe,z){var de=ue.gl,Te=C.def(X,".location"),Ye=C.def(ue.attributes,"[",Te,"]"),Qe=z.state,$e=z.buffer,pt=[z.x,z.y,z.z,z.w],Ht=["buffer","normalized","offset","stride"];function hr(){C("if(!",Ye,".buffer){",de,".enableVertexAttribArray(",Te,");}");var Zt=z.type,lr;if(z.size?lr=C.def(z.size,"||",oe):lr=oe,C("if(",Ye,".type!==",Zt,"||",Ye,".size!==",lr,"||",Ht.map(function(en){return Ye+"."+en+"!=="+z[en]}).join("||"),"){",de,".bindBuffer(",os,",",$e,".buffer);",de,".vertexAttribPointer(",[Te,lr,Zt,z.normalized,z.stride,z.offset],");",Ye,".type=",Zt,";",Ye,".size=",lr,";",Ht.map(function(en){return Ye+"."+en+"="+z[en]+";"}).join(""),"}"),yt){var Nr=z.divisor;C("if(",Ye,".divisor!==",Nr,"){",H.instancing,".vertexAttribDivisorANGLE(",[Te,Nr],");",Ye,".divisor=",Nr,";}")}}function kt(){C("if(",Ye,".buffer){",de,".disableVertexAttribArray(",Te,");",Ye,".buffer=null;","}if(",Qa.map(function(Zt,lr){return Ye+"."+Zt+"!=="+pt[lr]}).join("||"),"){",de,".vertexAttrib4f(",Te,",",pt,");",Qa.map(function(Zt,lr){return Ye+"."+Zt+"="+pt[lr]+";"}).join(""),"}")}Qe===qa?hr():Qe===Pf?kt():(C("if(",Qe,"===",qa,"){"),hr(),C("}else{"),kt(),C("}"))}ve.forEach(function(X){var oe=X.name,z=ie.attributes[oe],de;if(z){if(!Se(z))return;de=z.append(H,C)}else{if(!Se(Wf))return;var Te=H.scopeAttrib(oe);L.optional(function(){H.assert(C,Te+".state","missing attribute "+oe)}),de={},Object.keys(new be).forEach(function(Ye){de[Ye]=C.def(Te,".",Ye)})}fe(H.link(X),ae(X.info.type),de)})}function Dr(H,C,ie,ve,Se){for(var ue=H.shared,ae=ue.gl,fe,X=0;X<ve.length;++X){var oe=ve[X],z=oe.name,de=oe.info.type,Te=ie.uniforms[z],Ye=H.link(oe),Qe=Ye+".location",$e;if(Te){if(!Se(Te))continue;if(_i(Te)){var pt=Te.value;if(L.command(pt!==null&&typeof pt<"u",'missing uniform "'+z+'"',H.commandStr),de===eu||de===ss){L.command(typeof pt=="function"&&(de===eu&&(pt._reglType==="texture2d"||pt._reglType==="framebuffer")||de===ss&&(pt._reglType==="textureCube"||pt._reglType==="framebufferCube")),"invalid texture for uniform "+z,H.commandStr);var Ht=H.link(pt._texture||pt.color[0]._texture);C(ae,".uniform1i(",Qe,",",Ht+".bind());"),C.exit(Ht,".unbind();")}else if(de===Qs||de===qs||de===as){L.optional(function(){L.command(qr(pt),"invalid matrix for uniform "+z,H.commandStr),L.command(de===Qs&&pt.length===4||de===qs&&pt.length===9||de===as&&pt.length===16,"invalid length for matrix uniform "+z,H.commandStr)});var hr=H.global.def("new Float32Array(["+Array.prototype.slice.call(pt)+"])"),kt=2;de===qs?kt=3:de===as&&(kt=4),C(ae,".uniformMatrix",kt,"fv(",Qe,",false,",hr,");")}else{switch(de){case Uf:L.commandType(pt,"number","uniform "+z,H.commandStr),fe="1f";break;case ua:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2f";break;case el:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3f";break;case la:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4f";break;case Hf:L.commandType(pt,"boolean","uniform "+z,H.commandStr),fe="1i";break;case zf:L.commandType(pt,"number","uniform "+z,H.commandStr),fe="1i";break;case fa:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case is:L.command(qr(pt)&&pt.length===2,"uniform "+z,H.commandStr),fe="2i";break;case nl:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case tl:L.command(qr(pt)&&pt.length===3,"uniform "+z,H.commandStr),fe="3i";break;case ri:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break;case rl:L.command(qr(pt)&&pt.length===4,"uniform "+z,H.commandStr),fe="4i";break}C(ae,".uniform",fe,"(",Qe,",",qr(pt)?Array.prototype.slice.call(pt):pt,");")}continue}else $e=Te.append(H,C)}else{if(!Se(Wf))continue;$e=C.def(ue.uniforms,"[",G.id(z),"]")}de===eu?(L(!Array.isArray($e),"must specify a scalar prop for textures"),C("if(",$e,"&&",$e,'._reglType==="framebuffer"){',$e,"=",$e,".color[0];","}")):de===ss&&(L(!Array.isArray($e),"must specify a scalar prop for cube maps"),C("if(",$e,"&&",$e,'._reglType==="framebufferCube"){',$e,"=",$e,".color[0];","}")),L.optional(function(){function zn(Ao,eh){H.assert(C,Ao,'bad data or missing for uniform "'+z+'".  '+eh)}function Jf(Ao){L(!Array.isArray($e),"must not specify an array type for uniform"),zn("typeof "+$e+'==="'+Ao+'"',"invalid type, expected "+Ao)}function so(Ao,eh){Array.isArray($e)?L($e.length===Ao,"must have length "+Ao):zn(ue.isArrayLike+"("+$e+")&&"+$e+".length==="+Ao,"invalid vector, should have length "+Ao,H.commandStr)}function Qf(Ao){L(!Array.isArray($e),"must not specify a value type"),zn("typeof "+$e+'==="function"&&'+$e+'._reglType==="texture'+(Ao===kd?"2d":"Cube")+'"',"invalid texture type",H.commandStr)}switch(de){case zf:Jf("number");break;case is:so(2);break;case tl:so(3);break;case rl:so(4);break;case Uf:Jf("number");break;case ua:so(2);break;case el:so(3);break;case la:so(4);break;case Hf:Jf("boolean");break;case fa:so(2);break;case nl:so(3);break;case ri:so(4);break;case Qs:so(4);break;case qs:so(9);break;case as:so(16);break;case eu:Qf(kd);break;case ss:Qf(Ly);break}});var Zt=1;switch(de){case eu:case ss:var lr=C.def($e,"._texture");C(ae,".uniform1i(",Qe,",",lr,".bind());"),C.exit(lr,".unbind();");continue;case zf:case Hf:fe="1i";break;case is:case fa:fe="2i",Zt=2;break;case tl:case nl:fe="3i",Zt=3;break;case rl:case ri:fe="4i",Zt=4;break;case Uf:fe="1f";break;case ua:fe="2f",Zt=2;break;case el:fe="3f",Zt=3;break;case la:fe="4f",Zt=4;break;case Qs:fe="Matrix2fv";break;case qs:fe="Matrix3fv";break;case as:fe="Matrix4fv";break}if(C(ae,".uniform",fe,"(",Qe,","),fe.charAt(0)==="M"){var Nr=Math.pow(de-Qs+2,2),en=H.global.def("new Float32Array(",Nr,")");Array.isArray($e)?C("false,(",ht(Nr,function(zn){return en+"["+zn+"]="+$e[zn]}),",",en,")"):C("false,(Array.isArray(",$e,")||",$e," instanceof Float32Array)?",$e,":(",ht(Nr,function(zn){return en+"["+zn+"]="+$e+"["+zn+"]"}),",",en,")")}else Zt>1?C(ht(Zt,function(zn){return Array.isArray($e)?$e[zn]:$e+"["+zn+"]"})):(L(!Array.isArray($e),"uniform value must not be an array"),C($e));C(");")}}function qt(H,C,ie,ve){var Se=H.shared,ue=Se.gl,ae=Se.draw,fe=ve.draw;function X(){var lr=fe.elements,Nr,en=C;return lr?((lr.contextDep&&ve.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en)):Nr=en.def(ae,".",ia),Nr&&en("if("+Nr+")"+ue+".bindBuffer("+Iy+","+Nr+".buffer.buffer);"),Nr}function oe(){var lr=fe.count,Nr,en=C;return lr?((lr.contextDep&&ve.contextDynamic||lr.propDep)&&(en=ie),Nr=lr.append(H,en),L.optional(function(){lr.MISSING&&H.assert(C,"false","missing vertex count"),lr.DYNAMIC&&H.assert(en,Nr+">=0","missing vertex count")})):(Nr=en.def(ae,".",sa),L.optional(function(){H.assert(en,Nr+">=0","missing vertex count")})),Nr}var z=X();function de(lr){var Nr=fe[lr];return Nr?Nr.contextDep&&ve.contextDynamic||Nr.propDep?Nr.append(H,ie):Nr.append(H,C):C.def(ae,".",lr)}var Te=de(aa),Ye=de(qu),Qe=oe();if(typeof Qe=="number"){if(Qe===0)return}else ie("if(",Qe,"){"),ie.exit("}");var $e,pt;yt&&($e=de(Zs),pt=H.instancing);var Ht=z+".type",hr=fe.elements&&_i(fe.elements);function kt(){function lr(){ie(pt,".drawElementsInstancedANGLE(",[Te,Qe,Ht,Ye+"<<(("+Ht+"-"+Af+")>>1)",$e],");")}function Nr(){ie(pt,".drawArraysInstancedANGLE(",[Te,Ye,Qe,$e],");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}function Zt(){function lr(){ie(ue+".drawElements("+[Te,Qe,Ht,Ye+"<<(("+Ht+"-"+Af+")>>1)"]+");")}function Nr(){ie(ue+".drawArrays("+[Te,Ye,Qe]+");")}z?hr?lr():(ie("if(",z,"){"),lr(),ie("}else{"),Nr(),ie("}")):Nr()}yt&&(typeof $e!="number"||$e>=0)?typeof $e=="string"?(ie("if(",$e,">0){"),kt(),ie("}else if(",$e,"<0){"),Zt(),ie("}")):kt():Zt()}function Sr(H,C,ie,ve,Se){var ue=rr(),ae=ue.proc("body",Se);return L.optional(function(){ue.commandStr=C.commandStr,ue.command=ue.link(C.commandStr)}),yt&&(ue.instancing=ae.def(ue.shared.extensions,".angle_instanced_arrays")),H(ue,ae,ie,ve),ue.compile().body}function Pr(H,C,ie,ve){Fr(H,C),ie.useVAO?ie.drawVAO?C(H.shared.vao,".setVAO(",ie.drawVAO.append(H,C),");"):C(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(C(H.shared.vao,".setVAO(null);"),Tn(H,C,ie,ve.attributes,function(){return!0})),Dr(H,C,ie,ve.uniforms,function(){return!0}),qt(H,C,C,ie)}function an(H,C){var ie=H.proc("draw",1);Fr(H,ie),pn(H,ie,C.context),cn(H,ie,C.framebuffer),bn(H,ie,C),yn(H,ie,C.state),dr(H,ie,C,!1,!0);var ve=C.shader.progVar.append(H,ie);if(ie(H.shared.gl,".useProgram(",ve,".program);"),C.shader.program)Pr(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var Se=H.global.def("{}"),ue=ie.def(ve,".id"),ae=ie.def(Se,"[",ue,"]");ie(H.cond(ae).then(ae,".call(this,a0);").else(ae,"=",Se,"[",ue,"]=",H.link(function(fe){return Sr(Pr,H,C,fe,1)}),"(",ve,");",ae,".call(this,a0);"))}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function Fo(H,C,ie,ve){H.batchId="a1",Fr(H,C);function Se(){return!0}Tn(H,C,ie,ve.attributes,Se),Dr(H,C,ie,ve.uniforms,Se),qt(H,C,C,ie)}function da(H,C,ie,ve){Fr(H,C);var Se=ie.contextDep,ue=C.def(),ae="a0",fe="a1",X=C.def();H.shared.props=X,H.batchId=ue;var oe=H.scope(),z=H.scope();C(oe.entry,"for(",ue,"=0;",ue,"<",fe,";++",ue,"){",X,"=",ae,"[",ue,"];",z,"}",oe.exit);function de(Ht){return Ht.contextDep&&Se||Ht.propDep}function Te(Ht){return!de(Ht)}if(ie.needsContext&&pn(H,z,ie.context),ie.needsFramebuffer&&cn(H,z,ie.framebuffer),yn(H,z,ie.state,de),ie.profile&&de(ie.profile)&&dr(H,z,ie,!1,!0),ve)ie.useVAO?ie.drawVAO?de(ie.drawVAO)?z(H.shared.vao,".setVAO(",ie.drawVAO.append(H,z),");"):oe(H.shared.vao,".setVAO(",ie.drawVAO.append(H,oe),");"):oe(H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"):(oe(H.shared.vao,".setVAO(null);"),Tn(H,oe,ie,ve.attributes,Te),Tn(H,z,ie,ve.attributes,de)),Dr(H,oe,ie,ve.uniforms,Te),Dr(H,z,ie,ve.uniforms,de),qt(H,oe,z,ie);else{var Ye=H.global.def("{}"),Qe=ie.shader.progVar.append(H,z),$e=z.def(Qe,".id"),pt=z.def(Ye,"[",$e,"]");z(H.shared.gl,".useProgram(",Qe,".program);","if(!",pt,"){",pt,"=",Ye,"[",$e,"]=",H.link(function(Ht){return Sr(Fo,H,ie,Ht,2)}),"(",Qe,");}",pt,".call(this,a0[",ue,"],",ue,");")}}function K(H,C){var ie=H.proc("batch",2);H.batchId="0",Fr(H,ie);var ve=!1,Se=!0;Object.keys(C.context).forEach(function(Ye){ve=ve||C.context[Ye].propDep}),ve||(pn(H,ie,C.context),Se=!1);var ue=C.framebuffer,ae=!1;ue?(ue.propDep?ve=ae=!0:ue.contextDep&&ve&&(ae=!0),ae||cn(H,ie,ue)):cn(H,ie,null),C.state.viewport&&C.state.viewport.propDep&&(ve=!0);function fe(Ye){return Ye.contextDep&&ve||Ye.propDep}bn(H,ie,C),yn(H,ie,C.state,function(Ye){return!fe(Ye)}),(!C.profile||!fe(C.profile))&&dr(H,ie,C,!1,"a1"),C.contextDep=ve,C.needsContext=Se,C.needsFramebuffer=ae;var X=C.shader.progVar;if(X.contextDep&&ve||X.propDep)da(H,ie,C,null);else{var oe=X.append(H,ie);if(ie(H.shared.gl,".useProgram(",oe,".program);"),C.shader.program)da(H,ie,C,C.shader.program);else{ie(H.shared.vao,".setVAO(null);");var z=H.global.def("{}"),de=ie.def(oe,".id"),Te=ie.def(z,"[",de,"]");ie(H.cond(Te).then(Te,".call(this,a0,a1);").else(Te,"=",z,"[",de,"]=",H.link(function(Ye){return Sr(da,H,C,Ye,2)}),"(",oe,");",Te,".call(this,a0,a1);"))}}Object.keys(C.state).length>0&&ie(H.shared.current,".dirty=true;")}function je(H,C){var ie=H.proc("scope",3);H.batchId="a2";var ve=H.shared,Se=ve.current;pn(H,ie,C.context),C.framebuffer&&C.framebuffer.append(H,ie),Yd(Object.keys(C.state)).forEach(function(ae){var fe=C.state[ae],X=fe.append(H,ie);qr(X)?X.forEach(function(oe,z){ie.set(H.next[ae],"["+z+"]",oe)}):ie.set(ve.next,"."+ae,X)}),dr(H,ie,C,!0,!0),[ia,qu,sa,Zs,aa].forEach(function(ae){var fe=C.draw[ae];fe&&ie.set(ve.draw,"."+ae,""+fe.append(H,ie))}),Object.keys(C.uniforms).forEach(function(ae){var fe=C.uniforms[ae].append(H,ie);Array.isArray(fe)&&(fe="["+fe.join()+"]"),ie.set(ve.uniforms,"["+G.id(ae)+"]",fe)}),Object.keys(C.attributes).forEach(function(ae){var fe=C.attributes[ae].append(H,ie),X=H.scopeAttrib(ae);Object.keys(new be).forEach(function(oe){ie.set(X,"."+oe,fe[oe])})}),C.scopeVAO&&ie.set(ve.vao,".targetVAO",C.scopeVAO.append(H,ie));function ue(ae){var fe=C.shader[ae];fe&&ie.set(ve.shader,"."+ae,fe.append(H,ie))}ue(ts),ue(Ks),Object.keys(C.state).length>0&&(ie(Se,".dirty=true;"),ie.exit(Se,".dirty=true;")),ie("a1(",H.shared.context,",a0,",H.batchId,");")}function Pe(H){if(!(typeof H!="object"||qr(H))){for(var C=Object.keys(H),ie=0;ie<C.length;++ie)if(Qt.isDynamic(H[C[ie]]))return!0;return!1}}function Rt(H,C,ie){var ve=C.static[ie];if(!ve||!Pe(ve))return;var Se=H.global,ue=Object.keys(ve),ae=!1,fe=!1,X=!1,oe=H.global.def("{}");ue.forEach(function(de){var Te=ve[de];if(Qt.isDynamic(Te)){typeof Te=="function"&&(Te=ve[de]=Qt.unbox(Te));var Ye=Kn(Te,null);ae=ae||Ye.thisDep,X=X||Ye.propDep,fe=fe||Ye.contextDep}else{switch(Se(oe,".",de,"="),typeof Te){case"number":Se(Te);break;case"string":Se('"',Te,'"');break;case"object":Array.isArray(Te)&&Se("[",Te.join(),"]");break;default:Se(H.link(Te));break}Se(";")}});function z(de,Te){ue.forEach(function(Ye){var Qe=ve[Ye];if(Qt.isDynamic(Qe)){var $e=de.invoke(Te,Qe);Te(oe,".",Ye,"=",$e,";")}})}C.dynamic[ie]=new Qt.DynamicVariable(Zu,{thisDep:ae,contextDep:fe,propDep:X,ref:oe,append:z}),delete C.static[ie]}function br(H,C,ie,ve,Se){var ue=rr();ue.stats=ue.link(Se),Object.keys(C.static).forEach(function(fe){Rt(ue,C,fe)}),Ry.forEach(function(fe){Rt(ue,H,fe)});var ae=Yr(H,C,ie,ve,ue);return an(ue,ae),je(ue,ae),K(ue,ae),u(ue.compile(),{destroy:function(){ae.shader.program.destroy()}})}return{next:ct,current:nt,procs:function(){var H=rr(),C=H.proc("poll"),ie=H.proc("refresh"),ve=H.block();C(ve),ie(ve);var Se=H.shared,ue=Se.gl,ae=Se.next,fe=Se.current;ve(fe,".dirty=false;"),cn(H,C),cn(H,ie,null,!0);var X;yt&&(X=H.link(yt)),q.oes_vertex_array_object&&ie(H.link(q.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var oe=0;oe<Ce.maxAttributes;++oe){var z=ie.def(Se.attributes,"[",oe,"]"),de=H.cond(z,".buffer");de.then(ue,".enableVertexAttribArray(",oe,");",ue,".bindBuffer(",os,",",z,".buffer.buffer);",ue,".vertexAttribPointer(",oe,",",z,".size,",z,".type,",z,".normalized,",z,".stride,",z,".offset);").else(ue,".disableVertexAttribArray(",oe,");",ue,".vertexAttrib4f(",oe,",",z,".x,",z,".y,",z,".z,",z,".w);",z,".buffer=null;"),ie(de),yt&&ie(X,".vertexAttribDivisorANGLE(",oe,",",z,".divisor);")}return ie(H.shared.vao,".currentVAO=null;",H.shared.vao,".setVAO(",H.shared.vao,".targetVAO);"),Object.keys(Ze).forEach(function(Te){var Ye=Ze[Te],Qe=ve.def(ae,".",Te),$e=H.block();$e("if(",Qe,"){",ue,".enable(",Ye,")}else{",ue,".disable(",Ye,")}",fe,".",Te,"=",Qe,";"),ie($e),C("if(",Qe,"!==",fe,".",Te,"){",$e,"}")}),Object.keys(Ve).forEach(function(Te){var Ye=Ve[Te],Qe=nt[Te],$e,pt,Ht=H.block();if(Ht(ue,".",Ye,"("),qr(Qe)){var hr=Qe.length;$e=H.global.def(ae,".",Te),pt=H.global.def(fe,".",Te),Ht(ht(hr,function(kt){return $e+"["+kt+"]"}),");",ht(hr,function(kt){return pt+"["+kt+"]="+$e+"["+kt+"];"}).join("")),C("if(",ht(hr,function(kt){return $e+"["+kt+"]!=="+pt+"["+kt+"]"}).join("||"),"){",Ht,"}")}else $e=ve.def(ae,".",Te),pt=ve.def(fe,".",Te),Ht($e,");",fe,".",Te,"=",$e,";"),C("if(",$e,"!==",pt,"){",Ht,"}");ie(Ht)}),H.compile()}(),compile:br}}function Zy(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Kd=34918,Jy=34919,Zd=35007,Qy=function(_,G){if(!G.ext_disjoint_timer_query)return null;var q=[];function Ce(){return q.pop()||G.ext_disjoint_timer_query.createQueryEXT()}function Je(yt){q.push(yt)}var Ie=[];function ke(yt){var xt=Ce();G.ext_disjoint_timer_query.beginQueryEXT(Zd,xt),Ie.push(xt),st(Ie.length-1,Ie.length,yt)}function at(){G.ext_disjoint_timer_query.endQueryEXT(Zd)}function lt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var vt=[];function ft(){return vt.pop()||new lt}function it(yt){vt.push(yt)}var St=[];function st(yt,xt,nt){var ct=ft();ct.startQueryIndex=yt,ct.endQueryIndex=xt,ct.sum=0,ct.stats=nt,St.push(ct)}var Ot=[],be=[];function Me(){var yt,xt,nt=Ie.length;if(nt!==0){be.length=Math.max(be.length,nt+1),Ot.length=Math.max(Ot.length,nt+1),Ot[0]=0,be[0]=0;var ct=0;for(yt=0,xt=0;xt<Ie.length;++xt){var ot=Ie[xt];G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Jy)?(ct+=G.ext_disjoint_timer_query.getQueryObjectEXT(ot,Kd),Je(ot)):Ie[yt++]=ot,Ot[xt+1]=ct,be[xt+1]=yt}for(Ie.length=yt,yt=0,xt=0;xt<St.length;++xt){var Ze=St[xt],Ve=Ze.startQueryIndex,ze=Ze.endQueryIndex;Ze.sum+=Ot[ze]-Ot[Ve];var At=be[Ve],ir=be[ze];ir===At?(Ze.stats.gpuTime+=Ze.sum/1e6,it(Ze)):(Ze.startQueryIndex=At,Ze.endQueryIndex=ir,St[yt++]=Ze)}St.length=yt}}return{beginQuery:ke,endQuery:at,pushScopeStats:st,update:Me,getNumPendingQueries:function(){return Ie.length},clear:function(){q.push.apply(q,Ie);for(var yt=0;yt<q.length;yt++)G.ext_disjoint_timer_query.deleteQueryEXT(q[yt]);Ie.length=0,q.length=0},restore:function(){Ie.length=0,q.length=0}}},qy=16384,eg=256,tg=1024,ru=34962,on="webglcontextlost",Yf="webglcontextrestored",Kf=1,Jd=2,Qd=3;function Zf(_,G){for(var q=0;q<_.length;++q)if(_[q]===G)return q;return-1}function qd(_){var G=we(_);if(!G)return null;var q=G.gl,Ce=q.getContextAttributes(),Je=q.isContextLost(),Ie=Ne(q,G);if(!Ie)return null;var ke=Mt(),at=Zy(),lt=Ie.extensions,vt=Qy(q,lt),ft=Dn(),it=q.drawingBufferWidth,St=q.drawingBufferHeight,st={tick:0,time:0,viewportWidth:it,viewportHeight:St,framebufferWidth:it,framebufferHeight:St,drawingBufferWidth:it,drawingBufferHeight:St,pixelRatio:G.pixelRatio},Ot={},be={elements:null,primitive:4,count:-1,offset:0,instances:-1},Me=ef(q,lt),yt=uf(q,at,G,nt),xt=Ay(q,lt,Me,at,yt);function nt(qt){return xt.destroyBuffer(qt)}var ct=io(q,lt,yt,at),ot=Sd(q,ke,at,G),Ze=dy(q,lt,Me,function(){At.procs.poll()},st,at,G),Ve=fd(q,lt,Me,at,G),ze=xy(q,lt,Me,Ze,Ve,at),At=Ky(q,ke,lt,Me,yt,ct,Ze,ze,Ot,xt,ot,be,st,vt,G),ir=wy(q,ze,At.procs.poll,st,Ce,lt,Me),mt=At.next,et=q.canvas,qe=[],rr=[],cr=[],Gt=[G.onDestroy],mr=null;function ar(){if(qe.length===0){vt&&vt.update(),mr=null;return}mr=$r.next(ar),yn();for(var qt=qe.length-1;qt>=0;--qt){var Sr=qe[qt];Sr&&Sr(st,null,0)}q.flush(),vt&&vt.update()}function yr(){!mr&&qe.length>0&&(mr=$r.next(ar))}function Ar(){mr&&($r.cancel(ar),mr=null)}function fn(qt){qt.preventDefault(),Je=!0,Ar(),rr.forEach(function(Sr){Sr()})}function vn(qt){q.getError(),Je=!1,Ie.restore(),ot.restore(),yt.restore(),Ze.restore(),Ve.restore(),ze.restore(),xt.restore(),vt&&vt.restore(),At.procs.refresh(),yr(),cr.forEach(function(Sr){Sr()})}et&&(et.addEventListener(on,fn,!1),et.addEventListener(Yf,vn,!1));function Or(){qe.length=0,Ar(),et&&(et.removeEventListener(on,fn),et.removeEventListener(Yf,vn)),ot.clear(),ze.clear(),Ve.clear(),Ze.clear(),ct.clear(),yt.clear(),xt.clear(),vt&&vt.clear(),Gt.forEach(function(qt){qt()})}function hn(qt){L(!!qt,"invalid args to regl({...})"),L.type(qt,"object","invalid args to regl({...})");function Sr(Se){var ue=u({},Se);delete ue.uniforms,delete ue.attributes,delete ue.context,delete ue.vao,"stencil"in ue&&ue.stencil.op&&(ue.stencil.opBack=ue.stencil.opFront=ue.stencil.op,delete ue.stencil.op);function ae(fe){if(fe in ue){var X=ue[fe];delete ue[fe],Object.keys(X).forEach(function(oe){ue[fe+"."+oe]=X[oe]})}}return ae("blend"),ae("depth"),ae("cull"),ae("stencil"),ae("polygonOffset"),ae("scissor"),ae("sample"),"vao"in Se&&(ue.vao=Se.vao),ue}function Pr(Se,ue){var ae={},fe={};return Object.keys(Se).forEach(function(X){var oe=Se[X];if(Qt.isDynamic(oe)){fe[X]=Qt.unbox(oe,X);return}else if(ue&&Array.isArray(oe)){for(var z=0;z<oe.length;++z)if(Qt.isDynamic(oe[z])){fe[X]=Qt.unbox(oe,X);return}}ae[X]=oe}),{dynamic:fe,static:ae}}var an=Pr(qt.context||{},!0),Fo=Pr(qt.uniforms||{},!0),da=Pr(qt.attributes||{},!1),K=Pr(Sr(qt),!1),je={gpuTime:0,cpuTime:0,count:0},Pe=At.compile(K,da,Fo,an,je),Rt=Pe.draw,br=Pe.batch,H=Pe.scope,C=[];function ie(Se){for(;C.length<Se;)C.push(null);return C}function ve(Se,ue){var ae;if(Je&&L.raise("context lost"),typeof Se=="function")return H.call(this,null,Se,0);if(typeof ue=="function")if(typeof Se=="number")for(ae=0;ae<Se;++ae)H.call(this,null,ue,ae);else if(Array.isArray(Se))for(ae=0;ae<Se.length;++ae)H.call(this,Se[ae],ue,ae);else return H.call(this,Se,ue,0);else if(typeof Se=="number"){if(Se>0)return br.call(this,ie(Se|0),Se|0)}else if(Array.isArray(Se)){if(Se.length)return br.call(this,Se,Se.length)}else return Rt.call(this,Se)}return u(ve,{stats:je,destroy:function(){Pe.destroy()}})}var Wr=ze.setFBO=hn({framebuffer:Qt.define.call(null,Kf,"framebuffer")});function Yr(qt,Sr){var Pr=0;At.procs.poll();var an=Sr.color;an&&(q.clearColor(+an[0]||0,+an[1]||0,+an[2]||0,+an[3]||0),Pr|=qy),"depth"in Sr&&(q.clearDepth(+Sr.depth),Pr|=eg),"stencil"in Sr&&(q.clearStencil(Sr.stencil|0),Pr|=tg),L(!!Pr,"called regl.clear with no buffer specified"),q.clear(Pr)}function pn(qt){if(L(typeof qt=="object"&&qt,"regl.clear() takes an object as input"),"framebuffer"in qt)if(qt.framebuffer&&qt.framebuffer_reglType==="framebufferCube")for(var Sr=0;Sr<6;++Sr)Wr(u({framebuffer:qt.framebuffer.faces[Sr]},qt),Yr);else Wr(qt,Yr);else Yr(null,qt)}function cn(qt){L.type(qt,"function","regl.frame() callback must be a function"),qe.push(qt);function Sr(){var Pr=Zf(qe,qt);L(Pr>=0,"cannot cancel a frame twice");function an(){var Fo=Zf(qe,an);qe[Fo]=qe[qe.length-1],qe.length-=1,qe.length<=0&&Ar()}qe[Pr]=an}return yr(),{cancel:Sr}}function bn(){var qt=mt.viewport,Sr=mt.scissor_box;qt[0]=qt[1]=Sr[0]=Sr[1]=0,st.viewportWidth=st.framebufferWidth=st.drawingBufferWidth=qt[2]=Sr[2]=q.drawingBufferWidth,st.viewportHeight=st.framebufferHeight=st.drawingBufferHeight=qt[3]=Sr[3]=q.drawingBufferHeight}function yn(){st.tick+=1,st.time=dr(),bn(),At.procs.poll()}function Fr(){Ze.refresh(),bn(),At.procs.refresh(),vt&&vt.update()}function dr(){return(Dn()-ft)/1e3}Fr();function Tn(qt,Sr){L.type(Sr,"function","listener callback must be a function");var Pr;switch(qt){case"frame":return cn(Sr);case"lost":Pr=rr;break;case"restore":Pr=cr;break;case"destroy":Pr=Gt;break;default:L.raise("invalid event, must be one of frame,lost,restore,destroy")}return Pr.push(Sr),{cancel:function(){for(var an=0;an<Pr.length;++an)if(Pr[an]===Sr){Pr[an]=Pr[Pr.length-1],Pr.pop();return}}}}var Dr=u(hn,{clear:pn,prop:Qt.define.bind(null,Kf),context:Qt.define.bind(null,Jd),this:Qt.define.bind(null,Qd),draw:hn({}),buffer:function(qt){return yt.create(qt,ru,!1,!1)},elements:function(qt){return ct.create(qt,!1)},texture:Ze.create2D,cube:Ze.createCube,renderbuffer:Ve.create,framebuffer:ze.create,framebufferCube:ze.createCube,vao:xt.createVAO,attributes:Ce,frame:cn,on:Tn,limits:Me,hasExtension:function(qt){return Me.extensions.indexOf(qt.toLowerCase())>=0},read:ir,destroy:Or,_gl:q,_refresh:Fr,poll:function(){yn(),vt&&vt.update()},now:dr,stats:at});return G.onDone(null,Dr),Dr}return qd})})(dk);var xa,Sc,Ta,Ho,xc,bs,Tc,pv,Bi,su,Xn,Fi,Gi,vv;xa={},jt(xa,Dt.POINTS,"points"),jt(xa,Dt.LINES,"lines"),jt(xa,Dt.LINE_LOOP,"line loop"),jt(xa,Dt.LINE_STRIP,"line strip"),jt(xa,Dt.TRIANGLES,"triangles"),jt(xa,Dt.TRIANGLE_FAN,"triangle fan"),jt(xa,Dt.TRIANGLE_STRIP,"triangle strip");Sc={},jt(Sc,Dt.STATIC_DRAW,"static"),jt(Sc,Dt.DYNAMIC_DRAW,"dynamic"),jt(Sc,Dt.STREAM_DRAW,"stream");Ta={},jt(Ta,Dt.BYTE,"int8"),jt(Ta,Dt.UNSIGNED_INT,"int16"),jt(Ta,Dt.INT,"int32"),jt(Ta,Dt.UNSIGNED_BYTE,"uint8"),jt(Ta,Dt.UNSIGNED_SHORT,"uint16"),jt(Ta,Dt.UNSIGNED_INT,"uint32"),jt(Ta,Dt.FLOAT,"float");Ho={},jt(Ho,Dt.ALPHA,"alpha"),jt(Ho,Dt.LUMINANCE,"luminance"),jt(Ho,Dt.LUMINANCE_ALPHA,"luminance alpha"),jt(Ho,Dt.RGB,"rgb"),jt(Ho,Dt.RGBA,"rgba"),jt(Ho,Dt.RGBA4,"rgba4"),jt(Ho,Dt.RGB5_A1,"rgb5 a1"),jt(Ho,Dt.RGB565,"rgb565"),jt(Ho,Dt.DEPTH_COMPONENT,"depth"),jt(Ho,Dt.DEPTH_STENCIL,"depth stencil");xc={},jt(xc,Dt.DONT_CARE,"dont care"),jt(xc,Dt.NICEST,"nice"),jt(xc,Dt.FASTEST,"fast");bs={},jt(bs,Dt.NEAREST,"nearest"),jt(bs,Dt.LINEAR,"linear"),jt(bs,Dt.LINEAR_MIPMAP_LINEAR,"mipmap"),jt(bs,Dt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),jt(bs,Dt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),jt(bs,Dt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");Tc={},jt(Tc,Dt.REPEAT,"repeat"),jt(Tc,Dt.CLAMP_TO_EDGE,"clamp"),jt(Tc,Dt.MIRRORED_REPEAT,"mirror");pv={},jt(pv,Dt.NONE,"none"),jt(pv,Dt.BROWSER_DEFAULT_WEBGL,"browser");Bi={},jt(Bi,Dt.NEVER,"never"),jt(Bi,Dt.ALWAYS,"always"),jt(Bi,Dt.LESS,"less"),jt(Bi,Dt.LEQUAL,"lequal"),jt(Bi,Dt.GREATER,"greater"),jt(Bi,Dt.GEQUAL,"gequal"),jt(Bi,Dt.EQUAL,"equal"),jt(Bi,Dt.NOTEQUAL,"notequal");su={},jt(su,Dt.FUNC_ADD,"add"),jt(su,Dt.MIN_EXT,"min"),jt(su,Dt.MAX_EXT,"max"),jt(su,Dt.FUNC_SUBTRACT,"subtract"),jt(su,Dt.FUNC_REVERSE_SUBTRACT,"reverse subtract");Xn={},jt(Xn,Dt.ZERO,"zero"),jt(Xn,Dt.ONE,"one"),jt(Xn,Dt.SRC_COLOR,"src color"),jt(Xn,Dt.ONE_MINUS_SRC_COLOR,"one minus src color"),jt(Xn,Dt.SRC_ALPHA,"src alpha"),jt(Xn,Dt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),jt(Xn,Dt.DST_COLOR,"dst color"),jt(Xn,Dt.ONE_MINUS_DST_COLOR,"one minus dst color"),jt(Xn,Dt.DST_ALPHA,"dst alpha"),jt(Xn,Dt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),jt(Xn,Dt.CONSTANT_COLOR,"constant color"),jt(Xn,Dt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),jt(Xn,Dt.CONSTANT_ALPHA,"constant alpha"),jt(Xn,Dt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),jt(Xn,Dt.SRC_ALPHA_SATURATE,"src alpha saturate");Fi={},jt(Fi,Dt.NEVER,"never"),jt(Fi,Dt.ALWAYS,"always"),jt(Fi,Dt.LESS,"less"),jt(Fi,Dt.LEQUAL,"lequal"),jt(Fi,Dt.GREATER,"greater"),jt(Fi,Dt.GEQUAL,"gequal"),jt(Fi,Dt.EQUAL,"equal"),jt(Fi,Dt.NOTEQUAL,"notequal");Gi={},jt(Gi,Dt.ZERO,"zero"),jt(Gi,Dt.KEEP,"keep"),jt(Gi,Dt.REPLACE,"replace"),jt(Gi,Dt.INVERT,"invert"),jt(Gi,Dt.INCR,"increment"),jt(Gi,Dt.DECR,"decrement"),jt(Gi,Dt.INCR_WRAP,"increment wrap"),jt(Gi,Dt.DECR_WRAP,"decrement wrap");vv={},jt(vv,Dt.FRONT,"front"),jt(vv,Dt.BACK,"back");var hk=Function.prototype,pk=hk.toString;pk.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class U_{constructor(){_l(this,"lf");_l(this,"option")}render(a){this.lf=a}getBytesLength(a){if(!a)return 0;let i=0;for(let u=0;u<a.length;u++){const o=a.charCodeAt(u);a.match(/[A-Z]/)?i+=1.5:o>=1&&o<=126||o>=65376&&o<=65439?i+=1:i+=2}return i}layout(a={}){const{nodes:i,edges:u,gridSize:o}=this.lf.graphModel;let l=40,c=40;o>20&&(l=o*2,c=o*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:l,ranksep:c,begin:[120,120],...a};const p=new xG(this.option).layout({nodes:i.map(y=>({id:y.id,size:{width:y.width,height:y.height},model:y})),edges:u.map(y=>({source:y.sourceNodeId,target:y.targetNodeId,model:y}))}),m={nodes:[],edges:[]};p.nodes.forEach(y=>{const{model:S}=y,x=S.getData();x.x=y.x,x.y=y.y,m.nodes.push(x)}),p.edges.forEach(y=>{const{model:S}=y,x=S.getData();if(x.pointsList=this.calcPointsList(S,m.nodes),x.pointsList){const T=x.pointsList[0],w=x.pointsList[x.pointsList.length-1];x.startPoint={x:T.x,y:T.y},x.endPoint={x:w.x,y:w.y},x.text&&x.text.value&&(x.text={x:w.x-this.getBytesLength(x.text.value)*6-10,y:w.y,value:x.text.value})}else x.startPoint=void 0,x.endPoint=void 0,x.text&&x.text.value&&(x.text=x.text.value);m.edges.push(x)}),this.lf.renderRawData(m)}pointFilter(a){const i=a;let u=1;for(;u<i.length-1;){const o=i[u-1],l=i[u],c=i[u+1];o.x===l.x&&l.x===c.x||o.y===l.y&&l.y===c.y?i.splice(u,1):u++}return i}calcPointsList(a,i){const u=[];if(this.option.rankdir==="LR"&&a.modelType==="polyline-edge"){const o=this.lf.getNodeModelById(a.sourceNodeId),l=this.lf.getNodeModelById(a.targetNodeId),c=i.find(p=>p.id===a.sourceNodeId),h=i.find(p=>p.id===a.targetNodeId);if(c.x<h.x)return u.push({x:c.x+o.width/2,y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:c.y}),u.push({x:c.x+o.width/2+(a.offset||50),y:h.y}),u.push({x:h.x-l.width/2,y:h.y}),this.pointFilter(u);if(c.x>h.x)return c.y>=h.y?(u.push({x:c.x,y:c.y+o.height/2}),u.push({x:c.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:c.y+o.height/2+(a.offset||50)}),u.push({x:h.x,y:h.y+l.height/2})):(u.push({x:c.x,y:c.y-o.height/2}),u.push({x:c.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:c.y-o.height/2-(a.offset||50)}),u.push({x:h.x,y:h.y-l.height/2})),this.pointFilter(u)}}}_l(U_,"pluginName","dagre");class vk extends XB{constructor({lf:a}){super({lf:a});const i={text:"复制",icon:!0,className:"lf-menu-copy",callback:V=>a.cloneNode(V.id)},u={text:"删除",icon:!0,className:"lf-menu-delete",callback:V=>{a.deleteNode(V.id),a.deleteEdge(V.id)}},o={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:V=>a.graphModel.editText(V.id)},l={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:V=>a.updateText(V.id,"")},c={text:"框选",icon:!0,className:"lf-menu-select",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},h={text:"清空",icon:!0,className:"lf-menu-clear",callback(){a.clearData()}},p={text:"添加",icon:!0,className:"lf-menu-add",callback:V=>{console.log("🚀 ~ file: menu.ts:66 ~ Menu ~ constructor ~ ele:",V),["endEvent","serviceTask","note"].includes(V.type)?M(V,[m]):M(V,W.nodeMenu)}},m={text:"",icon:!0,className:"lf-menu-back",callback:V=>{M(V,D.nodeMenu)}},y={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"userTask",x:Ee+200,y:ge});a.addEdge({sourceNodeId:V.id,targetNodeId:ye.id})}},S={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"serviceTask",x:Ee+200,y:ge});a.addEdge({type:"noteFlow",sourceNodeId:V.id,targetNodeId:ye.id})}},x={text:"结束",icon:!0,className:"lf-menu-end-event",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"endEvent",x:Ee+150,y:ge});a.addEdge({sourceNodeId:V.id,targetNodeId:ye.id})}},T={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"exclusiveGateway",x:Ee+150,y:ge});a.addEdge({sourceNodeId:V.id,targetNodeId:ye.id})}},w={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"parallelGateway",x:Ee+150,y:ge});a.addEdge({sourceNodeId:V.id,targetNodeId:ye.id})}},N={text:"注释",icon:!0,className:"lf-menu-note",callback:V=>{const{x:Ee,y:ge}=V,ye=a.addNode({type:"note",x:Ee,y:ge-150});a.addEdge({type:"noteFlow",sourceNodeId:V.id,targetNodeId:ye.id})}},M=(V,Ee)=>{setTimeout(()=>{this.__currentData=V;const{left:ge,top:ye}=this.__menuDOM.style;this.showMenu(ge,ye,Ee)})},D={nodeMenu:[p,i,u,o,l],edgeMenu:[u,o,l],graphMenu:[c,h]},W={nodeMenu:[m,y,S,T,w,x,N]};this.setMenuConfig(D)}}class yk extends $B{constructor({lf:a}){super({lf:a}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){a.openSelectionSelect(),a.once("selection:selected",a.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const z_={type:"process",key:"Process",properties:{}};function gk(n){const{id:a,type:i,x:u,y:o,properties:l,children:c,text:h}=n;return{incoming:[],outgoing:[],children:c,type:i,key:a,groupKey:l==null?void 0:l.groupKey,properties:{...l,name:Lb(h)?h:(h==null?void 0:h.value)??"",x:u,y:o,text:h}}}function mk(n){const{id:a,type:i,sourceNodeId:u,targetNodeId:o,startPoint:l,endPoint:c,pointsList:h,properties:p,text:m}=n;return{incoming:[u],outgoing:[o],type:i,key:a,groupKey:p==null?void 0:p.groupKey,properties:{...p,name:Lb(m)?m:(m==null?void 0:m.value)??"",text:m,startPoint:l,endPoint:c,pointsList:h}}}function bk(n){const{id:a,type:i,properties:u,text:o}=n;return{type:i,key:a,properties:{...u,name:Lb(o)?o:(o==null?void 0:o.value)??""}}}function Ek(n){const a=new Map,i={processData:z_,flowElementList:[]};return n.nodes.forEach(u=>{var o;if(u.type==="process")i.processData=bk(u);else{const l=gk(u);(o=i.flowElementList)==null||o.push(l),a.set(u.id,l)}}),n.edges.forEach(u=>{var h;const o=mk(u);a.get(u.sourceNodeId).outgoing.push(o.key),a.get(u.targetNodeId).incoming.push(o.key),(h=i.flowElementList)==null||h.push(o)}),i}function Ok(n){const{incoming:a,outgoing:i,properties:u,key:o,type:l}=n,{text:c,name:h,startPoint:p,endPoint:m,pointsList:y}=u??{},S={id:o,type:l,sourceNodeId:(a==null?void 0:a[0])??"",targetNodeId:(i==null?void 0:i[0])??"",text:c||h,startPoint:p,endPoint:m,pointsList:y,properties:{}},x=["startPoint","endPoint","pointsList","text"];return S.properties=Cb(u,x),S}function Sk(n){const{properties:a,key:i,type:u,children:o}=n,{x:l,y:c,text:h,name:p}=a??{},m={id:i,type:u??"",x:l,y:c,text:h||p,children:o,properties:{}},y=["x","y","text"];return m.properties=Cb(a,y),m}function xk(n){const{properties:a,key:i,type:u}=n,{name:o}=a??{},l={id:i,type:u??"",text:o,x:0,y:0},c=["x","y","text"];return l.properties=Cb(a,c),l}function Tk(n){const{flowElementList:a}=n,i=c=>["sequenceFlow","noteFlow"].includes(c),u=(a==null?void 0:a.filter(c=>!i(c.type)).map(Sk))??[],o=(a==null?void 0:a.filter(c=>i(c.type)).map(Ok))??[];return u.unshift(xk(n.processData??z_)),{nodes:u,edges:o}}class aE{constructor({lf:a}){a.adapterIn=this.adapterIn,a.adapterOut=this.adapterOut}adapterOut(a){return Ek(a)}adapterIn(a){return Tk(a)}}_l(aE,"pluginName","turboAdapter");const Ak=tB("span",null,"编辑JSON",-1),Pk=Db({__name:"flow-editor",props:{modelValue:null,visible:{type:Boolean}},emits:["confirm"],setup(n,{emit:a}){const u=zA(n),{modelValue:o,visible:l}=u,c=Qj("");function h(){const p=JSON.parse(c.value);o.value=p,a("confirm",p),l.value=!1}return qj(()=>{c.value=JSON.stringify(o.value,null,2)}),(p,m)=>{const y=Es("el-button"),S=Es("el-input"),x=Es("el-drawer");return _c(),yv(x,{modelValue:si(l),"onUpdate:modelValue":m[1]||(m[1]=T=>gv(l)?l.value=T:null)},{header:wc(()=>[Ak,Nc(y,{type:"primary",size:"default",onClick:h},{default:wc(()=>[eB("确定")]),_:1})]),default:wc(()=>[Nc(S,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=T=>c.value=T),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])}}}),jk=Db({__name:"index",props:{lf:null,initOptions:null,modelValue:null,elementData:null,formData:null,formOptions:null,formWidth:null},setup(n){const a=n,i=Zj(a),{lf:u,graphData:o,formData:l,formLoading:c,formOption:h,editorVisible:p,onUpdateFormData:m}=i,y=HA("container");return kA(()=>{var S;u.value=new $A({container:document.querySelector(`#${y}`),grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[z3,yk,VB,vk,YB,FB,Ub,EP,aE,U_],edgeGenerator:(x,T)=>{if(["note","serviceTask"].includes(T.type))return"noteFlow"},...a.initOptions}),(S=u.value)==null||S.setTheme(XA),dB(i),UA(o,x=>{var M,D,W;const T=JSON.stringify(x),w=JSON.stringify((M=u.value)==null?void 0:M.getGraphData());T!==w&&((D=u.value)==null||D.render(x),(W=u.value)==null||W.emit("element:click",{isForce:!0}))},{immediate:!0})}),(S,x)=>{const T=Es("el-main"),w=Es("el-empty"),N=Es("avue-form"),M=Es("el-aside"),D=Es("el-container");return _c(),yv(D,{class:"lf-container"},{default:wc(()=>[Nc(T,{id:si(y),class:"lf-main"},null,8,["id"]),Nc(M,{width:n.formWidth,class:"lf-aside"},{default:wc(()=>{var W;return[(W=si(h).group)!=null&&W.length?si(c)?rB("",!0):(_c(),yv(N,{key:1,modelValue:si(l),"onUpdate:modelValue":[x[0]||(x[0]=V=>gv(l)?l.value=V:null),si(m)],option:si(h)},null,8,["modelValue","option","onUpdate:modelValue"])):(_c(),yv(w,{key:0,description:"选择元素以编辑数据"}))]}),_:1},8,["width"]),Nc(Pk,{modelValue:si(o),"onUpdate:modelValue":x[1]||(x[1]=W=>gv(o)?o.value=W:null),visible:si(p),"onUpdate:visible":x[2]||(x[2]=W=>gv(p)?p.value=W:null),onConfirm:x[3]||(x[3]=W=>{var V;return(V=si(u))==null?void 0:V.render(W)})},null,8,["modelValue","visible"])]),_:1})}}}),_k=["id"],Bk=Db({__name:"index",props:{lf:null,initOptions:null,modelValue:null},setup(n){const i=zA(n,void 0,{passive:!0}),{lf:u,modelValue:o}=i,l=HA("container");return kA(()=>{var c;u.value=new $A({container:document.querySelector(`#${l}`),grid:{type:"dot",size:10},isSilentMode:!0,plugins:[Ub,EP,aE]}),(c=u.value)==null||c.setTheme(XA),UA(o,h=>{var p;(p=u.value)==null||p.render(h)},{immediate:!0})}),(c,h)=>(_c(),nB("div",{id:si(l),class:"lf-container"},null,8,_k))}});export{Ub as B,z3 as C,U_ as D,O3 as E,G3 as G,vk as M,C3 as N,g3 as P,b3 as S,aE as T,_3 as U,jk as _,Bk as a,m3 as b,E3 as c,XA as d,S3 as e,x3 as f,T3 as g,A3 as h,P3 as i,w3 as j,N3 as k,M3 as l,R3 as m,I3 as n,L3 as o,j3 as p,B3 as q,k3 as r,EP as s,yk as t,Ek as u,Tk as v};
