var pe=Object.defineProperty;var ue=(n,e,o)=>e in n?pe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var _=(n,e,o)=>(ue(n,typeof e!="symbol"?e+"":e,o),o);import{d as de,u as me}from"../flow-design_demo.md.d62e10e5.js";import{a as co,f as po,g as uo,h as mo,j as yo,c as vo,e as fo,k as ho,l as bo,i as go,m as ko,n as xo,p as wo,o as No,s as To,q as _o,r as Eo,b as Mo,t as Do}from"../flow-design_demo.md.d62e10e5.js";import{C as ye,M as ve,D as fe,l as Z,S as he,a as be,I as ge,B as ee,G as te}from"./index.23d50df3.js";import{u as Co,v as Po,E as So,e as Go,f as Oo,g as Lo,s as Fo,t as Io,q as Bo,r as $o,N as qo,p as Uo,h as Ko,i as jo,P as Jo,b as Ro,n as Wo,o as Ao,k as zo,m as Ho,c as Qo,d as Xo,U as Yo,j as Zo}from"./index.23d50df3.js";import{R as ke,ak as W}from"../composables_use-crud_index.md.48b0a24a.js";import{i as A,u as xe}from"./uniqueId.51d652d7.js";import{n as K,w as oe,h as se,r as we,e as Ne,H as N,j as S,D as B,E as G,l as j,J as q,p as Te,u as x,i as $,C as _e,f as Ee,k as Me,aG as De}from"./framework.1d422142.js";import{u as Ve}from"./theme.8df2a84c.js";import"../app.fb453014.js";import"../components_icon-select_index.md.d0d43ced.js";import"../components_index.md.b1856c98.js";import"../components_input-tree_index.md.13d0ff03.js";import"./index.6f48f4cc.js";import"../components_v-text_index.md.57fcf476.js";import"../composables_index.md.89926003.js";import"../flow-design_index.md.f1ee796f.js";import"../flow-pages_index.md.4fd7ab24.js";import"../flow-pages_pages_flow-button_index.md.edc4c66c.js";import"../flow-pages_pages_flow-manage_index.md.beb8e2a9.js";import"../flow-pages_pages_flow-ops_index.md.dad6d105.js";import"../flow-pages_pages_flow-param_index.md.e37087dc.js";import"../flow-pages_pages_flow-template_index.md.1e0c8ffd.js";import"../flow-pages_pages_flow-workbench_index.md.edb2d8bd.js";import"../flow-pages_pages_form-template_index.md.45f44974.js";import"../flow-pages_pages_table-template_index.md.501eedc1.js";import"../form-design_demo.md.b1554396.js";import"../form-design_index.md.3d2472a1.js";import"../guide_changelog.md.dd7dcebf.js";import"../guide_start.md.b957fce8.js";import"../index.md.fd18855f.js";import"../plugins_avue-patch_index.md.0cfa85f6.js";import"../plugins_compatible-tips_index.md.5e5fa418.js";import"../plugins_env-dts_index.md.a9695643.js";import"../plugins_index.md.14cfbd27.js";import"../plugins_load-proxy_index.md.460b4705.js";import"../plugins_setup-extend_index.md.a8d01b60.js";import"../plugins_uni-ui-patch_index.md.c7328042.js";import"../plugins_uview-patch_index.md.ac46d490.js";import"../types_avue_index.md.f7c69920.js";import"../types_index.md.bc889cae.js";import"../utils_date_dateFormat.md.d569be23.js";import"../utils_date_durationFormat.md.867acb13.js";import"../utils_emitter_mittAsync.md.15be3108.js";import"../utils_index.md.f9614baf.js";import"../utils_math_index.md.b373ac2c.js";import"../utils_object_filterObj.md.eee4ca82.js";import"../utils_object_filterObjDeep.md.ab95bd01.js";import"../utils_object_getDataType.md.b0332010.js";import"../utils_string_deserialize.md.e28d6a15.js";import"../utils_string_serialize.md.d2c59757.js";import"../utils_string_uuid.md.52281c59.js";import"../utils_tool_awaitTo.md.74d6774f.js";import"../utils_tool_enumToDic.md.ab28ad3d.js";import"../utils_tool_sleep.md.aa5d330d.js";import"../utils_tree_buildTree.md.c38f7d68.js";import"../utils_tree_filterTree.md.12fe1fef.js";import"../utils_tree_findTree.md.b928ae2a.js";import"../utils_tree_flatTree.md.a2813919.js";import"../utils_tree_treeMap.md.3e9922c0.js";const ae={rect:{radius:5,stroke:"black"},circle:{r:18,stroke:"black"},polygon:{stroke:"black"},polyline:{stroke:"black",hoverStroke:"black",selectedStroke:"black"},edgeText:{background:{fill:"white",height:14,stroke:"transparent",radius:3}},nodeText:{}},Ce=[{label:"开始",value:"start"},{label:"任务",value:"task"},{label:"结束",value:"end"}],Pe=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],Se=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],oo=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:Ce},{label:"类型",prop:"eventType",type:"select",dicData:Pe},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:Se},{label:"值",prop:"fieldValue"}]}}]}}],Ge=[{label:"创建",value:"create"},{label:"指派",value:"assignment"},{label:"完成",value:"complete"},{label:"删除",value:"delete"},{label:"更新",value:"update"},{label:"超时",value:"timeout"}],Oe=[{label:"类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}],Le=[{label:"字符串",value:"string"},{label:"表达式",value:"expression"}],ao=[{label:"",labelWidth:0,prop:"executionListener",type:"dynamic",children:{type:"form",index:!1,column:[{label:"事件",prop:"eventName",type:"select",dicData:Ge},{label:"类型",prop:"eventType",type:"select",dicData:Oe},{label:"值",prop:"eventValue",type:"textarea",minRows:1,span:24},{label:"字段",prop:"fields",type:"dynamic",span:24,children:{column:[{label:"字段名",prop:"fieldName"},{label:"类型",prop:"fieldType",type:"select",dicData:Le},{label:"值",prop:"fieldValue"}]}}]}}],no=[{label:"",labelWidth:0,prop:"timeLimit",type:"dynamic",children:{column:[{label:"名称",prop:"name"},{label:"最小值",prop:"min",type:"number"},{label:"最大值",prop:"max",type:"number"}]},value:[]}];function ne(n,e){return n.map(o=>{const a=e.find(c=>c.buttonKey===o.buttonKey),{name:s,buttonKey:l,display:r,approval:p}=o;return{name:s,buttonKey:l,display:r,approval:p,...a}})}function J(n,e){return n.map(o=>{var h,b;const a=e.find(v=>v.prop===o.prop),{label:s,prop:l,display:r=!0,disabled:p=!1,detail:i=!1,readonly:c=!1,rules:m}=o,y=(m==null?void 0:m.some(v=>v.required))??!1,f={label:s,prop:l,display:r,disabled:p,detail:i,readonly:c,required:y,...a};return o.type==="dynamic"&&((b=(h=o.children)==null?void 0:h.column)!=null&&b.length)&&(f.children=J(o.children.column,(a==null?void 0:a.children)??[])),f})}function Fe({lf:n,graphData:e,elementData:o,formData:a,formLoading:s,formOption:l,formOptions:r,editorVisible:p,dataOptions:i,formRef:c,formDefaults:m}){var h,b,v,g,E,M,D,V,C;async function y({data:u,isForce:t}={data:{},isForce:!1}){var k,w,T,O,L,F,I;const d=(k=n.value)==null?void 0:k.graphModel.nodes.find(U=>U.type==="process");!u&&(d!=null&&d.id)&&(u=(w=n.value)==null?void 0:w.getNodeDataById(d.id)),!((u==null?void 0:u.id)===((T=o.value)==null?void 0:T.id)&&(u==null?void 0:u.type)===((O=o.value)==null?void 0:O.type)&&!t)&&(u.type!=="process"&&((L=n.value)==null||L.selectElementById(u.id)),s.value=!0,await K(),o.value=u,l.value={menuBtn:!1,span:24,labelPosition:"left",group:((F=r.value)==null?void 0:F[u.type])??de},a.value={...u.properties,id:u.id,name:((I=u.text)==null?void 0:I.value)||""},s.value=!1,await K(),f())}async function f(){var O,L,F,I,U,z,H;const{formPropertyList:u,buttonList:t,fieldsDic:d,flowButtonDisplayDic:k,flowButtonApprovalDic:w}=i.value??{},T=P=>{var Q,X;return(X=(Q=l.value)==null?void 0:Q.group)==null?void 0:X.some(re=>{var Y;return(Y=re.column)==null?void 0:Y.some(ce=>ce.prop===P)})};T("button")&&(a.value.button=ne(t||[],((O=a.value)==null?void 0:O.button)||[]),(I=(F=(L=m.value)==null?void 0:L.button.children)==null?void 0:F.column)==null||I.forEach(P=>{P.prop==="display"&&(P.dicData=k),P.prop==="approval"&&(P.dicData=w)})),T("formProperty")&&(a.value.formProperty=J(u||[],((U=a.value)==null?void 0:U.formProperty)||[])),T("priority")&&((z=c.value)==null||z.updateDic("priority",d)),T("formTitle")&&((H=c.value)==null||H.updateDic("formTitle",d))}(h=n.value)==null||h.on("element:click",y),(b=n.value)==null||b.on("blank:click",y),(v=n.value)==null||v.on("node:add",y),(g=n.value)==null||g.on("node:dnd-add",y),(E=n.value)==null||E.on("node:delete",()=>y()),(M=n.value)==null||M.on("history:change",()=>{var u;e.value=(u=n.value)==null?void 0:u.getGraphData()}),(D=n.value)==null||D.on("custom:edit-click",()=>{p.value=!0}),(V=n.value)==null||V.on("custom:reset-form-property",()=>{var u,t;(t=(u=e.value)==null?void 0:u.flowElementList)==null||t.forEach(d=>{var k,w;(k=d.properties)!=null&&k.formProperty&&(d.properties.formProperty=J(((w=i.value)==null?void 0:w.formPropertyList)||[],[]))}),e.value={...e.value}}),(C=n.value)==null||C.on("custom:reset-button",()=>{var u,t;(t=(u=e.value)==null?void 0:u.flowElementList)==null||t.forEach(d=>{var k,w;(k=d.properties)!=null&&k.button&&(d.properties.button=ne(((w=i.value)==null?void 0:w.buttonList)||[],[]))}),e.value={...e.value}})}class Ie extends ye{constructor({lf:e}){super({lf:e}),[{key:"clear",iconClass:"lf-control-clear",title:"清空",text:"清空",onClick:()=>e.clearData()},{key:"edit",iconClass:"lf-control-edit",title:"编辑",text:"编辑",onClick:()=>e.emit("custom:edit-click",{})},{key:"mini-map",iconClass:"lf-control-mini-map",title:"导航",text:"导航",onClick:()=>{const{isShow:a,show:s,hide:l}=e.extension.miniMap??{};a?l():s()}},{key:"reset",iconClass:"lf-control-reset",title:"重置",text:"重置",onClick:()=>{ke.confirm("选择重置的配置","提示",{confirmButtonText:"重置表单配置",cancelButtonText:"重置按钮配置"}).then(()=>{e.emit("custom:reset-form-property",{})}).catch(()=>{e.emit("custom:reset-button",{})})}}].forEach(a=>this.addItem(a))}}class so{}class Be extends ve{constructor({lf:e}){super({lf:e});const o={text:"复制",icon:!0,className:"lf-menu-copy",callback:t=>e.cloneNode(t.id)},a={text:"删除",icon:!0,className:"lf-menu-delete",callback:t=>{e.deleteNode(t.id),e.deleteEdge(t.id)}},s={text:"编辑文本",icon:!0,className:"lf-menu-edit",callback:t=>e.graphModel.editText(t.id)},l={text:"删除文本",icon:!0,className:"lf-menu-delete",callback:t=>e.updateText(t.id,"")},r={text:"框选",icon:!0,className:"lf-menu-select",callback(){e.openSelectionSelect(),e.once("selection:selected",e.closeSelectionSelect)}},p={text:"清空",icon:!0,className:"lf-menu-clear",callback:()=>e.clearData()},i={text:"",icon:!0,className:"lf-menu-back",callback:t=>this.changeMenuList(t,u.nodeMenu)},c={text:"添加",icon:!0,className:"lf-menu-add",callback:t=>{let d=[];switch(t.type){case"startEvent":case"userTask":case"exclusiveGateway":case"parallelGateway":case"circulateTask":d=[i,m,y,f,b,v,h,g];break;case"endEvent":case"sequenceFlow":case"group":case"serviceTask":d=[i,g];break;default:d=[i]}this.changeMenuList(t,d)}},m={text:"用户任务",icon:!0,className:"lf-menu-user-task",callback:t=>this.addNode(t,{type:"userTask",x:t.x+200,y:t.y})},y={text:"服务任务",icon:!0,className:"lf-menu-service-task",callback:t=>this.addNode(t,{type:"serviceTask",x:t.x+200,y:t.y})},f={text:"传阅任务",icon:!0,className:"lf-menu-circulate-task",callback:t=>this.addNode(t,{type:"circulateTask",x:t.x+200,y:t.y})},h={text:"结束",icon:!0,className:"lf-menu-end-event",callback:t=>this.addNode(t,{type:"endEvent",x:t.x+150,y:t.y})},b={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:t=>this.addNode(t,{type:"exclusiveGateway",x:t.x+150,y:t.y})},v={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:t=>this.addNode(t,{type:"parallelGateway",x:t.x+150,y:t.y})},g={text:"注释",icon:!0,className:"lf-menu-note",callback:t=>this.addNode(t,{type:"note",x:t.x,y:t.y-150})},E={text:"切换类型",icon:!0,className:"lf-menu-switch",callback:t=>{let d=[];switch(t.type){case"exclusiveGateway":d=[i,V];break;case"parallelGateway":d=[i,C];break;case"startEvent":d=[i,D];break;case"endEvent":d=[i,M];break;default:d=[i]}this.changeMenuList(t,d)}},M={text:"开始",icon:!0,className:"lf-menu-start-event",callback:t=>this.changeNodeType(t,"startEvent")},D={text:"结束",icon:!0,className:"lf-menu-end-event",callback:t=>this.changeNodeType(t,"endEvent")},V={text:"并行网关",icon:!0,className:"lf-menu-parallel-gateway",callback:t=>this.changeNodeType(t,"parallelGateway")},C={text:"互斥网关",icon:!0,className:"lf-menu-exclusive-gateway",callback:t=>this.changeNodeType(t,"exclusiveGateway")},u={nodeMenu:[c,o,a,E,s,l],edgeMenu:[a,s,l],graphMenu:[r,p]};this.setMenuConfig(u)}changeMenuList(e,o){setTimeout(()=>{this.__currentData=e;const{left:a,top:s}=this.__menuDOM.style;this.showMenu(a,s,o)})}addNode(e,o){const a=this.lf.addNode(o),s=["serviceTask","note"].includes(o.type);this.lf.addEdge({type:s?"noteFlow":void 0,sourceNodeId:e.id,targetNodeId:a.id})}changeNodeType(e,o){this.lf.changeNodeType(e.id,o),Object.keys(e.properties||{}).forEach(a=>this.lf.deleteProperty(e.id,a)),this.lf.emit("element:click",{data:{...e,type:o,properties:{}}})}}class $e extends fe{constructor({lf:e}){super({lf:e}),this.setPatternItems([{label:"框选",icon:"https://api.iconify.design/bpmn/lasso-tool.svg?width=24&height=24",callback(){e.openSelectionSelect(),e.once("selection:selected",e.closeSelectionSelect)}},{type:"group",label:"子流程",icon:"https://api.iconify.design/bpmn/subprocess-expanded.svg?width=24&height=24"},{type:"startEvent",text:"开始",label:"开始节点",icon:"https://api.iconify.design/bpmn/start-event.svg?width=24&height=24"},{type:"endEvent",text:"结束",label:"结束节点",icon:"https://api.iconify.design/bpmn/end-event.svg?width=24&height=24"},{type:"userTask",label:"用户任务",icon:"https://api.iconify.design/bpmn/user-task.svg?width=24&height=24"},{type:"serviceTask",label:"服务任务",icon:"https://api.iconify.design/bpmn/service-task.svg?width=24&height=24"},{type:"circulateTask",label:"传阅任务",icon:"https://api.iconify.design/bpmn/manual-task.svg?width=24&height=24"},{type:"exclusiveGateway",label:"互斥网关",icon:"https://api.iconify.design/bpmn/gateway-xor.svg?width=24&height=24"},{type:"parallelGateway",label:"并行网关",icon:"https://api.iconify.design/bpmn/gateway-parallel.svg?width=24&height=24"},{type:"note",label:"注释",icon:"https://api.iconify.design/bpmn/text-annotation.svg?width=24&height=24"}])}}const le={type:"process",key:"Process",properties:{}};function qe(n){const{id:e,type:o,x:a,y:s,properties:l,children:r,text:p}=n;return{incoming:[],outgoing:[],children:r,type:o,key:e,groupKey:l==null?void 0:l.groupKey,properties:{...l,name:A(p)?p:(p==null?void 0:p.value)??"",x:a,y:s,text:p}}}function Ue(n){const{id:e,type:o,sourceNodeId:a,targetNodeId:s,startPoint:l,endPoint:r,pointsList:p,properties:i,text:c}=n;return{incoming:[a],outgoing:[s],type:o,key:e,groupKey:i==null?void 0:i.groupKey,properties:{...i,name:A(c)?c:(c==null?void 0:c.value)??"",text:c,startPoint:l,endPoint:r,pointsList:p}}}function Ke(n){const{id:e,type:o,properties:a,text:s}=n;return{type:o,key:e,properties:{...a,name:A(s)?s:(s==null?void 0:s.value)??""}}}function je(n){const e=new Map,o={processData:le,flowElementList:[]};return n.nodes.forEach(a=>{var s;if(a.type==="process")o.processData=Ke(a);else{const l=qe(a);(s=o.flowElementList)==null||s.push(l),e.set(a.id,l)}}),n.edges.forEach(a=>{var p;const s=Ue(a);e.get(a.sourceNodeId).outgoing.push(s.key),e.get(a.targetNodeId).incoming.push(s.key),(p=o.flowElementList)==null||p.push(s)}),o}function Je(n){const{incoming:e,outgoing:o,properties:a,key:s,type:l}=n,{text:r,name:p,startPoint:i,endPoint:c,pointsList:m}=a??{},y={id:s,type:l,sourceNodeId:(e==null?void 0:e[0])??"",targetNodeId:(o==null?void 0:o[0])??"",text:r||p,startPoint:i,endPoint:c,pointsList:m,properties:{}},f=["startPoint","endPoint","pointsList","text"];return y.properties=W(a,f),y}function Re(n){const{properties:e,key:o,type:a,children:s}=n,{x:l,y:r,text:p,name:i}=e??{},c={id:o,type:a??"",x:l,y:r,text:p||i,children:s,properties:{}},m=["x","y","text"];return c.properties=W(e,m),c}function We(n){const{properties:e,key:o,type:a}=n,{name:s}=e??{},l={id:o,type:a??"",text:s,x:0,y:0},r=["x","y","text"];return l.properties=W(e,r),l}function Ae(n){const{flowElementList:e}=n,o=r=>["sequenceFlow","noteFlow"].includes(r),a=(e==null?void 0:e.filter(r=>!o(r.type)).map(Re))??[],s=(e==null?void 0:e.filter(r=>o(r.type)).map(Je))??[];return a.unshift(We(n.processData??le)),{nodes:a,edges:s}}class R{constructor({lf:e}){e.adapterIn=this.adapterIn,e.adapterOut=this.adapterOut}adapterOut(e){return je(e)}adapterIn(e){return Ae(e)}}_(R,"pluginName","turboAdapter");class ie{constructor({lf:e}){_(this,"lf");_(this,"container");_(this,"__tooltipDOM");_(this,"__tooltips",[]);this.__tooltipDOM=document.createElement("div"),this.__tooltipDOM.className="lf-tooltip",this.__tooltipDOM.style.position="absolute",this.__tooltipDOM.style.display="none",this.lf=e}render(e,o){this.container=o,o.appendChild(this.__tooltipDOM),e.on("node:mouseenter,edge:mouseenter",({data:a,e:s})=>{var c;const l=(c=this.__tooltips.find(m=>m.id===a.id))==null?void 0:c.content;if(!l)return;this.__tooltipDOM.innerHTML=l;const r=e.getPointByClient(s.x,s.y),{domOverlayPosition:{x:p,y:i}}=r;this.__tooltipDOM.style.top=`${i+10}px`,this.__tooltipDOM.style.left=`${p+10}px`,this.__tooltipDOM.style.display="block"}),e.on("node:mouseleave,edge:mouseleave",()=>{this.__tooltipDOM.style.display="none"})}setTooltips(e){this.__tooltips=e}}_(ie,"pluginName","tooltip");function ze({props:n,state:e}){const{lf:o,graphData:a}=e;function s(r){var p;o.value=new Z.LogicFlow({container:r,grid:{type:"dot",size:10},nodeTextDraggable:!0,edgeTextDraggable:!0,nodeTextEdit:!0,edgeTextEdit:!0,plugins:[Ie,$e,he,Be,be,ge,ee,te,R],edgeGenerator:(i,c)=>{if(["note","serviceTask"].includes(c.type))return"noteFlow"},...n.initOptions}),(p=o.value)==null||p.setTheme(ae),Fe(e),oe(a,i=>{var f,h,b;const c=JSON.stringify(i),m=JSON.stringify((f=o.value)==null?void 0:f.getGraphData());c!==m&&((h=o.value)==null||h.render(i),(b=o.value)==null||b.emit("element:click",{isForce:!0}))},{immediate:!0})}function l(r){var p;o.value=new Z.LogicFlow({container:r,grid:{type:"dot",size:10},isSilentMode:!0,plugins:[ee,te,R,ie],...n.initOptions}),(p=o.value)==null||p.setTheme(ae),oe(()=>[a.value,n.styles,n.tooltips],async()=>{var i,c,m,y;(i=o.value)==null||i.render(a.value),await K(),(c=n.styles)==null||c.forEach(({id:f,style:h})=>{var b,v;f&&((v=(b=o.value)==null?void 0:b.graphModel)==null||v.updateAttributes(f,{style:h}))}),(y=(m=o.value)==null?void 0:m.extension.tooltip)==null||y.setTooltips(n.tooltips??[])},{immediate:!0})}return{initViewer:l,initModeler:s}}const He=_e("span",null,"编辑JSON",-1),Qe=se({__name:"flow-editor",props:{modelValue:{},visible:{type:Boolean}},emits:["confirm"],setup(n,{emit:e}){const a=Ve(n),{modelValue:s,visible:l}=a,r=we("");function p(){const i=JSON.parse(r.value);s.value=i,e("confirm",i),l.value=!1}return Ne(()=>{r.value=JSON.stringify(s.value,null,2)}),(i,c)=>{const m=N("el-input"),y=N("el-button"),f=N("el-drawer");return S(),B(f,{modelValue:x(l),"onUpdate:modelValue":c[1]||(c[1]=h=>$(l)?l.value=h:null)},{header:G(()=>[He,j(i.$slots,"header")]),default:G(()=>[q(m,{modelValue:r.value,"onUpdate:modelValue":c[0]||(c[0]=h=>r.value=h),class:"flow-editor__textarea",type:"textarea"},null,8,["modelValue"]),q(y,{class:"flow-editor__confirm-btn",type:"primary",onClick:p},{default:G(()=>[Te(" 确定 ")]),_:1})]),_:3},8,["modelValue"])}}}),Xe=["id"],lo=se({__name:"index",props:{lf:{},initOptions:{},modelValue:{},elementData:{},formOptions:{},formData:{},formOption:{},formDefaults:{},formWidth:{},dataOptions:{},type:{},styles:{},tooltips:{}},setup(n){const e=n,o=me(e),{lf:a,graphData:s,formRef:l,formData:r,formOption:p,formDefaults:i,formLoading:c,editorVisible:m,onUpdateFormData:y}=o,{initModeler:f,initViewer:h}=ze({props:e,state:o}),b=xe("logicflow-container");return Ee(()=>{const v=document.querySelector(`#${b}`);e.type==="viewer"?h(v):f(v)}),(v,g)=>{const E=N("el-main"),M=N("el-empty"),D=N("el-skeleton"),V=N("avue-form"),C=N("el-aside"),u=N("el-container");return v.type==="viewer"?(S(),Me("div",{key:0,id:x(b),class:"lf-container"},null,8,Xe)):(S(),B(u,{key:1,class:"lf-container"},{default:G(()=>[q(E,{id:x(b),class:"lf-main"},null,8,["id"]),q(C,{width:v.formWidth,class:"lf-aside"},{default:G(()=>{var t,d;return[j(v.$slots,"form-top"),(d=(t=x(p))==null?void 0:t.group)!=null&&d.length?x(c)?(S(),B(D,{key:1})):(S(),B(V,{key:2,ref_key:"formRef",ref:l,modelValue:x(r),"onUpdate:modelValue":[g[0]||(g[0]=k=>$(r)?r.value=k:null),x(y)],defaults:x(i),"onUpdate:defaults":g[1]||(g[1]=k=>$(i)?i.value=k:null),option:x(p)},null,8,["modelValue","defaults","option","onUpdate:modelValue"])):(S(),B(M,{key:0,description:"选择元素以编辑数据"}))]}),_:3},8,["width"]),q(Qe,{modelValue:x(s),"onUpdate:modelValue":g[2]||(g[2]=t=>$(s)?s.value=t:null),visible:x(m),"onUpdate:visible":g[3]||(g[3]=t=>$(m)?m.value=t:null),onConfirm:g[4]||(g[4]=t=>{var d;return(d=x(a))==null?void 0:d.render(t)})},De({_:2},[v.$slots["editor-header"]?{name:"header",fn:G(()=>[j(v.$slots,"editor-header")]),key:"0"}:void 0]),1032,["modelValue","visible"])]),_:3}))}}});export{ee as BpmnExtend,Co as CirculateTaskModel,Po as CirculateTaskView,Ie as Control,so as Dagre,So as EndEventModel,Go as EndEventView,Oo as ExclusiveGatewayModel,Lo as ExclusiveGatewayView,lo as FlowDesign,co as FlowNodeSelect,te as Group,Fo as GroupModel,Io as GroupView,Be as Menu,Bo as NoteFlowModel,$o as NoteFlowView,qo as NoteModel,Uo as NoteView,$e as Panel,Ko as ParallelGatewayModel,jo as ParallelGatewayView,Jo as ProcessModel,Ro as ProcessView,Wo as SequenceFlowModel,Ao as SequenceFlowView,zo as ServiceTaskModel,Ho as ServiceTaskView,Qo as StartEventModel,Xo as StartEventView,ie as Tooltip,R as TurboAdapter,Yo as UserTaskModel,Zo as UserTaskView,po as assigneeColumn,uo as baseColumn,mo as buttonColumn,yo as circulateColumn,vo as defaultGraphData,de as defaultGroup,fo as defaultOptions,ae as defaultTheme,oo as executionListenerColumn,ho as formPropertyColumn,bo as gatewayColumn,go as injectionKey,ne as mergeButton,J as mergeFormProperty,ko as multiInstanceColumn,xo as noteColumn,wo as processColumn,No as propertyColumn,To as sequenceFlowColumn,_o as serialColumn,Eo as serviceTaskColumn,ao as taskListenerColumn,no as timeLimitColumn,Ae as toLogicflowData,je as toTurboData,ze as useInit,Mo as useInjectState,Fe as useModelerListener,me as useProvideState,Do as userTaskColumn};
