import{d as Me}from"./index.o5MRxqVR.js";import"./index.es.NPg-IaLe.js";import{I as Ve}from"./iconify.ioxkyuwC.js";import{a as ce,f as Ge,g as Je,w as Qe,h as We}from"./index.DT9FHtDl.js";import{m as Xe,u as Fe}from"./index.vr3L8IcF.js";import{j as He}from"./tree.bWVx2IeZ.js";import"./index.9cJsAPUu.js";import"./vuedraggable.umd._uxLVrZP.js";import{e as W}from"./index.kqOif1Uk.js";import{u as Z}from"./index.ozuDmZct.js";import{b as Ye}from"./index.5B_NMU4o.js";import"./form.o6KC_1qt.js";import"./index.cMPhMb2R.js";import{ai as Ie,g as z,h as B,z as le,m as w,P as me,$ as Ze,N as qe,X as et,d as F,D as $,c as R,E as oe,F as Y,o as D,b as A,w as V,e as G,a as J,t as Q,I as P,a5 as ie,a2 as ke,M as Te,k as te,_ as fe,J as $e,a4 as tt,a7 as at,ac as ot,ad as lt,G as nt,O as rt}from"./framework.9dEYo5Bo.js";import{p as st}from"./pick.hwSZBMEn.js";import{t as Ue,a as it}from"./index.qJIJBhna.js";import{E as se}from"./index.0wEB5RRz.js";import{u as Le}from"./index.uIvVZULY.js";import{d as ut}from"./zipWith.cDKToSoU.js";import{d as ct}from"./data.qFFybvHa.js";import{g as re}from"./get.ibBWnMyK.js";import{c as pt}from"./cloneDeep.r1x5-OIa.js";import{m as dt}from"./merge.etFcUWJt.js";function q(e){const{tableOption:t}=H();return Ie({...t,...e})}function mt(e){const{buttonHandler:t,request:o}=H(),{commitTask:r,revokeTask:f,saveDraft:n,startTask:b,terminateTask:d,transferTask:y,withdrawTask:l,rejectTask:k,greenChannel:g}=we(o),a=z(()=>{const{flowDetail:v,formVariables:L,approvalFormData:x,debug:i,fileIds:S}=e,{flowDeployId:I}=v.value.process??{},{taskId:p,flowInstanceId:u}=v.value.task??{};return{flowDeployId:I,taskId:p,flowInstanceId:u,variables:L.value,debug:i.value,fileIds:S==null?void 0:S.value,...x.value}}),m=()=>a.value.taskId&&a.value.flowInstanceId;return{flow_draft(){if(m())return n(a.value)},flow_pass(){return m()?r(a.value):b(a.value)},flow_revoke(){if(m())return f(a.value)},flow_withdraw(){if(m())return l(a.value)},flow_terminate(){if(m())return d(a.value)},flow_transfer(){if(m())return y(a.value)},flow_reject(){if(m())return k(a.value)},flow_green(){if(m())return g(a.value)},...t==null?void 0:t(e)}}function he(){const e=Xe();return{emitter:e,onAfterGetDetail:n=>{e.on("afterGetDetail",async(...b)=>await(n==null?void 0:n(...b)))},onBeforeClick:n=>{e.on("beforeClick",async(...b)=>await(n==null?void 0:n(...b)))},onBeforeSubmit:n=>{e.on("beforeSubmit",async(...b)=>await(n==null?void 0:n(...b)))},onAfterSubmit:n=>{e.on("afterSubmit",async(...b)=>await(n==null?void 0:n(...b)))}}}function Oe(e,t){e.forEach(o=>{var f,n,b,d,y,l;const r=t==null?void 0:t.find(k=>k.prop===o.prop);r&&(o.display=r.display,o.disabled=r.disabled,o.detail=r.detail,o.readonly=r.readonly,o.rules=r.validate?o.rules??[]:[],r.required&&!((f=o.rules)!=null&&f.some(k=>k.required))?(n=o.rules)==null||n.push({required:!0,message:`${o.label}为必填项`}):r.required||(o.rules=o.rules.filter(k=>!k.required)),(d=(b=o.children)==null?void 0:b.column)!=null&&d.length&&((y=r.children)!=null&&y.length)&&Oe((l=o.children)==null?void 0:l.column,r.children))})}function ft(e){const t=B({});return le(async()=>{var r;const{formProperty:o}=((r=w(e))==null?void 0:r.properties)||{};o!=null&&o.length&&(await me(),Oe(Object.values(t.value),o))}),t}const vt={modelValue:{type:Object,default:()=>({})},title:{type:String},flowDetail:{type:Object,default:()=>({})},formLoading:{type:Boolean},submitLoading:{type:Boolean},activeTab:{type:String,default:"formTab"},activeBtn:{type:Object,default:()=>({})},approvalVisible:{type:Boolean},approvalFormData:{type:Object,default:()=>({})},flowKey:{type:String},taskId:{type:String},instanceId:{type:String},formId:{type:String},fileIds:{type:String},permission:{type:Object},afterGetDetail:{type:Function},beforeClick:{type:Function},beforeSubmit:{type:Function},afterSubmit:{type:Function},detail:{type:[Boolean,String],default:!1},debug:{type:[Boolean,String],default:!1}},bt={complete:e=>e},Se=Symbol("flowFormState");function yt(e,t){const o=ce(e,void 0,{passive:!0,deep:!0}),{flowDetail:r,modelValue:f,formLoading:n,activeTab:b,afterGetDetail:d}=o,{emitter:y}=he(),{tabs:l,customForm:k,request:g}=H(),a=B({}),m=z(()=>(l==null?void 0:l.filter(I=>{var _,h,c;const p=(c=(h=(_=r.value)==null?void 0:_.properties)==null?void 0:h.formProperty)==null?void 0:c.find(T=>T.prop===I.prop),u={...I,display:(p==null?void 0:p.display)??I.display};return(u==null?void 0:u.display)!==!1}).map(I=>{var u,_;let p=I.component;if(I.prop==="formTab"){const h=k==null?void 0:k[((_=(u=r==null?void 0:r.value)==null?void 0:u.process)==null?void 0:_.formPath)??""];typeof h=="function"?p=et(h):h&&(p=h)}return{...I,component:p}}))??[]),v=B();X()&&Ge(v,{onSwipeEnd(I,p){if(!["left","right"].includes(p))return;const u=m.value.findIndex(h=>h.prop===b.value),_=Je(u+(p==="right"?-1:1),0,m.value.length-1);b.value=m.value[_].prop}});const{getFlowDetail:L}=we(g);le(()=>{const{flowKey:I,taskId:p,instanceId:u}=e;!I&&!p&&!u||(n.value=!0,L({flowKey:I,taskId:p,flowInstanceId:u}).then(async _=>{var h;r.value=_.data,f.value={..._.data.formData,...f.value},await((h=d==null?void 0:d.value)==null?void 0:h.call(d,_.data)),await y.emitAsync("afterGetDetail",_.data)}).finally(()=>{n.value=!1}))});const x=z(()=>Object.entries(f.value||{}).filter(([I])=>!I.startsWith("$")).map(([I,p])=>({key:I,value:p}))),i=z(()=>e.detail===!0||e.detail==="true"),S={...o,...he(),formData:f,formVariables:x,tabRefs:a,tabList:m,detail:i,tabsRef:v,emit:t};return Ze(Se,S),S}function ae(){return qe(Se)}const Ne=F({__name:"ButtonList",emits:["click"],setup(e,{emit:t}){const o=t,{userInfo:r,request:f}=H(),{flowDetail:n}=ae(),{data:b}=xe(f).useList();function d(l,k){return l.map(g=>{const a=k.find(v=>v.buttonKey===g.buttonKey);return{...g,...st(a,["display","approval","validate"])}})}const y=z(()=>{var I,p,u,_;const l=typeof r=="function"?r():r,{assignee:k,status:g}=((I=n.value)==null?void 0:I.task)||{},{createUser:a,flowInstanceId:m,status:v}=((p=n.value)==null?void 0:p.flowInstance)||{},L={false:!1,startUser:a===String(l==null?void 0:l.userId),assignee:k===String(l==null?void 0:l.userId),todo:g===ue.待办,done:g===ue.已办,unfinished:v===de.未办结,finished:v===de.已办结,started:!!m},x={true:!0,notstarted:!m},{button:i}=((u=n.value)==null?void 0:u.properties)||{};return((_=d(b.value??[],i??[]))==null?void 0:_.filter(h=>{var O;const c=(O=h.display)==null?void 0:O.split(","),T=c==null?void 0:c.filter(N=>N in L).every(N=>L[N]),C=c==null?void 0:c.filter(N=>N in x).some(N=>x[N]);return T||C}))??[]});return(l,k)=>{const g=$("el-button");return D(!0),R(Y,null,oe(y.value,a=>(D(),A(g,{key:a.buttonKey,type:a.buttonType,onClick:m=>o("click",a)},{default:V(()=>[a.icon?(D(),A(w(Ve),{key:0,icon:a.icon},null,8,["icon"])):G("",!0),J(" "+Q(a.name),1)]),_:2},1032,["type","onClick"]))),128)}}}),wt=F({__name:"CommonComments",props:{modelValue:{}},setup(e){const t=e,{modelValue:o}=ce(t),{request:r}=H(),{batchUpdate:f,create:n,remove:b,useList:d}=Ot(r),y=B(!1),{activeBtn:l}=ae(),k=z(()=>{var p;return(p=l.value)==null?void 0:p.buttonKey}),{data:g,refresh:a}=d(k),m=z(()=>{var u,_,h;const p=o.value;if(p&&!((u=g.value)!=null&&u.some(c=>c.content===p))){const c=(((h=(_=g.value)==null?void 0:_[0])==null?void 0:h.sort)||1)-1;return[{content:p,sort:c},...g.value||[]]}return g.value});async function v(p){var u;await n({...p,type:(u=l.value)==null?void 0:u.buttonKey}),se.success("添加成功"),a()}async function L(p){await b(p.id),se.success("删除成功"),a()}async function x(p,u){let _=u.parent.data;_=_.map((h,c)=>({id:h.id,sort:c+1})),await f(_),se.success("修改排序成功"),a(),y.value=!1}function i(){y.value=!0}const S=B();async function I(p){var u;o.value=p.content??"",await me(),(u=S.value)==null||u.blur()}return(p,u)=>{const _=$("el-input"),h=$("el-text"),c=$("el-col"),T=$("el-button"),C=$("el-row"),O=$("el-tree"),N=$("el-popover");return D(),A(N,{visible:y.value,placement:"bottom",title:"常用意见",width:w(X)()?"98%":"600px"},{reference:V(()=>[P(_,{ref_key:"inputRef",ref:S,modelValue:w(o),"onUpdate:modelValue":u[0]||(u[0]=s=>ie(o)?o.value=s:null),type:"textarea",placeholder:"请输入意见",rows:"5",onFocus:u[1]||(u[1]=s=>y.value=!0),onBlur:u[2]||(u[2]=s=>y.value=!1)},null,8,["modelValue"])]),default:V(()=>[P(O,{data:m.value,"node-key":"content",draggable:"","allow-drop":(s,U,j)=>j!=="inner",props:{label:"content"},onNodeClick:I,onNodeDrop:x,onNodeDragStart:i},{default:V(({data:s})=>[P(C,{style:{width:"100%"}},{default:V(()=>[P(c,{span:22},{default:V(()=>[P(h,{truncated:"",title:s.content},{default:V(()=>[J(Q(s.content),1)]),_:2},1032,["title"])]),_:2},1024),P(c,{span:2},{default:V(()=>[s.id?(D(),A(T,{key:0,type:"danger",size:"small",icon:"el-icon-close",text:"",onClick:ke(U=>L(s),["stop"])},null,8,["onClick"])):(D(),A(T,{key:1,type:"primary",size:"small",icon:"el-icon-plus",text:"",onClick:ke(U=>v(s),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:1},8,["data","allow-drop"])]),_:1},8,["visible","width"])}}}),_t=F({__name:"ApprovalTree",props:{modelValue:{},data:{},autoCheck:{type:Boolean},mode:{}},setup(e){const t=e,{modelValue:o}=ce(t),r={element:"ep:flag",post:"ep:share",dept:"ep:share",user:"ep:user"},f=B(),n=z(()=>Ue(t.data??[],(a,m,v)=>{const L=Le();return a.taskNodeKey=(v==null?void 0:v.taskNodeKey)??a.taskNodeKey,a.incoming=(v==null?void 0:v.incoming)??a.incoming,a.multiple=(v==null?void 0:v.multiple)??a.multiple,a.parentId=(v==null?void 0:v.id)??a.parentId,{...a,id:L}})),d={defaultExpandAll:!0,lazy:!0,showCheckbox:!0,nodeKey:"id",load:(a,m)=>{a.level===0?m(n.value):m(a.data.children??[])},onCheck:l,props:{label:"title",class(a){return`node-${a.type}`}}};Qe(()=>[n.value,f.value],async()=>{if(!(!f.value||!n.value.length)&&t.autoCheck){const a=y(n.value);a&&g([a])}},{immediate:!0,debounce:100});function y(a){var m;if(a.length===1)return(m=a[0].children)!=null&&m.length?y(a[0].children):a[0]}async function l(a,{checkedNodes:m}){var x;let v=m.filter(i=>i.type==="user");const L=v.some(i=>i.id===a.id);if(n.value.every(i=>!i.multiple)&&L)v=[a];else if(!a.multiple&&L){const I=((x=f.value)==null?void 0:x.getNode(a)).parent.data.children.filter(p=>p.id!==a.id);v=ut(v,I,"id")}g(v)}function k(a){const m=o.value.filter(v=>v.id!==a.id);g(m)}function g(a){var m;o.value=a,(m=f.value)==null||m.setCheckedNodes(a)}return(a,m)=>{const v=$("el-tag"),L=$("Icon"),x=$("el-tree");return D(),R(Y,null,[(D(!0),R(Y,null,oe(w(o),i=>(D(),A(v,{key:i.id,type:"info",closable:"",onClose:S=>k(i)},{default:V(()=>[J(Q(i.title),1)]),_:2},1032,["onClose"]))),128)),P(x,Te({ref_key:"treeRef",ref:f,class:["approval-tree",`mode-${a.mode}`],data:n.value},d),{default:V(({data:i})=>[te("div",null,[P(L,{icon:r[i.type]||r.element,style:{display:"inline-block"}},null,8,["icon"]),te("span",null,Q(i.title),1)])]),_:1},16,["class","data"])],64)}}}),De=fe(_t,[["__scopeId","data-v-58b65f45"]]),gt=F({__name:"NodeSelect",props:{modelValue:{}},setup(e){const t=e,{modelValue:o}=ce(t),{flowDetail:r}=ae(),f=B(!1);function n({data:b}){b.type==="userTask"&&(f.value=!1,o.value=b.id)}return(b,d)=>{const y=$("el-button"),l=$("el-popover");return D(),A(l,{visible:f.value,"onUpdate:visible":d[0]||(d[0]=k=>f.value=k),placement:"bottom-start",width:"800px",trigger:"click"},{reference:V(()=>[P(y,null,{default:V(()=>[J(" 点击选择节点 ")]),_:1})]),default:V(()=>{var k,g;return[P(w(ze),{"model-value":(g=(k=w(r))==null?void 0:k.process)==null?void 0:g.flowData,view:"",style:{height:"600px"},onNodeClick:n},null,8,["model-value"])]}),_:1},8,["visible"])}}}),kt=F({__name:"ApprovalForm",emits:["submit"],setup(e,{emit:t}){const o=t,{request:r}=H(),{getApprovalNode:f}=we(r),{useParam:n}=ye(r),{formData:b,approvalFormData:d,activeBtn:y,approvalVisible:l,formVariables:k,flowDetail:g}=ae(),a=B([]),m=B([]),v=B([]),L=B([]),x=B(!1),i=B(!1),S=B(),I=z(()=>{const N=a.value.length,s=v.value.length&&!a.value.length;return{menuBtn:!1,labelWidth:"auto",span:24,column:[{label:"指定节点",prop:"jumpTaskNodeKey",display:p("specifyNode"),rules:[{required:!0,message:"请选择指定节点"}]},{label:"审批人",prop:"assignee",display:p("assignee"),rules:N?[{required:!0,validator:u}]:[]},{label:"传阅人",prop:"circulate",display:p("circulate"),rules:s?[{required:!0,validator:_}]:[]},{label:"意见",prop:"comment",display:p("comment"),rules:[{required:!0,message:"请填写意见"}]}]}});function p(N){var s,U;return(U=(s=y.value)==null?void 0:s.approval)==null?void 0:U.includes(N)}function u(N,s,U){var K,ee,E;const j=((K=a.value[0])==null?void 0:K.type)==="parallelGateway",M=(E=(ee=a.value[0])==null?void 0:ee.children)==null?void 0:E.every(pe=>it([pe],Ee=>m.value.some(Re=>Re.id===Ee.id)));if(m.value.length){if(j&&!M)return U("请在每个节点选择审批人")}else return U("请选择审批人");return!0}function _(N,s,U){return L.value.length?!0:U("请选择传阅人")}const{data:h}=n("flow.approval.autocheck"),{data:c}=n("flow.approval.autocomment");le(async()=>{!l.value||!S.value||(me(()=>{S.value.resetForm(),d.value.comment=b.value.comment||c.value==="true"&&y.value.name||""}),T())}),le(async()=>{var N,s;if(p("assignee")&&!(p("specifyNode")&&!d.value.jumpTaskNodeKey)){T();try{i.value=!0;const{taskId:U}=((N=g.value)==null?void 0:N.task)||{},{flowKey:j}=((s=g.value)==null?void 0:s.process)||{},M=await f({flowKey:j,taskId:U,variables:k.value,buttonType:y.value.buttonKey,jumpTaskNodeKey:d.value.jumpTaskNodeKey});a.value=M.data.approvalNodeList,v.value=M.data.circulateNodeList}finally{i.value=!1}}});function T(){a.value=[],m.value=[],v.value=[],L.value=[]}async function C(){await Be(S),x.value=!0;const{data:N,outgoing:s}=O(m.value),{data:U}=O(L.value);d.value.assignee=N,d.value.circulate=U,d.value.outgoing=[...s],o("submit")}function O(N){const s={},U={},j=new Set;return N.forEach(M=>{const{taskNodeKey:K,incoming:ee}=M;s[K]||(s[K]=new Set),M.userId&&s[K].add(M.userId),U[K]=[...s[K]].join(","),ee&&j.add(ee)}),{dataSet:s,data:U,outgoing:j}}return(N,s)=>{const U=$("el-skeleton"),j=$("avue-form"),M=$("el-button");return D(),A($e(w(X)()?"el-drawer":"el-dialog"),{modelValue:w(l),"onUpdate:modelValue":s[6]||(s[6]=K=>ie(l)?l.value=K:null),class:"approval-form-overlay",title:w(y).name,"append-to-body":"",width:"900px",size:"50%",direction:"btt","destroy-on-close":""},{footer:V(()=>[P(M,{onClick:s[5]||(s[5]=K=>l.value=!1)},{default:V(()=>[J(" 取 消 ")]),_:1}),P(M,{type:"primary",onClick:C},{default:V(()=>[J(" 确 定 ")]),_:1})]),default:V(()=>[P(j,{ref_key:"formRef",ref:S,modelValue:w(d),"onUpdate:modelValue":s[4]||(s[4]=K=>ie(d)?d.value=K:null),class:"approval-form",option:I.value},{jumpTaskNodeKey:V(()=>[P(gt,{modelValue:w(d).jumpTaskNodeKey,"onUpdate:modelValue":s[0]||(s[0]=K=>w(d).jumpTaskNodeKey=K)},null,8,["modelValue"])]),assignee:V(()=>[i.value?(D(),A(U,{key:0})):(D(),A(De,{key:"AssigneeTree",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=K=>m.value=K),data:a.value,"auto-check":w(h)==="true",mode:w(X)()?"vertical":"horizontal"},null,8,["modelValue","data","auto-check","mode"]))]),circulate:V(()=>[i.value?(D(),A(U,{key:0})):(D(),A(De,{key:"CirculateTree",modelValue:L.value,"onUpdate:modelValue":s[2]||(s[2]=K=>L.value=K),data:v.value,mode:w(X)()?"vertical":"horizontal"},null,8,["modelValue","data","mode"]))]),comment:V(()=>[P(wt,{modelValue:w(d).comment,"onUpdate:modelValue":s[3]||(s[3]=K=>w(d).comment=K)},null,8,["modelValue"])]),_:1},8,["modelValue","option"])]),_:1},8,["modelValue","title"])}}}),ht={class:"flow-form__title"},Nt=F({__name:"index",props:vt,emits:bt,setup(e,{emit:t}){const o=e,r=t,f=yt(o,r),{ApprovalForm:n,tabsProps:b}=H(),d=n??kt,{title:y,detail:l,flowDetail:k,tabRefs:g,tabList:a,activeTab:m,activeBtn:v,formLoading:L,approvalVisible:x,submitLoading:i,beforeClick:S,beforeSubmit:I,afterSubmit:p,tabsRef:u,emitter:_}=f;async function h(C){var O,N;if(v.value=C,C.validate===1)for(const s of Object.values(g.value))await((O=s==null?void 0:s.validate)==null?void 0:O.call(s));await((N=S==null?void 0:S.value)==null?void 0:N.call(S,C)),await _.emitAsync("beforeClick",C),(C==null?void 0:C.approval)!=="false"?x.value=!0:T()}const c=mt(f);async function T(){var C,O;try{i.value=!0,await((C=I==null?void 0:I.value)==null?void 0:C.call(I,v.value)),await _.emitAsync("beforeSubmit",v.value);const{buttonKey:N}=v.value,s=c[N];if(!s){se.error("无法找到相应的操作");return}const U=await(s==null?void 0:s());await((O=p==null?void 0:p.value)==null?void 0:O.call(p,U)),await _.emitAsync("afterSubmit",U),x.value=!1,r("complete",v.value)}finally{i.value=!1}}return(C,O)=>{const N=$("el-skeleton"),s=$("el-main"),U=$("el-header"),j=$("el-tab-pane"),M=$("el-tabs"),K=$("el-footer"),ee=$("el-container");return w(L)?(D(),A(s,{key:0},{default:V(()=>[P(N)]),_:1})):(D(),A(ee,{key:1,class:"flow-form"},{default:V(()=>[P(U,{class:"flow-form__header",height:"auto"},{default:V(()=>{var E;return[te("div",ht,Q(w(y)??((E=w(k).flowInstance)==null?void 0:E.title)),1),!w(l)&&!w(X)()?(D(),A(Ne,{key:0,onClick:h})):G("",!0)]}),_:1}),P(s,{class:"flow-form__main"},{default:V(()=>[P(M,Te({ref_key:"tabsRef",ref:u,modelValue:w(m),"onUpdate:modelValue":O[0]||(O[0]=E=>ie(m)?m.value=E:null)},w(b)),{default:V(()=>[(D(!0),R(Y,null,oe(w(a),E=>(D(),A(j,{key:E.prop,label:E.label,name:E.prop,lazy:E.lazy,disabled:E.disabled,closable:E.closable},{default:V(()=>[(D(),A($e(E.component),{ref_for:!0,ref:pe=>w(g)[E.prop]=pe},null,512))]),_:2},1032,["label","name","lazy","disabled","closable"]))),128))]),_:1},16,["modelValue"])]),_:1}),!w(l)&&w(X)()?(D(),A(K,{key:0,class:"flow-form__footer",height:"auto"},{default:V(()=>[P(Ne,{onClick:h})]),_:1})):G("",!0),P(w(d),{onSubmit:T})]),_:1}))}}}),Dt=F({setup(){const{flowDetail:e,formData:t,detail:o}=ae(),r=ft(e.value),{proxy:f}=at(),n=B({});le(()=>{const{formOption:y}=e.value.process??{};n.value=He.bind(f)(y||'{"menuBtn":false}'),n.value.detail=o.value});const b=B();function d(){return Be(b)}return{form:t,option:n,defaults:r,formRef:b,validate:d}},render(){return tt($("avue-form"),{ref:"formRef",modelValue:this.form,defaults:this.defaults,option:this.option,class:this.option.class,"onUpdate:modelValue":e=>this.form=e,"onUpdate:defaults":e=>this.defaults=e})}}),Ct=F({__name:"UploadTable",setup(e){const{flowDetail:t,fileIds:o,detail:r}=ae(),{upload:{action:f,headers:n,preview:b,download:d,props:y}={},request:l}=H(),k=typeof n=="function"?n():n,g=z(()=>{var _,h;return((h=(_=t.value)==null?void 0:_.task)==null?void 0:h.flowInstanceId)??Le()}),a=[{label:"文件名",prop:"fileName"},{label:"文件类型",prop:"fileType"},{label:"文件大小",prop:"fileSize"},{label:"版本",prop:"version"},{label:"上传时间",prop:"createTime"}],m=a.filter(_=>_.prop==="fileName"),v={rowKey:"id",align:"center",index:!1,border:!0,stripe:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuType:"menu",menuBtnTitle:"操作",column:X()?m:a},{bindVal:L,getDataList:x,handleDel:i,handleSave:S,afterGetList:I,crudStateRefs:{tableData:p}}=Fe({crudOption:{...At(l),saveSuccessMsg:"上传成功"},tableOption:v,queryForm:{isLatest:1,flowInstanceId:g.value}});I(()=>{o.value=p.value.map(_=>_.id).join(",")}),x();async function u(_,h){var U,j;const{fileName:c,fileType:T,fileSize:C,fileUrl:O,res:N}=y,s={fileName:re({res:_},`${N}.${c}`),fileType:re({res:_},`${N}.${T}`),fileSize:re({res:_},`${N}.${C}`),fileUrl:re({res:_},`${N}.${O}`),taskId:(j=(U=t.value)==null?void 0:U.task)==null?void 0:j.taskId,flowInstanceId:g.value,rootMark:(h==null?void 0:h.rootMark)||"",version:typeof(h==null?void 0:h.version)=="number"?h.version+1:1};await S(s,x,()=>{})}return(_,h)=>{const c=$("el-button"),T=$("el-upload"),C=$("el-dropdown-item"),O=$("avue-crud");return D(),A(O,ot(lt(w(L))),{"menu-left":V(()=>[w(r)?G("",!0):(D(),A(T,{key:0,action:w(f),headers:w(k),"show-file-list":!1,onSuccess:h[0]||(h[0]=N=>u(N))},{default:V(()=>[P(c,{type:"primary",icon:"el-icon-upload"},{default:V(()=>[J(" 点击上传 ")]),_:1})]),_:1},8,["action","headers"]))]),"menu-btn":V(({row:N,index:s})=>[P(C,{icon:"el-icon-view",onClick:U=>{var j;return(j=w(b))==null?void 0:j(N,w(p))}},{default:V(()=>[J(" 预览 ")]),_:2},1032,["onClick"]),P(C,{icon:"el-icon-download",onClick:U=>{var j;return(j=w(d))==null?void 0:j(N,w(p))}},{default:V(()=>[J(" 下载 ")]),_:2},1032,["onClick"]),w(r)?G("",!0):(D(),A(C,{key:0,icon:"el-icon-upload"},{default:V(()=>[P(T,{action:w(f),headers:w(k),"show-file-list":!1,onSuccess:U=>u(U,N)},{default:V(()=>[J(" 更新版本 ")]),_:2},1032,["action","headers","onSuccess"])]),_:2},1024)),w(r)?G("",!0):(D(),A(C,{key:1,icon:"el-icon-delete",onClick:U=>w(i)(N,s)},{default:V(()=>[J(" 删除 ")]),_:2},1032,["onClick"]))]),_:1},16)}}}),Vt={class:"flow-track"},It={key:0},Tt={key:1},$t=F({__name:"FlowTrack",setup(e){const{flowDetail:t}=ae(),o=B(X()?"timeline":"table"),r=[{label:"table",icon:"ep:grid"},{label:"graph",icon:"ep:picture"},{label:"timeline",icon:"ep:finished"}],f=z(()=>{var l,k,g;return((g=(k=(l=t.value)==null?void 0:l.flowHistory)==null?void 0:k.filter(a=>/Task/.test(a.taskNodeType??"")))==null?void 0:g.map(a=>({...a,duration:Me(a.duration)})))??[]}),n={addBtn:!1,menu:!1,border:!0,column:[{label:"节点名称",prop:"taskNodeName"},{label:"处理人",prop:"assigneeName"},{label:"接收时间",prop:"startTime"},{label:"处理时间",prop:"endTime"},{label:"办理时长",prop:"duration"},{label:"操作类型",prop:"type",dicUrl:"/sapier-flow/flow-param/getParam",dicQuery:{paramKey:"flow.handle.type"}},{label:"办理意见",prop:"comment",bind:"comment.handleComment"}]},{request:b}=H(),{data:d}=ye(b).useParam("flow.handle.type");function y(l){var k;return(k=d.value)==null?void 0:k.find(g=>g.value===l)}return(l,k)=>{var S,I,p;const g=$("el-radio-button"),a=$("el-radio-group"),m=$("avue-crud"),v=$("el-card"),L=$("el-timeline-item"),x=$("el-timeline"),i=$("el-empty");return D(),R(Y,null,[w(X)()?G("",!0):(D(),A(a,{key:0,modelValue:o.value,"onUpdate:modelValue":k[0]||(k[0]=u=>o.value=u)},{default:V(()=>[(D(),R(Y,null,oe(r,u=>P(g,{key:u.label,label:u.label},{default:V(()=>[P(w(Ve),{icon:u.icon},null,8,["icon"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])),te("div",Vt,[o.value==="table"?(D(),A(m,{key:0,data:f.value,option:n},null,8,["data"])):G("",!0),o.value==="graph"?(D(),A(w(ze),{key:1,"model-value":(I=(S=w(t))==null?void 0:S.process)==null?void 0:I.flowData,"flow-history":(p=w(t))==null?void 0:p.flowHistory,view:"","show-legend":""},null,8,["model-value","flow-history"])):G("",!0),o.value==="timeline"?(D(),R(Y,{key:2},[f.value.length?(D(),A(x,{key:0},{default:V(()=>[(D(!0),R(Y,null,oe([...f.value].reverse(),u=>(D(),A(L,{key:u.id,timestamp:u.endTime,placement:"top"},{default:V(()=>[P(v,null,{default:V(()=>{var _,h,c;return[te("div",null,Q(u.assigneeName)+" 开始处理 ["+Q(u.taskNodeName)+"] 环节 ",1),u.duration?(D(),R("div",It," 办理时长："+Q(u.duration),1)):G("",!0),u.type&&((_=u.comment)!=null&&_.handleComment)?(D(),R("div",Tt,Q((h=y(u.type))==null?void 0:h.label)+"意见："+Q((c=u.comment)==null?void 0:c.handleComment),1)):G("",!0)]}),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):(D(),A(i,{key:1}))],64)):G("",!0)])],64)}}}),Ut=fe($t,[["__scopeId","data-v-30f9b6f7"]]),Lt={FlowDesign:{},FormDesign:{},FlowForm:Nt,request:{},tabs:[{label:"审批表单",prop:"formTab",component:Dt},{label:"附件资料",prop:"fileTab",component:Ct},{label:"流程跟踪",prop:"trackTab",component:Ut}],useFlowFormOptions:{type:"drawer",window:["","flow-form","left=0,top=0,width=1600,height=900"],overlay:{width:"80%",size:"80%",top:"100px",fullscreen:!0,destroyOnClose:!0}},tableOption:{align:"center",border:!0,card:!0,stripe:!0,searchMenuSpan:6,span:24},upload:{props:{fileName:"fileOriginalName",fileType:"fileType",fileSize:"fileSize",fileUrl:"fileUrl",res:"res.data"}}};function Ot(e){const t={list:"/sapier-flow/flow-user-common/list",save:"/sapier-flow/flow-user-common/save",update:"/sapier-flow/flow-user-common/update",remove:"/sapier-flow/flow-user-common/remove",batchUpdate:"/sapier-flow/flow-user-common/batchUpdate"},o=y=>e.get(t.list,{params:{type:y,ascs:"sort"}});return{url:t,getList:o,useList:y=>Z(()=>o(y.value),{res:"data.records",modify:!1,refreshDeps:[y]}),create:y=>e.post(t.save,y),update:y=>e.post(t.update,y),remove:y=>e.post(t.remove,{},{params:{ids:y}}),batchUpdate:y=>e.post(t.batchUpdate,y)}}var Ae=(e=>(e.默认="default",e.主要="primary",e.成功="success",e.警告="warning",e.危险="danger",e.信息="info",e.文字="text",e))(Ae||{}),St=(e=>(e.保存草稿="flow_draft",e.发送="flow_pass",e.退回="flow_reject",e.终止="flow_terminate",e.撤销="flow_revoke",e.撤回到发起="flow_withdraw",e.打印="flow_print",e.转办="flow_transfer",e.加签="flow_add_instance",e.减签="flow_del_instance",e.指定回退="flow_rollback",e.绿色通道="flow_green",e))(St||{}),ve=(e=>(e.显示="true",e.隐藏="false",e.发起人="startUser",e.处理人="assignee",e.已办="done",e.待办="todo",e.已办结="finished",e.未办结="unfinished",e.已发起="started",e.未发起="notstarted",e))(ve||{}),be=(e=>(e.不显示="false",e.指定节点="specifyNode",e.审批人="assignee",e.传阅人="circulate",e.意见="comment",e))(be||{}),Pe=(e=>(e[e.禁用=0]="禁用",e[e.正常=1]="正常",e))(Pe||{});function xe(e){const t={list:"/sapier-flow/dev-button/list",save:"/sapier-flow/dev-button/save",update:"/sapier-flow/dev-button/update",remove:"/sapier-flow/dev-button/remove"},o=d=>e.get(t.list,{params:d}),r=Z(o,{res:"data.records",defaultParams:[{size:-1,ascs:"sort",status:1}]});return{url:t,getList:o,useList:r,create:d=>e.post(t.save,d),update:d=>e.post(t.update,d),remove:d=>e.post(t.remove,{},{params:{ids:d}})}}function At(e){const t={list:"/sapier-flow/flow-file/list",save:"/sapier-flow/flow-file/save",remove:"/sapier-flow/flow-file/remove"},o=b=>e.get(t.list,{params:b}),r=Z(o,{res:"data"});return{getList:o,useList:r,create:b=>e.post(t.save,b),remove:b=>e.post(t.remove,{},{params:{ids:b}})}}function ye(e){const t={list:"/sapier-flow/flow-param/list",save:"/sapier-flow/flow-param/save",update:"/sapier-flow/flow-param/update",remove:"/sapier-flow/flow-param/remove",all:"/sapier-flow/flow-param/getAllParam",key:"/sapier-flow/flow-param/getParam"},o=l=>e.get(t.list,{params:l}),r=()=>e.get(t.all),f=l=>e.get(t.key,{params:{paramKey:l}});return{url:t,getList:o,getAllParam:r,getParam:f,useParam:l=>Z(f,{res:"data",modify:!1,defaultParams:[l]}),create:l=>e.post(t.save,l),update:l=>e.post(t.update,l),remove:l=>e.post(t.remove,{},{params:{ids:l}})}}var ue=(e=>(e[e.已办=1]="已办",e[e.待办=2]="待办",e[e.失败=3]="失败",e[e.撤销=4]="撤销",e[e.终止=5]="终止",e))(ue||{}),de=(e=>(e[e.已办结=1]="已办结",e[e.未办结=2]="未办结",e[e.已终止=3]="已终止",e))(de||{}),Pt=(e=>(e[e.系统执行=1]="系统执行",e[e.用户办理=2]="用户办理",e[e.任务撤销=3]="任务撤销",e[e.任务退回=4]="任务退回",e[e.流程终止=5]="流程终止",e[e.任务转办=6]="任务转办",e[e.绿色通道=7]="绿色通道",e))(Pt||{});function we(e){const t={publishList:"/sapier-flow/flow-run/queryPublishFlowList",taskList:"/sapier-flow/flow-run/userTaskList",detail:"/sapier-flow/flow-run/queryPublishFlowDetail",approvalNode:"/sapier-flow/flow-run/queryApprovalNode",start:"/sapier-flow/flow-run/startProcess",commit:"/sapier-flow/flow-run/commitTask",draft:"/sapier-flow/flow-run/saveDraft",revoke:"/sapier-flow/flow-run/revokeTask",terminate:"/sapier-flow/flow-run/terminateFlow",withdraw:"/sapier-flow/flow-run/withdrawToStart",transfer:"/sapier-flow/flow-run/transferTask",reject:"/sapier-flow/flow-run/rollbackTask",green:"/sapier-flow/flow-run/greenTask"},o=i=>e.get(t.detail,{params:i}),r=i=>e.post(t.approvalNode,i),f=i=>e.post(t.start,i),n=i=>e.post(t.commit,i),b=i=>e.post(t.draft,i),d=i=>e.post(t.revoke,i),y=i=>e.post(t.terminate,i),l=i=>e.post(t.withdraw,i),k=i=>e.post(t.transfer,i),g=i=>e.post(t.reject,i),a=i=>e.post(t.green,i),m=i=>e.get(t.publishList,{params:i}),v=Z(m,{res:"data",defaultParams:[{ascs:"sort"}]}),L=i=>e.get(t.taskList,{params:i}),x=Z(L,{res:"data.records"});return{url:t,getFlowDetail:o,getApprovalNode:r,startTask:f,commitTask:n,saveDraft:b,revokeTask:d,terminateTask:y,withdrawTask:l,transferTask:k,rejectTask:g,greenChannel:a,getPublishList:m,usePublishList:v,getTaskList:L,useTaskList:x}}function xt(e){const t={tree:"/sapier-flow/flow-user/tree"},o=f=>e.get(t.tree,{params:{filter:f}}),r=Z(o,{res:"data"});return{url:t,getUserTree:o,useUserTree:r}}var _e=(e=>(e.ASSIGN_ID="ASSIGN_ID",e.ASSIGN_UUID="ASSIGN_UUID",e.AUTO="AUTO",e.INPUT="INPUT",e.NONE="NONE",e))(_e||{}),ge=(e=>(e.bigint="bigint",e.blob="blob",e.char="char",e.date="date",e.datetime="datetime",e.decimal="decimal",e.double="double",e.enum="enum",e.float="float",e.int="int",e.longblob="longblob",e.longtext="longtext",e.mediumblob="mediumblob",e.mediumint="mediumint",e.mediumtext="mediumtext",e.set="set",e.smallint="smallint",e.text="text",e.time="time",e.timestamp="timestamp",e.tinyblob="tinyblob",e.tinyint="tinyint",e.tinytext="tinytext",e.varbinary="varbinary",e.varchar="varchar",e.year="year",e))(ge||{});function pa(e){const t={list:"/sapier-flow/dev-table/list",save:"/sapier-flow/dev-table/save",update:"/sapier-flow/dev-table/update",remove:"/sapier-flow/dev-table/remove",deploy:"/sapier-flow/dev-table/deploy",getFields:"/sapier-flow/dev-table/getTableFields"},o=l=>e.get(t.list,{params:l}),r=Z(o,{res:"data.records",defaultParams:[{size:-1}]});return{url:t,getList:o,useList:r,create:l=>e.post(t.save,l),update:l=>e.post(t.update,l),remove:l=>e.post(t.remove,{},{params:{ids:l}}),deploy:l=>e.post(t.deploy,l),getFields:l=>e.get(t.getFields,{params:l})}}var Ke=(e=>(e[e.否=0]="否",e[e.是=1]="是",e))(Ke||{});const ne=W(Ke),da=W(ge),ma=W(_e),fa=[{label:"审批",value:"userTask"},{label:"传阅",value:"circulateTask"}],je={menuBtn:!1,span:24,column:[{label:"流程名称",prop:"flowName",rules:[{required:!0,message:"请输入流程名称"}]},{label:"流程标识",prop:"flowKey",editDisabled:!0,rules:[{required:!0,message:"请输入流程标识"}]},{label:"流程分类",prop:"categoryId",type:"select",dicUrl:"/sapier-flow/flow-category/list",dicQuery:{size:-1,ascs:"sort"},props:{label:"name",value:"id"}},{label:"流程图标",prop:"flowIcon",component:"icon-select"},{label:"流程描述",prop:"remarks"},{label:"自定义表单",prop:"formPath"},{label:"关联表",prop:"formDataTable",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicUrl:"/sapier-flow/dev-table/list",dicQuery:{size:-1},props:{label:"tableComment",value:"tableName",desc:"tableName",res:"data.records"}},{label:"排序",prop:"sort",type:"number",width:110},{label:"表单设计",prop:"formOption",display:!1,hide:!0},{label:"模型设计",prop:"flowData",display:!1,hide:!0}]},Kt=Ie(pt(Lt));function H(e){return dt(Kt,e)}const va=q({rowKey:"id",labelWidth:150,column:[{label:"按钮名称",prop:"name",search:!0},{label:"按钮标识",prop:"buttonKey",search:!0},{label:"按钮图标",prop:"icon",component:"icon-select"},{label:"按钮类型",prop:"buttonType",type:"select",dicData:W(Ae)},{label:"默认显示条件",prop:"display",type:"select",multiple:!0,dataType:"string",value:"false",dicData:W(ve),tip:"选择多个时,所有条件都满足才显示",labelTip:`显示: 始终显示，或运算条件;<br/>隐藏: 始终隐藏，与运算条件;<br/>
      发起人: 用户为发起人时显示，与运算条件;<br/>处理人: 用户为处理人时显示，与运算条件;<br/>
      已办: 任务状态为已办时显示，与运算条件;<br/>待办: 任务状态为待办时显示，与运算条件;<br/>
      已办结: 流程已办结时显示，与运算条件;<br/>未办结: 流程未办结时显示，与运算条件;<br/>
      已发起: 流程已发起时显示，与运算条件;<br/>未发起: 流程未发起时显示，或运算条件;`},{label:"默认审批窗口显示",prop:"approval",type:"select",multiple:!0,dataType:"string",value:"false",dicData:W(be),labelTip:`不显示: 不显示审批窗口;<br/>指定节点: 显示指定节点选择框(常用于绿色通道等);<br/>
      审批人: 显示审批人选择框;<br/>传阅人: 显示传阅人选择框;<br/>意见: 显示意见输入框;`},{label:"默认是否校验",prop:"validate",type:"switch",value:1,dicData:ne,labelTip:"是: 点击按钮时先执行每个tab的校验;<br/>否: 点击按钮不执行校验;"},{label:"备注",prop:"remarks",overHidden:!0},{label:"排序",prop:"sort",type:"number",value:0},{label:"状态",prop:"status",type:"switch",value:1,dicData:W(Pe)},{label:"按钮预览",prop:"buttonPreview",width:150}]}),ba=q({rowKey:"flowModuleId",dialogFullscreen:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuWidth:100,menuType:"menu",menuBtnTitle:"操作",column:[...je.column.map((e,t)=>({...e,search:t<2})),{label:"流程主版本",prop:"mainVersion",formatter(e,t){return t?`V${t||""}`:""}}]}),ya=q({rowKey:"flowDeloyId",dialogFullscreen:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuWidth:100,menuType:"menu",menuBtnTitle:"操作",column:[...je.column,{prop:"sort",hide:!0},{label:"流程版本",prop:"version",formatter(e,t){return t?`V${t||""}`:""}},{label:"是否主版本",prop:"mainVersion",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}]}]}),wa=q({rowKey:"id",menu:!1,addBtn:!1,column:[{label:"流程名称",prop:"flowName"},{label:"流程标识",prop:"flowKey"},{label:"流程分类",prop:"categoryId",type:"select",search:!0,dicUrl:"/sapier-flow/flow-category/list",props:{label:"name",value:"id"}},{label:"标题",prop:"processTitle",search:!0},{label:"流水号",prop:"serialNumber"},{label:"当前节点",prop:"taskNodeName"},{label:"审批人",prop:"assigneeName"},{label:"申请人",prop:"applyUserName"},{label:"接收时间",prop:"startTime"},{label:"状态",prop:"status",type:"select",search:!0,searchValue:ue.待办,dicUrl:"/sapier-flow/flow-param/getParam",dicQuery:{paramKey:"flow.task.status"}}]}),_a=q({rowKey:"id",column:[{label:"配置名称",prop:"paramName",search:!0},{label:"配置Key",prop:"paramKey",search:!0},{label:"备注",prop:"remark"},{label:"系统内置",prop:"paramType",type:"switch",dicData:ne},{label:"配置值",prop:"paramValue",type:"textarea",maxRows:20,span:24,overHidden:!0}]}),ga=q({rowKey:"id",column:[{label:"流程标识",prop:"flowKey",search:!0},{label:"流程名称",prop:"flowName",search:!0},{label:"流程备注",prop:"remarks"},{label:"排序",prop:"sort"}]}),jt={key:0,class:"flow-viewer"},zt={key:0,class:"flow-status-legend"},Bt={class:"legend-text"},Et=F({__name:"FlowDesignWrapper",props:{modelValue:{},view:{type:Boolean},flowFormOption:{},flowHistory:{},showLegend:{type:Boolean}},emits:["update:modelValue","nodeClick"],setup(e,{emit:t}){const o=e,r=t,f=nt();We(f,()=>{var c;(c=f.value)==null||c.on("node:click",T=>r("nodeClick",T))});const n=z({get(){let c=ct();return typeof o.modelValue=="string"&&o.modelValue?c=JSON.parse(o.modelValue):typeof o.modelValue=="object"&&Object.keys(o.modelValue)&&(c=o.modelValue),c},set(c){r("update:modelValue",JSON.stringify(c))}}),b=z(()=>{const{column:c=[],group:T=[]}=JSON.parse(o.flowFormOption||"{}");return[...c,...T.map(O=>O.column??[]).flat()]}),{FlowDesign:d,tabs:y,request:l}=H(),k=z(()=>(y==null?void 0:y.map(c=>({...c,display:c.display??!0})))??[]),g=z(()=>!o.view),{data:a}=xe(l).useList({ready:g}),{useUserTree:m}=xt(l),{data:v}=m({ready:g}),{data:L}=m({ready:g,defaultParams:["dept"]}),{data:x}=m({ready:g,defaultParams:["post"]}),{useParam:i}=ye(l),{data:S}=i("flow.trends.user");function I(c){return Ue(c,T=>({...T,label:T.title,value:T.id}))}const p=z(()=>({formPropertyList:[...b.value,...k.value],buttonList:a.value,fieldsDic:b.value.map(c=>({label:c.label,value:`\${${c.prop}}`,desc:`\${${c.prop}}`})),flowButtonDisplayDic:W(ve),flowButtonApprovalDic:W(be),flowButtonValidateDic:ne.map(c=>({...c,label:""})),flowAssigneeUserDic:I(v.value??[]),flowAssigneeDeptDic:I(L.value??[]),flowAssigneePostDic:I(x.value??[]),flowAssigneeDynamicDic:S.value})),{data:u}=i("flow.task.status"),_=z(()=>{var c;return(c=o.flowHistory)==null?void 0:c.map(T=>{var O,N;const C=(N=(O=u.value)==null?void 0:O.find(s=>s.value===T.status))==null?void 0:N.style;return{id:T.taskNodeKey,style:C}})}),h=z(()=>{var c,T;return(T=(c=o.flowHistory)==null?void 0:c.filter(C=>C.taskNodeType==="userTask"))==null?void 0:T.map(C=>{var O;return{id:C.taskNodeKey,content:`<div>${C.assigneeName}</div>
        <div>${C.endTime??""}</div>
        <div>${((O=C.comment)==null?void 0:O.handleComment)??""}</div>`}})});return(c,T)=>c.view?(D(),R("div",jt,[c.showLegend!==!1?(D(),R("div",zt,[(D(!0),R(Y,null,oe(w(u),C=>{var O;return D(),R("div",{key:C.label,class:"legend-item"},[te("div",{class:"legend-color",style:rt({backgroundColor:(O=C.style)==null?void 0:O.fill})},null,4),te("span",Bt,Q(C.label),1)])}),128))])):G("",!0),P(w(d),{lf:f.value,"onUpdate:lf":T[0]||(T[0]=C=>f.value=C),"model-value":n.value,styles:_.value,tooltips:h.value,type:"viewer"},null,8,["lf","model-value","styles","tooltips"])])):(D(),A(w(d),{key:1,modelValue:n.value,"onUpdate:modelValue":T[1]||(T[1]=C=>n.value=C),"form-options":w(Ye),"data-options":p.value,"form-width":"30%"},null,8,["modelValue","form-options","data-options"]))}}),ze=fe(Et,[["__scopeId","data-v-34a13d90"]]),ka=q({rowKey:"id",column:[{label:"表单标识",prop:"formKey",search:!0},{label:"表单名称",prop:"formName",search:!0},{label:"表单备注",prop:"remarks"},{label:"排序",prop:"sort",type:"number"}]}),Ce=[{label:"字段名称",prop:"name"},{label:"字段备注",prop:"comment"},{label:"字段类型",prop:"type",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:W(ge)},{label:"字段长度",prop:"size",type:"number"},{label:"小数位",prop:"point",type:"number"},{label:"默认值",prop:"default"},{label:"是否主键",prop:"primary",type:"switch",dicData:ne,value:0},{label:"是否允许为空",prop:"permitNull",type:"switch",dicData:ne,value:1}],ha=q({rowKey:"id",dialogFullscreen:!0,column:[{label:"表名",prop:"tableName",search:!0},{label:"表注释",prop:"tableComment",search:!0},{label:"表引擎",prop:"tableEngine"},{label:"表主键策略",prop:"tablePrimary",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:W(_e)},{label:"数据库字段",prop:"editFields",hide:!0,type:"dynamic",children:{column:Ce}},{label:"默认字段",prop:"defaultFields",hide:!0,type:"dynamic",children:{addBtn:!1,delBtn:!1,column:Ce}}]});function Be(e){return new Promise((t,o)=>{w(e).validate((f,n,b)=>{f?(n(),t(b)):o(b)})})}function X(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}export{X as $,xt as A,_e as B,Lt as C,ge as D,q as E,ze as F,ne as G,Pt as H,da as I,ma as J,kt as K,De as L,Ne as M,wt as N,Ut as O,Dt as P,Ct as Q,mt as R,he as S,ue as T,Oe as U,vt as V,Ke as W,bt as X,Se as Y,yt as Z,Nt as _,ft as a,Be as b,H as c,xe as d,ba as e,ya as f,pa as g,je as h,wa as i,fa as j,_a as k,ye as l,we as m,ga as n,ka as o,ha as p,Ot as q,Ae as r,St as s,va as t,ae as u,ve as v,be as w,Pe as x,At as y,de as z};
