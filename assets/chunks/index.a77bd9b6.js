import{bQ as X,dB as at,dC as Pt,dD as ae,dE as Ut,dF as J,bc as _e,dG as Ft,d4 as Et,d6 as At,cv as Kt,a5 as Mt,by as Bt,bR as he}from"../composables_use-crud_index.md.5b4b07c5.js";import{M as ne,s as jt,N as Ht,O as zt}from"../app.8c903cda.js";import{X as Ae,B as ke,j as x,s as be,m as F,l as G,w as ie,k as Q,e as k,p as pe,Y as Wt,d as K,q as nt,at as Pe,H as C,o as T,D as P,E as b,J as h,a as U,t as j,a3 as Xe,c as E,F as W,R as Z,C as q,_ as Ve,G as B,K as Yt,ax as te,ay as le,r as qt,L as Qt,aw as Gt,M as Jt,n as Xt,aM as st,a5 as rt,I as Zt}from"./framework.893d3c69.js";import{M as ut,t as it,P as el,f as tl,L as ll,u as ol}from"./vuedraggable.umd.305e4cf9.js";import{a as se,w as Ce,x as al,c as nl,e as sl,y as rl}from"../flow-design_demo.md.1ded304f.js";import"./index.16846c61.js";import{d as ct}from"./differenceBy.e7f5d086.js";import"./theme.8feec1ac.js";import"../components_icon-select_index.md.fa314bdb.js";import"../components_index.md.b77b3a32.js";import"../components_v-text_index.md.ae040ac4.js";import"../composables_index.md.5c5bc1a0.js";import"../flow-design_index.md.97a0804d.js";import"../flow-pages_index.md.41e4539d.js";import"../flow-pages_pages_flow-button_index.md.f959f5b7.js";import"../flow-pages_pages_flow-manage_index.md.68241b66.js";import"../flow-pages_pages_flow-ops_index.md.dbbe51af.js";import"../flow-pages_pages_flow-param_index.md.8bc100fc.js";import"../flow-pages_pages_flow-template_index.md.f624eb5f.js";import"../flow-pages_pages_flow-workbench_index.md.c22e7bad.js";import"../flow-pages_pages_form-template_index.md.95d0e3bf.js";import"../flow-pages_pages_table-template_index.md.74a33780.js";import"../form-design_demo.md.5be482af.js";import"../form-design_index.md.6e4d7b38.js";import"../guide_changelog.md.3f96ecea.js";import"../guide_start.md.0c303a84.js";import"../index.md.45571f0d.js";import"../plugins_avue-patch_index.md.0ae34371.js";import"../plugins_compatible-tips_index.md.2be7dbef.js";import"../plugins_env-dts_index.md.9dc47b5f.js";import"../plugins_index.md.a4e4b704.js";import"../plugins_load-proxy_index.md.03fd4b6b.js";import"../plugins_setup-extend_index.md.a316ccc8.js";import"../plugins_uni-ui-patch_index.md.d2581493.js";import"../plugins_uview-patch_index.md.40e0fa7b.js";import"../types_avue_index.md.71b6211b.js";import"../types_index.md.16238616.js";import"../utils_date_dateFormat.md.a7849fcc.js";import"../utils_date_durationFormat.md.c951f8ee.js";import"../utils_emitter_mittAsync.md.33710d95.js";import"../utils_index.md.b422de11.js";import"../utils_math_index.md.b02108d7.js";import"../utils_object_filterObj.md.8f5ea217.js";import"../utils_object_filterObjDeep.md.0a2f5d0f.js";import"../utils_object_getDataType.md.a3fc0920.js";import"../utils_string_deserialize.md.9bdfc2c7.js";import"../utils_string_serialize.md.0744f8fa.js";import"../utils_string_uuid.md.c7000e71.js";import"../utils_tool_awaitTo.md.5d912ffe.js";import"../utils_tool_enumToDic.md.8db0e352.js";import"../utils_tool_sleep.md.12e01257.js";import"../utils_tree_buildTree.md.748c5451.js";import"../utils_tree_filterTree.md.e959896e.js";import"../utils_tree_findTree.md.3d8903e2.js";import"../utils_tree_flatTree.md.7ce54663.js";import"../utils_tree_treeMap.md.89fc6622.js";import"./vue.runtime.esm-bundler.09213a85.js";const ul={},il=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),cl=()=>ul,Ue=e=>Array.isArray(e),Ke=e=>e!==null&&typeof e=="object",Me=e=>e instanceof Function,fe=e=>e==null,Be=typeof window>"u",dt=()=>{var e;return Be||fe((e=window.document)===null||e===void 0?void 0:e.visibilityState)?!0:window.document.visibilityState==="visible"},dl=()=>{var e,t;return(e=!Be&&((t=window.navigator)===null||t===void 0?void 0:t.onLine))!==null&&e!==void 0?e:!0},Oe=()=>new Promise(()=>{}),ee=e=>Q(e)?e.value:e,pl=e=>Ke(e)?Object.assign(Ue(e)?[]:{},e):e,we=new Map,fl=e=>fe(e)?void 0:we.get(e),ml=(e,t,l)=>{const c=we.get(e);c!=null&&c.timer&&clearTimeout(c.timer);const n=setTimeout(()=>we.delete(e),t);we.set(e,{...l,timer:n})},oe=e=>e;function pt(e,t,l){let c,n,a,p,o,r,i=0,m=!1,s=!1,v=!0;const f=!t&&t!==0&&typeof window.requestAnimationFrame=="function";if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0,Ke(l)&&(m=!!l.leading,s="maxWait"in l,a=s?Math.max(+l.maxWait||0,t):a,v="trailing"in l?!!l.trailing:v);function d(y){const I=c,L=n;return c=n=void 0,i=y,p=e.apply(L,I),p}function _(y,I){return f?(window.cancelAnimationFrame(o),window.requestAnimationFrame(y)):setTimeout(y,I)}function u(y){if(f)return window.cancelAnimationFrame(y);clearTimeout(y)}function w(y){return i=y,o=_(D,t),m?d(y):p}function g(y){const I=y-r,L=y-i,A=t-I;return s?Math.min(A,a-L):A}function V(y){const I=y-r,L=y-i;return r===void 0||I>=t||I<0||s&&L>=a}function D(){const y=Date.now();if(V(y))return N(y);o=_(D,g(y))}function N(y){return o=void 0,v&&c?d(y):(c=n=void 0,p)}function $(){o!==void 0&&u(o),i=0,c=r=n=o=void 0}function S(){return o===void 0?p:N(Date.now())}function R(){return o!==void 0}function O(){const y=Date.now(),I=V(y);for(var L=arguments.length,A=new Array(L),H=0;H<L;H++)A[H]=arguments[H];if(c=A,n=this,r=y,I){if(o===void 0)return w(r);if(s)return o=_(D,t),d(r)}return o===void 0&&(o=_(D,t)),p}return O.cancel=$,O.flush=S,O.pending=R,O}function vl(e,t,l){let c=!0,n=!0;if(typeof e!="function")throw new TypeError("Expected a function");return Ke(l)&&(c="leading"in l?!!l.leading:c,n="trailing"in l?!!l.trailing:n),pt(e,t,{leading:c,trailing:n,maxWait:t})}var _l=oe((e,t)=>{let{debounceInterval:l,debounceOptions:c,manual:n}=t;const a=x(!1),p=x(),o=F(()=>c),r=F(()=>ee(l)),i=x(e.context.runAsync);return n||(a.value=!0),G(m=>{fe(r.value)||(p.value=pt(s=>s(),r.value,o.value),e.context.runAsync=function(){for(var s=arguments.length,v=new Array(s),f=0;f<s;f++)v[f]=arguments[f];return new Promise((d,_)=>{a.value?(a.value=!1,i.value(...v).then(d).catch(_)):p.value(()=>{i.value(...v).then(d).catch(_)})})},m(()=>{var s;(s=p.value)===null||s===void 0||s.cancel(),e.context.runAsync=i.value}))}),{onCancel(){var m;(m=p.value)===null||m===void 0||m.cancel()}}}),bl=oe((e,t)=>{let{errorRetryCount:l=0,errorRetryInterval:c=0}=t;const n=x(),a=x(0),p=F(()=>ee(l)),o=F(()=>ee(c));let r=!1;const i=()=>{a.value=0},m=F(()=>{if(o.value)return o.value;const f=1e3,d=1,_=9,u=Math.floor(Math.random()*2**Math.min(a.value,_)+d);return f*u}),s=()=>{let f;const d=p.value===-1,_=a.value<p.value;return(d||_)&&(d||(a.value+=1),f=setTimeout(()=>{r=!0,e.context.refresh()},m.value)),()=>f&&clearTimeout(f)},v=()=>{n.value&&n.value()};return{onBefore(){r||i(),r=!1,v()},onSuccess(){i()},onError(){n.value=s()},onCancel(){i(),v()}}}),wl=oe((e,t)=>{let{ready:l=x(!0),manual:c,defaultParams:n=[]}=t;return ie(l,a=>{!c&&a&&e.context.run(...n)},{flush:"sync"}),{onBefore(){if(!(Me(l)?l():l.value))return e.loading.value=!1,{isBreak:!0}}}}),yl=oe((e,t)=>{let{refreshDeps:l,refreshDepsAction:c,manual:n}=t;if(l===void 0||Ue(l)&&l.length===0)return{};const a=Ue(l)?l:[l];return ie(a,()=>{c?c():!n&&e.context.refresh()}),{}}),gl=oe((e,t)=>{let{throttleInterval:l,throttleOptions:c}=t;const n=x(),a=F(()=>ee(l)),p=F(()=>c),o=x(e.context.runAsync);return G(r=>{if(fe(l))return{};n.value=vl(i=>i(),a.value,p.value),e.context.runAsync=function(){for(var i=arguments.length,m=new Array(i),s=0;s<i;s++)m[s]=arguments[s];return new Promise((v,f)=>{n.value(()=>{o.value(...m).then(v).catch(f)})})},r(()=>{var i;(i=n.value)===null||i===void 0||i.cancel(),e.context.runAsync=o.value})}),{onCancel(){var r;(r=n.value)===null||r===void 0||r.cancel()}}});const hl=(e,t)=>l=>{Object.keys(l).forEach(c=>{e[c].value=l[c]}),t.forEach(c=>c(e))},kl=(e,t)=>()=>{let l=t;for(let c=e.length;c-- >0;)l=e[c](l);return l()},Vl=(e,t,l)=>{var c,n;const{initialData:a,onSuccess:p,onError:o,onBefore:r,onAfter:i}=t,m=x((c=l==null?void 0:l.loading)!==null&&c!==void 0?c:!1),s=be((n=l==null?void 0:l.data)!==null&&n!==void 0?n:a),v=be(l==null?void 0:l.error),f=x(l==null?void 0:l.params),d=x([]),_=be("pending"),u={},w=hl({status:_,loading:m,data:s,error:v,params:f},[]),g=function(D){for(var N=arguments.length,$=new Array(N>1?N-1:0),S=1;S<N;S++)$[S-1]=arguments[S];if(D==="onQuery"){const R=d.value.map(O=>O.onQuery).filter(Boolean);return{servicePromise:kl(R,$[0])()}}else{const R=d.value.map(O=>{var y;return(y=O[D])===null||y===void 0?void 0:y.call(O,...$)});return Object.assign({},...R)}},V=x(0);return u.runAsync=async function(){for(var D=arguments.length,N=new Array(D),$=0;$<D;$++)N[$]=arguments[$];w({loading:!0,params:N,status:"pending"}),V.value+=1;const S=V.value,{isBreak:R,breakResult:O=Oe()}=g("onBefore",N);if(R)return w({status:"settled"}),O;r==null||r(N);try{const y=()=>new Promise(A=>A(e(...f.value)));let{servicePromise:I}=g("onQuery",y);I||(I=y());const L=await I;return S!==V.value?Oe():(w({data:L,loading:!1,error:void 0,status:"settled"}),g("onSuccess",L,N),p==null||p(L,N),S===V.value&&g("onAfter",N,L,void 0),i==null||i(N),L)}catch(y){if(S!==V.value)return Oe();throw w({loading:!1,error:y,status:"settled"}),g("onError",y,N),o==null||o(y,N),S===V.value&&g("onAfter",N,void 0,y),i==null||i(N),y}},u.run=function(){u.runAsync(...arguments).catch(D=>{o||console.error(D)})},u.cancel=()=>{V.value+=1,w({loading:!1}),g("onCancel")},u.refresh=()=>{u.run(...f.value||[])},u.refreshAsync=()=>u.runAsync(...f.value||[]),u.mutate=D=>{const N=Me(D)?D(s.value):D,$=pl(N);w({data:$}),g("onMutate",$)},{status:_,loading:m,data:s,error:v,params:f,plugins:d,context:u}};function Cl(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;const c=Ae(il,{}),n={...cl(),...c,...t},{manual:a=!1,defaultParams:p=[]}=n,o=Vl(e,n);if(o.plugins.value=l.map(r=>r(o,n)),!a){const r=o.params.value||p;o.context.run(...r)}return ke(()=>{o.context.cancel()}),{loading:o.loading,data:o.data,error:o.error,params:o.params,cancel:o.context.cancel,refresh:o.context.refresh,refreshAsync:o.context.refreshAsync,mutate:o.context.mutate,run:o.context.run,runAsync:o.context.runAsync}}const ye=new Map,Dl=(e,t)=>{ye.set(e,t),t.then(l=>(ye.delete(e),l)).catch(()=>{ye.delete(e)})},Tl=e=>ye.get(e),re=new Map,xl=(e,t)=>{re.has(e)&&re.get(e).forEach(l=>l(t))},Ll=(e,t)=>(re.has(e)?re.get(e).push(t):re.set(e,[t]),()=>{const l=re.get(e).indexOf(t);re.get(e).splice(l,1)});var Nl=oe((e,t)=>{let{cacheKey:l,cacheTime:c=6e5,staleTime:n=0,getCache:a,setCache:p}=t;if(!l)return{};const o=Me(l)?l:()=>l,r=x(()=>{});let i;const m=w=>a?a(w):fl(w),s=(w,g,V)=>{p?p(w,V):ml(w,g,V),xl(w,V.data)},v=w=>n===-1||w+n>new Date().getTime(),f=(w,g)=>Object.prototype.hasOwnProperty.call(w,g),d=w=>{const g=o(w);return Ll(g,V=>{e.data.value=V})},_=o(),u=m(_);return u&&f(u,"data")&&(e.data.value=u.data,e.params.value=u.params),_&&(r.value=d()),ke(()=>{r.value()}),{onBefore(w){const g=o(w),V=m(g);if(!V||!f(V,"data"))return{};if(v(V.time))return e.data.value=V.data,e.loading.value=!1,{isBreak:!0,breakResult:V.data};e.data.value=V.data},onQuery(w){const g=e.params.value,V=o(g);let D=Tl(V);return D&&D!==i?()=>D:(D=w(),i=D,Dl(V,D),()=>D)},onSuccess(w,g){const V=o(g);V&&(r.value(),s(V,c,{data:w,params:g,time:new Date().getTime()}),r.value=d(g))},onMutate(w){const g=o(e.params.value);g&&(r.value(),s(g,c,{data:w,params:e.params.value,time:new Date().getTime()}),r.value=d(e.params.value))}}});function Il(e){let t,l;class c extends Promise{constructor(a){super(a),this.cancel=()=>{l(),clearTimeout(t)}}}return new c(n=>{l=n,t=setTimeout(l,e)})}function $e(){return new Date().getTime()}var Ol=oe((e,t)=>{let{loadingDelay:l=0,loadingKeep:c=0}=t;const n=x(()=>{}),a=F(()=>ee(l)),p=F(()=>ee(c));let o=0,r={};const i=()=>{let m;return a.value&&(m=setTimeout(()=>{e.status.value==="pending"&&(e.loading.value=!0)},a.value)),()=>m&&clearTimeout(m)};return{onBefore(){e.loading.value=!a.value,n.value(),n.value=i(),o=$e()},onQuery(m){if(!p.value)return()=>m();r=Il(p.value+a.value);const s=async()=>{try{const f=await m();return $e()-o<=a.value&&r.cancel(),Promise.resolve(f)}catch(f){return $e()-o<=a.value&&r.cancel(),Promise.reject(f)}},v=Promise.allSettled([s(),r]).then(f=>{const d=f[0];return d.status==="fulfilled"?d.value:Promise.reject(d.reason)});return()=>v},onCancel(){n.value()},onAfter(){n.value()}}}),Se;const ft=new Set,mt=new Set,vt=new Set,ge=(e,t)=>{let l;switch(e){case"FOCUS_LISTENER":l=ft;break;case"RECONNECT_LISTENER":l=vt;break;case"VISIBLE_LISTENER":l=mt;break}if(!l.has(t))return l.add(t),()=>{l.delete(t)}},Re=e=>{e.forEach(t=>{t()})};!Be&&(Se=window)!==null&&Se!==void 0&&Se.addEventListener&&(window.addEventListener("visibilitychange",()=>{dt()&&Re(mt)},!1),window.addEventListener("focus",()=>Re(ft),!1),window.addEventListener("online",()=>Re(vt),!1));var $l=oe((e,t)=>{let{pollingInterval:l,pollingWhenHidden:c=!1,pollingWhenOffline:n=!1,errorRetryCount:a=0}=t;const p=x(),o=x(!1),r=F(()=>ee(l)),i=F(()=>ee(a)),m=[],s=_=>{_&&m.push(_)},v=()=>(c||dt())&&(n||dl()),f=_=>{if(e.error.value&&i.value!==0)return;let u;if(!fe(r.value)&&r.value>=0)if(v())u=setTimeout(_,r.value);else{o.value=!0;return}return()=>u&&clearTimeout(u)},d=()=>{o.value&&v()&&(e.context.refresh(),o.value=!1)};return ie(r,()=>{p.value&&(p.value(),p.value=f(()=>e.context.refresh()))}),c||s(ge("VISIBLE_LISTENER",d)),n||s(ge("RECONNECT_LISTENER",d)),ke(()=>{m.forEach(_=>_())}),{onBefore(){var _;(_=p.value)===null||_===void 0||_.call(p)},onCancel(){var _;(_=p.value)===null||_===void 0||_.call(p)},onAfter(){p.value=f(()=>e.context.refresh())}}});const Sl=(e,t)=>{let l=!1;return function(){l||(l=!0,e(...arguments),setTimeout(()=>{l=!1},t))}};var Rl=oe((e,t)=>{let{refreshOnWindowFocus:l=!1,refocusTimespan:c=5e3}=t;const n=F(()=>ee(l)),a=F(()=>ee(c)),p=[],o=i=>{i&&p.push(i)},r=()=>{p.forEach(i=>i())};return G(()=>{if(r(),n.value){const i=Sl(e.context.refresh,a.value);o(ge("VISIBLE_LISTENER",i)),o(ge("FOCUS_LISTENER",i))}}),ke(()=>{r()}),{}});function ue(e,t){return Cl(e,t,[Ol,bl,_l,$l,gl,Rl,yl,wl,Nl])}var _t=(e=>(e[e.已办=1]="已办",e[e.待办=2]="待办",e[e.失败=3]="失败",e[e.撤销=4]="撤销",e[e.终止=5]="终止",e))(_t||{});function De(){const{request:e}=z(),t={publishList:"/sapier-flow/flow-run/queryPublishFlowList",taskList:"/sapier-flow/flow-run/userTaskList",detail:"/sapier-flow/flow-run/queryPublishFlowDetail",approvalNode:"/sapier-flow/flow-run/queryApprovalNode",start:"/sapier-flow/flow-run/startProcess",commit:"/sapier-flow/flow-run/commitTask",draft:"/sapier-flow/flow-run/saveDraft",revoke:"/sapier-flow/flow-run/revokeTask",terminate:"/sapier-flow/flow-run/terminateFlow",withdraw:"/sapier-flow/flow-run/withdrawToStart",transfer:"/sapier-flow/flow-run/transferTask",reject:"/sapier-flow/flow-run/rollbackTask",green:"/sapier-flow/flow-run/greenTask",circulate:"/sapier-flow/flow-circulate/commitTask"};return{url:t,getPublishList:()=>e.get(t.publishList),getTaskList:u=>e.get(t.taskList,{params:u}),getFlowDetail:u=>e.get(t.detail,{params:u}),getApprovalNode:u=>e.post(t.approvalNode,u),startTask:u=>e.post(t.start,u),commitTask:u=>e.post(t.commit,u),saveDraft:u=>e.post(t.draft,u),revokeTask:u=>e.post(t.revoke,u),terminateTask:u=>e.post(t.terminate,u),withdrawTask:u=>e.post(t.withdraw,u),transferTask:u=>e.post(t.transfer,u),rejectTask:u=>e.post(t.reject,u),greenChannel:u=>e.post(t.green,u),circulateTask:u=>e.post(t.circulate,u)}}function Pl(e){const{commitTask:t,revokeTask:l,saveDraft:c,startTask:n,terminateTask:a,transferTask:p,withdrawTask:o,rejectTask:r,greenChannel:i,circulateTask:m}=De(),s=F(()=>{const{flowDetail:f,formVariables:d,approvalFormData:_,debug:u,fileIds:w}=e,{flowDeployId:g}=f.value.process??{},{taskId:V,flowInstanceId:D}=f.value.task??{};return{flowDeployId:g,taskId:V,flowInstanceId:D,variables:d.value,debug:u.value,fileIds:w.value,..._.value}}),v=()=>s.value.taskId&&s.value.flowInstanceId;return{flow_draft(){if(v())return c(s.value)},flow_pass(){return v()?t(s.value):n(s.value)},flow_revoke(){if(v())return l(s.value)},flow_withdraw(){if(v())return o(s.value)},flow_terminate(){if(v())return a(s.value)},flow_transfer(){if(v())return p(s.value)},flow_reject(){if(v())return r(s.value)},flow_green(){if(v())return i(s.value)},flow_circulate(){if(v()){const{approvalFormData:f,circulateId:d}=e;return m({id:d==null?void 0:d.value,comment:f==null?void 0:f.value.comment})}}}}function Ul(e){const t=x({});return G(async()=>{var c;const{formProperty:l}=((c=k(e))==null?void 0:c.properties)||{};l!=null&&l.length&&(await pe(),Object.keys(t.value).forEach(n=>{var o,r,i,m;const a=((o=t.value[n])==null?void 0:o.label)||"",p=l==null?void 0:l.find(s=>s.prop===n);if(t.value[n].display=p==null?void 0:p.display,t.value[n].disabled=p==null?void 0:p.disabled,t.value[n].detail=p==null?void 0:p.detail,t.value[n].readonly=p==null?void 0:p.readonly,t.value[n].rules=t.value[n].rules??[],p!=null&&p.required&&((r=t.value[n].rules)!=null&&r.some(s=>s.required)))return null;p!=null&&p.required?(i=t.value[n].rules)==null||i.push({required:!0,message:`${a}为必填项`}):t.value[n].rules=(m=t.value[n].rules)==null?void 0:m.filter(s=>!s.required)}))}),t}function Fl(){return{modelValue:{type:Object,default:()=>({})},flowDetail:{type:Object,default:()=>({})},formLoading:{type:Boolean},submitLoading:{type:Boolean},activeTab:{type:String,default:"form"},activeBtn:{type:Object,default:()=>({})},approvalFormData:{type:Object,default:()=>({})},flowKey:{type:String},taskId:{type:String},instanceId:{type:String},formId:{type:String},permission:{type:Object},beforeClick:{type:Function},beforeSubmit:{type:Function},detail:{type:Boolean},debug:{type:Boolean},circulateId:{type:String}}}function El(){return{complete:e=>e}}const bt=Symbol("flowFormState");function Al(e,t){const l=se(e,void 0,{passive:!0,deep:!0}),{flowDetail:c,modelValue:n,formLoading:a}=l,{getFlowDetail:p}=De();G(()=>{const{flowKey:d,taskId:_,instanceId:u}=e;!d&&!_&&!u||(a.value=!0,p({flowKey:d,taskId:_,flowInstanceId:u}).then(w=>{c.value=w.data,n.value=w.data.formData||{}}).finally(()=>{a.value=!1}))});const o=F(()=>({fileTab:!0,trackTab:!0,...e.permission})),r=F(()=>{var d,_,u,w;return o.value.fileTab===!0&&((w=(u=(_=(d=c.value)==null?void 0:d.properties)==null?void 0:_.formProperty)==null?void 0:u.find(g=>g.prop==="fileTab"))==null?void 0:w.display)}),i=F(()=>{var d,_,u,w;return o.value.trackTab===!0&&((w=(u=(_=(d=c.value)==null?void 0:d.properties)==null?void 0:_.formProperty)==null?void 0:u.find(g=>g.prop==="trackTab"))==null?void 0:w.display)}),m=x(!1),s=F(()=>Object.entries(n.value||{}).filter(([d])=>!d.startsWith("$")).map(([d,_])=>({key:d,value:_}))),v=x(),f={...l,formData:n,formVariables:s,approvalVisible:m,showFileTab:r,showTrackTab:i,permission:o,fileIds:v,emit:t};return Wt(bt,f),f}function Te(){return Ae(bt)}function je(e){return new Promise((t,l)=>{k(e).validate((n,a,p)=>{n?(a(),t(p)):l(p)})})}const Kl=K({props:{modelValue:{type:Object,default:()=>({})},flowDetail:{type:Object,default:()=>({})},detail:{type:Boolean}},setup(e){const{modelValue:t}=se(e,void 0,{passive:!0,deep:!0}),l=Ul(e.flowDetail),{proxy:c}=nt(),n=x({});G(()=>{const{formOption:o}=e.flowDetail.process??{};n.value=ut.bind(c)(o||'{"menuBtn":false}'),n.value.detail=!!e.detail});const a=x();function p(){return je(a)}return{form:t,option:n,defaults:l,formRef:a,validate:p}},render(){return Pe(C("avue-form"),{ref:"formRef",modelValue:this.form,defaults:this.defaults,option:this.option,"onUpdate:modelValue":e=>this.form=e,"onUpdate:defaults":e=>this.defaults=e})}}),Ml=K({__name:"common-comments",props:{modelValue:{}},setup(e){const t=e,{modelValue:l}=se(t),{batchUpdate:c,create:n,remove:a,useList:p}=so(),o=x(!1),{activeBtn:r}=Te(),i=F(()=>{var V;return(V=r.value)==null?void 0:V.buttonKey}),{data:m,refresh:s}=p(i),v=F(()=>{var D,N,$;const V=l.value;if(V&&!((D=m.value)!=null&&D.some(S=>S.content===V))){const S=((($=(N=m.value)==null?void 0:N[0])==null?void 0:$.sort)||1)-1;return[{content:V,sort:S},...m.value||[]]}return m.value});async function f(V){var D;await n({...V,type:(D=r.value)==null?void 0:D.buttonKey}),X.success("添加成功"),s()}async function d(V){await a(V.id),X.success("删除成功"),s()}async function _(V,D){let N=D.parent.data;N=N.map(($,S)=>({id:$.id,sort:S+1})),await c(N),X.success("修改排序成功"),s(),o.value=!1}function u(){o.value=!0}const w=x();async function g(V){var D;l.value=V.content??"",await pe(),(D=w.value)==null||D.blur()}return(V,D)=>{const N=C("el-input"),$=C("el-text"),S=C("el-col"),R=C("el-button"),O=C("el-row"),y=C("el-tree"),I=C("el-popover");return T(),P(I,{visible:o.value,placement:"bottom",title:"常用意见",width:600},{reference:b(()=>[h(N,{ref_key:"inputRef",ref:w,modelValue:k(l),"onUpdate:modelValue":D[0]||(D[0]=L=>Q(l)?l.value=L:null),type:"textarea",placeholder:"请输入意见",rows:"5",onFocus:D[1]||(D[1]=L=>o.value=!0),onBlur:D[2]||(D[2]=L=>o.value=!1)},null,8,["modelValue"])]),default:b(()=>[h(y,{data:v.value,"node-key":"content",draggable:"","allow-drop":(L,A,H)=>H!=="inner",props:{label:"content"},onNodeClick:g,onNodeDrop:_,onNodeDragStart:u},{default:b(({data:L})=>[h(O,{style:{width:"600px"}},{default:b(()=>[h(S,{span:22},{default:b(()=>[h($,{truncated:"",title:L.content},{default:b(()=>[U(j(L.content),1)]),_:2},1032,["title"])]),_:2},1024),h(S,{span:2},{default:b(()=>[L.id?(T(),P(R,{key:0,type:"danger",size:"small",icon:"el-icon-close",text:"",onClick:Xe(A=>d(L),["stop"])},null,8,["onClick"])):(T(),P(R,{key:1,type:"primary",size:"small",icon:"el-icon-plus",text:"",onClick:Xe(A=>f(L),["stop"])},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:1},8,["data","allow-drop"])]),_:1},8,["visible"])}}}),Bl=K({__name:"approval-tree",props:{modelValue:{},data:{}},setup(e){const t=e,{modelValue:l}=se(t),c=x(),n={class(s){return`node-${s.type}`}},a=F(()=>it(t.data??[],(s,v,f)=>{const d=at();return s.taskNodeKey=(f==null?void 0:f.taskNodeKey)??s.taskNodeKey,s.incoming=(f==null?void 0:f.incoming)??s.incoming,s.multiple=(f==null?void 0:f.multiple)??s.multiple,{...s,id:d,label:s.title,disabled:s.type!=="user"}})),p={element:"ep:flag",post:"ep:share",dept:"ep:share",user:"ep:user"};Ce(()=>[a.value,c.value],async()=>{if(!c.value||!a.value.length)return;const s=o(a.value);s&&m([s]),el(a.value,f=>{var d;return!!((d=f.children)!=null&&d.length)}).map(async f=>{var _;await Pt(100);const d=(_=c.value)==null?void 0:_.getNode(f);d==null||d.expand()})},{immediate:!0,debounce:100});function o(s){var v;if(s.length===1)return(v=s[0].children)!=null&&v.length?o(s[0].children):s[0]}async function r(s,{checkedNodes:v}){var _;let f=v.filter(u=>u.type==="user");const d=f.some(u=>u.id===s.id);if(a.value.every(u=>!u.multiple)&&d)f=[s];else if(!s.multiple&&d){const g=((_=c.value)==null?void 0:_.getNode(s)).parent.data.children.filter(V=>V.id!==s.id);f=ct(f,g,"id")}m(f)}function i(s){const v=l.value.filter(f=>f.id!==s.id);m(v)}function m(s){var v;l.value=s,(v=c.value)==null||v.setCheckedNodes(s)}return(s,v)=>{const f=C("el-tag"),d=C("Icon"),_=C("el-tree");return T(),E(W,null,[(T(!0),E(W,null,Z(k(l),u=>(T(),P(f,{key:u.id,type:"info",closable:"",onClose:w=>i(u)},{default:b(()=>[U(j(u.title),1)]),_:2},1032,["onClose"]))),128)),h(_,{ref_key:"treeRef",ref:c,class:"approval-tree",data:a.value,props:n,"node-key":"id","check-on-click-node":"","show-checkbox":"",onCheck:r},{default:b(({data:u})=>[q("div",null,[h(d,{icon:p[u.type]||p.element,style:{display:"inline-block"}},null,8,["icon"]),q("span",null,j(u.title),1)])]),_:1},8,["data"])],64)}}});const Ze=Ve(Bl,[["__scopeId","data-v-99e196c1"]]),et=K({__name:"assignee-setter",props:{modelValue:{},tableData:{}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,{getUserTree:c}=co(),n=F({get(){return typeof l.modelValue=="string"?l.modelValue?l.modelValue.split(","):[]:l.modelValue},set(i){t("update:modelValue",i.join(","))}}),a=F({get(){return Array.isArray(l.modelValue)?l.modelValue.join(","):l.modelValue},set(i){t("update:modelValue",i)}}),p=x([]),o=x(!1),r=F(()=>{var i,m;return(m=(i=l.tableData)==null?void 0:i.row)==null?void 0:m.type});return ie(r,i=>{["dept","post","user"].includes(i)&&(o.value=!0,c(i==="user"?"":i).then(m=>{p.value=it(m.data,s=>({label:s.title,value:s.id}))}).finally(()=>o.value=!1))},{immediate:!0}),(i,m)=>{const s=C("el-tree-select"),v=C("el-input");return["dept","post","user"].includes(r.value)?(T(),P(s,{key:0,modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=f=>n.value=f),data:p.value,loading:o.value,multiple:"","check-on-click-node":"","show-checkbox":"","check-strictly":"","expand-on-click-node":!1},null,8,["modelValue","data","loading"])):(T(),P(v,{key:1,modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=f=>a.value=f)},null,8,["modelValue"]))}}}),jl={key:0,class:"flow-viewer"},Hl={key:0,class:"flow-status-legend"},zl=K({__name:"index",props:{modelValue:{},view:{type:Boolean},flowFormOption:{},flowHistory:{},showLegend:{type:Boolean}},emits:["update:modelValue","nodeClick"],setup(e,{emit:t}){const l=e,{FlowDesign:c}=z(),n=be();al(n,()=>{var d;(d=n.value)==null||d.on("node:click",_=>t("nodeClick",_))});const a=F({get(){let d=nl();return typeof l.modelValue=="string"&&l.modelValue?d=JSON.parse(l.modelValue):typeof l.modelValue=="object"&&Object.keys(l.modelValue)&&(d=l.modelValue),d},set(d){t("update:modelValue",JSON.stringify(d))}}),p=F(()=>{const{column:d=[],group:_=[]}=JSON.parse(l.flowFormOption||"{}");return[...d,..._.map(w=>w.column??[]).flat()]}),{data:o}=We().useList(),r=F(()=>{var d;return{formPropertyList:p.value,buttonList:(d=o.value)==null?void 0:d.filter(_=>_.status===1),fieldsDic:p.value.map(_=>({label:_.label,value:`\${${_.prop}}`,desc:`\${${_.prop}}`})),flowButtonDisplayDic:ae(He),flowButtonApprovalDic:ae(ze)}}),i=x({}),m=x({});Ce(m,d=>{var _,u,w,g,V,D,N,$,S;d&&((w=(u=(_=d.assignee)==null?void 0:_.children)==null?void 0:u.column)!=null&&w[1]&&(d.assignee.children.column[1].component=et),(S=($=(N=(D=(V=(g=d.circulate)==null?void 0:g.children)==null?void 0:V.column)==null?void 0:D[1])==null?void 0:N.children)==null?void 0:$.column)!=null&&S[1]&&(d.circulate.children.column[1].children.column[1].component=et))},{debounce:1});const{data:s}=ve().useParam("flow.task.status"),v=F(()=>{var d;return(d=l.flowHistory)==null?void 0:d.map(_=>{var w,g;const u=(g=(w=s.value)==null?void 0:w.find(V=>V.value===_.status))==null?void 0:g.style;return{id:_.taskNodeKey,style:u}})}),f=F(()=>{var d,_;return(_=(d=l.flowHistory)==null?void 0:d.filter(u=>u.taskNodeType==="userTask"))==null?void 0:_.map(u=>{var w;return{id:u.taskNodeKey,content:`<div>${u.assigneeName}</div>
        <div>${u.endTime??""}</div>
        <div>${((w=u.comment)==null?void 0:w.comment)??""}</div>`}})});return(d,_)=>d.view?(T(),E("div",jl,[d.showLegend!==!1?(T(),E("div",Hl,[(T(!0),E(W,null,Z(k(s),u=>{var w;return T(),E("div",{key:u.label,class:"legend-item"},[q("div",{class:"legend-color",style:Yt({backgroundColor:(w=u.style)==null?void 0:w.fill})},null,4),q("span",null,j(u.label),1)])}),128))])):B("",!0),h(k(c),{lf:n.value,"onUpdate:lf":_[0]||(_[0]=u=>n.value=u),"model-value":a.value,styles:v.value,tooltips:f.value,type:"viewer"},null,8,["lf","model-value","styles","tooltips"])])):(T(),P(k(c),{key:1,modelValue:a.value,"onUpdate:modelValue":_[1]||(_[1]=u=>a.value=u),formData:i.value,"onUpdate:formData":_[2]||(_[2]=u=>i.value=u),formDefaults:m.value,"onUpdate:formDefaults":_[3]||(_[3]=u=>m.value=u),"form-options":k(sl),"data-options":r.value,"form-width":"30%"},null,8,["modelValue","formData","formDefaults","form-options","data-options"]))}});const me=Ve(zl,[["__scopeId","data-v-582ede14"]]),Wl=K({__name:"node-select",props:{modelValue:{}},setup(e){const t=e,{modelValue:l}=se(t),{flowDetail:c}=Te(),n=x(!1);function a({data:p}){p.type==="userTask"&&(n.value=!1,l.value=p.id)}return(p,o)=>{const r=C("el-button"),i=C("el-popover");return T(),P(i,{visible:n.value,"onUpdate:visible":o[0]||(o[0]=m=>n.value=m),placement:"right",width:"800px",trigger:"click"},{reference:b(()=>[h(r,null,{default:b(()=>[U(" 点击选择节点 ")]),_:1})]),default:b(()=>{var m,s;return[h(me,{"model-value":(s=(m=k(c))==null?void 0:m.process)==null?void 0:s.flowData,view:"",style:{height:"600px"},onNodeClick:a},null,8,["model-value"])]}),_:1},8,["visible"])}}}),Yl=K({__name:"approval-form",emits:["confirm"],setup(e,{emit:t}){const{getApprovalNode:l}=De(),{useParam:c}=ve(),{formData:n,approvalFormData:a,activeBtn:p,approvalVisible:o,formVariables:r,flowDetail:i}=Te(),m=x([]),s=x([]),v=x([]),f=x([]),d=x(!1),_=x(!1),u=x(),w=x(),g={menuBtn:!1,labelWidth:100,column:[{label:"指定节点",prop:"jumpTaskNodeKey",span:24,rules:[{required:!0,message:"请选择指定节点"}]},{label:"审批人",prop:"assignee",span:24,rules:[{required:!0,validator:V}]},{label:"传阅人",prop:"circulate",span:24},{label:"意见",prop:"comment",span:24,rules:[{required:!0,message:"请填写意见"}]}]};function V(O,y,I){var H;const L=m.value[0].type==="parallelGateway",A=(H=m.value[0].children)==null?void 0:H.every(M=>tl([M],xe=>s.value.some(Le=>Le.id===xe.id)));if(s.value.length){if(L&&!A)return I("请在每个节点选择审批人")}else return I("请选择审批人");return!0}const{data:D}=c("flow.default.comment");G(async()=>{var y,I;if(!o.value||!u.value||!w.value)return;N(),(y=i.value)!=null&&y.process;const{taskId:O}=((I=i.value)==null?void 0:I.task)||{};pe(()=>{u.value.resetFields(),a.value.comment=n.value.comment||(O?"":D.value),w.value.jumpTaskNodeKey.display=$("specifyNode"),w.value.assignee.display=$("assignee"),w.value.circulate.display=$("circulate"),w.value.comment.display=$("comment")})}),G(async()=>{var I,L;if(!o.value||!$("assignee")||$("specifyNode")&&!a.value.jumpTaskNodeKey)return;N();const{flowKey:O}=((I=i.value)==null?void 0:I.process)||{},{taskId:y}=((L=i.value)==null?void 0:L.task)||{};try{_.value=!0;const A=await l({flowKey:O,taskId:y,variables:r.value,buttonType:p.value.buttonKey,jumpTaskNodeKey:a.value.jumpTaskNodeKey});m.value=A.data.approvalNodeList,v.value=A.data.circulateNodeList}finally{_.value=!1}});function N(){m.value=[],s.value=[],v.value=[],f.value=[]}function $(O){var y,I;return(I=(y=p.value)==null?void 0:y.approval)==null?void 0:I.includes(O)}async function S(){await je(u),d.value=!0;const{data:O,outgoing:y}=R(s.value),{data:I}=R(f.value);a.value.assignee=O,a.value.outgoing=[...y],a.value.circulate=I,console.log("🚀 ~ file: approval-form.vue:210 ~ onConfirm ~ formData:",n),t("confirm")}function R(O){const y={},I={},L=new Set;return O.forEach(A=>{const{taskNodeKey:H,incoming:M}=A;y[H]||(y[H]=new Set),A.userId&&y[H].add(A.userId),I[H]=[...y[H]].join(","),M&&L.add(M)}),{set:y,data:I,outgoing:L}}return(O,y)=>{const I=C("el-skeleton"),L=C("avue-form"),A=C("el-button"),H=C("el-dialog");return T(),P(H,{modelValue:k(o),"onUpdate:modelValue":y[7]||(y[7]=M=>Q(o)?o.value=M:null),class:"approlval-form",title:k(p).name,width:"900px","append-to-body":""},{footer:b(()=>[h(A,{onClick:y[6]||(y[6]=M=>o.value=!1)},{default:b(()=>[U(" 取 消 ")]),_:1}),h(A,{type:"primary",onClick:S},{default:b(()=>[U(" 确 定 ")]),_:1})]),default:b(()=>[h(L,{ref_key:"formRef",ref:u,modelValue:k(a),"onUpdate:modelValue":y[4]||(y[4]=M=>Q(a)?a.value=M:null),defaults:w.value,"onUpdate:defaults":y[5]||(y[5]=M=>w.value=M),option:g},{jumpTaskNodeKey:b(()=>[h(Wl,{modelValue:k(a).jumpTaskNodeKey,"onUpdate:modelValue":y[0]||(y[0]=M=>k(a).jumpTaskNodeKey=M)},null,8,["modelValue"])]),assignee:b(()=>[_.value?(T(),P(I,{key:0})):(T(),P(Ze,{key:"AssigneeTree",modelValue:s.value,"onUpdate:modelValue":y[1]||(y[1]=M=>s.value=M),data:m.value},null,8,["modelValue","data"]))]),circulate:b(()=>[_.value?(T(),P(I,{key:0})):(T(),P(Ze,{key:"CirculateTree",modelValue:f.value,"onUpdate:modelValue":y[2]||(y[2]=M=>f.value=M),data:v.value},null,8,["modelValue","data"]))]),comment:b(()=>[h(Ml,{modelValue:k(a).comment,"onUpdate:modelValue":y[3]||(y[3]=M=>k(a).comment=M)},null,8,["modelValue"])]),_:1},8,["modelValue","defaults"])]),_:1},8,["modelValue","title"])}}}),ql={class:"flow-track"},Ql={key:0},Gl={key:1},Jl=K({__name:"flow-track",props:{flowDetail:{}},setup(e){const t=e,l=x("table"),c=[{label:"table",icon:"ep:grid"},{label:"graph",icon:"ep:picture"},{label:"timeline",icon:"ep:finished"}],n=F(()=>{var r,i,m;return((m=(i=(r=t.flowDetail)==null?void 0:r.flowHistory)==null?void 0:i.filter(s=>s.taskNodeType==="userTask"))==null?void 0:m.map(s=>({...s,duration:Ut(s.duration)})))??[]}),a={addBtn:!1,menu:!1,border:!0,column:[{label:"节点名称",prop:"taskNodeName"},{label:"处理人",prop:"assigneeName"},{label:"接收时间",prop:"startTime"},{label:"处理时间",prop:"endTime"},{label:"办理时长",prop:"duration"},{label:"操作类型",prop:"type",dicUrl:"/sapier-flow/flow-param/getParam",dicQuery:{paramKey:"flow.handle.type"}},{label:"办理意见",prop:"comment",bind:"comment.comment"}]},{data:p}=ve().useParam("flow.handle.type");function o(r){var i;return(i=p.value)==null?void 0:i.find(m=>m.value===r)}return(r,i)=>{var w,g,V;const m=C("el-radio-button"),s=C("el-radio-group"),v=C("avue-crud"),f=C("el-card"),d=C("el-timeline-item"),_=C("el-timeline"),u=C("el-empty");return T(),E(W,null,[h(s,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=D=>l.value=D)},{default:b(()=>[(T(),E(W,null,Z(c,D=>h(m,{key:D.label,label:D.label},{default:b(()=>[h(k(ne),{icon:D.icon},null,8,["icon"])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),q("div",ql,[l.value==="table"?(T(),P(v,{key:0,data:n.value,option:a},null,8,["data"])):B("",!0),l.value==="graph"?(T(),P(me,{key:1,"model-value":(g=(w=r.flowDetail)==null?void 0:w.process)==null?void 0:g.flowData,"flow-history":(V=r.flowDetail)==null?void 0:V.flowHistory,view:"","show-legend":""},null,8,["model-value","flow-history"])):B("",!0),l.value==="timeline"?(T(),E(W,{key:2},[n.value.length?(T(),P(_,{key:0},{default:b(()=>[(T(!0),E(W,null,Z([...n.value].reverse(),D=>(T(),P(d,{key:D.id,timestamp:D.endTime,placement:"top"},{default:b(()=>[h(f,null,{default:b(()=>{var N,$,S;return[q("div",null,j(D.assigneeName)+" 开始处理 ["+j(D.taskNodeName)+"] 环节 ",1),D.duration?(T(),E("div",Ql," 办理时长："+j(D.duration),1)):B("",!0),D.type&&((N=D.comment)!=null&&N.comment)?(T(),E("div",Gl,j(($=o(D.type))==null?void 0:$.label)+"意见："+j((S=D.comment)==null?void 0:S.comment),1)):B("",!0)]}),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):(T(),P(u,{key:1}))],64)):B("",!0)])],64)}}});const Xl=Ve(Jl,[["__scopeId","data-v-3022ccdc"]]),Zl=K({__name:"button-list",emits:["click"],setup(e,{emit:t}){const{flowDetail:l,circulateId:c}=Te(),{data:n}=We().useList(),{userInfo:a}=z();function p(r,i){return r.map(m=>{const s=i.find(f=>f.buttonKey===m.buttonKey);return{...m,...jt(s,["display","approval"])}})}const o=F(()=>{var w,g,V,D,N;if(c!=null&&c.value){const $=(w=n.value)==null?void 0:w.find(S=>S.buttonKey==="flow_circulate");return $?[$]:[]}const r=typeof a=="function"?a():a,{assignee:i,status:m}=((g=l.value)==null?void 0:g.task)||{},{createUser:s,flowInstanceId:v,status:f}=((V=l.value)==null?void 0:V.flowInstance)||{},d={true:!0,false:!1,startUser:s==(r==null?void 0:r.userId),assignee:i==(r==null?void 0:r.userId),todo:m==2,done:m==1,notstarted:!v,started:!!v,finished:f===1,unfinished:f===2},{button:_}=((D=l.value)==null?void 0:D.properties)||{};return((N=p(n.value??[],_??[]))==null?void 0:N.filter($=>{var S,R;return(R=(S=$.display)==null?void 0:S.split(","))==null?void 0:R.every(O=>d[O])}))??[]});return(r,i)=>{const m=C("el-button");return T(!0),E(W,null,Z(o.value,s=>(T(),P(m,{key:s.buttonKey,type:s.buttonType,onClick:v=>t("click",s)},{default:b(()=>[h(k(ne),{icon:s.icon},null,8,["icon"]),U(" "+j(s.name),1)]),_:2},1032,["type","onClick"]))),128)}}}),eo=K({__name:"upload-table",props:{flowDetail:{},modelValue:{}},setup(e){const t=e,{modelValue:l}=se(t,void 0,{passive:!0}),{upload:{action:c,headers:n,preview:a,download:p,props:o}}=z(),r=typeof n=="function"?n():n,i=F(()=>{var g,V;return((V=(g=t.flowDetail)==null?void 0:g.task)==null?void 0:V.flowInstanceId)??at()}),m={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuWidth:200,column:[{label:"文件名",prop:"fileName"},{label:"文件类型",prop:"fileType"},{label:"文件大小",prop:"fileSize"},{label:"版本",prop:"version"},{label:"上传时间",prop:"createTime"}]},{bindVal:s,getDataList:v,handleDel:f,handleSave:d,afterGetList:_,crudStateRefs:{tableData:u}}=J({crudOption:{...uo(),saveSuccessMsg:"上传成功"},tableOption:m,queryForm:{isLatest:1,flowInstanceId:i.value}});_(()=>{l.value=u.value.map(g=>g.id).join(",")}),v();async function w(g,V){var y,I;const{fileName:D,fileType:N,fileSize:$,fileUrl:S,res:R}=o,O={fileName:_e({res:g},`${R}.${D}`),fileType:_e({res:g},`${R}.${N}`),fileSize:_e({res:g},`${R}.${$}`),fileUrl:_e({res:g},`${R}.${S}`),taskId:(I=(y=t.flowDetail)==null?void 0:y.task)==null?void 0:I.taskId,flowInstanceId:i.value,rootMark:(V==null?void 0:V.rootMark)||"",version:typeof(V==null?void 0:V.version)=="number"?V.version+1:1};await d(O,v,()=>{})}return(g,V)=>{const D=C("el-button"),N=C("el-upload"),$=C("avue-crud");return T(),P($,te(le(k(s))),{"menu-left":b(()=>[h(N,{action:k(c),headers:k(r),"show-file-list":!1,onSuccess:V[0]||(V[0]=S=>w(S))},{default:b(()=>[h(D,{type:"primary",icon:"el-icon-upload"},{default:b(()=>[U(" 点击上传 ")]),_:1})]),_:1},8,["action","headers"])]),menu:b(({row:S,index:R})=>[h(D,{type:"primary",text:"",icon:"el-icon-view",onClick:O=>{var y;return(y=k(a))==null?void 0:y(S,k(u))}},{default:b(()=>[U(" 预览 ")]),_:2},1032,["onClick"]),h(D,{type:"primary",text:"",icon:"el-icon-download",onClick:O=>{var y;return(y=k(p))==null?void 0:y(S,k(u))}},{default:b(()=>[U(" 下载 ")]),_:2},1032,["onClick"]),h(N,{action:k(c),headers:k(r),"show-file-list":!1,style:{display:"inline","vertical-align":"middle","margin-right":"10px"},onSuccess:O=>w(O,S)},{default:b(()=>[h(D,{type:"primary",text:"",icon:"el-icon-upload"},{default:b(()=>[U(" 更新版本 ")]),_:1})]),_:2},1032,["action","headers","onSuccess"]),h(D,{type:"primary",text:"",icon:"el-icon-delete",onClick:O=>k(f)(S,R)},{default:b(()=>[U(" 删除 ")]),_:2},1032,["onClick"])]),_:1},16)}}}),to={class:"flow-form__title"},wt=K({__name:"index",props:Fl(),emits:El(),setup(e,{emit:t}){const l=e,c=Al(l,t),{flowDetail:n,modelValue:a,activeTab:p,activeBtn:o,formLoading:r,approvalVisible:i,submitLoading:m,fileIds:s}=c,v=x();async function f(u){var w,g;o.value=u,await((w=v.value)==null?void 0:w.validate()),await((g=l.beforeClick)==null?void 0:g.call(l,u)),(u==null?void 0:u.approval)!=="false"?i.value=!0:_()}const d=Pl(c);async function _(){var u,w;try{const{buttonKey:g}=o.value;m.value=!0,await((u=l.beforeSubmit)==null?void 0:u.call(l,o.value));const V=(w=d[g])==null?void 0:w.call(d);V instanceof Promise?(await V,X.success("操作成功"),i.value=!1,t("complete",o.value)):X.error("操作失败")}finally{m.value=!1}}return(u,w)=>{const g=C("el-skeleton"),V=C("el-main"),D=C("el-header"),N=C("el-tab-pane"),$=C("el-tabs"),S=C("el-container");return k(r)?(T(),P(V,{key:0},{default:b(()=>[h(g)]),_:1})):(T(),P(S,{key:1,class:"flow-form"},{default:b(()=>[h(D,{class:"flow-form__header",height:"auto"},{default:b(()=>{var R;return[q("div",to,j((R=k(n).flowInstance)==null?void 0:R.title),1),u.detail?B("",!0):(T(),P(Zl,{key:0,onClick:f}))]}),_:1}),h(V,{class:"flow-form__main"},{default:b(()=>[h($,{modelValue:k(p),"onUpdate:modelValue":w[2]||(w[2]=R=>Q(p)?p.value=R:null)},{default:b(()=>{var R,O;return[(O=(R=k(n))==null?void 0:R.process)!=null&&O.formPath?qt(u.$slots,"default",{key:0}):(T(),P(N,{key:1,label:"审批信息",name:"form"},{default:b(()=>[h(Kl,{ref_key:"formRef",ref:v,modelValue:k(a),"onUpdate:modelValue":w[0]||(w[0]=y=>Q(a)?a.value=y:null),"flow-detail":k(n)},null,8,["modelValue","flow-detail"])]),_:1})),h(N,{label:"附件资料",name:"file",lazy:""},{default:b(()=>[h(eo,{modelValue:k(s),"onUpdate:modelValue":w[1]||(w[1]=y=>Q(s)?s.value=y:null),"flow-detail":k(n)},null,8,["modelValue","flow-detail"])]),_:1}),h(N,{label:"流程跟踪",name:"track",lazy:""},{default:b(()=>[h(Xl,{"flow-detail":k(n)},null,8,["flow-detail"])]),_:1})]}),_:3},8,["modelValue"])]),_:3}),h(Yl,{onConfirm:_})]),_:3}))}}});function yt(e,t){switch(t.type){case"window":return lo(e,t);case"dialog":case"drawer":return oo(e,t);default:return{open:l=>{},close:()=>{}}}}function lo(e,t){const{window:[l="",c="flow-form",n="left=0,top=0,width=1600,height=900"]=[]}=t,a=x(null),p=F(()=>`${l}?${Ft(Et(e,At(Kt,Mt)))}`);return{open:i=>{var m;a.value=window.open(p.value,c,n),(m=a.value)==null||m.addEventListener("message",s=>{const{event:v}=s.data,f={...k(e),...k(i)}[v];typeof f=="function"&&f(s.data)})},close:()=>{var i;return(i=a.value)==null?void 0:i.close()},openedWindow:a}}function oo(e,t){const{appContext:l}=nt();let c;const n=p=>{c=document.createElement("div"),c.className="flow-form-wrapper";const o=ao(t.formPath),r=Pe(o,{...k(e),...k(p)}),i=Pe(t.type==="dialog"?Ht:zt,{customClass:"flow-form-overlay",modelValue:!0,width:"80%",size:"80%",top:"100px",fullscreen:!0,destroyOnClose:!0,onClose:a,...t.overlay},r);i.appContext=l,Gt(i,c),document.body.appendChild(c)},a=()=>{c&&document.body.removeChild(c)};return{open:n,close:a}}function ao(e){return e?Qt(()=>Jt(()=>import(e),[])):wt}const tt=Symbol("flowPagesConfig"),no={FlowDesign:null,FormDesign:null,request:()=>{},userInfo:{},upload:{props:{fileName:"fileOriginalName",fileType:"fileType",fileSize:"fileSize",fileUrl:"fileUrl",res:"res.data"}}};var gt=(e=>(e[e.否=0]="否",e[e.是=1]="是",e))(gt||{});const Fe=ae(gt);function z(e,t){return e&&t?(e.provide(tt,Bt(no,t)),t):Ae(tt)}function so(){const{request:e}=z(),t={list:"/sapier-flow/flow-user-common/list",save:"/sapier-flow/flow-user-common/save",update:"/sapier-flow/flow-user-common/update",remove:"/sapier-flow/flow-user-common/remove",batchUpdate:"/sapier-flow/flow-user-common/batchUpdate"},l=r=>e.get(t.list,{params:{type:r,ascs:"sort"}});return{url:t,getList:l,useList:r=>ue(()=>l(r.value).then(i=>i.data.records),{refreshDeps:[r]}),create:r=>e.post(t.save,r),update:r=>e.post(t.update,r),remove:r=>e.post(t.remove,{},{params:{ids:r}}),batchUpdate:r=>e.post(t.batchUpdate,r)}}var ht=(e=>(e.默认="default",e.主要="primary",e.成功="success",e.警告="warning",e.危险="danger",e.信息="info",e.文字="text",e))(ht||{}),He=(e=>(e.显示="true",e.隐藏="false",e.发起人="startUser",e.处理人="assignee",e.已办="done",e.待办="todo",e.未发起="notstarted",e.已发起="started",e.未办结="unfinished",e.已办结="finished",e))(He||{}),ze=(e=>(e.不显示="false",e.指定节点="specifyNode",e.审批人="assignee",e.传阅人="circulate",e.抄送人="copyUser",e.意见="comment",e))(ze||{}),kt=(e=>(e[e.禁用=0]="禁用",e[e.正常=1]="正常",e))(kt||{});function We(){const{request:e}=z(),t={list:"/sapier-flow/dev-button/list",save:"/sapier-flow/dev-button/save",update:"/sapier-flow/dev-button/update",remove:"/sapier-flow/dev-button/remove"},l=o=>e.get(t.list,{params:o});return{url:t,getList:l,useList:()=>ue(()=>l({size:-1,ascs:"sort"}).then(o=>o.data.records)),create:o=>e.post(t.save,o),update:o=>e.post(t.update,o),remove:o=>e.post(t.remove,{},{params:{ids:o}})}}function ro(){const{request:e}=z(),t={list:"/sapier-flow/flow-category/list",save:"/sapier-flow/flow-category/save",update:"/sapier-flow/flow-category/update",remove:"/sapier-flow/flow-category/remove",tree:"/sapier-flow/flow-category/tree"};return{getList:o=>e.get(t.list,{params:o}),getTree:o=>e.get(t.tree,{params:o}),create:o=>e.post(t.save,o),update:o=>e.post(t.update,o),remove:o=>e.post(t.remove,{},{params:{ids:o}})}}function Vt(){const{request:e}=z(),t={list:"/sapier-flow/flow-circulate/userTaskList",opslist:"/sapier-flow/flow-circulate-ops/list",update:"/sapier-flow/flow-circulate-ops/update",remove:"/sapier-flow/flow-circulate-ops/remove"};return{url:t,getCirculateList:p=>e.get(t.list,{params:p}),getCirculateOpsList:p=>e.get(t.list,{params:p}),updateCirculate:p=>e.post(t.update,p),removeCirculate:p=>e.post(t.remove,{},{params:{ids:p}})}}function Ye(){const{request:e}=z(),t={list:"/sapier-flow/flow-definition/list",save:"/sapier-flow/flow-definition/save",update:"/sapier-flow/flow-definition/update",detail:"/sapier-flow/flow-definition/detail",deploy:"/sapier-flow/flow-definition/deployFlow"};return{url:t,getList:o=>e.get(t.list,{params:o}),create:o=>e.post(t.save,o),update:o=>e.post(t.update,o),deploy:o=>e.post(t.deploy,o),getDetail:o=>e.get(t.detail,{params:o})}}var Ct=(e=>(e[e.否=0]="否",e[e.是=1]="是",e))(Ct||{});function qe(){const{request:e}=z(),t={list:"/sapier-flow/flow-deploy/list",update:"/sapier-flow/flow-deploy/update",detail:"/sapier-flow/flow-deploy/detail"};return{url:t,getList:a=>e.get(t.list,{params:a}),getDetail:a=>e.get(t.detail,{params:a}),update:a=>e.post(t.update,a)}}function uo(){const{request:e}=z(),t={list:"/sapier-flow/flow-file/list",save:"/sapier-flow/flow-file/save",remove:"/sapier-flow/flow-file/remove"};return{getList:a=>e.get(t.list,{params:a}),create:a=>e.post(t.save,a),remove:a=>e.post(t.remove,{},{params:{ids:a}})}}function io(){const{request:e}=z(),t={list:"/sapier-flow/flow-ops/list"};return{url:t,getTaskOpsList:c=>e.get(t.list,{params:c})}}function ve(){const{request:e}=z(),t={list:"/sapier-flow/flow-param/list",save:"/sapier-flow/flow-param/save",update:"/sapier-flow/flow-param/update",remove:"/sapier-flow/flow-param/remove",all:"/sapier-flow/flow-param/getAllParam",key:"/sapier-flow/flow-param/getParam"},l=i=>e.get(t.list,{params:i}),c=()=>e.get(t.all),n=i=>e.get(t.key,{params:{paramKey:i}});return{url:t,getList:l,getAllParam:c,getParam:n,useParam:i=>ue(()=>n(i).then(m=>m.data)),create:i=>e.post(t.save,i),update:i=>e.post(t.update,i),remove:i=>e.post(t.remove,{},{params:{ids:i}})}}function Dt(){const{request:e}=z(),t={list:"/sapier-flow/dev-flow/list",save:"/sapier-flow/dev-flow/save",update:"/sapier-flow/dev-flow/update",remove:"/sapier-flow/dev-flow/remove"},l=o=>e.get(t.list,{params:o});return{url:t,getList:l,useList:()=>ue(()=>l({size:-1}).then(o=>o.data.records)),create:o=>e.post(t.save,o),update:o=>e.post(t.update,o),remove:o=>e.post(t.remove,{},{params:{ids:o}})}}function co(){const{request:e}=z(),t={tree:"/sapier-flow/flow-user/tree"},l=n=>e.get(t.tree,{params:{filter:n}});return{url:t,getUserTree:l,useUserTree:()=>ue(()=>l().then(n=>n.data))}}function Tt(){const{request:e}=z(),t={list:"/sapier-flow/dev-form/list",save:"/sapier-flow/dev-form/save",update:"/sapier-flow/dev-form/update",remove:"/sapier-flow/dev-form/remove"},l=o=>e.get(t.list,{params:o});return{url:t,getList:l,useList:()=>ue(()=>l({size:-1}).then(o=>o.data.records)),create:o=>e.post(t.save,o),update:o=>e.post(t.update,o),remove:o=>e.post(t.remove,{},{params:{ids:o}})}}var xt=(e=>(e.bigint="bigint",e.blob="blob",e.char="char",e.date="date",e.datetime="datetime",e.decimal="decimal",e.double="double",e.enum="enum",e.float="float",e.int="int",e.longblob="longblob",e.longtext="longtext",e.mediumblob="mediumblob",e.mediumint="mediumint",e.mediumtext="mediumtext",e.set="set",e.smallint="smallint",e.text="text",e.time="time",e.timestamp="timestamp",e.tinyblob="tinyblob",e.tinyint="tinyint",e.tinytext="tinytext",e.varbinary="varbinary",e.varchar="varchar",e.year="year",e))(xt||{});function Ee(){const{request:e}=z(),t={list:"/sapier-flow/dev-table/list",save:"/sapier-flow/dev-table/save",update:"/sapier-flow/dev-table/update",remove:"/sapier-flow/dev-table/remove",deploy:"/sapier-flow/dev-table/deploy"},l=r=>e.get(t.list,{params:r});return{url:t,getList:l,useList:()=>ue(()=>l({size:-1}).then(r=>r.data.records)),create:r=>e.post(t.save,r),update:r=>e.post(t.update,r),remove:r=>e.post(t.remove,{},{params:{ids:r}}),deploy:r=>e.post(t.deploy,r)}}const po={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,labelWidth:150,span:24,column:[{label:"按钮名称",prop:"name",search:!0},{label:"按钮标识",prop:"buttonKey",search:!0},{label:"按钮图标",prop:"icon",component:"icon-select"},{label:"按钮类型",prop:"buttonType",type:"select",dicData:ae(ht)},{label:"默认显示条件",prop:"display",type:"select",multiple:!0,dataType:"string",value:"false",dicData:ae(He),tip:"选择多个时,所有条件都满足才显示",labelTip:`显示: 始终显示;<br/>隐藏: 始终隐藏;<br/>
      发起人: 用户为发起人时显示;<br/>处理人: 用户为处理人时显示;<br/>
      已办: 任务状态为已办时显示;<br/>待办: 任务状态为待办时显示;<br/>
      未发起: 流程未发起时显示;<br/>已发起: 流程已发起时显示;<br/>
      未办结: 流程未办结时显示;<br/>已办结: 流程已办结时显示;`},{label:"默认审批窗口显示",prop:"approval",type:"select",multiple:!0,dataType:"string",value:"false",dicData:ae(ze),labelTip:`不显示: 不显示审批窗口;<br/>指定节点: 可以在流程图中选择指定的节点;<br/>
      审批人: 显示审批人选择框;<br/>传阅人: 显示传阅人选择框;<br/>
      抄送人: 显示抄送人选择框;<br/>意见: 显示意见输入框;`},{label:"排序",prop:"sort",type:"number",value:0},{label:"状态",prop:"status",type:"switch",value:1,dicData:ae(kt)},{label:"按钮预览",prop:"buttonPreview",width:150}]},fo=K({__name:"index",setup(e){const{bindVal:t,crudStateRefs:{formData:l},getDataList:c}=J({tableOption:po,crudOption:We(),sortOption:{ascs:"sort"}});return c(),(n,a)=>{const p=C("el-button"),o=C("avue-crud");return T(),P(o,te(le(k(t))),{icon:b(({row:r})=>[h(k(ne),{icon:r.icon,style:{display:"inline"}},null,8,["icon"])]),buttonPreview:b(({row:r})=>[h(p,{type:r.buttonType},{default:b(()=>[h(k(ne),{icon:r.icon},null,8,["icon"]),U(" "+j(r.name),1)]),_:2},1032,["type"])]),"buttonPreview-form":b(()=>[h(p,{type:k(l).buttonType},{default:b(()=>[h(k(ne),{icon:k(l).icon},null,8,["icon"]),U(" "+j(k(l).name),1)]),_:1},8,["type"])]),_:1},16)}}}),Qe={menuBtn:!1,span:24,column:[{label:"流程名称",prop:"flowName",rules:[{required:!0,message:"请输入流程名称"}]},{label:"流程标识",prop:"flowKey",rules:[{required:!0,message:"请输入流程标识"}]},{label:"流程分类",prop:"categoryId",type:"select",dicUrl:"/sapier-flow/flow-category/list",props:{label:"name",value:"id"}},{label:"流程图标",prop:"flowIcon",component:"icon-select"},{label:"流程描述",prop:"remarks"},{label:"自定义表单",prop:"formPath"},{label:"关联表",prop:"formDataTable",type:"select",dicUrl:"/sapier-flow/dev-table/list",dicQuery:{size:-1},props:{label:"tableComment",value:"tableName",desc:"tableName",res:"data.records"}}]},mo={rowKey:"flowModuleId",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,tabs:!0,dialogFullscreen:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuWidth:300,column:[...Qe.column.map((e,t)=>({...e,search:t<2})),{label:"流程主版本",prop:"mainVersion",formatter(e,t){return t?`V${t||""}`:""}}]},Lt=K({__name:"index",props:{categoryId:{}},emits:["add","view","edit","version"],setup(e,{emit:t}){const l=e,{getList:c,deploy:n}=Ye(),{bindVal:a,crudStateRefs:{searchForm:p},getDataList:o}=J({tableOption:mo,crudOption:{getList:c},searchForm:{categoryId:l.categoryId}});G(()=>{p.value.categoryId=l.categoryId??"",o()});const r=x(!1);async function i(m){await he.confirm("发布新版本，是否确认？","提示",{type:"success"}),r.value=!0,n({flowModuleId:m.flowModuleId}).then(()=>{X.success("发布成功"),o()}).finally(()=>{r.value=!1})}return(m,s)=>{const v=C("el-button"),f=C("avue-crud");return T(),P(f,te(le(k(a))),{"menu-left":b(()=>[h(v,{type:"primary",icon:"el-icon-plus",onClick:s[0]||(s[0]=d=>t("add"))},{default:b(()=>[U(" 新增 ")]),_:1})]),menu:b(({row:d})=>[h(v,{loading:r.value,type:"text",icon:"el-icon-view",onClick:_=>t("view",d)},{default:b(()=>[U(" 查看 ")]),_:2},1032,["loading","onClick"]),h(v,{loading:r.value,type:"text",icon:"el-icon-edit",onClick:_=>t("edit",d)},{default:b(()=>[U(" 编辑 ")]),_:2},1032,["loading","onClick"]),h(v,{loading:r.value,type:"text",icon:"el-icon-upload",onClick:_=>i(d)},{default:b(()=>[U(" 发布 ")]),_:2},1032,["loading","onClick"]),h(v,{loading:r.value,type:"text",icon:"el-icon-switch",onClick:_=>t("version",d)},{default:b(()=>[U(" 版本管理 ")]),_:2},1032,["loading","onClick"])]),flowIcon:b(({row:d})=>[h(k(ne),{icon:d.flowIcon,width:"25",style:{display:"inline"}},null,8,["icon"])]),_:1},16)}}}),vo={rowKey:"flowDeloyId",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,tabs:!0,dialogFullscreen:!0,addBtn:!1,editBtn:!1,delBtn:!1,menuWidth:250,column:[...Qe.column,{label:"流程版本",prop:"version",formatter(e,t){return t?`V${t||""}`:""}},{label:"是否主版本",prop:"mainVersion",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}]}]},Nt=K({__name:"index",props:{flowModuleId:{}},emits:["back","view","edit"],setup(e,{emit:t}){const l=e,{getList:c,update:n}=qe(),{bindVal:a,crudStateRefs:{searchForm:p},getDataList:o}=J({tableOption:vo,crudOption:{getList:c,dataPath:"res.data"}});G(()=>{l.flowModuleId&&(p.value.flowModuleId=l.flowModuleId,o())});const r=x(!1);async function i(m){await he.confirm(`确定将 ${m.flowName}(${m.flowKey}:v${m.version}) 设为主版本?`,"提示",{type:"warning"}),r.value=!0,n({flowDeployId:m.flowDeployId,flowModuleId:m.flowModuleId,mainVersion:1}).then(()=>{X.success("设置成功"),o()}).finally(()=>{r.value=!1})}return(m,s)=>{const v=C("el-button"),f=C("avue-crud");return T(),P(f,te(le(k(a))),{"menu-left":b(()=>[h(v,{loading:r.value,type:"primary",icon:"el-icon-arrow-left",onClick:s[0]||(s[0]=d=>t("back"))},{default:b(()=>[U(" 返回 ")]),_:1},8,["loading"])]),menu:b(({row:d})=>[h(v,{loading:r.value,type:"text",icon:"el-icon-view",onClick:_=>t("view",d)},{default:b(()=>[U(" 查看 ")]),_:2},1032,["loading","onClick"]),h(v,{loading:r.value,type:"text",icon:"el-icon-edit",onClick:_=>t("edit",d)},{default:b(()=>[U(" 编辑 ")]),_:2},1032,["loading","onClick"]),h(v,{loading:r.value,disabled:d.mainVersion===k(Ct).是,type:"text",icon:"el-icon-switch",onClick:_=>i(d)},{default:b(()=>[U(" 设为主版本 ")]),_:2},1032,["loading","disabled","onClick"])]),flowIcon:b(({row:d})=>[h(k(ne),{icon:d.flowIcon,width:"25",style:{display:"inline"}},null,8,["icon"])]),_:1},16)}}}),lt={defaultExpandAll:!0,props:{label:"name",value:"id"},filter:!0,formOption:{column:[{label:"分类名称",prop:"name",rules:[{required:!0,message:"请输入分类名称"}]},{label:"描述",prop:"remark"}]}},_o=K({__name:"index",emits:["node-click"],setup(e,{emit:t}){const{crudStateRefs:{formData:l,tableData:c},getDataList:n,handleSave:a,handleUpdate:p,handleDel:o}=J({crudOption:{rowKey:"id",...ro(),dataPath:"res.data"},tableOption:lt,pageOption:{pageSize:20}});n();function r(s,v,f,d){a(v,f,d)}function i(s,v,f,d){p(v,NaN,f,d)}async function m(s,v){await o(s.data,NaN),v()}return(s,v)=>{const f=C("avue-tree");return T(),P(f,{modelValue:k(l),"onUpdate:modelValue":v[0]||(v[0]=d=>Q(l)?l.value=d:null),option:k(lt),data:k(c),onNodeClick:v[1]||(v[1]=d=>t("node-click",d)),onSave:r,onUpdate:i,onDel:m},null,8,["modelValue","option","data"])}}}),Ge=K({__name:"index",props:{modelValue:{},view:{type:Boolean},fields:{}},emits:["update:modelValue"],setup(e,{emit:t}){var r;const l=e,{FormDesign:c}=z(),n=F({get(){return l.modelValue?ut(l.modelValue):{menuBtn:!1,span:24}},set(i){t("update:modelValue",ll(i,{useJson5:!1}))}}),a=F(()=>l.fields?JSON.parse(l.fields):[]),p=F(()=>{const i={type:"select",dicData:a.value,filterable:!0,allowCreate:!0,defaultFirstOption:!0};return[{...i,props:{label:"name",value:"name",desc:"comment"}},{...i,props:{label:"comment",value:"comment",desc:"name"}}]}),o={form:{settings:Array.from({length:((r=ol.settings)==null?void 0:r.length)??0}).fill({}).concat({label:"样式类",prop:"class"})}};return(i,m)=>{const s=C("avue-form");return i.view?(T(),P(s,{key:0,class:Xt(n.value.class),"model-value":{},option:n.value},null,8,["class","option"])):(T(),P(k(c),{key:1,modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v),"base-option":p.value,resources:o},null,8,["modelValue","base-option"]))}}}),bo=q("span",null,"流程设计",-1),wo={key:0},yo={key:1},go={style:{height:"calc(100vh - 144px)"}},ho=K({__name:"index",props:{modelValue:{},visible:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const c=se(e),{visible:n,modelValue:a}=c,{create:p,deploy:o,getDetail:r,update:i}=Ye(),{getDetail:m,update:s}=qe(),v=["流程信息","表单设计","模型设计","完成"],f=x(!1);ie(n,async O=>{if(!O)return;const{flowModuleId:y}=a.value,{flowDeployId:I}=a.value;try{f.value=!0;let L={};I?L=await m({flowDeployId:I}):y&&(L=await r({flowModuleId:y})),a.value=L.data}finally{f.value=!1}},{immediate:!0});const{data:d}=Tt().useList(),{data:_}=Dt().useList(),{data:u}=Ee().useList(),w=F(()=>{var O,y;return(y=(O=u.value)==null?void 0:O.find(I=>I.tableName===a.value.formDataTable))==null?void 0:y.tableFields}),g=x(0),V=F(()=>{var O,y;return g.value===1?((O=d.value)==null?void 0:O.map(I=>({label:I.formName,value:I.formOption})))??[]:g.value===2?((y=_.value)==null?void 0:y.map(I=>({label:I.flowName,value:I.flowData})))??[]:[]});function D(O){g.value===1?a.value.formOption=O.value:g.value===2&&(a.value.flowData=O.value)}const N=x();async function $(O){g.value===0&&await je(N),f.value=!0;const{flowModuleId:y}=a.value,{flowDeployId:I}=a.value;try{I?await s(a.value):y?await i(a.value):await p(a.value).then(L=>{a.value.flowModuleId=L.data.flowModuleId}),X.success("保存成功")}finally{f.value=!1}typeof O=="number"?g.value=O:g.value++}async function S(){await he.confirm("发布新版本，是否确认？","提示"),f.value=!0,o({flowModuleId:a.value.flowModuleId}).then(()=>{X.success("发布成功")}).finally(()=>{f.value=!1})}function R(){n.value=!1,g.value=0,a.value={},t("close")}return(O,y)=>{const I=C("el-link"),L=C("el-dropdown-item"),A=C("el-dropdown-menu"),H=C("el-dropdown"),M=C("el-col"),xe=C("el-step"),Le=C("el-steps"),ce=C("el-button"),It=C("el-row"),Ot=C("avue-form"),$t=C("el-result"),St=C("el-dialog"),Rt=st("loading");return T(),P(St,{modelValue:k(n),"onUpdate:modelValue":y[5]||(y[5]=Y=>Q(n)?n.value=Y:null),fullscreen:"","show-close":!1,"destroy-on-close":"",onClose:R},{header:b(()=>[h(It,{justify:"center"},{default:b(()=>[h(M,{span:5},{default:b(()=>{var Y,de,Ne,Je;return[q("div",null,[bo,(Y=k(a))!=null&&Y.flowName?(T(),E("span",wo," - "+j((de=k(a))==null?void 0:de.flowName),1)):B("",!0),(Ne=k(a))!=null&&Ne.version?(T(),E("span",yo," - V"+j((Je=k(a))==null?void 0:Je.version),1)):B("",!0)]),V.value.length?(T(),P(H,{key:0},{dropdown:b(()=>[h(A,null,{default:b(()=>[(T(!0),E(W,null,Z(V.value,Ie=>(T(),P(L,{key:Ie.label,onClick:Wo=>D(Ie)},{default:b(()=>[U(j(Ie.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:b(()=>[h(I,{icon:"el-icon-arrow-down",underline:!1},{default:b(()=>[U(" 选择模板 ")]),_:1})]),_:1})):B("",!0)]}),_:1}),h(M,{span:14},{default:b(()=>[h(Le,{active:g.value,simple:"","process-status":"finish","finish-status":"success"},{default:b(()=>[(T(),E(W,null,Z(v,(Y,de)=>h(xe,{key:de,title:Y,onClick:Ne=>$(de)},null,8,["title","onClick"])),64))]),_:1},8,["active"])]),_:1}),h(M,{span:5,style:{"text-align":"right"}},{default:b(()=>[h(ce,{disabled:g.value===0,loading:f.value,type:"primary",onClick:y[0]||(y[0]=Y=>g.value--)},{default:b(()=>[U(" 上一步 ")]),_:1},8,["disabled","loading"]),h(ce,{disabled:g.value===v.length-1,type:"primary",loading:f.value,onClick:y[1]||(y[1]=Y=>$())},{default:b(()=>[U(" 下一步 ")]),_:1},8,["disabled","loading"]),h(ce,{onClick:R},{default:b(()=>[U(" 关闭 ")]),_:1})]),_:1})]),_:1})]),default:b(()=>[rt((T(),E("div",go,[g.value===0?(T(),P(Ot,{key:0,ref_key:"formRef",ref:N,modelValue:k(a),"onUpdate:modelValue":y[2]||(y[2]=Y=>Q(a)?a.value=Y:null),option:k(Qe),style:{width:"50%",magin:"0 auto"}},null,8,["modelValue","option"])):B("",!0),g.value===1?(T(),P(Ge,{key:1,modelValue:k(a).formOption,"onUpdate:modelValue":y[3]||(y[3]=Y=>k(a).formOption=Y),fields:w.value},null,8,["modelValue","fields"])):B("",!0),g.value===2?(T(),P(me,{key:2,modelValue:k(a).flowData,"onUpdate:modelValue":y[4]||(y[4]=Y=>k(a).flowData=Y),"flow-form-option":k(a).formOption},null,8,["modelValue","flow-form-option"])):B("",!0),g.value===3?(T(),P($t,{key:3,icon:"success",title:"流程设计完成"},{extra:b(()=>[k(a).flowDeployId?B("",!0):(T(),P(ce,{key:0,type:"primary",onClick:S},{default:b(()=>[U(" 发布 ")]),_:1})),h(ce,{onClick:R},{default:b(()=>[U(" 关闭 ")]),_:1})]),_:1})):B("",!0)])),[[Rt,f.value]])]),_:1},8,["modelValue"])}}}),ko=q("span",null,"流程查看",-1),Vo={key:0},Co={key:1},Do=K({__name:"index",props:{modelValue:{},visible:{type:Boolean}},setup(e){const l=se(e),{visible:c,modelValue:n}=l,{getDetail:a}=Ye(),{getDetail:p}=qe(),o=x("form"),r=x(!1);ie(c,async m=>{if(!m)return;const{flowModuleId:s}=n.value,{flowDeployId:v}=n.value;try{r.value=!0;let f={};v?f=await p({flowDeployId:v}):s&&(f=await a({flowModuleId:s})),n.value={...f.data}}finally{r.value=!1}},{immediate:!0});function i(){n.value={},o.value="form"}return(m,s)=>{const v=C("el-tab-pane"),f=C("el-tabs"),d=C("el-dialog"),_=st("loading");return T(),P(d,{modelValue:k(c),"onUpdate:modelValue":s[3]||(s[3]=u=>Q(c)?c.value=u:null),width:"60%",top:"0",onClose:i},{header:b(()=>{var u,w,g,V;return[ko,(u=k(n))!=null&&u.flowName?(T(),E("span",Vo," - "+j((w=k(n))==null?void 0:w.flowName),1)):B("",!0),(g=k(n))!=null&&g.version?(T(),E("span",Co," - V"+j((V=k(n))==null?void 0:V.version),1)):B("",!0)]}),default:b(()=>[rt((T(),P(f,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=u=>o.value=u)},{default:b(()=>[h(v,{label:"查看表单",name:"form",style:{height:"600px","overflow-y":"auto"}},{default:b(()=>[o.value==="form"&&k(n).formOption?(T(),P(Ge,{key:0,modelValue:k(n).formOption,"onUpdate:modelValue":s[0]||(s[0]=u=>k(n).formOption=u),view:""},null,8,["modelValue"])):B("",!0)]),_:1}),h(v,{label:"查看流程",name:"flow",style:{height:"600px"}},{default:b(()=>[o.value==="flow"?(T(),P(me,{key:0,modelValue:k(n).flowData,"onUpdate:modelValue":s[1]||(s[1]=u=>k(n).flowData=u),view:""},null,8,["modelValue"])):B("",!0)]),_:1})]),_:1},8,["modelValue"])),[[_,r.value]])]),_:1},8,["modelValue"])}}}),To=K({__name:"index",setup(e){const t=x("definition"),l=x({}),c=x(""),n=x("");function a(d){c.value===d.id?c.value="":c.value=d.id}const p=x(!1),o=x(!1);function r(){l.value={},p.value=!0}function i(d){l.value=d,p.value=!0}function m(d){l.value=d,o.value=!0}function s(d){n.value=d.flowModuleId||"",t.value="deploy"}function v(){n.value="",t.value="definition"}async function f(){const d=t.value;await pe(),t.value="",await pe(),t.value=`${d}`}return(d,_)=>{const u=C("el-col"),w=C("el-row");return T(),P(w,{gutter:20},{default:b(()=>[h(u,{span:4},{default:b(()=>[h(_o,{onNodeClick:a})]),_:1}),h(u,{span:20},{default:b(()=>[t.value==="definition"?(T(),P(Lt,{key:0,"category-id":c.value,onAdd:r,onEdit:i,onView:m,onVersion:s},null,8,["category-id"])):B("",!0),t.value==="deploy"?(T(),P(Nt,{key:1,"flow-module-id":n.value,onEdit:i,onView:m,onBack:v},null,8,["flow-module-id"])):B("",!0),h(ho,{modelValue:l.value,"onUpdate:modelValue":_[0]||(_[0]=g=>l.value=g),visible:p.value,"onUpdate:visible":_[1]||(_[1]=g=>p.value=g),onClose:f},null,8,["modelValue","visible"]),h(Do,{modelValue:l.value,"onUpdate:modelValue":_[2]||(_[2]=g=>l.value=g),visible:o.value,"onUpdate:visible":_[3]||(_[3]=g=>o.value=g)},null,8,["modelValue","visible"])]),_:1})]),_:1})}}}),xo=[{label:"流程名称",prop:"flowName"},{label:"流程标识",prop:"flowKey"},{label:"流程分类",prop:"categoryId",type:"select",search:!0,dicUrl:"/sapier-flow/flow-category/list",props:{label:"name",value:"id"}},{label:"标题",prop:"processTitle",search:!0},{label:"流水号",prop:"serialNumber"},{label:"当前节点",prop:"taskNodeName"},{label:"审批人",prop:"assigneeName"},{label:"申请人",prop:"applyUserName"},{label:"接收时间",prop:"startTime"},{label:"任务状态",prop:"status",type:"select",search:!0,searchValue:2,dicUrl:"/sapier-flow/flow-param/getParam",dicQuery:{paramKey:"flow.task.status"}}].map(e=>({...e,display:!1})),Lo=[{label:"审批人",prop:"assignee"},{label:"节点名称",prop:"taskNodeName"},{label:"接收时间",prop:"startTime",type:"datetime",format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss"},{label:"结束时间",prop:"endTime",type:"datetime",format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss"},{label:"耗时",prop:"duration"},{label:"传阅意见",prop:"comment"}].map(e=>({...e,hide:!0})),No={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,menu:!0,addBtn:!1,column:[...xo,...Lo]},Io=K({__name:"index",setup(e){const t=rl("debugMode",!1),{getTaskOpsList:l}=io(),{getCirculateOpsList:c,updateCirculate:n,removeCirculate:a}=Vt(),{bindVal:p,getDataList:o,crudStateRefs:{searchForm:r,crudOption:i}}=J({tableOption:No,crudOption:{getList:l},searchForm:{status:2},sortOption:{descs:"start_time"}});Ce(r,o,{debounce:300,immediate:!0,deep:!0});const m=x("task"),s=[{label:"任务",name:"task",getList:l},{label:"传阅",name:"circulate",getList:c,update:n,remove:a}];function v({paneName:u}){const w=s.find(g=>g.name===u);i.value.getList=w.getList,i.value.update=w.update,i.value.remove=w.remove,o()}const{open:f,close:d}=yt({onComplete:()=>(d(),o())},{type:"drawer"});function _(u){f({flowKey:u.flowKey,taskId:u.taskId,instanceId:u.flowInstanceId,debug:t.value,circulateId:u.id})}return(u,w)=>{const g=C("el-tab-pane"),V=C("el-tabs"),D=C("el-switch"),N=C("el-button"),$=C("el-link"),S=C("avue-crud");return T(),E(W,null,[h(V,{modelValue:m.value,"onUpdate:modelValue":w[0]||(w[0]=R=>m.value=R),onTabClick:v},{default:b(()=>[(T(),E(W,null,Z(s,R=>h(g,{key:R.name,label:R.label,name:R.name},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),h(S,Zt(k(p),{permission:{menu:m.value==="circulate"}}),{"menu-right":b(()=>[h(N,{type:"text"},{default:b(()=>[h(D,{modelValue:k(t),"onUpdate:modelValue":w[1]||(w[1]=R=>Q(t)?t.value=R:null),"inline-prompt":"","active-text":"debug","inactive-text":"debug"},null,8,["modelValue"])]),_:1})]),processTitle:b(({row:R})=>[h($,{type:"primary",underline:!1,onClick:O=>_(R)},{default:b(()=>[U(j(R.processTitle||"无标题"),1)]),_:2},1032,["onClick"])]),_:1},16,["permission"])],64)}}}),Oo={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,column:[{label:"配置名称",prop:"paramName",search:!0},{label:"配置Key",prop:"paramKey",search:!0},{label:"备注",prop:"remark"},{label:"系统内置",prop:"paramType",type:"switch",dicData:Fe},{label:"配置值",prop:"paramValue",type:"textarea",maxRows:20,span:24,overHidden:!0}]},$o=K({__name:"index",setup(e){const{bindVal:t,getDataList:l}=J({tableOption:Oo,crudOption:ve()});return l(),(c,n)=>{const a=C("avue-crud");return T(),P(a,te(le(k(t))),null,16)}}}),So={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,menu:!1,addBtn:!1,column:[{label:"流程名称",prop:"flowName"},{label:"流程标识",prop:"flowKey"},{label:"流程分类",prop:"categoryId",type:"select",search:!0,dicUrl:"/sapier-flow/flow-category/list",props:{label:"name",value:"id"}},{label:"标题",prop:"processTitle",search:!0},{label:"流水号",prop:"serialNumber"},{label:"当前节点",prop:"taskNodeName"},{label:"审批人",prop:"assigneeName"},{label:"申请人",prop:"applyUserName"},{label:"接收时间",prop:"startTime"}]},Ro={class:"flow-list"},Po=["onClick"],Uo={class:"flow-name"},Fo=K({__name:"index",setup(e){const t=x([]),{getPublishList:l,getTaskList:c}=De(),{getCirculateList:n}=Vt();l().then(u=>{t.value=u.data});const a=[{label:"待办",value:2},{label:"已办",value:1}],{bindVal:p,getDataList:o,crudStateRefs:{searchForm:r,crudOption:i}}=J({tableOption:So,crudOption:{getList:c},searchForm:{status:2}});Ce(r,o,{debounce:300,immediate:!0,deep:!0});const m=x("task"),s=[{label:"任务",name:"task",getList:c},{label:"传阅",name:"circulate",getList:n}];function v({paneName:u}){const w=s.find(g=>g.name===u);i.value.getList=w.getList,o()}const{open:f,close:d}=yt({onComplete:()=>(d(),o())},{type:"drawer"});function _(u){f({flowKey:u.flowKey,taskId:u.taskId,instanceId:u.flowInstanceId,circulateId:u.id,detail:u.taskId?u.status===_t.已办:!1})}return(u,w)=>{const g=C("el-button"),V=C("el-collapse-item"),D=C("el-collapse"),N=C("el-card"),$=C("el-divider"),S=C("el-tab-pane"),R=C("el-tabs"),O=C("avue-radio"),y=C("el-link"),I=C("avue-crud");return T(),E(W,null,[h(N,{"body-style":{padding:"0 20px"}},{default:b(()=>[h(D,{"model-value":"1"},{default:b(()=>[h(V,{name:"1"},{title:b(()=>[h(g,{text:"",icon:"el-icon-promotion"},{default:b(()=>[U(" 发起审批 ")]),_:1})]),default:b(()=>[q("div",Ro,[(T(!0),E(W,null,Z(t.value,L=>(T(),E("div",{key:L.flowKey,class:"flow-item",onClick:A=>_(L)},[h(k(ne),{class:"flow-icon",icon:L.flowIcon,width:"60"},null,8,["icon"]),q("div",Uo,j(L.flowName),1)],8,Po))),128))])]),_:1})]),_:1})]),_:1}),h($,{direction:"horizontal","content-position":"left"}),h(R,{modelValue:m.value,"onUpdate:modelValue":w[0]||(w[0]=L=>m.value=L),onTabClick:v},{default:b(()=>[(T(),E(W,null,Z(s,L=>h(S,{key:L.name,label:L.label,name:L.name},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),h(I,te(le(k(p))),{"menu-left":b(()=>[h(O,{modelValue:k(r).status,"onUpdate:modelValue":w[1]||(w[1]=L=>k(r).status=L),button:"",dic:a},null,8,["modelValue"])]),processTitle:b(({row:L})=>[h(y,{type:"primary",underline:!1,onClick:A=>_(L)},{default:b(()=>[U(j(L.processTitle||"无标题"),1)]),_:2},1032,["onClick"])]),_:1},16)],64)}}});const Eo=Ve(Fo,[["__scopeId","data-v-b7f40c7a"]]),Ao={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,span:24,column:[{label:"流程标识",prop:"flowKey",search:!0},{label:"流程名称",prop:"flowName",search:!0},{label:"流程模型数据",prop:"flowData",display:!1},{label:"流程备注",prop:"remarks"},{label:"排序",prop:"sort"}]},Ko=K({__name:"index",setup(e){const{bindVal:t,crudStateRefs:{formData:l},getDataList:c,handleUpdate:n}=J({tableOption:Ao,crudOption:Dt()});c();const a=x(!1);async function p(r){l.value=r,a.value=!0}async function o(){await n(l.value,NaN,()=>a.value=!1,()=>{})}return(r,i)=>{const m=C("el-button"),s=C("avue-crud"),v=C("el-dialog");return T(),E(W,null,[h(s,te(le(k(t))),{flowData:b(({row:f})=>[h(m,{type:"primary",text:"",icon:"el-icon-crop",onClick:d=>p(f)},{default:b(()=>[U(" 设计 ")]),_:2},1032,["onClick"])]),_:1},16),h(v,{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=f=>a.value=f),title:`模型设计-${k(l).flowName}`,fullscreen:"","destroy-on-close":""},{footer:b(()=>[h(m,{type:"primary",onClick:o},{default:b(()=>[U(" 保存 ")]),_:1}),h(m,{onClick:i[1]||(i[1]=f=>a.value=!1)},{default:b(()=>[U(" 取消 ")]),_:1})]),default:b(()=>[h(me,{modelValue:k(l).flowData,"onUpdate:modelValue":i[0]||(i[0]=f=>k(l).flowData=f),style:{height:"calc(100vh - 177px)"}},null,8,["modelValue"])]),_:1},8,["modelValue","title"])],64)}}}),Mo={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,span:24,column:[{label:"表单标识",prop:"formKey",search:!0},{label:"表单名称",prop:"formName",search:!0},{label:"表单配置",prop:"formOption",display:!1},{label:"表单备注",prop:"remarks"},{label:"排序",prop:"sort",type:"number"}]},Bo=K({__name:"index",setup(e){const{bindVal:t,crudStateRefs:{formData:l},getDataList:c,handleUpdate:n}=J({tableOption:Mo,crudOption:Tt()});c();const a=x(!1);async function p(r){l.value={...r},a.value=!0}async function o(){await n(l.value,NaN,()=>a.value=!1,()=>{})}return(r,i)=>{const m=C("el-button"),s=C("avue-crud"),v=C("el-dialog");return T(),E(W,null,[h(s,te(le(k(t))),{formOption:b(({row:f})=>[h(m,{type:"primary",text:"",icon:"el-icon-crop",onClick:d=>p(f)},{default:b(()=>[U(" 设计 ")]),_:2},1032,["onClick"])]),_:1},16),h(v,{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=f=>a.value=f),title:`表单设计-${k(l).formName}`,fullscreen:"","destroy-on-close":""},{footer:b(()=>[h(m,{type:"primary",onClick:o},{default:b(()=>[U(" 保存 ")]),_:1}),h(m,{onClick:i[1]||(i[1]=f=>a.value=!1)},{default:b(()=>[U(" 取消 ")]),_:1})]),default:b(()=>[h(Ge,{modelValue:k(l).formOption,"onUpdate:modelValue":i[0]||(i[0]=f=>k(l).formOption=f),style:{height:"calc(100vh - 177px)"}},null,8,["modelValue"])]),_:1},8,["modelValue","title"])],64)}}}),ot=[{label:"字段名称",prop:"name"},{label:"字段备注",prop:"comment"},{label:"字段类型",prop:"type",type:"select",filterable:!0,allowCreate:!0,defaultFirstOption:!0,dicData:ae(xt)},{label:"字段长度",prop:"size",type:"number"},{label:"小数位",prop:"point",type:"number"},{label:"默认值",prop:"default"},{label:"是否主键",prop:"primary",type:"switch",dicData:Fe,value:0},{label:"是否允许为空",prop:"permitNull",type:"switch",dicData:Fe,value:1}],jo={rowKey:"id",align:"center",index:!0,border:!0,stripe:!0,searchMenuSpan:6,span:24,dialogFullscreen:!0,column:[{label:"表名",prop:"tableName",search:!0},{label:"表注释",prop:"tableComment",search:!0},{label:"表引擎",prop:"tableEngine"},{label:"表主键策略",prop:"tablePrimary"},{label:"数据库字段",prop:"editFields",hide:!0,type:"dynamic",children:{column:ot}},{label:"默认字段",prop:"defaultFields",hide:!0,type:"dynamic",children:{addBtn:!1,delBtn:!1,column:ot}}]},Ho=q("br",null,null,-1),zo=K({__name:"index",setup(e){const{bindVal:t,crudStateRefs:{formData:l,defaults:c},getDataList:n,afterOpen:a,beforeSubmit:p}=J({crudOption:Ee(),tableOption:jo});n();const{data:o}=ve().useParam("table.default.fields");a(v=>{if(l.value.defaultFields=o.value??[],v==="edit"){const f=JSON.parse(l.value.tableFields);l.value.editFields=ct(f,o.value??[],"name")}}),p(v=>{const f=[...v.defaultFields,...v.editFields];v.tableFields=JSON.stringify(f)});const r=x(!1);G(()=>{var v;(v=c.value)!=null&&v.defaultFields&&(c.value.defaultFields.display=r.value)});const{deploy:i}=Ee(),m=x(!1);async function s(v){await he.confirm("部署将自动生成数据库表，是否确认？","提示",{type:"success"}),m.value=!0,i({id:v.id}).then(()=>{X.success("部署成功"),n()}).finally(()=>{m.value=!1})}return(v,f)=>{const d=C("el-button"),_=C("el-switch"),u=C("el-tooltip"),w=C("avue-crud");return T(),P(w,te(le(k(t))),{menu:b(({row:g})=>[h(d,{type:"text",icon:"el-icon-upload",onClick:V=>s(g)},{default:b(()=>[U(" 部署 ")]),_:2},1032,["onClick"])]),"editFields-label":b(()=>[q("div",null,[U(" 数据库字段 "),Ho,h(u,{content:"显示默认字段"},{default:b(()=>[h(_,{modelValue:r.value,"onUpdate:modelValue":f[0]||(f[0]=g=>r.value=g)},null,8,["modelValue"])]),_:1})])]),_:1},16)}}}),Ga={install(e,t){e.component("FlowButton",fo).component("FlowDefinition",Lt).component("FlowDeploy",Nt).component("FlowForm",wt).component("FlowManage",To).component("FlowOps",Io).component("FlowParam",$o).component("FlowTemplate",Ko).component("FormTemplate",Bo).component("TableTemplate",zo).component("FlowWorkbench",Eo),z(e,t)}};export{no as CONFIG_DEFAULT,tt as CONFIG_PROVIDE_KEY,fo as FlowButton,Lt as FlowDefinition,Nt as FlowDeploy,wt as FlowForm,To as FlowManage,Io as FlowOps,$o as FlowParam,Ko as FlowTemplate,Eo as FlowWorkbench,Bo as FormTemplate,zo as TableTemplate,gt as Whether,Ga as default,ao as resolveFlowFormComponent,z as useConfigProvider,yt as useFlowForm,oo as useFlowFormOverlay,lo as useFlowFormWindow,Fe as whetherDic};
